spring.application.name=WorldbuildingAppV2

# ===============================================
# --- CONFIGURACIÓN DE BASE DE DATOS SQLITE ---
# ===============================================

# BD en archivo (SQLite)
# Force SQLite to use TEXT for dates and specify format. 
# This aligns Hibernate (which writes ISO strings) with the Driver (which reads them).
spring.datasource.url=jdbc:sqlite:./src/main/resources/data/worldbuilding.db?date_class=TEXT&date_string_format=yyyy-MM-dd'T'HH:mm:ss
spring.datasource.driver-class-name=org.sqlite.JDBC
spring.jpa.database-platform=org.hibernate.community.dialect.SQLiteDialect
# Update schema automatically (preserves data) - migrations handled by DatabaseMigration.java
spring.jpa.hibernate.ddl-auto=create
# Support regex in URL mappings for SPA routing
spring.mvc.pathmatch.matching-strategy=ant_path_matcher

# Consola H2 (No disponible en SQLite)
spring.h2.console.enabled=false

# DevTools Exclusion
spring.devtools.restart.exclude=static/**,public/**,**/*.db,**/*.db-journal

# Deshabilitar Open In View
spring.jpa.open-in-view=true

# ===============================================
# --- LOGGING ---
# ===============================================
logging.level.org.hibernate.SQL=INFO
logging.level.com.worldbuilding.app=DEBUG
logging.level.com.zaxxer.hikari=WARN
logging.file.name=server.log

# ===============================================
# --- RECURSOS ESTÁTICOS ---
# ===============================================
spring.web.resources.static-locations=classpath:/static/
spring.mvc.static-path-pattern=/**
spring.web.resources.add-mappings=true

# Carpeta de datos de proyectos

# ===============================================
# --- SESIÓN & COOKIES (LOCALHOST FIX) ---
# ===============================================
# Permite cookies en HTTP (no requiere HTTPS)
server.servlet.session.cookie.secure=false
# Permite cookies en contexto SameSite flexible para desarrollo
server.servlet.session.cookie.same-site=Lax
# Previene acceso via JS (seguridad estándar)
server.servlet.session.cookie.http-only=true

# ===============================================
# --- TIEMPO DE SESIÓN ---
# ===============================================
# 24 Horas para evitar desconexiones rápidas
server.servlet.session.timeout=86400s

# Disable Security Auto-Config to prevent 401s/Password generation
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration
