spring.application.name=WorldbuildingApp

# ===============================================
# --- CONFIGURACIÓN DE BASE DE DATOS (HÍBRIDA) ---
# ===============================================

# 1. Conexión a MySQL (sigue igual, necesita XAMPP/MySQL encendido)
spring.datasource.url=jdbc:mysql://localhost:3306/worldbuilding?useSSL=false&serverTimezone=UTC&createDatabaseIfNotExist=true&allowPublicKeyRetrieval=true
spring.datasource.username=root
spring.datasource.password=
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# 2. Configuración de JPA (Java Manda)
# Le dice a Hibernate que cree o actualice las TABLAS automáticamente.
spring.jpa.hibernate.ddl-auto=update

# Le decimos explícitamente a Hibernate que use el dialecto de MySQL 8+
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect

# 3. Configuración de Script SQL (SQL Manda para Procedimientos)
# Le dice a Spring que ejecute nuestro script para añadir FUNCIONES y PROCEDIMIENTOS.

# (OPCIONAL, pero recomendado)
# Esto asegura que el script se ejecute siempre, no solo en BD embebidas
spring.sql.init.mode=always
spring.sql.init.separator=//

# ¡CLAVE! Le dice a Spring que use tu archivo en lugar de "schema.sql"
spring.sql.init.schema-locations=classpath:worldbuilding.sql

# ¡CLAVE! Le dice a Spring que espere a que Hibernate (JPA) cree las tablas
# ANTES de intentar ejecutar el script de procedimientos.
spring.jpa.defer-datasource-initialization=true

# Deshabilita "Open In View" para eliminar el WARNING y mejorar rendimiento
spring.jpa.open-in-view=false

# Logging (para ver menos spam, cambiamos DEBUG a INFO)
logging.level.org.hibernate.SQL=INFO
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=INFO
logging.level.org.springframework.jdbc.core.JdbcTemplate=INFO
logging.level.org.springframework.jdbc.core.StatementCreatorUtils=INFO
logging.level.com.worldbuilding.WorldbuildingApp=DEBUG

# Propiedades de la App
app.data-folder=./data
spring.web.resources.static-locations=classpath:/static/
spring.mvc.static-path-pattern=/**
spring.web.resources.add-mappings=true