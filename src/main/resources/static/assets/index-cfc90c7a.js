function ZP(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var En=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Uk={exports:{}},Vh={},Gk={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cu=Symbol.for("react.element"),JP=Symbol.for("react.portal"),eA=Symbol.for("react.fragment"),tA=Symbol.for("react.strict_mode"),nA=Symbol.for("react.profiler"),rA=Symbol.for("react.provider"),iA=Symbol.for("react.context"),aA=Symbol.for("react.forward_ref"),sA=Symbol.for("react.suspense"),oA=Symbol.for("react.memo"),lA=Symbol.for("react.lazy"),f3=Symbol.iterator;function cA(e){return e===null||typeof e!="object"?null:(e=f3&&e[f3]||e["@@iterator"],typeof e=="function"?e:null)}var Hk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Vk=Object.assign,Wk={};function fl(e,t,n){this.props=e,this.context=t,this.refs=Wk,this.updater=n||Hk}fl.prototype.isReactComponent={};fl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};fl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Kk(){}Kk.prototype=fl.prototype;function O2(e,t,n){this.props=e,this.context=t,this.refs=Wk,this.updater=n||Hk}var P2=O2.prototype=new Kk;P2.constructor=O2;Vk(P2,fl.prototype);P2.isPureReactComponent=!0;var h3=Array.isArray,Yk=Object.prototype.hasOwnProperty,A2={current:null},Xk={key:!0,ref:!0,__self:!0,__source:!0};function Qk(e,t,n){var r,i={},a=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(a=""+t.key),t)Yk.call(t,r)&&!Xk.hasOwnProperty(r)&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];i.children=c}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:Cu,type:e,key:a,ref:s,props:i,_owner:A2.current}}function uA(e,t){return{$$typeof:Cu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function R2(e){return typeof e=="object"&&e!==null&&e.$$typeof===Cu}function dA(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var p3=/\/+/g;function rg(e,t){return typeof e=="object"&&e!==null&&e.key!=null?dA(""+e.key):t.toString(36)}function Af(e,t,n,r,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Cu:case JP:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+rg(s,0):r,h3(i)?(n="",e!=null&&(n=e.replace(p3,"$&/")+"/"),Af(i,t,n,"",function(d){return d})):i!=null&&(R2(i)&&(i=uA(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(p3,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",h3(e))for(var o=0;o<e.length;o++){a=e[o];var c=r+rg(a,o);s+=Af(a,t,n,c,i)}else if(c=cA(e),typeof c=="function")for(e=c.call(e),o=0;!(a=e.next()).done;)a=a.value,c=r+rg(a,o++),s+=Af(a,t,n,c,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Yd(e,t,n){if(e==null)return e;var r=[],i=0;return Af(e,r,"","",function(a){return t.call(n,a,i++)}),r}function fA(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var jn={current:null},Rf={transition:null},hA={ReactCurrentDispatcher:jn,ReactCurrentBatchConfig:Rf,ReactCurrentOwner:A2};function Zk(){throw Error("act(...) is not supported in production builds of React.")}Ve.Children={map:Yd,forEach:function(e,t,n){Yd(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Yd(e,function(){t++}),t},toArray:function(e){return Yd(e,function(t){return t})||[]},only:function(e){if(!R2(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ve.Component=fl;Ve.Fragment=eA;Ve.Profiler=nA;Ve.PureComponent=O2;Ve.StrictMode=tA;Ve.Suspense=sA;Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hA;Ve.act=Zk;Ve.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Vk({},e.props),i=e.key,a=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,s=A2.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)Yk.call(t,c)&&!Xk.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];r.children=o}return{$$typeof:Cu,type:e.type,key:i,ref:a,props:r,_owner:s}};Ve.createContext=function(e){return e={$$typeof:iA,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:rA,_context:e},e.Consumer=e};Ve.createElement=Qk;Ve.createFactory=function(e){var t=Qk.bind(null,e);return t.type=e,t};Ve.createRef=function(){return{current:null}};Ve.forwardRef=function(e){return{$$typeof:aA,render:e}};Ve.isValidElement=R2;Ve.lazy=function(e){return{$$typeof:lA,_payload:{_status:-1,_result:e},_init:fA}};Ve.memo=function(e,t){return{$$typeof:oA,type:e,compare:t===void 0?null:t}};Ve.startTransition=function(e){var t=Rf.transition;Rf.transition={};try{e()}finally{Rf.transition=t}};Ve.unstable_act=Zk;Ve.useCallback=function(e,t){return jn.current.useCallback(e,t)};Ve.useContext=function(e){return jn.current.useContext(e)};Ve.useDebugValue=function(){};Ve.useDeferredValue=function(e){return jn.current.useDeferredValue(e)};Ve.useEffect=function(e,t){return jn.current.useEffect(e,t)};Ve.useId=function(){return jn.current.useId()};Ve.useImperativeHandle=function(e,t,n){return jn.current.useImperativeHandle(e,t,n)};Ve.useInsertionEffect=function(e,t){return jn.current.useInsertionEffect(e,t)};Ve.useLayoutEffect=function(e,t){return jn.current.useLayoutEffect(e,t)};Ve.useMemo=function(e,t){return jn.current.useMemo(e,t)};Ve.useReducer=function(e,t,n){return jn.current.useReducer(e,t,n)};Ve.useRef=function(e){return jn.current.useRef(e)};Ve.useState=function(e){return jn.current.useState(e)};Ve.useSyncExternalStore=function(e,t,n){return jn.current.useSyncExternalStore(e,t,n)};Ve.useTransition=function(){return jn.current.useTransition()};Ve.version="18.3.1";Gk.exports=Ve;var G=Gk.exports;const oe=dl(G),pA=ZP({__proto__:null,default:oe},[G]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mA=G,gA=Symbol.for("react.element"),vA=Symbol.for("react.fragment"),yA=Object.prototype.hasOwnProperty,xA=mA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bA={key:!0,ref:!0,__self:!0,__source:!0};function Jk(e,t,n){var r,i={},a=null,s=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)yA.call(t,r)&&!bA.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:gA,type:e,key:a,ref:s,props:i,_owner:xA.current}}Vh.Fragment=vA;Vh.jsx=Jk;Vh.jsxs=Jk;Uk.exports=Vh;var l=Uk.exports,Xx={},e9={exports:{}},Jn={},t9={exports:{}},n9={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(K,H){var q=K.length;K.push(H);e:for(;0<q;){var I=q-1>>>1,z=K[I];if(0<i(z,H))K[I]=H,K[q]=z,q=I;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var H=K[0],q=K.pop();if(q!==H){K[0]=q;e:for(var I=0,z=K.length,W=z>>>1;I<W;){var Q=2*(I+1)-1,ee=K[Q],Y=Q+1,U=K[Y];if(0>i(ee,q))Y<z&&0>i(U,ee)?(K[I]=U,K[Y]=q,I=Y):(K[I]=ee,K[Q]=q,I=Q);else if(Y<z&&0>i(U,q))K[I]=U,K[Y]=q,I=Y;else break e}}return H}function i(K,H){var q=K.sortIndex-H.sortIndex;return q!==0?q:K.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var c=[],d=[],f=1,p=null,m=3,g=!1,b=!1,y=!1,N=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(K){for(var H=n(d);H!==null;){if(H.callback===null)r(d);else if(H.startTime<=K)r(d),H.sortIndex=H.expirationTime,t(c,H);else break;H=n(d)}}function w(K){if(y=!1,x(K),!b)if(n(c)!==null)b=!0,$(E);else{var H=n(d);H!==null&&V(w,H.startTime-K)}}function E(K,H){b=!1,y&&(y=!1,v(T),T=-1),g=!0;var q=m;try{for(x(H),p=n(c);p!==null&&(!(p.expirationTime>H)||K&&!C());){var I=p.callback;if(typeof I=="function"){p.callback=null,m=p.priorityLevel;var z=I(p.expirationTime<=H);H=e.unstable_now(),typeof z=="function"?p.callback=z:p===n(c)&&r(c),x(H)}else r(c);p=n(c)}if(p!==null)var W=!0;else{var Q=n(d);Q!==null&&V(w,Q.startTime-H),W=!1}return W}finally{p=null,m=q,g=!1}}var P=!1,A=null,T=-1,L=5,k=-1;function C(){return!(e.unstable_now()-k<L)}function O(){if(A!==null){var K=e.unstable_now();k=K;var H=!0;try{H=A(!0,K)}finally{H?F():(P=!1,A=null)}}else P=!1}var F;if(typeof _=="function")F=function(){_(O)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,D=M.port2;M.port1.onmessage=O,F=function(){D.postMessage(null)}}else F=function(){N(O,0)};function $(K){A=K,P||(P=!0,F())}function V(K,H){T=N(function(){K(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){b||g||(b=!0,$(E))},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(K){switch(m){case 1:case 2:case 3:var H=3;break;default:H=m}var q=m;m=H;try{return K()}finally{m=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,H){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var q=m;m=K;try{return H()}finally{m=q}},e.unstable_scheduleCallback=function(K,H,q){var I=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?I+q:I):q=I,K){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=q+z,K={id:f++,callback:H,priorityLevel:K,startTime:q,expirationTime:z,sortIndex:-1},q>I?(K.sortIndex=q,t(d,K),n(c)===null&&K===n(d)&&(y?(v(T),T=-1):y=!0,V(w,q-I))):(K.sortIndex=z,t(c,K),b||g||(b=!0,$(E))),K},e.unstable_shouldYield=C,e.unstable_wrapCallback=function(K){var H=m;return function(){var q=m;m=H;try{return K.apply(this,arguments)}finally{m=q}}}})(n9);t9.exports=n9;var $c=t9.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wA=G,Qn=$c;function ve(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r9=new Set,Zc={};function zs(e,t){Yo(e,t),Yo(e+"Capture",t)}function Yo(e,t){for(Zc[e]=t,e=0;e<t.length;e++)r9.add(t[e])}var Di=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qx=Object.prototype.hasOwnProperty,_A=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m3={},g3={};function NA(e){return Qx.call(g3,e)?!0:Qx.call(m3,e)?!1:_A.test(e)?g3[e]=!0:(m3[e]=!0,!1)}function SA(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function EA(e,t,n,r){if(t===null||typeof t>"u"||SA(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Cn(e,t,n,r,i,a,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var un={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){un[e]=new Cn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];un[t]=new Cn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){un[e]=new Cn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){un[e]=new Cn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){un[e]=new Cn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){un[e]=new Cn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){un[e]=new Cn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){un[e]=new Cn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){un[e]=new Cn(e,5,!1,e.toLowerCase(),null,!1,!1)});var I2=/[\-:]([a-z])/g;function M2(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(I2,M2);un[t]=new Cn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(I2,M2);un[t]=new Cn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(I2,M2);un[t]=new Cn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){un[e]=new Cn(e,1,!1,e.toLowerCase(),null,!1,!1)});un.xlinkHref=new Cn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){un[e]=new Cn(e,1,!1,e.toLowerCase(),null,!0,!0)});function L2(e,t,n,r){var i=un.hasOwnProperty(t)?un[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(EA(t,n,i,r)&&(n=null),r||i===null?NA(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Gi=wA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xd=Symbol.for("react.element"),Eo=Symbol.for("react.portal"),ko=Symbol.for("react.fragment"),D2=Symbol.for("react.strict_mode"),Zx=Symbol.for("react.profiler"),i9=Symbol.for("react.provider"),a9=Symbol.for("react.context"),F2=Symbol.for("react.forward_ref"),Jx=Symbol.for("react.suspense"),eb=Symbol.for("react.suspense_list"),z2=Symbol.for("react.memo"),ma=Symbol.for("react.lazy"),s9=Symbol.for("react.offscreen"),v3=Symbol.iterator;function sc(e){return e===null||typeof e!="object"?null:(e=v3&&e[v3]||e["@@iterator"],typeof e=="function"?e:null)}var Ct=Object.assign,ig;function Oc(e){if(ig===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ig=t&&t[1]||""}return`
`+ig+e}var ag=!1;function sg(e,t){if(!e||ag)return"";ag=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),a=r.stack.split(`
`),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||i[s]!==a[o]){var c=`
`+i[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=s&&0<=o);break}}}finally{ag=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Oc(e):""}function kA(e){switch(e.tag){case 5:return Oc(e.type);case 16:return Oc("Lazy");case 13:return Oc("Suspense");case 19:return Oc("SuspenseList");case 0:case 2:case 15:return e=sg(e.type,!1),e;case 11:return e=sg(e.type.render,!1),e;case 1:return e=sg(e.type,!0),e;default:return""}}function tb(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ko:return"Fragment";case Eo:return"Portal";case Zx:return"Profiler";case D2:return"StrictMode";case Jx:return"Suspense";case eb:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case a9:return(e.displayName||"Context")+".Consumer";case i9:return(e._context.displayName||"Context")+".Provider";case F2:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case z2:return t=e.displayName||null,t!==null?t:tb(e.type)||"Memo";case ma:t=e._payload,e=e._init;try{return tb(e(t))}catch{}}return null}function jA(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tb(t);case 8:return t===D2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Fa(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function o9(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function CA(e){var t=o9(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,a.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Qd(e){e._valueTracker||(e._valueTracker=CA(e))}function l9(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=o9(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Xf(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function nb(e,t){var n=t.checked;return Ct({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function y3(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Fa(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function c9(e,t){t=t.checked,t!=null&&L2(e,"checked",t,!1)}function rb(e,t){c9(e,t);var n=Fa(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ib(e,t.type,n):t.hasOwnProperty("defaultValue")&&ib(e,t.type,Fa(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function x3(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ib(e,t,n){(t!=="number"||Xf(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Pc=Array.isArray;function Fo(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Fa(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function ab(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ve(91));return Ct({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function b3(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ve(92));if(Pc(n)){if(1<n.length)throw Error(ve(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Fa(n)}}function u9(e,t){var n=Fa(t.value),r=Fa(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function w3(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function d9(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sb(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?d9(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Zd,f9=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Zd=Zd||document.createElement("div"),Zd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Zd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Jc(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Uc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},TA=["Webkit","ms","Moz","O"];Object.keys(Uc).forEach(function(e){TA.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Uc[t]=Uc[e]})});function h9(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Uc.hasOwnProperty(e)&&Uc[e]?(""+t).trim():t+"px"}function p9(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=h9(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var OA=Ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ob(e,t){if(t){if(OA[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ve(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ve(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ve(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ve(62))}}function lb(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cb=null;function B2(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ub=null,zo=null,Bo=null;function _3(e){if(e=Pu(e)){if(typeof ub!="function")throw Error(ve(280));var t=e.stateNode;t&&(t=Qh(t),ub(e.stateNode,e.type,t))}}function m9(e){zo?Bo?Bo.push(e):Bo=[e]:zo=e}function g9(){if(zo){var e=zo,t=Bo;if(Bo=zo=null,_3(e),t)for(e=0;e<t.length;e++)_3(t[e])}}function v9(e,t){return e(t)}function y9(){}var og=!1;function x9(e,t,n){if(og)return e(t,n);og=!0;try{return v9(e,t,n)}finally{og=!1,(zo!==null||Bo!==null)&&(y9(),g9())}}function eu(e,t){var n=e.stateNode;if(n===null)return null;var r=Qh(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ve(231,t,typeof n));return n}var db=!1;if(Di)try{var oc={};Object.defineProperty(oc,"passive",{get:function(){db=!0}}),window.addEventListener("test",oc,oc),window.removeEventListener("test",oc,oc)}catch{db=!1}function PA(e,t,n,r,i,a,s,o,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(f){this.onError(f)}}var Gc=!1,Qf=null,Zf=!1,fb=null,AA={onError:function(e){Gc=!0,Qf=e}};function RA(e,t,n,r,i,a,s,o,c){Gc=!1,Qf=null,PA.apply(AA,arguments)}function IA(e,t,n,r,i,a,s,o,c){if(RA.apply(this,arguments),Gc){if(Gc){var d=Qf;Gc=!1,Qf=null}else throw Error(ve(198));Zf||(Zf=!0,fb=d)}}function Bs(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function b9(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function N3(e){if(Bs(e)!==e)throw Error(ve(188))}function MA(e){var t=e.alternate;if(!t){if(t=Bs(e),t===null)throw Error(ve(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return N3(i),e;if(a===r)return N3(i),t;a=a.sibling}throw Error(ve(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,o=i.child;o;){if(o===n){s=!0,n=i,r=a;break}if(o===r){s=!0,r=i,n=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===n){s=!0,n=a,r=i;break}if(o===r){s=!0,r=a,n=i;break}o=o.sibling}if(!s)throw Error(ve(189))}}if(n.alternate!==r)throw Error(ve(190))}if(n.tag!==3)throw Error(ve(188));return n.stateNode.current===n?e:t}function w9(e){return e=MA(e),e!==null?_9(e):null}function _9(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=_9(e);if(t!==null)return t;e=e.sibling}return null}var N9=Qn.unstable_scheduleCallback,S3=Qn.unstable_cancelCallback,LA=Qn.unstable_shouldYield,DA=Qn.unstable_requestPaint,Ft=Qn.unstable_now,FA=Qn.unstable_getCurrentPriorityLevel,q2=Qn.unstable_ImmediatePriority,S9=Qn.unstable_UserBlockingPriority,Jf=Qn.unstable_NormalPriority,zA=Qn.unstable_LowPriority,E9=Qn.unstable_IdlePriority,Wh=null,oi=null;function BA(e){if(oi&&typeof oi.onCommitFiberRoot=="function")try{oi.onCommitFiberRoot(Wh,e,void 0,(e.current.flags&128)===128)}catch{}}var Mr=Math.clz32?Math.clz32:UA,qA=Math.log,$A=Math.LN2;function UA(e){return e>>>=0,e===0?32:31-(qA(e)/$A|0)|0}var Jd=64,ef=4194304;function Ac(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function eh(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,s=n&268435455;if(s!==0){var o=s&~i;o!==0?r=Ac(o):(a&=s,a!==0&&(r=Ac(a)))}else s=n&~i,s!==0?r=Ac(s):a!==0&&(r=Ac(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Mr(t),i=1<<n,r|=e[n],t&=~i;return r}function GA(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HA(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-Mr(a),o=1<<s,c=i[s];c===-1?(!(o&n)||o&r)&&(i[s]=GA(o,t)):c<=t&&(e.expiredLanes|=o),a&=~o}}function hb(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function k9(){var e=Jd;return Jd<<=1,!(Jd&4194240)&&(Jd=64),e}function lg(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Tu(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Mr(t),e[t]=n}function VA(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Mr(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}function $2(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Mr(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var st=0;function j9(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var C9,U2,T9,O9,P9,pb=!1,tf=[],ka=null,ja=null,Ca=null,tu=new Map,nu=new Map,xa=[],WA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function E3(e,t){switch(e){case"focusin":case"focusout":ka=null;break;case"dragenter":case"dragleave":ja=null;break;case"mouseover":case"mouseout":Ca=null;break;case"pointerover":case"pointerout":tu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":nu.delete(t.pointerId)}}function lc(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Pu(t),t!==null&&U2(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function KA(e,t,n,r,i){switch(t){case"focusin":return ka=lc(ka,e,t,n,r,i),!0;case"dragenter":return ja=lc(ja,e,t,n,r,i),!0;case"mouseover":return Ca=lc(Ca,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return tu.set(a,lc(tu.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,nu.set(a,lc(nu.get(a)||null,e,t,n,r,i)),!0}return!1}function A9(e){var t=_s(e.target);if(t!==null){var n=Bs(t);if(n!==null){if(t=n.tag,t===13){if(t=b9(n),t!==null){e.blockedOn=t,P9(e.priority,function(){T9(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function If(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=mb(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);cb=r,n.target.dispatchEvent(r),cb=null}else return t=Pu(n),t!==null&&U2(t),e.blockedOn=n,!1;t.shift()}return!0}function k3(e,t,n){If(e)&&n.delete(t)}function YA(){pb=!1,ka!==null&&If(ka)&&(ka=null),ja!==null&&If(ja)&&(ja=null),Ca!==null&&If(Ca)&&(Ca=null),tu.forEach(k3),nu.forEach(k3)}function cc(e,t){e.blockedOn===t&&(e.blockedOn=null,pb||(pb=!0,Qn.unstable_scheduleCallback(Qn.unstable_NormalPriority,YA)))}function ru(e){function t(i){return cc(i,e)}if(0<tf.length){cc(tf[0],e);for(var n=1;n<tf.length;n++){var r=tf[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ka!==null&&cc(ka,e),ja!==null&&cc(ja,e),Ca!==null&&cc(Ca,e),tu.forEach(t),nu.forEach(t),n=0;n<xa.length;n++)r=xa[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<xa.length&&(n=xa[0],n.blockedOn===null);)A9(n),n.blockedOn===null&&xa.shift()}var qo=Gi.ReactCurrentBatchConfig,th=!0;function XA(e,t,n,r){var i=st,a=qo.transition;qo.transition=null;try{st=1,G2(e,t,n,r)}finally{st=i,qo.transition=a}}function QA(e,t,n,r){var i=st,a=qo.transition;qo.transition=null;try{st=4,G2(e,t,n,r)}finally{st=i,qo.transition=a}}function G2(e,t,n,r){if(th){var i=mb(e,t,n,r);if(i===null)yg(e,t,r,nh,n),E3(e,r);else if(KA(i,e,t,n,r))r.stopPropagation();else if(E3(e,r),t&4&&-1<WA.indexOf(e)){for(;i!==null;){var a=Pu(i);if(a!==null&&C9(a),a=mb(e,t,n,r),a===null&&yg(e,t,r,nh,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else yg(e,t,r,null,n)}}var nh=null;function mb(e,t,n,r){if(nh=null,e=B2(r),e=_s(e),e!==null)if(t=Bs(e),t===null)e=null;else if(n=t.tag,n===13){if(e=b9(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return nh=e,null}function R9(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(FA()){case q2:return 1;case S9:return 4;case Jf:case zA:return 16;case E9:return 536870912;default:return 16}default:return 16}}var Na=null,H2=null,Mf=null;function I9(){if(Mf)return Mf;var e,t=H2,n=t.length,r,i="value"in Na?Na.value:Na.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[a-r];r++);return Mf=i.slice(e,1<r?1-r:void 0)}function Lf(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function nf(){return!0}function j3(){return!1}function er(e){function t(n,r,i,a,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?nf:j3,this.isPropagationStopped=j3,this}return Ct(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=nf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=nf)},persist:function(){},isPersistent:nf}),t}var hl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},V2=er(hl),Ou=Ct({},hl,{view:0,detail:0}),ZA=er(Ou),cg,ug,uc,Kh=Ct({},Ou,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:W2,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==uc&&(uc&&e.type==="mousemove"?(cg=e.screenX-uc.screenX,ug=e.screenY-uc.screenY):ug=cg=0,uc=e),cg)},movementY:function(e){return"movementY"in e?e.movementY:ug}}),C3=er(Kh),JA=Ct({},Kh,{dataTransfer:0}),eR=er(JA),tR=Ct({},Ou,{relatedTarget:0}),dg=er(tR),nR=Ct({},hl,{animationName:0,elapsedTime:0,pseudoElement:0}),rR=er(nR),iR=Ct({},hl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),aR=er(iR),sR=Ct({},hl,{data:0}),T3=er(sR),oR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uR(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=cR[e])?!!t[e]:!1}function W2(){return uR}var dR=Ct({},Ou,{key:function(e){if(e.key){var t=oR[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Lf(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?lR[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:W2,charCode:function(e){return e.type==="keypress"?Lf(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Lf(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),fR=er(dR),hR=Ct({},Kh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),O3=er(hR),pR=Ct({},Ou,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:W2}),mR=er(pR),gR=Ct({},hl,{propertyName:0,elapsedTime:0,pseudoElement:0}),vR=er(gR),yR=Ct({},Kh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),xR=er(yR),bR=[9,13,27,32],K2=Di&&"CompositionEvent"in window,Hc=null;Di&&"documentMode"in document&&(Hc=document.documentMode);var wR=Di&&"TextEvent"in window&&!Hc,M9=Di&&(!K2||Hc&&8<Hc&&11>=Hc),P3=String.fromCharCode(32),A3=!1;function L9(e,t){switch(e){case"keyup":return bR.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function D9(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var jo=!1;function _R(e,t){switch(e){case"compositionend":return D9(t);case"keypress":return t.which!==32?null:(A3=!0,P3);case"textInput":return e=t.data,e===P3&&A3?null:e;default:return null}}function NR(e,t){if(jo)return e==="compositionend"||!K2&&L9(e,t)?(e=I9(),Mf=H2=Na=null,jo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return M9&&t.locale!=="ko"?null:t.data;default:return null}}var SR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function R3(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!SR[e.type]:t==="textarea"}function F9(e,t,n,r){m9(r),t=rh(t,"onChange"),0<t.length&&(n=new V2("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Vc=null,iu=null;function ER(e){Y9(e,0)}function Yh(e){var t=Oo(e);if(l9(t))return e}function kR(e,t){if(e==="change")return t}var z9=!1;if(Di){var fg;if(Di){var hg="oninput"in document;if(!hg){var I3=document.createElement("div");I3.setAttribute("oninput","return;"),hg=typeof I3.oninput=="function"}fg=hg}else fg=!1;z9=fg&&(!document.documentMode||9<document.documentMode)}function M3(){Vc&&(Vc.detachEvent("onpropertychange",B9),iu=Vc=null)}function B9(e){if(e.propertyName==="value"&&Yh(iu)){var t=[];F9(t,iu,e,B2(e)),x9(ER,t)}}function jR(e,t,n){e==="focusin"?(M3(),Vc=t,iu=n,Vc.attachEvent("onpropertychange",B9)):e==="focusout"&&M3()}function CR(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Yh(iu)}function TR(e,t){if(e==="click")return Yh(t)}function OR(e,t){if(e==="input"||e==="change")return Yh(t)}function PR(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zr=typeof Object.is=="function"?Object.is:PR;function au(e,t){if(zr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Qx.call(t,i)||!zr(e[i],t[i]))return!1}return!0}function L3(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function D3(e,t){var n=L3(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=L3(n)}}function q9(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?q9(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function $9(){for(var e=window,t=Xf();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Xf(e.document)}return t}function Y2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function AR(e){var t=$9(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&q9(n.ownerDocument.documentElement,n)){if(r!==null&&Y2(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=D3(n,a);var s=D3(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var RR=Di&&"documentMode"in document&&11>=document.documentMode,Co=null,gb=null,Wc=null,vb=!1;function F3(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vb||Co==null||Co!==Xf(r)||(r=Co,"selectionStart"in r&&Y2(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Wc&&au(Wc,r)||(Wc=r,r=rh(gb,"onSelect"),0<r.length&&(t=new V2("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Co)))}function rf(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var To={animationend:rf("Animation","AnimationEnd"),animationiteration:rf("Animation","AnimationIteration"),animationstart:rf("Animation","AnimationStart"),transitionend:rf("Transition","TransitionEnd")},pg={},U9={};Di&&(U9=document.createElement("div").style,"AnimationEvent"in window||(delete To.animationend.animation,delete To.animationiteration.animation,delete To.animationstart.animation),"TransitionEvent"in window||delete To.transitionend.transition);function Xh(e){if(pg[e])return pg[e];if(!To[e])return e;var t=To[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in U9)return pg[e]=t[n];return e}var G9=Xh("animationend"),H9=Xh("animationiteration"),V9=Xh("animationstart"),W9=Xh("transitionend"),K9=new Map,z3="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ga(e,t){K9.set(e,t),zs(t,[e])}for(var mg=0;mg<z3.length;mg++){var gg=z3[mg],IR=gg.toLowerCase(),MR=gg[0].toUpperCase()+gg.slice(1);Ga(IR,"on"+MR)}Ga(G9,"onAnimationEnd");Ga(H9,"onAnimationIteration");Ga(V9,"onAnimationStart");Ga("dblclick","onDoubleClick");Ga("focusin","onFocus");Ga("focusout","onBlur");Ga(W9,"onTransitionEnd");Yo("onMouseEnter",["mouseout","mouseover"]);Yo("onMouseLeave",["mouseout","mouseover"]);Yo("onPointerEnter",["pointerout","pointerover"]);Yo("onPointerLeave",["pointerout","pointerover"]);zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zs("onBeforeInput",["compositionend","keypress","textInput","paste"]);zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rc));function B3(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,IA(r,t,void 0,e),e.currentTarget=null}function Y9(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==a&&i.isPropagationStopped())break e;B3(i,o,d),a=c}else for(s=0;s<r.length;s++){if(o=r[s],c=o.instance,d=o.currentTarget,o=o.listener,c!==a&&i.isPropagationStopped())break e;B3(i,o,d),a=c}}}if(Zf)throw e=fb,Zf=!1,fb=null,e}function pt(e,t){var n=t[_b];n===void 0&&(n=t[_b]=new Set);var r=e+"__bubble";n.has(r)||(X9(t,e,2,!1),n.add(r))}function vg(e,t,n){var r=0;t&&(r|=4),X9(n,e,r,t)}var af="_reactListening"+Math.random().toString(36).slice(2);function su(e){if(!e[af]){e[af]=!0,r9.forEach(function(n){n!=="selectionchange"&&(LR.has(n)||vg(n,!1,e),vg(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[af]||(t[af]=!0,vg("selectionchange",!1,t))}}function X9(e,t,n,r){switch(R9(t)){case 1:var i=XA;break;case 4:i=QA;break;default:i=G2}n=i.bind(null,t,n,e),i=void 0,!db||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function yg(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;s=s.return}for(;o!==null;){if(s=_s(o),s===null)return;if(c=s.tag,c===5||c===6){r=a=s;continue e}o=o.parentNode}}r=r.return}x9(function(){var d=a,f=B2(n),p=[];e:{var m=K9.get(e);if(m!==void 0){var g=V2,b=e;switch(e){case"keypress":if(Lf(n)===0)break e;case"keydown":case"keyup":g=fR;break;case"focusin":b="focus",g=dg;break;case"focusout":b="blur",g=dg;break;case"beforeblur":case"afterblur":g=dg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=C3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=eR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=mR;break;case G9:case H9:case V9:g=rR;break;case W9:g=vR;break;case"scroll":g=ZA;break;case"wheel":g=xR;break;case"copy":case"cut":case"paste":g=aR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=O3}var y=(t&4)!==0,N=!y&&e==="scroll",v=y?m!==null?m+"Capture":null:m;y=[];for(var _=d,x;_!==null;){x=_;var w=x.stateNode;if(x.tag===5&&w!==null&&(x=w,v!==null&&(w=eu(_,v),w!=null&&y.push(ou(_,w,x)))),N)break;_=_.return}0<y.length&&(m=new g(m,b,null,n,f),p.push({event:m,listeners:y}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",m&&n!==cb&&(b=n.relatedTarget||n.fromElement)&&(_s(b)||b[Fi]))break e;if((g||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,g?(b=n.relatedTarget||n.toElement,g=d,b=b?_s(b):null,b!==null&&(N=Bs(b),b!==N||b.tag!==5&&b.tag!==6)&&(b=null)):(g=null,b=d),g!==b)){if(y=C3,w="onMouseLeave",v="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(y=O3,w="onPointerLeave",v="onPointerEnter",_="pointer"),N=g==null?m:Oo(g),x=b==null?m:Oo(b),m=new y(w,_+"leave",g,n,f),m.target=N,m.relatedTarget=x,w=null,_s(f)===d&&(y=new y(v,_+"enter",b,n,f),y.target=x,y.relatedTarget=N,w=y),N=w,g&&b)t:{for(y=g,v=b,_=0,x=y;x;x=vo(x))_++;for(x=0,w=v;w;w=vo(w))x++;for(;0<_-x;)y=vo(y),_--;for(;0<x-_;)v=vo(v),x--;for(;_--;){if(y===v||v!==null&&y===v.alternate)break t;y=vo(y),v=vo(v)}y=null}else y=null;g!==null&&q3(p,m,g,y,!1),b!==null&&N!==null&&q3(p,N,b,y,!0)}}e:{if(m=d?Oo(d):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var E=kR;else if(R3(m))if(z9)E=OR;else{E=CR;var P=jR}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(E=TR);if(E&&(E=E(e,d))){F9(p,E,n,f);break e}P&&P(e,m,d),e==="focusout"&&(P=m._wrapperState)&&P.controlled&&m.type==="number"&&ib(m,"number",m.value)}switch(P=d?Oo(d):window,e){case"focusin":(R3(P)||P.contentEditable==="true")&&(Co=P,gb=d,Wc=null);break;case"focusout":Wc=gb=Co=null;break;case"mousedown":vb=!0;break;case"contextmenu":case"mouseup":case"dragend":vb=!1,F3(p,n,f);break;case"selectionchange":if(RR)break;case"keydown":case"keyup":F3(p,n,f)}var A;if(K2)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else jo?L9(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(M9&&n.locale!=="ko"&&(jo||T!=="onCompositionStart"?T==="onCompositionEnd"&&jo&&(A=I9()):(Na=f,H2="value"in Na?Na.value:Na.textContent,jo=!0)),P=rh(d,T),0<P.length&&(T=new T3(T,e,null,n,f),p.push({event:T,listeners:P}),A?T.data=A:(A=D9(n),A!==null&&(T.data=A)))),(A=wR?_R(e,n):NR(e,n))&&(d=rh(d,"onBeforeInput"),0<d.length&&(f=new T3("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=A))}Y9(p,t)})}function ou(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rh(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=eu(e,n),a!=null&&r.unshift(ou(e,a,i)),a=eu(e,t),a!=null&&r.push(ou(e,a,i))),e=e.return}return r}function vo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function q3(e,t,n,r,i){for(var a=t._reactName,s=[];n!==null&&n!==r;){var o=n,c=o.alternate,d=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&d!==null&&(o=d,i?(c=eu(n,a),c!=null&&s.unshift(ou(n,c,o))):i||(c=eu(n,a),c!=null&&s.push(ou(n,c,o)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var DR=/\r\n?/g,FR=/\u0000|\uFFFD/g;function $3(e){return(typeof e=="string"?e:""+e).replace(DR,`
`).replace(FR,"")}function sf(e,t,n){if(t=$3(t),$3(e)!==t&&n)throw Error(ve(425))}function ih(){}var yb=null,xb=null;function bb(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var wb=typeof setTimeout=="function"?setTimeout:void 0,zR=typeof clearTimeout=="function"?clearTimeout:void 0,U3=typeof Promise=="function"?Promise:void 0,BR=typeof queueMicrotask=="function"?queueMicrotask:typeof U3<"u"?function(e){return U3.resolve(null).then(e).catch(qR)}:wb;function qR(e){setTimeout(function(){throw e})}function xg(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),ru(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ru(t)}function Ta(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function G3(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var pl=Math.random().toString(36).slice(2),ii="__reactFiber$"+pl,lu="__reactProps$"+pl,Fi="__reactContainer$"+pl,_b="__reactEvents$"+pl,$R="__reactListeners$"+pl,UR="__reactHandles$"+pl;function _s(e){var t=e[ii];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Fi]||n[ii]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=G3(e);e!==null;){if(n=e[ii])return n;e=G3(e)}return t}e=n,n=e.parentNode}return null}function Pu(e){return e=e[ii]||e[Fi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Oo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ve(33))}function Qh(e){return e[lu]||null}var Nb=[],Po=-1;function Ha(e){return{current:e}}function gt(e){0>Po||(e.current=Nb[Po],Nb[Po]=null,Po--)}function dt(e,t){Po++,Nb[Po]=e.current,e.current=t}var za={},bn=Ha(za),zn=Ha(!1),As=za;function Xo(e,t){var n=e.type.contextTypes;if(!n)return za;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Bn(e){return e=e.childContextTypes,e!=null}function ah(){gt(zn),gt(bn)}function H3(e,t,n){if(bn.current!==za)throw Error(ve(168));dt(bn,t),dt(zn,n)}function Q9(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(ve(108,jA(e)||"Unknown",i));return Ct({},n,r)}function sh(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||za,As=bn.current,dt(bn,e),dt(zn,zn.current),!0}function V3(e,t,n){var r=e.stateNode;if(!r)throw Error(ve(169));n?(e=Q9(e,t,As),r.__reactInternalMemoizedMergedChildContext=e,gt(zn),gt(bn),dt(bn,e)):gt(zn),dt(zn,n)}var Ti=null,Zh=!1,bg=!1;function Z9(e){Ti===null?Ti=[e]:Ti.push(e)}function GR(e){Zh=!0,Z9(e)}function Va(){if(!bg&&Ti!==null){bg=!0;var e=0,t=st;try{var n=Ti;for(st=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ti=null,Zh=!1}catch(i){throw Ti!==null&&(Ti=Ti.slice(e+1)),N9(q2,Va),i}finally{st=t,bg=!1}}return null}var Ao=[],Ro=0,oh=null,lh=0,fr=[],hr=0,Rs=null,Oi=1,Pi="";function ys(e,t){Ao[Ro++]=lh,Ao[Ro++]=oh,oh=e,lh=t}function J9(e,t,n){fr[hr++]=Oi,fr[hr++]=Pi,fr[hr++]=Rs,Rs=e;var r=Oi;e=Pi;var i=32-Mr(r)-1;r&=~(1<<i),n+=1;var a=32-Mr(t)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Oi=1<<32-Mr(t)+i|n<<i|r,Pi=a+e}else Oi=1<<a|n<<i|r,Pi=e}function X2(e){e.return!==null&&(ys(e,1),J9(e,1,0))}function Q2(e){for(;e===oh;)oh=Ao[--Ro],Ao[Ro]=null,lh=Ao[--Ro],Ao[Ro]=null;for(;e===Rs;)Rs=fr[--hr],fr[hr]=null,Pi=fr[--hr],fr[hr]=null,Oi=fr[--hr],fr[hr]=null}var Xn=null,Yn=null,wt=!1,Ar=null;function ej(e,t){var n=pr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function W3(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Xn=e,Yn=Ta(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Xn=e,Yn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Rs!==null?{id:Oi,overflow:Pi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=pr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Xn=e,Yn=null,!0):!1;default:return!1}}function Sb(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Eb(e){if(wt){var t=Yn;if(t){var n=t;if(!W3(e,t)){if(Sb(e))throw Error(ve(418));t=Ta(n.nextSibling);var r=Xn;t&&W3(e,t)?ej(r,n):(e.flags=e.flags&-4097|2,wt=!1,Xn=e)}}else{if(Sb(e))throw Error(ve(418));e.flags=e.flags&-4097|2,wt=!1,Xn=e}}}function K3(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Xn=e}function of(e){if(e!==Xn)return!1;if(!wt)return K3(e),wt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!bb(e.type,e.memoizedProps)),t&&(t=Yn)){if(Sb(e))throw tj(),Error(ve(418));for(;t;)ej(e,t),t=Ta(t.nextSibling)}if(K3(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ve(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Yn=Ta(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Yn=null}}else Yn=Xn?Ta(e.stateNode.nextSibling):null;return!0}function tj(){for(var e=Yn;e;)e=Ta(e.nextSibling)}function Qo(){Yn=Xn=null,wt=!1}function Z2(e){Ar===null?Ar=[e]:Ar.push(e)}var HR=Gi.ReactCurrentBatchConfig;function dc(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ve(309));var r=n.stateNode}if(!r)throw Error(ve(147,e));var i=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(s){var o=i.refs;s===null?delete o[a]:o[a]=s},t._stringRef=a,t)}if(typeof e!="string")throw Error(ve(284));if(!n._owner)throw Error(ve(290,e))}return e}function lf(e,t){throw e=Object.prototype.toString.call(t),Error(ve(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Y3(e){var t=e._init;return t(e._payload)}function nj(e){function t(v,_){if(e){var x=v.deletions;x===null?(v.deletions=[_],v.flags|=16):x.push(_)}}function n(v,_){if(!e)return null;for(;_!==null;)t(v,_),_=_.sibling;return null}function r(v,_){for(v=new Map;_!==null;)_.key!==null?v.set(_.key,_):v.set(_.index,_),_=_.sibling;return v}function i(v,_){return v=Ra(v,_),v.index=0,v.sibling=null,v}function a(v,_,x){return v.index=x,e?(x=v.alternate,x!==null?(x=x.index,x<_?(v.flags|=2,_):x):(v.flags|=2,_)):(v.flags|=1048576,_)}function s(v){return e&&v.alternate===null&&(v.flags|=2),v}function o(v,_,x,w){return _===null||_.tag!==6?(_=jg(x,v.mode,w),_.return=v,_):(_=i(_,x),_.return=v,_)}function c(v,_,x,w){var E=x.type;return E===ko?f(v,_,x.props.children,w,x.key):_!==null&&(_.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===ma&&Y3(E)===_.type)?(w=i(_,x.props),w.ref=dc(v,_,x),w.return=v,w):(w=Uf(x.type,x.key,x.props,null,v.mode,w),w.ref=dc(v,_,x),w.return=v,w)}function d(v,_,x,w){return _===null||_.tag!==4||_.stateNode.containerInfo!==x.containerInfo||_.stateNode.implementation!==x.implementation?(_=Cg(x,v.mode,w),_.return=v,_):(_=i(_,x.children||[]),_.return=v,_)}function f(v,_,x,w,E){return _===null||_.tag!==7?(_=Os(x,v.mode,w,E),_.return=v,_):(_=i(_,x),_.return=v,_)}function p(v,_,x){if(typeof _=="string"&&_!==""||typeof _=="number")return _=jg(""+_,v.mode,x),_.return=v,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Xd:return x=Uf(_.type,_.key,_.props,null,v.mode,x),x.ref=dc(v,null,_),x.return=v,x;case Eo:return _=Cg(_,v.mode,x),_.return=v,_;case ma:var w=_._init;return p(v,w(_._payload),x)}if(Pc(_)||sc(_))return _=Os(_,v.mode,x,null),_.return=v,_;lf(v,_)}return null}function m(v,_,x,w){var E=_!==null?_.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return E!==null?null:o(v,_,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Xd:return x.key===E?c(v,_,x,w):null;case Eo:return x.key===E?d(v,_,x,w):null;case ma:return E=x._init,m(v,_,E(x._payload),w)}if(Pc(x)||sc(x))return E!==null?null:f(v,_,x,w,null);lf(v,x)}return null}function g(v,_,x,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return v=v.get(x)||null,o(_,v,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Xd:return v=v.get(w.key===null?x:w.key)||null,c(_,v,w,E);case Eo:return v=v.get(w.key===null?x:w.key)||null,d(_,v,w,E);case ma:var P=w._init;return g(v,_,x,P(w._payload),E)}if(Pc(w)||sc(w))return v=v.get(x)||null,f(_,v,w,E,null);lf(_,w)}return null}function b(v,_,x,w){for(var E=null,P=null,A=_,T=_=0,L=null;A!==null&&T<x.length;T++){A.index>T?(L=A,A=null):L=A.sibling;var k=m(v,A,x[T],w);if(k===null){A===null&&(A=L);break}e&&A&&k.alternate===null&&t(v,A),_=a(k,_,T),P===null?E=k:P.sibling=k,P=k,A=L}if(T===x.length)return n(v,A),wt&&ys(v,T),E;if(A===null){for(;T<x.length;T++)A=p(v,x[T],w),A!==null&&(_=a(A,_,T),P===null?E=A:P.sibling=A,P=A);return wt&&ys(v,T),E}for(A=r(v,A);T<x.length;T++)L=g(A,v,T,x[T],w),L!==null&&(e&&L.alternate!==null&&A.delete(L.key===null?T:L.key),_=a(L,_,T),P===null?E=L:P.sibling=L,P=L);return e&&A.forEach(function(C){return t(v,C)}),wt&&ys(v,T),E}function y(v,_,x,w){var E=sc(x);if(typeof E!="function")throw Error(ve(150));if(x=E.call(x),x==null)throw Error(ve(151));for(var P=E=null,A=_,T=_=0,L=null,k=x.next();A!==null&&!k.done;T++,k=x.next()){A.index>T?(L=A,A=null):L=A.sibling;var C=m(v,A,k.value,w);if(C===null){A===null&&(A=L);break}e&&A&&C.alternate===null&&t(v,A),_=a(C,_,T),P===null?E=C:P.sibling=C,P=C,A=L}if(k.done)return n(v,A),wt&&ys(v,T),E;if(A===null){for(;!k.done;T++,k=x.next())k=p(v,k.value,w),k!==null&&(_=a(k,_,T),P===null?E=k:P.sibling=k,P=k);return wt&&ys(v,T),E}for(A=r(v,A);!k.done;T++,k=x.next())k=g(A,v,T,k.value,w),k!==null&&(e&&k.alternate!==null&&A.delete(k.key===null?T:k.key),_=a(k,_,T),P===null?E=k:P.sibling=k,P=k);return e&&A.forEach(function(O){return t(v,O)}),wt&&ys(v,T),E}function N(v,_,x,w){if(typeof x=="object"&&x!==null&&x.type===ko&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Xd:e:{for(var E=x.key,P=_;P!==null;){if(P.key===E){if(E=x.type,E===ko){if(P.tag===7){n(v,P.sibling),_=i(P,x.props.children),_.return=v,v=_;break e}}else if(P.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===ma&&Y3(E)===P.type){n(v,P.sibling),_=i(P,x.props),_.ref=dc(v,P,x),_.return=v,v=_;break e}n(v,P);break}else t(v,P);P=P.sibling}x.type===ko?(_=Os(x.props.children,v.mode,w,x.key),_.return=v,v=_):(w=Uf(x.type,x.key,x.props,null,v.mode,w),w.ref=dc(v,_,x),w.return=v,v=w)}return s(v);case Eo:e:{for(P=x.key;_!==null;){if(_.key===P)if(_.tag===4&&_.stateNode.containerInfo===x.containerInfo&&_.stateNode.implementation===x.implementation){n(v,_.sibling),_=i(_,x.children||[]),_.return=v,v=_;break e}else{n(v,_);break}else t(v,_);_=_.sibling}_=Cg(x,v.mode,w),_.return=v,v=_}return s(v);case ma:return P=x._init,N(v,_,P(x._payload),w)}if(Pc(x))return b(v,_,x,w);if(sc(x))return y(v,_,x,w);lf(v,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,_!==null&&_.tag===6?(n(v,_.sibling),_=i(_,x),_.return=v,v=_):(n(v,_),_=jg(x,v.mode,w),_.return=v,v=_),s(v)):n(v,_)}return N}var Zo=nj(!0),rj=nj(!1),ch=Ha(null),uh=null,Io=null,J2=null;function ew(){J2=Io=uh=null}function tw(e){var t=ch.current;gt(ch),e._currentValue=t}function kb(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function $o(e,t){uh=e,J2=Io=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Dn=!0),e.firstContext=null)}function vr(e){var t=e._currentValue;if(J2!==e)if(e={context:e,memoizedValue:t,next:null},Io===null){if(uh===null)throw Error(ve(308));Io=e,uh.dependencies={lanes:0,firstContext:e}}else Io=Io.next=e;return t}var Ns=null;function nw(e){Ns===null?Ns=[e]:Ns.push(e)}function ij(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,nw(t)):(n.next=i.next,i.next=n),t.interleaved=n,zi(e,r)}function zi(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ga=!1;function rw(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function aj(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Mi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Xe&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,zi(e,n)}return i=r.interleaved,i===null?(t.next=t,nw(r)):(t.next=i.next,i.next=t),r.interleaved=t,zi(e,n)}function Df(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,$2(e,n)}}function X3(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=s:a=a.next=s,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function dh(e,t,n,r){var i=e.updateQueue;ga=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,d=c.next;c.next=null,s===null?a=d:s.next=d,s=c;var f=e.alternate;f!==null&&(f=f.updateQueue,o=f.lastBaseUpdate,o!==s&&(o===null?f.firstBaseUpdate=d:o.next=d,f.lastBaseUpdate=c))}if(a!==null){var p=i.baseState;s=0,f=d=c=null,o=a;do{var m=o.lane,g=o.eventTime;if((r&m)===m){f!==null&&(f=f.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var b=e,y=o;switch(m=t,g=n,y.tag){case 1:if(b=y.payload,typeof b=="function"){p=b.call(g,p,m);break e}p=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=y.payload,m=typeof b=="function"?b.call(g,p,m):b,m==null)break e;p=Ct({},p,m);break e;case 2:ga=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,m=i.effects,m===null?i.effects=[o]:m.push(o))}else g={eventTime:g,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},f===null?(d=f=g,c=p):f=f.next=g,s|=m;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;m=o,o=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(1);if(f===null&&(c=p),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=f,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Ms|=s,e.lanes=s,e.memoizedState=p}}function Q3(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ve(191,i));i.call(r)}}}var Au={},li=Ha(Au),cu=Ha(Au),uu=Ha(Au);function Ss(e){if(e===Au)throw Error(ve(174));return e}function iw(e,t){switch(dt(uu,t),dt(cu,e),dt(li,Au),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:sb(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=sb(t,e)}gt(li),dt(li,t)}function Jo(){gt(li),gt(cu),gt(uu)}function sj(e){Ss(uu.current);var t=Ss(li.current),n=sb(t,e.type);t!==n&&(dt(cu,e),dt(li,n))}function aw(e){cu.current===e&&(gt(li),gt(cu))}var kt=Ha(0);function fh(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var wg=[];function sw(){for(var e=0;e<wg.length;e++)wg[e]._workInProgressVersionPrimary=null;wg.length=0}var Ff=Gi.ReactCurrentDispatcher,_g=Gi.ReactCurrentBatchConfig,Is=0,jt=null,Vt=null,tn=null,hh=!1,Kc=!1,du=0,VR=0;function vn(){throw Error(ve(321))}function ow(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!zr(e[n],t[n]))return!1;return!0}function lw(e,t,n,r,i,a){if(Is=a,jt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ff.current=e===null||e.memoizedState===null?XR:QR,e=n(r,i),Kc){a=0;do{if(Kc=!1,du=0,25<=a)throw Error(ve(301));a+=1,tn=Vt=null,t.updateQueue=null,Ff.current=ZR,e=n(r,i)}while(Kc)}if(Ff.current=ph,t=Vt!==null&&Vt.next!==null,Is=0,tn=Vt=jt=null,hh=!1,t)throw Error(ve(300));return e}function cw(){var e=du!==0;return du=0,e}function ni(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?jt.memoizedState=tn=e:tn=tn.next=e,tn}function yr(){if(Vt===null){var e=jt.alternate;e=e!==null?e.memoizedState:null}else e=Vt.next;var t=tn===null?jt.memoizedState:tn.next;if(t!==null)tn=t,Vt=e;else{if(e===null)throw Error(ve(310));Vt=e,e={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},tn===null?jt.memoizedState=tn=e:tn=tn.next=e}return tn}function fu(e,t){return typeof t=="function"?t(e):t}function Ng(e){var t=yr(),n=t.queue;if(n===null)throw Error(ve(311));n.lastRenderedReducer=e;var r=Vt,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var o=s=null,c=null,d=a;do{var f=d.lane;if((Is&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=p,s=r):c=c.next=p,jt.lanes|=f,Ms|=f}d=d.next}while(d!==null&&d!==a);c===null?s=r:c.next=o,zr(r,t.memoizedState)||(Dn=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do a=i.lane,jt.lanes|=a,Ms|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Sg(e){var t=yr(),n=t.queue;if(n===null)throw Error(ve(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do a=e(a,s.action),s=s.next;while(s!==i);zr(a,t.memoizedState)||(Dn=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function oj(){}function lj(e,t){var n=jt,r=yr(),i=t(),a=!zr(r.memoizedState,i);if(a&&(r.memoizedState=i,Dn=!0),r=r.queue,uw(dj.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||tn!==null&&tn.memoizedState.tag&1){if(n.flags|=2048,hu(9,uj.bind(null,n,r,i,t),void 0,null),nn===null)throw Error(ve(349));Is&30||cj(n,t,i)}return i}function cj(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=jt.updateQueue,t===null?(t={lastEffect:null,stores:null},jt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function uj(e,t,n,r){t.value=n,t.getSnapshot=r,fj(t)&&hj(e)}function dj(e,t,n){return n(function(){fj(t)&&hj(e)})}function fj(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!zr(e,n)}catch{return!0}}function hj(e){var t=zi(e,1);t!==null&&Lr(t,e,1,-1)}function Z3(e){var t=ni();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fu,lastRenderedState:e},t.queue=e,e=e.dispatch=YR.bind(null,jt,e),[t.memoizedState,e]}function hu(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=jt.updateQueue,t===null?(t={lastEffect:null,stores:null},jt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function pj(){return yr().memoizedState}function zf(e,t,n,r){var i=ni();jt.flags|=e,i.memoizedState=hu(1|t,n,void 0,r===void 0?null:r)}function Jh(e,t,n,r){var i=yr();r=r===void 0?null:r;var a=void 0;if(Vt!==null){var s=Vt.memoizedState;if(a=s.destroy,r!==null&&ow(r,s.deps)){i.memoizedState=hu(t,n,a,r);return}}jt.flags|=e,i.memoizedState=hu(1|t,n,a,r)}function J3(e,t){return zf(8390656,8,e,t)}function uw(e,t){return Jh(2048,8,e,t)}function mj(e,t){return Jh(4,2,e,t)}function gj(e,t){return Jh(4,4,e,t)}function vj(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function yj(e,t,n){return n=n!=null?n.concat([e]):null,Jh(4,4,vj.bind(null,t,e),n)}function dw(){}function xj(e,t){var n=yr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ow(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function bj(e,t){var n=yr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ow(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function wj(e,t,n){return Is&21?(zr(n,t)||(n=k9(),jt.lanes|=n,Ms|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Dn=!0),e.memoizedState=n)}function WR(e,t){var n=st;st=n!==0&&4>n?n:4,e(!0);var r=_g.transition;_g.transition={};try{e(!1),t()}finally{st=n,_g.transition=r}}function _j(){return yr().memoizedState}function KR(e,t,n){var r=Aa(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Nj(e))Sj(t,n);else if(n=ij(e,t,n,r),n!==null){var i=kn();Lr(n,e,r,i),Ej(n,t,r)}}function YR(e,t,n){var r=Aa(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Nj(e))Sj(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var s=t.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,zr(o,s)){var c=t.interleaved;c===null?(i.next=i,nw(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=ij(e,t,i,r),n!==null&&(i=kn(),Lr(n,e,r,i),Ej(n,t,r))}}function Nj(e){var t=e.alternate;return e===jt||t!==null&&t===jt}function Sj(e,t){Kc=hh=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ej(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,$2(e,n)}}var ph={readContext:vr,useCallback:vn,useContext:vn,useEffect:vn,useImperativeHandle:vn,useInsertionEffect:vn,useLayoutEffect:vn,useMemo:vn,useReducer:vn,useRef:vn,useState:vn,useDebugValue:vn,useDeferredValue:vn,useTransition:vn,useMutableSource:vn,useSyncExternalStore:vn,useId:vn,unstable_isNewReconciler:!1},XR={readContext:vr,useCallback:function(e,t){return ni().memoizedState=[e,t===void 0?null:t],e},useContext:vr,useEffect:J3,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,zf(4194308,4,vj.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zf(4194308,4,e,t)},useInsertionEffect:function(e,t){return zf(4,2,e,t)},useMemo:function(e,t){var n=ni();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ni();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=KR.bind(null,jt,e),[r.memoizedState,e]},useRef:function(e){var t=ni();return e={current:e},t.memoizedState=e},useState:Z3,useDebugValue:dw,useDeferredValue:function(e){return ni().memoizedState=e},useTransition:function(){var e=Z3(!1),t=e[0];return e=WR.bind(null,e[1]),ni().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=jt,i=ni();if(wt){if(n===void 0)throw Error(ve(407));n=n()}else{if(n=t(),nn===null)throw Error(ve(349));Is&30||cj(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,J3(dj.bind(null,r,a,e),[e]),r.flags|=2048,hu(9,uj.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ni(),t=nn.identifierPrefix;if(wt){var n=Pi,r=Oi;n=(r&~(1<<32-Mr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=du++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=VR++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},QR={readContext:vr,useCallback:xj,useContext:vr,useEffect:uw,useImperativeHandle:yj,useInsertionEffect:mj,useLayoutEffect:gj,useMemo:bj,useReducer:Ng,useRef:pj,useState:function(){return Ng(fu)},useDebugValue:dw,useDeferredValue:function(e){var t=yr();return wj(t,Vt.memoizedState,e)},useTransition:function(){var e=Ng(fu)[0],t=yr().memoizedState;return[e,t]},useMutableSource:oj,useSyncExternalStore:lj,useId:_j,unstable_isNewReconciler:!1},ZR={readContext:vr,useCallback:xj,useContext:vr,useEffect:uw,useImperativeHandle:yj,useInsertionEffect:mj,useLayoutEffect:gj,useMemo:bj,useReducer:Sg,useRef:pj,useState:function(){return Sg(fu)},useDebugValue:dw,useDeferredValue:function(e){var t=yr();return Vt===null?t.memoizedState=e:wj(t,Vt.memoizedState,e)},useTransition:function(){var e=Sg(fu)[0],t=yr().memoizedState;return[e,t]},useMutableSource:oj,useSyncExternalStore:lj,useId:_j,unstable_isNewReconciler:!1};function Or(e,t){if(e&&e.defaultProps){t=Ct({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function jb(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ct({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ep={isMounted:function(e){return(e=e._reactInternals)?Bs(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=kn(),i=Aa(e),a=Mi(r,i);a.payload=t,n!=null&&(a.callback=n),t=Oa(e,a,i),t!==null&&(Lr(t,e,i,r),Df(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=kn(),i=Aa(e),a=Mi(r,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Oa(e,a,i),t!==null&&(Lr(t,e,i,r),Df(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=kn(),r=Aa(e),i=Mi(n,r);i.tag=2,t!=null&&(i.callback=t),t=Oa(e,i,r),t!==null&&(Lr(t,e,r,n),Df(t,e,r))}};function e4(e,t,n,r,i,a,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,s):t.prototype&&t.prototype.isPureReactComponent?!au(n,r)||!au(i,a):!0}function kj(e,t,n){var r=!1,i=za,a=t.contextType;return typeof a=="object"&&a!==null?a=vr(a):(i=Bn(t)?As:bn.current,r=t.contextTypes,a=(r=r!=null)?Xo(e,i):za),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ep,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function t4(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ep.enqueueReplaceState(t,t.state,null)}function Cb(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},rw(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=vr(a):(a=Bn(t)?As:bn.current,i.context=Xo(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(jb(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&ep.enqueueReplaceState(i,i.state,null),dh(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function el(e,t){try{var n="",r=t;do n+=kA(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function Eg(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Tb(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var JR=typeof WeakMap=="function"?WeakMap:Map;function jj(e,t,n){n=Mi(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){gh||(gh=!0,zb=r),Tb(e,t)},n}function Cj(e,t,n){n=Mi(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Tb(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Tb(e,t),typeof r!="function"&&(Pa===null?Pa=new Set([this]):Pa.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function n4(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new JR;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=hI.bind(null,e,t,n),t.then(e,e))}function r4(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function i4(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Mi(-1,1),t.tag=2,Oa(n,t,1))),n.lanes|=1),e)}var eI=Gi.ReactCurrentOwner,Dn=!1;function Sn(e,t,n,r){t.child=e===null?rj(t,null,n,r):Zo(t,e.child,n,r)}function a4(e,t,n,r,i){n=n.render;var a=t.ref;return $o(t,i),r=lw(e,t,n,r,a,i),n=cw(),e!==null&&!Dn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Bi(e,t,i)):(wt&&n&&X2(t),t.flags|=1,Sn(e,t,r,i),t.child)}function s4(e,t,n,r,i){if(e===null){var a=n.type;return typeof a=="function"&&!xw(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,Tj(e,t,a,r,i)):(e=Uf(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var s=a.memoizedProps;if(n=n.compare,n=n!==null?n:au,n(s,r)&&e.ref===t.ref)return Bi(e,t,i)}return t.flags|=1,e=Ra(a,r),e.ref=t.ref,e.return=t,t.child=e}function Tj(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(au(a,r)&&e.ref===t.ref)if(Dn=!1,t.pendingProps=r=a,(e.lanes&i)!==0)e.flags&131072&&(Dn=!0);else return t.lanes=e.lanes,Bi(e,t,i)}return Ob(e,t,n,r,i)}function Oj(e,t,n){var r=t.pendingProps,i=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},dt(Lo,Wn),Wn|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,dt(Lo,Wn),Wn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,dt(Lo,Wn),Wn|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,dt(Lo,Wn),Wn|=r;return Sn(e,t,i,n),t.child}function Pj(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ob(e,t,n,r,i){var a=Bn(n)?As:bn.current;return a=Xo(t,a),$o(t,i),n=lw(e,t,n,r,a,i),r=cw(),e!==null&&!Dn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Bi(e,t,i)):(wt&&r&&X2(t),t.flags|=1,Sn(e,t,n,i),t.child)}function o4(e,t,n,r,i){if(Bn(n)){var a=!0;sh(t)}else a=!1;if($o(t,i),t.stateNode===null)Bf(e,t),kj(t,n,r),Cb(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,o=t.memoizedProps;s.props=o;var c=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=vr(d):(d=Bn(n)?As:bn.current,d=Xo(t,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==r||c!==d)&&t4(t,s,r,d),ga=!1;var m=t.memoizedState;s.state=m,dh(t,r,s,i),c=t.memoizedState,o!==r||m!==c||zn.current||ga?(typeof f=="function"&&(jb(t,n,f,r),c=t.memoizedState),(o=ga||e4(t,n,o,r,m,c,d))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=d,r=o):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,aj(e,t),o=t.memoizedProps,d=t.type===t.elementType?o:Or(t.type,o),s.props=d,p=t.pendingProps,m=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=vr(c):(c=Bn(n)?As:bn.current,c=Xo(t,c));var g=n.getDerivedStateFromProps;(f=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==p||m!==c)&&t4(t,s,r,c),ga=!1,m=t.memoizedState,s.state=m,dh(t,r,s,i);var b=t.memoizedState;o!==p||m!==b||zn.current||ga?(typeof g=="function"&&(jb(t,n,g,r),b=t.memoizedState),(d=ga||e4(t,n,d,r,m,b,c)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,b,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,b,c)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=b),s.props=r,s.state=b,s.context=c,r=d):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return Pb(e,t,n,r,a,i)}function Pb(e,t,n,r,i,a){Pj(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&V3(t,n,!1),Bi(e,t,a);r=t.stateNode,eI.current=t;var o=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=Zo(t,e.child,null,a),t.child=Zo(t,null,o,a)):Sn(e,t,o,a),t.memoizedState=r.state,i&&V3(t,n,!0),t.child}function Aj(e){var t=e.stateNode;t.pendingContext?H3(e,t.pendingContext,t.pendingContext!==t.context):t.context&&H3(e,t.context,!1),iw(e,t.containerInfo)}function l4(e,t,n,r,i){return Qo(),Z2(i),t.flags|=256,Sn(e,t,n,r),t.child}var Ab={dehydrated:null,treeContext:null,retryLane:0};function Rb(e){return{baseLanes:e,cachePool:null,transitions:null}}function Rj(e,t,n){var r=t.pendingProps,i=kt.current,a=!1,s=(t.flags&128)!==0,o;if((o=s)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),dt(kt,i&1),e===null)return Eb(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,a?(r=t.mode,a=t.child,s={mode:"hidden",children:s},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=rp(s,r,0,null),e=Os(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Rb(n),t.memoizedState=Ab,e):fw(t,s));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return tI(e,t,s,r,o,i,n);if(a){a=r.fallback,s=t.mode,i=e.child,o=i.sibling;var c={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Ra(i,c),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=Ra(o,a):(a=Os(a,s,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,s=e.child.memoizedState,s=s===null?Rb(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=e.childLanes&~n,t.memoizedState=Ab,r}return a=e.child,e=a.sibling,r=Ra(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function fw(e,t){return t=rp({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function cf(e,t,n,r){return r!==null&&Z2(r),Zo(t,e.child,null,n),e=fw(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function tI(e,t,n,r,i,a,s){if(n)return t.flags&256?(t.flags&=-257,r=Eg(Error(ve(422))),cf(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=rp({mode:"visible",children:r.children},i,0,null),a=Os(a,i,s,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&Zo(t,e.child,null,s),t.child.memoizedState=Rb(s),t.memoizedState=Ab,a);if(!(t.mode&1))return cf(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,a=Error(ve(419)),r=Eg(a,r,void 0),cf(e,t,s,r)}if(o=(s&e.childLanes)!==0,Dn||o){if(r=nn,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,zi(e,i),Lr(r,e,i,-1))}return yw(),r=Eg(Error(ve(421))),cf(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=pI.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Yn=Ta(i.nextSibling),Xn=t,wt=!0,Ar=null,e!==null&&(fr[hr++]=Oi,fr[hr++]=Pi,fr[hr++]=Rs,Oi=e.id,Pi=e.overflow,Rs=t),t=fw(t,r.children),t.flags|=4096,t)}function c4(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),kb(e.return,t,n)}function kg(e,t,n,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Ij(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Sn(e,t,r.children,n),r=kt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&c4(e,n,t);else if(e.tag===19)c4(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(dt(kt,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&fh(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),kg(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&fh(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}kg(t,!0,n,null,a);break;case"together":kg(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bf(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Bi(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ms|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ve(153));if(t.child!==null){for(e=t.child,n=Ra(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ra(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function nI(e,t,n){switch(t.tag){case 3:Aj(t),Qo();break;case 5:sj(t);break;case 1:Bn(t.type)&&sh(t);break;case 4:iw(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;dt(ch,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(dt(kt,kt.current&1),t.flags|=128,null):n&t.child.childLanes?Rj(e,t,n):(dt(kt,kt.current&1),e=Bi(e,t,n),e!==null?e.sibling:null);dt(kt,kt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Ij(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),dt(kt,kt.current),r)break;return null;case 22:case 23:return t.lanes=0,Oj(e,t,n)}return Bi(e,t,n)}var Mj,Ib,Lj,Dj;Mj=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ib=function(){};Lj=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ss(li.current);var a=null;switch(n){case"input":i=nb(e,i),r=nb(e,r),a=[];break;case"select":i=Ct({},i,{value:void 0}),r=Ct({},r,{value:void 0}),a=[];break;case"textarea":i=ab(e,i),r=ab(e,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ih)}ob(n,r);var s;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var o=i[d];for(s in o)o.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Zc.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var c=r[d];if(o=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(s in o)!o.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&o[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Zc.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&pt("scroll",e),a||o===c||(a=[])):(a=a||[]).push(d,c))}n&&(a=a||[]).push("style",n);var d=a;(t.updateQueue=d)&&(t.flags|=4)}};Dj=function(e,t,n,r){n!==r&&(t.flags|=4)};function fc(e,t){if(!wt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function yn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rI(e,t,n){var r=t.pendingProps;switch(Q2(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yn(t),null;case 1:return Bn(t.type)&&ah(),yn(t),null;case 3:return r=t.stateNode,Jo(),gt(zn),gt(bn),sw(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(of(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ar!==null&&($b(Ar),Ar=null))),Ib(e,t),yn(t),null;case 5:aw(t);var i=Ss(uu.current);if(n=t.type,e!==null&&t.stateNode!=null)Lj(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ve(166));return yn(t),null}if(e=Ss(li.current),of(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[ii]=t,r[lu]=a,e=(t.mode&1)!==0,n){case"dialog":pt("cancel",r),pt("close",r);break;case"iframe":case"object":case"embed":pt("load",r);break;case"video":case"audio":for(i=0;i<Rc.length;i++)pt(Rc[i],r);break;case"source":pt("error",r);break;case"img":case"image":case"link":pt("error",r),pt("load",r);break;case"details":pt("toggle",r);break;case"input":y3(r,a),pt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},pt("invalid",r);break;case"textarea":b3(r,a),pt("invalid",r)}ob(n,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="children"?typeof o=="string"?r.textContent!==o&&(a.suppressHydrationWarning!==!0&&sf(r.textContent,o,e),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&sf(r.textContent,o,e),i=["children",""+o]):Zc.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&pt("scroll",r)}switch(n){case"input":Qd(r),x3(r,a,!0);break;case"textarea":Qd(r),w3(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=ih)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=d9(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[ii]=t,e[lu]=r,Mj(e,t,!1,!1),t.stateNode=e;e:{switch(s=lb(n,r),n){case"dialog":pt("cancel",e),pt("close",e),i=r;break;case"iframe":case"object":case"embed":pt("load",e),i=r;break;case"video":case"audio":for(i=0;i<Rc.length;i++)pt(Rc[i],e);i=r;break;case"source":pt("error",e),i=r;break;case"img":case"image":case"link":pt("error",e),pt("load",e),i=r;break;case"details":pt("toggle",e),i=r;break;case"input":y3(e,r),i=nb(e,r),pt("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Ct({},r,{value:void 0}),pt("invalid",e);break;case"textarea":b3(e,r),i=ab(e,r),pt("invalid",e);break;default:i=r}ob(n,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="style"?p9(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&f9(e,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Jc(e,c):typeof c=="number"&&Jc(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Zc.hasOwnProperty(a)?c!=null&&a==="onScroll"&&pt("scroll",e):c!=null&&L2(e,a,c,s))}switch(n){case"input":Qd(e),x3(e,r,!1);break;case"textarea":Qd(e),w3(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Fa(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?Fo(e,!!r.multiple,a,!1):r.defaultValue!=null&&Fo(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=ih)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return yn(t),null;case 6:if(e&&t.stateNode!=null)Dj(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ve(166));if(n=Ss(uu.current),Ss(li.current),of(t)){if(r=t.stateNode,n=t.memoizedProps,r[ii]=t,(a=r.nodeValue!==n)&&(e=Xn,e!==null))switch(e.tag){case 3:sf(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&sf(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ii]=t,t.stateNode=r}return yn(t),null;case 13:if(gt(kt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(wt&&Yn!==null&&t.mode&1&&!(t.flags&128))tj(),Qo(),t.flags|=98560,a=!1;else if(a=of(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(ve(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ve(317));a[ii]=t}else Qo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;yn(t),a=!1}else Ar!==null&&($b(Ar),Ar=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||kt.current&1?Wt===0&&(Wt=3):yw())),t.updateQueue!==null&&(t.flags|=4),yn(t),null);case 4:return Jo(),Ib(e,t),e===null&&su(t.stateNode.containerInfo),yn(t),null;case 10:return tw(t.type._context),yn(t),null;case 17:return Bn(t.type)&&ah(),yn(t),null;case 19:if(gt(kt),a=t.memoizedState,a===null)return yn(t),null;if(r=(t.flags&128)!==0,s=a.rendering,s===null)if(r)fc(a,!1);else{if(Wt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=fh(e),s!==null){for(t.flags|=128,fc(a,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,e=s.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return dt(kt,kt.current&1|2),t.child}e=e.sibling}a.tail!==null&&Ft()>tl&&(t.flags|=128,r=!0,fc(a,!1),t.lanes=4194304)}else{if(!r)if(e=fh(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),fc(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!wt)return yn(t),null}else 2*Ft()-a.renderingStartTime>tl&&n!==1073741824&&(t.flags|=128,r=!0,fc(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(n=a.last,n!==null?n.sibling=s:t.child=s,a.last=s)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ft(),t.sibling=null,n=kt.current,dt(kt,r?n&1|2:n&1),t):(yn(t),null);case 22:case 23:return vw(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Wn&1073741824&&(yn(t),t.subtreeFlags&6&&(t.flags|=8192)):yn(t),null;case 24:return null;case 25:return null}throw Error(ve(156,t.tag))}function iI(e,t){switch(Q2(t),t.tag){case 1:return Bn(t.type)&&ah(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Jo(),gt(zn),gt(bn),sw(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return aw(t),null;case 13:if(gt(kt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ve(340));Qo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return gt(kt),null;case 4:return Jo(),null;case 10:return tw(t.type._context),null;case 22:case 23:return vw(),null;case 24:return null;default:return null}}var uf=!1,xn=!1,aI=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function Mo(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){At(e,t,r)}else n.current=null}function Mb(e,t,n){try{n()}catch(r){At(e,t,r)}}var u4=!1;function sI(e,t){if(yb=th,e=$9(),Y2(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var s=0,o=-1,c=-1,d=0,f=0,p=e,m=null;t:for(;;){for(var g;p!==n||i!==0&&p.nodeType!==3||(o=s+i),p!==a||r!==0&&p.nodeType!==3||(c=s+r),p.nodeType===3&&(s+=p.nodeValue.length),(g=p.firstChild)!==null;)m=p,p=g;for(;;){if(p===e)break t;if(m===n&&++d===i&&(o=s),m===a&&++f===r&&(c=s),(g=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=g}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(xb={focusedElem:e,selectionRange:n},th=!1,Ee=t;Ee!==null;)if(t=Ee,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ee=e;else for(;Ee!==null;){t=Ee;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var y=b.memoizedProps,N=b.memoizedState,v=t.stateNode,_=v.getSnapshotBeforeUpdate(t.elementType===t.type?y:Or(t.type,y),N);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ve(163))}}catch(w){At(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,Ee=e;break}Ee=t.return}return b=u4,u4=!1,b}function Yc(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&Mb(t,n,a)}i=i.next}while(i!==r)}}function tp(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Lb(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Fj(e){var t=e.alternate;t!==null&&(e.alternate=null,Fj(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ii],delete t[lu],delete t[_b],delete t[$R],delete t[UR])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function zj(e){return e.tag===5||e.tag===3||e.tag===4}function d4(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||zj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Db(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ih));else if(r!==4&&(e=e.child,e!==null))for(Db(e,t,n),e=e.sibling;e!==null;)Db(e,t,n),e=e.sibling}function Fb(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Fb(e,t,n),e=e.sibling;e!==null;)Fb(e,t,n),e=e.sibling}var ln=null,Pr=!1;function la(e,t,n){for(n=n.child;n!==null;)Bj(e,t,n),n=n.sibling}function Bj(e,t,n){if(oi&&typeof oi.onCommitFiberUnmount=="function")try{oi.onCommitFiberUnmount(Wh,n)}catch{}switch(n.tag){case 5:xn||Mo(n,t);case 6:var r=ln,i=Pr;ln=null,la(e,t,n),ln=r,Pr=i,ln!==null&&(Pr?(e=ln,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ln.removeChild(n.stateNode));break;case 18:ln!==null&&(Pr?(e=ln,n=n.stateNode,e.nodeType===8?xg(e.parentNode,n):e.nodeType===1&&xg(e,n),ru(e)):xg(ln,n.stateNode));break;case 4:r=ln,i=Pr,ln=n.stateNode.containerInfo,Pr=!0,la(e,t,n),ln=r,Pr=i;break;case 0:case 11:case 14:case 15:if(!xn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&Mb(n,t,s),i=i.next}while(i!==r)}la(e,t,n);break;case 1:if(!xn&&(Mo(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){At(n,t,o)}la(e,t,n);break;case 21:la(e,t,n);break;case 22:n.mode&1?(xn=(r=xn)||n.memoizedState!==null,la(e,t,n),xn=r):la(e,t,n);break;default:la(e,t,n)}}function f4(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new aI),t.forEach(function(r){var i=mI.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Cr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,o=s;e:for(;o!==null;){switch(o.tag){case 5:ln=o.stateNode,Pr=!1;break e;case 3:ln=o.stateNode.containerInfo,Pr=!0;break e;case 4:ln=o.stateNode.containerInfo,Pr=!0;break e}o=o.return}if(ln===null)throw Error(ve(160));Bj(a,s,i),ln=null,Pr=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){At(i,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)qj(t,e),t=t.sibling}function qj(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Cr(t,e),Jr(e),r&4){try{Yc(3,e,e.return),tp(3,e)}catch(y){At(e,e.return,y)}try{Yc(5,e,e.return)}catch(y){At(e,e.return,y)}}break;case 1:Cr(t,e),Jr(e),r&512&&n!==null&&Mo(n,n.return);break;case 5:if(Cr(t,e),Jr(e),r&512&&n!==null&&Mo(n,n.return),e.flags&32){var i=e.stateNode;try{Jc(i,"")}catch(y){At(e,e.return,y)}}if(r&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,s=n!==null?n.memoizedProps:a,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&c9(i,a),lb(o,s);var d=lb(o,a);for(s=0;s<c.length;s+=2){var f=c[s],p=c[s+1];f==="style"?p9(i,p):f==="dangerouslySetInnerHTML"?f9(i,p):f==="children"?Jc(i,p):L2(i,f,p,d)}switch(o){case"input":rb(i,a);break;case"textarea":u9(i,a);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var g=a.value;g!=null?Fo(i,!!a.multiple,g,!1):m!==!!a.multiple&&(a.defaultValue!=null?Fo(i,!!a.multiple,a.defaultValue,!0):Fo(i,!!a.multiple,a.multiple?[]:"",!1))}i[lu]=a}catch(y){At(e,e.return,y)}}break;case 6:if(Cr(t,e),Jr(e),r&4){if(e.stateNode===null)throw Error(ve(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(y){At(e,e.return,y)}}break;case 3:if(Cr(t,e),Jr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ru(t.containerInfo)}catch(y){At(e,e.return,y)}break;case 4:Cr(t,e),Jr(e);break;case 13:Cr(t,e),Jr(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(mw=Ft())),r&4&&f4(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(xn=(d=xn)||f,Cr(t,e),xn=d):Cr(t,e),Jr(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!f&&e.mode&1)for(Ee=e,f=e.child;f!==null;){for(p=Ee=f;Ee!==null;){switch(m=Ee,g=m.child,m.tag){case 0:case 11:case 14:case 15:Yc(4,m,m.return);break;case 1:Mo(m,m.return);var b=m.stateNode;if(typeof b.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(y){At(r,n,y)}}break;case 5:Mo(m,m.return);break;case 22:if(m.memoizedState!==null){p4(p);continue}}g!==null?(g.return=m,Ee=g):p4(p)}f=f.sibling}e:for(f=null,p=e;;){if(p.tag===5){if(f===null){f=p;try{i=p.stateNode,d?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=p.stateNode,c=p.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=h9("display",s))}catch(y){At(e,e.return,y)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(y){At(e,e.return,y)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Cr(t,e),Jr(e),r&4&&f4(e);break;case 21:break;default:Cr(t,e),Jr(e)}}function Jr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(zj(n)){var r=n;break e}n=n.return}throw Error(ve(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Jc(i,""),r.flags&=-33);var a=d4(e);Fb(e,a,i);break;case 3:case 4:var s=r.stateNode.containerInfo,o=d4(e);Db(e,o,s);break;default:throw Error(ve(161))}}catch(c){At(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function oI(e,t,n){Ee=e,$j(e)}function $j(e,t,n){for(var r=(e.mode&1)!==0;Ee!==null;){var i=Ee,a=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||uf;if(!s){var o=i.alternate,c=o!==null&&o.memoizedState!==null||xn;o=uf;var d=xn;if(uf=s,(xn=c)&&!d)for(Ee=i;Ee!==null;)s=Ee,c=s.child,s.tag===22&&s.memoizedState!==null?m4(i):c!==null?(c.return=s,Ee=c):m4(i);for(;a!==null;)Ee=a,$j(a),a=a.sibling;Ee=i,uf=o,xn=d}h4(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Ee=a):h4(e)}}function h4(e){for(;Ee!==null;){var t=Ee;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:xn||tp(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!xn)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Or(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Q3(t,a,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Q3(t,s,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&ru(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ve(163))}xn||t.flags&512&&Lb(t)}catch(m){At(t,t.return,m)}}if(t===e){Ee=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ee=n;break}Ee=t.return}}function p4(e){for(;Ee!==null;){var t=Ee;if(t===e){Ee=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ee=n;break}Ee=t.return}}function m4(e){for(;Ee!==null;){var t=Ee;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{tp(4,t)}catch(c){At(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(c){At(t,i,c)}}var a=t.return;try{Lb(t)}catch(c){At(t,a,c)}break;case 5:var s=t.return;try{Lb(t)}catch(c){At(t,s,c)}}}catch(c){At(t,t.return,c)}if(t===e){Ee=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Ee=o;break}Ee=t.return}}var lI=Math.ceil,mh=Gi.ReactCurrentDispatcher,hw=Gi.ReactCurrentOwner,gr=Gi.ReactCurrentBatchConfig,Xe=0,nn=null,qt=null,cn=0,Wn=0,Lo=Ha(0),Wt=0,pu=null,Ms=0,np=0,pw=0,Xc=null,Ln=null,mw=0,tl=1/0,Ci=null,gh=!1,zb=null,Pa=null,df=!1,Sa=null,vh=0,Qc=0,Bb=null,qf=-1,$f=0;function kn(){return Xe&6?Ft():qf!==-1?qf:qf=Ft()}function Aa(e){return e.mode&1?Xe&2&&cn!==0?cn&-cn:HR.transition!==null?($f===0&&($f=k9()),$f):(e=st,e!==0||(e=window.event,e=e===void 0?16:R9(e.type)),e):1}function Lr(e,t,n,r){if(50<Qc)throw Qc=0,Bb=null,Error(ve(185));Tu(e,n,r),(!(Xe&2)||e!==nn)&&(e===nn&&(!(Xe&2)&&(np|=n),Wt===4&&ba(e,cn)),qn(e,r),n===1&&Xe===0&&!(t.mode&1)&&(tl=Ft()+500,Zh&&Va()))}function qn(e,t){var n=e.callbackNode;HA(e,t);var r=eh(e,e===nn?cn:0);if(r===0)n!==null&&S3(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&S3(n),t===1)e.tag===0?GR(g4.bind(null,e)):Z9(g4.bind(null,e)),BR(function(){!(Xe&6)&&Va()}),n=null;else{switch(j9(r)){case 1:n=q2;break;case 4:n=S9;break;case 16:n=Jf;break;case 536870912:n=E9;break;default:n=Jf}n=Xj(n,Uj.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Uj(e,t){if(qf=-1,$f=0,Xe&6)throw Error(ve(327));var n=e.callbackNode;if(Uo()&&e.callbackNode!==n)return null;var r=eh(e,e===nn?cn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=yh(e,r);else{t=r;var i=Xe;Xe|=2;var a=Hj();(nn!==e||cn!==t)&&(Ci=null,tl=Ft()+500,Ts(e,t));do try{dI();break}catch(o){Gj(e,o)}while(1);ew(),mh.current=a,Xe=i,qt!==null?t=0:(nn=null,cn=0,t=Wt)}if(t!==0){if(t===2&&(i=hb(e),i!==0&&(r=i,t=qb(e,i))),t===1)throw n=pu,Ts(e,0),ba(e,r),qn(e,Ft()),n;if(t===6)ba(e,r);else{if(i=e.current.alternate,!(r&30)&&!cI(i)&&(t=yh(e,r),t===2&&(a=hb(e),a!==0&&(r=a,t=qb(e,a))),t===1))throw n=pu,Ts(e,0),ba(e,r),qn(e,Ft()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(ve(345));case 2:xs(e,Ln,Ci);break;case 3:if(ba(e,r),(r&130023424)===r&&(t=mw+500-Ft(),10<t)){if(eh(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){kn(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=wb(xs.bind(null,e,Ln,Ci),t);break}xs(e,Ln,Ci);break;case 4:if(ba(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-Mr(r);a=1<<s,s=t[s],s>i&&(i=s),r&=~a}if(r=i,r=Ft()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*lI(r/1960))-r,10<r){e.timeoutHandle=wb(xs.bind(null,e,Ln,Ci),r);break}xs(e,Ln,Ci);break;case 5:xs(e,Ln,Ci);break;default:throw Error(ve(329))}}}return qn(e,Ft()),e.callbackNode===n?Uj.bind(null,e):null}function qb(e,t){var n=Xc;return e.current.memoizedState.isDehydrated&&(Ts(e,t).flags|=256),e=yh(e,t),e!==2&&(t=Ln,Ln=n,t!==null&&$b(t)),e}function $b(e){Ln===null?Ln=e:Ln.push.apply(Ln,e)}function cI(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!zr(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ba(e,t){for(t&=~pw,t&=~np,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Mr(t),r=1<<n;e[n]=-1,t&=~r}}function g4(e){if(Xe&6)throw Error(ve(327));Uo();var t=eh(e,0);if(!(t&1))return qn(e,Ft()),null;var n=yh(e,t);if(e.tag!==0&&n===2){var r=hb(e);r!==0&&(t=r,n=qb(e,r))}if(n===1)throw n=pu,Ts(e,0),ba(e,t),qn(e,Ft()),n;if(n===6)throw Error(ve(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xs(e,Ln,Ci),qn(e,Ft()),null}function gw(e,t){var n=Xe;Xe|=1;try{return e(t)}finally{Xe=n,Xe===0&&(tl=Ft()+500,Zh&&Va())}}function Ls(e){Sa!==null&&Sa.tag===0&&!(Xe&6)&&Uo();var t=Xe;Xe|=1;var n=gr.transition,r=st;try{if(gr.transition=null,st=1,e)return e()}finally{st=r,gr.transition=n,Xe=t,!(Xe&6)&&Va()}}function vw(){Wn=Lo.current,gt(Lo)}function Ts(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,zR(n)),qt!==null)for(n=qt.return;n!==null;){var r=n;switch(Q2(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ah();break;case 3:Jo(),gt(zn),gt(bn),sw();break;case 5:aw(r);break;case 4:Jo();break;case 13:gt(kt);break;case 19:gt(kt);break;case 10:tw(r.type._context);break;case 22:case 23:vw()}n=n.return}if(nn=e,qt=e=Ra(e.current,null),cn=Wn=t,Wt=0,pu=null,pw=np=Ms=0,Ln=Xc=null,Ns!==null){for(t=0;t<Ns.length;t++)if(n=Ns[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var s=a.next;a.next=i,r.next=s}n.pending=r}Ns=null}return e}function Gj(e,t){do{var n=qt;try{if(ew(),Ff.current=ph,hh){for(var r=jt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}hh=!1}if(Is=0,tn=Vt=jt=null,Kc=!1,du=0,hw.current=null,n===null||n.return===null){Wt=1,pu=t,qt=null;break}e:{var a=e,s=n.return,o=n,c=t;if(t=cn,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=o,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var g=r4(s);if(g!==null){g.flags&=-257,i4(g,s,o,a,t),g.mode&1&&n4(a,d,t),t=g,c=d;var b=t.updateQueue;if(b===null){var y=new Set;y.add(c),t.updateQueue=y}else b.add(c);break e}else{if(!(t&1)){n4(a,d,t),yw();break e}c=Error(ve(426))}}else if(wt&&o.mode&1){var N=r4(s);if(N!==null){!(N.flags&65536)&&(N.flags|=256),i4(N,s,o,a,t),Z2(el(c,o));break e}}a=c=el(c,o),Wt!==4&&(Wt=2),Xc===null?Xc=[a]:Xc.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var v=jj(a,c,t);X3(a,v);break e;case 1:o=c;var _=a.type,x=a.stateNode;if(!(a.flags&128)&&(typeof _.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Pa===null||!Pa.has(x)))){a.flags|=65536,t&=-t,a.lanes|=t;var w=Cj(a,o,t);X3(a,w);break e}}a=a.return}while(a!==null)}Wj(n)}catch(E){t=E,qt===n&&n!==null&&(qt=n=n.return);continue}break}while(1)}function Hj(){var e=mh.current;return mh.current=ph,e===null?ph:e}function yw(){(Wt===0||Wt===3||Wt===2)&&(Wt=4),nn===null||!(Ms&268435455)&&!(np&268435455)||ba(nn,cn)}function yh(e,t){var n=Xe;Xe|=2;var r=Hj();(nn!==e||cn!==t)&&(Ci=null,Ts(e,t));do try{uI();break}catch(i){Gj(e,i)}while(1);if(ew(),Xe=n,mh.current=r,qt!==null)throw Error(ve(261));return nn=null,cn=0,Wt}function uI(){for(;qt!==null;)Vj(qt)}function dI(){for(;qt!==null&&!LA();)Vj(qt)}function Vj(e){var t=Yj(e.alternate,e,Wn);e.memoizedProps=e.pendingProps,t===null?Wj(e):qt=t,hw.current=null}function Wj(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=iI(n,t),n!==null){n.flags&=32767,qt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Wt=6,qt=null;return}}else if(n=rI(n,t,Wn),n!==null){qt=n;return}if(t=t.sibling,t!==null){qt=t;return}qt=t=e}while(t!==null);Wt===0&&(Wt=5)}function xs(e,t,n){var r=st,i=gr.transition;try{gr.transition=null,st=1,fI(e,t,n,r)}finally{gr.transition=i,st=r}return null}function fI(e,t,n,r){do Uo();while(Sa!==null);if(Xe&6)throw Error(ve(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ve(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(VA(e,a),e===nn&&(qt=nn=null,cn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||df||(df=!0,Xj(Jf,function(){return Uo(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=gr.transition,gr.transition=null;var s=st;st=1;var o=Xe;Xe|=4,hw.current=null,sI(e,n),qj(n,e),AR(xb),th=!!yb,xb=yb=null,e.current=n,oI(n),DA(),Xe=o,st=s,gr.transition=a}else e.current=n;if(df&&(df=!1,Sa=e,vh=i),a=e.pendingLanes,a===0&&(Pa=null),BA(n.stateNode),qn(e,Ft()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(gh)throw gh=!1,e=zb,zb=null,e;return vh&1&&e.tag!==0&&Uo(),a=e.pendingLanes,a&1?e===Bb?Qc++:(Qc=0,Bb=e):Qc=0,Va(),null}function Uo(){if(Sa!==null){var e=j9(vh),t=gr.transition,n=st;try{if(gr.transition=null,st=16>e?16:e,Sa===null)var r=!1;else{if(e=Sa,Sa=null,vh=0,Xe&6)throw Error(ve(331));var i=Xe;for(Xe|=4,Ee=e.current;Ee!==null;){var a=Ee,s=a.child;if(Ee.flags&16){var o=a.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(Ee=d;Ee!==null;){var f=Ee;switch(f.tag){case 0:case 11:case 15:Yc(8,f,a)}var p=f.child;if(p!==null)p.return=f,Ee=p;else for(;Ee!==null;){f=Ee;var m=f.sibling,g=f.return;if(Fj(f),f===d){Ee=null;break}if(m!==null){m.return=g,Ee=m;break}Ee=g}}}var b=a.alternate;if(b!==null){var y=b.child;if(y!==null){b.child=null;do{var N=y.sibling;y.sibling=null,y=N}while(y!==null)}}Ee=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,Ee=s;else e:for(;Ee!==null;){if(a=Ee,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Yc(9,a,a.return)}var v=a.sibling;if(v!==null){v.return=a.return,Ee=v;break e}Ee=a.return}}var _=e.current;for(Ee=_;Ee!==null;){s=Ee;var x=s.child;if(s.subtreeFlags&2064&&x!==null)x.return=s,Ee=x;else e:for(s=_;Ee!==null;){if(o=Ee,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:tp(9,o)}}catch(E){At(o,o.return,E)}if(o===s){Ee=null;break e}var w=o.sibling;if(w!==null){w.return=o.return,Ee=w;break e}Ee=o.return}}if(Xe=i,Va(),oi&&typeof oi.onPostCommitFiberRoot=="function")try{oi.onPostCommitFiberRoot(Wh,e)}catch{}r=!0}return r}finally{st=n,gr.transition=t}}return!1}function v4(e,t,n){t=el(n,t),t=jj(e,t,1),e=Oa(e,t,1),t=kn(),e!==null&&(Tu(e,1,t),qn(e,t))}function At(e,t,n){if(e.tag===3)v4(e,e,n);else for(;t!==null;){if(t.tag===3){v4(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Pa===null||!Pa.has(r))){e=el(n,e),e=Cj(t,e,1),t=Oa(t,e,1),e=kn(),t!==null&&(Tu(t,1,e),qn(t,e));break}}t=t.return}}function hI(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=kn(),e.pingedLanes|=e.suspendedLanes&n,nn===e&&(cn&n)===n&&(Wt===4||Wt===3&&(cn&130023424)===cn&&500>Ft()-mw?Ts(e,0):pw|=n),qn(e,t)}function Kj(e,t){t===0&&(e.mode&1?(t=ef,ef<<=1,!(ef&130023424)&&(ef=4194304)):t=1);var n=kn();e=zi(e,t),e!==null&&(Tu(e,t,n),qn(e,n))}function pI(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Kj(e,n)}function mI(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ve(314))}r!==null&&r.delete(t),Kj(e,n)}var Yj;Yj=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||zn.current)Dn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Dn=!1,nI(e,t,n);Dn=!!(e.flags&131072)}else Dn=!1,wt&&t.flags&1048576&&J9(t,lh,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Bf(e,t),e=t.pendingProps;var i=Xo(t,bn.current);$o(t,n),i=lw(null,t,r,e,i,n);var a=cw();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Bn(r)?(a=!0,sh(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,rw(t),i.updater=ep,t.stateNode=i,i._reactInternals=t,Cb(t,r,e,n),t=Pb(null,t,r,!0,a,n)):(t.tag=0,wt&&a&&X2(t),Sn(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Bf(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=vI(r),e=Or(r,e),i){case 0:t=Ob(null,t,r,e,n);break e;case 1:t=o4(null,t,r,e,n);break e;case 11:t=a4(null,t,r,e,n);break e;case 14:t=s4(null,t,r,Or(r.type,e),n);break e}throw Error(ve(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Or(r,i),Ob(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Or(r,i),o4(e,t,r,i,n);case 3:e:{if(Aj(t),e===null)throw Error(ve(387));r=t.pendingProps,a=t.memoizedState,i=a.element,aj(e,t),dh(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=el(Error(ve(423)),t),t=l4(e,t,r,n,i);break e}else if(r!==i){i=el(Error(ve(424)),t),t=l4(e,t,r,n,i);break e}else for(Yn=Ta(t.stateNode.containerInfo.firstChild),Xn=t,wt=!0,Ar=null,n=rj(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qo(),r===i){t=Bi(e,t,n);break e}Sn(e,t,r,n)}t=t.child}return t;case 5:return sj(t),e===null&&Eb(t),r=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,s=i.children,bb(r,i)?s=null:a!==null&&bb(r,a)&&(t.flags|=32),Pj(e,t),Sn(e,t,s,n),t.child;case 6:return e===null&&Eb(t),null;case 13:return Rj(e,t,n);case 4:return iw(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Zo(t,null,r,n):Sn(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Or(r,i),a4(e,t,r,i,n);case 7:return Sn(e,t,t.pendingProps,n),t.child;case 8:return Sn(e,t,t.pendingProps.children,n),t.child;case 12:return Sn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,dt(ch,r._currentValue),r._currentValue=s,a!==null)if(zr(a.value,s)){if(a.children===i.children&&!zn.current){t=Bi(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){s=a.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=Mi(-1,n&-n),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),kb(a.return,n,t),o.lanes|=n;break}c=c.next}}else if(a.tag===10)s=a.type===t.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(ve(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),kb(s,n,t),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===t){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}Sn(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,$o(t,n),i=vr(i),r=r(i),t.flags|=1,Sn(e,t,r,n),t.child;case 14:return r=t.type,i=Or(r,t.pendingProps),i=Or(r.type,i),s4(e,t,r,i,n);case 15:return Tj(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Or(r,i),Bf(e,t),t.tag=1,Bn(r)?(e=!0,sh(t)):e=!1,$o(t,n),kj(t,r,i),Cb(t,r,i,n),Pb(null,t,r,!0,e,n);case 19:return Ij(e,t,n);case 22:return Oj(e,t,n)}throw Error(ve(156,t.tag))};function Xj(e,t){return N9(e,t)}function gI(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pr(e,t,n,r){return new gI(e,t,n,r)}function xw(e){return e=e.prototype,!(!e||!e.isReactComponent)}function vI(e){if(typeof e=="function")return xw(e)?1:0;if(e!=null){if(e=e.$$typeof,e===F2)return 11;if(e===z2)return 14}return 2}function Ra(e,t){var n=e.alternate;return n===null?(n=pr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Uf(e,t,n,r,i,a){var s=2;if(r=e,typeof e=="function")xw(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case ko:return Os(n.children,i,a,t);case D2:s=8,i|=8;break;case Zx:return e=pr(12,n,t,i|2),e.elementType=Zx,e.lanes=a,e;case Jx:return e=pr(13,n,t,i),e.elementType=Jx,e.lanes=a,e;case eb:return e=pr(19,n,t,i),e.elementType=eb,e.lanes=a,e;case s9:return rp(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case i9:s=10;break e;case a9:s=9;break e;case F2:s=11;break e;case z2:s=14;break e;case ma:s=16,r=null;break e}throw Error(ve(130,e==null?e:typeof e,""))}return t=pr(s,n,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function Os(e,t,n,r){return e=pr(7,e,r,t),e.lanes=n,e}function rp(e,t,n,r){return e=pr(22,e,r,t),e.elementType=s9,e.lanes=n,e.stateNode={isHidden:!1},e}function jg(e,t,n){return e=pr(6,e,null,t),e.lanes=n,e}function Cg(e,t,n){return t=pr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function yI(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=lg(0),this.expirationTimes=lg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lg(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function bw(e,t,n,r,i,a,s,o,c){return e=new yI(e,t,n,o,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=pr(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},rw(a),e}function xI(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Eo,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Qj(e){if(!e)return za;e=e._reactInternals;e:{if(Bs(e)!==e||e.tag!==1)throw Error(ve(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Bn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ve(171))}if(e.tag===1){var n=e.type;if(Bn(n))return Q9(e,n,t)}return t}function Zj(e,t,n,r,i,a,s,o,c){return e=bw(n,r,!0,e,i,a,s,o,c),e.context=Qj(null),n=e.current,r=kn(),i=Aa(n),a=Mi(r,i),a.callback=t??null,Oa(n,a,i),e.current.lanes=i,Tu(e,i,r),qn(e,r),e}function ip(e,t,n,r){var i=t.current,a=kn(),s=Aa(i);return n=Qj(n),t.context===null?t.context=n:t.pendingContext=n,t=Mi(a,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Oa(i,t,s),e!==null&&(Lr(e,i,s,a),Df(e,i,s)),s}function xh(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function y4(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ww(e,t){y4(e,t),(e=e.alternate)&&y4(e,t)}function bI(){return null}var Jj=typeof reportError=="function"?reportError:function(e){console.error(e)};function _w(e){this._internalRoot=e}ap.prototype.render=_w.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ve(409));ip(e,t,null,null)};ap.prototype.unmount=_w.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ls(function(){ip(null,e,null,null)}),t[Fi]=null}};function ap(e){this._internalRoot=e}ap.prototype.unstable_scheduleHydration=function(e){if(e){var t=O9();e={blockedOn:null,target:e,priority:t};for(var n=0;n<xa.length&&t!==0&&t<xa[n].priority;n++);xa.splice(n,0,e),n===0&&A9(e)}};function Nw(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function sp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function x4(){}function wI(e,t,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var d=xh(s);a.call(d)}}var s=Zj(t,r,e,0,null,!1,!1,"",x4);return e._reactRootContainer=s,e[Fi]=s.current,su(e.nodeType===8?e.parentNode:e),Ls(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var d=xh(c);o.call(d)}}var c=bw(e,0,!1,null,null,!1,!1,"",x4);return e._reactRootContainer=c,e[Fi]=c.current,su(e.nodeType===8?e.parentNode:e),Ls(function(){ip(t,c,n,r)}),c}function op(e,t,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var o=i;i=function(){var c=xh(s);o.call(c)}}ip(t,s,e,i)}else s=wI(n,t,e,i,r);return xh(s)}C9=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ac(t.pendingLanes);n!==0&&($2(t,n|1),qn(t,Ft()),!(Xe&6)&&(tl=Ft()+500,Va()))}break;case 13:Ls(function(){var r=zi(e,1);if(r!==null){var i=kn();Lr(r,e,1,i)}}),ww(e,1)}};U2=function(e){if(e.tag===13){var t=zi(e,134217728);if(t!==null){var n=kn();Lr(t,e,134217728,n)}ww(e,134217728)}};T9=function(e){if(e.tag===13){var t=Aa(e),n=zi(e,t);if(n!==null){var r=kn();Lr(n,e,t,r)}ww(e,t)}};O9=function(){return st};P9=function(e,t){var n=st;try{return st=e,t()}finally{st=n}};ub=function(e,t,n){switch(t){case"input":if(rb(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Qh(r);if(!i)throw Error(ve(90));l9(r),rb(r,i)}}}break;case"textarea":u9(e,n);break;case"select":t=n.value,t!=null&&Fo(e,!!n.multiple,t,!1)}};v9=gw;y9=Ls;var _I={usingClientEntryPoint:!1,Events:[Pu,Oo,Qh,m9,g9,gw]},hc={findFiberByHostInstance:_s,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},NI={bundleType:hc.bundleType,version:hc.version,rendererPackageName:hc.rendererPackageName,rendererConfig:hc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=w9(e),e===null?null:e.stateNode},findFiberByHostInstance:hc.findFiberByHostInstance||bI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ff=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ff.isDisabled&&ff.supportsFiber)try{Wh=ff.inject(NI),oi=ff}catch{}}Jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_I;Jn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nw(t))throw Error(ve(200));return xI(e,t,null,n)};Jn.createRoot=function(e,t){if(!Nw(e))throw Error(ve(299));var n=!1,r="",i=Jj;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=bw(e,1,!1,null,null,n,!1,r,i),e[Fi]=t.current,su(e.nodeType===8?e.parentNode:e),new _w(t)};Jn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ve(188)):(e=Object.keys(e).join(","),Error(ve(268,e)));return e=w9(t),e=e===null?null:e.stateNode,e};Jn.flushSync=function(e){return Ls(e)};Jn.hydrate=function(e,t,n){if(!sp(t))throw Error(ve(200));return op(null,e,t,!0,n)};Jn.hydrateRoot=function(e,t,n){if(!Nw(e))throw Error(ve(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",s=Jj;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=Zj(t,null,e,1,n??null,i,!1,a,s),e[Fi]=t.current,su(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new ap(t)};Jn.render=function(e,t,n){if(!sp(t))throw Error(ve(200));return op(null,e,t,!1,n)};Jn.unmountComponentAtNode=function(e){if(!sp(e))throw Error(ve(40));return e._reactRootContainer?(Ls(function(){op(null,null,e,!1,function(){e._reactRootContainer=null,e[Fi]=null})}),!0):!1};Jn.unstable_batchedUpdates=gw;Jn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!sp(n))throw Error(ve(200));if(e==null||e._reactInternals===void 0)throw Error(ve(38));return op(e,t,n,!1,r)};Jn.version="18.3.1-next-f1338f8080-20240426";function e7(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e7)}catch(e){console.error(e)}}e7(),e9.exports=Jn;var Ba=e9.exports,b4=Ba;Xx.createRoot=b4.createRoot,Xx.hydrateRoot=b4.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mu(){return mu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mu.apply(this,arguments)}var Ea;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ea||(Ea={}));const w4="popstate";function SI(e){e===void 0&&(e={});function t(r,i){let{pathname:a,search:s,hash:o}=r.location;return Ub("",{pathname:a,search:s,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:bh(i)}return kI(t,n,null,e)}function Mt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Sw(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function EI(){return Math.random().toString(36).substr(2,8)}function _4(e,t){return{usr:e.state,key:e.key,idx:t}}function Ub(e,t,n,r){return n===void 0&&(n=null),mu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ml(t):t,{state:n,key:t&&t.key||r||EI()})}function bh(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ml(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function kI(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o=Ea.Pop,c=null,d=f();d==null&&(d=0,s.replaceState(mu({},s.state,{idx:d}),""));function f(){return(s.state||{idx:null}).idx}function p(){o=Ea.Pop;let N=f(),v=N==null?null:N-d;d=N,c&&c({action:o,location:y.location,delta:v})}function m(N,v){o=Ea.Push;let _=Ub(y.location,N,v);n&&n(_,N),d=f()+1;let x=_4(_,d),w=y.createHref(_);try{s.pushState(x,"",w)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(w)}a&&c&&c({action:o,location:y.location,delta:1})}function g(N,v){o=Ea.Replace;let _=Ub(y.location,N,v);n&&n(_,N),d=f();let x=_4(_,d),w=y.createHref(_);s.replaceState(x,"",w),a&&c&&c({action:o,location:y.location,delta:0})}function b(N){let v=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof N=="string"?N:bh(N);return _=_.replace(/ $/,"%20"),Mt(v,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,v)}let y={get action(){return o},get location(){return e(i,s)},listen(N){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(w4,p),c=N,()=>{i.removeEventListener(w4,p),c=null}},createHref(N){return t(i,N)},createURL:b,encodeLocation(N){let v=b(N);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:g,go(N){return s.go(N)}};return y}var N4;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(N4||(N4={}));function jI(e,t,n){return n===void 0&&(n="/"),CI(e,t,n,!1)}function CI(e,t,n,r){let i=typeof t=="string"?ml(t):t,a=nl(i.pathname||"/",n);if(a==null)return null;let s=t7(e);TI(s);let o=null;for(let c=0;o==null&&c<s.length;++c){let d=BI(a);o=FI(s[c],d,r)}return o}function t7(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,s,o)=>{let c={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};c.relativePath.startsWith("/")&&(Mt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Ia([r,c.relativePath]),f=n.concat(c);a.children&&a.children.length>0&&(Mt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),t7(a.children,t,f,d)),!(a.path==null&&!a.index)&&t.push({path:d,score:LI(d,a.index),routesMeta:f})};return e.forEach((a,s)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))i(a,s);else for(let c of n7(a.path))i(a,s,c)}),t}function n7(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=n7(r.join("/")),o=[];return o.push(...s.map(c=>c===""?a:[a,c].join("/"))),i&&o.push(...s),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function TI(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:DI(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const OI=/^:[\w-]+$/,PI=3,AI=2,RI=1,II=10,MI=-2,S4=e=>e==="*";function LI(e,t){let n=e.split("/"),r=n.length;return n.some(S4)&&(r+=MI),t&&(r+=AI),n.filter(i=>!S4(i)).reduce((i,a)=>i+(OI.test(a)?PI:a===""?RI:II),r)}function DI(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function FI(e,t,n){n===void 0&&(n=!1);let{routesMeta:r}=e,i={},a="/",s=[];for(let o=0;o<r.length;++o){let c=r[o],d=o===r.length-1,f=a==="/"?t:t.slice(a.length)||"/",p=wh({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),m=c.route;if(!p&&d&&n&&!r[r.length-1].route.index&&(p=wh({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!p)return null;Object.assign(i,p.params),s.push({params:i,pathname:Ia([a,p.pathname]),pathnameBase:HI(Ia([a,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(a=Ia([a,p.pathnameBase]))}return s}function wh(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=zI(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((d,f,p)=>{let{paramName:m,isOptional:g}=f;if(m==="*"){let y=o[p]||"";s=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const b=o[p];return g&&!b?d[m]=void 0:d[m]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:s,pattern:e}}function zI(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Sw(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,c)=>(r.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function BI(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Sw(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function nl(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const qI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$I=e=>qI.test(e);function UI(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?ml(e):e,a;if(n)if($I(n))a=n;else{if(n.includes("//")){let s=n;n=n.replace(/\/\/+/g,"/"),Sw(!1,"Pathnames cannot have embedded double slashes - normalizing "+(s+" -> "+n))}n.startsWith("/")?a=E4(n.substring(1),"/"):a=E4(n,t)}else a=t;return{pathname:a,search:VI(r),hash:WI(i)}}function E4(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Tg(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function GI(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function r7(e,t){let n=GI(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function i7(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=ml(e):(i=mu({},e),Mt(!i.pathname||!i.pathname.includes("?"),Tg("?","pathname","search",i)),Mt(!i.pathname||!i.pathname.includes("#"),Tg("#","pathname","hash",i)),Mt(!i.search||!i.search.includes("#"),Tg("#","search","hash",i)));let a=e===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=n;else{let p=t.length-1;if(!r&&s.startsWith("..")){let m=s.split("/");for(;m[0]==="..";)m.shift(),p-=1;i.pathname=m.join("/")}o=p>=0?t[p]:"/"}let c=UI(i,o),d=s&&s!=="/"&&s.endsWith("/"),f=(a||s===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}const Ia=e=>e.join("/").replace(/\/\/+/g,"/"),HI=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),VI=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,WI=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function KI(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const a7=["post","put","patch","delete"];new Set(a7);const YI=["get",...a7];new Set(YI);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gu(){return gu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gu.apply(this,arguments)}const lp=G.createContext(null),s7=G.createContext(null),Wa=G.createContext(null),cp=G.createContext(null),Hi=G.createContext({outlet:null,matches:[],isDataRoute:!1}),o7=G.createContext(null);function XI(e,t){let{relative:n}=t===void 0?{}:t;Ru()||Mt(!1);let{basename:r,navigator:i}=G.useContext(Wa),{hash:a,pathname:s,search:o}=up(e,{relative:n}),c=s;return r!=="/"&&(c=s==="/"?r:Ia([r,s])),i.createHref({pathname:c,search:o,hash:a})}function Ru(){return G.useContext(cp)!=null}function qs(){return Ru()||Mt(!1),G.useContext(cp).location}function l7(e){G.useContext(Wa).static||G.useLayoutEffect(e)}function tr(){let{isDataRoute:e}=G.useContext(Hi);return e?uM():QI()}function QI(){Ru()||Mt(!1);let e=G.useContext(lp),{basename:t,future:n,navigator:r}=G.useContext(Wa),{matches:i}=G.useContext(Hi),{pathname:a}=qs(),s=JSON.stringify(r7(i,n.v7_relativeSplatPath)),o=G.useRef(!1);return l7(()=>{o.current=!0}),G.useCallback(function(d,f){if(f===void 0&&(f={}),!o.current)return;if(typeof d=="number"){r.go(d);return}let p=i7(d,JSON.parse(s),a,f.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Ia([t,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[t,r,s,a,e])}const c7=G.createContext(null);function Ka(){return G.useContext(c7)}function ZI(e){let t=G.useContext(Hi).outlet;return t&&G.createElement(c7.Provider,{value:e},t)}function nr(){let{matches:e}=G.useContext(Hi),t=e[e.length-1];return t?t.params:{}}function up(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=G.useContext(Wa),{matches:i}=G.useContext(Hi),{pathname:a}=qs(),s=JSON.stringify(r7(i,r.v7_relativeSplatPath));return G.useMemo(()=>i7(e,JSON.parse(s),a,n==="path"),[e,s,a,n])}function JI(e,t){return eM(e,t)}function eM(e,t,n,r){Ru()||Mt(!1);let{navigator:i}=G.useContext(Wa),{matches:a}=G.useContext(Hi),s=a[a.length-1],o=s?s.params:{};s&&s.pathname;let c=s?s.pathnameBase:"/";s&&s.route;let d=qs(),f;if(t){var p;let N=typeof t=="string"?ml(t):t;c==="/"||(p=N.pathname)!=null&&p.startsWith(c)||Mt(!1),f=N}else f=d;let m=f.pathname||"/",g=m;if(c!=="/"){let N=c.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(N.length).join("/")}let b=jI(e,{pathname:g}),y=aM(b&&b.map(N=>Object.assign({},N,{params:Object.assign({},o,N.params),pathname:Ia([c,i.encodeLocation?i.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?c:Ia([c,i.encodeLocation?i.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),a,n,r);return t&&y?G.createElement(cp.Provider,{value:{location:gu({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Ea.Pop}},y):y}function tM(){let e=cM(),t=KI(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},a=null;return G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},t),n?G.createElement("pre",{style:i},n):null,a)}const nM=G.createElement(tM,null);class rM extends G.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?G.createElement(Hi.Provider,{value:this.props.routeContext},G.createElement(o7.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function iM(e){let{routeContext:t,match:n,children:r}=e,i=G.useContext(lp);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),G.createElement(Hi.Provider,{value:t},r)}function aM(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var a;if(!n)return null;if(n.errors)e=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,o=(i=n)==null?void 0:i.errors;if(o!=null){let f=s.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);f>=0||Mt(!1),s=s.slice(0,Math.min(s.length,f+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<s.length;f++){let p=s[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:m,errors:g}=n,b=p.route.loader&&m[p.route.id]===void 0&&(!g||g[p.route.id]===void 0);if(p.route.lazy||b){c=!0,d>=0?s=s.slice(0,d+1):s=[s[0]];break}}}return s.reduceRight((f,p,m)=>{let g,b=!1,y=null,N=null;n&&(g=o&&p.route.id?o[p.route.id]:void 0,y=p.route.errorElement||nM,c&&(d<0&&m===0?(dM("route-fallback",!1),b=!0,N=null):d===m&&(b=!0,N=p.route.hydrateFallbackElement||null)));let v=t.concat(s.slice(0,m+1)),_=()=>{let x;return g?x=y:b?x=N:p.route.Component?x=G.createElement(p.route.Component,null):p.route.element?x=p.route.element:x=f,G.createElement(iM,{match:p,routeContext:{outlet:f,matches:v,isDataRoute:n!=null},children:x})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?G.createElement(rM,{location:n.location,revalidation:n.revalidation,component:y,error:g,children:_(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):_()},null)}var u7=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(u7||{}),_h=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(_h||{});function sM(e){let t=G.useContext(lp);return t||Mt(!1),t}function oM(e){let t=G.useContext(s7);return t||Mt(!1),t}function lM(e){let t=G.useContext(Hi);return t||Mt(!1),t}function d7(e){let t=lM(),n=t.matches[t.matches.length-1];return n.route.id||Mt(!1),n.route.id}function cM(){var e;let t=G.useContext(o7),n=oM(_h.UseRouteError),r=d7(_h.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function uM(){let{router:e}=sM(u7.UseNavigateStable),t=d7(_h.UseNavigateStable),n=G.useRef(!1);return l7(()=>{n.current=!0}),G.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,gu({fromRouteId:t},a)))},[e,t])}const k4={};function dM(e,t,n){!t&&!k4[e]&&(k4[e]=!0)}function fM(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function Ew(e){return ZI(e.context)}function bt(e){Mt(!1)}function hM(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Ea.Pop,navigator:a,static:s=!1,future:o}=e;Ru()&&Mt(!1);let c=t.replace(/^\/*/,"/"),d=G.useMemo(()=>({basename:c,navigator:a,static:s,future:gu({v7_relativeSplatPath:!1},o)}),[c,o,a,s]);typeof r=="string"&&(r=ml(r));let{pathname:f="/",search:p="",hash:m="",state:g=null,key:b="default"}=r,y=G.useMemo(()=>{let N=nl(f,c);return N==null?null:{location:{pathname:N,search:p,hash:m,state:g,key:b},navigationType:i}},[c,f,p,m,g,b,i]);return y==null?null:G.createElement(Wa.Provider,{value:d},G.createElement(cp.Provider,{children:n,value:y}))}function pM(e){let{children:t,location:n}=e;return JI(Gb(t),n)}new Promise(()=>{});function Gb(e,t){t===void 0&&(t=[]);let n=[];return G.Children.forEach(e,(r,i)=>{if(!G.isValidElement(r))return;let a=[...t,i];if(r.type===G.Fragment){n.push.apply(n,Gb(r.props.children,a));return}r.type!==bt&&Mt(!1),!r.props.index||!r.props.children||Mt(!1);let s={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=Gb(r.props.children,a)),n.push(s)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nh(){return Nh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nh.apply(this,arguments)}function f7(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,a;for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function mM(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function gM(e,t){return e.button===0&&(!t||t==="_self")&&!mM(e)}const vM=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],yM=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],xM="6";try{window.__reactRouterVersion=xM}catch{}const bM=G.createContext({isTransitioning:!1}),wM="startTransition",j4=pA[wM];function _M(e){let{basename:t,children:n,future:r,window:i}=e,a=G.useRef();a.current==null&&(a.current=SI({window:i,v5Compat:!0}));let s=a.current,[o,c]=G.useState({action:s.action,location:s.location}),{v7_startTransition:d}=r||{},f=G.useCallback(p=>{d&&j4?j4(()=>c(p)):c(p)},[c,d]);return G.useLayoutEffect(()=>s.listen(f),[s,f]),G.useEffect(()=>fM(r),[r]),G.createElement(hM,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:s,future:r})}const NM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",SM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qa=G.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:a,replace:s,state:o,target:c,to:d,preventScrollReset:f,viewTransition:p}=t,m=f7(t,vM),{basename:g}=G.useContext(Wa),b,y=!1;if(typeof d=="string"&&SM.test(d)&&(b=d,NM))try{let x=new URL(window.location.href),w=d.startsWith("//")?new URL(x.protocol+d):new URL(d),E=nl(w.pathname,g);w.origin===x.origin&&E!=null?d=E+w.search+w.hash:y=!0}catch{}let N=XI(d,{relative:i}),v=jM(d,{replace:s,state:o,target:c,preventScrollReset:f,relative:i,viewTransition:p});function _(x){r&&r(x),x.defaultPrevented||v(x)}return G.createElement("a",Nh({},m,{href:b||N,onClick:y||a?r:_,ref:n,target:c}))}),EM=G.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:i=!1,className:a="",end:s=!1,style:o,to:c,viewTransition:d,children:f}=t,p=f7(t,yM),m=up(c,{relative:p.relative}),g=qs(),b=G.useContext(s7),{navigator:y,basename:N}=G.useContext(Wa),v=b!=null&&CM(m)&&d===!0,_=y.encodeLocation?y.encodeLocation(m).pathname:m.pathname,x=g.pathname,w=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;i||(x=x.toLowerCase(),w=w?w.toLowerCase():null,_=_.toLowerCase()),w&&N&&(w=nl(w,N)||w);const E=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let P=x===_||!s&&x.startsWith(_)&&x.charAt(E)==="/",A=w!=null&&(w===_||!s&&w.startsWith(_)&&w.charAt(_.length)==="/"),T={isActive:P,isPending:A,isTransitioning:v},L=P?r:void 0,k;typeof a=="function"?k=a(T):k=[a,P?"active":null,A?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let C=typeof o=="function"?o(T):o;return G.createElement(qa,Nh({},p,{"aria-current":L,className:k,ref:n,style:C,to:c,viewTransition:d}),typeof f=="function"?f(T):f)});var Hb;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Hb||(Hb={}));var C4;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(C4||(C4={}));function kM(e){let t=G.useContext(lp);return t||Mt(!1),t}function jM(e,t){let{target:n,replace:r,state:i,preventScrollReset:a,relative:s,viewTransition:o}=t===void 0?{}:t,c=tr(),d=qs(),f=up(e,{relative:s});return G.useCallback(p=>{if(gM(p,n)){p.preventDefault();let m=r!==void 0?r:bh(d)===bh(f);c(e,{replace:m,state:i,preventScrollReset:a,relative:s,viewTransition:o})}},[d,c,f,r,i,n,e,a,s,o])}function CM(e,t){t===void 0&&(t={});let n=G.useContext(bM);n==null&&Mt(!1);let{basename:r}=kM(Hb.useViewTransitionState),i=up(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=nl(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=nl(n.nextLocation.pathname,r)||n.nextLocation.pathname;return wh(i.pathname,s)!=null||wh(i.pathname,a)!=null}const kw="-",TM=e=>{const t=PM(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:s=>{const o=s.split(kw);return o[0]===""&&o.length!==1&&o.shift(),h7(o,t)||OM(s)},getConflictingClassGroupIds:(s,o)=>{const c=n[s]||[];return o&&r[s]?[...c,...r[s]]:c}}},h7=(e,t)=>{var s;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),i=r?h7(e.slice(1),r):void 0;if(i)return i;if(t.validators.length===0)return;const a=e.join(kw);return(s=t.validators.find(({validator:o})=>o(a)))==null?void 0:s.classGroupId},T4=/^\[(.+)\]$/,OM=e=>{if(T4.test(e)){const t=T4.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},PM=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return RM(Object.entries(e.classGroups),n).forEach(([a,s])=>{Vb(s,r,a,t)}),r},Vb=(e,t,n,r)=>{e.forEach(i=>{if(typeof i=="string"){const a=i===""?t:O4(t,i);a.classGroupId=n;return}if(typeof i=="function"){if(AM(i)){Vb(i(r),t,n,r);return}t.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([a,s])=>{Vb(s,O4(t,a),n,r)})})},O4=(e,t)=>{let n=e;return t.split(kw).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},AM=e=>e.isThemeGetter,RM=(e,t)=>t?e.map(([n,r])=>{const i=r.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([s,o])=>[t+s,o])):a);return[n,i]}):e,IM=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const i=(a,s)=>{n.set(a,s),t++,t>e&&(t=0,r=n,n=new Map)};return{get(a){let s=n.get(a);if(s!==void 0)return s;if((s=r.get(a))!==void 0)return i(a,s),s},set(a,s){n.has(a)?n.set(a,s):i(a,s)}}},p7="!",MM=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,i=t[0],a=t.length,s=o=>{const c=[];let d=0,f=0,p;for(let N=0;N<o.length;N++){let v=o[N];if(d===0){if(v===i&&(r||o.slice(N,N+a)===t)){c.push(o.slice(f,N)),f=N+a;continue}if(v==="/"){p=N;continue}}v==="["?d++:v==="]"&&d--}const m=c.length===0?o:o.substring(f),g=m.startsWith(p7),b=g?m.substring(1):m,y=p&&p>f?p-f:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:b,maybePostfixModifierPosition:y}};return n?o=>n({className:o,parseClassName:s}):s},LM=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},DM=e=>({cache:IM(e.cacheSize),parseClassName:MM(e),...TM(e)}),FM=/\s+/,zM=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=t,a=[],s=e.trim().split(FM);let o="";for(let c=s.length-1;c>=0;c-=1){const d=s[c],{modifiers:f,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:g}=n(d);let b=!!g,y=r(b?m.substring(0,g):m);if(!y){if(!b){o=d+(o.length>0?" "+o:o);continue}if(y=r(m),!y){o=d+(o.length>0?" "+o:o);continue}b=!1}const N=LM(f).join(":"),v=p?N+p7:N,_=v+y;if(a.includes(_))continue;a.push(_);const x=i(y,b);for(let w=0;w<x.length;++w){const E=x[w];a.push(v+E)}o=d+(o.length>0?" "+o:o)}return o};function BM(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=m7(t))&&(r&&(r+=" "),r+=n);return r}const m7=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=m7(e[r]))&&(n&&(n+=" "),n+=t);return n};function qM(e,...t){let n,r,i,a=s;function s(c){const d=t.reduce((f,p)=>p(f),e());return n=DM(d),r=n.cache.get,i=n.cache.set,a=o,o(c)}function o(c){const d=r(c);if(d)return d;const f=zM(c,n);return i(c,f),f}return function(){return a(BM.apply(null,arguments))}}const ht=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},g7=/^\[(?:([a-z-]+):)?(.+)\]$/i,$M=/^\d+\/\d+$/,UM=new Set(["px","full","screen"]),GM=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,HM=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,VM=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,WM=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,KM=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ni=e=>Go(e)||UM.has(e)||$M.test(e),ca=e=>gl(e,"length",nL),Go=e=>!!e&&!Number.isNaN(Number(e)),Og=e=>gl(e,"number",Go),pc=e=>!!e&&Number.isInteger(Number(e)),YM=e=>e.endsWith("%")&&Go(e.slice(0,-1)),Fe=e=>g7.test(e),ua=e=>GM.test(e),XM=new Set(["length","size","percentage"]),QM=e=>gl(e,XM,v7),ZM=e=>gl(e,"position",v7),JM=new Set(["image","url"]),eL=e=>gl(e,JM,iL),tL=e=>gl(e,"",rL),mc=()=>!0,gl=(e,t,n)=>{const r=g7.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},nL=e=>HM.test(e)&&!VM.test(e),v7=()=>!1,rL=e=>WM.test(e),iL=e=>KM.test(e),aL=()=>{const e=ht("colors"),t=ht("spacing"),n=ht("blur"),r=ht("brightness"),i=ht("borderColor"),a=ht("borderRadius"),s=ht("borderSpacing"),o=ht("borderWidth"),c=ht("contrast"),d=ht("grayscale"),f=ht("hueRotate"),p=ht("invert"),m=ht("gap"),g=ht("gradientColorStops"),b=ht("gradientColorStopPositions"),y=ht("inset"),N=ht("margin"),v=ht("opacity"),_=ht("padding"),x=ht("saturate"),w=ht("scale"),E=ht("sepia"),P=ht("skew"),A=ht("space"),T=ht("translate"),L=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto",Fe,t],O=()=>[Fe,t],F=()=>["",Ni,ca],M=()=>["auto",Go,Fe],D=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],$=()=>["solid","dashed","dotted","double","none"],V=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],K=()=>["start","end","center","between","around","evenly","stretch"],H=()=>["","0",Fe],q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],I=()=>[Go,Fe];return{cacheSize:500,separator:":",theme:{colors:[mc],spacing:[Ni,ca],blur:["none","",ua,Fe],brightness:I(),borderColor:[e],borderRadius:["none","","full",ua,Fe],borderSpacing:O(),borderWidth:F(),contrast:I(),grayscale:H(),hueRotate:I(),invert:H(),gap:O(),gradientColorStops:[e],gradientColorStopPositions:[YM,ca],inset:C(),margin:C(),opacity:I(),padding:O(),saturate:I(),scale:I(),sepia:H(),skew:I(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",Fe]}],container:["container"],columns:[{columns:[ua]}],"break-after":[{"break-after":q()}],"break-before":[{"break-before":q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...D(),Fe]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",pc,Fe]}],basis:[{basis:C()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Fe]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",pc,Fe]}],"grid-cols":[{"grid-cols":[mc]}],"col-start-end":[{col:["auto",{span:["full",pc,Fe]},Fe]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[mc]}],"row-start-end":[{row:["auto",{span:[pc,Fe]},Fe]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Fe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Fe]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...K()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...K(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...K(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[N]}],mx:[{mx:[N]}],my:[{my:[N]}],ms:[{ms:[N]}],me:[{me:[N]}],mt:[{mt:[N]}],mr:[{mr:[N]}],mb:[{mb:[N]}],ml:[{ml:[N]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Fe,t]}],"min-w":[{"min-w":[Fe,t,"min","max","fit"]}],"max-w":[{"max-w":[Fe,t,"none","full","min","max","fit","prose",{screen:[ua]},ua]}],h:[{h:[Fe,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Fe,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Fe,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Fe,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ua,ca]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Og]}],"font-family":[{font:[mc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Fe]}],"line-clamp":[{"line-clamp":["none",Go,Og]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ni,Fe]}],"list-image":[{"list-image":["none",Fe]}],"list-style-type":[{list:["none","disc","decimal",Fe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...$(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ni,ca]}],"underline-offset":[{"underline-offset":["auto",Ni,Fe]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Fe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Fe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...D(),ZM]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",QM]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},eL]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...$(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:$()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...$()]}],"outline-offset":[{"outline-offset":[Ni,Fe]}],"outline-w":[{outline:[Ni,ca]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:F()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Ni,ca]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ua,tL]}],"shadow-color":[{shadow:[mc]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...V(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":V()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ua,Fe]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[p]}],saturate:[{saturate:[x]}],sepia:[{sepia:[E]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[E]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Fe]}],duration:[{duration:I()}],ease:[{ease:["linear","in","out","in-out",Fe]}],delay:[{delay:I()}],animate:[{animate:["none","spin","ping","pulse","bounce",Fe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[pc,Fe]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[P]}],"skew-y":[{"skew-y":[P]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Fe]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Fe]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Fe]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ni,ca,Og]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},jw=qM(aL),Ke=({children:e,className:t,...n})=>l.jsx("div",{className:jw("bg-glass backdrop-blur-xl border border-glass-border rounded-xl",t),...n,children:e}),vu=({url:e,name:t,alt:n="User",size:r="md",className:i})=>{const a={sm:"size-8 text-xs",md:"size-10 text-sm",lg:"size-16 text-lg",xl:"size-32 text-2xl"},s=t?t.charAt(0).toUpperCase():n?n.charAt(0).toUpperCase():"?";return l.jsx("div",{className:jw("rounded-full bg-surface-light border border-white/10 flex items-center justify-center overflow-hidden shrink-0 text-slate-400 font-bold select-none",a[r],i),children:e?l.jsx("img",{src:e,alt:t||n,className:"w-full h-full object-cover"}):l.jsx("span",{children:s})})},sL=()=>l.jsx("div",{className:"flex h-screen w-full overflow-hidden bg-background-dark relative",children:l.jsx("main",{className:"flex-1 min-w-0 relative overflow-hidden flex flex-col",children:l.jsx(Ew,{})})}),nt=G.forwardRef(({children:e,variant:t="primary",size:n="md",className:r,icon:i,isLoading:a,...s},o)=>{const c="inline-flex items-center justify-center rounded-lg font-medium transition-all focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed",d={primary:"bg-primary hover:bg-primary-hover text-white shadow-lg shadow-primary/25 border border-transparent",secondary:"bg-surface-light hover:bg-surface-lighter text-slate-200 border border-glass-border",ghost:"bg-transparent hover:bg-white/5 text-slate-400 hover:text-white",danger:"bg-red-500/10 hover:bg-red-500/20 text-red-500 border border-red-500/20"},f={sm:"px-3 py-1.5 text-xs gap-1.5",md:"px-4 py-2 text-sm gap-2",lg:"px-6 py-3 text-base gap-3"};return l.jsxs("button",{ref:o,className:jw(c,d[t],f[n],r),disabled:a,...s,children:[a?l.jsx("span",{className:"material-symbols-outlined animate-spin text-[18px]",children:"progress_activity"}):i?l.jsx("span",{className:"material-symbols-outlined text-[18px]",children:i}):null,e]})});nt.displayName="Button";const oL=({isOpen:e,onClose:t,onCreate:n})=>{const[r,i]=G.useState(""),[a,s]=G.useState("Fantasy");if(!e)return null;const o=c=>{c.preventDefault(),n({title:r,genre:a}),i(""),t()};return l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t}),l.jsx("div",{className:"relative w-full max-w-md animate-in fade-in zoom-in duration-200",children:l.jsxs(Ke,{className:"p-8 border-primary/30 shadow-2xl shadow-primary/10",children:[l.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Create New World"}),l.jsxs("form",{onSubmit:o,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-400 mb-1 uppercase tracking-wider",children:"Project Title"}),l.jsx("input",{type:"text",value:r,onChange:c=>i(c.target.value),placeholder:"e.g., The Realms of Aethelgard",className:"w-full bg-background-dark/50 border border-glass-border rounded-lg px-4 py-3 text-white focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-all",autoFocus:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-400 mb-1 uppercase tracking-wider",children:"Genre"}),l.jsxs("select",{value:a,onChange:c=>s(c.target.value),className:"w-full bg-background-dark/50 border border-glass-border rounded-lg px-4 py-3 text-white focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-all appearance-none",children:[l.jsx("option",{value:"Fantasy",children:"Fantasy"}),l.jsx("option",{value:"Sci-Fi",children:"Sci-Fi"}),l.jsx("option",{value:"Horror",children:"Horror"}),l.jsx("option",{value:"Steampunk",children:"Steampunk"}),l.jsx("option",{value:"Modern",children:"Modern"}),l.jsx("option",{value:"Historical",children:"Historical"})]})]}),l.jsxs("div",{className:"pt-4 flex justify-end gap-3",children:[l.jsx(nt,{variant:"ghost",onClick:t,type:"button",children:"Cancel"}),l.jsx(nt,{variant:"primary",type:"submit",icon:"add",children:"Create World"})]})]})]})})]})},lL="/api",be={async request(e,t={}){const n=`${lL}${e}`,r={"Content-Type":"application/json",...t.headers},i=await fetch(n,{...t,headers:r,credentials:"include"});if(!i.ok){const a=await i.json().catch(()=>({}));throw new Error(a.error||`HTTP error! status: ${i.status}`)}return i.status===204||i.headers.get("content-length")==="0"?null:i.json()},get(e,t={}){return this.request(e,{method:"GET",headers:t})},post(e,t,n={}){return this.request(e,{method:"POST",body:JSON.stringify(t),headers:n})},put(e,t,n={}){return this.request(e,{method:"PUT",body:JSON.stringify(t),headers:n})},patch(e,t,n={}){return this.request(e,{method:"PATCH",body:JSON.stringify(t),headers:n})},delete(e,t={}){return this.request(e,{method:"DELETE",headers:t})}},Pg={list:()=>be.get("/workspaces"),create:(e,t,n,r)=>be.post("/workspaces",{name:e,title:t,genre:n,imageUrl:r}),delete:e=>be.delete("/workspaces/"+e),select:e=>be.post("/workspaces/select",{projectName:e})},cL=({title:e,desc:t,type:n,updated:r,image:i,id:a,name:s,username:o,onDelete:c})=>l.jsx(qa,{to:`/${o}/${s}`,className:"block group",children:l.jsxs(Ke,{className:"h-64 flex flex-col p-6 hover:shadow-2xl hover:shadow-primary/20 hover:border-primary/50 transition-all relative",children:[l.jsx("div",{className:"absolute top-6 right-6 z-20 opacity-0 group-hover:opacity-100 transition-opacity",children:l.jsx("button",{onClick:d=>{d.preventDefault(),d.stopPropagation(),c(s)},className:"p-2 rounded-lg bg-red-500/10 hover:bg-red-500/20 text-red-500 transition-colors",children:l.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"})})}),l.jsxs("div",{className:"mb-auto",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx("div",{className:"h-10 w-10 rounded-xl bg-primary/20 flex items-center justify-center text-primary border border-primary/20 group-hover:scale-105 transition-transform",children:l.jsx("span",{className:"material-symbols-outlined text-xl",children:n==="Fantasy"?"auto_awesome":n==="Sci-Fi"?"rocket_launch":"public"})}),l.jsxs("div",{children:[l.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-primary",children:n}),l.jsx("h3",{className:"text-xl font-bold text-white leading-tight group-hover:text-primary transition-colors",children:e})]})]}),l.jsx("p",{className:"text-sm text-slate-400 line-clamp-3 leading-relaxed",children:t})]}),l.jsxs("div",{className:"pt-4 border-t border-white/5 flex justify-between items-center text-xs text-slate-500",children:[l.jsxs("span",{children:["Updated ",r]}),l.jsx("span",{className:"group-hover:translate-x-1 transition-transform material-symbols-outlined text-base",children:"arrow_forward"})]})]})}),uL=()=>{const[e,t]=G.useState([]),[n,r]=G.useState(!1),[i,a]=G.useState(!0);tr(),G.useEffect(()=>{s()},[]);const s=async()=>{try{const d=await be.get("/proyectos");t(d)}catch(d){console.error("Error fetching projects:",d)}finally{a(!1)}},o=async d=>{if(window.confirm(`Are you sure you want to delete "${d}"?`))try{await be.delete(`/proyectos/${d}`),s()}catch(f){console.error("Failed to delete project:",f)}},c=async d=>{try{(await be.post("/proyectos/crear",{nombreProyecto:d.title,tipo:d.genre,descripcion:`A new ${d.genre} world.`})).success&&(r(!1),s())}catch(f){console.error("Error creating project:",f)}};return l.jsxs("div",{className:"flex-1 flex flex-col items-center p-12 pt-14 overflow-y-auto custom-scrollbar relative",children:[l.jsxs("div",{className:"w-full max-w-6xl space-y-12",children:[l.jsxs("header",{className:"flex flex-col gap-2",children:[l.jsx("h1",{className:"text-5xl font-manrope font-black text-white tracking-tight",children:"Chronos Atlas"}),l.jsx("p",{className:"text-slate-500 text-lg font-medium",children:"Select a world to begin building."})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[e.map(d=>l.jsx(cL,{id:d.id,name:d.nombreProyecto,username:d.usuario||"Roberto",title:d.nombreProyecto,desc:d.descripcion,type:d.tipo,updated:"Recently",image:d.imagenUrl,onDelete:o},d.id)),i&&e.length===0&&l.jsxs("div",{className:"col-span-full py-20 flex flex-col items-center gap-4 opacity-30",children:[l.jsx("span",{className:"material-symbols-outlined text-6xl animate-spin",children:"refresh"}),l.jsx("span",{className:"text-sm font-bold uppercase tracking-widest",children:"Scanning Vaults..."})]}),!i&&e.length===0&&l.jsxs("div",{className:"col-span-full py-20 flex flex-col items-center gap-4 border-2 border-dashed border-white/5 rounded-[3rem] bg-white/[0.02]",children:[l.jsx("span",{className:"material-symbols-outlined text-6xl text-slate-700",children:"folder_open"}),l.jsx("span",{className:"text-sm font-medium text-slate-500",children:"No worlds found. Time to create one."})]}),l.jsxs("div",{onClick:()=>r(!0),className:"group relative h-64 rounded-2xl border-2 border-dashed border-slate-700 hover:border-primary hover:bg-primary/5 flex flex-col items-center justify-center cursor-pointer transition-all",children:[l.jsx("div",{className:"size-16 rounded-full bg-surface-light flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:l.jsx("span",{className:"material-symbols-outlined text-3xl text-slate-400 group-hover:text-primary",children:"add"})}),l.jsx("span",{className:"text-sm font-bold text-slate-400 group-hover:text-primary",children:"Create New Project"})]})]})]}),l.jsx(oL,{isOpen:n,onClose:()=>r(!1),onCreate:c})]})},dL=["FANTASA","SCI-FI","HORROR","LORE","MISTERIO","HISTRICO","CYBERPUNK","STEAMPUNK"],fL=({isOpen:e,onClose:t,onCreate:n})=>{if(!e)return null;const[r,i]=G.useState(!1),[a,s]=G.useState({name:"",title:"",genre:"FANTASA",imageUrl:"https://images.unsplash.com/photo-1518709268805-4e9042af9f23?auto=format&fit=crop&q=80&w=800"}),o=d=>{const{name:f,value:p}=d.target;s(m=>({...m,[f]:p}))},c=d=>{d.preventDefault();let f=a.name;if(!f&&a.title&&(f=a.title.toLowerCase().replace(/[^a-z0-9]/g,"-")),!f){alert("Project ID/Name is required");return}n({...a,name:f}),t(),s({name:"",title:"",genre:"FANTASA",imageUrl:"https://images.unsplash.com/photo-1518709268805-4e9042af9f23?auto=format&fit=crop&q=80&w=800"})};return Ba.createPortal(l.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",onClick:t}),l.jsxs("div",{className:"relative w-full max-w-2xl bg-[#0a0a0c] border border-white/10 rounded-3xl shadow-2xl overflow-hidden flex animate-in zoom-in-95 duration-200",children:[l.jsxs("div",{className:"w-1/3 bg-black relative hidden sm:block",children:[l.jsx("img",{src:a.imageUrl,onError:()=>i(!0),className:`absolute inset-0 w-full h-full object-cover opacity-60 transition-opacity duration-500 ${r?"hidden":""}`,alt:"Preview"}),l.jsxs("div",{className:"absolute inset-x-0 bottom-0 p-6 bg-gradient-to-t from-black to-transparent",children:[l.jsx("h4",{className:"text-white font-black text-xl leading-none",children:a.title||"Untitled"}),l.jsx("span",{className:"text-[10px] font-bold text-primary uppercase tracking-widest mt-2 block",children:a.genre})]})]}),l.jsxs("div",{className:"flex-1 p-8",children:[l.jsx("h2",{className:"text-2xl font-black text-white mb-6",children:"Nuevo Cuaderno"}),l.jsxs("form",{onSubmit:c,className:"space-y-5",children:[l.jsxs("div",{className:"space-y-1.5",children:[l.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-text-muted",children:"Ttulo del Proyecto"}),l.jsx("input",{type:"text",name:"title",value:a.title,onChange:o,placeholder:"e.g. Las Crnicas de Etheria",className:"w-full bg-surface-dark border border-glass-border rounded-xl px-4 py-3 text-white text-sm focus:border-primary/50 focus:ring-1 focus:ring-primary/50 outline-none transition-all",autoFocus:!0})]}),l.jsxs("div",{className:"space-y-1.5",children:[l.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-text-muted",children:"ID de Archivo (Slug)"}),l.jsx("input",{type:"text",name:"name",value:a.name,onChange:o,placeholder:"e.g. etheria-v1",className:"w-full bg-surface-dark border border-glass-border rounded-xl px-4 py-3 text-white font-mono text-xs focus:border-primary/50 focus:ring-1 focus:ring-primary/50 outline-none transition-all placeholder:text-white/10"}),l.jsx("p",{className:"text-[10px] text-white/20",children:"Se usar como nombre del archivo .db"})]}),l.jsxs("div",{className:"space-y-1.5",children:[l.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-text-muted",children:"Gnero"}),l.jsx("div",{className:"grid grid-cols-2 gap-2",children:dL.slice(0,4).map(d=>l.jsx("button",{type:"button",onClick:()=>s(f=>({...f,genre:d})),className:`px-3 py-2 rounded-lg text-[10px] font-bold border transition-all ${a.genre===d?"bg-primary text-white border-primary":"bg-surface-dark border-glass-border text-text-muted hover:border-white/20"}`,children:d},d))})]}),l.jsxs("div",{className:"space-y-1.5",children:[l.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-text-muted",children:"Imagen de Portada (URL)"}),l.jsx("input",{type:"text",name:"imageUrl",value:a.imageUrl,onChange:d=>{s(f=>({...f,imageUrl:d.target.value})),i(!1)},className:"w-full bg-surface-dark border border-glass-border rounded-xl px-4 py-3 text-white text-xs focus:border-primary/50 focus:ring-1 focus:ring-primary/50 outline-none transition-all truncate"})]}),l.jsxs("div",{className:"pt-4 flex gap-3",children:[l.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-3 bg-surface-dark hover:bg-white/5 border border-glass-border rounded-xl text-xs font-bold text-text-muted transition-all",children:"Cancelar"}),l.jsxs("button",{type:"submit",className:"flex-1 px-4 py-3 bg-primary hover:bg-primary-light text-white rounded-xl text-xs font-bold transition-all shadow-lg shadow-primary/20 flex items-center justify-center gap-2",children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"rocket_launch"}),"Crear Universo"]})]})]})]})]})]}),document.body)},hL=()=>{const e=tr(),[t,n]=G.useState([]),[r,i]=G.useState(!0),[a,s]=G.useState(null),[o,c]=G.useState(""),[d,f]=G.useState(!1);G.useEffect(()=>{p()},[]);const p=async()=>{try{i(!0);const N=await Pg.list();n(N)}catch(N){console.error("Failed to load workspaces",N),s("Error al cargar cuadernos. Est el servidor encendido?")}finally{i(!1)}},m=async N=>{try{i(!0);const v=await Pg.select(N);v.success&&v.redirect&&(localStorage.setItem("user",JSON.stringify({username:"local",success:!0})),e(v.redirect))}catch(v){s(v.message||"Fallo al entrar al cuaderno"),i(!1)}},g=async N=>{try{i(!0),(await Pg.create(N.name,N.title,N.genre,N.imageUrl)).success&&await m(N.name)}catch{s("Error al crear cuaderno"),i(!1)}},b=N=>{const v=N.split("").reduce((w,E)=>w+E.charCodeAt(0),0),_=["FANTASA","SCI-FI","HORROR","LORE","MISTERIO"],x=["https://images.unsplash.com/photo-1518709268805-4e9042af9f23?auto=format&fit=crop&q=80&w=800","https://images.unsplash.com/photo-1451187580459-43490279c0fa?auto=format&fit=crop&q=80&w=800","https://images.unsplash.com/photo-1505634467193-785724601157?auto=format&fit=crop&q=80&w=800","https://images.unsplash.com/photo-1478720568477-152d9b164e26?auto=format&fit=crop&q=80&w=800"];return{tag:_[v%_.length],img:x[v%x.length],desc:"Una tierra dividida por la magia y la tecnologa antigua...",initials:N.substring(0,2).toUpperCase(),time:"hace 2h"}},y=t.filter(N=>N.toLowerCase().includes(o.toLowerCase()));return l.jsxs("div",{className:"min-h-screen w-full bg-[#0a0b14] text-white flex flex-col items-center p-8 font-sans selection:bg-indigo-500/30 overflow-y-auto custom-scrollbar",children:[l.jsxs("header",{className:"w-full max-w-6xl mt-24 mb-12 flex flex-col lg:flex-row lg:items-end justify-between gap-8",children:[l.jsx("div",{className:"space-y-4",children:l.jsx("div",{className:"flex items-center gap-4",children:l.jsxs("h1",{className:"text-6xl font-black tracking-tighter leading-none",children:[l.jsx("span",{className:"block text-indigo-400",children:"Mis"}),l.jsx("span",{className:"block text-white",children:"Cuadernos"})]})})}),l.jsx("div",{className:"flex items-center gap-4",children:l.jsxs("div",{className:"relative group min-w-[300px]",children:[l.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-white/20 text-xl group-focus-within:text-indigo-400 transition-colors pointer-events-none",children:"search"}),l.jsx("input",{type:"text",placeholder:"Buscar...",value:o,onChange:N=>c(N.target.value),className:"w-full bg-[#13141f] border border-white/5 rounded-2xl py-3 pl-12 pr-4 text-sm text-white focus:outline-none focus:border-indigo-500/50 transition-all placeholder:text-white/10"})]})})]}),l.jsx("section",{className:"w-full max-w-6xl",children:r?l.jsxs("div",{className:"flex flex-col items-center gap-6 py-20 opacity-20",children:[l.jsx("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"}),l.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.3em]",children:"Accediendo al Sector Local..."})]}):l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 pb-20",children:[l.jsxs("div",{onClick:()=>f(!0),className:"group relative h-[380px] rounded-[2.5rem] border-2 border-dashed border-white/5 flex flex-col items-center justify-center gap-6 hover:bg-white/5 hover:border-indigo-500/30 transition-all cursor-pointer overflow-hidden animate-in fade-in duration-700",children:[l.jsx("div",{className:"w-20 h-20 rounded-full bg-[#13141f] border border-white/5 flex items-center justify-center text-4xl text-white/20 group-hover:scale-110 group-hover:text-indigo-400 transition-all",children:l.jsx("span",{className:"material-symbols-outlined text-4xl",children:"add"})}),l.jsxs("div",{className:"text-center",children:[l.jsx("h3",{className:"text-xl font-black tracking-tight text-white/50 group-hover:text-white transition-colors",children:"Nuevo Cuaderno"}),l.jsx("p",{className:"text-[10px] font-bold text-white/20 uppercase tracking-widest mt-2 group-hover:text-white/40",children:"Inicia un nuevo universo"})]})]}),y.map(N=>{const v=b(N);return l.jsxs("div",{onClick:()=>m(N),className:"group relative h-[380px] rounded-[2.5rem] bg-[#13141f] border border-white/5 overflow-hidden transition-all hover:-translate-y-2 hover:shadow-2xl hover:shadow-indigo-500/10 cursor-pointer animate-in fade-in slide-in-from-bottom-4",children:[l.jsxs("div",{className:"absolute inset-x-0 top-0 h-2/3",children:[l.jsx("img",{src:v.img,className:"w-full h-full object-cover opacity-40 group-hover:opacity-60 transition-opacity",alt:""}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#13141f] via-transparent to-transparent"})]}),l.jsx("div",{className:"absolute inset-0 flex flex-col justify-end p-8",children:l.jsxs("div",{className:"mt-auto space-y-3",children:[l.jsx("span",{className:"inline-block px-3 py-1 bg-red-500/20 border border-red-500/30 text-[9px] font-black text-red-100 rounded-lg tracking-widest uppercase",children:v.tag}),l.jsx("h3",{className:"text-3xl font-black text-white tracking-tighter leading-tight group-hover:text-indigo-400 transition-colors",children:N}),l.jsx("p",{className:"text-xs text-white/40 line-clamp-2 leading-relaxed",children:v.desc}),l.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-white/5 mt-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]"}),l.jsxs("span",{className:"text-[9px] font-black uppercase tracking-widest text-white/20",children:["ltima edicin: ",l.jsx("span",{className:"text-white/40",children:v.time})]})]}),l.jsx("div",{className:"w-8 h-8 rounded-full bg-white/5 border border-white/10 flex items-center justify-center text-[10px] font-black text-indigo-300",children:v.initials})]})]})})]},N)})]})}),a&&l.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 px-6 py-3 bg-red-500/20 border border-red-500/30 text-red-200 rounded-2xl text-xs font-bold shadow-2xl animate-bounce",children:a}),l.jsx(fL,{isOpen:d,onClose:()=>f(!1),onCreate:g})]})},hf=({icon:e,title:t,desc:n,color:r})=>l.jsxs("div",{className:"group relative p-8 rounded-[32px] bg-surface-dark border border-white/5 hover:border-white/10 transition-all cursor-pointer flex flex-col h-full gap-6 hover:shadow-2xl hover:shadow-black/40",children:[l.jsx("div",{className:`size-14 rounded-2xl ${r} flex items-center justify-center text-white shadow-lg group-hover:scale-110 transition-all duration-500`,children:l.jsx("span",{className:"material-symbols-outlined text-3xl",children:e})}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-2xl font-bold text-white tracking-tight",children:t}),l.jsx("p",{className:"text-slate-500 text-sm leading-relaxed",children:n})]}),l.jsxs("div",{className:"mt-auto pt-4 border-t border-white/5 flex items-center justify-between text-slate-500 group-hover:text-white transition-colors",children:[l.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Architect Tool"}),l.jsx("span",{className:"material-symbols-outlined text-xl group-hover:translate-x-1 transition-transform",children:"arrow_forward"})]})]}),pL=()=>{const{projectName:e,handleCreateEntity:t}=Ka(),n=tr();return nr(),l.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-12 gap-16 max-w-6xl mx-auto w-full",children:[l.jsxs("div",{className:"flex flex-col items-center text-center gap-8 max-w-2xl animate-in fade-in slide-in-from-bottom-8 duration-700",children:[l.jsx("div",{className:"size-20 rounded-full bg-white text-background-dark flex items-center justify-center shadow-2xl shadow-white/20",children:l.jsx("span",{className:"material-symbols-outlined text-4xl font-bold",children:"explore"})}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h1",{className:"text-6xl font-manrope font-black text-white tracking-tighter leading-tight",children:"Bienvenido de nuevo, Viajero."}),l.jsxs("p",{className:"text-xl text-slate-400 font-medium leading-relaxed",children:["Tu mundo ",l.jsx("span",{className:"text-primary font-bold",children:e||"Cargando..."})," espera ser descubierto. El lienzo est vaco, pero tu imaginacin no tiene lmites. Cmo empezamos hoy?"]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 w-full items-stretch animate-in fade-in slide-in-from-bottom-12 duration-1000 delay-300",children:[l.jsx("div",{onClick:()=>t(null,"default"),children:l.jsx(hf,{icon:"person_add",title:"Aadir Entidad",desc:"Agrega un personaje, lugar o item importante a tu base de datos.",color:"bg-indigo-600"})}),l.jsx("div",{onClick:()=>t(null,"map"),children:l.jsx(hf,{icon:"map",title:"Crear Mapa",desc:"Dibuja una representacin cartogrfica de una regin.",color:"bg-purple-600"})}),l.jsx("div",{onClick:()=>n("writing"),children:l.jsx(hf,{icon:"edit_note",title:"Empezar a Escribir",desc:"Abre el editor de texto y comienza un nuevo captulo.",color:"bg-emerald-600"})}),l.jsx("div",{onClick:()=>alert("WIP: Notas Rpidas"),children:l.jsx(hf,{icon:"lightbulb",title:"Ver Ideas Rpidas",desc:"Revisa tus notas y fragmentos de inspiracin guardados.",color:"bg-amber-600"})})]})]})},mL=()=>{var f,p;const e=tr(),[t,n]=G.useState(null),[r,i]=G.useState("appearance"),[a,s]=G.useState({theme:"deep_space",font:"Manrope",fontSize:16,focusMode:!1,transparencyEffects:!0,vaultPath:"C:/Users/Author/Documents/ChronosAtlas/MyFirstWorld"});G.useEffect(()=>{console.log("Settings Page Mounted");try{const m=localStorage.getItem("user");m&&m!=="undefined"&&n(JSON.parse(m))}catch(m){console.error("Failed to parse user settings",m)}},[]);const o=async()=>{try{await be.post("/auth/logout",{})}catch(m){console.error("Logout error",m)}finally{localStorage.removeItem("user"),sessionStorage.clear(),e("/")}},c=[{id:"general",label:"General",icon:"settings"},{id:"appearance",label:"Apariencia",icon:"palette"},{id:"editor",label:"Editor",icon:"edit_note"},{id:"sync",label:"Sincronizacin",icon:"sync_lock"},{id:"notifications",label:"Notificaciones",icon:"notifications"}],d=[{id:"deep_space",label:"Deep Space",color:"#0f172a"},{id:"nebula",label:"Nebula",color:"#312e81"},{id:"high_contrast",label:"High Contrast",color:"#000000"}];return l.jsxs("div",{className:"flex w-full h-full bg-[#050508] text-white font-sans overflow-hidden",children:[l.jsxs("aside",{className:"w-64 flex-none flex flex-col border-r border-white/5 bg-[#0a0a0e]",children:[l.jsxs("div",{className:"p-8 pb-4",children:[l.jsx("div",{className:"size-10 rounded-full bg-white flex items-center justify-center text-black mb-4",children:l.jsx("span",{className:"material-symbols-outlined text-2xl",children:"settings"})}),l.jsx("h1",{className:"text-xl font-bold tracking-tight",children:"Ajustes"}),l.jsx("p",{className:"text-xs text-slate-500 font-mono mt-1",children:"v2.4.0 Local-Build"})]}),l.jsx("nav",{className:"flex-1 px-4 py-4 space-y-1",children:c.map(m=>l.jsxs("button",{onClick:()=>i(m.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold transition-all ${r===m.id?"bg-indigo-500/10 text-indigo-400":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:[l.jsx("span",{className:"material-symbols-outlined text-lg",children:m.icon}),m.label]},m.id))}),l.jsx("div",{className:"p-4 border-t border-white/5",children:l.jsxs("button",{onClick:o,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold text-red-400 hover:bg-red-500/10 transition-colors",children:[l.jsx("span",{className:"material-symbols-outlined text-lg",children:"logout"}),"Cerrar Sesin"]})})]}),l.jsx("main",{className:"flex-1 overflow-y-auto p-12 custom-scrollbar",children:l.jsxs("div",{className:"max-w-3xl mx-auto space-y-12",children:[l.jsxs("header",{children:[l.jsx("h2",{className:"text-3xl font-bold mb-2",children:(f=c.find(m=>m.id===r))==null?void 0:f.label}),l.jsx("p",{className:"text-slate-500",children:"Personaliza la interfaz visual y tu entorno de escritura para maximizar tu creatividad y concentracin."})]}),r==="appearance"&&l.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4",children:[l.jsxs("section",{className:"bg-[#0f0f13] border border-white/5 rounded-3xl p-8",children:[l.jsx("h3",{className:"text-lg font-bold mb-1",children:"Tema de la Interfaz"}),l.jsx("p",{className:"text-xs text-slate-500 mb-6",children:"Selecciona el esquema de colores que prefieras."}),l.jsx("div",{className:"grid grid-cols-3 gap-6",children:d.map(m=>l.jsxs("button",{onClick:()=>s({...a,theme:m.id}),className:`relative group text-left transition-all ${a.theme===m.id?"ring-2 ring-indigo-500":"hover:ring-1 hover:ring-white/20"} rounded-2xl overflow-hidden`,children:[l.jsx("div",{className:"h-32 bg-black/20 relative p-4 flex items-center justify-center",children:l.jsx("div",{className:"w-full h-full rounded-xl flex items-center justify-center",style:{backgroundColor:m.color},children:l.jsx("div",{className:"size-8 rounded-full bg-white/10 backdrop-blur-md"})})}),l.jsx("div",{className:"p-4 bg-[#18181b]",children:l.jsx("span",{className:"text-xs font-bold text-slate-300 group-hover:text-white",children:m.label})})]},m.id))})]}),l.jsxs("section",{className:"bg-[#0f0f13] border border-white/5 rounded-3xl p-8 space-y-8",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("span",{className:"material-symbols-outlined text-indigo-400",children:"text_fields"}),l.jsx("h3",{className:"text-lg font-bold",children:"Configuracin del Editor"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-12 border-b border-white/5 pb-8",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsx("label",{className:"text-xs font-bold text-slate-500",children:"Tipografa"}),l.jsxs("div",{className:"relative",children:[l.jsxs("select",{value:a.font,onChange:m=>s({...a,font:m.target.value}),className:"w-full bg-[#18181b] border border-white/10 rounded-xl px-4 py-3 text-sm text-white appearance-none outline-none focus:border-indigo-500 transition-colors",children:[l.jsx("option",{value:"Manrope",children:"Manrope (Sans-serif)"}),l.jsx("option",{value:"Inter",children:"Inter"}),l.jsx("option",{value:"Merriweather",children:"Merriweather (Serif)"})]}),l.jsx("span",{className:"material-symbols-outlined absolute right-4 top-1/2 -translate-y-1/2 text-slate-500 pointer-events-none text-sm",children:"expand_more"})]}),l.jsx("p",{className:"text-[10px] text-slate-600",children:"La fuente utilizada en el lienzo de escritura."})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("label",{className:"text-xs font-bold text-slate-500",children:"Tamao de Fuente"}),l.jsxs("span",{className:"text-xs font-bold text-indigo-400",children:[a.fontSize,"px"]})]}),l.jsx("input",{type:"range",min:"12",max:"24",value:a.fontSize,onChange:m=>s({...a,fontSize:parseInt(m.target.value)}),className:"w-full accent-indigo-500 h-1 bg-white/10 rounded-lg appearance-none cursor-pointer"}),l.jsxs("div",{className:"flex justify-between text-[10px] text-slate-600 font-bold uppercase",children:[l.jsx("span",{children:"Aa"}),l.jsx("span",{children:"Aa"})]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex gap-4",children:[l.jsx("div",{className:"size-10 rounded-full bg-white/5 flex items-center justify-center text-slate-400",children:l.jsx("span",{className:"material-symbols-outlined",children:"center_focus_strong"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-bold text-white",children:"Modo Enfoque"}),l.jsx("p",{className:"text-xs text-slate-500",children:"Oculta todos los paneles laterales al escribir."})]})]}),l.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:a.focusMode,onChange:m=>s({...a,focusMode:m.target.checked}),className:"sr-only peer"}),l.jsx("div",{className:"w-11 h-6 bg-white/10 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-slate-400 after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-500 peer-checked:after:bg-white"})]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex gap-4",children:[l.jsx("div",{className:"size-10 rounded-full bg-white/5 flex items-center justify-center text-slate-400",children:l.jsx("span",{className:"material-symbols-outlined",children:"blur_on"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-bold text-white",children:"Efectos de Transparencia"}),l.jsx("p",{className:"text-xs text-slate-500",children:"Desactivar para mejorar el rendimiento."})]})]}),l.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:a.transparencyEffects,onChange:m=>s({...a,transparencyEffects:m.target.checked}),className:"sr-only peer"}),l.jsx("div",{className:"w-11 h-6 bg-white/10 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-slate-400 after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-500 peer-checked:after:bg-white"})]})]})]})]}),l.jsxs("section",{className:"bg-[#0f0f13] border border-white/5 rounded-3xl p-1 relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-indigo-500 rounded-l-3xl"}),l.jsxs("div",{className:"p-8",children:[l.jsxs("div",{className:"flex justify-between items-start mb-6",children:[l.jsxs("div",{className:"flex gap-4",children:[l.jsx("span",{className:"material-symbols-outlined text-indigo-400 text-2xl",children:"folder_special"}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-white",children:"Almacenamiento Local"}),l.jsx("p",{className:"text-xs text-slate-500",children:"Tus datos viven en tu dispositivo. Gestiona tus copias de seguridad."})]})]}),l.jsxs("span",{className:"px-3 py-1 bg-green-500/10 text-green-400 rounded-full text-[10px] font-bold uppercase border border-green-500/20 flex items-center gap-2",children:[l.jsx("span",{className:"size-1.5 rounded-full bg-green-500 animate-pulse"})," Sincronizado"]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-bold text-slate-500 block mb-2",children:"Ruta de la Bveda"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("div",{className:"flex-1 bg-[#18181b] border border-white/10 rounded-xl px-4 py-3 text-xs font-mono text-slate-300 truncate",children:a.vaultPath}),l.jsx("button",{className:"px-4 py-2 bg-white/5 hover:bg-white/10 text-white rounded-xl text-xs font-bold transition-colors",children:"Cambiar"})]})]}),l.jsxs("div",{className:"bg-[#18181b] rounded-xl p-4 flex items-center justify-between border border-white/5",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"size-10 rounded-full bg-indigo-500/20 flex items-center justify-center text-indigo-400",children:l.jsx("span",{className:"material-symbols-outlined",children:"history"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-bold text-white",children:"Copia de Seguridad Automtica"}),l.jsx("p",{className:"text-[10px] text-slate-500",children:"Ultima copia: Hace 12 minutos"})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"px-4 py-2 bg-white/5 hover:bg-white/10 text-white rounded-lg text-xs font-bold transition-colors",children:"Restaurar"}),l.jsx("button",{className:"px-4 py-2 bg-indigo-500 hover:bg-indigo-600 text-white rounded-lg text-xs font-bold transition-colors shadow-lg shadow-indigo-500/20",children:"Respaldar Ahora"})]})]})]})]})]}),l.jsx("div",{className:"flex justify-end pt-8 pb-20",children:l.jsx("button",{className:"px-8 py-3 bg-white text-black font-bold rounded-full hover:scale-105 transition-transform shadow-xl",children:"Guardar Cambios"})})]}),r!=="appearance"&&l.jsxs("div",{className:"flex flex-col items-center justify-center h-[50vh] text-slate-600",children:[l.jsx("span",{className:"material-symbols-outlined text-6xl mb-4 opacity-20",children:"construction"}),l.jsx("h3",{className:"text-xl font-bold text-slate-500",children:"En Construccin"}),l.jsxs("p",{className:"text-sm",children:["El mdulo ",(p=c.find(m=>m.id===r))==null?void 0:p.label," estar disponible pronto."]})]})]})})]})},Iu=({isOpen:e,onClose:t,onConfirm:n,title:r,message:i,confirmText:a="Confirmar",cancelText:s="Cancelar",type:o="danger"})=>e?Ba.createPortal(l.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",onClick:t}),l.jsxs("div",{className:"relative w-full max-w-md bg-[#0a0a0c] border border-white/10 rounded-3xl shadow-2xl p-6 animate-in zoom-in-95 duration-200 overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 left-0 right-0 h-32 bg-gradient-to-b from-white/5 to-transparent pointer-events-none"}),l.jsxs("div",{className:"relative z-10 text-center",children:[l.jsx("div",{className:`mx-auto mb-4 size-16 rounded-2xl flex items-center justify-center ${o==="danger"?"bg-red-500/10 text-red-500":"bg-yellow-500/10 text-yellow-500"}`,children:l.jsx("span",{className:"material-symbols-outlined text-3xl",children:o==="danger"?"delete_forever":"warning"})}),l.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:r}),l.jsx("p",{className:"text-text-muted text-sm mb-8 leading-relaxed",children:i}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:t,className:"flex-1 px-4 py-3 rounded-xl bg-surface-light hover:bg-white/10 text-text-muted hover:text-white text-xs font-bold transition-all border border-white/5",children:s}),l.jsx("button",{onClick:()=>{n(),t()},className:`flex-1 px-4 py-3 rounded-xl text-white text-xs font-bold transition-all shadow-lg flex items-center justify-center gap-2
                                ${o==="danger"?"bg-red-500 hover:bg-red-600 shadow-red-500/20":"bg-primary hover:bg-primary-light shadow-primary/20"}`,children:l.jsx("span",{children:a})})]})]})]})]}),document.body):null,P4=({compact:e=!1})=>{const[t,n]=G.useState(null),[r,i]=G.useState([]),[a,s]=G.useState(!1),[o,c]=G.useState(null);G.useEffect(()=>{d()},[]);const d=async()=>{try{const g=await be.get("/world-bible/folders");g.length>0&&n(g[0].id),f()}catch(g){console.error("Init error:",g)}},f=async()=>{s(!0);try{const g=await be.get("/world-bible/templates/global");i(g)}catch(g){console.error("Error loading templates:",g)}finally{s(!1)}},p=async g=>{if(t)try{await be.post(`/world-bible/folders/${t}/templates`,{nombre:g.label,tipo:g.type,required:g.required,metadata:g.metadata?JSON.stringify(g.metadata):null,global:!0}),f()}catch(b){console.error("Error creating template:",b)}},m=async()=>{if(o)try{await be.delete(`/world-bible/templates/${o}`),i(g=>g.filter(b=>b.id!==o))}catch(g){console.error("Error deleting template:",g)}finally{c(null)}};return l.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4 duration-500",children:[l.jsxs(Ke,{className:`${e?"p-4 bg-transparent border-none shadow-none":"p-8 space-y-8"}`,children:[l.jsx("header",{className:`flex ${e?"flex-col gap-4":"justify-between items-center"}`,children:l.jsxs("div",{children:[l.jsx("h3",{className:`${e?"text-sm":"text-xl"} font-bold text-white`,children:"Atributos Globales"}),l.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Define atributos disponibles para todas las entidades."})]})}),l.jsxs("div",{className:"space-y-4",children:[a?l.jsx("div",{className:"text-center p-4 text-slate-500",children:"Cargando plantillas..."}):r.map((g,b)=>l.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-2xl bg-white/[0.02] border border-white/5 hover:border-primary/50 hover:bg-white/5 transition-all cursor-grab active:cursor-grabbing group select-none",draggable:!0,onDragStart:y=>{y.dataTransfer.setData("application/reactflow/type","attribute"),y.dataTransfer.setData("templateId",g.id),y.dataTransfer.setData("templateData",JSON.stringify(g)),y.dataTransfer.effectAllowed="copy"},children:[l.jsxs("span",{className:"text-[10px] font-black text-slate-700 w-6 group-hover:text-primary transition-colors",children:["0",b+1]}),l.jsxs("div",{className:"flex-1 pointer-events-none",children:[l.jsx("div",{className:"text-sm font-bold text-white",children:g.nombre}),l.jsxs("div",{className:"text-[10px] text-slate-500 uppercase tracking-widest",children:[g.tipo," ",g.esObligatorio&&" Required"]}),g.metadata&&l.jsx("div",{className:"text-[10px] text-slate-600 font-mono mt-1 truncate",children:g.metadata})]}),l.jsx("button",{onClick:()=>c(g.id),className:"p-1.5 text-slate-500 hover:text-red-500 hover:bg-red-500/10 rounded-lg transition-colors",title:"Eliminar Plantilla Global",children:l.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]},g.id)),l.jsx(gL,{onAdd:p})]})]}),l.jsx(Iu,{isOpen:!!o,onClose:()=>c(null),onConfirm:m,title:"Eliminar Plantilla",message:"Ests seguro de que quieres eliminar esta plantilla? Esta accin es irreversible.",confirmText:"Eliminar",type:"danger"})]})},gL=({onAdd:e})=>{const[t,n]=G.useState(""),[r,i]=G.useState("text"),[a,s]=G.useState(!1),[o,c]=G.useState([""]),d=()=>c([...o,""]),f=g=>c(o.filter((b,y)=>y!==g)),p=(g,b)=>{const y=[...o];y[g]=b,c(y)},m=()=>{if(!t)return;let g=null;["select","multi_select"].includes(r)&&(g={options:o.filter(b=>b.trim())}),e({label:t,type:r,required:a,metadata:g}),n(""),c([""])};return l.jsxs("div",{className:"p-4 rounded-2xl border-2 border-dashed border-white/10 bg-white/[0.01] space-y-4",children:[l.jsx("h4",{className:"text-xs font-black uppercase tracking-widest text-primary",children:"Add New Attribute"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx("input",{placeholder:"Field Name",value:t,onChange:g=>n(g.target.value),className:"bg-black/20 border border-white/5 rounded-xl px-4 py-2 text-xs text-white outline-none focus:border-primary/30 min-w-0"}),l.jsxs("select",{value:r,onChange:g=>i(g.target.value),className:"bg-black/20 border border-white/5 rounded-xl px-4 py-2 text-xs text-white outline-none",children:[l.jsx("option",{value:"text",children:"Text (Long)"}),l.jsx("option",{value:"short_text",children:"Text (Short)"}),l.jsx("option",{value:"number",children:"Number"}),l.jsx("option",{value:"date",children:"Date"}),l.jsx("option",{value:"select",children:"Single Selection (Dropdown)"}),l.jsx("option",{value:"multi_select",children:"Multiple Selection"}),l.jsx("option",{value:"boolean",children:"Switch (True/False)"})]})]}),["select","multi_select"].includes(r)&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Options"}),l.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto pr-2 custom-scrollbar",children:o.map((g,b)=>l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{placeholder:`Option ${b+1}`,value:g,onChange:y=>p(b,y.target.value),className:"flex-1 bg-black/20 border border-white/5 rounded-lg px-3 py-1.5 text-xs text-white outline-none focus:border-primary/30"}),l.jsx("button",{onClick:()=>f(b),className:"p-1.5 hover:bg-red-500/20 text-slate-500 hover:text-red-400 rounded-lg transition-colors",children:l.jsx("span",{className:"material-symbols-outlined text-sm",children:"close"})})]},b))}),l.jsx("button",{onClick:d,className:"w-full py-1.5 text-[10px] font-bold uppercase tracking-widest text-primary hover:bg-primary/5 rounded-lg border border-dashed border-primary/20 transition-all",children:"+ Add Custom Option"})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:a,onChange:g=>s(g.target.checked),className:"size-4 rounded border-white/10 bg-white/5 accent-primary"}),l.jsx("span",{className:"text-[10px] font-bold text-slate-500",children:"Required Field"})]}),l.jsx("button",{onClick:m,className:"px-4 py-2 bg-primary/20 text-primary rounded-lg text-xs font-bold hover:bg-primary/30 transition-all",children:"+ Add Field"})]})]})},A4=({projectName:e,storageKey:t})=>{const[n,r]=G.useState([]),[i,a]=G.useState(!1),[s,o]=G.useState(null),c=()=>t||`notes_v2_${e}`;G.useEffect(()=>{const _=c();if(!_)return;const x=localStorage.getItem(_);if(x)r(JSON.parse(x));else if(!t){const w=localStorage.getItem(`notes_${e}`);if(w){const E={id:Date.now(),title:"Nota General",content:w};r([E]),localStorage.setItem(_,JSON.stringify([E]))}}},[e,t]);const d=_=>{r(_);const x=c();x&&localStorage.setItem(x,JSON.stringify(_))},f=()=>{const _={id:Date.now(),title:"Nueva Nota",content:""};d([...n,_]),o(_.id)},[p,m]=G.useState(null),g=_=>{m(_)},b=()=>{p&&(d(n.filter(_=>_.id!==p)),m(null))},y=(_,x,w)=>{d(n.map(E=>E.id===_?{...E,[x]:w}:E))},N=()=>a(!i),v=()=>l.jsxs("div",{className:`flex flex-col h-full bg-surface-dark/40 ${i?"":"max-h-[25vh]"}`,children:[l.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-glass-border bg-white/5",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"material-symbols-outlined text-sm text-primary",children:"edit_note"}),l.jsxs("h3",{className:"text-[10px] font-black uppercase tracking-widest text-white",children:["Notas (",n.length,")"]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:f,className:"p-1 hover:text-primary text-text-muted transition-colors",title:"Aadir Nota",children:l.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"})}),l.jsx("button",{onClick:N,className:"p-1 hover:text-white text-text-muted transition-colors",title:"Pantalla Completa",children:l.jsx("span",{className:"material-symbols-outlined text-sm",children:i?"fullscreen_exit":"fullscreen"})})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2 space-y-2",children:n.length===0?l.jsx("div",{className:"py-8 text-center opacity-30 italic text-[10px] uppercase font-bold",children:"Sin notas"}):n.map(_=>l.jsxs("div",{className:"group bg-white/5 border border-glass-border rounded-xl overflow-hidden hover:border-primary/30 transition-all",children:[l.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-white/5",children:[l.jsx("input",{className:"bg-transparent border-none text-[11px] font-bold text-white outline-none w-full",value:_.title,onChange:x=>y(_.id,"title",x.target.value),placeholder:"Ttulo..."}),l.jsx("button",{onClick:()=>g(_.id),className:"opacity-0 group-hover:opacity-100 p-1 text-text-muted hover:text-red-400 transition-all",children:l.jsx("span",{className:"material-symbols-outlined text-xs",children:"delete"})})]}),l.jsx("textarea",{className:"w-full bg-transparent p-3 text-xs text-white/70 outline-none resize-none min-h-[80px] custom-scrollbar",value:_.content,onChange:x=>y(_.id,"content",x.target.value),placeholder:"Escribe el contenido aqu..."})]},_.id))}),l.jsx(Iu,{isOpen:!!p,onClose:()=>m(null),onConfirm:b,title:"Eliminar Nota",message:"Ests seguro de que quieres eliminar esta nota? No se podr recuperar.",confirmText:"Eliminar",type:"danger"})]});return i?l.jsx("div",{className:"fixed inset-0 z-[100] bg-background-dark/95 backdrop-blur-md p-8 flex flex-col items-center",children:l.jsx("div",{className:"w-full max-w-4xl h-full flex flex-col border border-glass-border rounded-3xl overflow-hidden shadow-2xl bg-surface-dark",children:l.jsx(v,{})})}):l.jsx("div",{className:"h-full border border-glass-border rounded-2xl overflow-hidden",children:l.jsx(v,{})})},gs=({to:e,icon:t,label:n,collapsed:r,end:i})=>l.jsxs(EM,{to:e,end:i,className:({isActive:a})=>`
            flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all group
            ${a?"bg-primary text-white shadow-lg shadow-primary/20":"text-text-muted hover:text-white hover:bg-white/5"}
            ${r?"justify-center":""}
        `,title:r?n:"",children:[l.jsx("span",{className:"material-symbols-outlined text-xl",children:t}),!r&&l.jsx("span",{className:"text-sm font-bold tracking-wide",children:n})]}),R4=e=>{switch(e==null?void 0:e.toLowerCase()){case"text":return"notes";case"short_text":return"short_text";case"number":return"pin";case"date":return"calendar_today";case"select":return"list";case"boolean":return"check_box";case"map":return"map";case"timeline":return"timeline";case"character":case"entidadindividual":return"person";case"location":case"zona":case"construccion":return"location_on";case"culture":case"entidadcolectiva":return"groups";case"universe":case"galaxy":case"system":case"planet":return"public";case"entity_link":return"link";default:return"description"}},vL=()=>{console.log("ArchitectLayout Mounting");const{username:e,projectName:t,folderSlug:n}=nr();tr();const r=qs(),[i,a]=G.useState(!0),[s,o]=G.useState(!1),[c,d]=G.useState("Loading..."),[f,p]=G.useState(null),[m,g]=G.useState("NOTES"),[b,y]=G.useState(""),[N,v]=G.useState([]),[_,x]=G.useState(null),[w,E]=G.useState(null),[P,A]=G.useState({name:"",description:"",type:"regional",showGrid:!0,gridSize:50,width:800,height:600,bgImage:null}),[T,L]=G.useState(null);G.useState("identity");const[k,C]=G.useState("notes"),[O,F]=G.useState(""),[M,D]=G.useState("ALL"),$=r.pathname.includes("/bible"),V=r.pathname.includes("/writing"),[K,H]=G.useState("index"),[q,I]=G.useState(null),[z,W]=G.useState([]),[Q,ee]=G.useState("identity"),[Y,U]=G.useState(null),J=(se,ce)=>{se.stopPropagation(),U(ce)},te=async()=>{if(Y){try{await be.delete(`/world-bible/templates/${Y}`),v(se=>se.filter(ce=>ce.id!==Y))}catch(se){console.error("Delete failed",se)}U(null)}},X=async se=>{se.preventDefault();try{await be.put(`/world-bible/templates/${q.id}`,q),v(ce=>ce.map(de=>de.id===q.id?q:de)),I(null)}catch(ce){console.error("Update failed",ce)}},ne=`/${e}/${t}`;G.useEffect(()=>{t&&ue(t);const se=()=>{t&&ue(t)};return window.addEventListener("focus",se),()=>window.removeEventListener("focus",se)},[t]),G.useEffect(()=>{$&&a(!1)},[$]);const ue=async se=>{try{const ce=await be.get(`/proyectos/${se}`);ce&&(d(ce.nombreProyecto),p(ce.id))}catch(ce){console.error("Error loading project:",ce)}};return l.jsxs("div",{className:"flex h-screen w-full overflow-hidden bg-background-dark text-text-main font-sans selection:bg-primary/30",children:[l.jsxs("aside",{className:`
                    flex-none bg-surface-dark border-r border-glass-border transition-all duration-500 relative flex flex-col z-30
                    ${i?"w-80":"w-20"}
                `,children:[l.jsxs("div",{className:"h-16 flex items-center justify-center border-b border-glass-border relative",children:[i?l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"size-8 rounded-lg bg-surface-light flex items-center justify-center text-primary shadow-inner",children:l.jsx("span",{className:"material-symbols-outlined",children:"auto_stories"})}),l.jsx("h2",{className:"text-sm font-black uppercase tracking-widest text-white truncate max-w-[150px]",children:c})]}):l.jsx("button",{onClick:()=>a(!0),className:"size-10 rounded-xl hover:bg-white/5 flex items-center justify-center text-text-muted hover:text-white transition-all",children:l.jsx("span",{className:"material-symbols-outlined",children:"menu"})}),i&&l.jsx("button",{onClick:()=>a(!1),className:"absolute right-4 text-text-muted hover:text-white transition-colors",children:l.jsx("span",{className:"material-symbols-outlined text-lg",children:"dock_to_left"})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar flex flex-col",children:l.jsxs("div",{className:"p-3 space-y-1",children:[l.jsx(gs,{to:ne,icon:"home",label:"Dashboard",collapsed:!i,end:!0}),l.jsx(gs,{to:`${ne}/bible`,icon:"menu_book",label:"World Bible",collapsed:!i}),l.jsx(gs,{to:`${ne}/map`,icon:"map",label:"Atlas",collapsed:!i}),l.jsx(gs,{to:`${ne}/timeline`,icon:"calendar_month",label:"Chronology",collapsed:!i}),l.jsx(gs,{to:`${ne}/graph`,icon:"hub",label:"Graph",collapsed:!i}),l.jsx("div",{className:"h-px bg-glass-border my-2 mx-2 opacity-50"}),l.jsx(gs,{to:`${ne}/writing`,icon:"edit_note",label:"Writing",collapsed:!i}),l.jsx(gs,{to:`${ne}/settings`,icon:"settings",label:"Settings",collapsed:!i})]})}),l.jsx("footer",{className:"p-4 border-t border-glass-border",children:l.jsxs("div",{className:`flex items-center gap-3 ${!i&&"justify-center"}`,children:[l.jsx("div",{className:"size-10 rounded-full border border-glass-border p-1 bg-surface-light relative",children:l.jsx("div",{className:"w-full h-full rounded-full bg-gradient-to-br from-primary to-purple-500 flex items-center justify-center text-white font-black text-xs",children:e?e.substring(0,2).toUpperCase():"US"})}),i&&l.jsxs("div",{className:"overflow-hidden",children:[l.jsx("h4",{className:"text-xs font-bold text-white truncate",children:e||"User"}),l.jsx("p",{className:"text-[10px] text-text-muted uppercase font-black tracking-tighter",children:"Architect"})]})]})})]}),l.jsxs("main",{className:"flex-1 flex flex-col min-w-0 bg-background-dark relative",children:[l.jsx("div",{className:"h-16 w-full absolute top-0 left-0 bg-gradient-to-b from-background-dark to-transparent pointer-events-none"}),l.jsx("div",{className:"flex-1 flex overflow-hidden relative",children:l.jsx(Ew,{context:{setRightPanelMode:g,setRightOpen:o,setRightPanelTitle:y,projectName:c,projectId:f,availableTemplates:N,setAvailableTemplates:v,setAddAttributeHandler:x,setCreateTemplateHandler:E,mapSettings:P,setMapSettings:A,setOnMapSettingsChange:L,entityTabs:z,setEntityTabs:W,activeEntityTab:Q,setActiveEntityTab:ee,folderSearchTerm:O,setFolderSearchTerm:F,folderFilterType:M,setFolderFilterType:D}})})]}),l.jsxs("aside",{className:`
                    flex-none bg-surface-dark border-l border-glass-border transition-all duration-500 relative flex flex-col z-30
                    ${s?"w-80":"w-20"}
                `,children:[l.jsx("header",{className:"h-16 flex items-center px-6 border-b border-glass-border justify-between shrink-0",children:s?l.jsxs(l.Fragment,{children:[m==="CUSTOM"&&!V?l.jsx("h2",{className:"text-xs font-black uppercase tracking-widest text-primary",children:b||"Panel"}):V?l.jsxs("div",{className:"flex bg-white/5 rounded-lg p-1 gap-1 w-full mr-4",children:[l.jsx("button",{onClick:()=>H("index"),className:`flex-1 py-1 rounded-md text-[10px] uppercase font-bold transition-all ${K==="index"?"bg-primary text-white shadow":"text-slate-500 hover:text-white"}`,children:"ndice"}),l.jsx("button",{onClick:()=>H("notes"),className:`flex-1 py-1 rounded-md text-[10px] uppercase font-bold transition-all ${K==="notes"?"bg-primary text-white shadow":"text-slate-500 hover:text-white"}`,children:"Notas"})]}):$&&m==="NOTES"?l.jsxs("div",{className:"flex bg-white/5 rounded-lg p-1 gap-1",children:[l.jsx("button",{onClick:()=>C("notes"),className:`px-3 py-1 rounded-md text-[10px] uppercase font-bold transition-all ${k==="notes"?"bg-primary text-white shadow":"text-slate-500 hover:text-white"}`,children:"Notas"}),l.jsx("button",{onClick:()=>C("templates"),className:`px-3 py-1 rounded-md text-[10px] uppercase font-bold transition-all ${k==="templates"?"bg-primary text-white shadow":"text-slate-500 hover:text-white"}`,children:"Plantillas"}),l.jsx("button",{onClick:()=>C("filters"),className:`px-3 py-1 rounded-md text-[10px] uppercase font-bold transition-all ${k==="filters"?"bg-primary text-white shadow":"text-slate-500 hover:text-white"}`,children:"Explorar"})]}):l.jsx("h2",{className:"text-xs font-black uppercase tracking-widest text-white",children:b||(m==="NOTES"?"Notas Globales":"Constructor")}),l.jsx("button",{onClick:()=>o(!1),className:"text-text-muted hover:text-white transition-colors shrink-0",children:l.jsx("span",{className:"material-symbols-outlined text-lg",children:"dock_to_right"})})]}):l.jsx("button",{onClick:()=>o(!0),className:"w-full h-full flex items-center justify-center text-text-muted hover:text-white transition-colors",children:l.jsx("span",{className:"material-symbols-outlined",children:m==="NOTES"||V?"edit_note":m==="MAP"?"map":m==="CUSTOM"?"build":"handyman"})})}),l.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar p-0",children:s?V?l.jsxs(l.Fragment,{children:[l.jsx("div",{id:"architect-right-panel-portal",className:`h-full relative flex flex-col ${K==="index"?"block":"hidden"}`}),l.jsx("div",{className:`h-full p-4 overflow-hidden ${K==="notes"?"block":"hidden"}`,children:l.jsx(A4,{projectName:t})})]}):m==="CUSTOM"?l.jsx("div",{id:"architect-right-panel-portal",className:"h-full relative flex flex-col"}):m==="NOTES"?k==="templates"&&$?l.jsx("div",{className:"h-full overflow-y-auto no-scrollbar",children:l.jsx(P4,{compact:!0})}):k==="filters"&&$?l.jsxs("div",{className:"h-full p-6 space-y-6 animate-in fade-in slide-in-from-right-4",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-text-muted",children:"Bsqueda"}),l.jsxs("div",{className:"bg-black/20 border border-white/10 rounded-xl p-3 flex items-center gap-2 focus-within:border-primary transition-colors",children:[l.jsx("span",{className:"material-symbols-outlined text-slate-500",children:"search"}),l.jsx("input",{value:O,onChange:se=>F(se.target.value),placeholder:"Buscar entidad...",className:"bg-transparent border-none outline-none text-sm text-white w-full placeholder-slate-600"}),O&&l.jsx("button",{onClick:()=>F(""),className:"text-slate-500 hover:text-white",children:l.jsx("span",{className:"material-symbols-outlined text-sm",children:"close"})})]})]}),l.jsx("div",{className:"h-px bg-glass-border"}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-text-muted",children:"Filtrar por Tipo"}),l.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{id:"ALL",label:"Todos",icon:"grid_view"},{id:"ENTITY",label:"Entidades",icon:"person"},{id:"MAP",label:"Mapas",icon:"map"},{id:"TIMELINE",label:"Timelines",icon:"timeline"}].map(se=>l.jsxs("button",{onClick:()=>D(se.id),className:`
                                                        p-3 rounded-xl border flex flex-col items-center gap-2 transition-all
                                                        ${M===se.id?"bg-primary text-white border-primary shadow-lg shadow-primary/20":"bg-white/5 border-transparent text-slate-500 hover:bg-white/10 hover:text-white"}
                                                    `,children:[l.jsx("span",{className:"material-symbols-outlined",children:se.icon}),l.jsx("span",{className:"text-[10px] font-bold uppercase",children:se.label})]},se.id))})]})]}):l.jsx("div",{className:"h-full p-4 overflow-hidden",children:l.jsx(A4,{projectName:t})}):m==="MAP"?l.jsxs("div",{className:"p-6 space-y-8 animate-in fade-in slide-in-from-right-4",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-text-muted",children:"Grid System"}),l.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:P.showGrid,onChange:se=>{const ce={...P,showGrid:se.target.checked};A(ce),T&&T(ce)},className:"sr-only peer"}),l.jsx("div",{className:"w-9 h-5 bg-white/10 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-primary"})]})]}),l.jsxs("div",{className:`space-y-2 transition-opacity ${P.showGrid?"opacity-100":"opacity-30 pointer-events-none"}`,children:[l.jsxs("div",{className:"flex justify-between text-xs font-bold text-white",children:[l.jsx("span",{children:"Size"}),l.jsxs("span",{className:"font-mono text-primary",children:[P.gridSize,"px"]})]}),l.jsx("input",{type:"range",min:"10",max:"200",step:"10",value:P.gridSize,onChange:se=>{const ce={...P,gridSize:parseInt(se.target.value)};A(ce),T&&T(ce)},className:"w-full h-1 bg-white/10 rounded-lg appearance-none cursor-pointer accent-primary"})]})]}),l.jsx("div",{className:"h-px bg-glass-border"}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-text-muted",children:"Canvas Data"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500",children:"Width (px)"}),l.jsx("input",{type:"number",value:P.width,onChange:se=>{const ce={...P,width:parseInt(se.target.value)};A(ce),T&&T(ce)},className:"w-full bg-black/20 border border-white/10 rounded-lg p-2 text-white text-right font-mono text-sm focus:border-primary outline-none"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500",children:"Height (px)"}),l.jsx("input",{type:"number",value:P.height,onChange:se=>{const ce={...P,height:parseInt(se.target.value)};A(ce),T&&T(ce)},className:"w-full bg-black/20 border border-white/10 rounded-lg p-2 text-white text-right font-mono text-sm focus:border-primary outline-none"})]})]})]})]}):m==="ENTITY"?l.jsxs("div",{className:"flex flex-col h-full animate-in fade-in slide-in-from-right-4",children:[l.jsx("div",{className:"p-4 border-b border-glass-border",children:l.jsx("div",{className:"bg-black/40 p-1 rounded-xl flex",children:z.map(se=>{const ce=de=>{switch(de.toLowerCase()){case"identity":return"badge";case"narrative":return"auto_stories";case"attributes":return"tune";case"notes":return"edit_note";default:return"circle"}};return l.jsxs("button",{onClick:()=>ee(se),className:`
                                                        flex-1 py-2 rounded-lg transition-all group relative flex items-center justify-center
                                                        ${Q===se?"bg-primary text-white shadow-lg":"text-text-muted hover:text-white hover:bg-white/5"}
                                                    `,title:se,children:[l.jsx("span",{className:"material-symbols-outlined text-lg",children:ce(se)}),l.jsx("span",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 bg-black/90 text-white text-[10px] uppercase font-bold px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-50",children:se})]},se)})})}),Q==="attributes"&&l.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col bg-black/20",children:[l.jsxs("div",{className:"px-6 py-4 text-[10px] font-black uppercase text-slate-500 tracking-widest flex items-center gap-2",children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"drag_indicator"})," Drag Attributes"]}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar px-2",children:l.jsx(P4,{compact:!0,initialFolderSlug:n})})]})]}):m==="TOOLBOX"?l.jsx("div",{className:"p-4 space-y-6",children:l.jsxs("div",{className:"space-y-3",children:[l.jsxs("h3",{className:"text-[10px] font-black uppercase tracking-widest text-text-muted px-2 flex justify-between items-center",children:[l.jsx("span",{children:"Plantillas Disponibles"}),l.jsx("button",{className:"text-primary hover:text-white transition-colors",title:"Crear Nueva Plantilla",onClick:()=>w&&w(),children:l.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"})})]}),N.length===0?l.jsx("div",{className:"p-6 text-center border border-dashed border-glass-border rounded-2xl opacity-30",children:l.jsx("p",{className:"text-[10px] uppercase font-bold",children:"Sin Plantillas"})}):N.map(se=>l.jsxs("button",{className:"w-full flex items-center gap-3 p-3 rounded-2xl bg-white/5 border border-glass-border hover:border-primary/50 hover:bg-primary/5 transition-all text-left group relative",draggable:!0,onDragStart:ce=>{ce.dataTransfer.setData("application/reactflow/type","attribute"),ce.dataTransfer.setData("templateId",se.id),ce.dataTransfer.effectAllowed="move"},onClick:()=>_&&_(se.id),children:[se.global&&l.jsx("span",{className:"absolute top-2 right-2 flex size-2 bg-blue-500 rounded-full shadow-lg shadow-blue-500/50",title:"Global"}),l.jsx("div",{className:"size-8 rounded-lg bg-surface-light flex items-center justify-center text-primary group-hover:scale-110 transition-transform",children:l.jsx("span",{className:"material-symbols-outlined text-sm",children:R4(se.tipo)})}),l.jsxs("div",{className:"overflow-hidden",children:[l.jsx("p",{className:"text-xs font-bold text-white truncate",children:se.nombre}),l.jsx("p",{className:"text-[10px] text-text-muted uppercase font-black tracking-tighter",children:se.tipo})]}),l.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("div",{onClick:ce=>{ce.stopPropagation(),I(se)},className:"p-1 hover:text-white text-text-muted hover:bg-white/10 rounded cursor-pointer",title:"Edit",children:l.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"})}),l.jsx("div",{onClick:ce=>J(ce,se.id),className:"p-1 hover:text-red-400 text-text-muted hover:bg-white/10 rounded cursor-pointer",title:"Delete",children:l.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]})]},se.id))]})}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-text-muted opacity-50",children:[l.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"dashboard"}),l.jsx("p",{className:"text-xs uppercase font-bold tracking-widest",children:"Select an item"})]}):l.jsx("div",{className:"flex flex-col items-center gap-4 py-4",children:m==="NOTES"?l.jsx("button",{className:"size-10 rounded-xl bg-white/5 flex items-center justify-center text-text-muted",title:"Notes",children:l.jsx("span",{className:"material-symbols-outlined text-lg",children:"edit_note"})}):N.slice(0,5).map(se=>l.jsxs("button",{className:"size-10 rounded-xl bg-white/5 flex items-center justify-center text-text-muted hover:text-white hover:bg-primary/20 transition-all relative",draggable:!0,onDragStart:ce=>{ce.dataTransfer.setData("application/reactflow/type","attribute"),ce.dataTransfer.setData("templateId",se.id)},children:[se.global&&l.jsx("span",{className:"absolute top-0 right-0 size-2 bg-blue-500 rounded-full border border-surface-dark"}),l.jsx("span",{className:"material-symbols-outlined text-lg",children:R4(se.tipo)})]},se.id))})})]}),q&&l.jsx("div",{className:"fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-surface-dark border border-glass-border rounded-2xl p-6 w-full max-w-md shadow-2xl animate-scale-in",children:[l.jsx("h3",{className:"text-xl font-black text-white mb-4",children:"Editar Plantilla"}),l.jsxs("form",{onSubmit:X,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs uppercase font-bold text-text-muted block mb-1",children:"Nombre"}),l.jsx("input",{autoFocus:!0,className:"w-full bg-black/30 border border-white/10 rounded-xl p-3 text-white focus:border-primary outline-none",value:q.nombre,onChange:se=>I({...q,nombre:se.target.value}),required:!0})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs uppercase font-bold text-text-muted block mb-1",children:"Tipo"}),l.jsxs("select",{className:"w-full bg-black/30 border border-white/10 rounded-xl p-3 text-white focus:border-primary outline-none",value:q.tipo,onChange:se=>I({...q,tipo:se.target.value}),children:[l.jsx("option",{value:"text",children:"Texto Largo"}),l.jsx("option",{value:"short_text",children:"Texto Corto"}),l.jsx("option",{value:"number",children:"Nmero"}),l.jsx("option",{value:"boolean",children:"Si/No"}),l.jsx("option",{value:"date",children:"Fecha"}),l.jsx("option",{value:"entity_link",children:"Vnculo Entidad"}),l.jsx("option",{value:"image",children:"Imagen URL"})]})]}),l.jsx("div",{className:"flex items-center",children:l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-3 bg-white/5 rounded-xl w-full hover:bg-white/10 transition-colors",children:[l.jsx("input",{type:"checkbox",checked:q.global,onChange:se=>I({...q,global:se.target.checked}),className:"accent-primary size-4"}),l.jsx("span",{className:"text-sm font-bold text-white",children:"Es Global?"})]})})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx("button",{type:"button",onClick:()=>I(null),className:"px-4 py-2 text-text-muted hover:text-white font-bold transition-colors",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"px-6 py-2 bg-primary text-white rounded-xl font-bold shadow-lg shadow-primary/20 hover:scale-105 transition-transform",children:"Guardar"})]})]})]})}),l.jsx(Iu,{isOpen:!!Y,onClose:()=>U(null),onConfirm:te,title:"Eliminar Plantilla",message:"Ests seguro de que quieres eliminar esta plantilla? Esta accin no se puede deshacer.",confirmText:"Eliminar",type:"danger"})]})};function Tn(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Tn(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var y7={exports:{}},x7={},b7={exports:{}},w7={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rl=G;function yL(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xL=typeof Object.is=="function"?Object.is:yL,bL=rl.useState,wL=rl.useEffect,_L=rl.useLayoutEffect,NL=rl.useDebugValue;function SL(e,t){var n=t(),r=bL({inst:{value:n,getSnapshot:t}}),i=r[0].inst,a=r[1];return _L(function(){i.value=n,i.getSnapshot=t,Ag(i)&&a({inst:i})},[e,n,t]),wL(function(){return Ag(i)&&a({inst:i}),e(function(){Ag(i)&&a({inst:i})})},[e]),NL(n),n}function Ag(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!xL(e,n)}catch{return!0}}function EL(e,t){return t()}var kL=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?EL:SL;w7.useSyncExternalStore=rl.useSyncExternalStore!==void 0?rl.useSyncExternalStore:kL;b7.exports=w7;var jL=b7.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dp=G,CL=jL;function TL(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var OL=typeof Object.is=="function"?Object.is:TL,PL=CL.useSyncExternalStore,AL=dp.useRef,RL=dp.useEffect,IL=dp.useMemo,ML=dp.useDebugValue;x7.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var a=AL(null);if(a.current===null){var s={hasValue:!1,value:null};a.current=s}else s=a.current;a=IL(function(){function c(g){if(!d){if(d=!0,f=g,g=r(g),i!==void 0&&s.hasValue){var b=s.value;if(i(b,g))return p=b}return p=g}if(b=p,OL(f,g))return b;var y=r(g);return i!==void 0&&i(b,y)?(f=g,b):(f=g,p=y)}var d=!1,f,p,m=n===void 0?null:n;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,n,r,i]);var o=PL(e,a[0],a[1]);return RL(function(){s.hasValue=!0,s.value=o},[o]),ML(o),o};y7.exports=x7;var LL=y7.exports;const DL=dl(LL),I4=e=>{let t;const n=new Set,r=(f,p)=>{const m=typeof f=="function"?f(t):f;if(!Object.is(m,t)){const g=t;t=p??(typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(b=>b(t,g))}},i=()=>t,c={setState:r,getState:i,getInitialState:()=>d,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{n.clear()}},d=t=e(r,i,c);return c},FL=e=>e?I4(e):I4,{useDebugValue:zL}=oe,{useSyncExternalStoreWithSelector:BL}=DL,qL=e=>e;function _7(e,t=qL,n){const r=BL(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return zL(r),r}const M4=(e,t)=>{const n=FL(e),r=(i,a=t)=>_7(n,i,a);return Object.assign(r,n),r},$L=(e,t)=>e?M4(e,t):M4;function wn(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var UL={value:()=>{}};function fp(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Gf(n)}function Gf(e){this._=e}function GL(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Gf.prototype=fp.prototype={constructor:Gf,on:function(e,t){var n=this._,r=GL(e+"",n),i,a=-1,s=r.length;if(arguments.length<2){for(;++a<s;)if((i=(e=r[a]).type)&&(i=HL(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<s;)if(i=(e=r[a]).type)n[i]=L4(n[i],e.name,t);else if(t==null)for(i in n)n[i]=L4(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Gf(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function HL(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function L4(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=UL,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Wb="http://www.w3.org/1999/xhtml";const D4={svg:"http://www.w3.org/2000/svg",xhtml:Wb,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function hp(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),D4.hasOwnProperty(t)?{space:D4[t],local:e}:e}function VL(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Wb&&t.documentElement.namespaceURI===Wb?t.createElement(e):t.createElementNS(n,e)}}function WL(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function N7(e){var t=hp(e);return(t.local?WL:VL)(t)}function KL(){}function Cw(e){return e==null?KL:function(){return this.querySelector(e)}}function YL(e){typeof e!="function"&&(e=Cw(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],s=a.length,o=r[i]=new Array(s),c,d,f=0;f<s;++f)(c=a[f])&&(d=e.call(c,c.__data__,f,a))&&("__data__"in c&&(d.__data__=c.__data__),o[f]=d);return new Zn(r,this._parents)}function XL(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function QL(){return[]}function S7(e){return e==null?QL:function(){return this.querySelectorAll(e)}}function ZL(e){return function(){return XL(e.apply(this,arguments))}}function JL(e){typeof e=="function"?e=ZL(e):e=S7(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var s=t[a],o=s.length,c,d=0;d<o;++d)(c=s[d])&&(r.push(e.call(c,c.__data__,d,s)),i.push(c));return new Zn(r,i)}function E7(e){return function(){return this.matches(e)}}function k7(e){return function(t){return t.matches(e)}}var eD=Array.prototype.find;function tD(e){return function(){return eD.call(this.children,e)}}function nD(){return this.firstElementChild}function rD(e){return this.select(e==null?nD:tD(typeof e=="function"?e:k7(e)))}var iD=Array.prototype.filter;function aD(){return Array.from(this.children)}function sD(e){return function(){return iD.call(this.children,e)}}function oD(e){return this.selectAll(e==null?aD:sD(typeof e=="function"?e:k7(e)))}function lD(e){typeof e!="function"&&(e=E7(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],s=a.length,o=r[i]=[],c,d=0;d<s;++d)(c=a[d])&&e.call(c,c.__data__,d,a)&&o.push(c);return new Zn(r,this._parents)}function j7(e){return new Array(e.length)}function cD(){return new Zn(this._enter||this._groups.map(j7),this._parents)}function Sh(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Sh.prototype={constructor:Sh,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function uD(e){return function(){return e}}function dD(e,t,n,r,i,a){for(var s=0,o,c=t.length,d=a.length;s<d;++s)(o=t[s])?(o.__data__=a[s],r[s]=o):n[s]=new Sh(e,a[s]);for(;s<c;++s)(o=t[s])&&(i[s]=o)}function fD(e,t,n,r,i,a,s){var o,c,d=new Map,f=t.length,p=a.length,m=new Array(f),g;for(o=0;o<f;++o)(c=t[o])&&(m[o]=g=s.call(c,c.__data__,o,t)+"",d.has(g)?i[o]=c:d.set(g,c));for(o=0;o<p;++o)g=s.call(e,a[o],o,a)+"",(c=d.get(g))?(r[o]=c,c.__data__=a[o],d.delete(g)):n[o]=new Sh(e,a[o]);for(o=0;o<f;++o)(c=t[o])&&d.get(m[o])===c&&(i[o]=c)}function hD(e){return e.__data__}function pD(e,t){if(!arguments.length)return Array.from(this,hD);var n=t?fD:dD,r=this._parents,i=this._groups;typeof e!="function"&&(e=uD(e));for(var a=i.length,s=new Array(a),o=new Array(a),c=new Array(a),d=0;d<a;++d){var f=r[d],p=i[d],m=p.length,g=mD(e.call(f,f&&f.__data__,d,r)),b=g.length,y=o[d]=new Array(b),N=s[d]=new Array(b),v=c[d]=new Array(m);n(f,p,y,N,v,g,t);for(var _=0,x=0,w,E;_<b;++_)if(w=y[_]){for(_>=x&&(x=_+1);!(E=N[x])&&++x<b;);w._next=E||null}}return s=new Zn(s,r),s._enter=o,s._exit=c,s}function mD(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function gD(){return new Zn(this._exit||this._groups.map(j7),this._parents)}function vD(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function yD(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,s=Math.min(i,a),o=new Array(i),c=0;c<s;++c)for(var d=n[c],f=r[c],p=d.length,m=o[c]=new Array(p),g,b=0;b<p;++b)(g=d[b]||f[b])&&(m[b]=g);for(;c<i;++c)o[c]=n[c];return new Zn(o,this._parents)}function xD(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],s;--i>=0;)(s=r[i])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function bD(e){e||(e=wD);function t(p,m){return p&&m?e(p.__data__,m.__data__):!p-!m}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var s=n[a],o=s.length,c=i[a]=new Array(o),d,f=0;f<o;++f)(d=s[f])&&(c[f]=d);c.sort(t)}return new Zn(i,this._parents).order()}function wD(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function _D(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ND(){return Array.from(this)}function SD(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var s=r[i];if(s)return s}return null}function ED(){let e=0;for(const t of this)++e;return e}function kD(){return!this.node()}function jD(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,s=i.length,o;a<s;++a)(o=i[a])&&e.call(o,o.__data__,a,i);return this}function CD(e){return function(){this.removeAttribute(e)}}function TD(e){return function(){this.removeAttributeNS(e.space,e.local)}}function OD(e,t){return function(){this.setAttribute(e,t)}}function PD(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function AD(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function RD(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ID(e,t){var n=hp(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?TD:CD:typeof t=="function"?n.local?RD:AD:n.local?PD:OD)(n,t))}function C7(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function MD(e){return function(){this.style.removeProperty(e)}}function LD(e,t,n){return function(){this.style.setProperty(e,t,n)}}function DD(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function FD(e,t,n){return arguments.length>1?this.each((t==null?MD:typeof t=="function"?DD:LD)(e,t,n??"")):il(this.node(),e)}function il(e,t){return e.style.getPropertyValue(t)||C7(e).getComputedStyle(e,null).getPropertyValue(t)}function zD(e){return function(){delete this[e]}}function BD(e,t){return function(){this[e]=t}}function qD(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function $D(e,t){return arguments.length>1?this.each((t==null?zD:typeof t=="function"?qD:BD)(e,t)):this.node()[e]}function T7(e){return e.trim().split(/^|\s+/)}function Tw(e){return e.classList||new O7(e)}function O7(e){this._node=e,this._names=T7(e.getAttribute("class")||"")}O7.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function P7(e,t){for(var n=Tw(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function A7(e,t){for(var n=Tw(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function UD(e){return function(){P7(this,e)}}function GD(e){return function(){A7(this,e)}}function HD(e,t){return function(){(t.apply(this,arguments)?P7:A7)(this,e)}}function VD(e,t){var n=T7(e+"");if(arguments.length<2){for(var r=Tw(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?HD:t?UD:GD)(n,t))}function WD(){this.textContent=""}function KD(e){return function(){this.textContent=e}}function YD(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function XD(e){return arguments.length?this.each(e==null?WD:(typeof e=="function"?YD:KD)(e)):this.node().textContent}function QD(){this.innerHTML=""}function ZD(e){return function(){this.innerHTML=e}}function JD(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function eF(e){return arguments.length?this.each(e==null?QD:(typeof e=="function"?JD:ZD)(e)):this.node().innerHTML}function tF(){this.nextSibling&&this.parentNode.appendChild(this)}function nF(){return this.each(tF)}function rF(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function iF(){return this.each(rF)}function aF(e){var t=typeof e=="function"?e:N7(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function sF(){return null}function oF(e,t){var n=typeof e=="function"?e:N7(e),r=t==null?sF:typeof t=="function"?t:Cw(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function lF(){var e=this.parentNode;e&&e.removeChild(this)}function cF(){return this.each(lF)}function uF(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function dF(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function fF(e){return this.select(e?dF:uF)}function hF(e){return arguments.length?this.property("__data__",e):this.node().__data__}function pF(e){return function(t){e.call(this,t,this.__data__)}}function mF(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function gF(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function vF(e,t,n){return function(){var r=this.__on,i,a=pF(t);if(r){for(var s=0,o=r.length;s<o;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function yF(e,t,n){var r=mF(e+""),i,a=r.length,s;if(arguments.length<2){var o=this.node().__on;if(o){for(var c=0,d=o.length,f;c<d;++c)for(i=0,f=o[c];i<a;++i)if((s=r[i]).type===f.type&&s.name===f.name)return f.value}return}for(o=t?vF:gF,i=0;i<a;++i)this.each(o(r[i],t,n));return this}function R7(e,t,n){var r=C7(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function xF(e,t){return function(){return R7(this,e,t)}}function bF(e,t){return function(){return R7(this,e,t.apply(this,arguments))}}function wF(e,t){return this.each((typeof t=="function"?bF:xF)(e,t))}function*_F(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,s;i<a;++i)(s=r[i])&&(yield s)}var I7=[null];function Zn(e,t){this._groups=e,this._parents=t}function Mu(){return new Zn([[document.documentElement]],I7)}function NF(){return this}Zn.prototype=Mu.prototype={constructor:Zn,select:YL,selectAll:JL,selectChild:rD,selectChildren:oD,filter:lD,data:pD,enter:cD,exit:gD,join:vD,merge:yD,selection:NF,order:xD,sort:bD,call:_D,nodes:ND,node:SD,size:ED,empty:kD,each:jD,attr:ID,style:FD,property:$D,classed:VD,text:XD,html:eF,raise:nF,lower:iF,append:aF,insert:oF,remove:cF,clone:fF,datum:hF,on:yF,dispatch:wF,[Symbol.iterator]:_F};function Rr(e){return typeof e=="string"?new Zn([[document.querySelector(e)]],[document.documentElement]):new Zn([[e]],I7)}function SF(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ri(e,t){if(e=SF(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const EF={passive:!1},yu={capture:!0,passive:!1};function Rg(e){e.stopImmediatePropagation()}function Ho(e){e.preventDefault(),e.stopImmediatePropagation()}function M7(e){var t=e.document.documentElement,n=Rr(e).on("dragstart.drag",Ho,yu);"onselectstart"in t?n.on("selectstart.drag",Ho,yu):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function L7(e,t){var n=e.document.documentElement,r=Rr(e).on("dragstart.drag",null);t&&(r.on("click.drag",Ho,yu),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const pf=e=>()=>e;function Kb(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:a,x:s,y:o,dx:c,dy:d,dispatch:f}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:f}})}Kb.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function kF(e){return!e.ctrlKey&&!e.button}function jF(){return this.parentNode}function CF(e,t){return t??{x:e.x,y:e.y}}function TF(){return navigator.maxTouchPoints||"ontouchstart"in this}function OF(){var e=kF,t=jF,n=CF,r=TF,i={},a=fp("start","drag","end"),s=0,o,c,d,f,p=0;function m(w){w.on("mousedown.drag",g).filter(r).on("touchstart.drag",N).on("touchmove.drag",v,EF).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(w,E){if(!(f||!e.call(this,w,E))){var P=x(this,t.call(this,w,E),w,E,"mouse");P&&(Rr(w.view).on("mousemove.drag",b,yu).on("mouseup.drag",y,yu),M7(w.view),Rg(w),d=!1,o=w.clientX,c=w.clientY,P("start",w))}}function b(w){if(Ho(w),!d){var E=w.clientX-o,P=w.clientY-c;d=E*E+P*P>p}i.mouse("drag",w)}function y(w){Rr(w.view).on("mousemove.drag mouseup.drag",null),L7(w.view,d),Ho(w),i.mouse("end",w)}function N(w,E){if(e.call(this,w,E)){var P=w.changedTouches,A=t.call(this,w,E),T=P.length,L,k;for(L=0;L<T;++L)(k=x(this,A,w,E,P[L].identifier,P[L]))&&(Rg(w),k("start",w,P[L]))}}function v(w){var E=w.changedTouches,P=E.length,A,T;for(A=0;A<P;++A)(T=i[E[A].identifier])&&(Ho(w),T("drag",w,E[A]))}function _(w){var E=w.changedTouches,P=E.length,A,T;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),A=0;A<P;++A)(T=i[E[A].identifier])&&(Rg(w),T("end",w,E[A]))}function x(w,E,P,A,T,L){var k=a.copy(),C=ri(L||P,E),O,F,M;if((M=n.call(w,new Kb("beforestart",{sourceEvent:P,target:m,identifier:T,active:s,x:C[0],y:C[1],dx:0,dy:0,dispatch:k}),A))!=null)return O=M.x-C[0]||0,F=M.y-C[1]||0,function D($,V,K){var H=C,q;switch($){case"start":i[T]=D,q=s++;break;case"end":delete i[T],--s;case"drag":C=ri(K||V,E),q=s;break}k.call($,w,new Kb($,{sourceEvent:V,subject:M,target:m,identifier:T,active:q,x:C[0]+O,y:C[1]+F,dx:C[0]-H[0],dy:C[1]-H[1],dispatch:k}),A)}}return m.filter=function(w){return arguments.length?(e=typeof w=="function"?w:pf(!!w),m):e},m.container=function(w){return arguments.length?(t=typeof w=="function"?w:pf(w),m):t},m.subject=function(w){return arguments.length?(n=typeof w=="function"?w:pf(w),m):n},m.touchable=function(w){return arguments.length?(r=typeof w=="function"?w:pf(!!w),m):r},m.on=function(){var w=a.on.apply(a,arguments);return w===a?m:w},m.clickDistance=function(w){return arguments.length?(p=(w=+w)*w,m):Math.sqrt(p)},m}function Ow(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function D7(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Lu(){}var xu=.7,Eh=1/xu,Vo="\\s*([+-]?\\d+)\\s*",bu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ci="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",PF=/^#([0-9a-f]{3,8})$/,AF=new RegExp(`^rgb\\(${Vo},${Vo},${Vo}\\)$`),RF=new RegExp(`^rgb\\(${ci},${ci},${ci}\\)$`),IF=new RegExp(`^rgba\\(${Vo},${Vo},${Vo},${bu}\\)$`),MF=new RegExp(`^rgba\\(${ci},${ci},${ci},${bu}\\)$`),LF=new RegExp(`^hsl\\(${bu},${ci},${ci}\\)$`),DF=new RegExp(`^hsla\\(${bu},${ci},${ci},${bu}\\)$`),F4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ow(Lu,wu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:z4,formatHex:z4,formatHex8:FF,formatHsl:zF,formatRgb:B4,toString:B4});function z4(){return this.rgb().formatHex()}function FF(){return this.rgb().formatHex8()}function zF(){return F7(this).formatHsl()}function B4(){return this.rgb().formatRgb()}function wu(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=PF.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?q4(t):n===3?new Fn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?mf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?mf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=AF.exec(e))?new Fn(t[1],t[2],t[3],1):(t=RF.exec(e))?new Fn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=IF.exec(e))?mf(t[1],t[2],t[3],t[4]):(t=MF.exec(e))?mf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=LF.exec(e))?G4(t[1],t[2]/100,t[3]/100,1):(t=DF.exec(e))?G4(t[1],t[2]/100,t[3]/100,t[4]):F4.hasOwnProperty(e)?q4(F4[e]):e==="transparent"?new Fn(NaN,NaN,NaN,0):null}function q4(e){return new Fn(e>>16&255,e>>8&255,e&255,1)}function mf(e,t,n,r){return r<=0&&(e=t=n=NaN),new Fn(e,t,n,r)}function BF(e){return e instanceof Lu||(e=wu(e)),e?(e=e.rgb(),new Fn(e.r,e.g,e.b,e.opacity)):new Fn}function Yb(e,t,n,r){return arguments.length===1?BF(e):new Fn(e,t,n,r??1)}function Fn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ow(Fn,Yb,D7(Lu,{brighter(e){return e=e==null?Eh:Math.pow(Eh,e),new Fn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?xu:Math.pow(xu,e),new Fn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Fn(Ps(this.r),Ps(this.g),Ps(this.b),kh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$4,formatHex:$4,formatHex8:qF,formatRgb:U4,toString:U4}));function $4(){return`#${Es(this.r)}${Es(this.g)}${Es(this.b)}`}function qF(){return`#${Es(this.r)}${Es(this.g)}${Es(this.b)}${Es((isNaN(this.opacity)?1:this.opacity)*255)}`}function U4(){const e=kh(this.opacity);return`${e===1?"rgb(":"rgba("}${Ps(this.r)}, ${Ps(this.g)}, ${Ps(this.b)}${e===1?")":`, ${e})`}`}function kh(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ps(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Es(e){return e=Ps(e),(e<16?"0":"")+e.toString(16)}function G4(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ir(e,t,n,r)}function F7(e){if(e instanceof Ir)return new Ir(e.h,e.s,e.l,e.opacity);if(e instanceof Lu||(e=wu(e)),!e)return new Ir;if(e instanceof Ir)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),s=NaN,o=a-i,c=(a+i)/2;return o?(t===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-t)/o+2:s=(t-n)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new Ir(s,o,c,e.opacity)}function $F(e,t,n,r){return arguments.length===1?F7(e):new Ir(e,t,n,r??1)}function Ir(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ow(Ir,$F,D7(Lu,{brighter(e){return e=e==null?Eh:Math.pow(Eh,e),new Ir(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?xu:Math.pow(xu,e),new Ir(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Fn(Ig(e>=240?e-240:e+120,i,r),Ig(e,i,r),Ig(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Ir(H4(this.h),gf(this.s),gf(this.l),kh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=kh(this.opacity);return`${e===1?"hsl(":"hsla("}${H4(this.h)}, ${gf(this.s)*100}%, ${gf(this.l)*100}%${e===1?")":`, ${e})`}`}}));function H4(e){return e=(e||0)%360,e<0?e+360:e}function gf(e){return Math.max(0,Math.min(1,e||0))}function Ig(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const z7=e=>()=>e;function UF(e,t){return function(n){return e+n*t}}function GF(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function HF(e){return(e=+e)==1?B7:function(t,n){return n-t?GF(t,n,e):z7(isNaN(t)?n:t)}}function B7(e,t){var n=t-e;return n?UF(e,n):z7(isNaN(e)?t:e)}const V4=function e(t){var n=HF(t);function r(i,a){var s=n((i=Yb(i)).r,(a=Yb(a)).r),o=n(i.g,a.g),c=n(i.b,a.b),d=B7(i.opacity,a.opacity);return function(f){return i.r=s(f),i.g=o(f),i.b=c(f),i.opacity=d(f),i+""}}return r.gamma=e,r}(1);function va(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Xb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Mg=new RegExp(Xb.source,"g");function VF(e){return function(){return e}}function WF(e){return function(t){return e(t)+""}}function KF(e,t){var n=Xb.lastIndex=Mg.lastIndex=0,r,i,a,s=-1,o=[],c=[];for(e=e+"",t=t+"";(r=Xb.exec(e))&&(i=Mg.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:va(r,i)})),n=Mg.lastIndex;return n<t.length&&(a=t.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?WF(c[0].x):VF(t):(t=c.length,function(d){for(var f=0,p;f<t;++f)o[(p=c[f]).i]=p.x(d);return o.join("")})}var W4=180/Math.PI,Qb={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function q7(e,t,n,r,i,a){var s,o,c;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,c/=o),e*r<t*n&&(e=-e,t=-t,c=-c,s=-s),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*W4,skewX:Math.atan(c)*W4,scaleX:s,scaleY:o}}var vf;function YF(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Qb:q7(t.a,t.b,t.c,t.d,t.e,t.f)}function XF(e){return e==null||(vf||(vf=document.createElementNS("http://www.w3.org/2000/svg","g")),vf.setAttribute("transform",e),!(e=vf.transform.baseVal.consolidate()))?Qb:(e=e.matrix,q7(e.a,e.b,e.c,e.d,e.e,e.f))}function $7(e,t,n,r){function i(d){return d.length?d.pop()+" ":""}function a(d,f,p,m,g,b){if(d!==p||f!==m){var y=g.push("translate(",null,t,null,n);b.push({i:y-4,x:va(d,p)},{i:y-2,x:va(f,m)})}else(p||m)&&g.push("translate("+p+t+m+n)}function s(d,f,p,m){d!==f?(d-f>180?f+=360:f-d>180&&(d+=360),m.push({i:p.push(i(p)+"rotate(",null,r)-2,x:va(d,f)})):f&&p.push(i(p)+"rotate("+f+r)}function o(d,f,p,m){d!==f?m.push({i:p.push(i(p)+"skewX(",null,r)-2,x:va(d,f)}):f&&p.push(i(p)+"skewX("+f+r)}function c(d,f,p,m,g,b){if(d!==p||f!==m){var y=g.push(i(g)+"scale(",null,",",null,")");b.push({i:y-4,x:va(d,p)},{i:y-2,x:va(f,m)})}else(p!==1||m!==1)&&g.push(i(g)+"scale("+p+","+m+")")}return function(d,f){var p=[],m=[];return d=e(d),f=e(f),a(d.translateX,d.translateY,f.translateX,f.translateY,p,m),s(d.rotate,f.rotate,p,m),o(d.skewX,f.skewX,p,m),c(d.scaleX,d.scaleY,f.scaleX,f.scaleY,p,m),d=f=null,function(g){for(var b=-1,y=m.length,N;++b<y;)p[(N=m[b]).i]=N.x(g);return p.join("")}}}var QF=$7(YF,"px, ","px)","deg)"),ZF=$7(XF,", ",")",")"),JF=1e-12;function K4(e){return((e=Math.exp(e))+1/e)/2}function ez(e){return((e=Math.exp(e))-1/e)/2}function tz(e){return((e=Math.exp(2*e))-1)/(e+1)}const nz=function e(t,n,r){function i(a,s){var o=a[0],c=a[1],d=a[2],f=s[0],p=s[1],m=s[2],g=f-o,b=p-c,y=g*g+b*b,N,v;if(y<JF)v=Math.log(m/d)/t,N=function(A){return[o+A*g,c+A*b,d*Math.exp(t*A*v)]};else{var _=Math.sqrt(y),x=(m*m-d*d+r*y)/(2*d*n*_),w=(m*m-d*d-r*y)/(2*m*n*_),E=Math.log(Math.sqrt(x*x+1)-x),P=Math.log(Math.sqrt(w*w+1)-w);v=(P-E)/t,N=function(A){var T=A*v,L=K4(E),k=d/(n*_)*(L*tz(t*T+E)-ez(E));return[o+k*g,c+k*b,d*L/K4(t*T+E)]}}return N.duration=v*1e3*t/Math.SQRT2,N}return i.rho=function(a){var s=Math.max(.001,+a),o=s*s,c=o*o;return e(s,o,c)},i}(Math.SQRT2,2,4);var al=0,Ic=0,gc=0,U7=1e3,jh,Mc,Ch=0,Ds=0,pp=0,_u=typeof performance=="object"&&performance.now?performance:Date,G7=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Pw(){return Ds||(G7(rz),Ds=_u.now()+pp)}function rz(){Ds=0}function Th(){this._call=this._time=this._next=null}Th.prototype=H7.prototype={constructor:Th,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Pw():+n)+(t==null?0:+t),!this._next&&Mc!==this&&(Mc?Mc._next=this:jh=this,Mc=this),this._call=e,this._time=n,Zb()},stop:function(){this._call&&(this._call=null,this._time=1/0,Zb())}};function H7(e,t,n){var r=new Th;return r.restart(e,t,n),r}function iz(){Pw(),++al;for(var e=jh,t;e;)(t=Ds-e._time)>=0&&e._call.call(void 0,t),e=e._next;--al}function Y4(){Ds=(Ch=_u.now())+pp,al=Ic=0;try{iz()}finally{al=0,sz(),Ds=0}}function az(){var e=_u.now(),t=e-Ch;t>U7&&(pp-=t,Ch=e)}function sz(){for(var e,t=jh,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:jh=n);Mc=e,Zb(r)}function Zb(e){if(!al){Ic&&(Ic=clearTimeout(Ic));var t=e-Ds;t>24?(e<1/0&&(Ic=setTimeout(Y4,e-_u.now()-pp)),gc&&(gc=clearInterval(gc))):(gc||(Ch=_u.now(),gc=setInterval(az,U7)),al=1,G7(Y4))}}function X4(e,t,n){var r=new Th;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var oz=fp("start","end","cancel","interrupt"),lz=[],V7=0,Q4=1,Jb=2,Hf=3,Z4=4,e2=5,Vf=6;function mp(e,t,n,r,i,a){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;cz(e,n,{name:t,index:r,group:i,on:oz,tween:lz,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:V7})}function Aw(e,t){var n=Br(e,t);if(n.state>V7)throw new Error("too late; already scheduled");return n}function ui(e,t){var n=Br(e,t);if(n.state>Hf)throw new Error("too late; already running");return n}function Br(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function cz(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=H7(a,0,n.time);function a(d){n.state=Q4,n.timer.restart(s,n.delay,n.time),n.delay<=d&&s(d-n.delay)}function s(d){var f,p,m,g;if(n.state!==Q4)return c();for(f in r)if(g=r[f],g.name===n.name){if(g.state===Hf)return X4(s);g.state===Z4?(g.state=Vf,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete r[f]):+f<t&&(g.state=Vf,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete r[f])}if(X4(function(){n.state===Hf&&(n.state=Z4,n.timer.restart(o,n.delay,n.time),o(d))}),n.state=Jb,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Jb){for(n.state=Hf,i=new Array(m=n.tween.length),f=0,p=-1;f<m;++f)(g=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(i[++p]=g);i.length=p+1}}function o(d){for(var f=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(c),n.state=e2,1),p=-1,m=i.length;++p<m;)i[p].call(e,f);n.state===e2&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=Vf,n.timer.stop(),delete r[t];for(var d in r)return;delete e.__transition}}function Wf(e,t){var n=e.__transition,r,i,a=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){a=!1;continue}i=r.state>Jb&&r.state<e2,r.state=Vf,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}a&&delete e.__transition}}function uz(e){return this.each(function(){Wf(this,e)})}function dz(e,t){var n,r;return function(){var i=ui(this,e),a=i.tween;if(a!==n){r=n=a;for(var s=0,o=r.length;s<o;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function fz(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=ui(this,e),s=a.tween;if(s!==r){i=(r=s).slice();for(var o={name:t,value:n},c=0,d=i.length;c<d;++c)if(i[c].name===t){i[c]=o;break}c===d&&i.push(o)}a.tween=i}}function hz(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Br(this.node(),n).tween,i=0,a=r.length,s;i<a;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?dz:fz)(n,e,t))}function Rw(e,t,n){var r=e._id;return e.each(function(){var i=ui(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Br(i,r).value[t]}}function W7(e,t){var n;return(typeof t=="number"?va:t instanceof wu?V4:(n=wu(t))?(t=n,V4):KF)(e,t)}function pz(e){return function(){this.removeAttribute(e)}}function mz(e){return function(){this.removeAttributeNS(e.space,e.local)}}function gz(e,t,n){var r,i=n+"",a;return function(){var s=this.getAttribute(e);return s===i?null:s===r?a:a=t(r=s,n)}}function vz(e,t,n){var r,i=n+"",a;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?a:a=t(r=s,n)}}function yz(e,t,n){var r,i,a;return function(){var s,o=n(this),c;return o==null?void this.removeAttribute(e):(s=this.getAttribute(e),c=o+"",s===c?null:s===r&&c===i?a:(i=c,a=t(r=s,o)))}}function xz(e,t,n){var r,i,a;return function(){var s,o=n(this),c;return o==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),c=o+"",s===c?null:s===r&&c===i?a:(i=c,a=t(r=s,o)))}}function bz(e,t){var n=hp(e),r=n==="transform"?ZF:W7;return this.attrTween(e,typeof t=="function"?(n.local?xz:yz)(n,r,Rw(this,"attr."+e,t)):t==null?(n.local?mz:pz)(n):(n.local?vz:gz)(n,r,t))}function wz(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function _z(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Nz(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&_z(e,a)),n}return i._value=t,i}function Sz(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&wz(e,a)),n}return i._value=t,i}function Ez(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=hp(e);return this.tween(n,(r.local?Nz:Sz)(r,t))}function kz(e,t){return function(){Aw(this,e).delay=+t.apply(this,arguments)}}function jz(e,t){return t=+t,function(){Aw(this,e).delay=t}}function Cz(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?kz:jz)(t,e)):Br(this.node(),t).delay}function Tz(e,t){return function(){ui(this,e).duration=+t.apply(this,arguments)}}function Oz(e,t){return t=+t,function(){ui(this,e).duration=t}}function Pz(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Tz:Oz)(t,e)):Br(this.node(),t).duration}function Az(e,t){if(typeof t!="function")throw new Error;return function(){ui(this,e).ease=t}}function Rz(e){var t=this._id;return arguments.length?this.each(Az(t,e)):Br(this.node(),t).ease}function Iz(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ui(this,e).ease=n}}function Mz(e){if(typeof e!="function")throw new Error;return this.each(Iz(this._id,e))}function Lz(e){typeof e!="function"&&(e=E7(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],s=a.length,o=r[i]=[],c,d=0;d<s;++d)(c=a[d])&&e.call(c,c.__data__,d,a)&&o.push(c);return new qi(r,this._parents,this._name,this._id)}function Dz(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),s=new Array(r),o=0;o<a;++o)for(var c=t[o],d=n[o],f=c.length,p=s[o]=new Array(f),m,g=0;g<f;++g)(m=c[g]||d[g])&&(p[g]=m);for(;o<r;++o)s[o]=t[o];return new qi(s,this._parents,this._name,this._id)}function Fz(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function zz(e,t,n){var r,i,a=Fz(t)?Aw:ui;return function(){var s=a(this,e),o=s.on;o!==r&&(i=(r=o).copy()).on(t,n),s.on=i}}function Bz(e,t){var n=this._id;return arguments.length<2?Br(this.node(),n).on.on(e):this.each(zz(n,e,t))}function qz(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function $z(){return this.on("end.remove",qz(this._id))}function Uz(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Cw(e));for(var r=this._groups,i=r.length,a=new Array(i),s=0;s<i;++s)for(var o=r[s],c=o.length,d=a[s]=new Array(c),f,p,m=0;m<c;++m)(f=o[m])&&(p=e.call(f,f.__data__,m,o))&&("__data__"in f&&(p.__data__=f.__data__),d[m]=p,mp(d[m],t,n,m,d,Br(f,n)));return new qi(a,this._parents,t,n)}function Gz(e){var t=this._name,n=this._id;typeof e!="function"&&(e=S7(e));for(var r=this._groups,i=r.length,a=[],s=[],o=0;o<i;++o)for(var c=r[o],d=c.length,f,p=0;p<d;++p)if(f=c[p]){for(var m=e.call(f,f.__data__,p,c),g,b=Br(f,n),y=0,N=m.length;y<N;++y)(g=m[y])&&mp(g,t,n,y,m,b);a.push(m),s.push(f)}return new qi(a,s,t,n)}var Hz=Mu.prototype.constructor;function Vz(){return new Hz(this._groups,this._parents)}function Wz(e,t){var n,r,i;return function(){var a=il(this,e),s=(this.style.removeProperty(e),il(this,e));return a===s?null:a===n&&s===r?i:i=t(n=a,r=s)}}function K7(e){return function(){this.style.removeProperty(e)}}function Kz(e,t,n){var r,i=n+"",a;return function(){var s=il(this,e);return s===i?null:s===r?a:a=t(r=s,n)}}function Yz(e,t,n){var r,i,a;return function(){var s=il(this,e),o=n(this),c=o+"";return o==null&&(c=o=(this.style.removeProperty(e),il(this,e))),s===c?null:s===r&&c===i?a:(i=c,a=t(r=s,o))}}function Xz(e,t){var n,r,i,a="style."+t,s="end."+a,o;return function(){var c=ui(this,e),d=c.on,f=c.value[a]==null?o||(o=K7(t)):void 0;(d!==n||i!==f)&&(r=(n=d).copy()).on(s,i=f),c.on=r}}function Qz(e,t,n){var r=(e+="")=="transform"?QF:W7;return t==null?this.styleTween(e,Wz(e,r)).on("end.style."+e,K7(e)):typeof t=="function"?this.styleTween(e,Yz(e,r,Rw(this,"style."+e,t))).each(Xz(this._id,e)):this.styleTween(e,Kz(e,r,t),n).on("end.style."+e,null)}function Zz(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Jz(e,t,n){var r,i;function a(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&Zz(e,s,n)),r}return a._value=t,a}function eB(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Jz(e,t,n??""))}function tB(e){return function(){this.textContent=e}}function nB(e){return function(){var t=e(this);this.textContent=t??""}}function rB(e){return this.tween("text",typeof e=="function"?nB(Rw(this,"text",e)):tB(e==null?"":e+""))}function iB(e){return function(t){this.textContent=e.call(this,t)}}function aB(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&iB(i)),t}return r._value=e,r}function sB(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,aB(e))}function oB(){for(var e=this._name,t=this._id,n=Y7(),r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],o=s.length,c,d=0;d<o;++d)if(c=s[d]){var f=Br(c,t);mp(c,e,n,d,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new qi(r,this._parents,e,n)}function lB(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,s){var o={value:s},c={value:function(){--i===0&&a()}};n.each(function(){var d=ui(this,r),f=d.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(c)),d.on=t}),i===0&&a()})}var cB=0;function qi(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Y7(){return++cB}var Si=Mu.prototype;qi.prototype={constructor:qi,select:Uz,selectAll:Gz,selectChild:Si.selectChild,selectChildren:Si.selectChildren,filter:Lz,merge:Dz,selection:Vz,transition:oB,call:Si.call,nodes:Si.nodes,node:Si.node,size:Si.size,empty:Si.empty,each:Si.each,on:Bz,attr:bz,attrTween:Ez,style:Qz,styleTween:eB,text:rB,textTween:sB,remove:$z,tween:hz,delay:Cz,duration:Pz,ease:Rz,easeVarying:Mz,end:lB,[Symbol.iterator]:Si[Symbol.iterator]};function uB(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var dB={time:null,delay:0,duration:250,ease:uB};function fB(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function hB(e){var t,n;e instanceof qi?(t=e._id,e=e._name):(t=Y7(),(n=dB).time=Pw(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],o=s.length,c,d=0;d<o;++d)(c=s[d])&&mp(c,e,t,d,s,n||fB(c,t));return new qi(r,this._parents,e,t)}Mu.prototype.interrupt=uz;Mu.prototype.transition=hB;const yf=e=>()=>e;function pB(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Ai(e,t,n){this.k=e,this.x=t,this.y=n}Ai.prototype={constructor:Ai,scale:function(e){return e===1?this:new Ai(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ai(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ma=new Ai(1,0,0);Ai.prototype;function Lg(e){e.stopImmediatePropagation()}function vc(e){e.preventDefault(),e.stopImmediatePropagation()}function mB(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function gB(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function J4(){return this.__zoom||Ma}function vB(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function yB(){return navigator.maxTouchPoints||"ontouchstart"in this}function xB(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s))}function bB(){var e=mB,t=gB,n=xB,r=vB,i=yB,a=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],o=250,c=nz,d=fp("start","zoom","end"),f,p,m,g=500,b=150,y=0,N=10;function v(M){M.property("__zoom",J4).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",L).on("dblclick.zoom",k).filter(i).on("touchstart.zoom",C).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",F).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(M,D,$,V){var K=M.selection?M.selection():M;K.property("__zoom",J4),M!==K?E(M,D,$,V):K.interrupt().each(function(){P(this,arguments).event(V).start().zoom(null,typeof D=="function"?D.apply(this,arguments):D).end()})},v.scaleBy=function(M,D,$,V){v.scaleTo(M,function(){var K=this.__zoom.k,H=typeof D=="function"?D.apply(this,arguments):D;return K*H},$,V)},v.scaleTo=function(M,D,$,V){v.transform(M,function(){var K=t.apply(this,arguments),H=this.__zoom,q=$==null?w(K):typeof $=="function"?$.apply(this,arguments):$,I=H.invert(q),z=typeof D=="function"?D.apply(this,arguments):D;return n(x(_(H,z),q,I),K,s)},$,V)},v.translateBy=function(M,D,$,V){v.transform(M,function(){return n(this.__zoom.translate(typeof D=="function"?D.apply(this,arguments):D,typeof $=="function"?$.apply(this,arguments):$),t.apply(this,arguments),s)},null,V)},v.translateTo=function(M,D,$,V,K){v.transform(M,function(){var H=t.apply(this,arguments),q=this.__zoom,I=V==null?w(H):typeof V=="function"?V.apply(this,arguments):V;return n(Ma.translate(I[0],I[1]).scale(q.k).translate(typeof D=="function"?-D.apply(this,arguments):-D,typeof $=="function"?-$.apply(this,arguments):-$),H,s)},V,K)};function _(M,D){return D=Math.max(a[0],Math.min(a[1],D)),D===M.k?M:new Ai(D,M.x,M.y)}function x(M,D,$){var V=D[0]-$[0]*M.k,K=D[1]-$[1]*M.k;return V===M.x&&K===M.y?M:new Ai(M.k,V,K)}function w(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function E(M,D,$,V){M.on("start.zoom",function(){P(this,arguments).event(V).start()}).on("interrupt.zoom end.zoom",function(){P(this,arguments).event(V).end()}).tween("zoom",function(){var K=this,H=arguments,q=P(K,H).event(V),I=t.apply(K,H),z=$==null?w(I):typeof $=="function"?$.apply(K,H):$,W=Math.max(I[1][0]-I[0][0],I[1][1]-I[0][1]),Q=K.__zoom,ee=typeof D=="function"?D.apply(K,H):D,Y=c(Q.invert(z).concat(W/Q.k),ee.invert(z).concat(W/ee.k));return function(U){if(U===1)U=ee;else{var J=Y(U),te=W/J[2];U=new Ai(te,z[0]-J[0]*te,z[1]-J[1]*te)}q.zoom(null,U)}})}function P(M,D,$){return!$&&M.__zooming||new A(M,D)}function A(M,D){this.that=M,this.args=D,this.active=0,this.sourceEvent=null,this.extent=t.apply(M,D),this.taps=0}A.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,D){return this.mouse&&M!=="mouse"&&(this.mouse[1]=D.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=D.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=D.invert(this.touch1[0])),this.that.__zoom=D,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var D=Rr(this.that).datum();d.call(M,this.that,new pB(M,{sourceEvent:this.sourceEvent,target:v,type:M,transform:this.that.__zoom,dispatch:d}),D)}};function T(M,...D){if(!e.apply(this,arguments))return;var $=P(this,D).event(M),V=this.__zoom,K=Math.max(a[0],Math.min(a[1],V.k*Math.pow(2,r.apply(this,arguments)))),H=ri(M);if($.wheel)($.mouse[0][0]!==H[0]||$.mouse[0][1]!==H[1])&&($.mouse[1]=V.invert($.mouse[0]=H)),clearTimeout($.wheel);else{if(V.k===K)return;$.mouse=[H,V.invert(H)],Wf(this),$.start()}vc(M),$.wheel=setTimeout(q,b),$.zoom("mouse",n(x(_(V,K),$.mouse[0],$.mouse[1]),$.extent,s));function q(){$.wheel=null,$.end()}}function L(M,...D){if(m||!e.apply(this,arguments))return;var $=M.currentTarget,V=P(this,D,!0).event(M),K=Rr(M.view).on("mousemove.zoom",z,!0).on("mouseup.zoom",W,!0),H=ri(M,$),q=M.clientX,I=M.clientY;M7(M.view),Lg(M),V.mouse=[H,this.__zoom.invert(H)],Wf(this),V.start();function z(Q){if(vc(Q),!V.moved){var ee=Q.clientX-q,Y=Q.clientY-I;V.moved=ee*ee+Y*Y>y}V.event(Q).zoom("mouse",n(x(V.that.__zoom,V.mouse[0]=ri(Q,$),V.mouse[1]),V.extent,s))}function W(Q){K.on("mousemove.zoom mouseup.zoom",null),L7(Q.view,V.moved),vc(Q),V.event(Q).end()}}function k(M,...D){if(e.apply(this,arguments)){var $=this.__zoom,V=ri(M.changedTouches?M.changedTouches[0]:M,this),K=$.invert(V),H=$.k*(M.shiftKey?.5:2),q=n(x(_($,H),V,K),t.apply(this,D),s);vc(M),o>0?Rr(this).transition().duration(o).call(E,q,V,M):Rr(this).call(v.transform,q,V,M)}}function C(M,...D){if(e.apply(this,arguments)){var $=M.touches,V=$.length,K=P(this,D,M.changedTouches.length===V).event(M),H,q,I,z;for(Lg(M),q=0;q<V;++q)I=$[q],z=ri(I,this),z=[z,this.__zoom.invert(z),I.identifier],K.touch0?!K.touch1&&K.touch0[2]!==z[2]&&(K.touch1=z,K.taps=0):(K.touch0=z,H=!0,K.taps=1+!!f);f&&(f=clearTimeout(f)),H&&(K.taps<2&&(p=z[0],f=setTimeout(function(){f=null},g)),Wf(this),K.start())}}function O(M,...D){if(this.__zooming){var $=P(this,D).event(M),V=M.changedTouches,K=V.length,H,q,I,z;for(vc(M),H=0;H<K;++H)q=V[H],I=ri(q,this),$.touch0&&$.touch0[2]===q.identifier?$.touch0[0]=I:$.touch1&&$.touch1[2]===q.identifier&&($.touch1[0]=I);if(q=$.that.__zoom,$.touch1){var W=$.touch0[0],Q=$.touch0[1],ee=$.touch1[0],Y=$.touch1[1],U=(U=ee[0]-W[0])*U+(U=ee[1]-W[1])*U,J=(J=Y[0]-Q[0])*J+(J=Y[1]-Q[1])*J;q=_(q,Math.sqrt(U/J)),I=[(W[0]+ee[0])/2,(W[1]+ee[1])/2],z=[(Q[0]+Y[0])/2,(Q[1]+Y[1])/2]}else if($.touch0)I=$.touch0[0],z=$.touch0[1];else return;$.zoom("touch",n(x(q,I,z),$.extent,s))}}function F(M,...D){if(this.__zooming){var $=P(this,D).event(M),V=M.changedTouches,K=V.length,H,q;for(Lg(M),m&&clearTimeout(m),m=setTimeout(function(){m=null},g),H=0;H<K;++H)q=V[H],$.touch0&&$.touch0[2]===q.identifier?delete $.touch0:$.touch1&&$.touch1[2]===q.identifier&&delete $.touch1;if($.touch1&&!$.touch0&&($.touch0=$.touch1,delete $.touch1),$.touch0)$.touch0[1]=this.__zoom.invert($.touch0[0]);else if($.end(),$.taps===2&&(q=ri(q,this),Math.hypot(p[0]-q[0],p[1]-q[1])<N)){var I=Rr(this).on("dblclick.zoom");I&&I.apply(this,arguments)}}}return v.wheelDelta=function(M){return arguments.length?(r=typeof M=="function"?M:yf(+M),v):r},v.filter=function(M){return arguments.length?(e=typeof M=="function"?M:yf(!!M),v):e},v.touchable=function(M){return arguments.length?(i=typeof M=="function"?M:yf(!!M),v):i},v.extent=function(M){return arguments.length?(t=typeof M=="function"?M:yf([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),v):t},v.scaleExtent=function(M){return arguments.length?(a[0]=+M[0],a[1]=+M[1],v):[a[0],a[1]]},v.translateExtent=function(M){return arguments.length?(s[0][0]=+M[0][0],s[1][0]=+M[1][0],s[0][1]=+M[0][1],s[1][1]=+M[1][1],v):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},v.constrain=function(M){return arguments.length?(n=M,v):n},v.duration=function(M){return arguments.length?(o=+M,v):o},v.interpolate=function(M){return arguments.length?(c=M,v):c},v.on=function(){var M=d.on.apply(d,arguments);return M===d?v:M},v.clickDistance=function(M){return arguments.length?(y=(M=+M)*M,v):Math.sqrt(y)},v.tapDistance=function(M){return arguments.length?(N=+M,v):N},v}const gp=G.createContext(null),wB=gp.Provider,$i={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},X7=$i.error001();function Tt(e,t){const n=G.useContext(gp);if(n===null)throw new Error(X7);return _7(n,e,t)}const rn=()=>{const e=G.useContext(gp);if(e===null)throw new Error(X7);return G.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},_B=e=>e.userSelectionActive?"none":"all";function Q7({position:e,children:t,className:n,style:r,...i}){const a=Tt(_B),s=`${e}`.split("-");return oe.createElement("div",{className:Tn(["react-flow__panel",n,...s]),style:{...r,pointerEvents:a},...i},t)}function NB({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:oe.createElement(Q7,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},oe.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const SB=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:a={},labelBgPadding:s=[2,4],labelBgBorderRadius:o=2,children:c,className:d,...f})=>{const p=G.useRef(null),[m,g]=G.useState({x:0,y:0,width:0,height:0}),b=Tn(["react-flow__edge-textwrapper",d]);return G.useEffect(()=>{if(p.current){const y=p.current.getBBox();g({x:y.x,y:y.y,width:y.width,height:y.height})}},[n]),typeof n>"u"||!n?null:oe.createElement("g",{transform:`translate(${e-m.width/2} ${t-m.height/2})`,className:b,visibility:m.width?"visible":"hidden",...f},i&&oe.createElement("rect",{width:m.width+2*s[0],x:-s[0],y:-s[1],height:m.height+2*s[1],className:"react-flow__edge-textbg",style:a,rx:o,ry:o}),oe.createElement("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:p,style:r},n),c)};var EB=G.memo(SB);const Iw=e=>({width:e.offsetWidth,height:e.offsetHeight}),sl=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Mw=(e={x:0,y:0},t)=>({x:sl(e.x,t[0][0],t[1][0]),y:sl(e.y,t[0][1],t[1][1])}),eN=(e,t,n)=>e<t?sl(Math.abs(e-t),1,50)/50:e>n?-sl(Math.abs(e-n),1,50)/50:0,Z7=(e,t)=>{const n=eN(e.x,35,t.width-35)*20,r=eN(e.y,35,t.height-35)*20;return[n,r]},J7=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},kB=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Lw=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),jB=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),tN=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),t2=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},CB=e=>mr(e.width)&&mr(e.height)&&mr(e.x)&&mr(e.y),mr=e=>!isNaN(e)&&isFinite(e),Rt=Symbol.for("internals"),eC=["Enter"," ","Escape"],TB=(e,t)=>{},OB=e=>"nativeEvent"in e;function n2(e){var i,a;const t=OB(e)?e.nativeEvent:e,n=((a=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:a[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const tC=e=>"clientX"in e,La=(e,t)=>{var a,s;const n=tC(e),r=n?e.clientX:(a=e.touches)==null?void 0:a[0].clientX,i=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},Oh=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},Du=({id:e,path:t,labelX:n,labelY:r,label:i,labelStyle:a,labelShowBg:s,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:d,style:f,markerEnd:p,markerStart:m,interactionWidth:g=20})=>oe.createElement(oe.Fragment,null,oe.createElement("path",{id:e,style:f,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:p,markerStart:m}),g&&oe.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}),i&&mr(n)&&mr(r)?oe.createElement(EB,{x:n,y:r,label:i,labelStyle:a,labelShowBg:s,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:d}):null);Du.displayName="BaseEdge";function yc(e,t,n){return n===void 0?n:r=>{const i=t().edges.find(a=>a.id===e);i&&n(r,{...i})}}function nC({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,a=n<e?n+i:n-i,s=Math.abs(r-t)/2,o=r<t?r+s:r-s;return[a,o,i,s]}function rC({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:a,targetControlX:s,targetControlY:o}){const c=e*.125+i*.375+s*.375+n*.125,d=t*.125+a*.375+o*.375+r*.125,f=Math.abs(c-e),p=Math.abs(d-t);return[c,d,f,p]}var Fs;(function(e){e.Strict="strict",e.Loose="loose"})(Fs||(Fs={}));var ks;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(ks||(ks={}));var Nu;(function(e){e.Partial="partial",e.Full="full"})(Nu||(Nu={}));var wa;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(wa||(wa={}));var ol;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(ol||(ol={}));var Te;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Te||(Te={}));function nN({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===Te.Left||e===Te.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function iC({sourceX:e,sourceY:t,sourcePosition:n=Te.Bottom,targetX:r,targetY:i,targetPosition:a=Te.Top}){const[s,o]=nN({pos:n,x1:e,y1:t,x2:r,y2:i}),[c,d]=nN({pos:a,x1:r,y1:i,x2:e,y2:t}),[f,p,m,g]=rC({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:s,sourceControlY:o,targetControlX:c,targetControlY:d});return[`M${e},${t} C${s},${o} ${c},${d} ${r},${i}`,f,p,m,g]}const Dw=G.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=Te.Bottom,targetPosition:a=Te.Top,label:s,labelStyle:o,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:m,markerEnd:g,markerStart:b,interactionWidth:y})=>{const[N,v,_]=iC({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:a});return oe.createElement(Du,{path:N,labelX:v,labelY:_,label:s,labelStyle:o,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:m,markerEnd:g,markerStart:b,interactionWidth:y})});Dw.displayName="SimpleBezierEdge";const rN={[Te.Left]:{x:-1,y:0},[Te.Right]:{x:1,y:0},[Te.Top]:{x:0,y:-1},[Te.Bottom]:{x:0,y:1}},PB=({source:e,sourcePosition:t=Te.Bottom,target:n})=>t===Te.Left||t===Te.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},iN=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function AB({source:e,sourcePosition:t=Te.Bottom,target:n,targetPosition:r=Te.Top,center:i,offset:a}){const s=rN[t],o=rN[r],c={x:e.x+s.x*a,y:e.y+s.y*a},d={x:n.x+o.x*a,y:n.y+o.y*a},f=PB({source:c,sourcePosition:t,target:d}),p=f.x!==0?"x":"y",m=f[p];let g=[],b,y;const N={x:0,y:0},v={x:0,y:0},[_,x,w,E]=nC({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[p]*o[p]===-1){b=i.x??_,y=i.y??x;const A=[{x:b,y:c.y},{x:b,y:d.y}],T=[{x:c.x,y},{x:d.x,y}];s[p]===m?g=p==="x"?A:T:g=p==="x"?T:A}else{const A=[{x:c.x,y:d.y}],T=[{x:d.x,y:c.y}];if(p==="x"?g=s.x===m?T:A:g=s.y===m?A:T,t===r){const F=Math.abs(e[p]-n[p]);if(F<=a){const M=Math.min(a-1,a-F);s[p]===m?N[p]=(c[p]>e[p]?-1:1)*M:v[p]=(d[p]>n[p]?-1:1)*M}}if(t!==r){const F=p==="x"?"y":"x",M=s[p]===o[F],D=c[F]>d[F],$=c[F]<d[F];(s[p]===1&&(!M&&D||M&&$)||s[p]!==1&&(!M&&$||M&&D))&&(g=p==="x"?A:T)}const L={x:c.x+N.x,y:c.y+N.y},k={x:d.x+v.x,y:d.y+v.y},C=Math.max(Math.abs(L.x-g[0].x),Math.abs(k.x-g[0].x)),O=Math.max(Math.abs(L.y-g[0].y),Math.abs(k.y-g[0].y));C>=O?(b=(L.x+k.x)/2,y=g[0].y):(b=g[0].x,y=(L.y+k.y)/2)}return[[e,{x:c.x+N.x,y:c.y+N.y},...g,{x:d.x+v.x,y:d.y+v.y},n],b,y,w,E]}function RB(e,t,n,r){const i=Math.min(iN(e,t)/2,iN(t,n)/2,r),{x:a,y:s}=t;if(e.x===a&&a===n.x||e.y===s&&s===n.y)return`L${a} ${s}`;if(e.y===s){const d=e.x<n.x?-1:1,f=e.y<n.y?1:-1;return`L ${a+i*d},${s}Q ${a},${s} ${a},${s+i*f}`}const o=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${a},${s+i*c}Q ${a},${s} ${a+i*o},${s}`}function r2({sourceX:e,sourceY:t,sourcePosition:n=Te.Bottom,targetX:r,targetY:i,targetPosition:a=Te.Top,borderRadius:s=5,centerX:o,centerY:c,offset:d=20}){const[f,p,m,g,b]=AB({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:a,center:{x:o,y:c},offset:d});return[f.reduce((N,v,_)=>{let x="";return _>0&&_<f.length-1?x=RB(f[_-1],v,f[_+1],s):x=`${_===0?"M":"L"}${v.x} ${v.y}`,N+=x,N},""),p,m,g,b]}const vp=G.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:a,labelShowBg:s,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:d,style:f,sourcePosition:p=Te.Bottom,targetPosition:m=Te.Top,markerEnd:g,markerStart:b,pathOptions:y,interactionWidth:N})=>{const[v,_,x]=r2({sourceX:e,sourceY:t,sourcePosition:p,targetX:n,targetY:r,targetPosition:m,borderRadius:y==null?void 0:y.borderRadius,offset:y==null?void 0:y.offset});return oe.createElement(Du,{path:v,labelX:_,labelY:x,label:i,labelStyle:a,labelShowBg:s,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:d,style:f,markerEnd:g,markerStart:b,interactionWidth:N})});vp.displayName="SmoothStepEdge";const Fw=G.memo(e=>{var t;return oe.createElement(vp,{...e,pathOptions:G.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});Fw.displayName="StepEdge";function IB({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,a,s,o]=nC({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,a,s,o]}const zw=G.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:a,labelShowBg:s,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:d,style:f,markerEnd:p,markerStart:m,interactionWidth:g})=>{const[b,y,N]=IB({sourceX:e,sourceY:t,targetX:n,targetY:r});return oe.createElement(Du,{path:b,labelX:y,labelY:N,label:i,labelStyle:a,labelShowBg:s,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:d,style:f,markerEnd:p,markerStart:m,interactionWidth:g})});zw.displayName="StraightEdge";function xf(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function aN({pos:e,x1:t,y1:n,x2:r,y2:i,c:a}){switch(e){case Te.Left:return[t-xf(t-r,a),n];case Te.Right:return[t+xf(r-t,a),n];case Te.Top:return[t,n-xf(n-i,a)];case Te.Bottom:return[t,n+xf(i-n,a)]}}function aC({sourceX:e,sourceY:t,sourcePosition:n=Te.Bottom,targetX:r,targetY:i,targetPosition:a=Te.Top,curvature:s=.25}){const[o,c]=aN({pos:n,x1:e,y1:t,x2:r,y2:i,c:s}),[d,f]=aN({pos:a,x1:r,y1:i,x2:e,y2:t,c:s}),[p,m,g,b]=rC({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:o,sourceControlY:c,targetControlX:d,targetControlY:f});return[`M${e},${t} C${o},${c} ${d},${f} ${r},${i}`,p,m,g,b]}const Ph=G.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=Te.Bottom,targetPosition:a=Te.Top,label:s,labelStyle:o,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:m,markerEnd:g,markerStart:b,pathOptions:y,interactionWidth:N})=>{const[v,_,x]=aC({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:a,curvature:y==null?void 0:y.curvature});return oe.createElement(Du,{path:v,labelX:_,labelY:x,label:s,labelStyle:o,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:m,markerEnd:g,markerStart:b,interactionWidth:N})});Ph.displayName="BezierEdge";const Bw=G.createContext(null),MB=Bw.Provider;Bw.Consumer;const LB=()=>G.useContext(Bw),DB=e=>"id"in e&&"source"in e&&"target"in e,FB=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,i2=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,zB=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),sC=(e,t)=>{if(!e.source||!e.target)return t;let n;return DB(e)?n={...e}:n={...e,id:FB(e)},zB(n,t)?t:t.concat(n)},a2=({x:e,y:t},[n,r,i],a,[s,o])=>{const c={x:(e-n)/i,y:(t-r)/i};return a?{x:s*Math.round(c.x/s),y:o*Math.round(c.y/o)}:c},oC=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r}),Wo=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],i={x:e.position.x-n,y:e.position.y-r};return{...i,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:i}},qw=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const{x:a,y:s}=Wo(i,t).positionAbsolute;return kB(r,Lw({x:a,y:s,width:i.width||0,height:i.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return jB(n)},lC=(e,t,[n,r,i]=[0,0,1],a=!1,s=!1,o=[0,0])=>{const c={x:(t.x-n)/i,y:(t.y-r)/i,width:t.width/i,height:t.height/i},d=[];return e.forEach(f=>{const{width:p,height:m,selectable:g=!0,hidden:b=!1}=f;if(s&&!g||b)return!1;const{positionAbsolute:y}=Wo(f,o),N={x:y.x,y:y.y,width:p||0,height:m||0},v=t2(c,N),_=typeof p>"u"||typeof m>"u"||p===null||m===null,x=a&&v>0,w=(p||0)*(m||0);(_||x||v>=w||f.dragging)&&d.push(f)}),d},cC=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},uC=(e,t,n,r,i,a=.1)=>{const s=t/(e.width*(1+a)),o=n/(e.height*(1+a)),c=Math.min(s,o),d=sl(c,r,i),f=e.x+e.width/2,p=e.y+e.height/2,m=t/2-f*d,g=n/2-p*d;return{x:m,y:g,zoom:d}},bs=(e,t=0)=>e.transition().duration(t);function sN(e,t,n,r){return(t[n]||[]).reduce((i,a)=>{var s,o;return`${e.id}-${a.id}-${n}`!==r&&i.push({id:a.id||null,type:n,nodeId:e.id,x:(((s=e.positionAbsolute)==null?void 0:s.x)??0)+a.x+a.width/2,y:(((o=e.positionAbsolute)==null?void 0:o.y)??0)+a.y+a.height/2}),i},[])}function BB(e,t,n,r,i,a){const{x:s,y:o}=La(e),d=t.elementsFromPoint(s,o).find(b=>b.classList.contains("react-flow__handle"));if(d){const b=d.getAttribute("data-nodeid");if(b){const y=$w(void 0,d),N=d.getAttribute("data-handleid"),v=a({nodeId:b,id:N,type:y});if(v){const _=i.find(x=>x.nodeId===b&&x.type===y&&x.id===N);return{handle:{id:N,type:y,nodeId:b,x:(_==null?void 0:_.x)||n.x,y:(_==null?void 0:_.y)||n.y},validHandleResult:v}}}}let f=[],p=1/0;if(i.forEach(b=>{const y=Math.sqrt((b.x-n.x)**2+(b.y-n.y)**2);if(y<=r){const N=a(b);y<=p&&(y<p?f=[{handle:b,validHandleResult:N}]:y===p&&f.push({handle:b,validHandleResult:N}),p=y)}}),!f.length)return{handle:null,validHandleResult:dC()};if(f.length===1)return f[0];const m=f.some(({validHandleResult:b})=>b.isValid),g=f.some(({handle:b})=>b.type==="target");return f.find(({handle:b,validHandleResult:y})=>g?b.type==="target":m?y.isValid:!0)||f[0]}const qB={source:null,target:null,sourceHandle:null,targetHandle:null},dC=()=>({handleDomNode:null,isValid:!1,connection:qB,endHandle:null});function fC(e,t,n,r,i,a,s){const o=i==="target",c=s.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),d={...dC(),handleDomNode:c};if(c){const f=$w(void 0,c),p=c.getAttribute("data-nodeid"),m=c.getAttribute("data-handleid"),g=c.classList.contains("connectable"),b=c.classList.contains("connectableend"),y={source:o?p:n,sourceHandle:o?m:r,target:o?n:p,targetHandle:o?r:m};d.connection=y,g&&b&&(t===Fs.Strict?o&&f==="source"||!o&&f==="target":p!==n||m!==r)&&(d.endHandle={nodeId:p,handleId:m,type:f},d.isValid=a(y))}return d}function $B({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((i,a)=>{if(a[Rt]){const{handleBounds:s}=a[Rt];let o=[],c=[];s&&(o=sN(a,s,"source",`${t}-${n}-${r}`),c=sN(a,s,"target",`${t}-${n}-${r}`)),i.push(...o,...c)}return i},[])}function $w(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Dg(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function UB(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function hC({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:i,getState:a,setState:s,isValidConnection:o,edgeUpdaterType:c,onReconnectEnd:d}){const f=J7(e.target),{connectionMode:p,domNode:m,autoPanOnConnect:g,connectionRadius:b,onConnectStart:y,panBy:N,getNodes:v,cancelConnection:_}=a();let x=0,w;const{x:E,y:P}=La(e),A=f==null?void 0:f.elementFromPoint(E,P),T=$w(c,A),L=m==null?void 0:m.getBoundingClientRect();if(!L||!T)return;let k,C=La(e,L),O=!1,F=null,M=!1,D=null;const $=$B({nodes:v(),nodeId:n,handleId:t,handleType:T}),V=()=>{if(!g)return;const[q,I]=Z7(C,L);N({x:q,y:I}),x=requestAnimationFrame(V)};s({connectionPosition:C,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:T,connectionStartHandle:{nodeId:n,handleId:t,type:T},connectionEndHandle:null}),y==null||y(e,{nodeId:n,handleId:t,handleType:T});function K(q){const{transform:I}=a();C=La(q,L);const{handle:z,validHandleResult:W}=BB(q,f,a2(C,I,!1,[1,1]),b,$,Q=>fC(Q,p,n,t,i?"target":"source",o,f));if(w=z,O||(V(),O=!0),D=W.handleDomNode,F=W.connection,M=W.isValid,s({connectionPosition:w&&M?oC({x:w.x,y:w.y},I):C,connectionStatus:UB(!!w,M),connectionEndHandle:W.endHandle}),!w&&!M&&!D)return Dg(k);F.source!==F.target&&D&&(Dg(k),k=D,D.classList.add("connecting","react-flow__handle-connecting"),D.classList.toggle("valid",M),D.classList.toggle("react-flow__handle-valid",M))}function H(q){var I,z;(w||D)&&F&&M&&(r==null||r(F)),(z=(I=a()).onConnectEnd)==null||z.call(I,q),c&&(d==null||d(q)),Dg(k),_(),cancelAnimationFrame(x),O=!1,M=!1,F=null,D=null,f.removeEventListener("mousemove",K),f.removeEventListener("mouseup",H),f.removeEventListener("touchmove",K),f.removeEventListener("touchend",H)}f.addEventListener("mousemove",K),f.addEventListener("mouseup",H),f.addEventListener("touchmove",K),f.addEventListener("touchend",H)}const oN=()=>!0,GB=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),HB=(e,t,n)=>r=>{const{connectionStartHandle:i,connectionEndHandle:a,connectionClickStartHandle:s}=r;return{connecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n||(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===n,clickConnecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n}},pC=G.forwardRef(({type:e="source",position:t=Te.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:a=!0,id:s,onConnect:o,children:c,className:d,onMouseDown:f,onTouchStart:p,...m},g)=>{var L,k;const b=s||null,y=e==="target",N=rn(),v=LB(),{connectOnClick:_,noPanClassName:x}=Tt(GB,wn),{connecting:w,clickConnecting:E}=Tt(HB(v,b,e),wn);v||(k=(L=N.getState()).onError)==null||k.call(L,"010",$i.error010());const P=C=>{const{defaultEdgeOptions:O,onConnect:F,hasDefaultEdges:M}=N.getState(),D={...O,...C};if(M){const{edges:$,setEdges:V}=N.getState();V(sC(D,$))}F==null||F(D),o==null||o(D)},A=C=>{if(!v)return;const O=tC(C);i&&(O&&C.button===0||!O)&&hC({event:C,handleId:b,nodeId:v,onConnect:P,isTarget:y,getState:N.getState,setState:N.setState,isValidConnection:n||N.getState().isValidConnection||oN}),O?f==null||f(C):p==null||p(C)},T=C=>{const{onClickConnectStart:O,onClickConnectEnd:F,connectionClickStartHandle:M,connectionMode:D,isValidConnection:$}=N.getState();if(!v||!M&&!i)return;if(!M){O==null||O(C,{nodeId:v,handleId:b,handleType:e}),N.setState({connectionClickStartHandle:{nodeId:v,type:e,handleId:b}});return}const V=J7(C.target),K=n||$||oN,{connection:H,isValid:q}=fC({nodeId:v,id:b,type:e},D,M.nodeId,M.handleId||null,M.type,K,V);q&&P(H),F==null||F(C),N.setState({connectionClickStartHandle:null})};return oe.createElement("div",{"data-handleid":b,"data-nodeid":v,"data-handlepos":t,"data-id":`${v}-${b}-${e}`,className:Tn(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",x,d,{source:!y,target:y,connectable:r,connectablestart:i,connectableend:a,connecting:E,connectionindicator:r&&(i&&!w||a&&w)}]),onMouseDown:A,onTouchStart:A,onClick:_?T:void 0,ref:g,...m},c)});pC.displayName="Handle";var Ah=G.memo(pC);const mC=({data:e,isConnectable:t,targetPosition:n=Te.Top,sourcePosition:r=Te.Bottom})=>oe.createElement(oe.Fragment,null,oe.createElement(Ah,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,oe.createElement(Ah,{type:"source",position:r,isConnectable:t}));mC.displayName="DefaultNode";var s2=G.memo(mC);const gC=({data:e,isConnectable:t,sourcePosition:n=Te.Bottom})=>oe.createElement(oe.Fragment,null,e==null?void 0:e.label,oe.createElement(Ah,{type:"source",position:n,isConnectable:t}));gC.displayName="InputNode";var vC=G.memo(gC);const yC=({data:e,isConnectable:t,targetPosition:n=Te.Top})=>oe.createElement(oe.Fragment,null,oe.createElement(Ah,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);yC.displayName="OutputNode";var xC=G.memo(yC);const Uw=()=>null;Uw.displayName="GroupNode";const VB=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),bf=e=>e.id;function WB(e,t){return wn(e.selectedNodes.map(bf),t.selectedNodes.map(bf))&&wn(e.selectedEdges.map(bf),t.selectedEdges.map(bf))}const bC=G.memo(({onSelectionChange:e})=>{const t=rn(),{selectedNodes:n,selectedEdges:r}=Tt(VB,WB);return G.useEffect(()=>{const i={nodes:n,edges:r};e==null||e(i),t.getState().onSelectionChange.forEach(a=>a(i))},[n,r,e]),null});bC.displayName="SelectionListener";const KB=e=>!!e.onSelectionChange;function YB({onSelectionChange:e}){const t=Tt(KB);return e||t?oe.createElement(bC,{onSelectionChange:e}):null}const XB=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function yo(e,t){G.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function He(e,t,n){G.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const QB=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:i,onConnectStart:a,onConnectEnd:s,onClickConnectStart:o,onClickConnectEnd:c,nodesDraggable:d,nodesConnectable:f,nodesFocusable:p,edgesFocusable:m,edgesUpdatable:g,elevateNodesOnSelect:b,minZoom:y,maxZoom:N,nodeExtent:v,onNodesChange:_,onEdgesChange:x,elementsSelectable:w,connectionMode:E,snapGrid:P,snapToGrid:A,translateExtent:T,connectOnClick:L,defaultEdgeOptions:k,fitView:C,fitViewOptions:O,onNodesDelete:F,onEdgesDelete:M,onNodeDrag:D,onNodeDragStart:$,onNodeDragStop:V,onSelectionDrag:K,onSelectionDragStart:H,onSelectionDragStop:q,noPanClassName:I,nodeOrigin:z,rfId:W,autoPanOnConnect:Q,autoPanOnNodeDrag:ee,onError:Y,connectionRadius:U,isValidConnection:J,nodeDragThreshold:te})=>{const{setNodes:X,setEdges:ne,setDefaultNodesAndEdges:ue,setMinZoom:se,setMaxZoom:ce,setTranslateExtent:de,setNodeExtent:Oe,reset:ge}=Tt(XB,wn),re=rn();return G.useEffect(()=>{const he=r==null?void 0:r.map(ye=>({...ye,...k}));return ue(n,he),()=>{ge()}},[]),He("defaultEdgeOptions",k,re.setState),He("connectionMode",E,re.setState),He("onConnect",i,re.setState),He("onConnectStart",a,re.setState),He("onConnectEnd",s,re.setState),He("onClickConnectStart",o,re.setState),He("onClickConnectEnd",c,re.setState),He("nodesDraggable",d,re.setState),He("nodesConnectable",f,re.setState),He("nodesFocusable",p,re.setState),He("edgesFocusable",m,re.setState),He("edgesUpdatable",g,re.setState),He("elementsSelectable",w,re.setState),He("elevateNodesOnSelect",b,re.setState),He("snapToGrid",A,re.setState),He("snapGrid",P,re.setState),He("onNodesChange",_,re.setState),He("onEdgesChange",x,re.setState),He("connectOnClick",L,re.setState),He("fitViewOnInit",C,re.setState),He("fitViewOnInitOptions",O,re.setState),He("onNodesDelete",F,re.setState),He("onEdgesDelete",M,re.setState),He("onNodeDrag",D,re.setState),He("onNodeDragStart",$,re.setState),He("onNodeDragStop",V,re.setState),He("onSelectionDrag",K,re.setState),He("onSelectionDragStart",H,re.setState),He("onSelectionDragStop",q,re.setState),He("noPanClassName",I,re.setState),He("nodeOrigin",z,re.setState),He("rfId",W,re.setState),He("autoPanOnConnect",Q,re.setState),He("autoPanOnNodeDrag",ee,re.setState),He("onError",Y,re.setState),He("connectionRadius",U,re.setState),He("isValidConnection",J,re.setState),He("nodeDragThreshold",te,re.setState),yo(e,X),yo(t,ne),yo(y,se),yo(N,ce),yo(T,de),yo(v,Oe),null},lN={display:"none"},ZB={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},wC="react-flow__node-desc",_C="react-flow__edge-desc",JB="react-flow__aria-live",eq=e=>e.ariaLiveMessage;function tq({rfId:e}){const t=Tt(eq);return oe.createElement("div",{id:`${JB}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:ZB},t)}function nq({rfId:e,disableKeyboardA11y:t}){return oe.createElement(oe.Fragment,null,oe.createElement("div",{id:`${wC}-${e}`,style:lN},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),oe.createElement("div",{id:`${_C}-${e}`,style:lN},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&oe.createElement(tq,{rfId:e}))}var Su=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=G.useState(!1),i=G.useRef(!1),a=G.useRef(new Set([])),[s,o]=G.useMemo(()=>{if(e!==null){const d=(Array.isArray(e)?e:[e]).filter(p=>typeof p=="string").map(p=>p.split("+")),f=d.reduce((p,m)=>p.concat(...m),[]);return[d,f]}return[[],[]]},[e]);return G.useEffect(()=>{const c=typeof document<"u"?document:null,d=(t==null?void 0:t.target)||c;if(e!==null){const f=g=>{if(i.current=g.ctrlKey||g.metaKey||g.shiftKey,(!i.current||i.current&&!t.actInsideInputWithModifier)&&n2(g))return!1;const y=uN(g.code,o);a.current.add(g[y]),cN(s,a.current,!1)&&(g.preventDefault(),r(!0))},p=g=>{if((!i.current||i.current&&!t.actInsideInputWithModifier)&&n2(g))return!1;const y=uN(g.code,o);cN(s,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(g[y]),g.key==="Meta"&&a.current.clear(),i.current=!1},m=()=>{a.current.clear(),r(!1)};return d==null||d.addEventListener("keydown",f),d==null||d.addEventListener("keyup",p),window.addEventListener("blur",m),()=>{d==null||d.removeEventListener("keydown",f),d==null||d.removeEventListener("keyup",p),window.removeEventListener("blur",m)}}},[e,r]),n};function cN(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function uN(e,t){return t.includes(e)?"code":"key"}function NC(e,t,n,r){var o,c;const i=e.parentNode||e.parentId;if(!i)return n;const a=t.get(i),s=Wo(a,r);return NC(a,t,{x:(n.x??0)+s.x,y:(n.y??0)+s.y,z:(((o=a[Rt])==null?void 0:o.z)??0)>(n.z??0)?((c=a[Rt])==null?void 0:c.z)??0:n.z??0},r)}function SC(e,t,n){e.forEach(r=>{var a;const i=r.parentNode||r.parentId;if(i&&!e.has(i))throw new Error(`Parent node ${i} not found`);if(i||n!=null&&n[r.id]){const{x:s,y:o,z:c}=NC(r,e,{...r.position,z:((a=r[Rt])==null?void 0:a.z)??0},t);r.positionAbsolute={x:s,y:o},r[Rt].z=c,n!=null&&n[r.id]&&(r[Rt].isParent=!0)}})}function Fg(e,t,n,r){const i=new Map,a={},s=r?1e3:0;return e.forEach(o=>{var g;const c=(mr(o.zIndex)?o.zIndex:0)+(o.selected?s:0),d=t.get(o.id),f={...o,positionAbsolute:{x:o.position.x,y:o.position.y}},p=o.parentNode||o.parentId;p&&(a[p]=!0);const m=(d==null?void 0:d.type)&&(d==null?void 0:d.type)!==o.type;Object.defineProperty(f,Rt,{enumerable:!1,value:{handleBounds:m||(g=d==null?void 0:d[Rt])==null?void 0:g.handleBounds,z:c}}),i.set(o.id,f)}),SC(i,n,a),i}function EC(e,t={}){const{getNodes:n,width:r,height:i,minZoom:a,maxZoom:s,d3Zoom:o,d3Selection:c,fitViewOnInitDone:d,fitViewOnInit:f,nodeOrigin:p}=e(),m=t.initial&&!d&&f;if(o&&c&&(m||!t.initial)){const b=n().filter(N=>{var _;const v=t.includeHiddenNodes?N.width&&N.height:!N.hidden;return(_=t.nodes)!=null&&_.length?v&&t.nodes.some(x=>x.id===N.id):v}),y=b.every(N=>N.width&&N.height);if(b.length>0&&y){const N=qw(b,p),{x:v,y:_,zoom:x}=uC(N,r,i,t.minZoom??a,t.maxZoom??s,t.padding??.1),w=Ma.translate(v,_).scale(x);return typeof t.duration=="number"&&t.duration>0?o.transform(bs(c,t.duration),w):o.transform(c,w),!0}}return!1}function rq(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[Rt]:r[Rt],selected:n.selected})}),new Map(t)}function iq(e,t){return t.map(n=>{const r=e.find(i=>i.id===n.id);return r&&(n.selected=r.selected),n})}function wf({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:i,edges:a,onNodesChange:s,onEdgesChange:o,hasDefaultNodes:c,hasDefaultEdges:d}=n();e!=null&&e.length&&(c&&r({nodeInternals:rq(e,i)}),s==null||s(e)),t!=null&&t.length&&(d&&r({edges:iq(t,a)}),o==null||o(t))}const xo=()=>{},aq={zoomIn:xo,zoomOut:xo,zoomTo:xo,getZoom:()=>1,setViewport:xo,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:xo,fitBounds:xo,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},sq=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),oq=()=>{const e=rn(),{d3Zoom:t,d3Selection:n}=Tt(sq,wn);return G.useMemo(()=>n&&t?{zoomIn:i=>t.scaleBy(bs(n,i==null?void 0:i.duration),1.2),zoomOut:i=>t.scaleBy(bs(n,i==null?void 0:i.duration),1/1.2),zoomTo:(i,a)=>t.scaleTo(bs(n,a==null?void 0:a.duration),i),getZoom:()=>e.getState().transform[2],setViewport:(i,a)=>{const[s,o,c]=e.getState().transform,d=Ma.translate(i.x??s,i.y??o).scale(i.zoom??c);t.transform(bs(n,a==null?void 0:a.duration),d)},getViewport:()=>{const[i,a,s]=e.getState().transform;return{x:i,y:a,zoom:s}},fitView:i=>EC(e.getState,i),setCenter:(i,a,s)=>{const{width:o,height:c,maxZoom:d}=e.getState(),f=typeof(s==null?void 0:s.zoom)<"u"?s.zoom:d,p=o/2-i*f,m=c/2-a*f,g=Ma.translate(p,m).scale(f);t.transform(bs(n,s==null?void 0:s.duration),g)},fitBounds:(i,a)=>{const{width:s,height:o,minZoom:c,maxZoom:d}=e.getState(),{x:f,y:p,zoom:m}=uC(i,s,o,c,d,(a==null?void 0:a.padding)??.1),g=Ma.translate(f,p).scale(m);t.transform(bs(n,a==null?void 0:a.duration),g)},project:i=>{const{transform:a,snapToGrid:s,snapGrid:o}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),a2(i,a,s,o)},screenToFlowPosition:i=>{const{transform:a,snapToGrid:s,snapGrid:o,domNode:c}=e.getState();if(!c)return i;const{x:d,y:f}=c.getBoundingClientRect(),p={x:i.x-d,y:i.y-f};return a2(p,a,s,o)},flowToScreenPosition:i=>{const{transform:a,domNode:s}=e.getState();if(!s)return i;const{x:o,y:c}=s.getBoundingClientRect(),d=oC(i,a);return{x:d.x+o,y:d.y+c}},viewportInitialized:!0}:aq,[t,n])};function Gw(){const e=oq(),t=rn(),n=G.useCallback(()=>t.getState().getNodes().map(y=>({...y})),[]),r=G.useCallback(y=>t.getState().nodeInternals.get(y),[]),i=G.useCallback(()=>{const{edges:y=[]}=t.getState();return y.map(N=>({...N}))},[]),a=G.useCallback(y=>{const{edges:N=[]}=t.getState();return N.find(v=>v.id===y)},[]),s=G.useCallback(y=>{const{getNodes:N,setNodes:v,hasDefaultNodes:_,onNodesChange:x}=t.getState(),w=N(),E=typeof y=="function"?y(w):y;if(_)v(E);else if(x){const P=E.length===0?w.map(A=>({type:"remove",id:A.id})):E.map(A=>({item:A,type:"reset"}));x(P)}},[]),o=G.useCallback(y=>{const{edges:N=[],setEdges:v,hasDefaultEdges:_,onEdgesChange:x}=t.getState(),w=typeof y=="function"?y(N):y;if(_)v(w);else if(x){const E=w.length===0?N.map(P=>({type:"remove",id:P.id})):w.map(P=>({item:P,type:"reset"}));x(E)}},[]),c=G.useCallback(y=>{const N=Array.isArray(y)?y:[y],{getNodes:v,setNodes:_,hasDefaultNodes:x,onNodesChange:w}=t.getState();if(x){const P=[...v(),...N];_(P)}else if(w){const E=N.map(P=>({item:P,type:"add"}));w(E)}},[]),d=G.useCallback(y=>{const N=Array.isArray(y)?y:[y],{edges:v=[],setEdges:_,hasDefaultEdges:x,onEdgesChange:w}=t.getState();if(x)_([...v,...N]);else if(w){const E=N.map(P=>({item:P,type:"add"}));w(E)}},[]),f=G.useCallback(()=>{const{getNodes:y,edges:N=[],transform:v}=t.getState(),[_,x,w]=v;return{nodes:y().map(E=>({...E})),edges:N.map(E=>({...E})),viewport:{x:_,y:x,zoom:w}}},[]),p=G.useCallback(({nodes:y,edges:N})=>{const{nodeInternals:v,getNodes:_,edges:x,hasDefaultNodes:w,hasDefaultEdges:E,onNodesDelete:P,onEdgesDelete:A,onNodesChange:T,onEdgesChange:L}=t.getState(),k=(y||[]).map(D=>D.id),C=(N||[]).map(D=>D.id),O=_().reduce((D,$)=>{const V=$.parentNode||$.parentId,K=!k.includes($.id)&&V&&D.find(q=>q.id===V);return(typeof $.deletable=="boolean"?$.deletable:!0)&&(k.includes($.id)||K)&&D.push($),D},[]),F=x.filter(D=>typeof D.deletable=="boolean"?D.deletable:!0),M=F.filter(D=>C.includes(D.id));if(O||M){const D=cC(O,F),$=[...M,...D],V=$.reduce((K,H)=>(K.includes(H.id)||K.push(H.id),K),[]);if((E||w)&&(E&&t.setState({edges:x.filter(K=>!V.includes(K.id))}),w&&(O.forEach(K=>{v.delete(K.id)}),t.setState({nodeInternals:new Map(v)}))),V.length>0&&(A==null||A($),L&&L(V.map(K=>({id:K,type:"remove"})))),O.length>0&&(P==null||P(O),T)){const K=O.map(H=>({id:H.id,type:"remove"}));T(K)}}},[]),m=G.useCallback(y=>{const N=CB(y),v=N?null:t.getState().nodeInternals.get(y.id);return!N&&!v?[null,null,N]:[N?y:tN(v),v,N]},[]),g=G.useCallback((y,N=!0,v)=>{const[_,x,w]=m(y);return _?(v||t.getState().getNodes()).filter(E=>{if(!w&&(E.id===x.id||!E.positionAbsolute))return!1;const P=tN(E),A=t2(P,_);return N&&A>0||A>=_.width*_.height}):[]},[]),b=G.useCallback((y,N,v=!0)=>{const[_]=m(y);if(!_)return!1;const x=t2(_,N);return v&&x>0||x>=_.width*_.height},[]);return G.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:i,getEdge:a,setNodes:s,setEdges:o,addNodes:c,addEdges:d,toObject:f,deleteElements:p,getIntersectingNodes:g,isNodeIntersecting:b}),[e,n,r,i,a,s,o,c,d,f,p,g,b])}const lq={actInsideInputWithModifier:!1};var cq=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=rn(),{deleteElements:r}=Gw(),i=Su(e,lq),a=Su(t);G.useEffect(()=>{if(i){const{edges:s,getNodes:o}=n.getState(),c=o().filter(f=>f.selected),d=s.filter(f=>f.selected);r({nodes:c,edges:d}),n.setState({nodesSelectionActive:!1})}},[i]),G.useEffect(()=>{n.setState({multiSelectionActive:a})},[a])};function uq(e){const t=rn();G.useEffect(()=>{let n;const r=()=>{var a,s;if(!e.current)return;const i=Iw(e.current);(i.height===0||i.width===0)&&((s=(a=t.getState()).onError)==null||s.call(a,"004",$i.error004())),t.setState({width:i.width||500,height:i.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const Hw={position:"absolute",width:"100%",height:"100%",top:0,left:0},dq=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,_f=e=>({x:e.x,y:e.y,zoom:e.k}),bo=(e,t)=>e.target.closest(`.${t}`),dN=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),fN=e=>{const t=e.ctrlKey&&Oh()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},fq=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),hq=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:i=!0,zoomOnPinch:a=!0,panOnScroll:s=!1,panOnScrollSpeed:o=.5,panOnScrollMode:c=ks.Free,zoomOnDoubleClick:d=!0,elementsSelectable:f,panOnDrag:p=!0,defaultViewport:m,translateExtent:g,minZoom:b,maxZoom:y,zoomActivationKeyCode:N,preventScrolling:v=!0,children:_,noWheelClassName:x,noPanClassName:w})=>{const E=G.useRef(),P=rn(),A=G.useRef(!1),T=G.useRef(!1),L=G.useRef(null),k=G.useRef({x:0,y:0,zoom:0}),{d3Zoom:C,d3Selection:O,d3ZoomHandler:F,userSelectionActive:M}=Tt(fq,wn),D=Su(N),$=G.useRef(0),V=G.useRef(!1),K=G.useRef();return uq(L),G.useEffect(()=>{if(L.current){const H=L.current.getBoundingClientRect(),q=bB().scaleExtent([b,y]).translateExtent(g),I=Rr(L.current).call(q),z=Ma.translate(m.x,m.y).scale(sl(m.zoom,b,y)),W=[[0,0],[H.width,H.height]],Q=q.constrain()(z,W,g);q.transform(I,Q),q.wheelDelta(fN),P.setState({d3Zoom:q,d3Selection:I,d3ZoomHandler:I.on("wheel.zoom"),transform:[Q.x,Q.y,Q.k],domNode:L.current.closest(".react-flow")})}},[]),G.useEffect(()=>{O&&C&&(s&&!D&&!M?O.on("wheel.zoom",H=>{if(bo(H,x))return!1;H.preventDefault(),H.stopImmediatePropagation();const q=O.property("__zoom").k||1;if(H.ctrlKey&&a){const J=ri(H),te=fN(H),X=q*Math.pow(2,te);C.scaleTo(O,X,J,H);return}const I=H.deltaMode===1?20:1;let z=c===ks.Vertical?0:H.deltaX*I,W=c===ks.Horizontal?0:H.deltaY*I;!Oh()&&H.shiftKey&&c!==ks.Vertical&&(z=H.deltaY*I,W=0),C.translateBy(O,-(z/q)*o,-(W/q)*o,{internal:!0});const Q=_f(O.property("__zoom")),{onViewportChangeStart:ee,onViewportChange:Y,onViewportChangeEnd:U}=P.getState();clearTimeout(K.current),V.current||(V.current=!0,t==null||t(H,Q),ee==null||ee(Q)),V.current&&(e==null||e(H,Q),Y==null||Y(Q),K.current=setTimeout(()=>{n==null||n(H,Q),U==null||U(Q),V.current=!1},150))},{passive:!1}):typeof F<"u"&&O.on("wheel.zoom",function(H,q){if(!v&&H.type==="wheel"&&!H.ctrlKey||bo(H,x))return null;H.preventDefault(),F.call(this,H,q)},{passive:!1}))},[M,s,c,O,C,F,D,a,v,x,t,e,n]),G.useEffect(()=>{C&&C.on("start",H=>{var z,W;if(!H.sourceEvent||H.sourceEvent.internal)return null;$.current=(z=H.sourceEvent)==null?void 0:z.button;const{onViewportChangeStart:q}=P.getState(),I=_f(H.transform);A.current=!0,k.current=I,((W=H.sourceEvent)==null?void 0:W.type)==="mousedown"&&P.setState({paneDragging:!0}),q==null||q(I),t==null||t(H.sourceEvent,I)})},[C,t]),G.useEffect(()=>{C&&(M&&!A.current?C.on("zoom",null):M||C.on("zoom",H=>{var I;const{onViewportChange:q}=P.getState();if(P.setState({transform:[H.transform.x,H.transform.y,H.transform.k]}),T.current=!!(r&&dN(p,$.current??0)),(e||q)&&!((I=H.sourceEvent)!=null&&I.internal)){const z=_f(H.transform);q==null||q(z),e==null||e(H.sourceEvent,z)}}))},[M,C,e,p,r]),G.useEffect(()=>{C&&C.on("end",H=>{if(!H.sourceEvent||H.sourceEvent.internal)return null;const{onViewportChangeEnd:q}=P.getState();if(A.current=!1,P.setState({paneDragging:!1}),r&&dN(p,$.current??0)&&!T.current&&r(H.sourceEvent),T.current=!1,(n||q)&&dq(k.current,H.transform)){const I=_f(H.transform);k.current=I,clearTimeout(E.current),E.current=setTimeout(()=>{q==null||q(I),n==null||n(H.sourceEvent,I)},s?150:0)}})},[C,s,p,n,r]),G.useEffect(()=>{C&&C.filter(H=>{const q=D||i,I=a&&H.ctrlKey;if((p===!0||Array.isArray(p)&&p.includes(1))&&H.button===1&&H.type==="mousedown"&&(bo(H,"react-flow__node")||bo(H,"react-flow__edge")))return!0;if(!p&&!q&&!s&&!d&&!a||M||!d&&H.type==="dblclick"||bo(H,x)&&H.type==="wheel"||bo(H,w)&&(H.type!=="wheel"||s&&H.type==="wheel"&&!D)||!a&&H.ctrlKey&&H.type==="wheel"||!q&&!s&&!I&&H.type==="wheel"||!p&&(H.type==="mousedown"||H.type==="touchstart")||Array.isArray(p)&&!p.includes(H.button)&&H.type==="mousedown")return!1;const z=Array.isArray(p)&&p.includes(H.button)||!H.button||H.button<=1;return(!H.ctrlKey||H.type==="wheel")&&z})},[M,C,i,a,s,d,p,f,D]),oe.createElement("div",{className:"react-flow__renderer",ref:L,style:Hw},_)},pq=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function mq(){const{userSelectionActive:e,userSelectionRect:t}=Tt(pq,wn);return e&&t?oe.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function hN(e,t){const n=t.parentNode||t.parentId,r=e.find(i=>i.id===n);if(r){const i=t.position.x+t.width-r.width,a=t.position.y+t.height-r.height;if(i>0||a>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,i>0&&(r.style.width+=i),a>0&&(r.style.height+=a),t.position.x<0){const s=Math.abs(t.position.x);r.position.x=r.position.x-s,r.style.width+=s,t.position.x=0}if(t.position.y<0){const s=Math.abs(t.position.y);r.position.y=r.position.y-s,r.style.height+=s,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function kC(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,i)=>{const a=e.filter(o=>o.id===i.id);if(a.length===0)return r.push(i),r;const s={...i};for(const o of a)if(o)switch(o.type){case"select":{s.selected=o.selected;break}case"position":{typeof o.position<"u"&&(s.position=o.position),typeof o.positionAbsolute<"u"&&(s.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(s.dragging=o.dragging),s.expandParent&&hN(r,s);break}case"dimensions":{typeof o.dimensions<"u"&&(s.width=o.dimensions.width,s.height=o.dimensions.height),typeof o.updateStyle<"u"&&(s.style={...s.style||{},...o.dimensions}),typeof o.resizing=="boolean"&&(s.resizing=o.resizing),s.expandParent&&hN(r,s);break}case"remove":return r}return r.push(s),r},n)}function jC(e,t){return kC(e,t)}function gq(e,t){return kC(e,t)}const ya=(e,t)=>({id:e,type:"select",selected:t});function Do(e,t){return e.reduce((n,r)=>{const i=t.includes(r.id);return!r.selected&&i?(r.selected=!0,n.push(ya(r.id,!0))):r.selected&&!i&&(r.selected=!1,n.push(ya(r.id,!1))),n},[])}const zg=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},vq=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),CC=G.memo(({isSelecting:e,selectionMode:t=Nu.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:i,onPaneClick:a,onPaneContextMenu:s,onPaneScroll:o,onPaneMouseEnter:c,onPaneMouseMove:d,onPaneMouseLeave:f,children:p})=>{const m=G.useRef(null),g=rn(),b=G.useRef(0),y=G.useRef(0),N=G.useRef(),{userSelectionActive:v,elementsSelectable:_,dragging:x}=Tt(vq,wn),w=()=>{g.setState({userSelectionActive:!1,userSelectionRect:null}),b.current=0,y.current=0},E=F=>{a==null||a(F),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},P=F=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){F.preventDefault();return}s==null||s(F)},A=o?F=>o(F):void 0,T=F=>{const{resetSelectedElements:M,domNode:D}=g.getState();if(N.current=D==null?void 0:D.getBoundingClientRect(),!_||!e||F.button!==0||F.target!==m.current||!N.current)return;const{x:$,y:V}=La(F,N.current);M(),g.setState({userSelectionRect:{width:0,height:0,startX:$,startY:V,x:$,y:V}}),r==null||r(F)},L=F=>{const{userSelectionRect:M,nodeInternals:D,edges:$,transform:V,onNodesChange:K,onEdgesChange:H,nodeOrigin:q,getNodes:I}=g.getState();if(!e||!N.current||!M)return;g.setState({userSelectionActive:!0,nodesSelectionActive:!1});const z=La(F,N.current),W=M.startX??0,Q=M.startY??0,ee={...M,x:z.x<W?z.x:W,y:z.y<Q?z.y:Q,width:Math.abs(z.x-W),height:Math.abs(z.y-Q)},Y=I(),U=lC(D,ee,V,t===Nu.Partial,!0,q),J=cC(U,$).map(X=>X.id),te=U.map(X=>X.id);if(b.current!==te.length){b.current=te.length;const X=Do(Y,te);X.length&&(K==null||K(X))}if(y.current!==J.length){y.current=J.length;const X=Do($,J);X.length&&(H==null||H(X))}g.setState({userSelectionRect:ee})},k=F=>{if(F.button!==0)return;const{userSelectionRect:M}=g.getState();!v&&M&&F.target===m.current&&(E==null||E(F)),g.setState({nodesSelectionActive:b.current>0}),w(),i==null||i(F)},C=F=>{v&&(g.setState({nodesSelectionActive:b.current>0}),i==null||i(F)),w()},O=_&&(e||v);return oe.createElement("div",{className:Tn(["react-flow__pane",{dragging:x,selection:e}]),onClick:O?void 0:zg(E,m),onContextMenu:zg(P,m),onWheel:zg(A,m),onMouseEnter:O?void 0:c,onMouseDown:O?T:void 0,onMouseMove:O?L:d,onMouseUp:O?k:void 0,onMouseLeave:O?C:f,ref:m,style:Hw},p,oe.createElement(mq,null))});CC.displayName="Pane";function TC(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:TC(r,t):!1}function pN(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function yq(e,t,n,r){return Array.from(e.values()).filter(i=>(i.selected||i.id===r)&&(!i.parentNode||i.parentId||!TC(i,e))&&(i.draggable||t&&typeof i.draggable>"u")).map(i=>{var a,s;return{id:i.id,position:i.position||{x:0,y:0},positionAbsolute:i.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((a=i.positionAbsolute)==null?void 0:a.x)??0),y:n.y-(((s=i.positionAbsolute)==null?void 0:s.y)??0)},delta:{x:0,y:0},extent:i.extent,parentNode:i.parentNode||i.parentId,parentId:i.parentNode||i.parentId,width:i.width,height:i.height,expandParent:i.expandParent}})}function xq(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function OC(e,t,n,r,i=[0,0],a){const s=xq(e,e.extent||r);let o=s;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const p=n.get(c),{x:m,y:g}=Wo(p,i).positionAbsolute;o=p&&mr(m)&&mr(g)&&mr(p.width)&&mr(p.height)?[[m+e.width*i[0],g+e.height*i[1]],[m+p.width-e.width+e.width*i[0],g+p.height-e.height+e.height*i[1]]]:o}else a==null||a("005",$i.error005()),o=s;else if(e.extent&&c&&e.extent!=="parent"){const p=n.get(c),{x:m,y:g}=Wo(p,i).positionAbsolute;o=[[e.extent[0][0]+m,e.extent[0][1]+g],[e.extent[1][0]+m,e.extent[1][1]+g]]}let d={x:0,y:0};if(c){const p=n.get(c);d=Wo(p,i).positionAbsolute}const f=o&&o!=="parent"?Mw(t,o):t;return{position:{x:f.x-d.x,y:f.y-d.y},positionAbsolute:f}}function Bg({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(i=>({...n.get(i.id),position:i.position,positionAbsolute:i.positionAbsolute}));return[e?r.find(i=>i.id===e):r[0],r]}const mN=(e,t,n,r)=>{const i=t.querySelectorAll(e);if(!i||!i.length)return null;const a=Array.from(i),s=t.getBoundingClientRect(),o={x:s.width*r[0],y:s.height*r[1]};return a.map(c=>{const d=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(d.left-s.left-o.x)/n,y:(d.top-s.top-o.y)/n,...Iw(c)}})};function xc(e,t,n){return n===void 0?n:r=>{const i=t().nodeInternals.get(e);i&&n(r,{...i})}}function o2({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:a,multiSelectionActive:s,nodeInternals:o,onError:c}=t.getState(),d=o.get(e);if(!d){c==null||c("012",$i.error012(e));return}t.setState({nodesSelectionActive:!1}),d.selected?(n||d.selected&&s)&&(a({nodes:[d],edges:[]}),requestAnimationFrame(()=>{var f;return(f=r==null?void 0:r.current)==null?void 0:f.blur()})):i([e])}function bq(){const e=rn();return G.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:i,snapToGrid:a}=e.getState(),s=n.touches?n.touches[0].clientX:n.clientX,o=n.touches?n.touches[0].clientY:n.clientY,c={x:(s-r[0])/r[2],y:(o-r[1])/r[2]};return{xSnapped:a?i[0]*Math.round(c.x/i[0]):c.x,ySnapped:a?i[1]*Math.round(c.y/i[1]):c.y,...c}},[])}function qg(e){return(t,n,r)=>e==null?void 0:e(t,r)}function PC({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:a,selectNodesOnDrag:s}){const o=rn(),[c,d]=G.useState(!1),f=G.useRef([]),p=G.useRef({x:null,y:null}),m=G.useRef(0),g=G.useRef(null),b=G.useRef({x:0,y:0}),y=G.useRef(null),N=G.useRef(!1),v=G.useRef(!1),_=G.useRef(!1),x=bq();return G.useEffect(()=>{if(e!=null&&e.current){const w=Rr(e.current),E=({x:T,y:L})=>{const{nodeInternals:k,onNodeDrag:C,onSelectionDrag:O,updateNodePositions:F,nodeExtent:M,snapGrid:D,snapToGrid:$,nodeOrigin:V,onError:K}=o.getState();p.current={x:T,y:L};let H=!1,q={x:0,y:0,x2:0,y2:0};if(f.current.length>1&&M){const z=qw(f.current,V);q=Lw(z)}if(f.current=f.current.map(z=>{const W={x:T-z.distance.x,y:L-z.distance.y};$&&(W.x=D[0]*Math.round(W.x/D[0]),W.y=D[1]*Math.round(W.y/D[1]));const Q=[[M[0][0],M[0][1]],[M[1][0],M[1][1]]];f.current.length>1&&M&&!z.extent&&(Q[0][0]=z.positionAbsolute.x-q.x+M[0][0],Q[1][0]=z.positionAbsolute.x+(z.width??0)-q.x2+M[1][0],Q[0][1]=z.positionAbsolute.y-q.y+M[0][1],Q[1][1]=z.positionAbsolute.y+(z.height??0)-q.y2+M[1][1]);const ee=OC(z,W,k,Q,V,K);return H=H||z.position.x!==ee.position.x||z.position.y!==ee.position.y,z.position=ee.position,z.positionAbsolute=ee.positionAbsolute,z}),!H)return;F(f.current,!0,!0),d(!0);const I=i?C:qg(O);if(I&&y.current){const[z,W]=Bg({nodeId:i,dragItems:f.current,nodeInternals:k});I(y.current,z,W)}},P=()=>{if(!g.current)return;const[T,L]=Z7(b.current,g.current);if(T!==0||L!==0){const{transform:k,panBy:C}=o.getState();p.current.x=(p.current.x??0)-T/k[2],p.current.y=(p.current.y??0)-L/k[2],C({x:T,y:L})&&E(p.current)}m.current=requestAnimationFrame(P)},A=T=>{var V;const{nodeInternals:L,multiSelectionActive:k,nodesDraggable:C,unselectNodesAndEdges:O,onNodeDragStart:F,onSelectionDragStart:M}=o.getState();v.current=!0;const D=i?F:qg(M);(!s||!a)&&!k&&i&&((V=L.get(i))!=null&&V.selected||O()),i&&a&&s&&o2({id:i,store:o,nodeRef:e});const $=x(T);if(p.current=$,f.current=yq(L,C,$,i),D&&f.current){const[K,H]=Bg({nodeId:i,dragItems:f.current,nodeInternals:L});D(T.sourceEvent,K,H)}};if(t)w.on(".drag",null);else{const T=OF().on("start",L=>{const{domNode:k,nodeDragThreshold:C}=o.getState();C===0&&A(L),_.current=!1;const O=x(L);p.current=O,g.current=(k==null?void 0:k.getBoundingClientRect())||null,b.current=La(L.sourceEvent,g.current)}).on("drag",L=>{var F,M;const k=x(L),{autoPanOnNodeDrag:C,nodeDragThreshold:O}=o.getState();if(L.sourceEvent.type==="touchmove"&&L.sourceEvent.touches.length>1&&(_.current=!0),!_.current){if(!N.current&&v.current&&C&&(N.current=!0,P()),!v.current){const D=k.xSnapped-(((F=p==null?void 0:p.current)==null?void 0:F.x)??0),$=k.ySnapped-(((M=p==null?void 0:p.current)==null?void 0:M.y)??0);Math.sqrt(D*D+$*$)>O&&A(L)}(p.current.x!==k.xSnapped||p.current.y!==k.ySnapped)&&f.current&&v.current&&(y.current=L.sourceEvent,b.current=La(L.sourceEvent,g.current),E(k))}}).on("end",L=>{if(!(!v.current||_.current)&&(d(!1),N.current=!1,v.current=!1,cancelAnimationFrame(m.current),f.current)){const{updateNodePositions:k,nodeInternals:C,onNodeDragStop:O,onSelectionDragStop:F}=o.getState(),M=i?O:qg(F);if(k(f.current,!1,!1),M){const[D,$]=Bg({nodeId:i,dragItems:f.current,nodeInternals:C});M(L.sourceEvent,D,$)}}}).filter(L=>{const k=L.target;return!L.button&&(!n||!pN(k,`.${n}`,e))&&(!r||pN(k,r,e))});return w.call(T),()=>{w.on(".drag",null)}}}},[e,t,n,r,a,o,i,s,x]),c}function AC(){const e=rn();return G.useCallback(n=>{const{nodeInternals:r,nodeExtent:i,updateNodePositions:a,getNodes:s,snapToGrid:o,snapGrid:c,onError:d,nodesDraggable:f}=e.getState(),p=s().filter(_=>_.selected&&(_.draggable||f&&typeof _.draggable>"u")),m=o?c[0]:5,g=o?c[1]:5,b=n.isShiftPressed?4:1,y=n.x*m*b,N=n.y*g*b,v=p.map(_=>{if(_.positionAbsolute){const x={x:_.positionAbsolute.x+y,y:_.positionAbsolute.y+N};o&&(x.x=c[0]*Math.round(x.x/c[0]),x.y=c[1]*Math.round(x.y/c[1]));const{positionAbsolute:w,position:E}=OC(_,x,r,i,void 0,d);_.position=E,_.positionAbsolute=w}return _});a(v,!0,!1)},[])}const Ko={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var bc=e=>{const t=({id:n,type:r,data:i,xPos:a,yPos:s,xPosOrigin:o,yPosOrigin:c,selected:d,onClick:f,onMouseEnter:p,onMouseMove:m,onMouseLeave:g,onContextMenu:b,onDoubleClick:y,style:N,className:v,isDraggable:_,isSelectable:x,isConnectable:w,isFocusable:E,selectNodesOnDrag:P,sourcePosition:A,targetPosition:T,hidden:L,resizeObserver:k,dragHandle:C,zIndex:O,isParent:F,noDragClassName:M,noPanClassName:D,initialized:$,disableKeyboardA11y:V,ariaLabel:K,rfId:H,hasHandleBounds:q})=>{const I=rn(),z=G.useRef(null),W=G.useRef(null),Q=G.useRef(A),ee=G.useRef(T),Y=G.useRef(r),U=x||_||f||p||m||g,J=AC(),te=xc(n,I.getState,p),X=xc(n,I.getState,m),ne=xc(n,I.getState,g),ue=xc(n,I.getState,b),se=xc(n,I.getState,y),ce=ge=>{const{nodeDragThreshold:re}=I.getState();if(x&&(!P||!_||re>0)&&o2({id:n,store:I,nodeRef:z}),f){const he=I.getState().nodeInternals.get(n);he&&f(ge,{...he})}},de=ge=>{if(!n2(ge)&&!V)if(eC.includes(ge.key)&&x){const re=ge.key==="Escape";o2({id:n,store:I,unselect:re,nodeRef:z})}else _&&d&&Object.prototype.hasOwnProperty.call(Ko,ge.key)&&(I.setState({ariaLiveMessage:`Moved selected node ${ge.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~a}, y: ${~~s}`}),J({x:Ko[ge.key].x,y:Ko[ge.key].y,isShiftPressed:ge.shiftKey}))};G.useEffect(()=>()=>{W.current&&(k==null||k.unobserve(W.current),W.current=null)},[]),G.useEffect(()=>{if(z.current&&!L){const ge=z.current;(!$||!q||W.current!==ge)&&(W.current&&(k==null||k.unobserve(W.current)),k==null||k.observe(ge),W.current=ge)}},[L,$,q]),G.useEffect(()=>{const ge=Y.current!==r,re=Q.current!==A,he=ee.current!==T;z.current&&(ge||re||he)&&(ge&&(Y.current=r),re&&(Q.current=A),he&&(ee.current=T),I.getState().updateNodeDimensions([{id:n,nodeElement:z.current,forceUpdate:!0}]))},[n,r,A,T]);const Oe=PC({nodeRef:z,disabled:L||!_,noDragClassName:M,handleSelector:C,nodeId:n,isSelectable:x,selectNodesOnDrag:P});return L?null:oe.createElement("div",{className:Tn(["react-flow__node",`react-flow__node-${r}`,{[D]:_},v,{selected:d,selectable:x,parent:F,dragging:Oe}]),ref:z,style:{zIndex:O,transform:`translate(${o}px,${c}px)`,pointerEvents:U?"all":"none",visibility:$?"visible":"hidden",...N},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:te,onMouseMove:X,onMouseLeave:ne,onContextMenu:ue,onClick:ce,onDoubleClick:se,onKeyDown:E?de:void 0,tabIndex:E?0:void 0,role:E?"button":void 0,"aria-describedby":V?void 0:`${wC}-${H}`,"aria-label":K},oe.createElement(MB,{value:n},oe.createElement(e,{id:n,data:i,type:r,xPos:a,yPos:s,selected:d,isConnectable:w,sourcePosition:A,targetPosition:T,dragging:Oe,dragHandle:C,zIndex:O})))};return t.displayName="NodeWrapper",G.memo(t)};const wq=e=>{const t=e.getNodes().filter(n=>n.selected);return{...qw(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function _q({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=rn(),{width:i,height:a,x:s,y:o,transformString:c,userSelectionActive:d}=Tt(wq,wn),f=AC(),p=G.useRef(null);if(G.useEffect(()=>{var b;n||(b=p.current)==null||b.focus({preventScroll:!0})},[n]),PC({nodeRef:p}),d||!i||!a)return null;const m=e?b=>{const y=r.getState().getNodes().filter(N=>N.selected);e(b,y)}:void 0,g=b=>{Object.prototype.hasOwnProperty.call(Ko,b.key)&&f({x:Ko[b.key].x,y:Ko[b.key].y,isShiftPressed:b.shiftKey})};return oe.createElement("div",{className:Tn(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},oe.createElement("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:n?void 0:-1,onKeyDown:n?void 0:g,style:{width:i,height:a,top:o,left:s}}))}var Nq=G.memo(_q);const Sq=e=>e.nodesSelectionActive,RC=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:a,onPaneScroll:s,deleteKeyCode:o,onMove:c,onMoveStart:d,onMoveEnd:f,selectionKeyCode:p,selectionOnDrag:m,selectionMode:g,onSelectionStart:b,onSelectionEnd:y,multiSelectionKeyCode:N,panActivationKeyCode:v,zoomActivationKeyCode:_,elementsSelectable:x,zoomOnScroll:w,zoomOnPinch:E,panOnScroll:P,panOnScrollSpeed:A,panOnScrollMode:T,zoomOnDoubleClick:L,panOnDrag:k,defaultViewport:C,translateExtent:O,minZoom:F,maxZoom:M,preventScrolling:D,onSelectionContextMenu:$,noWheelClassName:V,noPanClassName:K,disableKeyboardA11y:H})=>{const q=Tt(Sq),I=Su(p),z=Su(v),W=z||k,Q=z||P,ee=I||m&&W!==!0;return cq({deleteKeyCode:o,multiSelectionKeyCode:N}),oe.createElement(hq,{onMove:c,onMoveStart:d,onMoveEnd:f,onPaneContextMenu:a,elementsSelectable:x,zoomOnScroll:w,zoomOnPinch:E,panOnScroll:Q,panOnScrollSpeed:A,panOnScrollMode:T,zoomOnDoubleClick:L,panOnDrag:!I&&W,defaultViewport:C,translateExtent:O,minZoom:F,maxZoom:M,zoomActivationKeyCode:_,preventScrolling:D,noWheelClassName:V,noPanClassName:K},oe.createElement(CC,{onSelectionStart:b,onSelectionEnd:y,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:a,onPaneScroll:s,panOnDrag:W,isSelecting:!!ee,selectionMode:g},e,q&&oe.createElement(Nq,{onSelectionContextMenu:$,noPanClassName:K,disableKeyboardA11y:H})))};RC.displayName="FlowRenderer";var Eq=G.memo(RC);function kq(e){return Tt(G.useCallback(n=>e?lC(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function jq(e){const t={input:bc(e.input||vC),default:bc(e.default||s2),output:bc(e.output||xC),group:bc(e.group||Uw)},n={},r=Object.keys(e).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,a)=>(i[a]=bc(e[a]||s2),i),n);return{...t,...r}}const Cq=({x:e,y:t,width:n,height:r,origin:i})=>!n||!r?{x:e,y:t}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:e,y:t}:{x:e-n*i[0],y:t-r*i[1]},Tq=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),IC=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:a,onError:s}=Tt(Tq,wn),o=kq(e.onlyRenderVisibleElements),c=G.useRef(),d=G.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const f=new ResizeObserver(p=>{const m=p.map(g=>({id:g.target.getAttribute("data-id"),nodeElement:g.target,forceUpdate:!0}));a(m)});return c.current=f,f},[]);return G.useEffect(()=>()=>{var f;(f=c==null?void 0:c.current)==null||f.disconnect()},[]),oe.createElement("div",{className:"react-flow__nodes",style:Hw},o.map(f=>{var E,P,A;let p=f.type||"default";e.nodeTypes[p]||(s==null||s("003",$i.error003(p)),p="default");const m=e.nodeTypes[p]||e.nodeTypes.default,g=!!(f.draggable||t&&typeof f.draggable>"u"),b=!!(f.selectable||i&&typeof f.selectable>"u"),y=!!(f.connectable||n&&typeof f.connectable>"u"),N=!!(f.focusable||r&&typeof f.focusable>"u"),v=e.nodeExtent?Mw(f.positionAbsolute,e.nodeExtent):f.positionAbsolute,_=(v==null?void 0:v.x)??0,x=(v==null?void 0:v.y)??0,w=Cq({x:_,y:x,width:f.width??0,height:f.height??0,origin:e.nodeOrigin});return oe.createElement(m,{key:f.id,id:f.id,className:f.className,style:f.style,type:p,data:f.data,sourcePosition:f.sourcePosition||Te.Bottom,targetPosition:f.targetPosition||Te.Top,hidden:f.hidden,xPos:_,yPos:x,xPosOrigin:w.x,yPosOrigin:w.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!f.selected,isDraggable:g,isSelectable:b,isConnectable:y,isFocusable:N,resizeObserver:d,dragHandle:f.dragHandle,zIndex:((E=f[Rt])==null?void 0:E.z)??0,isParent:!!((P=f[Rt])!=null&&P.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!f.width&&!!f.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:f.ariaLabel,hasHandleBounds:!!((A=f[Rt])!=null&&A.handleBounds)})}))};IC.displayName="NodeRenderer";var Oq=G.memo(IC);const Pq=(e,t,n)=>n===Te.Left?e-t:n===Te.Right?e+t:e,Aq=(e,t,n)=>n===Te.Top?e-t:n===Te.Bottom?e+t:e,gN="react-flow__edgeupdater",vN=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:a,onMouseOut:s,type:o})=>oe.createElement("circle",{onMouseDown:i,onMouseEnter:a,onMouseOut:s,className:Tn([gN,`${gN}-${o}`]),cx:Pq(t,r,e),cy:Aq(n,r,e),r,stroke:"transparent",fill:"transparent"}),Rq=()=>!0;var wo=e=>{const t=({id:n,className:r,type:i,data:a,onClick:s,onEdgeDoubleClick:o,selected:c,animated:d,label:f,labelStyle:p,labelShowBg:m,labelBgStyle:g,labelBgPadding:b,labelBgBorderRadius:y,style:N,source:v,target:_,sourceX:x,sourceY:w,targetX:E,targetY:P,sourcePosition:A,targetPosition:T,elementsSelectable:L,hidden:k,sourceHandleId:C,targetHandleId:O,onContextMenu:F,onMouseEnter:M,onMouseMove:D,onMouseLeave:$,reconnectRadius:V,onReconnect:K,onReconnectStart:H,onReconnectEnd:q,markerEnd:I,markerStart:z,rfId:W,ariaLabel:Q,isFocusable:ee,isReconnectable:Y,pathOptions:U,interactionWidth:J,disableKeyboardA11y:te})=>{const X=G.useRef(null),[ne,ue]=G.useState(!1),[se,ce]=G.useState(!1),de=rn(),Oe=G.useMemo(()=>`url('#${i2(z,W)}')`,[z,W]),ge=G.useMemo(()=>`url('#${i2(I,W)}')`,[I,W]);if(k)return null;const re=it=>{var Gn;const{edges:dn,addSelectedEdges:Xt,unselectNodesAndEdges:an,multiSelectionActive:pi}=de.getState(),wr=dn.find(rs=>rs.id===n);wr&&(L&&(de.setState({nodesSelectionActive:!1}),wr.selected&&pi?(an({nodes:[],edges:[wr]}),(Gn=X.current)==null||Gn.blur()):Xt([n])),s&&s(it,wr))},he=yc(n,de.getState,o),ye=yc(n,de.getState,F),we=yc(n,de.getState,M),me=yc(n,de.getState,D),je=yc(n,de.getState,$),Ce=(it,dn)=>{if(it.button!==0)return;const{edges:Xt,isValidConnection:an}=de.getState(),pi=dn?_:v,wr=(dn?O:C)||null,Gn=dn?"target":"source",rs=an||Rq,Il=dn,is=Xt.find(mi=>mi.id===n);ce(!0),H==null||H(it,is,Gn);const Ml=mi=>{ce(!1),q==null||q(mi,is,Gn)};hC({event:it,handleId:wr,nodeId:pi,onConnect:mi=>K==null?void 0:K(is,mi),isTarget:Il,getState:de.getState,setState:de.setState,isValidConnection:rs,edgeUpdaterType:Gn,onReconnectEnd:Ml})},Ae=it=>Ce(it,!0),vt=it=>Ce(it,!1),Pt=()=>ue(!0),qe=()=>ue(!1),Un=!L&&!s,et=it=>{var dn;if(!te&&eC.includes(it.key)&&L){const{unselectNodesAndEdges:Xt,addSelectedEdges:an,edges:pi}=de.getState();it.key==="Escape"?((dn=X.current)==null||dn.blur(),Xt({edges:[pi.find(Gn=>Gn.id===n)]})):an([n])}};return oe.createElement("g",{className:Tn(["react-flow__edge",`react-flow__edge-${i}`,r,{selected:c,animated:d,inactive:Un,updating:ne}]),onClick:re,onDoubleClick:he,onContextMenu:ye,onMouseEnter:we,onMouseMove:me,onMouseLeave:je,onKeyDown:ee?et:void 0,tabIndex:ee?0:void 0,role:ee?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":Q===null?void 0:Q||`Edge from ${v} to ${_}`,"aria-describedby":ee?`${_C}-${W}`:void 0,ref:X},!se&&oe.createElement(e,{id:n,source:v,target:_,selected:c,animated:d,label:f,labelStyle:p,labelShowBg:m,labelBgStyle:g,labelBgPadding:b,labelBgBorderRadius:y,data:a,style:N,sourceX:x,sourceY:w,targetX:E,targetY:P,sourcePosition:A,targetPosition:T,sourceHandleId:C,targetHandleId:O,markerStart:Oe,markerEnd:ge,pathOptions:U,interactionWidth:J}),Y&&oe.createElement(oe.Fragment,null,(Y==="source"||Y===!0)&&oe.createElement(vN,{position:A,centerX:x,centerY:w,radius:V,onMouseDown:Ae,onMouseEnter:Pt,onMouseOut:qe,type:"source"}),(Y==="target"||Y===!0)&&oe.createElement(vN,{position:T,centerX:E,centerY:P,radius:V,onMouseDown:vt,onMouseEnter:Pt,onMouseOut:qe,type:"target"})))};return t.displayName="EdgeWrapper",G.memo(t)};function Iq(e){const t={default:wo(e.default||Ph),straight:wo(e.bezier||zw),step:wo(e.step||Fw),smoothstep:wo(e.step||vp),simplebezier:wo(e.simplebezier||Dw)},n={},r=Object.keys(e).filter(i=>!["default","bezier"].includes(i)).reduce((i,a)=>(i[a]=wo(e[a]||Ph),i),n);return{...t,...r}}function yN(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,i=((n==null?void 0:n.y)||0)+t.y,a=(n==null?void 0:n.width)||t.width,s=(n==null?void 0:n.height)||t.height;switch(e){case Te.Top:return{x:r+a/2,y:i};case Te.Right:return{x:r+a,y:i+s/2};case Te.Bottom:return{x:r+a/2,y:i+s};case Te.Left:return{x:r,y:i+s/2}}}function xN(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const Mq=(e,t,n,r,i,a)=>{const s=yN(n,e,t),o=yN(a,r,i);return{sourceX:s.x,sourceY:s.y,targetX:o.x,targetY:o.y}};function Lq({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:a,width:s,height:o,transform:c}){const d={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+r,t.y+a)};d.x===d.x2&&(d.x2+=1),d.y===d.y2&&(d.y2+=1);const f=Lw({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:s/c[2],height:o/c[2]}),p=Math.max(0,Math.min(f.x2,d.x2)-Math.max(f.x,d.x)),m=Math.max(0,Math.min(f.y2,d.y2)-Math.max(f.y,d.y));return Math.ceil(p*m)>0}function bN(e){var r,i,a,s,o;const t=((r=e==null?void 0:e[Rt])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)<"u"&&typeof((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.y)<"u";return[{x:((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.x)||0,y:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const Dq=[{level:0,isMaxLevel:!0,edges:[]}];function Fq(e,t,n=!1){let r=-1;const i=e.reduce((s,o)=>{var f,p;const c=mr(o.zIndex);let d=c?o.zIndex:0;if(n){const m=t.get(o.target),g=t.get(o.source),b=o.selected||(m==null?void 0:m.selected)||(g==null?void 0:g.selected),y=Math.max(((f=g==null?void 0:g[Rt])==null?void 0:f.z)||0,((p=m==null?void 0:m[Rt])==null?void 0:p.z)||0,1e3);d=(c?o.zIndex:0)+(b?y:0)}return s[d]?s[d].push(o):s[d]=[o],r=d>r?d:r,s},{}),a=Object.entries(i).map(([s,o])=>{const c=+s;return{edges:o,level:c,isMaxLevel:c===r}});return a.length===0?Dq:a}function zq(e,t,n){const r=Tt(G.useCallback(i=>e?i.edges.filter(a=>{const s=t.get(a.source),o=t.get(a.target);return(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&Lq({sourcePos:s.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:s.width,sourceHeight:s.height,targetWidth:o.width,targetHeight:o.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[e,t]));return Fq(r,t,n)}const Bq=({color:e="none",strokeWidth:t=1})=>oe.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),qq=({color:e="none",strokeWidth:t=1})=>oe.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),wN={[ol.Arrow]:Bq,[ol.ArrowClosed]:qq};function $q(e){const t=rn();return G.useMemo(()=>{var i,a;return Object.prototype.hasOwnProperty.call(wN,e)?wN[e]:((a=(i=t.getState()).onError)==null||a.call(i,"009",$i.error009(e)),null)},[e])}const Uq=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:a="strokeWidth",strokeWidth:s,orient:o="auto-start-reverse"})=>{const c=$q(t);return c?oe.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:o,refX:"0",refY:"0"},oe.createElement(c,{color:n,strokeWidth:s})):null},Gq=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((i,a)=>([a.markerStart,a.markerEnd].forEach(s=>{if(s&&typeof s=="object"){const o=i2(s,t);r.includes(o)||(i.push({id:o,color:s.color||e,...s}),r.push(o))}}),i),[]).sort((i,a)=>i.id.localeCompare(a.id))},MC=({defaultColor:e,rfId:t})=>{const n=Tt(G.useCallback(Gq({defaultColor:e,rfId:t}),[e,t]),(r,i)=>!(r.length!==i.length||r.some((a,s)=>a.id!==i[s].id)));return oe.createElement("defs",null,n.map(r=>oe.createElement(Uq,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};MC.displayName="MarkerDefinitions";var Hq=G.memo(MC);const Vq=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),LC=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:i,noPanClassName:a,onEdgeContextMenu:s,onEdgeMouseEnter:o,onEdgeMouseMove:c,onEdgeMouseLeave:d,onEdgeClick:f,onEdgeDoubleClick:p,onReconnect:m,onReconnectStart:g,onReconnectEnd:b,reconnectRadius:y,children:N,disableKeyboardA11y:v})=>{const{edgesFocusable:_,edgesUpdatable:x,elementsSelectable:w,width:E,height:P,connectionMode:A,nodeInternals:T,onError:L}=Tt(Vq,wn),k=zq(t,T,n);return E?oe.createElement(oe.Fragment,null,k.map(({level:C,edges:O,isMaxLevel:F})=>oe.createElement("svg",{key:C,style:{zIndex:C},width:E,height:P,className:"react-flow__edges react-flow__container"},F&&oe.createElement(Hq,{defaultColor:e,rfId:r}),oe.createElement("g",null,O.map(M=>{const[D,$,V]=bN(T.get(M.source)),[K,H,q]=bN(T.get(M.target));if(!V||!q)return null;let I=M.type||"default";i[I]||(L==null||L("011",$i.error011(I)),I="default");const z=i[I]||i.default,W=A===Fs.Strict?H.target:(H.target??[]).concat(H.source??[]),Q=xN($.source,M.sourceHandle),ee=xN(W,M.targetHandle),Y=(Q==null?void 0:Q.position)||Te.Bottom,U=(ee==null?void 0:ee.position)||Te.Top,J=!!(M.focusable||_&&typeof M.focusable>"u"),te=M.reconnectable||M.updatable,X=typeof m<"u"&&(te||x&&typeof te>"u");if(!Q||!ee)return L==null||L("008",$i.error008(Q,M)),null;const{sourceX:ne,sourceY:ue,targetX:se,targetY:ce}=Mq(D,Q,Y,K,ee,U);return oe.createElement(z,{key:M.id,id:M.id,className:Tn([M.className,a]),type:I,data:M.data,selected:!!M.selected,animated:!!M.animated,hidden:!!M.hidden,label:M.label,labelStyle:M.labelStyle,labelShowBg:M.labelShowBg,labelBgStyle:M.labelBgStyle,labelBgPadding:M.labelBgPadding,labelBgBorderRadius:M.labelBgBorderRadius,style:M.style,source:M.source,target:M.target,sourceHandleId:M.sourceHandle,targetHandleId:M.targetHandle,markerEnd:M.markerEnd,markerStart:M.markerStart,sourceX:ne,sourceY:ue,targetX:se,targetY:ce,sourcePosition:Y,targetPosition:U,elementsSelectable:w,onContextMenu:s,onMouseEnter:o,onMouseMove:c,onMouseLeave:d,onClick:f,onEdgeDoubleClick:p,onReconnect:m,onReconnectStart:g,onReconnectEnd:b,reconnectRadius:y,rfId:r,ariaLabel:M.ariaLabel,isFocusable:J,isReconnectable:X,pathOptions:"pathOptions"in M?M.pathOptions:void 0,interactionWidth:M.interactionWidth,disableKeyboardA11y:v})})))),N):null};LC.displayName="EdgeRenderer";var Wq=G.memo(LC);const Kq=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Yq({children:e}){const t=Tt(Kq);return oe.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function Xq(e){const t=Gw(),n=G.useRef(!1);G.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Qq={[Te.Left]:Te.Right,[Te.Right]:Te.Left,[Te.Top]:Te.Bottom,[Te.Bottom]:Te.Top},DC=({nodeId:e,handleType:t,style:n,type:r=wa.Bezier,CustomComponent:i,connectionStatus:a})=>{var P,A,T;const{fromNode:s,handleId:o,toX:c,toY:d,connectionMode:f}=Tt(G.useCallback(L=>({fromNode:L.nodeInternals.get(e),handleId:L.connectionHandleId,toX:(L.connectionPosition.x-L.transform[0])/L.transform[2],toY:(L.connectionPosition.y-L.transform[1])/L.transform[2],connectionMode:L.connectionMode}),[e]),wn),p=(P=s==null?void 0:s[Rt])==null?void 0:P.handleBounds;let m=p==null?void 0:p[t];if(f===Fs.Loose&&(m=m||(p==null?void 0:p[t==="source"?"target":"source"])),!s||!m)return null;const g=o?m.find(L=>L.id===o):m[0],b=g?g.x+g.width/2:(s.width??0)/2,y=g?g.y+g.height/2:s.height??0,N=(((A=s.positionAbsolute)==null?void 0:A.x)??0)+b,v=(((T=s.positionAbsolute)==null?void 0:T.y)??0)+y,_=g==null?void 0:g.position,x=_?Qq[_]:null;if(!_||!x)return null;if(i)return oe.createElement(i,{connectionLineType:r,connectionLineStyle:n,fromNode:s,fromHandle:g,fromX:N,fromY:v,toX:c,toY:d,fromPosition:_,toPosition:x,connectionStatus:a});let w="";const E={sourceX:N,sourceY:v,sourcePosition:_,targetX:c,targetY:d,targetPosition:x};return r===wa.Bezier?[w]=aC(E):r===wa.Step?[w]=r2({...E,borderRadius:0}):r===wa.SmoothStep?[w]=r2(E):r===wa.SimpleBezier?[w]=iC(E):w=`M${N},${v} ${c},${d}`,oe.createElement("path",{d:w,fill:"none",className:"react-flow__connection-path",style:n})};DC.displayName="ConnectionLine";const Zq=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function Jq({containerStyle:e,style:t,type:n,component:r}){const{nodeId:i,handleType:a,nodesConnectable:s,width:o,height:c,connectionStatus:d}=Tt(Zq,wn);return!(i&&a&&o&&s)?null:oe.createElement("svg",{style:e,width:o,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},oe.createElement("g",{className:Tn(["react-flow__connection",d])},oe.createElement(DC,{nodeId:i,handleType:a,style:t,type:n,CustomComponent:r,connectionStatus:d})))}function _N(e,t){return G.useRef(null),rn(),G.useMemo(()=>t(e),[e])}const FC=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:i,onInit:a,onNodeClick:s,onEdgeClick:o,onNodeDoubleClick:c,onEdgeDoubleClick:d,onNodeMouseEnter:f,onNodeMouseMove:p,onNodeMouseLeave:m,onNodeContextMenu:g,onSelectionContextMenu:b,onSelectionStart:y,onSelectionEnd:N,connectionLineType:v,connectionLineStyle:_,connectionLineComponent:x,connectionLineContainerStyle:w,selectionKeyCode:E,selectionOnDrag:P,selectionMode:A,multiSelectionKeyCode:T,panActivationKeyCode:L,zoomActivationKeyCode:k,deleteKeyCode:C,onlyRenderVisibleElements:O,elementsSelectable:F,selectNodesOnDrag:M,defaultViewport:D,translateExtent:$,minZoom:V,maxZoom:K,preventScrolling:H,defaultMarkerColor:q,zoomOnScroll:I,zoomOnPinch:z,panOnScroll:W,panOnScrollSpeed:Q,panOnScrollMode:ee,zoomOnDoubleClick:Y,panOnDrag:U,onPaneClick:J,onPaneMouseEnter:te,onPaneMouseMove:X,onPaneMouseLeave:ne,onPaneScroll:ue,onPaneContextMenu:se,onEdgeContextMenu:ce,onEdgeMouseEnter:de,onEdgeMouseMove:Oe,onEdgeMouseLeave:ge,onReconnect:re,onReconnectStart:he,onReconnectEnd:ye,reconnectRadius:we,noDragClassName:me,noWheelClassName:je,noPanClassName:Ce,elevateEdgesOnSelect:Ae,disableKeyboardA11y:vt,nodeOrigin:Pt,nodeExtent:qe,rfId:Un})=>{const et=_N(e,jq),it=_N(t,Iq);return Xq(a),oe.createElement(Eq,{onPaneClick:J,onPaneMouseEnter:te,onPaneMouseMove:X,onPaneMouseLeave:ne,onPaneContextMenu:se,onPaneScroll:ue,deleteKeyCode:C,selectionKeyCode:E,selectionOnDrag:P,selectionMode:A,onSelectionStart:y,onSelectionEnd:N,multiSelectionKeyCode:T,panActivationKeyCode:L,zoomActivationKeyCode:k,elementsSelectable:F,onMove:n,onMoveStart:r,onMoveEnd:i,zoomOnScroll:I,zoomOnPinch:z,zoomOnDoubleClick:Y,panOnScroll:W,panOnScrollSpeed:Q,panOnScrollMode:ee,panOnDrag:U,defaultViewport:D,translateExtent:$,minZoom:V,maxZoom:K,onSelectionContextMenu:b,preventScrolling:H,noDragClassName:me,noWheelClassName:je,noPanClassName:Ce,disableKeyboardA11y:vt},oe.createElement(Yq,null,oe.createElement(Wq,{edgeTypes:it,onEdgeClick:o,onEdgeDoubleClick:d,onlyRenderVisibleElements:O,onEdgeContextMenu:ce,onEdgeMouseEnter:de,onEdgeMouseMove:Oe,onEdgeMouseLeave:ge,onReconnect:re,onReconnectStart:he,onReconnectEnd:ye,reconnectRadius:we,defaultMarkerColor:q,noPanClassName:Ce,elevateEdgesOnSelect:!!Ae,disableKeyboardA11y:vt,rfId:Un},oe.createElement(Jq,{style:_,type:v,component:x,containerStyle:w})),oe.createElement("div",{className:"react-flow__edgelabel-renderer"}),oe.createElement(Oq,{nodeTypes:et,onNodeClick:s,onNodeDoubleClick:c,onNodeMouseEnter:f,onNodeMouseMove:p,onNodeMouseLeave:m,onNodeContextMenu:g,selectNodesOnDrag:M,onlyRenderVisibleElements:O,noPanClassName:Ce,noDragClassName:me,disableKeyboardA11y:vt,nodeOrigin:Pt,nodeExtent:qe,rfId:Un})))};FC.displayName="GraphView";var e$=G.memo(FC);const l2=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],da={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:l2,nodeExtent:l2,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Fs.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:TB,isValidConnection:void 0},t$=()=>$L((e,t)=>({...da,setNodes:n=>{const{nodeInternals:r,nodeOrigin:i,elevateNodesOnSelect:a}=t();e({nodeInternals:Fg(n,r,i,a)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(i=>({...r,...i}))})},setDefaultNodesAndEdges:(n,r)=>{const i=typeof n<"u",a=typeof r<"u",s=i?Fg(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:s,edges:a?r:[],hasDefaultNodes:i,hasDefaultEdges:a})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:i,fitViewOnInit:a,fitViewOnInitDone:s,fitViewOnInitOptions:o,domNode:c,nodeOrigin:d}=t(),f=c==null?void 0:c.querySelector(".react-flow__viewport");if(!f)return;const p=window.getComputedStyle(f),{m22:m}=new window.DOMMatrixReadOnly(p.transform),g=n.reduce((y,N)=>{const v=i.get(N.id);if(v!=null&&v.hidden)i.set(v.id,{...v,[Rt]:{...v[Rt],handleBounds:void 0}});else if(v){const _=Iw(N.nodeElement);!!(_.width&&_.height&&(v.width!==_.width||v.height!==_.height||N.forceUpdate))&&(i.set(v.id,{...v,[Rt]:{...v[Rt],handleBounds:{source:mN(".source",N.nodeElement,m,d),target:mN(".target",N.nodeElement,m,d)}},..._}),y.push({id:v.id,type:"dimensions",dimensions:_}))}return y},[]);SC(i,d);const b=s||a&&!s&&EC(t,{initial:!0,...o});e({nodeInternals:new Map(i),fitViewOnInitDone:b}),(g==null?void 0:g.length)>0&&(r==null||r(g))},updateNodePositions:(n,r=!0,i=!1)=>{const{triggerNodeChanges:a}=t(),s=n.map(o=>{const c={id:o.id,type:"position",dragging:i};return r&&(c.positionAbsolute=o.positionAbsolute,c.position=o.position),c});a(s)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:i,hasDefaultNodes:a,nodeOrigin:s,getNodes:o,elevateNodesOnSelect:c}=t();if(n!=null&&n.length){if(a){const d=jC(n,o()),f=Fg(d,i,s,c);e({nodeInternals:f})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:i,getNodes:a}=t();let s,o=null;r?s=n.map(c=>ya(c,!0)):(s=Do(a(),n),o=Do(i,[])),wf({changedNodes:s,changedEdges:o,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:i,getNodes:a}=t();let s,o=null;r?s=n.map(c=>ya(c,!0)):(s=Do(i,n),o=Do(a(),[])),wf({changedNodes:o,changedEdges:s,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:i,getNodes:a}=t(),s=n||a(),o=r||i,c=s.map(f=>(f.selected=!1,ya(f.id,!1))),d=o.map(f=>ya(f.id,!1));wf({changedNodes:c,changedEdges:d,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:i}=t();r==null||r.scaleExtent([n,i]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:i}=t();r==null||r.scaleExtent([i,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),a=r().filter(o=>o.selected).map(o=>ya(o.id,!1)),s=n.filter(o=>o.selected).map(o=>ya(o.id,!1));wf({changedNodes:a,changedEdges:s,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(i=>{i.positionAbsolute=Mw(i.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:i,height:a,d3Zoom:s,d3Selection:o,translateExtent:c}=t();if(!s||!o||!n.x&&!n.y)return!1;const d=Ma.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),f=[[0,0],[i,a]],p=s==null?void 0:s.constrain()(d,f,c);return s.transform(o,p),r[0]!==p.x||r[1]!==p.y||r[2]!==p.k},cancelConnection:()=>e({connectionNodeId:da.connectionNodeId,connectionHandleId:da.connectionHandleId,connectionHandleType:da.connectionHandleType,connectionStatus:da.connectionStatus,connectionStartHandle:da.connectionStartHandle,connectionEndHandle:da.connectionEndHandle}),reset:()=>e({...da})}),Object.is),Vw=({children:e})=>{const t=G.useRef(null);return t.current||(t.current=t$()),oe.createElement(wB,{value:t.current},e)};Vw.displayName="ReactFlowProvider";const zC=({children:e})=>G.useContext(gp)?oe.createElement(oe.Fragment,null,e):oe.createElement(Vw,null,e);zC.displayName="ReactFlowWrapper";const n$={input:vC,default:s2,output:xC,group:Uw},r$={default:Ph,straight:zw,step:Fw,smoothstep:vp,simplebezier:Dw},i$=[0,0],a$=[15,15],s$={x:0,y:0,zoom:1},o$={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},BC=G.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:a=n$,edgeTypes:s=r$,onNodeClick:o,onEdgeClick:c,onInit:d,onMove:f,onMoveStart:p,onMoveEnd:m,onConnect:g,onConnectStart:b,onConnectEnd:y,onClickConnectStart:N,onClickConnectEnd:v,onNodeMouseEnter:_,onNodeMouseMove:x,onNodeMouseLeave:w,onNodeContextMenu:E,onNodeDoubleClick:P,onNodeDragStart:A,onNodeDrag:T,onNodeDragStop:L,onNodesDelete:k,onEdgesDelete:C,onSelectionChange:O,onSelectionDragStart:F,onSelectionDrag:M,onSelectionDragStop:D,onSelectionContextMenu:$,onSelectionStart:V,onSelectionEnd:K,connectionMode:H=Fs.Strict,connectionLineType:q=wa.Bezier,connectionLineStyle:I,connectionLineComponent:z,connectionLineContainerStyle:W,deleteKeyCode:Q="Backspace",selectionKeyCode:ee="Shift",selectionOnDrag:Y=!1,selectionMode:U=Nu.Full,panActivationKeyCode:J="Space",multiSelectionKeyCode:te=Oh()?"Meta":"Control",zoomActivationKeyCode:X=Oh()?"Meta":"Control",snapToGrid:ne=!1,snapGrid:ue=a$,onlyRenderVisibleElements:se=!1,selectNodesOnDrag:ce=!0,nodesDraggable:de,nodesConnectable:Oe,nodesFocusable:ge,nodeOrigin:re=i$,edgesFocusable:he,edgesUpdatable:ye,elementsSelectable:we,defaultViewport:me=s$,minZoom:je=.5,maxZoom:Ce=2,translateExtent:Ae=l2,preventScrolling:vt=!0,nodeExtent:Pt,defaultMarkerColor:qe="#b1b1b7",zoomOnScroll:Un=!0,zoomOnPinch:et=!0,panOnScroll:it=!1,panOnScrollSpeed:dn=.5,panOnScrollMode:Xt=ks.Free,zoomOnDoubleClick:an=!0,panOnDrag:pi=!0,onPaneClick:wr,onPaneMouseEnter:Gn,onPaneMouseMove:rs,onPaneMouseLeave:Il,onPaneScroll:is,onPaneContextMenu:Ml,children:Ku,onEdgeContextMenu:mi,onEdgeDoubleClick:Yu,onEdgeMouseEnter:Xu,onEdgeMouseMove:Pm,onEdgeMouseLeave:Ll,onEdgeUpdate:Qu,onEdgeUpdateStart:Zu,onEdgeUpdateEnd:Am,onReconnect:Rm,onReconnectStart:Im,onReconnectEnd:Ju,reconnectRadius:Dl=10,edgeUpdaterRadius:Mm=10,onNodesChange:Lm,onEdgesChange:no,noDragClassName:Dm="nodrag",noWheelClassName:Fm="nowheel",noPanClassName:ed="nopan",fitView:zm=!1,fitViewOptions:Bm,connectOnClick:qm=!0,attributionPosition:$m,proOptions:Um,defaultEdgeOptions:Gm,elevateNodesOnSelect:Hm=!0,elevateEdgesOnSelect:Vm=!1,disableKeyboardA11y:td=!1,autoPanOnConnect:Wm=!0,autoPanOnNodeDrag:Km=!0,connectionRadius:Fl=20,isValidConnection:as,onError:zl,style:Bl,id:nd,nodeDragThreshold:ql,...Zi},Gr)=>{const at=nd||"1";return oe.createElement("div",{...Zi,style:{...Bl,...o$},ref:Gr,className:Tn(["react-flow",i]),"data-testid":"rf__wrapper",id:nd},oe.createElement(zC,null,oe.createElement(e$,{onInit:d,onMove:f,onMoveStart:p,onMoveEnd:m,onNodeClick:o,onEdgeClick:c,onNodeMouseEnter:_,onNodeMouseMove:x,onNodeMouseLeave:w,onNodeContextMenu:E,onNodeDoubleClick:P,nodeTypes:a,edgeTypes:s,connectionLineType:q,connectionLineStyle:I,connectionLineComponent:z,connectionLineContainerStyle:W,selectionKeyCode:ee,selectionOnDrag:Y,selectionMode:U,deleteKeyCode:Q,multiSelectionKeyCode:te,panActivationKeyCode:J,zoomActivationKeyCode:X,onlyRenderVisibleElements:se,selectNodesOnDrag:ce,defaultViewport:me,translateExtent:Ae,minZoom:je,maxZoom:Ce,preventScrolling:vt,zoomOnScroll:Un,zoomOnPinch:et,zoomOnDoubleClick:an,panOnScroll:it,panOnScrollSpeed:dn,panOnScrollMode:Xt,panOnDrag:pi,onPaneClick:wr,onPaneMouseEnter:Gn,onPaneMouseMove:rs,onPaneMouseLeave:Il,onPaneScroll:is,onPaneContextMenu:Ml,onSelectionContextMenu:$,onSelectionStart:V,onSelectionEnd:K,onEdgeContextMenu:mi,onEdgeDoubleClick:Yu,onEdgeMouseEnter:Xu,onEdgeMouseMove:Pm,onEdgeMouseLeave:Ll,onReconnect:Rm??Qu,onReconnectStart:Im??Zu,onReconnectEnd:Ju??Am,reconnectRadius:Dl??Mm,defaultMarkerColor:qe,noDragClassName:Dm,noWheelClassName:Fm,noPanClassName:ed,elevateEdgesOnSelect:Vm,rfId:at,disableKeyboardA11y:td,nodeOrigin:re,nodeExtent:Pt}),oe.createElement(QB,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:g,onConnectStart:b,onConnectEnd:y,onClickConnectStart:N,onClickConnectEnd:v,nodesDraggable:de,nodesConnectable:Oe,nodesFocusable:ge,edgesFocusable:he,edgesUpdatable:ye,elementsSelectable:we,elevateNodesOnSelect:Hm,minZoom:je,maxZoom:Ce,nodeExtent:Pt,onNodesChange:Lm,onEdgesChange:no,snapToGrid:ne,snapGrid:ue,connectionMode:H,translateExtent:Ae,connectOnClick:qm,defaultEdgeOptions:Gm,fitView:zm,fitViewOptions:Bm,onNodesDelete:k,onEdgesDelete:C,onNodeDragStart:A,onNodeDrag:T,onNodeDragStop:L,onSelectionDrag:M,onSelectionDragStart:F,onSelectionDragStop:D,noPanClassName:ed,nodeOrigin:re,rfId:at,autoPanOnConnect:Wm,autoPanOnNodeDrag:Km,onError:zl,connectionRadius:Fl,isValidConnection:as,nodeDragThreshold:ql}),oe.createElement(YB,{onSelectionChange:O}),Ku,oe.createElement(NB,{proOptions:Um,position:$m}),oe.createElement(nq,{rfId:at,disableKeyboardA11y:td})))});BC.displayName="ReactFlow";function qC(e){return t=>{const[n,r]=G.useState(t),i=G.useCallback(a=>r(s=>e(a,s)),[]);return[n,r,i]}}const l$=qC(jC),c$=qC(gq);function u$(){return oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},oe.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function d$(){return oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},oe.createElement("path",{d:"M0 0h32v4.2H0z"}))}function f$(){return oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},oe.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function h$(){return oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},oe.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function p$(){return oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},oe.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Lc=({children:e,className:t,...n})=>oe.createElement("button",{type:"button",className:Tn(["react-flow__controls-button",t]),...n},e);Lc.displayName="ControlButton";const m$=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),$C=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:a,onZoomOut:s,onFitView:o,onInteractiveChange:c,className:d,children:f,position:p="bottom-left"})=>{const m=rn(),[g,b]=G.useState(!1),{isInteractive:y,minZoomReached:N,maxZoomReached:v}=Tt(m$,wn),{zoomIn:_,zoomOut:x,fitView:w}=Gw();if(G.useEffect(()=>{b(!0)},[]),!g)return null;const E=()=>{_(),a==null||a()},P=()=>{x(),s==null||s()},A=()=>{w(i),o==null||o()},T=()=>{m.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),c==null||c(!y)};return oe.createElement(Q7,{className:Tn(["react-flow__controls",d]),position:p,style:e,"data-testid":"rf__controls"},t&&oe.createElement(oe.Fragment,null,oe.createElement(Lc,{onClick:E,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:v},oe.createElement(u$,null)),oe.createElement(Lc,{onClick:P,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:N},oe.createElement(d$,null))),n&&oe.createElement(Lc,{className:"react-flow__controls-fitview",onClick:A,title:"fit view","aria-label":"fit view"},oe.createElement(f$,null)),r&&oe.createElement(Lc,{className:"react-flow__controls-interactive",onClick:T,title:"toggle interactivity","aria-label":"toggle interactivity"},y?oe.createElement(p$,null):oe.createElement(h$,null)),f)};$C.displayName="Controls";var g$=G.memo($C),Dr;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Dr||(Dr={}));function v$({color:e,dimensions:t,lineWidth:n}){return oe.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function y$({color:e,radius:t}){return oe.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const x$={[Dr.Dots]:"#91919a",[Dr.Lines]:"#eee",[Dr.Cross]:"#e2e2e2"},b$={[Dr.Dots]:1,[Dr.Lines]:1,[Dr.Cross]:6},w$=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function UC({id:e,variant:t=Dr.Dots,gap:n=20,size:r,lineWidth:i=1,offset:a=2,color:s,style:o,className:c}){const d=G.useRef(null),{transform:f,patternId:p}=Tt(w$,wn),m=s||x$[t],g=r||b$[t],b=t===Dr.Dots,y=t===Dr.Cross,N=Array.isArray(n)?n:[n,n],v=[N[0]*f[2]||1,N[1]*f[2]||1],_=g*f[2],x=y?[_,_]:v,w=b?[_/a,_/a]:[x[0]/a,x[1]/a];return oe.createElement("svg",{className:Tn(["react-flow__background",c]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:d,"data-testid":"rf__background"},oe.createElement("pattern",{id:p+e,x:f[0]%v[0],y:f[1]%v[1],width:v[0],height:v[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${w[0]},-${w[1]})`},b?oe.createElement(y$,{color:m,radius:_/a}):oe.createElement(v$,{dimensions:x,color:m,lineWidth:i})),oe.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${p+e})`}))}UC.displayName="Background";var _$=G.memo(UC);function Ww(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function N$(){this.__data__=[],this.size=0}var S$=N$,$g,NN;function vl(){if(NN)return $g;NN=1;function e(t,n){return t===n||t!==t&&n!==n}return $g=e,$g}var E$=vl();function k$(e,t){for(var n=e.length;n--;)if(E$(e[n][0],t))return n;return-1}var yp=k$,j$=yp,C$=Array.prototype,T$=C$.splice;function O$(e){var t=this.__data__,n=j$(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():T$.call(t,n,1),--this.size,!0}var P$=O$,A$=yp;function R$(e){var t=this.__data__,n=A$(t,e);return n<0?void 0:t[n][1]}var I$=R$,M$=yp;function L$(e){return M$(this.__data__,e)>-1}var D$=L$,F$=yp;function z$(e,t){var n=this.__data__,r=F$(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var B$=z$,q$=S$,$$=P$,U$=I$,G$=D$,H$=B$;function yl(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}yl.prototype.clear=q$;yl.prototype.delete=$$;yl.prototype.get=U$;yl.prototype.has=G$;yl.prototype.set=H$;var xp=yl,V$=xp;function W$(){this.__data__=new V$,this.size=0}var K$=W$;function Y$(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var X$=Y$;function Q$(e){return this.__data__.get(e)}var Z$=Q$;function J$(e){return this.__data__.has(e)}var eU=J$,Ug,SN;function GC(){if(SN)return Ug;SN=1;var e=typeof En=="object"&&En&&En.Object===Object&&En;return Ug=e,Ug}var Gg,EN;function qr(){if(EN)return Gg;EN=1;var e=GC(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return Gg=n,Gg}var tU=qr(),nU=tU.Symbol,xl=nU,kN=xl,HC=Object.prototype,rU=HC.hasOwnProperty,iU=HC.toString,wc=kN?kN.toStringTag:void 0;function aU(e){var t=rU.call(e,wc),n=e[wc];try{e[wc]=void 0;var r=!0}catch{}var i=iU.call(e);return r&&(t?e[wc]=n:delete e[wc]),i}var sU=aU,oU=Object.prototype,lU=oU.toString;function cU(e){return lU.call(e)}var uU=cU,jN=xl,dU=sU,fU=uU,hU="[object Null]",pU="[object Undefined]",CN=jN?jN.toStringTag:void 0;function mU(e){return e==null?e===void 0?pU:hU:CN&&CN in Object(e)?dU(e):fU(e)}var $s=mU,Hg,TN;function xr(){if(TN)return Hg;TN=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return Hg=e,Hg}var Vg,ON;function Fu(){if(ON)return Vg;ON=1;var e=$s,t=xr(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function s(o){if(!t(o))return!1;var c=e(o);return c==r||c==i||c==n||c==a}return Vg=s,Vg}var gU=qr(),vU=gU["__core-js_shared__"],yU=vU,Wg=yU,PN=function(){var e=/[^.]+$/.exec(Wg&&Wg.keys&&Wg.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function xU(e){return!!PN&&PN in e}var bU=xU,wU=Function.prototype,_U=wU.toString;function NU(e){if(e!=null){try{return _U.call(e)}catch{}try{return e+""}catch{}}return""}var VC=NU,SU=Fu(),EU=bU,kU=xr(),jU=VC,CU=/[\\^$.*+?()[\]{}|]/g,TU=/^\[object .+?Constructor\]$/,OU=Function.prototype,PU=Object.prototype,AU=OU.toString,RU=PU.hasOwnProperty,IU=RegExp("^"+AU.call(RU).replace(CU,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function MU(e){if(!kU(e)||EU(e))return!1;var t=SU(e)?IU:TU;return t.test(jU(e))}var LU=MU;function DU(e,t){return e==null?void 0:e[t]}var FU=DU,zU=LU,BU=FU;function qU(e,t){var n=BU(e,t);return zU(n)?n:void 0}var Us=qU,$U=Us,UU=qr(),GU=$U(UU,"Map"),Kw=GU,HU=Us,VU=HU(Object,"create"),bp=VU,AN=bp;function WU(){this.__data__=AN?AN(null):{},this.size=0}var KU=WU;function YU(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var XU=YU,QU=bp,ZU="__lodash_hash_undefined__",JU=Object.prototype,eG=JU.hasOwnProperty;function tG(e){var t=this.__data__;if(QU){var n=t[e];return n===ZU?void 0:n}return eG.call(t,e)?t[e]:void 0}var nG=tG,rG=bp,iG=Object.prototype,aG=iG.hasOwnProperty;function sG(e){var t=this.__data__;return rG?t[e]!==void 0:aG.call(t,e)}var oG=sG,lG=bp,cG="__lodash_hash_undefined__";function uG(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=lG&&t===void 0?cG:t,this}var dG=uG,fG=KU,hG=XU,pG=nG,mG=oG,gG=dG;function bl(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}bl.prototype.clear=fG;bl.prototype.delete=hG;bl.prototype.get=pG;bl.prototype.has=mG;bl.prototype.set=gG;var vG=bl,RN=vG,yG=xp,xG=Kw;function bG(){this.size=0,this.__data__={hash:new RN,map:new(xG||yG),string:new RN}}var wG=bG;function _G(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var NG=_G,SG=NG;function EG(e,t){var n=e.__data__;return SG(t)?n[typeof t=="string"?"string":"hash"]:n.map}var wp=EG,kG=wp;function jG(e){var t=kG(this,e).delete(e);return this.size-=t?1:0,t}var CG=jG,TG=wp;function OG(e){return TG(this,e).get(e)}var PG=OG,AG=wp;function RG(e){return AG(this,e).has(e)}var IG=RG,MG=wp;function LG(e,t){var n=MG(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var DG=LG,FG=wG,zG=CG,BG=PG,qG=IG,$G=DG;function wl(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}wl.prototype.clear=FG;wl.prototype.delete=zG;wl.prototype.get=BG;wl.prototype.has=qG;wl.prototype.set=$G;var Yw=wl,UG=xp,GG=Kw,HG=Yw,VG=200;function WG(e,t){var n=this.__data__;if(n instanceof UG){var r=n.__data__;if(!GG||r.length<VG-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new HG(r)}return n.set(e,t),this.size=n.size,this}var KG=WG,YG=xp,XG=K$,QG=X$,ZG=Z$,JG=eU,eH=KG;function _l(e){var t=this.__data__=new YG(e);this.size=t.size}_l.prototype.clear=XG;_l.prototype.delete=QG;_l.prototype.get=ZG;_l.prototype.has=JG;_l.prototype.set=eH;var _p=_l,Kg,IN;function Xw(){if(IN)return Kg;IN=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i&&n(t[r],r,t)!==!1;);return t}return Kg=e,Kg}var Yg,MN;function WC(){if(MN)return Yg;MN=1;var e=Us,t=function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}}();return Yg=t,Yg}var Xg,LN;function Np(){if(LN)return Xg;LN=1;var e=WC();function t(n,r,i){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return Xg=t,Xg}var Qg,DN;function Sp(){if(DN)return Qg;DN=1;var e=Np(),t=vl(),n=Object.prototype,r=n.hasOwnProperty;function i(a,s,o){var c=a[s];(!(r.call(a,s)&&t(c,o))||o===void 0&&!(s in a))&&e(a,s,o)}return Qg=i,Qg}var Zg,FN;function zu(){if(FN)return Zg;FN=1;var e=Sp(),t=Np();function n(r,i,a,s){var o=!a;a||(a={});for(var c=-1,d=i.length;++c<d;){var f=i[c],p=s?s(a[f],r[f],f,a,r):void 0;p===void 0&&(p=r[f]),o?t(a,f,p):e(a,f,p)}return a}return Zg=n,Zg}var Jg,zN;function tH(){if(zN)return Jg;zN=1;function e(t,n){for(var r=-1,i=Array(t);++r<t;)i[r]=n(r);return i}return Jg=e,Jg}function nH(e){return e!=null&&typeof e=="object"}var di=nH,ev,BN;function rH(){if(BN)return ev;BN=1;var e=$s,t=di,n="[object Arguments]";function r(i){return t(i)&&e(i)==n}return ev=r,ev}var tv,qN;function Bu(){if(qN)return tv;qN=1;var e=rH(),t=di,n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,a=e(function(){return arguments}())?e:function(s){return t(s)&&r.call(s,"callee")&&!i.call(s,"callee")};return tv=a,tv}var nv,$N;function $t(){if($N)return nv;$N=1;var e=Array.isArray;return nv=e,nv}var Rh={exports:{}};function iH(){return!1}var aH=iH;Rh.exports;(function(e,t){var n=qr(),r=aH,i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===i,o=s?n.Buffer:void 0,c=o?o.isBuffer:void 0,d=c||r;e.exports=d})(Rh,Rh.exports);var Nl=Rh.exports,rv,UN;function Ep(){if(UN)return rv;UN=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,i){var a=typeof r;return i=i??e,!!i&&(a=="number"||a!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<i}return rv=n,rv}var iv,GN;function Qw(){if(GN)return iv;GN=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return iv=t,iv}var sH=$s,oH=Qw(),lH=di,cH="[object Arguments]",uH="[object Array]",dH="[object Boolean]",fH="[object Date]",hH="[object Error]",pH="[object Function]",mH="[object Map]",gH="[object Number]",vH="[object Object]",yH="[object RegExp]",xH="[object Set]",bH="[object String]",wH="[object WeakMap]",_H="[object ArrayBuffer]",NH="[object DataView]",SH="[object Float32Array]",EH="[object Float64Array]",kH="[object Int8Array]",jH="[object Int16Array]",CH="[object Int32Array]",TH="[object Uint8Array]",OH="[object Uint8ClampedArray]",PH="[object Uint16Array]",AH="[object Uint32Array]",mt={};mt[SH]=mt[EH]=mt[kH]=mt[jH]=mt[CH]=mt[TH]=mt[OH]=mt[PH]=mt[AH]=!0;mt[cH]=mt[uH]=mt[_H]=mt[dH]=mt[NH]=mt[fH]=mt[hH]=mt[pH]=mt[mH]=mt[gH]=mt[vH]=mt[yH]=mt[xH]=mt[bH]=mt[wH]=!1;function RH(e){return lH(e)&&oH(e.length)&&!!mt[sH(e)]}var IH=RH,av,HN;function kp(){if(HN)return av;HN=1;function e(t){return function(n){return t(n)}}return av=e,av}var Ih={exports:{}};Ih.exports;(function(e,t){var n=GC(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===r,s=a&&n.process,o=function(){try{var c=i&&i.require&&i.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}}();e.exports=o})(Ih,Ih.exports);var Zw=Ih.exports,MH=IH,LH=kp(),VN=Zw,WN=VN&&VN.isTypedArray,DH=WN?LH(WN):MH,qu=DH,sv,KN;function KC(){if(KN)return sv;KN=1;var e=tH(),t=Bu(),n=$t(),r=Nl,i=Ep(),a=qu,s=Object.prototype,o=s.hasOwnProperty;function c(d,f){var p=n(d),m=!p&&t(d),g=!p&&!m&&r(d),b=!p&&!m&&!g&&a(d),y=p||m||g||b,N=y?e(d.length,String):[],v=N.length;for(var _ in d)(f||o.call(d,_))&&!(y&&(_=="length"||g&&(_=="offset"||_=="parent")||b&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||i(_,v)))&&N.push(_);return N}return sv=c,sv}var ov,YN;function jp(){if(YN)return ov;YN=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||e;return n===i}return ov=t,ov}var lv,XN;function YC(){if(XN)return lv;XN=1;function e(t,n){return function(r){return t(n(r))}}return lv=e,lv}var cv,QN;function FH(){if(QN)return cv;QN=1;var e=YC(),t=e(Object.keys,Object);return cv=t,cv}var uv,ZN;function Jw(){if(ZN)return uv;ZN=1;var e=jp(),t=FH(),n=Object.prototype,r=n.hasOwnProperty;function i(a){if(!e(a))return t(a);var s=[];for(var o in Object(a))r.call(a,o)&&o!="constructor"&&s.push(o);return s}return uv=i,uv}var dv,JN;function Vi(){if(JN)return dv;JN=1;var e=Fu(),t=Qw();function n(r){return r!=null&&t(r.length)&&!e(r)}return dv=n,dv}var fv,e6;function Ya(){if(e6)return fv;e6=1;var e=KC(),t=Jw(),n=Vi();function r(i){return n(i)?e(i):t(i)}return fv=r,fv}var hv,t6;function zH(){if(t6)return hv;t6=1;var e=zu(),t=Ya();function n(r,i){return r&&e(i,t(i),r)}return hv=n,hv}var pv,n6;function BH(){if(n6)return pv;n6=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return pv=e,pv}var mv,r6;function qH(){if(r6)return mv;r6=1;var e=xr(),t=jp(),n=BH(),r=Object.prototype,i=r.hasOwnProperty;function a(s){if(!e(s))return n(s);var o=t(s),c=[];for(var d in s)d=="constructor"&&(o||!i.call(s,d))||c.push(d);return c}return mv=a,mv}var gv,i6;function Gs(){if(i6)return gv;i6=1;var e=KC(),t=qH(),n=Vi();function r(i){return n(i)?e(i,!0):t(i)}return gv=r,gv}var vv,a6;function $H(){if(a6)return vv;a6=1;var e=zu(),t=Gs();function n(r,i){return r&&e(i,t(i),r)}return vv=n,vv}var Dc={exports:{}};Dc.exports;var s6;function XC(){return s6||(s6=1,function(e,t){var n=qr(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===r,s=a?n.Buffer:void 0,o=s?s.allocUnsafe:void 0;function c(d,f){if(f)return d.slice();var p=d.length,m=o?o(p):new d.constructor(p);return d.copy(m),m}e.exports=c}(Dc,Dc.exports)),Dc.exports}var yv,o6;function QC(){if(o6)return yv;o6=1;function e(t,n){var r=-1,i=t.length;for(n||(n=Array(i));++r<i;)n[r]=t[r];return n}return yv=e,yv}var xv,l6;function ZC(){if(l6)return xv;l6=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,a=0,s=[];++r<i;){var o=t[r];n(o,r,t)&&(s[a++]=o)}return s}return xv=e,xv}var bv,c6;function JC(){if(c6)return bv;c6=1;function e(){return[]}return bv=e,bv}var wv,u6;function e5(){if(u6)return wv;u6=1;var e=ZC(),t=JC(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(s){return s==null?[]:(s=Object(s),e(i(s),function(o){return r.call(s,o)}))}:t;return wv=a,wv}var _v,d6;function UH(){if(d6)return _v;d6=1;var e=zu(),t=e5();function n(r,i){return e(r,t(r),i)}return _v=n,_v}var Nv,f6;function t5(){if(f6)return Nv;f6=1;function e(t,n){for(var r=-1,i=n.length,a=t.length;++r<i;)t[a+r]=n[r];return t}return Nv=e,Nv}var Sv,h6;function Cp(){if(h6)return Sv;h6=1;var e=YC(),t=e(Object.getPrototypeOf,Object);return Sv=t,Sv}var Ev,p6;function eT(){if(p6)return Ev;p6=1;var e=t5(),t=Cp(),n=e5(),r=JC(),i=Object.getOwnPropertySymbols,a=i?function(s){for(var o=[];s;)e(o,n(s)),s=t(s);return o}:r;return Ev=a,Ev}var kv,m6;function GH(){if(m6)return kv;m6=1;var e=zu(),t=eT();function n(r,i){return e(r,t(r),i)}return kv=n,kv}var jv,g6;function tT(){if(g6)return jv;g6=1;var e=t5(),t=$t();function n(r,i,a){var s=i(r);return t(r)?s:e(s,a(r))}return jv=n,jv}var Cv,v6;function nT(){if(v6)return Cv;v6=1;var e=tT(),t=e5(),n=Ya();function r(i){return e(i,n,t)}return Cv=r,Cv}var Tv,y6;function HH(){if(y6)return Tv;y6=1;var e=tT(),t=eT(),n=Gs();function r(i){return e(i,n,t)}return Tv=r,Tv}var VH=Us,WH=qr(),KH=VH(WH,"DataView"),YH=KH,XH=Us,QH=qr(),ZH=XH(QH,"Promise"),JH=ZH,eV=Us,tV=qr(),nV=eV(tV,"Set"),rT=nV,rV=Us,iV=qr(),aV=rV(iV,"WeakMap"),sV=aV,c2=YH,u2=Kw,d2=JH,f2=rT,h2=sV,iT=$s,Sl=VC,x6="[object Map]",oV="[object Object]",b6="[object Promise]",w6="[object Set]",_6="[object WeakMap]",N6="[object DataView]",lV=Sl(c2),cV=Sl(u2),uV=Sl(d2),dV=Sl(f2),fV=Sl(h2),ws=iT;(c2&&ws(new c2(new ArrayBuffer(1)))!=N6||u2&&ws(new u2)!=x6||d2&&ws(d2.resolve())!=b6||f2&&ws(new f2)!=w6||h2&&ws(new h2)!=_6)&&(ws=function(e){var t=iT(e),n=t==oV?e.constructor:void 0,r=n?Sl(n):"";if(r)switch(r){case lV:return N6;case cV:return x6;case uV:return b6;case dV:return w6;case fV:return _6}return t});var El=ws,Ov,S6;function hV(){if(S6)return Ov;S6=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var i=r.length,a=new r.constructor(i);return i&&typeof r[0]=="string"&&t.call(r,"index")&&(a.index=r.index,a.input=r.input),a}return Ov=n,Ov}var pV=qr(),mV=pV.Uint8Array,aT=mV,Pv,E6;function n5(){if(E6)return Pv;E6=1;var e=aT;function t(n){var r=new n.constructor(n.byteLength);return new e(r).set(new e(n)),r}return Pv=t,Pv}var Av,k6;function gV(){if(k6)return Av;k6=1;var e=n5();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return Av=t,Av}var Rv,j6;function vV(){if(j6)return Rv;j6=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return Rv=t,Rv}var Iv,C6;function yV(){if(C6)return Iv;C6=1;var e=xl,t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return Iv=r,Iv}var Mv,T6;function sT(){if(T6)return Mv;T6=1;var e=n5();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return Mv=t,Mv}var Lv,O6;function xV(){if(O6)return Lv;O6=1;var e=n5(),t=gV(),n=vV(),r=yV(),i=sT(),a="[object Boolean]",s="[object Date]",o="[object Map]",c="[object Number]",d="[object RegExp]",f="[object Set]",p="[object String]",m="[object Symbol]",g="[object ArrayBuffer]",b="[object DataView]",y="[object Float32Array]",N="[object Float64Array]",v="[object Int8Array]",_="[object Int16Array]",x="[object Int32Array]",w="[object Uint8Array]",E="[object Uint8ClampedArray]",P="[object Uint16Array]",A="[object Uint32Array]";function T(L,k,C){var O=L.constructor;switch(k){case g:return e(L);case a:case s:return new O(+L);case b:return t(L,C);case y:case N:case v:case _:case x:case w:case E:case P:case A:return i(L,C);case o:return new O;case c:case p:return new O(L);case d:return n(L);case f:return new O;case m:return r(L)}}return Lv=T,Lv}var Dv,P6;function oT(){if(P6)return Dv;P6=1;var e=xr(),t=Object.create,n=function(){function r(){}return function(i){if(!e(i))return{};if(t)return t(i);r.prototype=i;var a=new r;return r.prototype=void 0,a}}();return Dv=n,Dv}var Fv,A6;function lT(){if(A6)return Fv;A6=1;var e=oT(),t=Cp(),n=jp();function r(i){return typeof i.constructor=="function"&&!n(i)?e(t(i)):{}}return Fv=r,Fv}var zv,R6;function bV(){if(R6)return zv;R6=1;var e=El,t=di,n="[object Map]";function r(i){return t(i)&&e(i)==n}return zv=r,zv}var Bv,I6;function wV(){if(I6)return Bv;I6=1;var e=bV(),t=kp(),n=Zw,r=n&&n.isMap,i=r?t(r):e;return Bv=i,Bv}var qv,M6;function _V(){if(M6)return qv;M6=1;var e=El,t=di,n="[object Set]";function r(i){return t(i)&&e(i)==n}return qv=r,qv}var $v,L6;function NV(){if(L6)return $v;L6=1;var e=_V(),t=kp(),n=Zw,r=n&&n.isSet,i=r?t(r):e;return $v=i,$v}var Uv,D6;function cT(){if(D6)return Uv;D6=1;var e=_p,t=Xw(),n=Sp(),r=zH(),i=$H(),a=XC(),s=QC(),o=UH(),c=GH(),d=nT(),f=HH(),p=El,m=hV(),g=xV(),b=lT(),y=$t(),N=Nl,v=wV(),_=xr(),x=NV(),w=Ya(),E=Gs(),P=1,A=2,T=4,L="[object Arguments]",k="[object Array]",C="[object Boolean]",O="[object Date]",F="[object Error]",M="[object Function]",D="[object GeneratorFunction]",$="[object Map]",V="[object Number]",K="[object Object]",H="[object RegExp]",q="[object Set]",I="[object String]",z="[object Symbol]",W="[object WeakMap]",Q="[object ArrayBuffer]",ee="[object DataView]",Y="[object Float32Array]",U="[object Float64Array]",J="[object Int8Array]",te="[object Int16Array]",X="[object Int32Array]",ne="[object Uint8Array]",ue="[object Uint8ClampedArray]",se="[object Uint16Array]",ce="[object Uint32Array]",de={};de[L]=de[k]=de[Q]=de[ee]=de[C]=de[O]=de[Y]=de[U]=de[J]=de[te]=de[X]=de[$]=de[V]=de[K]=de[H]=de[q]=de[I]=de[z]=de[ne]=de[ue]=de[se]=de[ce]=!0,de[F]=de[M]=de[W]=!1;function Oe(ge,re,he,ye,we,me){var je,Ce=re&P,Ae=re&A,vt=re&T;if(he&&(je=we?he(ge,ye,we,me):he(ge)),je!==void 0)return je;if(!_(ge))return ge;var Pt=y(ge);if(Pt){if(je=m(ge),!Ce)return s(ge,je)}else{var qe=p(ge),Un=qe==M||qe==D;if(N(ge))return a(ge,Ce);if(qe==K||qe==L||Un&&!we){if(je=Ae||Un?{}:b(ge),!Ce)return Ae?c(ge,i(je,ge)):o(ge,r(je,ge))}else{if(!de[qe])return we?ge:{};je=g(ge,qe,Ce)}}me||(me=new e);var et=me.get(ge);if(et)return et;me.set(ge,je),x(ge)?ge.forEach(function(Xt){je.add(Oe(Xt,re,he,Xt,ge,me))}):v(ge)&&ge.forEach(function(Xt,an){je.set(an,Oe(Xt,re,he,an,ge,me))});var it=vt?Ae?f:d:Ae?E:w,dn=Pt?void 0:it(ge);return t(dn||ge,function(Xt,an){dn&&(an=Xt,Xt=ge[an]),n(je,an,Oe(Xt,re,he,an,ge,me))}),je}return Uv=Oe,Uv}var Gv,F6;function SV(){if(F6)return Gv;F6=1;var e=cT(),t=4;function n(r){return e(r,t)}return Gv=n,Gv}var Hv,z6;function r5(){if(z6)return Hv;z6=1;function e(t){return function(){return t}}return Hv=e,Hv}var Vv,B6;function EV(){if(B6)return Vv;B6=1;function e(t){return function(n,r,i){for(var a=-1,s=Object(n),o=i(n),c=o.length;c--;){var d=o[t?c:++a];if(r(s[d],d,s)===!1)break}return n}}return Vv=e,Vv}var Wv,q6;function i5(){if(q6)return Wv;q6=1;var e=EV(),t=e();return Wv=t,Wv}var Kv,$6;function a5(){if($6)return Kv;$6=1;var e=i5(),t=Ya();function n(r,i){return r&&e(r,i,t)}return Kv=n,Kv}var Yv,U6;function kV(){if(U6)return Yv;U6=1;var e=Vi();function t(n,r){return function(i,a){if(i==null)return i;if(!e(i))return n(i,a);for(var s=i.length,o=r?s:-1,c=Object(i);(r?o--:++o<s)&&a(c[o],o,c)!==!1;);return i}}return Yv=t,Yv}var Xv,G6;function Tp(){if(G6)return Xv;G6=1;var e=a5(),t=kV(),n=t(e);return Xv=n,Xv}var Qv,H6;function Hs(){if(H6)return Qv;H6=1;function e(t){return t}return Qv=e,Qv}var Zv,V6;function uT(){if(V6)return Zv;V6=1;var e=Hs();function t(n){return typeof n=="function"?n:e}return Zv=t,Zv}var Jv,W6;function dT(){if(W6)return Jv;W6=1;var e=Xw(),t=Tp(),n=uT(),r=$t();function i(a,s){var o=r(a)?e:t;return o(a,n(s))}return Jv=i,Jv}var e1,K6;function fT(){return K6||(K6=1,e1=dT()),e1}var t1,Y6;function jV(){if(Y6)return t1;Y6=1;var e=Tp();function t(n,r){var i=[];return e(n,function(a,s,o){r(a,s,o)&&i.push(a)}),i}return t1=t,t1}var CV="__lodash_hash_undefined__";function TV(e){return this.__data__.set(e,CV),this}var OV=TV;function PV(e){return this.__data__.has(e)}var AV=PV,RV=Yw,IV=OV,MV=AV;function Mh(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new RV;++t<n;)this.add(e[t])}Mh.prototype.add=Mh.prototype.push=IV;Mh.prototype.has=MV;var hT=Mh;function LV(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var DV=LV;function FV(e,t){return e.has(t)}var pT=FV,zV=hT,BV=DV,qV=pT,$V=1,UV=2;function GV(e,t,n,r,i,a){var s=n&$V,o=e.length,c=t.length;if(o!=c&&!(s&&c>o))return!1;var d=a.get(e),f=a.get(t);if(d&&f)return d==t&&f==e;var p=-1,m=!0,g=n&UV?new zV:void 0;for(a.set(e,t),a.set(t,e);++p<o;){var b=e[p],y=t[p];if(r)var N=s?r(y,b,p,t,e,a):r(b,y,p,e,t,a);if(N!==void 0){if(N)continue;m=!1;break}if(g){if(!BV(t,function(v,_){if(!qV(g,_)&&(b===v||i(b,v,n,r,a)))return g.push(_)})){m=!1;break}}else if(!(b===y||i(b,y,n,r,a))){m=!1;break}}return a.delete(e),a.delete(t),m}var mT=GV;function HV(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}var VV=HV;function WV(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var s5=WV,X6=xl,Q6=aT,KV=vl(),YV=mT,XV=VV,QV=s5,ZV=1,JV=2,eW="[object Boolean]",tW="[object Date]",nW="[object Error]",rW="[object Map]",iW="[object Number]",aW="[object RegExp]",sW="[object Set]",oW="[object String]",lW="[object Symbol]",cW="[object ArrayBuffer]",uW="[object DataView]",Z6=X6?X6.prototype:void 0,n1=Z6?Z6.valueOf:void 0;function dW(e,t,n,r,i,a,s){switch(n){case uW:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case cW:return!(e.byteLength!=t.byteLength||!a(new Q6(e),new Q6(t)));case eW:case tW:case iW:return KV(+e,+t);case nW:return e.name==t.name&&e.message==t.message;case aW:case oW:return e==t+"";case rW:var o=XV;case sW:var c=r&ZV;if(o||(o=QV),e.size!=t.size&&!c)return!1;var d=s.get(e);if(d)return d==t;r|=JV,s.set(e,t);var f=YV(o(e),o(t),r,i,a,s);return s.delete(e),f;case lW:if(n1)return n1.call(e)==n1.call(t)}return!1}var fW=dW,J6=nT(),hW=1,pW=Object.prototype,mW=pW.hasOwnProperty;function gW(e,t,n,r,i,a){var s=n&hW,o=J6(e),c=o.length,d=J6(t),f=d.length;if(c!=f&&!s)return!1;for(var p=c;p--;){var m=o[p];if(!(s?m in t:mW.call(t,m)))return!1}var g=a.get(e),b=a.get(t);if(g&&b)return g==t&&b==e;var y=!0;a.set(e,t),a.set(t,e);for(var N=s;++p<c;){m=o[p];var v=e[m],_=t[m];if(r)var x=s?r(_,v,m,t,e,a):r(v,_,m,e,t,a);if(!(x===void 0?v===_||i(v,_,n,r,a):x)){y=!1;break}N||(N=m=="constructor")}if(y&&!N){var w=e.constructor,E=t.constructor;w!=E&&"constructor"in e&&"constructor"in t&&!(typeof w=="function"&&w instanceof w&&typeof E=="function"&&E instanceof E)&&(y=!1)}return a.delete(e),a.delete(t),y}var vW=gW,r1=_p,yW=mT,xW=fW,bW=vW,eS=El,tS=$t(),nS=Nl,wW=qu,_W=1,rS="[object Arguments]",iS="[object Array]",Nf="[object Object]",NW=Object.prototype,aS=NW.hasOwnProperty;function SW(e,t,n,r,i,a){var s=tS(e),o=tS(t),c=s?iS:eS(e),d=o?iS:eS(t);c=c==rS?Nf:c,d=d==rS?Nf:d;var f=c==Nf,p=d==Nf,m=c==d;if(m&&nS(e)){if(!nS(t))return!1;s=!0,f=!1}if(m&&!f)return a||(a=new r1),s||wW(e)?yW(e,t,n,r,i,a):xW(e,t,c,n,r,i,a);if(!(n&_W)){var g=f&&aS.call(e,"__wrapped__"),b=p&&aS.call(t,"__wrapped__");if(g||b){var y=g?e.value():e,N=b?t.value():t;return a||(a=new r1),i(y,N,n,r,a)}}return m?(a||(a=new r1),bW(e,t,n,r,i,a)):!1}var EW=SW,kW=EW,sS=di;function gT(e,t,n,r,i){return e===t?!0:e==null||t==null||!sS(e)&&!sS(t)?e!==e&&t!==t:kW(e,t,n,r,gT,i)}var o5=gT,i1,oS;function jW(){if(oS)return i1;oS=1;var e=_p,t=o5,n=1,r=2;function i(a,s,o,c){var d=o.length,f=d,p=!c;if(a==null)return!f;for(a=Object(a);d--;){var m=o[d];if(p&&m[2]?m[1]!==a[m[0]]:!(m[0]in a))return!1}for(;++d<f;){m=o[d];var g=m[0],b=a[g],y=m[1];if(p&&m[2]){if(b===void 0&&!(g in a))return!1}else{var N=new e;if(c)var v=c(b,y,g,a,s,N);if(!(v===void 0?t(y,b,n|r,c,N):v))return!1}}return!0}return i1=i,i1}var a1,lS;function vT(){if(lS)return a1;lS=1;var e=xr();function t(n){return n===n&&!e(n)}return a1=t,a1}var s1,cS;function CW(){if(cS)return s1;cS=1;var e=vT(),t=Ya();function n(r){for(var i=t(r),a=i.length;a--;){var s=i[a],o=r[s];i[a]=[s,o,e(o)]}return i}return s1=n,s1}var o1,uS;function yT(){if(uS)return o1;uS=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return o1=e,o1}var l1,dS;function TW(){if(dS)return l1;dS=1;var e=jW(),t=CW(),n=yT();function r(i){var a=t(i);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(s){return s===i||e(s,i,a)}}return l1=r,l1}var c1,fS;function kl(){if(fS)return c1;fS=1;var e=$s,t=di,n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return c1=r,c1}var u1,hS;function l5(){if(hS)return u1;hS=1;var e=$t(),t=kl(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){if(e(a))return!1;var o=typeof a;return o=="number"||o=="symbol"||o=="boolean"||a==null||t(a)?!0:r.test(a)||!n.test(a)||s!=null&&a in Object(s)}return u1=i,u1}var d1,pS;function OW(){if(pS)return d1;pS=1;var e=Yw,t="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var a=function(){var s=arguments,o=i?i.apply(this,s):s[0],c=a.cache;if(c.has(o))return c.get(o);var d=r.apply(this,s);return a.cache=c.set(o,d)||c,d};return a.cache=new(n.Cache||e),a}return n.Cache=e,d1=n,d1}var f1,mS;function PW(){if(mS)return f1;mS=1;var e=OW(),t=500;function n(r){var i=e(r,function(s){return a.size===t&&a.clear(),s}),a=i.cache;return i}return f1=n,f1}var h1,gS;function AW(){if(gS)return h1;gS=1;var e=PW(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(t,function(s,o,c,d){a.push(c?d.replace(n,"$1"):o||s)}),a});return h1=r,h1}var p1,vS;function Op(){if(vS)return p1;vS=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,a=Array(i);++r<i;)a[r]=n(t[r],r,t);return a}return p1=e,p1}var m1,yS;function RW(){if(yS)return m1;yS=1;var e=xl,t=Op(),n=$t(),r=kl(),i=1/0,a=e?e.prototype:void 0,s=a?a.toString:void 0;function o(c){if(typeof c=="string")return c;if(n(c))return t(c,o)+"";if(r(c))return s?s.call(c):"";var d=c+"";return d=="0"&&1/c==-i?"-0":d}return m1=o,m1}var g1,xS;function xT(){if(xS)return g1;xS=1;var e=RW();function t(n){return n==null?"":e(n)}return g1=t,g1}var v1,bS;function Pp(){if(bS)return v1;bS=1;var e=$t(),t=l5(),n=AW(),r=xT();function i(a,s){return e(a)?a:t(a,s)?[a]:n(r(a))}return v1=i,v1}var y1,wS;function $u(){if(wS)return y1;wS=1;var e=kl(),t=1/0;function n(r){if(typeof r=="string"||e(r))return r;var i=r+"";return i=="0"&&1/r==-t?"-0":i}return y1=n,y1}var x1,_S;function Ap(){if(_S)return x1;_S=1;var e=Pp(),t=$u();function n(r,i){i=e(i,r);for(var a=0,s=i.length;r!=null&&a<s;)r=r[t(i[a++])];return a&&a==s?r:void 0}return x1=n,x1}var b1,NS;function IW(){if(NS)return b1;NS=1;var e=Ap();function t(n,r,i){var a=n==null?void 0:e(n,r);return a===void 0?i:a}return b1=t,b1}var w1,SS;function MW(){if(SS)return w1;SS=1;function e(t,n){return t!=null&&n in Object(t)}return w1=e,w1}var _1,ES;function bT(){if(ES)return _1;ES=1;var e=Pp(),t=Bu(),n=$t(),r=Ep(),i=Qw(),a=$u();function s(o,c,d){c=e(c,o);for(var f=-1,p=c.length,m=!1;++f<p;){var g=a(c[f]);if(!(m=o!=null&&d(o,g)))break;o=o[g]}return m||++f!=p?m:(p=o==null?0:o.length,!!p&&i(p)&&r(g,p)&&(n(o)||t(o)))}return _1=s,_1}var N1,kS;function wT(){if(kS)return N1;kS=1;var e=MW(),t=bT();function n(r,i){return r!=null&&t(r,i,e)}return N1=n,N1}var S1,jS;function LW(){if(jS)return S1;jS=1;var e=o5,t=IW(),n=wT(),r=l5(),i=vT(),a=yT(),s=$u(),o=1,c=2;function d(f,p){return r(f)&&i(p)?a(s(f),p):function(m){var g=t(m,f);return g===void 0&&g===p?n(m,f):e(p,g,o|c)}}return S1=d,S1}var E1,CS;function _T(){if(CS)return E1;CS=1;function e(t){return function(n){return n==null?void 0:n[t]}}return E1=e,E1}var k1,TS;function DW(){if(TS)return k1;TS=1;var e=Ap();function t(n){return function(r){return e(r,n)}}return k1=t,k1}var j1,OS;function FW(){if(OS)return j1;OS=1;var e=_T(),t=DW(),n=l5(),r=$u();function i(a){return n(a)?e(r(a)):t(a)}return j1=i,j1}var C1,PS;function Wi(){if(PS)return C1;PS=1;var e=TW(),t=LW(),n=Hs(),r=$t(),i=FW();function a(s){return typeof s=="function"?s:s==null?n:typeof s=="object"?r(s)?t(s[0],s[1]):e(s):i(s)}return C1=a,C1}var T1,AS;function NT(){if(AS)return T1;AS=1;var e=ZC(),t=jV(),n=Wi(),r=$t();function i(a,s){var o=r(a)?e:t;return o(a,n(s,3))}return T1=i,T1}var O1,RS;function zW(){if(RS)return O1;RS=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,i){return r!=null&&t.call(r,i)}return O1=n,O1}var P1,IS;function ST(){if(IS)return P1;IS=1;var e=zW(),t=bT();function n(r,i){return r!=null&&t(r,i,e)}return P1=n,P1}var A1,MS;function BW(){if(MS)return A1;MS=1;var e=Jw(),t=El,n=Bu(),r=$t(),i=Vi(),a=Nl,s=jp(),o=qu,c="[object Map]",d="[object Set]",f=Object.prototype,p=f.hasOwnProperty;function m(g){if(g==null)return!0;if(i(g)&&(r(g)||typeof g=="string"||typeof g.splice=="function"||a(g)||o(g)||n(g)))return!g.length;var b=t(g);if(b==c||b==d)return!g.size;if(s(g))return!e(g).length;for(var y in g)if(p.call(g,y))return!1;return!0}return A1=m,A1}var R1,LS;function ET(){if(LS)return R1;LS=1;function e(t){return t===void 0}return R1=e,R1}var I1,DS;function kT(){if(DS)return I1;DS=1;var e=Tp(),t=Vi();function n(r,i){var a=-1,s=t(r)?Array(r.length):[];return e(r,function(o,c,d){s[++a]=i(o,c,d)}),s}return I1=n,I1}var M1,FS;function jT(){if(FS)return M1;FS=1;var e=Op(),t=Wi(),n=kT(),r=$t();function i(a,s){var o=r(a)?e:n;return o(a,t(s,3))}return M1=i,M1}var L1,zS;function qW(){if(zS)return L1;zS=1;function e(t,n,r,i){var a=-1,s=t==null?0:t.length;for(i&&s&&(r=t[++a]);++a<s;)r=n(r,t[a],a,t);return r}return L1=e,L1}var D1,BS;function $W(){if(BS)return D1;BS=1;function e(t,n,r,i,a){return a(t,function(s,o,c){r=i?(i=!1,s):n(r,s,o,c)}),r}return D1=e,D1}var F1,qS;function CT(){if(qS)return F1;qS=1;var e=qW(),t=Tp(),n=Wi(),r=$W(),i=$t();function a(s,o,c){var d=i(s)?e:r,f=arguments.length<3;return d(s,n(o,4),c,f,t)}return F1=a,F1}var z1,$S;function UW(){if($S)return z1;$S=1;var e=$s,t=$t(),n=di,r="[object String]";function i(a){return typeof a=="string"||!t(a)&&n(a)&&e(a)==r}return z1=i,z1}var B1,US;function GW(){if(US)return B1;US=1;var e=_T(),t=e("length");return B1=t,B1}var q1,GS;function HW(){if(GS)return q1;GS=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,a="\\ufe0e\\ufe0f",s="\\u200d",o=RegExp("["+s+e+i+a+"]");function c(d){return o.test(d)}return q1=c,q1}var $1,HS;function VW(){if(HS)return $1;HS=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,a="\\ufe0e\\ufe0f",s="["+e+"]",o="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",d="(?:"+o+"|"+c+")",f="[^"+e+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",g="\\u200d",b=d+"?",y="["+a+"]?",N="(?:"+g+"(?:"+[f,p,m].join("|")+")"+y+b+")*",v=y+b+N,_="(?:"+[f+o+"?",o,p,m,s].join("|")+")",x=RegExp(c+"(?="+c+")|"+_+v,"g");function w(E){for(var P=x.lastIndex=0;x.test(E);)++P;return P}return $1=w,$1}var U1,VS;function WW(){if(VS)return U1;VS=1;var e=GW(),t=HW(),n=VW();function r(i){return t(i)?n(i):e(i)}return U1=r,U1}var G1,WS;function KW(){if(WS)return G1;WS=1;var e=Jw(),t=El,n=Vi(),r=UW(),i=WW(),a="[object Map]",s="[object Set]";function o(c){if(c==null)return 0;if(n(c))return r(c)?i(c):c.length;var d=t(c);return d==a||d==s?c.size:e(c).length}return G1=o,G1}var H1,KS;function YW(){if(KS)return H1;KS=1;var e=Xw(),t=oT(),n=a5(),r=Wi(),i=Cp(),a=$t(),s=Nl,o=Fu(),c=xr(),d=qu;function f(p,m,g){var b=a(p),y=b||s(p)||d(p);if(m=r(m,4),g==null){var N=p&&p.constructor;y?g=b?new N:[]:c(p)?g=o(N)?t(i(p)):{}:g={}}return(y?e:n)(p,function(v,_,x){return m(g,v,_,x)}),g}return H1=f,H1}var V1,YS;function XW(){if(YS)return V1;YS=1;var e=xl,t=Bu(),n=$t(),r=e?e.isConcatSpreadable:void 0;function i(a){return n(a)||t(a)||!!(r&&a&&a[r])}return V1=i,V1}var W1,XS;function c5(){if(XS)return W1;XS=1;var e=t5(),t=XW();function n(r,i,a,s,o){var c=-1,d=r.length;for(a||(a=t),o||(o=[]);++c<d;){var f=r[c];i>0&&a(f)?i>1?n(f,i-1,a,s,o):e(o,f):s||(o[o.length]=f)}return o}return W1=n,W1}var K1,QS;function QW(){if(QS)return K1;QS=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return K1=e,K1}var Y1,ZS;function TT(){if(ZS)return Y1;ZS=1;var e=QW(),t=Math.max;function n(r,i,a){return i=t(i===void 0?r.length-1:i,0),function(){for(var s=arguments,o=-1,c=t(s.length-i,0),d=Array(c);++o<c;)d[o]=s[i+o];o=-1;for(var f=Array(i+1);++o<i;)f[o]=s[o];return f[i]=a(d),e(r,this,f)}}return Y1=n,Y1}var X1,JS;function ZW(){if(JS)return X1;JS=1;var e=r5(),t=WC(),n=Hs(),r=t?function(i,a){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(a),writable:!0})}:n;return X1=r,X1}var Q1,e8;function JW(){if(e8)return Q1;e8=1;var e=800,t=16,n=Date.now;function r(i){var a=0,s=0;return function(){var o=n(),c=t-(o-s);if(s=o,c>0){if(++a>=e)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return Q1=r,Q1}var Z1,t8;function OT(){if(t8)return Z1;t8=1;var e=ZW(),t=JW(),n=t(e);return Z1=n,Z1}var J1,n8;function Rp(){if(n8)return J1;n8=1;var e=Hs(),t=TT(),n=OT();function r(i,a){return n(t(i,a,e),i+"")}return J1=r,J1}var ey,r8;function PT(){if(r8)return ey;r8=1;function e(t,n,r,i){for(var a=t.length,s=r+(i?1:-1);i?s--:++s<a;)if(n(t[s],s,t))return s;return-1}return ey=e,ey}var ty,i8;function eK(){if(i8)return ty;i8=1;function e(t){return t!==t}return ty=e,ty}var ny,a8;function tK(){if(a8)return ny;a8=1;function e(t,n,r){for(var i=r-1,a=t.length;++i<a;)if(t[i]===n)return i;return-1}return ny=e,ny}var ry,s8;function nK(){if(s8)return ry;s8=1;var e=PT(),t=eK(),n=tK();function r(i,a,s){return a===a?n(i,a,s):e(i,t,s)}return ry=r,ry}var iy,o8;function rK(){if(o8)return iy;o8=1;var e=nK();function t(n,r){var i=n==null?0:n.length;return!!i&&e(n,r,0)>-1}return iy=t,iy}var ay,l8;function iK(){if(l8)return ay;l8=1;function e(t,n,r){for(var i=-1,a=t==null?0:t.length;++i<a;)if(r(n,t[i]))return!0;return!1}return ay=e,ay}var sy,c8;function aK(){if(c8)return sy;c8=1;function e(){}return sy=e,sy}var oy,u8;function sK(){if(u8)return oy;u8=1;var e=rT,t=aK(),n=s5,r=1/0,i=e&&1/n(new e([,-0]))[1]==r?function(a){return new e(a)}:t;return oy=i,oy}var ly,d8;function oK(){if(d8)return ly;d8=1;var e=hT,t=rK(),n=iK(),r=pT,i=sK(),a=s5,s=200;function o(c,d,f){var p=-1,m=t,g=c.length,b=!0,y=[],N=y;if(f)b=!1,m=n;else if(g>=s){var v=d?null:i(c);if(v)return a(v);b=!1,m=r,N=new e}else N=d?[]:y;e:for(;++p<g;){var _=c[p],x=d?d(_):_;if(_=f||_!==0?_:0,b&&x===x){for(var w=N.length;w--;)if(N[w]===x)continue e;d&&N.push(x),y.push(_)}else m(N,x,f)||(N!==y&&N.push(x),y.push(_))}return y}return ly=o,ly}var cy,f8;function AT(){if(f8)return cy;f8=1;var e=Vi(),t=di;function n(r){return t(r)&&e(r)}return cy=n,cy}var uy,h8;function lK(){if(h8)return uy;h8=1;var e=c5(),t=Rp(),n=oK(),r=AT(),i=t(function(a){return n(e(a,1,r,!0))});return uy=i,uy}var dy,p8;function cK(){if(p8)return dy;p8=1;var e=Op();function t(n,r){return e(r,function(i){return n[i]})}return dy=t,dy}var fy,m8;function RT(){if(m8)return fy;m8=1;var e=cK(),t=Ya();function n(r){return r==null?[]:e(r,t(r))}return fy=n,fy}var hy,g8;function br(){if(g8)return hy;g8=1;var e;if(typeof Ww=="function")try{e={clone:SV(),constant:r5(),each:fT(),filter:NT(),has:ST(),isArray:$t(),isEmpty:BW(),isFunction:Fu(),isUndefined:ET(),keys:Ya(),map:jT(),reduce:CT(),size:KW(),transform:YW(),union:lK(),values:RT()}}catch{}return e||(e=window._),hy=e,hy}var py,v8;function u5(){if(v8)return py;v8=1;var e=br();py=i;var t="\0",n="\0",r="";function i(f){this._isDirected=e.has(f,"directed")?f.directed:!0,this._isMultigraph=e.has(f,"multigraph")?f.multigraph:!1,this._isCompound=e.has(f,"compound")?f.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(f){return this._label=f,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(f){return e.isFunction(f)||(f=e.constant(f)),this._defaultNodeLabelFn=f,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var f=this;return e.filter(this.nodes(),function(p){return e.isEmpty(f._in[p])})},i.prototype.sinks=function(){var f=this;return e.filter(this.nodes(),function(p){return e.isEmpty(f._out[p])})},i.prototype.setNodes=function(f,p){var m=arguments,g=this;return e.each(f,function(b){m.length>1?g.setNode(b,p):g.setNode(b)}),this},i.prototype.setNode=function(f,p){return e.has(this._nodes,f)?(arguments.length>1&&(this._nodes[f]=p),this):(this._nodes[f]=arguments.length>1?p:this._defaultNodeLabelFn(f),this._isCompound&&(this._parent[f]=n,this._children[f]={},this._children[n][f]=!0),this._in[f]={},this._preds[f]={},this._out[f]={},this._sucs[f]={},++this._nodeCount,this)},i.prototype.node=function(f){return this._nodes[f]},i.prototype.hasNode=function(f){return e.has(this._nodes,f)},i.prototype.removeNode=function(f){var p=this;if(e.has(this._nodes,f)){var m=function(g){p.removeEdge(p._edgeObjs[g])};delete this._nodes[f],this._isCompound&&(this._removeFromParentsChildList(f),delete this._parent[f],e.each(this.children(f),function(g){p.setParent(g)}),delete this._children[f]),e.each(e.keys(this._in[f]),m),delete this._in[f],delete this._preds[f],e.each(e.keys(this._out[f]),m),delete this._out[f],delete this._sucs[f],--this._nodeCount}return this},i.prototype.setParent=function(f,p){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(p))p=n;else{p+="";for(var m=p;!e.isUndefined(m);m=this.parent(m))if(m===f)throw new Error("Setting "+p+" as parent of "+f+" would create a cycle");this.setNode(p)}return this.setNode(f),this._removeFromParentsChildList(f),this._parent[f]=p,this._children[p][f]=!0,this},i.prototype._removeFromParentsChildList=function(f){delete this._children[this._parent[f]][f]},i.prototype.parent=function(f){if(this._isCompound){var p=this._parent[f];if(p!==n)return p}},i.prototype.children=function(f){if(e.isUndefined(f)&&(f=n),this._isCompound){var p=this._children[f];if(p)return e.keys(p)}else{if(f===n)return this.nodes();if(this.hasNode(f))return[]}},i.prototype.predecessors=function(f){var p=this._preds[f];if(p)return e.keys(p)},i.prototype.successors=function(f){var p=this._sucs[f];if(p)return e.keys(p)},i.prototype.neighbors=function(f){var p=this.predecessors(f);if(p)return e.union(p,this.successors(f))},i.prototype.isLeaf=function(f){var p;return this.isDirected()?p=this.successors(f):p=this.neighbors(f),p.length===0},i.prototype.filterNodes=function(f){var p=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});p.setGraph(this.graph());var m=this;e.each(this._nodes,function(y,N){f(N)&&p.setNode(N,y)}),e.each(this._edgeObjs,function(y){p.hasNode(y.v)&&p.hasNode(y.w)&&p.setEdge(y,m.edge(y))});var g={};function b(y){var N=m.parent(y);return N===void 0||p.hasNode(N)?(g[y]=N,N):N in g?g[N]:b(N)}return this._isCompound&&e.each(p.nodes(),function(y){p.setParent(y,b(y))}),p},i.prototype.setDefaultEdgeLabel=function(f){return e.isFunction(f)||(f=e.constant(f)),this._defaultEdgeLabelFn=f,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(f,p){var m=this,g=arguments;return e.reduce(f,function(b,y){return g.length>1?m.setEdge(b,y,p):m.setEdge(b,y),y}),this},i.prototype.setEdge=function(){var f,p,m,g,b=!1,y=arguments[0];typeof y=="object"&&y!==null&&"v"in y?(f=y.v,p=y.w,m=y.name,arguments.length===2&&(g=arguments[1],b=!0)):(f=y,p=arguments[1],m=arguments[3],arguments.length>2&&(g=arguments[2],b=!0)),f=""+f,p=""+p,e.isUndefined(m)||(m=""+m);var N=o(this._isDirected,f,p,m);if(e.has(this._edgeLabels,N))return b&&(this._edgeLabels[N]=g),this;if(!e.isUndefined(m)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(f),this.setNode(p),this._edgeLabels[N]=b?g:this._defaultEdgeLabelFn(f,p,m);var v=c(this._isDirected,f,p,m);return f=v.v,p=v.w,Object.freeze(v),this._edgeObjs[N]=v,a(this._preds[p],f),a(this._sucs[f],p),this._in[p][N]=v,this._out[f][N]=v,this._edgeCount++,this},i.prototype.edge=function(f,p,m){var g=arguments.length===1?d(this._isDirected,arguments[0]):o(this._isDirected,f,p,m);return this._edgeLabels[g]},i.prototype.hasEdge=function(f,p,m){var g=arguments.length===1?d(this._isDirected,arguments[0]):o(this._isDirected,f,p,m);return e.has(this._edgeLabels,g)},i.prototype.removeEdge=function(f,p,m){var g=arguments.length===1?d(this._isDirected,arguments[0]):o(this._isDirected,f,p,m),b=this._edgeObjs[g];return b&&(f=b.v,p=b.w,delete this._edgeLabels[g],delete this._edgeObjs[g],s(this._preds[p],f),s(this._sucs[f],p),delete this._in[p][g],delete this._out[f][g],this._edgeCount--),this},i.prototype.inEdges=function(f,p){var m=this._in[f];if(m){var g=e.values(m);return p?e.filter(g,function(b){return b.v===p}):g}},i.prototype.outEdges=function(f,p){var m=this._out[f];if(m){var g=e.values(m);return p?e.filter(g,function(b){return b.w===p}):g}},i.prototype.nodeEdges=function(f,p){var m=this.inEdges(f,p);if(m)return m.concat(this.outEdges(f,p))};function a(f,p){f[p]?f[p]++:f[p]=1}function s(f,p){--f[p]||delete f[p]}function o(f,p,m,g){var b=""+p,y=""+m;if(!f&&b>y){var N=b;b=y,y=N}return b+r+y+r+(e.isUndefined(g)?t:g)}function c(f,p,m,g){var b=""+p,y=""+m;if(!f&&b>y){var N=b;b=y,y=N}var v={v:b,w:y};return g&&(v.name=g),v}function d(f,p){return o(f,p.v,p.w,p.name)}return py}var my,y8;function uK(){return y8||(y8=1,my="2.1.8"),my}var gy,x8;function dK(){return x8||(x8=1,gy={Graph:u5(),version:uK()}),gy}var vy,b8;function fK(){if(b8)return vy;b8=1;var e=br(),t=u5();vy={write:n,read:a};function n(s){var o={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:r(s),edges:i(s)};return e.isUndefined(s.graph())||(o.value=e.clone(s.graph())),o}function r(s){return e.map(s.nodes(),function(o){var c=s.node(o),d=s.parent(o),f={v:o};return e.isUndefined(c)||(f.value=c),e.isUndefined(d)||(f.parent=d),f})}function i(s){return e.map(s.edges(),function(o){var c=s.edge(o),d={v:o.v,w:o.w};return e.isUndefined(o.name)||(d.name=o.name),e.isUndefined(c)||(d.value=c),d})}function a(s){var o=new t(s.options).setGraph(s.value);return e.each(s.nodes,function(c){o.setNode(c.v,c.value),c.parent&&o.setParent(c.v,c.parent)}),e.each(s.edges,function(c){o.setEdge({v:c.v,w:c.w,name:c.name},c.value)}),o}return vy}var yy,w8;function hK(){if(w8)return yy;w8=1;var e=br();yy=t;function t(n){var r={},i=[],a;function s(o){e.has(r,o)||(r[o]=!0,a.push(o),e.each(n.successors(o),s),e.each(n.predecessors(o),s))}return e.each(n.nodes(),function(o){a=[],s(o),a.length&&i.push(a)}),i}return yy}var xy,_8;function IT(){if(_8)return xy;_8=1;var e=br();xy=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!e.has(i,n)){var a=this._arr,s=a.length;return i[n]=s,a.push({key:n,priority:r}),this._decrease(s),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},t.prototype._heapify=function(n){var r=this._arr,i=2*n,a=i+1,s=n;i<r.length&&(s=r[i].priority<r[s].priority?i:s,a<r.length&&(s=r[a].priority<r[s].priority?a:s),s!==n&&(this._swap(n,s),this._heapify(s)))},t.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,a;n!==0&&(a=n>>1,!(r[a].priority<i));)this._swap(n,a),n=a},t.prototype._swap=function(n,r){var i=this._arr,a=this._keyIndices,s=i[n],o=i[r];i[n]=o,i[r]=s,a[o.key]=n,a[s.key]=r},xy}var by,N8;function MT(){if(N8)return by;N8=1;var e=br(),t=IT();by=r;var n=e.constant(1);function r(a,s,o,c){return i(a,String(s),o||n,c||function(d){return a.outEdges(d)})}function i(a,s,o,c){var d={},f=new t,p,m,g=function(b){var y=b.v!==p?b.v:b.w,N=d[y],v=o(b),_=m.distance+v;if(v<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+b+" Weight: "+v);_<N.distance&&(N.distance=_,N.predecessor=p,f.decrease(y,_))};for(a.nodes().forEach(function(b){var y=b===s?0:Number.POSITIVE_INFINITY;d[b]={distance:y},f.add(b,y)});f.size()>0&&(p=f.removeMin(),m=d[p],m.distance!==Number.POSITIVE_INFINITY);)c(p).forEach(g);return d}return by}var wy,S8;function pK(){if(S8)return wy;S8=1;var e=MT(),t=br();wy=n;function n(r,i,a){return t.transform(r.nodes(),function(s,o){s[o]=e(r,o,i,a)},{})}return wy}var _y,E8;function LT(){if(E8)return _y;E8=1;var e=br();_y=t;function t(n){var r=0,i=[],a={},s=[];function o(c){var d=a[c]={onStack:!0,lowlink:r,index:r++};if(i.push(c),n.successors(c).forEach(function(m){e.has(a,m)?a[m].onStack&&(d.lowlink=Math.min(d.lowlink,a[m].index)):(o(m),d.lowlink=Math.min(d.lowlink,a[m].lowlink))}),d.lowlink===d.index){var f=[],p;do p=i.pop(),a[p].onStack=!1,f.push(p);while(c!==p);s.push(f)}}return n.nodes().forEach(function(c){e.has(a,c)||o(c)}),s}return _y}var Ny,k8;function mK(){if(k8)return Ny;k8=1;var e=br(),t=LT();Ny=n;function n(r){return e.filter(t(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return Ny}var Sy,j8;function gK(){if(j8)return Sy;j8=1;var e=br();Sy=n;var t=e.constant(1);function n(i,a,s){return r(i,a||t,s||function(o){return i.outEdges(o)})}function r(i,a,s){var o={},c=i.nodes();return c.forEach(function(d){o[d]={},o[d][d]={distance:0},c.forEach(function(f){d!==f&&(o[d][f]={distance:Number.POSITIVE_INFINITY})}),s(d).forEach(function(f){var p=f.v===d?f.w:f.v,m=a(f);o[d][p]={distance:m,predecessor:d}})}),c.forEach(function(d){var f=o[d];c.forEach(function(p){var m=o[p];c.forEach(function(g){var b=m[d],y=f[g],N=m[g],v=b.distance+y.distance;v<N.distance&&(N.distance=v,N.predecessor=y.predecessor)})})}),o}return Sy}var Ey,C8;function DT(){if(C8)return Ey;C8=1;var e=br();Ey=t,t.CycleException=n;function t(r){var i={},a={},s=[];function o(c){if(e.has(a,c))throw new n;e.has(i,c)||(a[c]=!0,i[c]=!0,e.each(r.predecessors(c),o),delete a[c],s.push(c))}if(e.each(r.sinks(),o),e.size(i)!==r.nodeCount())throw new n;return s}function n(){}return n.prototype=new Error,Ey}var ky,T8;function vK(){if(T8)return ky;T8=1;var e=DT();ky=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return ky}var jy,O8;function FT(){if(O8)return jy;O8=1;var e=br();jy=t;function t(r,i,a){e.isArray(i)||(i=[i]);var s=(r.isDirected()?r.successors:r.neighbors).bind(r),o=[],c={};return e.each(i,function(d){if(!r.hasNode(d))throw new Error("Graph does not have node: "+d);n(r,d,a==="post",c,s,o)}),o}function n(r,i,a,s,o,c){e.has(s,i)||(s[i]=!0,a||c.push(i),e.each(o(i),function(d){n(r,d,a,s,o,c)}),a&&c.push(i))}return jy}var Cy,P8;function yK(){if(P8)return Cy;P8=1;var e=FT();Cy=t;function t(n,r){return e(n,r,"post")}return Cy}var Ty,A8;function xK(){if(A8)return Ty;A8=1;var e=FT();Ty=t;function t(n,r){return e(n,r,"pre")}return Ty}var Oy,R8;function bK(){if(R8)return Oy;R8=1;var e=br(),t=u5(),n=IT();Oy=r;function r(i,a){var s=new t,o={},c=new n,d;function f(m){var g=m.v===d?m.w:m.v,b=c.priority(g);if(b!==void 0){var y=a(m);y<b&&(o[g]=d,c.decrease(g,y))}}if(i.nodeCount()===0)return s;e.each(i.nodes(),function(m){c.add(m,Number.POSITIVE_INFINITY),s.setNode(m)}),c.decrease(i.nodes()[0],0);for(var p=!1;c.size()>0;){if(d=c.removeMin(),e.has(o,d))s.setEdge(d,o[d]);else{if(p)throw new Error("Input graph is not connected: "+i);p=!0}i.nodeEdges(d).forEach(f)}return s}return Oy}var Py,I8;function wK(){return I8||(I8=1,Py={components:hK(),dijkstra:MT(),dijkstraAll:pK(),findCycles:mK(),floydWarshall:gK(),isAcyclic:vK(),postorder:yK(),preorder:xK(),prim:bK(),tarjan:LT(),topsort:DT()}),Py}var Ay,M8;function _K(){if(M8)return Ay;M8=1;var e=dK();return Ay={Graph:e.Graph,json:fK(),alg:wK(),version:e.version},Ay}var Lh;if(typeof Ww=="function")try{Lh=_K()}catch{}Lh||(Lh=window.graphlib);var $r=Lh,Ry,L8;function NK(){if(L8)return Ry;L8=1;var e=cT(),t=1,n=4;function r(i){return e(i,t|n)}return Ry=r,Ry}var Iy,D8;function Ip(){if(D8)return Iy;D8=1;var e=vl(),t=Vi(),n=Ep(),r=xr();function i(a,s,o){if(!r(o))return!1;var c=typeof s;return(c=="number"?t(o)&&n(s,o.length):c=="string"&&s in o)?e(o[s],a):!1}return Iy=i,Iy}var My,F8;function SK(){if(F8)return My;F8=1;var e=Rp(),t=vl(),n=Ip(),r=Gs(),i=Object.prototype,a=i.hasOwnProperty,s=e(function(o,c){o=Object(o);var d=-1,f=c.length,p=f>2?c[2]:void 0;for(p&&n(c[0],c[1],p)&&(f=1);++d<f;)for(var m=c[d],g=r(m),b=-1,y=g.length;++b<y;){var N=g[b],v=o[N];(v===void 0||t(v,i[N])&&!a.call(o,N))&&(o[N]=m[N])}return o});return My=s,My}var Ly,z8;function EK(){if(z8)return Ly;z8=1;var e=Wi(),t=Vi(),n=Ya();function r(i){return function(a,s,o){var c=Object(a);if(!t(a)){var d=e(s,3);a=n(a),s=function(p){return d(c[p],p,c)}}var f=i(a,s,o);return f>-1?c[d?a[f]:f]:void 0}}return Ly=r,Ly}var Dy,B8;function kK(){if(B8)return Dy;B8=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return Dy=t,Dy}var Fy,q8;function jK(){if(q8)return Fy;q8=1;var e=kK(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return Fy=n,Fy}var zy,$8;function CK(){if($8)return zy;$8=1;var e=jK(),t=xr(),n=kl(),r=0/0,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function c(d){if(typeof d=="number")return d;if(n(d))return r;if(t(d)){var f=typeof d.valueOf=="function"?d.valueOf():d;d=t(f)?f+"":f}if(typeof d!="string")return d===0?d:+d;d=e(d);var p=a.test(d);return p||s.test(d)?o(d.slice(2),p?2:8):i.test(d)?r:+d}return zy=c,zy}var By,U8;function zT(){if(U8)return By;U8=1;var e=CK(),t=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var a=i<0?-1:1;return a*n}return i===i?i:0}return By=r,By}var qy,G8;function TK(){if(G8)return qy;G8=1;var e=zT();function t(n){var r=e(n),i=r%1;return r===r?i?r-i:r:0}return qy=t,qy}var $y,H8;function OK(){if(H8)return $y;H8=1;var e=PT(),t=Wi(),n=TK(),r=Math.max;function i(a,s,o){var c=a==null?0:a.length;if(!c)return-1;var d=o==null?0:n(o);return d<0&&(d=r(c+d,0)),e(a,t(s,3),d)}return $y=i,$y}var Uy,V8;function PK(){if(V8)return Uy;V8=1;var e=EK(),t=OK(),n=e(t);return Uy=n,Uy}var Gy,W8;function BT(){if(W8)return Gy;W8=1;var e=c5();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return Gy=t,Gy}var Hy,K8;function AK(){if(K8)return Hy;K8=1;var e=i5(),t=uT(),n=Gs();function r(i,a){return i==null?i:e(i,t(a),n)}return Hy=r,Hy}var Vy,Y8;function RK(){if(Y8)return Vy;Y8=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return Vy=e,Vy}var Wy,X8;function IK(){if(X8)return Wy;X8=1;var e=Np(),t=a5(),n=Wi();function r(i,a){var s={};return a=n(a,3),t(i,function(o,c,d){e(s,c,a(o,c,d))}),s}return Wy=r,Wy}var Ky,Q8;function d5(){if(Q8)return Ky;Q8=1;var e=kl();function t(n,r,i){for(var a=-1,s=n.length;++a<s;){var o=n[a],c=r(o);if(c!=null&&(d===void 0?c===c&&!e(c):i(c,d)))var d=c,f=o}return f}return Ky=t,Ky}var Yy,Z8;function MK(){if(Z8)return Yy;Z8=1;function e(t,n){return t>n}return Yy=e,Yy}var Xy,J8;function LK(){if(J8)return Xy;J8=1;var e=d5(),t=MK(),n=Hs();function r(i){return i&&i.length?e(i,n,t):void 0}return Xy=r,Xy}var Qy,eE;function qT(){if(eE)return Qy;eE=1;var e=Np(),t=vl();function n(r,i,a){(a!==void 0&&!t(r[i],a)||a===void 0&&!(i in r))&&e(r,i,a)}return Qy=n,Qy}var Zy,tE;function DK(){if(tE)return Zy;tE=1;var e=$s,t=Cp(),n=di,r="[object Object]",i=Function.prototype,a=Object.prototype,s=i.toString,o=a.hasOwnProperty,c=s.call(Object);function d(f){if(!n(f)||e(f)!=r)return!1;var p=t(f);if(p===null)return!0;var m=o.call(p,"constructor")&&p.constructor;return typeof m=="function"&&m instanceof m&&s.call(m)==c}return Zy=d,Zy}var Jy,nE;function $T(){if(nE)return Jy;nE=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return Jy=e,Jy}var ex,rE;function FK(){if(rE)return ex;rE=1;var e=zu(),t=Gs();function n(r){return e(r,t(r))}return ex=n,ex}var tx,iE;function zK(){if(iE)return tx;iE=1;var e=qT(),t=XC(),n=sT(),r=QC(),i=lT(),a=Bu(),s=$t(),o=AT(),c=Nl,d=Fu(),f=xr(),p=DK(),m=qu,g=$T(),b=FK();function y(N,v,_,x,w,E,P){var A=g(N,_),T=g(v,_),L=P.get(T);if(L){e(N,_,L);return}var k=E?E(A,T,_+"",N,v,P):void 0,C=k===void 0;if(C){var O=s(T),F=!O&&c(T),M=!O&&!F&&m(T);k=T,O||F||M?s(A)?k=A:o(A)?k=r(A):F?(C=!1,k=t(T,!0)):M?(C=!1,k=n(T,!0)):k=[]:p(T)||a(T)?(k=A,a(A)?k=b(A):(!f(A)||d(A))&&(k=i(T))):C=!1}C&&(P.set(T,k),w(k,T,x,E,P),P.delete(T)),e(N,_,k)}return tx=y,tx}var nx,aE;function BK(){if(aE)return nx;aE=1;var e=_p,t=qT(),n=i5(),r=zK(),i=xr(),a=Gs(),s=$T();function o(c,d,f,p,m){c!==d&&n(d,function(g,b){if(m||(m=new e),i(g))r(c,d,b,f,o,p,m);else{var y=p?p(s(c,b),g,b+"",c,d,m):void 0;y===void 0&&(y=g),t(c,b,y)}},a)}return nx=o,nx}var rx,sE;function qK(){if(sE)return rx;sE=1;var e=Rp(),t=Ip();function n(r){return e(function(i,a){var s=-1,o=a.length,c=o>1?a[o-1]:void 0,d=o>2?a[2]:void 0;for(c=r.length>3&&typeof c=="function"?(o--,c):void 0,d&&t(a[0],a[1],d)&&(c=o<3?void 0:c,o=1),i=Object(i);++s<o;){var f=a[s];f&&r(i,f,s,c)}return i})}return rx=n,rx}var ix,oE;function $K(){if(oE)return ix;oE=1;var e=BK(),t=qK(),n=t(function(r,i,a){e(r,i,a)});return ix=n,ix}var ax,lE;function UT(){if(lE)return ax;lE=1;function e(t,n){return t<n}return ax=e,ax}var sx,cE;function UK(){if(cE)return sx;cE=1;var e=d5(),t=UT(),n=Hs();function r(i){return i&&i.length?e(i,n,t):void 0}return sx=r,sx}var ox,uE;function GK(){if(uE)return ox;uE=1;var e=d5(),t=Wi(),n=UT();function r(i,a){return i&&i.length?e(i,t(a,2),n):void 0}return ox=r,ox}var lx,dE;function HK(){if(dE)return lx;dE=1;var e=qr(),t=function(){return e.Date.now()};return lx=t,lx}var cx,fE;function VK(){if(fE)return cx;fE=1;var e=Sp(),t=Pp(),n=Ep(),r=xr(),i=$u();function a(s,o,c,d){if(!r(s))return s;o=t(o,s);for(var f=-1,p=o.length,m=p-1,g=s;g!=null&&++f<p;){var b=i(o[f]),y=c;if(b==="__proto__"||b==="constructor"||b==="prototype")return s;if(f!=m){var N=g[b];y=d?d(N,b,g):void 0,y===void 0&&(y=r(N)?N:n(o[f+1])?[]:{})}e(g,b,y),g=g[b]}return s}return cx=a,cx}var ux,hE;function WK(){if(hE)return ux;hE=1;var e=Ap(),t=VK(),n=Pp();function r(i,a,s){for(var o=-1,c=a.length,d={};++o<c;){var f=a[o],p=e(i,f);s(p,f)&&t(d,n(f,i),p)}return d}return ux=r,ux}var dx,pE;function KK(){if(pE)return dx;pE=1;var e=WK(),t=wT();function n(r,i){return e(r,i,function(a,s){return t(r,s)})}return dx=n,dx}var fx,mE;function YK(){if(mE)return fx;mE=1;var e=BT(),t=TT(),n=OT();function r(i){return n(t(i,void 0,e),i+"")}return fx=r,fx}var hx,gE;function XK(){if(gE)return hx;gE=1;var e=KK(),t=YK(),n=t(function(r,i){return r==null?{}:e(r,i)});return hx=n,hx}var px,vE;function QK(){if(vE)return px;vE=1;var e=Math.ceil,t=Math.max;function n(r,i,a,s){for(var o=-1,c=t(e((i-r)/(a||1)),0),d=Array(c);c--;)d[s?c:++o]=r,r+=a;return d}return px=n,px}var mx,yE;function ZK(){if(yE)return mx;yE=1;var e=QK(),t=Ip(),n=zT();function r(i){return function(a,s,o){return o&&typeof o!="number"&&t(a,s,o)&&(s=o=void 0),a=n(a),s===void 0?(s=a,a=0):s=n(s),o=o===void 0?a<s?1:-1:n(o),e(a,s,o,i)}}return mx=r,mx}var gx,xE;function JK(){if(xE)return gx;xE=1;var e=ZK(),t=e();return gx=t,gx}var vx,bE;function eY(){if(bE)return vx;bE=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return vx=e,vx}var yx,wE;function tY(){if(wE)return yx;wE=1;var e=kl();function t(n,r){if(n!==r){var i=n!==void 0,a=n===null,s=n===n,o=e(n),c=r!==void 0,d=r===null,f=r===r,p=e(r);if(!d&&!p&&!o&&n>r||o&&c&&f&&!d&&!p||a&&c&&f||!i&&f||!s)return 1;if(!a&&!o&&!p&&n<r||p&&i&&s&&!a&&!o||d&&i&&s||!c&&s||!f)return-1}return 0}return yx=t,yx}var xx,_E;function nY(){if(_E)return xx;_E=1;var e=tY();function t(n,r,i){for(var a=-1,s=n.criteria,o=r.criteria,c=s.length,d=i.length;++a<c;){var f=e(s[a],o[a]);if(f){if(a>=d)return f;var p=i[a];return f*(p=="desc"?-1:1)}}return n.index-r.index}return xx=t,xx}var bx,NE;function rY(){if(NE)return bx;NE=1;var e=Op(),t=Ap(),n=Wi(),r=kT(),i=eY(),a=kp(),s=nY(),o=Hs(),c=$t();function d(f,p,m){p.length?p=e(p,function(y){return c(y)?function(N){return t(N,y.length===1?y[0]:y)}:y}):p=[o];var g=-1;p=e(p,a(n));var b=r(f,function(y,N,v){var _=e(p,function(x){return x(y)});return{criteria:_,index:++g,value:y}});return i(b,function(y,N){return s(y,N,m)})}return bx=d,bx}var wx,SE;function iY(){if(SE)return wx;SE=1;var e=c5(),t=rY(),n=Rp(),r=Ip(),i=n(function(a,s){if(a==null)return[];var o=s.length;return o>1&&r(a,s[0],s[1])?s=[]:o>2&&r(s[0],s[1],s[2])&&(s=[s[0]]),t(a,e(s,1),[])});return wx=i,wx}var _x,EE;function aY(){if(EE)return _x;EE=1;var e=xT(),t=0;function n(r){var i=++t;return e(r)+i}return _x=n,_x}var Nx,kE;function sY(){if(kE)return Nx;kE=1;function e(t,n,r){for(var i=-1,a=t.length,s=n.length,o={};++i<a;){var c=i<s?n[i]:void 0;r(o,t[i],c)}return o}return Nx=e,Nx}var Sx,jE;function oY(){if(jE)return Sx;jE=1;var e=Sp(),t=sY();function n(r,i){return t(r||[],i||[],e)}return Sx=n,Sx}var Dh;if(typeof Ww=="function")try{Dh={cloneDeep:NK(),constant:r5(),defaults:SK(),each:fT(),filter:NT(),find:PK(),flatten:BT(),forEach:dT(),forIn:AK(),has:ST(),isUndefined:ET(),last:RK(),map:jT(),mapValues:IK(),max:LK(),merge:$K(),min:UK(),minBy:GK(),now:HK(),pick:XK(),range:JK(),reduce:CT(),sortBy:iY(),uniqueId:aY(),values:RT(),zipObject:oY()}}catch{}Dh||(Dh=window._);var _t=Dh,lY=Mp;function Mp(){var e={};e._next=e._prev=e,this._sentinel=e}Mp.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return GT(t),t};Mp.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&GT(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t};Mp.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,cY)),n=n._prev;return"["+e.join(", ")+"]"};function GT(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function cY(e,t){if(e!=="_next"&&e!=="_prev")return t}var Ri=_t,uY=$r.Graph,dY=lY,fY=pY,hY=Ri.constant(1);function pY(e,t){if(e.nodeCount()<=1)return[];var n=gY(e,t||hY),r=mY(n.graph,n.buckets,n.zeroIdx);return Ri.flatten(Ri.map(r,function(i){return e.outEdges(i.v,i.w)}),!0)}function mY(e,t,n){for(var r=[],i=t[t.length-1],a=t[0],s;e.nodeCount();){for(;s=a.dequeue();)Ex(e,t,n,s);for(;s=i.dequeue();)Ex(e,t,n,s);if(e.nodeCount()){for(var o=t.length-2;o>0;--o)if(s=t[o].dequeue(),s){r=r.concat(Ex(e,t,n,s,!0));break}}}return r}function Ex(e,t,n,r,i){var a=i?[]:void 0;return Ri.forEach(e.inEdges(r.v),function(s){var o=e.edge(s),c=e.node(s.v);i&&a.push({v:s.v,w:s.w}),c.out-=o,p2(t,n,c)}),Ri.forEach(e.outEdges(r.v),function(s){var o=e.edge(s),c=s.w,d=e.node(c);d.in-=o,p2(t,n,d)}),e.removeNode(r.v),a}function gY(e,t){var n=new uY,r=0,i=0;Ri.forEach(e.nodes(),function(o){n.setNode(o,{v:o,in:0,out:0})}),Ri.forEach(e.edges(),function(o){var c=n.edge(o.v,o.w)||0,d=t(o),f=c+d;n.setEdge(o.v,o.w,f),i=Math.max(i,n.node(o.v).out+=d),r=Math.max(r,n.node(o.w).in+=d)});var a=Ri.range(i+r+3).map(function(){return new dY}),s=r+1;return Ri.forEach(n.nodes(),function(o){p2(a,s,n.node(o))}),{graph:n,buckets:a,zeroIdx:s}}function p2(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var js=_t,vY=fY,yY={run:xY,undo:wY};function xY(e){var t=e.graph().acyclicer==="greedy"?vY(e,n(e)):bY(e);js.forEach(t,function(r){var i=e.edge(r);e.removeEdge(r),i.forwardName=r.name,i.reversed=!0,e.setEdge(r.w,r.v,i,js.uniqueId("rev"))});function n(r){return function(i){return r.edge(i).weight}}}function bY(e){var t=[],n={},r={};function i(a){js.has(r,a)||(r[a]=!0,n[a]=!0,js.forEach(e.outEdges(a),function(s){js.has(n,s.w)?t.push(s):i(s.w)}),delete n[a])}return js.forEach(e.nodes(),i),t}function wY(e){js.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}var tt=_t,HT=$r.Graph,$n={addDummyNode:VT,simplify:_Y,asNonCompoundGraph:NY,successorWeights:SY,predecessorWeights:EY,intersectRect:kY,buildLayerMatrix:jY,normalizeRanks:CY,removeEmptyRanks:TY,addBorderNode:OY,maxRank:WT,partition:PY,time:AY,notime:RY};function VT(e,t,n,r){var i;do i=tt.uniqueId(r);while(e.hasNode(i));return n.dummy=t,e.setNode(i,n),i}function _Y(e){var t=new HT().setGraph(e.graph());return tt.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),tt.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},i=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),t}function NY(e){var t=new HT({multigraph:e.isMultigraph()}).setGraph(e.graph());return tt.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),tt.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function SY(e){var t=tt.map(e.nodes(),function(n){var r={};return tt.forEach(e.outEdges(n),function(i){r[i.w]=(r[i.w]||0)+e.edge(i).weight}),r});return tt.zipObject(e.nodes(),t)}function EY(e){var t=tt.map(e.nodes(),function(n){var r={};return tt.forEach(e.inEdges(n),function(i){r[i.v]=(r[i.v]||0)+e.edge(i).weight}),r});return tt.zipObject(e.nodes(),t)}function kY(e,t){var n=e.x,r=e.y,i=t.x-n,a=t.y-r,s=e.width/2,o=e.height/2;if(!i&&!a)throw new Error("Not possible to find intersection inside of the rectangle");var c,d;return Math.abs(a)*s>Math.abs(i)*o?(a<0&&(o=-o),c=o*i/a,d=o):(i<0&&(s=-s),c=s,d=s*a/i),{x:n+c,y:r+d}}function jY(e){var t=tt.map(tt.range(WT(e)+1),function(){return[]});return tt.forEach(e.nodes(),function(n){var r=e.node(n),i=r.rank;tt.isUndefined(i)||(t[i][r.order]=n)}),t}function CY(e){var t=tt.min(tt.map(e.nodes(),function(n){return e.node(n).rank}));tt.forEach(e.nodes(),function(n){var r=e.node(n);tt.has(r,"rank")&&(r.rank-=t)})}function TY(e){var t=tt.min(tt.map(e.nodes(),function(a){return e.node(a).rank})),n=[];tt.forEach(e.nodes(),function(a){var s=e.node(a).rank-t;n[s]||(n[s]=[]),n[s].push(a)});var r=0,i=e.graph().nodeRankFactor;tt.forEach(n,function(a,s){tt.isUndefined(a)&&s%i!==0?--r:r&&tt.forEach(a,function(o){e.node(o).rank+=r})})}function OY(e,t,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),VT(e,"border",i,t)}function WT(e){return tt.max(tt.map(e.nodes(),function(t){var n=e.node(t).rank;if(!tt.isUndefined(n))return n}))}function PY(e,t){var n={lhs:[],rhs:[]};return tt.forEach(e,function(r){t(r)?n.lhs.push(r):n.rhs.push(r)}),n}function AY(e,t){var n=tt.now();try{return t()}finally{console.log(e+" time: "+(tt.now()-n)+"ms")}}function RY(e,t){return t()}var KT=_t,IY=$n,MY={run:LY,undo:FY};function LY(e){e.graph().dummyChains=[],KT.forEach(e.edges(),function(t){DY(e,t)})}function DY(e,t){var n=t.v,r=e.node(n).rank,i=t.w,a=e.node(i).rank,s=t.name,o=e.edge(t),c=o.labelRank;if(a!==r+1){e.removeEdge(t);var d,f,p;for(p=0,++r;r<a;++p,++r)o.points=[],f={width:0,height:0,edgeLabel:o,edgeObj:t,rank:r},d=IY.addDummyNode(e,"edge",f,"_d"),r===c&&(f.width=o.width,f.height=o.height,f.dummy="edge-label",f.labelpos=o.labelpos),e.setEdge(n,d,{weight:o.weight},s),p===0&&e.graph().dummyChains.push(d),n=d;e.setEdge(n,i,{weight:o.weight},s)}}function FY(e){KT.forEach(e.graph().dummyChains,function(t){var n=e.node(t),r=n.edgeLabel,i;for(e.setEdge(n.edgeObj,r);n.dummy;)i=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=i,n=e.node(t)})}var Sf=_t,Lp={longestPath:zY,slack:BY};function zY(e){var t={};function n(r){var i=e.node(r);if(Sf.has(t,r))return i.rank;t[r]=!0;var a=Sf.min(Sf.map(e.outEdges(r),function(s){return n(s.w)-e.edge(s).minlen}));return(a===Number.POSITIVE_INFINITY||a===void 0||a===null)&&(a=0),i.rank=a}Sf.forEach(e.sources(),n)}function BY(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var Fh=_t,qY=$r.Graph,zh=Lp.slack,YT=$Y;function $Y(e){var t=new qY({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});for(var i,a;UY(t,e)<r;)i=GY(t,e),a=t.hasNode(i.v)?zh(e,i):-zh(e,i),HY(t,e,a);return t}function UY(e,t){function n(r){Fh.forEach(t.nodeEdges(r),function(i){var a=i.v,s=r===a?i.w:a;!e.hasNode(s)&&!zh(t,i)&&(e.setNode(s,{}),e.setEdge(r,s,{}),n(s))})}return Fh.forEach(e.nodes(),n),e.nodeCount()}function GY(e,t){return Fh.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return zh(t,n)})}function HY(e,t,n){Fh.forEach(e.nodes(),function(r){t.node(r).rank+=n})}var Ui=_t,VY=YT,WY=Lp.slack,KY=Lp.longestPath,YY=$r.alg.preorder,XY=$r.alg.postorder,QY=$n.simplify,ZY=Vs;Vs.initLowLimValues=h5;Vs.initCutValues=f5;Vs.calcCutValue=XT;Vs.leaveEdge=ZT;Vs.enterEdge=JT;Vs.exchangeEdges=eO;function Vs(e){e=QY(e),KY(e);var t=VY(e);h5(t),f5(t,e);for(var n,r;n=ZT(t);)r=JT(t,e,n),eO(t,e,n,r)}function f5(e,t){var n=XY(e,e.nodes());n=n.slice(0,n.length-1),Ui.forEach(n,function(r){JY(e,t,r)})}function JY(e,t,n){var r=e.node(n),i=r.parent;e.edge(n,i).cutvalue=XT(e,t,n)}function XT(e,t,n){var r=e.node(n),i=r.parent,a=!0,s=t.edge(n,i),o=0;return s||(a=!1,s=t.edge(i,n)),o=s.weight,Ui.forEach(t.nodeEdges(n),function(c){var d=c.v===n,f=d?c.w:c.v;if(f!==i){var p=d===a,m=t.edge(c).weight;if(o+=p?m:-m,tX(e,n,f)){var g=e.edge(n,f).cutvalue;o+=p?-g:g}}}),o}function h5(e,t){arguments.length<2&&(t=e.nodes()[0]),QT(e,{},1,t)}function QT(e,t,n,r,i){var a=n,s=e.node(r);return t[r]=!0,Ui.forEach(e.neighbors(r),function(o){Ui.has(t,o)||(n=QT(e,t,n,o,r))}),s.low=a,s.lim=n++,i?s.parent=i:delete s.parent,n}function ZT(e){return Ui.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function JT(e,t,n){var r=n.v,i=n.w;t.hasEdge(r,i)||(r=n.w,i=n.v);var a=e.node(r),s=e.node(i),o=a,c=!1;a.lim>s.lim&&(o=s,c=!0);var d=Ui.filter(t.edges(),function(f){return c===CE(e,e.node(f.v),o)&&c!==CE(e,e.node(f.w),o)});return Ui.minBy(d,function(f){return WY(t,f)})}function eO(e,t,n,r){var i=n.v,a=n.w;e.removeEdge(i,a),e.setEdge(r.v,r.w,{}),h5(e),f5(e,t),eX(e,t)}function eX(e,t){var n=Ui.find(e.nodes(),function(i){return!t.node(i).parent}),r=YY(e,n);r=r.slice(1),Ui.forEach(r,function(i){var a=e.node(i).parent,s=t.edge(i,a),o=!1;s||(s=t.edge(a,i),o=!0),t.node(i).rank=t.node(a).rank+(o?s.minlen:-s.minlen)})}function tX(e,t,n){return e.hasEdge(t,n)}function CE(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var nX=Lp,tO=nX.longestPath,rX=YT,iX=ZY,aX=sX;function sX(e){switch(e.graph().ranker){case"network-simplex":TE(e);break;case"tight-tree":lX(e);break;case"longest-path":oX(e);break;default:TE(e)}}var oX=tO;function lX(e){tO(e),rX(e)}function TE(e){iX(e)}var m2=_t,cX=uX;function uX(e){var t=fX(e);m2.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),i=r.edgeObj,a=dX(e,t,i.v,i.w),s=a.path,o=a.lca,c=0,d=s[c],f=!0;n!==i.w;){if(r=e.node(n),f){for(;(d=s[c])!==o&&e.node(d).maxRank<r.rank;)c++;d===o&&(f=!1)}if(!f){for(;c<s.length-1&&e.node(d=s[c+1]).minRank<=r.rank;)c++;d=s[c]}e.setParent(n,d),n=e.successors(n)[0]}})}function dX(e,t,n,r){var i=[],a=[],s=Math.min(t[n].low,t[r].low),o=Math.max(t[n].lim,t[r].lim),c,d;c=n;do c=e.parent(c),i.push(c);while(c&&(t[c].low>s||o>t[c].lim));for(d=c,c=r;(c=e.parent(c))!==d;)a.push(c);return{path:i.concat(a.reverse()),lca:d}}function fX(e){var t={},n=0;function r(i){var a=n;m2.forEach(e.children(i),r),t[i]={low:a,lim:n++}}return m2.forEach(e.children(),r),t}var Ii=_t,g2=$n,hX={run:pX,cleanup:vX};function pX(e){var t=g2.addDummyNode(e,"root",{},"_root"),n=mX(e),r=Ii.max(Ii.values(n))-1,i=2*r+1;e.graph().nestingRoot=t,Ii.forEach(e.edges(),function(s){e.edge(s).minlen*=i});var a=gX(e)+1;Ii.forEach(e.children(),function(s){nO(e,t,i,a,r,n,s)}),e.graph().nodeRankFactor=i}function nO(e,t,n,r,i,a,s){var o=e.children(s);if(!o.length){s!==t&&e.setEdge(t,s,{weight:0,minlen:n});return}var c=g2.addBorderNode(e,"_bt"),d=g2.addBorderNode(e,"_bb"),f=e.node(s);e.setParent(c,s),f.borderTop=c,e.setParent(d,s),f.borderBottom=d,Ii.forEach(o,function(p){nO(e,t,n,r,i,a,p);var m=e.node(p),g=m.borderTop?m.borderTop:p,b=m.borderBottom?m.borderBottom:p,y=m.borderTop?r:2*r,N=g!==b?1:i-a[s]+1;e.setEdge(c,g,{weight:y,minlen:N,nestingEdge:!0}),e.setEdge(b,d,{weight:y,minlen:N,nestingEdge:!0})}),e.parent(s)||e.setEdge(t,c,{weight:0,minlen:i+a[s]})}function mX(e){var t={};function n(r,i){var a=e.children(r);a&&a.length&&Ii.forEach(a,function(s){n(s,i+1)}),t[r]=i}return Ii.forEach(e.children(),function(r){n(r,1)}),t}function gX(e){return Ii.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function vX(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,Ii.forEach(e.edges(),function(n){var r=e.edge(n);r.nestingEdge&&e.removeEdge(n)})}var kx=_t,yX=$n,xX=bX;function bX(e){function t(n){var r=e.children(n),i=e.node(n);if(r.length&&kx.forEach(r,t),kx.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var a=i.minRank,s=i.maxRank+1;a<s;++a)OE(e,"borderLeft","_bl",n,i,a),OE(e,"borderRight","_br",n,i,a)}}kx.forEach(e.children(),t)}function OE(e,t,n,r,i,a){var s={width:0,height:0,rank:a,borderType:t},o=i[t][a-1],c=yX.addDummyNode(e,"border",s,n);i[t][a]=c,e.setParent(c,r),o&&e.setEdge(o,c,{weight:1})}var si=_t,wX={adjust:_X,undo:NX};function _X(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&rO(e)}function NX(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&SX(e),(t==="lr"||t==="rl")&&(EX(e),rO(e))}function rO(e){si.forEach(e.nodes(),function(t){PE(e.node(t))}),si.forEach(e.edges(),function(t){PE(e.edge(t))})}function PE(e){var t=e.width;e.width=e.height,e.height=t}function SX(e){si.forEach(e.nodes(),function(t){jx(e.node(t))}),si.forEach(e.edges(),function(t){var n=e.edge(t);si.forEach(n.points,jx),si.has(n,"y")&&jx(n)})}function jx(e){e.y=-e.y}function EX(e){si.forEach(e.nodes(),function(t){Cx(e.node(t))}),si.forEach(e.edges(),function(t){var n=e.edge(t);si.forEach(n.points,Cx),si.has(n,"x")&&Cx(n)})}function Cx(e){var t=e.x;e.x=e.y,e.y=t}var Ei=_t,kX=jX;function jX(e){var t={},n=Ei.filter(e.nodes(),function(o){return!e.children(o).length}),r=Ei.max(Ei.map(n,function(o){return e.node(o).rank})),i=Ei.map(Ei.range(r+1),function(){return[]});function a(o){if(!Ei.has(t,o)){t[o]=!0;var c=e.node(o);i[c.rank].push(o),Ei.forEach(e.successors(o),a)}}var s=Ei.sortBy(n,function(o){return e.node(o).rank});return Ei.forEach(s,a),i}var fa=_t,CX=TX;function TX(e,t){for(var n=0,r=1;r<t.length;++r)n+=OX(e,t[r-1],t[r]);return n}function OX(e,t,n){for(var r=fa.zipObject(n,fa.map(n,function(d,f){return f})),i=fa.flatten(fa.map(t,function(d){return fa.sortBy(fa.map(e.outEdges(d),function(f){return{pos:r[f.w],weight:e.edge(f).weight}}),"pos")}),!0),a=1;a<n.length;)a<<=1;var s=2*a-1;a-=1;var o=fa.map(new Array(s),function(){return 0}),c=0;return fa.forEach(i.forEach(function(d){var f=d.pos+a;o[f]+=d.weight;for(var p=0;f>0;)f%2&&(p+=o[f+1]),f=f-1>>1,o[f]+=d.weight;c+=d.weight*p})),c}var AE=_t,PX=AX;function AX(e,t){return AE.map(t,function(n){var r=e.inEdges(n);if(r.length){var i=AE.reduce(r,function(a,s){var o=e.edge(s),c=e.node(s.v);return{sum:a.sum+o.weight*c.order,weight:a.weight+o.weight}},{sum:0,weight:0});return{v:n,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:n}})}var Kn=_t,RX=IX;function IX(e,t){var n={};Kn.forEach(e,function(i,a){var s=n[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:a};Kn.isUndefined(i.barycenter)||(s.barycenter=i.barycenter,s.weight=i.weight)}),Kn.forEach(t.edges(),function(i){var a=n[i.v],s=n[i.w];!Kn.isUndefined(a)&&!Kn.isUndefined(s)&&(s.indegree++,a.out.push(n[i.w]))});var r=Kn.filter(n,function(i){return!i.indegree});return MX(r)}function MX(e){var t=[];function n(a){return function(s){s.merged||(Kn.isUndefined(s.barycenter)||Kn.isUndefined(a.barycenter)||s.barycenter>=a.barycenter)&&LX(a,s)}}function r(a){return function(s){s.in.push(a),--s.indegree===0&&e.push(s)}}for(;e.length;){var i=e.pop();t.push(i),Kn.forEach(i.in.reverse(),n(i)),Kn.forEach(i.out,r(i))}return Kn.map(Kn.filter(t,function(a){return!a.merged}),function(a){return Kn.pick(a,["vs","i","barycenter","weight"])})}function LX(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}var Fc=_t,DX=$n,FX=zX;function zX(e,t){var n=DX.partition(e,function(f){return Fc.has(f,"barycenter")}),r=n.lhs,i=Fc.sortBy(n.rhs,function(f){return-f.i}),a=[],s=0,o=0,c=0;r.sort(BX(!!t)),c=RE(a,i,c),Fc.forEach(r,function(f){c+=f.vs.length,a.push(f.vs),s+=f.barycenter*f.weight,o+=f.weight,c=RE(a,i,c)});var d={vs:Fc.flatten(a,!0)};return o&&(d.barycenter=s/o,d.weight=o),d}function RE(e,t,n){for(var r;t.length&&(r=Fc.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}function BX(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}var _a=_t,qX=PX,$X=RX,UX=FX,GX=iO;function iO(e,t,n,r){var i=e.children(t),a=e.node(t),s=a?a.borderLeft:void 0,o=a?a.borderRight:void 0,c={};s&&(i=_a.filter(i,function(b){return b!==s&&b!==o}));var d=qX(e,i);_a.forEach(d,function(b){if(e.children(b.v).length){var y=iO(e,b.v,n,r);c[b.v]=y,_a.has(y,"barycenter")&&VX(b,y)}});var f=$X(d,n);HX(f,c);var p=UX(f,r);if(s&&(p.vs=_a.flatten([s,p.vs,o],!0),e.predecessors(s).length)){var m=e.node(e.predecessors(s)[0]),g=e.node(e.predecessors(o)[0]);_a.has(p,"barycenter")||(p.barycenter=0,p.weight=0),p.barycenter=(p.barycenter*p.weight+m.order+g.order)/(p.weight+2),p.weight+=2}return p}function HX(e,t){_a.forEach(e,function(n){n.vs=_a.flatten(n.vs.map(function(r){return t[r]?t[r].vs:r}),!0)})}function VX(e,t){_a.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var zc=_t,WX=$r.Graph,KX=YX;function YX(e,t,n){var r=XX(e),i=new WX({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(a){return e.node(a)});return zc.forEach(e.nodes(),function(a){var s=e.node(a),o=e.parent(a);(s.rank===t||s.minRank<=t&&t<=s.maxRank)&&(i.setNode(a),i.setParent(a,o||r),zc.forEach(e[n](a),function(c){var d=c.v===a?c.w:c.v,f=i.edge(d,a),p=zc.isUndefined(f)?0:f.weight;i.setEdge(d,a,{weight:e.edge(c).weight+p})}),zc.has(s,"minRank")&&i.setNode(a,{borderLeft:s.borderLeft[t],borderRight:s.borderRight[t]}))}),i}function XX(e){for(var t;e.hasNode(t=zc.uniqueId("_root")););return t}var QX=_t,ZX=JX;function JX(e,t,n){var r={},i;QX.forEach(n,function(a){for(var s=e.parent(a),o,c;s;){if(o=e.parent(s),o?(c=r[o],r[o]=s):(c=i,i=s),c&&c!==s){t.setEdge(c,s);return}s=o}})}var Da=_t,eQ=kX,tQ=CX,nQ=GX,rQ=KX,iQ=ZX,aQ=$r.Graph,IE=$n,sQ=oQ;function oQ(e){var t=IE.maxRank(e),n=ME(e,Da.range(1,t+1),"inEdges"),r=ME(e,Da.range(t-1,-1,-1),"outEdges"),i=eQ(e);LE(e,i);for(var a=Number.POSITIVE_INFINITY,s,o=0,c=0;c<4;++o,++c){lQ(o%2?n:r,o%4>=2),i=IE.buildLayerMatrix(e);var d=tQ(e,i);d<a&&(c=0,s=Da.cloneDeep(i),a=d)}LE(e,s)}function ME(e,t,n){return Da.map(t,function(r){return rQ(e,r,n)})}function lQ(e,t){var n=new aQ;Da.forEach(e,function(r){var i=r.graph().root,a=nQ(r,i,n,t);Da.forEach(a.vs,function(s,o){r.node(s).order=o}),iQ(r,n,a.vs)})}function LE(e,t){Da.forEach(t,function(n){Da.forEach(n,function(r,i){e.node(r).order=i})})}var Ie=_t,cQ=$r.Graph,uQ=$n,dQ={positionX:pQ,findType1Conflicts:aO,findType2Conflicts:sO,addConflict:p5,hasConflict:oO,verticalAlignment:lO,horizontalCompaction:cO,alignCoordinates:dO,findSmallestWidthAlignment:uO,balance:fO};function aO(e,t){var n={};function r(i,a){var s=0,o=0,c=i.length,d=Ie.last(a);return Ie.forEach(a,function(f,p){var m=fQ(e,f),g=m?e.node(m).order:c;(m||f===d)&&(Ie.forEach(a.slice(o,p+1),function(b){Ie.forEach(e.predecessors(b),function(y){var N=e.node(y),v=N.order;(v<s||g<v)&&!(N.dummy&&e.node(b).dummy)&&p5(n,y,b)})}),o=p+1,s=g)}),a}return Ie.reduce(t,r),n}function sO(e,t){var n={};function r(a,s,o,c,d){var f;Ie.forEach(Ie.range(s,o),function(p){f=a[p],e.node(f).dummy&&Ie.forEach(e.predecessors(f),function(m){var g=e.node(m);g.dummy&&(g.order<c||g.order>d)&&p5(n,m,f)})})}function i(a,s){var o=-1,c,d=0;return Ie.forEach(s,function(f,p){if(e.node(f).dummy==="border"){var m=e.predecessors(f);m.length&&(c=e.node(m[0]).order,r(s,d,p,o,c),d=p,o=c)}r(s,d,s.length,c,a.length)}),s}return Ie.reduce(t,i),n}function fQ(e,t){if(e.node(t).dummy)return Ie.find(e.predecessors(t),function(n){return e.node(n).dummy})}function p5(e,t,n){if(t>n){var r=t;t=n,n=r}var i=e[t];i||(e[t]=i={}),i[n]=!0}function oO(e,t,n){if(t>n){var r=t;t=n,n=r}return Ie.has(e[t],n)}function lO(e,t,n,r){var i={},a={},s={};return Ie.forEach(t,function(o){Ie.forEach(o,function(c,d){i[c]=c,a[c]=c,s[c]=d})}),Ie.forEach(t,function(o){var c=-1;Ie.forEach(o,function(d){var f=r(d);if(f.length){f=Ie.sortBy(f,function(y){return s[y]});for(var p=(f.length-1)/2,m=Math.floor(p),g=Math.ceil(p);m<=g;++m){var b=f[m];a[d]===d&&c<s[b]&&!oO(n,d,b)&&(a[b]=d,a[d]=i[d]=i[b],c=s[b])}}})}),{root:i,align:a}}function cO(e,t,n,r,i){var a={},s=hQ(e,t,n,i),o=i?"borderLeft":"borderRight";function c(p,m){for(var g=s.nodes(),b=g.pop(),y={};b;)y[b]?p(b):(y[b]=!0,g.push(b),g=g.concat(m(b))),b=g.pop()}function d(p){a[p]=s.inEdges(p).reduce(function(m,g){return Math.max(m,a[g.v]+s.edge(g))},0)}function f(p){var m=s.outEdges(p).reduce(function(b,y){return Math.min(b,a[y.w]-s.edge(y))},Number.POSITIVE_INFINITY),g=e.node(p);m!==Number.POSITIVE_INFINITY&&g.borderType!==o&&(a[p]=Math.max(a[p],m))}return c(d,s.predecessors.bind(s)),c(f,s.successors.bind(s)),Ie.forEach(r,function(p){a[p]=a[n[p]]}),a}function hQ(e,t,n,r){var i=new cQ,a=e.graph(),s=mQ(a.nodesep,a.edgesep,r);return Ie.forEach(t,function(o){var c;Ie.forEach(o,function(d){var f=n[d];if(i.setNode(f),c){var p=n[c],m=i.edge(p,f);i.setEdge(p,f,Math.max(s(e,d,c),m||0))}c=d})}),i}function uO(e,t){return Ie.minBy(Ie.values(t),function(n){var r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return Ie.forIn(n,function(a,s){var o=gQ(e,s)/2;r=Math.max(a+o,r),i=Math.min(a-o,i)}),r-i})}function dO(e,t){var n=Ie.values(t),r=Ie.min(n),i=Ie.max(n);Ie.forEach(["u","d"],function(a){Ie.forEach(["l","r"],function(s){var o=a+s,c=e[o],d;if(c!==t){var f=Ie.values(c);d=s==="l"?r-Ie.min(f):i-Ie.max(f),d&&(e[o]=Ie.mapValues(c,function(p){return p+d}))}})})}function fO(e,t){return Ie.mapValues(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var i=Ie.sortBy(Ie.map(e,r));return(i[1]+i[2])/2})}function pQ(e){var t=uQ.buildLayerMatrix(e),n=Ie.merge(aO(e,t),sO(e,t)),r={},i;Ie.forEach(["u","d"],function(s){i=s==="u"?t:Ie.values(t).reverse(),Ie.forEach(["l","r"],function(o){o==="r"&&(i=Ie.map(i,function(p){return Ie.values(p).reverse()}));var c=(s==="u"?e.predecessors:e.successors).bind(e),d=lO(e,i,n,c),f=cO(e,i,d.root,d.align,o==="r");o==="r"&&(f=Ie.mapValues(f,function(p){return-p})),r[s+o]=f})});var a=uO(e,r);return dO(r,a),fO(r,e.graph().align)}function mQ(e,t,n){return function(r,i,a){var s=r.node(i),o=r.node(a),c=0,d;if(c+=s.width/2,Ie.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":d=-s.width/2;break;case"r":d=s.width/2;break}if(d&&(c+=n?d:-d),d=0,c+=(s.dummy?t:e)/2,c+=(o.dummy?t:e)/2,c+=o.width/2,Ie.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":d=o.width/2;break;case"r":d=-o.width/2;break}return d&&(c+=n?d:-d),d=0,c}}function gQ(e,t){return e.node(t).width}var Bc=_t,hO=$n,vQ=dQ.positionX,yQ=xQ;function xQ(e){e=hO.asNonCompoundGraph(e),bQ(e),Bc.forEach(vQ(e),function(t,n){e.node(n).x=t})}function bQ(e){var t=hO.buildLayerMatrix(e),n=e.graph().ranksep,r=0;Bc.forEach(t,function(i){var a=Bc.max(Bc.map(i,function(s){return e.node(s).height}));Bc.forEach(i,function(s){e.node(s).y=r+a/2}),r+=a+n})}var $e=_t,DE=yY,FE=MY,wQ=aX,_Q=$n.normalizeRanks,NQ=cX,SQ=$n.removeEmptyRanks,zE=hX,EQ=xX,BE=wX,kQ=sQ,jQ=yQ,$a=$n,CQ=$r.Graph,TQ=OQ;function OQ(e,t){var n=t&&t.debugTiming?$a.time:$a.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return qQ(e)});n("  runLayout",function(){PQ(r,n)}),n("  updateInputGraph",function(){AQ(e,r)})})}function PQ(e,t){t("    makeSpaceForEdgeLabels",function(){$Q(e)}),t("    removeSelfEdges",function(){QQ(e)}),t("    acyclic",function(){DE.run(e)}),t("    nestingGraph.run",function(){zE.run(e)}),t("    rank",function(){wQ($a.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){UQ(e)}),t("    removeEmptyRanks",function(){SQ(e)}),t("    nestingGraph.cleanup",function(){zE.cleanup(e)}),t("    normalizeRanks",function(){_Q(e)}),t("    assignRankMinMax",function(){GQ(e)}),t("    removeEdgeLabelProxies",function(){HQ(e)}),t("    normalize.run",function(){FE.run(e)}),t("    parentDummyChains",function(){NQ(e)}),t("    addBorderSegments",function(){EQ(e)}),t("    order",function(){kQ(e)}),t("    insertSelfEdges",function(){ZQ(e)}),t("    adjustCoordinateSystem",function(){BE.adjust(e)}),t("    position",function(){jQ(e)}),t("    positionSelfEdges",function(){JQ(e)}),t("    removeBorderNodes",function(){XQ(e)}),t("    normalize.undo",function(){FE.undo(e)}),t("    fixupEdgeLabelCoords",function(){KQ(e)}),t("    undoCoordinateSystem",function(){BE.undo(e)}),t("    translateGraph",function(){VQ(e)}),t("    assignNodeIntersects",function(){WQ(e)}),t("    reversePoints",function(){YQ(e)}),t("    acyclic.undo",function(){DE.undo(e)})}function AQ(e,t){$e.forEach(e.nodes(),function(n){var r=e.node(n),i=t.node(n);r&&(r.x=i.x,r.y=i.y,t.children(n).length&&(r.width=i.width,r.height=i.height))}),$e.forEach(e.edges(),function(n){var r=e.edge(n),i=t.edge(n);r.points=i.points,$e.has(i,"x")&&(r.x=i.x,r.y=i.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var RQ=["nodesep","edgesep","ranksep","marginx","marginy"],IQ={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},MQ=["acyclicer","ranker","rankdir","align"],LQ=["width","height"],DQ={width:0,height:0},FQ=["minlen","weight","width","height","labeloffset"],zQ={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},BQ=["labelpos"];function qQ(e){var t=new CQ({multigraph:!0,compound:!0}),n=Ox(e.graph());return t.setGraph($e.merge({},IQ,Tx(n,RQ),$e.pick(n,MQ))),$e.forEach(e.nodes(),function(r){var i=Ox(e.node(r));t.setNode(r,$e.defaults(Tx(i,LQ),DQ)),t.setParent(r,e.parent(r))}),$e.forEach(e.edges(),function(r){var i=Ox(e.edge(r));t.setEdge(r,$e.merge({},zQ,Tx(i,FQ),$e.pick(i,BQ)))}),t}function $Q(e){var t=e.graph();t.ranksep/=2,$e.forEach(e.edges(),function(n){var r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function UQ(e){$e.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),i=e.node(t.w),a={rank:(i.rank-r.rank)/2+r.rank,e:t};$a.addDummyNode(e,"edge-proxy",a,"_ep")}})}function GQ(e){var t=0;$e.forEach(e.nodes(),function(n){var r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=$e.max(t,r.maxRank))}),e.graph().maxRank=t}function HQ(e){$e.forEach(e.nodes(),function(t){var n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function VQ(e){var t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,a=e.graph(),s=a.marginx||0,o=a.marginy||0;function c(d){var f=d.x,p=d.y,m=d.width,g=d.height;t=Math.min(t,f-m/2),n=Math.max(n,f+m/2),r=Math.min(r,p-g/2),i=Math.max(i,p+g/2)}$e.forEach(e.nodes(),function(d){c(e.node(d))}),$e.forEach(e.edges(),function(d){var f=e.edge(d);$e.has(f,"x")&&c(f)}),t-=s,r-=o,$e.forEach(e.nodes(),function(d){var f=e.node(d);f.x-=t,f.y-=r}),$e.forEach(e.edges(),function(d){var f=e.edge(d);$e.forEach(f.points,function(p){p.x-=t,p.y-=r}),$e.has(f,"x")&&(f.x-=t),$e.has(f,"y")&&(f.y-=r)}),a.width=n-t+s,a.height=i-r+o}function WQ(e){$e.forEach(e.edges(),function(t){var n=e.edge(t),r=e.node(t.v),i=e.node(t.w),a,s;n.points?(a=n.points[0],s=n.points[n.points.length-1]):(n.points=[],a=i,s=r),n.points.unshift($a.intersectRect(r,a)),n.points.push($a.intersectRect(i,s))})}function KQ(e){$e.forEach(e.edges(),function(t){var n=e.edge(t);if($e.has(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function YQ(e){$e.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function XQ(e){$e.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),r=e.node(n.borderTop),i=e.node(n.borderBottom),a=e.node($e.last(n.borderLeft)),s=e.node($e.last(n.borderRight));n.width=Math.abs(s.x-a.x),n.height=Math.abs(i.y-r.y),n.x=a.x+n.width/2,n.y=r.y+n.height/2}}),$e.forEach(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function QQ(e){$e.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function ZQ(e){var t=$a.buildLayerMatrix(e);$e.forEach(t,function(n){var r=0;$e.forEach(n,function(i,a){var s=e.node(i);s.order=a+r,$e.forEach(s.selfEdges,function(o){$a.addDummyNode(e,"selfedge",{width:o.label.width,height:o.label.height,rank:s.rank,order:a+ ++r,e:o.e,label:o.label},"_se")}),delete s.selfEdges})})}function JQ(e){$e.forEach(e.nodes(),function(t){var n=e.node(t);if(n.dummy==="selfedge"){var r=e.node(n.e.v),i=r.x+r.width/2,a=r.y,s=n.x-i,o=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:i+2*s/3,y:a-o},{x:i+5*s/6,y:a-o},{x:i+s,y:a},{x:i+5*s/6,y:a+o},{x:i+2*s/3,y:a+o}],n.label.x=n.x,n.label.y=n.y}})}function Tx(e,t){return $e.mapValues($e.pick(e,t),Number)}function Ox(e){var t={};return $e.forEach(e,function(n,r){t[r.toLowerCase()]=n}),t}var Ef=_t,eZ=$n,tZ=$r.Graph,nZ={debugOrdering:rZ};function rZ(e){var t=eZ.buildLayerMatrix(e),n=new tZ({compound:!0,multigraph:!0}).setGraph({});return Ef.forEach(e.nodes(),function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),Ef.forEach(e.edges(),function(r){n.setEdge(r.v,r.w,{},r.name)}),Ef.forEach(t,function(r,i){var a="layer"+i;n.setNode(a,{rank:"same"}),Ef.reduce(r,function(s,o){return n.setEdge(s,o,{style:"invis"}),o})}),n}var iZ="0.8.5",aZ={graphlib:$r,layout:TQ,debug:nZ,util:{time:$n.time,notime:$n.notime},version:iZ};const qE=dl(aZ),sZ=()=>{nr();const e=G.useRef(null),[t,n,r]=l$([]),[i,a,s]=c$([]),[o,c]=G.useState([]),[d,f]=G.useState([]),[p,m]=G.useState("All"),[g,b]=G.useState(""),[y,N]=G.useState(!0),[v,_]=G.useState(null);G.useEffect(()=>{x()},[]),G.useEffect(()=>{w()},[o,p,g,t]);const x=async()=>{N(!0);try{const C=await be.get("/world-bible/entities");c(C),n([]),a([])}catch(C){console.error("Failed to load data",C)}finally{N(!1)}},w=()=>{let C=o;if(p!=="All"&&(C=C.filter(O=>p==="Individual"?O.categoria==="Individual"||!O.categoria&&(O.tipoEspecial==="entidadindividual"||!O.tipoEspecial):O.categoria===p)),g){const O=g.toLowerCase();C=C.filter(F=>F.nombre.toLowerCase().includes(O))}f(C)},E=G.useCallback(C=>a(O=>sC({...C,type:"smoothstep",animated:!0,style:{stroke:"#6366f1"},markerEnd:{type:ol.ArrowClosed,color:"#6366f1"}},O)),[]),P=G.useCallback(C=>{C.preventDefault(),C.dataTransfer.dropEffect="move"},[]),A=G.useCallback(C=>{C.preventDefault();const O=C.dataTransfer.getData("application/reactflow/id"),F=JSON.parse(C.dataTransfer.getData("application/reactflow/data"));if(!O||!F)return;const M=v.screenToFlowPosition({x:C.clientX,y:C.clientY});let D="#475569";F.categoria==="Individual"?D="#6366f1":F.categoria==="Location"?D="#10b981":F.categoria==="Group"&&(D="#a855f7");const $={id:`node-${O}`,type:"default",position:M,data:{label:F.nombre,entityId:O,...F},style:{background:"rgba(20, 20, 25, 0.9)",color:"#fff",border:`1px solid ${D}`,borderRadius:"12px",padding:"10px",minWidth:"150px",backdropFilter:"blur(10px)",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}};n(V=>V.concat($))},[v]),T=(C,O,F="TB")=>{const M=new qE.graphlib.Graph;M.setDefaultEdgeLabel(()=>({}));const D=F==="LR";return M.setGraph({rankdir:F}),C.forEach(V=>{M.setNode(V.id,{width:220,height:100})}),O.forEach(V=>{M.setEdge(V.source,V.target)}),qE.layout(M),{nodes:C.map(V=>{const K=M.node(V.id);return V.targetPosition=D?"left":"top",V.sourcePosition=D?"right":"bottom",V.position={x:K.x-220/2,y:K.y-100/2},V}),edges:O}},L=()=>{const C=o.map(D=>{let $="#475569";return D.categoria==="Individual"?$="#6366f1":D.categoria==="Location"?$="#10b981":D.categoria==="Group"&&($="#a855f7"),{id:`node-${D.id}`,type:"default",position:{x:0,y:0},data:{label:D.nombre,entityId:D.id,...D},style:{background:"rgba(20, 20, 25, 0.9)",color:"#fff",border:`1px solid ${$}`,borderRadius:"12px",padding:"10px",minWidth:"150px",backdropFilter:"blur(10px)",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}}),O=[];o.forEach(D=>{D.valores&&Array.isArray(D.valores)&&D.valores.forEach($=>{if($.plantilla&&$.plantilla.tipo==="entity_link"&&$.valor){const V=`node-${$.valor}`,K=`node-${D.id}`;V!==K&&O.push({id:`e${D.id}-${$.valor}`,source:K,target:V,type:"smoothstep",animated:!0,style:{stroke:"#6366f1"},markerEnd:{type:ol.ArrowClosed,color:"#6366f1"}})}})});const{nodes:F,edges:M}=T(C,O);n([...F]),a([...M]),setTimeout(()=>{v&&v.fitView()},100)},k=(C,O)=>{C.dataTransfer.setData("application/reactflow/id",O.id),C.dataTransfer.setData("application/reactflow/data",JSON.stringify(O)),C.dataTransfer.effectAllowed="move"};return l.jsxs("div",{className:"w-full flex h-full bg-[#050508] relative overflow-hidden font-manrope",children:[l.jsxs("aside",{className:"w-80 border-r border-white/5 bg-surface-dark/80 backdrop-blur-xl flex flex-col z-20 shadow-2xl",children:[l.jsxs("div",{className:"p-6 border-b border-white/5 space-y-6 bg-gradient-to-b from-white/5 to-transparent",children:[l.jsxs("h2",{className:"text-sm font-black uppercase tracking-widest text-white flex items-center gap-3",children:[l.jsx("div",{className:"size-8 rounded-lg bg-primary flex items-center justify-center shadow-lg shadow-primary/20",children:l.jsx("span",{className:"material-symbols-outlined text-white text-lg",children:"hub"})}),"Graph Composer"]}),l.jsxs("div",{className:"relative group",children:[l.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-500 text-sm group-focus-within:text-primary transition-colors",children:"search"}),l.jsx("input",{type:"text",placeholder:"Search entities...",className:"w-full bg-black/40 border border-white/10 rounded-xl pl-9 pr-3 py-3 text-xs text-white focus:border-primary/50 focus:bg-black/50 outline-none transition-all placeholder:text-slate-600 font-bold",value:g,onChange:C=>b(C.target.value)})]}),l.jsx("div",{className:"flex gap-2 p-1 bg-black/40 rounded-xl overflow-x-auto no-scrollbar border border-white/5",children:["All","Individual","Location","Group","Event"].map(C=>l.jsx("button",{onClick:()=>m(C),className:`px-4 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider whitespace-nowrap transition-all ${p===C?"bg-primary text-white shadow-lg":"text-slate-500 hover:text-slate-300 hover:bg-white/5"}`,children:C},C))})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-2",children:[l.jsxs("p",{className:"text-[10px] uppercase font-bold text-slate-600 mb-3 pl-2 flex items-center gap-2",children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"drag_indicator"}),"Drag to Canvas"]}),d.map(C=>l.jsxs("div",{draggable:!0,onDragStart:O=>k(O,C),className:"group flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-transparent hover:border-primary/30 hover:bg-white/10 hover:shadow-lg hover:shadow-primary/5 cursor-grab active:cursor-grabbing transition-all select-none",children:[l.jsx(vu,{name:C.nombre,url:C.iconUrl,size:"sm",className:"rounded-lg opacity-80 group-hover:opacity-100 ring-2 ring-transparent group-hover:ring-primary/20 transition-all"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-xs font-bold text-slate-300 group-hover:text-white truncate transition-colors",children:C.nombre}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:`text-[9px] uppercase tracking-wider font-bold ${C.categoria==="Individual"?"text-indigo-400":"text-slate-500"}`,children:C.categoria||"Entity"}),C.carpeta&&l.jsxs("span",{className:"text-[9px] text-white/30 truncate",children:[" ",C.carpeta.nombre]})]})]}),l.jsx("span",{className:"material-symbols-outlined text-slate-700 group-hover:text-primary text-lg transition-colors opacity-0 group-hover:opacity-100 transform translate-x-2 group-hover:translate-x-0 duration-300",children:"add_circle"})]},C.id)),d.length===0&&l.jsx("div",{className:"p-12 text-center text-slate-600 text-xs italic border-2 border-dashed border-white/5 rounded-xl m-4",children:"No entities found."})]})]}),l.jsxs("div",{className:"flex-1 h-full relative",ref:e,children:[l.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-indigo-900/10 via-[#050508] to-[#050508] pointer-events-none z-0"}),l.jsxs(BC,{nodes:t,edges:i,onNodesChange:r,onEdgesChange:s,onConnect:E,onInit:_,onDrop:A,onDragOver:P,fitView:!0,className:"bg-[#050508]",children:[l.jsx(_$,{color:"#222",gap:24,size:1}),l.jsx(g$,{className:"bg-surface-dark border border-white/10 text-white fill-white rounded-xl overflow-hidden shadow-xl"})]}),l.jsx("div",{className:"absolute top-6 right-6 z-10 flex gap-3",children:l.jsxs("div",{className:"bg-surface-dark/80 backdrop-blur border border-white/10 rounded-xl p-1 flex shadow-2xl",children:[l.jsx(nt,{variant:"ghost",size:"sm",icon:"save",className:"hover:bg-white/5",children:"Save Layout"}),l.jsx("div",{className:"w-px bg-white/10 my-1"}),l.jsx(nt,{onClick:L,variant:"primary",size:"sm",icon:"auto_fix_high",className:"shadow-lg shadow-primary/20",children:"Auto Layout"})]})})]})]})},oZ=()=>l.jsx(Vw,{children:l.jsx(sZ,{})}),lZ=({id:e})=>{const{id:t}=nr(),n=tr(),[r,i]=G.useState("overview"),[a,s]=G.useState(null),[o,c]=G.useState(!0),[d,f]=G.useState(!1);G.useEffect(()=>{p()},[e]);const p=async()=>{c(!0);try{const y=await be.get(`/bd/entidadindividual/${e}`);s(y)}catch(y){console.error("Error loading character:",y)}finally{c(!1)}},m=async()=>{try{await be.patch("/bd/modificar",{...a,tipoEntidad:"entidadindividual"}),f(!1)}catch(y){console.error("Error saving:",y)}},g=async()=>{if(window.confirm("Move this character to the Trash Bin?"))try{await be.delete(`/bd/entidadindividual/${e}`),n(`/project/${t}`)}catch(y){console.error(y)}},b=(y,N)=>{s(v=>({...v,[y]:N}))};return o?l.jsx("div",{className:"p-20 text-center text-slate-500 animate-pulse",children:"Summoning entity..."}):a?l.jsxs("div",{className:"flex h-full",children:[l.jsxs("div",{className:"flex-1 flex flex-col overflow-y-auto custom-scrollbar p-8 gap-6",children:[l.jsxs("div",{className:"flex items-start gap-6",children:[l.jsx("div",{className:"relative",children:l.jsx(vu,{url:a.imagenUrl||"https://images.unsplash.com/photo-1544005313-94ddf0286df2?q=80&w=1976&auto=format&fit=crop",size:"xl",className:"rounded-2xl border-2 border-primary shadow-[0_0_30px_rgba(99,102,242,0.3)]"})}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[l.jsx("span",{className:"text-xs font-bold text-primary bg-primary/10 px-2 py-0.5 rounded border border-primary/20",children:a.estado||"ACTIVE"}),l.jsx("span",{className:"text-xs font-bold text-slate-400 bg-surface-light px-2 py-0.5 rounded border border-white/5",children:a.tipo||"Unknown"})]}),l.jsxs("h1",{className:"text-4xl font-bold text-white mb-2",children:[a.nombre," ",a.apellidos]}),l.jsx("p",{className:"text-lg text-slate-300",children:a.origen||"Traveling the void"})]}),l.jsxs("div",{className:"flex gap-2",children:[!d&&l.jsx(nt,{className:"border-red-500/30 text-red-400 hover:bg-red-500/10",icon:"delete",onClick:g,children:"Delete"}),l.jsx(nt,{variant:"secondary",icon:d?"close":"edit",onClick:()=>f(!d),children:d?"Cancel":"Edit Profile"}),d&&l.jsx(nt,{variant:"primary",icon:"save",onClick:m,children:"Save Changes"})]})]}),l.jsx("div",{className:"border-b border-glass-border flex gap-6",children:["Overview","Biography","Attributes & Stats","Relationships"].map(y=>l.jsx("button",{onClick:()=>i(y.toLowerCase()),className:`pb-4 px-2 text-sm font-bold border-b-2 transition-colors ${r===y.toLowerCase()?"text-primary border-primary":"text-slate-500 border-transparent hover:text-white"}`,children:y},y))}),l.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[l.jsx("div",{className:"col-span-1 space-y-6",children:l.jsxs(Ke,{className:"p-4",children:[l.jsxs("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-4 flex items-center gap-2",children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"fingerprint"})," Identity"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Name"}),l.jsx("input",{type:"text",value:a.nombre,onChange:y=>b("nombre",y.target.value),className:"w-full bg-surface-light border border-white/10 rounded px-3 py-2 text-white text-sm",readOnly:!d})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Surnames"}),l.jsx("input",{type:"text",value:a.apellidos||"",onChange:y=>b("apellidos",y.target.value),className:"w-full bg-surface-light border border-white/10 rounded px-3 py-2 text-white text-sm",readOnly:!d})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Type / Species"}),l.jsx("input",{type:"text",value:a.tipo||"",onChange:y=>b("tipo",y.target.value),className:"w-full bg-surface-light border border-white/10 rounded px-3 py-2 text-white text-sm",readOnly:!d})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Origin"}),l.jsx("input",{type:"text",value:a.origen||"",onChange:y=>b("origen",y.target.value),className:"w-full bg-surface-light border border-white/10 rounded px-3 py-2 text-white text-sm",readOnly:!d})]})]})]})}),l.jsx("div",{className:"col-span-2 space-y-6",children:l.jsxs(Ke,{className:"p-6 relative overflow-hidden group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider flex items-center gap-2",children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"auto_stories"})," Narrative & Connections"]}),!d&&l.jsx("span",{className:"text-[10px] text-slate-600 bg-white/5 px-2 py-1 rounded",children:"Read Only"})]}),l.jsxs("div",{className:"mb-8",children:[l.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-primary mb-3 opacity-80",children:"Biography"}),l.jsx("textarea",{value:a.descripcion||"",onChange:y=>b("descripcion",y.target.value),readOnly:!d,className:`w-full bg-transparent border-none outline-none text-slate-300 text-sm leading-relaxed resize-none custom-scrollbar ${d?"min-h-[150px] placeholder-white/20":"h-auto overflow-hidden"}`,placeholder:"Write the history of this person..."}),l.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-primary mt-6 mb-3 opacity-80",children:"Behavior & Personality"}),l.jsx("textarea",{value:a.comportamiento||"",onChange:y=>b("comportamiento",y.target.value),readOnly:!d,className:`w-full bg-transparent border-none outline-none text-slate-300 text-sm leading-relaxed resize-none custom-scrollbar ${d?"min-h-[100px]":"h-auto overflow-hidden"}`,placeholder:"How does this person act?"})]}),l.jsxs("div",{className:"pt-6 border-t border-white/5",children:[l.jsxs("h4",{className:"text-[10px] font-black uppercase tracking-widest text-primary mb-4 flex items-center gap-2 opacity-80",children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"hub"})," Established Connections"]}),a.relaciones&&a.relaciones.length>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:a.relaciones.map((y,N)=>{var v,_,x;return l.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/5 rounded-xl border border-white/5 hover:border-primary/30 transition-colors",children:[l.jsx("div",{className:"size-8 rounded-full bg-white/10 flex items-center justify-center text-xs font-bold",children:((_=(v=y.entidadDestino)==null?void 0:v.nombre)==null?void 0:_.charAt(0))||"?"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-sm font-bold text-white truncate",children:((x=y.entidadDestino)==null?void 0:x.nombre)||"Unknown"}),l.jsx("div",{className:"text-[10px] text-primary truncate",children:y.tipoRelacion||"Connected"})]})]},N)})}):l.jsx("div",{className:"p-6 text-center bg-white/5 rounded-xl border border-dashed border-white/10",children:l.jsx("p",{className:"text-xs text-slate-500 italic",children:"No relationships recorded yet."})})]})]})})]})]}),l.jsxs("div",{className:"w-80 border-l border-glass-border bg-surface-dark/50 hidden xl:flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b border-glass-border flex justify-between items-center",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500",children:"QUICK NOTES"}),l.jsx("button",{className:"text-slate-400 hover:text-white",children:l.jsx("span",{className:"material-symbols-outlined text-sm",children:"open_in_new"})})]}),l.jsx("div",{className:"p-4 flex-1",children:l.jsx("textarea",{className:"w-full h-full bg-transparent border-none outline-none text-sm text-slate-300 placeholder-slate-600 resize-none",placeholder:"Draft a quick scene or jot down notes for Elara here..."})}),l.jsx("div",{className:"p-2 border-t border-glass-border text-right text-[10px] text-slate-600",children:"0 words"})]})]}):l.jsx("div",{className:"p-20 text-center text-red-500",children:"Character not found in the archives."})},$E=({id:e})=>{const[t,n]=G.useState(null),[r,i]=G.useState(!0),[a,s]=G.useState(!1);G.useEffect(()=>{o()},[e]);const o=async()=>{i(!0);try{const f=await be.get(`/bd/zona/${e}`);n(f)}catch(f){console.error("Error loading location:",f)}finally{i(!1)}},c=async()=>{try{await be.patch("/bd/modificar",{...t,tipoEntidad:"zona"}),s(!1)}catch(f){console.error("Error saving:",f)}},d=(f,p)=>{n(m=>({...m,[f]:p}))};return r?l.jsx("div",{className:"p-20 text-center text-slate-500 animate-pulse",children:"Scanning terrain..."}):t?l.jsxs("div",{className:"flex h-full overflow-y-auto custom-scrollbar p-8 flex-col gap-8",children:[l.jsxs("header",{className:"flex justify-between items-end",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("span",{className:"text-xs font-bold text-emerald-400 bg-emerald-400/10 px-2 py-0.5 rounded border border-emerald-400/20",children:"LOCATION"}),l.jsx("span",{className:"text-xs font-bold text-slate-400 bg-surface-light px-2 py-0.5 rounded border border-white/5",children:t.tipo||"Wilderness"})]}),l.jsx("h1",{className:"text-5xl font-manrope font-black text-white tracking-tight",children:t.nombre}),l.jsx("p",{className:"text-slate-400 mt-2",children:t.apellidos||"Uncharted territory"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(nt,{variant:"secondary",icon:a?"close":"edit",onClick:()=>s(!a),children:a?"Cancel":"Edit Location"}),a&&l.jsx(nt,{variant:"primary",icon:"save",onClick:c,children:"Update Records"})]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-8",children:[l.jsxs("div",{className:"col-span-1 space-y-6",children:[l.jsxs(Ke,{className:"p-6",children:[l.jsxs("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-4 flex items-center gap-2",children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"straighten"})," Geography & Scale"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Size / Scale"}),l.jsx("input",{type:"text",value:t.tamanno||"",onChange:f=>d("tamanno",f.target.value),className:"w-full bg-surface-light border border-white/10 rounded px-3 py-2 text-white text-sm",readOnly:!a})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Development Level"}),l.jsx("input",{type:"text",value:t.desarrollo||"",onChange:f=>d("desarrollo",f.target.value),className:"w-full bg-surface-light border border-white/10 rounded px-3 py-2 text-white text-sm",readOnly:!a})]})]})]}),l.jsxs(Ke,{className:"p-6",children:[l.jsx("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-4",children:"Quick Stats"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-white/5 p-3 rounded-xl border border-white/5",children:[l.jsx("span",{className:"text-[10px] text-slate-500 block",children:"Density"}),l.jsx("span",{className:"text-white font-bold",children:"Medium"})]}),l.jsxs("div",{className:"bg-white/5 p-3 rounded-xl border border-white/5",children:[l.jsx("span",{className:"text-[10px] text-slate-500 block",children:"Security"}),l.jsx("span",{className:"text-emerald-400 font-bold",children:"Stable"})]})]})]})]}),l.jsx("div",{className:"col-span-2 space-y-6",children:l.jsxs(Ke,{className:"p-8",children:[l.jsxs("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-4 flex items-center gap-2",children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"description"})," Topographic Records & Lore"]}),l.jsx("textarea",{value:t.descripcion||"",onChange:f=>d("descripcion",f.target.value),readOnly:!a,className:"w-full bg-transparent border-none outline-none text-slate-300 text-lg leading-relaxed min-h-[400px] resize-none",placeholder:"Describe the vistas, the smells, and the secrets of this place..."})]})})]})]}):l.jsx("div",{className:"p-20 text-center text-red-500",children:"Location not found in the maps."})},cZ=({id:e})=>{const[t,n]=G.useState(null),[r,i]=G.useState(!0),[a,s]=G.useState(!1);G.useEffect(()=>{o()},[e]);const o=async()=>{i(!0);try{const f=await be.get(`/bd/entidadcolectiva/${e}`);n(f)}catch(f){console.error("Error loading collective:",f)}finally{i(!1)}},c=async()=>{try{await be.patch("/bd/modificar",{...t,tipoEntidad:"entidadcolectiva"}),s(!1)}catch(f){console.error("Error saving:",f)}},d=(f,p)=>{n(m=>({...m,[f]:p}))};return r?l.jsx("div",{className:"p-20 text-center text-slate-500 animate-pulse",children:"Gathering intelligence..."}):t?l.jsxs("div",{className:"flex h-full overflow-y-auto custom-scrollbar p-8 flex-col gap-8",children:[l.jsxs("header",{className:"flex justify-between items-end",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("span",{className:"text-xs font-bold text-indigo-400 bg-indigo-400/10 px-2 py-0.5 rounded border border-indigo-400/20",children:"COLLECTIVE"}),l.jsx("span",{className:"text-xs font-bold text-slate-400 bg-surface-light px-2 py-0.5 rounded border border-white/5",children:t.tipo||"Organization"})]}),l.jsx("h1",{className:"text-5xl font-manrope font-black text-white tracking-tight",children:t.nombre}),l.jsxs("p",{className:"text-slate-400 mt-2",children:[t.cantidadMiembros||"Unknown"," members"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(nt,{variant:"secondary",icon:a?"close":"edit",onClick:()=>s(!a),children:a?"Cancel":"Edit Collective"}),a&&l.jsx(nt,{variant:"primary",icon:"save",onClick:c,children:"Update Dossier"})]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-8",children:[l.jsx("div",{className:"col-span-1 space-y-6",children:l.jsxs(Ke,{className:"p-6",children:[l.jsxs("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-4 flex items-center gap-2",children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"group_work"})," Group Dynamics"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Scale / Members"}),l.jsx("input",{type:"text",value:t.cantidadMiembros||"",onChange:f=>d("cantidadMiembros",f.target.value),className:"w-full bg-surface-light border border-white/10 rounded px-3 py-2 text-white text-sm",readOnly:!a})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Behavior / Alignment"}),l.jsx("input",{type:"text",value:t.comportamiento||"",onChange:f=>d("comportamiento",f.target.value),className:"w-full bg-surface-light border border-white/10 rounded px-3 py-2 text-white text-sm",readOnly:!a})]})]})]})}),l.jsx("div",{className:"col-span-2 space-y-6",children:l.jsxs(Ke,{className:"p-8",children:[l.jsxs("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-4 flex items-center gap-2",children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"history_edu"})," Mandate & History"]}),l.jsx("textarea",{value:t.descripcion||"",onChange:f=>d("descripcion",f.target.value),readOnly:!a,className:"w-full bg-transparent border-none outline-none text-slate-300 text-lg leading-relaxed min-h-[400px] resize-none",placeholder:"Detail the motives, the structure, and the legacy of this group..."})]})})]})]}):l.jsx("div",{className:"p-20 text-center text-red-500",children:"Collective not found in the records."})},uZ=()=>l.jsx("div",{className:"flex-1 flex overflow-hidden bg-background-dark font-sans text-slate-300",children:l.jsxs("main",{className:"flex-1 flex flex-col p-12 overflow-y-auto custom-scrollbar relative",children:[l.jsxs("header",{className:"mb-12 space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-slate-500 font-bold text-[10px] tracking-widest uppercase",children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"grid_view"}),l.jsx("span",{children:"Universo Alpha"}),l.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_right"}),l.jsx("span",{children:"Galaxia Andrmeda"}),l.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_right"}),l.jsx("span",{className:"text-white",children:"Sistema Solar"})]}),l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"space-y-4 max-w-3xl",children:[l.jsxs("div",{className:"flex items-center gap-3 px-3 py-1 rounded bg-orange-500/10 text-orange-400 border border-orange-500/20 inline-block",children:[l.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"sunny"}),l.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"Sistema Planetario"}),l.jsx("span",{className:"text-[9px] font-bold text-slate-600 tracking-widest ml-2",children:"ID: SYS-SOL-001"})]}),l.jsx("h1",{className:"text-6xl font-manrope font-black text-white tracking-tight",children:"Sistema Solar"}),l.jsx("p",{className:"text-slate-400 text-lg leading-relaxed",children:"Sistema planetario principal ubicado en el Brazo de Orin, hogar de la nica vida biolgica compleja confirmada en el sector galctico Alpha-9."})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{className:"p-3 rounded-2xl bg-white/5 hover:bg-red-500/10 text-slate-500 hover:text-red-400 border border-white/5 transition-all outline-none",children:l.jsx("span",{className:"material-symbols-outlined",children:"delete"})}),l.jsx(nt,{variant:"primary",icon:"save",children:"Guardar"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[l.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[l.jsxs("section",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"sell"}),l.jsx("h4",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Etiquetas"}),l.jsx("span",{className:"ml-auto text-[9px] font-bold text-slate-600 px-1.5 py-0.5 rounded bg-white/5",children:"3 ACTIVAS"})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx(Px,{label:"Estrella Tipo G",color:"amber",icon:"star"}),l.jsx(Px,{label:"Vida Confirmada",color:"emerald",icon:"tempest"}),l.jsx(Px,{label:"Rico en Agua",color:"cyan",icon:"water_drop"}),l.jsx("button",{className:"size-8 rounded-full border border-dashed border-white/10 flex items-center justify-center text-slate-600 hover:text-white hover:border-white/30 transition-all",children:"+"})]})]}),l.jsxs("section",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"analytics"}),l.jsx("h4",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Atributos Principales"}),l.jsx("button",{className:"ml-auto text-slate-600 hover:text-white transition-colors",children:l.jsx("span",{className:"material-symbols-outlined text-lg",children:"settings"})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx(kf,{label:"Forma / Estructura",value:"Heliosfrica Estndar",icon:"hive"}),l.jsx(kf,{label:"Composicin",value:"Hidrgeno (74%), Helio (24%)",icon:"experiment"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx(kf,{label:"Edad (Aos)",value:"4.6 MM",unit:"Aos"}),l.jsx(kf,{label:"Ciclo Orbital",value:"230 MM",unit:"Aos"})]})]})]}),l.jsxs("section",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"menu_book"}),l.jsx("h4",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Notas de Lore"})]}),l.jsx("textarea",{className:"w-full h-48 bg-white/5 border border-white/5 rounded-[2rem] p-6 text-sm text-slate-400 placeholder:text-slate-700 focus:border-primary/50 outline-none transition-all resize-none leading-relaxed italic shadow-inner",defaultValue:"El sistema contiene un cinturn de asteroides inusualmente denso entre el 4 y 5 planeta. Se teoriza que es el remanente de una colisin planetaria antigua conocida como 'El Gran Impacto' en las escrituras sagradas de los habitantes de Terra."})]})]}),l.jsx("div",{className:"lg:col-span-2",children:l.jsxs(Ke,{className:"h-full border-white/5 bg-surface-dark/40 overflow-hidden flex flex-col shadow-2xl",children:[l.jsxs("header",{className:"p-8 border-b border-white/5 flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"size-10 rounded-xl bg-primary/20 text-primary flex items-center justify-center",children:l.jsx("span",{className:"material-symbols-outlined",children:"hub"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-white text-lg tracking-tight",children:"Contenido Interno (Planetas)"}),l.jsx("p",{className:"text-[10px] font-medium text-slate-500 mt-0.5",children:"Arrastra para reordenar la jerarqua orbital"})]})]}),l.jsxs("div",{className:"px-3 py-1 rounded-full bg-emerald-500/10 text-emerald-400 border border-emerald-500/20 text-[10px] font-black uppercase tracking-widest flex items-center gap-2",children:[l.jsx("div",{className:"size-1.5 rounded-full bg-emerald-500 animate-pulse"}),"8 Entidades"]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-3",children:[l.jsx(_c,{name:"Mercurio",type:"Rocoso",stats:"430C | 88 Das",icon:"public"}),l.jsx(_c,{name:"Venus",type:"Atmsfera",stats:"462C | 225 Das",icon:"public"}),l.jsx(_c,{name:"Tierra",type:"Habitable",stats:"8B Hab | 1 Luna",icon:"public",active:!0}),l.jsx(_c,{name:"Marte",type:"Desierto",stats:"-60C | 2 Lunas",icon:"public"}),l.jsx(_c,{name:"Cinturn Asteroides",type:"Anillo",stats:">1M Obj",icon:"grain"})]}),l.jsx("div",{className:"p-8 bg-black/20 border-t border-white/5",children:l.jsxs("button",{className:"w-full py-4 rounded-[1.5rem] border-2 border-dashed border-white/10 text-slate-500 hover:text-white hover:border-primary/50 hover:bg-primary/5 transition-all flex items-center justify-center gap-3 font-black uppercase text-[10px] tracking-[0.2em]",children:[l.jsx("span",{className:"material-symbols-outlined",children:"add"}),"Aadir Nueva Entidad"]})})]})})]})]})}),Px=({label:e,color:t,icon:n})=>l.jsxs("div",{className:`px-4 py-1.5 rounded-xl bg-${t}-500/10 text-${t}-400 border border-${t}-500/20 flex items-center gap-2 text-[10px] font-black uppercase tracking-widest shadow-lg`,children:[l.jsx("span",{className:"material-symbols-outlined text-[14px]",children:n}),e]}),kf=({label:e,value:t,unit:n,icon:r})=>l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest text-slate-600 ml-1",children:e}),l.jsxs("div",{className:"w-full bg-white/5 border border-white/5 rounded-2xl px-5 py-3.5 flex items-center justify-between group hover:border-white/10 transition-all",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[r&&l.jsx("span",{className:"material-symbols-outlined text-slate-500 text-lg group-hover:text-primary transition-colors",children:r}),l.jsx("span",{className:"text-sm font-bold text-slate-300",children:t})]}),n&&l.jsx("span",{className:"text-[10px] font-black text-slate-600 uppercase tracking-widest",children:n})]})]}),_c=({name:e,type:t,stats:n,icon:r,active:i})=>l.jsxs("div",{className:`group flex items-center gap-6 p-4 rounded-2xl transition-all cursor-pointer ${i?"bg-primary/10 border border-primary/20 shadow-xl":"hover:bg-white/5 border border-transparent"}`,children:[l.jsx("span",{className:"material-symbols-outlined text-slate-700 group-hover:text-slate-500",children:"drag_indicator"}),l.jsx("div",{className:`size-12 rounded-xl flex items-center justify-center ${i?"bg-primary text-white shadow-lg shadow-primary/30":"bg-surface-dark border border-white/5 text-slate-500"}`,children:l.jsx("span",{className:"material-symbols-outlined text-3xl",children:r})}),l.jsx("div",{className:"flex-1",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("h4",{className:"text-sm font-bold text-white group-hover:text-primary transition-colors",children:e}),l.jsx("span",{className:`text-[8px] font-black px-1.5 py-0.5 rounded uppercase tracking-widest ${i?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-white/5 text-slate-600"}`,children:t})]})}),l.jsx("div",{className:"flex flex-col items-end gap-1",children:l.jsxs("div",{className:"flex items-center gap-1.5 text-slate-500",children:[l.jsx("span",{className:"material-symbols-outlined text-[12px]",children:"analytics"}),l.jsx("span",{className:"text-[10px] font-mono tracking-tight group-hover:text-slate-300",children:n})]})}),l.jsxs("div",{className:"flex gap-2 ml-4",children:[l.jsx("button",{className:"p-2 rounded-lg text-slate-700 hover:text-white hover:bg-white/5 transition-all",children:l.jsx("span",{className:"material-symbols-outlined text-xl",children:"edit_note"})}),i?l.jsx("button",{className:"size-8 rounded-full bg-primary text-white flex items-center justify-center shadow-lg",children:l.jsx("span",{className:"material-symbols-outlined text-lg",children:"arrow_forward"})}):l.jsx("button",{className:"p-2 rounded-lg text-slate-700 hover:text-white hover:bg-white/5 transition-all",children:l.jsx("span",{className:"material-symbols-outlined text-xl",children:"open_in_new"})})]})]}),dZ=()=>l.jsx("div",{className:"flex-1 flex overflow-hidden bg-background-dark font-sans text-slate-300",children:l.jsxs("main",{className:"flex-1 flex flex-col p-12 overflow-y-auto custom-scrollbar relative",children:[l.jsxs("header",{className:"mb-12 space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-slate-500 font-bold text-[10px] tracking-widest uppercase",children:[l.jsx("span",{children:"Sistema Solar"}),l.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_right"}),l.jsx("span",{children:"Kepler-186f"}),l.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_right"}),l.jsx("span",{className:"text-white",children:"Territorios"})]}),l.jsxs("div",{className:"flex justify-between items-end",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[l.jsx("h1",{className:"text-6xl font-manrope font-black text-white tracking-tight",children:"Kepler-186f"}),l.jsx("span",{className:"material-symbols-outlined text-4xl text-primary",children:"public"})]}),l.jsx("p",{className:"text-slate-400 text-lg max-w-2xl leading-relaxed",children:"Gestin geopoltica y geogrfica de la superficie planetaria. Administra biomas, asentamientos y recursos estratgicos."})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(nt,{variant:"secondary",icon:"map",children:"Ver Atlas"}),l.jsx(nt,{variant:"primary",icon:"add",children:"Nuevo Territorio"})]})]})]}),l.jsxs("section",{className:"space-y-8",children:[l.jsxs(Ke,{className:"p-2 flex items-center justify-between border-white/5",children:[l.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[l.jsxs("div",{className:"relative flex-1 max-w-sm",children:[l.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-500 text-sm",children:"search"}),l.jsx("input",{type:"text",placeholder:"Buscar por nombre...",className:"w-full bg-transparent border-none rounded-xl py-2 pl-9 pr-4 text-xs focus:ring-1 focus:ring-primary/30 outline-none transition-all"})]}),l.jsx("div",{className:"w-px h-6 bg-white/5 mx-2"}),l.jsx(Ax,{label:"Bioma: Todos"}),l.jsx(Ax,{label:"Poblacin"}),l.jsx(Ax,{label:"Estado"})]}),l.jsxs("div",{className:"flex items-center gap-1 p-1 bg-white/5 rounded-lg",children:[l.jsx("button",{className:"p-1.5 rounded-md text-slate-500 hover:text-white transition-colors",children:l.jsx("span",{className:"material-symbols-outlined text-lg",children:"format_list_bulleted"})}),l.jsx("button",{className:"p-1.5 rounded-md bg-white/10 text-white shadow-sm",children:l.jsx("span",{className:"material-symbols-outlined text-lg",children:"grid_view"})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[l.jsx(Rx,{title:"Nueva Neo-Tokyo",desc:"Metrpolis vertical construida sobre las...",image:"https://lh3.googleusercontent.com/aida-public/AB6AXuAYF5Q6W3o1w1f1",badges:["Capital"],stats:["15M","Templado","Costero"],color:"cyan"}),l.jsx(Rx,{title:"Mar de Dunas",desc:"Extensin rida rica en especia slica...",image:"https://lh3.googleusercontent.com/aida-public/AB6AXuBYG6R7X4p2x2g2",stats:["Hostil","rido"],color:"amber"}),l.jsx(Rx,{title:"Sanctum Bio-Domo",desc:"Instalacin de investigacin...",image:"https://lh3.googleusercontent.com/aida-public/AB6AXuCZ H7S8Y5q3z3h3",badges:["Ciencia"],stats:["5K","Jungla"],color:"purple"}),l.jsxs("div",{className:"group border-2 border-dashed border-white/5 rounded-[2.5rem] flex flex-col items-center justify-center p-12 gap-4 hover:border-primary/30 hover:bg-primary/5 transition-all cursor-pointer",children:[l.jsx("div",{className:"size-16 rounded-3xl bg-white/5 flex items-center justify-center group-hover:scale-110 transition-transform",children:l.jsx("span",{className:"material-symbols-outlined text-3xl text-slate-600 group-hover:text-primary",children:"add_location_alt"})}),l.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-600 group-hover:text-white",children:"Aadir Territorio"})]})]})]})]})}),Ax=({label:e})=>l.jsxs("button",{className:"flex items-center gap-2 px-3 py-1.5 rounded-xl hover:bg-white/5 transition-all group",children:[l.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 group-hover:text-white",children:e}),l.jsx("span",{className:"material-symbols-outlined text-slate-600 text-[14px]",children:"expand_more"})]}),Rx=({title:e,desc:t,image:n,badges:r=[],stats:i=[],color:a})=>l.jsxs("div",{className:"group relative rounded-[2.5rem] overflow-hidden border border-white/5 bg-surface-dark/50 hover:border-white/10 transition-all shadow-2xl",children:[l.jsxs("div",{className:"h-48 overflow-hidden relative",children:[l.jsx("img",{src:n,alt:e,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110 opacity-60 group-hover:opacity-100"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-surface-dark via-transparent to-transparent"}),l.jsx("div",{className:"absolute top-4 right-4 flex gap-2",children:r.map(s=>l.jsxs("span",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest bg-${a==="cyan"?"primary":a==="amber"?"amber-500":"purple-500"}/20 text-${a==="cyan"?"primary":a==="amber"?"amber-400":"purple-400"} border border-white/10 backdrop-blur-md flex items-center gap-1.5`,children:[l.jsx("span",{className:"material-symbols-outlined text-[12px]",children:s==="Capital"?"star":"science"}),s]},s))})]}),l.jsxs("div",{className:"p-8 space-y-6",children:[l.jsxs("header",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-2xl font-manrope font-black text-white mb-2 group-hover:text-primary transition-colors",children:e}),l.jsx("p",{className:"text-xs text-slate-500 leading-relaxed line-clamp-2",children:t})]}),l.jsx("button",{className:"p-2 text-slate-700 hover:text-white",children:l.jsx("span",{className:"material-symbols-outlined",children:"more_vert"})})]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(s=>l.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1 rounded-full bg-white/5 border border-white/5 text-[9px] font-black text-slate-400 uppercase tracking-widest",children:[l.jsx("div",{className:`size-1.5 rounded-full bg-${a==="cyan"?"primary":a==="amber"?"amber-500":"purple-500"}/50`}),s]},s))}),l.jsxs("div",{className:"flex gap-3 pt-2",children:[l.jsxs("button",{className:"flex-1 py-2.5 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 text-[10px] font-black uppercase tracking-widest text-slate-300 flex items-center justify-center gap-2 transition-all",children:[l.jsx("span",{className:"material-symbols-outlined text-sm opacity-50",children:"edit"})," Editar"]}),l.jsxs("button",{className:"flex-1 py-2.5 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 text-[10px] font-black uppercase tracking-widest text-slate-300 flex items-center justify-center gap-2 transition-all",children:[l.jsx("span",{className:"material-symbols-outlined text-sm opacity-50",children:"map"})," Ubicacin"]})]})]})]}),fZ=()=>{const{type:e,entityId:t}=nr(),n=()=>{const r=e==null?void 0:e.toLowerCase();switch(r){case"character":case"entidadindividual":return l.jsx(lZ,{id:t});case"location":case"zona":return l.jsx($E,{id:t});case"culture":case"entidadcolectiva":return l.jsx(cZ,{id:t});case"universe":case"galaxy":case"system":return l.jsx(uZ,{id:t,type:r});case"planet":return l.jsx(dZ,{id:t});case"construccion":return l.jsx($E,{id:t});case"efectos":return l.jsxs("div",{className:"p-8 text-white",children:["Effect/Spell View for ID: ",id]});case"interaccion":return l.jsxs("div",{className:"p-8 text-white",children:["Interaction/Event View for ID: ",id]});case"magic":return l.jsxs("div",{className:"p-8 text-white",children:["Magic System View for ID: ",id]});default:return l.jsxs("div",{className:"p-8 text-white",children:["Unknown Entity Type: ",e]})}};return l.jsx("div",{className:"flex-1 bg-background-dark overflow-hidden",children:n()})},hZ=()=>{var U,J,te;const{setRightPanelMode:e,setRightOpen:t,setRightPanelTitle:n}=Ka(),[r,i]=G.useState([]),[a,s]=G.useState(null),[o,c]=G.useState([]),[d,f]=G.useState(!0);G.useState(!1);const[p,m]=G.useState(!1),[g,b]=G.useState({nombre:"",descripcion:"",fechaTexto:"",ordenAbsoluto:0}),[y,N]=G.useState({nombre:"",descripcion:""}),[v,_]=G.useState(null);G.useState(null);const[x,w]=G.useState("eventos"),[E,P]=G.useState([]),[A,T]=G.useState([]),[L,k]=G.useState(null),C=oe.useRef(!1),O=async X=>{try{return(await be.get("/bd/relacion")).filter(ce=>ce.tipoOrigen==="lineatiempo"&&ce.idOrigen===X||ce.tipoDestino==="lineatiempo"&&ce.idDestino===X).map(ce=>ce.idOrigen===X?ce.idDestino:ce.idOrigen)}catch(ne){return console.error(ne),[]}},F=async(X,ne)=>{const ue=await O(X),se=ne.filter(de=>ue.includes(de.id));P(se);const ce=ne.filter(de=>de.id!==X&&!ue.includes(de.id));T(ce)},M=async X=>{if(!(!a||!X))try{await be.put("/bd/insertar",{tipoEntidad:"relacion",tipoOrigen:"lineatiempo",idOrigen:a,tipoDestino:"lineatiempo",idDestino:X,descripcion:"Anexo de lnea de tiempo"}),F(a,r)}catch(ne){console.error(ne)}},D=async X=>{const ue=(await be.get("/bd/relacion")).find(se=>se.tipoOrigen==="lineatiempo"&&se.idOrigen===a&&se.idDestino===X||se.tipoDestino==="lineatiempo"&&se.idDestino===a&&se.idOrigen===X);ue&&(await be.delete(`/bd/relacion/${ue.id}`),F(a,r))};G.useEffect(()=>{e("CUSTOM"),n("Lnea de Tiempo"),t(!0);const X=setInterval(()=>{const ne=document.getElementById("architect-right-panel-portal");ne&&(k(ne),clearInterval(X))},50);return()=>{clearInterval(X),e("NOTES"),n("")}},[]),G.useEffect(()=>{C.current||(C.current=!0,$())},[]),G.useEffect(()=>{a?(V(a),F(a,r),_(null),b({nombre:"",descripcion:"",fechaTexto:"",ordenAbsoluto:0})):c([])},[a]),G.useEffect(()=>{if(x==="eventos"&&!v){const X=o.length>0?Math.max(...o.map(ne=>ne.ordenAbsoluto||0)):0;b(ne=>({...ne,ordenAbsoluto:X+1}))}},[x,o,v]);const $=async()=>{f(!0);try{const X=await be.get("/bd/lineatiempo"),ne=[...new Map(X.map(ce=>[ce.id,ce])).values()],ue=ne.find(ce=>ce.esRaiz);ne.length===0?(i([]),s(null)):(i(ne),a||s(ue?ue.id:ne[0].id));const se=ne.filter(ce=>ce.esRaiz);if(se.length>1){se.sort((ge,re)=>ge.id-re.id);const ce=se[0],de=se.slice(1);de.forEach(ge=>be.delete(`/bd/lineatiempo/${ge.id}`).catch(console.error));const Oe=ne.filter(ge=>ge.id===ce.id||!de.find(re=>re.id===ge.id));i(Oe),a||s(ce.id)}}catch(X){console.error("Failed to load timelines",X)}finally{f(!1)}},V=async X=>{try{const ne=await be.get(`/timeline/linea/${X}/eventos`);ne.sort((ue,se)=>(ue.ordenAbsoluto||0)-(se.ordenAbsoluto||0)),c(ne)}catch(ne){console.error("Failed to load events",ne)}},K=async()=>{if(!a||!g.nombre)return;const X={...g,ordenAbsoluto:parseInt(g.ordenAbsoluto)||0};try{v?await be.put(`/timeline/evento/${v.id}`,{...X,lineaTiempo:{id:a}}):await be.post("/timeline/evento",{...X,lineaTiempo:{id:a}}),b({nombre:"",descripcion:"",fechaTexto:"",ordenAbsoluto:0}),_(null),V(a)}catch(ne){console.error(ne)}},H=X=>{_(X),b({nombre:X.nombre,descripcion:X.descripcion,fechaTexto:X.fechaTexto,ordenAbsoluto:X.ordenAbsoluto||0}),w("eventos"),t(!0)},q=async()=>{if(y.nombre)try{const X=await be.post("/timeline/linea",{...y,esRaiz:!1});m(!1),N({nombre:"",descripcion:""}),$(),X&&X.id&&s(X.id)}catch(X){console.error(X)}},[I,z]=G.useState({open:!1,type:null,id:null,title:"",message:""}),W=(X,ne)=>{ne.stopPropagation(),z({open:!0,type:"TIMELINE",id:X,title:"Delete Timeline",message:"Are you sure you want to delete this timeline? All events will be lost."})},Q=(X,ne)=>{ne.stopPropagation(),z({open:!0,type:"EVENT",id:X,title:"Delete Event",message:"Are you sure you want to delete this event?"})},ee=async()=>{const{type:X,id:ne}=I;if(!(!X||!ne))try{if(X==="TIMELINE"){if(await be.delete(`/timeline/linea/${ne}`),a===ne){const ue=r.filter(se=>se.id!==ne);s(ue.length>0?ue[0].id:null)}$()}else X==="EVENT"&&(await be.delete(`/timeline/evento/${ne}`),V(a),v&&v.id===ne&&_(null))}catch(ue){console.error(ue),alert("Error deleting item")}},Y=l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"p-4 border-b border-white/5",children:l.jsxs("div",{className:"flex bg-black/40 rounded-lg p-1",children:[l.jsx("button",{onClick:()=>w("eventos"),className:`flex-1 py-2 text-xs font-bold uppercase tracking-wider rounded-md transition-all ${x==="eventos"?"bg-primary text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Eventos"}),l.jsx("button",{onClick:()=>w("anexos"),className:`flex-1 py-2 text-xs font-bold uppercase tracking-wider rounded-md transition-all ${x==="anexos"?"bg-primary text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Anexos"})]})}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:[x==="eventos"&&l.jsx("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4",children:l.jsxs("div",{className:"bg-black/20 rounded-xl p-4 border border-white/5",children:[l.jsxs("h3",{className:"text-xs font-black uppercase text-primary mb-4 flex items-center justify-between",children:[v?"Edit Event":"New Event",v&&l.jsx("button",{onClick:()=>{_(null),b({nombre:"",descripcion:"",fechaTexto:"",ordenAbsoluto:o.length+1})},className:"text-[10px] text-slate-500 hover:text-white underline",children:"CANCEL"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-1 block",children:"Title"}),l.jsx("input",{className:"w-full bg-background-dark border border-white/10 rounded-lg p-2 text-sm text-white outline-none focus:border-primary",value:g.nombre,onChange:X=>b({...g,nombre:X.target.value}),placeholder:"Event Name"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-1 block",children:"Date Label"}),l.jsx("input",{className:"w-full bg-background-dark border border-white/10 rounded-lg p-2 text-sm text-white outline-none focus:border-primary",value:g.fechaTexto,onChange:X=>b({...g,fechaTexto:X.target.value}),placeholder:"e.g. Year 500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-1 block",children:"Order (Sort)"}),l.jsx("input",{type:"text",className:"w-full bg-background-dark border border-white/10 rounded-lg p-2 text-sm text-white outline-none focus:border-primary",value:g.ordenAbsoluto,onChange:X=>{const ne=X.target.value;/^[-+]?\d*$/.test(ne)&&b({...g,ordenAbsoluto:ne})},placeholder:"+/- Num"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-1 block",children:"Description"}),l.jsx("textarea",{className:"w-full bg-background-dark border border-white/10 rounded-lg p-2 text-sm text-white outline-none focus:border-primary h-24 resize-none",value:g.descripcion,onChange:X=>b({...g,descripcion:X.target.value}),placeholder:"Describe what happened..."})]}),l.jsx("div",{className:"pt-2",children:l.jsx(nt,{variant:"primary",onClick:K,className:"w-full justify-center",children:v?"Save Changes":"Create Event"})}),v&&l.jsx("button",{onClick:X=>Q(v.id,X),className:"w-full text-center text-xs text-red-500 hover:text-red-400 py-2 border border-red-500/20 rounded-lg hover:bg-red-500/10 transition-colors",children:"Delete Event"})]})]})}),x==="anexos"&&l.jsx("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4",children:l.jsxs("div",{className:"bg-black/20 rounded-xl p-4 border border-white/5",children:[l.jsx("h3",{className:"text-xs font-black uppercase text-primary mb-4",children:"Annexed Timelines"}),l.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Link other localized timelines to this one to verify chronological consistency."}),l.jsxs("div",{className:"space-y-2 mb-6",children:[E.map(X=>l.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/5 rounded-lg border border-white/5",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"material-symbols-outlined text-xs text-slate-400",children:"timeline"}),l.jsx("span",{className:"text-xs font-bold text-slate-300",children:X.nombre})]}),l.jsx("button",{onClick:()=>D(X.id),className:"text-slate-500 hover:text-red-500",children:l.jsx("span",{className:"material-symbols-outlined text-sm",children:"link_off"})})]},X.id)),E.length===0&&l.jsx("span",{className:"text-xs text-slate-600 italic",children:"No linked timelines."})]}),l.jsx("h4",{className:"text-[10px] font-bold uppercase text-slate-400 mb-2",children:"Available to Link"}),l.jsxs("div",{className:"space-y-1",children:[A.map(X=>l.jsxs("button",{onClick:()=>M(X.id),className:"w-full flex items-center gap-2 p-2 hover:bg-white/5 rounded-lg text-left transition-colors group",children:[l.jsx("span",{className:"material-symbols-outlined text-xs text-green-500/50 group-hover:text-green-500",children:"add_link"}),l.jsx("span",{className:"text-xs text-slate-400 group-hover:text-white",children:X.nombre})]},X.id)),A.length===0&&l.jsx("span",{className:"text-xs text-slate-600 italic",children:"No other timelines available."})]})]})})]})]});return l.jsxs("div",{className:"flex h-screen bg-background-dark text-white overflow-hidden",children:[L&&Ba.createPortal(Y,L),l.jsxs("aside",{className:"w-64 bg-surface-dark border-r border-white/5 flex flex-col p-4 z-20 shrink-0",children:[l.jsxs("header",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-xs font-black uppercase tracking-widest text-primary",children:"Timelines"}),l.jsx("button",{onClick:()=>m(!p),className:"text-slate-400 hover:text-white",children:l.jsx("span",{className:"material-symbols-outlined",children:"add"})})]}),p&&l.jsxs("div",{className:"mb-4 p-3 bg-black/20 rounded-xl space-y-2 border border-white/10 animate-in fade-in slide-in-from-left-2",children:[l.jsx("input",{className:"w-full bg-transparent border-b border-white/20 text-sm p-1 outline-none focus:border-primary",placeholder:"Name",value:y.nombre,onChange:X=>N({...y,nombre:X.target.value})}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:q,className:"text-xs font-bold text-primary",children:"CREATE"})})]}),l.jsx("div",{className:"space-y-2 overflow-y-auto flex-1 custom-scrollbar",children:r.map(X=>l.jsxs("div",{onClick:()=>s(X.id),className:`group flex items-center justify-between p-3 rounded-xl cursor-pointer transition-all border ${a===X.id?"bg-primary/10 border-primary text-white shadow-[0_0_15px_rgba(var(--primary-rgb),0.1)]":"bg-transparent border-transparent hover:bg-white/5 text-slate-400"}`,children:[l.jsxs("div",{className:"flex items-center gap-2 truncate",children:[l.jsx("span",{className:`material-symbols-outlined text-sm shrink-0 ${X.esRaiz?"text-amber-400":""}`,children:X.esRaiz?"public":"timeline"}),l.jsx("span",{className:"text-xs font-bold uppercase tracking-wide truncate",children:X.nombre})]}),l.jsx("button",{onClick:ne=>W(X.id,ne),className:"opacity-0 group-hover:opacity-100 text-slate-500 hover:text-red-500 transition-opacity",children:l.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]},X.id))})]}),l.jsxs("main",{className:"flex-1 relative flex flex-col h-full overflow-hidden bg-background-dark",children:[l.jsx("div",{className:"h-16 border-b border-white/5 bg-background-dark/80 backdrop-blur flex items-center px-8 z-10 shrink-0",children:l.jsxs("div",{children:[l.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[((U=r.find(X=>X.id===a))==null?void 0:U.esRaiz)&&l.jsx("span",{className:"text-amber-400 material-symbols-outlined",children:"star"}),((J=r.find(X=>X.id===a))==null?void 0:J.nombre)||"Select Timeline"]}),l.jsx("p",{className:"text-xs text-slate-500",children:(te=r.find(X=>X.id===a))==null?void 0:te.descripcion})]})}),l.jsx("div",{className:"flex-1 overflow-y-auto p-8 relative custom-scrollbar z-10",children:l.jsxs("div",{className:"max-w-2xl mx-auto relative pl-8 border-l-2 border-white/10 space-y-8 pb-32",children:[o.length===0&&l.jsx("div",{className:"text-center text-slate-600 italic py-20",children:"No events yet. Use the right panel to add one."}),o.map((X,ne)=>l.jsxs("div",{className:"relative group animate-in fade-in slide-in-from-bottom-4",style:{animationDelay:`${ne*50}ms`},children:[l.jsx("div",{className:"absolute top-6 -left-[41px] size-4 rounded-full bg-white/20 border-4 border-background-dark group-hover:bg-primary transition-colors cursor-pointer",onClick:()=>H(X)}),l.jsxs("div",{className:"ml-4 bg-surface-dark/50 border border-white/5 p-5 rounded-2xl hover:border-primary/30 transition-all hover:bg-surface-dark group-hover:translate-x-1 duration-300 relative group/card",children:[l.jsxs("div",{className:"absolute top-3 right-3 opacity-0 group-hover/card:opacity-100 transition-opacity flex gap-1 bg-black/50 rounded-lg backdrop-blur-sm border border-white/5 p-1",children:[l.jsx("button",{onClick:()=>H(X),className:"p-1.5 text-slate-400 hover:text-white hover:bg-white/10 rounded transition-colors",title:"Edit",children:l.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"})}),l.jsx("button",{onClick:ue=>Q(X.id,ue),className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-500/10 rounded transition-colors",title:"Delete",children:l.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]}),l.jsx("div",{className:"flex justify-between items-start",children:l.jsxs("div",{children:[l.jsxs("div",{className:"flex flex-col mb-1",children:[l.jsx("h3",{className:"text-lg font-bold text-white",children:X.nombre}),l.jsx("span",{className:"text-xs font-mono font-bold text-primary opacity-80",children:X.fechaTexto})]}),l.jsx("p",{className:"text-sm text-slate-400 leading-relaxed",children:X.descripcion})]})})]})]},X.id))]})})]}),l.jsx(Iu,{isOpen:I.open,onClose:()=>z({...I,open:!1}),onConfirm:ee,title:I.title,message:I.message,confirmText:"Delete",type:"danger"})]})},pZ=({onCancel:e,onCreate:t})=>{const[n,r]=G.useState(1),[i,a]=G.useState("regional"),[s,o]=G.useState("upload");return l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-background-dark/80 backdrop-blur-xl animate-in fade-in duration-300",children:l.jsx("div",{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto no-scrollbar relative animate-in zoom-in-95 duration-500",children:l.jsxs(Ke,{className:"p-0 border-white/10 shadow-[0_0_100px_rgba(0,0,0,0.5)] overflow-hidden",children:[l.jsxs("header",{className:"p-8 border-b border-white/5 flex justify-between items-center bg-white/[0.02]",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"size-12 rounded-2xl bg-primary/20 text-primary flex items-center justify-center",children:l.jsx("span",{className:"material-symbols-outlined text-2xl",children:"add_location_alt"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-manrope font-black text-white tracking-tight",children:"Crear Nuevo Mapa / Zona"}),l.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"Configura los detalles para tu nueva entrada cartogrfica."})]})]}),l.jsx("button",{onClick:e,className:"text-slate-500 hover:text-white transition-colors",children:l.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),l.jsxs("div",{className:"p-12 space-y-12",children:[l.jsxs("section",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:`size-8 rounded-full flex items-center justify-center text-[10px] font-black ${n===1?"bg-primary text-white shadow-lg shadow-primary/30":"bg-white/10 text-slate-500"}`,children:"1"}),l.jsx("h2",{className:"text-sm font-black uppercase tracking-[0.2em] text-white",children:"Identidad y Jerarqua"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 pl-12",children:[l.jsx(mZ,{label:"Nombre del Mapa",placeholder:"ej. La Costa de Zafiro"}),l.jsxs("div",{className:"space-y-1.5 row-span-2",children:[l.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-600 ml-1",children:"Descripcin"}),l.jsx("textarea",{placeholder:"Breve descripcin de la geografa, clima o importancia...",className:"w-full h-[120px] bg-white/5 border border-white/5 rounded-2xl p-4 text-sm text-white focus:border-primary/50 outline-none transition-all resize-none"})]}),l.jsxs("div",{className:"space-y-1.5",children:[l.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-600 ml-1",children:"Zona Padre (Opcional)"}),l.jsxs("select",{className:"w-full bg-white/5 border border-white/5 rounded-2xl px-4 py-3 text-sm text-white focus:border-primary/50 outline-none appearance-none",children:[l.jsx("option",{children:"Ninguna (Nivel Superior)"}),l.jsx("option",{children:"Reino de Aethelgard"}),l.jsx("option",{children:"Continente de Aurum"})]}),l.jsx("p",{className:"text-[9px] text-slate-500 italic mt-1 ml-1 text-primary/70",children:"Seleccionar un padre convierte esto en sub-zona."})]})]})]}),l.jsx("div",{className:"h-px w-full bg-white/5"}),l.jsxs("section",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:`size-8 rounded-full flex items-center justify-center text-[10px] font-black ${n===2?"bg-primary text-white shadow-lg shadow-primary/30":"bg-white/10 text-slate-500"}`,children:"2"}),l.jsx("h2",{className:"text-sm font-black uppercase tracking-[0.2em] text-white",children:"Tipo de Mapa"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 pl-12",children:[l.jsx(Ix,{active:i==="world",onClick:()=>a("world"),icon:"public",label:"Mapa Mundial",desc:"Continentes, ocanos, escala global."}),l.jsx(Ix,{active:i==="regional",onClick:()=>a("regional"),icon:"map",label:"Mapa Regional",desc:"Reinos, provincias, biomas."}),l.jsx(Ix,{active:i==="local",onClick:()=>a("local"),icon:"location_city",label:"Ciudad / Local",desc:"Ciudades, mazmorras, mapas de batalla."})]})]}),l.jsx("div",{className:"h-px w-full bg-white/5"}),l.jsxs("section",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:`size-8 rounded-full flex items-center justify-center text-[10px] font-black ${n===3?"bg-primary text-white shadow-lg shadow-primary/30":"bg-white/10 text-slate-500"}`,children:"3"}),l.jsx("h2",{className:"text-sm font-black uppercase tracking-[0.2em] text-white",children:"Fuente del Lienzo"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pl-12",children:[l.jsx(UE,{active:s==="upload",onClick:()=>o("upload"),icon:"cloud_upload",label:"Cargar Archivo de Imagen",desc:"Arrastra y suelta o haz clic para buscar",subdesc:"JPG, PNG, WEBP  MAX 25MB"}),l.jsx(UE,{active:s==="blank",onClick:()=>o("blank"),icon:"brush",label:"Lienzo en Blanco",desc:"Crear un nuevo dibujo desde cero",subdesc:"4096 px x 4096 px"})]})]})]}),l.jsxs("footer",{className:"p-8 bg-white/[0.02] border-t border-white/5 flex justify-between items-center",children:[l.jsx("button",{onClick:e,className:"text-sm font-bold text-slate-500 hover:text-white transition-colors",children:"Cancelar"}),l.jsxs("div",{className:"flex items-center gap-6",children:[l.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-slate-600",children:"Cambios guardados localmente"}),l.jsx(nt,{variant:"primary",className:"px-10 py-3 shadow-xl",onClick:()=>t(s),children:"Crear Mapa"})]})]})]})})})},mZ=({label:e,placeholder:t})=>l.jsxs("div",{className:"space-y-1.5",children:[l.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-600 ml-1",children:e}),l.jsx("input",{type:"text",placeholder:t,className:"w-full bg-white/5 border border-white/5 rounded-2xl px-4 py-3 text-sm text-white focus:border-primary/50 transition-all outline-none"})]}),Ix=({active:e,onClick:t,icon:n,label:r,desc:i})=>l.jsxs("div",{onClick:t,className:`p-6 rounded-3xl border transition-all cursor-pointer group ${e?"bg-primary/10 border-primary shadow-lg shadow-primary/10":"bg-white/5 border-white/5 hover:border-white/10"}`,children:[l.jsx("div",{className:`size-10 rounded-xl mb-4 flex items-center justify-center transition-all ${e?"bg-primary text-white":"bg-white/5 text-slate-500 group-hover:text-slate-300"}`,children:l.jsx("span",{className:"material-symbols-outlined",children:n})}),l.jsx("h3",{className:`text-sm font-bold mb-1 transition-colors ${e?"text-white":"text-slate-400 group-hover:text-slate-200"}`,children:r}),l.jsx("p",{className:"text-[10px] text-slate-500 leading-relaxed font-medium",children:i})]}),UE=({active:e,onClick:t,icon:n,label:r,desc:i,subdesc:a})=>l.jsxs("div",{onClick:t,className:`p-10 rounded-[2.5rem] border transition-all cursor-pointer group flex flex-col items-center text-center gap-4 ${e?"bg-primary/5 border-primary shadow-lg":"bg-white/[0.02] border-white/5 hover:border-white/10 hover:bg-white/[0.04]"}`,children:[l.jsx("div",{className:`size-16 rounded-[2rem] flex items-center justify-center transition-all ${e?"bg-primary text-white shadow-xl shadow-primary/20":"bg-white/5 text-slate-600 group-hover:text-slate-400"}`,children:l.jsx("span",{className:"material-symbols-outlined text-3xl",children:n})}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("h3",{className:`font-bold transition-colors ${e?"text-white":"text-slate-400"}`,children:r}),l.jsx("p",{className:"text-xs text-slate-500 font-medium",children:i})]}),l.jsx("div",{className:"flex gap-2 mt-2",children:a.split("").map((s,o)=>l.jsx("span",{className:"px-2 py-1 rounded bg-black/20 text-[8px] font-black text-slate-600 tracking-tighter uppercase whitespace-nowrap",children:s.trim()},o))})]}),gZ=({mapTitle:e="Reino de Aethelgard",onSave:t,onBack:n})=>{const[r,i]=G.useState(100),[a,s]=G.useState(24),[o,c]=G.useState("#000000"),[d,f]=G.useState("brush"),[p,m]=G.useState(1),[g,b]=G.useState([{id:1,name:"Terreno Base",visible:!0,locked:!1,type:"raster"},{id:2,name:"Ros y Lagos",visible:!0,locked:!1,type:"vector"}]),y=oe.useRef(null),[N,v]=G.useState(!1),_=[{id:"select",icon:"near_me"},{id:"brush",icon:"brush"},{id:"eraser",icon:"ink_eraser"},{id:"fill",icon:"format_color_fill"},{id:"measure",icon:"straighten"},{id:"text",icon:"title"}],x=()=>{var O;return(O=y.current)==null?void 0:O.getContext("2d")},w=O=>{const F=g.find(D=>D.id===p);if(!F||!F.visible||F.locked)return;const M=x();M&&(v(!0),M.beginPath(),M.moveTo(O.nativeEvent.offsetX,O.nativeEvent.offsetY),M.lineWidth=a,M.lineCap="round",M.lineJoin="round",M.globalAlpha=r/100,d==="eraser"?M.globalCompositeOperation="destination-out":(M.globalCompositeOperation="source-over",M.strokeStyle=o))},E=O=>{if(!N)return;const F=x();F&&(F.lineTo(O.nativeEvent.offsetX,O.nativeEvent.offsetY),F.stroke())},P=()=>{var O;N&&(v(!1),(O=x())==null||O.closePath())},A=O=>{b(F=>F.map(M=>M.id===O?{...M,visible:!M.visible}:M))},T=O=>{b(F=>F.map(M=>M.id===O?{...M,locked:!M.locked}:M))},L=()=>{const O={id:Date.now(),name:`Capa ${g.length+1}`,visible:!0,locked:!1,type:"raster"};b([O,...g]),m(O.id)},k=O=>{g.length<=1||(b(F=>F.filter(M=>M.id!==O)),p===O&&m(g[0].id))},C=()=>{var F;const O=(F=y.current)==null?void 0:F.toDataURL();console.log("Saving Map Data:",O?"Data present":"Empty"),alert("Mapa guardado localmente (Simulado)")};return l.jsxs("div",{className:"flex-1 flex flex-col bg-[#050508] text-slate-300 font-sans h-full overflow-hidden relative",children:[l.jsxs("header",{className:"h-20 flex-none border-b border-white/5 flex items-center justify-between px-8 bg-surface-dark/80 backdrop-blur-md z-30",children:[l.jsxs("div",{className:"flex items-center gap-6",children:[l.jsx("button",{onClick:n,className:"p-2 rounded-xl bg-white/5 hover:bg-white/10 transition-colors",children:l.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),l.jsx("div",{className:"w-px h-8 bg-white/10"}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white tracking-tight",children:e}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"size-1.5 rounded-full bg-primary"}),l.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Guardado localmente"})]})]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("button",{onClick:C,className:"flex items-center gap-2 px-5 py-2.5 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 transition-all text-sm font-bold",children:[l.jsx("span",{className:"material-symbols-outlined text-xl",children:"cloud_upload"}),"Guardar"]}),l.jsx(nt,{variant:"primary",icon:"ios_share",className:"px-6 py-2.5 shadow-lg shadow-primary/20",children:"Exportar"}),l.jsx("div",{className:"size-10 rounded-full bg-gradient-to-br from-primary to-cyan-400 border-2 border-white/10 shadow-lg"})]})]}),l.jsxs("div",{className:"flex-1 flex relative overflow-hidden",children:[l.jsx("aside",{className:"absolute left-8 top-1/2 -translate-y-1/2 z-40",children:l.jsxs(Ke,{className:"p-2 flex flex-col gap-2 rounded-2xl border-white/10 bg-surface-dark/40 backdrop-blur-2xl shadow-2xl",children:[_.map(O=>l.jsx("button",{onClick:()=>f(O.id),className:`size-12 rounded-xl flex items-center justify-center transition-all ${d===O.id?"bg-primary text-white shadow-lg shadow-primary/30":"text-slate-500 hover:text-white hover:bg-white/5"}`,children:l.jsx("span",{className:"material-symbols-outlined text-xl",children:O.icon})},O.id)),l.jsx("div",{className:"w-8 h-px bg-white/10 mx-auto my-1"}),l.jsxs("div",{className:"relative group",children:[l.jsx("input",{type:"color",value:o,onChange:O=>c(O.target.value),className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full"}),l.jsx("div",{className:"size-12 rounded-xl flex items-center justify-center cursor-pointer",children:l.jsx("div",{className:"size-7 rounded-full border-2 border-white/20 shadow-inner group-hover:scale-110 transition-transform",style:{backgroundColor:o}})})]})]})}),l.jsxs("main",{className:"flex-1 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] bg-repeat relative overflow-hidden flex items-center justify-center p-20 no-scrollbar",children:[l.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"radial-gradient(circle, white 1px, transparent 1px)",backgroundSize:"30px 30px"}}),l.jsxs("div",{className:"relative group animate-in zoom-in-95 duration-700",children:[l.jsx("p",{className:"absolute -top-10 left-0 text-[10px] font-black uppercase tracking-[0.2em] text-slate-600",children:"Lienzo: 800x600px  RGB"}),l.jsx("div",{className:"relative bg-white rounded shadow-[0_0_100px_rgba(0,0,0,0.5)] overflow-hidden border border-white/10 cursor-crosshair",children:l.jsx("canvas",{ref:y,width:800,height:600,onMouseDown:w,onMouseMove:E,onMouseUp:P,onMouseLeave:P})})]})]}),l.jsxs("aside",{className:"absolute right-8 top-1/2 -translate-y-1/2 z-40 flex flex-col gap-6 w-80",children:[l.jsxs(Ke,{className:"p-6 space-y-6 rounded-3xl border-white/10 bg-surface-dark/40 backdrop-blur-2xl shadow-2xl",children:[l.jsxs("header",{className:"flex justify-between items-center",children:[l.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Propiedades"}),l.jsx("button",{className:"text-slate-600 hover:text-white transition-colors",children:l.jsx("span",{className:"material-symbols-outlined text-sm",children:"settings_input_component"})})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-xs font-bold text-slate-400",children:"Tamao del Pincel"}),l.jsxs("span",{className:"text-xs font-black text-white",children:[a,"px"]})]}),l.jsx("input",{type:"range",min:"1",max:"100",value:a,onChange:O=>s(O.target.value),className:"w-full accent-primary h-1 bg-white/5 rounded-full appearance-none cursor-pointer"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-xs font-bold text-slate-400",children:"Opacidad"}),l.jsxs("span",{className:"text-xs font-black text-white",children:[r,"%"]})]}),l.jsx("input",{type:"range",min:"0",max:"100",value:r,onChange:O=>i(O.target.value),className:"w-full accent-primary h-1 bg-white/5 rounded-full appearance-none cursor-pointer"})]})]})]}),l.jsxs(Ke,{className:"p-6 space-y-6 rounded-3xl border-white/10 bg-surface-dark/40 backdrop-blur-2xl shadow-2xl flex-1 max-h-[400px] overflow-hidden flex flex-col",children:[l.jsxs("header",{className:"flex justify-between items-center",children:[l.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Capas"}),l.jsx("div",{className:"flex gap-2 text-slate-600",children:l.jsx("button",{onClick:L,className:"hover:text-white transition-colors",children:l.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"})})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar space-y-2",children:g.map(O=>l.jsxs("div",{onClick:()=>m(O.id),className:`flex items-center gap-3 p-3 rounded-2xl transition-all cursor-pointer group select-none ${p===O.id?"bg-primary/10 border border-primary/20":"bg-transparent border border-transparent hover:bg-white/5"}`,children:[l.jsx("button",{onClick:F=>{F.stopPropagation(),A(O.id)},className:`material-symbols-outlined text-lg ${O.visible?"text-slate-500 hover:text-white":"text-slate-700"}`,children:O.locked?"lock":O.visible?"visibility":"visibility_off"}),l.jsx("div",{className:"size-10 rounded-lg bg-surface-light border border-white/5 flex items-center justify-center overflow-hidden",children:l.jsx("span",{className:"material-symbols-outlined opacity-30 text-xl",children:O.type==="raster"?"texture":"water_drop"})}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsx("p",{className:`text-xs font-bold truncate ${p===O.id?"text-white":"text-slate-400 group-hover:text-slate-200"}`,children:O.name})}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:F=>{F.stopPropagation(),T(O.id)},className:"material-symbols-outlined text-sm text-slate-700 hover:text-white transition-colors",children:O.locked?"lock_open":"lock"}),l.jsx("button",{onClick:F=>{F.stopPropagation(),k(O.id)},className:"material-symbols-outlined text-sm text-red-900/50 hover:text-red-400 transition-colors",children:"delete"})]})]},O.id))})]})]}),l.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 z-40",children:l.jsxs(Ke,{className:"px-6 py-3 flex items-center gap-8 rounded-2xl border-white/10 bg-surface-dark/40 backdrop-blur-2xl shadow-2xl",children:[l.jsxs("div",{className:"flex items-center gap-4 text-slate-500 border-r border-white/10 pr-6",children:[l.jsx("button",{className:"hover:text-white transition-colors",children:l.jsx("span",{className:"material-symbols-outlined",children:"undo"})}),l.jsx("button",{className:"hover:text-white transition-colors opacity-30 cursor-not-allowed",children:l.jsx("span",{className:"material-symbols-outlined",children:"redo"})})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{className:"text-slate-500 hover:text-white transition-colors",children:l.jsx("span",{className:"material-symbols-outlined",children:"remove"})}),l.jsx("span",{className:"text-[10px] font-black text-white w-10 text-center",children:"100%"}),l.jsx("button",{className:"text-slate-500 hover:text-white transition-colors",children:l.jsx("span",{className:"material-symbols-outlined",children:"add"})})]})]})})]})]})},vZ=({map:e})=>{const[t,n]=G.useState(null);e!=null&&e.nombre;const r=[{id:1,name:"Torre Carmes",type:"location",x:"45%",y:"42%",color:"bg-primary"},{id:2,name:"Costa de Zafiro",type:"region",x:"55%",y:"35%",color:"bg-cyan-500"},{id:3,name:"Pramos de Hierro",type:"danger",x:"62%",y:"58%",color:"bg-amber-500"}];return l.jsxs("div",{className:"flex-1 flex overflow-hidden bg-background-dark font-sans text-slate-300 relative",children:[l.jsxs("main",{className:"flex-1 overflow-hidden relative group",children:[l.jsxs("div",{className:"absolute inset-4 rounded-[2.5rem] overflow-hidden border border-white/5 shadow-2xl bg-surface-dark",children:[l.jsx("img",{src:"https://images.unsplash.com/photo-1521295121783-8a321d551ad2?auto=format&fit=crop&w=2000&q=80",alt:"Background Map",className:"w-full h-full object-cover opacity-60 mix-blend-luminosity grayscale-[0.2]"}),l.jsx("div",{className:"absolute inset-0",children:r.map(i=>l.jsx("div",{onClick:()=>n(i),className:`absolute size-10 -translate-x-1/2 -translate-y-1/2 cursor-pointer transition-all hover:scale-125 z-10 ${(t==null?void 0:t.id)===i.id?"scale-125":""}`,style:{left:i.x,top:i.y},children:l.jsxs("div",{className:`size-full rounded-2xl ${i.color} border-4 border-background-dark shadow-[0_0_20px_rgba(0,0,0,0.5)] flex items-center justify-center text-white relative group/marker`,children:[l.jsx("span",{className:"material-symbols-outlined text-lg",children:i.type==="location"?"fort":i.type==="region"?"terrain":"skull"}),l.jsx("div",{className:"absolute top-12 left-1/2 -translate-x-1/2 px-3 py-1.5 rounded-lg bg-surface-dark border border-white/10 text-[9px] font-black uppercase tracking-widest text-white whitespace-nowrap opacity-0 group-hover/marker:opacity-100 transition-opacity",children:i.name}),l.jsx("div",{className:`absolute -inset-2 rounded-[1.5rem] opacity-20 animate-ping -z-10 ${i.color}`})]})},i.id))})]}),l.jsx("aside",{className:"absolute left-12 top-1/2 -translate-y-1/2 z-20 flex flex-col gap-4",children:l.jsxs(Ke,{className:"p-2 flex flex-col gap-2 rounded-2xl border-white/10 bg-surface-dark/40 backdrop-blur-2xl shadow-2xl",children:[l.jsx(Nc,{icon:"near_me",active:!0}),l.jsx(Nc,{icon:"location_on"}),l.jsx(Nc,{icon:"brush"}),l.jsx(Nc,{icon:"layers"}),l.jsx("div",{className:"w-8 h-px bg-white/10 mx-auto my-1"}),l.jsx(Nc,{icon:"tune"})]})}),l.jsx("div",{className:"absolute bottom-12 left-12 z-20 px-4 py-2 rounded-xl bg-black/40 border border-white/10 backdrop-blur-md text-[10px] font-black tracking-widest text-slate-400",children:"125%"})]}),l.jsx("aside",{className:`flex-none bg-surface-dark border-l border-white/5 transition-all duration-700 relative z-30 ${t?"w-96 p-8 opacity-100":"w-0 p-0 opacity-0 overflow-hidden"}`,children:t&&l.jsxs("div",{className:"flex flex-col h-full gap-8 animate-in slide-in-from-right-8 duration-500",children:[l.jsxs("header",{className:"space-y-6",children:[l.jsxs("div",{className:"relative aspect-[4/3] rounded-3xl overflow-hidden border border-white/10 shadow-xl group",children:[l.jsx("img",{src:"https://images.unsplash.com/photo-1533154683836-84ea7a0bc310?auto=format&fit=crop&w=500&q=80",alt:"Detail",className:"w-full h-full object-cover grayscale-[0.4] group-hover:grayscale-0 transition-all duration-700"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background-dark via-transparent to-transparent"}),l.jsx("div",{className:"absolute top-4 right-4 flex gap-2",children:l.jsx("button",{onClick:()=>n(null),className:"size-8 rounded-lg bg-black/40 border border-white/10 backdrop-blur-md text-white flex items-center justify-center hover:bg-black/60 transition-colors",children:l.jsx("span",{className:"material-symbols-outlined text-sm",children:"close"})})}),l.jsxs("div",{className:"absolute bottom-4 left-4 flex gap-2",children:[l.jsx("span",{className:"px-3 py-1 rounded bg-primary/20 text-primary border border-primary/20 text-[8px] font-black uppercase tracking-widest backdrop-blur-md",children:"Lugar"}),l.jsx("span",{className:"px-3 py-1 rounded bg-emerald-500/20 text-emerald-400 border border-emerald-500/20 text-[8px] font-black uppercase tracking-widest backdrop-blur-md",children:"Capital"})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsx("h2",{className:"text-3xl font-manrope font-black text-white tracking-tight leading-none",children:t.name}),l.jsx("button",{className:"text-slate-500 hover:text-white transition-colors p-2 rounded-xl hover:bg-white/5",children:l.jsx("span",{className:"material-symbols-outlined",children:"edit"})})]}),l.jsx("p",{className:"text-sm text-slate-400 leading-relaxed font-manrope",children:"La antigua sede de los Magos de Fuego, erigida sobre la caldera inactiva del Monte Ignis. Sus muros estn imbuidos de magia protectora."})]})]}),l.jsxs("div",{className:"space-y-8 flex-1 overflow-y-auto no-scrollbar",children:[l.jsxs("section",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center px-1",children:[l.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Habitantes Clave"}),l.jsx("button",{className:"text-[10px] font-bold text-primary hover:underline transition-all",children:"Ver todos"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx(GE,{name:"Lyra Ignis",role:"Gran Maga"}),l.jsx(GE,{name:"Kaelen",role:"Capitn de la Guardia"})]})]}),l.jsxs("section",{className:"space-y-4",children:[l.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500 px-1",children:"Eventos Relacionados"}),l.jsx(Ke,{className:"p-4 border-white/5 hover:border-white/10 transition-all cursor-pointer group",children:l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsx("div",{className:"size-10 rounded-xl bg-amber-500/10 text-amber-500 border border-amber-500/20 flex items-center justify-center",children:l.jsx("span",{className:"material-symbols-outlined text-xl",children:"history_edu"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-xs font-bold text-white group-hover:text-primary transition-colors",children:"El Asedio de Ceniza"}),l.jsx("p",{className:"text-[10px] text-slate-500 font-medium",children:"Hace 300 aos"})]})]})})]})]}),l.jsx("footer",{className:"pt-6 border-t border-white/5",children:l.jsx(nt,{variant:"primary",icon:"auto_stories",className:"w-full py-4 rounded-2xl shadow-xl shadow-primary/20",children:"Abrir en la Biblia"})})]})})]})},Nc=({icon:e,active:t})=>l.jsx("button",{className:`size-12 rounded-xl flex items-center justify-center transition-all ${t?"bg-primary text-white shadow-lg shadow-primary/30":"text-slate-500 hover:text-white hover:bg-white/5"}`,children:l.jsx("span",{className:"material-symbols-outlined text-xl",children:e})}),GE=({name:e,role:t})=>l.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-2xl bg-white/[0.02] border border-white/5 hover:border-white/10 transition-all cursor-pointer group",children:[l.jsx(vu,{name:e,size:"sm",className:"border-white/10 group-hover:border-primary/50 transition-all"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"text-xs font-bold text-white truncate",children:e}),l.jsx("p",{className:"text-[10px] text-slate-500 font-medium truncate",children:t})]}),l.jsx("span",{className:"material-symbols-outlined text-slate-700 text-sm group-hover:text-white transition-colors",children:"chevron_right"})]}),yZ=({maps:e,onSelect:t,onCreateNew:n,onClose:r})=>l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-background-dark/80 backdrop-blur-xl animate-in fade-in duration-300",children:l.jsx("div",{className:"w-full max-w-3xl animate-in zoom-in-95 duration-500",children:l.jsxs(Ke,{className:"overflow-hidden border-white/10 shadow-2xl",children:[l.jsxs("header",{className:"p-6 border-b border-white/5 flex justify-between items-center bg-white/[0.02]",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"material-symbols-outlined text-primary",children:"map"}),l.jsx("h2",{className:"text-xl font-manrope font-black text-white",children:"Cartografa del Proyecto"})]}),l.jsx("button",{onClick:r,className:"text-slate-500 hover:text-white transition-colors",children:l.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),l.jsxs("div",{className:"p-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-[60vh] overflow-y-auto custom-scrollbar",children:[l.jsxs("div",{onClick:n,className:"group p-6 rounded-2xl border-2 border-dashed border-white/5 hover:border-primary/50 hover:bg-primary/5 transition-all cursor-pointer flex flex-col items-center justify-center text-center gap-3",children:[l.jsx("div",{className:"size-12 rounded-full bg-primary/10 text-primary flex items-center justify-center group-hover:scale-110 transition-transform",children:l.jsx("span",{className:"material-symbols-outlined",children:"add"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-bold text-white",children:"Nuevo Mapa"}),l.jsx("p",{className:"text-[10px] text-slate-500 uppercase font-black tracking-tighter",children:"Crear desde cero"})]})]}),e.map(i=>l.jsxs("div",{onClick:()=>t(i),className:"group p-4 rounded-2xl bg-white/5 border border-white/5 hover:border-primary/50 hover:bg-white/10 transition-all cursor-pointer space-y-3",children:[l.jsx("div",{className:"aspect-video rounded-xl bg-surface-light border border-white/5 flex items-center justify-center overflow-hidden",children:l.jsx("span",{className:"material-symbols-outlined text-4xl opacity-20 group-hover:opacity-40 transition-opacity",children:"image"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-bold text-white truncate",children:i.nombre}),l.jsx("p",{className:"text-[10px] text-slate-500 uppercase font-black tracking-tighter",children:"ltima edicin: Reciente"})]})]},i.id))]}),l.jsx("footer",{className:"p-6 bg-white/[0.02] border-t border-white/5 flex justify-end",children:l.jsx("p",{className:"text-[10px] text-slate-600 font-bold uppercase tracking-widest",children:"Selecciona un mapa para cargar el visor"})})]})})}),xZ=()=>{const[e,t]=G.useState("viewer"),[n,r]=G.useState([]),[i,a]=G.useState(null),[s,o]=G.useState(!1);G.useEffect(()=>{c()},[]);const c=async()=>{try{const p=(await be.get("/world-bible/entities")).filter(m=>m.tipoEspecial==="map");r(p),p.length>0&&!i&&a(p[0])}catch(f){console.error("Error loading maps",f)}},d=f=>{f==="blank"?t("editor"):(c(),t("viewer"))};return l.jsxs("div",{className:"flex-1 flex flex-col h-full bg-background-dark overflow-hidden",children:[e==="viewer"&&l.jsxs("div",{className:"flex-1 flex flex-col h-full relative",children:[l.jsx("button",{onClick:()=>o(!0),className:"absolute right-12 bottom-12 z-50 size-16 rounded-3xl bg-primary text-white flex items-center justify-center shadow-2xl shadow-primary/40 hover:scale-110 active:scale-95 transition-all group",children:l.jsx("span",{className:"material-symbols-outlined text-3xl group-hover:rotate-90 transition-transform duration-300",children:"add"})}),l.jsx(vZ,{map:i}),s&&l.jsx(yZ,{maps:n,onSelect:f=>{a(f),o(!1)},onCreateNew:()=>{o(!1),t("wizard")},onClose:()=>o(!1)})]}),e==="wizard"&&l.jsx(pZ,{onCancel:()=>t("viewer"),onCreate:d}),e==="editor"&&l.jsx(gZ,{onBack:()=>t("viewer"),onSave:()=>t("viewer")})]})},bZ=()=>{const[e,t]=G.useState("Loading..."),[n,r]=G.useState({words:0,rules:0,glyphs:0}),[i,a]=G.useState("Standard Tongue");G.useEffect(()=>{s()},[]);const s=async()=>{try{const o=await be.get("/bd/proyecto-activo");t(o.nombreProyecto);const c=await be.get("/conlang/stats");r(c);const d=await be.get("/conlang/lenguas");d&&d.length>0&&a(d[0].nombre)}catch(o){console.error("Error loading conlang data:",o),t("Default Project")}};return l.jsxs("div",{className:"flex-1 flex flex-col h-full bg-[#0a0a0f] text-slate-300 font-sans overflow-y-auto no-scrollbar p-12 lg:p-16 gap-16",children:[l.jsxs("header",{className:"space-y-6",children:[l.jsxs("nav",{className:"flex items-center gap-3 text-[10px] font-black uppercase tracking-widest text-slate-500",children:[l.jsx("span",{children:e}),l.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_right"}),l.jsxs("span",{className:"text-white",children:["Conlang: ",i]})]}),l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"space-y-4 max-w-2xl",children:[l.jsx("h1",{className:"text-6xl font-manrope font-black text-white tracking-tight",children:i}),l.jsxs("p",{className:"text-lg text-slate-400 leading-relaxed",children:["A conlang belonging to ",e,". Manage its lexicon, grammar rules, and writing systems here."]}),l.jsxs("div",{className:"flex gap-4 pt-2",children:[l.jsx("span",{className:"px-3 py-1 rounded bg-emerald-500/10 text-emerald-400 border border-emerald-500/20 text-[9px] font-black uppercase tracking-widest",children:"Complete: 45%"}),l.jsx("span",{className:"px-3 py-1 rounded bg-primary/10 text-primary border border-primary/20 text-[9px] font-black uppercase tracking-widest",children:"Type: Agglutinative"})]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"flex items-center gap-3 text-slate-500 border-r border-white/5 pr-6 mr-2",children:[l.jsx("span",{className:"material-symbols-outlined text-sm animate-pulse text-emerald-500",children:"save"}),l.jsx("span",{className:"text-[10px] font-bold",children:"Auto-Saved"}),l.jsx("span",{className:"material-symbols-outlined hover:text-white transition-colors cursor-pointer",children:"dark_mode"})]}),l.jsx(nt,{variant:"primary",icon:"add",size:"md",children:"Create Element"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-12",children:[l.jsxs("section",{className:"xl:col-span-2 space-y-8",children:[l.jsxs("div",{className:"flex justify-between items-center px-2",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"material-symbols-outlined text-primary text-2xl",children:"menu_book"}),l.jsx("h3",{className:"text-xl font-bold text-white tracking-tight",children:"Lexicon"})]}),l.jsxs("span",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-widest hover:text-primary transition-all cursor-pointer",children:["View All (",n.words,")"]})]}),l.jsxs(Ke,{className:"p-0 border-white/5 bg-surface-dark/40 overflow-hidden shadow-2xl",children:[l.jsxs("div",{className:"p-4 border-b border-white/5 flex items-center gap-4",children:[l.jsxs("div",{className:"flex-1 relative",children:[l.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-slate-600 text-lg",children:"search"}),l.jsx("input",{type:"text",placeholder:"Search word or meaning...",className:"w-full bg-white/5 border border-white/5 rounded-2xl py-3 pl-12 pr-4 text-xs focus:ring-1 focus:ring-primary/30 outline-none transition-all"})]}),l.jsx("button",{className:"size-10 rounded-xl bg-white/5 border border-white/5 flex items-center justify-center text-slate-500 hover:text-white transition-all",children:l.jsx("span",{className:"material-symbols-outlined text-xl",children:"tune"})})]}),l.jsxs("div",{className:"p-6 space-y-4",children:[l.jsx(Mx,{word:"Ael'or",type:"noun",gender:"neutral",def:"Starlight; specifically the light from the twin moons."}),l.jsx(Mx,{word:"Vexi",type:"verb",gender:"transitive",def:"To weave magic; to create something from nothing."}),l.jsx(Mx,{word:"Dra'kan",type:"adj",gender:"",def:"Ancient; belonging to the era of dragons."})]}),l.jsx("div",{className:"p-6 bg-black/20 border-t border-white/5",children:l.jsxs("button",{className:"w-full py-4 rounded-3xl border-2 border-dashed border-white/5 text-slate-600 hover:text-white hover:border-primary/50 hover:bg-primary/5 transition-all text-[10px] font-black uppercase tracking-[0.2em] flex items-center justify-center gap-3",children:[l.jsx("span",{className:"material-symbols-outlined",children:"add"}),"Add New Word"]})})]})]}),l.jsxs("section",{className:"space-y-8",children:[l.jsxs("div",{className:"flex justify-between items-center px-2",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"material-symbols-outlined text-primary text-2xl",children:"architecture"}),l.jsx("h3",{className:"text-xl font-bold text-white tracking-tight",children:"Grammar Rules"})]}),l.jsx("span",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-widest hover:text-primary transition-all cursor-pointer",children:"Manage"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx(HE,{title:"Sentence Structure",status:"active",statusColor:"emerald",desc:"Standard order is SOV (Subject-Object-Verb), but poetry uses VSO for emphasis on action.",tags:["Syntax","Basic"]}),l.jsx(HE,{title:"Noun Declensions",status:"pending",statusColor:"amber",desc:"Seven cases marked by suffixes. Pluralization shifts the stress to the final syllable.",tags:["Morphology"]}),l.jsxs("button",{className:"w-full h-32 rounded-[2.5rem] border-2 border-dashed border-white/5 flex flex-col items-center justify-center gap-2 text-slate-600 hover:text-white hover:border-primary/30 hover:bg-primary/5 transition-all",children:[l.jsx("span",{className:"material-symbols-outlined",children:"add_circle"}),l.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Define New Rule"})]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-12",children:[l.jsxs("section",{className:"space-y-8",children:[l.jsxs("div",{className:"flex justify-between items-center px-2",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"material-symbols-outlined text-primary text-2xl",children:"draw"}),l.jsx("h3",{className:"text-xl font-bold text-white tracking-tight",children:"Writing System"})]}),l.jsxs("div",{className:"flex gap-2 text-slate-600",children:[l.jsx("button",{className:"p-1 rounded hover:bg-white/5 hover:text-white",children:l.jsx("span",{className:"material-symbols-outlined text-lg",children:"grid_view"})}),l.jsx("button",{className:"p-1 rounded hover:bg-white/5 hover:text-white",children:l.jsx("span",{className:"material-symbols-outlined text-lg",children:"title"})})]})]}),l.jsxs(Ke,{className:"p-8 border-white/5 bg-surface-dark/40 rounded-[3rem] space-y-8 shadow-2xl",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-2xl font-black text-white tracking-tight mb-1",children:"Moon Script"}),l.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Abugida  Left-to-Right"})]}),l.jsx(nt,{variant:"secondary",size:"sm",className:"bg-primary/10 border-primary/20 text-primary",children:"Open Editor"})]}),l.jsxs("div",{className:"grid grid-cols-6 gap-3",children:[["","","","",""].map(o=>l.jsx("div",{className:"aspect-square rounded-2xl bg-white/5 border border-white/5 flex items-center justify-center text-3xl font-serif text-white hover:bg-white/10 transition-all cursor-pointer",children:o},o)),l.jsx("div",{className:"aspect-square rounded-2xl border-2 border-dashed border-white/5 flex items-center justify-center text-slate-600 hover:border-primary/50 hover:text-white transition-all cursor-pointer",children:l.jsx("span",{className:"material-symbols-outlined",children:"add"})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between text-[8px] font-black uppercase tracking-widest text-slate-600",children:[l.jsx("span",{children:"Glyph Set"}),l.jsx("span",{children:"24/32 Completed"})]}),l.jsx("div",{className:"h-1.5 w-full bg-white/5 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-primary w-[75%] rounded-full shadow-[0_0_10px_rgba(99,102,242,0.5)]"})})]})]})]}),l.jsxs("section",{className:"space-y-8",children:[l.jsxs("div",{className:"flex items-center gap-3 px-2",children:[l.jsx("span",{className:"material-symbols-outlined text-primary text-2xl",children:"graphic_eq"}),l.jsx("h3",{className:"text-xl font-bold text-white tracking-tight",children:"Translator & Phonology"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[l.jsxs(Ke,{className:"p-8 border-primary/20 bg-primary/5 rounded-[3rem] space-y-6 shadow-2xl shadow-primary/10",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-primary",children:"Live Logographic Stream"}),l.jsx("span",{className:"material-symbols-outlined text-primary animate-pulse",children:"sync_alt"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("input",{type:"text",placeholder:"Source text here...",className:"w-full bg-black/40 border border-white/10 rounded-2xl p-4 text-xs font-bold text-white focus:border-primary/50 outline-none transition-all"}),l.jsxs("div",{className:"h-24 rounded-2xl bg-black/60 border border-white/5 flex items-center justify-center relative overflow-hidden group",children:[l.jsx("span",{className:"text-5xl font-serif text-white opacity-40 group-hover:opacity-100 transition-opacity",children:"   "}),l.jsx("div",{className:"absolute top-2 right-4 text-[7px] font-black uppercase tracking-widest text-slate-700",children:"Rendered Output"})]})]})]}),l.jsxs(Ke,{className:"p-8 border-white/5 bg-surface-dark/40 rounded-[3rem] space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Vowel Inventory"}),l.jsx("button",{className:"text-primary text-lg",children:l.jsx("span",{className:"material-symbols-outlined",children:"add"})})]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:["/a/","/e/","/i/","/o/","/u/","/y/"].map(o=>l.jsx("div",{className:"px-3 py-1.5 rounded-xl bg-white/5 border border-white/5 text-[11px] font-mono font-bold text-slate-300 hover:text-white transition-colors cursor-pointer",children:o},o))})]}),l.jsxs(Ke,{className:"p-8 border-white/5 bg-surface-dark/40 rounded-[3rem] space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Vector Symbols"}),l.jsx("button",{className:"text-[8px] font-bold text-primary hover:underline transition-all",children:"Upload SVG"})]}),l.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[[{id:1,icon:"filter_vintage"},{id:2,icon:"auto_awesome"},{id:3,icon:"infinite"}].map(o=>l.jsx("div",{className:"aspect-square rounded-2xl bg-white/5 border border-white/5 flex items-center justify-center text-slate-400 hover:text-white transition-all cursor-pointer",children:l.jsx("span",{className:"material-symbols-outlined text-2xl",children:o.icon})},o.id)),l.jsxs("div",{className:"aspect-square rounded-2xl border-2 border-dashed border-white/5 flex flex-col items-center justify-center text-slate-700 hover:border-primary/50 hover:text-white transition-all cursor-pointer",children:[l.jsx("span",{className:"material-symbols-outlined text-lg",children:"cloud_upload"}),l.jsx("span",{className:"text-[7px] font-bold uppercase mt-1",children:"Add"})]})]})]})]})]})]})]})},Mx=({word:e,type:t,gender:n,def:r})=>l.jsxs("div",{className:"p-4 rounded-2xl border border-transparent hover:bg-white/5 hover:border-white/5 transition-all group cursor-pointer relative",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[l.jsx("h4",{className:"text-xl font-manrope font-black text-white group-hover:text-primary transition-colors",children:e}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("span",{className:"text-[9px] font-bold text-slate-600 italic",children:t}),n&&l.jsxs("span",{className:"text-[9px] font-bold text-slate-700 uppercase",children:["(",n,")"]})]})]}),l.jsx("p",{className:"text-sm text-slate-400 leading-relaxed font-manrope",children:r}),l.jsx("button",{className:"absolute right-4 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity p-2 text-slate-600 hover:text-white",children:l.jsx("span",{className:"material-symbols-outlined",children:"edit_note"})})]}),HE=({title:e,status:t,statusColor:n,desc:r,tags:i})=>l.jsxs(Ke,{className:"p-8 border-white/5 hover:border-white/10 transition-all cursor-pointer group space-y-4",children:[l.jsxs("header",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`size-2 rounded-full bg-${n}-500 shadow-[0_0_10px_rgba(var(--${n}-rgb),0.5)]`}),l.jsx("h4",{className:"font-bold text-white group-hover:text-primary transition-colors",children:e})]}),l.jsx("button",{className:"text-slate-700 hover:text-white transition-colors",children:l.jsx("span",{className:"material-symbols-outlined",children:"more_vert"})})]}),l.jsx("p",{className:"text-[11px] text-slate-500 leading-relaxed font-manrope",children:r}),l.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(a=>l.jsx("span",{className:"px-2 py-0.5 rounded bg-white/5 border border-white/5 text-[8px] font-black uppercase tracking-widest text-slate-600",children:a},a))})]}),wZ=()=>l.jsxs("div",{className:"flex-1 flex flex-col h-full bg-[#050B0D] text-[#00E5FF] font-mono overflow-hidden",children:[l.jsxs("header",{className:"h-20 border-b border-[#00E5FF]/20 flex items-center justify-between px-10 bg-black/40 backdrop-blur-xl",children:[l.jsxs("div",{className:"flex items-center gap-10",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-[10px] opacity-40 uppercase tracking-[0.4em] font-bold",children:"Datastream_Nav"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"material-symbols-outlined text-2xl",children:"language"}),l.jsx("span",{className:"text-2xl font-black italic tracking-tighter",children:"Chronos Atlas"})]})]}),l.jsxs("div",{className:"flex items-center gap-4 border-l border-[#00E5FF]/20 pl-10",children:[l.jsx("span",{className:"text-3xl font-black tracking-[0.2em] italic opacity-80",children:"DIGITAL RUNE COMPILER"}),l.jsx("div",{className:"px-3 py-1 rounded-sm bg-[#00E5FF]/10 border border-[#00E5FF]/30 text-[10px] font-black uppercase tracking-widest animate-pulse",children:"Data Ready"})]})]}),l.jsxs("div",{className:"flex items-center gap-8",children:[l.jsxs("div",{className:"flex items-center gap-2 opacity-60 hover:opacity-100 transition-opacity cursor-pointer",children:[l.jsx("span",{className:"material-symbols-outlined text-lg",children:"help"}),l.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Protocol"})]}),l.jsxs("button",{className:"flex items-center gap-3 px-6 py-2.5 bg-[#00E5FF] text-black font-black uppercase text-xs tracking-widest rounded-sm hover:shadow-[0_0_20px_rgba(0,229,255,0.4)] transition-all",children:[l.jsx("span",{className:"material-symbols-outlined",children:"save"}),"Commit Data"]}),l.jsx("div",{className:"size-10 rounded-full bg-gradient-to-tr from-[#00E5FF] to-blue-600 border border-white/20 shadow-lg"})]})]}),l.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[l.jsxs("main",{className:"flex-1 flex flex-col p-12 gap-12 overflow-y-auto no-scrollbar relative",children:[l.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-white/5 overflow-hidden",children:l.jsx("div",{className:"h-full bg-[#00E5FF] w-[64%] shadow-[0_0_10px_#00E5FF]"})}),l.jsxs("section",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"size-2 bg-[#00E5FF] rounded-full shadow-[0_0_10px_#00E5FF]"}),l.jsx("h3",{className:"text-sm font-black uppercase tracking-[0.4em]",children:"Glyph Set (Scan)"})]}),l.jsxs("div",{className:"flex gap-4 opacity-40",children:[l.jsx("span",{className:"material-symbols-outlined text-xl",children:"grid_view"}),l.jsx("span",{className:"material-symbols-outlined text-xl",children:"view_list"})]})]}),l.jsxs("div",{className:"p-10 rounded-sm border border-[#00E5FF]/10 bg-[#00E5FF]/[0.02] grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-6",children:[l.jsx(ei,{symbol:"",keyLabel:"A"}),l.jsx(ei,{symbol:"",keyLabel:"B"}),l.jsx(ei,{symbol:"",keyLabel:"C"}),l.jsx(ei,{symbol:"",keyLabel:"D",active:!0}),l.jsx(ei,{}),l.jsx(ei,{}),l.jsx(ei,{}),l.jsx(ei,{}),l.jsx(ei,{}),l.jsx(ei,{}),l.jsx("div",{className:"aspect-square rounded shadow-inner border border-dashed border-[#00E5FF]/20 flex items-center justify-center hover:bg-[#00E5FF]/5 transition-colors cursor-pointer group",children:l.jsx("span",{className:"material-symbols-outlined opacity-20 group-hover:opacity-100 transition-opacity",children:"add"})})]}),l.jsxs("div",{className:"flex justify-between items-center text-[10px] font-black uppercase tracking-[0.2em] opacity-40",children:[l.jsx("span",{children:"26 Glyphs Mapped"}),l.jsxs("div",{className:"flex gap-10",children:[l.jsxs("button",{className:"hover:text-[#00E5FF] flex items-center gap-2",children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"tune"})," Manage"]}),l.jsxs("button",{className:"hover:text-[#00E5FF] flex items-center gap-2",children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"settings_input_component"})," Ranges"]})]})]})]}),l.jsxs("section",{className:"flex-1 flex flex-col gap-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"size-2 bg-[#00E5FF] rounded-full shadow-[0_0_10px_#00E5FF] opacity-40"}),l.jsx("h3",{className:"text-sm font-black uppercase tracking-[0.4em] opacity-40",children:"Live Preview Stream"})]}),l.jsxs("div",{className:"flex-1 rounded-sm border border-[#00E5FF]/10 bg-black/40 flex flex-col p-12 items-center justify-center relative group min-h-[300px]",children:[l.jsx("div",{className:"absolute top-4 left-4 text-[8px] opacity-20 uppercase tracking-widest font-black",children:"Buffer Status: Active"}),l.jsx("textarea",{className:"w-full h-full bg-transparent border-none outline-none text-center text-7xl font-bold tracking-widest text-[#00E5FF]/10 group-hover:text-[#00E5FF]/40 transition-all placeholder:text-[#00E5FF]/5 resize-none italic",placeholder:"Input your data stream here..."}),l.jsxs("div",{className:"absolute bottom-6 right-8 flex gap-6 text-[8px] font-black uppercase tracking-widest opacity-20",children:[l.jsx("span",{children:"48px"}),l.jsx("span",{children:"Regular"}),l.jsx("span",{children:"UTF-8"})]}),l.jsx("div",{className:"absolute inset-x-12 top-1/2 h-px bg-[#00E5FF]/10 -translate-y-1/2 pointer-events-none"})]})]})]}),l.jsxs("aside",{className:"w-[450px] border-l border-[#00E5FF]/10 p-10 flex flex-col gap-10 bg-black/40 backdrop-blur-xl relative z-20",children:[l.jsx("h3",{className:"text-xs font-black uppercase tracking-[0.4em] opacity-60 mb-2",children:"Configuration Matrix"}),l.jsxs(Ke,{className:"p-8 border-[#00E5FF]/20 bg-[#00E5FF]/[0.02] space-y-8 rounded-sm",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("label",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-[#00E5FF]/60 block ml-1",children:"Font Name"}),l.jsx("input",{type:"text",defaultValue:"NEURALINK CIPHER",className:"w-full bg-black/60 border border-[#00E5FF]/30 px-6 py-4 text-xs font-black text-[#00E5FF] focus:border-[#00E5FF] outline-none transition-all tracking-widest uppercase italic"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("label",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-[#00E5FF]/60 block ml-1",children:"Author / Metadata"}),l.jsx("input",{type:"text",placeholder:"YOUR SYNTHETIC ID",className:"w-full bg-black/60 border border-[#00E5FF]/30 px-6 py-4 text-xs font-black text-[#00E5FF] focus:border-[#00E5FF] outline-none transition-all tracking-widest uppercase italic"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("label",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-[#00E5FF]/60 block ml-1",children:"Format"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx("button",{className:"py-4 border border-[#00E5FF] bg-[#00E5FF]/10 text-[#00E5FF] text-xs font-black tracking-widest shadow-[0_0_15px_rgba(0,229,255,0.2)]",children:".TTF"}),l.jsx("button",{className:"py-4 border border-[#00E5FF]/20 text-[#00E5FF]/40 text-xs font-black tracking-widest hover:border-[#00E5FF]/40 transition-all",children:".OTF"})]})]}),l.jsxs("div",{className:"pt-4 space-y-6",children:[l.jsx(VE,{label:"Ligatures",active:!0}),l.jsx(VE,{label:"Kerning",active:!0})]}),l.jsxs("button",{className:"w-full py-6 mt-6 bg-gradient-to-r from-blue-600 to-fuchsia-500 text-white font-black uppercase text-xs tracking-[0.3em] flex items-center justify-center gap-4 hover:shadow-[0_0_30px_rgba(255,0,255,0.3)] transition-all animate-pulse",children:[l.jsx("span",{className:"material-symbols-outlined text-lg",children:"download"}),"Compile & Download"]})]}),l.jsxs("div",{className:"flex-1 flex flex-col gap-6 opacity-30 pointer-events-none",children:[l.jsxs("div",{className:"flex justify-between text-[10px] uppercase font-black",children:[l.jsx("span",{children:"Compiler Logs"}),l.jsx("span",{children:"V2.0.4"})]}),l.jsxs("div",{className:"flex-1 border border-[#00E5FF]/10 bg-black/20 p-6 flex flex-col font-mono text-[9px] gap-2 overflow-hidden",children:[l.jsx("p",{children:"[SCN] Initializing Glyph Buffer..."}),l.jsx("p",{children:"[MAP] Vector data detected for U+0394"}),l.jsx("p",{children:"[SYS] Memory allocation optimized"}),l.jsx("p",{className:"animate-pulse",children:"_"})]})]})]})]})]}),ei=({symbol:e,keyLabel:t,active:n})=>l.jsxs("div",{className:`aspect-square rounded border transition-all cursor-pointer flex items-center justify-center relative group ${n?"bg-[#00E5FF]/20 border-[#00E5FF] shadow-[0_0_20px_rgba(0,229,255,0.3)]":"bg-black/40 border-[#00E5FF]/10 hover:border-[#00E5FF]/40"}`,children:[l.jsx("span",{className:`text-3xl font-serif ${n?"text-white":"opacity-20 group-hover:opacity-60"}`,children:e||"..."}),t&&l.jsx("span",{className:`absolute top-1 right-1 text-[8px] font-black uppercase ${n?"text-[#00E5FF]/80":"opacity-20"}`,children:t})]}),VE=({label:e,active:t})=>l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest opacity-60",children:e}),l.jsx("button",{className:`w-12 h-6 rounded-full p-1 transition-colors relative ${t?"bg-[#00E5FF]/40":"bg-white/5"}`,children:l.jsx("div",{className:`size-4 rounded-full bg-[#00E5FF] shadow-[0_0_10px_#00E5FF] transition-transform ${t?"translate-x-6":"translate-x-0"}`})})]}),_Z=({onBack:e,onSave:t})=>{const[n,r]=G.useState(4),[i,a]=G.useState("curve"),[s,o]=G.useState(1),c=[{id:"select",icon:"near_me"},{id:"curve",icon:"gesture"},{id:"eraser",icon:"ink_eraser"},{id:"line",icon:"horizontal_rule"},{id:"shape",icon:"pentagon"},{id:"text",icon:"title"}],d=[{id:1,name:"Trazo Principal",type:"Vector",locked:!0,visible:!0},{id:2,name:"Detalles Secundarios",type:"Vector",locked:!0,visible:!0},{id:3,name:"Boceto Ref.",type:"Imagen (Raster)",locked:!0,visible:!1}];return l.jsxs("div",{className:"flex-1 flex flex-col bg-[#0a0a0f] text-slate-300 font-sans h-full overflow-hidden relative",children:[l.jsxs("header",{className:"h-20 flex-none border-b border-white/5 flex items-center justify-between px-8 bg-surface-dark/80 backdrop-blur-md z-30",children:[l.jsxs("div",{className:"flex items-center gap-6",children:[l.jsx("button",{onClick:e,className:"p-2 rounded-xl bg-white/5 hover:bg-white/10 transition-colors",children:l.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),l.jsx("div",{className:"w-px h-8 bg-white/10"}),l.jsxs("div",{children:[l.jsxs("nav",{className:"flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-slate-500 mb-0.5",children:[l.jsx("span",{children:"Idiomas"}),l.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_right"}),l.jsx("span",{className:"text-white",children:"Editor Grfico"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"flex items-center gap-4 text-slate-500",children:[l.jsx("button",{className:"hover:text-white transition-colors",children:l.jsx("span",{className:"material-symbols-outlined text-xl",children:"undo"})}),l.jsx("button",{className:"hover:text-white transition-colors",children:l.jsx("span",{className:"material-symbols-outlined text-xl",children:"redo"})})]}),l.jsx("div",{className:"w-px h-4 bg-white/10 mx-2"}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{className:"p-1 rounded hover:bg-white/5 text-slate-500 hover:text-white",children:l.jsx("span",{className:"material-symbols-outlined text-lg",children:"grid_on"})}),l.jsx("button",{className:"p-1 rounded bg-white/10 text-primary",children:l.jsx("span",{className:"material-symbols-outlined text-sm",children:"hub"})})]})]})]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("button",{className:"flex items-center gap-2 px-6 py-2.5 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 transition-all text-xs font-black uppercase tracking-widest text-slate-400",children:[l.jsx("span",{className:"material-symbols-outlined text-lg",children:"download"}),"Exportar SVG"]}),l.jsx(nt,{variant:"primary",icon:"save",className:"px-8 py-3 shadow-xl shadow-primary/30",onClick:t,children:"Guardar Glifo"}),l.jsx("div",{className:"size-10 rounded-full bg-gradient-to-br from-primary to-orange-400 border-2 border-white/10 shadow-lg ml-2"})]})]}),l.jsxs("div",{className:"flex-1 flex relative overflow-hidden",children:[l.jsxs("aside",{className:"h-full w-20 flex-none border-r border-white/5 bg-surface-dark/40 backdrop-blur-xl flex flex-col items-center py-6 gap-2 z-40",children:[c.map(f=>l.jsx("button",{onClick:()=>a(f.id),className:`size-12 rounded-2xl flex items-center justify-center transition-all ${i===f.id?"bg-primary text-white shadow-lg shadow-primary/30":"text-slate-600 hover:text-white hover:bg-white/5"}`,children:l.jsx("span",{className:"material-symbols-outlined text-2xl",children:f.icon})},f.id)),l.jsx("div",{className:"flex-1"}),l.jsx("button",{className:"size-12 rounded-2xl flex items-center justify-center text-slate-600 hover:text-white transition-all",children:l.jsx("span",{className:"material-symbols-outlined text-2xl",children:"add_photo_alternate"})}),l.jsx("button",{className:"size-12 rounded-2xl flex items-center justify-center text-slate-600 hover:text-white transition-all",children:l.jsx("span",{className:"material-symbols-outlined text-2xl",children:"settings"})})]}),l.jsxs("main",{className:"flex-1 bg-[#050508] relative overflow-hidden flex items-center justify-center no-scrollbar",children:[l.jsx("div",{className:"absolute inset-x-20 top-1/2 h-px bg-red-500/20 pointer-events-none"}),l.jsxs("div",{className:"relative group animate-in zoom-in-95 duration-700",children:[l.jsx("div",{className:"absolute inset-x-0 top-10 h-px bg-white/10"}),l.jsx("div",{className:"absolute inset-x-0 bottom-10 h-px bg-white/10"}),l.jsxs("div",{className:"w-[600px] h-[600px] border border-white/5 rounded-3xl bg-black/40 flex items-center justify-center relative overflow-hidden",children:[l.jsxs("svg",{width:"400",height:"400",className:"drop-shadow-[0_0_20px_rgba(99,102,242,0.5)] scale-125",children:[l.jsx("circle",{cx:"200",cy:"230",r:"100",fill:"none",stroke:"#6366f1",strokeWidth:"6",strokeLinecap:"round"}),l.jsx("line",{x1:"200",y1:"230",x2:"200",y2:"380",stroke:"#6366f1",strokeWidth:"6",strokeLinecap:"round"}),l.jsx("circle",{cx:"200",cy:"230",r:"4",fill:"white"}),l.jsx("rect",{x:"196",y:"376",width:"8",height:"8",fill:"white"}),l.jsx("rect",{x:"96",y:"226",width:"8",height:"8",fill:"#6366f1"}),l.jsx("rect",{x:"296",y:"226",width:"8",height:"8",fill:"#6366f1"}),l.jsx("rect",{x:"136",y:"160",width:"6",height:"6",fill:"#6366f1",className:"opacity-40"}),l.jsx("rect",{x:"256",y:"160",width:"6",height:"6",fill:"#6366f1",className:"opacity-40"})]}),l.jsx("div",{className:"absolute top-[160px] left-[136px] size-1 border border-primary/40 border-dashed w-[20px] h-[100px] pointer-events-none"}),l.jsx("div",{className:"absolute top-[160px] right-[136px] size-1 border border-primary/40 border-dashed w-[20px] h-[100px] pointer-events-none"})]})]}),l.jsx("div",{className:"absolute bottom-10 left-1/2 -translate-x-1/2",children:l.jsxs(Ke,{className:"px-6 py-2.5 flex items-center gap-6 rounded-2xl border-white/10 bg-surface-dark/40 backdrop-blur-2xl shadow-2xl",children:[l.jsx("button",{className:"text-slate-500 hover:text-white transition-colors",children:l.jsx("span",{className:"material-symbols-outlined text-lg",children:"remove"})}),l.jsx("span",{className:"text-[10px] font-black text-white w-12 text-center uppercase tracking-widest",children:"120%"}),l.jsx("button",{className:"text-slate-500 hover:text-white transition-colors",children:l.jsx("span",{className:"material-symbols-outlined text-lg",children:"add"})})]})})]}),l.jsxs("aside",{className:"w-96 flex-none flex flex-col p-10 gap-10 bg-surface-dark/20 backdrop-blur-xl border-l border-white/5 z-40 overflow-y-auto no-scrollbar",children:[l.jsxs("section",{className:"space-y-6",children:[l.jsxs("header",{className:"flex justify-between items-center group cursor-pointer",children:[l.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Propiedades"}),l.jsx("span",{className:"material-symbols-outlined text-slate-700 text-sm",children:"more_horiz"})]}),l.jsxs(Ke,{className:"p-8 border-white/5 bg-surface-dark/40 rounded-[2rem] space-y-8",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-xs font-bold text-slate-400",children:"Grosor de Trazo"}),l.jsxs("span",{className:"px-2 py-0.5 rounded bg-white/5 text-[10px] font-black text-white",children:[n,"px"]})]}),l.jsx("input",{type:"range",min:"1",max:"20",value:n,onChange:f=>r(f.target.value),className:"w-full accent-primary h-1 bg-white/5 rounded-full appearance-none cursor-pointer"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-600 block ml-1",children:"Color / Relleno"}),l.jsxs("div",{className:"flex items-center gap-4 bg-black/40 rounded-2xl p-4 border border-white/5",children:[l.jsx("div",{className:"size-10 rounded-full bg-primary shadow-[0_0_15px_rgba(99,102,242,0.4)] border-2 border-white/20"}),l.jsx("input",{type:"text",defaultValue:"#2F2CED",className:"bg-transparent border-none outline-none text-xs font-mono text-slate-300 w-full"})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-600 block ml-1",children:"Terminacin (Cap)"}),l.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[l.jsx(Lx,{icon:"square"}),l.jsx(Lx,{icon:"circle",active:!0}),l.jsx(Lx,{icon:"rectangle"})]})]}),l.jsxs("button",{className:"w-full py-4 rounded-2xl bg-white/5 border border-white/5 text-[10px] font-black uppercase tracking-widest text-slate-300 flex items-center justify-center gap-3 hover:bg-white/10 transition-all",children:[l.jsx("span",{className:"material-symbols-outlined text-lg",children:"gesture"}),"Suavizar Trazo"]})]})]}),l.jsxs("section",{className:"flex-1 flex flex-col gap-6",children:[l.jsxs("header",{className:"flex justify-between items-center",children:[l.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Capas"}),l.jsx("button",{className:"p-1 rounded bg-white/5 text-slate-500 hover:text-white transition-all",children:l.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"})})]}),l.jsx("div",{className:"space-y-3 overflow-y-auto no-scrollbar flex-1",children:d.map(f=>l.jsxs("div",{onClick:()=>o(f.id),className:`flex items-center gap-4 p-4 rounded-2xl transition-all cursor-pointer group ${s===f.id?"bg-primary/10 border border-primary/20":"bg-white/[0.02] border border-white/5 opacity-60 hover:opacity-100 hover:border-white/10"}`,children:[l.jsx("button",{className:"material-symbols-outlined text-sm text-slate-500 hover:text-white",children:f.visible?"visibility":"visibility_off"}),l.jsx("div",{className:"size-10 rounded-xl bg-black border border-white/10 flex items-center justify-center",children:l.jsx("span",{className:"material-symbols-outlined text-slate-600 group-hover:text-primary transition-colors text-xl",children:f.type.includes("Vector")?"timeline":"image"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"text-xs font-bold text-white truncate",children:f.name}),l.jsx("p",{className:"text-[9px] text-slate-600 font-bold uppercase tracking-widest",children:f.type})]}),l.jsx("button",{className:"material-symbols-outlined text-slate-700 text-sm",children:"lock"})]},f.id))}),l.jsxs("div",{className:"flex gap-4 p-3 rounded-2xl bg-black/20 border border-white/5",children:[l.jsx("button",{className:"flex-1 p-2 rounded-xl hover:bg-white/5 text-slate-700 hover:text-white transition-all",children:l.jsx("span",{className:"material-symbols-outlined text-xl",children:"delete"})}),l.jsx("button",{className:"flex-1 p-2 rounded-xl hover:bg-white/5 text-slate-700 hover:text-white transition-all",children:l.jsx("span",{className:"material-symbols-outlined text-xl",children:"content_copy"})}),l.jsx("button",{className:"flex-1 p-2 rounded-xl hover:bg-white/5 text-slate-700 hover:text-white transition-all",children:l.jsx("span",{className:"material-symbols-outlined text-xl",children:"folder"})})]})]}),l.jsxs("div",{className:"p-6 rounded-[2rem] bg-gradient-to-br from-primary/20 to-orange-500/20 border border-white/10 space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"material-symbols-outlined text-primary",children:"auto_fix_high"}),l.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-white",children:"Vectorizacin Inteligente"})]}),l.jsx("p",{className:"text-[10px] text-slate-500 leading-relaxed font-manrope",children:"Arrastra una imagen para convertirla automticamente en nodos editables."}),l.jsx(nt,{variant:"primary",size:"sm",className:"w-full text-[9px] py-3 rounded-xl shadow-lg",children:"Importar y Procesar"})]})]})]})]})},Lx=({icon:e,active:t})=>l.jsx("button",{className:`py-4 rounded-xl border transition-all flex items-center justify-center ${t?"bg-primary/20 border-primary shadow-lg shadow-primary/20":"bg-white/5 border-white/5 hover:border-white/10"}`,children:l.jsx("span",{className:`material-symbols-outlined text-lg ${t?"text-white":"text-slate-600"}`,children:e})}),NZ=()=>{const[e,t]=G.useState("hub");return l.jsxs("div",{className:"flex-1 flex flex-col h-full bg-[#050508] overflow-hidden",children:[e==="hub"&&l.jsxs("div",{className:"flex-1 flex flex-col h-full relative",children:[l.jsx("button",{onClick:()=>t("foundry"),className:"absolute right-12 bottom-12 z-50 size-16 rounded-3xl bg-primary text-white flex items-center justify-center shadow-2xl shadow-primary/40 hover:scale-110 active:scale-95 transition-all group",title:"Glyph Foundry",children:l.jsx("span",{className:"material-symbols-outlined text-3xl group-hover:rotate-12 transition-transform duration-300",children:"font_download"})}),l.jsx(bZ,{onOpenEditor:()=>t("editor")})]}),e==="foundry"&&l.jsx(wZ,{onBack:()=>t("hub")}),e==="editor"&&l.jsx(_Z,{onBack:()=>t("hub"),onSave:()=>t("hub")})]})};var SZ=o5;function EZ(e,t){return SZ(e,t)}var kZ=EZ,pO={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(e,t){(function(r,i){e.exports=i()})(typeof self<"u"?self:En,function(){return function(n){var r={};function i(a){if(r[a])return r[a].exports;var s=r[a]={i:a,l:!1,exports:{}};return n[a].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=n,i.c=r,i.d=function(a,s,o){i.o(a,s)||Object.defineProperty(a,s,{configurable:!1,enumerable:!0,get:o})},i.n=function(a){var s=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(s,"a",s),s},i.o=function(a,s){return Object.prototype.hasOwnProperty.call(a,s)},i.p="",i(i.s=109)}([function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(17),s=i(18),o=i(19),c=i(45),d=i(46),f=i(47),p=i(48),m=i(49),g=i(12),b=i(32),y=i(33),N=i(31),v=i(1),_={Scope:v.Scope,create:v.create,find:v.find,query:v.query,register:v.register,Container:a.default,Format:s.default,Leaf:o.default,Embed:p.default,Scroll:c.default,Block:f.default,Inline:d.default,Text:m.default,Attributor:{Attribute:g.default,Class:b.default,Style:y.default,Store:N.default}};r.default=_},function(n,r,i){var a=this&&this.__extends||function(){var N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var x in _)_.hasOwnProperty(x)&&(v[x]=_[x])};return function(v,_){N(v,_);function x(){this.constructor=v}v.prototype=_===null?Object.create(_):(x.prototype=_.prototype,new x)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=function(N){a(v,N);function v(_){var x=this;return _="[Parchment] "+_,x=N.call(this,_)||this,x.message=_,x.name=x.constructor.name,x}return v}(Error);r.ParchmentError=s;var o={},c={},d={},f={};r.DATA_KEY="__blot";var p;(function(N){N[N.TYPE=3]="TYPE",N[N.LEVEL=12]="LEVEL",N[N.ATTRIBUTE=13]="ATTRIBUTE",N[N.BLOT=14]="BLOT",N[N.INLINE=7]="INLINE",N[N.BLOCK=11]="BLOCK",N[N.BLOCK_BLOT=10]="BLOCK_BLOT",N[N.INLINE_BLOT=6]="INLINE_BLOT",N[N.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",N[N.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",N[N.ANY=15]="ANY"})(p=r.Scope||(r.Scope={}));function m(N,v){var _=b(N);if(_==null)throw new s("Unable to create "+N+" blot");var x=_,w=N instanceof Node||N.nodeType===Node.TEXT_NODE?N:x.create(v);return new x(w,v)}r.create=m;function g(N,v){return v===void 0&&(v=!1),N==null?null:N[r.DATA_KEY]!=null?N[r.DATA_KEY].blot:v?g(N.parentNode,v):null}r.find=g;function b(N,v){v===void 0&&(v=p.ANY);var _;if(typeof N=="string")_=f[N]||o[N];else if(N instanceof Text||N.nodeType===Node.TEXT_NODE)_=f.text;else if(typeof N=="number")N&p.LEVEL&p.BLOCK?_=f.block:N&p.LEVEL&p.INLINE&&(_=f.inline);else if(N instanceof HTMLElement){var x=(N.getAttribute("class")||"").split(/\s+/);for(var w in x)if(_=c[x[w]],_)break;_=_||d[N.tagName]}return _==null?null:v&p.LEVEL&_.scope&&v&p.TYPE&_.scope?_:null}r.query=b;function y(){for(var N=[],v=0;v<arguments.length;v++)N[v]=arguments[v];if(N.length>1)return N.map(function(w){return y(w)});var _=N[0];if(typeof _.blotName!="string"&&typeof _.attrName!="string")throw new s("Invalid definition");if(_.blotName==="abstract")throw new s("Cannot register abstract class");if(f[_.blotName||_.attrName]=_,typeof _.keyName=="string")o[_.keyName]=_;else if(_.className!=null&&(c[_.className]=_),_.tagName!=null){Array.isArray(_.tagName)?_.tagName=_.tagName.map(function(w){return w.toUpperCase()}):_.tagName=_.tagName.toUpperCase();var x=Array.isArray(_.tagName)?_.tagName:[_.tagName];x.forEach(function(w){(d[w]==null||_.className==null)&&(d[w]=_)})}return _}r.register=y},function(n,r,i){var a=i(51),s=i(11),o=i(3),c=i(20),d=String.fromCharCode(0),f=function(p){Array.isArray(p)?this.ops=p:p!=null&&Array.isArray(p.ops)?this.ops=p.ops:this.ops=[]};f.prototype.insert=function(p,m){var g={};return p.length===0?this:(g.insert=p,m!=null&&typeof m=="object"&&Object.keys(m).length>0&&(g.attributes=m),this.push(g))},f.prototype.delete=function(p){return p<=0?this:this.push({delete:p})},f.prototype.retain=function(p,m){if(p<=0)return this;var g={retain:p};return m!=null&&typeof m=="object"&&Object.keys(m).length>0&&(g.attributes=m),this.push(g)},f.prototype.push=function(p){var m=this.ops.length,g=this.ops[m-1];if(p=o(!0,{},p),typeof g=="object"){if(typeof p.delete=="number"&&typeof g.delete=="number")return this.ops[m-1]={delete:g.delete+p.delete},this;if(typeof g.delete=="number"&&p.insert!=null&&(m-=1,g=this.ops[m-1],typeof g!="object"))return this.ops.unshift(p),this;if(s(p.attributes,g.attributes)){if(typeof p.insert=="string"&&typeof g.insert=="string")return this.ops[m-1]={insert:g.insert+p.insert},typeof p.attributes=="object"&&(this.ops[m-1].attributes=p.attributes),this;if(typeof p.retain=="number"&&typeof g.retain=="number")return this.ops[m-1]={retain:g.retain+p.retain},typeof p.attributes=="object"&&(this.ops[m-1].attributes=p.attributes),this}}return m===this.ops.length?this.ops.push(p):this.ops.splice(m,0,p),this},f.prototype.chop=function(){var p=this.ops[this.ops.length-1];return p&&p.retain&&!p.attributes&&this.ops.pop(),this},f.prototype.filter=function(p){return this.ops.filter(p)},f.prototype.forEach=function(p){this.ops.forEach(p)},f.prototype.map=function(p){return this.ops.map(p)},f.prototype.partition=function(p){var m=[],g=[];return this.forEach(function(b){var y=p(b)?m:g;y.push(b)}),[m,g]},f.prototype.reduce=function(p,m){return this.ops.reduce(p,m)},f.prototype.changeLength=function(){return this.reduce(function(p,m){return m.insert?p+c.length(m):m.delete?p-m.delete:p},0)},f.prototype.length=function(){return this.reduce(function(p,m){return p+c.length(m)},0)},f.prototype.slice=function(p,m){p=p||0,typeof m!="number"&&(m=1/0);for(var g=[],b=c.iterator(this.ops),y=0;y<m&&b.hasNext();){var N;y<p?N=b.next(p-y):(N=b.next(m-y),g.push(N)),y+=c.length(N)}return new f(g)},f.prototype.compose=function(p){var m=c.iterator(this.ops),g=c.iterator(p.ops),b=[],y=g.peek();if(y!=null&&typeof y.retain=="number"&&y.attributes==null){for(var N=y.retain;m.peekType()==="insert"&&m.peekLength()<=N;)N-=m.peekLength(),b.push(m.next());y.retain-N>0&&g.next(y.retain-N)}for(var v=new f(b);m.hasNext()||g.hasNext();)if(g.peekType()==="insert")v.push(g.next());else if(m.peekType()==="delete")v.push(m.next());else{var _=Math.min(m.peekLength(),g.peekLength()),x=m.next(_),w=g.next(_);if(typeof w.retain=="number"){var E={};typeof x.retain=="number"?E.retain=_:E.insert=x.insert;var P=c.attributes.compose(x.attributes,w.attributes,typeof x.retain=="number");if(P&&(E.attributes=P),v.push(E),!g.hasNext()&&s(v.ops[v.ops.length-1],E)){var A=new f(m.rest());return v.concat(A).chop()}}else typeof w.delete=="number"&&typeof x.retain=="number"&&v.push(w)}return v.chop()},f.prototype.concat=function(p){var m=new f(this.ops.slice());return p.ops.length>0&&(m.push(p.ops[0]),m.ops=m.ops.concat(p.ops.slice(1))),m},f.prototype.diff=function(p,m){if(this.ops===p.ops)return new f;var g=[this,p].map(function(_){return _.map(function(x){if(x.insert!=null)return typeof x.insert=="string"?x.insert:d;var w=_===p?"on":"with";throw new Error("diff() called "+w+" non-document")}).join("")}),b=new f,y=a(g[0],g[1],m),N=c.iterator(this.ops),v=c.iterator(p.ops);return y.forEach(function(_){for(var x=_[1].length;x>0;){var w=0;switch(_[0]){case a.INSERT:w=Math.min(v.peekLength(),x),b.push(v.next(w));break;case a.DELETE:w=Math.min(x,N.peekLength()),N.next(w),b.delete(w);break;case a.EQUAL:w=Math.min(N.peekLength(),v.peekLength(),x);var E=N.next(w),P=v.next(w);s(E.insert,P.insert)?b.retain(w,c.attributes.diff(E.attributes,P.attributes)):b.push(P).delete(w);break}x-=w}}),b.chop()},f.prototype.eachLine=function(p,m){m=m||`
`;for(var g=c.iterator(this.ops),b=new f,y=0;g.hasNext();){if(g.peekType()!=="insert")return;var N=g.peek(),v=c.length(N)-g.peekLength(),_=typeof N.insert=="string"?N.insert.indexOf(m,v)-v:-1;if(_<0)b.push(g.next());else if(_>0)b.push(g.next(_));else{if(p(b,g.next(1).attributes||{},y)===!1)return;y+=1,b=new f}}b.length()>0&&p(b,{},y)},f.prototype.transform=function(p,m){if(m=!!m,typeof p=="number")return this.transformPosition(p,m);for(var g=c.iterator(this.ops),b=c.iterator(p.ops),y=new f;g.hasNext()||b.hasNext();)if(g.peekType()==="insert"&&(m||b.peekType()!=="insert"))y.retain(c.length(g.next()));else if(b.peekType()==="insert")y.push(b.next());else{var N=Math.min(g.peekLength(),b.peekLength()),v=g.next(N),_=b.next(N);if(v.delete)continue;_.delete?y.push(_):y.retain(N,c.attributes.transform(v.attributes,_.attributes,m))}return y.chop()},f.prototype.transformPosition=function(p,m){m=!!m;for(var g=c.iterator(this.ops),b=0;g.hasNext()&&b<=p;){var y=g.peekLength(),N=g.peekType();if(g.next(),N==="delete"){p-=Math.min(y,p-b);continue}else N==="insert"&&(b<p||!m)&&(p+=y);b+=y}return p},n.exports=f},function(n,r){var i=Object.prototype.hasOwnProperty,a=Object.prototype.toString,s=Object.defineProperty,o=Object.getOwnPropertyDescriptor,c=function(g){return typeof Array.isArray=="function"?Array.isArray(g):a.call(g)==="[object Array]"},d=function(g){if(!g||a.call(g)!=="[object Object]")return!1;var b=i.call(g,"constructor"),y=g.constructor&&g.constructor.prototype&&i.call(g.constructor.prototype,"isPrototypeOf");if(g.constructor&&!b&&!y)return!1;var N;for(N in g);return typeof N>"u"||i.call(g,N)},f=function(g,b){s&&b.name==="__proto__"?s(g,b.name,{enumerable:!0,configurable:!0,value:b.newValue,writable:!0}):g[b.name]=b.newValue},p=function(g,b){if(b==="__proto__")if(i.call(g,b)){if(o)return o(g,b).value}else return;return g[b]};n.exports=function m(){var g,b,y,N,v,_,x=arguments[0],w=1,E=arguments.length,P=!1;for(typeof x=="boolean"&&(P=x,x=arguments[1]||{},w=2),(x==null||typeof x!="object"&&typeof x!="function")&&(x={});w<E;++w)if(g=arguments[w],g!=null)for(b in g)y=p(x,b),N=p(g,b),x!==N&&(P&&N&&(d(N)||(v=c(N)))?(v?(v=!1,_=y&&c(y)?y:[]):_=y&&d(y)?y:{},f(x,{name:b,newValue:m(P,_,N)})):typeof N<"u"&&f(x,{name:b,newValue:N}));return x}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BlockEmbed=r.bubbleFormats=void 0;var a=function(){function C(O,F){for(var M=0;M<F.length;M++){var D=F[M];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(O,D.key,D)}}return function(O,F,M){return F&&C(O.prototype,F),M&&C(O,M),O}}(),s=function C(O,F,M){O===null&&(O=Function.prototype);var D=Object.getOwnPropertyDescriptor(O,F);if(D===void 0){var $=Object.getPrototypeOf(O);return $===null?void 0:C($,F,M)}else{if("value"in D)return D.value;var V=D.get;return V===void 0?void 0:V.call(M)}},o=i(3),c=x(o),d=i(2),f=x(d),p=i(0),m=x(p),g=i(16),b=x(g),y=i(6),N=x(y),v=i(7),_=x(v);function x(C){return C&&C.__esModule?C:{default:C}}function w(C,O){if(!(C instanceof O))throw new TypeError("Cannot call a class as a function")}function E(C,O){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:C}function P(C,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);C.prototype=Object.create(O&&O.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(C,O):C.__proto__=O)}var A=1,T=function(C){P(O,C);function O(){return w(this,O),E(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return a(O,[{key:"attach",value:function(){s(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"attach",this).call(this),this.attributes=new m.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new f.default().insert(this.value(),(0,c.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(M,D){var $=m.default.query(M,m.default.Scope.BLOCK_ATTRIBUTE);$!=null&&this.attributes.attribute($,D)}},{key:"formatAt",value:function(M,D,$,V){this.format($,V)}},{key:"insertAt",value:function(M,D,$){if(typeof D=="string"&&D.endsWith(`
`)){var V=m.default.create(L.blotName);this.parent.insertBefore(V,M===0?this:this.next),V.insertAt(0,D.slice(0,-1))}else s(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertAt",this).call(this,M,D,$)}}]),O}(m.default.Embed);T.scope=m.default.Scope.BLOCK_BLOT;var L=function(C){P(O,C);function O(F){w(this,O);var M=E(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,F));return M.cache={},M}return a(O,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(m.default.Leaf).reduce(function(M,D){return D.length()===0?M:M.insert(D.value(),k(D))},new f.default).insert(`
`,k(this))),this.cache.delta}},{key:"deleteAt",value:function(M,D){s(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"deleteAt",this).call(this,M,D),this.cache={}}},{key:"formatAt",value:function(M,D,$,V){D<=0||(m.default.query($,m.default.Scope.BLOCK)?M+D===this.length()&&this.format($,V):s(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"formatAt",this).call(this,M,Math.min(D,this.length()-M-1),$,V),this.cache={})}},{key:"insertAt",value:function(M,D,$){if($!=null)return s(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertAt",this).call(this,M,D,$);if(D.length!==0){var V=D.split(`
`),K=V.shift();K.length>0&&(M<this.length()-1||this.children.tail==null?s(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertAt",this).call(this,Math.min(M,this.length()-1),K):this.children.tail.insertAt(this.children.tail.length(),K),this.cache={});var H=this;V.reduce(function(q,I){return H=H.split(q,!0),H.insertAt(0,I),I.length},M+K.length)}}},{key:"insertBefore",value:function(M,D){var $=this.children.head;s(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertBefore",this).call(this,M,D),$ instanceof b.default&&$.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=s(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"length",this).call(this)+A),this.cache.length}},{key:"moveChildren",value:function(M,D){s(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"moveChildren",this).call(this,M,D),this.cache={}}},{key:"optimize",value:function(M){s(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"optimize",this).call(this,M),this.cache={}}},{key:"path",value:function(M){return s(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"path",this).call(this,M,!0)}},{key:"removeChild",value:function(M){s(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"removeChild",this).call(this,M),this.cache={}}},{key:"split",value:function(M){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(D&&(M===0||M>=this.length()-A)){var $=this.clone();return M===0?(this.parent.insertBefore($,this),this):(this.parent.insertBefore($,this.next),$)}else{var V=s(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"split",this).call(this,M,D);return this.cache={},V}}}]),O}(m.default.Block);L.blotName="block",L.tagName="P",L.defaultChild="break",L.allowedChildren=[N.default,m.default.Embed,_.default];function k(C){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return C==null||(typeof C.formats=="function"&&(O=(0,c.default)(O,C.formats())),C.parent==null||C.parent.blotName=="scroll"||C.parent.statics.scope!==C.statics.scope)?O:k(C.parent,O)}r.bubbleFormats=k,r.BlockEmbed=T,r.default=L},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.overload=r.expandConfig=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},s=function(){function H(q,I){var z=[],W=!0,Q=!1,ee=void 0;try{for(var Y=q[Symbol.iterator](),U;!(W=(U=Y.next()).done)&&(z.push(U.value),!(I&&z.length===I));W=!0);}catch(J){Q=!0,ee=J}finally{try{!W&&Y.return&&Y.return()}finally{if(Q)throw ee}}return z}return function(q,I){if(Array.isArray(q))return q;if(Symbol.iterator in Object(q))return H(q,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function H(q,I){for(var z=0;z<I.length;z++){var W=I[z];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(q,W.key,W)}}return function(q,I,z){return I&&H(q.prototype,I),z&&H(q,z),q}}();i(50);var c=i(2),d=k(c),f=i(14),p=k(f),m=i(8),g=k(m),b=i(9),y=k(b),N=i(0),v=k(N),_=i(15),x=k(_),w=i(3),E=k(w),P=i(10),A=k(P),T=i(34),L=k(T);function k(H){return H&&H.__esModule?H:{default:H}}function C(H,q,I){return q in H?Object.defineProperty(H,q,{value:I,enumerable:!0,configurable:!0,writable:!0}):H[q]=I,H}function O(H,q){if(!(H instanceof q))throw new TypeError("Cannot call a class as a function")}var F=(0,A.default)("quill"),M=function(){o(H,null,[{key:"debug",value:function(I){I===!0&&(I="log"),A.default.level(I)}},{key:"find",value:function(I){return I.__quill||v.default.find(I)}},{key:"import",value:function(I){return this.imports[I]==null&&F.error("Cannot import "+I+". Are you sure it was registered?"),this.imports[I]}},{key:"register",value:function(I,z){var W=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof I!="string"){var ee=I.attrName||I.blotName;typeof ee=="string"?this.register("formats/"+ee,I,z):Object.keys(I).forEach(function(Y){W.register(Y,I[Y],z)})}else this.imports[I]!=null&&!Q&&F.warn("Overwriting "+I+" with",z),this.imports[I]=z,(I.startsWith("blots/")||I.startsWith("formats/"))&&z.blotName!=="abstract"?v.default.register(z):I.startsWith("modules")&&typeof z.register=="function"&&z.register()}}]);function H(q){var I=this,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(O(this,H),this.options=D(q,z),this.container=this.options.container,this.container==null)return F.error("Invalid Quill container",q);this.options.debug&&H.debug(this.options.debug);var W=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new g.default,this.scroll=v.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new p.default(this.scroll),this.selection=new x.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(g.default.events.EDITOR_CHANGE,function(ee){ee===g.default.events.TEXT_CHANGE&&I.root.classList.toggle("ql-blank",I.editor.isBlank())}),this.emitter.on(g.default.events.SCROLL_UPDATE,function(ee,Y){var U=I.selection.lastRange,J=U&&U.length===0?U.index:void 0;$.call(I,function(){return I.editor.update(null,Y,J)},ee)});var Q=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+W+"<p><br></p></div>");this.setContents(Q),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return o(H,[{key:"addContainer",value:function(I){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof I=="string"){var W=I;I=document.createElement("div"),I.classList.add(W)}return this.container.insertBefore(I,z),I}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(I,z,W){var Q=this,ee=V(I,z,W),Y=s(ee,4);return I=Y[0],z=Y[1],W=Y[3],$.call(this,function(){return Q.editor.deleteText(I,z)},W,I,-1*z)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(I),this.container.classList.toggle("ql-disabled",!I)}},{key:"focus",value:function(){var I=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=I,this.scrollIntoView()}},{key:"format",value:function(I,z){var W=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.default.sources.API;return $.call(this,function(){var ee=W.getSelection(!0),Y=new d.default;if(ee==null)return Y;if(v.default.query(I,v.default.Scope.BLOCK))Y=W.editor.formatLine(ee.index,ee.length,C({},I,z));else{if(ee.length===0)return W.selection.format(I,z),Y;Y=W.editor.formatText(ee.index,ee.length,C({},I,z))}return W.setSelection(ee,g.default.sources.SILENT),Y},Q)}},{key:"formatLine",value:function(I,z,W,Q,ee){var Y=this,U=void 0,J=V(I,z,W,Q,ee),te=s(J,4);return I=te[0],z=te[1],U=te[2],ee=te[3],$.call(this,function(){return Y.editor.formatLine(I,z,U)},ee,I,0)}},{key:"formatText",value:function(I,z,W,Q,ee){var Y=this,U=void 0,J=V(I,z,W,Q,ee),te=s(J,4);return I=te[0],z=te[1],U=te[2],ee=te[3],$.call(this,function(){return Y.editor.formatText(I,z,U)},ee,I,0)}},{key:"getBounds",value:function(I){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,W=void 0;typeof I=="number"?W=this.selection.getBounds(I,z):W=this.selection.getBounds(I.index,I.length);var Q=this.container.getBoundingClientRect();return{bottom:W.bottom-Q.top,height:W.height,left:W.left-Q.left,right:W.right-Q.left,top:W.top-Q.top,width:W.width}}},{key:"getContents",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-I,W=V(I,z),Q=s(W,2);return I=Q[0],z=Q[1],this.editor.getContents(I,z)}},{key:"getFormat",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof I=="number"?this.editor.getFormat(I,z):this.editor.getFormat(I.index,I.length)}},{key:"getIndex",value:function(I){return I.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(I){return this.scroll.leaf(I)}},{key:"getLine",value:function(I){return this.scroll.line(I)}},{key:"getLines",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof I!="number"?this.scroll.lines(I.index,I.length):this.scroll.lines(I,z)}},{key:"getModule",value:function(I){return this.theme.modules[I]}},{key:"getSelection",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return I&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-I,W=V(I,z),Q=s(W,2);return I=Q[0],z=Q[1],this.editor.getText(I,z)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(I,z,W){var Q=this,ee=arguments.length>3&&arguments[3]!==void 0?arguments[3]:H.sources.API;return $.call(this,function(){return Q.editor.insertEmbed(I,z,W)},ee,I)}},{key:"insertText",value:function(I,z,W,Q,ee){var Y=this,U=void 0,J=V(I,0,W,Q,ee),te=s(J,4);return I=te[0],U=te[2],ee=te[3],$.call(this,function(){return Y.editor.insertText(I,z,U)},ee,I,z.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(I,z,W){this.clipboard.dangerouslyPasteHTML(I,z,W)}},{key:"removeFormat",value:function(I,z,W){var Q=this,ee=V(I,z,W),Y=s(ee,4);return I=Y[0],z=Y[1],W=Y[3],$.call(this,function(){return Q.editor.removeFormat(I,z)},W,I)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(I){var z=this,W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.default.sources.API;return $.call(this,function(){I=new d.default(I);var Q=z.getLength(),ee=z.editor.deleteText(0,Q),Y=z.editor.applyDelta(I),U=Y.ops[Y.ops.length-1];U!=null&&typeof U.insert=="string"&&U.insert[U.insert.length-1]===`
`&&(z.editor.deleteText(z.getLength()-1,1),Y.delete(1));var J=ee.compose(Y);return J},W)}},{key:"setSelection",value:function(I,z,W){if(I==null)this.selection.setRange(null,z||H.sources.API);else{var Q=V(I,z,W),ee=s(Q,4);I=ee[0],z=ee[1],W=ee[3],this.selection.setRange(new _.Range(I,z),W),W!==g.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(I){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.default.sources.API,W=new d.default().insert(I);return this.setContents(W,z)}},{key:"update",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g.default.sources.USER,z=this.scroll.update(I);return this.selection.update(I),z}},{key:"updateContents",value:function(I){var z=this,W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.default.sources.API;return $.call(this,function(){return I=new d.default(I),z.editor.applyDelta(I,W)},W,!0)}}]),H}();M.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},M.events=g.default.events,M.sources=g.default.sources,M.version="1.3.7",M.imports={delta:d.default,parchment:v.default,"core/module":y.default,"core/theme":L.default};function D(H,q){if(q=(0,E.default)(!0,{container:H,modules:{clipboard:!0,keyboard:!0,history:!0}},q),!q.theme||q.theme===M.DEFAULTS.theme)q.theme=L.default;else if(q.theme=M.import("themes/"+q.theme),q.theme==null)throw new Error("Invalid theme "+q.theme+". Did you register it?");var I=(0,E.default)(!0,{},q.theme.DEFAULTS);[I,q].forEach(function(Q){Q.modules=Q.modules||{},Object.keys(Q.modules).forEach(function(ee){Q.modules[ee]===!0&&(Q.modules[ee]={})})});var z=Object.keys(I.modules).concat(Object.keys(q.modules)),W=z.reduce(function(Q,ee){var Y=M.import("modules/"+ee);return Y==null?F.error("Cannot load "+ee+" module. Are you sure you registered it?"):Q[ee]=Y.DEFAULTS||{},Q},{});return q.modules!=null&&q.modules.toolbar&&q.modules.toolbar.constructor!==Object&&(q.modules.toolbar={container:q.modules.toolbar}),q=(0,E.default)(!0,{},M.DEFAULTS,{modules:W},I,q),["bounds","container","scrollingContainer"].forEach(function(Q){typeof q[Q]=="string"&&(q[Q]=document.querySelector(q[Q]))}),q.modules=Object.keys(q.modules).reduce(function(Q,ee){return q.modules[ee]&&(Q[ee]=q.modules[ee]),Q},{}),q}function $(H,q,I,z){if(this.options.strict&&!this.isEnabled()&&q===g.default.sources.USER)return new d.default;var W=I==null?null:this.getSelection(),Q=this.editor.delta,ee=H();if(W!=null&&(I===!0&&(I=W.index),z==null?W=K(W,ee,q):z!==0&&(W=K(W,I,z,q)),this.setSelection(W,g.default.sources.SILENT)),ee.length()>0){var Y,U=[g.default.events.TEXT_CHANGE,ee,Q,q];if((Y=this.emitter).emit.apply(Y,[g.default.events.EDITOR_CHANGE].concat(U)),q!==g.default.sources.SILENT){var J;(J=this.emitter).emit.apply(J,U)}}return ee}function V(H,q,I,z,W){var Q={};return typeof H.index=="number"&&typeof H.length=="number"?typeof q!="number"?(W=z,z=I,I=q,q=H.length,H=H.index):(q=H.length,H=H.index):typeof q!="number"&&(W=z,z=I,I=q,q=0),(typeof I>"u"?"undefined":a(I))==="object"?(Q=I,W=z):typeof I=="string"&&(z!=null?Q[I]=z:W=I),W=W||g.default.sources.API,[H,q,Q,W]}function K(H,q,I,z){if(H==null)return null;var W=void 0,Q=void 0;if(q instanceof d.default){var ee=[H.index,H.index+H.length].map(function(te){return q.transformPosition(te,z!==g.default.sources.USER)}),Y=s(ee,2);W=Y[0],Q=Y[1]}else{var U=[H.index,H.index+H.length].map(function(te){return te<q||te===q&&z===g.default.sources.USER?te:I>=0?te+I:Math.max(q,te+I)}),J=s(U,2);W=J[0],Q=J[1]}return new _.Range(W,Q-W)}r.expandConfig=D,r.overload=V,r.default=M},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function N(v,_){for(var x=0;x<_.length;x++){var w=_[x];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,_,x){return _&&N(v.prototype,_),x&&N(v,x),v}}(),s=function N(v,_,x){v===null&&(v=Function.prototype);var w=Object.getOwnPropertyDescriptor(v,_);if(w===void 0){var E=Object.getPrototypeOf(v);return E===null?void 0:N(E,_,x)}else{if("value"in w)return w.value;var P=w.get;return P===void 0?void 0:P.call(x)}},o=i(7),c=p(o),d=i(0),f=p(d);function p(N){return N&&N.__esModule?N:{default:N}}function m(N,v){if(!(N instanceof v))throw new TypeError("Cannot call a class as a function")}function g(N,v){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:N}function b(N,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);N.prototype=Object.create(v&&v.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(N,v):N.__proto__=v)}var y=function(N){b(v,N);function v(){return m(this,v),g(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return a(v,[{key:"formatAt",value:function(x,w,E,P){if(v.compare(this.statics.blotName,E)<0&&f.default.query(E,f.default.Scope.BLOT)){var A=this.isolate(x,w);P&&A.wrap(E,P)}else s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"formatAt",this).call(this,x,w,E,P)}},{key:"optimize",value:function(x){if(s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,x),this.parent instanceof v&&v.compare(this.statics.blotName,this.parent.statics.blotName)>0){var w=this.parent.isolate(this.offset(),this.length());this.moveChildren(w),w.wrap(this)}}}],[{key:"compare",value:function(x,w){var E=v.order.indexOf(x),P=v.order.indexOf(w);return E>=0||P>=0?E-P:x===w?0:x<w?-1:1}}]),v}(f.default.Inline);y.allowedChildren=[y,f.default.Embed,c.default],y.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],r.default=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(0),s=o(a);function o(m){return m&&m.__esModule?m:{default:m}}function c(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function d(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function f(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var p=function(m){f(g,m);function g(){return c(this,g),d(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g}(s.default.Text);r.default=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function _(x,w){for(var E=0;E<w.length;E++){var P=w[E];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(x,P.key,P)}}return function(x,w,E){return w&&_(x.prototype,w),E&&_(x,E),x}}(),s=function _(x,w,E){x===null&&(x=Function.prototype);var P=Object.getOwnPropertyDescriptor(x,w);if(P===void 0){var A=Object.getPrototypeOf(x);return A===null?void 0:_(A,w,E)}else{if("value"in P)return P.value;var T=P.get;return T===void 0?void 0:T.call(E)}},o=i(54),c=p(o),d=i(10),f=p(d);function p(_){return _&&_.__esModule?_:{default:_}}function m(_,x){if(!(_ instanceof x))throw new TypeError("Cannot call a class as a function")}function g(_,x){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:_}function b(_,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);_.prototype=Object.create(x&&x.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(_,x):_.__proto__=x)}var y=(0,f.default)("quill:events"),N=["selectionchange","mousedown","mouseup","click"];N.forEach(function(_){document.addEventListener(_,function(){for(var x=arguments.length,w=Array(x),E=0;E<x;E++)w[E]=arguments[E];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(P){if(P.__quill&&P.__quill.emitter){var A;(A=P.__quill.emitter).handleDOM.apply(A,w)}})})});var v=function(_){b(x,_);function x(){m(this,x);var w=g(this,(x.__proto__||Object.getPrototypeOf(x)).call(this));return w.listeners={},w.on("error",y.error),w}return a(x,[{key:"emit",value:function(){y.log.apply(y,arguments),s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(E){for(var P=arguments.length,A=Array(P>1?P-1:0),T=1;T<P;T++)A[T-1]=arguments[T];(this.listeners[E.type]||[]).forEach(function(L){var k=L.node,C=L.handler;(E.target===k||k.contains(E.target))&&C.apply(void 0,[E].concat(A))})}},{key:"listenDOM",value:function(E,P,A){this.listeners[E]||(this.listeners[E]=[]),this.listeners[E].push({node:P,handler:A})}}]),x}(c.default);v.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},v.sources={API:"api",SILENT:"silent",USER:"user"},r.default=v},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});function a(o,c){if(!(o instanceof c))throw new TypeError("Cannot call a class as a function")}var s=function o(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};a(this,o),this.quill=c,this.options=d};s.DEFAULTS={},r.default=s},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=["error","warn","log","info"],s="warn";function o(d){if(a.indexOf(d)<=a.indexOf(s)){for(var f,p=arguments.length,m=Array(p>1?p-1:0),g=1;g<p;g++)m[g-1]=arguments[g];(f=console)[d].apply(f,m)}}function c(d){return a.reduce(function(f,p){return f[p]=o.bind(console,p,d),f},{})}o.level=c.level=function(d){s=d},r.default=c},function(n,r,i){var a=Array.prototype.slice,s=i(52),o=i(53),c=n.exports=function(m,g,b){return b||(b={}),m===g?!0:m instanceof Date&&g instanceof Date?m.getTime()===g.getTime():!m||!g||typeof m!="object"&&typeof g!="object"?b.strict?m===g:m==g:p(m,g,b)};function d(m){return m==null}function f(m){return!(!m||typeof m!="object"||typeof m.length!="number"||typeof m.copy!="function"||typeof m.slice!="function"||m.length>0&&typeof m[0]!="number")}function p(m,g,b){var y,N;if(d(m)||d(g)||m.prototype!==g.prototype)return!1;if(o(m))return o(g)?(m=a.call(m),g=a.call(g),c(m,g,b)):!1;if(f(m)){if(!f(g)||m.length!==g.length)return!1;for(y=0;y<m.length;y++)if(m[y]!==g[y])return!1;return!0}try{var v=s(m),_=s(g)}catch{return!1}if(v.length!=_.length)return!1;for(v.sort(),_.sort(),y=v.length-1;y>=0;y--)if(v[y]!=_[y])return!1;for(y=v.length-1;y>=0;y--)if(N=v[y],!c(m[N],g[N],b))return!1;return typeof m==typeof g}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(1),s=function(){function o(c,d,f){f===void 0&&(f={}),this.attrName=c,this.keyName=d;var p=a.Scope.TYPE&a.Scope.ATTRIBUTE;f.scope!=null?this.scope=f.scope&a.Scope.LEVEL|p:this.scope=a.Scope.ATTRIBUTE,f.whitelist!=null&&(this.whitelist=f.whitelist)}return o.keys=function(c){return[].map.call(c.attributes,function(d){return d.name})},o.prototype.add=function(c,d){return this.canAdd(c,d)?(c.setAttribute(this.keyName,d),!0):!1},o.prototype.canAdd=function(c,d){var f=a.query(c,a.Scope.BLOT&(this.scope|a.Scope.TYPE));return f==null?!1:this.whitelist==null?!0:typeof d=="string"?this.whitelist.indexOf(d.replace(/["']/g,""))>-1:this.whitelist.indexOf(d)>-1},o.prototype.remove=function(c){c.removeAttribute(this.keyName)},o.prototype.value=function(c){var d=c.getAttribute(this.keyName);return this.canAdd(c,d)&&d?d:""},o}();r.default=s},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Code=void 0;var a=function(){function T(L,k){var C=[],O=!0,F=!1,M=void 0;try{for(var D=L[Symbol.iterator](),$;!(O=($=D.next()).done)&&(C.push($.value),!(k&&C.length===k));O=!0);}catch(V){F=!0,M=V}finally{try{!O&&D.return&&D.return()}finally{if(F)throw M}}return C}return function(L,k){if(Array.isArray(L))return L;if(Symbol.iterator in Object(L))return T(L,k);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function T(L,k){for(var C=0;C<k.length;C++){var O=k[C];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(L,O.key,O)}}return function(L,k,C){return k&&T(L.prototype,k),C&&T(L,C),L}}(),o=function T(L,k,C){L===null&&(L=Function.prototype);var O=Object.getOwnPropertyDescriptor(L,k);if(O===void 0){var F=Object.getPrototypeOf(L);return F===null?void 0:T(F,k,C)}else{if("value"in O)return O.value;var M=O.get;return M===void 0?void 0:M.call(C)}},c=i(2),d=_(c),f=i(0),p=_(f),m=i(4),g=_(m),b=i(6),y=_(b),N=i(7),v=_(N);function _(T){return T&&T.__esModule?T:{default:T}}function x(T,L){if(!(T instanceof L))throw new TypeError("Cannot call a class as a function")}function w(T,L){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L&&(typeof L=="object"||typeof L=="function")?L:T}function E(T,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof L);T.prototype=Object.create(L&&L.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),L&&(Object.setPrototypeOf?Object.setPrototypeOf(T,L):T.__proto__=L)}var P=function(T){E(L,T);function L(){return x(this,L),w(this,(L.__proto__||Object.getPrototypeOf(L)).apply(this,arguments))}return L}(y.default);P.blotName="code",P.tagName="CODE";var A=function(T){E(L,T);function L(){return x(this,L),w(this,(L.__proto__||Object.getPrototypeOf(L)).apply(this,arguments))}return s(L,[{key:"delta",value:function(){var C=this,O=this.domNode.textContent;return O.endsWith(`
`)&&(O=O.slice(0,-1)),O.split(`
`).reduce(function(F,M){return F.insert(M).insert(`
`,C.formats())},new d.default)}},{key:"format",value:function(C,O){if(!(C===this.statics.blotName&&O)){var F=this.descendant(v.default,this.length()-1),M=a(F,1),D=M[0];D!=null&&D.deleteAt(D.length()-1,1),o(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"format",this).call(this,C,O)}}},{key:"formatAt",value:function(C,O,F,M){if(O!==0&&!(p.default.query(F,p.default.Scope.BLOCK)==null||F===this.statics.blotName&&M===this.statics.formats(this.domNode))){var D=this.newlineIndex(C);if(!(D<0||D>=C+O)){var $=this.newlineIndex(C,!0)+1,V=D-$+1,K=this.isolate($,V),H=K.next;K.format(F,M),H instanceof L&&H.formatAt(0,C-$+O-V,F,M)}}}},{key:"insertAt",value:function(C,O,F){if(F==null){var M=this.descendant(v.default,C),D=a(M,2),$=D[0],V=D[1];$.insertAt(V,O)}}},{key:"length",value:function(){var C=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?C:C+1}},{key:"newlineIndex",value:function(C){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(O)return this.domNode.textContent.slice(0,C).lastIndexOf(`
`);var F=this.domNode.textContent.slice(C).indexOf(`
`);return F>-1?C+F:-1}},{key:"optimize",value:function(C){this.domNode.textContent.endsWith(`
`)||this.appendChild(p.default.create("text",`
`)),o(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"optimize",this).call(this,C);var O=this.next;O!=null&&O.prev===this&&O.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===O.statics.formats(O.domNode)&&(O.optimize(C),O.moveChildren(this),O.remove())}},{key:"replace",value:function(C){o(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"replace",this).call(this,C),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(O){var F=p.default.find(O);F==null?O.parentNode.removeChild(O):F instanceof p.default.Embed?F.remove():F.unwrap()})}}],[{key:"create",value:function(C){var O=o(L.__proto__||Object.getPrototypeOf(L),"create",this).call(this,C);return O.setAttribute("spellcheck",!1),O}},{key:"formats",value:function(){return!0}}]),L}(g.default);A.blotName="code-block",A.tagName="PRE",A.TAB="  ",r.Code=P,r.default=A},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},s=function(){function H(q,I){var z=[],W=!0,Q=!1,ee=void 0;try{for(var Y=q[Symbol.iterator](),U;!(W=(U=Y.next()).done)&&(z.push(U.value),!(I&&z.length===I));W=!0);}catch(J){Q=!0,ee=J}finally{try{!W&&Y.return&&Y.return()}finally{if(Q)throw ee}}return z}return function(q,I){if(Array.isArray(q))return q;if(Symbol.iterator in Object(q))return H(q,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function H(q,I){for(var z=0;z<I.length;z++){var W=I[z];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(q,W.key,W)}}return function(q,I,z){return I&&H(q.prototype,I),z&&H(q,z),q}}(),c=i(2),d=O(c),f=i(20),p=O(f),m=i(0),g=O(m),b=i(13),y=O(b),N=i(24),v=O(N),_=i(4),x=O(_),w=i(16),E=O(w),P=i(21),A=O(P),T=i(11),L=O(T),k=i(3),C=O(k);function O(H){return H&&H.__esModule?H:{default:H}}function F(H,q,I){return q in H?Object.defineProperty(H,q,{value:I,enumerable:!0,configurable:!0,writable:!0}):H[q]=I,H}function M(H,q){if(!(H instanceof q))throw new TypeError("Cannot call a class as a function")}var D=/^[ -~]*$/,$=function(){function H(q){M(this,H),this.scroll=q,this.delta=this.getDelta()}return o(H,[{key:"applyDelta",value:function(I){var z=this,W=!1;this.scroll.update();var Q=this.scroll.length();return this.scroll.batchStart(),I=K(I),I.reduce(function(ee,Y){var U=Y.retain||Y.delete||Y.insert.length||1,J=Y.attributes||{};if(Y.insert!=null){if(typeof Y.insert=="string"){var te=Y.insert;te.endsWith(`
`)&&W&&(W=!1,te=te.slice(0,-1)),ee>=Q&&!te.endsWith(`
`)&&(W=!0),z.scroll.insertAt(ee,te);var X=z.scroll.line(ee),ne=s(X,2),ue=ne[0],se=ne[1],ce=(0,C.default)({},(0,_.bubbleFormats)(ue));if(ue instanceof x.default){var de=ue.descendant(g.default.Leaf,se),Oe=s(de,1),ge=Oe[0];ce=(0,C.default)(ce,(0,_.bubbleFormats)(ge))}J=p.default.attributes.diff(ce,J)||{}}else if(a(Y.insert)==="object"){var re=Object.keys(Y.insert)[0];if(re==null)return ee;z.scroll.insertAt(ee,re,Y.insert[re])}Q+=U}return Object.keys(J).forEach(function(he){z.scroll.formatAt(ee,U,he,J[he])}),ee+U},0),I.reduce(function(ee,Y){return typeof Y.delete=="number"?(z.scroll.deleteAt(ee,Y.delete),ee):ee+(Y.retain||Y.insert.length||1)},0),this.scroll.batchEnd(),this.update(I)}},{key:"deleteText",value:function(I,z){return this.scroll.deleteAt(I,z),this.update(new d.default().retain(I).delete(z))}},{key:"formatLine",value:function(I,z){var W=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(Q).forEach(function(ee){if(!(W.scroll.whitelist!=null&&!W.scroll.whitelist[ee])){var Y=W.scroll.lines(I,Math.max(z,1)),U=z;Y.forEach(function(J){var te=J.length();if(!(J instanceof y.default))J.format(ee,Q[ee]);else{var X=I-J.offset(W.scroll),ne=J.newlineIndex(X+U)-X+1;J.formatAt(X,ne,ee,Q[ee])}U-=te})}}),this.scroll.optimize(),this.update(new d.default().retain(I).retain(z,(0,A.default)(Q)))}},{key:"formatText",value:function(I,z){var W=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(Q).forEach(function(ee){W.scroll.formatAt(I,z,ee,Q[ee])}),this.update(new d.default().retain(I).retain(z,(0,A.default)(Q)))}},{key:"getContents",value:function(I,z){return this.delta.slice(I,I+z)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(I,z){return I.concat(z.delta())},new d.default)}},{key:"getFormat",value:function(I){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,W=[],Q=[];z===0?this.scroll.path(I).forEach(function(Y){var U=s(Y,1),J=U[0];J instanceof x.default?W.push(J):J instanceof g.default.Leaf&&Q.push(J)}):(W=this.scroll.lines(I,z),Q=this.scroll.descendants(g.default.Leaf,I,z));var ee=[W,Q].map(function(Y){if(Y.length===0)return{};for(var U=(0,_.bubbleFormats)(Y.shift());Object.keys(U).length>0;){var J=Y.shift();if(J==null)return U;U=V((0,_.bubbleFormats)(J),U)}return U});return C.default.apply(C.default,ee)}},{key:"getText",value:function(I,z){return this.getContents(I,z).filter(function(W){return typeof W.insert=="string"}).map(function(W){return W.insert}).join("")}},{key:"insertEmbed",value:function(I,z,W){return this.scroll.insertAt(I,z,W),this.update(new d.default().retain(I).insert(F({},z,W)))}},{key:"insertText",value:function(I,z){var W=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return z=z.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(I,z),Object.keys(Q).forEach(function(ee){W.scroll.formatAt(I,z.length,ee,Q[ee])}),this.update(new d.default().retain(I).insert(z,(0,A.default)(Q)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var I=this.scroll.children.head;return I.statics.blotName!==x.default.blotName||I.children.length>1?!1:I.children.head instanceof E.default}},{key:"removeFormat",value:function(I,z){var W=this.getText(I,z),Q=this.scroll.line(I+z),ee=s(Q,2),Y=ee[0],U=ee[1],J=0,te=new d.default;Y!=null&&(Y instanceof y.default?J=Y.newlineIndex(U)-U+1:J=Y.length()-U,te=Y.delta().slice(U,U+J-1).insert(`
`));var X=this.getContents(I,z+J),ne=X.diff(new d.default().insert(W).concat(te)),ue=new d.default().retain(I).concat(ne);return this.applyDelta(ue)}},{key:"update",value:function(I){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,Q=this.delta;if(z.length===1&&z[0].type==="characterData"&&z[0].target.data.match(D)&&g.default.find(z[0].target)){var ee=g.default.find(z[0].target),Y=(0,_.bubbleFormats)(ee),U=ee.offset(this.scroll),J=z[0].oldValue.replace(v.default.CONTENTS,""),te=new d.default().insert(J),X=new d.default().insert(ee.value()),ne=new d.default().retain(U).concat(te.diff(X,W));I=ne.reduce(function(ue,se){return se.insert?ue.insert(se.insert,Y):ue.push(se)},new d.default),this.delta=Q.compose(I)}else this.delta=this.getDelta(),(!I||!(0,L.default)(Q.compose(I),this.delta))&&(I=Q.diff(this.delta,W));return I}}]),H}();function V(H,q){return Object.keys(q).reduce(function(I,z){return H[z]==null||(q[z]===H[z]?I[z]=q[z]:Array.isArray(q[z])?q[z].indexOf(H[z])<0&&(I[z]=q[z].concat([H[z]])):I[z]=[q[z],H[z]]),I},{})}function K(H){return H.reduce(function(q,I){if(I.insert===1){var z=(0,A.default)(I.attributes);return delete z.image,q.insert({image:I.attributes.image},z)}if(I.attributes!=null&&(I.attributes.list===!0||I.attributes.bullet===!0)&&(I=(0,A.default)(I),I.attributes.list?I.attributes.list="ordered":(I.attributes.list="bullet",delete I.attributes.bullet)),typeof I.insert=="string"){var W=I.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return q.insert(W,I.attributes)}return q.push(I)},new d.default)}r.default=$},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Range=void 0;var a=function(){function T(L,k){var C=[],O=!0,F=!1,M=void 0;try{for(var D=L[Symbol.iterator](),$;!(O=($=D.next()).done)&&(C.push($.value),!(k&&C.length===k));O=!0);}catch(V){F=!0,M=V}finally{try{!O&&D.return&&D.return()}finally{if(F)throw M}}return C}return function(L,k){if(Array.isArray(L))return L;if(Symbol.iterator in Object(L))return T(L,k);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function T(L,k){for(var C=0;C<k.length;C++){var O=k[C];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(L,O.key,O)}}return function(L,k,C){return k&&T(L.prototype,k),C&&T(L,C),L}}(),o=i(0),c=v(o),d=i(21),f=v(d),p=i(11),m=v(p),g=i(8),b=v(g),y=i(10),N=v(y);function v(T){return T&&T.__esModule?T:{default:T}}function _(T){if(Array.isArray(T)){for(var L=0,k=Array(T.length);L<T.length;L++)k[L]=T[L];return k}else return Array.from(T)}function x(T,L){if(!(T instanceof L))throw new TypeError("Cannot call a class as a function")}var w=(0,N.default)("quill:selection"),E=function T(L){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;x(this,T),this.index=L,this.length=k},P=function(){function T(L,k){var C=this;x(this,T),this.emitter=k,this.scroll=L,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=c.default.create("cursor",this),this.lastRange=this.savedRange=new E(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){C.mouseDown||setTimeout(C.update.bind(C,b.default.sources.USER),1)}),this.emitter.on(b.default.events.EDITOR_CHANGE,function(O,F){O===b.default.events.TEXT_CHANGE&&F.length()>0&&C.update(b.default.sources.SILENT)}),this.emitter.on(b.default.events.SCROLL_BEFORE_UPDATE,function(){if(C.hasFocus()){var O=C.getNativeRange();O!=null&&O.start.node!==C.cursor.textNode&&C.emitter.once(b.default.events.SCROLL_UPDATE,function(){try{C.setNativeRange(O.start.node,O.start.offset,O.end.node,O.end.offset)}catch{}})}}),this.emitter.on(b.default.events.SCROLL_OPTIMIZE,function(O,F){if(F.range){var M=F.range,D=M.startNode,$=M.startOffset,V=M.endNode,K=M.endOffset;C.setNativeRange(D,$,V,K)}}),this.update(b.default.sources.SILENT)}return s(T,[{key:"handleComposition",value:function(){var k=this;this.root.addEventListener("compositionstart",function(){k.composing=!0}),this.root.addEventListener("compositionend",function(){if(k.composing=!1,k.cursor.parent){var C=k.cursor.restore();if(!C)return;setTimeout(function(){k.setNativeRange(C.startNode,C.startOffset,C.endNode,C.endOffset)},1)}})}},{key:"handleDragging",value:function(){var k=this;this.emitter.listenDOM("mousedown",document.body,function(){k.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){k.mouseDown=!1,k.update(b.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(k,C){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[k])){this.scroll.update();var O=this.getNativeRange();if(!(O==null||!O.native.collapsed||c.default.query(k,c.default.Scope.BLOCK))){if(O.start.node!==this.cursor.textNode){var F=c.default.find(O.start.node,!1);if(F==null)return;if(F instanceof c.default.Leaf){var M=F.split(O.start.offset);F.parent.insertBefore(this.cursor,M)}else F.insertBefore(this.cursor,O.start.node);this.cursor.attach()}this.cursor.format(k,C),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(k){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,O=this.scroll.length();k=Math.min(k,O-1),C=Math.min(k+C,O-1)-k;var F=void 0,M=this.scroll.leaf(k),D=a(M,2),$=D[0],V=D[1];if($==null)return null;var K=$.position(V,!0),H=a(K,2);F=H[0],V=H[1];var q=document.createRange();if(C>0){q.setStart(F,V);var I=this.scroll.leaf(k+C),z=a(I,2);if($=z[0],V=z[1],$==null)return null;var W=$.position(V,!0),Q=a(W,2);return F=Q[0],V=Q[1],q.setEnd(F,V),q.getBoundingClientRect()}else{var ee="left",Y=void 0;return F instanceof Text?(V<F.data.length?(q.setStart(F,V),q.setEnd(F,V+1)):(q.setStart(F,V-1),q.setEnd(F,V),ee="right"),Y=q.getBoundingClientRect()):(Y=$.domNode.getBoundingClientRect(),V>0&&(ee="right")),{bottom:Y.top+Y.height,height:Y.height,left:Y[ee],right:Y[ee],top:Y.top,width:0}}}},{key:"getNativeRange",value:function(){var k=document.getSelection();if(k==null||k.rangeCount<=0)return null;var C=k.getRangeAt(0);if(C==null)return null;var O=this.normalizeNative(C);return w.info("getNativeRange",O),O}},{key:"getRange",value:function(){var k=this.getNativeRange();if(k==null)return[null,null];var C=this.normalizedToRange(k);return[C,k]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(k){var C=this,O=[[k.start.node,k.start.offset]];k.native.collapsed||O.push([k.end.node,k.end.offset]);var F=O.map(function($){var V=a($,2),K=V[0],H=V[1],q=c.default.find(K,!0),I=q.offset(C.scroll);return H===0?I:q instanceof c.default.Container?I+q.length():I+q.index(K,H)}),M=Math.min(Math.max.apply(Math,_(F)),this.scroll.length()-1),D=Math.min.apply(Math,[M].concat(_(F)));return new E(D,M-D)}},{key:"normalizeNative",value:function(k){if(!A(this.root,k.startContainer)||!k.collapsed&&!A(this.root,k.endContainer))return null;var C={start:{node:k.startContainer,offset:k.startOffset},end:{node:k.endContainer,offset:k.endOffset},native:k};return[C.start,C.end].forEach(function(O){for(var F=O.node,M=O.offset;!(F instanceof Text)&&F.childNodes.length>0;)if(F.childNodes.length>M)F=F.childNodes[M],M=0;else if(F.childNodes.length===M)F=F.lastChild,M=F instanceof Text?F.data.length:F.childNodes.length+1;else break;O.node=F,O.offset=M}),C}},{key:"rangeToNative",value:function(k){var C=this,O=k.collapsed?[k.index]:[k.index,k.index+k.length],F=[],M=this.scroll.length();return O.forEach(function(D,$){D=Math.min(M-1,D);var V=void 0,K=C.scroll.leaf(D),H=a(K,2),q=H[0],I=H[1],z=q.position(I,$!==0),W=a(z,2);V=W[0],I=W[1],F.push(V,I)}),F.length<2&&(F=F.concat(F)),F}},{key:"scrollIntoView",value:function(k){var C=this.lastRange;if(C!=null){var O=this.getBounds(C.index,C.length);if(O!=null){var F=this.scroll.length()-1,M=this.scroll.line(Math.min(C.index,F)),D=a(M,1),$=D[0],V=$;if(C.length>0){var K=this.scroll.line(Math.min(C.index+C.length,F)),H=a(K,1);V=H[0]}if(!($==null||V==null)){var q=k.getBoundingClientRect();O.top<q.top?k.scrollTop-=q.top-O.top:O.bottom>q.bottom&&(k.scrollTop+=O.bottom-q.bottom)}}}}},{key:"setNativeRange",value:function(k,C){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k,F=arguments.length>3&&arguments[3]!==void 0?arguments[3]:C,M=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(w.info("setNativeRange",k,C,O,F),!(k!=null&&(this.root.parentNode==null||k.parentNode==null||O.parentNode==null))){var D=document.getSelection();if(D!=null)if(k!=null){this.hasFocus()||this.root.focus();var $=(this.getNativeRange()||{}).native;if($==null||M||k!==$.startContainer||C!==$.startOffset||O!==$.endContainer||F!==$.endOffset){k.tagName=="BR"&&(C=[].indexOf.call(k.parentNode.childNodes,k),k=k.parentNode),O.tagName=="BR"&&(F=[].indexOf.call(O.parentNode.childNodes,O),O=O.parentNode);var V=document.createRange();V.setStart(k,C),V.setEnd(O,F),D.removeAllRanges(),D.addRange(V)}}else D.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(k){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:b.default.sources.API;if(typeof C=="string"&&(O=C,C=!1),w.info("setRange",k),k!=null){var F=this.rangeToNative(k);this.setNativeRange.apply(this,_(F).concat([C]))}else this.setNativeRange(null);this.update(O)}},{key:"update",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b.default.sources.USER,C=this.lastRange,O=this.getRange(),F=a(O,2),M=F[0],D=F[1];if(this.lastRange=M,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,m.default)(C,this.lastRange)){var $;!this.composing&&D!=null&&D.native.collapsed&&D.start.node!==this.cursor.textNode&&this.cursor.restore();var V=[b.default.events.SELECTION_CHANGE,(0,f.default)(this.lastRange),(0,f.default)(C),k];if(($=this.emitter).emit.apply($,[b.default.events.EDITOR_CHANGE].concat(V)),k!==b.default.sources.SILENT){var K;(K=this.emitter).emit.apply(K,V)}}}}]),T}();function A(T,L){try{L.parentNode}catch{return!1}return L instanceof Text&&(L=L.parentNode),T.contains(L)}r.Range=E,r.default=P},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function b(y,N){for(var v=0;v<N.length;v++){var _=N[v];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(y,_.key,_)}}return function(y,N,v){return N&&b(y.prototype,N),v&&b(y,v),y}}(),s=function b(y,N,v){y===null&&(y=Function.prototype);var _=Object.getOwnPropertyDescriptor(y,N);if(_===void 0){var x=Object.getPrototypeOf(y);return x===null?void 0:b(x,N,v)}else{if("value"in _)return _.value;var w=_.get;return w===void 0?void 0:w.call(v)}},o=i(0),c=d(o);function d(b){return b&&b.__esModule?b:{default:b}}function f(b,y){if(!(b instanceof y))throw new TypeError("Cannot call a class as a function")}function p(b,y){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:b}function m(b,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);b.prototype=Object.create(y&&y.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(b,y):b.__proto__=y)}var g=function(b){m(y,b);function y(){return f(this,y),p(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return a(y,[{key:"insertInto",value:function(v,_){v.children.length===0?s(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"insertInto",this).call(this,v,_):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),y}(c.default.Embed);g.blotName="break",g.tagName="BR",r.default=g},function(n,r,i){var a=this&&this.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,g){m.__proto__=g}||function(m,g){for(var b in g)g.hasOwnProperty(b)&&(m[b]=g[b])};return function(m,g){p(m,g);function b(){this.constructor=m}m.prototype=g===null?Object.create(g):(b.prototype=g.prototype,new b)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(44),o=i(30),c=i(1),d=function(p){a(m,p);function m(g){var b=p.call(this,g)||this;return b.build(),b}return m.prototype.appendChild=function(g){this.insertBefore(g)},m.prototype.attach=function(){p.prototype.attach.call(this),this.children.forEach(function(g){g.attach()})},m.prototype.build=function(){var g=this;this.children=new s.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(b){try{var y=f(b);g.insertBefore(y,g.children.head||void 0)}catch(N){if(N instanceof c.ParchmentError)return;throw N}})},m.prototype.deleteAt=function(g,b){if(g===0&&b===this.length())return this.remove();this.children.forEachAt(g,b,function(y,N,v){y.deleteAt(N,v)})},m.prototype.descendant=function(g,b){var y=this.children.find(b),N=y[0],v=y[1];return g.blotName==null&&g(N)||g.blotName!=null&&N instanceof g?[N,v]:N instanceof m?N.descendant(g,v):[null,-1]},m.prototype.descendants=function(g,b,y){b===void 0&&(b=0),y===void 0&&(y=Number.MAX_VALUE);var N=[],v=y;return this.children.forEachAt(b,y,function(_,x,w){(g.blotName==null&&g(_)||g.blotName!=null&&_ instanceof g)&&N.push(_),_ instanceof m&&(N=N.concat(_.descendants(g,x,v))),v-=w}),N},m.prototype.detach=function(){this.children.forEach(function(g){g.detach()}),p.prototype.detach.call(this)},m.prototype.formatAt=function(g,b,y,N){this.children.forEachAt(g,b,function(v,_,x){v.formatAt(_,x,y,N)})},m.prototype.insertAt=function(g,b,y){var N=this.children.find(g),v=N[0],_=N[1];if(v)v.insertAt(_,b,y);else{var x=y==null?c.create("text",b):c.create(b,y);this.appendChild(x)}},m.prototype.insertBefore=function(g,b){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(y){return g instanceof y}))throw new c.ParchmentError("Cannot insert "+g.statics.blotName+" into "+this.statics.blotName);g.insertInto(this,b)},m.prototype.length=function(){return this.children.reduce(function(g,b){return g+b.length()},0)},m.prototype.moveChildren=function(g,b){this.children.forEach(function(y){g.insertBefore(y,b)})},m.prototype.optimize=function(g){if(p.prototype.optimize.call(this,g),this.children.length===0)if(this.statics.defaultChild!=null){var b=c.create(this.statics.defaultChild);this.appendChild(b),b.optimize(g)}else this.remove()},m.prototype.path=function(g,b){b===void 0&&(b=!1);var y=this.children.find(g,b),N=y[0],v=y[1],_=[[this,g]];return N instanceof m?_.concat(N.path(v,b)):(N!=null&&_.push([N,v]),_)},m.prototype.removeChild=function(g){this.children.remove(g)},m.prototype.replace=function(g){g instanceof m&&g.moveChildren(this),p.prototype.replace.call(this,g)},m.prototype.split=function(g,b){if(b===void 0&&(b=!1),!b){if(g===0)return this;if(g===this.length())return this.next}var y=this.clone();return this.parent.insertBefore(y,this.next),this.children.forEachAt(g,this.length(),function(N,v,_){N=N.split(v,b),y.appendChild(N)}),y},m.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},m.prototype.update=function(g,b){var y=this,N=[],v=[];g.forEach(function(_){_.target===y.domNode&&_.type==="childList"&&(N.push.apply(N,_.addedNodes),v.push.apply(v,_.removedNodes))}),v.forEach(function(_){if(!(_.parentNode!=null&&_.tagName!=="IFRAME"&&document.body.compareDocumentPosition(_)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var x=c.find(_);x!=null&&(x.domNode.parentNode==null||x.domNode.parentNode===y.domNode)&&x.detach()}}),N.filter(function(_){return _.parentNode==y.domNode}).sort(function(_,x){return _===x?0:_.compareDocumentPosition(x)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(_){var x=null;_.nextSibling!=null&&(x=c.find(_.nextSibling));var w=f(_);(w.next!=x||w.next==null)&&(w.parent!=null&&w.parent.removeChild(y),y.insertBefore(w,x||void 0))})},m}(o.default);function f(p){var m=c.find(p);if(m==null)try{m=c.create(p)}catch{m=c.create(c.Scope.INLINE),[].slice.call(p.childNodes).forEach(function(b){m.domNode.appendChild(b)}),p.parentNode&&p.parentNode.replaceChild(m.domNode,p),m.attach()}return m}r.default=d},function(n,r,i){var a=this&&this.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,g){m.__proto__=g}||function(m,g){for(var b in g)g.hasOwnProperty(b)&&(m[b]=g[b])};return function(m,g){p(m,g);function b(){this.constructor=m}m.prototype=g===null?Object.create(g):(b.prototype=g.prototype,new b)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(12),o=i(31),c=i(17),d=i(1),f=function(p){a(m,p);function m(g){var b=p.call(this,g)||this;return b.attributes=new o.default(b.domNode),b}return m.formats=function(g){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return g.tagName.toLowerCase()},m.prototype.format=function(g,b){var y=d.query(g);y instanceof s.default?this.attributes.attribute(y,b):b&&y!=null&&(g!==this.statics.blotName||this.formats()[g]!==b)&&this.replaceWith(g,b)},m.prototype.formats=function(){var g=this.attributes.values(),b=this.statics.formats(this.domNode);return b!=null&&(g[this.statics.blotName]=b),g},m.prototype.replaceWith=function(g,b){var y=p.prototype.replaceWith.call(this,g,b);return this.attributes.copy(y),y},m.prototype.update=function(g,b){var y=this;p.prototype.update.call(this,g,b),g.some(function(N){return N.target===y.domNode&&N.type==="attributes"})&&this.attributes.build()},m.prototype.wrap=function(g,b){var y=p.prototype.wrap.call(this,g,b);return y instanceof m&&y.statics.scope===this.statics.scope&&this.attributes.move(y),y},m}(c.default);r.default=f},function(n,r,i){var a=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var m in p)p.hasOwnProperty(m)&&(f[m]=p[m])};return function(f,p){d(f,p);function m(){this.constructor=f}f.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(30),o=i(1),c=function(d){a(f,d);function f(){return d!==null&&d.apply(this,arguments)||this}return f.value=function(p){return!0},f.prototype.index=function(p,m){return this.domNode===p||this.domNode.compareDocumentPosition(p)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(m,1):-1},f.prototype.position=function(p,m){var g=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return p>0&&(g+=1),[this.parent.domNode,g]},f.prototype.value=function(){var p;return p={},p[this.statics.blotName]=this.statics.value(this.domNode)||!0,p},f.scope=o.Scope.INLINE_BLOT,f}(s.default);r.default=c},function(n,r,i){var a=i(11),s=i(3),o={attributes:{compose:function(d,f,p){typeof d!="object"&&(d={}),typeof f!="object"&&(f={});var m=s(!0,{},f);p||(m=Object.keys(m).reduce(function(b,y){return m[y]!=null&&(b[y]=m[y]),b},{}));for(var g in d)d[g]!==void 0&&f[g]===void 0&&(m[g]=d[g]);return Object.keys(m).length>0?m:void 0},diff:function(d,f){typeof d!="object"&&(d={}),typeof f!="object"&&(f={});var p=Object.keys(d).concat(Object.keys(f)).reduce(function(m,g){return a(d[g],f[g])||(m[g]=f[g]===void 0?null:f[g]),m},{});return Object.keys(p).length>0?p:void 0},transform:function(d,f,p){if(typeof d!="object")return f;if(typeof f=="object"){if(!p)return f;var m=Object.keys(f).reduce(function(g,b){return d[b]===void 0&&(g[b]=f[b]),g},{});return Object.keys(m).length>0?m:void 0}}},iterator:function(d){return new c(d)},length:function(d){return typeof d.delete=="number"?d.delete:typeof d.retain=="number"?d.retain:typeof d.insert=="string"?d.insert.length:1}};function c(d){this.ops=d,this.index=0,this.offset=0}c.prototype.hasNext=function(){return this.peekLength()<1/0},c.prototype.next=function(d){d||(d=1/0);var f=this.ops[this.index];if(f){var p=this.offset,m=o.length(f);if(d>=m-p?(d=m-p,this.index+=1,this.offset=0):this.offset+=d,typeof f.delete=="number")return{delete:d};var g={};return f.attributes&&(g.attributes=f.attributes),typeof f.retain=="number"?g.retain=d:typeof f.insert=="string"?g.insert=f.insert.substr(p,d):g.insert=f.insert,g}else return{retain:1/0}},c.prototype.peek=function(){return this.ops[this.index]},c.prototype.peekLength=function(){return this.ops[this.index]?o.length(this.ops[this.index])-this.offset:1/0},c.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},c.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var d=this.offset,f=this.index,p=this.next(),m=this.ops.slice(this.index);return this.offset=d,this.index=f,[p].concat(m)}else return[]},n.exports=o},function(n,r){var i=function(){function a(y,N){return N!=null&&y instanceof N}var s;try{s=Map}catch{s=function(){}}var o;try{o=Set}catch{o=function(){}}var c;try{c=Promise}catch{c=function(){}}function d(y,N,v,_,x){typeof N=="object"&&(v=N.depth,_=N.prototype,x=N.includeNonEnumerable,N=N.circular);var w=[],E=[],P=typeof Buffer<"u";typeof N>"u"&&(N=!0),typeof v>"u"&&(v=1/0);function A(T,L){if(T===null)return null;if(L===0)return T;var k,C;if(typeof T!="object")return T;if(a(T,s))k=new s;else if(a(T,o))k=new o;else if(a(T,c))k=new c(function(q,I){T.then(function(z){q(A(z,L-1))},function(z){I(A(z,L-1))})});else if(d.__isArray(T))k=[];else if(d.__isRegExp(T))k=new RegExp(T.source,b(T)),T.lastIndex&&(k.lastIndex=T.lastIndex);else if(d.__isDate(T))k=new Date(T.getTime());else{if(P&&Buffer.isBuffer(T))return Buffer.allocUnsafe?k=Buffer.allocUnsafe(T.length):k=new Buffer(T.length),T.copy(k),k;a(T,Error)?k=Object.create(T):typeof _>"u"?(C=Object.getPrototypeOf(T),k=Object.create(C)):(k=Object.create(_),C=_)}if(N){var O=w.indexOf(T);if(O!=-1)return E[O];w.push(T),E.push(k)}a(T,s)&&T.forEach(function(q,I){var z=A(I,L-1),W=A(q,L-1);k.set(z,W)}),a(T,o)&&T.forEach(function(q){var I=A(q,L-1);k.add(I)});for(var F in T){var M;C&&(M=Object.getOwnPropertyDescriptor(C,F)),!(M&&M.set==null)&&(k[F]=A(T[F],L-1))}if(Object.getOwnPropertySymbols)for(var D=Object.getOwnPropertySymbols(T),F=0;F<D.length;F++){var $=D[F],V=Object.getOwnPropertyDescriptor(T,$);V&&!V.enumerable&&!x||(k[$]=A(T[$],L-1),V.enumerable||Object.defineProperty(k,$,{enumerable:!1}))}if(x)for(var K=Object.getOwnPropertyNames(T),F=0;F<K.length;F++){var H=K[F],V=Object.getOwnPropertyDescriptor(T,H);V&&V.enumerable||(k[H]=A(T[H],L-1),Object.defineProperty(k,H,{enumerable:!1}))}return k}return A(y,v)}d.clonePrototype=function(N){if(N===null)return null;var v=function(){};return v.prototype=N,new v};function f(y){return Object.prototype.toString.call(y)}d.__objToStr=f;function p(y){return typeof y=="object"&&f(y)==="[object Date]"}d.__isDate=p;function m(y){return typeof y=="object"&&f(y)==="[object Array]"}d.__isArray=m;function g(y){return typeof y=="object"&&f(y)==="[object RegExp]"}d.__isRegExp=g;function b(y){var N="";return y.global&&(N+="g"),y.ignoreCase&&(N+="i"),y.multiline&&(N+="m"),N}return d.__getRegExpFlags=b,d}();typeof n=="object"&&n.exports&&(n.exports=i)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function k(C,O){var F=[],M=!0,D=!1,$=void 0;try{for(var V=C[Symbol.iterator](),K;!(M=(K=V.next()).done)&&(F.push(K.value),!(O&&F.length===O));M=!0);}catch(H){D=!0,$=H}finally{try{!M&&V.return&&V.return()}finally{if(D)throw $}}return F}return function(C,O){if(Array.isArray(C))return C;if(Symbol.iterator in Object(C))return k(C,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function k(C,O){for(var F=0;F<O.length;F++){var M=O[F];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(C,M.key,M)}}return function(C,O,F){return O&&k(C.prototype,O),F&&k(C,F),C}}(),o=function k(C,O,F){C===null&&(C=Function.prototype);var M=Object.getOwnPropertyDescriptor(C,O);if(M===void 0){var D=Object.getPrototypeOf(C);return D===null?void 0:k(D,O,F)}else{if("value"in M)return M.value;var $=M.get;return $===void 0?void 0:$.call(F)}},c=i(0),d=w(c),f=i(8),p=w(f),m=i(4),g=w(m),b=i(16),y=w(b),N=i(13),v=w(N),_=i(25),x=w(_);function w(k){return k&&k.__esModule?k:{default:k}}function E(k,C){if(!(k instanceof C))throw new TypeError("Cannot call a class as a function")}function P(k,C){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:k}function A(k,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);k.prototype=Object.create(C&&C.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(k,C):k.__proto__=C)}function T(k){return k instanceof g.default||k instanceof m.BlockEmbed}var L=function(k){A(C,k);function C(O,F){E(this,C);var M=P(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,O));return M.emitter=F.emitter,Array.isArray(F.whitelist)&&(M.whitelist=F.whitelist.reduce(function(D,$){return D[$]=!0,D},{})),M.domNode.addEventListener("DOMNodeInserted",function(){}),M.optimize(),M.enable(),M}return s(C,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(F,M){var D=this.line(F),$=a(D,2),V=$[0],K=$[1],H=this.line(F+M),q=a(H,1),I=q[0];if(o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"deleteAt",this).call(this,F,M),I!=null&&V!==I&&K>0){if(V instanceof m.BlockEmbed||I instanceof m.BlockEmbed){this.optimize();return}if(V instanceof v.default){var z=V.newlineIndex(V.length(),!0);if(z>-1&&(V=V.split(z+1),V===I)){this.optimize();return}}else if(I instanceof v.default){var W=I.newlineIndex(0);W>-1&&I.split(W+1)}var Q=I.children.head instanceof y.default?null:I.children.head;V.moveChildren(I,Q),V.remove()}this.optimize()}},{key:"enable",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",F)}},{key:"formatAt",value:function(F,M,D,$){this.whitelist!=null&&!this.whitelist[D]||(o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"formatAt",this).call(this,F,M,D,$),this.optimize())}},{key:"insertAt",value:function(F,M,D){if(!(D!=null&&this.whitelist!=null&&!this.whitelist[M])){if(F>=this.length())if(D==null||d.default.query(M,d.default.Scope.BLOCK)==null){var $=d.default.create(this.statics.defaultChild);this.appendChild($),D==null&&M.endsWith(`
`)&&(M=M.slice(0,-1)),$.insertAt(0,M,D)}else{var V=d.default.create(M,D);this.appendChild(V)}else o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertAt",this).call(this,F,M,D);this.optimize()}}},{key:"insertBefore",value:function(F,M){if(F.statics.scope===d.default.Scope.INLINE_BLOT){var D=d.default.create(this.statics.defaultChild);D.appendChild(F),F=D}o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertBefore",this).call(this,F,M)}},{key:"leaf",value:function(F){return this.path(F).pop()||[null,-1]}},{key:"line",value:function(F){return F===this.length()?this.line(F-1):this.descendant(T,F)}},{key:"lines",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,D=function $(V,K,H){var q=[],I=H;return V.children.forEachAt(K,H,function(z,W,Q){T(z)?q.push(z):z instanceof d.default.Container&&(q=q.concat($(z,W,I))),I-=Q}),q};return D(this,F,M)}},{key:"optimize",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"optimize",this).call(this,F,M),F.length>0&&this.emitter.emit(p.default.events.SCROLL_OPTIMIZE,F,M))}},{key:"path",value:function(F){return o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"path",this).call(this,F).slice(1)}},{key:"update",value:function(F){if(this.batch!==!0){var M=p.default.sources.USER;typeof F=="string"&&(M=F),Array.isArray(F)||(F=this.observer.takeRecords()),F.length>0&&this.emitter.emit(p.default.events.SCROLL_BEFORE_UPDATE,M,F),o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"update",this).call(this,F.concat([])),F.length>0&&this.emitter.emit(p.default.events.SCROLL_UPDATE,M,F)}}}]),C}(d.default.Scroll);L.blotName="scroll",L.className="ql-editor",L.tagName="DIV",L.defaultChild="block",L.allowedChildren=[g.default,m.BlockEmbed,x.default],r.default=L},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SHORTKEY=r.default=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},s=function(){function Y(U,J){var te=[],X=!0,ne=!1,ue=void 0;try{for(var se=U[Symbol.iterator](),ce;!(X=(ce=se.next()).done)&&(te.push(ce.value),!(J&&te.length===J));X=!0);}catch(de){ne=!0,ue=de}finally{try{!X&&se.return&&se.return()}finally{if(ne)throw ue}}return te}return function(U,J){if(Array.isArray(U))return U;if(Symbol.iterator in Object(U))return Y(U,J);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function Y(U,J){for(var te=0;te<J.length;te++){var X=J[te];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(U,X.key,X)}}return function(U,J,te){return J&&Y(U.prototype,J),te&&Y(U,te),U}}(),c=i(21),d=k(c),f=i(11),p=k(f),m=i(3),g=k(m),b=i(2),y=k(b),N=i(20),v=k(N),_=i(0),x=k(_),w=i(5),E=k(w),P=i(10),A=k(P),T=i(9),L=k(T);function k(Y){return Y&&Y.__esModule?Y:{default:Y}}function C(Y,U,J){return U in Y?Object.defineProperty(Y,U,{value:J,enumerable:!0,configurable:!0,writable:!0}):Y[U]=J,Y}function O(Y,U){if(!(Y instanceof U))throw new TypeError("Cannot call a class as a function")}function F(Y,U){if(!Y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:Y}function M(Y,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);Y.prototype=Object.create(U&&U.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(Y,U):Y.__proto__=U)}var D=(0,A.default)("quill:keyboard"),$=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",V=function(Y){M(U,Y),o(U,null,[{key:"match",value:function(te,X){return X=ee(X),["altKey","ctrlKey","metaKey","shiftKey"].some(function(ne){return!!X[ne]!==te[ne]&&X[ne]!==null})?!1:X.key===(te.which||te.keyCode)}}]);function U(J,te){O(this,U);var X=F(this,(U.__proto__||Object.getPrototypeOf(U)).call(this,J,te));return X.bindings={},Object.keys(X.options.bindings).forEach(function(ne){ne==="list autofill"&&J.scroll.whitelist!=null&&!J.scroll.whitelist.list||X.options.bindings[ne]&&X.addBinding(X.options.bindings[ne])}),X.addBinding({key:U.keys.ENTER,shiftKey:null},z),X.addBinding({key:U.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(X.addBinding({key:U.keys.BACKSPACE},{collapsed:!0},H),X.addBinding({key:U.keys.DELETE},{collapsed:!0},q)):(X.addBinding({key:U.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},H),X.addBinding({key:U.keys.DELETE},{collapsed:!0,suffix:/^.?$/},q)),X.addBinding({key:U.keys.BACKSPACE},{collapsed:!1},I),X.addBinding({key:U.keys.DELETE},{collapsed:!1},I),X.addBinding({key:U.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},H),X.listen(),X}return o(U,[{key:"addBinding",value:function(te){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ue=ee(te);if(ue==null||ue.key==null)return D.warn("Attempted to add invalid keyboard binding",ue);typeof X=="function"&&(X={handler:X}),typeof ne=="function"&&(ne={handler:ne}),ue=(0,g.default)(ue,X,ne),this.bindings[ue.key]=this.bindings[ue.key]||[],this.bindings[ue.key].push(ue)}},{key:"listen",value:function(){var te=this;this.quill.root.addEventListener("keydown",function(X){if(!X.defaultPrevented){var ne=X.which||X.keyCode,ue=(te.bindings[ne]||[]).filter(function(et){return U.match(X,et)});if(ue.length!==0){var se=te.quill.getSelection();if(!(se==null||!te.quill.hasFocus())){var ce=te.quill.getLine(se.index),de=s(ce,2),Oe=de[0],ge=de[1],re=te.quill.getLeaf(se.index),he=s(re,2),ye=he[0],we=he[1],me=se.length===0?[ye,we]:te.quill.getLeaf(se.index+se.length),je=s(me,2),Ce=je[0],Ae=je[1],vt=ye instanceof x.default.Text?ye.value().slice(0,we):"",Pt=Ce instanceof x.default.Text?Ce.value().slice(Ae):"",qe={collapsed:se.length===0,empty:se.length===0&&Oe.length()<=1,format:te.quill.getFormat(se),offset:ge,prefix:vt,suffix:Pt},Un=ue.some(function(et){if(et.collapsed!=null&&et.collapsed!==qe.collapsed||et.empty!=null&&et.empty!==qe.empty||et.offset!=null&&et.offset!==qe.offset)return!1;if(Array.isArray(et.format)){if(et.format.every(function(it){return qe.format[it]==null}))return!1}else if(a(et.format)==="object"&&!Object.keys(et.format).every(function(it){return et.format[it]===!0?qe.format[it]!=null:et.format[it]===!1?qe.format[it]==null:(0,p.default)(et.format[it],qe.format[it])}))return!1;return et.prefix!=null&&!et.prefix.test(qe.prefix)||et.suffix!=null&&!et.suffix.test(qe.suffix)?!1:et.handler.call(te,se,qe)!==!0});Un&&X.preventDefault()}}}})}}]),U}(L.default);V.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},V.DEFAULTS={bindings:{bold:Q("bold"),italic:Q("italic"),underline:Q("underline"),indent:{key:V.keys.TAB,format:["blockquote","indent","list"],handler:function(U,J){if(J.collapsed&&J.offset!==0)return!0;this.quill.format("indent","+1",E.default.sources.USER)}},outdent:{key:V.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(U,J){if(J.collapsed&&J.offset!==0)return!0;this.quill.format("indent","-1",E.default.sources.USER)}},"outdent backspace":{key:V.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(U,J){J.format.indent!=null?this.quill.format("indent","-1",E.default.sources.USER):J.format.list!=null&&this.quill.format("list",!1,E.default.sources.USER)}},"indent code-block":W(!0),"outdent code-block":W(!1),"remove tab":{key:V.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(U){this.quill.deleteText(U.index-1,1,E.default.sources.USER)}},tab:{key:V.keys.TAB,handler:function(U){this.quill.history.cutoff();var J=new y.default().retain(U.index).delete(U.length).insert("	");this.quill.updateContents(J,E.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(U.index+1,E.default.sources.SILENT)}},"list empty enter":{key:V.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(U,J){this.quill.format("list",!1,E.default.sources.USER),J.format.indent&&this.quill.format("indent",!1,E.default.sources.USER)}},"checklist enter":{key:V.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(U){var J=this.quill.getLine(U.index),te=s(J,2),X=te[0],ne=te[1],ue=(0,g.default)({},X.formats(),{list:"checked"}),se=new y.default().retain(U.index).insert(`
`,ue).retain(X.length()-ne-1).retain(1,{list:"unchecked"});this.quill.updateContents(se,E.default.sources.USER),this.quill.setSelection(U.index+1,E.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:V.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(U,J){var te=this.quill.getLine(U.index),X=s(te,2),ne=X[0],ue=X[1],se=new y.default().retain(U.index).insert(`
`,J.format).retain(ne.length()-ue-1).retain(1,{header:null});this.quill.updateContents(se,E.default.sources.USER),this.quill.setSelection(U.index+1,E.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(U,J){var te=J.prefix.length,X=this.quill.getLine(U.index),ne=s(X,2),ue=ne[0],se=ne[1];if(se>te)return!0;var ce=void 0;switch(J.prefix.trim()){case"[]":case"[ ]":ce="unchecked";break;case"[x]":ce="checked";break;case"-":case"*":ce="bullet";break;default:ce="ordered"}this.quill.insertText(U.index," ",E.default.sources.USER),this.quill.history.cutoff();var de=new y.default().retain(U.index-se).delete(te+1).retain(ue.length()-2-se).retain(1,{list:ce});this.quill.updateContents(de,E.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(U.index-te,E.default.sources.SILENT)}},"code exit":{key:V.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(U){var J=this.quill.getLine(U.index),te=s(J,2),X=te[0],ne=te[1],ue=new y.default().retain(U.index+X.length()-ne-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(ue,E.default.sources.USER)}},"embed left":K(V.keys.LEFT,!1),"embed left shift":K(V.keys.LEFT,!0),"embed right":K(V.keys.RIGHT,!1),"embed right shift":K(V.keys.RIGHT,!0)}};function K(Y,U){var J,te=Y===V.keys.LEFT?"prefix":"suffix";return J={key:Y,shiftKey:U,altKey:null},C(J,te,/^$/),C(J,"handler",function(ne){var ue=ne.index;Y===V.keys.RIGHT&&(ue+=ne.length+1);var se=this.quill.getLeaf(ue),ce=s(se,1),de=ce[0];return de instanceof x.default.Embed?(Y===V.keys.LEFT?U?this.quill.setSelection(ne.index-1,ne.length+1,E.default.sources.USER):this.quill.setSelection(ne.index-1,E.default.sources.USER):U?this.quill.setSelection(ne.index,ne.length+1,E.default.sources.USER):this.quill.setSelection(ne.index+ne.length+1,E.default.sources.USER),!1):!0}),J}function H(Y,U){if(!(Y.index===0||this.quill.getLength()<=1)){var J=this.quill.getLine(Y.index),te=s(J,1),X=te[0],ne={};if(U.offset===0){var ue=this.quill.getLine(Y.index-1),se=s(ue,1),ce=se[0];if(ce!=null&&ce.length()>1){var de=X.formats(),Oe=this.quill.getFormat(Y.index-1,1);ne=v.default.attributes.diff(de,Oe)||{}}}var ge=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(U.prefix)?2:1;this.quill.deleteText(Y.index-ge,ge,E.default.sources.USER),Object.keys(ne).length>0&&this.quill.formatLine(Y.index-ge,ge,ne,E.default.sources.USER),this.quill.focus()}}function q(Y,U){var J=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(U.suffix)?2:1;if(!(Y.index>=this.quill.getLength()-J)){var te={},X=0,ne=this.quill.getLine(Y.index),ue=s(ne,1),se=ue[0];if(U.offset>=se.length()-1){var ce=this.quill.getLine(Y.index+1),de=s(ce,1),Oe=de[0];if(Oe){var ge=se.formats(),re=this.quill.getFormat(Y.index,1);te=v.default.attributes.diff(ge,re)||{},X=Oe.length()}}this.quill.deleteText(Y.index,J,E.default.sources.USER),Object.keys(te).length>0&&this.quill.formatLine(Y.index+X-1,J,te,E.default.sources.USER)}}function I(Y){var U=this.quill.getLines(Y),J={};if(U.length>1){var te=U[0].formats(),X=U[U.length-1].formats();J=v.default.attributes.diff(X,te)||{}}this.quill.deleteText(Y,E.default.sources.USER),Object.keys(J).length>0&&this.quill.formatLine(Y.index,1,J,E.default.sources.USER),this.quill.setSelection(Y.index,E.default.sources.SILENT),this.quill.focus()}function z(Y,U){var J=this;Y.length>0&&this.quill.scroll.deleteAt(Y.index,Y.length);var te=Object.keys(U.format).reduce(function(X,ne){return x.default.query(ne,x.default.Scope.BLOCK)&&!Array.isArray(U.format[ne])&&(X[ne]=U.format[ne]),X},{});this.quill.insertText(Y.index,`
`,te,E.default.sources.USER),this.quill.setSelection(Y.index+1,E.default.sources.SILENT),this.quill.focus(),Object.keys(U.format).forEach(function(X){te[X]==null&&(Array.isArray(U.format[X])||X!=="link"&&J.quill.format(X,U.format[X],E.default.sources.USER))})}function W(Y){return{key:V.keys.TAB,shiftKey:!Y,format:{"code-block":!0},handler:function(J){var te=x.default.query("code-block"),X=J.index,ne=J.length,ue=this.quill.scroll.descendant(te,X),se=s(ue,2),ce=se[0],de=se[1];if(ce!=null){var Oe=this.quill.getIndex(ce),ge=ce.newlineIndex(de,!0)+1,re=ce.newlineIndex(Oe+de+ne),he=ce.domNode.textContent.slice(ge,re).split(`
`);de=0,he.forEach(function(ye,we){Y?(ce.insertAt(ge+de,te.TAB),de+=te.TAB.length,we===0?X+=te.TAB.length:ne+=te.TAB.length):ye.startsWith(te.TAB)&&(ce.deleteAt(ge+de,te.TAB.length),de-=te.TAB.length,we===0?X-=te.TAB.length:ne-=te.TAB.length),de+=ye.length+1}),this.quill.update(E.default.sources.USER),this.quill.setSelection(X,ne,E.default.sources.SILENT)}}}}function Q(Y){return{key:Y[0].toUpperCase(),shortKey:!0,handler:function(J,te){this.quill.format(Y,!te.format[Y],E.default.sources.USER)}}}function ee(Y){if(typeof Y=="string"||typeof Y=="number")return ee({key:Y});if((typeof Y>"u"?"undefined":a(Y))==="object"&&(Y=(0,d.default)(Y,!1)),typeof Y.key=="string")if(V.keys[Y.key.toUpperCase()]!=null)Y.key=V.keys[Y.key.toUpperCase()];else if(Y.key.length===1)Y.key=Y.key.toUpperCase().charCodeAt(0);else return null;return Y.shortKey&&(Y[$]=Y.shortKey,delete Y.shortKey),Y}r.default=V,r.SHORTKEY=$},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function v(_,x){var w=[],E=!0,P=!1,A=void 0;try{for(var T=_[Symbol.iterator](),L;!(E=(L=T.next()).done)&&(w.push(L.value),!(x&&w.length===x));E=!0);}catch(k){P=!0,A=k}finally{try{!E&&T.return&&T.return()}finally{if(P)throw A}}return w}return function(_,x){if(Array.isArray(_))return _;if(Symbol.iterator in Object(_))return v(_,x);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function v(_,x,w){_===null&&(_=Function.prototype);var E=Object.getOwnPropertyDescriptor(_,x);if(E===void 0){var P=Object.getPrototypeOf(_);return P===null?void 0:v(P,x,w)}else{if("value"in E)return E.value;var A=E.get;return A===void 0?void 0:A.call(w)}},o=function(){function v(_,x){for(var w=0;w<x.length;w++){var E=x[w];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(_,E.key,E)}}return function(_,x,w){return x&&v(_.prototype,x),w&&v(_,w),_}}(),c=i(0),d=m(c),f=i(7),p=m(f);function m(v){return v&&v.__esModule?v:{default:v}}function g(v,_){if(!(v instanceof _))throw new TypeError("Cannot call a class as a function")}function b(v,_){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:v}function y(v,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);v.prototype=Object.create(_&&_.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(v,_):v.__proto__=_)}var N=function(v){y(_,v),o(_,null,[{key:"value",value:function(){}}]);function _(x,w){g(this,_);var E=b(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,x));return E.selection=w,E.textNode=document.createTextNode(_.CONTENTS),E.domNode.appendChild(E.textNode),E._length=0,E}return o(_,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(w,E){if(this._length!==0)return s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"format",this).call(this,w,E);for(var P=this,A=0;P!=null&&P.statics.scope!==d.default.Scope.BLOCK_BLOT;)A+=P.offset(P.parent),P=P.parent;P!=null&&(this._length=_.CONTENTS.length,P.optimize(),P.formatAt(A,_.CONTENTS.length,w,E),this._length=0)}},{key:"index",value:function(w,E){return w===this.textNode?0:s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"index",this).call(this,w,E)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var w=this.textNode,E=this.selection.getNativeRange(),P=void 0,A=void 0,T=void 0;if(E!=null&&E.start.node===w&&E.end.node===w){var L=[w,E.start.offset,E.end.offset];P=L[0],A=L[1],T=L[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==_.CONTENTS){var k=this.textNode.data.split(_.CONTENTS).join("");this.next instanceof p.default?(P=this.next.domNode,this.next.insertAt(0,k),this.textNode.data=_.CONTENTS):(this.textNode.data=k,this.parent.insertBefore(d.default.create(this.textNode),this),this.textNode=document.createTextNode(_.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),A!=null){var C=[A,T].map(function(F){return Math.max(0,Math.min(P.data.length,F-1))}),O=a(C,2);return A=O[0],T=O[1],{startNode:P,startOffset:A,endNode:P,endOffset:T}}}}},{key:"update",value:function(w,E){var P=this;if(w.some(function(T){return T.type==="characterData"&&T.target===P.textNode})){var A=this.restore();A&&(E.range=A)}}},{key:"value",value:function(){return""}}]),_}(d.default.Embed);N.blotName="cursor",N.className="ql-cursor",N.tagName="span",N.CONTENTS="\uFEFF",r.default=N},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(0),s=d(a),o=i(4),c=d(o);function d(b){return b&&b.__esModule?b:{default:b}}function f(b,y){if(!(b instanceof y))throw new TypeError("Cannot call a class as a function")}function p(b,y){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:b}function m(b,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);b.prototype=Object.create(y&&y.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(b,y):b.__proto__=y)}var g=function(b){m(y,b);function y(){return f(this,y),p(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return y}(s.default.Container);g.allowedChildren=[c.default,o.BlockEmbed,g],r.default=g},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.ColorStyle=r.ColorClass=r.ColorAttributor=void 0;var a=function(){function N(v,_){for(var x=0;x<_.length;x++){var w=_[x];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,_,x){return _&&N(v.prototype,_),x&&N(v,x),v}}(),s=function N(v,_,x){v===null&&(v=Function.prototype);var w=Object.getOwnPropertyDescriptor(v,_);if(w===void 0){var E=Object.getPrototypeOf(v);return E===null?void 0:N(E,_,x)}else{if("value"in w)return w.value;var P=w.get;return P===void 0?void 0:P.call(x)}},o=i(0),c=d(o);function d(N){return N&&N.__esModule?N:{default:N}}function f(N,v){if(!(N instanceof v))throw new TypeError("Cannot call a class as a function")}function p(N,v){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:N}function m(N,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);N.prototype=Object.create(v&&v.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(N,v):N.__proto__=v)}var g=function(N){m(v,N);function v(){return f(this,v),p(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return a(v,[{key:"value",value:function(x){var w=s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"value",this).call(this,x);return w.startsWith("rgb(")?(w=w.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+w.split(",").map(function(E){return("00"+parseInt(E).toString(16)).slice(-2)}).join("")):w}}]),v}(c.default.Attributor.Style),b=new c.default.Attributor.Class("color","ql-color",{scope:c.default.Scope.INLINE}),y=new g("color","color",{scope:c.default.Scope.INLINE});r.ColorAttributor=g,r.ColorClass=b,r.ColorStyle=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitize=r.default=void 0;var a=function(){function y(N,v){for(var _=0;_<v.length;_++){var x=v[_];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(N,x.key,x)}}return function(N,v,_){return v&&y(N.prototype,v),_&&y(N,_),N}}(),s=function y(N,v,_){N===null&&(N=Function.prototype);var x=Object.getOwnPropertyDescriptor(N,v);if(x===void 0){var w=Object.getPrototypeOf(N);return w===null?void 0:y(w,v,_)}else{if("value"in x)return x.value;var E=x.get;return E===void 0?void 0:E.call(_)}},o=i(6),c=d(o);function d(y){return y&&y.__esModule?y:{default:y}}function f(y,N){if(!(y instanceof N))throw new TypeError("Cannot call a class as a function")}function p(y,N){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:y}function m(y,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);y.prototype=Object.create(N&&N.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(y,N):y.__proto__=N)}var g=function(y){m(N,y);function N(){return f(this,N),p(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return a(N,[{key:"format",value:function(_,x){if(_!==this.statics.blotName||!x)return s(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"format",this).call(this,_,x);x=this.constructor.sanitize(x),this.domNode.setAttribute("href",x)}}],[{key:"create",value:function(_){var x=s(N.__proto__||Object.getPrototypeOf(N),"create",this).call(this,_);return _=this.sanitize(_),x.setAttribute("href",_),x.setAttribute("rel","noopener noreferrer"),x.setAttribute("target","_blank"),x}},{key:"formats",value:function(_){return _.getAttribute("href")}},{key:"sanitize",value:function(_){return b(_,this.PROTOCOL_WHITELIST)?_:this.SANITIZED_URL}}]),N}(c.default);g.blotName="link",g.tagName="A",g.SANITIZED_URL="about:blank",g.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function b(y,N){var v=document.createElement("a");v.href=y;var _=v.href.slice(0,v.href.indexOf(":"));return N.indexOf(_)>-1}r.default=g,r.sanitize=b},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},s=function(){function N(v,_){for(var x=0;x<_.length;x++){var w=_[x];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,_,x){return _&&N(v.prototype,_),x&&N(v,x),v}}(),o=i(23),c=p(o),d=i(107),f=p(d);function p(N){return N&&N.__esModule?N:{default:N}}function m(N,v){if(!(N instanceof v))throw new TypeError("Cannot call a class as a function")}var g=0;function b(N,v){N.setAttribute(v,N.getAttribute(v)!=="true")}var y=function(){function N(v){var _=this;m(this,N),this.select=v,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){_.togglePicker()}),this.label.addEventListener("keydown",function(x){switch(x.keyCode){case c.default.keys.ENTER:_.togglePicker();break;case c.default.keys.ESCAPE:_.escape(),x.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return s(N,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),b(this.label,"aria-expanded"),b(this.options,"aria-hidden")}},{key:"buildItem",value:function(_){var x=this,w=document.createElement("span");return w.tabIndex="0",w.setAttribute("role","button"),w.classList.add("ql-picker-item"),_.hasAttribute("value")&&w.setAttribute("data-value",_.getAttribute("value")),_.textContent&&w.setAttribute("data-label",_.textContent),w.addEventListener("click",function(){x.selectItem(w,!0)}),w.addEventListener("keydown",function(E){switch(E.keyCode){case c.default.keys.ENTER:x.selectItem(w,!0),E.preventDefault();break;case c.default.keys.ESCAPE:x.escape(),E.preventDefault();break}}),w}},{key:"buildLabel",value:function(){var _=document.createElement("span");return _.classList.add("ql-picker-label"),_.innerHTML=f.default,_.tabIndex="0",_.setAttribute("role","button"),_.setAttribute("aria-expanded","false"),this.container.appendChild(_),_}},{key:"buildOptions",value:function(){var _=this,x=document.createElement("span");x.classList.add("ql-picker-options"),x.setAttribute("aria-hidden","true"),x.tabIndex="-1",x.id="ql-picker-options-"+g,g+=1,this.label.setAttribute("aria-controls",x.id),this.options=x,[].slice.call(this.select.options).forEach(function(w){var E=_.buildItem(w);x.appendChild(E),w.selected===!0&&_.selectItem(E)}),this.container.appendChild(x)}},{key:"buildPicker",value:function(){var _=this;[].slice.call(this.select.attributes).forEach(function(x){_.container.setAttribute(x.name,x.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var _=this;this.close(),setTimeout(function(){return _.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(_){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,w=this.container.querySelector(".ql-selected");if(_!==w&&(w!=null&&w.classList.remove("ql-selected"),_!=null&&(_.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(_.parentNode.children,_),_.hasAttribute("data-value")?this.label.setAttribute("data-value",_.getAttribute("data-value")):this.label.removeAttribute("data-value"),_.hasAttribute("data-label")?this.label.setAttribute("data-label",_.getAttribute("data-label")):this.label.removeAttribute("data-label"),x))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":a(Event))==="object"){var E=document.createEvent("Event");E.initEvent("change",!0,!0),this.select.dispatchEvent(E)}this.close()}}},{key:"update",value:function(){var _=void 0;if(this.select.selectedIndex>-1){var x=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];_=this.select.options[this.select.selectedIndex],this.selectItem(x)}else this.selectItem(null);var w=_!=null&&_!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",w)}}]),N}();r.default=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(0),s=D(a),o=i(5),c=D(o),d=i(4),f=D(d),p=i(16),m=D(p),g=i(25),b=D(g),y=i(24),N=D(y),v=i(35),_=D(v),x=i(6),w=D(x),E=i(22),P=D(E),A=i(7),T=D(A),L=i(55),k=D(L),C=i(42),O=D(C),F=i(23),M=D(F);function D($){return $&&$.__esModule?$:{default:$}}c.default.register({"blots/block":f.default,"blots/block/embed":d.BlockEmbed,"blots/break":m.default,"blots/container":b.default,"blots/cursor":N.default,"blots/embed":_.default,"blots/inline":w.default,"blots/scroll":P.default,"blots/text":T.default,"modules/clipboard":k.default,"modules/history":O.default,"modules/keyboard":M.default}),s.default.register(f.default,m.default,N.default,w.default,P.default,T.default),r.default=c.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(1),s=function(){function o(c){this.domNode=c,this.domNode[a.DATA_KEY]={blot:this}}return Object.defineProperty(o.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),o.create=function(c){if(this.tagName==null)throw new a.ParchmentError("Blot definition missing tagName");var d;return Array.isArray(this.tagName)?(typeof c=="string"&&(c=c.toUpperCase(),parseInt(c).toString()===c&&(c=parseInt(c))),typeof c=="number"?d=document.createElement(this.tagName[c-1]):this.tagName.indexOf(c)>-1?d=document.createElement(c):d=document.createElement(this.tagName[0])):d=document.createElement(this.tagName),this.className&&d.classList.add(this.className),d},o.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},o.prototype.clone=function(){var c=this.domNode.cloneNode(!1);return a.create(c)},o.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[a.DATA_KEY]},o.prototype.deleteAt=function(c,d){var f=this.isolate(c,d);f.remove()},o.prototype.formatAt=function(c,d,f,p){var m=this.isolate(c,d);if(a.query(f,a.Scope.BLOT)!=null&&p)m.wrap(f,p);else if(a.query(f,a.Scope.ATTRIBUTE)!=null){var g=a.create(this.statics.scope);m.wrap(g),g.format(f,p)}},o.prototype.insertAt=function(c,d,f){var p=f==null?a.create("text",d):a.create(d,f),m=this.split(c);this.parent.insertBefore(p,m)},o.prototype.insertInto=function(c,d){d===void 0&&(d=null),this.parent!=null&&this.parent.children.remove(this);var f=null;c.children.insertBefore(this,d),d!=null&&(f=d.domNode),(this.domNode.parentNode!=c.domNode||this.domNode.nextSibling!=f)&&c.domNode.insertBefore(this.domNode,f),this.parent=c,this.attach()},o.prototype.isolate=function(c,d){var f=this.split(c);return f.split(d),f},o.prototype.length=function(){return 1},o.prototype.offset=function(c){return c===void 0&&(c=this.parent),this.parent==null||this==c?0:this.parent.children.offset(this)+this.parent.offset(c)},o.prototype.optimize=function(c){this.domNode[a.DATA_KEY]!=null&&delete this.domNode[a.DATA_KEY].mutations},o.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},o.prototype.replace=function(c){c.parent!=null&&(c.parent.insertBefore(this,c.next),c.remove())},o.prototype.replaceWith=function(c,d){var f=typeof c=="string"?a.create(c,d):c;return f.replace(this),f},o.prototype.split=function(c,d){return c===0?this:this.next},o.prototype.update=function(c,d){},o.prototype.wrap=function(c,d){var f=typeof c=="string"?a.create(c,d):c;return this.parent!=null&&this.parent.insertBefore(f,this.next),f.appendChild(this),f},o.blotName="abstract",o}();r.default=s},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(12),s=i(32),o=i(33),c=i(1),d=function(){function f(p){this.attributes={},this.domNode=p,this.build()}return f.prototype.attribute=function(p,m){m?p.add(this.domNode,m)&&(p.value(this.domNode)!=null?this.attributes[p.attrName]=p:delete this.attributes[p.attrName]):(p.remove(this.domNode),delete this.attributes[p.attrName])},f.prototype.build=function(){var p=this;this.attributes={};var m=a.default.keys(this.domNode),g=s.default.keys(this.domNode),b=o.default.keys(this.domNode);m.concat(g).concat(b).forEach(function(y){var N=c.query(y,c.Scope.ATTRIBUTE);N instanceof a.default&&(p.attributes[N.attrName]=N)})},f.prototype.copy=function(p){var m=this;Object.keys(this.attributes).forEach(function(g){var b=m.attributes[g].value(m.domNode);p.format(g,b)})},f.prototype.move=function(p){var m=this;this.copy(p),Object.keys(this.attributes).forEach(function(g){m.attributes[g].remove(m.domNode)}),this.attributes={}},f.prototype.values=function(){var p=this;return Object.keys(this.attributes).reduce(function(m,g){return m[g]=p.attributes[g].value(p.domNode),m},{})},f}();r.default=d},function(n,r,i){var a=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var m in p)p.hasOwnProperty(m)&&(f[m]=p[m])};return function(f,p){d(f,p);function m(){this.constructor=f}f.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(12);function o(d,f){var p=d.getAttribute("class")||"";return p.split(/\s+/).filter(function(m){return m.indexOf(f+"-")===0})}var c=function(d){a(f,d);function f(){return d!==null&&d.apply(this,arguments)||this}return f.keys=function(p){return(p.getAttribute("class")||"").split(/\s+/).map(function(m){return m.split("-").slice(0,-1).join("-")})},f.prototype.add=function(p,m){return this.canAdd(p,m)?(this.remove(p),p.classList.add(this.keyName+"-"+m),!0):!1},f.prototype.remove=function(p){var m=o(p,this.keyName);m.forEach(function(g){p.classList.remove(g)}),p.classList.length===0&&p.removeAttribute("class")},f.prototype.value=function(p){var m=o(p,this.keyName)[0]||"",g=m.slice(this.keyName.length+1);return this.canAdd(p,g)?g:""},f}(s.default);r.default=c},function(n,r,i){var a=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var m in p)p.hasOwnProperty(m)&&(f[m]=p[m])};return function(f,p){d(f,p);function m(){this.constructor=f}f.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(12);function o(d){var f=d.split("-"),p=f.slice(1).map(function(m){return m[0].toUpperCase()+m.slice(1)}).join("");return f[0]+p}var c=function(d){a(f,d);function f(){return d!==null&&d.apply(this,arguments)||this}return f.keys=function(p){return(p.getAttribute("style")||"").split(";").map(function(m){var g=m.split(":");return g[0].trim()})},f.prototype.add=function(p,m){return this.canAdd(p,m)?(p.style[o(this.keyName)]=m,!0):!1},f.prototype.remove=function(p){p.style[o(this.keyName)]="",p.getAttribute("style")||p.removeAttribute("style")},f.prototype.value=function(p){var m=p.style[o(this.keyName)];return this.canAdd(p,m)?m:""},f}(s.default);r.default=c},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function c(d,f){for(var p=0;p<f.length;p++){var m=f[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(d,m.key,m)}}return function(d,f,p){return f&&c(d.prototype,f),p&&c(d,p),d}}();function s(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}var o=function(){function c(d,f){s(this,c),this.quill=d,this.options=f,this.modules={}}return a(c,[{key:"init",value:function(){var f=this;Object.keys(this.options.modules).forEach(function(p){f.modules[p]==null&&f.addModule(p)})}},{key:"addModule",value:function(f){var p=this.quill.constructor.import("modules/"+f);return this.modules[f]=new p(this.quill,this.options.modules[f]||{}),this.modules[f]}}]),c}();o.DEFAULTS={modules:{}},o.themes={default:o},r.default=o},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function v(_,x){for(var w=0;w<x.length;w++){var E=x[w];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(_,E.key,E)}}return function(_,x,w){return x&&v(_.prototype,x),w&&v(_,w),_}}(),s=function v(_,x,w){_===null&&(_=Function.prototype);var E=Object.getOwnPropertyDescriptor(_,x);if(E===void 0){var P=Object.getPrototypeOf(_);return P===null?void 0:v(P,x,w)}else{if("value"in E)return E.value;var A=E.get;return A===void 0?void 0:A.call(w)}},o=i(0),c=p(o),d=i(7),f=p(d);function p(v){return v&&v.__esModule?v:{default:v}}function m(v,_){if(!(v instanceof _))throw new TypeError("Cannot call a class as a function")}function g(v,_){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:v}function b(v,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);v.prototype=Object.create(_&&_.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(v,_):v.__proto__=_)}var y="\uFEFF",N=function(v){b(_,v);function _(x){m(this,_);var w=g(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,x));return w.contentNode=document.createElement("span"),w.contentNode.setAttribute("contenteditable",!1),[].slice.call(w.domNode.childNodes).forEach(function(E){w.contentNode.appendChild(E)}),w.leftGuard=document.createTextNode(y),w.rightGuard=document.createTextNode(y),w.domNode.appendChild(w.leftGuard),w.domNode.appendChild(w.contentNode),w.domNode.appendChild(w.rightGuard),w}return a(_,[{key:"index",value:function(w,E){return w===this.leftGuard?0:w===this.rightGuard?1:s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"index",this).call(this,w,E)}},{key:"restore",value:function(w){var E=void 0,P=void 0,A=w.data.split(y).join("");if(w===this.leftGuard)if(this.prev instanceof f.default){var T=this.prev.length();this.prev.insertAt(T,A),E={startNode:this.prev.domNode,startOffset:T+A.length}}else P=document.createTextNode(A),this.parent.insertBefore(c.default.create(P),this),E={startNode:P,startOffset:A.length};else w===this.rightGuard&&(this.next instanceof f.default?(this.next.insertAt(0,A),E={startNode:this.next.domNode,startOffset:A.length}):(P=document.createTextNode(A),this.parent.insertBefore(c.default.create(P),this.next),E={startNode:P,startOffset:A.length}));return w.data=y,E}},{key:"update",value:function(w,E){var P=this;w.forEach(function(A){if(A.type==="characterData"&&(A.target===P.leftGuard||A.target===P.rightGuard)){var T=P.restore(A.target);T&&(E.range=T)}})}}]),_}(c.default.Embed);r.default=N},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.AlignStyle=r.AlignClass=r.AlignAttribute=void 0;var a=i(0),s=o(a);function o(m){return m&&m.__esModule?m:{default:m}}var c={scope:s.default.Scope.BLOCK,whitelist:["right","center","justify"]},d=new s.default.Attributor.Attribute("align","align",c),f=new s.default.Attributor.Class("align","ql-align",c),p=new s.default.Attributor.Style("align","text-align",c);r.AlignAttribute=d,r.AlignClass=f,r.AlignStyle=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.BackgroundStyle=r.BackgroundClass=void 0;var a=i(0),s=c(a),o=i(26);function c(p){return p&&p.__esModule?p:{default:p}}var d=new s.default.Attributor.Class("background","ql-bg",{scope:s.default.Scope.INLINE}),f=new o.ColorAttributor("background","background-color",{scope:s.default.Scope.INLINE});r.BackgroundClass=d,r.BackgroundStyle=f},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.DirectionStyle=r.DirectionClass=r.DirectionAttribute=void 0;var a=i(0),s=o(a);function o(m){return m&&m.__esModule?m:{default:m}}var c={scope:s.default.Scope.BLOCK,whitelist:["rtl"]},d=new s.default.Attributor.Attribute("direction","dir",c),f=new s.default.Attributor.Class("direction","ql-direction",c),p=new s.default.Attributor.Style("direction","direction",c);r.DirectionAttribute=d,r.DirectionClass=f,r.DirectionStyle=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.FontClass=r.FontStyle=void 0;var a=function(){function v(_,x){for(var w=0;w<x.length;w++){var E=x[w];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(_,E.key,E)}}return function(_,x,w){return x&&v(_.prototype,x),w&&v(_,w),_}}(),s=function v(_,x,w){_===null&&(_=Function.prototype);var E=Object.getOwnPropertyDescriptor(_,x);if(E===void 0){var P=Object.getPrototypeOf(_);return P===null?void 0:v(P,x,w)}else{if("value"in E)return E.value;var A=E.get;return A===void 0?void 0:A.call(w)}},o=i(0),c=d(o);function d(v){return v&&v.__esModule?v:{default:v}}function f(v,_){if(!(v instanceof _))throw new TypeError("Cannot call a class as a function")}function p(v,_){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:v}function m(v,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);v.prototype=Object.create(_&&_.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(v,_):v.__proto__=_)}var g={scope:c.default.Scope.INLINE,whitelist:["serif","monospace"]},b=new c.default.Attributor.Class("font","ql-font",g),y=function(v){m(_,v);function _(){return f(this,_),p(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return a(_,[{key:"value",value:function(w){return s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"value",this).call(this,w).replace(/["']/g,"")}}]),_}(c.default.Attributor.Style),N=new y("font","font-family",g);r.FontStyle=N,r.FontClass=b},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SizeStyle=r.SizeClass=void 0;var a=i(0),s=o(a);function o(f){return f&&f.__esModule?f:{default:f}}var c=new s.default.Attributor.Class("size","ql-size",{scope:s.default.Scope.INLINE,whitelist:["small","large","huge"]}),d=new s.default.Attributor.Style("size","font-size",{scope:s.default.Scope.INLINE,whitelist:["10px","18px","32px"]});r.SizeClass=c,r.SizeStyle=d},function(n,r,i){n.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.getLastChangeIndex=r.default=void 0;var a=function(){function x(w,E){for(var P=0;P<E.length;P++){var A=E[P];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(w,A.key,A)}}return function(w,E,P){return E&&x(w.prototype,E),P&&x(w,P),w}}(),s=i(0),o=m(s),c=i(5),d=m(c),f=i(9),p=m(f);function m(x){return x&&x.__esModule?x:{default:x}}function g(x,w){if(!(x instanceof w))throw new TypeError("Cannot call a class as a function")}function b(x,w){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:x}function y(x,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);x.prototype=Object.create(w&&w.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(x,w):x.__proto__=w)}var N=function(x){y(w,x);function w(E,P){g(this,w);var A=b(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,E,P));return A.lastRecorded=0,A.ignoreChange=!1,A.clear(),A.quill.on(d.default.events.EDITOR_CHANGE,function(T,L,k,C){T!==d.default.events.TEXT_CHANGE||A.ignoreChange||(!A.options.userOnly||C===d.default.sources.USER?A.record(L,k):A.transform(L))}),A.quill.keyboard.addBinding({key:"Z",shortKey:!0},A.undo.bind(A)),A.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},A.redo.bind(A)),/Win/i.test(navigator.platform)&&A.quill.keyboard.addBinding({key:"Y",shortKey:!0},A.redo.bind(A)),A}return a(w,[{key:"change",value:function(P,A){if(this.stack[P].length!==0){var T=this.stack[P].pop();this.stack[A].push(T),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(T[P],d.default.sources.USER),this.ignoreChange=!1;var L=_(T[P]);this.quill.setSelection(L)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(P,A){if(P.ops.length!==0){this.stack.redo=[];var T=this.quill.getContents().diff(A),L=Date.now();if(this.lastRecorded+this.options.delay>L&&this.stack.undo.length>0){var k=this.stack.undo.pop();T=T.compose(k.undo),P=k.redo.compose(P)}else this.lastRecorded=L;this.stack.undo.push({redo:P,undo:T}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(P){this.stack.undo.forEach(function(A){A.undo=P.transform(A.undo,!0),A.redo=P.transform(A.redo,!0)}),this.stack.redo.forEach(function(A){A.undo=P.transform(A.undo,!0),A.redo=P.transform(A.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),w}(p.default);N.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function v(x){var w=x.ops[x.ops.length-1];return w==null?!1:w.insert!=null?typeof w.insert=="string"&&w.insert.endsWith(`
`):w.attributes!=null?Object.keys(w.attributes).some(function(E){return o.default.query(E,o.default.Scope.BLOCK)!=null}):!1}function _(x){var w=x.reduce(function(P,A){return P+=A.delete||0,P},0),E=x.length()-w;return v(x)&&(E-=1),E}r.default=N,r.getLastChangeIndex=_},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BaseTooltip=void 0;var a=function(){function z(W,Q){for(var ee=0;ee<Q.length;ee++){var Y=Q[ee];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(W,Y.key,Y)}}return function(W,Q,ee){return Q&&z(W.prototype,Q),ee&&z(W,ee),W}}(),s=function z(W,Q,ee){W===null&&(W=Function.prototype);var Y=Object.getOwnPropertyDescriptor(W,Q);if(Y===void 0){var U=Object.getPrototypeOf(W);return U===null?void 0:z(U,Q,ee)}else{if("value"in Y)return Y.value;var J=Y.get;return J===void 0?void 0:J.call(ee)}},o=i(3),c=L(o),d=i(2),f=L(d),p=i(8),m=L(p),g=i(23),b=L(g),y=i(34),N=L(y),v=i(59),_=L(v),x=i(60),w=L(x),E=i(28),P=L(E),A=i(61),T=L(A);function L(z){return z&&z.__esModule?z:{default:z}}function k(z,W){if(!(z instanceof W))throw new TypeError("Cannot call a class as a function")}function C(z,W){if(!z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W&&(typeof W=="object"||typeof W=="function")?W:z}function O(z,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof W);z.prototype=Object.create(W&&W.prototype,{constructor:{value:z,enumerable:!1,writable:!0,configurable:!0}}),W&&(Object.setPrototypeOf?Object.setPrototypeOf(z,W):z.__proto__=W)}var F=[!1,"center","right","justify"],M=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],D=[!1,"serif","monospace"],$=["1","2","3",!1],V=["small",!1,"large","huge"],K=function(z){O(W,z);function W(Q,ee){k(this,W);var Y=C(this,(W.__proto__||Object.getPrototypeOf(W)).call(this,Q,ee)),U=function J(te){if(!document.body.contains(Q.root))return document.body.removeEventListener("click",J);Y.tooltip!=null&&!Y.tooltip.root.contains(te.target)&&document.activeElement!==Y.tooltip.textbox&&!Y.quill.hasFocus()&&Y.tooltip.hide(),Y.pickers!=null&&Y.pickers.forEach(function(X){X.container.contains(te.target)||X.close()})};return Q.emitter.listenDOM("click",document.body,U),Y}return a(W,[{key:"addModule",value:function(ee){var Y=s(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"addModule",this).call(this,ee);return ee==="toolbar"&&this.extendToolbar(Y),Y}},{key:"buildButtons",value:function(ee,Y){ee.forEach(function(U){var J=U.getAttribute("class")||"";J.split(/\s+/).forEach(function(te){if(te.startsWith("ql-")&&(te=te.slice(3),Y[te]!=null))if(te==="direction")U.innerHTML=Y[te][""]+Y[te].rtl;else if(typeof Y[te]=="string")U.innerHTML=Y[te];else{var X=U.value||"";X!=null&&Y[te][X]&&(U.innerHTML=Y[te][X])}})})}},{key:"buildPickers",value:function(ee,Y){var U=this;this.pickers=ee.map(function(te){if(te.classList.contains("ql-align"))return te.querySelector("option")==null&&I(te,F),new w.default(te,Y.align);if(te.classList.contains("ql-background")||te.classList.contains("ql-color")){var X=te.classList.contains("ql-background")?"background":"color";return te.querySelector("option")==null&&I(te,M,X==="background"?"#ffffff":"#000000"),new _.default(te,Y[X])}else return te.querySelector("option")==null&&(te.classList.contains("ql-font")?I(te,D):te.classList.contains("ql-header")?I(te,$):te.classList.contains("ql-size")&&I(te,V)),new P.default(te)});var J=function(){U.pickers.forEach(function(X){X.update()})};this.quill.on(m.default.events.EDITOR_CHANGE,J)}}]),W}(N.default);K.DEFAULTS=(0,c.default)(!0,{},N.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var W=this,Q=this.container.querySelector("input.ql-image[type=file]");Q==null&&(Q=document.createElement("input"),Q.setAttribute("type","file"),Q.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),Q.classList.add("ql-image"),Q.addEventListener("change",function(){if(Q.files!=null&&Q.files[0]!=null){var ee=new FileReader;ee.onload=function(Y){var U=W.quill.getSelection(!0);W.quill.updateContents(new f.default().retain(U.index).delete(U.length).insert({image:Y.target.result}),m.default.sources.USER),W.quill.setSelection(U.index+1,m.default.sources.SILENT),Q.value=""},ee.readAsDataURL(Q.files[0])}}),this.container.appendChild(Q)),Q.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var H=function(z){O(W,z);function W(Q,ee){k(this,W);var Y=C(this,(W.__proto__||Object.getPrototypeOf(W)).call(this,Q,ee));return Y.textbox=Y.root.querySelector('input[type="text"]'),Y.listen(),Y}return a(W,[{key:"listen",value:function(){var ee=this;this.textbox.addEventListener("keydown",function(Y){b.default.match(Y,"enter")?(ee.save(),Y.preventDefault()):b.default.match(Y,"escape")&&(ee.cancel(),Y.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),Y!=null?this.textbox.value=Y:ee!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+ee)||""),this.root.setAttribute("data-mode",ee)}},{key:"restoreFocus",value:function(){var ee=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=ee}},{key:"save",value:function(){var ee=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var Y=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",ee,m.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",ee,m.default.sources.USER)),this.quill.root.scrollTop=Y;break}case"video":ee=q(ee);case"formula":{if(!ee)break;var U=this.quill.getSelection(!0);if(U!=null){var J=U.index+U.length;this.quill.insertEmbed(J,this.root.getAttribute("data-mode"),ee,m.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(J+1," ",m.default.sources.USER),this.quill.setSelection(J+2,m.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),W}(T.default);function q(z){var W=z.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||z.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return W?(W[1]||"https")+"://www.youtube.com/embed/"+W[2]+"?showinfo=0":(W=z.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(W[1]||"https")+"://player.vimeo.com/video/"+W[2]+"/":z}function I(z,W){var Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;W.forEach(function(ee){var Y=document.createElement("option");ee===Q?Y.setAttribute("selected","selected"):Y.setAttribute("value",ee),z.appendChild(Y)})}r.BaseTooltip=H,r.default=K},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function s(){this.head=this.tail=null,this.length=0}return s.prototype.append=function(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];this.insertBefore(o[0],null),o.length>1&&this.append.apply(this,o.slice(1))},s.prototype.contains=function(o){for(var c,d=this.iterator();c=d();)if(c===o)return!0;return!1},s.prototype.insertBefore=function(o,c){o&&(o.next=c,c!=null?(o.prev=c.prev,c.prev!=null&&(c.prev.next=o),c.prev=o,c===this.head&&(this.head=o)):this.tail!=null?(this.tail.next=o,o.prev=this.tail,this.tail=o):(o.prev=null,this.head=this.tail=o),this.length+=1)},s.prototype.offset=function(o){for(var c=0,d=this.head;d!=null;){if(d===o)return c;c+=d.length(),d=d.next}return-1},s.prototype.remove=function(o){this.contains(o)&&(o.prev!=null&&(o.prev.next=o.next),o.next!=null&&(o.next.prev=o.prev),o===this.head&&(this.head=o.next),o===this.tail&&(this.tail=o.prev),this.length-=1)},s.prototype.iterator=function(o){return o===void 0&&(o=this.head),function(){var c=o;return o!=null&&(o=o.next),c}},s.prototype.find=function(o,c){c===void 0&&(c=!1);for(var d,f=this.iterator();d=f();){var p=d.length();if(o<p||c&&o===p&&(d.next==null||d.next.length()!==0))return[d,o];o-=p}return[null,0]},s.prototype.forEach=function(o){for(var c,d=this.iterator();c=d();)o(c)},s.prototype.forEachAt=function(o,c,d){if(!(c<=0))for(var f=this.find(o),p=f[0],m=f[1],g,b=o-m,y=this.iterator(p);(g=y())&&b<o+c;){var N=g.length();o>b?d(g,o-b,Math.min(c,b+N-o)):d(g,0,Math.min(N,o+c-b)),b+=N}},s.prototype.map=function(o){return this.reduce(function(c,d){return c.push(o(d)),c},[])},s.prototype.reduce=function(o,c){for(var d,f=this.iterator();d=f();)c=o(c,d);return c},s}();r.default=a},function(n,r,i){var a=this&&this.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,g){m.__proto__=g}||function(m,g){for(var b in g)g.hasOwnProperty(b)&&(m[b]=g[b])};return function(m,g){p(m,g);function b(){this.constructor=m}m.prototype=g===null?Object.create(g):(b.prototype=g.prototype,new b)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(17),o=i(1),c={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},d=100,f=function(p){a(m,p);function m(g){var b=p.call(this,g)||this;return b.scroll=b,b.observer=new MutationObserver(function(y){b.update(y)}),b.observer.observe(b.domNode,c),b.attach(),b}return m.prototype.detach=function(){p.prototype.detach.call(this),this.observer.disconnect()},m.prototype.deleteAt=function(g,b){this.update(),g===0&&b===this.length()?this.children.forEach(function(y){y.remove()}):p.prototype.deleteAt.call(this,g,b)},m.prototype.formatAt=function(g,b,y,N){this.update(),p.prototype.formatAt.call(this,g,b,y,N)},m.prototype.insertAt=function(g,b,y){this.update(),p.prototype.insertAt.call(this,g,b,y)},m.prototype.optimize=function(g,b){var y=this;g===void 0&&(g=[]),b===void 0&&(b={}),p.prototype.optimize.call(this,b);for(var N=[].slice.call(this.observer.takeRecords());N.length>0;)g.push(N.pop());for(var v=function(E,P){P===void 0&&(P=!0),!(E==null||E===y)&&E.domNode.parentNode!=null&&(E.domNode[o.DATA_KEY].mutations==null&&(E.domNode[o.DATA_KEY].mutations=[]),P&&v(E.parent))},_=function(E){E.domNode[o.DATA_KEY]==null||E.domNode[o.DATA_KEY].mutations==null||(E instanceof s.default&&E.children.forEach(_),E.optimize(b))},x=g,w=0;x.length>0;w+=1){if(w>=d)throw new Error("[Parchment] Maximum optimize iterations reached");for(x.forEach(function(E){var P=o.find(E.target,!0);P!=null&&(P.domNode===E.target&&(E.type==="childList"?(v(o.find(E.previousSibling,!1)),[].forEach.call(E.addedNodes,function(A){var T=o.find(A,!1);v(T,!1),T instanceof s.default&&T.children.forEach(function(L){v(L,!1)})})):E.type==="attributes"&&v(P.prev)),v(P))}),this.children.forEach(_),x=[].slice.call(this.observer.takeRecords()),N=x.slice();N.length>0;)g.push(N.pop())}},m.prototype.update=function(g,b){var y=this;b===void 0&&(b={}),g=g||this.observer.takeRecords(),g.map(function(N){var v=o.find(N.target,!0);return v==null?null:v.domNode[o.DATA_KEY].mutations==null?(v.domNode[o.DATA_KEY].mutations=[N],v):(v.domNode[o.DATA_KEY].mutations.push(N),null)}).forEach(function(N){N==null||N===y||N.domNode[o.DATA_KEY]==null||N.update(N.domNode[o.DATA_KEY].mutations||[],b)}),this.domNode[o.DATA_KEY].mutations!=null&&p.prototype.update.call(this,this.domNode[o.DATA_KEY].mutations,b),this.optimize(g,b)},m.blotName="scroll",m.defaultChild="block",m.scope=o.Scope.BLOCK_BLOT,m.tagName="DIV",m}(s.default);r.default=f},function(n,r,i){var a=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var g in m)m.hasOwnProperty(g)&&(p[g]=m[g])};return function(p,m){f(p,m);function g(){this.constructor=p}p.prototype=m===null?Object.create(m):(g.prototype=m.prototype,new g)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(18),o=i(1);function c(f,p){if(Object.keys(f).length!==Object.keys(p).length)return!1;for(var m in f)if(f[m]!==p[m])return!1;return!0}var d=function(f){a(p,f);function p(){return f!==null&&f.apply(this,arguments)||this}return p.formats=function(m){if(m.tagName!==p.tagName)return f.formats.call(this,m)},p.prototype.format=function(m,g){var b=this;m===this.statics.blotName&&!g?(this.children.forEach(function(y){y instanceof s.default||(y=y.wrap(p.blotName,!0)),b.attributes.copy(y)}),this.unwrap()):f.prototype.format.call(this,m,g)},p.prototype.formatAt=function(m,g,b,y){if(this.formats()[b]!=null||o.query(b,o.Scope.ATTRIBUTE)){var N=this.isolate(m,g);N.format(b,y)}else f.prototype.formatAt.call(this,m,g,b,y)},p.prototype.optimize=function(m){f.prototype.optimize.call(this,m);var g=this.formats();if(Object.keys(g).length===0)return this.unwrap();var b=this.next;b instanceof p&&b.prev===this&&c(g,b.formats())&&(b.moveChildren(this),b.remove())},p.blotName="inline",p.scope=o.Scope.INLINE_BLOT,p.tagName="SPAN",p}(s.default);r.default=d},function(n,r,i){var a=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var m in p)p.hasOwnProperty(m)&&(f[m]=p[m])};return function(f,p){d(f,p);function m(){this.constructor=f}f.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(18),o=i(1),c=function(d){a(f,d);function f(){return d!==null&&d.apply(this,arguments)||this}return f.formats=function(p){var m=o.query(f.blotName).tagName;if(p.tagName!==m)return d.formats.call(this,p)},f.prototype.format=function(p,m){o.query(p,o.Scope.BLOCK)!=null&&(p===this.statics.blotName&&!m?this.replaceWith(f.blotName):d.prototype.format.call(this,p,m))},f.prototype.formatAt=function(p,m,g,b){o.query(g,o.Scope.BLOCK)!=null?this.format(g,b):d.prototype.formatAt.call(this,p,m,g,b)},f.prototype.insertAt=function(p,m,g){if(g==null||o.query(m,o.Scope.INLINE)!=null)d.prototype.insertAt.call(this,p,m,g);else{var b=this.split(p),y=o.create(m,g);b.parent.insertBefore(y,b)}},f.prototype.update=function(p,m){navigator.userAgent.match(/Trident/)?this.build():d.prototype.update.call(this,p,m)},f.blotName="block",f.scope=o.Scope.BLOCK_BLOT,f.tagName="P",f}(s.default);r.default=c},function(n,r,i){var a=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,f){d.__proto__=f}||function(d,f){for(var p in f)f.hasOwnProperty(p)&&(d[p]=f[p])};return function(d,f){c(d,f);function p(){this.constructor=d}d.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(19),o=function(c){a(d,c);function d(){return c!==null&&c.apply(this,arguments)||this}return d.formats=function(f){},d.prototype.format=function(f,p){c.prototype.formatAt.call(this,0,this.length(),f,p)},d.prototype.formatAt=function(f,p,m,g){f===0&&p===this.length()?this.format(m,g):c.prototype.formatAt.call(this,f,p,m,g)},d.prototype.formats=function(){return this.statics.formats(this.domNode)},d}(s.default);r.default=o},function(n,r,i){var a=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var m in p)p.hasOwnProperty(m)&&(f[m]=p[m])};return function(f,p){d(f,p);function m(){this.constructor=f}f.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(19),o=i(1),c=function(d){a(f,d);function f(p){var m=d.call(this,p)||this;return m.text=m.statics.value(m.domNode),m}return f.create=function(p){return document.createTextNode(p)},f.value=function(p){var m=p.data;return m.normalize&&(m=m.normalize()),m},f.prototype.deleteAt=function(p,m){this.domNode.data=this.text=this.text.slice(0,p)+this.text.slice(p+m)},f.prototype.index=function(p,m){return this.domNode===p?m:-1},f.prototype.insertAt=function(p,m,g){g==null?(this.text=this.text.slice(0,p)+m+this.text.slice(p),this.domNode.data=this.text):d.prototype.insertAt.call(this,p,m,g)},f.prototype.length=function(){return this.text.length},f.prototype.optimize=function(p){d.prototype.optimize.call(this,p),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof f&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},f.prototype.position=function(p,m){return[this.domNode,p]},f.prototype.split=function(p,m){if(m===void 0&&(m=!1),!m){if(p===0)return this;if(p===this.length())return this.next}var g=o.create(this.domNode.splitText(p));return this.parent.insertBefore(g,this.next),this.text=this.statics.value(this.domNode),g},f.prototype.update=function(p,m){var g=this;p.some(function(b){return b.type==="characterData"&&b.target===g.domNode})&&(this.text=this.statics.value(this.domNode))},f.prototype.value=function(){return this.text},f.blotName="text",f.scope=o.Scope.INLINE_BLOT,f}(s.default);r.default=c},function(n,r,i){var a=document.createElement("div");if(a.classList.toggle("test-class",!1),a.classList.contains("test-class")){var s=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(o,c){return arguments.length>1&&!this.contains(o)==!c?c:s.call(this,o)}}String.prototype.startsWith||(String.prototype.startsWith=function(o,c){return c=c||0,this.substr(c,o.length)===o}),String.prototype.endsWith||(String.prototype.endsWith=function(o,c){var d=this.toString();(typeof c!="number"||!isFinite(c)||Math.floor(c)!==c||c>d.length)&&(c=d.length),c-=o.length;var f=d.indexOf(o,c);return f!==-1&&f===c}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(c){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof c!="function")throw new TypeError("predicate must be a function");for(var d=Object(this),f=d.length>>>0,p=arguments[1],m,g=0;g<f;g++)if(m=d[g],c.call(p,m,g,d))return m}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(n,r){var i=-1,a=1,s=0;function o(w,E,P){if(w==E)return w?[[s,w]]:[];(P<0||w.length<P)&&(P=null);var A=p(w,E),T=w.substring(0,A);w=w.substring(A),E=E.substring(A),A=m(w,E);var L=w.substring(w.length-A);w=w.substring(0,w.length-A),E=E.substring(0,E.length-A);var k=c(w,E);return T&&k.unshift([s,T]),L&&k.push([s,L]),b(k),P!=null&&(k=v(k,P)),k=_(k),k}function c(w,E){var P;if(!w)return[[a,E]];if(!E)return[[i,w]];var A=w.length>E.length?w:E,T=w.length>E.length?E:w,L=A.indexOf(T);if(L!=-1)return P=[[a,A.substring(0,L)],[s,T],[a,A.substring(L+T.length)]],w.length>E.length&&(P[0][0]=P[2][0]=i),P;if(T.length==1)return[[i,w],[a,E]];var k=g(w,E);if(k){var C=k[0],O=k[1],F=k[2],M=k[3],D=k[4],$=o(C,F),V=o(O,M);return $.concat([[s,D]],V)}return d(w,E)}function d(w,E){for(var P=w.length,A=E.length,T=Math.ceil((P+A)/2),L=T,k=2*T,C=new Array(k),O=new Array(k),F=0;F<k;F++)C[F]=-1,O[F]=-1;C[L+1]=0,O[L+1]=0;for(var M=P-A,D=M%2!=0,$=0,V=0,K=0,H=0,q=0;q<T;q++){for(var I=-q+$;I<=q-V;I+=2){var z=L+I,W;I==-q||I!=q&&C[z-1]<C[z+1]?W=C[z+1]:W=C[z-1]+1;for(var Q=W-I;W<P&&Q<A&&w.charAt(W)==E.charAt(Q);)W++,Q++;if(C[z]=W,W>P)V+=2;else if(Q>A)$+=2;else if(D){var ee=L+M-I;if(ee>=0&&ee<k&&O[ee]!=-1){var Y=P-O[ee];if(W>=Y)return f(w,E,W,Q)}}}for(var U=-q+K;U<=q-H;U+=2){var ee=L+U,Y;U==-q||U!=q&&O[ee-1]<O[ee+1]?Y=O[ee+1]:Y=O[ee-1]+1;for(var J=Y-U;Y<P&&J<A&&w.charAt(P-Y-1)==E.charAt(A-J-1);)Y++,J++;if(O[ee]=Y,Y>P)H+=2;else if(J>A)K+=2;else if(!D){var z=L+M-U;if(z>=0&&z<k&&C[z]!=-1){var W=C[z],Q=L+W-z;if(Y=P-Y,W>=Y)return f(w,E,W,Q)}}}}return[[i,w],[a,E]]}function f(w,E,P,A){var T=w.substring(0,P),L=E.substring(0,A),k=w.substring(P),C=E.substring(A),O=o(T,L),F=o(k,C);return O.concat(F)}function p(w,E){if(!w||!E||w.charAt(0)!=E.charAt(0))return 0;for(var P=0,A=Math.min(w.length,E.length),T=A,L=0;P<T;)w.substring(L,T)==E.substring(L,T)?(P=T,L=P):A=T,T=Math.floor((A-P)/2+P);return T}function m(w,E){if(!w||!E||w.charAt(w.length-1)!=E.charAt(E.length-1))return 0;for(var P=0,A=Math.min(w.length,E.length),T=A,L=0;P<T;)w.substring(w.length-T,w.length-L)==E.substring(E.length-T,E.length-L)?(P=T,L=P):A=T,T=Math.floor((A-P)/2+P);return T}function g(w,E){var P=w.length>E.length?w:E,A=w.length>E.length?E:w;if(P.length<4||A.length*2<P.length)return null;function T(V,K,H){for(var q=V.substring(H,H+Math.floor(V.length/4)),I=-1,z="",W,Q,ee,Y;(I=K.indexOf(q,I+1))!=-1;){var U=p(V.substring(H),K.substring(I)),J=m(V.substring(0,H),K.substring(0,I));z.length<J+U&&(z=K.substring(I-J,I)+K.substring(I,I+U),W=V.substring(0,H-J),Q=V.substring(H+U),ee=K.substring(0,I-J),Y=K.substring(I+U))}return z.length*2>=V.length?[W,Q,ee,Y,z]:null}var L=T(P,A,Math.ceil(P.length/4)),k=T(P,A,Math.ceil(P.length/2)),C;if(!L&&!k)return null;k?L?C=L[4].length>k[4].length?L:k:C=k:C=L;var O,F,M,D;w.length>E.length?(O=C[0],F=C[1],M=C[2],D=C[3]):(M=C[0],D=C[1],O=C[2],F=C[3]);var $=C[4];return[O,F,M,D,$]}function b(w){w.push([s,""]);for(var E=0,P=0,A=0,T="",L="",k;E<w.length;)switch(w[E][0]){case a:A++,L+=w[E][1],E++;break;case i:P++,T+=w[E][1],E++;break;case s:P+A>1?(P!==0&&A!==0&&(k=p(L,T),k!==0&&(E-P-A>0&&w[E-P-A-1][0]==s?w[E-P-A-1][1]+=L.substring(0,k):(w.splice(0,0,[s,L.substring(0,k)]),E++),L=L.substring(k),T=T.substring(k)),k=m(L,T),k!==0&&(w[E][1]=L.substring(L.length-k)+w[E][1],L=L.substring(0,L.length-k),T=T.substring(0,T.length-k))),P===0?w.splice(E-A,P+A,[a,L]):A===0?w.splice(E-P,P+A,[i,T]):w.splice(E-P-A,P+A,[i,T],[a,L]),E=E-P-A+(P?1:0)+(A?1:0)+1):E!==0&&w[E-1][0]==s?(w[E-1][1]+=w[E][1],w.splice(E,1)):E++,A=0,P=0,T="",L="";break}w[w.length-1][1]===""&&w.pop();var C=!1;for(E=1;E<w.length-1;)w[E-1][0]==s&&w[E+1][0]==s&&(w[E][1].substring(w[E][1].length-w[E-1][1].length)==w[E-1][1]?(w[E][1]=w[E-1][1]+w[E][1].substring(0,w[E][1].length-w[E-1][1].length),w[E+1][1]=w[E-1][1]+w[E+1][1],w.splice(E-1,1),C=!0):w[E][1].substring(0,w[E+1][1].length)==w[E+1][1]&&(w[E-1][1]+=w[E+1][1],w[E][1]=w[E][1].substring(w[E+1][1].length)+w[E+1][1],w.splice(E+1,1),C=!0)),E++;C&&b(w)}var y=o;y.INSERT=a,y.DELETE=i,y.EQUAL=s,n.exports=y;function N(w,E){if(E===0)return[s,w];for(var P=0,A=0;A<w.length;A++){var T=w[A];if(T[0]===i||T[0]===s){var L=P+T[1].length;if(E===L)return[A+1,w];if(E<L){w=w.slice();var k=E-P,C=[T[0],T[1].slice(0,k)],O=[T[0],T[1].slice(k)];return w.splice(A,1,C,O),[A+1,w]}else P=L}}throw new Error("cursor_pos is out of bounds!")}function v(w,E){var P=N(w,E),A=P[1],T=P[0],L=A[T],k=A[T+1];if(L==null)return w;if(L[0]!==s)return w;if(k!=null&&L[1]+k[1]===k[1]+L[1])return A.splice(T,2,k,L),x(A,T,2);if(k!=null&&k[1].indexOf(L[1])===0){A.splice(T,2,[k[0],L[1]],[0,L[1]]);var C=k[1].slice(L[1].length);return C.length>0&&A.splice(T+2,0,[k[0],C]),x(A,T,3)}else return w}function _(w){for(var E=!1,P=function(k){return k.charCodeAt(0)>=56320&&k.charCodeAt(0)<=57343},A=function(k){return k.charCodeAt(k.length-1)>=55296&&k.charCodeAt(k.length-1)<=56319},T=2;T<w.length;T+=1)w[T-2][0]===s&&A(w[T-2][1])&&w[T-1][0]===i&&P(w[T-1][1])&&w[T][0]===a&&P(w[T][1])&&(E=!0,w[T-1][1]=w[T-2][1].slice(-1)+w[T-1][1],w[T][1]=w[T-2][1].slice(-1)+w[T][1],w[T-2][1]=w[T-2][1].slice(0,-1));if(!E)return w;for(var L=[],T=0;T<w.length;T+=1)w[T][1].length>0&&L.push(w[T]);return L}function x(w,E,P){for(var A=E+P-1;A>=0&&A>=E-1;A--)if(A+1<w.length){var T=w[A],L=w[A+1];T[0]===L[1]&&w.splice(A,2,[T[0],T[1]+L[1]])}return w}},function(n,r){r=n.exports=typeof Object.keys=="function"?Object.keys:i,r.shim=i;function i(a){var s=[];for(var o in a)s.push(o);return s}},function(n,r){var i=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";r=n.exports=i?a:s,r.supported=a;function a(o){return Object.prototype.toString.call(o)=="[object Arguments]"}r.unsupported=s;function s(o){return o&&typeof o=="object"&&typeof o.length=="number"&&Object.prototype.hasOwnProperty.call(o,"callee")&&!Object.prototype.propertyIsEnumerable.call(o,"callee")||!1}},function(n,r){var i=Object.prototype.hasOwnProperty,a="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(a=!1));function o(d,f,p){this.fn=d,this.context=f,this.once=p||!1}function c(){this._events=new s,this._eventsCount=0}c.prototype.eventNames=function(){var f=[],p,m;if(this._eventsCount===0)return f;for(m in p=this._events)i.call(p,m)&&f.push(a?m.slice(1):m);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(p)):f},c.prototype.listeners=function(f,p){var m=a?a+f:f,g=this._events[m];if(p)return!!g;if(!g)return[];if(g.fn)return[g.fn];for(var b=0,y=g.length,N=new Array(y);b<y;b++)N[b]=g[b].fn;return N},c.prototype.emit=function(f,p,m,g,b,y){var N=a?a+f:f;if(!this._events[N])return!1;var v=this._events[N],_=arguments.length,x,w;if(v.fn){switch(v.once&&this.removeListener(f,v.fn,void 0,!0),_){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,p),!0;case 3:return v.fn.call(v.context,p,m),!0;case 4:return v.fn.call(v.context,p,m,g),!0;case 5:return v.fn.call(v.context,p,m,g,b),!0;case 6:return v.fn.call(v.context,p,m,g,b,y),!0}for(w=1,x=new Array(_-1);w<_;w++)x[w-1]=arguments[w];v.fn.apply(v.context,x)}else{var E=v.length,P;for(w=0;w<E;w++)switch(v[w].once&&this.removeListener(f,v[w].fn,void 0,!0),_){case 1:v[w].fn.call(v[w].context);break;case 2:v[w].fn.call(v[w].context,p);break;case 3:v[w].fn.call(v[w].context,p,m);break;case 4:v[w].fn.call(v[w].context,p,m,g);break;default:if(!x)for(P=1,x=new Array(_-1);P<_;P++)x[P-1]=arguments[P];v[w].fn.apply(v[w].context,x)}}return!0},c.prototype.on=function(f,p,m){var g=new o(p,m||this),b=a?a+f:f;return this._events[b]?this._events[b].fn?this._events[b]=[this._events[b],g]:this._events[b].push(g):(this._events[b]=g,this._eventsCount++),this},c.prototype.once=function(f,p,m){var g=new o(p,m||this,!0),b=a?a+f:f;return this._events[b]?this._events[b].fn?this._events[b]=[this._events[b],g]:this._events[b].push(g):(this._events[b]=g,this._eventsCount++),this},c.prototype.removeListener=function(f,p,m,g){var b=a?a+f:f;if(!this._events[b])return this;if(!p)return--this._eventsCount===0?this._events=new s:delete this._events[b],this;var y=this._events[b];if(y.fn)y.fn===p&&(!g||y.once)&&(!m||y.context===m)&&(--this._eventsCount===0?this._events=new s:delete this._events[b]);else{for(var N=0,v=[],_=y.length;N<_;N++)(y[N].fn!==p||g&&!y[N].once||m&&y[N].context!==m)&&v.push(y[N]);v.length?this._events[b]=v.length===1?v[0]:v:--this._eventsCount===0?this._events=new s:delete this._events[b]}return this},c.prototype.removeAllListeners=function(f){var p;return f?(p=a?a+f:f,this._events[p]&&(--this._eventsCount===0?this._events=new s:delete this._events[p])):(this._events=new s,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prototype.setMaxListeners=function(){return this},c.prefixed=a,c.EventEmitter=c,typeof n<"u"&&(n.exports=c)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.matchText=r.matchSpacing=r.matchNewline=r.matchBlot=r.matchAttributor=r.default=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(re){return typeof re}:function(re){return re&&typeof Symbol=="function"&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re},s=function(){function re(he,ye){var we=[],me=!0,je=!1,Ce=void 0;try{for(var Ae=he[Symbol.iterator](),vt;!(me=(vt=Ae.next()).done)&&(we.push(vt.value),!(ye&&we.length===ye));me=!0);}catch(Pt){je=!0,Ce=Pt}finally{try{!me&&Ae.return&&Ae.return()}finally{if(je)throw Ce}}return we}return function(he,ye){if(Array.isArray(he))return he;if(Symbol.iterator in Object(he))return re(he,ye);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function re(he,ye){for(var we=0;we<ye.length;we++){var me=ye[we];me.enumerable=me.enumerable||!1,me.configurable=!0,"value"in me&&(me.writable=!0),Object.defineProperty(he,me.key,me)}}return function(he,ye,we){return ye&&re(he.prototype,ye),we&&re(he,we),he}}(),c=i(3),d=O(c),f=i(2),p=O(f),m=i(0),g=O(m),b=i(5),y=O(b),N=i(10),v=O(N),_=i(9),x=O(_),w=i(36),E=i(37),P=i(13),A=O(P),T=i(26),L=i(38),k=i(39),C=i(40);function O(re){return re&&re.__esModule?re:{default:re}}function F(re,he,ye){return he in re?Object.defineProperty(re,he,{value:ye,enumerable:!0,configurable:!0,writable:!0}):re[he]=ye,re}function M(re,he){if(!(re instanceof he))throw new TypeError("Cannot call a class as a function")}function D(re,he){if(!re)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return he&&(typeof he=="object"||typeof he=="function")?he:re}function $(re,he){if(typeof he!="function"&&he!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof he);re.prototype=Object.create(he&&he.prototype,{constructor:{value:re,enumerable:!1,writable:!0,configurable:!0}}),he&&(Object.setPrototypeOf?Object.setPrototypeOf(re,he):re.__proto__=he)}var V=(0,v.default)("quill:clipboard"),K="__ql-matcher",H=[[Node.TEXT_NODE,ge],[Node.TEXT_NODE,ce],["br",ne],[Node.ELEMENT_NODE,ce],[Node.ELEMENT_NODE,X],[Node.ELEMENT_NODE,de],[Node.ELEMENT_NODE,te],[Node.ELEMENT_NODE,Oe],["li",se],["b",J.bind(J,"bold")],["i",J.bind(J,"italic")],["style",ue]],q=[w.AlignAttribute,L.DirectionAttribute].reduce(function(re,he){return re[he.keyName]=he,re},{}),I=[w.AlignStyle,E.BackgroundStyle,T.ColorStyle,L.DirectionStyle,k.FontStyle,C.SizeStyle].reduce(function(re,he){return re[he.keyName]=he,re},{}),z=function(re){$(he,re);function he(ye,we){M(this,he);var me=D(this,(he.__proto__||Object.getPrototypeOf(he)).call(this,ye,we));return me.quill.root.addEventListener("paste",me.onPaste.bind(me)),me.container=me.quill.addContainer("ql-clipboard"),me.container.setAttribute("contenteditable",!0),me.container.setAttribute("tabindex",-1),me.matchers=[],H.concat(me.options.matchers).forEach(function(je){var Ce=s(je,2),Ae=Ce[0],vt=Ce[1];!we.matchVisual&&vt===de||me.addMatcher(Ae,vt)}),me}return o(he,[{key:"addMatcher",value:function(we,me){this.matchers.push([we,me])}},{key:"convert",value:function(we){if(typeof we=="string")return this.container.innerHTML=we.replace(/\>\r?\n +\</g,"><"),this.convert();var me=this.quill.getFormat(this.quill.selection.savedRange.index);if(me[A.default.blotName]){var je=this.container.innerText;return this.container.innerHTML="",new p.default().insert(je,F({},A.default.blotName,me[A.default.blotName]))}var Ce=this.prepareMatching(),Ae=s(Ce,2),vt=Ae[0],Pt=Ae[1],qe=U(this.container,vt,Pt);return ee(qe,`
`)&&qe.ops[qe.ops.length-1].attributes==null&&(qe=qe.compose(new p.default().retain(qe.length()-1).delete(1))),V.log("convert",this.container.innerHTML,qe),this.container.innerHTML="",qe}},{key:"dangerouslyPasteHTML",value:function(we,me){var je=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.default.sources.API;if(typeof we=="string")this.quill.setContents(this.convert(we),me),this.quill.setSelection(0,y.default.sources.SILENT);else{var Ce=this.convert(me);this.quill.updateContents(new p.default().retain(we).concat(Ce),je),this.quill.setSelection(we+Ce.length(),y.default.sources.SILENT)}}},{key:"onPaste",value:function(we){var me=this;if(!(we.defaultPrevented||!this.quill.isEnabled())){var je=this.quill.getSelection(),Ce=new p.default().retain(je.index),Ae=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(y.default.sources.SILENT),setTimeout(function(){Ce=Ce.concat(me.convert()).delete(je.length),me.quill.updateContents(Ce,y.default.sources.USER),me.quill.setSelection(Ce.length()-je.length,y.default.sources.SILENT),me.quill.scrollingContainer.scrollTop=Ae,me.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var we=this,me=[],je=[];return this.matchers.forEach(function(Ce){var Ae=s(Ce,2),vt=Ae[0],Pt=Ae[1];switch(vt){case Node.TEXT_NODE:je.push(Pt);break;case Node.ELEMENT_NODE:me.push(Pt);break;default:[].forEach.call(we.container.querySelectorAll(vt),function(qe){qe[K]=qe[K]||[],qe[K].push(Pt)});break}}),[me,je]}}]),he}(x.default);z.DEFAULTS={matchers:[],matchVisual:!0};function W(re,he,ye){return(typeof he>"u"?"undefined":a(he))==="object"?Object.keys(he).reduce(function(we,me){return W(we,me,he[me])},re):re.reduce(function(we,me){return me.attributes&&me.attributes[he]?we.push(me):we.insert(me.insert,(0,d.default)({},F({},he,ye),me.attributes))},new p.default)}function Q(re){if(re.nodeType!==Node.ELEMENT_NODE)return{};var he="__ql-computed-style";return re[he]||(re[he]=window.getComputedStyle(re))}function ee(re,he){for(var ye="",we=re.ops.length-1;we>=0&&ye.length<he.length;--we){var me=re.ops[we];if(typeof me.insert!="string")break;ye=me.insert+ye}return ye.slice(-1*he.length)===he}function Y(re){if(re.childNodes.length===0)return!1;var he=Q(re);return["block","list-item"].indexOf(he.display)>-1}function U(re,he,ye){return re.nodeType===re.TEXT_NODE?ye.reduce(function(we,me){return me(re,we)},new p.default):re.nodeType===re.ELEMENT_NODE?[].reduce.call(re.childNodes||[],function(we,me){var je=U(me,he,ye);return me.nodeType===re.ELEMENT_NODE&&(je=he.reduce(function(Ce,Ae){return Ae(me,Ce)},je),je=(me[K]||[]).reduce(function(Ce,Ae){return Ae(me,Ce)},je)),we.concat(je)},new p.default):new p.default}function J(re,he,ye){return W(ye,re,!0)}function te(re,he){var ye=g.default.Attributor.Attribute.keys(re),we=g.default.Attributor.Class.keys(re),me=g.default.Attributor.Style.keys(re),je={};return ye.concat(we).concat(me).forEach(function(Ce){var Ae=g.default.query(Ce,g.default.Scope.ATTRIBUTE);Ae!=null&&(je[Ae.attrName]=Ae.value(re),je[Ae.attrName])||(Ae=q[Ce],Ae!=null&&(Ae.attrName===Ce||Ae.keyName===Ce)&&(je[Ae.attrName]=Ae.value(re)||void 0),Ae=I[Ce],Ae!=null&&(Ae.attrName===Ce||Ae.keyName===Ce)&&(Ae=I[Ce],je[Ae.attrName]=Ae.value(re)||void 0))}),Object.keys(je).length>0&&(he=W(he,je)),he}function X(re,he){var ye=g.default.query(re);if(ye==null)return he;if(ye.prototype instanceof g.default.Embed){var we={},me=ye.value(re);me!=null&&(we[ye.blotName]=me,he=new p.default().insert(we,ye.formats(re)))}else typeof ye.formats=="function"&&(he=W(he,ye.blotName,ye.formats(re)));return he}function ne(re,he){return ee(he,`
`)||he.insert(`
`),he}function ue(){return new p.default}function se(re,he){var ye=g.default.query(re);if(ye==null||ye.blotName!=="list-item"||!ee(he,`
`))return he;for(var we=-1,me=re.parentNode;!me.classList.contains("ql-clipboard");)(g.default.query(me)||{}).blotName==="list"&&(we+=1),me=me.parentNode;return we<=0?he:he.compose(new p.default().retain(he.length()-1).retain(1,{indent:we}))}function ce(re,he){return ee(he,`
`)||(Y(re)||he.length()>0&&re.nextSibling&&Y(re.nextSibling))&&he.insert(`
`),he}function de(re,he){if(Y(re)&&re.nextElementSibling!=null&&!ee(he,`

`)){var ye=re.offsetHeight+parseFloat(Q(re).marginTop)+parseFloat(Q(re).marginBottom);re.nextElementSibling.offsetTop>re.offsetTop+ye*1.5&&he.insert(`
`)}return he}function Oe(re,he){var ye={},we=re.style||{};return we.fontStyle&&Q(re).fontStyle==="italic"&&(ye.italic=!0),we.fontWeight&&(Q(re).fontWeight.startsWith("bold")||parseInt(Q(re).fontWeight)>=700)&&(ye.bold=!0),Object.keys(ye).length>0&&(he=W(he,ye)),parseFloat(we.textIndent||0)>0&&(he=new p.default().insert("	").concat(he)),he}function ge(re,he){var ye=re.data;if(re.parentNode.tagName==="O:P")return he.insert(ye.trim());if(ye.trim().length===0&&re.parentNode.classList.contains("ql-clipboard"))return he;if(!Q(re.parentNode).whiteSpace.startsWith("pre")){var we=function(je,Ce){return Ce=Ce.replace(/[^\u00a0]/g,""),Ce.length<1&&je?" ":Ce};ye=ye.replace(/\r\n/g," ").replace(/\n/g," "),ye=ye.replace(/\s\s+/g,we.bind(we,!0)),(re.previousSibling==null&&Y(re.parentNode)||re.previousSibling!=null&&Y(re.previousSibling))&&(ye=ye.replace(/^\s+/,we.bind(we,!1))),(re.nextSibling==null&&Y(re.parentNode)||re.nextSibling!=null&&Y(re.nextSibling))&&(ye=ye.replace(/\s+$/,we.bind(we,!1)))}return he.insert(ye)}r.default=z,r.matchAttributor=te,r.matchBlot=X,r.matchNewline=ce,r.matchSpacing=de,r.matchText=ge},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function b(y,N){for(var v=0;v<N.length;v++){var _=N[v];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(y,_.key,_)}}return function(y,N,v){return N&&b(y.prototype,N),v&&b(y,v),y}}(),s=function b(y,N,v){y===null&&(y=Function.prototype);var _=Object.getOwnPropertyDescriptor(y,N);if(_===void 0){var x=Object.getPrototypeOf(y);return x===null?void 0:b(x,N,v)}else{if("value"in _)return _.value;var w=_.get;return w===void 0?void 0:w.call(v)}},o=i(6),c=d(o);function d(b){return b&&b.__esModule?b:{default:b}}function f(b,y){if(!(b instanceof y))throw new TypeError("Cannot call a class as a function")}function p(b,y){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:b}function m(b,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);b.prototype=Object.create(y&&y.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(b,y):b.__proto__=y)}var g=function(b){m(y,b);function y(){return f(this,y),p(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return a(y,[{key:"optimize",value:function(v){s(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"optimize",this).call(this,v),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return s(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),y}(c.default);g.blotName="bold",g.tagName=["STRONG","B"],r.default=g},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.addControls=r.default=void 0;var a=function(){function C(O,F){var M=[],D=!0,$=!1,V=void 0;try{for(var K=O[Symbol.iterator](),H;!(D=(H=K.next()).done)&&(M.push(H.value),!(F&&M.length===F));D=!0);}catch(q){$=!0,V=q}finally{try{!D&&K.return&&K.return()}finally{if($)throw V}}return M}return function(O,F){if(Array.isArray(O))return O;if(Symbol.iterator in Object(O))return C(O,F);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function C(O,F){for(var M=0;M<F.length;M++){var D=F[M];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(O,D.key,D)}}return function(O,F,M){return F&&C(O.prototype,F),M&&C(O,M),O}}(),o=i(2),c=v(o),d=i(0),f=v(d),p=i(5),m=v(p),g=i(10),b=v(g),y=i(9),N=v(y);function v(C){return C&&C.__esModule?C:{default:C}}function _(C,O,F){return O in C?Object.defineProperty(C,O,{value:F,enumerable:!0,configurable:!0,writable:!0}):C[O]=F,C}function x(C,O){if(!(C instanceof O))throw new TypeError("Cannot call a class as a function")}function w(C,O){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:C}function E(C,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);C.prototype=Object.create(O&&O.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(C,O):C.__proto__=O)}var P=(0,b.default)("quill:toolbar"),A=function(C){E(O,C);function O(F,M){x(this,O);var D=w(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,F,M));if(Array.isArray(D.options.container)){var $=document.createElement("div");L($,D.options.container),F.container.parentNode.insertBefore($,F.container),D.container=$}else typeof D.options.container=="string"?D.container=document.querySelector(D.options.container):D.container=D.options.container;if(!(D.container instanceof HTMLElement)){var V;return V=P.error("Container required for toolbar",D.options),w(D,V)}return D.container.classList.add("ql-toolbar"),D.controls=[],D.handlers={},Object.keys(D.options.handlers).forEach(function(K){D.addHandler(K,D.options.handlers[K])}),[].forEach.call(D.container.querySelectorAll("button, select"),function(K){D.attach(K)}),D.quill.on(m.default.events.EDITOR_CHANGE,function(K,H){K===m.default.events.SELECTION_CHANGE&&D.update(H)}),D.quill.on(m.default.events.SCROLL_OPTIMIZE,function(){var K=D.quill.selection.getRange(),H=a(K,1),q=H[0];D.update(q)}),D}return s(O,[{key:"addHandler",value:function(M,D){this.handlers[M]=D}},{key:"attach",value:function(M){var D=this,$=[].find.call(M.classList,function(K){return K.indexOf("ql-")===0});if($){if($=$.slice(3),M.tagName==="BUTTON"&&M.setAttribute("type","button"),this.handlers[$]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[$]==null){P.warn("ignoring attaching to disabled format",$,M);return}if(f.default.query($)==null){P.warn("ignoring attaching to nonexistent format",$,M);return}}var V=M.tagName==="SELECT"?"change":"click";M.addEventListener(V,function(K){var H=void 0;if(M.tagName==="SELECT"){if(M.selectedIndex<0)return;var q=M.options[M.selectedIndex];q.hasAttribute("selected")?H=!1:H=q.value||!1}else M.classList.contains("ql-active")?H=!1:H=M.value||!M.hasAttribute("value"),K.preventDefault();D.quill.focus();var I=D.quill.selection.getRange(),z=a(I,1),W=z[0];if(D.handlers[$]!=null)D.handlers[$].call(D,H);else if(f.default.query($).prototype instanceof f.default.Embed){if(H=prompt("Enter "+$),!H)return;D.quill.updateContents(new c.default().retain(W.index).delete(W.length).insert(_({},$,H)),m.default.sources.USER)}else D.quill.format($,H,m.default.sources.USER);D.update(W)}),this.controls.push([$,M])}}},{key:"update",value:function(M){var D=M==null?{}:this.quill.getFormat(M);this.controls.forEach(function($){var V=a($,2),K=V[0],H=V[1];if(H.tagName==="SELECT"){var q=void 0;if(M==null)q=null;else if(D[K]==null)q=H.querySelector("option[selected]");else if(!Array.isArray(D[K])){var I=D[K];typeof I=="string"&&(I=I.replace(/\"/g,'\\"')),q=H.querySelector('option[value="'+I+'"]')}q==null?(H.value="",H.selectedIndex=-1):q.selected=!0}else if(M==null)H.classList.remove("ql-active");else if(H.hasAttribute("value")){var z=D[K]===H.getAttribute("value")||D[K]!=null&&D[K].toString()===H.getAttribute("value")||D[K]==null&&!H.getAttribute("value");H.classList.toggle("ql-active",z)}else H.classList.toggle("ql-active",D[K]!=null)})}}]),O}(N.default);A.DEFAULTS={};function T(C,O,F){var M=document.createElement("button");M.setAttribute("type","button"),M.classList.add("ql-"+O),F!=null&&(M.value=F),C.appendChild(M)}function L(C,O){Array.isArray(O[0])||(O=[O]),O.forEach(function(F){var M=document.createElement("span");M.classList.add("ql-formats"),F.forEach(function(D){if(typeof D=="string")T(M,D);else{var $=Object.keys(D)[0],V=D[$];Array.isArray(V)?k(M,$,V):T(M,$,V)}}),C.appendChild(M)})}function k(C,O,F){var M=document.createElement("select");M.classList.add("ql-"+O),F.forEach(function(D){var $=document.createElement("option");D!==!1?$.setAttribute("value",D):$.setAttribute("selected","selected"),M.appendChild($)}),C.appendChild(M)}A.DEFAULTS={container:null,handlers:{clean:function(){var O=this,F=this.quill.getSelection();if(F!=null)if(F.length==0){var M=this.quill.getFormat();Object.keys(M).forEach(function(D){f.default.query(D,f.default.Scope.INLINE)!=null&&O.quill.format(D,!1)})}else this.quill.removeFormat(F,m.default.sources.USER)},direction:function(O){var F=this.quill.getFormat().align;O==="rtl"&&F==null?this.quill.format("align","right",m.default.sources.USER):!O&&F==="right"&&this.quill.format("align",!1,m.default.sources.USER),this.quill.format("direction",O,m.default.sources.USER)},indent:function(O){var F=this.quill.getSelection(),M=this.quill.getFormat(F),D=parseInt(M.indent||0);if(O==="+1"||O==="-1"){var $=O==="+1"?1:-1;M.direction==="rtl"&&($*=-1),this.quill.format("indent",D+$,m.default.sources.USER)}},link:function(O){O===!0&&(O=prompt("Enter link URL:")),this.quill.format("link",O,m.default.sources.USER)},list:function(O){var F=this.quill.getSelection(),M=this.quill.getFormat(F);O==="check"?M.list==="checked"||M.list==="unchecked"?this.quill.format("list",!1,m.default.sources.USER):this.quill.format("list","unchecked",m.default.sources.USER):this.quill.format("list",O,m.default.sources.USER)}}},r.default=A,r.addControls=L},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function b(y,N){for(var v=0;v<N.length;v++){var _=N[v];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(y,_.key,_)}}return function(y,N,v){return N&&b(y.prototype,N),v&&b(y,v),y}}(),s=function b(y,N,v){y===null&&(y=Function.prototype);var _=Object.getOwnPropertyDescriptor(y,N);if(_===void 0){var x=Object.getPrototypeOf(y);return x===null?void 0:b(x,N,v)}else{if("value"in _)return _.value;var w=_.get;return w===void 0?void 0:w.call(v)}},o=i(28),c=d(o);function d(b){return b&&b.__esModule?b:{default:b}}function f(b,y){if(!(b instanceof y))throw new TypeError("Cannot call a class as a function")}function p(b,y){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:b}function m(b,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);b.prototype=Object.create(y&&y.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(b,y):b.__proto__=y)}var g=function(b){m(y,b);function y(N,v){f(this,y);var _=p(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,N));return _.label.innerHTML=v,_.container.classList.add("ql-color-picker"),[].slice.call(_.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(x){x.classList.add("ql-primary")}),_}return a(y,[{key:"buildItem",value:function(v){var _=s(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"buildItem",this).call(this,v);return _.style.backgroundColor=v.getAttribute("value")||"",_}},{key:"selectItem",value:function(v,_){s(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"selectItem",this).call(this,v,_);var x=this.label.querySelector(".ql-color-label"),w=v&&v.getAttribute("data-value")||"";x&&(x.tagName==="line"?x.style.stroke=w:x.style.fill=w)}}]),y}(c.default);r.default=g},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function b(y,N){for(var v=0;v<N.length;v++){var _=N[v];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(y,_.key,_)}}return function(y,N,v){return N&&b(y.prototype,N),v&&b(y,v),y}}(),s=function b(y,N,v){y===null&&(y=Function.prototype);var _=Object.getOwnPropertyDescriptor(y,N);if(_===void 0){var x=Object.getPrototypeOf(y);return x===null?void 0:b(x,N,v)}else{if("value"in _)return _.value;var w=_.get;return w===void 0?void 0:w.call(v)}},o=i(28),c=d(o);function d(b){return b&&b.__esModule?b:{default:b}}function f(b,y){if(!(b instanceof y))throw new TypeError("Cannot call a class as a function")}function p(b,y){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:b}function m(b,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);b.prototype=Object.create(y&&y.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(b,y):b.__proto__=y)}var g=function(b){m(y,b);function y(N,v){f(this,y);var _=p(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,N));return _.container.classList.add("ql-icon-picker"),[].forEach.call(_.container.querySelectorAll(".ql-picker-item"),function(x){x.innerHTML=v[x.getAttribute("data-value")||""]}),_.defaultItem=_.container.querySelector(".ql-selected"),_.selectItem(_.defaultItem),_}return a(y,[{key:"selectItem",value:function(v,_){s(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"selectItem",this).call(this,v,_),v=v||this.defaultItem,this.label.innerHTML=v.innerHTML}}]),y}(c.default);r.default=g},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function c(d,f){for(var p=0;p<f.length;p++){var m=f[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(d,m.key,m)}}return function(d,f,p){return f&&c(d.prototype,f),p&&c(d,p),d}}();function s(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}var o=function(){function c(d,f){var p=this;s(this,c),this.quill=d,this.boundsContainer=f||document.body,this.root=d.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){p.root.style.marginTop=-1*p.quill.root.scrollTop+"px"}),this.hide()}return a(c,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(f){var p=f.left+f.width/2-this.root.offsetWidth/2,m=f.bottom+this.quill.root.scrollTop;this.root.style.left=p+"px",this.root.style.top=m+"px",this.root.classList.remove("ql-flip");var g=this.boundsContainer.getBoundingClientRect(),b=this.root.getBoundingClientRect(),y=0;if(b.right>g.right&&(y=g.right-b.right,this.root.style.left=p+y+"px"),b.left<g.left&&(y=g.left-b.left,this.root.style.left=p+y+"px"),b.bottom>g.bottom){var N=b.bottom-b.top,v=f.bottom-f.top+N;this.root.style.top=m-v+"px",this.root.classList.add("ql-flip")}return y}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),c}();r.default=o},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function k(C,O){var F=[],M=!0,D=!1,$=void 0;try{for(var V=C[Symbol.iterator](),K;!(M=(K=V.next()).done)&&(F.push(K.value),!(O&&F.length===O));M=!0);}catch(H){D=!0,$=H}finally{try{!M&&V.return&&V.return()}finally{if(D)throw $}}return F}return function(C,O){if(Array.isArray(C))return C;if(Symbol.iterator in Object(C))return k(C,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function k(C,O,F){C===null&&(C=Function.prototype);var M=Object.getOwnPropertyDescriptor(C,O);if(M===void 0){var D=Object.getPrototypeOf(C);return D===null?void 0:k(D,O,F)}else{if("value"in M)return M.value;var $=M.get;return $===void 0?void 0:$.call(F)}},o=function(){function k(C,O){for(var F=0;F<O.length;F++){var M=O[F];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(C,M.key,M)}}return function(C,O,F){return O&&k(C.prototype,O),F&&k(C,F),C}}(),c=i(3),d=x(c),f=i(8),p=x(f),m=i(43),g=x(m),b=i(27),y=x(b),N=i(15),v=i(41),_=x(v);function x(k){return k&&k.__esModule?k:{default:k}}function w(k,C){if(!(k instanceof C))throw new TypeError("Cannot call a class as a function")}function E(k,C){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:k}function P(k,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);k.prototype=Object.create(C&&C.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(k,C):k.__proto__=C)}var A=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],T=function(k){P(C,k);function C(O,F){w(this,C),F.modules.toolbar!=null&&F.modules.toolbar.container==null&&(F.modules.toolbar.container=A);var M=E(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,O,F));return M.quill.container.classList.add("ql-snow"),M}return o(C,[{key:"extendToolbar",value:function(F){F.container.classList.add("ql-snow"),this.buildButtons([].slice.call(F.container.querySelectorAll("button")),_.default),this.buildPickers([].slice.call(F.container.querySelectorAll("select")),_.default),this.tooltip=new L(this.quill,this.options.bounds),F.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(M,D){F.handlers.link.call(F,!D.format.link)})}}]),C}(g.default);T.DEFAULTS=(0,d.default)(!0,{},g.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(C){if(C){var O=this.quill.getSelection();if(O==null||O.length==0)return;var F=this.quill.getText(O);/^\S+@\S+\.\S+$/.test(F)&&F.indexOf("mailto:")!==0&&(F="mailto:"+F);var M=this.quill.theme.tooltip;M.edit("link",F)}else this.quill.format("link",!1)}}}}});var L=function(k){P(C,k);function C(O,F){w(this,C);var M=E(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,O,F));return M.preview=M.root.querySelector("a.ql-preview"),M}return o(C,[{key:"listen",value:function(){var F=this;s(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(M){F.root.classList.contains("ql-editing")?F.save():F.edit("link",F.preview.textContent),M.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(M){if(F.linkRange!=null){var D=F.linkRange;F.restoreFocus(),F.quill.formatText(D,"link",!1,p.default.sources.USER),delete F.linkRange}M.preventDefault(),F.hide()}),this.quill.on(p.default.events.SELECTION_CHANGE,function(M,D,$){if(M!=null){if(M.length===0&&$===p.default.sources.USER){var V=F.quill.scroll.descendant(y.default,M.index),K=a(V,2),H=K[0],q=K[1];if(H!=null){F.linkRange=new N.Range(M.index-q,H.length());var I=y.default.formats(H.domNode);F.preview.textContent=I,F.preview.setAttribute("href",I),F.show(),F.position(F.quill.getBounds(F.linkRange));return}}else delete F.linkRange;F.hide()}})}},{key:"show",value:function(){s(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),C}(m.BaseTooltip);L.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),r.default=T},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(29),s=me(a),o=i(36),c=i(38),d=i(64),f=i(65),p=me(f),m=i(66),g=me(m),b=i(67),y=me(b),N=i(37),v=i(26),_=i(39),x=i(40),w=i(56),E=me(w),P=i(68),A=me(P),T=i(27),L=me(T),k=i(69),C=me(k),O=i(70),F=me(O),M=i(71),D=me(M),$=i(72),V=me($),K=i(73),H=me(K),q=i(13),I=me(q),z=i(74),W=me(z),Q=i(75),ee=me(Q),Y=i(57),U=me(Y),J=i(41),te=me(J),X=i(28),ne=me(X),ue=i(59),se=me(ue),ce=i(60),de=me(ce),Oe=i(61),ge=me(Oe),re=i(108),he=me(re),ye=i(62),we=me(ye);function me(je){return je&&je.__esModule?je:{default:je}}s.default.register({"attributors/attribute/direction":c.DirectionAttribute,"attributors/class/align":o.AlignClass,"attributors/class/background":N.BackgroundClass,"attributors/class/color":v.ColorClass,"attributors/class/direction":c.DirectionClass,"attributors/class/font":_.FontClass,"attributors/class/size":x.SizeClass,"attributors/style/align":o.AlignStyle,"attributors/style/background":N.BackgroundStyle,"attributors/style/color":v.ColorStyle,"attributors/style/direction":c.DirectionStyle,"attributors/style/font":_.FontStyle,"attributors/style/size":x.SizeStyle},!0),s.default.register({"formats/align":o.AlignClass,"formats/direction":c.DirectionClass,"formats/indent":d.IndentClass,"formats/background":N.BackgroundStyle,"formats/color":v.ColorStyle,"formats/font":_.FontClass,"formats/size":x.SizeClass,"formats/blockquote":p.default,"formats/code-block":I.default,"formats/header":g.default,"formats/list":y.default,"formats/bold":E.default,"formats/code":q.Code,"formats/italic":A.default,"formats/link":L.default,"formats/script":C.default,"formats/strike":F.default,"formats/underline":D.default,"formats/image":V.default,"formats/video":H.default,"formats/list/item":b.ListItem,"modules/formula":W.default,"modules/syntax":ee.default,"modules/toolbar":U.default,"themes/bubble":he.default,"themes/snow":we.default,"ui/icons":te.default,"ui/picker":ne.default,"ui/icon-picker":de.default,"ui/color-picker":se.default,"ui/tooltip":ge.default},!0),r.default=s.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.IndentClass=void 0;var a=function(){function y(N,v){for(var _=0;_<v.length;_++){var x=v[_];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(N,x.key,x)}}return function(N,v,_){return v&&y(N.prototype,v),_&&y(N,_),N}}(),s=function y(N,v,_){N===null&&(N=Function.prototype);var x=Object.getOwnPropertyDescriptor(N,v);if(x===void 0){var w=Object.getPrototypeOf(N);return w===null?void 0:y(w,v,_)}else{if("value"in x)return x.value;var E=x.get;return E===void 0?void 0:E.call(_)}},o=i(0),c=d(o);function d(y){return y&&y.__esModule?y:{default:y}}function f(y,N){if(!(y instanceof N))throw new TypeError("Cannot call a class as a function")}function p(y,N){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:y}function m(y,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);y.prototype=Object.create(N&&N.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(y,N):y.__proto__=N)}var g=function(y){m(N,y);function N(){return f(this,N),p(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return a(N,[{key:"add",value:function(_,x){if(x==="+1"||x==="-1"){var w=this.value(_)||0;x=x==="+1"?w+1:w-1}return x===0?(this.remove(_),!0):s(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"add",this).call(this,_,x)}},{key:"canAdd",value:function(_,x){return s(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"canAdd",this).call(this,_,x)||s(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"canAdd",this).call(this,_,parseInt(x))}},{key:"value",value:function(_){return parseInt(s(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"value",this).call(this,_))||void 0}}]),N}(c.default.Attributor.Class),b=new g("indent","ql-indent",{scope:c.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});r.IndentClass=b},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(4),s=o(a);function o(m){return m&&m.__esModule?m:{default:m}}function c(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function d(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function f(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var p=function(m){f(g,m);function g(){return c(this,g),d(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g}(s.default);p.blotName="blockquote",p.tagName="blockquote",r.default=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function g(b,y){for(var N=0;N<y.length;N++){var v=y[N];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(b,v.key,v)}}return function(b,y,N){return y&&g(b.prototype,y),N&&g(b,N),b}}(),s=i(4),o=c(s);function c(g){return g&&g.__esModule?g:{default:g}}function d(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function f(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function p(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var m=function(g){p(b,g);function b(){return d(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return a(b,null,[{key:"formats",value:function(N){return this.tagName.indexOf(N.tagName)+1}}]),b}(o.default);m.blotName="header",m.tagName=["H1","H2","H3","H4","H5","H6"],r.default=m},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ListItem=void 0;var a=function(){function w(E,P){for(var A=0;A<P.length;A++){var T=P[A];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(E,T.key,T)}}return function(E,P,A){return P&&w(E.prototype,P),A&&w(E,A),E}}(),s=function w(E,P,A){E===null&&(E=Function.prototype);var T=Object.getOwnPropertyDescriptor(E,P);if(T===void 0){var L=Object.getPrototypeOf(E);return L===null?void 0:w(L,P,A)}else{if("value"in T)return T.value;var k=T.get;return k===void 0?void 0:k.call(A)}},o=i(0),c=g(o),d=i(4),f=g(d),p=i(25),m=g(p);function g(w){return w&&w.__esModule?w:{default:w}}function b(w,E,P){return E in w?Object.defineProperty(w,E,{value:P,enumerable:!0,configurable:!0,writable:!0}):w[E]=P,w}function y(w,E){if(!(w instanceof E))throw new TypeError("Cannot call a class as a function")}function N(w,E){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:w}function v(w,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);w.prototype=Object.create(E&&E.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(w,E):w.__proto__=E)}var _=function(w){v(E,w);function E(){return y(this,E),N(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return a(E,[{key:"format",value:function(A,T){A===x.blotName&&!T?this.replaceWith(c.default.create(this.statics.scope)):s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"format",this).call(this,A,T)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(A,T){return this.parent.isolate(this.offset(this.parent),this.length()),A===this.parent.statics.blotName?(this.parent.replaceWith(A,T),this):(this.parent.unwrap(),s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"replaceWith",this).call(this,A,T))}}],[{key:"formats",value:function(A){return A.tagName===this.tagName?void 0:s(E.__proto__||Object.getPrototypeOf(E),"formats",this).call(this,A)}}]),E}(f.default);_.blotName="list-item",_.tagName="LI";var x=function(w){v(E,w),a(E,null,[{key:"create",value:function(A){var T=A==="ordered"?"OL":"UL",L=s(E.__proto__||Object.getPrototypeOf(E),"create",this).call(this,T);return(A==="checked"||A==="unchecked")&&L.setAttribute("data-checked",A==="checked"),L}},{key:"formats",value:function(A){if(A.tagName==="OL")return"ordered";if(A.tagName==="UL")return A.hasAttribute("data-checked")?A.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function E(P){y(this,E);var A=N(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,P)),T=function(k){if(k.target.parentNode===P){var C=A.statics.formats(P),O=c.default.find(k.target);C==="checked"?O.format("list","unchecked"):C==="unchecked"&&O.format("list","checked")}};return P.addEventListener("touchstart",T),P.addEventListener("mousedown",T),A}return a(E,[{key:"format",value:function(A,T){this.children.length>0&&this.children.tail.format(A,T)}},{key:"formats",value:function(){return b({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(A,T){if(A instanceof _)s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertBefore",this).call(this,A,T);else{var L=T==null?this.length():T.offset(this),k=this.split(L);k.parent.insertBefore(A,k)}}},{key:"optimize",value:function(A){s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,A);var T=this.next;T!=null&&T.prev===this&&T.statics.blotName===this.statics.blotName&&T.domNode.tagName===this.domNode.tagName&&T.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(T.moveChildren(this),T.remove())}},{key:"replace",value:function(A){if(A.statics.blotName!==this.statics.blotName){var T=c.default.create(this.statics.defaultChild);A.moveChildren(T),this.appendChild(T)}s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"replace",this).call(this,A)}}]),E}(m.default);x.blotName="list",x.scope=c.default.Scope.BLOCK_BLOT,x.tagName=["OL","UL"],x.defaultChild="list-item",x.allowedChildren=[_],r.ListItem=_,r.default=x},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(56),s=o(a);function o(m){return m&&m.__esModule?m:{default:m}}function c(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function d(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function f(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var p=function(m){f(g,m);function g(){return c(this,g),d(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g}(s.default);p.blotName="italic",p.tagName=["EM","I"],r.default=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function b(y,N){for(var v=0;v<N.length;v++){var _=N[v];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(y,_.key,_)}}return function(y,N,v){return N&&b(y.prototype,N),v&&b(y,v),y}}(),s=function b(y,N,v){y===null&&(y=Function.prototype);var _=Object.getOwnPropertyDescriptor(y,N);if(_===void 0){var x=Object.getPrototypeOf(y);return x===null?void 0:b(x,N,v)}else{if("value"in _)return _.value;var w=_.get;return w===void 0?void 0:w.call(v)}},o=i(6),c=d(o);function d(b){return b&&b.__esModule?b:{default:b}}function f(b,y){if(!(b instanceof y))throw new TypeError("Cannot call a class as a function")}function p(b,y){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:b}function m(b,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);b.prototype=Object.create(y&&y.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(b,y):b.__proto__=y)}var g=function(b){m(y,b);function y(){return f(this,y),p(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return a(y,null,[{key:"create",value:function(v){return v==="super"?document.createElement("sup"):v==="sub"?document.createElement("sub"):s(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,v)}},{key:"formats",value:function(v){if(v.tagName==="SUB")return"sub";if(v.tagName==="SUP")return"super"}}]),y}(c.default);g.blotName="script",g.tagName=["SUB","SUP"],r.default=g},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(6),s=o(a);function o(m){return m&&m.__esModule?m:{default:m}}function c(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function d(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function f(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var p=function(m){f(g,m);function g(){return c(this,g),d(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g}(s.default);p.blotName="strike",p.tagName="S",r.default=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(6),s=o(a);function o(m){return m&&m.__esModule?m:{default:m}}function c(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function d(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function f(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var p=function(m){f(g,m);function g(){return c(this,g),d(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g}(s.default);p.blotName="underline",p.tagName="U",r.default=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function N(v,_){for(var x=0;x<_.length;x++){var w=_[x];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,_,x){return _&&N(v.prototype,_),x&&N(v,x),v}}(),s=function N(v,_,x){v===null&&(v=Function.prototype);var w=Object.getOwnPropertyDescriptor(v,_);if(w===void 0){var E=Object.getPrototypeOf(v);return E===null?void 0:N(E,_,x)}else{if("value"in w)return w.value;var P=w.get;return P===void 0?void 0:P.call(x)}},o=i(0),c=f(o),d=i(27);function f(N){return N&&N.__esModule?N:{default:N}}function p(N,v){if(!(N instanceof v))throw new TypeError("Cannot call a class as a function")}function m(N,v){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:N}function g(N,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);N.prototype=Object.create(v&&v.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(N,v):N.__proto__=v)}var b=["alt","height","width"],y=function(N){g(v,N);function v(){return p(this,v),m(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return a(v,[{key:"format",value:function(x,w){b.indexOf(x)>-1?w?this.domNode.setAttribute(x,w):this.domNode.removeAttribute(x):s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,x,w)}}],[{key:"create",value:function(x){var w=s(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,x);return typeof x=="string"&&w.setAttribute("src",this.sanitize(x)),w}},{key:"formats",value:function(x){return b.reduce(function(w,E){return x.hasAttribute(E)&&(w[E]=x.getAttribute(E)),w},{})}},{key:"match",value:function(x){return/\.(jpe?g|gif|png)$/.test(x)||/^data:image\/.+;base64/.test(x)}},{key:"sanitize",value:function(x){return(0,d.sanitize)(x,["http","https","data"])?x:"//:0"}},{key:"value",value:function(x){return x.getAttribute("src")}}]),v}(c.default.Embed);y.blotName="image",y.tagName="IMG",r.default=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function N(v,_){for(var x=0;x<_.length;x++){var w=_[x];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,_,x){return _&&N(v.prototype,_),x&&N(v,x),v}}(),s=function N(v,_,x){v===null&&(v=Function.prototype);var w=Object.getOwnPropertyDescriptor(v,_);if(w===void 0){var E=Object.getPrototypeOf(v);return E===null?void 0:N(E,_,x)}else{if("value"in w)return w.value;var P=w.get;return P===void 0?void 0:P.call(x)}},o=i(4),c=i(27),d=f(c);function f(N){return N&&N.__esModule?N:{default:N}}function p(N,v){if(!(N instanceof v))throw new TypeError("Cannot call a class as a function")}function m(N,v){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:N}function g(N,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);N.prototype=Object.create(v&&v.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(N,v):N.__proto__=v)}var b=["height","width"],y=function(N){g(v,N);function v(){return p(this,v),m(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return a(v,[{key:"format",value:function(x,w){b.indexOf(x)>-1?w?this.domNode.setAttribute(x,w):this.domNode.removeAttribute(x):s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,x,w)}}],[{key:"create",value:function(x){var w=s(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,x);return w.setAttribute("frameborder","0"),w.setAttribute("allowfullscreen",!0),w.setAttribute("src",this.sanitize(x)),w}},{key:"formats",value:function(x){return b.reduce(function(w,E){return x.hasAttribute(E)&&(w[E]=x.getAttribute(E)),w},{})}},{key:"sanitize",value:function(x){return d.default.sanitize(x)}},{key:"value",value:function(x){return x.getAttribute("src")}}]),v}(o.BlockEmbed);y.blotName="video",y.className="ql-video",y.tagName="IFRAME",r.default=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.FormulaBlot=void 0;var a=function(){function x(w,E){for(var P=0;P<E.length;P++){var A=E[P];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(w,A.key,A)}}return function(w,E,P){return E&&x(w.prototype,E),P&&x(w,P),w}}(),s=function x(w,E,P){w===null&&(w=Function.prototype);var A=Object.getOwnPropertyDescriptor(w,E);if(A===void 0){var T=Object.getPrototypeOf(w);return T===null?void 0:x(T,E,P)}else{if("value"in A)return A.value;var L=A.get;return L===void 0?void 0:L.call(P)}},o=i(35),c=g(o),d=i(5),f=g(d),p=i(9),m=g(p);function g(x){return x&&x.__esModule?x:{default:x}}function b(x,w){if(!(x instanceof w))throw new TypeError("Cannot call a class as a function")}function y(x,w){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:x}function N(x,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);x.prototype=Object.create(w&&w.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(x,w):x.__proto__=w)}var v=function(x){N(w,x);function w(){return b(this,w),y(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return a(w,null,[{key:"create",value:function(P){var A=s(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,P);return typeof P=="string"&&(window.katex.render(P,A,{throwOnError:!1,errorColor:"#f00"}),A.setAttribute("data-value",P)),A}},{key:"value",value:function(P){return P.getAttribute("data-value")}}]),w}(c.default);v.blotName="formula",v.className="ql-formula",v.tagName="SPAN";var _=function(x){N(w,x),a(w,null,[{key:"register",value:function(){f.default.register(v,!0)}}]);function w(){b(this,w);var E=y(this,(w.__proto__||Object.getPrototypeOf(w)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return E}return w}(m.default);r.FormulaBlot=v,r.default=_},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CodeToken=r.CodeBlock=void 0;var a=function(){function P(A,T){for(var L=0;L<T.length;L++){var k=T[L];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(A,k.key,k)}}return function(A,T,L){return T&&P(A.prototype,T),L&&P(A,L),A}}(),s=function P(A,T,L){A===null&&(A=Function.prototype);var k=Object.getOwnPropertyDescriptor(A,T);if(k===void 0){var C=Object.getPrototypeOf(A);return C===null?void 0:P(C,T,L)}else{if("value"in k)return k.value;var O=k.get;return O===void 0?void 0:O.call(L)}},o=i(0),c=y(o),d=i(5),f=y(d),p=i(9),m=y(p),g=i(13),b=y(g);function y(P){return P&&P.__esModule?P:{default:P}}function N(P,A){if(!(P instanceof A))throw new TypeError("Cannot call a class as a function")}function v(P,A){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:P}function _(P,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);P.prototype=Object.create(A&&A.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(P,A):P.__proto__=A)}var x=function(P){_(A,P);function A(){return N(this,A),v(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return a(A,[{key:"replaceWith",value:function(L){this.domNode.textContent=this.domNode.textContent,this.attach(),s(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"replaceWith",this).call(this,L)}},{key:"highlight",value:function(L){var k=this.domNode.textContent;this.cachedText!==k&&((k.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=L(k),this.domNode.normalize(),this.attach()),this.cachedText=k)}}]),A}(b.default);x.className="ql-syntax";var w=new c.default.Attributor.Class("token","hljs",{scope:c.default.Scope.INLINE}),E=function(P){_(A,P),a(A,null,[{key:"register",value:function(){f.default.register(w,!0),f.default.register(x,!0)}}]);function A(T,L){N(this,A);var k=v(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,T,L));if(typeof k.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var C=null;return k.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(C),C=setTimeout(function(){k.highlight(),C=null},k.options.interval)}),k.highlight(),k}return a(A,[{key:"highlight",value:function(){var L=this;if(!this.quill.selection.composing){this.quill.update(f.default.sources.USER);var k=this.quill.getSelection();this.quill.scroll.descendants(x).forEach(function(C){C.highlight(L.options.highlight)}),this.quill.update(f.default.sources.SILENT),k!=null&&this.quill.setSelection(k,f.default.sources.SILENT)}}}]),A}(m.default);E.DEFAULTS={highlight:function(){return window.hljs==null?null:function(P){var A=window.hljs.highlightAuto(P);return A.value}}(),interval:1e3},r.CodeBlock=x,r.CodeToken=w,r.default=E},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BubbleTooltip=void 0;var a=function A(T,L,k){T===null&&(T=Function.prototype);var C=Object.getOwnPropertyDescriptor(T,L);if(C===void 0){var O=Object.getPrototypeOf(T);return O===null?void 0:A(O,L,k)}else{if("value"in C)return C.value;var F=C.get;return F===void 0?void 0:F.call(k)}},s=function(){function A(T,L){for(var k=0;k<L.length;k++){var C=L[k];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(T,C.key,C)}}return function(T,L,k){return L&&A(T.prototype,L),k&&A(T,k),T}}(),o=i(3),c=N(o),d=i(8),f=N(d),p=i(43),m=N(p),g=i(15),b=i(41),y=N(b);function N(A){return A&&A.__esModule?A:{default:A}}function v(A,T){if(!(A instanceof T))throw new TypeError("Cannot call a class as a function")}function _(A,T){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:A}function x(A,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);A.prototype=Object.create(T&&T.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(A,T):A.__proto__=T)}var w=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],E=function(A){x(T,A);function T(L,k){v(this,T),k.modules.toolbar!=null&&k.modules.toolbar.container==null&&(k.modules.toolbar.container=w);var C=_(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,L,k));return C.quill.container.classList.add("ql-bubble"),C}return s(T,[{key:"extendToolbar",value:function(k){this.tooltip=new P(this.quill,this.options.bounds),this.tooltip.root.appendChild(k.container),this.buildButtons([].slice.call(k.container.querySelectorAll("button")),y.default),this.buildPickers([].slice.call(k.container.querySelectorAll("select")),y.default)}}]),T}(m.default);E.DEFAULTS=(0,c.default)(!0,{},m.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(T){T?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var P=function(A){x(T,A);function T(L,k){v(this,T);var C=_(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,L,k));return C.quill.on(f.default.events.EDITOR_CHANGE,function(O,F,M,D){if(O===f.default.events.SELECTION_CHANGE)if(F!=null&&F.length>0&&D===f.default.sources.USER){C.show(),C.root.style.left="0px",C.root.style.width="",C.root.style.width=C.root.offsetWidth+"px";var $=C.quill.getLines(F.index,F.length);if($.length===1)C.position(C.quill.getBounds(F));else{var V=$[$.length-1],K=C.quill.getIndex(V),H=Math.min(V.length()-1,F.index+F.length-K),q=C.quill.getBounds(new g.Range(K,H));C.position(q)}}else document.activeElement!==C.textbox&&C.quill.hasFocus()&&C.hide()}),C}return s(T,[{key:"listen",value:function(){var k=this;a(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){k.root.classList.remove("ql-editing")}),this.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!k.root.classList.contains("ql-hidden")){var C=k.quill.getSelection();C!=null&&k.position(k.quill.getBounds(C))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(k){var C=a(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"position",this).call(this,k),O=this.root.querySelector(".ql-tooltip-arrow");if(O.style.marginLeft="",C===0)return C;O.style.marginLeft=-1*C-O.offsetWidth/2+"px"}}]),T}(p.BaseTooltip);P.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),r.BubbleTooltip=P,r.default=E},function(n,r,i){n.exports=i(63)}]).default})})(pO);var jZ=pO.exports,CZ=En&&En.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bh=En&&En.__assign||function(){return Bh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Bh.apply(this,arguments)},TZ=En&&En.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var a=arguments[t],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r},Dp=En&&En.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},ti=Dp(G),OZ=Dp(Ba),Sc=Dp(kZ),WE=Dp(jZ),PZ=function(e){CZ(t,e);function t(n){var r=e.call(this,n)||this;r.dirtyProps=["modules","formats","bounds","theme","children"],r.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],r.state={generation:0},r.selection=null,r.onEditorChange=function(a,s,o,c){var d,f,p,m;a==="text-change"?(f=(d=r).onEditorChangeText)===null||f===void 0||f.call(d,r.editor.root.innerHTML,s,c,r.unprivilegedEditor):a==="selection-change"&&((m=(p=r).onEditorChangeSelection)===null||m===void 0||m.call(p,s,c,r.unprivilegedEditor))};var i=r.isControlled()?n.value:n.defaultValue;return r.value=i??"",r}return t.prototype.validateProps=function(n){var r;if(ti.default.Children.count(n.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(ti.default.Children.count(n.children)){var i=ti.default.Children.only(n.children);if(((r=i)===null||r===void 0?void 0:r.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&n.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},t.prototype.shouldComponentUpdate=function(n,r){var i=this,a;if(this.validateProps(n),!this.editor||this.state.generation!==r.generation)return!0;if("value"in n){var s=this.getEditorContents(),o=(a=n.value,a??"");this.isEqualValue(o,s)||this.setEditorContents(this.editor,o)}return n.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,n.readOnly),TZ(this.cleanProps,this.dirtyProps).some(function(c){return!Sc.default(n[c],i.props[c])})},t.prototype.shouldComponentRegenerate=function(n){var r=this;return this.dirtyProps.some(function(i){return!Sc.default(n[i],r.props[i])})},t.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},t.prototype.componentWillUnmount=function(){this.destroyEditor()},t.prototype.componentDidUpdate=function(n,r){var i=this;if(this.editor&&this.shouldComponentRegenerate(n)){var a=this.editor.getContents(),s=this.editor.getSelection();this.regenerationSnapshot={delta:a,selection:s},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==r.generation){var o=this.regenerationSnapshot,a=o.delta,c=o.selection;delete this.regenerationSnapshot,this.instantiateEditor();var d=this.editor;d.setContents(a),KE(function(){return i.setEditorSelection(d,c)})}},t.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},t.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},t.prototype.isControlled=function(){return"value"in this.props},t.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},t.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},t.prototype.createEditor=function(n,r){var i=new WE.default(n,r);return r.tabIndex!=null&&this.setEditorTabIndex(i,r.tabIndex),this.hookEditor(i),i},t.prototype.hookEditor=function(n){this.unprivilegedEditor=this.makeUnprivilegedEditor(n),n.on("editor-change",this.onEditorChange)},t.prototype.unhookEditor=function(n){n.off("editor-change",this.onEditorChange)},t.prototype.getEditorContents=function(){return this.value},t.prototype.getEditorSelection=function(){return this.selection},t.prototype.isDelta=function(n){return n&&n.ops},t.prototype.isEqualValue=function(n,r){return this.isDelta(n)&&this.isDelta(r)?Sc.default(n.ops,r.ops):Sc.default(n,r)},t.prototype.setEditorContents=function(n,r){var i=this;this.value=r;var a=this.getEditorSelection();typeof r=="string"?n.setContents(n.clipboard.convert(r)):n.setContents(r),KE(function(){return i.setEditorSelection(n,a)})},t.prototype.setEditorSelection=function(n,r){if(this.selection=r,r){var i=n.getLength();r.index=Math.max(0,Math.min(r.index,i-1)),r.length=Math.max(0,Math.min(r.length,i-1-r.index)),n.setSelection(r)}},t.prototype.setEditorTabIndex=function(n,r){var i,a;!((a=(i=n)===null||i===void 0?void 0:i.scroll)===null||a===void 0)&&a.domNode&&(n.scroll.domNode.tabIndex=r)},t.prototype.setEditorReadOnly=function(n,r){r?n.disable():n.enable()},t.prototype.makeUnprivilegedEditor=function(n){var r=n;return{getHTML:function(){return r.root.innerHTML},getLength:r.getLength.bind(r),getText:r.getText.bind(r),getContents:r.getContents.bind(r),getSelection:r.getSelection.bind(r),getBounds:r.getBounds.bind(r)}},t.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var n=OZ.default.findDOMNode(this.editingArea);if(!n)throw new Error("Cannot find element for editing area");if(n.nodeType===3)throw new Error("Editing area cannot be a text node");return n},t.prototype.renderEditingArea=function(){var n=this,r=this.props,i=r.children,a=r.preserveWhitespace,s=this.state.generation,o={key:s,ref:function(c){n.editingArea=c}};return ti.default.Children.count(i)?ti.default.cloneElement(ti.default.Children.only(i),o):a?ti.default.createElement("pre",Bh({},o)):ti.default.createElement("div",Bh({},o))},t.prototype.render=function(){var n;return ti.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(n=this.props.className,n??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},t.prototype.onEditorChangeText=function(n,r,i,a){var s,o;if(this.editor){var c=this.isDelta(this.value)?a.getContents():a.getHTML();c!==this.getEditorContents()&&(this.lastDeltaChangeSet=r,this.value=c,(o=(s=this.props).onChange)===null||o===void 0||o.call(s,n,r,i,a))}},t.prototype.onEditorChangeSelection=function(n,r,i){var a,s,o,c,d,f;if(this.editor){var p=this.getEditorSelection(),m=!p&&n,g=p&&!n;Sc.default(n,p)||(this.selection=n,(s=(a=this.props).onChangeSelection)===null||s===void 0||s.call(a,n,r,i),m?(c=(o=this.props).onFocus)===null||c===void 0||c.call(o,n,r,i):g&&((f=(d=this.props).onBlur)===null||f===void 0||f.call(d,p,r,i)))}},t.prototype.focus=function(){this.editor&&this.editor.focus()},t.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},t.displayName="React Quill",t.Quill=WE.default,t.defaultProps={theme:"snow",modules:{},readOnly:!1},t}(ti.default.Component);function KE(e){Promise.resolve().then(e)}var AZ=PZ;const RZ=dl(AZ);const IZ=({content:e,onUpdate:t})=>{const n=G.useMemo(()=>({toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["blockquote","code-block"],[{color:[]},{background:[]}],["clean"]]}),[]),r=i=>{t&&t(i)};return l.jsxs("div",{className:"zen-editor-container h-full flex flex-col",children:[l.jsx("style",{children:`
                /* Dark Mode Overrides for Quill */
                .ql-toolbar.ql-snow {
                    border: none;
                    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                    background: rgba(255, 255, 255, 0.02);
                }
                .ql-container.ql-snow {
                    border: none;
                    flex: 1;
                    display: flex;
                    flex-direction: column;
                }
                .ql-editor {
                    flex: 1;
                    font-family: 'Outfit', sans-serif;
                    font-size: 1.1rem;
                    color: #e2e8f0;
                    line-height: 1.8;
                    padding: 2rem;
                }
                .ql-editor.ql-blank::before {
                    color: rgba(255,255,255,0.2);
                    font-style: italic;
                }
                
                /* Toolbar Icons */
                .ql-snow .ql-stroke {
                    stroke: #94a3b8;
                }
                .ql-snow .ql-fill {
                    fill: #94a3b8;
                }
                .ql-snow .ql-picker {
                    color: #94a3b8;
                }

                /* --- Mention List Dark Mode Styles --- */
                .ql-mention-list-container {
                    background-color: #1e1e24 !important;
                    border: 1px solid rgba(255, 255, 255, 0.1) !important;
                    border-radius: 8px !important;
                    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5) !important;
                    width: 250px !important;
                    overflow: hidden !important;
                    z-index: 9999 !important;
                }

                .ql-mention-list-item {
                    padding: 8px 12px !important;
                    cursor: pointer !important;
                    transition: all 0.2s !important;
                    color: #e2e8f0 !important; /* Text color */
                }

                .ql-mention-list-item.selected {
                    background-color: rgba(99, 102, 241, 0.2) !important; /* Indigo accent */
                    color: #ffffff !important;
                }

                .ql-mention-list-item:hover {
                    background-color: rgba(255, 255, 255, 0.05) !important;
                }

                /* The inserted mention chip in the editor */
                .mention {
                    background-color: rgba(99, 102, 241, 0.2);
                    color: #a5b4fc;
                    padding: 2px 6px;
                    border-radius: 4px;
                    user-select: all;
                    cursor: pointer;
                    transition: all 0.2s;
                }
                .mention:hover {
                    background-color: rgba(99, 102, 241, 0.4);
                    color: white;
                }
            `}),l.jsx(RZ,{theme:"snow",value:e||"",onChange:r,modules:n,className:"h-full flex flex-col"})]})},MZ=({isOpen:e,onClose:t,onConfirm:n,title:r,message:i,confirmText:a="Confirm",cancelText:s="Cancel",isDestructive:o=!0})=>e?l.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm animate-in fade-in duration-300",onClick:t}),l.jsx("div",{className:"relative z-10 w-full max-w-md animate-in zoom-in-95 duration-300",children:l.jsxs(Ke,{className:"p-6 border-red-500/20 shadow-2xl shadow-black/50",children:[l.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[l.jsx("div",{className:`
                            size-12 rounded-xl flex items-center justify-center shrink-0
                            ${o?"bg-red-500/10 text-red-500":"bg-primary/10 text-primary"}
                        `,children:l.jsx("span",{className:"material-symbols-outlined text-2xl",children:o?"warning":"help"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-black text-white mb-2 leading-tight",children:r}),l.jsx("p",{className:"text-sm text-slate-400 leading-relaxed",children:i})]})]}),l.jsxs("div",{className:"flex items-center justify-end gap-3",children:[l.jsx(nt,{variant:"ghost",onClick:t,children:s}),l.jsx(nt,{variant:o?"danger":"primary",onClick:()=>{n(),t()},icon:o?"delete":"check",children:a})]})]})})]}):null,mO=({isOpen:e,onClose:t,onConfirm:n,title:r,message:i,initialValue:a="",placeholder:s="",confirmText:o="Confirmar",cancelText:c="Cancelar"})=>{const[d,f]=G.useState(a),p=G.useRef(null);if(G.useEffect(()=>{f(a)},[a,e]),G.useEffect(()=>{e&&p.current&&setTimeout(()=>p.current.focus(),50)},[e]),!e)return null;const m=g=>{g.preventDefault(),n(d),t()};return Ba.createPortal(l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl p-6 shadow-2xl w-full max-w-md space-y-4 animate-in zoom-in-95 duration-200 relative overflow-hidden",onClick:g=>g.stopPropagation(),children:[l.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-primary to-transparent opacity-50"}),l.jsx("h3",{className:"text-xl font-bold text-white",children:r}),i&&l.jsx("p",{className:"text-sm text-slate-400 leading-relaxed",children:i}),l.jsxs("form",{onSubmit:m,className:"space-y-4",children:[l.jsx("input",{ref:p,type:"text",value:d,onChange:g=>f(g.target.value),placeholder:s,className:"w-full bg-black/20 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:border-primary/50 focus:ring-1 focus:ring-primary/50 outline-none transition-all font-mono text-sm"}),l.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[l.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm text-slate-400 hover:text-white transition-colors",children:c}),l.jsx(nt,{type:"submit",variant:"primary",disabled:!d.trim(),children:o})]})]})]})}),document.body)},LZ=({notebooks:e,loading:t,onSelectNotebook:n,onCreateNotebook:r,onDeleteNotebook:i})=>{const[a,s]=G.useState(!1),[o,c]=G.useState(null),d=p=>{r(p)},f=()=>{o&&(i(o.id),c(null))};return l.jsxs("div",{className:"p-8 w-full h-full overflow-y-auto",children:[l.jsxs("div",{className:"max-w-7xl mx-auto",children:[l.jsxs("header",{className:"flex justify-between items-center mb-12",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-4xl font-serif text-slate-200 mb-2",children:"Your Notebooks"}),l.jsx("p",{className:"text-slate-500 font-mono text-sm",children:"Select a chronicle to begin writing"})]}),l.jsxs("button",{onClick:()=>s(!0),className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl transition-all shadow-lg shadow-indigo-500/20",children:[l.jsx("span",{className:"material-symbols-outlined",children:"add"}),l.jsx("span",{className:"font-bold tracking-wide text-sm",children:"NEW NOTEBOOK"})]})]}),t?l.jsx("div",{className:"text-slate-500",children:"Loading chronicles..."}):l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.map(p=>l.jsxs("div",{onClick:()=>n(p),className:"group relative bg-[#050508] border border-white/10 rounded-2xl p-6 cursor-pointer hover:border-indigo-500/50 hover:shadow-2xl hover:shadow-indigo-900/10 transition-all duration-300 h-64 flex flex-col",children:[l.jsxs("div",{className:"flex-1 relative",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsx("div",{className:"w-12 h-12 rounded-lg bg-white/5 flex items-center justify-center text-slate-400 group-hover:bg-indigo-500/10 group-hover:text-indigo-400 transition-colors mb-6",children:l.jsx("span",{className:"material-symbols-outlined text-2xl",children:"menu_book"})}),l.jsx("button",{onClick:m=>{m.stopPropagation(),c(p)},className:"opacity-0 group-hover:opacity-100 p-2 text-slate-500 hover:text-red-500 hover:bg-red-500/10 rounded-lg transition-all",title:"Delete Notebook",children:l.jsx("span",{className:"material-symbols-outlined text-xl",children:"delete"})})]}),l.jsx("h3",{className:"text-xl font-serif text-slate-200 group-hover:text-white mb-2 line-clamp-2",children:p.titulo}),l.jsx("p",{className:"text-slate-500 text-sm line-clamp-3",children:p.descripcion||"No description"})]}),l.jsxs("div",{className:"mt-4 pt-4 border-t border-white/5 flex justify-between items-center opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("span",{className:"text-xs font-mono text-slate-500",children:"OPEN CHRONICLE"}),l.jsx("span",{className:"material-symbols-outlined text-slate-400 text-sm",children:"arrow_forward"})]})]},p.id)),l.jsxs("button",{onClick:()=>s(!0),className:"border-2 border-dashed border-white/5 rounded-2xl p-6 h-64 flex flex-col items-center justify-center gap-4 text-slate-600 hover:text-slate-400 hover:border-white/10 transition-all",children:[l.jsx("span",{className:"material-symbols-outlined text-4xl",children:"add"}),l.jsx("span",{className:"font-mono text-xs uppercase tracking-widest",children:"Create New"})]})]})]}),l.jsx(mO,{isOpen:a,onClose:()=>s(!1),onConfirm:d,title:"New Notebook",message:"Give a title to your new chronicle.",placeholder:"Ex: The Lost Kingdom",confirmText:"Create Notebook"}),l.jsx(MZ,{isOpen:!!o,onClose:()=>c(null),onConfirm:f,title:"Delete Notebook?",message:`Are you sure you want to delete "${o==null?void 0:o.titulo}"? This action cannot be undone and will delete all pages inside.`,confirmText:"Delete Forever",isDestructive:!0})]})},DZ=()=>{const{setRightPanelMode:e,setRightOpen:t,setRightPanelTitle:n}=Ka(),[r,i]=G.useState("dashboard"),[a,s]=G.useState(null),[o,c]=G.useState([]),[d,f]=G.useState(0),[p,m]=G.useState(!1),g=G.useRef(null),[b,y]=G.useState([]),[N,v]=G.useState(!0),[_,x]=G.useState(null);G.useEffect(()=>{e("NOTES"),w()},[]),G.useEffect(()=>{const V=setInterval(()=>{const K=document.getElementById("architect-right-panel-portal");K&&(x(K),clearInterval(V))},100);return()=>clearInterval(V)},[r]);const w=async()=>{try{v(!0);const V=await be.get("/escritura/cuadernos");y(V)}catch(V){console.error("Error loading notebooks:",V)}finally{v(!1)}},E=async V=>{try{const K=await be.post("/escritura/cuaderno",{titulo:V});y([...b,K])}catch(K){console.error(K),alert("Error creating notebook")}},P=async V=>{try{await be.delete(`/escritura/cuaderno/${V}`),y(b.filter(K=>K.id!==V))}catch(K){console.error(K),alert("Error deleting notebook")}},A=async V=>{s(V),await L(V.id),i("editor")},T=()=>{i("dashboard"),s(null),c([])},L=async V=>{try{const K=await be.get(`/escritura/cuaderno/${V}/hojas`);if(K&&K.length>0)c(K),f(0);else{const H=await be.post(`/escritura/cuaderno/${V}/hoja`,{});c([H]),f(0)}}catch(K){console.error("Error loading pages:",K),c([])}},k=V=>{if(!o[d])return;const K=[...o];K[d].contenido=V,c(K),g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{C(K[d])},1500)},C=async V=>{m(!0);try{await be.put(`/escritura/hoja/${V.id}`,{contenido:V.contenido})}catch(K){console.error("Error saving page:",K)}finally{m(!1)}},O=async()=>{if(a)try{const V=await be.post(`/escritura/cuaderno/${a.id}/hoja`,{});c([...o,V]),f(o.length)}catch(V){console.error("Error creating page:",V)}},F=V=>{f(V)},M=()=>l.jsxs("div",{className:"flex flex-col h-full bg-[#08080A]",children:[l.jsxs("div",{className:"h-12 border-b border-white/5 flex items-center px-4 font-mono text-[10px] uppercase tracking-widest text-slate-500 whitespace-nowrap overflow-hidden text-ellipsis",children:["Library  ",b.length," Notebooks"]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1 custom-scrollbar",children:b.map(V=>l.jsx("button",{onClick:()=>A(V),className:"w-full text-left p-3 rounded-lg border-b border-white/5 hover:bg-white/5 transition-all group",children:l.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[l.jsx("div",{className:"text-slate-500 group-hover:text-indigo-400 transition-colors",children:l.jsx("span",{className:"material-symbols-outlined text-lg",children:"book"})}),l.jsx("span",{className:"font-serif font-bold text-sm text-slate-300 group-hover:text-white truncate",children:V.titulo})]})},V.id))})]}),D=()=>l.jsxs("div",{className:"flex flex-col h-full bg-[#08080A]",children:[l.jsxs("div",{className:"h-12 border-b border-white/5 flex items-center px-4 font-mono text-[10px] uppercase tracking-widest text-slate-500 whitespace-nowrap overflow-hidden text-ellipsis",children:["Index  ",o.length," Pages"]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1 custom-scrollbar",children:o.map((V,K)=>{var H;return l.jsxs("button",{onClick:()=>F(K),className:`w-full text-left p-3 rounded-lg border transition-all group ${K===d?"bg-indigo-500/10 border-indigo-500/30 text-indigo-200":"bg-transparent border-transparent hover:bg-white/5 text-slate-400"}`,children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsxs("span",{className:"font-serif font-bold text-sm truncate",children:["Page ",V.numeroPagina]}),K===d&&l.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 shrink-0 ml-2"})]}),l.jsx("p",{className:"text-[10px] line-clamp-2 opacity-50 font-mono break-words",children:((H=V.contenido)==null?void 0:H.replace(/<[^>]+>/g,"").substring(0,50))||"Empty page..."})]},V.id)})}),l.jsx("div",{className:"p-4 border-t border-white/5",children:l.jsxs("button",{onClick:O,className:"w-full py-2 bg-white/5 hover:bg-white/10 border border-white/5 rounded-lg text-[10px] font-black uppercase tracking-widest text-slate-300 flex items-center justify-center gap-2 transition-all",children:[l.jsx("span",{className:"material-symbols-outlined text-base",children:"add"}),l.jsx("span",{children:"New Page"})]})})]}),$=o[d];return r==="dashboard"?l.jsxs(l.Fragment,{children:[_&&Ba.createPortal(M(),_),l.jsx(LZ,{notebooks:b,loading:N,onSelectNotebook:A,onCreateNotebook:E,onDeleteNotebook:P})]}):l.jsxs("div",{className:"flex-1 flex w-full h-full bg-[#050508] relative overflow-hidden",children:[_&&Ba.createPortal(D(),_),l.jsxs("div",{className:"flex-1 flex flex-col relative z-10 transition-all duration-300",children:[l.jsxs("header",{className:"h-12 border-b border-white/5 bg-surface-dark/40 backdrop-blur-md flex items-center justify-between px-6 select-none",children:[l.jsxs("div",{className:"flex items-center gap-4 text-xs font-serif text-slate-400",children:[l.jsxs("button",{onClick:T,className:"hover:text-white transition-colors flex items-center gap-1",children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"arrow_back"}),"Dashboard"]}),l.jsx("span",{className:"opacity-20",children:"|"}),l.jsx("span",{className:"text-slate-300 font-bold tracking-wide",children:a==null?void 0:a.titulo}),l.jsx("span",{className:"opacity-20",children:"|"}),l.jsx("span",{children:new Date().toLocaleDateString()})]}),l.jsxs("div",{className:"flex items-center gap-3 text-[10px] font-black uppercase tracking-widest text-slate-500",children:[l.jsx("span",{children:(a==null?void 0:a.nombreProyecto)||"Workspace"}),l.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${p?"bg-amber-500 animate-pulse":"bg-emerald-500/50"}`})]})]}),l.jsx("main",{className:"flex-1 overflow-y-auto custom-scrollbar flex justify-center bg-[#101012] relative",children:$&&l.jsxs("div",{className:"w-full max-w-3xl py-12 px-8 min-h-full flex flex-col",children:[l.jsx("input",{type:"text",placeholder:"Untitled Page",className:"w-full bg-transparent text-4xl font-serif font-bold text-slate-200 placeholder:text-slate-700 border-none outline-none mb-8 text-center",defaultValue:`Page ${$.numeroPagina}`,readOnly:!0}),l.jsx("div",{className:"flex-1 bg-white/5 border border-white/5 rounded-sm shadow-2xl shadow-black/50 overflow-hidden relative",children:l.jsx(IZ,{content:$.contenido,onUpdate:k})})]})})]})]})};function FZ(){const{id:e}=nr();tr();const[t,n]=G.useState([]),[r,i]=G.useState(!0),[a,s]=G.useState(null);G.useEffect(()=>{o()},[e]);const o=async()=>{try{i(!0);const f=await be.get("/api/papelera/items");n(f),s(null)}catch(f){console.error("Error loading trash:",f),s("Failed to load trash items.")}finally{i(!1)}},c=async(f,p)=>{try{await be.post(`/api/papelera/restaurar/${f}/${p}`),o()}catch(m){console.error("Restoration failed",m)}},d=async(f,p)=>{if(window.confirm("Are you sure you want to PERMANENTLY delete this item? This cannot be undone."))try{await be.delete(`/api/papelera/eliminar/${f}/${p}`),o()}catch(m){console.error("Deletion failed",m)}};return r?l.jsx("div",{className:"text-white p-8",children:"Loading Trash Bin..."}):l.jsxs("div",{className:"flex flex-col h-full bg-[#09090b] text-white p-8 overflow-y-auto",children:[l.jsx("h1",{className:"text-3xl font-light mb-2 text-white/90",children:"Trash Bin"}),l.jsx("p",{className:"text-white/50 mb-8 font-light text-sm",children:"Items are automatically deleted after 30 days."}),a&&l.jsx("div",{className:"bg-red-500/10 border border-red-500/20 text-red-400 p-4 rounded mb-6",children:a}),t.length===0?l.jsxs("div",{className:"flex flex-col items-center justify-center py-20 opacity-50 border border-dashed border-white/10 rounded-xl",children:[l.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"delete_outline"}),l.jsx("p",{children:"Trash is empty"})]}):l.jsx("div",{className:"bg-zinc-900/50 rounded-xl border border-white/5 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-white/5 text-xs text-white/40 uppercase tracking-wider",children:[l.jsx("th",{className:"p-4 font-normal",children:"Name"}),l.jsx("th",{className:"p-4 font-normal",children:"Type"}),l.jsx("th",{className:"p-4 font-normal",children:"Deleted Date"}),l.jsx("th",{className:"p-4 font-normal text-right",children:"Actions"})]})}),l.jsx("tbody",{className:"divide-y divide-white/5",children:t.map(f=>l.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[l.jsx("td",{className:"p-4 text-white/80 font-medium",children:f.nombre||"Untitled"}),l.jsx("td",{className:"p-4 text-white/50 text-sm",children:f.tipo}),l.jsx("td",{className:"p-4 text-white/50 text-sm font-mono",children:f.deleted_date?new Date(f.deleted_date).toLocaleDateString():"-"}),l.jsxs("td",{className:"p-4 text-right space-x-2",children:[l.jsx("button",{onClick:()=>c(f.tipo,f.id),className:"px-3 py-1.5 text-xs bg-emerald-500/10 text-emerald-400 hover:bg-emerald-500/20 rounded-md transition-colors border border-emerald-500/20",children:"RESTORE"}),l.jsx("button",{onClick:()=>d(f.tipo,f.id),className:"px-3 py-1.5 text-xs bg-red-500/10 text-red-400 hover:bg-red-500/20 rounded-md transition-colors border border-red-500/20",children:"DELETE"})]})]},`${f.tipo}-${f.id}`))})]})})]})}const zZ=({attribute:e,value:t,onChange:n,onRemove:r,linkableEntities:i=[]})=>{const a=e.plantilla||e,s=()=>{switch(a.tipo){case"text":return l.jsx("textarea",{className:"w-full bg-transparent text-white text-sm font-medium focus:outline-none resize-none no-scrollbar h-auto min-h-[100px]",value:t||"",onChange:m=>n(m.target.value),placeholder:"..."});case"short_text":return l.jsx("input",{type:"text",className:"w-full bg-transparent text-white text-sm font-medium focus:outline-none",value:t||"",onChange:m=>n(m.target.value),placeholder:"..."});case"number":return l.jsx("input",{type:"number",className:"w-full bg-transparent text-white text-sm font-medium focus:outline-none",value:t||"",onChange:m=>n(m.target.value)});case"boolean":return l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:()=>n(t==="true"?"false":"true"),className:`size-6 rounded-lg border flex items-center justify-center transition-all ${t==="true"?"bg-primary border-primary text-white":"border-glass-border text-transparent hover:border-primary/50"}`,children:l.jsx("span",{className:"material-symbols-outlined text-sm",children:"check"})}),l.jsx("span",{className:"text-xs text-text-muted",children:t==="true"?"Enabled":"Disabled"})]});case"select":let o=[];try{o=(typeof a.metadata=="string"?JSON.parse(a.metadata||"{}"):a.metadata||{}).options||[]}catch{}return l.jsxs("div",{className:"relative",children:[l.jsxs("select",{className:"w-full bg-black/30 border border-white/5 rounded-xl px-4 py-2.5 text-sm text-white focus:outline-none focus:border-primary/50 appearance-none cursor-pointer",value:t||"",onChange:m=>n(m.target.value),children:[l.jsx("option",{value:"",children:"Select an option..."}),o.map((m,g)=>l.jsx("option",{value:m,className:"bg-surface-dark text-white p-2",children:m},g))]}),l.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-white/50",children:l.jsx("span",{className:"material-symbols-outlined text-sm",children:"unfold_more"})})]});case"multi_select":let c=[];try{c=(typeof a.metadata=="string"?JSON.parse(a.metadata||"{}"):a.metadata||{}).options||[]}catch{}let d=[];try{d=t?JSON.parse(t):[],Array.isArray(d)||(d=[])}catch(m){console.error("Error parsing select values",m)}const f=m=>{const g=d.includes(m)?d.filter(b=>b!==m):[...d,m];n(JSON.stringify(g))};return l.jsxs("div",{className:"bg-black/20 border border-white/5 rounded-xl p-2 space-y-1 max-h-40 overflow-y-auto custom-scrollbar",children:[c.map((m,g)=>l.jsxs("label",{onClick:b=>{b.preventDefault(),f(m)},className:"flex items-center gap-3 p-2 hover:bg-white/5 rounded-lg cursor-pointer group transition-colors",children:[l.jsx("div",{className:`size-4 rounded border flex items-center justify-center transition-all ${d.includes(m)?"bg-primary border-primary":"border-white/10 group-hover:border-white/30"}`,children:d.includes(m)&&l.jsx("span",{className:"material-symbols-outlined text-[10px] text-white",children:"check"})}),l.jsx("span",{className:`text-xs font-medium ${d.includes(m)?"text-white":"text-slate-400 group-hover:text-slate-200"}`,children:m})]},g)),c.length===0&&l.jsx("div",{className:"text-xs text-slate-500 p-2 italic",children:"No options defined."})]});case"date":return l.jsx("input",{type:"date",className:"w-full bg-transparent text-white text-sm font-medium focus:outline-none [color-scheme:dark]",value:t||"",onChange:m=>n(m.target.value)});case"entity_link":return l.jsxs("div",{className:"relative",children:[l.jsxs("select",{className:"w-full bg-black/30 border border-white/5 rounded-xl px-4 py-2.5 text-sm text-white focus:outline-none focus:border-primary/50 appearance-none cursor-pointer",value:t||"",onChange:m=>n(m.target.value),children:[l.jsx("option",{value:"",children:"Select an Entity Link..."}),i.map(m=>l.jsx("option",{value:m.id,className:"bg-surface-dark text-white p-2",children:m.nombre},m.id))]}),l.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-white/50",children:l.jsx("span",{className:"material-symbols-outlined text-sm",children:"link"})})]});case"image":return l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"flex gap-2",children:l.jsx("input",{type:"text",className:"flex-1 bg-black/30 border border-white/5 rounded-xl px-4 py-2 text-xs text-text-muted focus:text-white focus:outline-none",placeholder:"Image URL...",value:t||"",onChange:m=>n(m.target.value)})}),t&&l.jsx("div",{className:"w-full aspect-video rounded-xl bg-black/40 border border-white/5 overflow-hidden relative group",children:l.jsx("img",{src:t,alt:"Preview",className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity"})}),!t&&l.jsx("div",{className:"w-full h-20 rounded-xl bg-white/5 border border-dashed border-white/10 flex items-center justify-center text-text-muted/30",children:l.jsx("span",{className:"material-symbols-outlined",children:"image"})})]});case"table":const p=t||"[]";return l.jsxs("div",{className:"space-y-2",children:[l.jsx("textarea",{className:"w-full h-32 bg-black/30 border border-white/5 rounded-xl p-3 text-xs font-mono text-white/70 focus:outline-none focus:border-primary/50",value:p,onChange:m=>n(m.target.value),placeholder:'[{"Item": "Sword", "Qty": 1}, ...]'}),l.jsxs("div",{className:"text-[10px] text-text-muted flex justify-between",children:[l.jsx("span",{children:"JSON Format supported"}),l.jsx("span",{className:"material-symbols-outlined text-xs",children:"data_array"})]})]});default:return l.jsxs("div",{className:"text-sm font-medium text-white/70 italic p-2 rounded-lg bg-white/5 border border-white/5",children:[l.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-500 mr-2",children:a.tipo}),t]})}};return l.jsxs("div",{className:"p-4 border border-white/5 rounded-2xl bg-surface-dark/50 backdrop-blur-sm relative overflow-hidden h-full flex flex-col group hover:border-primary/20 transition-all",children:[l.jsxs("label",{className:"text-[10px] font-black uppercase tracking-widest text-text-muted mb-3 flex items-center justify-between gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"material-symbols-outlined text-xs opacity-50",children:"label"}),a.nombre]}),r&&l.jsx("button",{onClick:o=>{o.preventDefault(),r()},className:"text-white/20 hover:text-red-400 transition-colors",title:"Remove Attribute",children:l.jsx("span",{className:"material-symbols-outlined text-sm",children:"close"})})]}),l.jsx("div",{className:"flex-1 nodrag",children:s()}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"})]})},BZ=[{value:"entidadIndividual",label:"Character"},{value:"entidadColectiva",label:"Group"},{value:"zona",label:"Location"},{value:"construccion",label:"Building"},{value:"efectos",label:"Effect"},{value:"interaccion",label:"Interaction"},{value:"lineatiempo",label:"Timeline"},{value:"eventotiempo",label:"Event"},{value:"mapa",label:"Map"}],qZ=({entityId:e,entityType:t})=>{const[n,r]=G.useState([]),[i,a]=G.useState(!1),[s,o]=G.useState(!1),[c,d]=G.useState("entidadIndividual"),[f,p]=G.useState([]),[m,g]=G.useState(""),[b,y]=G.useState(""),[N,v]=G.useState(""),[_,x]=G.useState(!1);G.useEffect(()=>{e&&w()},[e,t]),G.useEffect(()=>{s&&c&&E(c)},[s,c]);const w=async()=>{a(!0);try{const k=(await be.get("/bd/relacion")).filter(O=>O.nodoOrigenId===parseInt(e)&&O.tipoOrigen===t||O.nodoDestinoId===parseInt(e)&&O.tipoDestino===t),C=await Promise.all(k.map(async O=>{const F=O.nodoOrigenId===parseInt(e),M=F?O.nodoDestinoId:O.nodoOrigenId,D=F?O.tipoDestino:O.tipoOrigen;try{const $=await be.get(`/bd/${D}/${M}`);return{...O,otherName:$.nombre,otherType:D,isOutgoing:F}}catch{return{...O,otherName:"Unknown/Deleted",otherType:D,isOutgoing:F}}}));r(C)}catch(L){console.error("Failed to load relationships",L)}finally{a(!1)}},E=async L=>{x(!0);try{const k=await be.get(`/bd/${L}`);p(k||[])}catch(k){console.error("Failed to fetch targets",k),p([])}finally{x(!1)}},P=async()=>{if(!(!m||!b))try{const L={nodoOrigenId:parseInt(e),tipoOrigen:t,nodoDestinoId:parseInt(m),tipoDestino:c,tipoRelacion:b,descripcion:N,tipoEntidad:"relacion"};await be.put("/bd/insertar",L),o(!1),T(),w()}catch(L){console.error("Failed to save relationship",L),alert("Error saving relationship")}},A=async L=>{if(confirm("Are you sure?"))try{await be.delete(`/bd/relacion/${L}`),w()}catch(k){console.error("Failed to delete",k)}},T=()=>{d("entidadIndividual"),g(""),y(""),v("")};return l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsxs("header",{className:"flex justify-between items-center",children:[l.jsx("h3",{className:"text-lg font-bold text-white uppercase tracking-widest",children:"Relationships"}),l.jsx(nt,{variant:"secondary",icon:"add_link",onClick:()=>o(!s),children:s?"Cancel":"Connect"})]}),s&&l.jsxs("div",{className:"p-4 rounded-2xl bg-white/5 border border-white/10 space-y-4 animate-in fade-in slide-in-from-top-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-500",children:"Target Type"}),l.jsx("select",{className:"w-full bg-black/40 border border-white/10 rounded-xl p-2 text-sm text-white outline-none focus:border-primary",value:c,onChange:L=>d(L.target.value),children:BZ.map(L=>l.jsx("option",{value:L.value,children:L.label},L.value))})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-500",children:"Target Entity"}),l.jsxs("select",{className:"w-full bg-black/40 border border-white/10 rounded-xl p-2 text-sm text-white outline-none focus:border-primary",value:m,onChange:L=>g(L.target.value),disabled:_,children:[l.jsx("option",{value:"",children:"Select Target..."}),f.map(L=>l.jsx("option",{value:L.id,children:L.nombre},L.id))]})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-500",children:"Relationship Type"}),l.jsx("input",{type:"text",placeholder:"e.g. Father of, Located in, Enemy of...",className:"w-full bg-black/40 border border-white/10 rounded-xl p-2 text-sm text-white outline-none focus:border-primary",value:b,onChange:L=>y(L.target.value)})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-500",children:"Description (The Why)"}),l.jsx("textarea",{placeholder:"Explain the nature of this connection...",className:"w-full bg-black/40 border border-white/10 rounded-xl p-2 text-sm text-white outline-none focus:border-primary h-20 resize-none",value:N,onChange:L=>v(L.target.value)})]}),l.jsx("div",{className:"flex justify-end pt-2",children:l.jsx(nt,{variant:"primary",icon:"save",onClick:P,disabled:!m||!b,children:"Save Connection"})})]}),l.jsx("div",{className:"space-y-3",children:i?l.jsx("div",{className:"text-center text-slate-500 py-8",children:"Scanning connections..."}):n.length===0?l.jsx("div",{className:"text-center text-slate-500 py-8 italic border border-dashed border-white/10 rounded-2xl",children:"No connections established"}):n.map((L,k)=>l.jsxs("div",{className:"group relative p-4 rounded-2xl bg-surface-dark border border-white/5 hover:border-primary/50 transition-all flex items-start gap-4",children:[l.jsx("div",{className:"mt-1",children:l.jsx("span",{className:"material-symbols-outlined text-slate-500",children:L.isOutgoing?"arrow_outward":"arrow_inward"})}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:L.isOutgoing?"To:":"From:"}),l.jsx("span",{className:"text-sm font-bold text-white",children:L.otherName}),l.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded bg-white/10 text-slate-400 font-bold uppercase tracking-wider",children:L.otherType})]}),l.jsx("div",{className:"text-primary text-xs font-black uppercase tracking-widest mb-2",children:L.tipoRelacion}),L.descripcion&&l.jsxs("p",{className:"text-xs text-slate-400 leading-relaxed bg-black/20 p-2 rounded-lg border border-white/5",children:['"',L.descripcion,'"']})]}),l.jsx("button",{onClick:()=>A(L.id),className:"opacity-0 group-hover:opacity-100 p-2 text-slate-600 hover:text-red-400 transition-all",children:l.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]},L.id||k))})]})},Ec=({mode:e})=>{const{username:t,projectName:n,entitySlug:r,folderSlug:i,type:a}=nr(),s=tr(),o=e==="creation",{setRightOpen:c,setAvailableTemplates:d,setRightPanelMode:f,setAddAttributeHandler:p,setEntityTabs:m,activeEntityTab:g,setActiveEntityTab:b}=Ka(),[y,N]=G.useState({nombre:"",tipo:"entidadindividual",descripcion:"",color:"#6366f1",apariencia:"",notas:"",iconUrl:null,tipoEspecial:a||null,carpeta:null,categoria:"Individual"}),[v,_]=G.useState([]),[x,w]=G.useState(!0),[E,P]=G.useState(!1),[A,T]=G.useState([]),[L,k]=G.useState([]),[C,O]=G.useState(!1);G.useEffect(()=>(c(!0),f("ENTITY"),m(["identity","narrative","attributes"]),b("identity"),()=>{f("NOTES"),m([])}),[]),G.useEffect(()=>{o?M():D()},[r,i,o]);const F=I=>{d(I),k(I),p(z=>{const W=I.find(Q=>Q.id===z);W&&_(Q=>[...Q,{id:`temp-${W.id}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,attribute:W,value:W.valorDefecto||"",isTemp:!0}])})},M=async()=>{w(!0);try{const I=await be.get(`/world-bible/folders/${i}`),z=await be.get(`/world-bible/folders/${i}/templates`);F(z),N(Q=>({...Q,nombre:`Nuevo ${a==="map"?"Mapa":a==="timeline"?"Cronograma":"Ente"}`,carpeta:I,tipoEspecial:a||"entidadindividual",tipo:a||"entidadindividual"}));const W=z.filter(Q=>Q.esObligatorio).map(Q=>({id:`temp-${Q.id}-${Math.random().toString(36).substr(2,9)}`,attribute:Q,value:Q.valorDefecto||"",isTemp:!0}));_(W)}catch(I){console.error("Error creating draft:",I)}finally{w(!1)}},D=async()=>{var I;w(!0);try{const z=await be.get(`/world-bible/entities/${r}`);if(N({...z,apariencia:z.apariencia||"",notas:z.notas||"",iconUrl:z.iconUrl||null,tags:z.tags||"",tipo:z.tipoEspecial||getHierarchyType(z.tipo).id,color:z.color||"#6366f1",categoria:z.categoria||"Individual"}),(I=z.carpeta)!=null&&I.id){const Q=await be.get(`/world-bible/folders/${z.carpeta.id}/templates`);F(Q)}const W=(z.valores||[]).filter(Q=>Q.plantilla).map(Q=>({id:Q.id.toString(),attribute:Q.plantilla,value:Q.valor,isTemp:!1}));_(W)}catch(z){console.error("Error loading entity:",z)}finally{w(!1)}},$=(I,z)=>{N(W=>({...W,[I]:z}))},V=I=>{const z=I.target.files[0];if(z){const W=new FileReader;W.onloadend=()=>{$("iconUrl",W.result)},W.readAsDataURL(z)}},K=(I,z)=>{_(W=>W.map(Q=>Q.id===I?{...Q,value:z}:Q))},H=I=>{I.toString().startsWith("temp-")||T(z=>[...z,I]),_(z=>z.filter(W=>W.id!==I))},q=async(I=!0)=>{P(!0);try{const z={nombre:y.nombre,descripcion:y.descripcion,tags:y.tags,apariencia:y.apariencia,notas:y.notas,iconUrl:y.iconUrl,tipoEspecial:y.tipoEspecial||"entidadindividual",color:y.color,categoria:y.categoria};let W=y.id;if(o){if(!y.carpeta||!y.carpeta.id){alert("Error: No folder selected or folder not found."),P(!1);return}z.carpetaId=y.carpeta.id;const U=await be.post("/world-bible/entities",z);W=U.id;const J=[...v];for(let te=0;te<J.length;te++){const X=J[te];if(X.isTemp){const ne=await be.post(`/world-bible/entities/${U.id}/attributes`,{plantillaId:X.attribute.id});await be.patch(`/world-bible/entities/${U.id}/values`,[{valorId:ne.id,nuevoValor:X.value}]),J[te]={...X,id:ne.id.toString(),isTemp:!1}}}_(J),P(!1),I?s(`/${t}/${n}/bible/folder/${i}`):s(`/${t}/${n}/bible/folder/${i}/entity/${U.slug||U.id}`,{replace:!0});return}await be.put(`/world-bible/entities/${W}`,{nombre:z.nombre,color:z.color,iconUrl:z.iconUrl}),await be.patch(`/world-bible/entities/${W}/details`,{descripcion:z.descripcion,tags:z.tags,apariencia:z.apariencia,notas:z.notas,iconUrl:z.iconUrl}),A.length>0&&(await Promise.all(A.map(U=>be.delete(`/world-bible/values/${U}`))),T([]));const Q=v.filter(U=>!U.isTemp).map(U=>({valorId:parseInt(U.id),nuevoValor:U.value}));Q.length>0&&await be.patch(`/world-bible/entities/${W}/values`,Q);let ee=!1;const Y=[...v];console.log("Saving fields...",v);for(let U=0;U<Y.length;U++){const J=Y[U];if(J.isTemp){console.log("Processing temp field:",J);try{const te=await be.post(`/world-bible/entities/${W}/attributes`,{plantillaId:J.attribute.id});console.log("Created attribute value:",te),await be.patch(`/world-bible/entities/${W}/values`,[{valorId:te.id,nuevoValor:J.value}]),Y[U]={...J,id:te.id.toString(),isTemp:!1},ee=!0}catch(te){console.error("Error saving field:",J,te)}}}ee&&_(Y),P(!1)}catch(z){console.error("Save error",z),P(!1)}};return x?l.jsx("div",{className:"p-20 text-center animate-pulse",children:"Loading Builder..."}):l.jsx("div",{className:"flex h-full w-full bg-background-dark overflow-hidden",children:l.jsxs("div",{className:"flex-1 flex flex-col min-w-0 overflow-y-auto custom-scrollbar relative",children:[l.jsxs("div",{className:"border-b border-white/5 p-4 flex justify-between items-center bg-background-dark/80 backdrop-blur sticky top-0 z-30",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(vu,{url:y.iconUrl,name:y.nombre,className:"size-10 rounded-lg border border-white/10"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg font-bold text-white leading-tight",children:y.nombre||"Sin Nombre"}),l.jsx("span",{className:"text-[10px] uppercase font-black tracking-widest text-slate-500",children:o?"Creando Nueva Entidad":"Editando Entidad"})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:()=>s(`/${t}/${n}/bible/folder/${i}`),className:"px-4 py-2 rounded-xl text-slate-400 hover:text-white hover:bg-white/5 text-xs font-bold uppercase tracking-widest transition-all",children:"Cancelar"}),l.jsxs("div",{className:"flex bg-white/5 rounded-xl p-1 gap-1 border border-white/10",children:[l.jsxs("button",{onClick:()=>q(!0),disabled:E,className:"h-9 px-4 rounded-lg bg-primary hover:bg-primary-light text-white text-[10px] font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[E?l.jsx("span",{className:"material-symbols-outlined animate-spin text-sm",children:"refresh"}):l.jsx("span",{className:"material-symbols-outlined text-sm",children:"save"}),"Guardar"]}),l.jsx("div",{className:"w-px bg-white/10 my-1"}),l.jsx("button",{onClick:()=>q(!1),disabled:E,className:"h-9 px-3 rounded-lg bg-transparent hover:bg-white/10 text-white transition-all flex items-center justify-center disabled:opacity-50",title:"Guardar y Seguir Editando",children:l.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit_document"})})]})]})]}),l.jsxs("div",{className:"p-8 pb-32 max-w-5xl mx-auto w-full",children:[g==="identity"&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[l.jsxs(Ke,{className:`p-6 space-y-6 ${y.tipoEspecial==="map"?"lg:col-span-2":""}`,children:[l.jsxs("h3",{className:"text-xs font-black uppercase tracking-widest text-primary flex items-center gap-2 mb-6",children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"badge"})," Identity"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500 mb-1 block",children:"Full Name"}),l.jsx("input",{value:y.nombre,onChange:I=>$("nombre",I.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl p-3 text-sm text-white focus:border-primary/50 outline-none transition-colors",placeholder:"E.g. King Alaric"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500 mb-1 block",children:"Entity Type / Category"}),l.jsxs("select",{value:y.categoria||"Individual",onChange:I=>$("categoria",I.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl p-3 text-sm text-white focus:border-primary/50 outline-none transition-colors appearance-none",children:[l.jsx("option",{value:"Individual",children:"Individual (Character/Person)"}),l.jsx("option",{value:"Group",children:"Group / Faction"}),l.jsx("option",{value:"Location",children:"Location"}),l.jsx("option",{value:"Event",children:"Event"}),l.jsx("option",{value:"Object",children:"Object / Item"}),l.jsx("option",{value:"Concept",children:"Concept / Magic"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500 mb-1 block",children:"Tags (comma separated)"}),l.jsx("input",{value:y.tags,onChange:I=>$("tags",I.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl p-3 text-sm text-slate-300 focus:border-primary/50 outline-none transition-colors",placeholder:"Warrior, Leader, Human..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500 mb-1 block",children:"Icon / Portrait"}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(vu,{url:y.iconUrl,name:y.nombre,size:"lg",className:"rounded-xl"}),l.jsxs("label",{className:"cursor-pointer px-4 py-2 bg-white/5 hover:bg-white/10 rounded-lg border border-white/10 text-xs font-bold text-slate-300 transition-colors",children:["Upload Image",l.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:V})]}),y.iconUrl&&l.jsx("button",{onClick:()=>$("iconUrl",""),className:"p-2 hover:text-red-400 transition-colors",children:l.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]})]})]})]}),y.tipoEspecial!=="map"&&l.jsxs(Ke,{className:"p-6 space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("h3",{className:"text-xs font-black uppercase tracking-widest text-primary flex items-center gap-2",children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"palette"})," Appearance"]}),l.jsx("div",{className:"flex gap-2",children:l.jsxs("label",{className:"cursor-pointer text-[10px] font-bold uppercase tracking-wider text-slate-500 hover:text-white transition-colors flex items-center gap-1",children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"add_photo_alternate"}),"Insert Image",l.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:I=>{const z=I.target.files[0];if(z){const W=new FileReader;W.onloadend=()=>{const Q=`

![${z.name}](${W.result})
`;$("apariencia",(y.apariencia||"")+Q)},W.readAsDataURL(z)}}})]})})]}),l.jsx("textarea",{value:y.apariencia,onChange:I=>$("apariencia",I.target.value),className:"w-full h-80 bg-black/30 border border-white/10 rounded-xl p-4 text-sm text-slate-300 leading-relaxed focus:border-primary/50 outline-none transition-colors custom-scrollbar font-mono",placeholder:"Describe their physical appearance, clothing, distinct marks... (Markdown Supported)"})]}),y.tipoEspecial==="map"?l.jsxs(Ke,{className:"p-6 lg:col-span-2 space-y-6",children:[l.jsxs("h3",{className:"text-xs font-black uppercase tracking-widest text-primary flex items-center gap-2 mb-6",children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"map"})," Cartography"]}),l.jsx("div",{onClick:()=>{let I=y.iconUrl;try{const z=JSON.parse(y.descripcion||"{}");z.snapshotUrl&&(I=z.snapshotUrl)}catch{}O(!0)},className:"w-full aspect-[21/9] bg-black/30 border border-white/10 rounded-xl overflow-hidden cursor-pointer group relative",children:(()=>{let I=y.iconUrl;try{const z=JSON.parse(y.descripcion||"{}");z.snapshotUrl&&(I=z.snapshotUrl)}catch{}return I?l.jsxs(l.Fragment,{children:[l.jsx("img",{src:I,alt:"Map Preview",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}),l.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:l.jsx("span",{className:"material-symbols-outlined text-white text-3xl",children:"zoom_in"})})]}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-500 text-xs italic",children:"No map preview available"})})()}),l.jsx("div",{className:"flex justify-end",children:l.jsx(nt,{variant:"secondary",size:"sm",icon:"edit",onClick:()=>window.open(`/${t}/${n}/map-editor/edit/${y.id}`,"_self"),children:"Open Editor"})})]}):l.jsxs(Ke,{className:"p-6 lg:col-span-2",children:[l.jsxs("h3",{className:"text-xs font-black uppercase tracking-widest text-primary flex items-center gap-2 mb-6",children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"sticky_note_2"})," Quick Notes"]}),l.jsx("textarea",{className:"w-full h-40 bg-black/30 border border-white/10 rounded-xl p-4 text-sm text-slate-300 leading-relaxed resize-none focus:border-primary/50 outline-none transition-colors custom-scrollbar font-mono placeholder:text-slate-600",placeholder:"Quick notes about this entity...",value:y.notas||"",onChange:I=>$("notas",I.target.value)})]})]}),g==="narrative"&&l.jsxs("div",{className:"animate-in fade-in duration-500 space-y-8",children:[l.jsxs(Ke,{className:"min-h-[40vh] flex flex-col p-8",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("h3",{className:"text-xs font-black uppercase tracking-widest text-primary flex items-center gap-2",children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"history_edu"})," Biography"]}),l.jsx("span",{className:"text-[10px] text-slate-500 bg-white/5 px-2 py-1 rounded",children:"Markdown Supported"})]}),l.jsx("textarea",{className:"flex-1 w-full bg-transparent border-none outline-none text-slate-300 leading-relaxed resize-none focus:ring-0 placeholder:text-slate-600 custom-scrollbar text-base min-h-[300px]",placeholder:"Write the origin story...",value:y.descripcion||"",onChange:I=>$("descripcion",I.target.value)})]}),l.jsxs(Ke,{className:"min-h-[40vh]",children:[l.jsxs("h3",{className:"text-xs font-black uppercase tracking-widest text-primary p-6 pb-0 flex items-center gap-2",children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"hub"})," Relationships"]}),o?l.jsxs("div",{className:"p-12 text-center text-slate-500",children:[l.jsx("span",{className:"material-symbols-outlined text-4xl mb-4",children:"save_as"}),l.jsx("p",{className:"text-sm font-bold",children:"Please save the entity first to manage relationships."})]}):l.jsx(qZ,{entityId:y.id,entityType:y.tipo||"entidadindividual"})]})]}),g==="attributes"&&l.jsxs("div",{className:`animate-in fade-in duration-500 space-y-6 min-h-[50vh] transition-colors rounded-2xl p-4 ${window.isDraggingOver?"bg-primary/10 border-2 border-dashed border-primary":""}`,onDragOver:I=>{I.preventDefault(),I.dataTransfer.dropEffect="copy",I.currentTarget.classList.add("bg-primary/10","border-primary","border-dashed","border-2")},onDragLeave:I=>{I.preventDefault(),I.currentTarget.classList.remove("bg-primary/10","border-primary","border-dashed","border-2")},onDrop:I=>{if(I.preventDefault(),I.currentTarget.classList.remove("bg-primary/10","border-primary","border-dashed","border-2"),I.dataTransfer.getData("application/reactflow/type")!=="attribute")return;let W=null;try{const Q=I.dataTransfer.getData("templateData");if(Q)W=JSON.parse(Q);else{const ee=parseInt(I.dataTransfer.getData("templateId"));W=L.find(Y=>Y.id===ee)}}catch(Q){console.error("Drop error",Q)}W&&_(Q=>[...Q,{id:`temp-${W.id}-${Date.now()}`,attribute:W,value:W.valorDefecto||"",isTemp:!0}])},children:[l.jsxs("h3",{className:"text-xs font-black uppercase tracking-widest text-primary border-b border-white/5 pb-4 flex items-center justify-between",children:[l.jsx("span",{children:"Atributos especiales"}),l.jsx("span",{className:"text-[10px] text-slate-500 font-normal normal-case opacity-50 hidden md:block",children:"Arraste atributos desde el panel derecho"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border-2 border-dashed border-white/5 rounded-2xl hover:border-primary/20 transition-colors bg-white/[0.01]",children:[v.length===0&&l.jsxs("div",{className:"col-span-full py-12 text-center text-slate-500 text-sm pointer-events-none",children:[l.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 opacity-50",children:"drag_indicator"}),l.jsx("p",{children:"Arrastra plantillas aqu para aadir atributos"})]}),v.filter(I=>I.attribute).map(I=>l.jsx(zZ,{attribute:I.attribute,value:I.value,onChange:z=>K(I.id,z),onRemove:()=>H(I.id)},I.id))]})]})]}),C&&y.iconUrl&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>O(!1),children:l.jsxs("div",{className:"relative max-w-[90vw] max-h-[90vh] p-2",children:[l.jsx("button",{onClick:()=>O(!1),className:"absolute -top-12 right-0 p-2 text-white hover:text-primary transition-colors",children:l.jsx("span",{className:"material-symbols-outlined text-3xl",children:"close"})}),l.jsx("img",{src:y.iconUrl,alt:y.nombre,className:"max-w-full max-h-[85vh] object-contain rounded-lg shadow-2xl border border-white/10",onClick:I=>I.stopPropagation()})]})})]})})},$Z=e=>{switch(e==null?void 0:e.toLowerCase()){case"text":return"notes";case"short_text":return"short_text";case"number":return"pin";case"date":return"calendar_today";case"select":return"list";case"boolean":return"check_box";case"map":return"map";case"timeline":return"timeline";case"character":case"entidadindividual":return"person";case"location":case"zona":case"construccion":return"location_on";case"culture":case"entidadcolectiva":return"groups";case"universe":case"galaxy":case"system":case"planet":return"public";case"entity_link":return"link";default:return"description"}},v2=({item:e,type:t,linkTo:n,onContextMenu:r,onDelete:i})=>{const a=t==="folder";return l.jsxs(qa,{to:n,onContextMenu:r,className:"group relative flex flex-col p-4 rounded-3xl bg-surface-dark border border-glass-border hover:border-primary/50 hover:bg-white/5 transition-all duration-300 backdrop-blur-sm overflow-hidden",children:[e.iconUrl&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"absolute inset-0 z-0",children:l.jsx("img",{src:e.iconUrl,alt:"",className:"w-full h-full object-cover opacity-60 group-hover:scale-105 transition-transform duration-700"})}),l.jsx("div",{className:"absolute inset-0 z-0 bg-gradient-to-t from-[#0a0a0c] via-[#0a0a0c]/80 to-transparent"})]}),l.jsxs("div",{className:"relative z-10 flex items-start justify-between mb-4",children:[l.jsx("div",{className:`
                    size-12 rounded-2xl flex items-center justify-center text-xl transition-transform group-hover:scale-110 
                    ${a?"bg-primary/20 text-primary":"bg-white/5 text-text-muted group-hover:text-white backdrop-blur-md border border-white/5"}
                `,children:l.jsx("span",{className:"material-symbols-outlined",children:a?"folder":$Z(e.tipoEspecial)})}),a&&l.jsx("div",{className:"px-2 py-1 rounded-lg bg-surface-light/50 border border-glass-border text-[10px] font-black text-white shadow-sm backdrop-blur-md",children:e.itemCount||0})]}),l.jsxs("div",{className:"relative z-10 mt-auto",children:[l.jsx("h3",{className:"text-sm font-bold text-white truncate group-hover:text-primary transition-colors drop-shadow-md",children:e.nombre}),l.jsx("p",{className:"text-[10px] font-bold uppercase tracking-widest text-text-muted mt-1 opacity-70 group-hover:opacity-100 transition-opacity",children:a?"Folder":e.tipoEspecial||"Entity"})]}),l.jsxs("div",{className:"absolute top-4 right-4 z-20 flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[i&&l.jsx("button",{onClick:s=>{s.preventDefault(),s.stopPropagation(),i(e)},className:"p-1.5 rounded-lg bg-red-500/10 hover:bg-red-500 text-red-500 hover:text-white transition-all border border-red-500/20 shadow-lg shadow-red-500/5 group/del backdrop-blur-md",children:l.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})}),l.jsx("span",{className:"material-symbols-outlined text-primary text-sm transform group-hover:translate-x-1 transition-transform drop-shadow-md",children:"arrow_forward"})]})]})},UZ=({path:e,currentFolder:t})=>{const{username:n,projectName:r}=nr(),i=`/${n}/${r}/bible`;return!e&&!t?null:l.jsxs("nav",{className:"flex items-center gap-2 text-[10px] uppercase font-bold tracking-wider text-slate-500 mb-4 overflow-x-auto no-scrollbar whitespace-nowrap",children:[l.jsxs(qa,{to:i,className:"hover:text-primary transition-colors flex items-center gap-1",children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"home"}),"Bible"]}),e&&e.map((a,s)=>l.jsxs(oe.Fragment,{children:[l.jsx("span",{className:"text-slate-700",children:"/"}),l.jsx(qa,{to:`${i}/folder/${a.slug||a.id}`,className:"hover:text-primary transition-colors",children:a.nombre})]},a.id)),t&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-slate-700",children:"/"}),l.jsx("span",{className:"text-white bg-white/5 px-2 py-0.5 rounded",children:t.nombre})]})]})},Cs={UNIVERSE:{id:"UNIVERSE",label:"Universo / Multiverso",description:"Contenedor supremo de realidades.",icon:"public",color:"text-purple-400",bgColor:"bg-purple-900/20"},GALAXY:{id:"GALAXY",label:"Galaxia",description:"Agrupacin masiva de sistemas estelares.",icon:"auto_awesome",color:"text-indigo-400",bgColor:"bg-indigo-900/20"},SYSTEM:{id:"SYSTEM",label:"Sistema Solar",description:"Estrella central y sus cuerpos orbitales.",icon:"wb_sunny",color:"text-yellow-400",bgColor:"bg-yellow-900/20"},PLANET:{id:"PLANET",label:"Planeta / Mundo",description:"Cuerpo celeste o plano de existencia principal.",icon:"public",color:"text-emerald-400",bgColor:"bg-emerald-900/20"},GEOGRAPHY:{id:"GEOGRAPHY",label:"Geografa",icon:"map",color:"text-green-300"},ENTITIES:{id:"ENTITIES",label:"Entidades",icon:"groups",color:"text-blue-300"},MAGIC:{id:"MAGIC",label:"Magia",icon:"auto_fix_high",color:"text-pink-300"},TIMELINE:{id:"TIMELINE",label:"Cronologa",icon:"history",color:"text-orange-300"},FACTIONS:{id:"FACTIONS",label:"Facciones",icon:"security",color:"text-red-300"},ITEMS:{id:"ITEMS",label:"Objetos",icon:"inventory_2",color:"text-gray-300"},FOLDER:{id:"FOLDER",label:"Carpeta",icon:"folder",color:"text-gray-400"}},y2=e=>Cs[e]||Cs.FOLDER,GZ=()=>{const{username:e,projectName:t,folderSlug:n}=nr(),r=tr(),{handleCreateEntity:i,handleDeleteEntity:a,handleCreateSimpleFolder:s,folderSearchTerm:o,folderFilterType:c}=Ka(),[d,f]=G.useState([]),[p,m]=G.useState(null),[g,b]=G.useState([]),[y,N]=G.useState(!0),v=d.filter(E=>{const P=E.nombre.toLowerCase().includes(o.toLowerCase()),A=c==="ALL"||c==="MAP"&&E.tipoEspecial==="map"||c==="TIMELINE"&&E.tipoEspecial==="timeline"||c==="ENTITY"&&(!E.tipoEspecial||E.tipoEspecial==="entidadindividual");return P&&A});G.useEffect(()=>{const E=P=>{const{folderId:A,removeId:T,type:L,item:k,expand:C}=P.detail||{};A===((p==null?void 0:p.id)||n)&&(T?f(O=>O.filter(F=>F.id!==T)):k&&k.slug&&k.slug!==n?r(`/${e}/${t}/bible/folder/${k.slug}`,{replace:!0}):_())};return window.addEventListener("folder-update",E),()=>window.removeEventListener("folder-update",E)},[n,p==null?void 0:p.id]),G.useEffect(()=>{_()},[n]);const _=async()=>{N(!0);try{const[E,P]=await Promise.all([be.get(`/world-bible/folders/${n}/entities`),be.get(`/world-bible/folders/${n}`)]);f(E),P.folder?(m(P.folder),b(P.path||[])):(m(P||{name:"Folder"}),b([]))}catch(E){console.error("Error loading folder content:",E),m(null),b([])}finally{N(!1)}};if(y)return l.jsx("div",{className:"p-20 text-center animate-pulse text-text-muted",children:"Loading sector..."});if(!p)return l.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-20 text-text-muted",children:[l.jsx("span",{className:"material-symbols-outlined text-6xl mb-4 opacity-20",children:"folder_off"}),l.jsx("h2",{className:"text-xl font-bold opacity-50",children:"Folder Not Found"}),l.jsx("p",{className:"text-sm opacity-30 mt-2",children:"The sector you are looking for does not exist or has been moved."}),l.jsx(qa,{to:`/${e}/${t}/bible`,className:"mt-6 px-6 py-2 bg-white/5 hover:bg-white/10 rounded-full text-xs font-bold transition-colors",children:"Return to Root"})]});const x=p&&p.tipo&&(["UNIVERSE","GALAXY","SYSTEM","PLANET"].includes(p.tipo)||p.tipo==="MAGIC"),w=p?y2(p.tipo):Cs.FOLDER;return x?l.jsxs("div",{className:"flex-1 overflow-y-auto bg-[#0a0a0c] text-white w-full h-full relative",children:[l.jsxs("div",{className:`w-full min-h-[300px] ${w.bgColor} relative flex items-end p-10 border-b border-white/5`,children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0a0a0c] to-transparent opacity-80 pointer-events-none"}),l.jsx("div",{className:"absolute top-6 left-10 z-20",children:l.jsx(UZ,{path:g,currentFolder:p})}),l.jsxs("div",{className:"relative z-10 flex gap-8 items-end w-full max-w-7xl mx-auto",children:[l.jsx("div",{className:`w-32 h-32 rounded-3xl ${w.bgColor} border border-white/10 flex items-center justify-center shadow-2xl`,children:l.jsx("span",{className:`material-symbols-outlined text-6xl ${w.color}`,children:w.icon})}),l.jsxs("div",{className:"flex-1 mb-2",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border border-white/10 ${w.bgColor} ${w.color}`,children:w.label}),l.jsxs("span",{className:"text-white/30 text-xs font-mono tracking-widest uppercase",children:["ID: ",p.id]})]}),l.jsx("h1",{className:"text-6xl font-black tracking-tighter text-white mb-2",children:p.nombre}),l.jsx("p",{className:"text-lg text-white/50 max-w-2xl font-light leading-relaxed",children:p.descripcion||"Sin descripcin definida para este sector cosmolgico."})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:()=>r(`/${e}/${t}/bible/folder/${n}/entity/new/entidadindividual`),className:"px-4 py-2 bg-primary/20 hover:bg-primary/30 text-primary rounded-xl text-[10px] font-black uppercase tracking-widest flex items-center gap-2 transition-all",children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"person_add"})," Nueva Entidad"]}),l.jsxs("button",{onClick:()=>r(`/${e}/${t}/map-editor/create/${n}`,{state:{folderId:p==null?void 0:p.id}}),className:"px-4 py-2 bg-white/5 hover:bg-white/10 text-white rounded-xl text-[10px] font-black uppercase tracking-widest flex items-center gap-2 transition-all border border-glass-border",children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"map"})," Mapa"]})]})]})]}),l.jsxs("div",{className:"max-w-7xl mx-auto p-10 grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-[#13141f] border border-white/5 rounded-2xl p-6",children:[l.jsx("h3",{className:"text-xs font-bold text-white/40 uppercase tracking-widest mb-4",children:"Estadsticas"}),l.jsx("div",{className:"grid grid-cols-2 gap-4",children:l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-black text-white",children:d.length}),l.jsx("div",{className:"text-[10px] text-white/40 uppercase",children:"Entidades"})]})})]}),l.jsxs("div",{className:"bg-[#13141f] border border-white/5 rounded-2xl p-6 h-64 flex flex-col",children:[l.jsx("h3",{className:"text-xs font-bold text-white/40 uppercase tracking-widest mb-4",children:"Notas Rpidas"}),l.jsx("textarea",{className:"flex-1 bg-transparent resize-none outline-none text-sm text-white/70 placeholder-white/20",placeholder:"Escribir notas de la zona..."})]})]}),l.jsxs("div",{className:"lg:col-span-2",children:[l.jsx("h3",{className:"text-xs font-bold text-white/40 uppercase tracking-widest mb-4",children:"Contenido Interno"}),d.length===0&&l.jsxs("div",{className:"p-12 border border-dashed border-white/10 rounded-2xl text-center",children:[l.jsx("span",{className:"material-symbols-outlined text-4xl text-white/20 mb-2",children:"folder_open"}),l.jsx("p",{className:"text-white/30 text-sm",children:"Este sector est vaco."})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:d.map(E=>l.jsx(v2,{item:E,type:"entity",linkTo:`/${e}/${t}/bible/folder/${p.slug||n}/entity/${E.slug||E.id}`,onDelete:()=>a(E.id,(p==null?void 0:p.id)||n)},E.id))})]})]})]}):l.jsxs("div",{className:"flex-1 p-8 max-w-[1600px] mx-auto w-full h-full overflow-y-auto",children:[l.jsxs("header",{className:"mb-8 flex items-end justify-between",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsxs(qa,{to:`/${e}/${t}/bible`,className:"text-xs font-bold text-text-muted hover:text-primary transition-colors flex items-center gap-1",children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"arrow_back"})," Root"]}),p&&l.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] bg-white/5 border border-white/10 ${w.color}`,children:w.label})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:`material-symbols-outlined text-3xl ${w.color}`,children:w.icon}),l.jsx("h1",{className:"text-4xl font-black text-white tracking-tighter",children:(p==null?void 0:p.nombre)||"Unnamed Folder"})]}),l.jsx("p",{className:"text-white/50 text-sm mt-2 max-w-xl",children:p==null?void 0:p.descripcion})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:()=>r(`/${e}/${t}/bible/folder/${n}/entity/new/entidadindividual`),className:"h-10 px-4 rounded-xl bg-primary hover:bg-primary-light transition flex items-center gap-2 text-xs font-bold text-white shadow-lg shadow-primary/20",children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"person"}),l.jsx("span",{children:"Nueva Entidad"})]}),l.jsxs("button",{onClick:()=>r(`/${e}/${t}/map-editor/create/${n}`,{state:{folderId:p==null?void 0:p.id}}),className:"h-10 px-4 rounded-xl bg-surface-light border border-white/5 hover:bg-white/10 transition flex items-center gap-2 text-xs font-bold text-white shadow-lg",children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"map"}),l.jsx("span",{children:"Mapa"})]}),l.jsxs("button",{onClick:()=>s(p,"TIMELINE"),className:"h-10 px-4 rounded-xl bg-surface-light border border-white/5 hover:bg-white/10 transition flex items-center gap-2 text-xs font-bold text-white",children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"timeline"}),l.jsx("span",{children:"Timeline"})]})]})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:v.map(E=>l.jsx(v2,{item:E,type:"entity",linkTo:`/${e}/${t}/bible/folder/${(p==null?void 0:p.slug)||n}/entity/${E.slug||E.id}`,onDelete:()=>a(E.id,(p==null?void 0:p.id)||n)},E.id))}),d.length===0&&l.jsx("div",{className:"p-20 text-center border-2 border-dashed border-glass-border rounded-[3rem] opacity-30 mt-8",children:l.jsx("p",{className:"text-text-muted font-bold uppercase tracking-widest",children:"Empty Folder"})})]})},HZ=e=>{switch(e==null?void 0:e.toLowerCase()){case"text":return"notes";case"short_text":return"short_text";case"number":return"pin";case"date":return"calendar_today";case"select":return"list";case"boolean":return"check_box";case"map":return"map";case"timeline":return"timeline";case"character":case"entidadindividual":return"person";case"location":case"zona":case"construccion":return"location_on";case"culture":case"entidadcolectiva":return"groups";case"universe":case"galaxy":case"system":case"planet":return"public";case"entity_link":return"link";default:return"description"}},VZ=(e,t,n,r)=>{const i=n.slug||n.id;return`/${e}/${t}/bible/folder/${r||"root"}/entity/${i}`},gO=({folder:e,onCreateSubfolder:t,onRename:n,onDeleteFolder:r,onDeleteEntity:i,onCreateTemplate:a,onMoveEntity:s,onCreateEntity:o,onConfirmCreate:c,className:d})=>{const{username:f,projectName:p}=nr(),m=tr(),[g,b]=G.useState(!1),[y,N]=G.useState({folders:[],entities:[]}),[v,_]=G.useState(!1),[x,w]=G.useState(null),[E,P]=G.useState(e.nombre),[A,T]=G.useState(!1),[L,k]=G.useState(null);G.useEffect(()=>{P(e.nombre)},[e.nombre]),G.useEffect(()=>{const I=z=>{var ne,ue,se,ce;const{folderId:W,optimisticType:Q,confirmedType:ee,removeId:Y,item:U,oldId:J,expand:te,type:X}=z.detail||{};if(W===e.id){if(te&&(b(!0),v||C()),v)if(Q){const de=Q==="folder"?"folders":"entities";N(Oe=>({...Oe,[de]:[...Oe[de].filter(ge=>ge.id!==U.id),U]}))}else if(ee){const de=ee==="folder"?"folders":"entities";N(Oe=>({...Oe,[de]:Oe[de].map(ge=>ge.id===J?U:ge)}))}else if(Y){const de=X==="folder"?"folders":"entities";N(Oe=>({...Oe,[de]:Oe[de].filter(ge=>ge.id!==Y)}))}else!Q&&!ee&&!Y&&C()}else((ne=z.detail)==null?void 0:ne.targetFolderId)===e.id&&((ue=z.detail)==null?void 0:ue.type)==="move-in"?v&&C():((se=z.detail)==null?void 0:se.sourceFolderId)===e.id&&((ce=z.detail)==null?void 0:ce.type)==="move-out"&&v&&N(de=>({...de,entities:de.entities.filter(Oe=>Oe.id!==Oe.detail.entityId)}))};return window.addEventListener("folder-update",I),()=>window.removeEventListener("folder-update",I)},[e.id,v]);const C=async()=>{try{console.log("Loading content for folder:",e.id,"Slug:",e.slug);const[I,z]=await Promise.all([be.get(`/world-bible/folders/${e.id}/subfolders`),be.get(`/world-bible/folders/${e.id}/entities`)]);N({folders:I,entities:z}),_(!0)}catch(I){console.error("Error reloading folder content:",I),I.message&&I.message.includes("404")&&console.error(`404 for folder ${e.id} (${e.nombre})`)}},O=I=>{I.stopPropagation(),b(!g),!v&&!g&&C()},F=()=>m(`/${f}/${p}/bible/folder/${e.slug||e.id}`),M=(I,z,W,Q)=>{I.preventDefault(),I.stopPropagation(),w({x:I.clientX,y:I.clientY,type:z,id:W,name:Q})},D=()=>w(null);G.useEffect(()=>{if(x)return window.addEventListener("click",D),()=>window.removeEventListener("click",D)},[x]);const $=I=>{if(I.key==="Enter"){I.preventDefault();const z=I.target.value.trim();z?c(e.id,z,"folder",e.parentId,e.tipoEspecial):e.isNew&&i(e.id,e.parentId)}};if(e.isNew)return l.jsx("div",{className:"px-3 py-1 animate-in fade-in zoom-in-95 duration-200",children:l.jsx("input",{autoFocus:!0,type:"text",className:"w-full bg-surface-light border border-primary/50 rounded px-2 py-1 text-xs text-white outline-none",placeholder:"Folder Name...",onKeyDown:$,onBlur:I=>{const z=I.target.value.trim();z?c(e.id,z,"folder",e.parentId):i(e.id,e.parentId)}})});const V=({item:I,type:z})=>l.jsx("div",{className:"px-3 py-1 animate-in fade-in zoom-in-95 duration-200",children:l.jsx("input",{autoFocus:!0,type:"text",defaultValue:I.nombre||"",className:"w-full bg-surface-light border border-primary/50 rounded px-2 py-1 text-xs text-white outline-none",placeholder:"Name...",onKeyDown:W=>{if(W.key==="Enter"){W.preventDefault();const Q=W.target.value.trim();Q?c(I.id,Q,z,e.id,I.tipoEspecial):I.isNew&&i(I.id,e.id),k(null)}else W.key==="Escape"&&(k(null),I.isNew&&i(I.id,e.id))},onBlur:W=>{const Q=W.target.value.trim();Q?c(I.id,Q,z,e.id,I.tipoEspecial):I.isNew&&i(I.id,e.id),k(null)}})}),K=I=>{I.preventDefault(),I.stopPropagation(),I.currentTarget.classList.add("bg-primary/20")},H=I=>{I.preventDefault(),I.stopPropagation(),I.currentTarget.classList.remove("bg-primary/20")},q=I=>{I.preventDefault(),I.stopPropagation(),I.currentTarget.classList.remove("bg-primary/20");const z=I.dataTransfer.getData("entityId"),W=I.dataTransfer.getData("sourceFolderId");z&&W&&W!==String(e.id)&&s(z,e.id,W)};return l.jsxs("div",{className:`space-y-1 select-none ${d||""}`,children:[l.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 rounded-xl text-xs font-bold text-text-muted hover:text-white hover:bg-white/5 cursor-pointer transition-all group relative",onClick:F,onContextMenu:I=>M(I,"folder",e.id,e.nombre),onDragOver:K,onDragLeave:H,onDrop:q,children:[l.jsx("span",{onClick:O,className:`material-symbols-outlined text-lg transition-transform hover:text-primary ${g?"rotate-90 text-primary":"opacity-50"}`,children:"chevron_right"}),l.jsx("span",{className:`material-symbols-outlined text-lg ${y2(e.tipo).color}`,children:y2(e.tipo).icon}),A?l.jsx("input",{autoFocus:!0,className:"bg-surface-light border border-primary/50 rounded px-2 py-0.5 text-xs text-white outline-none flex-1 min-w-0",defaultValue:E,onKeyDown:async I=>{if(I.key==="Enter"){const z=I.target.value.trim();if(z&&z!==E)try{await n(e.id,z),P(z)}catch(W){console.error(W)}T(!1)}else I.key==="Escape"&&T(!1)},onBlur:()=>T(!1),onClick:I=>I.stopPropagation()}):l.jsx("span",{className:"truncate flex-1",children:E})]}),x&&l.jsxs("div",{className:"fixed bg-surface-dark border border-glass-border shadow-2xl rounded-xl py-2 z-50 w-48 text-xs font-medium flex flex-col",style:{top:x.y,left:x.x},onClick:I=>I.stopPropagation(),children:[l.jsx("div",{className:"px-4 py-2 border-b border-white/5 font-bold text-text-muted truncate",children:x.name}),x.type==="folder"?l.jsxs(l.Fragment,{children:[l.jsxs("button",{className:"px-4 py-2 hover:bg-white/5 text-left flex items-center gap-2",onClick:()=>{o(e.id,"entidadindividual"),D()},children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"person"})," New Character"]}),l.jsxs("button",{className:"px-4 py-2 hover:bg-white/5 text-left flex items-center gap-2",onClick:()=>{m(`/${f}/${p}/map-editor/create/${e.id}`),D()},children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"map"})," New Map"]}),l.jsx("div",{className:"h-px bg-white/5 my-1"}),l.jsxs("button",{className:"px-4 py-2 hover:bg-white/5 text-left flex items-center gap-2",onClick:()=>{T(!0),D()},children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"})," Rename Folder"]}),l.jsxs("button",{className:"px-4 py-2 hover:bg-red-500/10 text-red-400 text-left flex items-center gap-2",onClick:()=>{r(e.id,e.parentId),D()},children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})," Delete Folder"]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("button",{className:"px-4 py-2 hover:bg-white/5 text-left flex items-center gap-2 cursor-pointer",onClick:()=>{k(x.id),D()},children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"})," Rename"]}),l.jsxs("button",{className:"px-4 py-2 hover:bg-white/5 text-left flex items-center gap-2 cursor-pointer",onClick:async()=>{try{await be.entityService.toggleFavorite(x.id),window.dispatchEvent(new CustomEvent("favorites-update")),window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:e.id}}))}catch(I){console.error(I)}D()},children:[l.jsx("span",{className:"material-symbols-outlined text-sm text-yellow-500",children:"star"})," Toggle Favorite"]}),l.jsxs("button",{className:"px-4 py-2 hover:bg-red-500/10 text-red-400 text-left flex items-center gap-2",onClick:()=>{i(x.id,e.id),D()},children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})," Delete Entity"]})]})]}),g&&l.jsxs("div",{className:"ml-6 pl-4 border-l border-glass-border space-y-1 animate-slide-in",children:[y.folders.map(I=>l.jsx(gO,{folder:I,onCreateSubfolder:t,onRename:n,onDeleteFolder:r,onDeleteEntity:i,onCreateTemplate:a,onMoveEntity:s,onCreateEntity:o,onConfirmCreate:c},I.id)),y.entities.map(I=>I.isNew||I.id===L?l.jsx(V,{item:I,type:"entity"},I.id):l.jsxs(qa,{to:VZ(f,p,I,e.slug||e.id),onContextMenu:z=>M(z,"entity",I.id,I.nombre),className:`flex items-center gap-3 px-3 py-2 rounded-xl text-[11px] font-medium text-text-muted hover:text-white hover:bg-primary/10 transition-all group cursor-grab active:cursor-grabbing ${I.pending?"opacity-50 pointer-events-none":""}`,draggable:!I.pending,onDragStart:z=>{z.dataTransfer.setData("entityId",I.id),z.dataTransfer.setData("sourceFolderId",e.id)},children:[l.jsx("span",{className:"material-symbols-outlined text-sm opacity-70 group-hover:text-primary transition-colors",children:HZ(I.tipoEspecial)}),l.jsx("span",{className:"truncate flex-1",children:I.nombre}),I.favorite&&l.jsx("span",{className:"material-symbols-outlined text-[10px] text-yellow-500",title:"Favorito",children:"star"})]},I.id)),v&&y.folders.length===0&&y.entities.length===0&&l.jsx("div",{className:"px-3 py-2 text-[10px] text-text-muted/30 uppercase font-black italic tracking-tighter",children:"Empty Sector"})]})]})},WZ=({isOpen:e,onClose:t,onCreate:n,parentFolder:r})=>{const[i,a]=G.useState({nombre:"",descripcion:"",tipo:"FOLDER",canvasType:"BLANK"});if(!e)return null;const s=()=>{n(i),t(),a({nombre:"",descripcion:"",tipo:"FOLDER",canvasType:"BLANK"})},o=[Cs.UNIVERSE,Cs.GALAXY,Cs.SYSTEM,Cs.PLANET];return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-[#1a1b26] w-full max-w-4xl rounded-2xl shadow-2xl border border-white/10 overflow-hidden flex flex-col max-h-[90vh]",children:[l.jsxs("div",{className:"p-6 border-b border-white/5 flex justify-between items-center bg-[#1f202e]",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-500/20 flex items-center justify-center text-indigo-400",children:l.jsx("span",{className:"material-icons text-sm",children:"add"})}),l.jsx("h2",{className:"text-xl font-semibold text-white",children:r?"Crear Nuevo Espacio":"Crear Nuevo Mapa"})]}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition",children:l.jsx("span",{className:"material-icons",children:"close"})})]}),l.jsx("div",{className:"p-8 overflow-y-auto flex-1",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsx("h3",{className:"text-sm font-black uppercase tracking-widest text-indigo-400",children:"Identidad"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-black text-white/30 uppercase mb-2",children:"Nombre del Espacio"}),l.jsx("input",{autoFocus:!0,type:"text",value:i.nombre,onChange:c=>a({...i,nombre:c.target.value}),className:"w-full bg-black/40 border border-white/5 rounded-2xl px-5 py-4 text-white focus:outline-none focus:border-indigo-500/50 transition-all shadow-inner",placeholder:"ej. Sistema Solar"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-black text-white/30 uppercase mb-2",children:"Descripcin"}),l.jsx("textarea",{value:i.descripcion,onChange:c=>a({...i,descripcion:c.target.value}),className:"w-full h-32 bg-black/40 border border-white/5 rounded-2xl px-5 py-4 text-white focus:outline-none focus:border-indigo-500/50 resize-none transition-all",placeholder:"Detalles sobre este nivel jerrquico..."})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsx("h3",{className:"text-sm font-black uppercase tracking-widest text-indigo-400",children:"Configuracin"}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("label",{className:"block text-[10px] font-black text-white/30 uppercase mb-1",children:"Tipo de Jerarqua"}),l.jsx("div",{className:"grid grid-cols-2 gap-2",children:o.concat([{id:"FOLDER",label:"Carpeta",icon:"folder",color:"text-white/50"}]).map(c=>l.jsxs("div",{onClick:()=>a({...i,tipo:c.id}),className:`flex items-center gap-3 p-3 rounded-xl border cursor-pointer transition-all ${i.tipo===c.id?"bg-indigo-500/10 border-indigo-500/50":"bg-white/5 border-white/5 hover:bg-white/10"}`,children:[l.jsx("span",{className:`material-icons text-lg ${c.color||""}`,children:c.icon}),l.jsx("span",{className:"text-xs font-bold text-white/80",children:c.label})]},c.id||"FOLDER"))})]}),l.jsx("div",{className:"p-4 rounded-2xl bg-indigo-500/5 border border-indigo-500/10",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-500/20 flex items-center justify-center text-indigo-400",children:l.jsx("span",{className:"material-icons",children:"info"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-[10px] uppercase font-black text-indigo-300",children:"Ubicacin Actual"}),l.jsx("p",{className:"text-xs text-indigo-100/50",children:r?r.nombre:"Raz del Mundo"})]})]})})]})]})}),l.jsxs("div",{className:"p-6 border-t border-white/5 flex justify-end gap-3 bg-[#1f202e]",children:[l.jsx("button",{onClick:t,className:"px-6 py-3 rounded-xl text-xs font-black uppercase tracking-widest text-text-muted hover:text-white transition",children:"Cancelar"}),l.jsx("button",{onClick:s,disabled:!i.nombre,className:"px-8 py-3 rounded-xl bg-indigo-600 hover:bg-indigo-500 text-white text-xs font-black uppercase tracking-widest shadow-lg shadow-indigo-500/20 transition-all disabled:opacity-30 disabled:pointer-events-none",children:"Confirmar y Crear"})]})]})})},KZ=()=>{const{username:e,projectName:t}=nr(),n=tr(),{handleCreateEntity:r,...i}=Ka()||{},[a,s]=G.useState([]),[o,c]=G.useState([]),[d,f]=G.useState(!1),[p,m]=G.useState(!1),[g,b]=G.useState(null),[y,N]=G.useState(!1),[v,_]=G.useState(null),x=`/${e}/${t}/bible`;G.useEffect(()=>{w(),E();const D=()=>E();return window.addEventListener("favorites-update",D),()=>window.removeEventListener("favorites-update",D)},[t]);const w=async()=>{try{const D=await be.get("/world-bible/folders");s(D)}catch(D){console.error("Error loading folders:",D)}},E=async()=>{try{const D=await be.get("/world-bible/favorites");c(D)}catch(D){console.error("Error loading favorites:",D)}},P=(D=null)=>{b(D),m(!0),f(!1)},A=async(D=null,$="FOLDER")=>{try{const V=D?typeof D=="object"?D.id:D:null,K=await be.post("/world-bible/folders",{nombre:$==="TIMELINE"?"Nueva Lnea de Tiempo":"Nueva Carpeta",padreId:V,tipo:$});if(V===null){const H=await be.get("/world-bible/folders");s(H),window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:null}}))}else window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:V,optimisticType:"folder",item:K,expand:!0}}))}catch(V){console.error("Error creating simple folder:",V)}},T=async D=>{try{const $=g?g.id:null,V=await be.post("/world-bible/folders",{nombre:D.nombre,descripcion:D.descripcion,padreId:$,tipo:D.tipo});if($===null){const K=await be.get("/world-bible/folders");s(K),window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:null}}))}else V.id||console.error("CRITICAL: Created folder has no ID!",V),window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:$,optimisticType:"folder",item:V,expand:!0}}))}catch($){console.error($),alert("Error creating folder/zone.")}},L=async(D,$="entidadindividual")=>{const V=typeof D=="object"?D.slug||D.id:D;n(`${x}/folder/${V}/entity/new/${$}`)},k=async(D,$)=>{try{await be.put(`/world-bible/folders/${D}`,{nombre:$}),s(V=>V.map(K=>K.id===D?{...K,nombre:$}:K))}catch(V){throw V}},C=(D,$=null)=>{_({id:D,parentId:$,type:"folder"}),N(!0)},O=async()=>{if(!v)return;const{id:D,parentId:$,type:V,folderId:K}=v;try{V==="folder"?(await be.delete(`/world-bible/folders/${D}`),$===null&&s(H=>H.filter(q=>q.id!==D)),window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:$,removeId:D,type:"folder"}}))):V==="entity"&&(await be.delete(`/world-bible/entities/${D}`),window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:K,removeId:D,type:"entity"}})))}catch(H){console.error("Deletion failed:",H),alert("Error trying to delete item.")}finally{_(null)}},F=(D,$)=>{_({id:D,folderId:$,type:"entity"}),N(!0)},M=async(D,$,V,K,H)=>{try{if(V==="folder")typeof D=="number"&&!D.toString().startsWith("temp")&&(await be.put(`/world-bible/folders/${D}`,{nombre:$}),window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:K,confirmedType:"folder",oldId:D,item:{id:D,nombre:$,parentId:K,tipo:H,uiKey:Date.now()}}})),K||s(q=>q.map(I=>I.id===D?{...I,nombre:$}:I)));else if(V==="entity")if(typeof D=="string"&&D.startsWith("new-")){const q=await be.post("/world-bible/entities",{nombre:$,carpetaId:K,tipoEspecial:H||"entidadindividual"});window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:K,confirmedType:"entity",oldId:D,item:q}}))}else await be.put(`/world-bible/entities/${D}`,{nombre:$}),window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:K,confirmedType:"entity",oldId:D,item:{id:D,nombre:$,carpeta:{id:K},tipoEspecial:H,slug:D}}})),window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:K}}))}catch(q){console.error("Creation/Rename failed",q),V==="folder"&&C(D,K)}};return l.jsxs("div",{className:"flex h-full w-full bg-background-dark max-w-[1920px] mx-auto",children:[l.jsxs("aside",{className:"w-80 flex-none flex flex-col border-r border-glass-border bg-surface-dark/50 z-10",children:[l.jsx("div",{className:"p-4 border-b border-glass-border",children:l.jsxs("div",{className:"relative group mb-3",children:[l.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-text-muted text-sm group-focus-within:text-primary transition-colors",children:"search"}),l.jsx("input",{type:"text",placeholder:"Buscar en Biblia...",className:"w-full bg-surface-light/50 border border-glass-border rounded-xl py-2 pl-9 pr-3 text-xs focus:border-primary/50 outline-none transition-all text-white placeholder:text-text-muted/50"})]})}),l.jsxs("div",{className:"px-2 pt-2",children:[l.jsx("div",{className:"flex items-center justify-between px-2 mb-1",children:l.jsx("h2",{className:"text-[10px] font-black uppercase tracking-widest text-text-muted",children:"Favoritos"})}),o.length>0?l.jsx("div",{className:"space-y-0.5",children:o.map(D=>l.jsxs("div",{onClick:()=>n(`${x}/folder/${D.carpeta.slug||D.carpeta.id}/entity/${D.slug||D.id}`),className:"flex items-center gap-3 px-3 py-1.5 rounded-lg text-[11px] font-medium text-text-muted hover:text-white hover:bg-white/5 cursor-pointer transition-all group",children:[l.jsx("span",{className:"material-symbols-outlined text-sm text-yellow-500/70 group-hover:text-yellow-400",children:"star"}),l.jsx("span",{className:"truncate",children:D.nombre})]},D.id))}):l.jsx("div",{className:"px-4 py-2 text-[10px] text-text-muted/30 italic",children:"Sin favoritos"}),l.jsx("div",{className:"h-px bg-glass-border my-2 opacity-50"})]}),l.jsx("div",{className:"p-4 border-b border-glass-border pt-0",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-[10px] font-black uppercase tracking-widest text-text-muted",children:"Explorador"}),l.jsx("div",{className:"relative",children:l.jsx("button",{className:"transition-colors hover:text-white text-primary",onClick:()=>A(null),title:"Crear Carpeta",children:l.jsx("span",{className:"material-symbols-outlined text-sm",children:"create_new_folder"})})})]})}),l.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar p-2 space-y-0.5",children:a.length===0?l.jsxs("div",{className:"p-8 text-center opacity-30",children:[l.jsx("span",{className:"material-symbols-outlined text-3xl mb-2",children:"folder_off"}),l.jsx("p",{className:"text-[10px] uppercase font-bold",children:"Biblia Vaca"})]}):a.map(D=>l.jsx(gO,{folder:D,onCreateSubfolder:A,onRename:k,onDeleteFolder:C,onDeleteEntity:C,onCreateTemplate:()=>{},onMoveEntity:($,V,K)=>console.log("move",$,V,K),onCreateEntity:L,onConfirmCreate:M},D.uiKey||D.id))})]}),l.jsx("main",{className:"flex-1 overflow-hidden relative bg-gradient-to-br from-background-dark to-surface-dark/20",children:l.jsx(Ew,{context:{...i,folders:a,handleCreateEntity:L,handleOpenCreateModal:P,handleDeleteFolder:C,handleDeleteEntity:F,handleCreateSimpleFolder:A}})}),l.jsx(WZ,{isOpen:p,onClose:()=>m(!1),onCreate:T,parentFolder:g}),l.jsx(Iu,{isOpen:y,onClose:()=>N(!1),onConfirm:O,title:(v==null?void 0:v.type)==="folder"?"Borrar Carpeta":"Borrar Entidad",message:(v==null?void 0:v.type)==="folder"?"Esta accin eliminar la carpeta y todo su contenido. Ests seguro?":"Ests seguro de querer eliminar esta entidad de tu mundo?",confirmText:"S, borrar"})]})},YZ=()=>{const{username:e,projectName:t}=nr(),{handleOpenCreateModal:n,handleDeleteFolder:r,handleCreateSimpleFolder:i,folders:a=[]}=Ka();return a===void 0?l.jsx("div",{className:"p-20 text-center animate-pulse text-text-muted",children:"Loading World Bible..."}):l.jsxs("div",{className:"flex-1 p-8 max-w-[1600px] mx-auto w-full h-full overflow-y-auto",children:[l.jsxs("header",{className:"mb-8 flex items-end justify-between",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-3 text-xs font-black uppercase tracking-widest text-primary italic mb-2",children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"auto_stories"}),"World Bible"]}),l.jsx("h1",{className:"text-4xl font-black text-white tracking-tighter",children:"Root Index"}),l.jsx("p",{className:"text-text-muted mt-2 max-w-lg text-sm",children:"The central archive of your world. Organize characters, locations, timelines, and maps."})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("button",{onClick:()=>i(null,"FOLDER"),className:"px-6 py-2 bg-primary hover:bg-primary-light text-white rounded-xl text-xs font-bold flex items-center gap-2 transition-all shadow-lg shadow-primary/20",children:[l.jsx("span",{className:"material-symbols-outlined text-sm",children:"create_new_folder"})," Nueva Carpeta"]})})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:a.map(s=>l.jsx(v2,{item:s,type:"folder",linkTo:`/${e}/${t}/bible/folder/${s.slug||s.id}`,onDelete:()=>r(s.id)},s.id))}),a.length===0&&l.jsxs("div",{className:"p-20 text-center border-2 border-dashed border-glass-border rounded-[3rem] opacity-30 mt-8",children:[l.jsx("span",{className:"material-symbols-outlined text-6xl mb-4 text-text-muted",children:"library_books"}),l.jsx("h3",{className:"text-xl font-bold text-white uppercase tracking-widest",children:"Archivo Vaco"}),l.jsx("p",{className:"text-text-muted mt-2",children:"Comienza creando espacios para organizar tu mundo."})]})]})};var vO={exports:{}},Fp={},qh={},Be={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._registerNode=e.Konva=e.glob=void 0;const t=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}e.glob=typeof En<"u"?En:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},e.Konva={_global:e.glob,version:"9.3.16",isBrowser:n(),isUnminified:/param/.test((function(i){}).toString()),dblClickWindow:400,getAngle(i){return e.Konva.angleDeg?i*t:i},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return e.Konva.DD.isDragging},isTransforming(){var i;return(i=e.Konva.Transformer)===null||i===void 0?void 0:i.isTransforming()},isDragReady(){return!!e.Konva.DD.node},releaseCanvasOnDestroy:!0,document:e.glob.document,_injectGlobal(i){e.glob.Konva=i}};const r=i=>{e.Konva[i.prototype.getClassName()]=i};e._registerNode=r,e.Konva._injectGlobal(e.Konva)})(Be);var Ot={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Util=e.Transform=void 0;const t=Be;class n{constructor(w=[1,0,0,1,0,0]){this.dirty=!1,this.m=w&&w.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(w){w.m[0]=this.m[0],w.m[1]=this.m[1],w.m[2]=this.m[2],w.m[3]=this.m[3],w.m[4]=this.m[4],w.m[5]=this.m[5]}point(w){const E=this.m;return{x:E[0]*w.x+E[2]*w.y+E[4],y:E[1]*w.x+E[3]*w.y+E[5]}}translate(w,E){return this.m[4]+=this.m[0]*w+this.m[2]*E,this.m[5]+=this.m[1]*w+this.m[3]*E,this}scale(w,E){return this.m[0]*=w,this.m[1]*=w,this.m[2]*=E,this.m[3]*=E,this}rotate(w){const E=Math.cos(w),P=Math.sin(w),A=this.m[0]*E+this.m[2]*P,T=this.m[1]*E+this.m[3]*P,L=this.m[0]*-P+this.m[2]*E,k=this.m[1]*-P+this.m[3]*E;return this.m[0]=A,this.m[1]=T,this.m[2]=L,this.m[3]=k,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(w,E){const P=this.m[0]+this.m[2]*E,A=this.m[1]+this.m[3]*E,T=this.m[2]+this.m[0]*w,L=this.m[3]+this.m[1]*w;return this.m[0]=P,this.m[1]=A,this.m[2]=T,this.m[3]=L,this}multiply(w){const E=this.m[0]*w.m[0]+this.m[2]*w.m[1],P=this.m[1]*w.m[0]+this.m[3]*w.m[1],A=this.m[0]*w.m[2]+this.m[2]*w.m[3],T=this.m[1]*w.m[2]+this.m[3]*w.m[3],L=this.m[0]*w.m[4]+this.m[2]*w.m[5]+this.m[4],k=this.m[1]*w.m[4]+this.m[3]*w.m[5]+this.m[5];return this.m[0]=E,this.m[1]=P,this.m[2]=A,this.m[3]=T,this.m[4]=L,this.m[5]=k,this}invert(){const w=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),E=this.m[3]*w,P=-this.m[1]*w,A=-this.m[2]*w,T=this.m[0]*w,L=w*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),k=w*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=E,this.m[1]=P,this.m[2]=A,this.m[3]=T,this.m[4]=L,this.m[5]=k,this}getMatrix(){return this.m}decompose(){const w=this.m[0],E=this.m[1],P=this.m[2],A=this.m[3],T=this.m[4],L=this.m[5],k=w*A-E*P,C={x:T,y:L,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(w!=0||E!=0){const O=Math.sqrt(w*w+E*E);C.rotation=E>0?Math.acos(w/O):-Math.acos(w/O),C.scaleX=O,C.scaleY=k/O,C.skewX=(w*P+E*A)/k,C.skewY=0}else if(P!=0||A!=0){const O=Math.sqrt(P*P+A*A);C.rotation=Math.PI/2-(A>0?Math.acos(-P/O):-Math.acos(P/O)),C.scaleX=k/O,C.scaleY=O,C.skewX=0,C.skewY=(w*P+E*A)/k}return C.rotation=e.Util._getRotation(C.rotation),C}}e.Transform=n;let r="[object Array]",i="[object Number]",a="[object String]",s="[object Boolean]",o=Math.PI/180,c=180/Math.PI,d="#",f="",p="0",m="Konva warning: ",g="Konva error: ",b="rgb(",y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},N=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,v=[];const _=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(x){setTimeout(x,60)};e.Util={_isElement(x){return!!(x&&x.nodeType==1)},_isFunction(x){return!!(x&&x.constructor&&x.call&&x.apply)},_isPlainObject(x){return!!x&&x.constructor===Object},_isArray(x){return Object.prototype.toString.call(x)===r},_isNumber(x){return Object.prototype.toString.call(x)===i&&!isNaN(x)&&isFinite(x)},_isString(x){return Object.prototype.toString.call(x)===a},_isBoolean(x){return Object.prototype.toString.call(x)===s},isObject(x){return x instanceof Object},isValidSelector(x){if(typeof x!="string")return!1;const w=x[0];return w==="#"||w==="."||w===w.toUpperCase()},_sign(x){return x===0||x>0?1:-1},requestAnimFrame(x){v.push(x),v.length===1&&_(function(){const w=v;v=[],w.forEach(function(E){E()})})},createCanvasElement(){const x=document.createElement("canvas");try{x.style=x.style||{}}catch{}return x},createImageElement(){return document.createElement("img")},_isInDocument(x){for(;x=x.parentNode;)if(x==document)return!0;return!1},_urlToImage(x,w){const E=e.Util.createImageElement();E.onload=function(){w(E)},E.src=x},_rgbToHex(x,w,E){return((1<<24)+(x<<16)+(w<<8)+E).toString(16).slice(1)},_hexToRgb(x){x=x.replace(d,f);const w=parseInt(x,16);return{r:w>>16&255,g:w>>8&255,b:w&255}},getRandomColor(){let x=(Math.random()*16777215<<0).toString(16);for(;x.length<6;)x=p+x;return d+x},getRGB(x){let w;return x in y?(w=y[x],{r:w[0],g:w[1],b:w[2]}):x[0]===d?this._hexToRgb(x.substring(1)):x.substr(0,4)===b?(w=N.exec(x.replace(/ /g,"")),{r:parseInt(w[1],10),g:parseInt(w[2],10),b:parseInt(w[3],10)}):{r:0,g:0,b:0}},colorToRGBA(x){return x=x||"black",e.Util._namedColorToRBA(x)||e.Util._hex3ColorToRGBA(x)||e.Util._hex4ColorToRGBA(x)||e.Util._hex6ColorToRGBA(x)||e.Util._hex8ColorToRGBA(x)||e.Util._rgbColorToRGBA(x)||e.Util._rgbaColorToRGBA(x)||e.Util._hslColorToRGBA(x)},_namedColorToRBA(x){const w=y[x.toLowerCase()];return w?{r:w[0],g:w[1],b:w[2],a:1}:null},_rgbColorToRGBA(x){if(x.indexOf("rgb(")===0){x=x.match(/rgb\(([^)]+)\)/)[1];const w=x.split(/ *, */).map(Number);return{r:w[0],g:w[1],b:w[2],a:1}}},_rgbaColorToRGBA(x){if(x.indexOf("rgba(")===0){x=x.match(/rgba\(([^)]+)\)/)[1];const w=x.split(/ *, */).map((E,P)=>E.slice(-1)==="%"?P===3?parseInt(E)/100:parseInt(E)/100*255:Number(E));return{r:w[0],g:w[1],b:w[2],a:w[3]}}},_hex8ColorToRGBA(x){if(x[0]==="#"&&x.length===9)return{r:parseInt(x.slice(1,3),16),g:parseInt(x.slice(3,5),16),b:parseInt(x.slice(5,7),16),a:parseInt(x.slice(7,9),16)/255}},_hex6ColorToRGBA(x){if(x[0]==="#"&&x.length===7)return{r:parseInt(x.slice(1,3),16),g:parseInt(x.slice(3,5),16),b:parseInt(x.slice(5,7),16),a:1}},_hex4ColorToRGBA(x){if(x[0]==="#"&&x.length===5)return{r:parseInt(x[1]+x[1],16),g:parseInt(x[2]+x[2],16),b:parseInt(x[3]+x[3],16),a:parseInt(x[4]+x[4],16)/255}},_hex3ColorToRGBA(x){if(x[0]==="#"&&x.length===4)return{r:parseInt(x[1]+x[1],16),g:parseInt(x[2]+x[2],16),b:parseInt(x[3]+x[3],16),a:1}},_hslColorToRGBA(x){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(x)){const[w,...E]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(x),P=Number(E[0])/360,A=Number(E[1])/100,T=Number(E[2])/100;let L,k,C;if(A===0)return C=T*255,{r:Math.round(C),g:Math.round(C),b:Math.round(C),a:1};T<.5?L=T*(1+A):L=T+A-T*A;const O=2*T-L,F=[0,0,0];for(let M=0;M<3;M++)k=P+1/3*-(M-1),k<0&&k++,k>1&&k--,6*k<1?C=O+(L-O)*6*k:2*k<1?C=L:3*k<2?C=O+(L-O)*(2/3-k)*6:C=O,F[M]=C*255;return{r:Math.round(F[0]),g:Math.round(F[1]),b:Math.round(F[2]),a:1}}},haveIntersection(x,w){return!(w.x>x.x+x.width||w.x+w.width<x.x||w.y>x.y+x.height||w.y+w.height<x.y)},cloneObject(x){const w={};for(const E in x)this._isPlainObject(x[E])?w[E]=this.cloneObject(x[E]):this._isArray(x[E])?w[E]=this.cloneArray(x[E]):w[E]=x[E];return w},cloneArray(x){return x.slice(0)},degToRad(x){return x*o},radToDeg(x){return x*c},_degToRad(x){return e.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),e.Util.degToRad(x)},_radToDeg(x){return e.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),e.Util.radToDeg(x)},_getRotation(x){return t.Konva.angleDeg?e.Util.radToDeg(x):x},_capitalize(x){return x.charAt(0).toUpperCase()+x.slice(1)},throw(x){throw new Error(g+x)},error(x){console.error(g+x)},warn(x){t.Konva.showWarnings&&console.warn(m+x)},each(x,w){for(const E in x)w(E,x[E])},_inRange(x,w,E){return w<=x&&x<E},_getProjectionToSegment(x,w,E,P,A,T){let L,k,C;const O=(x-E)*(x-E)+(w-P)*(w-P);if(O==0)L=x,k=w,C=(A-E)*(A-E)+(T-P)*(T-P);else{const F=((A-x)*(E-x)+(T-w)*(P-w))/O;F<0?(L=x,k=w,C=(x-A)*(x-A)+(w-T)*(w-T)):F>1?(L=E,k=P,C=(E-A)*(E-A)+(P-T)*(P-T)):(L=x+F*(E-x),k=w+F*(P-w),C=(L-A)*(L-A)+(k-T)*(k-T))}return[L,k,C]},_getProjectionToLine(x,w,E){const P=e.Util.cloneObject(x);let A=Number.MAX_VALUE;return w.forEach(function(T,L){if(!E&&L===w.length-1)return;const k=w[(L+1)%w.length],C=e.Util._getProjectionToSegment(T.x,T.y,k.x,k.y,x.x,x.y),O=C[0],F=C[1],M=C[2];M<A&&(P.x=O,P.y=F,A=M)}),P},_prepareArrayForTween(x,w,E){let P,A=[],T=[];if(x.length>w.length){const k=w;w=x,x=k}for(P=0;P<x.length;P+=2)A.push({x:x[P],y:x[P+1]});for(P=0;P<w.length;P+=2)T.push({x:w[P],y:w[P+1]});const L=[];return T.forEach(function(k){const C=e.Util._getProjectionToLine(k,A,E);L.push(C.x),L.push(C.y)}),L},_prepareToStringify(x){let w;x.visitedByCircularReferenceRemoval=!0;for(const E in x)if(x.hasOwnProperty(E)&&x[E]&&typeof x[E]=="object"){if(w=Object.getOwnPropertyDescriptor(x,E),x[E].visitedByCircularReferenceRemoval||e.Util._isElement(x[E]))if(w.configurable)delete x[E];else return null;else if(e.Util._prepareToStringify(x[E])===null)if(w.configurable)delete x[E];else return null}return delete x.visitedByCircularReferenceRemoval,x},_assign(x,w){for(const E in w)x[E]=w[E];return x},_getFirstPointerId(x){return x.touches?x.changedTouches[0].identifier:x.pointerId||999},releaseCanvas(...x){t.Konva.releaseCanvasOnDestroy&&x.forEach(w=>{w.width=0,w.height=0})},drawRoundedRectPath(x,w,E,P){let A=0,T=0,L=0,k=0;typeof P=="number"?A=T=L=k=Math.min(P,w/2,E/2):(A=Math.min(P[0]||0,w/2,E/2),T=Math.min(P[1]||0,w/2,E/2),k=Math.min(P[2]||0,w/2,E/2),L=Math.min(P[3]||0,w/2,E/2)),x.moveTo(A,0),x.lineTo(w-T,0),x.arc(w-T,T,T,Math.PI*3/2,0,!1),x.lineTo(w,E-k),x.arc(w-k,E-k,k,0,Math.PI/2,!1),x.lineTo(L,E),x.arc(L,E-L,L,Math.PI/2,Math.PI,!1),x.lineTo(0,A),x.arc(A,A,A,Math.PI,Math.PI*3/2,!1)}}})(Ot);var Nt={},Ue={},Re={};Object.defineProperty(Re,"__esModule",{value:!0});Re.RGBComponent=XZ;Re.alphaComponent=QZ;Re.getNumberValidator=ZZ;Re.getNumberOrArrayOfNumbersValidator=JZ;Re.getNumberOrAutoValidator=eJ;Re.getStringValidator=tJ;Re.getStringOrGradientValidator=nJ;Re.getFunctionValidator=rJ;Re.getNumberArrayValidator=iJ;Re.getBooleanValidator=aJ;Re.getComponentValidator=sJ;const Ki=Be,It=Ot;function Yi(e){return It.Util._isString(e)?'"'+e+'"':Object.prototype.toString.call(e)==="[object Number]"||It.Util._isBoolean(e)?e:Object.prototype.toString.call(e)}function XZ(e){return e>255?255:e<0?0:Math.round(e)}function QZ(e){return e>1?1:e<1e-4?1e-4:e}function ZZ(){if(Ki.Konva.isUnminified)return function(e,t){return It.Util._isNumber(e)||It.Util.warn(Yi(e)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),e}}function JZ(e){if(Ki.Konva.isUnminified)return function(t,n){const r=It.Util._isNumber(t),i=It.Util._isArray(t)&&t.length==e;return!r&&!i&&It.Util.warn(Yi(t)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+e+")"),t}}function eJ(){if(Ki.Konva.isUnminified)return function(e,t){return It.Util._isNumber(e)||e==="auto"||It.Util.warn(Yi(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),e}}function tJ(){if(Ki.Konva.isUnminified)return function(e,t){return It.Util._isString(e)||It.Util.warn(Yi(e)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),e}}function nJ(){if(Ki.Konva.isUnminified)return function(e,t){const n=It.Util._isString(e),r=Object.prototype.toString.call(e)==="[object CanvasGradient]"||e&&e.addColorStop;return n||r||It.Util.warn(Yi(e)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),e}}function rJ(){if(Ki.Konva.isUnminified)return function(e,t){return It.Util._isFunction(e)||It.Util.warn(Yi(e)+' is a not valid value for "'+t+'" attribute. The value should be a function.'),e}}function iJ(){if(Ki.Konva.isUnminified)return function(e,t){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&e instanceof n||(It.Util._isArray(e)?e.forEach(function(r){It.Util._isNumber(r)||It.Util.warn('"'+t+'" attribute has non numeric element '+r+". Make sure that all elements are numbers.")}):It.Util.warn(Yi(e)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),e}}function aJ(){if(Ki.Konva.isUnminified)return function(e,t){return e===!0||e===!1||It.Util.warn(Yi(e)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),e}}function sJ(e){if(Ki.Konva.isUnminified)return function(t,n){return t==null||It.Util.isObject(t)||It.Util.warn(Yi(t)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+e),t}}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Factory=void 0;const t=Ot,n=Re,r="get",i="set";e.Factory={addGetterSetter(a,s,o,c,d){e.Factory.addGetter(a,s,o),e.Factory.addSetter(a,s,c,d),e.Factory.addOverloadedGetterSetter(a,s)},addGetter(a,s,o){const c=r+t.Util._capitalize(s);a.prototype[c]=a.prototype[c]||function(){const d=this.attrs[s];return d===void 0?o:d}},addSetter(a,s,o,c){const d=i+t.Util._capitalize(s);a.prototype[d]||e.Factory.overWriteSetter(a,s,o,c)},overWriteSetter(a,s,o,c){const d=i+t.Util._capitalize(s);a.prototype[d]=function(f){return o&&f!==void 0&&f!==null&&(f=o.call(this,f,s)),this._setAttr(s,f),c&&c.call(this),this}},addComponentsGetterSetter(a,s,o,c,d){let f=o.length,p=t.Util._capitalize,m=r+p(s),g=i+p(s),b,y;a.prototype[m]=function(){const v={};for(b=0;b<f;b++)y=o[b],v[y]=this.getAttr(s+p(y));return v};const N=(0,n.getComponentValidator)(o);a.prototype[g]=function(v){let _=this.attrs[s],x;c&&(v=c.call(this,v)),N&&N.call(this,v,s);for(x in v)v.hasOwnProperty(x)&&this._setAttr(s+p(x),v[x]);return v||o.forEach(w=>{this._setAttr(s+p(w),void 0)}),this._fireChangeEvent(s,_,v),d&&d.call(this),this},e.Factory.addOverloadedGetterSetter(a,s)},addOverloadedGetterSetter(a,s){const o=t.Util._capitalize(s),c=i+o,d=r+o;a.prototype[s]=function(){return arguments.length?(this[c](arguments[0]),this):this[d]()}},addDeprecatedGetterSetter(a,s,o,c){t.Util.error("Adding deprecated "+s);const d=r+t.Util._capitalize(s),f=s+" property is deprecated and will be removed soon. Look at Konva change log for more information.";a.prototype[d]=function(){t.Util.error(f);const p=this.attrs[s];return p===void 0?o:p},e.Factory.addSetter(a,s,c,function(){t.Util.error(f)}),e.Factory.addOverloadedGetterSetter(a,s)},backCompat(a,s){t.Util.each(s,function(o,c){const d=a.prototype[c],f=r+t.Util._capitalize(o),p=i+t.Util._capitalize(o);function m(){d.apply(this,arguments),t.Util.error('"'+o+'" method is deprecated and will be removed soon. Use ""'+c+'" instead.')}a.prototype[o]=m,a.prototype[f]=m,a.prototype[p]=m})},afterSetFilter(){this._filterUpToDate=!1}}})(Ue);var Fr={},Li={};Object.defineProperty(Li,"__esModule",{value:!0});Li.HitContext=Li.SceneContext=Li.Context=void 0;const yO=Ot,oJ=Be;function lJ(e){let t=[],n=e.length,r=yO.Util,i,a;for(i=0;i<n;i++)a=e[i],r._isNumber(a)?a=Math.round(a*1e3)/1e3:r._isString(a)||(a=a+""),t.push(a);return t}const YE=",",cJ="(",uJ=")",dJ="([",fJ="])",hJ=";",pJ="()",mJ="=",XE=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],gJ=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],vJ=100;class zp{constructor(t){this.canvas=t,oJ.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,n){let r=this.traceArr,i=r.length,a="",s,o,c,d;for(s=0;s<i;s++)o=r[s],c=o.method,c?(d=o.args,a+=c,t?a+=pJ:yO.Util._isArray(d[0])?a+=dJ+d.join(YE)+fJ:(n&&(d=d.map(f=>typeof f=="number"?Math.floor(f):f)),a+=cJ+d.join(YE)+uJ)):(a+=o.property,t||(a+=mJ+o.val)),a+=hJ;return a}clearTrace(){this.traceArr=[]}_trace(t){let n=this.traceArr,r;n.push(t),r=n.length,r>=vJ&&n.shift()}reset(){const t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){const n=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(t){const n=t.attrs.lineCap;n&&this.setAttr("lineCap",n)}_applyOpacity(t){const n=t.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(t){const n=t.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}setAttr(t,n){this._context[t]=n}arc(t,n,r,i,a,s){this._context.arc(t,n,r,i,a,s)}arcTo(t,n,r,i,a){this._context.arcTo(t,n,r,i,a)}beginPath(){this._context.beginPath()}bezierCurveTo(t,n,r,i,a,s){this._context.bezierCurveTo(t,n,r,i,a,s)}clearRect(t,n,r,i){this._context.clearRect(t,n,r,i)}clip(...t){this._context.clip.apply(this._context,t)}closePath(){this._context.closePath()}createImageData(t,n){const r=arguments;if(r.length===2)return this._context.createImageData(t,n);if(r.length===1)return this._context.createImageData(t)}createLinearGradient(t,n,r,i){return this._context.createLinearGradient(t,n,r,i)}createPattern(t,n){return this._context.createPattern(t,n)}createRadialGradient(t,n,r,i,a,s){return this._context.createRadialGradient(t,n,r,i,a,s)}drawImage(t,n,r,i,a,s,o,c,d){const f=arguments,p=this._context;f.length===3?p.drawImage(t,n,r):f.length===5?p.drawImage(t,n,r,i,a):f.length===9&&p.drawImage(t,n,r,i,a,s,o,c,d)}ellipse(t,n,r,i,a,s,o,c){this._context.ellipse(t,n,r,i,a,s,o,c)}isPointInPath(t,n,r,i){return r?this._context.isPointInPath(r,t,n,i):this._context.isPointInPath(t,n,i)}fill(...t){this._context.fill.apply(this._context,t)}fillRect(t,n,r,i){this._context.fillRect(t,n,r,i)}strokeRect(t,n,r,i){this._context.strokeRect(t,n,r,i)}fillText(t,n,r,i){i?this._context.fillText(t,n,r,i):this._context.fillText(t,n,r)}measureText(t){return this._context.measureText(t)}getImageData(t,n,r,i){return this._context.getImageData(t,n,r,i)}lineTo(t,n){this._context.lineTo(t,n)}moveTo(t,n){this._context.moveTo(t,n)}rect(t,n,r,i){this._context.rect(t,n,r,i)}roundRect(t,n,r,i,a){this._context.roundRect(t,n,r,i,a)}putImageData(t,n,r){this._context.putImageData(t,n,r)}quadraticCurveTo(t,n,r,i){this._context.quadraticCurveTo(t,n,r,i)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,n){this._context.scale(t,n)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,n,r,i,a,s){this._context.setTransform(t,n,r,i,a,s)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,n,r,i){this._context.strokeText(t,n,r,i)}transform(t,n,r,i,a,s){this._context.transform(t,n,r,i,a,s)}translate(t,n){this._context.translate(t,n)}_enableTrace(){let t=this,n=XE.length,r=this.setAttr,i,a;const s=function(o){let c=t[o],d;t[o]=function(){return a=lJ(Array.prototype.slice.call(arguments,0)),d=c.apply(t,arguments),t._trace({method:o,args:a}),d}};for(i=0;i<n;i++)s(XE[i]);t.setAttr=function(){r.apply(t,arguments);const o=arguments[0];let c=arguments[1];(o==="shadowOffsetX"||o==="shadowOffsetY"||o==="shadowBlur")&&(c=c/this.canvas.getPixelRatio()),t._trace({property:o,val:c})}}_applyGlobalCompositeOperation(t){const n=t.attrs.globalCompositeOperation;!n||n==="source-over"||this.setAttr("globalCompositeOperation",n)}}Li.Context=zp;gJ.forEach(function(e){Object.defineProperty(zp.prototype,e,{get(){return this._context[e]},set(t){this._context[e]=t}})});class yJ extends zp{constructor(t,{willReadFrequently:n=!1}={}){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:n})}_fillColor(t){const n=t.fill();this.setAttr("fillStyle",n),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){const n=t._getLinearGradient();n&&(this.setAttr("fillStyle",n),t._fillFunc(this))}_fillRadialGradient(t){const n=t._getRadialGradient();n&&(this.setAttr("fillStyle",n),t._fillFunc(this))}_fill(t){const n=t.fill(),r=t.getFillPriority();if(n&&r==="color"){this._fillColor(t);return}const i=t.getFillPatternImage();if(i&&r==="pattern"){this._fillPattern(t);return}const a=t.getFillLinearGradientColorStops();if(a&&r==="linear-gradient"){this._fillLinearGradient(t);return}const s=t.getFillRadialGradientColorStops();if(s&&r==="radial-gradient"){this._fillRadialGradient(t);return}n?this._fillColor(t):i?this._fillPattern(t):a?this._fillLinearGradient(t):s&&this._fillRadialGradient(t)}_strokeLinearGradient(t){const n=t.getStrokeLinearGradientStartPoint(),r=t.getStrokeLinearGradientEndPoint(),i=t.getStrokeLinearGradientColorStops(),a=this.createLinearGradient(n.x,n.y,r.x,r.y);if(i){for(let s=0;s<i.length;s+=2)a.addColorStop(i[s],i[s+1]);this.setAttr("strokeStyle",a)}}_stroke(t){const n=t.dash(),r=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!r){this.save();const a=this.getCanvas().getPixelRatio();this.setTransform(a,0,0,a,0,0)}this._applyLineCap(t),n&&t.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),r||this.restore()}}_applyShadow(t){var n,r,i;const a=(n=t.getShadowRGBA())!==null&&n!==void 0?n:"black",s=(r=t.getShadowBlur())!==null&&r!==void 0?r:5,o=(i=t.getShadowOffset())!==null&&i!==void 0?i:{x:0,y:0},c=t.getAbsoluteScale(),d=this.canvas.getPixelRatio(),f=c.x*d,p=c.y*d;this.setAttr("shadowColor",a),this.setAttr("shadowBlur",s*Math.min(Math.abs(f),Math.abs(p))),this.setAttr("shadowOffsetX",o.x*f),this.setAttr("shadowOffsetY",o.y*p)}}Li.SceneContext=yJ;class xJ extends zp{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){const n=t.getStrokeScaleEnabled();if(!n){this.save();const a=this.getCanvas().getPixelRatio();this.setTransform(a,0,0,a,0,0)}this._applyLineCap(t);const r=t.hitStrokeWidth(),i=r==="auto"?t.strokeWidth():r;this.setAttr("lineWidth",i),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),n||this.restore()}}}Li.HitContext=xJ;Object.defineProperty(Fr,"__esModule",{value:!0});Fr.HitCanvas=Fr.SceneCanvas=Fr.Canvas=void 0;const $h=Ot,xO=Li,bO=Be,bJ=Ue,wJ=Re;let jf;function _J(){if(jf)return jf;const e=$h.Util.createCanvasElement(),t=e.getContext("2d");return jf=function(){const n=bO.Konva._global.devicePixelRatio||1,r=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return n/r}(),$h.Util.releaseCanvas(e),jf}class Bp{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const r=(t||{}).pixelRatio||bO.Konva.pixelRatio||_J();this.pixelRatio=r,this._canvas=$h.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){const n=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";const n=this.pixelRatio;this.getContext()._context.scale(n,n)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";const n=this.pixelRatio;this.getContext()._context.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,n){this.setWidth(t||0),this.setHeight(n||0)}toDataURL(t,n){try{return this._canvas.toDataURL(t,n)}catch{try{return this._canvas.toDataURL()}catch(i){return $h.Util.error("Unable to get data URL. "+i.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}Fr.Canvas=Bp;bJ.Factory.addGetterSetter(Bp,"pixelRatio",void 0,(0,wJ.getNumberValidator)());class NJ extends Bp{constructor(t={width:0,height:0,willReadFrequently:!1}){super(t),this.context=new xO.SceneContext(this,{willReadFrequently:t.willReadFrequently}),this.setSize(t.width,t.height)}}Fr.SceneCanvas=NJ;class SJ extends Bp{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new xO.HitContext(this),this.setSize(t.width,t.height)}}Fr.HitCanvas=SJ;var qp={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DD=void 0;const t=Be,n=Ot;e.DD={get isDragging(){let r=!1;return e.DD._dragElements.forEach(i=>{i.dragStatus==="dragging"&&(r=!0)}),r},justDragged:!1,get node(){let r;return e.DD._dragElements.forEach(i=>{r=i.node}),r},_dragElements:new Map,_drag(r){const i=[];e.DD._dragElements.forEach((a,s)=>{const{node:o}=a,c=o.getStage();c.setPointersPositions(r),a.pointerId===void 0&&(a.pointerId=n.Util._getFirstPointerId(r));const d=c._changedPointerPositions.find(f=>f.id===a.pointerId);if(d){if(a.dragStatus!=="dragging"){const f=o.dragDistance();if(Math.max(Math.abs(d.x-a.startPointerPos.x),Math.abs(d.y-a.startPointerPos.y))<f||(o.startDrag({evt:r}),!o.isDragging()))return}o._setDragPosition(r,a),i.push(o)}}),i.forEach(a=>{a.fire("dragmove",{type:"dragmove",target:a,evt:r},!0)})},_endDragBefore(r){const i=[];e.DD._dragElements.forEach(a=>{const{node:s}=a,o=s.getStage();if(r&&o.setPointersPositions(r),!o._changedPointerPositions.find(f=>f.id===a.pointerId))return;(a.dragStatus==="dragging"||a.dragStatus==="stopped")&&(e.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,a.dragStatus="stopped");const d=a.node.getLayer()||a.node instanceof t.Konva.Stage&&a.node;d&&i.indexOf(d)===-1&&i.push(d)}),i.forEach(a=>{a.draw()})},_endDragAfter(r){e.DD._dragElements.forEach((i,a)=>{i.dragStatus==="stopped"&&i.node.fire("dragend",{type:"dragend",target:i.node,evt:r},!0),i.dragStatus!=="dragging"&&e.DD._dragElements.delete(a)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("touchcancel",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1),window.addEventListener("touchcancel",e.DD._endDragAfter,!1))})(qp);Object.defineProperty(Nt,"__esModule",{value:!0});Nt.Node=void 0;const We=Ot,Uu=Ue,kc=Fr,ha=Be,dr=qp,zt=Re,Kf="absoluteOpacity",Cf="allEventListeners",ji="absoluteTransform",QE="absoluteScale",vs="canvas",EJ="Change",kJ="children",jJ="konva",x2="listening",ZE="mouseenter",JE="mouseleave",ek="set",tk="Shape",Yf=" ",nk="stage",pa="transform",CJ="Stage",b2="visible",TJ=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(Yf);let OJ=1,De=class w2{constructor(t){this._id=OJ++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===pa||t===ji)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,n){let r=this._cache.get(t);return(r===void 0||(t===pa||t===ji)&&r.dirty===!0)&&(r=n.call(this),this._cache.set(t,r)),r}_calculate(t,n,r){if(!this._attachedDepsListeners.get(t)){const i=n.map(a=>a+"Change.konva").join(Yf);this.on(i,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,r)}_getCanvasCache(){return this._cache.get(vs)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===ji&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(vs)){const{scene:t,filter:n,hit:r}=this._cache.get(vs);We.Util.releaseCanvas(t,n,r),this._cache.delete(vs)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){const n=t||{};let r={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let i=Math.ceil(n.width||r.width),a=Math.ceil(n.height||r.height),s=n.pixelRatio,o=n.x===void 0?Math.floor(r.x):n.x,c=n.y===void 0?Math.floor(r.y):n.y,d=n.offset||0,f=n.drawBorder||!1,p=n.hitCanvasPixelRatio||1;if(!i||!a){We.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const m=Math.abs(Math.round(r.x)-o)>.5?1:0,g=Math.abs(Math.round(r.y)-c)>.5?1:0;i+=d*2+m,a+=d*2+g,o-=d,c-=d;const b=new kc.SceneCanvas({pixelRatio:s,width:i,height:a}),y=new kc.SceneCanvas({pixelRatio:s,width:0,height:0,willReadFrequently:!0}),N=new kc.HitCanvas({pixelRatio:p,width:i,height:a}),v=b.getContext(),_=N.getContext();return N.isCache=!0,b.isCache=!0,this._cache.delete(vs),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(b.getContext()._context.imageSmoothingEnabled=!1,y.getContext()._context.imageSmoothingEnabled=!1),v.save(),_.save(),v.translate(-o,-c),_.translate(-o,-c),this._isUnderCache=!0,this._clearSelfAndDescendantCache(Kf),this._clearSelfAndDescendantCache(QE),this.drawScene(b,this),this.drawHit(N,this),this._isUnderCache=!1,v.restore(),_.restore(),f&&(v.save(),v.beginPath(),v.rect(0,0,i,a),v.closePath(),v.setAttr("strokeStyle","red"),v.setAttr("lineWidth",5),v.stroke(),v.restore()),this._cache.set(vs,{scene:b,filter:y,hit:N,x:o,y:c}),this._requestDraw(),this}isCached(){return this._cache.has(vs)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,n){const r=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}];let i=1/0,a=1/0,s=-1/0,o=-1/0;const c=this.getAbsoluteTransform(n);return r.forEach(function(d){const f=c.point(d);i===void 0&&(i=s=f.x,a=o=f.y),i=Math.min(i,f.x),a=Math.min(a,f.y),s=Math.max(s,f.x),o=Math.max(o,f.y)}),{x:i,y:a,width:s-i,height:o-a}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();t.translate(n.x,n.y);const r=this._getCachedSceneCanvas(),i=r.pixelRatio;t.drawImage(r._canvas,0,0,r.width/i,r.height/i),t.restore()}_drawCachedHitCanvas(t){const n=this._getCanvasCache(),r=n.hit;t.save(),t.translate(n.x,n.y),t.drawImage(r._canvas,0,0,r.width/r.pixelRatio,r.height/r.pixelRatio),t.restore()}_getCachedSceneCanvas(){let t=this.filters(),n=this._getCanvasCache(),r=n.scene,i=n.filter,a=i.getContext(),s,o,c,d;if(t){if(!this._filterUpToDate){const f=r.pixelRatio;i.setSize(r.width/r.pixelRatio,r.height/r.pixelRatio);try{for(s=t.length,a.clear(),a.drawImage(r._canvas,0,0,r.getWidth()/f,r.getHeight()/f),o=a.getImageData(0,0,i.getWidth(),i.getHeight()),c=0;c<s;c++){if(d=t[c],typeof d!="function"){We.Util.error("Filter should be type of function, but got "+typeof d+" instead. Please check correct filters");continue}d.call(this,o),a.putImageData(o,0,0)}}catch(p){We.Util.error("Unable to apply filter. "+p.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return i}return r}on(t,n){if(this._cache&&this._cache.delete(Cf),arguments.length===3)return this._delegate.apply(this,arguments);let r=t.split(Yf),i=r.length,a,s,o,c,d;for(a=0;a<i;a++)s=r[a],o=s.split("."),c=o[0],d=o[1]||"",this.eventListeners[c]||(this.eventListeners[c]=[]),this.eventListeners[c].push({name:d,handler:n});return this}off(t,n){let r=(t||"").split(Yf),i=r.length,a,s,o,c,d,f;if(this._cache&&this._cache.delete(Cf),!t)for(s in this.eventListeners)this._off(s);for(a=0;a<i;a++)if(o=r[a],c=o.split("."),d=c[0],f=c[1],d)this.eventListeners[d]&&this._off(d,f,n);else for(s in this.eventListeners)this._off(s,f,n);return this}dispatchEvent(t){const n={target:this,type:t.type,evt:t};return this.fire(t.type,n),this}addEventListener(t,n){return this.on(t,function(r){n.call(this,r.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,n,r){const i=this;this.on(t,function(a){const s=a.target.findAncestors(n,!0,i);for(let o=0;o<s.length;o++)a=We.Util.cloneObject(a),a.currentTarget=s[o],r.call(s[o],a)})}remove(){return this.isDragging()&&this.stopDrag(),dr.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(ji),this._clearSelfAndDescendantCache(Kf),this._clearSelfAndDescendantCache(QE),this._clearSelfAndDescendantCache(nk),this._clearSelfAndDescendantCache(b2),this._clearSelfAndDescendantCache(x2)}_remove(){this._clearCaches();const t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){const n="get"+We.Util._capitalize(t);return We.Util._isFunction(this[n])?this[n]():this.attrs[t]}getAncestors(){let t=this.getParent(),n=[];for(;t;)n.push(t),t=t.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{let n,r;if(!t)return this;for(n in t)n!==kJ&&(r=ek+We.Util._capitalize(n),We.Util._isFunction(this[r])?this[r](t[n]):this._setAttr(n,t[n]))}),this}isListening(){return this._getCache(x2,this._isListening)}_isListening(t){if(!this.listening())return!1;const r=this.getParent();return r&&r!==t&&this!==t?r._isListening(t):!0}isVisible(){return this._getCache(b2,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const r=this.getParent();return r&&r!==t&&this!==t?r._isVisible(t):!0}shouldDrawHit(t,n=!1){if(t)return this._isVisible(t)&&this._isListening(t);const r=this.getLayer();let i=!1;dr.DD._dragElements.forEach(s=>{s.dragStatus==="dragging"&&(s.node.nodeType==="Stage"||s.node.getLayer()===r)&&(i=!0)});const a=!n&&!ha.Konva.hitOnDragEnabled&&(i||ha.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!a}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let t=this.getDepth(),n=this,r=0,i,a,s,o;function c(f){for(i=[],a=f.length,s=0;s<a;s++)o=f[s],r++,o.nodeType!==tk&&(i=i.concat(o.getChildren().slice())),o._id===n._id&&(s=a);i.length>0&&i[0].getDepth()<=t&&c(i)}const d=this.getStage();return n.nodeType!==CJ&&d&&c(d.getChildren()),r}getDepth(){let t=0,n=this.parent;for(;n;)t++,n=n.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(pa),this._clearSelfAndDescendantCache(ji)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const t=this.getStage();if(!t)return null;const n=t.getPointerPosition();if(!n)return null;const r=this.getAbsoluteTransform().copy();return r.invert(),r.point(n)}getAbsolutePosition(t){let n=!1,r=this.parent;for(;r;){if(r.isCached()){n=!0;break}r=r.parent}n&&!t&&(t=!0);const i=this.getAbsoluteTransform(t).getMatrix(),a=new We.Transform,s=this.offset();return a.m=i.slice(),a.translate(s.x,s.y),a.getTranslation()}setAbsolutePosition(t){const{x:n,y:r,...i}=this._clearTransform();this.attrs.x=n,this.attrs.y=r,this._clearCache(pa);const a=this._getAbsoluteTransform().copy();return a.invert(),a.translate(t.x,t.y),t={x:this.attrs.x+a.getTranslation().x,y:this.attrs.y+a.getTranslation().y},this._setTransform(i),this.setPosition({x:t.x,y:t.y}),this._clearCache(pa),this._clearSelfAndDescendantCache(ji),this}_setTransform(t){let n;for(n in t)this.attrs[n]=t[n]}_clearTransform(){const t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){let n=t.x,r=t.y,i=this.x(),a=this.y();return n!==void 0&&(i+=n),r!==void 0&&(a+=r),this.setPosition({x:i,y:a}),this}_eachAncestorReverse(t,n){let r=[],i=this.getParent(),a,s;if(!(n&&n._id===this._id)){for(r.unshift(this);i&&(!n||i._id!==n._id);)r.unshift(i),i=i.parent;for(a=r.length,s=0;s<a;s++)t(r[s])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return We.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const t=this.index,n=this.parent.getChildren().length;return t<n-1?(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return We.Util.warn("Node has no parent. moveUp function is ignored."),!1;const t=this.index,n=this.parent.getChildren().length;return t<n-1?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return We.Util.warn("Node has no parent. moveDown function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return We.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(t){if(!this.parent)return We.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&We.Util.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Kf,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let t=this.opacity();const n=this.getParent();return n&&!n._isUnderCache&&(t*=n.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){let t=this.getAttrs(),n,r,i,a,s;const o={attrs:{},className:this.getClassName()};for(n in t)r=t[n],s=We.Util.isObject(r)&&!We.Util._isPlainObject(r)&&!We.Util._isArray(r),!s&&(i=typeof this[n]=="function"&&this[n],delete t[n],a=i?i.call(this):null,t[n]=r,a!==r&&(o.attrs[n]=r));return We.Util._prepareToStringify(o)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,n,r){const i=[];n&&this._isMatch(t)&&i.push(this);let a=this.parent;for(;a;){if(a===r)return i;a._isMatch(t)&&i.push(a),a=a.parent}return i}isAncestorOf(t){return!1}findAncestor(t,n,r){return this.findAncestors(t,n,r)[0]}_isMatch(t){if(!t)return!1;if(typeof t=="function")return t(this);let n=t.replace(/ /g,"").split(","),r=n.length,i,a;for(i=0;i<r;i++)if(a=n[i],We.Util.isValidSelector(a)||(We.Util.warn('Selector "'+a+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),We.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),We.Util.warn("Konva is awesome, right?")),a.charAt(0)==="#"){if(this.id()===a.slice(1))return!0}else if(a.charAt(0)==="."){if(this.hasName(a.slice(1)))return!0}else if(this.className===a||this.nodeType===a)return!0;return!1}getLayer(){const t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(nk,this._getStage)}_getStage(){const t=this.getParent();return t?t.getStage():null}fire(t,n={},r){return n.target=n.target||this,r?this._fireAndBubble(t,n):this._fire(t,n),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(ji,this._getAbsoluteTransform)}_getAbsoluteTransform(t){let n;if(t)return n=new We.Transform,this._eachAncestorReverse(function(r){const i=r.transformsEnabled();i==="all"?n.multiply(r.getTransform()):i==="position"&&n.translate(r.x()-r.offsetX(),r.y()-r.offsetY())},t),n;{n=this._cache.get(ji)||new We.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();const r=this.transformsEnabled();if(r==="all")n.multiply(this.getTransform());else if(r==="position"){const i=this.attrs.x||0,a=this.attrs.y||0,s=this.attrs.offsetX||0,o=this.attrs.offsetY||0;n.translate(i-s,a-o)}return n.dirty=!1,n}}getAbsoluteScale(t){let n=this;for(;n;)n._isUnderCache&&(t=n),n=n.getParent();const i=this.getAbsoluteTransform(t).decompose();return{x:i.scaleX,y:i.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(pa,this._getTransform)}_getTransform(){var t,n;const r=this._cache.get(pa)||new We.Transform;r.reset();const i=this.x(),a=this.y(),s=ha.Konva.getAngle(this.rotation()),o=(t=this.attrs.scaleX)!==null&&t!==void 0?t:1,c=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,d=this.attrs.skewX||0,f=this.attrs.skewY||0,p=this.attrs.offsetX||0,m=this.attrs.offsetY||0;return(i!==0||a!==0)&&r.translate(i,a),s!==0&&r.rotate(s),(d!==0||f!==0)&&r.skew(d,f),(o!==1||c!==1)&&r.scale(o,c),(p!==0||m!==0)&&r.translate(-1*p,-1*m),r.dirty=!1,r}clone(t){let n=We.Util.cloneObject(this.attrs),r,i,a,s,o;for(r in t)n[r]=t[r];const c=new this.constructor(n);for(r in this.eventListeners)for(i=this.eventListeners[r],a=i.length,s=0;s<a;s++)o=i[s],o.name.indexOf(jJ)<0&&(c.eventListeners[r]||(c.eventListeners[r]=[]),c.eventListeners[r].push(o));return c}_toKonvaCanvas(t){t=t||{};const n=this.getClientRect(),r=this.getStage(),i=t.x!==void 0?t.x:Math.floor(n.x),a=t.y!==void 0?t.y:Math.floor(n.y),s=t.pixelRatio||1,o=new kc.SceneCanvas({width:t.width||Math.ceil(n.width)||(r?r.width():0),height:t.height||Math.ceil(n.height)||(r?r.height():0),pixelRatio:s}),c=o.getContext(),d=new kc.SceneCanvas({width:o.width/o.pixelRatio+Math.abs(i),height:o.height/o.pixelRatio+Math.abs(a),pixelRatio:o.pixelRatio});return t.imageSmoothingEnabled===!1&&(c._context.imageSmoothingEnabled=!1),c.save(),(i||a)&&c.translate(-1*i,-1*a),this.drawScene(o,void 0,d),c.restore(),o}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){t=t||{};const n=t.mimeType||null,r=t.quality||null,i=this._toKonvaCanvas(t).toDataURL(n,r);return t.callback&&t.callback(i),i}toImage(t){return new Promise((n,r)=>{try{const i=t==null?void 0:t.callback;i&&delete t.callback,We.Util._urlToImage(this.toDataURL(t),function(a){n(a),i==null||i(a)})}catch(i){r(i)}})}toBlob(t){return new Promise((n,r)=>{try{const i=t==null?void 0:t.callback;i&&delete t.callback,this.toCanvas(t).toBlob(a=>{n(a),i==null||i(a)},t==null?void 0:t.mimeType,t==null?void 0:t.quality)}catch(i){r(i)}})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():ha.Konva.dragDistance}_off(t,n,r){let i=this.eventListeners[t],a,s,o;for(a=0;a<i.length;a++)if(s=i[a].name,o=i[a].handler,(s!=="konva"||n==="konva")&&(!n||s===n)&&(!r||r===o)){if(i.splice(a,1),i.length===0){delete this.eventListeners[t];break}a--}}_fireChangeEvent(t,n,r){this._fire(t+EJ,{oldVal:n,newVal:r})}addName(t){if(!this.hasName(t)){const n=this.name(),r=n?n+" "+t:t;this.name(r)}return this}hasName(t){if(!t)return!1;const n=this.name();return n?(n||"").split(/\s/g).indexOf(t)!==-1:!1}removeName(t){const n=(this.name()||"").split(/\s/g),r=n.indexOf(t);return r!==-1&&(n.splice(r,1),this.name(n.join(" "))),this}setAttr(t,n){const r=this[ek+We.Util._capitalize(t)];return We.Util._isFunction(r)?r.call(this,n):this._setAttr(t,n),this}_requestDraw(){if(ha.Konva.autoDrawEnabled){const t=this.getLayer()||this.getStage();t==null||t.batchDraw()}}_setAttr(t,n){const r=this.attrs[t];r===n&&!We.Util.isObject(n)||(n==null?delete this.attrs[t]:this.attrs[t]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(t,r,n),this._requestDraw())}_setComponentAttr(t,n,r){let i;r!==void 0&&(i=this.attrs[t],i||(this.attrs[t]=this.getAttr(t)),this.attrs[t][n]=r,this._fireChangeEvent(t,i,r))}_fireAndBubble(t,n,r){if(n&&this.nodeType===tk&&(n.target=this),!((t===ZE||t===JE)&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||this.nodeType==="Stage"&&!r))){this._fire(t,n);const a=(t===ZE||t===JE)&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!a&&(r&&r.parent?this._fireAndBubble.call(this.parent,t,n,r):this._fireAndBubble.call(this.parent,t,n))}}_getProtoListeners(t){var n,r,i;const a=(n=this._cache.get(Cf))!==null&&n!==void 0?n:{};let s=a==null?void 0:a[t];if(s===void 0){s=[];let o=Object.getPrototypeOf(this);for(;o;){const c=(i=(r=o.eventListeners)===null||r===void 0?void 0:r[t])!==null&&i!==void 0?i:[];s.push(...c),o=Object.getPrototypeOf(o)}a[t]=s,this._cache.set(Cf,a)}return s}_fire(t,n){n=n||{},n.currentTarget=this,n.type=t;const r=this._getProtoListeners(t);if(r)for(var i=0;i<r.length;i++)r[i].handler.call(this,n);const a=this.eventListeners[t];if(a)for(var i=0;i<a.length;i++)a[i].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){const n=t?t.pointerId:void 0,r=this.getStage(),i=this.getAbsolutePosition();if(!r)return;const a=r._getPointerById(n)||r._changedPointerPositions[0]||i;dr.DD._dragElements.set(this._id,{node:this,startPointerPos:a,offset:{x:a.x-i.x,y:a.y-i.y},dragStatus:"ready",pointerId:n})}startDrag(t,n=!0){dr.DD._dragElements.has(this._id)||this._createDragElement(t);const r=dr.DD._dragElements.get(this._id);r.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},n)}_setDragPosition(t,n){const r=this.getStage()._getPointerById(n.pointerId);if(!r)return;let i={x:r.x-n.offset.x,y:r.y-n.offset.y};const a=this.dragBoundFunc();if(a!==void 0){const s=a.call(this,i,t);s?i=s:We.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==i.x||this._lastPos.y!==i.y)&&(this.setAbsolutePosition(i),this._requestDraw()),this._lastPos=i}stopDrag(t){const n=dr.DD._dragElements.get(this._id);n&&(n.dragStatus="stopped"),dr.DD._endDragBefore(t),dr.DD._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=dr.DD._dragElements.get(this._id);return t?t.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){if(!(!(t.evt.button!==void 0)||ha.Konva.dragButtons.indexOf(t.evt.button)>=0)||this.isDragging())return;let i=!1;dr.DD._dragElements.forEach(a=>{this.isAncestorOf(a.node)&&(i=!0)}),i||this._createDragElement(t)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const n=dr.DD._dragElements.get(this._id),r=n&&n.dragStatus==="dragging",i=n&&n.dragStatus==="ready";r?this.stopDrag():i&&dr.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const n=this.getStage();if(!n)return!1;const r={x:-t.x,y:-t.y,width:n.width()+2*t.x,height:n.height()+2*t.y};return We.Util.haveIntersection(r,this.getClientRect())}static create(t,n){return We.Util._isString(t)&&(t=JSON.parse(t)),this._createNode(t,n)}static _createNode(t,n){let r=w2.prototype.getClassName.call(t),i=t.children,a,s,o;n&&(t.attrs.container=n),ha.Konva[r]||(We.Util.warn('Can not find a node with class name "'+r+'". Fallback to "Shape".'),r="Shape");const c=ha.Konva[r];if(a=new c(t.attrs),i)for(s=i.length,o=0;o<s;o++)a.add(w2._createNode(i[o]));return a}};Nt.Node=De;De.prototype.nodeType="Node";De.prototype._attrsAffectingSize=[];De.prototype.eventListeners={};De.prototype.on.call(De.prototype,TJ,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(pa),this._clearSelfAndDescendantCache(ji)});De.prototype.on.call(De.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(b2)});De.prototype.on.call(De.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(x2)});De.prototype.on.call(De.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Kf)});const ct=Uu.Factory.addGetterSetter;ct(De,"zIndex");ct(De,"absolutePosition");ct(De,"position");ct(De,"x",0,(0,zt.getNumberValidator)());ct(De,"y",0,(0,zt.getNumberValidator)());ct(De,"globalCompositeOperation","source-over",(0,zt.getStringValidator)());ct(De,"opacity",1,(0,zt.getNumberValidator)());ct(De,"name","",(0,zt.getStringValidator)());ct(De,"id","",(0,zt.getStringValidator)());ct(De,"rotation",0,(0,zt.getNumberValidator)());Uu.Factory.addComponentsGetterSetter(De,"scale",["x","y"]);ct(De,"scaleX",1,(0,zt.getNumberValidator)());ct(De,"scaleY",1,(0,zt.getNumberValidator)());Uu.Factory.addComponentsGetterSetter(De,"skew",["x","y"]);ct(De,"skewX",0,(0,zt.getNumberValidator)());ct(De,"skewY",0,(0,zt.getNumberValidator)());Uu.Factory.addComponentsGetterSetter(De,"offset",["x","y"]);ct(De,"offsetX",0,(0,zt.getNumberValidator)());ct(De,"offsetY",0,(0,zt.getNumberValidator)());ct(De,"dragDistance",null,(0,zt.getNumberValidator)());ct(De,"width",0,(0,zt.getNumberValidator)());ct(De,"height",0,(0,zt.getNumberValidator)());ct(De,"listening",!0,(0,zt.getBooleanValidator)());ct(De,"preventDefault",!0,(0,zt.getBooleanValidator)());ct(De,"filters",null,function(e){return this._filterUpToDate=!1,e});ct(De,"visible",!0,(0,zt.getBooleanValidator)());ct(De,"transformsEnabled","all",(0,zt.getStringValidator)());ct(De,"size");ct(De,"dragBoundFunc");ct(De,"draggable",!1,(0,zt.getBooleanValidator)());Uu.Factory.backCompat(De,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var Ws={};Object.defineProperty(Ws,"__esModule",{value:!0});Ws.Container=void 0;const jl=Ue,Dx=Nt,$p=Re;class Ks extends Dx.Node{constructor(){super(...arguments),this.children=[]}getChildren(t){if(!t)return this.children||[];const n=this.children||[],r=[];return n.forEach(function(i){t(i)&&r.push(i)}),r}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(t.length===0)return this;if(t.length>1){for(let r=0;r<t.length;r++)this.add(t[r]);return this}const n=t[0];return n.getParent()?(n.moveTo(this),this):(this._validateAdd(n),n.index=this.getChildren().length,n.parent=this,n._clearCaches(),this.getChildren().push(n),this._fire("add",{child:n}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){const n=this._generalFind(t,!0);return n.length>0?n[0]:void 0}_generalFind(t,n){const r=[];return this._descendants(i=>{const a=i._isMatch(t);return a&&r.push(i),!!(a&&n)}),r}_descendants(t){let n=!1;const r=this.getChildren();for(const i of r){if(n=t(i),n)return!0;if(i.hasChildren()&&(n=i._descendants(t),n))return!0}return!1}toObject(){const t=Dx.Node.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(n=>{t.children.push(n.toObject())}),t}isAncestorOf(t){let n=t.getParent();for(;n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(t){const n=Dx.Node.prototype.clone.call(this,t);return this.getChildren().forEach(function(r){n.add(r.clone())}),n}getAllIntersections(t){const n=[];return this.find("Shape").forEach(r=>{r.isVisible()&&r.intersects(t)&&n.push(r)}),n}_clearSelfAndDescendantCache(t){var n;super._clearSelfAndDescendantCache(t),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(r){r._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;(t=this.children)===null||t===void 0||t.forEach(function(n,r){n.index=r}),this._requestDraw()}drawScene(t,n,r){const i=this.getLayer(),a=t||i&&i.getCanvas(),s=a&&a.getContext(),o=this._getCanvasCache(),c=o&&o.scene,d=a&&a.isCache;if(!this.isVisible()&&!d)return this;if(c){s.save();const f=this.getAbsoluteTransform(n).getMatrix();s.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this._drawCachedSceneCanvas(s),s.restore()}else this._drawChildren("drawScene",a,n,r);return this}drawHit(t,n){if(!this.shouldDrawHit(n))return this;const r=this.getLayer(),i=t||r&&r.hitCanvas,a=i&&i.getContext(),s=this._getCanvasCache();if(s&&s.hit){a.save();const c=this.getAbsoluteTransform(n).getMatrix();a.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedHitCanvas(a),a.restore()}else this._drawChildren("drawHit",i,n);return this}_drawChildren(t,n,r,i){var a;const s=n&&n.getContext(),o=this.clipWidth(),c=this.clipHeight(),d=this.clipFunc(),f=typeof o=="number"&&typeof c=="number"||d,p=r===this;if(f){s.save();const g=this.getAbsoluteTransform(r);let b=g.getMatrix();s.transform(b[0],b[1],b[2],b[3],b[4],b[5]),s.beginPath();let y;if(d)y=d.call(this,s,this);else{const N=this.clipX(),v=this.clipY();s.rect(N||0,v||0,o,c)}s.clip.apply(s,y),b=g.copy().invert().getMatrix(),s.transform(b[0],b[1],b[2],b[3],b[4],b[5])}const m=!p&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";m&&(s.save(),s._applyGlobalCompositeOperation(this)),(a=this.children)===null||a===void 0||a.forEach(function(g){g[t](n,r,i)}),m&&s.restore(),f&&s.restore()}getClientRect(t={}){var n;const r=t.skipTransform,i=t.relativeTo;let a,s,o,c,d={x:1/0,y:1/0,width:0,height:0};const f=this;(n=this.children)===null||n===void 0||n.forEach(function(g){if(!g.visible())return;const b=g.getClientRect({relativeTo:f,skipShadow:t.skipShadow,skipStroke:t.skipStroke});b.width===0&&b.height===0||(a===void 0?(a=b.x,s=b.y,o=b.x+b.width,c=b.y+b.height):(a=Math.min(a,b.x),s=Math.min(s,b.y),o=Math.max(o,b.x+b.width),c=Math.max(c,b.y+b.height)))});const p=this.find("Shape");let m=!1;for(let g=0;g<p.length;g++)if(p[g]._isVisible(this)){m=!0;break}return m&&a!==void 0?d={x:a,y:s,width:o-a,height:c-s}:d={x:0,y:0,width:0,height:0},r?d:this._transformedRect(d,i)}}Ws.Container=Ks;jl.Factory.addComponentsGetterSetter(Ks,"clip",["x","y","width","height"]);jl.Factory.addGetterSetter(Ks,"clipX",void 0,(0,$p.getNumberValidator)());jl.Factory.addGetterSetter(Ks,"clipY",void 0,(0,$p.getNumberValidator)());jl.Factory.addGetterSetter(Ks,"clipWidth",void 0,(0,$p.getNumberValidator)());jl.Factory.addGetterSetter(Ks,"clipHeight",void 0,(0,$p.getNumberValidator)());jl.Factory.addGetterSetter(Ks,"clipFunc");var wO={},Xa={};Object.defineProperty(Xa,"__esModule",{value:!0});Xa.getCapturedShape=AJ;Xa.createEvent=m5;Xa.hasPointerCapture=RJ;Xa.setPointerCapture=IJ;Xa.releaseCapture=NO;const PJ=Be,Eu=new Map,_O=PJ.Konva._global.PointerEvent!==void 0;function AJ(e){return Eu.get(e)}function m5(e){return{evt:e,pointerId:e.pointerId}}function RJ(e,t){return Eu.get(e)===t}function IJ(e,t){NO(e),t.getStage()&&(Eu.set(e,t),_O&&t._fire("gotpointercapture",m5(new PointerEvent("gotpointercapture"))))}function NO(e,t){const n=Eu.get(e);if(!n)return;const r=n.getStage();r&&r.content,Eu.delete(e),_O&&n._fire("lostpointercapture",m5(new PointerEvent("lostpointercapture")))}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.stages=void 0;const t=Ot,n=Ue,r=Ws,i=Be,a=Fr,s=qp,o=Be,c=Xa,d="Stage",f="string",p="px",m="mouseout",g="mouseleave",b="mouseover",y="mouseenter",N="mousemove",v="mousedown",_="mouseup",x="pointermove",w="pointerdown",E="pointerup",P="pointercancel",A="lostpointercapture",T="pointerout",L="pointerleave",k="pointerover",C="pointerenter",O="contextmenu",F="touchstart",M="touchend",D="touchmove",$="touchcancel",V="wheel",K=5,H=[[y,"_pointerenter"],[v,"_pointerdown"],[N,"_pointermove"],[_,"_pointerup"],[g,"_pointerleave"],[F,"_pointerdown"],[D,"_pointermove"],[M,"_pointerup"],[$,"_pointercancel"],[b,"_pointerover"],[V,"_wheel"],[O,"_contextmenu"],[w,"_pointerdown"],[x,"_pointermove"],[E,"_pointerup"],[P,"_pointercancel"],[A,"_lostpointercapture"]],q={mouse:{[T]:m,[L]:g,[k]:b,[C]:y,[x]:N,[w]:v,[E]:_,[P]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[T]:"touchout",[L]:"touchleave",[k]:"touchover",[C]:"touchenter",[x]:D,[w]:F,[E]:M,[P]:$,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[T]:T,[L]:L,[k]:k,[C]:C,[x]:x,[w]:w,[E]:E,[P]:P,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},I=Y=>Y.indexOf("pointer")>=0?"pointer":Y.indexOf("touch")>=0?"touch":"mouse",z=Y=>{const U=I(Y);if(U==="pointer")return i.Konva.pointerEventsEnabled&&q.pointer;if(U==="touch")return q.touch;if(U==="mouse")return q.mouse};function W(Y={}){return(Y.clipFunc||Y.clipWidth||Y.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),Y}const Q="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";e.stages=[];class ee extends r.Container{constructor(U){super(W(U)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),e.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{W(this.attrs)}),this._checkVisibility()}_validateAdd(U){const J=U.getType()==="Layer",te=U.getType()==="FastLayer";J||te||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const U=this.visible()?"":"none";this.content.style.display=U}setContainer(U){if(typeof U===f){if(U.charAt(0)==="."){const te=U.slice(1);U=document.getElementsByClassName(te)[0]}else{var J;U.charAt(0)!=="#"?J=U:J=U.slice(1),U=document.getElementById(J)}if(!U)throw"Can not find container in document with id "+J}return this._setAttr("container",U),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),U.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){let U=this.children,J=U.length,te;for(te=0;te<J;te++)U[te].clear();return this}clone(U){return U||(U={}),U.container=typeof document<"u"&&document.createElement("div"),r.Container.prototype.clone.call(this,U)}destroy(){super.destroy();const U=this.content;U&&t.Util._isInDocument(U)&&this.container().removeChild(U);const J=e.stages.indexOf(this);return J>-1&&e.stages.splice(J,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const U=this._pointerPositions[0]||this._changedPointerPositions[0];return U?{x:U.x,y:U.y}:(t.Util.warn(Q),null)}_getPointerById(U){return this._pointerPositions.find(J=>J.id===U)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(U){U=U||{},U.x=U.x||0,U.y=U.y||0,U.width=U.width||this.width(),U.height=U.height||this.height();const J=new a.SceneCanvas({width:U.width,height:U.height,pixelRatio:U.pixelRatio||1}),te=J.getContext()._context,X=this.children;return(U.x||U.y)&&te.translate(-1*U.x,-1*U.y),X.forEach(function(ne){if(!ne.isVisible())return;const ue=ne._toKonvaCanvas(U);te.drawImage(ue._canvas,U.x,U.y,ue.getWidth()/ue.getPixelRatio(),ue.getHeight()/ue.getPixelRatio())}),J}getIntersection(U){if(!U)return null;let J=this.children,te=J.length,X=te-1,ne;for(ne=X;ne>=0;ne--){const ue=J[ne].getIntersection(U);if(ue)return ue}return null}_resizeDOM(){const U=this.width(),J=this.height();this.content&&(this.content.style.width=U+p,this.content.style.height=J+p),this.bufferCanvas.setSize(U,J),this.bufferHitCanvas.setSize(U,J),this.children.forEach(te=>{te.setSize({width:U,height:J}),te.draw()})}add(U,...J){if(arguments.length>1){for(let X=0;X<arguments.length;X++)this.add(arguments[X]);return this}super.add(U);const te=this.children.length;return te>K&&t.Util.warn("The stage has "+te+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),U.setSize({width:this.width(),height:this.height()}),U.draw(),i.Konva.isBrowser&&this.content.appendChild(U.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(U){return c.hasPointerCapture(U,this)}setPointerCapture(U){c.setPointerCapture(U,this)}releaseCapture(U){c.releaseCapture(U,this)}getLayers(){return this.children}_bindContentEvents(){i.Konva.isBrowser&&H.forEach(([U,J])=>{this.content.addEventListener(U,te=>{this[J](te)},{passive:!1})})}_pointerenter(U){this.setPointersPositions(U);const J=z(U.type);J&&this._fire(J.pointerenter,{evt:U,target:this,currentTarget:this})}_pointerover(U){this.setPointersPositions(U);const J=z(U.type);J&&this._fire(J.pointerover,{evt:U,target:this,currentTarget:this})}_getTargetShape(U){let J=this[U+"targetShape"];return J&&!J.getStage()&&(J=null),J}_pointerleave(U){const J=z(U.type),te=I(U.type);if(!J)return;this.setPointersPositions(U);const X=this._getTargetShape(te),ne=!(i.Konva.isDragging()||i.Konva.isTransforming())||i.Konva.hitOnDragEnabled;X&&ne?(X._fireAndBubble(J.pointerout,{evt:U}),X._fireAndBubble(J.pointerleave,{evt:U}),this._fire(J.pointerleave,{evt:U,target:this,currentTarget:this}),this[te+"targetShape"]=null):ne&&(this._fire(J.pointerleave,{evt:U,target:this,currentTarget:this}),this._fire(J.pointerout,{evt:U,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(U){const J=z(U.type),te=I(U.type);if(!J)return;this.setPointersPositions(U);let X=!1;this._changedPointerPositions.forEach(ne=>{const ue=this.getIntersection(ne);if(s.DD.justDragged=!1,i.Konva["_"+te+"ListenClick"]=!0,!ue||!ue.isListening()){this[te+"ClickStartShape"]=void 0;return}i.Konva.capturePointerEventsEnabled&&ue.setPointerCapture(ne.id),this[te+"ClickStartShape"]=ue,ue._fireAndBubble(J.pointerdown,{evt:U,pointerId:ne.id}),X=!0;const se=U.type.indexOf("touch")>=0;ue.preventDefault()&&U.cancelable&&se&&U.preventDefault()}),X||this._fire(J.pointerdown,{evt:U,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(U){const J=z(U.type),te=I(U.type);if(!J||(i.Konva.isDragging()&&s.DD.node.preventDefault()&&U.cancelable&&U.preventDefault(),this.setPointersPositions(U),!(!(i.Konva.isDragging()||i.Konva.isTransforming())||i.Konva.hitOnDragEnabled)))return;const ne={};let ue=!1;const se=this._getTargetShape(te);this._changedPointerPositions.forEach(ce=>{const de=c.getCapturedShape(ce.id)||this.getIntersection(ce),Oe=ce.id,ge={evt:U,pointerId:Oe},re=se!==de;if(re&&se&&(se._fireAndBubble(J.pointerout,{...ge},de),se._fireAndBubble(J.pointerleave,{...ge},de)),de){if(ne[de._id])return;ne[de._id]=!0}de&&de.isListening()?(ue=!0,re&&(de._fireAndBubble(J.pointerover,{...ge},se),de._fireAndBubble(J.pointerenter,{...ge},se),this[te+"targetShape"]=de),de._fireAndBubble(J.pointermove,{...ge})):se&&(this._fire(J.pointerover,{evt:U,target:this,currentTarget:this,pointerId:Oe}),this[te+"targetShape"]=null)}),ue||this._fire(J.pointermove,{evt:U,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(U){const J=z(U.type),te=I(U.type);if(!J)return;this.setPointersPositions(U);const X=this[te+"ClickStartShape"],ne=this[te+"ClickEndShape"],ue={};let se=!1;this._changedPointerPositions.forEach(ce=>{const de=c.getCapturedShape(ce.id)||this.getIntersection(ce);if(de){if(de.releaseCapture(ce.id),ue[de._id])return;ue[de._id]=!0}const Oe=ce.id,ge={evt:U,pointerId:Oe};let re=!1;i.Konva["_"+te+"InDblClickWindow"]?(re=!0,clearTimeout(this[te+"DblTimeout"])):s.DD.justDragged||(i.Konva["_"+te+"InDblClickWindow"]=!0,clearTimeout(this[te+"DblTimeout"])),this[te+"DblTimeout"]=setTimeout(function(){i.Konva["_"+te+"InDblClickWindow"]=!1},i.Konva.dblClickWindow),de&&de.isListening()?(se=!0,this[te+"ClickEndShape"]=de,de._fireAndBubble(J.pointerup,{...ge}),i.Konva["_"+te+"ListenClick"]&&X&&X===de&&(de._fireAndBubble(J.pointerclick,{...ge}),re&&ne&&ne===de&&de._fireAndBubble(J.pointerdblclick,{...ge}))):(this[te+"ClickEndShape"]=null,i.Konva["_"+te+"ListenClick"]&&this._fire(J.pointerclick,{evt:U,target:this,currentTarget:this,pointerId:Oe}),re&&this._fire(J.pointerdblclick,{evt:U,target:this,currentTarget:this,pointerId:Oe}))}),se||this._fire(J.pointerup,{evt:U,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),i.Konva["_"+te+"ListenClick"]=!1,U.cancelable&&te!=="touch"&&U.preventDefault()}_contextmenu(U){this.setPointersPositions(U);const J=this.getIntersection(this.getPointerPosition());J&&J.isListening()?J._fireAndBubble(O,{evt:U}):this._fire(O,{evt:U,target:this,currentTarget:this})}_wheel(U){this.setPointersPositions(U);const J=this.getIntersection(this.getPointerPosition());J&&J.isListening()?J._fireAndBubble(V,{evt:U}):this._fire(V,{evt:U,target:this,currentTarget:this})}_pointercancel(U){this.setPointersPositions(U);const J=c.getCapturedShape(U.pointerId)||this.getIntersection(this.getPointerPosition());J&&J._fireAndBubble(E,c.createEvent(U)),c.releaseCapture(U.pointerId)}_lostpointercapture(U){c.releaseCapture(U.pointerId)}setPointersPositions(U){let J=this._getContentPosition(),te=null,X=null;U=U||window.event,U.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(U.touches,ne=>{this._pointerPositions.push({id:ne.identifier,x:(ne.clientX-J.left)/J.scaleX,y:(ne.clientY-J.top)/J.scaleY})}),Array.prototype.forEach.call(U.changedTouches||U.touches,ne=>{this._changedPointerPositions.push({id:ne.identifier,x:(ne.clientX-J.left)/J.scaleX,y:(ne.clientY-J.top)/J.scaleY})})):(te=(U.clientX-J.left)/J.scaleX,X=(U.clientY-J.top)/J.scaleY,this.pointerPos={x:te,y:X},this._pointerPositions=[{x:te,y:X,id:t.Util._getFirstPointerId(U)}],this._changedPointerPositions=[{x:te,y:X,id:t.Util._getFirstPointerId(U)}])}_setPointerPosition(U){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(U)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const U=this.content.getBoundingClientRect();return{top:U.top,left:U.left,scaleX:U.width/this.content.clientWidth||1,scaleY:U.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new a.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new a.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!i.Konva.isBrowser)return;const U=this.container();if(!U)throw"Stage has no container. A container is required.";U.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),U.appendChild(this.content),this._resizeDOM()}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(U){U.batchDraw()}),this}}e.Stage=ee,ee.prototype.nodeType=d,(0,o._registerNode)(ee),n.Factory.addGetterSetter(ee,"container"),i.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{e.stages.forEach(Y=>{Y.batchDraw()})})})(wO);var Gu={},Kt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.shapes=void 0;const t=Be,n=Ot,r=Ue,i=Nt,a=Re,s=Be,o=Xa,c="hasShadow",d="shadowRGBA",f="patternImage",p="linearGradient",m="radialGradient";let g;function b(){return g||(g=n.Util.createCanvasElement().getContext("2d"),g)}e.shapes={};function y(L){const k=this.attrs.fillRule;k?L.fill(k):L.fill()}function N(L){L.stroke()}function v(L){const k=this.attrs.fillRule;k?L.fill(k):L.fill()}function _(L){L.stroke()}function x(){this._clearCache(c)}function w(){this._clearCache(d)}function E(){this._clearCache(f)}function P(){this._clearCache(p)}function A(){this._clearCache(m)}class T extends i.Node{constructor(k){super(k);let C;for(;C=n.Util.getRandomColor(),!(C&&!(C in e.shapes)););this.colorKey=C,e.shapes[C]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(c,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(f,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const C=b().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(C&&C.setTransform){const O=new n.Transform;O.translate(this.fillPatternX(),this.fillPatternY()),O.rotate(t.Konva.getAngle(this.fillPatternRotation())),O.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),O.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const F=O.getMatrix(),M=typeof DOMMatrix>"u"?{a:F[0],b:F[1],c:F[2],d:F[3],e:F[4],f:F[5]}:new DOMMatrix(F);C.setTransform(M)}return C}}_getLinearGradient(){return this._getCache(p,this.__getLinearGradient)}__getLinearGradient(){const k=this.fillLinearGradientColorStops();if(k){const C=b(),O=this.fillLinearGradientStartPoint(),F=this.fillLinearGradientEndPoint(),M=C.createLinearGradient(O.x,O.y,F.x,F.y);for(let D=0;D<k.length;D+=2)M.addColorStop(k[D],k[D+1]);return M}}_getRadialGradient(){return this._getCache(m,this.__getRadialGradient)}__getRadialGradient(){const k=this.fillRadialGradientColorStops();if(k){const C=b(),O=this.fillRadialGradientStartPoint(),F=this.fillRadialGradientEndPoint(),M=C.createRadialGradient(O.x,O.y,this.fillRadialGradientStartRadius(),F.x,F.y,this.fillRadialGradientEndRadius());for(let D=0;D<k.length;D+=2)M.addColorStop(k[D],k[D+1]);return M}}getShadowRGBA(){return this._getCache(d,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const k=n.Util.colorToRGBA(this.shadowColor());if(k)return"rgba("+k.r+","+k.g+","+k.b+","+k.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const k=this.hitStrokeWidth();return k==="auto"?this.hasStroke():this.strokeEnabled()&&!!k}intersects(k){const C=this.getStage();if(!C)return!1;const O=C.bufferHitCanvas;return O.getContext().clear(),this.drawHit(O,void 0,!0),O.context.getImageData(Math.round(k.x),Math.round(k.y),1,1).data[3]>0}destroy(){return i.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(k){var C;if(!((C=this.attrs.perfectDrawEnabled)!==null&&C!==void 0?C:!0))return!1;const F=k||this.hasFill(),M=this.hasStroke(),D=this.getAbsoluteOpacity()!==1;if(F&&M&&D)return!0;const $=this.hasShadow(),V=this.shadowForStrokeEnabled();return!!(F&&M&&$&&V)}setStrokeHitEnabled(k){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),k?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const k=this.size();return{x:this._centroid?-k.width/2:0,y:this._centroid?-k.height/2:0,width:k.width,height:k.height}}getClientRect(k={}){let C=!1,O=this.getParent();for(;O;){if(O.isCached()){C=!0;break}O=O.getParent()}const F=k.skipTransform,M=k.relativeTo||C&&this.getStage()||void 0,D=this.getSelfRect(),V=!k.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,K=D.width+V,H=D.height+V,q=!k.skipShadow&&this.hasShadow(),I=q?this.shadowOffsetX():0,z=q?this.shadowOffsetY():0,W=K+Math.abs(I),Q=H+Math.abs(z),ee=q&&this.shadowBlur()||0,Y=W+ee*2,U=Q+ee*2,J={width:Y,height:U,x:-(V/2+ee)+Math.min(I,0)+D.x,y:-(V/2+ee)+Math.min(z,0)+D.y};return F?J:this._transformedRect(J,M)}drawScene(k,C,O){const F=this.getLayer();let M=k||F.getCanvas(),D=M.getContext(),$=this._getCanvasCache(),V=this.getSceneFunc(),K=this.hasShadow(),H,q;const I=M.isCache,z=C===this;if(!this.isVisible()&&!z)return this;if($){D.save();const Q=this.getAbsoluteTransform(C).getMatrix();return D.transform(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5]),this._drawCachedSceneCanvas(D),D.restore(),this}if(!V)return this;if(D.save(),this._useBufferCanvas()&&!I){H=this.getStage();const Q=O||H.bufferCanvas;q=Q.getContext(),q.clear(),q.save(),q._applyLineJoin(this);var W=this.getAbsoluteTransform(C).getMatrix();q.transform(W[0],W[1],W[2],W[3],W[4],W[5]),V.call(this,q,this),q.restore();const ee=Q.pixelRatio;K&&D._applyShadow(this),D._applyOpacity(this),D._applyGlobalCompositeOperation(this),D.drawImage(Q._canvas,0,0,Q.width/ee,Q.height/ee)}else{if(D._applyLineJoin(this),!z){var W=this.getAbsoluteTransform(C).getMatrix();D.transform(W[0],W[1],W[2],W[3],W[4],W[5]),D._applyOpacity(this),D._applyGlobalCompositeOperation(this)}K&&D._applyShadow(this),V.call(this,D,this)}return D.restore(),this}drawHit(k,C,O=!1){if(!this.shouldDrawHit(C,O))return this;const F=this.getLayer(),M=k||F.hitCanvas,D=M&&M.getContext(),$=this.hitFunc()||this.sceneFunc(),V=this._getCanvasCache(),K=V&&V.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),K){D.save();const q=this.getAbsoluteTransform(C).getMatrix();return D.transform(q[0],q[1],q[2],q[3],q[4],q[5]),this._drawCachedHitCanvas(D),D.restore(),this}if(!$)return this;if(D.save(),D._applyLineJoin(this),!(this===C)){const q=this.getAbsoluteTransform(C).getMatrix();D.transform(q[0],q[1],q[2],q[3],q[4],q[5])}return $.call(this,D,this),D.restore(),this}drawHitFromCache(k=0){let C=this._getCanvasCache(),O=this._getCachedSceneCanvas(),F=C.hit,M=F.getContext(),D=F.getWidth(),$=F.getHeight(),V,K,H,q,I,z;M.clear(),M.drawImage(O._canvas,0,0,D,$);try{for(V=M.getImageData(0,0,D,$),K=V.data,H=K.length,q=n.Util._hexToRgb(this.colorKey),I=0;I<H;I+=4)z=K[I+3],z>k?(K[I]=q.r,K[I+1]=q.g,K[I+2]=q.b,K[I+3]=255):K[I+3]=0;M.putImageData(V,0,0)}catch(W){n.Util.error("Unable to draw hit graph from cached scene canvas. "+W.message)}return this}hasPointerCapture(k){return o.hasPointerCapture(k,this)}setPointerCapture(k){o.setPointerCapture(k,this)}releaseCapture(k){o.releaseCapture(k,this)}}e.Shape=T,T.prototype._fillFunc=y,T.prototype._strokeFunc=N,T.prototype._fillFuncHit=v,T.prototype._strokeFuncHit=_,T.prototype._centroid=!1,T.prototype.nodeType="Shape",(0,s._registerNode)(T),T.prototype.eventListeners={},T.prototype.on.call(T.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",x),T.prototype.on.call(T.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",w),T.prototype.on.call(T.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",E),T.prototype.on.call(T.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",P),T.prototype.on.call(T.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",A),r.Factory.addGetterSetter(T,"stroke",void 0,(0,a.getStringOrGradientValidator)()),r.Factory.addGetterSetter(T,"strokeWidth",2,(0,a.getNumberValidator)()),r.Factory.addGetterSetter(T,"fillAfterStrokeEnabled",!1),r.Factory.addGetterSetter(T,"hitStrokeWidth","auto",(0,a.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(T,"strokeHitEnabled",!0,(0,a.getBooleanValidator)()),r.Factory.addGetterSetter(T,"perfectDrawEnabled",!0,(0,a.getBooleanValidator)()),r.Factory.addGetterSetter(T,"shadowForStrokeEnabled",!0,(0,a.getBooleanValidator)()),r.Factory.addGetterSetter(T,"lineJoin"),r.Factory.addGetterSetter(T,"lineCap"),r.Factory.addGetterSetter(T,"sceneFunc"),r.Factory.addGetterSetter(T,"hitFunc"),r.Factory.addGetterSetter(T,"dash"),r.Factory.addGetterSetter(T,"dashOffset",0,(0,a.getNumberValidator)()),r.Factory.addGetterSetter(T,"shadowColor",void 0,(0,a.getStringValidator)()),r.Factory.addGetterSetter(T,"shadowBlur",0,(0,a.getNumberValidator)()),r.Factory.addGetterSetter(T,"shadowOpacity",1,(0,a.getNumberValidator)()),r.Factory.addComponentsGetterSetter(T,"shadowOffset",["x","y"]),r.Factory.addGetterSetter(T,"shadowOffsetX",0,(0,a.getNumberValidator)()),r.Factory.addGetterSetter(T,"shadowOffsetY",0,(0,a.getNumberValidator)()),r.Factory.addGetterSetter(T,"fillPatternImage"),r.Factory.addGetterSetter(T,"fill",void 0,(0,a.getStringOrGradientValidator)()),r.Factory.addGetterSetter(T,"fillPatternX",0,(0,a.getNumberValidator)()),r.Factory.addGetterSetter(T,"fillPatternY",0,(0,a.getNumberValidator)()),r.Factory.addGetterSetter(T,"fillLinearGradientColorStops"),r.Factory.addGetterSetter(T,"strokeLinearGradientColorStops"),r.Factory.addGetterSetter(T,"fillRadialGradientStartRadius",0),r.Factory.addGetterSetter(T,"fillRadialGradientEndRadius",0),r.Factory.addGetterSetter(T,"fillRadialGradientColorStops"),r.Factory.addGetterSetter(T,"fillPatternRepeat","repeat"),r.Factory.addGetterSetter(T,"fillEnabled",!0),r.Factory.addGetterSetter(T,"strokeEnabled",!0),r.Factory.addGetterSetter(T,"shadowEnabled",!0),r.Factory.addGetterSetter(T,"dashEnabled",!0),r.Factory.addGetterSetter(T,"strokeScaleEnabled",!0),r.Factory.addGetterSetter(T,"fillPriority","color"),r.Factory.addComponentsGetterSetter(T,"fillPatternOffset",["x","y"]),r.Factory.addGetterSetter(T,"fillPatternOffsetX",0,(0,a.getNumberValidator)()),r.Factory.addGetterSetter(T,"fillPatternOffsetY",0,(0,a.getNumberValidator)()),r.Factory.addComponentsGetterSetter(T,"fillPatternScale",["x","y"]),r.Factory.addGetterSetter(T,"fillPatternScaleX",1,(0,a.getNumberValidator)()),r.Factory.addGetterSetter(T,"fillPatternScaleY",1,(0,a.getNumberValidator)()),r.Factory.addComponentsGetterSetter(T,"fillLinearGradientStartPoint",["x","y"]),r.Factory.addComponentsGetterSetter(T,"strokeLinearGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(T,"fillLinearGradientStartPointX",0),r.Factory.addGetterSetter(T,"strokeLinearGradientStartPointX",0),r.Factory.addGetterSetter(T,"fillLinearGradientStartPointY",0),r.Factory.addGetterSetter(T,"strokeLinearGradientStartPointY",0),r.Factory.addComponentsGetterSetter(T,"fillLinearGradientEndPoint",["x","y"]),r.Factory.addComponentsGetterSetter(T,"strokeLinearGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(T,"fillLinearGradientEndPointX",0),r.Factory.addGetterSetter(T,"strokeLinearGradientEndPointX",0),r.Factory.addGetterSetter(T,"fillLinearGradientEndPointY",0),r.Factory.addGetterSetter(T,"strokeLinearGradientEndPointY",0),r.Factory.addComponentsGetterSetter(T,"fillRadialGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(T,"fillRadialGradientStartPointX",0),r.Factory.addGetterSetter(T,"fillRadialGradientStartPointY",0),r.Factory.addComponentsGetterSetter(T,"fillRadialGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(T,"fillRadialGradientEndPointX",0),r.Factory.addGetterSetter(T,"fillRadialGradientEndPointY",0),r.Factory.addGetterSetter(T,"fillPatternRotation",0),r.Factory.addGetterSetter(T,"fillRule",void 0,(0,a.getStringValidator)()),r.Factory.backCompat(T,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(Kt);Object.defineProperty(Gu,"__esModule",{value:!0});Gu.Layer=void 0;const ki=Ot,Fx=Ws,_o=Nt,g5=Ue,rk=Fr,MJ=Re,LJ=Kt,DJ=Be,FJ="#",zJ="beforeDraw",BJ="draw",SO=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],qJ=SO.length;let Cl=class extends Fx.Container{constructor(t){super(t),this.canvas=new rk.SceneCanvas,this.hitCanvas=new rk.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);const n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),t<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[t+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){_o.Node.prototype.moveToTop.call(this);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!_o.Node.prototype.moveUp.call(this))return!1;const n=this.getStage();return!n||!n.content?!1:(n.content.removeChild(this.getNativeCanvasElement()),this.index<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(_o.Node.prototype.moveDown.call(this)){const t=this.getStage();if(t){const n=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),n[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(_o.Node.prototype.moveToBottom.call(this)){const t=this.getStage();if(t){const n=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),n[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const t=this.getNativeCanvasElement();return _o.Node.prototype.remove.call(this),t&&t.parentNode&&ki.Util._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:n}){return this.canvas.setSize(t,n),this.hitCanvas.setSize(t,n),this._setSmoothEnabled(),this}_validateAdd(t){const n=t.getType();n!=="Group"&&n!=="Shape"&&ki.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t=t||{},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),_o.Node.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){ki.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){ki.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,ki.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;let n=1,r=!1;for(;;){for(let i=0;i<qJ;i++){const a=SO[i],s=this._getIntersection({x:t.x+a.x*n,y:t.y+a.y*n}),o=s.shape;if(o)return o;if(r=!!s.antialiased,!s.antialiased)break}if(r)n+=1;else return null}}_getIntersection(t){const n=this.hitCanvas.pixelRatio,r=this.hitCanvas.context.getImageData(Math.round(t.x*n),Math.round(t.y*n),1,1).data,i=r[3];if(i===255){const a=ki.Util._rgbToHex(r[0],r[1],r[2]),s=LJ.shapes[FJ+a];return s?{shape:s}:{antialiased:!0}}else if(i>0)return{antialiased:!0};return{}}drawScene(t,n){const r=this.getLayer(),i=t||r&&r.getCanvas();return this._fire(zJ,{node:this}),this.clearBeforeDraw()&&i.getContext().clear(),Fx.Container.prototype.drawScene.call(this,i,n),this._fire(BJ,{node:this}),this}drawHit(t,n){const r=this.getLayer(),i=t||r&&r.hitCanvas;return r&&r.clearBeforeDraw()&&r.getHitCanvas().getContext().clear(),Fx.Container.prototype.drawHit.call(this,i,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){ki.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return ki.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const t=this.parent;!!this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}destroy(){return ki.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};Gu.Layer=Cl;Cl.prototype.nodeType="Layer";(0,DJ._registerNode)(Cl);g5.Factory.addGetterSetter(Cl,"imageSmoothingEnabled",!0);g5.Factory.addGetterSetter(Cl,"clearBeforeDraw",!0);g5.Factory.addGetterSetter(Cl,"hitGraphEnabled",!0,(0,MJ.getBooleanValidator)());var Up={};Object.defineProperty(Up,"__esModule",{value:!0});Up.FastLayer=void 0;const $J=Ot,UJ=Gu,GJ=Be;class v5 extends UJ.Layer{constructor(t){super(t),this.listening(!1),$J.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}Up.FastLayer=v5;v5.prototype.nodeType="FastLayer";(0,GJ._registerNode)(v5);var Tl={};Object.defineProperty(Tl,"__esModule",{value:!0});Tl.Group=void 0;const HJ=Ot,VJ=Ws,WJ=Be;class y5 extends VJ.Container{_validateAdd(t){const n=t.getType();n!=="Group"&&n!=="Shape"&&HJ.Util.throw("You may only add groups and shapes to groups.")}}Tl.Group=y5;y5.prototype.nodeType="Group";(0,WJ._registerNode)(y5);var Ol={};Object.defineProperty(Ol,"__esModule",{value:!0});Ol.Animation=void 0;const zx=Be,ik=Ot,Bx=function(){return zx.glob.performance&&zx.glob.performance.now?function(){return zx.glob.performance.now()}:function(){return new Date().getTime()}}();class ai{constructor(t,n){this.id=ai.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:Bx(),frameRate:0},this.func=t,this.setLayers(n)}setLayers(t){let n=[];return t&&(n=Array.isArray(t)?t:[t]),this.layers=n,this}getLayers(){return this.layers}addLayer(t){const n=this.layers,r=n.length;for(let i=0;i<r;i++)if(n[i]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){const n=ai.animations,r=n.length;for(let i=0;i<r;i++)if(n[i].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=Bx(),ai._addAnimation(this),this}stop(){return ai._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){const n=t.id,r=this.animations,i=r.length;for(let a=0;a<i;a++)if(r[a].id===n){this.animations.splice(a,1);break}}static _runFrames(){const t={},n=this.animations;for(let r=0;r<n.length;r++){const i=n[r],a=i.layers,s=i.func;i._updateFrameObject(Bx());const o=a.length;let c;if(s?c=s.call(i,i.frame)!==!1:c=!0,!!c)for(let d=0;d<o;d++){const f=a[d];f._id!==void 0&&(t[f._id]=f)}}for(const r in t)t.hasOwnProperty(r)&&t[r].batchDraw()}static _animationLoop(){const t=ai;t.animations.length?(t._runFrames(),ik.Util.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,ik.Util.requestAnimFrame(this._animationLoop))}}Ol.Animation=ai;ai.animations=[];ai.animIdCounter=0;ai.animRunning=!1;var EO={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Easings=e.Tween=void 0;const t=Ot,n=Ol,r=Nt,i=Be;let a={node:1,duration:1,easing:1,onFinish:1,yoyo:1},s=1,o=2,c=3,d=0,f=["fill","stroke","shadowColor"];class p{constructor(b,y,N,v,_,x,w){this.prop=b,this.propFunc=y,this.begin=v,this._pos=v,this.duration=x,this._change=0,this.prevPos=0,this.yoyo=w,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=N,this._change=_-this.begin,this.pause()}fire(b){const y=this[b];y&&y()}setTime(b){b>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():b<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=b,this.update())}getTime(){return this._time}setPosition(b){this.prevPos=this._pos,this.propFunc(b),this._pos=b}getPosition(b){return b===void 0&&(b=this._time),this.func(b,this.begin,this._change,this.duration)}play(){this.state=o,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=c,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(b){this.pause(),this._time=b,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const b=this.getTimer()-this._startTime;this.state===o?this.setTime(b):this.state===c&&this.setTime(this.duration-b)}pause(){this.state=s,this.fire("onPause")}getTimer(){return new Date().getTime()}}class m{constructor(b){let y=this,N=b.node,v=N._id,_,x=b.easing||e.Easings.Linear,w=!!b.yoyo,E;typeof b.duration>"u"?_=.3:b.duration===0?_=.001:_=b.duration,this.node=N,this._id=d++;const P=N.getLayer()||(N instanceof i.Konva.Stage?N.getLayers():null);P||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){y.tween.onEnterFrame()},P),this.tween=new p(E,function(A){y._tweenFunc(A)},x,0,1,_*1e3,w),this._addListeners(),m.attrs[v]||(m.attrs[v]={}),m.attrs[v][this._id]||(m.attrs[v][this._id]={}),m.tweens[v]||(m.tweens[v]={});for(E in b)a[E]===void 0&&this._addAttr(E,b[E]);this.reset(),this.onFinish=b.onFinish,this.onReset=b.onReset,this.onUpdate=b.onUpdate}_addAttr(b,y){let N=this.node,v=N._id,_,x,w,E,P,A,T,L;if(w=m.tweens[v][b],w&&delete m.attrs[v][w][b],_=N.getAttr(b),t.Util._isArray(y))if(x=[],P=Math.max(y.length,_.length),b==="points"&&y.length!==_.length&&(y.length>_.length?(T=_,_=t.Util._prepareArrayForTween(_,y,N.closed())):(A=y,y=t.Util._prepareArrayForTween(y,_,N.closed()))),b.indexOf("fill")===0)for(E=0;E<P;E++)if(E%2===0)x.push(y[E]-_[E]);else{const k=t.Util.colorToRGBA(_[E]);L=t.Util.colorToRGBA(y[E]),_[E]=k,x.push({r:L.r-k.r,g:L.g-k.g,b:L.b-k.b,a:L.a-k.a})}else for(E=0;E<P;E++)x.push(y[E]-_[E]);else f.indexOf(b)!==-1?(_=t.Util.colorToRGBA(_),L=t.Util.colorToRGBA(y),x={r:L.r-_.r,g:L.g-_.g,b:L.b-_.b,a:L.a-_.a}):x=y-_;m.attrs[v][this._id][b]={start:_,diff:x,end:y,trueEnd:A,trueStart:T},m.tweens[v][b]=this._id}_tweenFunc(b){let y=this.node,N=m.attrs[y._id][this._id],v,_,x,w,E,P,A,T;for(v in N){if(_=N[v],x=_.start,w=_.diff,T=_.end,t.Util._isArray(x))if(E=[],A=Math.max(x.length,T.length),v.indexOf("fill")===0)for(P=0;P<A;P++)P%2===0?E.push((x[P]||0)+w[P]*b):E.push("rgba("+Math.round(x[P].r+w[P].r*b)+","+Math.round(x[P].g+w[P].g*b)+","+Math.round(x[P].b+w[P].b*b)+","+(x[P].a+w[P].a*b)+")");else for(P=0;P<A;P++)E.push((x[P]||0)+w[P]*b);else f.indexOf(v)!==-1?E="rgba("+Math.round(x.r+w.r*b)+","+Math.round(x.g+w.g*b)+","+Math.round(x.b+w.b*b)+","+(x.a+w.a*b)+")":E=x+w*b;y.setAttr(v,E)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const b=this.node,y=m.attrs[b._id][this._id];y.points&&y.points.trueEnd&&b.setAttr("points",y.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const b=this.node,y=m.attrs[b._id][this._id];y.points&&y.points.trueStart&&b.points(y.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(b){return this.tween.seek(b*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){let b=this.node._id,y=this._id,N=m.tweens[b],v;this.pause();for(v in N)delete m.tweens[b][v];delete m.attrs[b][y]}}e.Tween=m,m.attrs={},m.tweens={},r.Node.prototype.to=function(g){const b=g.onFinish;g.node=this,g.onFinish=function(){this.destroy(),b&&b()},new m(g).play()},e.Easings={BackEaseIn(g,b,y,N){return y*(g/=N)*g*((1.70158+1)*g-1.70158)+b},BackEaseOut(g,b,y,N){return y*((g=g/N-1)*g*((1.70158+1)*g+1.70158)+1)+b},BackEaseInOut(g,b,y,N){let v=1.70158;return(g/=N/2)<1?y/2*(g*g*(((v*=1.525)+1)*g-v))+b:y/2*((g-=2)*g*(((v*=1.525)+1)*g+v)+2)+b},ElasticEaseIn(g,b,y,N,v,_){let x=0;return g===0?b:(g/=N)===1?b+y:(_||(_=N*.3),!v||v<Math.abs(y)?(v=y,x=_/4):x=_/(2*Math.PI)*Math.asin(y/v),-(v*Math.pow(2,10*(g-=1))*Math.sin((g*N-x)*(2*Math.PI)/_))+b)},ElasticEaseOut(g,b,y,N,v,_){let x=0;return g===0?b:(g/=N)===1?b+y:(_||(_=N*.3),!v||v<Math.abs(y)?(v=y,x=_/4):x=_/(2*Math.PI)*Math.asin(y/v),v*Math.pow(2,-10*g)*Math.sin((g*N-x)*(2*Math.PI)/_)+y+b)},ElasticEaseInOut(g,b,y,N,v,_){let x=0;return g===0?b:(g/=N/2)===2?b+y:(_||(_=N*(.3*1.5)),!v||v<Math.abs(y)?(v=y,x=_/4):x=_/(2*Math.PI)*Math.asin(y/v),g<1?-.5*(v*Math.pow(2,10*(g-=1))*Math.sin((g*N-x)*(2*Math.PI)/_))+b:v*Math.pow(2,-10*(g-=1))*Math.sin((g*N-x)*(2*Math.PI)/_)*.5+y+b)},BounceEaseOut(g,b,y,N){return(g/=N)<1/2.75?y*(7.5625*g*g)+b:g<2/2.75?y*(7.5625*(g-=1.5/2.75)*g+.75)+b:g<2.5/2.75?y*(7.5625*(g-=2.25/2.75)*g+.9375)+b:y*(7.5625*(g-=2.625/2.75)*g+.984375)+b},BounceEaseIn(g,b,y,N){return y-e.Easings.BounceEaseOut(N-g,0,y,N)+b},BounceEaseInOut(g,b,y,N){return g<N/2?e.Easings.BounceEaseIn(g*2,0,y,N)*.5+b:e.Easings.BounceEaseOut(g*2-N,0,y,N)*.5+y*.5+b},EaseIn(g,b,y,N){return y*(g/=N)*g+b},EaseOut(g,b,y,N){return-y*(g/=N)*(g-2)+b},EaseInOut(g,b,y,N){return(g/=N/2)<1?y/2*g*g+b:-y/2*(--g*(g-2)-1)+b},StrongEaseIn(g,b,y,N){return y*(g/=N)*g*g*g*g+b},StrongEaseOut(g,b,y,N){return y*((g=g/N-1)*g*g*g*g+1)+b},StrongEaseInOut(g,b,y,N){return(g/=N/2)<1?y/2*g*g*g*g*g+b:y/2*((g-=2)*g*g*g*g+2)+b},Linear(g,b,y,N){return y*g/N+b}}})(EO);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;const t=Be,n=Ot,r=Nt,i=Ws,a=wO,s=Gu,o=Up,c=Tl,d=qp,f=Kt,p=Ol,m=EO,g=Li,b=Fr;e.Konva=n.Util._assign(t.Konva,{Util:n.Util,Transform:n.Transform,Node:r.Node,Container:i.Container,Stage:a.Stage,stages:a.stages,Layer:s.Layer,FastLayer:o.FastLayer,Group:c.Group,DD:d.DD,Shape:f.Shape,shapes:f.shapes,Animation:p.Animation,Tween:m.Tween,Easings:m.Easings,Context:g.Context,Canvas:b.Canvas}),e.default=e.Konva})(qh);var Gp={};Object.defineProperty(Gp,"__esModule",{value:!0});Gp.Arc=void 0;const Hp=Ue,KJ=Kt,ak=Be,Vp=Re,YJ=Be;class Xi extends KJ.Shape{_sceneFunc(t){const n=ak.Konva.getAngle(this.angle()),r=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,n,r),t.arc(0,0,this.innerRadius(),n,0,!r),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),n=this.outerRadius(),r=this.clockwise(),i=ak.Konva.getAngle(r?360-this.angle():this.angle()),a=Math.cos(Math.min(i,Math.PI)),s=1,o=Math.sin(Math.min(Math.max(Math.PI,i),3*Math.PI/2)),c=Math.sin(Math.min(i,Math.PI/2)),d=a*(a>0?t:n),f=s*n,p=o*(o>0?t:n),m=c*(c>0?n:t);return{x:d,y:r?-1*m:p,width:f-d,height:m-p}}}Gp.Arc=Xi;Xi.prototype._centroid=!0;Xi.prototype.className="Arc";Xi.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,YJ._registerNode)(Xi);Hp.Factory.addGetterSetter(Xi,"innerRadius",0,(0,Vp.getNumberValidator)());Hp.Factory.addGetterSetter(Xi,"outerRadius",0,(0,Vp.getNumberValidator)());Hp.Factory.addGetterSetter(Xi,"angle",0,(0,Vp.getNumberValidator)());Hp.Factory.addGetterSetter(Xi,"clockwise",!1,(0,Vp.getBooleanValidator)());var Wp={},Hu={};Object.defineProperty(Hu,"__esModule",{value:!0});Hu.Line=void 0;const Kp=Ue,XJ=Be,QJ=Kt,kO=Re;function _2(e,t,n,r,i,a,s){const o=Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2)),c=Math.sqrt(Math.pow(i-n,2)+Math.pow(a-r,2)),d=s*o/(o+c),f=s*c/(o+c),p=n-d*(i-e),m=r-d*(a-t),g=n+f*(i-e),b=r+f*(a-t);return[p,m,g,b]}function sk(e,t){const n=e.length,r=[];for(let i=2;i<n-2;i+=2){const a=_2(e[i-2],e[i-1],e[i],e[i+1],e[i+2],e[i+3],t);isNaN(a[0])||(r.push(a[0]),r.push(a[1]),r.push(e[i]),r.push(e[i+1]),r.push(a[2]),r.push(a[3]))}return r}let Qa=class extends QJ.Shape{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){let n=this.points(),r=n.length,i=this.tension(),a=this.closed(),s=this.bezier(),o,c,d;if(r){if(t.beginPath(),t.moveTo(n[0],n[1]),i!==0&&r>4){for(o=this.getTensionPoints(),c=o.length,d=a?0:4,a||t.quadraticCurveTo(o[0],o[1],o[2],o[3]);d<c-2;)t.bezierCurveTo(o[d++],o[d++],o[d++],o[d++],o[d++],o[d++]);a||t.quadraticCurveTo(o[c-2],o[c-1],n[r-2],n[r-1])}else if(s)for(d=2;d<r;)t.bezierCurveTo(n[d++],n[d++],n[d++],n[d++],n[d++],n[d++]);else for(d=2;d<r;d+=2)t.lineTo(n[d],n[d+1]);a?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():sk(this.points(),this.tension())}_getTensionPointsClosed(){const t=this.points(),n=t.length,r=this.tension(),i=_2(t[n-2],t[n-1],t[0],t[1],t[2],t[3],r),a=_2(t[n-4],t[n-3],t[n-2],t[n-1],t[0],t[1],r),s=sk(t,r);return[i[2],i[3]].concat(s).concat([a[0],a[1],t[n-2],t[n-1],a[2],a[3],i[0],i[1],t[0],t[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:t=this.points();let n=t[0],r=t[0],i=t[1],a=t[1],s,o;for(let c=0;c<t.length/2;c++)s=t[c*2],o=t[c*2+1],n=Math.min(n,s),r=Math.max(r,s),i=Math.min(i,o),a=Math.max(a,o);return{x:n,y:i,width:r-n,height:a-i}}};Hu.Line=Qa;Qa.prototype.className="Line";Qa.prototype._attrsAffectingSize=["points","bezier","tension"];(0,XJ._registerNode)(Qa);Kp.Factory.addGetterSetter(Qa,"closed",!1);Kp.Factory.addGetterSetter(Qa,"bezier",!1);Kp.Factory.addGetterSetter(Qa,"tension",0,(0,kO.getNumberValidator)());Kp.Factory.addGetterSetter(Qa,"points",[],(0,kO.getNumberArrayValidator)());var Pl={},jO={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.t2length=e.getQuadraticArcLength=e.getCubicArcLength=e.binomialCoefficients=e.cValues=e.tValues=void 0,e.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],e.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],e.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const t=(s,o,c)=>{let d,f;const m=c/2;d=0;for(let g=0;g<20;g++)f=m*e.tValues[20][g]+m,d+=e.cValues[20][g]*r(s,o,f);return m*d};e.getCubicArcLength=t;const n=(s,o,c)=>{c===void 0&&(c=1);const d=s[0]-2*s[1]+s[2],f=o[0]-2*o[1]+o[2],p=2*s[1]-2*s[0],m=2*o[1]-2*o[0],g=4*(d*d+f*f),b=4*(d*p+f*m),y=p*p+m*m;if(g===0)return c*Math.sqrt(Math.pow(s[2]-s[0],2)+Math.pow(o[2]-o[0],2));const N=b/(2*g),v=y/g,_=c+N,x=v-N*N,w=_*_+x>0?Math.sqrt(_*_+x):0,E=N*N+x>0?Math.sqrt(N*N+x):0,P=N+Math.sqrt(N*N+x)!==0?x*Math.log(Math.abs((_+w)/(N+E))):0;return Math.sqrt(g)/2*(_*w-N*E+P)};e.getQuadraticArcLength=n;function r(s,o,c){const d=i(1,c,s),f=i(1,c,o),p=d*d+f*f;return Math.sqrt(p)}const i=(s,o,c)=>{const d=c.length-1;let f,p;if(d===0)return 0;if(s===0){p=0;for(let m=0;m<=d;m++)p+=e.binomialCoefficients[d][m]*Math.pow(1-o,d-m)*Math.pow(o,m)*c[m];return p}else{f=new Array(d);for(let m=0;m<d;m++)f[m]=d*(c[m+1]-c[m]);return i(s-1,o,f)}},a=(s,o,c)=>{let d=1,f=s/o,p=(s-c(f))/o,m=0;for(;d>.001;){const g=c(f+p),b=Math.abs(s-g)/o;if(b<d)d=b,f+=p;else{const y=c(f-p),N=Math.abs(s-y)/o;N<d?(d=N,f-=p):p/=2}if(m++,m>500)break}return f};e.t2length=a})(jO);Object.defineProperty(Pl,"__esModule",{value:!0});Pl.Path=void 0;const ZJ=Ue,JJ=Kt,eee=Be,No=jO;class Ht extends JJ.Shape{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Ht.parsePathData(this.data()),this.pathLength=Ht.getPathLength(this.dataArray)}_sceneFunc(t){const n=this.dataArray;t.beginPath();let r=!1;for(let y=0;y<n.length;y++){const N=n[y].command,v=n[y].points;switch(N){case"L":t.lineTo(v[0],v[1]);break;case"M":t.moveTo(v[0],v[1]);break;case"C":t.bezierCurveTo(v[0],v[1],v[2],v[3],v[4],v[5]);break;case"Q":t.quadraticCurveTo(v[0],v[1],v[2],v[3]);break;case"A":var i=v[0],a=v[1],s=v[2],o=v[3],c=v[4],d=v[5],f=v[6],p=v[7],m=s>o?s:o,g=s>o?1:s/o,b=s>o?o/s:1;t.translate(i,a),t.rotate(f),t.scale(g,b),t.arc(0,0,m,c,c+d,1-p),t.scale(1/g,1/b),t.rotate(-f),t.translate(-i,-a);break;case"z":r=!0,t.closePath();break}}!r&&!this.hasFill()?t.strokeShape(this):t.fillStrokeShape(this)}getSelfRect(){let t=[];this.dataArray.forEach(function(c){if(c.command==="A"){const d=c.points[4],f=c.points[5],p=c.points[4]+f;let m=Math.PI/180;if(Math.abs(d-p)<m&&(m=Math.abs(d-p)),f<0)for(let g=d-m;g>p;g-=m){const b=Ht.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],g,0);t.push(b.x,b.y)}else for(let g=d+m;g<p;g+=m){const b=Ht.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],g,0);t.push(b.x,b.y)}}else if(c.command==="C")for(let d=0;d<=1;d+=.01){const f=Ht.getPointOnCubicBezier(d,c.start.x,c.start.y,c.points[0],c.points[1],c.points[2],c.points[3],c.points[4],c.points[5]);t.push(f.x,f.y)}else t=t.concat(c.points)});let n=t[0],r=t[0],i=t[1],a=t[1],s,o;for(let c=0;c<t.length/2;c++)s=t[c*2],o=t[c*2+1],isNaN(s)||(n=Math.min(n,s),r=Math.max(r,s)),isNaN(o)||(i=Math.min(i,o),a=Math.max(a,o));return{x:n,y:i,width:r-n,height:a-i}}getLength(){return this.pathLength}getPointAtLength(t){return Ht.getPointAtLengthOfDataArray(t,this.dataArray)}static getLineLength(t,n,r,i){return Math.sqrt((r-t)*(r-t)+(i-n)*(i-n))}static getPathLength(t){let n=0;for(let r=0;r<t.length;++r)n+=t[r].pathLength;return n}static getPointAtLengthOfDataArray(t,n){let r,i=0,a=n.length;if(!a)return null;for(;i<a&&t>n[i].pathLength;)t-=n[i].pathLength,++i;if(i===a)return r=n[i-1].points.slice(-2),{x:r[0],y:r[1]};if(t<.01)return r=n[i].points.slice(0,2),{x:r[0],y:r[1]};const s=n[i],o=s.points;switch(s.command){case"L":return Ht.getPointOnLine(t,s.start.x,s.start.y,o[0],o[1]);case"C":return Ht.getPointOnCubicBezier((0,No.t2length)(t,Ht.getPathLength(n),y=>(0,No.getCubicArcLength)([s.start.x,o[0],o[2],o[4]],[s.start.y,o[1],o[3],o[5]],y)),s.start.x,s.start.y,o[0],o[1],o[2],o[3],o[4],o[5]);case"Q":return Ht.getPointOnQuadraticBezier((0,No.t2length)(t,Ht.getPathLength(n),y=>(0,No.getQuadraticArcLength)([s.start.x,o[0],o[2]],[s.start.y,o[1],o[3]],y)),s.start.x,s.start.y,o[0],o[1],o[2],o[3]);case"A":var c=o[0],d=o[1],f=o[2],p=o[3],m=o[4],g=o[5],b=o[6];return m+=g*t/s.pathLength,Ht.getPointOnEllipticalArc(c,d,f,p,m,b)}return null}static getPointOnLine(t,n,r,i,a,s,o){s=s??n,o=o??r;const c=this.getLineLength(n,r,i,a);if(c<1e-10)return{x:n,y:r};if(i===n)return{x:s,y:o+(a>r?t:-t)};const d=(a-r)/(i-n),f=Math.sqrt(t*t/(1+d*d))*(i<n?-1:1),p=d*f;if(Math.abs(o-r-d*(s-n))<1e-10)return{x:s+f,y:o+p};const m=((s-n)*(i-n)+(o-r)*(a-r))/(c*c),g=n+m*(i-n),b=r+m*(a-r),y=this.getLineLength(s,o,g,b),N=Math.sqrt(t*t-y*y),v=Math.sqrt(N*N/(1+d*d))*(i<n?-1:1),_=d*v;return{x:g+v,y:b+_}}static getPointOnCubicBezier(t,n,r,i,a,s,o,c,d){function f(N){return N*N*N}function p(N){return 3*N*N*(1-N)}function m(N){return 3*N*(1-N)*(1-N)}function g(N){return(1-N)*(1-N)*(1-N)}const b=c*f(t)+s*p(t)+i*m(t)+n*g(t),y=d*f(t)+o*p(t)+a*m(t)+r*g(t);return{x:b,y}}static getPointOnQuadraticBezier(t,n,r,i,a,s,o){function c(g){return g*g}function d(g){return 2*g*(1-g)}function f(g){return(1-g)*(1-g)}const p=s*c(t)+i*d(t)+n*f(t),m=o*c(t)+a*d(t)+r*f(t);return{x:p,y:m}}static getPointOnEllipticalArc(t,n,r,i,a,s){const o=Math.cos(s),c=Math.sin(s),d={x:r*Math.cos(a),y:i*Math.sin(a)};return{x:t+(d.x*o-d.y*c),y:n+(d.x*c+d.y*o)}}static parsePathData(t){if(!t)return[];let n=t;const r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(var i=0;i<r.length;i++)n=n.replace(new RegExp(r[i],"g"),"|"+r[i]);const a=n.split("|"),s=[],o=[];let c=0,d=0;const f=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let p;for(i=1;i<a.length;i++){let T=a[i],L=T.charAt(0);for(T=T.slice(1),o.length=0;p=f.exec(T);)o.push(p[0]);const k=[];for(let C=0,O=o.length;C<O;C++){if(o[C]==="00"){k.push(0,0);continue}const F=parseFloat(o[C]);isNaN(F)?k.push(0):k.push(F)}for(;k.length>0&&!isNaN(k[0]);){let C="",O=[];const F=c,M=d;var m,g,b,y,N,v,_,x,w,E;switch(L){case"l":c+=k.shift(),d+=k.shift(),C="L",O.push(c,d);break;case"L":c=k.shift(),d=k.shift(),O.push(c,d);break;case"m":var P=k.shift(),A=k.shift();if(c+=P,d+=A,C="M",s.length>2&&s[s.length-1].command==="z"){for(let D=s.length-2;D>=0;D--)if(s[D].command==="M"){c=s[D].points[0]+P,d=s[D].points[1]+A;break}}O.push(c,d),L="l";break;case"M":c=k.shift(),d=k.shift(),C="M",O.push(c,d),L="L";break;case"h":c+=k.shift(),C="L",O.push(c,d);break;case"H":c=k.shift(),C="L",O.push(c,d);break;case"v":d+=k.shift(),C="L",O.push(c,d);break;case"V":d=k.shift(),C="L",O.push(c,d);break;case"C":O.push(k.shift(),k.shift(),k.shift(),k.shift()),c=k.shift(),d=k.shift(),O.push(c,d);break;case"c":O.push(c+k.shift(),d+k.shift(),c+k.shift(),d+k.shift()),c+=k.shift(),d+=k.shift(),C="C",O.push(c,d);break;case"S":g=c,b=d,m=s[s.length-1],m.command==="C"&&(g=c+(c-m.points[2]),b=d+(d-m.points[3])),O.push(g,b,k.shift(),k.shift()),c=k.shift(),d=k.shift(),C="C",O.push(c,d);break;case"s":g=c,b=d,m=s[s.length-1],m.command==="C"&&(g=c+(c-m.points[2]),b=d+(d-m.points[3])),O.push(g,b,c+k.shift(),d+k.shift()),c+=k.shift(),d+=k.shift(),C="C",O.push(c,d);break;case"Q":O.push(k.shift(),k.shift()),c=k.shift(),d=k.shift(),O.push(c,d);break;case"q":O.push(c+k.shift(),d+k.shift()),c+=k.shift(),d+=k.shift(),C="Q",O.push(c,d);break;case"T":g=c,b=d,m=s[s.length-1],m.command==="Q"&&(g=c+(c-m.points[0]),b=d+(d-m.points[1])),c=k.shift(),d=k.shift(),C="Q",O.push(g,b,c,d);break;case"t":g=c,b=d,m=s[s.length-1],m.command==="Q"&&(g=c+(c-m.points[0]),b=d+(d-m.points[1])),c+=k.shift(),d+=k.shift(),C="Q",O.push(g,b,c,d);break;case"A":y=k.shift(),N=k.shift(),v=k.shift(),_=k.shift(),x=k.shift(),w=c,E=d,c=k.shift(),d=k.shift(),C="A",O=this.convertEndpointToCenterParameterization(w,E,c,d,_,x,y,N,v);break;case"a":y=k.shift(),N=k.shift(),v=k.shift(),_=k.shift(),x=k.shift(),w=c,E=d,c+=k.shift(),d+=k.shift(),C="A",O=this.convertEndpointToCenterParameterization(w,E,c,d,_,x,y,N,v);break}s.push({command:C||L,points:O,start:{x:F,y:M},pathLength:this.calcLength(F,M,C||L,O)})}(L==="z"||L==="Z")&&s.push({command:"z",points:[],start:void 0,pathLength:0})}return s}static calcLength(t,n,r,i){let a,s,o,c;const d=Ht;switch(r){case"L":return d.getLineLength(t,n,i[0],i[1]);case"C":return(0,No.getCubicArcLength)([t,i[0],i[2],i[4]],[n,i[1],i[3],i[5]],1);case"Q":return(0,No.getQuadraticArcLength)([t,i[0],i[2]],[n,i[1],i[3]],1);case"A":a=0;var f=i[4],p=i[5],m=i[4]+p,g=Math.PI/180;if(Math.abs(f-m)<g&&(g=Math.abs(f-m)),s=d.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],f,0),p<0)for(c=f-g;c>m;c-=g)o=d.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],c,0),a+=d.getLineLength(s.x,s.y,o.x,o.y),s=o;else for(c=f+g;c<m;c+=g)o=d.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],c,0),a+=d.getLineLength(s.x,s.y,o.x,o.y),s=o;return o=d.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],m,0),a+=d.getLineLength(s.x,s.y,o.x,o.y),a}return 0}static convertEndpointToCenterParameterization(t,n,r,i,a,s,o,c,d){const f=d*(Math.PI/180),p=Math.cos(f)*(t-r)/2+Math.sin(f)*(n-i)/2,m=-1*Math.sin(f)*(t-r)/2+Math.cos(f)*(n-i)/2,g=p*p/(o*o)+m*m/(c*c);g>1&&(o*=Math.sqrt(g),c*=Math.sqrt(g));let b=Math.sqrt((o*o*(c*c)-o*o*(m*m)-c*c*(p*p))/(o*o*(m*m)+c*c*(p*p)));a===s&&(b*=-1),isNaN(b)&&(b=0);const y=b*o*m/c,N=b*-c*p/o,v=(t+r)/2+Math.cos(f)*y-Math.sin(f)*N,_=(n+i)/2+Math.sin(f)*y+Math.cos(f)*N,x=function(k){return Math.sqrt(k[0]*k[0]+k[1]*k[1])},w=function(k,C){return(k[0]*C[0]+k[1]*C[1])/(x(k)*x(C))},E=function(k,C){return(k[0]*C[1]<k[1]*C[0]?-1:1)*Math.acos(w(k,C))},P=E([1,0],[(p-y)/o,(m-N)/c]),A=[(p-y)/o,(m-N)/c],T=[(-1*p-y)/o,(-1*m-N)/c];let L=E(A,T);return w(A,T)<=-1&&(L=Math.PI),w(A,T)>=1&&(L=0),s===0&&L>0&&(L=L-2*Math.PI),s===1&&L<0&&(L=L+2*Math.PI),[v,_,o,c,P,L,f,s]}}Pl.Path=Ht;Ht.prototype.className="Path";Ht.prototype._attrsAffectingSize=["data"];(0,eee._registerNode)(Ht);ZJ.Factory.addGetterSetter(Ht,"data");Object.defineProperty(Wp,"__esModule",{value:!0});Wp.Arrow=void 0;const Yp=Ue,tee=Hu,CO=Re,nee=Be,ok=Pl;class Ys extends tee.Line{_sceneFunc(t){super._sceneFunc(t);const n=Math.PI*2,r=this.points();let i=r;const a=this.tension()!==0&&r.length>4;a&&(i=this.getTensionPoints());const s=this.pointerLength(),o=r.length;let c,d;if(a){const m=[i[i.length-4],i[i.length-3],i[i.length-2],i[i.length-1],r[o-2],r[o-1]],g=ok.Path.calcLength(i[i.length-4],i[i.length-3],"C",m),b=ok.Path.getPointOnQuadraticBezier(Math.min(1,1-s/g),m[0],m[1],m[2],m[3],m[4],m[5]);c=r[o-2]-b.x,d=r[o-1]-b.y}else c=r[o-2]-r[o-4],d=r[o-1]-r[o-3];const f=(Math.atan2(d,c)+n)%n,p=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(r[o-2],r[o-1]),t.rotate(f),t.moveTo(0,0),t.lineTo(-s,p/2),t.lineTo(-s,-p/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(r[0],r[1]),a?(c=(i[0]+i[2])/2-r[0],d=(i[1]+i[3])/2-r[1]):(c=r[2]-r[0],d=r[3]-r[1]),t.rotate((Math.atan2(-d,-c)+n)%n),t.moveTo(0,0),t.lineTo(-s,p/2),t.lineTo(-s,-p/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){const n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),n=this.pointerWidth()/2;return{x:t.x-n,y:t.y-n,width:t.width+n*2,height:t.height+n*2}}}Wp.Arrow=Ys;Ys.prototype.className="Arrow";(0,nee._registerNode)(Ys);Yp.Factory.addGetterSetter(Ys,"pointerLength",10,(0,CO.getNumberValidator)());Yp.Factory.addGetterSetter(Ys,"pointerWidth",10,(0,CO.getNumberValidator)());Yp.Factory.addGetterSetter(Ys,"pointerAtBeginning",!1);Yp.Factory.addGetterSetter(Ys,"pointerAtEnding",!0);var Xp={};Object.defineProperty(Xp,"__esModule",{value:!0});Xp.Circle=void 0;const ree=Ue,iee=Kt,aee=Re,see=Be;class Al extends iee.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}}Xp.Circle=Al;Al.prototype._centroid=!0;Al.prototype.className="Circle";Al.prototype._attrsAffectingSize=["radius"];(0,see._registerNode)(Al);ree.Factory.addGetterSetter(Al,"radius",0,(0,aee.getNumberValidator)());var Qp={};Object.defineProperty(Qp,"__esModule",{value:!0});Qp.Ellipse=void 0;const x5=Ue,oee=Kt,TO=Re,lee=Be;class Za extends oee.Shape{_sceneFunc(t){const n=this.radiusX(),r=this.radiusY();t.beginPath(),t.save(),n!==r&&t.scale(1,r/n),t.arc(0,0,n,0,Math.PI*2,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}Qp.Ellipse=Za;Za.prototype.className="Ellipse";Za.prototype._centroid=!0;Za.prototype._attrsAffectingSize=["radiusX","radiusY"];(0,lee._registerNode)(Za);x5.Factory.addComponentsGetterSetter(Za,"radius",["x","y"]);x5.Factory.addGetterSetter(Za,"radiusX",0,(0,TO.getNumberValidator)());x5.Factory.addGetterSetter(Za,"radiusY",0,(0,TO.getNumberValidator)());var Zp={};Object.defineProperty(Zp,"__esModule",{value:!0});Zp.Image=void 0;const qx=Ot,Xs=Ue,cee=Kt,uee=Be,Vu=Re;let fi=class OO extends cee.Shape{constructor(t){super(t),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&t.readyState===4||t&&t.addEventListener&&t.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){const t=!!this.cornerRadius(),n=this.hasShadow();return t&&n?!0:super._useBufferCanvas(!0)}_sceneFunc(t){const n=this.getWidth(),r=this.getHeight(),i=this.cornerRadius(),a=this.attrs.image;let s;if(a){const o=this.attrs.cropWidth,c=this.attrs.cropHeight;o&&c?s=[a,this.cropX(),this.cropY(),o,c,0,0,n,r]:s=[a,0,0,n,r]}(this.hasFill()||this.hasStroke()||i)&&(t.beginPath(),i?qx.Util.drawRoundedRectPath(t,n,r,i):t.rect(0,0,n,r),t.closePath(),t.fillStrokeShape(this)),a&&(i&&t.clip(),t.drawImage.apply(t,s))}_hitFunc(t){const n=this.width(),r=this.height(),i=this.cornerRadius();t.beginPath(),i?qx.Util.drawRoundedRectPath(t,n,r,i):t.rect(0,0,n,r),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,n;return(t=this.attrs.width)!==null&&t!==void 0?t:(n=this.image())===null||n===void 0?void 0:n.width}getHeight(){var t,n;return(t=this.attrs.height)!==null&&t!==void 0?t:(n=this.image())===null||n===void 0?void 0:n.height}static fromURL(t,n,r=null){const i=qx.Util.createImageElement();i.onload=function(){const a=new OO({image:i});n(a)},i.onerror=r,i.crossOrigin="Anonymous",i.src=t}};Zp.Image=fi;fi.prototype.className="Image";(0,uee._registerNode)(fi);Xs.Factory.addGetterSetter(fi,"cornerRadius",0,(0,Vu.getNumberOrArrayOfNumbersValidator)(4));Xs.Factory.addGetterSetter(fi,"image");Xs.Factory.addComponentsGetterSetter(fi,"crop",["x","y","width","height"]);Xs.Factory.addGetterSetter(fi,"cropX",0,(0,Vu.getNumberValidator)());Xs.Factory.addGetterSetter(fi,"cropY",0,(0,Vu.getNumberValidator)());Xs.Factory.addGetterSetter(fi,"cropWidth",0,(0,Vu.getNumberValidator)());Xs.Factory.addGetterSetter(fi,"cropHeight",0,(0,Vu.getNumberValidator)());var ll={};Object.defineProperty(ll,"__esModule",{value:!0});ll.Tag=ll.Label=void 0;const Jp=Ue,dee=Kt,fee=Tl,b5=Re,PO=Be,AO=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],hee="Change.konva",pee="none",N2="up",S2="right",E2="down",k2="left",mee=AO.length;class w5 extends fee.Group{constructor(t){super(t),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){let n=this,r;const i=function(){n._sync()};for(r=0;r<mee;r++)t.on(AO[r]+hee,i)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let t=this.getText(),n=this.getTag(),r,i,a,s,o,c,d;if(t&&n){switch(r=t.width(),i=t.height(),a=n.pointerDirection(),s=n.pointerWidth(),d=n.pointerHeight(),o=0,c=0,a){case N2:o=r/2,c=-1*d;break;case S2:o=r+s,c=i/2;break;case E2:o=r/2,c=i+d;break;case k2:o=-1*s,c=i/2;break}n.setAttrs({x:-1*o,y:-1*c,width:r,height:i}),t.setAttrs({x:-1*o,y:-1*c})}}}ll.Label=w5;w5.prototype.className="Label";(0,PO._registerNode)(w5);class Qs extends dee.Shape{_sceneFunc(t){const n=this.width(),r=this.height(),i=this.pointerDirection(),a=this.pointerWidth(),s=this.pointerHeight(),o=this.cornerRadius();let c=0,d=0,f=0,p=0;typeof o=="number"?c=d=f=p=Math.min(o,n/2,r/2):(c=Math.min(o[0]||0,n/2,r/2),d=Math.min(o[1]||0,n/2,r/2),p=Math.min(o[2]||0,n/2,r/2),f=Math.min(o[3]||0,n/2,r/2)),t.beginPath(),t.moveTo(c,0),i===N2&&(t.lineTo((n-a)/2,0),t.lineTo(n/2,-1*s),t.lineTo((n+a)/2,0)),t.lineTo(n-d,0),t.arc(n-d,d,d,Math.PI*3/2,0,!1),i===S2&&(t.lineTo(n,(r-s)/2),t.lineTo(n+a,r/2),t.lineTo(n,(r+s)/2)),t.lineTo(n,r-p),t.arc(n-p,r-p,p,0,Math.PI/2,!1),i===E2&&(t.lineTo((n+a)/2,r),t.lineTo(n/2,r+s),t.lineTo((n-a)/2,r)),t.lineTo(f,r),t.arc(f,r-f,f,Math.PI/2,Math.PI,!1),i===k2&&(t.lineTo(0,(r+s)/2),t.lineTo(-1*a,r/2),t.lineTo(0,(r-s)/2)),t.lineTo(0,c),t.arc(c,c,c,Math.PI,Math.PI*3/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){let t=0,n=0,r=this.pointerWidth(),i=this.pointerHeight(),a=this.pointerDirection(),s=this.width(),o=this.height();return a===N2?(n-=i,o+=i):a===E2?o+=i:a===k2?(t-=r*1.5,s+=r):a===S2&&(s+=r*1.5),{x:t,y:n,width:s,height:o}}}ll.Tag=Qs;Qs.prototype.className="Tag";(0,PO._registerNode)(Qs);Jp.Factory.addGetterSetter(Qs,"pointerDirection",pee);Jp.Factory.addGetterSetter(Qs,"pointerWidth",0,(0,b5.getNumberValidator)());Jp.Factory.addGetterSetter(Qs,"pointerHeight",0,(0,b5.getNumberValidator)());Jp.Factory.addGetterSetter(Qs,"cornerRadius",0,(0,b5.getNumberOrArrayOfNumbersValidator)(4));var Wu={};Object.defineProperty(Wu,"__esModule",{value:!0});Wu.Rect=void 0;const gee=Ue,vee=Kt,yee=Be,xee=Ot,bee=Re;let em=class extends vee.Shape{_sceneFunc(t){const n=this.cornerRadius(),r=this.width(),i=this.height();t.beginPath(),n?xee.Util.drawRoundedRectPath(t,r,i,n):t.rect(0,0,r,i),t.closePath(),t.fillStrokeShape(this)}};Wu.Rect=em;em.prototype.className="Rect";(0,yee._registerNode)(em);gee.Factory.addGetterSetter(em,"cornerRadius",0,(0,bee.getNumberOrArrayOfNumbersValidator)(4));var tm={};Object.defineProperty(tm,"__esModule",{value:!0});tm.RegularPolygon=void 0;const RO=Ue,wee=Kt,IO=Re,_ee=Be;class Zs extends wee.Shape{_sceneFunc(t){const n=this._getPoints();t.beginPath(),t.moveTo(n[0].x,n[0].y);for(let r=1;r<n.length;r++)t.lineTo(n[r].x,n[r].y);t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,n=this.attrs.radius||0,r=[];for(let i=0;i<t;i++)r.push({x:n*Math.sin(i*2*Math.PI/t),y:-1*n*Math.cos(i*2*Math.PI/t)});return r}getSelfRect(){const t=this._getPoints();let n=t[0].x,r=t[0].y,i=t[0].x,a=t[0].y;return t.forEach(s=>{n=Math.min(n,s.x),r=Math.max(r,s.x),i=Math.min(i,s.y),a=Math.max(a,s.y)}),{x:n,y:i,width:r-n,height:a-i}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}tm.RegularPolygon=Zs;Zs.prototype.className="RegularPolygon";Zs.prototype._centroid=!0;Zs.prototype._attrsAffectingSize=["radius"];(0,_ee._registerNode)(Zs);RO.Factory.addGetterSetter(Zs,"radius",0,(0,IO.getNumberValidator)());RO.Factory.addGetterSetter(Zs,"sides",0,(0,IO.getNumberValidator)());var nm={};Object.defineProperty(nm,"__esModule",{value:!0});nm.Ring=void 0;const MO=Ue,Nee=Kt,LO=Re,See=Be,lk=Math.PI*2;class Js extends Nee.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,lk,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),lk,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}nm.Ring=Js;Js.prototype.className="Ring";Js.prototype._centroid=!0;Js.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,See._registerNode)(Js);MO.Factory.addGetterSetter(Js,"innerRadius",0,(0,LO.getNumberValidator)());MO.Factory.addGetterSetter(Js,"outerRadius",0,(0,LO.getNumberValidator)());var rm={};Object.defineProperty(rm,"__esModule",{value:!0});rm.Sprite=void 0;const eo=Ue,Eee=Kt,kee=Ol,DO=Re,jee=Be;class hi extends Eee.Shape{constructor(t){super(t),this._updated=!0,this.anim=new kee.Animation(()=>{const n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(t){const n=this.animation(),r=this.frameIndex(),i=r*4,a=this.animations()[n],s=this.frameOffsets(),o=a[i+0],c=a[i+1],d=a[i+2],f=a[i+3],p=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,d,f),t.closePath(),t.fillStrokeShape(this)),p)if(s){const m=s[n],g=r*2;t.drawImage(p,o,c,d,f,m[g+0],m[g+1],d,f)}else t.drawImage(p,o,c,d,f,0,0,d,f)}_hitFunc(t){const n=this.animation(),r=this.frameIndex(),i=r*4,a=this.animations()[n],s=this.frameOffsets(),o=a[i+2],c=a[i+3];if(t.beginPath(),s){const d=s[n],f=r*2;t.rect(d[f+0],d[f+1],o,c)}else t.rect(0,0,o,c);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const t=this.frameIndex(),n=this.animation(),r=this.animations(),i=r[n],a=i.length/4;t<a-1?this.frameIndex(t+1):this.frameIndex(0)}}rm.Sprite=hi;hi.prototype.className="Sprite";(0,jee._registerNode)(hi);eo.Factory.addGetterSetter(hi,"animation");eo.Factory.addGetterSetter(hi,"animations");eo.Factory.addGetterSetter(hi,"frameOffsets");eo.Factory.addGetterSetter(hi,"image");eo.Factory.addGetterSetter(hi,"frameIndex",0,(0,DO.getNumberValidator)());eo.Factory.addGetterSetter(hi,"frameRate",17,(0,DO.getNumberValidator)());eo.Factory.backCompat(hi,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var im={};Object.defineProperty(im,"__esModule",{value:!0});im.Star=void 0;const _5=Ue,Cee=Kt,N5=Re,Tee=Be;class Ja extends Cee.Shape{_sceneFunc(t){const n=this.innerRadius(),r=this.outerRadius(),i=this.numPoints();t.beginPath(),t.moveTo(0,0-r);for(let a=1;a<i*2;a++){const s=a%2===0?r:n,o=s*Math.sin(a*Math.PI/i),c=-1*s*Math.cos(a*Math.PI/i);t.lineTo(o,c)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}im.Star=Ja;Ja.prototype.className="Star";Ja.prototype._centroid=!0;Ja.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,Tee._registerNode)(Ja);_5.Factory.addGetterSetter(Ja,"numPoints",5,(0,N5.getNumberValidator)());_5.Factory.addGetterSetter(Ja,"innerRadius",0,(0,N5.getNumberValidator)());_5.Factory.addGetterSetter(Ja,"outerRadius",0,(0,N5.getNumberValidator)());var Rl={};Object.defineProperty(Rl,"__esModule",{value:!0});Rl.Text=void 0;Rl.stringToArray=FO;const j2=Ot,_n=Ue,Oee=Kt,$x=Be,es=Re,Pee=Be;function FO(e){return[...e].reduce((t,n,r,i)=>(/\p{Emoji_Modifier_Base}\p{Emoji_Modifier}?(?:\u200D\p{Emoji_Presentation})+/u.test(n)?t.push(n):/\p{Regional_Indicator}{2}/u.test(n+(i[r+1]||""))?t.push(n+i[r+1]):r>0&&/\p{Mn}|\p{Me}|\p{Mc}/u.test(n)?t[t.length-1]+=n:t.push(n),t),[])}const So="auto",Aee="center",zO="inherit",jc="justify",Ree="Change.konva",Iee="2d",ck="-",BO="left",Mee="text",Lee="Text",Dee="top",Fee="bottom",uk="middle",qO="normal",zee="px ",Tf=" ",Bee="right",dk="rtl",qee="word",$ee="char",fk="none",Ux="",$O=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],Uee=$O.length;function Gee(e){return e.split(",").map(t=>{t=t.trim();const n=t.indexOf(" ")>=0,r=t.indexOf('"')>=0||t.indexOf("'")>=0;return n&&!r&&(t=`"${t}"`),t}).join(", ")}let Of;function Gx(){return Of||(Of=j2.Util.createCanvasElement().getContext(Iee),Of)}function Hee(e){e.fillText(this._partialText,this._partialTextX,this._partialTextY)}function Vee(e){e.setAttr("miterLimit",2),e.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function Wee(e){return e=e||{},!e.fillLinearGradientColorStops&&!e.fillRadialGradientColorStops&&!e.fillPatternImage&&(e.fill=e.fill||"black"),e}let Lt=class extends Oee.Shape{constructor(t){super(Wee(t)),this._partialTextX=0,this._partialTextY=0;for(let n=0;n<Uee;n++)this.on($O[n]+Ree,this._setTextData);this._setTextData()}_sceneFunc(t){const n=this.textArr,r=n.length;if(!this.text())return;let i=this.padding(),a=this.fontSize(),s=this.lineHeight()*a,o=this.verticalAlign(),c=this.direction(),d=0,f=this.align(),p=this.getWidth(),m=this.letterSpacing(),g=this.fill(),b=this.textDecoration(),y=b.indexOf("underline")!==-1,N=b.indexOf("line-through")!==-1,v;c=c===zO?t.direction:c;let _=s/2,x=uk;if($x.Konva._fixTextRendering){const F=this.measureSize("M");x="alphabetic",_=(F.fontBoundingBoxAscent-F.fontBoundingBoxDescent)/2+s/2}var w=0,E=0;for(c===dk&&t.setAttr("direction",c),t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",x),t.setAttr("textAlign",BO),o===uk?d=(this.getHeight()-r*s-i*2)/2:o===Fee&&(d=this.getHeight()-r*s-i*2),t.translate(i,d+i),v=0;v<r;v++){var w=0,E=0,P=n[v],A=P.text,T=P.width,L=P.lastInParagraph,k,C,O;if(t.save(),f===Bee?w+=p-T-i*2:f===Aee&&(w+=(p-T-i*2)/2),y){t.save(),t.beginPath();const D=$x.Konva._fixTextRendering?Math.round(a/4):Math.round(a/2),$=w,V=_+E+D;t.moveTo($,V),k=A.split(" ").length-1,C=k===0,O=f===jc&&!L?p-i*2:T,t.lineTo($+Math.round(O),V),t.lineWidth=a/15;const K=this._getLinearGradient();t.strokeStyle=K||g,t.stroke(),t.restore()}if(N){t.save(),t.beginPath();const D=$x.Konva._fixTextRendering?-Math.round(a/4):0;t.moveTo(w,_+E+D),k=A.split(" ").length-1,C=k===0,O=f===jc&&L&&!C?p-i*2:T,t.lineTo(w+Math.round(O),_+E+D),t.lineWidth=a/15;const $=this._getLinearGradient();t.strokeStyle=$||g,t.stroke(),t.restore()}if(c!==dk&&(m!==0||f===jc)){k=A.split(" ").length-1;const D=FO(A);for(let $=0;$<D.length;$++){const V=D[$];V===" "&&!L&&f===jc&&(w+=(p-i*2-T)/k),this._partialTextX=w,this._partialTextY=_+E,this._partialText=V,t.fillStrokeShape(this),w+=this.measureSize(V).width+m}}else m!==0&&t.setAttr("letterSpacing",`${m}px`),this._partialTextX=w,this._partialTextY=_+E,this._partialText=A,t.fillStrokeShape(this);t.restore(),r>1&&(_+=s)}}_hitFunc(t){const n=this.getWidth(),r=this.getHeight();t.beginPath(),t.rect(0,0,n,r),t.closePath(),t.fillStrokeShape(this)}setText(t){const n=j2.Util._isString(t)?t:t==null?"":t+"";return this._setAttr(Mee,n),this}getWidth(){return this.attrs.width===So||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===So||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return j2.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var n,r,i,a,s,o,c,d,f,p,m;let g=Gx(),b=this.fontSize(),y;g.save(),g.font=this._getContextFont(),y=g.measureText(t),g.restore();const N=b/100;return{actualBoundingBoxAscent:(n=y.actualBoundingBoxAscent)!==null&&n!==void 0?n:71.58203125*N,actualBoundingBoxDescent:(r=y.actualBoundingBoxDescent)!==null&&r!==void 0?r:0,actualBoundingBoxLeft:(i=y.actualBoundingBoxLeft)!==null&&i!==void 0?i:-7.421875*N,actualBoundingBoxRight:(a=y.actualBoundingBoxRight)!==null&&a!==void 0?a:75.732421875*N,alphabeticBaseline:(s=y.alphabeticBaseline)!==null&&s!==void 0?s:0,emHeightAscent:(o=y.emHeightAscent)!==null&&o!==void 0?o:100*N,emHeightDescent:(c=y.emHeightDescent)!==null&&c!==void 0?c:-20*N,fontBoundingBoxAscent:(d=y.fontBoundingBoxAscent)!==null&&d!==void 0?d:91*N,fontBoundingBoxDescent:(f=y.fontBoundingBoxDescent)!==null&&f!==void 0?f:21*N,hangingBaseline:(p=y.hangingBaseline)!==null&&p!==void 0?p:72.80000305175781*N,ideographicBaseline:(m=y.ideographicBaseline)!==null&&m!==void 0?m:-21*N,width:y.width,height:b}}_getContextFont(){return this.fontStyle()+Tf+this.fontVariant()+Tf+(this.fontSize()+zee)+Gee(this.fontFamily())}_addTextLine(t){this.align()===jc&&(t=t.trim());const r=this._getTextWidth(t);return this.textArr.push({text:t,width:r,lastInParagraph:!1})}_getTextWidth(t){const n=this.letterSpacing(),r=t.length;return Gx().measureText(t).width+(r?n*(r-1):0)}_setTextData(){let t=this.text().split(`
`),n=+this.fontSize(),r=0,i=this.lineHeight()*n,a=this.attrs.width,s=this.attrs.height,o=a!==So&&a!==void 0,c=s!==So&&s!==void 0,d=this.padding(),f=a-d*2,p=s-d*2,m=0,g=this.wrap(),b=g!==fk,y=g!==$ee&&b,N=this.ellipsis();this.textArr=[],Gx().font=this._getContextFont();const v=N?this._getTextWidth(Ux):0;for(let x=0,w=t.length;x<w;++x){let E=t[x],P=this._getTextWidth(E);if(o&&P>f)for(;E.length>0;){let A=0,T=E.length,L="",k=0;for(;A<T;){const C=A+T>>>1,O=E.slice(0,C+1),F=this._getTextWidth(O)+v;F<=f?(A=C+1,L=O,k=F):T=C}if(L){if(y){var _;const O=E[L.length];(O===Tf||O===ck)&&k<=f?_=L.length:_=Math.max(L.lastIndexOf(Tf),L.lastIndexOf(ck))+1,_>0&&(A=_,L=L.slice(0,A),k=this._getTextWidth(L))}if(L=L.trimRight(),this._addTextLine(L),r=Math.max(r,k),m+=i,this._shouldHandleEllipsis(m)){this._tryToAddEllipsisToLastLine();break}if(E=E.slice(A),E=E.trimLeft(),E.length>0&&(P=this._getTextWidth(E),P<=f)){this._addTextLine(E),m+=i,r=Math.max(r,P);break}}else break}else this._addTextLine(E),m+=i,r=Math.max(r,P),this._shouldHandleEllipsis(m)&&x<w-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),c&&m+i>p)break}this.textHeight=n,this.textWidth=r}_shouldHandleEllipsis(t){const n=+this.fontSize(),r=this.lineHeight()*n,i=this.attrs.height,a=i!==So&&i!==void 0,s=this.padding(),o=i-s*2;return!(this.wrap()!==fk)||a&&t+r>o}_tryToAddEllipsisToLastLine(){const t=this.attrs.width,n=t!==So&&t!==void 0,r=this.padding(),i=t-r*2,a=this.ellipsis(),s=this.textArr[this.textArr.length-1];!s||!a||(n&&(this._getTextWidth(s.text+Ux)<i||(s.text=s.text.slice(0,s.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(s.text+Ux))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const t=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,n=this.hasShadow();return t&&n?!0:super._useBufferCanvas()}};Rl.Text=Lt;Lt.prototype._fillFunc=Hee;Lt.prototype._strokeFunc=Vee;Lt.prototype.className=Lee;Lt.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];(0,Pee._registerNode)(Lt);_n.Factory.overWriteSetter(Lt,"width",(0,es.getNumberOrAutoValidator)());_n.Factory.overWriteSetter(Lt,"height",(0,es.getNumberOrAutoValidator)());_n.Factory.addGetterSetter(Lt,"direction",zO);_n.Factory.addGetterSetter(Lt,"fontFamily","Arial");_n.Factory.addGetterSetter(Lt,"fontSize",12,(0,es.getNumberValidator)());_n.Factory.addGetterSetter(Lt,"fontStyle",qO);_n.Factory.addGetterSetter(Lt,"fontVariant",qO);_n.Factory.addGetterSetter(Lt,"padding",0,(0,es.getNumberValidator)());_n.Factory.addGetterSetter(Lt,"align",BO);_n.Factory.addGetterSetter(Lt,"verticalAlign",Dee);_n.Factory.addGetterSetter(Lt,"lineHeight",1,(0,es.getNumberValidator)());_n.Factory.addGetterSetter(Lt,"wrap",qee);_n.Factory.addGetterSetter(Lt,"ellipsis",!1,(0,es.getBooleanValidator)());_n.Factory.addGetterSetter(Lt,"letterSpacing",0,(0,es.getNumberValidator)());_n.Factory.addGetterSetter(Lt,"text","",(0,es.getStringValidator)());_n.Factory.addGetterSetter(Lt,"textDecoration","");var am={};Object.defineProperty(am,"__esModule",{value:!0});am.TextPath=void 0;const Hx=Ot,Ur=Ue,Kee=Kt,Cc=Pl,Vx=Rl,UO=Re,Yee=Be,Xee="",GO="normal";function HO(e){e.fillText(this.partialText,0,0)}function VO(e){e.strokeText(this.partialText,0,0)}class Yt extends Kee.Shape{constructor(t){super(t),this.dummyCanvas=Hx.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return Cc.Path.getPathLength(this.dataArray)}_getPointAtLength(t){if(!this.attrs.data)return null;const n=this.pathLength;return t-1>n?null:Cc.Path.getPointAtLengthOfDataArray(t,this.dataArray)}_readDataAttribute(){this.dataArray=Cc.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();const n=this.textDecoration(),r=this.fill(),i=this.fontSize(),a=this.glyphInfo;n==="underline"&&t.beginPath();for(let s=0;s<a.length;s++){t.save();const o=a[s].p0;t.translate(o.x,o.y),t.rotate(a[s].rotation),this.partialText=a[s].text,t.fillStrokeShape(this),n==="underline"&&(s===0&&t.moveTo(0,i/2+1),t.lineTo(i,i/2+1)),t.restore()}n==="underline"&&(t.strokeStyle=r,t.lineWidth=i/20,t.stroke()),t.restore()}_hitFunc(t){t.beginPath();const n=this.glyphInfo;if(n.length>=1){const r=n[0].p0;t.moveTo(r.x,r.y)}for(let r=0;r<n.length;r++){const i=n[r].p1;t.lineTo(i.x,i.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return Hx.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return Vx.Text.prototype.setText.call(this,t)}_getContextFont(){return Vx.Text.prototype._getContextFont.call(this)}_getTextSize(t){const r=this.dummyCanvas.getContext("2d");r.save(),r.font=this._getContextFont();const i=r.measureText(t);return r.restore(),{width:i.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:t,height:n}=this._getTextSize(this.attrs.text);if(this.textWidth=t,this.textHeight=n,this.glyphInfo=[],!this.attrs.data)return null;const r=this.letterSpacing(),i=this.align(),a=this.kerningFunc(),s=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0);let o=0;i==="center"&&(o=Math.max(0,this.pathLength/2-s/2)),i==="right"&&(o=Math.max(0,this.pathLength-s));const c=(0,Vx.stringToArray)(this.text());let d=o;for(let f=0;f<c.length;f++){const p=this._getPointAtLength(d);if(!p)return;let m=this._getTextSize(c[f]).width+r;if(c[f]===" "&&i==="justify"){const _=this.text().split(" ").length-1;m+=(this.pathLength-s)/_}const g=this._getPointAtLength(d+m);if(!g)return;const b=Cc.Path.getLineLength(p.x,p.y,g.x,g.y);let y=0;if(a)try{y=a(c[f-1],c[f])*this.fontSize()}catch{y=0}p.x+=y,g.x+=y,this.textWidth+=y;const N=Cc.Path.getPointOnLine(y+b/2,p.x,p.y,g.x,g.y),v=Math.atan2(g.y-p.y,g.x-p.x);this.glyphInfo.push({transposeX:N.x,transposeY:N.y,text:c[f],rotation:v,p0:p,p1:g}),d+=m}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const t=[];this.glyphInfo.forEach(function(d){t.push(d.p0.x),t.push(d.p0.y),t.push(d.p1.x),t.push(d.p1.y)});let n=t[0]||0,r=t[0]||0,i=t[1]||0,a=t[1]||0,s,o;for(let d=0;d<t.length/2;d++)s=t[d*2],o=t[d*2+1],n=Math.min(n,s),r=Math.max(r,s),i=Math.min(i,o),a=Math.max(a,o);const c=this.fontSize();return{x:n-c/2,y:i-c/2,width:r-n+c,height:a-i+c}}destroy(){return Hx.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}am.TextPath=Yt;Yt.prototype._fillFunc=HO;Yt.prototype._strokeFunc=VO;Yt.prototype._fillFuncHit=HO;Yt.prototype._strokeFuncHit=VO;Yt.prototype.className="TextPath";Yt.prototype._attrsAffectingSize=["text","fontSize","data"];(0,Yee._registerNode)(Yt);Ur.Factory.addGetterSetter(Yt,"data");Ur.Factory.addGetterSetter(Yt,"fontFamily","Arial");Ur.Factory.addGetterSetter(Yt,"fontSize",12,(0,UO.getNumberValidator)());Ur.Factory.addGetterSetter(Yt,"fontStyle",GO);Ur.Factory.addGetterSetter(Yt,"align","left");Ur.Factory.addGetterSetter(Yt,"letterSpacing",0,(0,UO.getNumberValidator)());Ur.Factory.addGetterSetter(Yt,"textBaseline","middle");Ur.Factory.addGetterSetter(Yt,"fontVariant",GO);Ur.Factory.addGetterSetter(Yt,"text",Xee);Ur.Factory.addGetterSetter(Yt,"textDecoration",null);Ur.Factory.addGetterSetter(Yt,"kerningFunc",null);var sm={};Object.defineProperty(sm,"__esModule",{value:!0});sm.Transformer=void 0;const ot=Ot,rt=Ue,hk=Nt,Qee=Kt,Zee=Wu,pk=Tl,Tr=Be,ts=Re,Jee=Be,WO="tr-konva",ete=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(e=>e+`.${WO}`).join(" "),mk="nodesRect",tte=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],nte={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},rte="ontouchstart"in Tr.Konva._global;function ite(e,t,n){if(e==="rotater")return n;t+=ot.Util.degToRad(nte[e]||0);const r=(ot.Util.radToDeg(t)%360+360)%360;return ot.Util._inRange(r,315+22.5,360)||ot.Util._inRange(r,0,22.5)?"ns-resize":ot.Util._inRange(r,45-22.5,45+22.5)?"nesw-resize":ot.Util._inRange(r,90-22.5,90+22.5)?"ew-resize":ot.Util._inRange(r,135-22.5,135+22.5)?"nwse-resize":ot.Util._inRange(r,180-22.5,180+22.5)?"ns-resize":ot.Util._inRange(r,225-22.5,225+22.5)?"nesw-resize":ot.Util._inRange(r,270-22.5,270+22.5)?"ew-resize":ot.Util._inRange(r,315-22.5,315+22.5)?"nwse-resize":(ot.Util.error("Transformer has unknown angle for cursor detection: "+r),"pointer")}const Uh=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],gk=1e8;function ate(e){return{x:e.x+e.width/2*Math.cos(e.rotation)+e.height/2*Math.sin(-e.rotation),y:e.y+e.height/2*Math.cos(e.rotation)+e.width/2*Math.sin(e.rotation)}}function KO(e,t,n){const r=n.x+(e.x-n.x)*Math.cos(t)-(e.y-n.y)*Math.sin(t),i=n.y+(e.x-n.x)*Math.sin(t)+(e.y-n.y)*Math.cos(t);return{...e,rotation:e.rotation+t,x:r,y:i}}function ste(e,t){const n=ate(e);return KO(e,t,n)}function ote(e,t,n){let r=t;for(let i=0;i<e.length;i++){const a=Tr.Konva.getAngle(e[i]),s=Math.abs(a-t)%(Math.PI*2);Math.min(s,Math.PI*2-s)<n&&(r=a)}return r}let C2=0,Ye=class extends pk.Group{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(ete,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return ot.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return WO+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const n=t.filter(i=>i.isAncestorOf(this)?(ot.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=t=n,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(i=>{const a=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},s=i._attrsAffectingSize.map(o=>o+"Change."+this._getEventNamespace()).join(" ");i.on(s,a),i.on(tte.map(o=>o+`.${this._getEventNamespace()}`).join(" "),a),i.on(`absoluteTransformChange.${this._getEventNamespace()}`,a),this._proxyDrag(i)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(t){let n;t.on(`dragstart.${this._getEventNamespace()}`,r=>{n=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(r,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,r=>{if(!n)return;const i=t.getAbsolutePosition(),a=i.x-n.x,s=i.y-n.y;this.nodes().forEach(o=>{if(o===t||o.isDragging())return;const c=o.getAbsolutePosition();o.setAbsolutePosition({x:c.x+a,y:c.y+s}),o.startDrag(r)}),n=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(mk),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(mk,this.__getNodeRect)}__getNodeShape(t,n=this.rotation(),r){const i=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),a=t.getAbsoluteScale(r),s=t.getAbsolutePosition(r),o=i.x*a.x-t.offsetX()*a.x,c=i.y*a.y-t.offsetY()*a.y,d=(Tr.Konva.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),f={x:s.x+o*Math.cos(d)+c*Math.sin(-d),y:s.y+c*Math.cos(d)+o*Math.sin(d),width:i.width*a.x,height:i.height*a.y,rotation:d};return KO(f,-Tr.Konva.getAngle(n),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-gk,y:-gk,width:0,height:0,rotation:0};const n=[];this.nodes().map(d=>{const f=d.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),p=[{x:f.x,y:f.y},{x:f.x+f.width,y:f.y},{x:f.x+f.width,y:f.y+f.height},{x:f.x,y:f.y+f.height}],m=d.getAbsoluteTransform();p.forEach(function(g){const b=m.point(g);n.push(b)})});const r=new ot.Transform;r.rotate(-Tr.Konva.getAngle(this.rotation()));let i=1/0,a=1/0,s=-1/0,o=-1/0;n.forEach(function(d){const f=r.point(d);i===void 0&&(i=s=f.x,a=o=f.y),i=Math.min(i,f.x),a=Math.min(a,f.y),s=Math.max(s,f.x),o=Math.max(o,f.y)}),r.invert();const c=r.point({x:i,y:a});return{x:c.x,y:c.y,width:s-i,height:o-a,rotation:Tr.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Uh.forEach(t=>{this._createAnchor(t)}),this._createAnchor("rotater")}_createAnchor(t){const n=new Zee.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:rte?10:"auto"}),r=this;n.on("mousedown touchstart",function(i){r._handleMouseDown(i)}),n.on("dragstart",i=>{n.stopDrag(),i.cancelBubble=!0}),n.on("dragend",i=>{i.cancelBubble=!0}),n.on("mouseenter",()=>{const i=Tr.Konva.getAngle(this.rotation()),a=this.rotateAnchorCursor(),s=ite(t,i,a);n.getStage().content&&(n.getStage().content.style.cursor=s),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){const t=new Qee.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(n,r){const i=r.getParent(),a=i.padding();n.beginPath(),n.rect(-a,-a,r.width()+a*2,r.height()+a*2),n.moveTo(r.width()/2,-a),i.rotateEnabled()&&i.rotateLineVisible()&&n.lineTo(r.width()/2,-i.rotateAnchorOffset()*ot.Util._sign(r.height())-a),n.fillStrokeShape(r)},hitFunc:(n,r)=>{if(!this.shouldOverdrawWholeArea())return;const i=this.padding();n.beginPath(),n.rect(-i,-i,r.width()+i*2,r.height()+i*2),n.fillStrokeShape(r)}});this.add(t),this._proxyDrag(t),t.on("dragstart",n=>{n.cancelBubble=!0}),t.on("dragmove",n=>{n.cancelBubble=!0}),t.on("dragend",n=>{n.cancelBubble=!0}),this.on("dragmove",n=>{this.update()})}_handleMouseDown(t){if(this._transforming)return;this._movingAnchorName=t.target.name().split(" ")[0];const n=this._getNodeRect(),r=n.width,i=n.height,a=Math.sqrt(Math.pow(r,2)+Math.pow(i,2));this.sin=Math.abs(i/a),this.cos=Math.abs(r/a),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const s=t.target.getAbsolutePosition(),o=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:o.x-s.x,y:o.y-s.y},C2++,this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(c=>{c._fire("transformstart",{evt:t.evt,target:c})})}_handleMouseMove(t){let n,r,i;const a=this.findOne("."+this._movingAnchorName),s=a.getStage();s.setPointersPositions(t);const o=s.getPointerPosition();let c={x:o.x-this._anchorDragOffset.x,y:o.y-this._anchorDragOffset.y};const d=a.getAbsolutePosition();this.anchorDragBoundFunc()&&(c=this.anchorDragBoundFunc()(d,c,t)),a.setAbsolutePosition(c);const f=a.getAbsolutePosition();if(d.x===f.x&&d.y===f.y)return;if(this._movingAnchorName==="rotater"){const E=this._getNodeRect();n=a.x()-E.width/2,r=-a.y()+E.height/2;let P=Math.atan2(-r,n)+Math.PI/2;E.height<0&&(P-=Math.PI);const T=Tr.Konva.getAngle(this.rotation())+P,L=Tr.Konva.getAngle(this.rotationSnapTolerance()),C=ote(this.rotationSnaps(),T,L)-E.rotation,O=ste(E,C);this._fitNodesInto(O,t);return}const p=this.shiftBehavior();let m;p==="inverted"?m=this.keepRatio()&&!t.shiftKey:p==="none"?m=this.keepRatio():m=this.keepRatio()||t.shiftKey;var v=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(m){var g=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};i=Math.sqrt(Math.pow(g.x-a.x(),2)+Math.pow(g.y-a.y(),2));var b=this.findOne(".top-left").x()>g.x?-1:1,y=this.findOne(".top-left").y()>g.y?-1:1;n=i*this.cos*b,r=i*this.sin*y,this.findOne(".top-left").x(g.x-n),this.findOne(".top-left").y(g.y-r)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(a.y());else if(this._movingAnchorName==="top-right"){if(m){var g=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};i=Math.sqrt(Math.pow(a.x()-g.x,2)+Math.pow(g.y-a.y(),2));var b=this.findOne(".top-right").x()<g.x?-1:1,y=this.findOne(".top-right").y()>g.y?-1:1;n=i*this.cos*b,r=i*this.sin*y,this.findOne(".top-right").x(g.x+n),this.findOne(".top-right").y(g.y-r)}var N=a.position();this.findOne(".top-left").y(N.y),this.findOne(".bottom-right").x(N.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(a.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(a.x());else if(this._movingAnchorName==="bottom-left"){if(m){var g=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};i=Math.sqrt(Math.pow(g.x-a.x(),2)+Math.pow(a.y()-g.y,2));var b=g.x<a.x()?-1:1,y=a.y()<g.y?-1:1;n=i*this.cos*b,r=i*this.sin*y,a.x(g.x-n),a.y(g.y+r)}N=a.position(),this.findOne(".top-left").x(N.x),this.findOne(".bottom-right").y(N.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(a.y());else if(this._movingAnchorName==="bottom-right"){if(m){var g=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};i=Math.sqrt(Math.pow(a.x()-g.x,2)+Math.pow(a.y()-g.y,2));var b=this.findOne(".bottom-right").x()<g.x?-1:1,y=this.findOne(".bottom-right").y()<g.y?-1:1;n=i*this.cos*b,r=i*this.sin*y,this.findOne(".bottom-right").x(g.x+n),this.findOne(".bottom-right").y(g.y+r)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var v=this.centeredScaling()||t.altKey;if(v){const E=this.findOne(".top-left"),P=this.findOne(".bottom-right"),A=E.x(),T=E.y(),L=this.getWidth()-P.x(),k=this.getHeight()-P.y();P.move({x:-A,y:-T}),E.move({x:L,y:k})}const _=this.findOne(".top-left").getAbsolutePosition();n=_.x,r=_.y;const x=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),w=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:r,width:x,height:w,rotation:Tr.Konva.getAngle(this.rotation())},t)}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){var n;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const r=this.getNode();C2--,this._fire("transformend",{evt:t,target:r}),(n=this.getLayer())===null||n===void 0||n.batchDraw(),r&&this._nodes.forEach(i=>{var a;i._fire("transformend",{evt:t,target:i}),(a=i.getLayer())===null||a===void 0||a.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(t,n){const r=this._getNodeRect(),i=1;if(ot.Util._inRange(t.width,-this.padding()*2-i,i)){this.update();return}if(ot.Util._inRange(t.height,-this.padding()*2-i,i)){this.update();return}const a=new ot.Transform;if(a.rotate(Tr.Konva.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const m=a.point({x:-this.padding()*2,y:0});t.x+=m.x,t.y+=m.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=m.x,this._anchorDragOffset.y-=m.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const m=a.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=m.x,this._anchorDragOffset.y-=m.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const m=a.point({x:0,y:-this.padding()*2});t.x+=m.x,t.y+=m.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=m.x,this._anchorDragOffset.y-=m.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const m=a.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=m.x,this._anchorDragOffset.y-=m.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){const m=this.boundBoxFunc()(r,t);m?t=m:ot.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const s=1e7,o=new ot.Transform;o.translate(r.x,r.y),o.rotate(r.rotation),o.scale(r.width/s,r.height/s);const c=new ot.Transform,d=t.width/s,f=t.height/s;this.flipEnabled()===!1?(c.translate(t.x,t.y),c.rotate(t.rotation),c.translate(t.width<0?t.width:0,t.height<0?t.height:0),c.scale(Math.abs(d),Math.abs(f))):(c.translate(t.x,t.y),c.rotate(t.rotation),c.scale(d,f));const p=c.multiply(o.invert());this._nodes.forEach(m=>{var g;const b=m.getParent().getAbsoluteTransform(),y=m.getTransform().copy();y.translate(m.offsetX(),m.offsetY());const N=new ot.Transform;N.multiply(b.copy().invert()).multiply(p).multiply(b).multiply(y);const v=N.decompose();m.setAttrs(v),(g=m.getLayer())===null||g===void 0||g.batchDraw()}),this.rotation(ot.Util._getRotation(t.rotation)),this._nodes.forEach(m=>{this._fire("transform",{evt:n,target:m}),m._fire("transform",{evt:n,target:m})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,n){this.findOne(t).setAttrs(n)}update(){var t;const n=this._getNodeRect();this.rotation(ot.Util._getRotation(n.rotation));const r=n.width,i=n.height,a=this.enabledAnchors(),s=this.resizeEnabled(),o=this.padding(),c=this.anchorSize(),d=this.find("._anchor");d.forEach(p=>{p.setAttrs({width:c,height:c,offsetX:c/2,offsetY:c/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:c/2+o,offsetY:c/2+o,visible:s&&a.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:r/2,y:0,offsetY:c/2+o,visible:s&&a.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:r,y:0,offsetX:c/2-o,offsetY:c/2+o,visible:s&&a.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:i/2,offsetX:c/2+o,visible:s&&a.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:r,y:i/2,offsetX:c/2-o,visible:s&&a.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:i,offsetX:c/2+o,offsetY:c/2-o,visible:s&&a.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:r/2,y:i,offsetY:c/2-o,visible:s&&a.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:r,y:i,offsetX:c/2-o,offsetY:c/2-o,visible:s&&a.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:r/2,y:-this.rotateAnchorOffset()*ot.Util._sign(i)-o,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:r,height:i,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const f=this.anchorStyleFunc();f&&d.forEach(p=>{f(p)}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),pk.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return hk.Node.prototype.toObject.call(this)}clone(t){return hk.Node.prototype.clone.call(this,t)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};sm.Transformer=Ye;Ye.isTransforming=()=>C2>0;function lte(e){return e instanceof Array||ot.Util.warn("enabledAnchors value should be an array"),e instanceof Array&&e.forEach(function(t){Uh.indexOf(t)===-1&&ot.Util.warn("Unknown anchor name: "+t+". Available names are: "+Uh.join(", "))}),e||[]}Ye.prototype.className="Transformer";(0,Jee._registerNode)(Ye);rt.Factory.addGetterSetter(Ye,"enabledAnchors",Uh,lte);rt.Factory.addGetterSetter(Ye,"flipEnabled",!0,(0,ts.getBooleanValidator)());rt.Factory.addGetterSetter(Ye,"resizeEnabled",!0);rt.Factory.addGetterSetter(Ye,"anchorSize",10,(0,ts.getNumberValidator)());rt.Factory.addGetterSetter(Ye,"rotateEnabled",!0);rt.Factory.addGetterSetter(Ye,"rotateLineVisible",!0);rt.Factory.addGetterSetter(Ye,"rotationSnaps",[]);rt.Factory.addGetterSetter(Ye,"rotateAnchorOffset",50,(0,ts.getNumberValidator)());rt.Factory.addGetterSetter(Ye,"rotateAnchorCursor","crosshair");rt.Factory.addGetterSetter(Ye,"rotationSnapTolerance",5,(0,ts.getNumberValidator)());rt.Factory.addGetterSetter(Ye,"borderEnabled",!0);rt.Factory.addGetterSetter(Ye,"anchorStroke","rgb(0, 161, 255)");rt.Factory.addGetterSetter(Ye,"anchorStrokeWidth",1,(0,ts.getNumberValidator)());rt.Factory.addGetterSetter(Ye,"anchorFill","white");rt.Factory.addGetterSetter(Ye,"anchorCornerRadius",0,(0,ts.getNumberValidator)());rt.Factory.addGetterSetter(Ye,"borderStroke","rgb(0, 161, 255)");rt.Factory.addGetterSetter(Ye,"borderStrokeWidth",1,(0,ts.getNumberValidator)());rt.Factory.addGetterSetter(Ye,"borderDash");rt.Factory.addGetterSetter(Ye,"keepRatio",!0);rt.Factory.addGetterSetter(Ye,"shiftBehavior","default");rt.Factory.addGetterSetter(Ye,"centeredScaling",!1);rt.Factory.addGetterSetter(Ye,"ignoreStroke",!1);rt.Factory.addGetterSetter(Ye,"padding",0,(0,ts.getNumberValidator)());rt.Factory.addGetterSetter(Ye,"node");rt.Factory.addGetterSetter(Ye,"nodes");rt.Factory.addGetterSetter(Ye,"boundBoxFunc");rt.Factory.addGetterSetter(Ye,"anchorDragBoundFunc");rt.Factory.addGetterSetter(Ye,"anchorStyleFunc");rt.Factory.addGetterSetter(Ye,"shouldOverdrawWholeArea",!1);rt.Factory.addGetterSetter(Ye,"useSingleNodeRotation",!0);rt.Factory.backCompat(Ye,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var om={};Object.defineProperty(om,"__esModule",{value:!0});om.Wedge=void 0;const lm=Ue,cte=Kt,ute=Be,YO=Re,dte=Be;class Qi extends cte.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,ute.Konva.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}om.Wedge=Qi;Qi.prototype.className="Wedge";Qi.prototype._centroid=!0;Qi.prototype._attrsAffectingSize=["radius"];(0,dte._registerNode)(Qi);lm.Factory.addGetterSetter(Qi,"radius",0,(0,YO.getNumberValidator)());lm.Factory.addGetterSetter(Qi,"angle",0,(0,YO.getNumberValidator)());lm.Factory.addGetterSetter(Qi,"clockwise",!1);lm.Factory.backCompat(Qi,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var cm={};Object.defineProperty(cm,"__esModule",{value:!0});cm.Blur=void 0;const vk=Ue,fte=Nt,hte=Re;function yk(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const pte=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],mte=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function gte(e,t){const n=e.data,r=e.width,i=e.height;let a,s,o,c,d,f,p,m,g,b,y,N,v,_,x,w,E,P,A,T,L,k,C,O,F=t+t+1,M=r-1,D=i-1,$=t+1,V=$*($+1)/2,K=new yk,H=null,q=K,I=null,z=null,W=pte[t],Q=mte[t];for(o=1;o<F;o++)q=q.next=new yk,o===$&&(H=q);for(q.next=K,p=f=0,s=0;s<i;s++){for(w=E=P=A=m=g=b=y=0,N=$*(T=n[f]),v=$*(L=n[f+1]),_=$*(k=n[f+2]),x=$*(C=n[f+3]),m+=V*T,g+=V*L,b+=V*k,y+=V*C,q=K,o=0;o<$;o++)q.r=T,q.g=L,q.b=k,q.a=C,q=q.next;for(o=1;o<$;o++)c=f+((M<o?M:o)<<2),m+=(q.r=T=n[c])*(O=$-o),g+=(q.g=L=n[c+1])*O,b+=(q.b=k=n[c+2])*O,y+=(q.a=C=n[c+3])*O,w+=T,E+=L,P+=k,A+=C,q=q.next;for(I=K,z=H,a=0;a<r;a++)n[f+3]=C=y*W>>Q,C!==0?(C=255/C,n[f]=(m*W>>Q)*C,n[f+1]=(g*W>>Q)*C,n[f+2]=(b*W>>Q)*C):n[f]=n[f+1]=n[f+2]=0,m-=N,g-=v,b-=_,y-=x,N-=I.r,v-=I.g,_-=I.b,x-=I.a,c=p+((c=a+t+1)<M?c:M)<<2,w+=I.r=n[c],E+=I.g=n[c+1],P+=I.b=n[c+2],A+=I.a=n[c+3],m+=w,g+=E,b+=P,y+=A,I=I.next,N+=T=z.r,v+=L=z.g,_+=k=z.b,x+=C=z.a,w-=T,E-=L,P-=k,A-=C,z=z.next,f+=4;p+=r}for(a=0;a<r;a++){for(E=P=A=w=g=b=y=m=0,f=a<<2,N=$*(T=n[f]),v=$*(L=n[f+1]),_=$*(k=n[f+2]),x=$*(C=n[f+3]),m+=V*T,g+=V*L,b+=V*k,y+=V*C,q=K,o=0;o<$;o++)q.r=T,q.g=L,q.b=k,q.a=C,q=q.next;for(d=r,o=1;o<=t;o++)f=d+a<<2,m+=(q.r=T=n[f])*(O=$-o),g+=(q.g=L=n[f+1])*O,b+=(q.b=k=n[f+2])*O,y+=(q.a=C=n[f+3])*O,w+=T,E+=L,P+=k,A+=C,q=q.next,o<D&&(d+=r);for(f=a,I=K,z=H,s=0;s<i;s++)c=f<<2,n[c+3]=C=y*W>>Q,C>0?(C=255/C,n[c]=(m*W>>Q)*C,n[c+1]=(g*W>>Q)*C,n[c+2]=(b*W>>Q)*C):n[c]=n[c+1]=n[c+2]=0,m-=N,g-=v,b-=_,y-=x,N-=I.r,v-=I.g,_-=I.b,x-=I.a,c=a+((c=s+$)<D?c:D)*r<<2,m+=w+=I.r=n[c],g+=E+=I.g=n[c+1],b+=P+=I.b=n[c+2],y+=A+=I.a=n[c+3],I=I.next,N+=T=z.r,v+=L=z.g,_+=k=z.b,x+=C=z.a,w-=T,E-=L,P-=k,A-=C,z=z.next,f+=r}}const vte=function(t){const n=Math.round(this.blurRadius());n>0&&gte(t,n)};cm.Blur=vte;vk.Factory.addGetterSetter(fte.Node,"blurRadius",0,(0,hte.getNumberValidator)(),vk.Factory.afterSetFilter);var um={};Object.defineProperty(um,"__esModule",{value:!0});um.Brighten=void 0;const xk=Ue,yte=Nt,xte=Re,bte=function(e){let t=this.brightness()*255,n=e.data,r=n.length,i;for(i=0;i<r;i+=4)n[i]+=t,n[i+1]+=t,n[i+2]+=t};um.Brighten=bte;xk.Factory.addGetterSetter(yte.Node,"brightness",0,(0,xte.getNumberValidator)(),xk.Factory.afterSetFilter);var dm={};Object.defineProperty(dm,"__esModule",{value:!0});dm.Contrast=void 0;const bk=Ue,wte=Nt,_te=Re,Nte=function(e){const t=Math.pow((this.contrast()+100)/100,2);let n=e.data,r=n.length,i=150,a=150,s=150,o;for(o=0;o<r;o+=4)i=n[o],a=n[o+1],s=n[o+2],i/=255,i-=.5,i*=t,i+=.5,i*=255,a/=255,a-=.5,a*=t,a+=.5,a*=255,s/=255,s-=.5,s*=t,s+=.5,s*=255,i=i<0?0:i>255?255:i,a=a<0?0:a>255?255:a,s=s<0?0:s>255?255:s,n[o]=i,n[o+1]=a,n[o+2]=s};dm.Contrast=Nte;bk.Factory.addGetterSetter(wte.Node,"contrast",0,(0,_te.getNumberValidator)(),bk.Factory.afterSetFilter);var fm={};Object.defineProperty(fm,"__esModule",{value:!0});fm.Emboss=void 0;const Ua=Ue,hm=Nt,Ste=Ot,XO=Re,Ete=function(e){let t=this.embossStrength()*10,n=this.embossWhiteLevel()*255,r=this.embossDirection(),i=this.embossBlend(),a=0,s=0,o=e.data,c=e.width,d=e.height,f=c*4,p=d;switch(r){case"top-left":a=-1,s=-1;break;case"top":a=-1,s=0;break;case"top-right":a=-1,s=1;break;case"right":a=0,s=1;break;case"bottom-right":a=1,s=1;break;case"bottom":a=1,s=0;break;case"bottom-left":a=1,s=-1;break;case"left":a=0,s=-1;break;default:Ste.Util.error("Unknown emboss direction: "+r)}do{const m=(p-1)*f;let g=a;p+g<1&&(g=0),p+g>d&&(g=0);const b=(p-1+g)*c*4;let y=c;do{const N=m+(y-1)*4;let v=s;y+v<1&&(v=0),y+v>c&&(v=0);const _=b+(y-1+v)*4,x=o[N]-o[_],w=o[N+1]-o[_+1],E=o[N+2]-o[_+2];let P=x;const A=P>0?P:-P,T=w>0?w:-w,L=E>0?E:-E;if(T>A&&(P=w),L>A&&(P=E),P*=t,i){const k=o[N]+P,C=o[N+1]+P,O=o[N+2]+P;o[N]=k>255?255:k<0?0:k,o[N+1]=C>255?255:C<0?0:C,o[N+2]=O>255?255:O<0?0:O}else{let k=n-P;k<0?k=0:k>255&&(k=255),o[N]=o[N+1]=o[N+2]=k}}while(--y)}while(--p)};fm.Emboss=Ete;Ua.Factory.addGetterSetter(hm.Node,"embossStrength",.5,(0,XO.getNumberValidator)(),Ua.Factory.afterSetFilter);Ua.Factory.addGetterSetter(hm.Node,"embossWhiteLevel",.5,(0,XO.getNumberValidator)(),Ua.Factory.afterSetFilter);Ua.Factory.addGetterSetter(hm.Node,"embossDirection","top-left",null,Ua.Factory.afterSetFilter);Ua.Factory.addGetterSetter(hm.Node,"embossBlend",!1,null,Ua.Factory.afterSetFilter);var pm={};Object.defineProperty(pm,"__esModule",{value:!0});pm.Enhance=void 0;const wk=Ue,kte=Nt,jte=Re;function Wx(e,t,n,r,i){let a=n-t,s=i-r,o;return a===0?r+s/2:s===0?r:(o=(e-t)/a,o=s*o+r,o)}const Cte=function(e){let t=e.data,n=t.length,r=t[0],i=r,a,s=t[1],o=s,c,d=t[2],f=d,p,m;const g=this.enhance();if(g===0)return;for(m=0;m<n;m+=4)a=t[m+0],a<r?r=a:a>i&&(i=a),c=t[m+1],c<s?s=c:c>o&&(o=c),p=t[m+2],p<d?d=p:p>f&&(f=p);i===r&&(i=255,r=0),o===s&&(o=255,s=0),f===d&&(f=255,d=0);let b,y,N,v,_,x,w,E,P;for(g>0?(y=i+g*(255-i),N=r-g*(r-0),_=o+g*(255-o),x=s-g*(s-0),E=f+g*(255-f),P=d-g*(d-0)):(b=(i+r)*.5,y=i+g*(i-b),N=r+g*(r-b),v=(o+s)*.5,_=o+g*(o-v),x=s+g*(s-v),w=(f+d)*.5,E=f+g*(f-w),P=d+g*(d-w)),m=0;m<n;m+=4)t[m+0]=Wx(t[m+0],r,i,N,y),t[m+1]=Wx(t[m+1],s,o,x,_),t[m+2]=Wx(t[m+2],d,f,P,E)};pm.Enhance=Cte;wk.Factory.addGetterSetter(kte.Node,"enhance",0,(0,jte.getNumberValidator)(),wk.Factory.afterSetFilter);var mm={};Object.defineProperty(mm,"__esModule",{value:!0});mm.Grayscale=void 0;const Tte=function(e){let t=e.data,n=t.length,r,i;for(r=0;r<n;r+=4)i=.34*t[r]+.5*t[r+1]+.16*t[r+2],t[r]=i,t[r+1]=i,t[r+2]=i};mm.Grayscale=Tte;var gm={};Object.defineProperty(gm,"__esModule",{value:!0});gm.HSL=void 0;const cl=Ue,S5=Nt,E5=Re;cl.Factory.addGetterSetter(S5.Node,"hue",0,(0,E5.getNumberValidator)(),cl.Factory.afterSetFilter);cl.Factory.addGetterSetter(S5.Node,"saturation",0,(0,E5.getNumberValidator)(),cl.Factory.afterSetFilter);cl.Factory.addGetterSetter(S5.Node,"luminance",0,(0,E5.getNumberValidator)(),cl.Factory.afterSetFilter);const Ote=function(e){let t=e.data,n=t.length,r=1,i=Math.pow(2,this.saturation()),a=Math.abs(this.hue()+360)%360,s=this.luminance()*127,o;const c=r*i*Math.cos(a*Math.PI/180),d=r*i*Math.sin(a*Math.PI/180),f=.299*r+.701*c+.167*d,p=.587*r-.587*c+.33*d,m=.114*r-.114*c-.497*d,g=.299*r-.299*c-.328*d,b=.587*r+.413*c+.035*d,y=.114*r-.114*c+.293*d,N=.299*r-.3*c+1.25*d,v=.587*r-.586*c-1.05*d,_=.114*r+.886*c-.2*d;let x,w,E,P;for(o=0;o<n;o+=4)x=t[o+0],w=t[o+1],E=t[o+2],P=t[o+3],t[o+0]=f*x+p*w+m*E+s,t[o+1]=g*x+b*w+y*E+s,t[o+2]=N*x+v*w+_*E+s,t[o+3]=P};gm.HSL=Ote;var vm={};Object.defineProperty(vm,"__esModule",{value:!0});vm.HSV=void 0;const ul=Ue,k5=Nt,j5=Re,Pte=function(e){const t=e.data,n=t.length,r=Math.pow(2,this.value()),i=Math.pow(2,this.saturation()),a=Math.abs(this.hue()+360)%360,s=r*i*Math.cos(a*Math.PI/180),o=r*i*Math.sin(a*Math.PI/180),c=.299*r+.701*s+.167*o,d=.587*r-.587*s+.33*o,f=.114*r-.114*s-.497*o,p=.299*r-.299*s-.328*o,m=.587*r+.413*s+.035*o,g=.114*r-.114*s+.293*o,b=.299*r-.3*s+1.25*o,y=.587*r-.586*s-1.05*o,N=.114*r+.886*s-.2*o;let v,_,x,w;for(let E=0;E<n;E+=4)v=t[E+0],_=t[E+1],x=t[E+2],w=t[E+3],t[E+0]=c*v+d*_+f*x,t[E+1]=p*v+m*_+g*x,t[E+2]=b*v+y*_+N*x,t[E+3]=w};vm.HSV=Pte;ul.Factory.addGetterSetter(k5.Node,"hue",0,(0,j5.getNumberValidator)(),ul.Factory.afterSetFilter);ul.Factory.addGetterSetter(k5.Node,"saturation",0,(0,j5.getNumberValidator)(),ul.Factory.afterSetFilter);ul.Factory.addGetterSetter(k5.Node,"value",0,(0,j5.getNumberValidator)(),ul.Factory.afterSetFilter);var ym={};Object.defineProperty(ym,"__esModule",{value:!0});ym.Invert=void 0;const Ate=function(e){let t=e.data,n=t.length,r;for(r=0;r<n;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2]};ym.Invert=Ate;var xm={};Object.defineProperty(xm,"__esModule",{value:!0});xm.Kaleidoscope=void 0;const Gh=Ue,QO=Nt,_k=Ot,ZO=Re,Rte=function(e,t,n){let r=e.data,i=t.data,a=e.width,s=e.height,o=n.polarCenterX||a/2,c=n.polarCenterY||s/2,d,f,p,m=0,g=0,b=0,y=0,N,v=Math.sqrt(o*o+c*c);f=a-o,p=s-c,N=Math.sqrt(f*f+p*p),v=N>v?N:v;let _=s,x=a,w,E,P=360/x*Math.PI/180,A,T;for(E=0;E<x;E+=1)for(A=Math.sin(E*P),T=Math.cos(E*P),w=0;w<_;w+=1)f=Math.floor(o+v*w/_*T),p=Math.floor(c+v*w/_*A),d=(p*a+f)*4,m=r[d+0],g=r[d+1],b=r[d+2],y=r[d+3],d=(E+w*a)*4,i[d+0]=m,i[d+1]=g,i[d+2]=b,i[d+3]=y},Ite=function(e,t,n){let r=e.data,i=t.data,a=e.width,s=e.height,o=n.polarCenterX||a/2,c=n.polarCenterY||s/2,d,f,p,m,g,b=0,y=0,N=0,v=0,_,x=Math.sqrt(o*o+c*c);f=a-o,p=s-c,_=Math.sqrt(f*f+p*p),x=_>x?_:x;let w=s,E=a,P,A,T=n.polarRotation||0,L,k;for(f=0;f<a;f+=1)for(p=0;p<s;p+=1)m=f-o,g=p-c,P=Math.sqrt(m*m+g*g)*w/x,A=(Math.atan2(g,m)*180/Math.PI+360+T)%360,A=A*E/360,L=Math.floor(A),k=Math.floor(P),d=(k*a+L)*4,b=r[d+0],y=r[d+1],N=r[d+2],v=r[d+3],d=(p*a+f)*4,i[d+0]=b,i[d+1]=y,i[d+2]=N,i[d+3]=v},Mte=function(e){const t=e.width,n=e.height;let r,i,a,s,o,c,d,f,p,m,g=Math.round(this.kaleidoscopePower());const b=Math.round(this.kaleidoscopeAngle()),y=Math.floor(t*(b%360)/360);if(g<1)return;const N=_k.Util.createCanvasElement();N.width=t,N.height=n;const v=N.getContext("2d").getImageData(0,0,t,n);_k.Util.releaseCanvas(N),Rte(e,v,{polarCenterX:t/2,polarCenterY:n/2});let _=t/Math.pow(2,g);for(;_<=8;)_=_*2,g-=1;_=Math.ceil(_);let x=_,w=0,E=x,P=1;for(y+_>t&&(w=x,E=0,P=-1),i=0;i<n;i+=1)for(r=w;r!==E;r+=P)a=Math.round(r+y)%t,p=(t*i+a)*4,o=v.data[p+0],c=v.data[p+1],d=v.data[p+2],f=v.data[p+3],m=(t*i+r)*4,v.data[m+0]=o,v.data[m+1]=c,v.data[m+2]=d,v.data[m+3]=f;for(i=0;i<n;i+=1)for(x=Math.floor(_),s=0;s<g;s+=1){for(r=0;r<x+1;r+=1)p=(t*i+r)*4,o=v.data[p+0],c=v.data[p+1],d=v.data[p+2],f=v.data[p+3],m=(t*i+x*2-r-1)*4,v.data[m+0]=o,v.data[m+1]=c,v.data[m+2]=d,v.data[m+3]=f;x*=2}Ite(v,e,{polarRotation:0})};xm.Kaleidoscope=Mte;Gh.Factory.addGetterSetter(QO.Node,"kaleidoscopePower",2,(0,ZO.getNumberValidator)(),Gh.Factory.afterSetFilter);Gh.Factory.addGetterSetter(QO.Node,"kaleidoscopeAngle",0,(0,ZO.getNumberValidator)(),Gh.Factory.afterSetFilter);var bm={};Object.defineProperty(bm,"__esModule",{value:!0});bm.Mask=void 0;const Nk=Ue,Lte=Nt,Dte=Re;function Pf(e,t,n){let r=(n*e.width+t)*4;const i=[];return i.push(e.data[r++],e.data[r++],e.data[r++],e.data[r++]),i}function Tc(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2))}function Fte(e){const t=[0,0,0];for(let n=0;n<e.length;n++)t[0]+=e[n][0],t[1]+=e[n][1],t[2]+=e[n][2];return t[0]/=e.length,t[1]/=e.length,t[2]/=e.length,t}function zte(e,t){const n=Pf(e,0,0),r=Pf(e,e.width-1,0),i=Pf(e,0,e.height-1),a=Pf(e,e.width-1,e.height-1),s=t||10;if(Tc(n,r)<s&&Tc(r,a)<s&&Tc(a,i)<s&&Tc(i,n)<s){const o=Fte([r,n,a,i]),c=[];for(let d=0;d<e.width*e.height;d++){const f=Tc(o,[e.data[d*4],e.data[d*4+1],e.data[d*4+2]]);c[d]=f<s?0:255}return c}}function Bte(e,t){for(let n=0;n<e.width*e.height;n++)e.data[4*n+3]=t[n]}function qte(e,t,n){const r=[1,1,1,1,0,1,1,1,1],i=Math.round(Math.sqrt(r.length)),a=Math.floor(i/2),s=[];for(let o=0;o<n;o++)for(let c=0;c<t;c++){const d=o*t+c;let f=0;for(let p=0;p<i;p++)for(let m=0;m<i;m++){const g=o+p-a,b=c+m-a;if(g>=0&&g<n&&b>=0&&b<t){const y=g*t+b,N=r[p*i+m];f+=e[y]*N}}s[d]=f===255*8?255:0}return s}function $te(e,t,n){const r=[1,1,1,1,1,1,1,1,1],i=Math.round(Math.sqrt(r.length)),a=Math.floor(i/2),s=[];for(let o=0;o<n;o++)for(let c=0;c<t;c++){const d=o*t+c;let f=0;for(let p=0;p<i;p++)for(let m=0;m<i;m++){const g=o+p-a,b=c+m-a;if(g>=0&&g<n&&b>=0&&b<t){const y=g*t+b,N=r[p*i+m];f+=e[y]*N}}s[d]=f>=255*4?255:0}return s}function Ute(e,t,n){const r=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],i=Math.round(Math.sqrt(r.length)),a=Math.floor(i/2),s=[];for(let o=0;o<n;o++)for(let c=0;c<t;c++){const d=o*t+c;let f=0;for(let p=0;p<i;p++)for(let m=0;m<i;m++){const g=o+p-a,b=c+m-a;if(g>=0&&g<n&&b>=0&&b<t){const y=g*t+b,N=r[p*i+m];f+=e[y]*N}}s[d]=f}return s}const Gte=function(e){let t=this.threshold(),n=zte(e,t);return n&&(n=qte(n,e.width,e.height),n=$te(n,e.width,e.height),n=Ute(n,e.width,e.height),Bte(e,n)),e};bm.Mask=Gte;Nk.Factory.addGetterSetter(Lte.Node,"threshold",0,(0,Dte.getNumberValidator)(),Nk.Factory.afterSetFilter);var wm={};Object.defineProperty(wm,"__esModule",{value:!0});wm.Noise=void 0;const Sk=Ue,Hte=Nt,Vte=Re,Wte=function(e){const t=this.noise()*255,n=e.data,r=n.length,i=t/2;for(let a=0;a<r;a+=4)n[a+0]+=i-2*i*Math.random(),n[a+1]+=i-2*i*Math.random(),n[a+2]+=i-2*i*Math.random()};wm.Noise=Wte;Sk.Factory.addGetterSetter(Hte.Node,"noise",.2,(0,Vte.getNumberValidator)(),Sk.Factory.afterSetFilter);var _m={};Object.defineProperty(_m,"__esModule",{value:!0});_m.Pixelate=void 0;const Ek=Ue,Kte=Ot,Yte=Nt,Xte=Re,Qte=function(e){let t=Math.ceil(this.pixelSize()),n=e.width,r=e.height,i,a,s,o,c,d,f,p=Math.ceil(n/t),m=Math.ceil(r/t),g,b,y,N,v,_,x,w=e.data;if(t<=0){Kte.Util.error("pixelSize value can not be <= 0");return}for(v=0;v<p;v+=1)for(_=0;_<m;_+=1){for(o=0,c=0,d=0,f=0,g=v*t,b=g+t,y=_*t,N=y+t,x=0,i=g;i<b;i+=1)if(!(i>=n))for(a=y;a<N;a+=1)a>=r||(s=(n*a+i)*4,o+=w[s+0],c+=w[s+1],d+=w[s+2],f+=w[s+3],x+=1);for(o=o/x,c=c/x,d=d/x,f=f/x,i=g;i<b;i+=1)if(!(i>=n))for(a=y;a<N;a+=1)a>=r||(s=(n*a+i)*4,w[s+0]=o,w[s+1]=c,w[s+2]=d,w[s+3]=f)}};_m.Pixelate=Qte;Ek.Factory.addGetterSetter(Yte.Node,"pixelSize",8,(0,Xte.getNumberValidator)(),Ek.Factory.afterSetFilter);var Nm={};Object.defineProperty(Nm,"__esModule",{value:!0});Nm.Posterize=void 0;const kk=Ue,Zte=Nt,Jte=Re,ene=function(e){let t=Math.round(this.levels()*254)+1,n=e.data,r=n.length,i=255/t,a;for(a=0;a<r;a+=1)n[a]=Math.floor(n[a]/i)*i};Nm.Posterize=ene;kk.Factory.addGetterSetter(Zte.Node,"levels",.5,(0,Jte.getNumberValidator)(),kk.Factory.afterSetFilter);var Sm={};Object.defineProperty(Sm,"__esModule",{value:!0});Sm.RGB=void 0;const Hh=Ue,C5=Nt,tne=Re,nne=function(e){let t=e.data,n=t.length,r=this.red(),i=this.green(),a=this.blue(),s,o;for(s=0;s<n;s+=4)o=(.34*t[s]+.5*t[s+1]+.16*t[s+2])/255,t[s]=o*r,t[s+1]=o*i,t[s+2]=o*a,t[s+3]=t[s+3]};Sm.RGB=nne;Hh.Factory.addGetterSetter(C5.Node,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});Hh.Factory.addGetterSetter(C5.Node,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});Hh.Factory.addGetterSetter(C5.Node,"blue",0,tne.RGBComponent,Hh.Factory.afterSetFilter);var Em={};Object.defineProperty(Em,"__esModule",{value:!0});Em.RGBA=void 0;const ku=Ue,km=Nt,rne=Re,ine=function(e){const t=e.data,n=t.length,r=this.red(),i=this.green(),a=this.blue(),s=this.alpha();for(let o=0;o<n;o+=4){const c=1-s;t[o]=r*s+t[o]*c,t[o+1]=i*s+t[o+1]*c,t[o+2]=a*s+t[o+2]*c}};Em.RGBA=ine;ku.Factory.addGetterSetter(km.Node,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});ku.Factory.addGetterSetter(km.Node,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});ku.Factory.addGetterSetter(km.Node,"blue",0,rne.RGBComponent,ku.Factory.afterSetFilter);ku.Factory.addGetterSetter(km.Node,"alpha",1,function(e){return this._filterUpToDate=!1,e>1?1:e<0?0:e});var jm={};Object.defineProperty(jm,"__esModule",{value:!0});jm.Sepia=void 0;const ane=function(e){let t=e.data,n=t.length,r,i,a,s;for(r=0;r<n;r+=4)i=t[r+0],a=t[r+1],s=t[r+2],t[r+0]=Math.min(255,i*.393+a*.769+s*.189),t[r+1]=Math.min(255,i*.349+a*.686+s*.168),t[r+2]=Math.min(255,i*.272+a*.534+s*.131)};jm.Sepia=ane;var Cm={};Object.defineProperty(Cm,"__esModule",{value:!0});Cm.Solarize=void 0;const sne=function(e){const t=e.data,n=e.width,r=e.height,i=n*4;let a=r;do{const s=(a-1)*i;let o=n;do{const c=s+(o-1)*4;let d=t[c],f=t[c+1],p=t[c+2];d>127&&(d=255-d),f>127&&(f=255-f),p>127&&(p=255-p),t[c]=d,t[c+1]=f,t[c+2]=p}while(--o)}while(--a)};Cm.Solarize=sne;var Tm={};Object.defineProperty(Tm,"__esModule",{value:!0});Tm.Threshold=void 0;const jk=Ue,one=Nt,lne=Re,cne=function(e){const t=this.threshold()*255,n=e.data,r=n.length;for(let i=0;i<r;i+=1)n[i]=n[i]<t?0:255};Tm.Threshold=cne;jk.Factory.addGetterSetter(one.Node,"threshold",.5,(0,lne.getNumberValidator)(),jk.Factory.afterSetFilter);Object.defineProperty(Fp,"__esModule",{value:!0});Fp.Konva=void 0;const Ck=qh,une=Gp,dne=Wp,fne=Xp,hne=Qp,pne=Zp,Tk=ll,mne=Hu,gne=Pl,vne=Wu,yne=tm,xne=nm,bne=rm,wne=im,_ne=Rl,Nne=am,Sne=sm,Ene=om,kne=cm,jne=um,Cne=dm,Tne=fm,One=pm,Pne=mm,Ane=gm,Rne=vm,Ine=ym,Mne=xm,Lne=bm,Dne=wm,Fne=_m,zne=Nm,Bne=Sm,qne=Em,$ne=jm,Une=Cm,Gne=Tm;Fp.Konva=Ck.Konva.Util._assign(Ck.Konva,{Arc:une.Arc,Arrow:dne.Arrow,Circle:fne.Circle,Ellipse:hne.Ellipse,Image:pne.Image,Label:Tk.Label,Tag:Tk.Tag,Line:mne.Line,Path:gne.Path,Rect:vne.Rect,RegularPolygon:yne.RegularPolygon,Ring:xne.Ring,Sprite:bne.Sprite,Star:wne.Star,Text:_ne.Text,TextPath:Nne.TextPath,Transformer:Sne.Transformer,Wedge:Ene.Wedge,Filters:{Blur:kne.Blur,Brighten:jne.Brighten,Contrast:Cne.Contrast,Emboss:Tne.Emboss,Enhance:One.Enhance,Grayscale:Pne.Grayscale,HSL:Ane.HSL,HSV:Rne.HSV,Invert:Ine.Invert,Kaleidoscope:Mne.Kaleidoscope,Mask:Lne.Mask,Noise:Dne.Noise,Pixelate:Fne.Pixelate,Posterize:zne.Posterize,RGB:Bne.RGB,RGBA:qne.RGBA,Sepia:$ne.Sepia,Solarize:Une.Solarize,Threshold:Gne.Threshold}});var Hne=vO.exports;Object.defineProperty(Hne,"__esModule",{value:!0});const Vne=Fp;vO.exports=Vne.Konva;var T2={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;var n=qh;Object.defineProperty(t,"Konva",{enumerable:!0,get:function(){return n.Konva}});const r=qh;e.exports=r.Konva})(T2,T2.exports);var Wne=T2.exports;const ju=dl(Wne);var JO={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kne=function(t){var n={},r=G,i=$c,a=Object.assign;function s(u){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+u,S=1;S<arguments.length;S++)h+="&args[]="+encodeURIComponent(arguments[S]);return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=Symbol.for("react.element"),d=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),b=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),E=Symbol.iterator;function P(u){return u===null||typeof u!="object"?null:(u=E&&u[E]||u["@@iterator"],typeof u=="function"?u:null)}function A(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case f:return"Fragment";case d:return"Portal";case m:return"Profiler";case p:return"StrictMode";case N:return"Suspense";case v:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case b:return(u.displayName||"Context")+".Consumer";case g:return(u._context.displayName||"Context")+".Provider";case y:var h=u.render;return u=u.displayName,u||(u=h.displayName||h.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case _:return h=u.displayName||null,h!==null?h:A(u.type)||"Memo";case x:h=u._payload,u=u._init;try{return A(u(h))}catch{}}return null}function T(u){var h=u.type;switch(u.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=h.render,u=u.displayName||u.name||"",h.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return A(h);case 8:return h===p?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function L(u){var h=u,S=u;if(u.alternate)for(;h.return;)h=h.return;else{u=h;do h=u,h.flags&4098&&(S=h.return),u=h.return;while(u)}return h.tag===3?S:null}function k(u){if(L(u)!==u)throw Error(s(188))}function C(u){var h=u.alternate;if(!h){if(h=L(u),h===null)throw Error(s(188));return h!==u?null:u}for(var S=u,j=h;;){var R=S.return;if(R===null)break;var B=R.alternate;if(B===null){if(j=R.return,j!==null){S=j;continue}break}if(R.child===B.child){for(B=R.child;B;){if(B===S)return k(R),u;if(B===j)return k(R),h;B=B.sibling}throw Error(s(188))}if(S.return!==j.return)S=R,j=B;else{for(var Z=!1,ie=R.child;ie;){if(ie===S){Z=!0,S=R,j=B;break}if(ie===j){Z=!0,j=R,S=B;break}ie=ie.sibling}if(!Z){for(ie=B.child;ie;){if(ie===S){Z=!0,S=B,j=R;break}if(ie===j){Z=!0,j=B,S=R;break}ie=ie.sibling}if(!Z)throw Error(s(189))}}if(S.alternate!==j)throw Error(s(190))}if(S.tag!==3)throw Error(s(188));return S.stateNode.current===S?u:h}function O(u){return u=C(u),u!==null?F(u):null}function F(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var h=F(u);if(h!==null)return h;u=u.sibling}return null}function M(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){if(u.tag!==4){var h=M(u);if(h!==null)return h}u=u.sibling}return null}var D=Array.isArray,$=t.getPublicInstance,V=t.getRootHostContext,K=t.getChildHostContext,H=t.prepareForCommit,q=t.resetAfterCommit,I=t.createInstance,z=t.appendInitialChild,W=t.finalizeInitialChildren,Q=t.prepareUpdate,ee=t.shouldSetTextContent,Y=t.createTextInstance,U=t.scheduleTimeout,J=t.cancelTimeout,te=t.noTimeout,X=t.isPrimaryRenderer,ne=t.supportsMutation,ue=t.supportsPersistence,se=t.supportsHydration,ce=t.getInstanceFromNode,de=t.preparePortalMount,Oe=t.getCurrentEventPriority,ge=t.detachDeletedInstance,re=t.supportsMicrotasks,he=t.scheduleMicrotask,ye=t.supportsTestSelectors,we=t.findFiberRoot,me=t.getBoundingRect,je=t.getTextContent,Ce=t.isHiddenSubtree,Ae=t.matchAccessibilityRole,vt=t.setFocusIfFocusable,Pt=t.setupIntersectionObserver,qe=t.appendChild,Un=t.appendChildToContainer,et=t.commitTextUpdate,it=t.commitMount,dn=t.commitUpdate,Xt=t.insertBefore,an=t.insertInContainerBefore,pi=t.removeChild,wr=t.removeChildFromContainer,Gn=t.resetTextContent,rs=t.hideInstance,Il=t.hideTextInstance,is=t.unhideInstance,Ml=t.unhideTextInstance,Ku=t.clearContainer,mi=t.cloneInstance,Yu=t.createContainerChildSet,Xu=t.appendChildToContainerChildSet,Pm=t.finalizeContainerChildren,Ll=t.replaceContainerChildren,Qu=t.cloneHiddenInstance,Zu=t.cloneHiddenTextInstance,Am=t.canHydrateInstance,Rm=t.canHydrateTextInstance,Im=t.canHydrateSuspenseInstance,Ju=t.isSuspenseInstancePending,Dl=t.isSuspenseInstanceFallback,Mm=t.getSuspenseInstanceFallbackErrorDetails,Lm=t.registerSuspenseInstanceRetry,no=t.getNextHydratableSibling,Dm=t.getFirstHydratableChild,Fm=t.getFirstHydratableChildWithinContainer,ed=t.getFirstHydratableChildWithinSuspenseInstance,zm=t.hydrateInstance,Bm=t.hydrateTextInstance,qm=t.hydrateSuspenseInstance,$m=t.getNextHydratableInstanceAfterSuspenseInstance,Um=t.commitHydratedContainer,Gm=t.commitHydratedSuspenseInstance,Hm=t.clearSuspenseBoundary,Vm=t.clearSuspenseBoundaryFromContainer,td=t.shouldDeleteUnhydratedTailInstances,Wm=t.didNotMatchHydratedContainerTextInstance,Km=t.didNotMatchHydratedTextInstance,Fl;function as(u){if(Fl===void 0)try{throw Error()}catch(S){var h=S.stack.trim().match(/\n( *(at )?)/);Fl=h&&h[1]||""}return`
`+Fl+u}var zl=!1;function Bl(u,h){if(!u||zl)return"";zl=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(xe){var j=xe}Reflect.construct(u,[],h)}else{try{h.call()}catch(xe){j=xe}u.call(h.prototype)}else{try{throw Error()}catch(xe){j=xe}u()}}catch(xe){if(xe&&j&&typeof xe.stack=="string"){for(var R=xe.stack.split(`
`),B=j.stack.split(`
`),Z=R.length-1,ie=B.length-1;1<=Z&&0<=ie&&R[Z]!==B[ie];)ie--;for(;1<=Z&&0<=ie;Z--,ie--)if(R[Z]!==B[ie]){if(Z!==1||ie!==1)do if(Z--,ie--,0>ie||R[Z]!==B[ie]){var fe=`
`+R[Z].replace(" at new "," at ");return u.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",u.displayName)),fe}while(1<=Z&&0<=ie);break}}}finally{zl=!1,Error.prepareStackTrace=S}return(u=u?u.displayName||u.name:"")?as(u):""}var nd=Object.prototype.hasOwnProperty,ql=[],Zi=-1;function Gr(u){return{current:u}}function at(u){0>Zi||(u.current=ql[Zi],ql[Zi]=null,Zi--)}function ut(u,h){Zi++,ql[Zi]=u.current,u.current=h}var Ji={},fn=Gr(Ji),On=Gr(!1),ss=Ji;function ro(u,h){var S=u.type.contextTypes;if(!S)return Ji;var j=u.stateNode;if(j&&j.__reactInternalMemoizedUnmaskedChildContext===h)return j.__reactInternalMemoizedMaskedChildContext;var R={},B;for(B in S)R[B]=h[B];return j&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=h,u.__reactInternalMemoizedMaskedChildContext=R),R}function Pn(u){return u=u.childContextTypes,u!=null}function rd(){at(On),at(fn)}function P5(u,h,S){if(fn.current!==Ji)throw Error(s(168));ut(fn,h),ut(On,S)}function A5(u,h,S){var j=u.stateNode;if(h=h.childContextTypes,typeof j.getChildContext!="function")return S;j=j.getChildContext();for(var R in j)if(!(R in h))throw Error(s(108,T(u)||"Unknown",R));return a({},S,j)}function ad(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||Ji,ss=fn.current,ut(fn,u),ut(On,On.current),!0}function R5(u,h,S){var j=u.stateNode;if(!j)throw Error(s(169));S?(u=A5(u,h,ss),j.__reactInternalMemoizedMergedChildContext=u,at(On),at(fn),ut(fn,u)):at(On),ut(On,S)}var _r=Math.clz32?Math.clz32:cP,oP=Math.log,lP=Math.LN2;function cP(u){return u>>>=0,u===0?32:31-(oP(u)/lP|0)|0}var sd=64,od=4194304;function $l(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function ld(u,h){var S=u.pendingLanes;if(S===0)return 0;var j=0,R=u.suspendedLanes,B=u.pingedLanes,Z=S&268435455;if(Z!==0){var ie=Z&~R;ie!==0?j=$l(ie):(B&=Z,B!==0&&(j=$l(B)))}else Z=S&~R,Z!==0?j=$l(Z):B!==0&&(j=$l(B));if(j===0)return 0;if(h!==0&&h!==j&&!(h&R)&&(R=j&-j,B=h&-h,R>=B||R===16&&(B&4194240)!==0))return h;if(j&4&&(j|=S&16),h=u.entangledLanes,h!==0)for(u=u.entanglements,h&=j;0<h;)S=31-_r(h),R=1<<S,j|=u[S],h&=~R;return j}function uP(u,h){switch(u){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dP(u,h){for(var S=u.suspendedLanes,j=u.pingedLanes,R=u.expirationTimes,B=u.pendingLanes;0<B;){var Z=31-_r(B),ie=1<<Z,fe=R[Z];fe===-1?(!(ie&S)||ie&j)&&(R[Z]=uP(ie,h)):fe<=h&&(u.expiredLanes|=ie),B&=~ie}}function Ym(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function I5(){var u=sd;return sd<<=1,!(sd&4194240)&&(sd=64),u}function Xm(u){for(var h=[],S=0;31>S;S++)h.push(u);return h}function Ul(u,h,S){u.pendingLanes|=h,h!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,h=31-_r(h),u[h]=S}function fP(u,h){var S=u.pendingLanes&~h;u.pendingLanes=h,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=h,u.mutableReadLanes&=h,u.entangledLanes&=h,h=u.entanglements;var j=u.eventTimes;for(u=u.expirationTimes;0<S;){var R=31-_r(S),B=1<<R;h[R]=0,j[R]=-1,u[R]=-1,S&=~B}}function Qm(u,h){var S=u.entangledLanes|=h;for(u=u.entanglements;S;){var j=31-_r(S),R=1<<j;R&h|u[j]&h&&(u[j]|=h),S&=~R}}var Qe=0;function M5(u){return u&=-u,1<u?4<u?u&268435455?16:536870912:4:1}var Zm=i.unstable_scheduleCallback,L5=i.unstable_cancelCallback,hP=i.unstable_shouldYield,pP=i.unstable_requestPaint,Qt=i.unstable_now,Jm=i.unstable_ImmediatePriority,mP=i.unstable_UserBlockingPriority,e0=i.unstable_NormalPriority,gP=i.unstable_IdlePriority,cd=null,Hr=null;function vP(u){if(Hr&&typeof Hr.onCommitFiberRoot=="function")try{Hr.onCommitFiberRoot(cd,u,void 0,(u.current.flags&128)===128)}catch{}}function yP(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var Nr=typeof Object.is=="function"?Object.is:yP,gi=null,ud=!1,t0=!1;function D5(u){gi===null?gi=[u]:gi.push(u)}function xP(u){ud=!0,D5(u)}function Vr(){if(!t0&&gi!==null){t0=!0;var u=0,h=Qe;try{var S=gi;for(Qe=1;u<S.length;u++){var j=S[u];do j=j(!0);while(j!==null)}gi=null,ud=!1}catch(R){throw gi!==null&&(gi=gi.slice(u+1)),Zm(Jm,Vr),R}finally{Qe=h,t0=!1}}return null}var io=[],ao=0,dd=null,fd=0,rr=[],ir=0,os=null,vi=1,yi="";function ls(u,h){io[ao++]=fd,io[ao++]=dd,dd=u,fd=h}function F5(u,h,S){rr[ir++]=vi,rr[ir++]=yi,rr[ir++]=os,os=u;var j=vi;u=yi;var R=32-_r(j)-1;j&=~(1<<R),S+=1;var B=32-_r(h)+R;if(30<B){var Z=R-R%5;B=(j&(1<<Z)-1).toString(32),j>>=Z,R-=Z,vi=1<<32-_r(h)+R|S<<R|j,yi=B+u}else vi=1<<B|S<<R|j,yi=u}function n0(u){u.return!==null&&(ls(u,1),F5(u,1,0))}function r0(u){for(;u===dd;)dd=io[--ao],io[ao]=null,fd=io[--ao],io[ao]=null;for(;u===os;)os=rr[--ir],rr[ir]=null,yi=rr[--ir],rr[ir]=null,vi=rr[--ir],rr[ir]=null}var Hn=null,ar=null,yt=!1,Gl=!1,Sr=null;function z5(u,h){var S=ur(5,null,null,0);S.elementType="DELETED",S.stateNode=h,S.return=u,h=u.deletions,h===null?(u.deletions=[S],u.flags|=16):h.push(S)}function B5(u,h){switch(u.tag){case 5:return h=Am(h,u.type,u.pendingProps),h!==null?(u.stateNode=h,Hn=u,ar=Dm(h),!0):!1;case 6:return h=Rm(h,u.pendingProps),h!==null?(u.stateNode=h,Hn=u,ar=null,!0):!1;case 13:if(h=Im(h),h!==null){var S=os!==null?{id:vi,overflow:yi}:null;return u.memoizedState={dehydrated:h,treeContext:S,retryLane:1073741824},S=ur(18,null,null,0),S.stateNode=h,S.return=u,u.child=S,Hn=u,ar=null,!0}return!1;default:return!1}}function i0(u){return(u.mode&1)!==0&&(u.flags&128)===0}function a0(u){if(yt){var h=ar;if(h){var S=h;if(!B5(u,h)){if(i0(u))throw Error(s(418));h=no(S);var j=Hn;h&&B5(u,h)?z5(j,S):(u.flags=u.flags&-4097|2,yt=!1,Hn=u)}}else{if(i0(u))throw Error(s(418));u.flags=u.flags&-4097|2,yt=!1,Hn=u}}}function q5(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;Hn=u}function hd(u){if(!se||u!==Hn)return!1;if(!yt)return q5(u),yt=!0,!1;if(u.tag!==3&&(u.tag!==5||td(u.type)&&!ee(u.type,u.memoizedProps))){var h=ar;if(h){if(i0(u))throw $5(),Error(s(418));for(;h;)z5(u,h),h=no(h)}}if(q5(u),u.tag===13){if(!se)throw Error(s(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(s(317));ar=$m(u)}else ar=Hn?no(u.stateNode):null;return!0}function $5(){for(var u=ar;u;)u=no(u)}function so(){se&&(ar=Hn=null,Gl=yt=!1)}function s0(u){Sr===null?Sr=[u]:Sr.push(u)}var bP=o.ReactCurrentBatchConfig;function pd(u,h){if(Nr(u,h))return!0;if(typeof u!="object"||u===null||typeof h!="object"||h===null)return!1;var S=Object.keys(u),j=Object.keys(h);if(S.length!==j.length)return!1;for(j=0;j<S.length;j++){var R=S[j];if(!nd.call(h,R)||!Nr(u[R],h[R]))return!1}return!0}function wP(u){switch(u.tag){case 5:return as(u.type);case 16:return as("Lazy");case 13:return as("Suspense");case 19:return as("SuspenseList");case 0:case 2:case 15:return u=Bl(u.type,!1),u;case 11:return u=Bl(u.type.render,!1),u;case 1:return u=Bl(u.type,!0),u;default:return""}}function Hl(u,h,S){if(u=S.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(S._owner){if(S=S._owner,S){if(S.tag!==1)throw Error(s(309));var j=S.stateNode}if(!j)throw Error(s(147,u));var R=j,B=""+u;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===B?h.ref:(h=function(Z){var ie=R.refs;Z===null?delete ie[B]:ie[B]=Z},h._stringRef=B,h)}if(typeof u!="string")throw Error(s(284));if(!S._owner)throw Error(s(290,u))}return u}function md(u,h){throw u=Object.prototype.toString.call(h),Error(s(31,u==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":u))}function U5(u){var h=u._init;return h(u._payload)}function G5(u){function h(le,ae){if(u){var pe=le.deletions;pe===null?(le.deletions=[ae],le.flags|=16):pe.push(ae)}}function S(le,ae){if(!u)return null;for(;ae!==null;)h(le,ae),ae=ae.sibling;return null}function j(le,ae){for(le=new Map;ae!==null;)ae.key!==null?le.set(ae.key,ae):le.set(ae.index,ae),ae=ae.sibling;return le}function R(le,ae){return le=sa(le,ae),le.index=0,le.sibling=null,le}function B(le,ae,pe){return le.index=pe,u?(pe=le.alternate,pe!==null?(pe=pe.index,pe<ae?(le.flags|=2,ae):pe):(le.flags|=2,ae)):(le.flags|=1048576,ae)}function Z(le){return u&&le.alternate===null&&(le.flags|=2),le}function ie(le,ae,pe,Ne){return ae===null||ae.tag!==6?(ae=tg(pe,le.mode,Ne),ae.return=le,ae):(ae=R(ae,pe),ae.return=le,ae)}function fe(le,ae,pe,Ne){var Pe=pe.type;return Pe===f?ke(le,ae,pe.props.children,Ne,pe.key):ae!==null&&(ae.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===x&&U5(Pe)===ae.type)?(Ne=R(ae,pe.props),Ne.ref=Hl(le,ae,pe),Ne.return=le,Ne):(Ne=Vd(pe.type,pe.key,pe.props,null,le.mode,Ne),Ne.ref=Hl(le,ae,pe),Ne.return=le,Ne)}function xe(le,ae,pe,Ne){return ae===null||ae.tag!==4||ae.stateNode.containerInfo!==pe.containerInfo||ae.stateNode.implementation!==pe.implementation?(ae=ng(pe,le.mode,Ne),ae.return=le,ae):(ae=R(ae,pe.children||[]),ae.return=le,ae)}function ke(le,ae,pe,Ne,Pe){return ae===null||ae.tag!==7?(ae=ms(pe,le.mode,Ne,Pe),ae.return=le,ae):(ae=R(ae,pe),ae.return=le,ae)}function Me(le,ae,pe){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return ae=tg(""+ae,le.mode,pe),ae.return=le,ae;if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case c:return pe=Vd(ae.type,ae.key,ae.props,null,le.mode,pe),pe.ref=Hl(le,null,ae),pe.return=le,pe;case d:return ae=ng(ae,le.mode,pe),ae.return=le,ae;case x:var Ne=ae._init;return Me(le,Ne(ae._payload),pe)}if(D(ae)||P(ae))return ae=ms(ae,le.mode,pe,null),ae.return=le,ae;md(le,ae)}return null}function _e(le,ae,pe,Ne){var Pe=ae!==null?ae.key:null;if(typeof pe=="string"&&pe!==""||typeof pe=="number")return Pe!==null?null:ie(le,ae,""+pe,Ne);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case c:return pe.key===Pe?fe(le,ae,pe,Ne):null;case d:return pe.key===Pe?xe(le,ae,pe,Ne):null;case x:return Pe=pe._init,_e(le,ae,Pe(pe._payload),Ne)}if(D(pe)||P(pe))return Pe!==null?null:ke(le,ae,pe,Ne,null);md(le,pe)}return null}function ft(le,ae,pe,Ne,Pe){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number")return le=le.get(pe)||null,ie(ae,le,""+Ne,Pe);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case c:return le=le.get(Ne.key===null?pe:Ne.key)||null,fe(ae,le,Ne,Pe);case d:return le=le.get(Ne.key===null?pe:Ne.key)||null,xe(ae,le,Ne,Pe);case x:var ze=Ne._init;return ft(le,ae,pe,ze(Ne._payload),Pe)}if(D(Ne)||P(Ne))return le=le.get(pe)||null,ke(ae,le,Ne,Pe,null);md(ae,Ne)}return null}function lt(le,ae,pe,Ne){for(var Pe=null,ze=null,Le=ae,Ze=ae=0,en=null;Le!==null&&Ze<pe.length;Ze++){Le.index>Ze?(en=Le,Le=null):en=Le.sibling;var Je=_e(le,Le,pe[Ze],Ne);if(Je===null){Le===null&&(Le=en);break}u&&Le&&Je.alternate===null&&h(le,Le),ae=B(Je,ae,Ze),ze===null?Pe=Je:ze.sibling=Je,ze=Je,Le=en}if(Ze===pe.length)return S(le,Le),yt&&ls(le,Ze),Pe;if(Le===null){for(;Ze<pe.length;Ze++)Le=Me(le,pe[Ze],Ne),Le!==null&&(ae=B(Le,ae,Ze),ze===null?Pe=Le:ze.sibling=Le,ze=Le);return yt&&ls(le,Ze),Pe}for(Le=j(le,Le);Ze<pe.length;Ze++)en=ft(Le,le,Ze,pe[Ze],Ne),en!==null&&(u&&en.alternate!==null&&Le.delete(en.key===null?Ze:en.key),ae=B(en,ae,Ze),ze===null?Pe=en:ze.sibling=en,ze=en);return u&&Le.forEach(function(oa){return h(le,oa)}),yt&&ls(le,Ze),Pe}function Mn(le,ae,pe,Ne){var Pe=P(pe);if(typeof Pe!="function")throw Error(s(150));if(pe=Pe.call(pe),pe==null)throw Error(s(151));for(var ze=Pe=null,Le=ae,Ze=ae=0,en=null,Je=pe.next();Le!==null&&!Je.done;Ze++,Je=pe.next()){Le.index>Ze?(en=Le,Le=null):en=Le.sibling;var oa=_e(le,Le,Je.value,Ne);if(oa===null){Le===null&&(Le=en);break}u&&Le&&oa.alternate===null&&h(le,Le),ae=B(oa,ae,Ze),ze===null?Pe=oa:ze.sibling=oa,ze=oa,Le=en}if(Je.done)return S(le,Le),yt&&ls(le,Ze),Pe;if(Le===null){for(;!Je.done;Ze++,Je=pe.next())Je=Me(le,Je.value,Ne),Je!==null&&(ae=B(Je,ae,Ze),ze===null?Pe=Je:ze.sibling=Je,ze=Je);return yt&&ls(le,Ze),Pe}for(Le=j(le,Le);!Je.done;Ze++,Je=pe.next())Je=ft(Le,le,Ze,Je.value,Ne),Je!==null&&(u&&Je.alternate!==null&&Le.delete(Je.key===null?Ze:Je.key),ae=B(Je,ae,Ze),ze===null?Pe=Je:ze.sibling=Je,ze=Je);return u&&Le.forEach(function(QP){return h(le,QP)}),yt&&ls(le,Ze),Pe}function _i(le,ae,pe,Ne){if(typeof pe=="object"&&pe!==null&&pe.type===f&&pe.key===null&&(pe=pe.props.children),typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case c:e:{for(var Pe=pe.key,ze=ae;ze!==null;){if(ze.key===Pe){if(Pe=pe.type,Pe===f){if(ze.tag===7){S(le,ze.sibling),ae=R(ze,pe.props.children),ae.return=le,le=ae;break e}}else if(ze.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===x&&U5(Pe)===ze.type){S(le,ze.sibling),ae=R(ze,pe.props),ae.ref=Hl(le,ze,pe),ae.return=le,le=ae;break e}S(le,ze);break}else h(le,ze);ze=ze.sibling}pe.type===f?(ae=ms(pe.props.children,le.mode,Ne,pe.key),ae.return=le,le=ae):(Ne=Vd(pe.type,pe.key,pe.props,null,le.mode,Ne),Ne.ref=Hl(le,ae,pe),Ne.return=le,le=Ne)}return Z(le);case d:e:{for(ze=pe.key;ae!==null;){if(ae.key===ze)if(ae.tag===4&&ae.stateNode.containerInfo===pe.containerInfo&&ae.stateNode.implementation===pe.implementation){S(le,ae.sibling),ae=R(ae,pe.children||[]),ae.return=le,le=ae;break e}else{S(le,ae);break}else h(le,ae);ae=ae.sibling}ae=ng(pe,le.mode,Ne),ae.return=le,le=ae}return Z(le);case x:return ze=pe._init,_i(le,ae,ze(pe._payload),Ne)}if(D(pe))return lt(le,ae,pe,Ne);if(P(pe))return Mn(le,ae,pe,Ne);md(le,pe)}return typeof pe=="string"&&pe!==""||typeof pe=="number"?(pe=""+pe,ae!==null&&ae.tag===6?(S(le,ae.sibling),ae=R(ae,pe),ae.return=le,le=ae):(S(le,ae),ae=tg(pe,le.mode,Ne),ae.return=le,le=ae),Z(le)):S(le,ae)}return _i}var oo=G5(!0),H5=G5(!1),gd=Gr(null),vd=null,lo=null,o0=null;function l0(){o0=lo=vd=null}function V5(u,h,S){X?(ut(gd,h._currentValue),h._currentValue=S):(ut(gd,h._currentValue2),h._currentValue2=S)}function c0(u){var h=gd.current;at(gd),X?u._currentValue=h:u._currentValue2=h}function u0(u,h,S){for(;u!==null;){var j=u.alternate;if((u.childLanes&h)!==h?(u.childLanes|=h,j!==null&&(j.childLanes|=h)):j!==null&&(j.childLanes&h)!==h&&(j.childLanes|=h),u===S)break;u=u.return}}function co(u,h){vd=u,o0=lo=null,u=u.dependencies,u!==null&&u.firstContext!==null&&(u.lanes&h&&(An=!0),u.firstContext=null)}function sr(u){var h=X?u._currentValue:u._currentValue2;if(o0!==u)if(u={context:u,memoizedValue:h,next:null},lo===null){if(vd===null)throw Error(s(308));lo=u,vd.dependencies={lanes:0,firstContext:u}}else lo=lo.next=u;return h}var cs=null;function d0(u){cs===null?cs=[u]:cs.push(u)}function W5(u,h,S,j){var R=h.interleaved;return R===null?(S.next=S,d0(h)):(S.next=R.next,R.next=S),h.interleaved=S,Wr(u,j)}function Wr(u,h){u.lanes|=h;var S=u.alternate;for(S!==null&&(S.lanes|=h),S=u,u=u.return;u!==null;)u.childLanes|=h,S=u.alternate,S!==null&&(S.childLanes|=h),S=u,u=u.return;return S.tag===3?S.stateNode:null}var ea=!1;function f0(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function K5(u,h){u=u.updateQueue,h.updateQueue===u&&(h.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function xi(u,h){return{eventTime:u,lane:h,tag:0,payload:null,callback:null,next:null}}function ta(u,h,S){var j=u.updateQueue;if(j===null)return null;if(j=j.shared,Ge&2){var R=j.pending;return R===null?h.next=h:(h.next=R.next,R.next=h),j.pending=h,Wr(u,S)}return R=j.interleaved,R===null?(h.next=h,d0(j)):(h.next=R.next,R.next=h),j.interleaved=h,Wr(u,S)}function yd(u,h,S){if(h=h.updateQueue,h!==null&&(h=h.shared,(S&4194240)!==0)){var j=h.lanes;j&=u.pendingLanes,S|=j,h.lanes=S,Qm(u,S)}}function Y5(u,h){var S=u.updateQueue,j=u.alternate;if(j!==null&&(j=j.updateQueue,S===j)){var R=null,B=null;if(S=S.firstBaseUpdate,S!==null){do{var Z={eventTime:S.eventTime,lane:S.lane,tag:S.tag,payload:S.payload,callback:S.callback,next:null};B===null?R=B=Z:B=B.next=Z,S=S.next}while(S!==null);B===null?R=B=h:B=B.next=h}else R=B=h;S={baseState:j.baseState,firstBaseUpdate:R,lastBaseUpdate:B,shared:j.shared,effects:j.effects},u.updateQueue=S;return}u=S.lastBaseUpdate,u===null?S.firstBaseUpdate=h:u.next=h,S.lastBaseUpdate=h}function xd(u,h,S,j){var R=u.updateQueue;ea=!1;var B=R.firstBaseUpdate,Z=R.lastBaseUpdate,ie=R.shared.pending;if(ie!==null){R.shared.pending=null;var fe=ie,xe=fe.next;fe.next=null,Z===null?B=xe:Z.next=xe,Z=fe;var ke=u.alternate;ke!==null&&(ke=ke.updateQueue,ie=ke.lastBaseUpdate,ie!==Z&&(ie===null?ke.firstBaseUpdate=xe:ie.next=xe,ke.lastBaseUpdate=fe))}if(B!==null){var Me=R.baseState;Z=0,ke=xe=fe=null,ie=B;do{var _e=ie.lane,ft=ie.eventTime;if((j&_e)===_e){ke!==null&&(ke=ke.next={eventTime:ft,lane:0,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null});e:{var lt=u,Mn=ie;switch(_e=h,ft=S,Mn.tag){case 1:if(lt=Mn.payload,typeof lt=="function"){Me=lt.call(ft,Me,_e);break e}Me=lt;break e;case 3:lt.flags=lt.flags&-65537|128;case 0:if(lt=Mn.payload,_e=typeof lt=="function"?lt.call(ft,Me,_e):lt,_e==null)break e;Me=a({},Me,_e);break e;case 2:ea=!0}}ie.callback!==null&&ie.lane!==0&&(u.flags|=64,_e=R.effects,_e===null?R.effects=[ie]:_e.push(ie))}else ft={eventTime:ft,lane:_e,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null},ke===null?(xe=ke=ft,fe=Me):ke=ke.next=ft,Z|=_e;if(ie=ie.next,ie===null){if(ie=R.shared.pending,ie===null)break;_e=ie,ie=_e.next,_e.next=null,R.lastBaseUpdate=_e,R.shared.pending=null}}while(1);if(ke===null&&(fe=Me),R.baseState=fe,R.firstBaseUpdate=xe,R.lastBaseUpdate=ke,h=R.shared.interleaved,h!==null){R=h;do Z|=R.lane,R=R.next;while(R!==h)}else B===null&&(R.shared.lanes=0);ds|=Z,u.lanes=Z,u.memoizedState=Me}}function X5(u,h,S){if(u=h.effects,h.effects=null,u!==null)for(h=0;h<u.length;h++){var j=u[h],R=j.callback;if(R!==null){if(j.callback=null,j=S,typeof R!="function")throw Error(s(191,R));R.call(j)}}}var Vl={},or=Gr(Vl),Wl=Gr(Vl),uo=Gr(Vl);function Kr(u){if(u===Vl)throw Error(s(174));return u}function h0(u,h){ut(uo,h),ut(Wl,u),ut(or,Vl),u=V(h),at(or),ut(or,u)}function fo(){at(or),at(Wl),at(uo)}function Q5(u){var h=Kr(uo.current),S=Kr(or.current);h=K(S,u.type,h),S!==h&&(ut(Wl,u),ut(or,h))}function p0(u){Wl.current===u&&(at(or),at(Wl))}var St=Gr(0);function bd(u){for(var h=u;h!==null;){if(h.tag===13){var S=h.memoizedState;if(S!==null&&(S=S.dehydrated,S===null||Ju(S)||Dl(S)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if(h.flags&128)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var m0=[];function g0(){for(var u=0;u<m0.length;u++){var h=m0[u];X?h._workInProgressVersionPrimary=null:h._workInProgressVersionSecondary=null}m0.length=0}var wd=o.ReactCurrentDispatcher,v0=o.ReactCurrentBatchConfig,us=0,Et=null,Ut=null,Zt=null,_d=!1,Kl=!1,Yl=0,_P=0;function hn(){throw Error(s(321))}function y0(u,h){if(h===null)return!1;for(var S=0;S<h.length&&S<u.length;S++)if(!Nr(u[S],h[S]))return!1;return!0}function x0(u,h,S,j,R,B){if(us=B,Et=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,wd.current=u===null||u.memoizedState===null?kP:jP,u=S(j,R),Kl){B=0;do{if(Kl=!1,Yl=0,25<=B)throw Error(s(301));B+=1,Zt=Ut=null,h.updateQueue=null,wd.current=CP,u=S(j,R)}while(Kl)}if(wd.current=Ed,h=Ut!==null&&Ut.next!==null,us=0,Zt=Ut=Et=null,_d=!1,h)throw Error(s(300));return u}function b0(){var u=Yl!==0;return Yl=0,u}function Yr(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zt===null?Et.memoizedState=Zt=u:Zt=Zt.next=u,Zt}function lr(){if(Ut===null){var u=Et.alternate;u=u!==null?u.memoizedState:null}else u=Ut.next;var h=Zt===null?Et.memoizedState:Zt.next;if(h!==null)Zt=h,Ut=u;else{if(u===null)throw Error(s(310));Ut=u,u={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},Zt===null?Et.memoizedState=Zt=u:Zt=Zt.next=u}return Zt}function Xl(u,h){return typeof h=="function"?h(u):h}function w0(u){var h=lr(),S=h.queue;if(S===null)throw Error(s(311));S.lastRenderedReducer=u;var j=Ut,R=j.baseQueue,B=S.pending;if(B!==null){if(R!==null){var Z=R.next;R.next=B.next,B.next=Z}j.baseQueue=R=B,S.pending=null}if(R!==null){B=R.next,j=j.baseState;var ie=Z=null,fe=null,xe=B;do{var ke=xe.lane;if((us&ke)===ke)fe!==null&&(fe=fe.next={lane:0,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null}),j=xe.hasEagerState?xe.eagerState:u(j,xe.action);else{var Me={lane:ke,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null};fe===null?(ie=fe=Me,Z=j):fe=fe.next=Me,Et.lanes|=ke,ds|=ke}xe=xe.next}while(xe!==null&&xe!==B);fe===null?Z=j:fe.next=ie,Nr(j,h.memoizedState)||(An=!0),h.memoizedState=j,h.baseState=Z,h.baseQueue=fe,S.lastRenderedState=j}if(u=S.interleaved,u!==null){R=u;do B=R.lane,Et.lanes|=B,ds|=B,R=R.next;while(R!==u)}else R===null&&(S.lanes=0);return[h.memoizedState,S.dispatch]}function _0(u){var h=lr(),S=h.queue;if(S===null)throw Error(s(311));S.lastRenderedReducer=u;var j=S.dispatch,R=S.pending,B=h.memoizedState;if(R!==null){S.pending=null;var Z=R=R.next;do B=u(B,Z.action),Z=Z.next;while(Z!==R);Nr(B,h.memoizedState)||(An=!0),h.memoizedState=B,h.baseQueue===null&&(h.baseState=B),S.lastRenderedState=B}return[B,j]}function Z5(){}function J5(u,h){var S=Et,j=lr(),R=h(),B=!Nr(j.memoizedState,R);if(B&&(j.memoizedState=R,An=!0),j=j.queue,N0(n_.bind(null,S,j,u),[u]),j.getSnapshot!==h||B||Zt!==null&&Zt.memoizedState.tag&1){if(S.flags|=2048,Ql(9,t_.bind(null,S,j,R,h),void 0,null),Jt===null)throw Error(s(349));us&30||e_(S,h,R)}return R}function e_(u,h,S){u.flags|=16384,u={getSnapshot:h,value:S},h=Et.updateQueue,h===null?(h={lastEffect:null,stores:null},Et.updateQueue=h,h.stores=[u]):(S=h.stores,S===null?h.stores=[u]:S.push(u))}function t_(u,h,S,j){h.value=S,h.getSnapshot=j,r_(h)&&i_(u)}function n_(u,h,S){return S(function(){r_(h)&&i_(u)})}function r_(u){var h=u.getSnapshot;u=u.value;try{var S=h();return!Nr(u,S)}catch{return!0}}function i_(u){var h=Wr(u,1);h!==null&&cr(h,u,1,-1)}function a_(u){var h=Yr();return typeof u=="function"&&(u=u()),h.memoizedState=h.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xl,lastRenderedState:u},h.queue=u,u=u.dispatch=EP.bind(null,Et,u),[h.memoizedState,u]}function Ql(u,h,S,j){return u={tag:u,create:h,destroy:S,deps:j,next:null},h=Et.updateQueue,h===null?(h={lastEffect:null,stores:null},Et.updateQueue=h,h.lastEffect=u.next=u):(S=h.lastEffect,S===null?h.lastEffect=u.next=u:(j=S.next,S.next=u,u.next=j,h.lastEffect=u)),u}function s_(){return lr().memoizedState}function Nd(u,h,S,j){var R=Yr();Et.flags|=u,R.memoizedState=Ql(1|h,S,void 0,j===void 0?null:j)}function Sd(u,h,S,j){var R=lr();j=j===void 0?null:j;var B=void 0;if(Ut!==null){var Z=Ut.memoizedState;if(B=Z.destroy,j!==null&&y0(j,Z.deps)){R.memoizedState=Ql(h,S,B,j);return}}Et.flags|=u,R.memoizedState=Ql(1|h,S,B,j)}function o_(u,h){return Nd(8390656,8,u,h)}function N0(u,h){return Sd(2048,8,u,h)}function l_(u,h){return Sd(4,2,u,h)}function c_(u,h){return Sd(4,4,u,h)}function u_(u,h){if(typeof h=="function")return u=u(),h(u),function(){h(null)};if(h!=null)return u=u(),h.current=u,function(){h.current=null}}function d_(u,h,S){return S=S!=null?S.concat([u]):null,Sd(4,4,u_.bind(null,h,u),S)}function S0(){}function f_(u,h){var S=lr();h=h===void 0?null:h;var j=S.memoizedState;return j!==null&&h!==null&&y0(h,j[1])?j[0]:(S.memoizedState=[u,h],u)}function h_(u,h){var S=lr();h=h===void 0?null:h;var j=S.memoizedState;return j!==null&&h!==null&&y0(h,j[1])?j[0]:(u=u(),S.memoizedState=[u,h],u)}function p_(u,h,S){return us&21?(Nr(S,h)||(S=I5(),Et.lanes|=S,ds|=S,u.baseState=!0),h):(u.baseState&&(u.baseState=!1,An=!0),u.memoizedState=S)}function NP(u,h){var S=Qe;Qe=S!==0&&4>S?S:4,u(!0);var j=v0.transition;v0.transition={};try{u(!1),h()}finally{Qe=S,v0.transition=j}}function m_(){return lr().memoizedState}function SP(u,h,S){var j=ia(u);if(S={lane:j,action:S,hasEagerState:!1,eagerState:null,next:null},g_(u))v_(h,S);else if(S=W5(u,h,S,j),S!==null){var R=gn();cr(S,u,j,R),y_(S,h,j)}}function EP(u,h,S){var j=ia(u),R={lane:j,action:S,hasEagerState:!1,eagerState:null,next:null};if(g_(u))v_(h,R);else{var B=u.alternate;if(u.lanes===0&&(B===null||B.lanes===0)&&(B=h.lastRenderedReducer,B!==null))try{var Z=h.lastRenderedState,ie=B(Z,S);if(R.hasEagerState=!0,R.eagerState=ie,Nr(ie,Z)){var fe=h.interleaved;fe===null?(R.next=R,d0(h)):(R.next=fe.next,fe.next=R),h.interleaved=R;return}}catch{}finally{}S=W5(u,h,R,j),S!==null&&(R=gn(),cr(S,u,j,R),y_(S,h,j))}}function g_(u){var h=u.alternate;return u===Et||h!==null&&h===Et}function v_(u,h){Kl=_d=!0;var S=u.pending;S===null?h.next=h:(h.next=S.next,S.next=h),u.pending=h}function y_(u,h,S){if(S&4194240){var j=h.lanes;j&=u.pendingLanes,S|=j,h.lanes=S,Qm(u,S)}}var Ed={readContext:sr,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useInsertionEffect:hn,useLayoutEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useDeferredValue:hn,useTransition:hn,useMutableSource:hn,useSyncExternalStore:hn,useId:hn,unstable_isNewReconciler:!1},kP={readContext:sr,useCallback:function(u,h){return Yr().memoizedState=[u,h===void 0?null:h],u},useContext:sr,useEffect:o_,useImperativeHandle:function(u,h,S){return S=S!=null?S.concat([u]):null,Nd(4194308,4,u_.bind(null,h,u),S)},useLayoutEffect:function(u,h){return Nd(4194308,4,u,h)},useInsertionEffect:function(u,h){return Nd(4,2,u,h)},useMemo:function(u,h){var S=Yr();return h=h===void 0?null:h,u=u(),S.memoizedState=[u,h],u},useReducer:function(u,h,S){var j=Yr();return h=S!==void 0?S(h):h,j.memoizedState=j.baseState=h,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:h},j.queue=u,u=u.dispatch=SP.bind(null,Et,u),[j.memoizedState,u]},useRef:function(u){var h=Yr();return u={current:u},h.memoizedState=u},useState:a_,useDebugValue:S0,useDeferredValue:function(u){return Yr().memoizedState=u},useTransition:function(){var u=a_(!1),h=u[0];return u=NP.bind(null,u[1]),Yr().memoizedState=u,[h,u]},useMutableSource:function(){},useSyncExternalStore:function(u,h,S){var j=Et,R=Yr();if(yt){if(S===void 0)throw Error(s(407));S=S()}else{if(S=h(),Jt===null)throw Error(s(349));us&30||e_(j,h,S)}R.memoizedState=S;var B={value:S,getSnapshot:h};return R.queue=B,o_(n_.bind(null,j,B,u),[u]),j.flags|=2048,Ql(9,t_.bind(null,j,B,S,h),void 0,null),S},useId:function(){var u=Yr(),h=Jt.identifierPrefix;if(yt){var S=yi,j=vi;S=(j&~(1<<32-_r(j)-1)).toString(32)+S,h=":"+h+"R"+S,S=Yl++,0<S&&(h+="H"+S.toString(32)),h+=":"}else S=_P++,h=":"+h+"r"+S.toString(32)+":";return u.memoizedState=h},unstable_isNewReconciler:!1},jP={readContext:sr,useCallback:f_,useContext:sr,useEffect:N0,useImperativeHandle:d_,useInsertionEffect:l_,useLayoutEffect:c_,useMemo:h_,useReducer:w0,useRef:s_,useState:function(){return w0(Xl)},useDebugValue:S0,useDeferredValue:function(u){var h=lr();return p_(h,Ut.memoizedState,u)},useTransition:function(){var u=w0(Xl)[0],h=lr().memoizedState;return[u,h]},useMutableSource:Z5,useSyncExternalStore:J5,useId:m_,unstable_isNewReconciler:!1},CP={readContext:sr,useCallback:f_,useContext:sr,useEffect:N0,useImperativeHandle:d_,useInsertionEffect:l_,useLayoutEffect:c_,useMemo:h_,useReducer:_0,useRef:s_,useState:function(){return _0(Xl)},useDebugValue:S0,useDeferredValue:function(u){var h=lr();return Ut===null?h.memoizedState=u:p_(h,Ut.memoizedState,u)},useTransition:function(){var u=_0(Xl)[0],h=lr().memoizedState;return[u,h]},useMutableSource:Z5,useSyncExternalStore:J5,useId:m_,unstable_isNewReconciler:!1};function Er(u,h){if(u&&u.defaultProps){h=a({},h),u=u.defaultProps;for(var S in u)h[S]===void 0&&(h[S]=u[S]);return h}return h}function E0(u,h,S,j){h=u.memoizedState,S=S(j,h),S=S==null?h:a({},h,S),u.memoizedState=S,u.lanes===0&&(u.updateQueue.baseState=S)}var kd={isMounted:function(u){return(u=u._reactInternals)?L(u)===u:!1},enqueueSetState:function(u,h,S){u=u._reactInternals;var j=gn(),R=ia(u),B=xi(j,R);B.payload=h,S!=null&&(B.callback=S),h=ta(u,B,R),h!==null&&(cr(h,u,R,j),yd(h,u,R))},enqueueReplaceState:function(u,h,S){u=u._reactInternals;var j=gn(),R=ia(u),B=xi(j,R);B.tag=1,B.payload=h,S!=null&&(B.callback=S),h=ta(u,B,R),h!==null&&(cr(h,u,R,j),yd(h,u,R))},enqueueForceUpdate:function(u,h){u=u._reactInternals;var S=gn(),j=ia(u),R=xi(S,j);R.tag=2,h!=null&&(R.callback=h),h=ta(u,R,j),h!==null&&(cr(h,u,j,S),yd(h,u,j))}};function x_(u,h,S,j,R,B,Z){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(j,B,Z):h.prototype&&h.prototype.isPureReactComponent?!pd(S,j)||!pd(R,B):!0}function b_(u,h,S){var j=!1,R=Ji,B=h.contextType;return typeof B=="object"&&B!==null?B=sr(B):(R=Pn(h)?ss:fn.current,j=h.contextTypes,B=(j=j!=null)?ro(u,R):Ji),h=new h(S,B),u.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=kd,u.stateNode=h,h._reactInternals=u,j&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=R,u.__reactInternalMemoizedMaskedChildContext=B),h}function w_(u,h,S,j){u=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(S,j),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(S,j),h.state!==u&&kd.enqueueReplaceState(h,h.state,null)}function k0(u,h,S,j){var R=u.stateNode;R.props=S,R.state=u.memoizedState,R.refs={},f0(u);var B=h.contextType;typeof B=="object"&&B!==null?R.context=sr(B):(B=Pn(h)?ss:fn.current,R.context=ro(u,B)),R.state=u.memoizedState,B=h.getDerivedStateFromProps,typeof B=="function"&&(E0(u,h,B,S),R.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(h=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),h!==R.state&&kd.enqueueReplaceState(R,R.state,null),xd(u,S,R,j),R.state=u.memoizedState),typeof R.componentDidMount=="function"&&(u.flags|=4194308)}function ho(u,h){try{var S="",j=h;do S+=wP(j),j=j.return;while(j);var R=S}catch(B){R=`
Error generating stack: `+B.message+`
`+B.stack}return{value:u,source:h,stack:R,digest:null}}function j0(u,h,S){return{value:u,source:null,stack:S??null,digest:h??null}}function C0(u,h){try{console.error(h.value)}catch(S){setTimeout(function(){throw S})}}var TP=typeof WeakMap=="function"?WeakMap:Map;function __(u,h,S){S=xi(-1,S),S.tag=3,S.payload={element:null};var j=h.value;return S.callback=function(){Bd||(Bd=!0,K0=j),C0(u,h)},S}function N_(u,h,S){S=xi(-1,S),S.tag=3;var j=u.type.getDerivedStateFromError;if(typeof j=="function"){var R=h.value;S.payload=function(){return j(R)},S.callback=function(){C0(u,h)}}var B=u.stateNode;return B!==null&&typeof B.componentDidCatch=="function"&&(S.callback=function(){C0(u,h),typeof j!="function"&&(na===null?na=new Set([this]):na.add(this));var Z=h.stack;this.componentDidCatch(h.value,{componentStack:Z!==null?Z:""})}),S}function S_(u,h,S){var j=u.pingCache;if(j===null){j=u.pingCache=new TP;var R=new Set;j.set(h,R)}else R=j.get(h),R===void 0&&(R=new Set,j.set(h,R));R.has(S)||(R.add(S),u=UP.bind(null,u,h,S),h.then(u,u))}function E_(u){do{var h;if((h=u.tag===13)&&(h=u.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return u;u=u.return}while(u!==null);return null}function k_(u,h,S,j,R){return u.mode&1?(u.flags|=65536,u.lanes=R,u):(u===h?u.flags|=65536:(u.flags|=128,S.flags|=131072,S.flags&=-52805,S.tag===1&&(S.alternate===null?S.tag=17:(h=xi(-1,1),h.tag=2,ta(S,h,1))),S.lanes|=1),u)}var OP=o.ReactCurrentOwner,An=!1;function Nn(u,h,S,j){h.child=u===null?H5(h,null,S,j):oo(h,u.child,S,j)}function j_(u,h,S,j,R){S=S.render;var B=h.ref;return co(h,R),j=x0(u,h,S,j,B,R),S=b0(),u!==null&&!An?(h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~R,bi(u,h,R)):(yt&&S&&n0(h),h.flags|=1,Nn(u,h,j,R),h.child)}function C_(u,h,S,j,R){if(u===null){var B=S.type;return typeof B=="function"&&!eg(B)&&B.defaultProps===void 0&&S.compare===null&&S.defaultProps===void 0?(h.tag=15,h.type=B,T_(u,h,B,j,R)):(u=Vd(S.type,null,j,h,h.mode,R),u.ref=h.ref,u.return=h,h.child=u)}if(B=u.child,!(u.lanes&R)){var Z=B.memoizedProps;if(S=S.compare,S=S!==null?S:pd,S(Z,j)&&u.ref===h.ref)return bi(u,h,R)}return h.flags|=1,u=sa(B,j),u.ref=h.ref,u.return=h,h.child=u}function T_(u,h,S,j,R){if(u!==null){var B=u.memoizedProps;if(pd(B,j)&&u.ref===h.ref)if(An=!1,h.pendingProps=j=B,(u.lanes&R)!==0)u.flags&131072&&(An=!0);else return h.lanes=u.lanes,bi(u,h,R)}return T0(u,h,S,j,R)}function O_(u,h,S){var j=h.pendingProps,R=j.children,B=u!==null?u.memoizedState:null;if(j.mode==="hidden")if(!(h.mode&1))h.memoizedState={baseLanes:0,cachePool:null,transitions:null},ut(mo,Vn),Vn|=S;else{if(!(S&1073741824))return u=B!==null?B.baseLanes|S:S,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:u,cachePool:null,transitions:null},h.updateQueue=null,ut(mo,Vn),Vn|=u,null;h.memoizedState={baseLanes:0,cachePool:null,transitions:null},j=B!==null?B.baseLanes:S,ut(mo,Vn),Vn|=j}else B!==null?(j=B.baseLanes|S,h.memoizedState=null):j=S,ut(mo,Vn),Vn|=j;return Nn(u,h,R,S),h.child}function P_(u,h){var S=h.ref;(u===null&&S!==null||u!==null&&u.ref!==S)&&(h.flags|=512,h.flags|=2097152)}function T0(u,h,S,j,R){var B=Pn(S)?ss:fn.current;return B=ro(h,B),co(h,R),S=x0(u,h,S,j,B,R),j=b0(),u!==null&&!An?(h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~R,bi(u,h,R)):(yt&&j&&n0(h),h.flags|=1,Nn(u,h,S,R),h.child)}function A_(u,h,S,j,R){if(Pn(S)){var B=!0;ad(h)}else B=!1;if(co(h,R),h.stateNode===null)Cd(u,h),b_(h,S,j),k0(h,S,j,R),j=!0;else if(u===null){var Z=h.stateNode,ie=h.memoizedProps;Z.props=ie;var fe=Z.context,xe=S.contextType;typeof xe=="object"&&xe!==null?xe=sr(xe):(xe=Pn(S)?ss:fn.current,xe=ro(h,xe));var ke=S.getDerivedStateFromProps,Me=typeof ke=="function"||typeof Z.getSnapshotBeforeUpdate=="function";Me||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(ie!==j||fe!==xe)&&w_(h,Z,j,xe),ea=!1;var _e=h.memoizedState;Z.state=_e,xd(h,j,Z,R),fe=h.memoizedState,ie!==j||_e!==fe||On.current||ea?(typeof ke=="function"&&(E0(h,S,ke,j),fe=h.memoizedState),(ie=ea||x_(h,S,ie,j,_e,fe,xe))?(Me||typeof Z.UNSAFE_componentWillMount!="function"&&typeof Z.componentWillMount!="function"||(typeof Z.componentWillMount=="function"&&Z.componentWillMount(),typeof Z.UNSAFE_componentWillMount=="function"&&Z.UNSAFE_componentWillMount()),typeof Z.componentDidMount=="function"&&(h.flags|=4194308)):(typeof Z.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=j,h.memoizedState=fe),Z.props=j,Z.state=fe,Z.context=xe,j=ie):(typeof Z.componentDidMount=="function"&&(h.flags|=4194308),j=!1)}else{Z=h.stateNode,K5(u,h),ie=h.memoizedProps,xe=h.type===h.elementType?ie:Er(h.type,ie),Z.props=xe,Me=h.pendingProps,_e=Z.context,fe=S.contextType,typeof fe=="object"&&fe!==null?fe=sr(fe):(fe=Pn(S)?ss:fn.current,fe=ro(h,fe));var ft=S.getDerivedStateFromProps;(ke=typeof ft=="function"||typeof Z.getSnapshotBeforeUpdate=="function")||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(ie!==Me||_e!==fe)&&w_(h,Z,j,fe),ea=!1,_e=h.memoizedState,Z.state=_e,xd(h,j,Z,R);var lt=h.memoizedState;ie!==Me||_e!==lt||On.current||ea?(typeof ft=="function"&&(E0(h,S,ft,j),lt=h.memoizedState),(xe=ea||x_(h,S,xe,j,_e,lt,fe)||!1)?(ke||typeof Z.UNSAFE_componentWillUpdate!="function"&&typeof Z.componentWillUpdate!="function"||(typeof Z.componentWillUpdate=="function"&&Z.componentWillUpdate(j,lt,fe),typeof Z.UNSAFE_componentWillUpdate=="function"&&Z.UNSAFE_componentWillUpdate(j,lt,fe)),typeof Z.componentDidUpdate=="function"&&(h.flags|=4),typeof Z.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof Z.componentDidUpdate!="function"||ie===u.memoizedProps&&_e===u.memoizedState||(h.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||ie===u.memoizedProps&&_e===u.memoizedState||(h.flags|=1024),h.memoizedProps=j,h.memoizedState=lt),Z.props=j,Z.state=lt,Z.context=fe,j=xe):(typeof Z.componentDidUpdate!="function"||ie===u.memoizedProps&&_e===u.memoizedState||(h.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||ie===u.memoizedProps&&_e===u.memoizedState||(h.flags|=1024),j=!1)}return O0(u,h,S,j,B,R)}function O0(u,h,S,j,R,B){P_(u,h);var Z=(h.flags&128)!==0;if(!j&&!Z)return R&&R5(h,S,!1),bi(u,h,B);j=h.stateNode,OP.current=h;var ie=Z&&typeof S.getDerivedStateFromError!="function"?null:j.render();return h.flags|=1,u!==null&&Z?(h.child=oo(h,u.child,null,B),h.child=oo(h,null,ie,B)):Nn(u,h,ie,B),h.memoizedState=j.state,R&&R5(h,S,!0),h.child}function R_(u){var h=u.stateNode;h.pendingContext?P5(u,h.pendingContext,h.pendingContext!==h.context):h.context&&P5(u,h.context,!1),h0(u,h.containerInfo)}function I_(u,h,S,j,R){return so(),s0(R),h.flags|=256,Nn(u,h,S,j),h.child}var P0={dehydrated:null,treeContext:null,retryLane:0};function A0(u){return{baseLanes:u,cachePool:null,transitions:null}}function M_(u,h,S){var j=h.pendingProps,R=St.current,B=!1,Z=(h.flags&128)!==0,ie;if((ie=Z)||(ie=u!==null&&u.memoizedState===null?!1:(R&2)!==0),ie?(B=!0,h.flags&=-129):(u===null||u.memoizedState!==null)&&(R|=1),ut(St,R&1),u===null)return a0(h),u=h.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?(h.mode&1?Dl(u)?h.lanes=8:h.lanes=1073741824:h.lanes=1,null):(Z=j.children,u=j.fallback,B?(j=h.mode,B=h.child,Z={mode:"hidden",children:Z},!(j&1)&&B!==null?(B.childLanes=0,B.pendingProps=Z):B=Wd(Z,j,0,null),u=ms(u,j,S,null),B.return=h,u.return=h,B.sibling=u,h.child=B,h.child.memoizedState=A0(S),h.memoizedState=P0,u):R0(h,Z));if(R=u.memoizedState,R!==null&&(ie=R.dehydrated,ie!==null))return PP(u,h,Z,j,ie,R,S);if(B){B=j.fallback,Z=h.mode,R=u.child,ie=R.sibling;var fe={mode:"hidden",children:j.children};return!(Z&1)&&h.child!==R?(j=h.child,j.childLanes=0,j.pendingProps=fe,h.deletions=null):(j=sa(R,fe),j.subtreeFlags=R.subtreeFlags&14680064),ie!==null?B=sa(ie,B):(B=ms(B,Z,S,null),B.flags|=2),B.return=h,j.return=h,j.sibling=B,h.child=j,j=B,B=h.child,Z=u.child.memoizedState,Z=Z===null?A0(S):{baseLanes:Z.baseLanes|S,cachePool:null,transitions:Z.transitions},B.memoizedState=Z,B.childLanes=u.childLanes&~S,h.memoizedState=P0,j}return B=u.child,u=B.sibling,j=sa(B,{mode:"visible",children:j.children}),!(h.mode&1)&&(j.lanes=S),j.return=h,j.sibling=null,u!==null&&(S=h.deletions,S===null?(h.deletions=[u],h.flags|=16):S.push(u)),h.child=j,h.memoizedState=null,j}function R0(u,h){return h=Wd({mode:"visible",children:h},u.mode,0,null),h.return=u,u.child=h}function jd(u,h,S,j){return j!==null&&s0(j),oo(h,u.child,null,S),u=R0(h,h.pendingProps.children),u.flags|=2,h.memoizedState=null,u}function PP(u,h,S,j,R,B,Z){if(S)return h.flags&256?(h.flags&=-257,j=j0(Error(s(422))),jd(u,h,Z,j)):h.memoizedState!==null?(h.child=u.child,h.flags|=128,null):(B=j.fallback,R=h.mode,j=Wd({mode:"visible",children:j.children},R,0,null),B=ms(B,R,Z,null),B.flags|=2,j.return=h,B.return=h,j.sibling=B,h.child=j,h.mode&1&&oo(h,u.child,null,Z),h.child.memoizedState=A0(Z),h.memoizedState=P0,B);if(!(h.mode&1))return jd(u,h,Z,null);if(Dl(R))return j=Mm(R).digest,B=Error(s(419)),j=j0(B,j,void 0),jd(u,h,Z,j);if(S=(Z&u.childLanes)!==0,An||S){if(j=Jt,j!==null){switch(Z&-Z){case 4:R=2;break;case 16:R=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:R=32;break;case 536870912:R=268435456;break;default:R=0}R=R&(j.suspendedLanes|Z)?0:R,R!==0&&R!==B.retryLane&&(B.retryLane=R,Wr(u,R),cr(j,u,R,-1))}return J0(),j=j0(Error(s(421))),jd(u,h,Z,j)}return Ju(R)?(h.flags|=128,h.child=u.child,h=GP.bind(null,u),Lm(R,h),null):(u=B.treeContext,se&&(ar=ed(R),Hn=h,yt=!0,Sr=null,Gl=!1,u!==null&&(rr[ir++]=vi,rr[ir++]=yi,rr[ir++]=os,vi=u.id,yi=u.overflow,os=h)),h=R0(h,j.children),h.flags|=4096,h)}function L_(u,h,S){u.lanes|=h;var j=u.alternate;j!==null&&(j.lanes|=h),u0(u.return,h,S)}function I0(u,h,S,j,R){var B=u.memoizedState;B===null?u.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:j,tail:S,tailMode:R}:(B.isBackwards=h,B.rendering=null,B.renderingStartTime=0,B.last=j,B.tail=S,B.tailMode=R)}function D_(u,h,S){var j=h.pendingProps,R=j.revealOrder,B=j.tail;if(Nn(u,h,j.children,S),j=St.current,j&2)j=j&1|2,h.flags|=128;else{if(u!==null&&u.flags&128)e:for(u=h.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&L_(u,S,h);else if(u.tag===19)L_(u,S,h);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===h)break e;for(;u.sibling===null;){if(u.return===null||u.return===h)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}j&=1}if(ut(St,j),!(h.mode&1))h.memoizedState=null;else switch(R){case"forwards":for(S=h.child,R=null;S!==null;)u=S.alternate,u!==null&&bd(u)===null&&(R=S),S=S.sibling;S=R,S===null?(R=h.child,h.child=null):(R=S.sibling,S.sibling=null),I0(h,!1,R,S,B);break;case"backwards":for(S=null,R=h.child,h.child=null;R!==null;){if(u=R.alternate,u!==null&&bd(u)===null){h.child=R;break}u=R.sibling,R.sibling=S,S=R,R=u}I0(h,!0,S,null,B);break;case"together":I0(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function Cd(u,h){!(h.mode&1)&&u!==null&&(u.alternate=null,h.alternate=null,h.flags|=2)}function bi(u,h,S){if(u!==null&&(h.dependencies=u.dependencies),ds|=h.lanes,!(S&h.childLanes))return null;if(u!==null&&h.child!==u.child)throw Error(s(153));if(h.child!==null){for(u=h.child,S=sa(u,u.pendingProps),h.child=S,S.return=h;u.sibling!==null;)u=u.sibling,S=S.sibling=sa(u,u.pendingProps),S.return=h;S.sibling=null}return h.child}function AP(u,h,S){switch(h.tag){case 3:R_(h),so();break;case 5:Q5(h);break;case 1:Pn(h.type)&&ad(h);break;case 4:h0(h,h.stateNode.containerInfo);break;case 10:V5(h,h.type._context,h.memoizedProps.value);break;case 13:var j=h.memoizedState;if(j!==null)return j.dehydrated!==null?(ut(St,St.current&1),h.flags|=128,null):S&h.child.childLanes?M_(u,h,S):(ut(St,St.current&1),u=bi(u,h,S),u!==null?u.sibling:null);ut(St,St.current&1);break;case 19:if(j=(S&h.childLanes)!==0,u.flags&128){if(j)return D_(u,h,S);h.flags|=128}var R=h.memoizedState;if(R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),ut(St,St.current),j)break;return null;case 22:case 23:return h.lanes=0,O_(u,h,S)}return bi(u,h,S)}function Xr(u){u.flags|=4}function F_(u,h){if(u!==null&&u.child===h.child)return!0;if(h.flags&16)return!1;for(u=h.child;u!==null;){if(u.flags&12854||u.subtreeFlags&12854)return!1;u=u.sibling}return!0}var Zl,Jl,Td,Od;if(ne)Zl=function(u,h){for(var S=h.child;S!==null;){if(S.tag===5||S.tag===6)z(u,S.stateNode);else if(S.tag!==4&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===h)break;for(;S.sibling===null;){if(S.return===null||S.return===h)return;S=S.return}S.sibling.return=S.return,S=S.sibling}},Jl=function(){},Td=function(u,h,S,j,R){if(u=u.memoizedProps,u!==j){var B=h.stateNode,Z=Kr(or.current);S=Q(B,S,u,j,R,Z),(h.updateQueue=S)&&Xr(h)}},Od=function(u,h,S,j){S!==j&&Xr(h)};else if(ue){Zl=function(u,h,S,j){for(var R=h.child;R!==null;){if(R.tag===5){var B=R.stateNode;S&&j&&(B=Qu(B,R.type,R.memoizedProps,R)),z(u,B)}else if(R.tag===6)B=R.stateNode,S&&j&&(B=Zu(B,R.memoizedProps,R)),z(u,B);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)B=R.child,B!==null&&(B.return=R),Zl(u,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===h)break;for(;R.sibling===null;){if(R.return===null||R.return===h)return;R=R.return}R.sibling.return=R.return,R=R.sibling}};var z_=function(u,h,S,j){for(var R=h.child;R!==null;){if(R.tag===5){var B=R.stateNode;S&&j&&(B=Qu(B,R.type,R.memoizedProps,R)),Xu(u,B)}else if(R.tag===6)B=R.stateNode,S&&j&&(B=Zu(B,R.memoizedProps,R)),Xu(u,B);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)B=R.child,B!==null&&(B.return=R),z_(u,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===h)break;for(;R.sibling===null;){if(R.return===null||R.return===h)return;R=R.return}R.sibling.return=R.return,R=R.sibling}};Jl=function(u,h){var S=h.stateNode;if(!F_(u,h)){u=S.containerInfo;var j=Yu(u);z_(j,h,!1,!1),S.pendingChildren=j,Xr(h),Pm(u,j)}},Td=function(u,h,S,j,R){var B=u.stateNode,Z=u.memoizedProps;if((u=F_(u,h))&&Z===j)h.stateNode=B;else{var ie=h.stateNode,fe=Kr(or.current),xe=null;Z!==j&&(xe=Q(ie,S,Z,j,R,fe)),u&&xe===null?h.stateNode=B:(B=mi(B,xe,S,Z,j,h,u,ie),W(B,S,j,R,fe)&&Xr(h),h.stateNode=B,u?Xr(h):Zl(B,h,!1,!1))}},Od=function(u,h,S,j){S!==j?(u=Kr(uo.current),S=Kr(or.current),h.stateNode=Y(j,u,S,h),Xr(h)):h.stateNode=u.stateNode}}else Jl=function(){},Td=function(){},Od=function(){};function ec(u,h){if(!yt)switch(u.tailMode){case"hidden":h=u.tail;for(var S=null;h!==null;)h.alternate!==null&&(S=h),h=h.sibling;S===null?u.tail=null:S.sibling=null;break;case"collapsed":S=u.tail;for(var j=null;S!==null;)S.alternate!==null&&(j=S),S=S.sibling;j===null?h||u.tail===null?u.tail=null:u.tail.sibling=null:j.sibling=null}}function pn(u){var h=u.alternate!==null&&u.alternate.child===u.child,S=0,j=0;if(h)for(var R=u.child;R!==null;)S|=R.lanes|R.childLanes,j|=R.subtreeFlags&14680064,j|=R.flags&14680064,R.return=u,R=R.sibling;else for(R=u.child;R!==null;)S|=R.lanes|R.childLanes,j|=R.subtreeFlags,j|=R.flags,R.return=u,R=R.sibling;return u.subtreeFlags|=j,u.childLanes=S,h}function RP(u,h,S){var j=h.pendingProps;switch(r0(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pn(h),null;case 1:return Pn(h.type)&&rd(),pn(h),null;case 3:return S=h.stateNode,fo(),at(On),at(fn),g0(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(u===null||u.child===null)&&(hd(h)?Xr(h):u===null||u.memoizedState.isDehydrated&&!(h.flags&256)||(h.flags|=1024,Sr!==null&&(Q0(Sr),Sr=null))),Jl(u,h),pn(h),null;case 5:p0(h),S=Kr(uo.current);var R=h.type;if(u!==null&&h.stateNode!=null)Td(u,h,R,j,S),u.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!j){if(h.stateNode===null)throw Error(s(166));return pn(h),null}if(u=Kr(or.current),hd(h)){if(!se)throw Error(s(175));u=zm(h.stateNode,h.type,h.memoizedProps,S,u,h,!Gl),h.updateQueue=u,u!==null&&Xr(h)}else{var B=I(R,j,S,u,h);Zl(B,h,!1,!1),h.stateNode=B,W(B,R,j,S,u)&&Xr(h)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return pn(h),null;case 6:if(u&&h.stateNode!=null)Od(u,h,u.memoizedProps,j);else{if(typeof j!="string"&&h.stateNode===null)throw Error(s(166));if(u=Kr(uo.current),S=Kr(or.current),hd(h)){if(!se)throw Error(s(176));if(u=h.stateNode,S=h.memoizedProps,(j=Bm(u,S,h,!Gl))&&(R=Hn,R!==null))switch(R.tag){case 3:Wm(R.stateNode.containerInfo,u,S,(R.mode&1)!==0);break;case 5:Km(R.type,R.memoizedProps,R.stateNode,u,S,(R.mode&1)!==0)}j&&Xr(h)}else h.stateNode=Y(j,u,S,h)}return pn(h),null;case 13:if(at(St),j=h.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(yt&&ar!==null&&h.mode&1&&!(h.flags&128))$5(),so(),h.flags|=98560,R=!1;else if(R=hd(h),j!==null&&j.dehydrated!==null){if(u===null){if(!R)throw Error(s(318));if(!se)throw Error(s(344));if(R=h.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(s(317));qm(R,h)}else so(),!(h.flags&128)&&(h.memoizedState=null),h.flags|=4;pn(h),R=!1}else Sr!==null&&(Q0(Sr),Sr=null),R=!0;if(!R)return h.flags&65536?h:null}return h.flags&128?(h.lanes=S,h):(S=j!==null,S!==(u!==null&&u.memoizedState!==null)&&S&&(h.child.flags|=8192,h.mode&1&&(u===null||St.current&1?Gt===0&&(Gt=3):J0())),h.updateQueue!==null&&(h.flags|=4),pn(h),null);case 4:return fo(),Jl(u,h),u===null&&de(h.stateNode.containerInfo),pn(h),null;case 10:return c0(h.type._context),pn(h),null;case 17:return Pn(h.type)&&rd(),pn(h),null;case 19:if(at(St),R=h.memoizedState,R===null)return pn(h),null;if(j=(h.flags&128)!==0,B=R.rendering,B===null)if(j)ec(R,!1);else{if(Gt!==0||u!==null&&u.flags&128)for(u=h.child;u!==null;){if(B=bd(u),B!==null){for(h.flags|=128,ec(R,!1),u=B.updateQueue,u!==null&&(h.updateQueue=u,h.flags|=4),h.subtreeFlags=0,u=S,S=h.child;S!==null;)j=S,R=u,j.flags&=14680066,B=j.alternate,B===null?(j.childLanes=0,j.lanes=R,j.child=null,j.subtreeFlags=0,j.memoizedProps=null,j.memoizedState=null,j.updateQueue=null,j.dependencies=null,j.stateNode=null):(j.childLanes=B.childLanes,j.lanes=B.lanes,j.child=B.child,j.subtreeFlags=0,j.deletions=null,j.memoizedProps=B.memoizedProps,j.memoizedState=B.memoizedState,j.updateQueue=B.updateQueue,j.type=B.type,R=B.dependencies,j.dependencies=R===null?null:{lanes:R.lanes,firstContext:R.firstContext}),S=S.sibling;return ut(St,St.current&1|2),h.child}u=u.sibling}R.tail!==null&&Qt()>W0&&(h.flags|=128,j=!0,ec(R,!1),h.lanes=4194304)}else{if(!j)if(u=bd(B),u!==null){if(h.flags|=128,j=!0,u=u.updateQueue,u!==null&&(h.updateQueue=u,h.flags|=4),ec(R,!0),R.tail===null&&R.tailMode==="hidden"&&!B.alternate&&!yt)return pn(h),null}else 2*Qt()-R.renderingStartTime>W0&&S!==1073741824&&(h.flags|=128,j=!0,ec(R,!1),h.lanes=4194304);R.isBackwards?(B.sibling=h.child,h.child=B):(u=R.last,u!==null?u.sibling=B:h.child=B,R.last=B)}return R.tail!==null?(h=R.tail,R.rendering=h,R.tail=h.sibling,R.renderingStartTime=Qt(),h.sibling=null,u=St.current,ut(St,j?u&1|2:u&1),h):(pn(h),null);case 22:case 23:return Z0(),S=h.memoizedState!==null,u!==null&&u.memoizedState!==null!==S&&(h.flags|=8192),S&&h.mode&1?Vn&1073741824&&(pn(h),ne&&h.subtreeFlags&6&&(h.flags|=8192)):pn(h),null;case 24:return null;case 25:return null}throw Error(s(156,h.tag))}function IP(u,h){switch(r0(h),h.tag){case 1:return Pn(h.type)&&rd(),u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 3:return fo(),at(On),at(fn),g0(),u=h.flags,u&65536&&!(u&128)?(h.flags=u&-65537|128,h):null;case 5:return p0(h),null;case 13:if(at(St),u=h.memoizedState,u!==null&&u.dehydrated!==null){if(h.alternate===null)throw Error(s(340));so()}return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 19:return at(St),null;case 4:return fo(),null;case 10:return c0(h.type._context),null;case 22:case 23:return Z0(),null;case 24:return null;default:return null}}var Pd=!1,mn=!1,MP=typeof WeakSet=="function"?WeakSet:Set,Se=null;function po(u,h){var S=u.ref;if(S!==null)if(typeof S=="function")try{S(null)}catch(j){xt(u,h,j)}else S.current=null}function M0(u,h,S){try{S()}catch(j){xt(u,h,j)}}var B_=!1;function LP(u,h){for(H(u.containerInfo),Se=h;Se!==null;)if(u=Se,h=u.child,(u.subtreeFlags&1028)!==0&&h!==null)h.return=u,Se=h;else for(;Se!==null;){u=Se;try{var S=u.alternate;if(u.flags&1024)switch(u.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var j=S.memoizedProps,R=S.memoizedState,B=u.stateNode,Z=B.getSnapshotBeforeUpdate(u.elementType===u.type?j:Er(u.type,j),R);B.__reactInternalSnapshotBeforeUpdate=Z}break;case 3:ne&&Ku(u.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(ie){xt(u,u.return,ie)}if(h=u.sibling,h!==null){h.return=u.return,Se=h;break}Se=u.return}return S=B_,B_=!1,S}function tc(u,h,S){var j=h.updateQueue;if(j=j!==null?j.lastEffect:null,j!==null){var R=j=j.next;do{if((R.tag&u)===u){var B=R.destroy;R.destroy=void 0,B!==void 0&&M0(h,S,B)}R=R.next}while(R!==j)}}function Ad(u,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var S=h=h.next;do{if((S.tag&u)===u){var j=S.create;S.destroy=j()}S=S.next}while(S!==h)}}function L0(u){var h=u.ref;if(h!==null){var S=u.stateNode;switch(u.tag){case 5:u=$(S);break;default:u=S}typeof h=="function"?h(u):h.current=u}}function q_(u){var h=u.alternate;h!==null&&(u.alternate=null,q_(h)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(h=u.stateNode,h!==null&&ge(h)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function $_(u){return u.tag===5||u.tag===3||u.tag===4}function U_(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||$_(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function D0(u,h,S){var j=u.tag;if(j===5||j===6)u=u.stateNode,h?an(S,u,h):Un(S,u);else if(j!==4&&(u=u.child,u!==null))for(D0(u,h,S),u=u.sibling;u!==null;)D0(u,h,S),u=u.sibling}function F0(u,h,S){var j=u.tag;if(j===5||j===6)u=u.stateNode,h?Xt(S,u,h):qe(S,u);else if(j!==4&&(u=u.child,u!==null))for(F0(u,h,S),u=u.sibling;u!==null;)F0(u,h,S),u=u.sibling}var sn=null,kr=!1;function Qr(u,h,S){for(S=S.child;S!==null;)z0(u,h,S),S=S.sibling}function z0(u,h,S){if(Hr&&typeof Hr.onCommitFiberUnmount=="function")try{Hr.onCommitFiberUnmount(cd,S)}catch{}switch(S.tag){case 5:mn||po(S,h);case 6:if(ne){var j=sn,R=kr;sn=null,Qr(u,h,S),sn=j,kr=R,sn!==null&&(kr?wr(sn,S.stateNode):pi(sn,S.stateNode))}else Qr(u,h,S);break;case 18:ne&&sn!==null&&(kr?Vm(sn,S.stateNode):Hm(sn,S.stateNode));break;case 4:ne?(j=sn,R=kr,sn=S.stateNode.containerInfo,kr=!0,Qr(u,h,S),sn=j,kr=R):(ue&&(j=S.stateNode.containerInfo,R=Yu(j),Ll(j,R)),Qr(u,h,S));break;case 0:case 11:case 14:case 15:if(!mn&&(j=S.updateQueue,j!==null&&(j=j.lastEffect,j!==null))){R=j=j.next;do{var B=R,Z=B.destroy;B=B.tag,Z!==void 0&&(B&2||B&4)&&M0(S,h,Z),R=R.next}while(R!==j)}Qr(u,h,S);break;case 1:if(!mn&&(po(S,h),j=S.stateNode,typeof j.componentWillUnmount=="function"))try{j.props=S.memoizedProps,j.state=S.memoizedState,j.componentWillUnmount()}catch(ie){xt(S,h,ie)}Qr(u,h,S);break;case 21:Qr(u,h,S);break;case 22:S.mode&1?(mn=(j=mn)||S.memoizedState!==null,Qr(u,h,S),mn=j):Qr(u,h,S);break;default:Qr(u,h,S)}}function G_(u){var h=u.updateQueue;if(h!==null){u.updateQueue=null;var S=u.stateNode;S===null&&(S=u.stateNode=new MP),h.forEach(function(j){var R=HP.bind(null,u,j);S.has(j)||(S.add(j),j.then(R,R))})}}function jr(u,h){var S=h.deletions;if(S!==null)for(var j=0;j<S.length;j++){var R=S[j];try{var B=u,Z=h;if(ne){var ie=Z;e:for(;ie!==null;){switch(ie.tag){case 5:sn=ie.stateNode,kr=!1;break e;case 3:sn=ie.stateNode.containerInfo,kr=!0;break e;case 4:sn=ie.stateNode.containerInfo,kr=!0;break e}ie=ie.return}if(sn===null)throw Error(s(160));z0(B,Z,R),sn=null,kr=!1}else z0(B,Z,R);var fe=R.alternate;fe!==null&&(fe.return=null),R.return=null}catch(xe){xt(R,h,xe)}}if(h.subtreeFlags&12854)for(h=h.child;h!==null;)H_(h,u),h=h.sibling}function H_(u,h){var S=u.alternate,j=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:if(jr(h,u),Zr(u),j&4){try{tc(3,u,u.return),Ad(3,u)}catch(_e){xt(u,u.return,_e)}try{tc(5,u,u.return)}catch(_e){xt(u,u.return,_e)}}break;case 1:jr(h,u),Zr(u),j&512&&S!==null&&po(S,S.return);break;case 5:if(jr(h,u),Zr(u),j&512&&S!==null&&po(S,S.return),ne){if(u.flags&32){var R=u.stateNode;try{Gn(R)}catch(_e){xt(u,u.return,_e)}}if(j&4&&(R=u.stateNode,R!=null)){var B=u.memoizedProps;if(S=S!==null?S.memoizedProps:B,j=u.type,h=u.updateQueue,u.updateQueue=null,h!==null)try{dn(R,h,j,S,B,u)}catch(_e){xt(u,u.return,_e)}}}break;case 6:if(jr(h,u),Zr(u),j&4&&ne){if(u.stateNode===null)throw Error(s(162));R=u.stateNode,B=u.memoizedProps,S=S!==null?S.memoizedProps:B;try{et(R,S,B)}catch(_e){xt(u,u.return,_e)}}break;case 3:if(jr(h,u),Zr(u),j&4){if(ne&&se&&S!==null&&S.memoizedState.isDehydrated)try{Um(h.containerInfo)}catch(_e){xt(u,u.return,_e)}if(ue){R=h.containerInfo,B=h.pendingChildren;try{Ll(R,B)}catch(_e){xt(u,u.return,_e)}}}break;case 4:if(jr(h,u),Zr(u),j&4&&ue){B=u.stateNode,R=B.containerInfo,B=B.pendingChildren;try{Ll(R,B)}catch(_e){xt(u,u.return,_e)}}break;case 13:jr(h,u),Zr(u),R=u.child,R.flags&8192&&(B=R.memoizedState!==null,R.stateNode.isHidden=B,!B||R.alternate!==null&&R.alternate.memoizedState!==null||(V0=Qt())),j&4&&G_(u);break;case 22:var Z=S!==null&&S.memoizedState!==null;if(u.mode&1?(mn=(S=mn)||Z,jr(h,u),mn=S):jr(h,u),Zr(u),j&8192){if(S=u.memoizedState!==null,(u.stateNode.isHidden=S)&&!Z&&u.mode&1)for(Se=u,j=u.child;j!==null;){for(h=Se=j;Se!==null;){Z=Se;var ie=Z.child;switch(Z.tag){case 0:case 11:case 14:case 15:tc(4,Z,Z.return);break;case 1:po(Z,Z.return);var fe=Z.stateNode;if(typeof fe.componentWillUnmount=="function"){var xe=Z,ke=Z.return;try{var Me=xe;fe.props=Me.memoizedProps,fe.state=Me.memoizedState,fe.componentWillUnmount()}catch(_e){xt(xe,ke,_e)}}break;case 5:po(Z,Z.return);break;case 22:if(Z.memoizedState!==null){K_(h);continue}}ie!==null?(ie.return=Z,Se=ie):K_(h)}j=j.sibling}if(ne){e:if(j=null,ne)for(h=u;;){if(h.tag===5){if(j===null){j=h;try{R=h.stateNode,S?rs(R):is(h.stateNode,h.memoizedProps)}catch(_e){xt(u,u.return,_e)}}}else if(h.tag===6){if(j===null)try{B=h.stateNode,S?Il(B):Ml(B,h.memoizedProps)}catch(_e){xt(u,u.return,_e)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===u)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break e;for(;h.sibling===null;){if(h.return===null||h.return===u)break e;j===h&&(j=null),h=h.return}j===h&&(j=null),h.sibling.return=h.return,h=h.sibling}}}break;case 19:jr(h,u),Zr(u),j&4&&G_(u);break;case 21:break;default:jr(h,u),Zr(u)}}function Zr(u){var h=u.flags;if(h&2){try{if(ne){e:{for(var S=u.return;S!==null;){if($_(S)){var j=S;break e}S=S.return}throw Error(s(160))}switch(j.tag){case 5:var R=j.stateNode;j.flags&32&&(Gn(R),j.flags&=-33);var B=U_(u);F0(u,B,R);break;case 3:case 4:var Z=j.stateNode.containerInfo,ie=U_(u);D0(u,ie,Z);break;default:throw Error(s(161))}}}catch(fe){xt(u,u.return,fe)}u.flags&=-3}h&4096&&(u.flags&=-4097)}function DP(u,h,S){Se=u,V_(u)}function V_(u,h,S){for(var j=(u.mode&1)!==0;Se!==null;){var R=Se,B=R.child;if(R.tag===22&&j){var Z=R.memoizedState!==null||Pd;if(!Z){var ie=R.alternate,fe=ie!==null&&ie.memoizedState!==null||mn;ie=Pd;var xe=mn;if(Pd=Z,(mn=fe)&&!xe)for(Se=R;Se!==null;)Z=Se,fe=Z.child,Z.tag===22&&Z.memoizedState!==null?Y_(R):fe!==null?(fe.return=Z,Se=fe):Y_(R);for(;B!==null;)Se=B,V_(B),B=B.sibling;Se=R,Pd=ie,mn=xe}W_(u)}else R.subtreeFlags&8772&&B!==null?(B.return=R,Se=B):W_(u)}}function W_(u){for(;Se!==null;){var h=Se;if(h.flags&8772){var S=h.alternate;try{if(h.flags&8772)switch(h.tag){case 0:case 11:case 15:mn||Ad(5,h);break;case 1:var j=h.stateNode;if(h.flags&4&&!mn)if(S===null)j.componentDidMount();else{var R=h.elementType===h.type?S.memoizedProps:Er(h.type,S.memoizedProps);j.componentDidUpdate(R,S.memoizedState,j.__reactInternalSnapshotBeforeUpdate)}var B=h.updateQueue;B!==null&&X5(h,B,j);break;case 3:var Z=h.updateQueue;if(Z!==null){if(S=null,h.child!==null)switch(h.child.tag){case 5:S=$(h.child.stateNode);break;case 1:S=h.child.stateNode}X5(h,Z,S)}break;case 5:var ie=h.stateNode;S===null&&h.flags&4&&it(ie,h.type,h.memoizedProps,h);break;case 6:break;case 4:break;case 12:break;case 13:if(se&&h.memoizedState===null){var fe=h.alternate;if(fe!==null){var xe=fe.memoizedState;if(xe!==null){var ke=xe.dehydrated;ke!==null&&Gm(ke)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}mn||h.flags&512&&L0(h)}catch(Me){xt(h,h.return,Me)}}if(h===u){Se=null;break}if(S=h.sibling,S!==null){S.return=h.return,Se=S;break}Se=h.return}}function K_(u){for(;Se!==null;){var h=Se;if(h===u){Se=null;break}var S=h.sibling;if(S!==null){S.return=h.return,Se=S;break}Se=h.return}}function Y_(u){for(;Se!==null;){var h=Se;try{switch(h.tag){case 0:case 11:case 15:var S=h.return;try{Ad(4,h)}catch(fe){xt(h,S,fe)}break;case 1:var j=h.stateNode;if(typeof j.componentDidMount=="function"){var R=h.return;try{j.componentDidMount()}catch(fe){xt(h,R,fe)}}var B=h.return;try{L0(h)}catch(fe){xt(h,B,fe)}break;case 5:var Z=h.return;try{L0(h)}catch(fe){xt(h,Z,fe)}}}catch(fe){xt(h,h.return,fe)}if(h===u){Se=null;break}var ie=h.sibling;if(ie!==null){ie.return=h.return,Se=ie;break}Se=h.return}}var Rd=0,Id=1,Md=2,Ld=3,Dd=4;if(typeof Symbol=="function"&&Symbol.for){var nc=Symbol.for;Rd=nc("selector.component"),Id=nc("selector.has_pseudo_class"),Md=nc("selector.role"),Ld=nc("selector.test_id"),Dd=nc("selector.text")}function B0(u){var h=ce(u);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(s(364));return h}if(u=we(u),u===null)throw Error(s(362));return u.stateNode.current}function q0(u,h){switch(h.$$typeof){case Rd:if(u.type===h.value)return!0;break;case Id:e:{h=h.value,u=[u,0];for(var S=0;S<u.length;){var j=u[S++],R=u[S++],B=h[R];if(j.tag!==5||!Ce(j)){for(;B!=null&&q0(j,B);)R++,B=h[R];if(R===h.length){h=!0;break e}else for(j=j.child;j!==null;)u.push(j,R),j=j.sibling}}h=!1}return h;case Md:if(u.tag===5&&Ae(u.stateNode,h.value))return!0;break;case Dd:if((u.tag===5||u.tag===6)&&(u=je(u),u!==null&&0<=u.indexOf(h.value)))return!0;break;case Ld:if(u.tag===5&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function $0(u){switch(u.$$typeof){case Rd:return"<"+(A(u.value)||"Unknown")+">";case Id:return":has("+($0(u)||"")+")";case Md:return'[role="'+u.value+'"]';case Dd:return'"'+u.value+'"';case Ld:return'[data-testname="'+u.value+'"]';default:throw Error(s(365))}}function X_(u,h){var S=[];u=[u,0];for(var j=0;j<u.length;){var R=u[j++],B=u[j++],Z=h[B];if(R.tag!==5||!Ce(R)){for(;Z!=null&&q0(R,Z);)B++,Z=h[B];if(B===h.length)S.push(R);else for(R=R.child;R!==null;)u.push(R,B),R=R.sibling}}return S}function U0(u,h){if(!ye)throw Error(s(363));u=B0(u),u=X_(u,h),h=[],u=Array.from(u);for(var S=0;S<u.length;){var j=u[S++];if(j.tag===5)Ce(j)||h.push(j.stateNode);else for(j=j.child;j!==null;)u.push(j),j=j.sibling}return h}var FP=Math.ceil,Fd=o.ReactCurrentDispatcher,G0=o.ReactCurrentOwner,Dt=o.ReactCurrentBatchConfig,Ge=0,Jt=null,Bt=null,on=0,Vn=0,mo=Gr(0),Gt=0,rc=null,ds=0,zd=0,H0=0,ic=null,Rn=null,V0=0,W0=1/0,wi=null;function go(){W0=Qt()+500}var Bd=!1,K0=null,na=null,qd=!1,ra=null,$d=0,ac=0,Y0=null,Ud=-1,Gd=0;function gn(){return Ge&6?Qt():Ud!==-1?Ud:Ud=Qt()}function ia(u){return u.mode&1?Ge&2&&on!==0?on&-on:bP.transition!==null?(Gd===0&&(Gd=I5()),Gd):(u=Qe,u!==0?u:Oe()):1}function cr(u,h,S,j){if(50<ac)throw ac=0,Y0=null,Error(s(185));Ul(u,S,j),(!(Ge&2)||u!==Jt)&&(u===Jt&&(!(Ge&2)&&(zd|=S),Gt===4&&aa(u,on)),In(u,j),S===1&&Ge===0&&!(h.mode&1)&&(go(),ud&&Vr()))}function In(u,h){var S=u.callbackNode;dP(u,h);var j=ld(u,u===Jt?on:0);if(j===0)S!==null&&L5(S),u.callbackNode=null,u.callbackPriority=0;else if(h=j&-j,u.callbackPriority!==h){if(S!=null&&L5(S),h===1)u.tag===0?xP(Z_.bind(null,u)):D5(Z_.bind(null,u)),re?he(function(){!(Ge&6)&&Vr()}):Zm(Jm,Vr),S=null;else{switch(M5(j)){case 1:S=Jm;break;case 4:S=mP;break;case 16:S=e0;break;case 536870912:S=gP;break;default:S=e0}S=o3(S,Q_.bind(null,u))}u.callbackPriority=h,u.callbackNode=S}}function Q_(u,h){if(Ud=-1,Gd=0,Ge&6)throw Error(s(327));var S=u.callbackNode;if(ps()&&u.callbackNode!==S)return null;var j=ld(u,u===Jt?on:0);if(j===0)return null;if(j&30||j&u.expiredLanes||h)h=Hd(u,j);else{h=j;var R=Ge;Ge|=2;var B=t3();(Jt!==u||on!==h)&&(wi=null,go(),fs(u,h));do try{qP();break}catch(ie){e3(u,ie)}while(1);l0(),Fd.current=B,Ge=R,Bt!==null?h=0:(Jt=null,on=0,h=Gt)}if(h!==0){if(h===2&&(R=Ym(u),R!==0&&(j=R,h=X0(u,R))),h===1)throw S=rc,fs(u,0),aa(u,j),In(u,Qt()),S;if(h===6)aa(u,j);else{if(R=u.current.alternate,!(j&30)&&!zP(R)&&(h=Hd(u,j),h===2&&(B=Ym(u),B!==0&&(j=B,h=X0(u,B))),h===1))throw S=rc,fs(u,0),aa(u,j),In(u,Qt()),S;switch(u.finishedWork=R,u.finishedLanes=j,h){case 0:case 1:throw Error(s(345));case 2:hs(u,Rn,wi);break;case 3:if(aa(u,j),(j&130023424)===j&&(h=V0+500-Qt(),10<h)){if(ld(u,0)!==0)break;if(R=u.suspendedLanes,(R&j)!==j){gn(),u.pingedLanes|=u.suspendedLanes&R;break}u.timeoutHandle=U(hs.bind(null,u,Rn,wi),h);break}hs(u,Rn,wi);break;case 4:if(aa(u,j),(j&4194240)===j)break;for(h=u.eventTimes,R=-1;0<j;){var Z=31-_r(j);B=1<<Z,Z=h[Z],Z>R&&(R=Z),j&=~B}if(j=R,j=Qt()-j,j=(120>j?120:480>j?480:1080>j?1080:1920>j?1920:3e3>j?3e3:4320>j?4320:1960*FP(j/1960))-j,10<j){u.timeoutHandle=U(hs.bind(null,u,Rn,wi),j);break}hs(u,Rn,wi);break;case 5:hs(u,Rn,wi);break;default:throw Error(s(329))}}}return In(u,Qt()),u.callbackNode===S?Q_.bind(null,u):null}function X0(u,h){var S=ic;return u.current.memoizedState.isDehydrated&&(fs(u,h).flags|=256),u=Hd(u,h),u!==2&&(h=Rn,Rn=S,h!==null&&Q0(h)),u}function Q0(u){Rn===null?Rn=u:Rn.push.apply(Rn,u)}function zP(u){for(var h=u;;){if(h.flags&16384){var S=h.updateQueue;if(S!==null&&(S=S.stores,S!==null))for(var j=0;j<S.length;j++){var R=S[j],B=R.getSnapshot;R=R.value;try{if(!Nr(B(),R))return!1}catch{return!1}}}if(S=h.child,h.subtreeFlags&16384&&S!==null)S.return=h,h=S;else{if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function aa(u,h){for(h&=~H0,h&=~zd,u.suspendedLanes|=h,u.pingedLanes&=~h,u=u.expirationTimes;0<h;){var S=31-_r(h),j=1<<S;u[S]=-1,h&=~j}}function Z_(u){if(Ge&6)throw Error(s(327));ps();var h=ld(u,0);if(!(h&1))return In(u,Qt()),null;var S=Hd(u,h);if(u.tag!==0&&S===2){var j=Ym(u);j!==0&&(h=j,S=X0(u,j))}if(S===1)throw S=rc,fs(u,0),aa(u,h),In(u,Qt()),S;if(S===6)throw Error(s(345));return u.finishedWork=u.current.alternate,u.finishedLanes=h,hs(u,Rn,wi),In(u,Qt()),null}function J_(u){ra!==null&&ra.tag===0&&!(Ge&6)&&ps();var h=Ge;Ge|=1;var S=Dt.transition,j=Qe;try{if(Dt.transition=null,Qe=1,u)return u()}finally{Qe=j,Dt.transition=S,Ge=h,!(Ge&6)&&Vr()}}function Z0(){Vn=mo.current,at(mo)}function fs(u,h){u.finishedWork=null,u.finishedLanes=0;var S=u.timeoutHandle;if(S!==te&&(u.timeoutHandle=te,J(S)),Bt!==null)for(S=Bt.return;S!==null;){var j=S;switch(r0(j),j.tag){case 1:j=j.type.childContextTypes,j!=null&&rd();break;case 3:fo(),at(On),at(fn),g0();break;case 5:p0(j);break;case 4:fo();break;case 13:at(St);break;case 19:at(St);break;case 10:c0(j.type._context);break;case 22:case 23:Z0()}S=S.return}if(Jt=u,Bt=u=sa(u.current,null),on=Vn=h,Gt=0,rc=null,H0=zd=ds=0,Rn=ic=null,cs!==null){for(h=0;h<cs.length;h++)if(S=cs[h],j=S.interleaved,j!==null){S.interleaved=null;var R=j.next,B=S.pending;if(B!==null){var Z=B.next;B.next=R,j.next=Z}S.pending=j}cs=null}return u}function e3(u,h){do{var S=Bt;try{if(l0(),wd.current=Ed,_d){for(var j=Et.memoizedState;j!==null;){var R=j.queue;R!==null&&(R.pending=null),j=j.next}_d=!1}if(us=0,Zt=Ut=Et=null,Kl=!1,Yl=0,G0.current=null,S===null||S.return===null){Gt=1,rc=h,Bt=null;break}e:{var B=u,Z=S.return,ie=S,fe=h;if(h=on,ie.flags|=32768,fe!==null&&typeof fe=="object"&&typeof fe.then=="function"){var xe=fe,ke=ie,Me=ke.tag;if(!(ke.mode&1)&&(Me===0||Me===11||Me===15)){var _e=ke.alternate;_e?(ke.updateQueue=_e.updateQueue,ke.memoizedState=_e.memoizedState,ke.lanes=_e.lanes):(ke.updateQueue=null,ke.memoizedState=null)}var ft=E_(Z);if(ft!==null){ft.flags&=-257,k_(ft,Z,ie,B,h),ft.mode&1&&S_(B,xe,h),h=ft,fe=xe;var lt=h.updateQueue;if(lt===null){var Mn=new Set;Mn.add(fe),h.updateQueue=Mn}else lt.add(fe);break e}else{if(!(h&1)){S_(B,xe,h),J0();break e}fe=Error(s(426))}}else if(yt&&ie.mode&1){var _i=E_(Z);if(_i!==null){!(_i.flags&65536)&&(_i.flags|=256),k_(_i,Z,ie,B,h),s0(ho(fe,ie));break e}}B=fe=ho(fe,ie),Gt!==4&&(Gt=2),ic===null?ic=[B]:ic.push(B),B=Z;do{switch(B.tag){case 3:B.flags|=65536,h&=-h,B.lanes|=h;var le=__(B,fe,h);Y5(B,le);break e;case 1:ie=fe;var ae=B.type,pe=B.stateNode;if(!(B.flags&128)&&(typeof ae.getDerivedStateFromError=="function"||pe!==null&&typeof pe.componentDidCatch=="function"&&(na===null||!na.has(pe)))){B.flags|=65536,h&=-h,B.lanes|=h;var Ne=N_(B,ie,h);Y5(B,Ne);break e}}B=B.return}while(B!==null)}r3(S)}catch(Pe){h=Pe,Bt===S&&S!==null&&(Bt=S=S.return);continue}break}while(1)}function t3(){var u=Fd.current;return Fd.current=Ed,u===null?Ed:u}function J0(){(Gt===0||Gt===3||Gt===2)&&(Gt=4),Jt===null||!(ds&268435455)&&!(zd&268435455)||aa(Jt,on)}function Hd(u,h){var S=Ge;Ge|=2;var j=t3();(Jt!==u||on!==h)&&(wi=null,fs(u,h));do try{BP();break}catch(R){e3(u,R)}while(1);if(l0(),Ge=S,Fd.current=j,Bt!==null)throw Error(s(261));return Jt=null,on=0,Gt}function BP(){for(;Bt!==null;)n3(Bt)}function qP(){for(;Bt!==null&&!hP();)n3(Bt)}function n3(u){var h=s3(u.alternate,u,Vn);u.memoizedProps=u.pendingProps,h===null?r3(u):Bt=h,G0.current=null}function r3(u){var h=u;do{var S=h.alternate;if(u=h.return,h.flags&32768){if(S=IP(S,h),S!==null){S.flags&=32767,Bt=S;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{Gt=6,Bt=null;return}}else if(S=RP(S,h,Vn),S!==null){Bt=S;return}if(h=h.sibling,h!==null){Bt=h;return}Bt=h=u}while(h!==null);Gt===0&&(Gt=5)}function hs(u,h,S){var j=Qe,R=Dt.transition;try{Dt.transition=null,Qe=1,$P(u,h,S,j)}finally{Dt.transition=R,Qe=j}return null}function $P(u,h,S,j){do ps();while(ra!==null);if(Ge&6)throw Error(s(327));S=u.finishedWork;var R=u.finishedLanes;if(S===null)return null;if(u.finishedWork=null,u.finishedLanes=0,S===u.current)throw Error(s(177));u.callbackNode=null,u.callbackPriority=0;var B=S.lanes|S.childLanes;if(fP(u,B),u===Jt&&(Bt=Jt=null,on=0),!(S.subtreeFlags&2064)&&!(S.flags&2064)||qd||(qd=!0,o3(e0,function(){return ps(),null})),B=(S.flags&15990)!==0,S.subtreeFlags&15990||B){B=Dt.transition,Dt.transition=null;var Z=Qe;Qe=1;var ie=Ge;Ge|=4,G0.current=null,LP(u,S),H_(S,u),q(u.containerInfo),u.current=S,DP(S),pP(),Ge=ie,Qe=Z,Dt.transition=B}else u.current=S;if(qd&&(qd=!1,ra=u,$d=R),B=u.pendingLanes,B===0&&(na=null),vP(S.stateNode),In(u,Qt()),h!==null)for(j=u.onRecoverableError,S=0;S<h.length;S++)R=h[S],j(R.value,{componentStack:R.stack,digest:R.digest});if(Bd)throw Bd=!1,u=K0,K0=null,u;return $d&1&&u.tag!==0&&ps(),B=u.pendingLanes,B&1?u===Y0?ac++:(ac=0,Y0=u):ac=0,Vr(),null}function ps(){if(ra!==null){var u=M5($d),h=Dt.transition,S=Qe;try{if(Dt.transition=null,Qe=16>u?16:u,ra===null)var j=!1;else{if(u=ra,ra=null,$d=0,Ge&6)throw Error(s(331));var R=Ge;for(Ge|=4,Se=u.current;Se!==null;){var B=Se,Z=B.child;if(Se.flags&16){var ie=B.deletions;if(ie!==null){for(var fe=0;fe<ie.length;fe++){var xe=ie[fe];for(Se=xe;Se!==null;){var ke=Se;switch(ke.tag){case 0:case 11:case 15:tc(8,ke,B)}var Me=ke.child;if(Me!==null)Me.return=ke,Se=Me;else for(;Se!==null;){ke=Se;var _e=ke.sibling,ft=ke.return;if(q_(ke),ke===xe){Se=null;break}if(_e!==null){_e.return=ft,Se=_e;break}Se=ft}}}var lt=B.alternate;if(lt!==null){var Mn=lt.child;if(Mn!==null){lt.child=null;do{var _i=Mn.sibling;Mn.sibling=null,Mn=_i}while(Mn!==null)}}Se=B}}if(B.subtreeFlags&2064&&Z!==null)Z.return=B,Se=Z;else e:for(;Se!==null;){if(B=Se,B.flags&2048)switch(B.tag){case 0:case 11:case 15:tc(9,B,B.return)}var le=B.sibling;if(le!==null){le.return=B.return,Se=le;break e}Se=B.return}}var ae=u.current;for(Se=ae;Se!==null;){Z=Se;var pe=Z.child;if(Z.subtreeFlags&2064&&pe!==null)pe.return=Z,Se=pe;else e:for(Z=ae;Se!==null;){if(ie=Se,ie.flags&2048)try{switch(ie.tag){case 0:case 11:case 15:Ad(9,ie)}}catch(Pe){xt(ie,ie.return,Pe)}if(ie===Z){Se=null;break e}var Ne=ie.sibling;if(Ne!==null){Ne.return=ie.return,Se=Ne;break e}Se=ie.return}}if(Ge=R,Vr(),Hr&&typeof Hr.onPostCommitFiberRoot=="function")try{Hr.onPostCommitFiberRoot(cd,u)}catch{}j=!0}return j}finally{Qe=S,Dt.transition=h}}return!1}function i3(u,h,S){h=ho(S,h),h=__(u,h,1),u=ta(u,h,1),h=gn(),u!==null&&(Ul(u,1,h),In(u,h))}function xt(u,h,S){if(u.tag===3)i3(u,u,S);else for(;h!==null;){if(h.tag===3){i3(h,u,S);break}else if(h.tag===1){var j=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof j.componentDidCatch=="function"&&(na===null||!na.has(j))){u=ho(S,u),u=N_(h,u,1),h=ta(h,u,1),u=gn(),h!==null&&(Ul(h,1,u),In(h,u));break}}h=h.return}}function UP(u,h,S){var j=u.pingCache;j!==null&&j.delete(h),h=gn(),u.pingedLanes|=u.suspendedLanes&S,Jt===u&&(on&S)===S&&(Gt===4||Gt===3&&(on&130023424)===on&&500>Qt()-V0?fs(u,0):H0|=S),In(u,h)}function a3(u,h){h===0&&(u.mode&1?(h=od,od<<=1,!(od&130023424)&&(od=4194304)):h=1);var S=gn();u=Wr(u,h),u!==null&&(Ul(u,h,S),In(u,S))}function GP(u){var h=u.memoizedState,S=0;h!==null&&(S=h.retryLane),a3(u,S)}function HP(u,h){var S=0;switch(u.tag){case 13:var j=u.stateNode,R=u.memoizedState;R!==null&&(S=R.retryLane);break;case 19:j=u.stateNode;break;default:throw Error(s(314))}j!==null&&j.delete(h),a3(u,S)}var s3;s3=function(u,h,S){if(u!==null)if(u.memoizedProps!==h.pendingProps||On.current)An=!0;else{if(!(u.lanes&S)&&!(h.flags&128))return An=!1,AP(u,h,S);An=!!(u.flags&131072)}else An=!1,yt&&h.flags&1048576&&F5(h,fd,h.index);switch(h.lanes=0,h.tag){case 2:var j=h.type;Cd(u,h),u=h.pendingProps;var R=ro(h,fn.current);co(h,S),R=x0(null,h,j,u,R,S);var B=b0();return h.flags|=1,typeof R=="object"&&R!==null&&typeof R.render=="function"&&R.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,Pn(j)?(B=!0,ad(h)):B=!1,h.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,f0(h),R.updater=kd,h.stateNode=R,R._reactInternals=h,k0(h,j,u,S),h=O0(null,h,j,!0,B,S)):(h.tag=0,yt&&B&&n0(h),Nn(null,h,R,S),h=h.child),h;case 16:j=h.elementType;e:{switch(Cd(u,h),u=h.pendingProps,R=j._init,j=R(j._payload),h.type=j,R=h.tag=WP(j),u=Er(j,u),R){case 0:h=T0(null,h,j,u,S);break e;case 1:h=A_(null,h,j,u,S);break e;case 11:h=j_(null,h,j,u,S);break e;case 14:h=C_(null,h,j,Er(j.type,u),S);break e}throw Error(s(306,j,""))}return h;case 0:return j=h.type,R=h.pendingProps,R=h.elementType===j?R:Er(j,R),T0(u,h,j,R,S);case 1:return j=h.type,R=h.pendingProps,R=h.elementType===j?R:Er(j,R),A_(u,h,j,R,S);case 3:e:{if(R_(h),u===null)throw Error(s(387));j=h.pendingProps,B=h.memoizedState,R=B.element,K5(u,h),xd(h,j,null,S);var Z=h.memoizedState;if(j=Z.element,se&&B.isDehydrated)if(B={element:j,isDehydrated:!1,cache:Z.cache,pendingSuspenseBoundaries:Z.pendingSuspenseBoundaries,transitions:Z.transitions},h.updateQueue.baseState=B,h.memoizedState=B,h.flags&256){R=ho(Error(s(423)),h),h=I_(u,h,j,S,R);break e}else if(j!==R){R=ho(Error(s(424)),h),h=I_(u,h,j,S,R);break e}else for(se&&(ar=Fm(h.stateNode.containerInfo),Hn=h,yt=!0,Sr=null,Gl=!1),S=H5(h,null,j,S),h.child=S;S;)S.flags=S.flags&-3|4096,S=S.sibling;else{if(so(),j===R){h=bi(u,h,S);break e}Nn(u,h,j,S)}h=h.child}return h;case 5:return Q5(h),u===null&&a0(h),j=h.type,R=h.pendingProps,B=u!==null?u.memoizedProps:null,Z=R.children,ee(j,R)?Z=null:B!==null&&ee(j,B)&&(h.flags|=32),P_(u,h),Nn(u,h,Z,S),h.child;case 6:return u===null&&a0(h),null;case 13:return M_(u,h,S);case 4:return h0(h,h.stateNode.containerInfo),j=h.pendingProps,u===null?h.child=oo(h,null,j,S):Nn(u,h,j,S),h.child;case 11:return j=h.type,R=h.pendingProps,R=h.elementType===j?R:Er(j,R),j_(u,h,j,R,S);case 7:return Nn(u,h,h.pendingProps,S),h.child;case 8:return Nn(u,h,h.pendingProps.children,S),h.child;case 12:return Nn(u,h,h.pendingProps.children,S),h.child;case 10:e:{if(j=h.type._context,R=h.pendingProps,B=h.memoizedProps,Z=R.value,V5(h,j,Z),B!==null)if(Nr(B.value,Z)){if(B.children===R.children&&!On.current){h=bi(u,h,S);break e}}else for(B=h.child,B!==null&&(B.return=h);B!==null;){var ie=B.dependencies;if(ie!==null){Z=B.child;for(var fe=ie.firstContext;fe!==null;){if(fe.context===j){if(B.tag===1){fe=xi(-1,S&-S),fe.tag=2;var xe=B.updateQueue;if(xe!==null){xe=xe.shared;var ke=xe.pending;ke===null?fe.next=fe:(fe.next=ke.next,ke.next=fe),xe.pending=fe}}B.lanes|=S,fe=B.alternate,fe!==null&&(fe.lanes|=S),u0(B.return,S,h),ie.lanes|=S;break}fe=fe.next}}else if(B.tag===10)Z=B.type===h.type?null:B.child;else if(B.tag===18){if(Z=B.return,Z===null)throw Error(s(341));Z.lanes|=S,ie=Z.alternate,ie!==null&&(ie.lanes|=S),u0(Z,S,h),Z=B.sibling}else Z=B.child;if(Z!==null)Z.return=B;else for(Z=B;Z!==null;){if(Z===h){Z=null;break}if(B=Z.sibling,B!==null){B.return=Z.return,Z=B;break}Z=Z.return}B=Z}Nn(u,h,R.children,S),h=h.child}return h;case 9:return R=h.type,j=h.pendingProps.children,co(h,S),R=sr(R),j=j(R),h.flags|=1,Nn(u,h,j,S),h.child;case 14:return j=h.type,R=Er(j,h.pendingProps),R=Er(j.type,R),C_(u,h,j,R,S);case 15:return T_(u,h,h.type,h.pendingProps,S);case 17:return j=h.type,R=h.pendingProps,R=h.elementType===j?R:Er(j,R),Cd(u,h),h.tag=1,Pn(j)?(u=!0,ad(h)):u=!1,co(h,S),b_(h,j,R),k0(h,j,R,S),O0(null,h,j,!0,u,S);case 19:return D_(u,h,S);case 22:return O_(u,h,S)}throw Error(s(156,h.tag))};function o3(u,h){return Zm(u,h)}function VP(u,h,S,j){this.tag=u,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=j,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ur(u,h,S,j){return new VP(u,h,S,j)}function eg(u){return u=u.prototype,!(!u||!u.isReactComponent)}function WP(u){if(typeof u=="function")return eg(u)?1:0;if(u!=null){if(u=u.$$typeof,u===y)return 11;if(u===_)return 14}return 2}function sa(u,h){var S=u.alternate;return S===null?(S=ur(u.tag,h,u.key,u.mode),S.elementType=u.elementType,S.type=u.type,S.stateNode=u.stateNode,S.alternate=u,u.alternate=S):(S.pendingProps=h,S.type=u.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=u.flags&14680064,S.childLanes=u.childLanes,S.lanes=u.lanes,S.child=u.child,S.memoizedProps=u.memoizedProps,S.memoizedState=u.memoizedState,S.updateQueue=u.updateQueue,h=u.dependencies,S.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},S.sibling=u.sibling,S.index=u.index,S.ref=u.ref,S}function Vd(u,h,S,j,R,B){var Z=2;if(j=u,typeof u=="function")eg(u)&&(Z=1);else if(typeof u=="string")Z=5;else e:switch(u){case f:return ms(S.children,R,B,h);case p:Z=8,R|=8;break;case m:return u=ur(12,S,h,R|2),u.elementType=m,u.lanes=B,u;case N:return u=ur(13,S,h,R),u.elementType=N,u.lanes=B,u;case v:return u=ur(19,S,h,R),u.elementType=v,u.lanes=B,u;case w:return Wd(S,R,B,h);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case g:Z=10;break e;case b:Z=9;break e;case y:Z=11;break e;case _:Z=14;break e;case x:Z=16,j=null;break e}throw Error(s(130,u==null?u:typeof u,""))}return h=ur(Z,S,h,R),h.elementType=u,h.type=j,h.lanes=B,h}function ms(u,h,S,j){return u=ur(7,u,j,h),u.lanes=S,u}function Wd(u,h,S,j){return u=ur(22,u,j,h),u.elementType=w,u.lanes=S,u.stateNode={isHidden:!1},u}function tg(u,h,S){return u=ur(6,u,null,h),u.lanes=S,u}function ng(u,h,S){return h=ur(4,u.children!==null?u.children:[],u.key,h),h.lanes=S,h.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},h}function KP(u,h,S,j,R){this.tag=h,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=te,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xm(0),this.expirationTimes=Xm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xm(0),this.identifierPrefix=j,this.onRecoverableError=R,se&&(this.mutableSourceEagerHydrationData=null)}function l3(u,h,S,j,R,B,Z,ie,fe){return u=new KP(u,h,S,ie,fe),h===1?(h=1,B===!0&&(h|=8)):h=0,B=ur(3,null,null,h),u.current=B,B.stateNode=u,B.memoizedState={element:j,isDehydrated:S,cache:null,transitions:null,pendingSuspenseBoundaries:null},f0(B),u}function c3(u){if(!u)return Ji;u=u._reactInternals;e:{if(L(u)!==u||u.tag!==1)throw Error(s(170));var h=u;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(Pn(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(s(171))}if(u.tag===1){var S=u.type;if(Pn(S))return A5(u,S,h)}return h}function u3(u){var h=u._reactInternals;if(h===void 0)throw typeof u.render=="function"?Error(s(188)):(u=Object.keys(u).join(","),Error(s(268,u)));return u=O(h),u===null?null:u.stateNode}function d3(u,h){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var S=u.retryLane;u.retryLane=S!==0&&S<h?S:h}}function Kd(u,h){d3(u,h),(u=u.alternate)&&d3(u,h)}function YP(u){return u=O(u),u===null?null:u.stateNode}function XP(){return null}return n.attemptContinuousHydration=function(u){if(u.tag===13){var h=Wr(u,134217728);if(h!==null){var S=gn();cr(h,u,134217728,S)}Kd(u,134217728)}},n.attemptDiscreteHydration=function(u){if(u.tag===13){var h=Wr(u,1);if(h!==null){var S=gn();cr(h,u,1,S)}Kd(u,1)}},n.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var h=ia(u),S=Wr(u,h);if(S!==null){var j=gn();cr(S,u,h,j)}Kd(u,h)}},n.attemptSynchronousHydration=function(u){switch(u.tag){case 3:var h=u.stateNode;if(h.current.memoizedState.isDehydrated){var S=$l(h.pendingLanes);S!==0&&(Qm(h,S|1),In(h,Qt()),!(Ge&6)&&(go(),Vr()))}break;case 13:J_(function(){var j=Wr(u,1);if(j!==null){var R=gn();cr(j,u,1,R)}}),Kd(u,1)}},n.batchedUpdates=function(u,h){var S=Ge;Ge|=1;try{return u(h)}finally{Ge=S,Ge===0&&(go(),ud&&Vr())}},n.createComponentSelector=function(u){return{$$typeof:Rd,value:u}},n.createContainer=function(u,h,S,j,R,B,Z){return l3(u,h,!1,null,S,j,R,B,Z)},n.createHasPseudoClassSelector=function(u){return{$$typeof:Id,value:u}},n.createHydrationContainer=function(u,h,S,j,R,B,Z,ie,fe){return u=l3(S,j,!0,u,R,B,Z,ie,fe),u.context=c3(null),S=u.current,j=gn(),R=ia(S),B=xi(j,R),B.callback=h??null,ta(S,B,R),u.current.lanes=R,Ul(u,R,j),In(u,j),u},n.createPortal=function(u,h,S){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:j==null?null:""+j,children:u,containerInfo:h,implementation:S}},n.createRoleSelector=function(u){return{$$typeof:Md,value:u}},n.createTestNameSelector=function(u){return{$$typeof:Ld,value:u}},n.createTextSelector=function(u){return{$$typeof:Dd,value:u}},n.deferredUpdates=function(u){var h=Qe,S=Dt.transition;try{return Dt.transition=null,Qe=16,u()}finally{Qe=h,Dt.transition=S}},n.discreteUpdates=function(u,h,S,j,R){var B=Qe,Z=Dt.transition;try{return Dt.transition=null,Qe=1,u(h,S,j,R)}finally{Qe=B,Dt.transition=Z,Ge===0&&go()}},n.findAllNodes=U0,n.findBoundingRects=function(u,h){if(!ye)throw Error(s(363));h=U0(u,h),u=[];for(var S=0;S<h.length;S++)u.push(me(h[S]));for(h=u.length-1;0<h;h--){S=u[h];for(var j=S.x,R=j+S.width,B=S.y,Z=B+S.height,ie=h-1;0<=ie;ie--)if(h!==ie){var fe=u[ie],xe=fe.x,ke=xe+fe.width,Me=fe.y,_e=Me+fe.height;if(j>=xe&&B>=Me&&R<=ke&&Z<=_e){u.splice(h,1);break}else if(j!==xe||S.width!==fe.width||_e<B||Me>Z){if(!(B!==Me||S.height!==fe.height||ke<j||xe>R)){xe>j&&(fe.width+=xe-j,fe.x=j),ke<R&&(fe.width=R-xe),u.splice(h,1);break}}else{Me>B&&(fe.height+=Me-B,fe.y=B),_e<Z&&(fe.height=Z-Me),u.splice(h,1);break}}}return u},n.findHostInstance=u3,n.findHostInstanceWithNoPortals=function(u){return u=C(u),u=u!==null?M(u):null,u===null?null:u.stateNode},n.findHostInstanceWithWarning=function(u){return u3(u)},n.flushControlled=function(u){var h=Ge;Ge|=1;var S=Dt.transition,j=Qe;try{Dt.transition=null,Qe=1,u()}finally{Qe=j,Dt.transition=S,Ge=h,Ge===0&&(go(),Vr())}},n.flushPassiveEffects=ps,n.flushSync=J_,n.focusWithin=function(u,h){if(!ye)throw Error(s(363));for(u=B0(u),h=X_(u,h),h=Array.from(h),u=0;u<h.length;){var S=h[u++];if(!Ce(S)){if(S.tag===5&&vt(S.stateNode))return!0;for(S=S.child;S!==null;)h.push(S),S=S.sibling}}return!1},n.getCurrentUpdatePriority=function(){return Qe},n.getFindAllNodesFailureDescription=function(u,h){if(!ye)throw Error(s(363));var S=0,j=[];u=[B0(u),0];for(var R=0;R<u.length;){var B=u[R++],Z=u[R++],ie=h[Z];if((B.tag!==5||!Ce(B))&&(q0(B,ie)&&(j.push($0(ie)),Z++,Z>S&&(S=Z)),Z<h.length))for(B=B.child;B!==null;)u.push(B,Z),B=B.sibling}if(S<h.length){for(u=[];S<h.length;S++)u.push($0(h[S]));return`findAllNodes was able to match part of the selector:
  `+(j.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},n.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return $(u.child.stateNode);default:return u.child.stateNode}},n.injectIntoDevTools=function(u){if(u={bundleType:u.bundleType,version:u.version,rendererPackageName:u.rendererPackageName,rendererConfig:u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:YP,findFiberByHostInstance:u.findFiberByHostInstance||XP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)u=!0;else{try{cd=h.inject(u),Hr=h}catch{}u=!!h.checkDCE}}return u},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(u,h,S,j){if(!ye)throw Error(s(363));u=U0(u,h);var R=Pt(u,S,j).disconnect;return{disconnect:function(){R()}}},n.registerMutableSourceForHydration=function(u,h){var S=h._getVersion;S=S(h._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[h,S]:u.mutableSourceEagerHydrationData.push(h,S)},n.runWithPriority=function(u,h){var S=Qe;try{return Qe=u,h()}finally{Qe=S}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(u,h,S,j){var R=h.current,B=gn(),Z=ia(R);return S=c3(S),h.context===null?h.context=S:h.pendingContext=S,h=xi(B,Z),h.payload={element:u},j=j===void 0?null:j,j!==null&&(h.callback=j),u=ta(R,h,Z),u!==null&&(cr(u,R,Z,B),yd(u,R,Z)),Z},n};JO.exports=Kne;var Yne=JO.exports;const Xne=dl(Yne);var eP={exports:{}},to={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */to.ConcurrentRoot=1;to.ContinuousEventPriority=4;to.DefaultEventPriority=16;to.DiscreteEventPriority=1;to.IdleEventPriority=536870912;to.LegacyRoot=0;eP.exports=to;var tP=eP.exports;const Ok={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let Pk=!1,Ak=!1;const T5=".react-konva-event",Qne=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,Zne=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,Jne={};function Om(e,t,n=Jne){if(!Pk&&"zIndex"in t&&(console.warn(Zne),Pk=!0),!Ak&&t.draggable){var r=t.x!==void 0||t.y!==void 0,i=t.onDragEnd||t.onDragMove;r&&!i&&(console.warn(Qne),Ak=!0)}for(var a in n)if(!Ok[a]){var s=a.slice(0,2)==="on",o=n[a]!==t[a];if(s&&o){var c=a.substr(2).toLowerCase();c.substr(0,7)==="content"&&(c="content"+c.substr(7,1).toUpperCase()+c.substr(8)),e.off(c,n[a])}var d=!t.hasOwnProperty(a);d&&e.setAttr(a,void 0)}var f=t._useStrictMode,p={},m=!1;const g={};for(var a in t)if(!Ok[a]){var s=a.slice(0,2)==="on",b=n[a]!==t[a];if(s&&b){var c=a.substr(2).toLowerCase();c.substr(0,7)==="content"&&(c="content"+c.substr(7,1).toUpperCase()+c.substr(8)),t[a]&&(g[c]=t[a])}!s&&(t[a]!==n[a]||f&&t[a]!==e.getAttr(a))&&(m=!0,p[a]=t[a])}m&&(e.setAttrs(p),ns(e));for(var c in g)e.on(c+T5,g[c])}function ns(e){if(!Be.Konva.autoDrawEnabled){var t=e.getLayer()||e.getStage();t&&t.batchDraw()}}const nP={},ere={};ju.Node.prototype._applyProps=Om;function tre(e,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}e.add(t),ns(e)}function nre(e,t,n){let r=ju[e];r||(console.error(`Konva has no node with the type ${e}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${e}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),r=ju.Group);const i={},a={};for(var s in t){var o=s.slice(0,2)==="on";o?a[s]=t[s]:i[s]=t[s]}const c=new r(i);return Om(c,a),c}function rre(e,t,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${e}"`)}function ire(e,t,n){return!1}function are(e){return e}function sre(){return null}function ore(){return null}function lre(e,t,n,r){return ere}function cre(){}function ure(e){}function dre(e,t){return!1}function fre(){return nP}function hre(){return nP}const pre=setTimeout,mre=clearTimeout,gre=-1;function vre(e,t){return!1}const yre=!1,xre=!0,bre=!0;function wre(e,t){t.parent===e?t.moveToTop():e.add(t),ns(e)}function _re(e,t){t.parent===e?t.moveToTop():e.add(t),ns(e)}function rP(e,t,n){t._remove(),e.add(t),t.setZIndex(n.getZIndex()),ns(e)}function Nre(e,t,n){rP(e,t,n)}function Sre(e,t){t.destroy(),t.off(T5),ns(e)}function Ere(e,t){t.destroy(),t.off(T5),ns(e)}function kre(e,t,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function jre(e,t,n){}function Cre(e,t,n,r,i){Om(e,i,r)}function Tre(e){e.hide(),ns(e)}function Ore(e){}function Pre(e,t){(t.visible==null||t.visible)&&e.show()}function Are(e,t){}function Rre(e){}function Ire(){}const Mre=()=>tP.DefaultEventPriority,Lre=Object.freeze(Object.defineProperty({__proto__:null,appendChild:wre,appendChildToContainer:_re,appendInitialChild:tre,cancelTimeout:mre,clearContainer:Rre,commitMount:jre,commitTextUpdate:kre,commitUpdate:Cre,createInstance:nre,createTextInstance:rre,detachDeletedInstance:Ire,finalizeInitialChildren:ire,getChildHostContext:hre,getCurrentEventPriority:Mre,getPublicInstance:are,getRootHostContext:fre,hideInstance:Tre,hideTextInstance:Ore,idlePriority:$c.unstable_IdlePriority,insertBefore:rP,insertInContainerBefore:Nre,isPrimaryRenderer:yre,noTimeout:gre,now:$c.unstable_now,prepareForCommit:sre,preparePortalMount:ore,prepareUpdate:lre,removeChild:Sre,removeChildFromContainer:Ere,resetAfterCommit:cre,resetTextContent:ure,run:$c.unstable_runWithPriority,scheduleTimeout:pre,shouldDeprioritizeSubtree:dre,shouldSetTextContent:vre,supportsMutation:bre,unhideInstance:Pre,unhideTextInstance:Are,warnsIfNotActing:xre},Symbol.toStringTag,{value:"Module"}));var Dre=Object.defineProperty,Fre=Object.defineProperties,zre=Object.getOwnPropertyDescriptors,Rk=Object.getOwnPropertySymbols,Bre=Object.prototype.hasOwnProperty,qre=Object.prototype.propertyIsEnumerable,Ik=(e,t,n)=>t in e?Dre(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mk=(e,t)=>{for(var n in t||(t={}))Bre.call(t,n)&&Ik(e,n,t[n]);if(Rk)for(var n of Rk(t))qre.call(t,n)&&Ik(e,n,t[n]);return e},$re=(e,t)=>Fre(e,zre(t)),Lk,Dk;typeof window<"u"&&((Lk=window.document)!=null&&Lk.createElement||((Dk=window.navigator)==null?void 0:Dk.product)==="ReactNative")?G.useLayoutEffect:G.useEffect;function iP(e,t,n){if(!e)return;if(n(e)===!0)return e;let r=t?e.return:e.child;for(;r;){const i=iP(r,t,n);if(i)return i;r=t?null:r.sibling}}function aP(e){try{return Object.defineProperties(e,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return e}}const Fk=console.error;console.error=function(){const e=[...arguments].join("");if(e!=null&&e.startsWith("Warning:")&&e.includes("useContext")){console.error=Fk;return}return Fk.apply(this,arguments)};const O5=aP(G.createContext(null));class sP extends G.Component{render(){return G.createElement(O5.Provider,{value:this._reactInternals},this.props.children)}}function Ure(){const e=G.useContext(O5);if(e===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=G.useId();return G.useMemo(()=>{for(const r of[e,e==null?void 0:e.alternate]){if(!r)continue;const i=iP(r,!1,a=>{let s=a.memoizedState;for(;s;){if(s.memoizedState===t)return!0;s=s.next}});if(i)return i}},[e,t])}function Gre(){const e=Ure(),[t]=G.useState(()=>new Map);t.clear();let n=e;for(;n;){if(n.type&&typeof n.type=="object"){const i=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;i&&i!==O5&&!t.has(i)&&t.set(i,G.useContext(aP(i)))}n=n.return}return t}function Hre(){const e=Gre();return G.useMemo(()=>Array.from(e.keys()).reduce((t,n)=>r=>G.createElement(t,null,G.createElement(n.Provider,$re(Mk({},r),{value:e.get(n)}))),t=>G.createElement(sP,Mk({},t))),[e])}function Vre(e){const t=oe.useRef({});return oe.useLayoutEffect(()=>{t.current=e}),oe.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const Wre=e=>{const t=oe.useRef(),n=oe.useRef(),r=oe.useRef(),i=Vre(e),a=Hre(),s=o=>{const{forwardedRef:c}=e;c&&(typeof c=="function"?c(o):c.current=o)};return oe.useLayoutEffect(()=>(n.current=new ju.Stage({width:e.width,height:e.height,container:t.current}),s(n.current),r.current=qc.createContainer(n.current,tP.LegacyRoot,!1,null),qc.updateContainer(oe.createElement(a,{},e.children),r.current),()=>{ju.isBrowser&&(s(null),qc.updateContainer(null,r.current,null),n.current.destroy())}),[]),oe.useLayoutEffect(()=>{s(n.current),Om(n.current,e,i),qc.updateContainer(oe.createElement(a,{},e.children),r.current,null)}),oe.createElement("div",{ref:t,id:e.id,accessKey:e.accessKey,className:e.className,role:e.role,style:e.style,tabIndex:e.tabIndex,title:e.title})},zk="Layer",Bk="Rect",Kre="Line",Yre="Image",Xre="Text",Qre="Transformer",qc=Xne(Lre);qc.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:oe.version,rendererPackageName:"react-konva"});const Zre=oe.forwardRef((e,t)=>oe.createElement(sP,{},oe.createElement(Wre,{...e,forwardedRef:t}))),Kx=({stepNumber:e,title:t,isOpen:n,onClick:r,children:i})=>l.jsxs("div",{className:`border border-white/10 rounded-2xl bg-[#13141f] overflow-hidden transition-all duration-300 ${n?"ring-1 ring-primary/50":"opacity-80"}`,children:[l.jsxs("button",{onClick:r,className:"w-full flex items-center justify-between p-6 hover:bg-white/5 transition-colors",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:`size-8 rounded-full flex items-center justify-center font-black text-sm ${n?"bg-primary text-white":"bg-white/10 text-slate-400"}`,children:e}),l.jsx("h3",{className:`text-lg font-bold ${n?"text-white":"text-slate-400"}`,children:t})]}),l.jsx("span",{className:`material-symbols-outlined transition-transform duration-300 ${n?"rotate-180 text-primary":"text-slate-500"}`,children:"expand_more"})]}),n&&l.jsx("div",{className:"p-6 pt-0 border-t border-white/5 animate-in fade-in slide-in-from-top-2",children:i})]}),Yx=({icon:e,title:t,desc:n,selected:r,onClick:i})=>l.jsxs("div",{onClick:i,className:`p-6 rounded-xl border cursor-pointer transition-all relative group h-full flex flex-col justify-between ${r?"bg-primary/20 border-primary shadow-[0_0_30px_rgba(var(--color-primary),0.3)]":"bg-[#0a0a0c] border-white/10 hover:border-white/30"}`,children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("div",{className:`size-12 rounded-lg flex items-center justify-center mb-4 ${r?"bg-primary text-white":"bg-white/10 text-slate-400 group-hover:text-white group-hover:bg-white/20"}`,children:l.jsx("span",{className:"material-symbols-outlined text-2xl",children:e})}),l.jsx("h4",{className:"font-bold text-white mb-1",children:t}),l.jsx("p",{className:"text-xs text-slate-500 leading-relaxed",children:n})]}),r&&l.jsx("div",{className:"absolute top-4 right-4 size-3 bg-primary rounded-full shadow-glow"})]}),Jre=({src:e,x:t,y:n,width:r,height:i})=>{const[a,s]=G.useState(null);return G.useEffect(()=>{if(!e)return;const o=new window.Image;o.src=e,o.crossOrigin="Anonymous",o.onload=()=>{s(o)}},[e]),l.jsx(Yre,{image:a,x:t,y:n,width:r,height:i})},eie=({selectedId:e})=>{const t=oe.useRef();return oe.useEffect(()=>{if(e){const n=t.current.getStage().findOne("#"+e);n&&(t.current.nodes([n]),t.current.getLayer().batchDraw())}else t.current.nodes([])},[e]),l.jsx(Qre,{ref:t})},qk=({mode:e})=>{var te;const{username:t,projectName:n,folderId:r,entityId:i}=nr(),a=tr(),s=qs(),{setRightOpen:o,setRightPanelMode:c,setAvailableTemplates:d,mapSettings:f,setMapSettings:p,setOnMapSettingsChange:m}=Ka(),[g,b]=G.useState(e==="create"?"setup":"editor");G.useEffect(()=>{b(e==="create"?"setup":"editor")},[e]);const[y,N]=G.useState(((te=s.state)==null?void 0:te.folderId)||null),[v,_]=G.useState(1),[x,w]=G.useState({name:"New Map",description:"",parentZone:null,type:"regional",sourceType:"blank",dims:{width:800,height:600},bgImage:null}),[E,P]=G.useState(!1),[A,T]=G.useState("brush"),[L,k]=G.useState([]),[C,O]=G.useState([]),[F,M]=G.useState([]),[D,$]=G.useState(null),V=oe.useRef(!1),[K,H]=G.useState({isOpen:!1,id:null,text:""}),q=X=>{X.target===X.target.getStage()&&$(null)},I=X=>{q(X);const ue=X.target.getStage().getPointerPosition();A!=="select"&&(V.current=!0,A==="brush"||A==="eraser"?k([...L,{id:`line-${Date.now()}`,tool:A,points:[ue.x,ue.y],color:A==="eraser"?"#ffffff":"#df4b26",size:A==="eraser"?20:5}]):A==="rect"?O([...C,{id:`rect-${Date.now()}`,x:ue.x,y:ue.y,width:0,height:0,color:"#df4b26"}]):A==="text"&&(M([...F,{id:`text-${Date.now()}`,x:ue.x,y:ue.y,text:"Double click to edit",fontSize:20,color:"#ffffff"}]),V.current=!1))},z=X=>{if(!V.current)return;const ue=X.target.getStage().getPointerPosition();A==="brush"||A==="eraser"?k(se=>{const ce=[...se],de={...ce[ce.length-1]};return de.points=de.points.concat([ue.x,ue.y]),ce[ce.length-1]=de,ce}):A==="rect"&&O(se=>{const ce=[...se],de={...ce[ce.length-1]};return de.width=ue.x-de.x,de.height=ue.y-de.y,ce[ce.length-1]=de,ce})},W=()=>{V.current=!1};G.useEffect(()=>{if(o(g==="editor"),g==="editor"){c("MAP");const X={showGrid:!0,gridSize:50,width:x.dims.width,height:x.dims.height};p(X),m(ne=>{ne&&w(ue=>({...ue,dims:{width:ne.width,height:ne.height}}))})}},[g]),G.useEffect(()=>{e==="create"&&!y&&r&&(console.log("Resolving folder ID for slug:",r),be.get(`/world-bible/folders/${r}`).then(X=>N(X.id)).catch(X=>console.error("Could not resolve folder ID",X)))},[e,r,y]);const Q=X=>{const ne=X.target.files[0];if(ne){const ue=new FileReader;ue.onload=se=>{const ce=new Image;ce.onload=()=>{w(de=>({...de,bgImage:se.target.result,dims:{width:ce.width,height:ce.height},sourceType:"upload"}))},ce.src=se.target.result},ue.readAsDataURL(ne)}},ee=oe.useRef(null),Y=async()=>{if(!y){alert("Folder context missing. Please start from the folder view again.");return}P(!0);try{let X=x.bgImage;if(ee.current){const se=ee.current.findOne("Transformer");if(se&&se.nodes([]),X=ee.current.toDataURL({pixelRatio:.5}),se&&D){const ce=ee.current.findOne("#"+D);ce&&se.nodes([ce])}}const ne={nombre:x.name,tipoEspecial:"map",carpetaId:y,descripcion:JSON.stringify({description:x.description,type:x.type,width:x.dims.width,height:x.dims.height,bgImage:x.bgImage?"BINARY_DATA":null,layers:{lines:L,rectangles:C,texts:F},snapshotUrl:X}),iconUrl:X},ue=await be.post("/world-bible/entities",ne);window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:y}})),a(`/${t}/${n}/map-editor/edit/${ue.id}`,{replace:!0})}catch(X){console.error(X),alert("Error creating map. Check console.")}finally{P(!1)}},U=oe.useRef(null);G.useEffect(()=>{(!e||e==="edit")&&i&&be.get(`/world-bible/entities/${i}`).then(X=>{N(X.carpetaId),U.current=X.iconUrl,b("editor");let ne={};try{ne=X.descripcion?JSON.parse(X.descripcion):{}}catch(ue){console.error("Error parsing map data",ue)}w({name:X.nombre,description:ne.description||"",parentZone:null,type:ne.type||"regional",sourceType:ne.bgImage?"upload":"blank",dims:{width:ne.width||800,height:ne.height||600},bgImage:ne.bgImage}),ne.layers&&(k(ne.layers.lines||[]),O(ne.layers.rectangles||[]),M(ne.layers.texts||[])),p({name:X.nombre,description:ne.description||"",type:ne.type||"regional",showGrid:!0,gridSize:50,width:ne.width||800,height:ne.height||600,bgImage:ne.bgImage})}).catch(X=>console.error("Error loading entity",X))},[e,i]);const J=async()=>{P(!0);try{let X=x.bgImage;if(ee.current){$(null);const ue=ee.current.findOne("Transformer");ue&&ue.nodes([]),X=ee.current.toDataURL({pixelRatio:.5})}const ne={id:i,nombre:x.name,tipoEspecial:"map",carpetaId:y,descripcion:JSON.stringify({description:x.description,type:x.type,width:x.dims.width,height:x.dims.height,bgImage:x.bgImage?"BINARY_DATA":null,layers:{lines:L,rectangles:C,texts:F},snapshotUrl:X}),iconUrl:U.current};await be.put(`/world-bible/entities/${i}`,ne),a(y?`/${t}/${n}/bible/folder/${y}`:`/${t}/${n}/bible`)}catch(X){console.error("Save failed",X),alert("Error saving map")}finally{P(!1)}};return g==="setup"?l.jsxs("div",{className:"flex-1 flex flex-col h-screen bg-[#060608] text-white",children:[l.jsxs("div",{className:"h-16 border-b border-white/5 flex items-center justify-between px-8 bg-[#0a0a0c]",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-primary/20 rounded-lg text-primary",children:l.jsx("span",{className:"material-symbols-outlined",children:"add_circle"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg font-bold leading-tight",children:"Create New Map / Zone"}),l.jsx("p",{className:"text-[10px] text-slate-500 uppercase font-bold tracking-wider",children:"Configure details for your new cartography entry"})]})]}),l.jsx("button",{onClick:()=>a(-1),className:"p-2 hover:bg-white/5 rounded-full text-slate-500 hover:text-white transition-colors",children:l.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-8",children:l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.jsx(Kx,{stepNumber:"1",title:"Identity & Hierarchy",isOpen:v===1,onClick:()=>_(1),children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500 mb-2 block",children:"Map Name"}),l.jsx("input",{autoFocus:!0,value:x.name,onChange:X=>w({...x,name:X.target.value}),className:"w-full bg-[#0a0a0c] border border-white/10 rounded-xl p-4 text-white focus:border-primary outline-none transition-colors",placeholder:"e.g. The Sapphire Coast"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500 mb-2 block",children:"Parent Zone (Optional)"}),l.jsxs("div",{className:"w-full bg-[#0a0a0c] border border-white/10 rounded-xl p-4 text-slate-400 flex items-center justify-between cursor-pointer hover:border-white/20",children:[l.jsx("span",{children:"Current Folder (Default)"}),l.jsx("span",{className:"material-symbols-outlined text-sm",children:"expand_more"})]}),l.jsx("p",{className:"text-[10px] text-slate-600 mt-2",children:"Selecting a parent makes this a sub-zone."})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500 mb-2 block",children:"Description"}),l.jsx("textarea",{value:x.description,onChange:X=>w({...x,description:X.target.value}),className:"w-full h-40 bg-[#0a0a0c] border border-white/10 rounded-xl p-4 text-white resize-none focus:border-primary outline-none transition-colors leading-relaxed",placeholder:"Brief description of geography, climate, or importance..."})]})]})}),l.jsx(Kx,{stepNumber:"2",title:"Map Type",isOpen:v===2,onClick:()=>_(2),children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsx(Yx,{icon:"public",title:"World Map",desc:"Continents, oceans, global scale.",selected:x.type==="world",onClick:()=>w({...x,type:"world"})}),l.jsx(Yx,{icon:"map",title:"Regional Map",desc:"Kingdoms, provinces, biomes.",selected:x.type==="regional",onClick:()=>w({...x,type:"regional"})}),l.jsx(Yx,{icon:"location_city",title:"City / Local",desc:"Cities, dungeons, battlemaps.",selected:x.type==="local",onClick:()=>w({...x,type:"local"})})]})}),l.jsx(Kx,{stepNumber:"3",title:"Canvas Source",isOpen:v===3,onClick:()=>_(3),children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{onClick:()=>document.getElementById("map-upload-input").click(),className:`relative p-8 rounded-xl border-2 border-dashed flex flex-col items-center justify-center text-center cursor-pointer transition-all group min-h-[200px] ${x.sourceType==="upload"?"border-primary bg-primary/5":"border-white/10 hover:border-white/30 bg-[#0a0a0c]"}`,children:[l.jsx("input",{id:"map-upload-input",type:"file",accept:"image/*",className:"hidden",onChange:Q}),x.bgImage?l.jsx("img",{src:x.bgImage,alt:"Preview",className:"absolute inset-0 w-full h-full object-cover rounded-xl opacity-50 group-hover:opacity-70"}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"size-16 bg-white/5 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:l.jsx("span",{className:"material-symbols-outlined text-3xl text-slate-400",children:"cloud_upload"})}),l.jsx("h4",{className:"font-bold text-white",children:"Upload Image File"}),l.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Drag & drop or click to browse"}),l.jsx("p",{className:"text-[10px] text-slate-600 mt-1 uppercase font-bold",children:"JPG, PNG, WEBP  Max 20MB"})]}),x.sourceType==="upload"&&l.jsx("div",{className:"absolute top-4 right-4 size-3 bg-primary rounded-full shadow-glow z-10"})]}),l.jsxs("div",{onClick:()=>w({...x,sourceType:"blank",bgImage:null}),className:`p-8 rounded-xl border flex flex-col items-center justify-center text-center cursor-pointer transition-all min-h-[200px] ${x.sourceType==="blank"?"border-primary bg-primary/5":"border-white/10 hover:border-white/30 bg-[#0a0a0c]"}`,children:[l.jsx("div",{className:"size-16 bg-white/5 rounded-full flex items-center justify-center mb-4",children:l.jsx("span",{className:"material-symbols-outlined text-3xl text-slate-400",children:"check_box_outline_blank"})}),l.jsx("h4",{className:"font-bold text-white",children:"Blank Canvas"}),l.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Start a new drawing from scratch"}),x.sourceType==="blank"&&l.jsxs("div",{className:"mt-6 flex items-center gap-2 bg-black/50 p-1 rounded-lg border border-white/10",children:[l.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-500 px-2",children:"Size"}),l.jsx("span",{className:"text-xs font-mono text-white",children:"4096 px"}),l.jsx("span",{className:"text-xs text-slate-500",children:"x"}),l.jsx("span",{className:"text-xs font-mono text-white",children:"4096 px"})]})]})]})})]})}),l.jsxs("div",{className:"h-20 border-t border-white/5 bg-[#0a0a0c] flex items-center justify-between px-8 z-20",children:[l.jsx("button",{onClick:()=>a(-1),className:"text-sm font-bold text-slate-500 hover:text-white transition-colors",children:"Cancel"}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-xs text-slate-600 italic",children:"Changes saved locally"}),l.jsx(nt,{variant:"primary",size:"lg",icon:"check",onClick:Y,disabled:!x.name||E,className:"bg-primary hover:bg-primary-light text-white shadow-lg shadow-primary/25 px-8",children:E?"Creating...":"Create Map"})]})]})]}):l.jsxs("div",{className:"flex flex-col h-screen w-full bg-[#0f0f13] text-white overflow-hidden",children:[l.jsxs("header",{className:"h-14 border-b border-white/5 flex items-center justify-between px-4 bg-[#1a1a20] shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:()=>a(-1),className:"p-2 hover:bg-white/5 rounded-full",title:"Back to Collection",children:l.jsx("span",{className:"material-symbols-outlined text-sm",children:"arrow_back"})}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("input",{value:x.name,onChange:X=>w({...x,name:X.target.value}),className:"bg-transparent font-bold text-sm outline-none focus:bg-white/5 rounded px-2 -ml-2"}),l.jsxs("span",{className:"text-[10px] text-text-muted px-2",children:[x.dims.width," x ",x.dims.height,"  ",(f==null?void 0:f.gridSize)||50,"px Grid"]})]})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx(nt,{variant:"primary",size:"sm",icon:"save",onClick:J,disabled:E,children:E?"Saving...":"Save Changes"})})]}),l.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[l.jsx("div",{className:"w-14 bg-[#1a1a20] border-r border-white/5 flex flex-col items-center py-4 gap-4 z-10",children:[{id:"select",icon:"near_me"},{id:"brush",icon:"brush"},{id:"eraser",icon:"ink_eraser"},{id:"rect",icon:"check_box_outline_blank"},{id:"text",icon:"title"}].map(X=>l.jsx("button",{onClick:()=>T(X.id),className:`p-2 rounded-lg transition-colors ${A===X.id?"bg-primary text-white shadow-lg shadow-primary/30":"hover:bg-white/5 text-slate-400 hover:text-white"}`,children:l.jsx("span",{className:"material-symbols-outlined",children:X.icon})},X.id))}),l.jsx("div",{className:"flex-1 overflow-auto bg-[#0f0f13] relative flex items-center justify-center p-8 custom-scrollbar",children:l.jsx("div",{className:"bg-[#1a1a20] shadow-[0_0_50px_rgba(0,0,0,0.5)] flex-none",children:l.jsxs(Zre,{ref:ee,width:x.dims.width,height:x.dims.height,onMouseDown:I,onMouseMove:z,onMouseUp:W,className:"bg-white",children:[l.jsxs(zk,{children:[x.bgImage&&l.jsx(Jre,{src:x.bgImage,x:0,y:0,width:x.dims.width,height:x.dims.height}),(f==null?void 0:f.showGrid)&&l.jsx(Bk,{width:x.dims.width,height:x.dims.height,fillPatternImage:(()=>{const X=document.createElement("canvas");X.width=f.gridSize||50,X.height=f.gridSize||50;const ne=X.getContext("2d");return ne.strokeStyle="rgba(0,0,0,0.2)",ne.lineWidth=1,ne.strokeRect(0,0,X.width,X.height),X})(),listening:!1})]}),l.jsxs(zk,{children:[L.map((X,ne)=>l.jsx(Kre,{points:X.points,stroke:X.color,strokeWidth:X.size,tension:.5,lineCap:"round",lineJoin:"round",globalCompositeOperation:X.tool==="eraser"?"destination-out":"source-over"},ne)),C.map((X,ne)=>l.jsx(Bk,{id:X.id,x:X.x,y:X.y,width:X.width,height:X.height,stroke:X.color,strokeWidth:2,draggable:A==="select",onClick:()=>A==="select"&&$(X.id),onTap:()=>A==="select"&&$(X.id)},X.id)),F.map((X,ne)=>l.jsx(Xre,{id:X.id,x:X.x,y:X.y,text:X.text,fontSize:X.fontSize,fill:X.color,draggable:A==="select",onClick:()=>A==="select"&&$(X.id),onTap:()=>A==="select"&&$(X.id),onDblClick:ue=>{H({isOpen:!0,id:X.id,text:X.text})}},X.id)),l.jsx(eie,{selectedId:D})]})]})})})]}),l.jsx(mO,{isOpen:K.isOpen,onClose:()=>H(X=>({...X,isOpen:!1})),title:"Edit Map Text",initialValue:K.text,onConfirm:X=>{M(ne=>ne.map(ue=>ue.id===K.id?{...ue,text:X}:ue))},confirmText:"Save Text"})]})};function tie(){return l.jsx(_M,{children:l.jsxs(pM,{children:[l.jsx(bt,{path:"/",element:l.jsx(hL,{})}),l.jsxs(bt,{element:l.jsx(sL,{}),children:[l.jsx(bt,{path:"/dashboard",element:l.jsx(uL,{})}),l.jsxs(bt,{path:"/:username/:projectName",element:l.jsx(vL,{}),children:[l.jsx(bt,{index:!0,element:l.jsx(pL,{})}),l.jsx(bt,{path:"writing",element:l.jsx(DZ,{})}),l.jsx(bt,{path:"entities/:type/:entityId",element:l.jsx(fZ,{})}),l.jsx(bt,{path:"settings",element:l.jsx(mL,{})}),l.jsx(bt,{path:"map-editor/create/:folderId",element:l.jsx(qk,{mode:"create"})}),l.jsx(bt,{path:"map-editor/edit/:entityId",element:l.jsx(qk,{mode:"edit"})}),l.jsxs(bt,{path:"bible",element:l.jsx(KZ,{}),children:[l.jsx(bt,{index:!0,element:l.jsx(YZ,{})}),l.jsx(bt,{path:"folder/:folderSlug/entity/new/:type",element:l.jsx(Ec,{mode:"creation"})}),l.jsx(bt,{path:"folder/:folderSlug",element:l.jsx(GZ,{})}),l.jsx(bt,{path:"entity/:entitySlug",element:l.jsx(Ec,{})}),l.jsx(bt,{path:"folder/:folderSlug/entity/:entitySlug",element:l.jsx(Ec,{})}),l.jsx(bt,{path:"folder/:folderSlug/map/:entitySlug",element:l.jsx(Ec,{})}),l.jsx(bt,{path:"folder/:folderSlug/timeline/:entitySlug",element:l.jsx(Ec,{})})]}),l.jsx(bt,{path:"map",element:l.jsx(xZ,{})}),l.jsx(bt,{path:"timeline",element:l.jsx(hZ,{})}),l.jsx(bt,{path:"languages",element:l.jsx(NZ,{})}),l.jsx(bt,{path:"trash",element:l.jsx(FZ,{})}),l.jsx(bt,{path:"graph",element:l.jsx(oZ,{})})]})]})]})})}class nie extends oe.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,n){this.setState({error:t,errorInfo:n}),console.error("Uncaught Error:",t,n)}render(){return this.state.hasError?l.jsxs("div",{style:{padding:20,background:"#222",color:"red",height:"100vh"},children:[l.jsx("h1",{children:"Something went wrong."}),l.jsxs("details",{style:{whiteSpace:"pre-wrap"},children:[this.state.error&&this.state.error.toString(),l.jsx("br",{}),this.state.errorInfo&&this.state.errorInfo.componentStack]})]}):this.props.children}}const $k=document.getElementById("root");$k?Xx.createRoot($k).render(l.jsx(oe.StrictMode,{children:l.jsx(nie,{children:l.jsx(tie,{})})})):console.error("React root element not found (looked for #root)");
