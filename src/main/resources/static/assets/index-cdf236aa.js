function fI(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var bo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var lk={exports:{}},If={},ck={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yu=Symbol.for("react.element"),pI=Symbol.for("react.portal"),mI=Symbol.for("react.fragment"),gI=Symbol.for("react.strict_mode"),xI=Symbol.for("react.profiler"),vI=Symbol.for("react.provider"),yI=Symbol.for("react.context"),bI=Symbol.for("react.forward_ref"),wI=Symbol.for("react.suspense"),_I=Symbol.for("react.memo"),NI=Symbol.for("react.lazy"),Y4=Symbol.iterator;function SI(e){return e===null||typeof e!="object"?null:(e=Y4&&e[Y4]||e["@@iterator"],typeof e=="function"?e:null)}var uk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dk=Object.assign,hk={};function ol(e,t,r){this.props=e,this.context=t,this.refs=hk,this.updater=r||uk}ol.prototype.isReactComponent={};ol.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ol.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function fk(){}fk.prototype=ol.prototype;function pw(e,t,r){this.props=e,this.context=t,this.refs=hk,this.updater=r||uk}var mw=pw.prototype=new fk;mw.constructor=pw;dk(mw,ol.prototype);mw.isPureReactComponent=!0;var X4=Array.isArray,pk=Object.prototype.hasOwnProperty,gw={current:null},mk={key:!0,ref:!0,__self:!0,__source:!0};function gk(e,t,r){var n,i={},s=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)pk.call(t,n)&&!mk.hasOwnProperty(n)&&(i[n]=t[n]);var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){for(var d=Array(l),h=0;h<l;h++)d[h]=arguments[h+2];i.children=d}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)i[n]===void 0&&(i[n]=l[n]);return{$$typeof:yu,type:e,key:s,ref:a,props:i,_owner:gw.current}}function jI(e,t){return{$$typeof:yu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function xw(e){return typeof e=="object"&&e!==null&&e.$$typeof===yu}function kI(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Q4=/\/+/g;function Bm(e,t){return typeof e=="object"&&e!==null&&e.key!=null?kI(""+e.key):t.toString(36)}function _h(e,t,r,n,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case yu:case pI:a=!0}}if(a)return a=e,i=i(a),e=n===""?"."+Bm(a,0):n,X4(i)?(r="",e!=null&&(r=e.replace(Q4,"$&/")+"/"),_h(i,t,r,"",function(h){return h})):i!=null&&(xw(i)&&(i=jI(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Q4,"$&/")+"/")+e)),t.push(i)),1;if(a=0,n=n===""?".":n+":",X4(e))for(var l=0;l<e.length;l++){s=e[l];var d=n+Bm(s,l);a+=_h(s,t,r,d,i)}else if(d=SI(e),typeof d=="function")for(e=d.call(e),l=0;!(s=e.next()).done;)s=s.value,d=n+Bm(s,l++),a+=_h(s,t,r,d,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Gd(e,t,r){if(e==null)return e;var n=[],i=0;return _h(e,n,"","",function(s){return t.call(r,s,i++)}),n}function CI(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var yr={current:null},Nh={transition:null},EI={ReactCurrentDispatcher:yr,ReactCurrentBatchConfig:Nh,ReactCurrentOwner:gw};function xk(){throw Error("act(...) is not supported in production builds of React.")}De.Children={map:Gd,forEach:function(e,t,r){Gd(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Gd(e,function(){t++}),t},toArray:function(e){return Gd(e,function(t){return t})||[]},only:function(e){if(!xw(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};De.Component=ol;De.Fragment=mI;De.Profiler=xI;De.PureComponent=pw;De.StrictMode=gI;De.Suspense=wI;De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EI;De.act=xk;De.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=dk({},e.props),i=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=gw.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(d in t)pk.call(t,d)&&!mk.hasOwnProperty(d)&&(n[d]=t[d]===void 0&&l!==void 0?l[d]:t[d])}var d=arguments.length-2;if(d===1)n.children=r;else if(1<d){l=Array(d);for(var h=0;h<d;h++)l[h]=arguments[h+2];n.children=l}return{$$typeof:yu,type:e.type,key:i,ref:s,props:n,_owner:a}};De.createContext=function(e){return e={$$typeof:yI,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:vI,_context:e},e.Consumer=e};De.createElement=gk;De.createFactory=function(e){var t=gk.bind(null,e);return t.type=e,t};De.createRef=function(){return{current:null}};De.forwardRef=function(e){return{$$typeof:bI,render:e}};De.isValidElement=xw;De.lazy=function(e){return{$$typeof:NI,_payload:{_status:-1,_result:e},_init:CI}};De.memo=function(e,t){return{$$typeof:_I,type:e,compare:t===void 0?null:t}};De.startTransition=function(e){var t=Nh.transition;Nh.transition={};try{e()}finally{Nh.transition=t}};De.unstable_act=xk;De.useCallback=function(e,t){return yr.current.useCallback(e,t)};De.useContext=function(e){return yr.current.useContext(e)};De.useDebugValue=function(){};De.useDeferredValue=function(e){return yr.current.useDeferredValue(e)};De.useEffect=function(e,t){return yr.current.useEffect(e,t)};De.useId=function(){return yr.current.useId()};De.useImperativeHandle=function(e,t,r){return yr.current.useImperativeHandle(e,t,r)};De.useInsertionEffect=function(e,t){return yr.current.useInsertionEffect(e,t)};De.useLayoutEffect=function(e,t){return yr.current.useLayoutEffect(e,t)};De.useMemo=function(e,t){return yr.current.useMemo(e,t)};De.useReducer=function(e,t,r){return yr.current.useReducer(e,t,r)};De.useRef=function(e){return yr.current.useRef(e)};De.useState=function(e){return yr.current.useState(e)};De.useSyncExternalStore=function(e,t,r){return yr.current.useSyncExternalStore(e,t,r)};De.useTransition=function(){return yr.current.useTransition()};De.version="18.3.1";ck.exports=De;var P=ck.exports;const re=vu(P),TI=fI({__proto__:null,default:re},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PI=P,RI=Symbol.for("react.element"),AI=Symbol.for("react.fragment"),II=Object.prototype.hasOwnProperty,MI=PI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,FI={key:!0,ref:!0,__self:!0,__source:!0};function vk(e,t,r){var n,i={},s=null,a=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)II.call(t,n)&&!FI.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:RI,type:e,key:s,ref:a,props:i,_owner:MI.current}}If.Fragment=AI;If.jsx=vk;If.jsxs=vk;lk.exports=If;var o=lk.exports,U2={},yk={exports:{}},Vr={},bk={exports:{}},wk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(K,H){var W=K.length;K.push(H);e:for(;0<W;){var D=W-1>>>1,q=K[D];if(0<i(q,H))K[D]=H,K[W]=q,W=D;else break e}}function r(K){return K.length===0?null:K[0]}function n(K){if(K.length===0)return null;var H=K[0],W=K.pop();if(W!==H){K[0]=W;e:for(var D=0,q=K.length,J=q>>>1;D<J;){var ee=2*(D+1)-1,ue=K[ee],pe=ee+1,V=K[pe];if(0>i(ue,W))pe<q&&0>i(V,ue)?(K[D]=V,K[pe]=W,D=pe):(K[D]=ue,K[ee]=W,D=ee);else if(pe<q&&0>i(V,W))K[D]=V,K[pe]=W,D=pe;else break e}}return H}function i(K,H){var W=K.sortIndex-H.sortIndex;return W!==0?W:K.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var d=[],h=[],f=1,p=null,g=3,x=!1,w=!1,b=!1,k=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(K){for(var H=r(h);H!==null;){if(H.callback===null)n(h);else if(H.startTime<=K)n(h),H.sortIndex=H.expirationTime,t(d,H);else break;H=r(h)}}function j(K){if(b=!1,v(K),!w)if(r(d)!==null)w=!0,B(C);else{var H=r(h);H!==null&&Y(j,H.startTime-K)}}function C(K,H){w=!1,b&&(b=!1,_(A),A=-1),x=!0;var W=g;try{for(v(H),p=r(d);p!==null&&(!(p.expirationTime>H)||K&&!I());){var D=p.callback;if(typeof D=="function"){p.callback=null,g=p.priorityLevel;var q=D(p.expirationTime<=H);H=e.unstable_now(),typeof q=="function"?p.callback=q:p===r(d)&&n(d),v(H)}else n(d);p=r(d)}if(p!==null)var J=!0;else{var ee=r(h);ee!==null&&Y(j,ee.startTime-H),J=!1}return J}finally{p=null,g=W,x=!1}}var R=!1,L=null,A=-1,O=5,T=-1;function I(){return!(e.unstable_now()-T<O)}function M(){if(L!==null){var K=e.unstable_now();T=K;var H=!0;try{H=L(!0,K)}finally{H?$():(R=!1,L=null)}}else R=!1}var $;if(typeof S=="function")$=function(){S(M)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,G=F.port2;F.port1.onmessage=M,$=function(){G.postMessage(null)}}else $=function(){k(M,0)};function B(K){L=K,R||(R=!0,$())}function Y(K,H){A=k(function(){K(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){w||x||(w=!0,B(C))},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(K){switch(g){case 1:case 2:case 3:var H=3;break;default:H=g}var W=g;g=H;try{return K()}finally{g=W}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,H){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var W=g;g=K;try{return H()}finally{g=W}},e.unstable_scheduleCallback=function(K,H,W){var D=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?D+W:D):W=D,K){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=W+q,K={id:f++,callback:H,priorityLevel:K,startTime:W,expirationTime:q,sortIndex:-1},W>D?(K.sortIndex=W,t(h,K),r(d)===null&&K===r(h)&&(b?(_(A),A=-1):b=!0,Y(j,W-D))):(K.sortIndex=q,t(d,K),w||x||(w=!0,B(C))),K},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(K){var H=g;return function(){var W=g;g=H;try{return K.apply(this,arguments)}finally{g=W}}}})(wk);bk.exports=wk;var Ac=bk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LI=P,Br=Ac;function ce(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _k=new Set,$c={};function Ia(e,t){Vo(e,t),Vo(e+"Capture",t)}function Vo(e,t){for($c[e]=t,e=0;e<t.length;e++)_k.add(t[e])}var Mi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),G2=Object.prototype.hasOwnProperty,OI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Z4={},J4={};function DI(e){return G2.call(J4,e)?!0:G2.call(Z4,e)?!1:OI.test(e)?J4[e]=!0:(Z4[e]=!0,!1)}function zI(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function UI(e,t,r,n){if(t===null||typeof t>"u"||zI(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function br(e,t,r,n,i,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var tr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){tr[e]=new br(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];tr[t]=new br(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){tr[e]=new br(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){tr[e]=new br(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){tr[e]=new br(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){tr[e]=new br(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){tr[e]=new br(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){tr[e]=new br(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){tr[e]=new br(e,5,!1,e.toLowerCase(),null,!1,!1)});var vw=/[\-:]([a-z])/g;function yw(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(vw,yw);tr[t]=new br(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(vw,yw);tr[t]=new br(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(vw,yw);tr[t]=new br(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){tr[e]=new br(e,1,!1,e.toLowerCase(),null,!1,!1)});tr.xlinkHref=new br("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){tr[e]=new br(e,1,!1,e.toLowerCase(),null,!0,!0)});function bw(e,t,r,n){var i=tr.hasOwnProperty(t)?tr[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(UI(t,r,i,n)&&(r=null),n||i===null?DI(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Gi=LI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$d=Symbol.for("react.element"),wo=Symbol.for("react.portal"),_o=Symbol.for("react.fragment"),ww=Symbol.for("react.strict_mode"),$2=Symbol.for("react.profiler"),Nk=Symbol.for("react.provider"),Sk=Symbol.for("react.context"),_w=Symbol.for("react.forward_ref"),B2=Symbol.for("react.suspense"),q2=Symbol.for("react.suspense_list"),Nw=Symbol.for("react.memo"),hs=Symbol.for("react.lazy"),jk=Symbol.for("react.offscreen"),e_=Symbol.iterator;function Xl(e){return e===null||typeof e!="object"?null:(e=e_&&e[e_]||e["@@iterator"],typeof e=="function"?e:null)}var xt=Object.assign,qm;function vc(e){if(qm===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);qm=t&&t[1]||""}return`
`+qm+e}var Vm=!1;function Hm(e,t){if(!e||Vm)return"";Vm=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var n=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){n=h}e.call(t.prototype)}else{try{throw Error()}catch(h){n=h}e()}}catch(h){if(h&&n&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=n.stack.split(`
`),a=i.length-1,l=s.length-1;1<=a&&0<=l&&i[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==s[l]){var d=`
`+i[a].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=a&&0<=l);break}}}finally{Vm=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?vc(e):""}function GI(e){switch(e.tag){case 5:return vc(e.type);case 16:return vc("Lazy");case 13:return vc("Suspense");case 19:return vc("SuspenseList");case 0:case 2:case 15:return e=Hm(e.type,!1),e;case 11:return e=Hm(e.type.render,!1),e;case 1:return e=Hm(e.type,!0),e;default:return""}}function V2(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _o:return"Fragment";case wo:return"Portal";case $2:return"Profiler";case ww:return"StrictMode";case B2:return"Suspense";case q2:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Sk:return(e.displayName||"Context")+".Consumer";case Nk:return(e._context.displayName||"Context")+".Provider";case _w:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Nw:return t=e.displayName||null,t!==null?t:V2(e.type)||"Memo";case hs:t=e._payload,e=e._init;try{return V2(e(t))}catch{}}return null}function $I(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V2(t);case 8:return t===ww?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Fs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function kk(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function BI(e){var t=kk(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Bd(e){e._valueTracker||(e._valueTracker=BI(e))}function Ck(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=kk(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Uh(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function H2(e,t){var r=t.checked;return xt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function t_(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Fs(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ek(e,t){t=t.checked,t!=null&&bw(e,"checked",t,!1)}function W2(e,t){Ek(e,t);var r=Fs(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?K2(e,t.type,r):t.hasOwnProperty("defaultValue")&&K2(e,t.type,Fs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function r_(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function K2(e,t,r){(t!=="number"||Uh(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var yc=Array.isArray;function Mo(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Fs(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Y2(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ce(91));return xt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function n_(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ce(92));if(yc(r)){if(1<r.length)throw Error(ce(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Fs(r)}}function Tk(e,t){var r=Fs(t.value),n=Fs(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function i_(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Pk(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function X2(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Pk(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var qd,Rk=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(qd=qd||document.createElement("div"),qd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=qd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Bc(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ic={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qI=["Webkit","ms","Moz","O"];Object.keys(Ic).forEach(function(e){qI.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ic[t]=Ic[e]})});function Ak(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ic.hasOwnProperty(e)&&Ic[e]?(""+t).trim():t+"px"}function Ik(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=Ak(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var VI=xt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Q2(e,t){if(t){if(VI[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ce(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ce(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ce(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ce(62))}}function Z2(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var J2=null;function Sw(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var eb=null,Fo=null,Lo=null;function s_(e){if(e=_u(e)){if(typeof eb!="function")throw Error(ce(280));var t=e.stateNode;t&&(t=Df(t),eb(e.stateNode,e.type,t))}}function Mk(e){Fo?Lo?Lo.push(e):Lo=[e]:Fo=e}function Fk(){if(Fo){var e=Fo,t=Lo;if(Lo=Fo=null,s_(e),t)for(e=0;e<t.length;e++)s_(t[e])}}function Lk(e,t){return e(t)}function Ok(){}var Wm=!1;function Dk(e,t,r){if(Wm)return e(t,r);Wm=!0;try{return Lk(e,t,r)}finally{Wm=!1,(Fo!==null||Lo!==null)&&(Ok(),Fk())}}function qc(e,t){var r=e.stateNode;if(r===null)return null;var n=Df(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ce(231,t,typeof r));return r}var tb=!1;if(Mi)try{var Ql={};Object.defineProperty(Ql,"passive",{get:function(){tb=!0}}),window.addEventListener("test",Ql,Ql),window.removeEventListener("test",Ql,Ql)}catch{tb=!1}function HI(e,t,r,n,i,s,a,l,d){var h=Array.prototype.slice.call(arguments,3);try{t.apply(r,h)}catch(f){this.onError(f)}}var Mc=!1,Gh=null,$h=!1,rb=null,WI={onError:function(e){Mc=!0,Gh=e}};function KI(e,t,r,n,i,s,a,l,d){Mc=!1,Gh=null,HI.apply(WI,arguments)}function YI(e,t,r,n,i,s,a,l,d){if(KI.apply(this,arguments),Mc){if(Mc){var h=Gh;Mc=!1,Gh=null}else throw Error(ce(198));$h||($h=!0,rb=h)}}function Ma(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function zk(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function a_(e){if(Ma(e)!==e)throw Error(ce(188))}function XI(e){var t=e.alternate;if(!t){if(t=Ma(e),t===null)throw Error(ce(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return a_(i),e;if(s===n)return a_(i),t;s=s.sibling}throw Error(ce(188))}if(r.return!==n.return)r=i,n=s;else{for(var a=!1,l=i.child;l;){if(l===r){a=!0,r=i,n=s;break}if(l===n){a=!0,n=i,r=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===r){a=!0,r=s,n=i;break}if(l===n){a=!0,n=s,r=i;break}l=l.sibling}if(!a)throw Error(ce(189))}}if(r.alternate!==n)throw Error(ce(190))}if(r.tag!==3)throw Error(ce(188));return r.stateNode.current===r?e:t}function Uk(e){return e=XI(e),e!==null?Gk(e):null}function Gk(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Gk(e);if(t!==null)return t;e=e.sibling}return null}var $k=Br.unstable_scheduleCallback,o_=Br.unstable_cancelCallback,QI=Br.unstable_shouldYield,ZI=Br.unstable_requestPaint,Ct=Br.unstable_now,JI=Br.unstable_getCurrentPriorityLevel,jw=Br.unstable_ImmediatePriority,Bk=Br.unstable_UserBlockingPriority,Bh=Br.unstable_NormalPriority,eM=Br.unstable_LowPriority,qk=Br.unstable_IdlePriority,Mf=null,ii=null;function tM(e){if(ii&&typeof ii.onCommitFiberRoot=="function")try{ii.onCommitFiberRoot(Mf,e,void 0,(e.current.flags&128)===128)}catch{}}var An=Math.clz32?Math.clz32:iM,rM=Math.log,nM=Math.LN2;function iM(e){return e>>>=0,e===0?32:31-(rM(e)/nM|0)|0}var Vd=64,Hd=4194304;function bc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function qh(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,s=e.pingedLanes,a=r&268435455;if(a!==0){var l=a&~i;l!==0?n=bc(l):(s&=a,s!==0&&(n=bc(s)))}else a=r&~i,a!==0?n=bc(a):s!==0&&(n=bc(s));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-An(t),i=1<<r,n|=e[r],t&=~i;return n}function sM(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function aM(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-An(s),l=1<<a,d=i[a];d===-1?(!(l&r)||l&n)&&(i[a]=sM(l,t)):d<=t&&(e.expiredLanes|=l),s&=~l}}function nb(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Vk(){var e=Vd;return Vd<<=1,!(Vd&4194240)&&(Vd=64),e}function Km(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function bu(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-An(t),e[t]=r}function oM(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-An(r),s=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~s}}function kw(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-An(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var Ye=0;function Hk(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Wk,Cw,Kk,Yk,Xk,ib=!1,Wd=[],Ns=null,Ss=null,js=null,Vc=new Map,Hc=new Map,gs=[],lM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function l_(e,t){switch(e){case"focusin":case"focusout":Ns=null;break;case"dragenter":case"dragleave":Ss=null;break;case"mouseover":case"mouseout":js=null;break;case"pointerover":case"pointerout":Vc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hc.delete(t.pointerId)}}function Zl(e,t,r,n,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},t!==null&&(t=_u(t),t!==null&&Cw(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function cM(e,t,r,n,i){switch(t){case"focusin":return Ns=Zl(Ns,e,t,r,n,i),!0;case"dragenter":return Ss=Zl(Ss,e,t,r,n,i),!0;case"mouseover":return js=Zl(js,e,t,r,n,i),!0;case"pointerover":var s=i.pointerId;return Vc.set(s,Zl(Vc.get(s)||null,e,t,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Hc.set(s,Zl(Hc.get(s)||null,e,t,r,n,i)),!0}return!1}function Qk(e){var t=ga(e.target);if(t!==null){var r=Ma(t);if(r!==null){if(t=r.tag,t===13){if(t=zk(r),t!==null){e.blockedOn=t,Xk(e.priority,function(){Kk(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Sh(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=sb(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);J2=n,r.target.dispatchEvent(n),J2=null}else return t=_u(r),t!==null&&Cw(t),e.blockedOn=r,!1;t.shift()}return!0}function c_(e,t,r){Sh(e)&&r.delete(t)}function uM(){ib=!1,Ns!==null&&Sh(Ns)&&(Ns=null),Ss!==null&&Sh(Ss)&&(Ss=null),js!==null&&Sh(js)&&(js=null),Vc.forEach(c_),Hc.forEach(c_)}function Jl(e,t){e.blockedOn===t&&(e.blockedOn=null,ib||(ib=!0,Br.unstable_scheduleCallback(Br.unstable_NormalPriority,uM)))}function Wc(e){function t(i){return Jl(i,e)}if(0<Wd.length){Jl(Wd[0],e);for(var r=1;r<Wd.length;r++){var n=Wd[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Ns!==null&&Jl(Ns,e),Ss!==null&&Jl(Ss,e),js!==null&&Jl(js,e),Vc.forEach(t),Hc.forEach(t),r=0;r<gs.length;r++)n=gs[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<gs.length&&(r=gs[0],r.blockedOn===null);)Qk(r),r.blockedOn===null&&gs.shift()}var Oo=Gi.ReactCurrentBatchConfig,Vh=!0;function dM(e,t,r,n){var i=Ye,s=Oo.transition;Oo.transition=null;try{Ye=1,Ew(e,t,r,n)}finally{Ye=i,Oo.transition=s}}function hM(e,t,r,n){var i=Ye,s=Oo.transition;Oo.transition=null;try{Ye=4,Ew(e,t,r,n)}finally{Ye=i,Oo.transition=s}}function Ew(e,t,r,n){if(Vh){var i=sb(e,t,r,n);if(i===null)ig(e,t,n,Hh,r),l_(e,n);else if(cM(i,e,t,r,n))n.stopPropagation();else if(l_(e,n),t&4&&-1<lM.indexOf(e)){for(;i!==null;){var s=_u(i);if(s!==null&&Wk(s),s=sb(e,t,r,n),s===null&&ig(e,t,n,Hh,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else ig(e,t,n,null,r)}}var Hh=null;function sb(e,t,r,n){if(Hh=null,e=Sw(n),e=ga(e),e!==null)if(t=Ma(e),t===null)e=null;else if(r=t.tag,r===13){if(e=zk(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Hh=e,null}function Zk(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(JI()){case jw:return 1;case Bk:return 4;case Bh:case eM:return 16;case qk:return 536870912;default:return 16}default:return 16}}var bs=null,Tw=null,jh=null;function Jk(){if(jh)return jh;var e,t=Tw,r=t.length,n,i="value"in bs?bs.value:bs.textContent,s=i.length;for(e=0;e<r&&t[e]===i[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===i[s-n];n++);return jh=i.slice(e,1<n?1-n:void 0)}function kh(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Kd(){return!0}function u_(){return!1}function Hr(e){function t(r,n,i,s,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Kd:u_,this.isPropagationStopped=u_,this}return xt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Kd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Kd)},persist:function(){},isPersistent:Kd}),t}var ll={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pw=Hr(ll),wu=xt({},ll,{view:0,detail:0}),fM=Hr(wu),Ym,Xm,ec,Ff=xt({},wu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rw,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ec&&(ec&&e.type==="mousemove"?(Ym=e.screenX-ec.screenX,Xm=e.screenY-ec.screenY):Xm=Ym=0,ec=e),Ym)},movementY:function(e){return"movementY"in e?e.movementY:Xm}}),d_=Hr(Ff),pM=xt({},Ff,{dataTransfer:0}),mM=Hr(pM),gM=xt({},wu,{relatedTarget:0}),Qm=Hr(gM),xM=xt({},ll,{animationName:0,elapsedTime:0,pseudoElement:0}),vM=Hr(xM),yM=xt({},ll,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bM=Hr(yM),wM=xt({},ll,{data:0}),h_=Hr(wM),_M={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},NM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},SM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jM(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=SM[e])?!!t[e]:!1}function Rw(){return jM}var kM=xt({},wu,{key:function(e){if(e.key){var t=_M[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=kh(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?NM[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rw,charCode:function(e){return e.type==="keypress"?kh(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?kh(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),CM=Hr(kM),EM=xt({},Ff,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),f_=Hr(EM),TM=xt({},wu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rw}),PM=Hr(TM),RM=xt({},ll,{propertyName:0,elapsedTime:0,pseudoElement:0}),AM=Hr(RM),IM=xt({},Ff,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),MM=Hr(IM),FM=[9,13,27,32],Aw=Mi&&"CompositionEvent"in window,Fc=null;Mi&&"documentMode"in document&&(Fc=document.documentMode);var LM=Mi&&"TextEvent"in window&&!Fc,eC=Mi&&(!Aw||Fc&&8<Fc&&11>=Fc),p_=String.fromCharCode(32),m_=!1;function tC(e,t){switch(e){case"keyup":return FM.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rC(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var No=!1;function OM(e,t){switch(e){case"compositionend":return rC(t);case"keypress":return t.which!==32?null:(m_=!0,p_);case"textInput":return e=t.data,e===p_&&m_?null:e;default:return null}}function DM(e,t){if(No)return e==="compositionend"||!Aw&&tC(e,t)?(e=Jk(),jh=Tw=bs=null,No=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return eC&&t.locale!=="ko"?null:t.data;default:return null}}var zM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function g_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!zM[e.type]:t==="textarea"}function nC(e,t,r,n){Mk(n),t=Wh(t,"onChange"),0<t.length&&(r=new Pw("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Lc=null,Kc=null;function UM(e){pC(e,0)}function Lf(e){var t=ko(e);if(Ck(t))return e}function GM(e,t){if(e==="change")return t}var iC=!1;if(Mi){var Zm;if(Mi){var Jm="oninput"in document;if(!Jm){var x_=document.createElement("div");x_.setAttribute("oninput","return;"),Jm=typeof x_.oninput=="function"}Zm=Jm}else Zm=!1;iC=Zm&&(!document.documentMode||9<document.documentMode)}function v_(){Lc&&(Lc.detachEvent("onpropertychange",sC),Kc=Lc=null)}function sC(e){if(e.propertyName==="value"&&Lf(Kc)){var t=[];nC(t,Kc,e,Sw(e)),Dk(UM,t)}}function $M(e,t,r){e==="focusin"?(v_(),Lc=t,Kc=r,Lc.attachEvent("onpropertychange",sC)):e==="focusout"&&v_()}function BM(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Lf(Kc)}function qM(e,t){if(e==="click")return Lf(t)}function VM(e,t){if(e==="input"||e==="change")return Lf(t)}function HM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ln=typeof Object.is=="function"?Object.is:HM;function Yc(e,t){if(Ln(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!G2.call(t,i)||!Ln(e[i],t[i]))return!1}return!0}function y_(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function b_(e,t){var r=y_(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=y_(r)}}function aC(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?aC(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function oC(){for(var e=window,t=Uh();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Uh(e.document)}return t}function Iw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function WM(e){var t=oC(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&aC(r.ownerDocument.documentElement,r)){if(n!==null&&Iw(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!e.extend&&s>n&&(i=n,n=s,s=i),i=b_(r,s);var a=b_(r,n);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var KM=Mi&&"documentMode"in document&&11>=document.documentMode,So=null,ab=null,Oc=null,ob=!1;function w_(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ob||So==null||So!==Uh(n)||(n=So,"selectionStart"in n&&Iw(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Oc&&Yc(Oc,n)||(Oc=n,n=Wh(ab,"onSelect"),0<n.length&&(t=new Pw("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=So)))}function Yd(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var jo={animationend:Yd("Animation","AnimationEnd"),animationiteration:Yd("Animation","AnimationIteration"),animationstart:Yd("Animation","AnimationStart"),transitionend:Yd("Transition","TransitionEnd")},eg={},lC={};Mi&&(lC=document.createElement("div").style,"AnimationEvent"in window||(delete jo.animationend.animation,delete jo.animationiteration.animation,delete jo.animationstart.animation),"TransitionEvent"in window||delete jo.transitionend.transition);function Of(e){if(eg[e])return eg[e];if(!jo[e])return e;var t=jo[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in lC)return eg[e]=t[r];return e}var cC=Of("animationend"),uC=Of("animationiteration"),dC=Of("animationstart"),hC=Of("transitionend"),fC=new Map,__="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Us(e,t){fC.set(e,t),Ia(t,[e])}for(var tg=0;tg<__.length;tg++){var rg=__[tg],YM=rg.toLowerCase(),XM=rg[0].toUpperCase()+rg.slice(1);Us(YM,"on"+XM)}Us(cC,"onAnimationEnd");Us(uC,"onAnimationIteration");Us(dC,"onAnimationStart");Us("dblclick","onDoubleClick");Us("focusin","onFocus");Us("focusout","onBlur");Us(hC,"onTransitionEnd");Vo("onMouseEnter",["mouseout","mouseover"]);Vo("onMouseLeave",["mouseout","mouseover"]);Vo("onPointerEnter",["pointerout","pointerover"]);Vo("onPointerLeave",["pointerout","pointerover"]);Ia("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ia("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ia("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ia("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ia("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ia("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QM=new Set("cancel close invalid load scroll toggle".split(" ").concat(wc));function N_(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,YI(n,t,void 0,e),e.currentTarget=null}function pC(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var a=n.length-1;0<=a;a--){var l=n[a],d=l.instance,h=l.currentTarget;if(l=l.listener,d!==s&&i.isPropagationStopped())break e;N_(i,l,h),s=d}else for(a=0;a<n.length;a++){if(l=n[a],d=l.instance,h=l.currentTarget,l=l.listener,d!==s&&i.isPropagationStopped())break e;N_(i,l,h),s=d}}}if($h)throw e=rb,$h=!1,rb=null,e}function it(e,t){var r=t[hb];r===void 0&&(r=t[hb]=new Set);var n=e+"__bubble";r.has(n)||(mC(t,e,2,!1),r.add(n))}function ng(e,t,r){var n=0;t&&(n|=4),mC(r,e,n,t)}var Xd="_reactListening"+Math.random().toString(36).slice(2);function Xc(e){if(!e[Xd]){e[Xd]=!0,_k.forEach(function(r){r!=="selectionchange"&&(QM.has(r)||ng(r,!1,e),ng(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Xd]||(t[Xd]=!0,ng("selectionchange",!1,t))}}function mC(e,t,r,n){switch(Zk(t)){case 1:var i=dM;break;case 4:i=hM;break;default:i=Ew}r=i.bind(null,t,r,e),i=void 0,!tb||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function ig(e,t,r,n,i){var s=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var d=a.tag;if((d===3||d===4)&&(d=a.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;a=a.return}for(;l!==null;){if(a=ga(l),a===null)return;if(d=a.tag,d===5||d===6){n=s=a;continue e}l=l.parentNode}}n=n.return}Dk(function(){var h=s,f=Sw(r),p=[];e:{var g=fC.get(e);if(g!==void 0){var x=Pw,w=e;switch(e){case"keypress":if(kh(r)===0)break e;case"keydown":case"keyup":x=CM;break;case"focusin":w="focus",x=Qm;break;case"focusout":w="blur",x=Qm;break;case"beforeblur":case"afterblur":x=Qm;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=d_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=mM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=PM;break;case cC:case uC:case dC:x=vM;break;case hC:x=AM;break;case"scroll":x=fM;break;case"wheel":x=MM;break;case"copy":case"cut":case"paste":x=bM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=f_}var b=(t&4)!==0,k=!b&&e==="scroll",_=b?g!==null?g+"Capture":null:g;b=[];for(var S=h,v;S!==null;){v=S;var j=v.stateNode;if(v.tag===5&&j!==null&&(v=j,_!==null&&(j=qc(S,_),j!=null&&b.push(Qc(S,j,v)))),k)break;S=S.return}0<b.length&&(g=new x(g,w,null,r,f),p.push({event:g,listeners:b}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",g&&r!==J2&&(w=r.relatedTarget||r.fromElement)&&(ga(w)||w[Fi]))break e;if((x||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,x?(w=r.relatedTarget||r.toElement,x=h,w=w?ga(w):null,w!==null&&(k=Ma(w),w!==k||w.tag!==5&&w.tag!==6)&&(w=null)):(x=null,w=h),x!==w)){if(b=d_,j="onMouseLeave",_="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(b=f_,j="onPointerLeave",_="onPointerEnter",S="pointer"),k=x==null?g:ko(x),v=w==null?g:ko(w),g=new b(j,S+"leave",x,r,f),g.target=k,g.relatedTarget=v,j=null,ga(f)===h&&(b=new b(_,S+"enter",w,r,f),b.target=v,b.relatedTarget=k,j=b),k=j,x&&w)t:{for(b=x,_=w,S=0,v=b;v;v=ho(v))S++;for(v=0,j=_;j;j=ho(j))v++;for(;0<S-v;)b=ho(b),S--;for(;0<v-S;)_=ho(_),v--;for(;S--;){if(b===_||_!==null&&b===_.alternate)break t;b=ho(b),_=ho(_)}b=null}else b=null;x!==null&&S_(p,g,x,b,!1),w!==null&&k!==null&&S_(p,k,w,b,!0)}}e:{if(g=h?ko(h):window,x=g.nodeName&&g.nodeName.toLowerCase(),x==="select"||x==="input"&&g.type==="file")var C=GM;else if(g_(g))if(iC)C=VM;else{C=BM;var R=$M}else(x=g.nodeName)&&x.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(C=qM);if(C&&(C=C(e,h))){nC(p,C,r,f);break e}R&&R(e,g,h),e==="focusout"&&(R=g._wrapperState)&&R.controlled&&g.type==="number"&&K2(g,"number",g.value)}switch(R=h?ko(h):window,e){case"focusin":(g_(R)||R.contentEditable==="true")&&(So=R,ab=h,Oc=null);break;case"focusout":Oc=ab=So=null;break;case"mousedown":ob=!0;break;case"contextmenu":case"mouseup":case"dragend":ob=!1,w_(p,r,f);break;case"selectionchange":if(KM)break;case"keydown":case"keyup":w_(p,r,f)}var L;if(Aw)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else No?tC(e,r)&&(A="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(A="onCompositionStart");A&&(eC&&r.locale!=="ko"&&(No||A!=="onCompositionStart"?A==="onCompositionEnd"&&No&&(L=Jk()):(bs=f,Tw="value"in bs?bs.value:bs.textContent,No=!0)),R=Wh(h,A),0<R.length&&(A=new h_(A,e,null,r,f),p.push({event:A,listeners:R}),L?A.data=L:(L=rC(r),L!==null&&(A.data=L)))),(L=LM?OM(e,r):DM(e,r))&&(h=Wh(h,"onBeforeInput"),0<h.length&&(f=new h_("onBeforeInput","beforeinput",null,r,f),p.push({event:f,listeners:h}),f.data=L))}pC(p,t)})}function Qc(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Wh(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=qc(e,r),s!=null&&n.unshift(Qc(e,s,i)),s=qc(e,t),s!=null&&n.push(Qc(e,s,i))),e=e.return}return n}function ho(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function S_(e,t,r,n,i){for(var s=t._reactName,a=[];r!==null&&r!==n;){var l=r,d=l.alternate,h=l.stateNode;if(d!==null&&d===n)break;l.tag===5&&h!==null&&(l=h,i?(d=qc(r,s),d!=null&&a.unshift(Qc(r,d,l))):i||(d=qc(r,s),d!=null&&a.push(Qc(r,d,l)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var ZM=/\r\n?/g,JM=/\u0000|\uFFFD/g;function j_(e){return(typeof e=="string"?e:""+e).replace(ZM,`
`).replace(JM,"")}function Qd(e,t,r){if(t=j_(t),j_(e)!==t&&r)throw Error(ce(425))}function Kh(){}var lb=null,cb=null;function ub(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var db=typeof setTimeout=="function"?setTimeout:void 0,eF=typeof clearTimeout=="function"?clearTimeout:void 0,k_=typeof Promise=="function"?Promise:void 0,tF=typeof queueMicrotask=="function"?queueMicrotask:typeof k_<"u"?function(e){return k_.resolve(null).then(e).catch(rF)}:db;function rF(e){setTimeout(function(){throw e})}function sg(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),Wc(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Wc(t)}function ks(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function C_(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var cl=Math.random().toString(36).slice(2),ti="__reactFiber$"+cl,Zc="__reactProps$"+cl,Fi="__reactContainer$"+cl,hb="__reactEvents$"+cl,nF="__reactListeners$"+cl,iF="__reactHandles$"+cl;function ga(e){var t=e[ti];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Fi]||r[ti]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=C_(e);e!==null;){if(r=e[ti])return r;e=C_(e)}return t}e=r,r=e.parentNode}return null}function _u(e){return e=e[ti]||e[Fi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ko(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ce(33))}function Df(e){return e[Zc]||null}var fb=[],Co=-1;function Gs(e){return{current:e}}function st(e){0>Co||(e.current=fb[Co],fb[Co]=null,Co--)}function tt(e,t){Co++,fb[Co]=e.current,e.current=t}var Ls={},dr=Gs(Ls),Rr=Gs(!1),ka=Ls;function Ho(e,t){var r=e.type.contextTypes;if(!r)return Ls;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=t[s];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ar(e){return e=e.childContextTypes,e!=null}function Yh(){st(Rr),st(dr)}function E_(e,t,r){if(dr.current!==Ls)throw Error(ce(168));tt(dr,t),tt(Rr,r)}function gC(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(ce(108,$I(e)||"Unknown",i));return xt({},r,n)}function Xh(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ls,ka=dr.current,tt(dr,e),tt(Rr,Rr.current),!0}function T_(e,t,r){var n=e.stateNode;if(!n)throw Error(ce(169));r?(e=gC(e,t,ka),n.__reactInternalMemoizedMergedChildContext=e,st(Rr),st(dr),tt(dr,e)):st(Rr),tt(Rr,r)}var ki=null,zf=!1,ag=!1;function xC(e){ki===null?ki=[e]:ki.push(e)}function sF(e){zf=!0,xC(e)}function $s(){if(!ag&&ki!==null){ag=!0;var e=0,t=Ye;try{var r=ki;for(Ye=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}ki=null,zf=!1}catch(i){throw ki!==null&&(ki=ki.slice(e+1)),$k(jw,$s),i}finally{Ye=t,ag=!1}}return null}var Eo=[],To=0,Qh=null,Zh=0,on=[],ln=0,Ca=null,Ci=1,Ei="";function fa(e,t){Eo[To++]=Zh,Eo[To++]=Qh,Qh=e,Zh=t}function vC(e,t,r){on[ln++]=Ci,on[ln++]=Ei,on[ln++]=Ca,Ca=e;var n=Ci;e=Ei;var i=32-An(n)-1;n&=~(1<<i),r+=1;var s=32-An(t)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,Ci=1<<32-An(t)+i|r<<i|n,Ei=s+e}else Ci=1<<s|r<<i|n,Ei=e}function Mw(e){e.return!==null&&(fa(e,1),vC(e,1,0))}function Fw(e){for(;e===Qh;)Qh=Eo[--To],Eo[To]=null,Zh=Eo[--To],Eo[To]=null;for(;e===Ca;)Ca=on[--ln],on[ln]=null,Ei=on[--ln],on[ln]=null,Ci=on[--ln],on[ln]=null}var $r=null,Gr=null,ct=!1,Tn=null;function yC(e,t){var r=cn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function P_(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,$r=e,Gr=ks(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,$r=e,Gr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Ca!==null?{id:Ci,overflow:Ei}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=cn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,$r=e,Gr=null,!0):!1;default:return!1}}function pb(e){return(e.mode&1)!==0&&(e.flags&128)===0}function mb(e){if(ct){var t=Gr;if(t){var r=t;if(!P_(e,t)){if(pb(e))throw Error(ce(418));t=ks(r.nextSibling);var n=$r;t&&P_(e,t)?yC(n,r):(e.flags=e.flags&-4097|2,ct=!1,$r=e)}}else{if(pb(e))throw Error(ce(418));e.flags=e.flags&-4097|2,ct=!1,$r=e}}}function R_(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;$r=e}function Zd(e){if(e!==$r)return!1;if(!ct)return R_(e),ct=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ub(e.type,e.memoizedProps)),t&&(t=Gr)){if(pb(e))throw bC(),Error(ce(418));for(;t;)yC(e,t),t=ks(t.nextSibling)}if(R_(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ce(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Gr=ks(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Gr=null}}else Gr=$r?ks(e.stateNode.nextSibling):null;return!0}function bC(){for(var e=Gr;e;)e=ks(e.nextSibling)}function Wo(){Gr=$r=null,ct=!1}function Lw(e){Tn===null?Tn=[e]:Tn.push(e)}var aF=Gi.ReactCurrentBatchConfig;function tc(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ce(309));var n=r.stateNode}if(!n)throw Error(ce(147,e));var i=n,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var l=i.refs;a===null?delete l[s]:l[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(ce(284));if(!r._owner)throw Error(ce(290,e))}return e}function Jd(e,t){throw e=Object.prototype.toString.call(t),Error(ce(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function A_(e){var t=e._init;return t(e._payload)}function wC(e){function t(_,S){if(e){var v=_.deletions;v===null?(_.deletions=[S],_.flags|=16):v.push(S)}}function r(_,S){if(!e)return null;for(;S!==null;)t(_,S),S=S.sibling;return null}function n(_,S){for(_=new Map;S!==null;)S.key!==null?_.set(S.key,S):_.set(S.index,S),S=S.sibling;return _}function i(_,S){return _=Ps(_,S),_.index=0,_.sibling=null,_}function s(_,S,v){return _.index=v,e?(v=_.alternate,v!==null?(v=v.index,v<S?(_.flags|=2,S):v):(_.flags|=2,S)):(_.flags|=1048576,S)}function a(_){return e&&_.alternate===null&&(_.flags|=2),_}function l(_,S,v,j){return S===null||S.tag!==6?(S=fg(v,_.mode,j),S.return=_,S):(S=i(S,v),S.return=_,S)}function d(_,S,v,j){var C=v.type;return C===_o?f(_,S,v.props.children,j,v.key):S!==null&&(S.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===hs&&A_(C)===S.type)?(j=i(S,v.props),j.ref=tc(_,S,v),j.return=_,j):(j=Ih(v.type,v.key,v.props,null,_.mode,j),j.ref=tc(_,S,v),j.return=_,j)}function h(_,S,v,j){return S===null||S.tag!==4||S.stateNode.containerInfo!==v.containerInfo||S.stateNode.implementation!==v.implementation?(S=pg(v,_.mode,j),S.return=_,S):(S=i(S,v.children||[]),S.return=_,S)}function f(_,S,v,j,C){return S===null||S.tag!==7?(S=Sa(v,_.mode,j,C),S.return=_,S):(S=i(S,v),S.return=_,S)}function p(_,S,v){if(typeof S=="string"&&S!==""||typeof S=="number")return S=fg(""+S,_.mode,v),S.return=_,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case $d:return v=Ih(S.type,S.key,S.props,null,_.mode,v),v.ref=tc(_,null,S),v.return=_,v;case wo:return S=pg(S,_.mode,v),S.return=_,S;case hs:var j=S._init;return p(_,j(S._payload),v)}if(yc(S)||Xl(S))return S=Sa(S,_.mode,v,null),S.return=_,S;Jd(_,S)}return null}function g(_,S,v,j){var C=S!==null?S.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return C!==null?null:l(_,S,""+v,j);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case $d:return v.key===C?d(_,S,v,j):null;case wo:return v.key===C?h(_,S,v,j):null;case hs:return C=v._init,g(_,S,C(v._payload),j)}if(yc(v)||Xl(v))return C!==null?null:f(_,S,v,j,null);Jd(_,v)}return null}function x(_,S,v,j,C){if(typeof j=="string"&&j!==""||typeof j=="number")return _=_.get(v)||null,l(S,_,""+j,C);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case $d:return _=_.get(j.key===null?v:j.key)||null,d(S,_,j,C);case wo:return _=_.get(j.key===null?v:j.key)||null,h(S,_,j,C);case hs:var R=j._init;return x(_,S,v,R(j._payload),C)}if(yc(j)||Xl(j))return _=_.get(v)||null,f(S,_,j,C,null);Jd(S,j)}return null}function w(_,S,v,j){for(var C=null,R=null,L=S,A=S=0,O=null;L!==null&&A<v.length;A++){L.index>A?(O=L,L=null):O=L.sibling;var T=g(_,L,v[A],j);if(T===null){L===null&&(L=O);break}e&&L&&T.alternate===null&&t(_,L),S=s(T,S,A),R===null?C=T:R.sibling=T,R=T,L=O}if(A===v.length)return r(_,L),ct&&fa(_,A),C;if(L===null){for(;A<v.length;A++)L=p(_,v[A],j),L!==null&&(S=s(L,S,A),R===null?C=L:R.sibling=L,R=L);return ct&&fa(_,A),C}for(L=n(_,L);A<v.length;A++)O=x(L,_,A,v[A],j),O!==null&&(e&&O.alternate!==null&&L.delete(O.key===null?A:O.key),S=s(O,S,A),R===null?C=O:R.sibling=O,R=O);return e&&L.forEach(function(I){return t(_,I)}),ct&&fa(_,A),C}function b(_,S,v,j){var C=Xl(v);if(typeof C!="function")throw Error(ce(150));if(v=C.call(v),v==null)throw Error(ce(151));for(var R=C=null,L=S,A=S=0,O=null,T=v.next();L!==null&&!T.done;A++,T=v.next()){L.index>A?(O=L,L=null):O=L.sibling;var I=g(_,L,T.value,j);if(I===null){L===null&&(L=O);break}e&&L&&I.alternate===null&&t(_,L),S=s(I,S,A),R===null?C=I:R.sibling=I,R=I,L=O}if(T.done)return r(_,L),ct&&fa(_,A),C;if(L===null){for(;!T.done;A++,T=v.next())T=p(_,T.value,j),T!==null&&(S=s(T,S,A),R===null?C=T:R.sibling=T,R=T);return ct&&fa(_,A),C}for(L=n(_,L);!T.done;A++,T=v.next())T=x(L,_,A,T.value,j),T!==null&&(e&&T.alternate!==null&&L.delete(T.key===null?A:T.key),S=s(T,S,A),R===null?C=T:R.sibling=T,R=T);return e&&L.forEach(function(M){return t(_,M)}),ct&&fa(_,A),C}function k(_,S,v,j){if(typeof v=="object"&&v!==null&&v.type===_o&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case $d:e:{for(var C=v.key,R=S;R!==null;){if(R.key===C){if(C=v.type,C===_o){if(R.tag===7){r(_,R.sibling),S=i(R,v.props.children),S.return=_,_=S;break e}}else if(R.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===hs&&A_(C)===R.type){r(_,R.sibling),S=i(R,v.props),S.ref=tc(_,R,v),S.return=_,_=S;break e}r(_,R);break}else t(_,R);R=R.sibling}v.type===_o?(S=Sa(v.props.children,_.mode,j,v.key),S.return=_,_=S):(j=Ih(v.type,v.key,v.props,null,_.mode,j),j.ref=tc(_,S,v),j.return=_,_=j)}return a(_);case wo:e:{for(R=v.key;S!==null;){if(S.key===R)if(S.tag===4&&S.stateNode.containerInfo===v.containerInfo&&S.stateNode.implementation===v.implementation){r(_,S.sibling),S=i(S,v.children||[]),S.return=_,_=S;break e}else{r(_,S);break}else t(_,S);S=S.sibling}S=pg(v,_.mode,j),S.return=_,_=S}return a(_);case hs:return R=v._init,k(_,S,R(v._payload),j)}if(yc(v))return w(_,S,v,j);if(Xl(v))return b(_,S,v,j);Jd(_,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,S!==null&&S.tag===6?(r(_,S.sibling),S=i(S,v),S.return=_,_=S):(r(_,S),S=fg(v,_.mode,j),S.return=_,_=S),a(_)):r(_,S)}return k}var Ko=wC(!0),_C=wC(!1),Jh=Gs(null),ef=null,Po=null,Ow=null;function Dw(){Ow=Po=ef=null}function zw(e){var t=Jh.current;st(Jh),e._currentValue=t}function gb(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Do(e,t){ef=e,Ow=Po=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Tr=!0),e.firstContext=null)}function hn(e){var t=e._currentValue;if(Ow!==e)if(e={context:e,memoizedValue:t,next:null},Po===null){if(ef===null)throw Error(ce(308));Po=e,ef.dependencies={lanes:0,firstContext:e}}else Po=Po.next=e;return t}var xa=null;function Uw(e){xa===null?xa=[e]:xa.push(e)}function NC(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,Uw(t)):(r.next=i.next,i.next=r),t.interleaved=r,Li(e,n)}function Li(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var fs=!1;function Gw(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function SC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ai(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Cs(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,$e&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Li(e,r)}return i=n.interleaved,i===null?(t.next=t,Uw(n)):(t.next=i.next,i.next=t),n.interleaved=t,Li(e,r)}function Ch(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,kw(e,r)}}function I_(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?i=s=t:s=s.next=t}else i=s=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function tf(e,t,r,n){var i=e.updateQueue;fs=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var d=l,h=d.next;d.next=null,a===null?s=h:a.next=h,a=d;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=h:l.next=h,f.lastBaseUpdate=d))}if(s!==null){var p=i.baseState;a=0,f=h=d=null,l=s;do{var g=l.lane,x=l.eventTime;if((n&g)===g){f!==null&&(f=f.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=e,b=l;switch(g=t,x=r,b.tag){case 1:if(w=b.payload,typeof w=="function"){p=w.call(x,p,g);break e}p=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=b.payload,g=typeof w=="function"?w.call(x,p,g):w,g==null)break e;p=xt({},p,g);break e;case 2:fs=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,g=i.effects,g===null?i.effects=[l]:g.push(l))}else x={eventTime:x,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(h=f=x,d=p):f=f.next=x,a|=g;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;g=l,l=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(1);if(f===null&&(d=p),i.baseState=d,i.firstBaseUpdate=h,i.lastBaseUpdate=f,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Ta|=a,e.lanes=a,e.memoizedState=p}}function M_(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(ce(191,i));i.call(n)}}}var Nu={},si=Gs(Nu),Jc=Gs(Nu),eu=Gs(Nu);function va(e){if(e===Nu)throw Error(ce(174));return e}function $w(e,t){switch(tt(eu,t),tt(Jc,e),tt(si,Nu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:X2(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=X2(t,e)}st(si),tt(si,t)}function Yo(){st(si),st(Jc),st(eu)}function jC(e){va(eu.current);var t=va(si.current),r=X2(t,e.type);t!==r&&(tt(Jc,e),tt(si,r))}function Bw(e){Jc.current===e&&(st(si),st(Jc))}var mt=Gs(0);function rf(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var og=[];function qw(){for(var e=0;e<og.length;e++)og[e]._workInProgressVersionPrimary=null;og.length=0}var Eh=Gi.ReactCurrentDispatcher,lg=Gi.ReactCurrentBatchConfig,Ea=0,gt=null,Ot=null,Ht=null,nf=!1,Dc=!1,tu=0,oF=0;function lr(){throw Error(ce(321))}function Vw(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ln(e[r],t[r]))return!1;return!0}function Hw(e,t,r,n,i,s){if(Ea=s,gt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Eh.current=e===null||e.memoizedState===null?dF:hF,e=r(n,i),Dc){s=0;do{if(Dc=!1,tu=0,25<=s)throw Error(ce(301));s+=1,Ht=Ot=null,t.updateQueue=null,Eh.current=fF,e=r(n,i)}while(Dc)}if(Eh.current=sf,t=Ot!==null&&Ot.next!==null,Ea=0,Ht=Ot=gt=null,nf=!1,t)throw Error(ce(300));return e}function Ww(){var e=tu!==0;return tu=0,e}function Jn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?gt.memoizedState=Ht=e:Ht=Ht.next=e,Ht}function fn(){if(Ot===null){var e=gt.alternate;e=e!==null?e.memoizedState:null}else e=Ot.next;var t=Ht===null?gt.memoizedState:Ht.next;if(t!==null)Ht=t,Ot=e;else{if(e===null)throw Error(ce(310));Ot=e,e={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},Ht===null?gt.memoizedState=Ht=e:Ht=Ht.next=e}return Ht}function ru(e,t){return typeof t=="function"?t(e):t}function cg(e){var t=fn(),r=t.queue;if(r===null)throw Error(ce(311));r.lastRenderedReducer=e;var n=Ot,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var l=a=null,d=null,h=s;do{var f=h.lane;if((Ea&f)===f)d!==null&&(d=d.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),n=h.hasEagerState?h.eagerState:e(n,h.action);else{var p={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};d===null?(l=d=p,a=n):d=d.next=p,gt.lanes|=f,Ta|=f}h=h.next}while(h!==null&&h!==s);d===null?a=n:d.next=l,Ln(n,t.memoizedState)||(Tr=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=d,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do s=i.lane,gt.lanes|=s,Ta|=s,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ug(e){var t=fn(),r=t.queue;if(r===null)throw Error(ce(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,s=t.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do s=e(s,a.action),a=a.next;while(a!==i);Ln(s,t.memoizedState)||(Tr=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function kC(){}function CC(e,t){var r=gt,n=fn(),i=t(),s=!Ln(n.memoizedState,i);if(s&&(n.memoizedState=i,Tr=!0),n=n.queue,Kw(PC.bind(null,r,n,e),[e]),n.getSnapshot!==t||s||Ht!==null&&Ht.memoizedState.tag&1){if(r.flags|=2048,nu(9,TC.bind(null,r,n,i,t),void 0,null),Wt===null)throw Error(ce(349));Ea&30||EC(r,t,i)}return i}function EC(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=gt.updateQueue,t===null?(t={lastEffect:null,stores:null},gt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function TC(e,t,r,n){t.value=r,t.getSnapshot=n,RC(t)&&AC(e)}function PC(e,t,r){return r(function(){RC(t)&&AC(e)})}function RC(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ln(e,r)}catch{return!0}}function AC(e){var t=Li(e,1);t!==null&&In(t,e,1,-1)}function F_(e){var t=Jn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ru,lastRenderedState:e},t.queue=e,e=e.dispatch=uF.bind(null,gt,e),[t.memoizedState,e]}function nu(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=gt.updateQueue,t===null?(t={lastEffect:null,stores:null},gt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function IC(){return fn().memoizedState}function Th(e,t,r,n){var i=Jn();gt.flags|=e,i.memoizedState=nu(1|t,r,void 0,n===void 0?null:n)}function Uf(e,t,r,n){var i=fn();n=n===void 0?null:n;var s=void 0;if(Ot!==null){var a=Ot.memoizedState;if(s=a.destroy,n!==null&&Vw(n,a.deps)){i.memoizedState=nu(t,r,s,n);return}}gt.flags|=e,i.memoizedState=nu(1|t,r,s,n)}function L_(e,t){return Th(8390656,8,e,t)}function Kw(e,t){return Uf(2048,8,e,t)}function MC(e,t){return Uf(4,2,e,t)}function FC(e,t){return Uf(4,4,e,t)}function LC(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function OC(e,t,r){return r=r!=null?r.concat([e]):null,Uf(4,4,LC.bind(null,t,e),r)}function Yw(){}function DC(e,t){var r=fn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Vw(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function zC(e,t){var r=fn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Vw(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function UC(e,t,r){return Ea&21?(Ln(r,t)||(r=Vk(),gt.lanes|=r,Ta|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Tr=!0),e.memoizedState=r)}function lF(e,t){var r=Ye;Ye=r!==0&&4>r?r:4,e(!0);var n=lg.transition;lg.transition={};try{e(!1),t()}finally{Ye=r,lg.transition=n}}function GC(){return fn().memoizedState}function cF(e,t,r){var n=Ts(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},$C(e))BC(t,r);else if(r=NC(e,t,r,n),r!==null){var i=vr();In(r,e,n,i),qC(r,t,n)}}function uF(e,t,r){var n=Ts(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if($C(e))BC(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,l=s(a,r);if(i.hasEagerState=!0,i.eagerState=l,Ln(l,a)){var d=t.interleaved;d===null?(i.next=i,Uw(t)):(i.next=d.next,d.next=i),t.interleaved=i;return}}catch{}finally{}r=NC(e,t,i,n),r!==null&&(i=vr(),In(r,e,n,i),qC(r,t,n))}}function $C(e){var t=e.alternate;return e===gt||t!==null&&t===gt}function BC(e,t){Dc=nf=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function qC(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,kw(e,r)}}var sf={readContext:hn,useCallback:lr,useContext:lr,useEffect:lr,useImperativeHandle:lr,useInsertionEffect:lr,useLayoutEffect:lr,useMemo:lr,useReducer:lr,useRef:lr,useState:lr,useDebugValue:lr,useDeferredValue:lr,useTransition:lr,useMutableSource:lr,useSyncExternalStore:lr,useId:lr,unstable_isNewReconciler:!1},dF={readContext:hn,useCallback:function(e,t){return Jn().memoizedState=[e,t===void 0?null:t],e},useContext:hn,useEffect:L_,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Th(4194308,4,LC.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Th(4194308,4,e,t)},useInsertionEffect:function(e,t){return Th(4,2,e,t)},useMemo:function(e,t){var r=Jn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Jn();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=cF.bind(null,gt,e),[n.memoizedState,e]},useRef:function(e){var t=Jn();return e={current:e},t.memoizedState=e},useState:F_,useDebugValue:Yw,useDeferredValue:function(e){return Jn().memoizedState=e},useTransition:function(){var e=F_(!1),t=e[0];return e=lF.bind(null,e[1]),Jn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=gt,i=Jn();if(ct){if(r===void 0)throw Error(ce(407));r=r()}else{if(r=t(),Wt===null)throw Error(ce(349));Ea&30||EC(n,t,r)}i.memoizedState=r;var s={value:r,getSnapshot:t};return i.queue=s,L_(PC.bind(null,n,s,e),[e]),n.flags|=2048,nu(9,TC.bind(null,n,s,r,t),void 0,null),r},useId:function(){var e=Jn(),t=Wt.identifierPrefix;if(ct){var r=Ei,n=Ci;r=(n&~(1<<32-An(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=tu++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=oF++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},hF={readContext:hn,useCallback:DC,useContext:hn,useEffect:Kw,useImperativeHandle:OC,useInsertionEffect:MC,useLayoutEffect:FC,useMemo:zC,useReducer:cg,useRef:IC,useState:function(){return cg(ru)},useDebugValue:Yw,useDeferredValue:function(e){var t=fn();return UC(t,Ot.memoizedState,e)},useTransition:function(){var e=cg(ru)[0],t=fn().memoizedState;return[e,t]},useMutableSource:kC,useSyncExternalStore:CC,useId:GC,unstable_isNewReconciler:!1},fF={readContext:hn,useCallback:DC,useContext:hn,useEffect:Kw,useImperativeHandle:OC,useInsertionEffect:MC,useLayoutEffect:FC,useMemo:zC,useReducer:ug,useRef:IC,useState:function(){return ug(ru)},useDebugValue:Yw,useDeferredValue:function(e){var t=fn();return Ot===null?t.memoizedState=e:UC(t,Ot.memoizedState,e)},useTransition:function(){var e=ug(ru)[0],t=fn().memoizedState;return[e,t]},useMutableSource:kC,useSyncExternalStore:CC,useId:GC,unstable_isNewReconciler:!1};function Cn(e,t){if(e&&e.defaultProps){t=xt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function xb(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:xt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Gf={isMounted:function(e){return(e=e._reactInternals)?Ma(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=vr(),i=Ts(e),s=Ai(n,i);s.payload=t,r!=null&&(s.callback=r),t=Cs(e,s,i),t!==null&&(In(t,e,i,n),Ch(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=vr(),i=Ts(e),s=Ai(n,i);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=Cs(e,s,i),t!==null&&(In(t,e,i,n),Ch(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=vr(),n=Ts(e),i=Ai(r,n);i.tag=2,t!=null&&(i.callback=t),t=Cs(e,i,n),t!==null&&(In(t,e,n,r),Ch(t,e,n))}};function O_(e,t,r,n,i,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,s,a):t.prototype&&t.prototype.isPureReactComponent?!Yc(r,n)||!Yc(i,s):!0}function VC(e,t,r){var n=!1,i=Ls,s=t.contextType;return typeof s=="object"&&s!==null?s=hn(s):(i=Ar(t)?ka:dr.current,n=t.contextTypes,s=(n=n!=null)?Ho(e,i):Ls),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Gf,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function D_(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Gf.enqueueReplaceState(t,t.state,null)}function vb(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},Gw(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=hn(s):(s=Ar(t)?ka:dr.current,i.context=Ho(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(xb(e,t,s,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Gf.enqueueReplaceState(i,i.state,null),tf(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Xo(e,t){try{var r="",n=t;do r+=GI(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function dg(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function yb(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var pF=typeof WeakMap=="function"?WeakMap:Map;function HC(e,t,r){r=Ai(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){of||(of=!0,Tb=n),yb(e,t)},r}function WC(e,t,r){r=Ai(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){yb(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){yb(e,t),typeof n!="function"&&(Es===null?Es=new Set([this]):Es.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function z_(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new pF;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=EF.bind(null,e,t,r),t.then(e,e))}function U_(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function G_(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ai(-1,1),t.tag=2,Cs(r,t,1))),r.lanes|=1),e)}var mF=Gi.ReactCurrentOwner,Tr=!1;function xr(e,t,r,n){t.child=e===null?_C(t,null,r,n):Ko(t,e.child,r,n)}function $_(e,t,r,n,i){r=r.render;var s=t.ref;return Do(t,i),n=Hw(e,t,r,n,s,i),r=Ww(),e!==null&&!Tr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Oi(e,t,i)):(ct&&r&&Mw(t),t.flags|=1,xr(e,t,n,i),t.child)}function B_(e,t,r,n,i){if(e===null){var s=r.type;return typeof s=="function"&&!n5(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,KC(e,t,s,n,i)):(e=Ih(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:Yc,r(a,n)&&e.ref===t.ref)return Oi(e,t,i)}return t.flags|=1,e=Ps(s,n),e.ref=t.ref,e.return=t,t.child=e}function KC(e,t,r,n,i){if(e!==null){var s=e.memoizedProps;if(Yc(s,n)&&e.ref===t.ref)if(Tr=!1,t.pendingProps=n=s,(e.lanes&i)!==0)e.flags&131072&&(Tr=!0);else return t.lanes=e.lanes,Oi(e,t,i)}return bb(e,t,r,n,i)}function YC(e,t,r){var n=t.pendingProps,i=n.children,s=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(Ao,zr),zr|=r;else{if(!(r&1073741824))return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,tt(Ao,zr),zr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,tt(Ao,zr),zr|=n}else s!==null?(n=s.baseLanes|r,t.memoizedState=null):n=r,tt(Ao,zr),zr|=n;return xr(e,t,i,r),t.child}function XC(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function bb(e,t,r,n,i){var s=Ar(r)?ka:dr.current;return s=Ho(t,s),Do(t,i),r=Hw(e,t,r,n,s,i),n=Ww(),e!==null&&!Tr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Oi(e,t,i)):(ct&&n&&Mw(t),t.flags|=1,xr(e,t,r,i),t.child)}function q_(e,t,r,n,i){if(Ar(r)){var s=!0;Xh(t)}else s=!1;if(Do(t,i),t.stateNode===null)Ph(e,t),VC(t,r,n),vb(t,r,n,i),n=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var d=a.context,h=r.contextType;typeof h=="object"&&h!==null?h=hn(h):(h=Ar(r)?ka:dr.current,h=Ho(t,h));var f=r.getDerivedStateFromProps,p=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||d!==h)&&D_(t,a,n,h),fs=!1;var g=t.memoizedState;a.state=g,tf(t,n,a,i),d=t.memoizedState,l!==n||g!==d||Rr.current||fs?(typeof f=="function"&&(xb(t,r,f,n),d=t.memoizedState),(l=fs||O_(t,r,l,n,g,d,h))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=d),a.props=n,a.state=d,a.context=h,n=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,SC(e,t),l=t.memoizedProps,h=t.type===t.elementType?l:Cn(t.type,l),a.props=h,p=t.pendingProps,g=a.context,d=r.contextType,typeof d=="object"&&d!==null?d=hn(d):(d=Ar(r)?ka:dr.current,d=Ho(t,d));var x=r.getDerivedStateFromProps;(f=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==p||g!==d)&&D_(t,a,n,d),fs=!1,g=t.memoizedState,a.state=g,tf(t,n,a,i);var w=t.memoizedState;l!==p||g!==w||Rr.current||fs?(typeof x=="function"&&(xb(t,r,x,n),w=t.memoizedState),(h=fs||O_(t,r,h,n,g,w,d)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,w,d),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,w,d)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=w),a.props=n,a.state=w,a.context=d,n=h):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),n=!1)}return wb(e,t,r,n,s,i)}function wb(e,t,r,n,i,s){XC(e,t);var a=(t.flags&128)!==0;if(!n&&!a)return i&&T_(t,r,!1),Oi(e,t,s);n=t.stateNode,mF.current=t;var l=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=Ko(t,e.child,null,s),t.child=Ko(t,null,l,s)):xr(e,t,l,s),t.memoizedState=n.state,i&&T_(t,r,!0),t.child}function QC(e){var t=e.stateNode;t.pendingContext?E_(e,t.pendingContext,t.pendingContext!==t.context):t.context&&E_(e,t.context,!1),$w(e,t.containerInfo)}function V_(e,t,r,n,i){return Wo(),Lw(i),t.flags|=256,xr(e,t,r,n),t.child}var _b={dehydrated:null,treeContext:null,retryLane:0};function Nb(e){return{baseLanes:e,cachePool:null,transitions:null}}function ZC(e,t,r){var n=t.pendingProps,i=mt.current,s=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),tt(mt,i&1),e===null)return mb(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,e=n.fallback,s?(n=t.mode,s=t.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=qf(a,n,0,null),e=Sa(e,n,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Nb(r),t.memoizedState=_b,e):Xw(t,a));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return gF(e,t,a,n,l,i,r);if(s){s=n.fallback,a=t.mode,i=e.child,l=i.sibling;var d={mode:"hidden",children:n.children};return!(a&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=d,t.deletions=null):(n=Ps(i,d),n.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Ps(l,s):(s=Sa(s,a,r,null),s.flags|=2),s.return=t,n.return=t,n.sibling=s,t.child=n,n=s,s=t.child,a=e.child.memoizedState,a=a===null?Nb(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~r,t.memoizedState=_b,n}return s=e.child,e=s.sibling,n=Ps(s,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Xw(e,t){return t=qf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function eh(e,t,r,n){return n!==null&&Lw(n),Ko(t,e.child,null,r),e=Xw(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function gF(e,t,r,n,i,s,a){if(r)return t.flags&256?(t.flags&=-257,n=dg(Error(ce(422))),eh(e,t,a,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=n.fallback,i=t.mode,n=qf({mode:"visible",children:n.children},i,0,null),s=Sa(s,i,a,null),s.flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,t.mode&1&&Ko(t,e.child,null,a),t.child.memoizedState=Nb(a),t.memoizedState=_b,s);if(!(t.mode&1))return eh(e,t,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var l=n.dgst;return n=l,s=Error(ce(419)),n=dg(s,n,void 0),eh(e,t,a,n)}if(l=(a&e.childLanes)!==0,Tr||l){if(n=Wt,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Li(e,i),In(n,e,i,-1))}return r5(),n=dg(Error(ce(421))),eh(e,t,a,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=TF.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Gr=ks(i.nextSibling),$r=t,ct=!0,Tn=null,e!==null&&(on[ln++]=Ci,on[ln++]=Ei,on[ln++]=Ca,Ci=e.id,Ei=e.overflow,Ca=t),t=Xw(t,n.children),t.flags|=4096,t)}function H_(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),gb(e.return,t,r)}function hg(e,t,r,n,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function JC(e,t,r){var n=t.pendingProps,i=n.revealOrder,s=n.tail;if(xr(e,t,n.children,r),n=mt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&H_(e,r,t);else if(e.tag===19)H_(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(tt(mt,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&rf(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),hg(t,!1,i,r,s);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&rf(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}hg(t,!0,r,null,s);break;case"together":hg(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ph(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Oi(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ta|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ce(153));if(t.child!==null){for(e=t.child,r=Ps(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ps(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function xF(e,t,r){switch(t.tag){case 3:QC(t),Wo();break;case 5:jC(t);break;case 1:Ar(t.type)&&Xh(t);break;case 4:$w(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;tt(Jh,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(tt(mt,mt.current&1),t.flags|=128,null):r&t.child.childLanes?ZC(e,t,r):(tt(mt,mt.current&1),e=Oi(e,t,r),e!==null?e.sibling:null);tt(mt,mt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return JC(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),tt(mt,mt.current),n)break;return null;case 22:case 23:return t.lanes=0,YC(e,t,r)}return Oi(e,t,r)}var eE,Sb,tE,rE;eE=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Sb=function(){};tE=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,va(si.current);var s=null;switch(r){case"input":i=H2(e,i),n=H2(e,n),s=[];break;case"select":i=xt({},i,{value:void 0}),n=xt({},n,{value:void 0}),s=[];break;case"textarea":i=Y2(e,i),n=Y2(e,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Kh)}Q2(r,n);var a;r=null;for(h in i)if(!n.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&($c.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in n){var d=n[h];if(l=i!=null?i[h]:void 0,n.hasOwnProperty(h)&&d!==l&&(d!=null||l!=null))if(h==="style")if(l){for(a in l)!l.hasOwnProperty(a)||d&&d.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in d)d.hasOwnProperty(a)&&l[a]!==d[a]&&(r||(r={}),r[a]=d[a])}else r||(s||(s=[]),s.push(h,r)),r=d;else h==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,l=l?l.__html:void 0,d!=null&&l!==d&&(s=s||[]).push(h,d)):h==="children"?typeof d!="string"&&typeof d!="number"||(s=s||[]).push(h,""+d):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&($c.hasOwnProperty(h)?(d!=null&&h==="onScroll"&&it("scroll",e),s||l===d||(s=[])):(s=s||[]).push(h,d))}r&&(s=s||[]).push("style",r);var h=s;(t.updateQueue=h)&&(t.flags|=4)}};rE=function(e,t,r,n){r!==n&&(t.flags|=4)};function rc(e,t){if(!ct)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function cr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function vF(e,t,r){var n=t.pendingProps;switch(Fw(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cr(t),null;case 1:return Ar(t.type)&&Yh(),cr(t),null;case 3:return n=t.stateNode,Yo(),st(Rr),st(dr),qw(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Zd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Tn!==null&&(Ab(Tn),Tn=null))),Sb(e,t),cr(t),null;case 5:Bw(t);var i=va(eu.current);if(r=t.type,e!==null&&t.stateNode!=null)tE(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ce(166));return cr(t),null}if(e=va(si.current),Zd(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[ti]=t,n[Zc]=s,e=(t.mode&1)!==0,r){case"dialog":it("cancel",n),it("close",n);break;case"iframe":case"object":case"embed":it("load",n);break;case"video":case"audio":for(i=0;i<wc.length;i++)it(wc[i],n);break;case"source":it("error",n);break;case"img":case"image":case"link":it("error",n),it("load",n);break;case"details":it("toggle",n);break;case"input":t_(n,s),it("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},it("invalid",n);break;case"textarea":n_(n,s),it("invalid",n)}Q2(r,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?n.textContent!==l&&(s.suppressHydrationWarning!==!0&&Qd(n.textContent,l,e),i=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Qd(n.textContent,l,e),i=["children",""+l]):$c.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&it("scroll",n)}switch(r){case"input":Bd(n),r_(n,s,!0);break;case"textarea":Bd(n),i_(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Kh)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Pk(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[ti]=t,e[Zc]=n,eE(e,t,!1,!1),t.stateNode=e;e:{switch(a=Z2(r,n),r){case"dialog":it("cancel",e),it("close",e),i=n;break;case"iframe":case"object":case"embed":it("load",e),i=n;break;case"video":case"audio":for(i=0;i<wc.length;i++)it(wc[i],e);i=n;break;case"source":it("error",e),i=n;break;case"img":case"image":case"link":it("error",e),it("load",e),i=n;break;case"details":it("toggle",e),i=n;break;case"input":t_(e,n),i=H2(e,n),it("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=xt({},n,{value:void 0}),it("invalid",e);break;case"textarea":n_(e,n),i=Y2(e,n),it("invalid",e);break;default:i=n}Q2(r,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var d=l[s];s==="style"?Ik(e,d):s==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Rk(e,d)):s==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&Bc(e,d):typeof d=="number"&&Bc(e,""+d):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&($c.hasOwnProperty(s)?d!=null&&s==="onScroll"&&it("scroll",e):d!=null&&bw(e,s,d,a))}switch(r){case"input":Bd(e),r_(e,n,!1);break;case"textarea":Bd(e),i_(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Fs(n.value));break;case"select":e.multiple=!!n.multiple,s=n.value,s!=null?Mo(e,!!n.multiple,s,!1):n.defaultValue!=null&&Mo(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Kh)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return cr(t),null;case 6:if(e&&t.stateNode!=null)rE(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ce(166));if(r=va(eu.current),va(si.current),Zd(t)){if(n=t.stateNode,r=t.memoizedProps,n[ti]=t,(s=n.nodeValue!==r)&&(e=$r,e!==null))switch(e.tag){case 3:Qd(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Qd(n.nodeValue,r,(e.mode&1)!==0)}s&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ti]=t,t.stateNode=n}return cr(t),null;case 13:if(st(mt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ct&&Gr!==null&&t.mode&1&&!(t.flags&128))bC(),Wo(),t.flags|=98560,s=!1;else if(s=Zd(t),n!==null&&n.dehydrated!==null){if(e===null){if(!s)throw Error(ce(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ce(317));s[ti]=t}else Wo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;cr(t),s=!1}else Tn!==null&&(Ab(Tn),Tn=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||mt.current&1?Dt===0&&(Dt=3):r5())),t.updateQueue!==null&&(t.flags|=4),cr(t),null);case 4:return Yo(),Sb(e,t),e===null&&Xc(t.stateNode.containerInfo),cr(t),null;case 10:return zw(t.type._context),cr(t),null;case 17:return Ar(t.type)&&Yh(),cr(t),null;case 19:if(st(mt),s=t.memoizedState,s===null)return cr(t),null;if(n=(t.flags&128)!==0,a=s.rendering,a===null)if(n)rc(s,!1);else{if(Dt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=rf(e),a!==null){for(t.flags|=128,rc(s,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)s=r,e=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return tt(mt,mt.current&1|2),t.child}e=e.sibling}s.tail!==null&&Ct()>Qo&&(t.flags|=128,n=!0,rc(s,!1),t.lanes=4194304)}else{if(!n)if(e=rf(a),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),rc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!ct)return cr(t),null}else 2*Ct()-s.renderingStartTime>Qo&&r!==1073741824&&(t.flags|=128,n=!0,rc(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(r=s.last,r!==null?r.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ct(),t.sibling=null,r=mt.current,tt(mt,n?r&1|2:r&1),t):(cr(t),null);case 22:case 23:return t5(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?zr&1073741824&&(cr(t),t.subtreeFlags&6&&(t.flags|=8192)):cr(t),null;case 24:return null;case 25:return null}throw Error(ce(156,t.tag))}function yF(e,t){switch(Fw(t),t.tag){case 1:return Ar(t.type)&&Yh(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Yo(),st(Rr),st(dr),qw(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Bw(t),null;case 13:if(st(mt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ce(340));Wo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return st(mt),null;case 4:return Yo(),null;case 10:return zw(t.type._context),null;case 22:case 23:return t5(),null;case 24:return null;default:return null}}var th=!1,ur=!1,bF=typeof WeakSet=="function"?WeakSet:Set,we=null;function Ro(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){wt(e,t,n)}else r.current=null}function jb(e,t,r){try{r()}catch(n){wt(e,t,n)}}var W_=!1;function wF(e,t){if(lb=Vh,e=oC(),Iw(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,l=-1,d=-1,h=0,f=0,p=e,g=null;t:for(;;){for(var x;p!==r||i!==0&&p.nodeType!==3||(l=a+i),p!==s||n!==0&&p.nodeType!==3||(d=a+n),p.nodeType===3&&(a+=p.nodeValue.length),(x=p.firstChild)!==null;)g=p,p=x;for(;;){if(p===e)break t;if(g===r&&++h===i&&(l=a),g===s&&++f===n&&(d=a),(x=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=x}r=l===-1||d===-1?null:{start:l,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(cb={focusedElem:e,selectionRange:r},Vh=!1,we=t;we!==null;)if(t=we,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,we=e;else for(;we!==null;){t=we;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var b=w.memoizedProps,k=w.memoizedState,_=t.stateNode,S=_.getSnapshotBeforeUpdate(t.elementType===t.type?b:Cn(t.type,b),k);_.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(j){wt(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,we=e;break}we=t.return}return w=W_,W_=!1,w}function zc(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&jb(t,r,s)}i=i.next}while(i!==n)}}function $f(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function kb(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function nE(e){var t=e.alternate;t!==null&&(e.alternate=null,nE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ti],delete t[Zc],delete t[hb],delete t[nF],delete t[iF])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function iE(e){return e.tag===5||e.tag===3||e.tag===4}function K_(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||iE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Cb(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Kh));else if(n!==4&&(e=e.child,e!==null))for(Cb(e,t,r),e=e.sibling;e!==null;)Cb(e,t,r),e=e.sibling}function Eb(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Eb(e,t,r),e=e.sibling;e!==null;)Eb(e,t,r),e=e.sibling}var Jt=null,En=!1;function ss(e,t,r){for(r=r.child;r!==null;)sE(e,t,r),r=r.sibling}function sE(e,t,r){if(ii&&typeof ii.onCommitFiberUnmount=="function")try{ii.onCommitFiberUnmount(Mf,r)}catch{}switch(r.tag){case 5:ur||Ro(r,t);case 6:var n=Jt,i=En;Jt=null,ss(e,t,r),Jt=n,En=i,Jt!==null&&(En?(e=Jt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Jt.removeChild(r.stateNode));break;case 18:Jt!==null&&(En?(e=Jt,r=r.stateNode,e.nodeType===8?sg(e.parentNode,r):e.nodeType===1&&sg(e,r),Wc(e)):sg(Jt,r.stateNode));break;case 4:n=Jt,i=En,Jt=r.stateNode.containerInfo,En=!0,ss(e,t,r),Jt=n,En=i;break;case 0:case 11:case 14:case 15:if(!ur&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&jb(r,t,a),i=i.next}while(i!==n)}ss(e,t,r);break;case 1:if(!ur&&(Ro(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){wt(r,t,l)}ss(e,t,r);break;case 21:ss(e,t,r);break;case 22:r.mode&1?(ur=(n=ur)||r.memoizedState!==null,ss(e,t,r),ur=n):ss(e,t,r);break;default:ss(e,t,r)}}function Y_(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new bF),t.forEach(function(n){var i=PF.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function jn(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:Jt=l.stateNode,En=!1;break e;case 3:Jt=l.stateNode.containerInfo,En=!0;break e;case 4:Jt=l.stateNode.containerInfo,En=!0;break e}l=l.return}if(Jt===null)throw Error(ce(160));sE(s,a,i),Jt=null,En=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(h){wt(i,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)aE(t,e),t=t.sibling}function aE(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(jn(t,e),Qn(e),n&4){try{zc(3,e,e.return),$f(3,e)}catch(b){wt(e,e.return,b)}try{zc(5,e,e.return)}catch(b){wt(e,e.return,b)}}break;case 1:jn(t,e),Qn(e),n&512&&r!==null&&Ro(r,r.return);break;case 5:if(jn(t,e),Qn(e),n&512&&r!==null&&Ro(r,r.return),e.flags&32){var i=e.stateNode;try{Bc(i,"")}catch(b){wt(e,e.return,b)}}if(n&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,a=r!==null?r.memoizedProps:s,l=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Ek(i,s),Z2(l,a);var h=Z2(l,s);for(a=0;a<d.length;a+=2){var f=d[a],p=d[a+1];f==="style"?Ik(i,p):f==="dangerouslySetInnerHTML"?Rk(i,p):f==="children"?Bc(i,p):bw(i,f,p,h)}switch(l){case"input":W2(i,s);break;case"textarea":Tk(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var x=s.value;x!=null?Mo(i,!!s.multiple,x,!1):g!==!!s.multiple&&(s.defaultValue!=null?Mo(i,!!s.multiple,s.defaultValue,!0):Mo(i,!!s.multiple,s.multiple?[]:"",!1))}i[Zc]=s}catch(b){wt(e,e.return,b)}}break;case 6:if(jn(t,e),Qn(e),n&4){if(e.stateNode===null)throw Error(ce(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(b){wt(e,e.return,b)}}break;case 3:if(jn(t,e),Qn(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Wc(t.containerInfo)}catch(b){wt(e,e.return,b)}break;case 4:jn(t,e),Qn(e);break;case 13:jn(t,e),Qn(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Jw=Ct())),n&4&&Y_(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?(ur=(h=ur)||f,jn(t,e),ur=h):jn(t,e),Qn(e),n&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!f&&e.mode&1)for(we=e,f=e.child;f!==null;){for(p=we=f;we!==null;){switch(g=we,x=g.child,g.tag){case 0:case 11:case 14:case 15:zc(4,g,g.return);break;case 1:Ro(g,g.return);var w=g.stateNode;if(typeof w.componentWillUnmount=="function"){n=g,r=g.return;try{t=n,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(b){wt(n,r,b)}}break;case 5:Ro(g,g.return);break;case 22:if(g.memoizedState!==null){Q_(p);continue}}x!==null?(x.return=g,we=x):Q_(p)}f=f.sibling}e:for(f=null,p=e;;){if(p.tag===5){if(f===null){f=p;try{i=p.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=p.stateNode,d=p.memoizedProps.style,a=d!=null&&d.hasOwnProperty("display")?d.display:null,l.style.display=Ak("display",a))}catch(b){wt(e,e.return,b)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(b){wt(e,e.return,b)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:jn(t,e),Qn(e),n&4&&Y_(e);break;case 21:break;default:jn(t,e),Qn(e)}}function Qn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(iE(r)){var n=r;break e}r=r.return}throw Error(ce(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Bc(i,""),n.flags&=-33);var s=K_(e);Eb(e,s,i);break;case 3:case 4:var a=n.stateNode.containerInfo,l=K_(e);Cb(e,l,a);break;default:throw Error(ce(161))}}catch(d){wt(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _F(e,t,r){we=e,oE(e)}function oE(e,t,r){for(var n=(e.mode&1)!==0;we!==null;){var i=we,s=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||th;if(!a){var l=i.alternate,d=l!==null&&l.memoizedState!==null||ur;l=th;var h=ur;if(th=a,(ur=d)&&!h)for(we=i;we!==null;)a=we,d=a.child,a.tag===22&&a.memoizedState!==null?Z_(i):d!==null?(d.return=a,we=d):Z_(i);for(;s!==null;)we=s,oE(s),s=s.sibling;we=i,th=l,ur=h}X_(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,we=s):X_(e)}}function X_(e){for(;we!==null;){var t=we;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ur||$f(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ur)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Cn(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&M_(t,s,n);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}M_(t,a,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&r.focus();break;case"img":d.src&&(r.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&Wc(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ce(163))}ur||t.flags&512&&kb(t)}catch(g){wt(t,t.return,g)}}if(t===e){we=null;break}if(r=t.sibling,r!==null){r.return=t.return,we=r;break}we=t.return}}function Q_(e){for(;we!==null;){var t=we;if(t===e){we=null;break}var r=t.sibling;if(r!==null){r.return=t.return,we=r;break}we=t.return}}function Z_(e){for(;we!==null;){var t=we;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{$f(4,t)}catch(d){wt(t,r,d)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(d){wt(t,i,d)}}var s=t.return;try{kb(t)}catch(d){wt(t,s,d)}break;case 5:var a=t.return;try{kb(t)}catch(d){wt(t,a,d)}}}catch(d){wt(t,t.return,d)}if(t===e){we=null;break}var l=t.sibling;if(l!==null){l.return=t.return,we=l;break}we=t.return}}var NF=Math.ceil,af=Gi.ReactCurrentDispatcher,Qw=Gi.ReactCurrentOwner,dn=Gi.ReactCurrentBatchConfig,$e=0,Wt=null,At=null,er=0,zr=0,Ao=Gs(0),Dt=0,iu=null,Ta=0,Bf=0,Zw=0,Uc=null,Er=null,Jw=0,Qo=1/0,ji=null,of=!1,Tb=null,Es=null,rh=!1,ws=null,lf=0,Gc=0,Pb=null,Rh=-1,Ah=0;function vr(){return $e&6?Ct():Rh!==-1?Rh:Rh=Ct()}function Ts(e){return e.mode&1?$e&2&&er!==0?er&-er:aF.transition!==null?(Ah===0&&(Ah=Vk()),Ah):(e=Ye,e!==0||(e=window.event,e=e===void 0?16:Zk(e.type)),e):1}function In(e,t,r,n){if(50<Gc)throw Gc=0,Pb=null,Error(ce(185));bu(e,r,n),(!($e&2)||e!==Wt)&&(e===Wt&&(!($e&2)&&(Bf|=r),Dt===4&&xs(e,er)),Ir(e,n),r===1&&$e===0&&!(t.mode&1)&&(Qo=Ct()+500,zf&&$s()))}function Ir(e,t){var r=e.callbackNode;aM(e,t);var n=qh(e,e===Wt?er:0);if(n===0)r!==null&&o_(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&o_(r),t===1)e.tag===0?sF(J_.bind(null,e)):xC(J_.bind(null,e)),tF(function(){!($e&6)&&$s()}),r=null;else{switch(Hk(n)){case 1:r=jw;break;case 4:r=Bk;break;case 16:r=Bh;break;case 536870912:r=qk;break;default:r=Bh}r=mE(r,lE.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function lE(e,t){if(Rh=-1,Ah=0,$e&6)throw Error(ce(327));var r=e.callbackNode;if(zo()&&e.callbackNode!==r)return null;var n=qh(e,e===Wt?er:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=cf(e,n);else{t=n;var i=$e;$e|=2;var s=uE();(Wt!==e||er!==t)&&(ji=null,Qo=Ct()+500,Na(e,t));do try{kF();break}catch(l){cE(e,l)}while(1);Dw(),af.current=s,$e=i,At!==null?t=0:(Wt=null,er=0,t=Dt)}if(t!==0){if(t===2&&(i=nb(e),i!==0&&(n=i,t=Rb(e,i))),t===1)throw r=iu,Na(e,0),xs(e,n),Ir(e,Ct()),r;if(t===6)xs(e,n);else{if(i=e.current.alternate,!(n&30)&&!SF(i)&&(t=cf(e,n),t===2&&(s=nb(e),s!==0&&(n=s,t=Rb(e,s))),t===1))throw r=iu,Na(e,0),xs(e,n),Ir(e,Ct()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(ce(345));case 2:pa(e,Er,ji);break;case 3:if(xs(e,n),(n&130023424)===n&&(t=Jw+500-Ct(),10<t)){if(qh(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){vr(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=db(pa.bind(null,e,Er,ji),t);break}pa(e,Er,ji);break;case 4:if(xs(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var a=31-An(n);s=1<<a,a=t[a],a>i&&(i=a),n&=~s}if(n=i,n=Ct()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*NF(n/1960))-n,10<n){e.timeoutHandle=db(pa.bind(null,e,Er,ji),n);break}pa(e,Er,ji);break;case 5:pa(e,Er,ji);break;default:throw Error(ce(329))}}}return Ir(e,Ct()),e.callbackNode===r?lE.bind(null,e):null}function Rb(e,t){var r=Uc;return e.current.memoizedState.isDehydrated&&(Na(e,t).flags|=256),e=cf(e,t),e!==2&&(t=Er,Er=r,t!==null&&Ab(t)),e}function Ab(e){Er===null?Er=e:Er.push.apply(Er,e)}function SF(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!Ln(s(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function xs(e,t){for(t&=~Zw,t&=~Bf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-An(t),n=1<<r;e[r]=-1,t&=~n}}function J_(e){if($e&6)throw Error(ce(327));zo();var t=qh(e,0);if(!(t&1))return Ir(e,Ct()),null;var r=cf(e,t);if(e.tag!==0&&r===2){var n=nb(e);n!==0&&(t=n,r=Rb(e,n))}if(r===1)throw r=iu,Na(e,0),xs(e,t),Ir(e,Ct()),r;if(r===6)throw Error(ce(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,pa(e,Er,ji),Ir(e,Ct()),null}function e5(e,t){var r=$e;$e|=1;try{return e(t)}finally{$e=r,$e===0&&(Qo=Ct()+500,zf&&$s())}}function Pa(e){ws!==null&&ws.tag===0&&!($e&6)&&zo();var t=$e;$e|=1;var r=dn.transition,n=Ye;try{if(dn.transition=null,Ye=1,e)return e()}finally{Ye=n,dn.transition=r,$e=t,!($e&6)&&$s()}}function t5(){zr=Ao.current,st(Ao)}function Na(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,eF(r)),At!==null)for(r=At.return;r!==null;){var n=r;switch(Fw(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Yh();break;case 3:Yo(),st(Rr),st(dr),qw();break;case 5:Bw(n);break;case 4:Yo();break;case 13:st(mt);break;case 19:st(mt);break;case 10:zw(n.type._context);break;case 22:case 23:t5()}r=r.return}if(Wt=e,At=e=Ps(e.current,null),er=zr=t,Dt=0,iu=null,Zw=Bf=Ta=0,Er=Uc=null,xa!==null){for(t=0;t<xa.length;t++)if(r=xa[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var a=s.next;s.next=i,n.next=a}r.pending=n}xa=null}return e}function cE(e,t){do{var r=At;try{if(Dw(),Eh.current=sf,nf){for(var n=gt.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}nf=!1}if(Ea=0,Ht=Ot=gt=null,Dc=!1,tu=0,Qw.current=null,r===null||r.return===null){Dt=1,iu=t,At=null;break}e:{var s=e,a=r.return,l=r,d=t;if(t=er,l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var h=d,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var x=U_(a);if(x!==null){x.flags&=-257,G_(x,a,l,s,t),x.mode&1&&z_(s,h,t),t=x,d=h;var w=t.updateQueue;if(w===null){var b=new Set;b.add(d),t.updateQueue=b}else w.add(d);break e}else{if(!(t&1)){z_(s,h,t),r5();break e}d=Error(ce(426))}}else if(ct&&l.mode&1){var k=U_(a);if(k!==null){!(k.flags&65536)&&(k.flags|=256),G_(k,a,l,s,t),Lw(Xo(d,l));break e}}s=d=Xo(d,l),Dt!==4&&(Dt=2),Uc===null?Uc=[s]:Uc.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var _=HC(s,d,t);I_(s,_);break e;case 1:l=d;var S=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Es===null||!Es.has(v)))){s.flags|=65536,t&=-t,s.lanes|=t;var j=WC(s,l,t);I_(s,j);break e}}s=s.return}while(s!==null)}hE(r)}catch(C){t=C,At===r&&r!==null&&(At=r=r.return);continue}break}while(1)}function uE(){var e=af.current;return af.current=sf,e===null?sf:e}function r5(){(Dt===0||Dt===3||Dt===2)&&(Dt=4),Wt===null||!(Ta&268435455)&&!(Bf&268435455)||xs(Wt,er)}function cf(e,t){var r=$e;$e|=2;var n=uE();(Wt!==e||er!==t)&&(ji=null,Na(e,t));do try{jF();break}catch(i){cE(e,i)}while(1);if(Dw(),$e=r,af.current=n,At!==null)throw Error(ce(261));return Wt=null,er=0,Dt}function jF(){for(;At!==null;)dE(At)}function kF(){for(;At!==null&&!QI();)dE(At)}function dE(e){var t=pE(e.alternate,e,zr);e.memoizedProps=e.pendingProps,t===null?hE(e):At=t,Qw.current=null}function hE(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=yF(r,t),r!==null){r.flags&=32767,At=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Dt=6,At=null;return}}else if(r=vF(r,t,zr),r!==null){At=r;return}if(t=t.sibling,t!==null){At=t;return}At=t=e}while(t!==null);Dt===0&&(Dt=5)}function pa(e,t,r){var n=Ye,i=dn.transition;try{dn.transition=null,Ye=1,CF(e,t,r,n)}finally{dn.transition=i,Ye=n}return null}function CF(e,t,r,n){do zo();while(ws!==null);if($e&6)throw Error(ce(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ce(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(oM(e,s),e===Wt&&(At=Wt=null,er=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||rh||(rh=!0,mE(Bh,function(){return zo(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=dn.transition,dn.transition=null;var a=Ye;Ye=1;var l=$e;$e|=4,Qw.current=null,wF(e,r),aE(r,e),WM(cb),Vh=!!lb,cb=lb=null,e.current=r,_F(r),ZI(),$e=l,Ye=a,dn.transition=s}else e.current=r;if(rh&&(rh=!1,ws=e,lf=i),s=e.pendingLanes,s===0&&(Es=null),tM(r.stateNode),Ir(e,Ct()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(of)throw of=!1,e=Tb,Tb=null,e;return lf&1&&e.tag!==0&&zo(),s=e.pendingLanes,s&1?e===Pb?Gc++:(Gc=0,Pb=e):Gc=0,$s(),null}function zo(){if(ws!==null){var e=Hk(lf),t=dn.transition,r=Ye;try{if(dn.transition=null,Ye=16>e?16:e,ws===null)var n=!1;else{if(e=ws,ws=null,lf=0,$e&6)throw Error(ce(331));var i=$e;for($e|=4,we=e.current;we!==null;){var s=we,a=s.child;if(we.flags&16){var l=s.deletions;if(l!==null){for(var d=0;d<l.length;d++){var h=l[d];for(we=h;we!==null;){var f=we;switch(f.tag){case 0:case 11:case 15:zc(8,f,s)}var p=f.child;if(p!==null)p.return=f,we=p;else for(;we!==null;){f=we;var g=f.sibling,x=f.return;if(nE(f),f===h){we=null;break}if(g!==null){g.return=x,we=g;break}we=x}}}var w=s.alternate;if(w!==null){var b=w.child;if(b!==null){w.child=null;do{var k=b.sibling;b.sibling=null,b=k}while(b!==null)}}we=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,we=a;else e:for(;we!==null;){if(s=we,s.flags&2048)switch(s.tag){case 0:case 11:case 15:zc(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,we=_;break e}we=s.return}}var S=e.current;for(we=S;we!==null;){a=we;var v=a.child;if(a.subtreeFlags&2064&&v!==null)v.return=a,we=v;else e:for(a=S;we!==null;){if(l=we,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:$f(9,l)}}catch(C){wt(l,l.return,C)}if(l===a){we=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,we=j;break e}we=l.return}}if($e=i,$s(),ii&&typeof ii.onPostCommitFiberRoot=="function")try{ii.onPostCommitFiberRoot(Mf,e)}catch{}n=!0}return n}finally{Ye=r,dn.transition=t}}return!1}function e6(e,t,r){t=Xo(r,t),t=HC(e,t,1),e=Cs(e,t,1),t=vr(),e!==null&&(bu(e,1,t),Ir(e,t))}function wt(e,t,r){if(e.tag===3)e6(e,e,r);else for(;t!==null;){if(t.tag===3){e6(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Es===null||!Es.has(n))){e=Xo(r,e),e=WC(t,e,1),t=Cs(t,e,1),e=vr(),t!==null&&(bu(t,1,e),Ir(t,e));break}}t=t.return}}function EF(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=vr(),e.pingedLanes|=e.suspendedLanes&r,Wt===e&&(er&r)===r&&(Dt===4||Dt===3&&(er&130023424)===er&&500>Ct()-Jw?Na(e,0):Zw|=r),Ir(e,t)}function fE(e,t){t===0&&(e.mode&1?(t=Hd,Hd<<=1,!(Hd&130023424)&&(Hd=4194304)):t=1);var r=vr();e=Li(e,t),e!==null&&(bu(e,t,r),Ir(e,r))}function TF(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),fE(e,r)}function PF(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ce(314))}n!==null&&n.delete(t),fE(e,r)}var pE;pE=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Rr.current)Tr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Tr=!1,xF(e,t,r);Tr=!!(e.flags&131072)}else Tr=!1,ct&&t.flags&1048576&&vC(t,Zh,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Ph(e,t),e=t.pendingProps;var i=Ho(t,dr.current);Do(t,r),i=Hw(null,t,n,e,i,r);var s=Ww();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ar(n)?(s=!0,Xh(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Gw(t),i.updater=Gf,t.stateNode=i,i._reactInternals=t,vb(t,n,e,r),t=wb(null,t,n,!0,s,r)):(t.tag=0,ct&&s&&Mw(t),xr(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Ph(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=AF(n),e=Cn(n,e),i){case 0:t=bb(null,t,n,e,r);break e;case 1:t=q_(null,t,n,e,r);break e;case 11:t=$_(null,t,n,e,r);break e;case 14:t=B_(null,t,n,Cn(n.type,e),r);break e}throw Error(ce(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Cn(n,i),bb(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Cn(n,i),q_(e,t,n,i,r);case 3:e:{if(QC(t),e===null)throw Error(ce(387));n=t.pendingProps,s=t.memoizedState,i=s.element,SC(e,t),tf(t,n,null,r);var a=t.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Xo(Error(ce(423)),t),t=V_(e,t,n,r,i);break e}else if(n!==i){i=Xo(Error(ce(424)),t),t=V_(e,t,n,r,i);break e}else for(Gr=ks(t.stateNode.containerInfo.firstChild),$r=t,ct=!0,Tn=null,r=_C(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Wo(),n===i){t=Oi(e,t,r);break e}xr(e,t,n,r)}t=t.child}return t;case 5:return jC(t),e===null&&mb(t),n=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,a=i.children,ub(n,i)?a=null:s!==null&&ub(n,s)&&(t.flags|=32),XC(e,t),xr(e,t,a,r),t.child;case 6:return e===null&&mb(t),null;case 13:return ZC(e,t,r);case 4:return $w(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Ko(t,null,n,r):xr(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Cn(n,i),$_(e,t,n,i,r);case 7:return xr(e,t,t.pendingProps,r),t.child;case 8:return xr(e,t,t.pendingProps.children,r),t.child;case 12:return xr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,tt(Jh,n._currentValue),n._currentValue=a,s!==null)if(Ln(s.value,a)){if(s.children===i.children&&!Rr.current){t=Oi(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var d=l.firstContext;d!==null;){if(d.context===n){if(s.tag===1){d=Ai(-1,r&-r),d.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?d.next=d:(d.next=f.next,f.next=d),h.pending=d}}s.lanes|=r,d=s.alternate,d!==null&&(d.lanes|=r),gb(s.return,r,t),l.lanes|=r;break}d=d.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(ce(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),gb(a,r,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}xr(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Do(t,r),i=hn(i),n=n(i),t.flags|=1,xr(e,t,n,r),t.child;case 14:return n=t.type,i=Cn(n,t.pendingProps),i=Cn(n.type,i),B_(e,t,n,i,r);case 15:return KC(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Cn(n,i),Ph(e,t),t.tag=1,Ar(n)?(e=!0,Xh(t)):e=!1,Do(t,r),VC(t,n,i),vb(t,n,i,r),wb(null,t,n,!0,e,r);case 19:return JC(e,t,r);case 22:return YC(e,t,r)}throw Error(ce(156,t.tag))};function mE(e,t){return $k(e,t)}function RF(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cn(e,t,r,n){return new RF(e,t,r,n)}function n5(e){return e=e.prototype,!(!e||!e.isReactComponent)}function AF(e){if(typeof e=="function")return n5(e)?1:0;if(e!=null){if(e=e.$$typeof,e===_w)return 11;if(e===Nw)return 14}return 2}function Ps(e,t){var r=e.alternate;return r===null?(r=cn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ih(e,t,r,n,i,s){var a=2;if(n=e,typeof e=="function")n5(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case _o:return Sa(r.children,i,s,t);case ww:a=8,i|=8;break;case $2:return e=cn(12,r,t,i|2),e.elementType=$2,e.lanes=s,e;case B2:return e=cn(13,r,t,i),e.elementType=B2,e.lanes=s,e;case q2:return e=cn(19,r,t,i),e.elementType=q2,e.lanes=s,e;case jk:return qf(r,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Nk:a=10;break e;case Sk:a=9;break e;case _w:a=11;break e;case Nw:a=14;break e;case hs:a=16,n=null;break e}throw Error(ce(130,e==null?e:typeof e,""))}return t=cn(a,r,t,i),t.elementType=e,t.type=n,t.lanes=s,t}function Sa(e,t,r,n){return e=cn(7,e,n,t),e.lanes=r,e}function qf(e,t,r,n){return e=cn(22,e,n,t),e.elementType=jk,e.lanes=r,e.stateNode={isHidden:!1},e}function fg(e,t,r){return e=cn(6,e,null,t),e.lanes=r,e}function pg(e,t,r){return t=cn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function IF(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Km(0),this.expirationTimes=Km(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Km(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function i5(e,t,r,n,i,s,a,l,d){return e=new IF(e,t,r,l,d),t===1?(t=1,s===!0&&(t|=8)):t=0,s=cn(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gw(s),e}function MF(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wo,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function gE(e){if(!e)return Ls;e=e._reactInternals;e:{if(Ma(e)!==e||e.tag!==1)throw Error(ce(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ar(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ce(171))}if(e.tag===1){var r=e.type;if(Ar(r))return gC(e,r,t)}return t}function xE(e,t,r,n,i,s,a,l,d){return e=i5(r,n,!0,e,i,s,a,l,d),e.context=gE(null),r=e.current,n=vr(),i=Ts(r),s=Ai(n,i),s.callback=t??null,Cs(r,s,i),e.current.lanes=i,bu(e,i,n),Ir(e,n),e}function Vf(e,t,r,n){var i=t.current,s=vr(),a=Ts(i);return r=gE(r),t.context===null?t.context=r:t.pendingContext=r,t=Ai(s,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Cs(i,t,a),e!==null&&(In(e,i,a,s),Ch(e,i,a)),a}function uf(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function t6(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function s5(e,t){t6(e,t),(e=e.alternate)&&t6(e,t)}function FF(){return null}var vE=typeof reportError=="function"?reportError:function(e){console.error(e)};function a5(e){this._internalRoot=e}Hf.prototype.render=a5.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ce(409));Vf(e,t,null,null)};Hf.prototype.unmount=a5.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Pa(function(){Vf(null,e,null,null)}),t[Fi]=null}};function Hf(e){this._internalRoot=e}Hf.prototype.unstable_scheduleHydration=function(e){if(e){var t=Yk();e={blockedOn:null,target:e,priority:t};for(var r=0;r<gs.length&&t!==0&&t<gs[r].priority;r++);gs.splice(r,0,e),r===0&&Qk(e)}};function o5(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Wf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function r6(){}function LF(e,t,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var h=uf(a);s.call(h)}}var a=xE(t,n,e,0,null,!1,!1,"",r6);return e._reactRootContainer=a,e[Fi]=a.current,Xc(e.nodeType===8?e.parentNode:e),Pa(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var l=n;n=function(){var h=uf(d);l.call(h)}}var d=i5(e,0,!1,null,null,!1,!1,"",r6);return e._reactRootContainer=d,e[Fi]=d.current,Xc(e.nodeType===8?e.parentNode:e),Pa(function(){Vf(t,d,r,n)}),d}function Kf(e,t,r,n,i){var s=r._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var l=i;i=function(){var d=uf(a);l.call(d)}}Vf(t,a,e,i)}else a=LF(r,t,e,i,n);return uf(a)}Wk=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=bc(t.pendingLanes);r!==0&&(kw(t,r|1),Ir(t,Ct()),!($e&6)&&(Qo=Ct()+500,$s()))}break;case 13:Pa(function(){var n=Li(e,1);if(n!==null){var i=vr();In(n,e,1,i)}}),s5(e,1)}};Cw=function(e){if(e.tag===13){var t=Li(e,134217728);if(t!==null){var r=vr();In(t,e,134217728,r)}s5(e,134217728)}};Kk=function(e){if(e.tag===13){var t=Ts(e),r=Li(e,t);if(r!==null){var n=vr();In(r,e,t,n)}s5(e,t)}};Yk=function(){return Ye};Xk=function(e,t){var r=Ye;try{return Ye=e,t()}finally{Ye=r}};eb=function(e,t,r){switch(t){case"input":if(W2(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=Df(n);if(!i)throw Error(ce(90));Ck(n),W2(n,i)}}}break;case"textarea":Tk(e,r);break;case"select":t=r.value,t!=null&&Mo(e,!!r.multiple,t,!1)}};Lk=e5;Ok=Pa;var OF={usingClientEntryPoint:!1,Events:[_u,ko,Df,Mk,Fk,e5]},nc={findFiberByHostInstance:ga,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},DF={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Uk(e),e===null?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||FF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nh.isDisabled&&nh.supportsFiber)try{Mf=nh.inject(DF),ii=nh}catch{}}Vr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OF;Vr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!o5(t))throw Error(ce(200));return MF(e,t,null,r)};Vr.createRoot=function(e,t){if(!o5(e))throw Error(ce(299));var r=!1,n="",i=vE;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=i5(e,1,!1,null,null,r,!1,n,i),e[Fi]=t.current,Xc(e.nodeType===8?e.parentNode:e),new a5(t)};Vr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ce(188)):(e=Object.keys(e).join(","),Error(ce(268,e)));return e=Uk(t),e=e===null?null:e.stateNode,e};Vr.flushSync=function(e){return Pa(e)};Vr.hydrate=function(e,t,r){if(!Wf(t))throw Error(ce(200));return Kf(null,e,t,!0,r)};Vr.hydrateRoot=function(e,t,r){if(!o5(e))throw Error(ce(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",a=vE;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=xE(t,null,e,1,r??null,i,!1,s,a),e[Fi]=t.current,Xc(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Hf(t)};Vr.render=function(e,t,r){if(!Wf(t))throw Error(ce(200));return Kf(null,e,t,!1,r)};Vr.unmountComponentAtNode=function(e){if(!Wf(e))throw Error(ce(40));return e._reactRootContainer?(Pa(function(){Kf(null,null,e,!1,function(){e._reactRootContainer=null,e[Fi]=null})}),!0):!1};Vr.unstable_batchedUpdates=e5;Vr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Wf(r))throw Error(ce(200));if(e==null||e._reactInternals===void 0)throw Error(ce(38));return Kf(e,t,r,!1,n)};Vr.version="18.3.1-next-f1338f8080-20240426";function yE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yE)}catch(e){console.error(e)}}yE(),yk.exports=Vr;var Su=yk.exports,n6=Su;U2.createRoot=n6.createRoot,U2.hydrateRoot=n6.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function su(){return su=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},su.apply(this,arguments)}var _s;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(_s||(_s={}));const i6="popstate";function zF(e){e===void 0&&(e={});function t(n,i){let{pathname:s,search:a,hash:l}=n.location;return Ib("",{pathname:s,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:df(i)}return GF(t,r,null,e)}function St(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function l5(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function UF(){return Math.random().toString(36).substr(2,8)}function s6(e,t){return{usr:e.state,key:e.key,idx:t}}function Ib(e,t,r,n){return r===void 0&&(r=null),su({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ul(t):t,{state:r,key:t&&t.key||n||UF()})}function df(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ul(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function GF(e,t,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,a=i.history,l=_s.Pop,d=null,h=f();h==null&&(h=0,a.replaceState(su({},a.state,{idx:h}),""));function f(){return(a.state||{idx:null}).idx}function p(){l=_s.Pop;let k=f(),_=k==null?null:k-h;h=k,d&&d({action:l,location:b.location,delta:_})}function g(k,_){l=_s.Push;let S=Ib(b.location,k,_);r&&r(S,k),h=f()+1;let v=s6(S,h),j=b.createHref(S);try{a.pushState(v,"",j)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;i.location.assign(j)}s&&d&&d({action:l,location:b.location,delta:1})}function x(k,_){l=_s.Replace;let S=Ib(b.location,k,_);r&&r(S,k),h=f();let v=s6(S,h),j=b.createHref(S);a.replaceState(v,"",j),s&&d&&d({action:l,location:b.location,delta:0})}function w(k){let _=i.location.origin!=="null"?i.location.origin:i.location.href,S=typeof k=="string"?k:df(k);return S=S.replace(/ $/,"%20"),St(_,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,_)}let b={get action(){return l},get location(){return e(i,a)},listen(k){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(i6,p),d=k,()=>{i.removeEventListener(i6,p),d=null}},createHref(k){return t(i,k)},createURL:w,encodeLocation(k){let _=w(k);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:g,replace:x,go(k){return a.go(k)}};return b}var a6;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(a6||(a6={}));function $F(e,t,r){return r===void 0&&(r="/"),BF(e,t,r,!1)}function BF(e,t,r,n){let i=typeof t=="string"?ul(t):t,s=Zo(i.pathname||"/",r);if(s==null)return null;let a=bE(e);qF(a);let l=null;for(let d=0;l==null&&d<a.length;++d){let h=tL(s);l=JF(a[d],h,n)}return l}function bE(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,a,l)=>{let d={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};d.relativePath.startsWith("/")&&(St(d.relativePath.startsWith(n),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(n.length));let h=Rs([n,d.relativePath]),f=r.concat(d);s.children&&s.children.length>0&&(St(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),bE(s.children,t,f,h)),!(s.path==null&&!s.index)&&t.push({path:h,score:QF(h,s.index),routesMeta:f})};return e.forEach((s,a)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,a);else for(let d of wE(s.path))i(s,a,d)}),t}function wE(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let a=wE(n.join("/")),l=[];return l.push(...a.map(d=>d===""?s:[s,d].join("/"))),i&&l.push(...a),l.map(d=>e.startsWith("/")&&d===""?"/":d)}function qF(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:ZF(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const VF=/^:[\w-]+$/,HF=3,WF=2,KF=1,YF=10,XF=-2,o6=e=>e==="*";function QF(e,t){let r=e.split("/"),n=r.length;return r.some(o6)&&(n+=XF),t&&(n+=WF),r.filter(i=>!o6(i)).reduce((i,s)=>i+(VF.test(s)?HF:s===""?KF:YF),n)}function ZF(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function JF(e,t,r){r===void 0&&(r=!1);let{routesMeta:n}=e,i={},s="/",a=[];for(let l=0;l<n.length;++l){let d=n[l],h=l===n.length-1,f=s==="/"?t:t.slice(s.length)||"/",p=hf({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},f),g=d.route;if(!p&&h&&r&&!n[n.length-1].route.index&&(p=hf({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},f)),!p)return null;Object.assign(i,p.params),a.push({params:i,pathname:Rs([s,p.pathname]),pathnameBase:aL(Rs([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=Rs([s,p.pathnameBase]))}return a}function hf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=eL(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:n.reduce((h,f,p)=>{let{paramName:g,isOptional:x}=f;if(g==="*"){let b=l[p]||"";a=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const w=l[p];return x&&!w?h[g]=void 0:h[g]=(w||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:a,pattern:e}}function eL(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),l5(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,d)=>(n.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function tL(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return l5(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Zo(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const rL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nL=e=>rL.test(e);function iL(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?ul(e):e,s;if(r)if(nL(r))s=r;else{if(r.includes("//")){let a=r;r=r.replace(/\/\/+/g,"/"),l5(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+r))}r.startsWith("/")?s=l6(r.substring(1),"/"):s=l6(r,t)}else s=t;return{pathname:s,search:oL(n),hash:lL(i)}}function l6(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function mg(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function sL(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function _E(e,t){let r=sL(e);return t?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function NE(e,t,r,n){n===void 0&&(n=!1);let i;typeof e=="string"?i=ul(e):(i=su({},e),St(!i.pathname||!i.pathname.includes("?"),mg("?","pathname","search",i)),St(!i.pathname||!i.pathname.includes("#"),mg("#","pathname","hash",i)),St(!i.search||!i.search.includes("#"),mg("#","search","hash",i)));let s=e===""||i.pathname==="",a=s?"/":i.pathname,l;if(a==null)l=r;else{let p=t.length-1;if(!n&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}l=p>=0?t[p]:"/"}let d=iL(i,l),h=a&&a!=="/"&&a.endsWith("/"),f=(s||a===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(h||f)&&(d.pathname+="/"),d}const Rs=e=>e.join("/").replace(/\/\/+/g,"/"),aL=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),oL=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,lL=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function cL(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const SE=["post","put","patch","delete"];new Set(SE);const uL=["get",...SE];new Set(uL);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function au(){return au=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},au.apply(this,arguments)}const Yf=P.createContext(null),jE=P.createContext(null),Bs=P.createContext(null),Xf=P.createContext(null),$i=P.createContext({outlet:null,matches:[],isDataRoute:!1}),kE=P.createContext(null);function dL(e,t){let{relative:r}=t===void 0?{}:t;ju()||St(!1);let{basename:n,navigator:i}=P.useContext(Bs),{hash:s,pathname:a,search:l}=Qf(e,{relative:r}),d=a;return n!=="/"&&(d=a==="/"?n:Rs([n,a])),i.createHref({pathname:d,search:l,hash:s})}function ju(){return P.useContext(Xf)!=null}function Fa(){return ju()||St(!1),P.useContext(Xf).location}function CE(e){P.useContext(Bs).static||P.useLayoutEffect(e)}function Wr(){let{isDataRoute:e}=P.useContext($i);return e?jL():hL()}function hL(){ju()||St(!1);let e=P.useContext(Yf),{basename:t,future:r,navigator:n}=P.useContext(Bs),{matches:i}=P.useContext($i),{pathname:s}=Fa(),a=JSON.stringify(_E(i,r.v7_relativeSplatPath)),l=P.useRef(!1);return CE(()=>{l.current=!0}),P.useCallback(function(h,f){if(f===void 0&&(f={}),!l.current)return;if(typeof h=="number"){n.go(h);return}let p=NE(h,JSON.parse(a),s,f.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Rs([t,p.pathname])),(f.replace?n.replace:n.push)(p,f.state,f)},[t,n,a,s,e])}const EE=P.createContext(null);function La(){return P.useContext(EE)}function fL(e){let t=P.useContext($i).outlet;return t&&P.createElement(EE.Provider,{value:e},t)}function Kr(){let{matches:e}=P.useContext($i),t=e[e.length-1];return t?t.params:{}}function Qf(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=P.useContext(Bs),{matches:i}=P.useContext($i),{pathname:s}=Fa(),a=JSON.stringify(_E(i,n.v7_relativeSplatPath));return P.useMemo(()=>NE(e,JSON.parse(a),s,r==="path"),[e,a,s,r])}function pL(e,t){return mL(e,t)}function mL(e,t,r,n){ju()||St(!1);let{navigator:i}=P.useContext(Bs),{matches:s}=P.useContext($i),a=s[s.length-1],l=a?a.params:{};a&&a.pathname;let d=a?a.pathnameBase:"/";a&&a.route;let h=Fa(),f;if(t){var p;let k=typeof t=="string"?ul(t):t;d==="/"||(p=k.pathname)!=null&&p.startsWith(d)||St(!1),f=k}else f=h;let g=f.pathname||"/",x=g;if(d!=="/"){let k=d.replace(/^\//,"").split("/");x="/"+g.replace(/^\//,"").split("/").slice(k.length).join("/")}let w=$F(e,{pathname:x}),b=bL(w&&w.map(k=>Object.assign({},k,{params:Object.assign({},l,k.params),pathname:Rs([d,i.encodeLocation?i.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?d:Rs([d,i.encodeLocation?i.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),s,r,n);return t&&b?P.createElement(Xf.Provider,{value:{location:au({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:_s.Pop}},b):b}function gL(){let e=SL(),t=cL(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},t),r?P.createElement("pre",{style:i},r):null,s)}const xL=P.createElement(gL,null);class vL extends P.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?P.createElement($i.Provider,{value:this.props.routeContext},P.createElement(kE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function yL(e){let{routeContext:t,match:r,children:n}=e,i=P.useContext(Yf);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),P.createElement($i.Provider,{value:t},n)}function bL(e,t,r,n){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var s;if(!r)return null;if(r.errors)e=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let a=e,l=(i=r)==null?void 0:i.errors;if(l!=null){let f=a.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);f>=0||St(!1),a=a.slice(0,Math.min(a.length,f+1))}let d=!1,h=-1;if(r&&n&&n.v7_partialHydration)for(let f=0;f<a.length;f++){let p=a[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=f),p.route.id){let{loaderData:g,errors:x}=r,w=p.route.loader&&g[p.route.id]===void 0&&(!x||x[p.route.id]===void 0);if(p.route.lazy||w){d=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((f,p,g)=>{let x,w=!1,b=null,k=null;r&&(x=l&&p.route.id?l[p.route.id]:void 0,b=p.route.errorElement||xL,d&&(h<0&&g===0?(kL("route-fallback",!1),w=!0,k=null):h===g&&(w=!0,k=p.route.hydrateFallbackElement||null)));let _=t.concat(a.slice(0,g+1)),S=()=>{let v;return x?v=b:w?v=k:p.route.Component?v=P.createElement(p.route.Component,null):p.route.element?v=p.route.element:v=f,P.createElement(yL,{match:p,routeContext:{outlet:f,matches:_,isDataRoute:r!=null},children:v})};return r&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?P.createElement(vL,{location:r.location,revalidation:r.revalidation,component:b,error:x,children:S(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):S()},null)}var TE=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(TE||{}),ff=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ff||{});function wL(e){let t=P.useContext(Yf);return t||St(!1),t}function _L(e){let t=P.useContext(jE);return t||St(!1),t}function NL(e){let t=P.useContext($i);return t||St(!1),t}function PE(e){let t=NL(),r=t.matches[t.matches.length-1];return r.route.id||St(!1),r.route.id}function SL(){var e;let t=P.useContext(kE),r=_L(ff.UseRouteError),n=PE(ff.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function jL(){let{router:e}=wL(TE.UseNavigateStable),t=PE(ff.UseNavigateStable),r=P.useRef(!1);return CE(()=>{r.current=!0}),P.useCallback(function(i,s){s===void 0&&(s={}),r.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,au({fromRouteId:t},s)))},[e,t])}const c6={};function kL(e,t,r){!t&&!c6[e]&&(c6[e]=!0)}function CL(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function c5(e){return fL(e.context)}function lt(e){St(!1)}function EL(e){let{basename:t="/",children:r=null,location:n,navigationType:i=_s.Pop,navigator:s,static:a=!1,future:l}=e;ju()&&St(!1);let d=t.replace(/^\/*/,"/"),h=P.useMemo(()=>({basename:d,navigator:s,static:a,future:au({v7_relativeSplatPath:!1},l)}),[d,l,s,a]);typeof n=="string"&&(n=ul(n));let{pathname:f="/",search:p="",hash:g="",state:x=null,key:w="default"}=n,b=P.useMemo(()=>{let k=Zo(f,d);return k==null?null:{location:{pathname:k,search:p,hash:g,state:x,key:w},navigationType:i}},[d,f,p,g,x,w,i]);return b==null?null:P.createElement(Bs.Provider,{value:h},P.createElement(Xf.Provider,{children:r,value:b}))}function TL(e){let{children:t,location:r}=e;return pL(Mb(t),r)}new Promise(()=>{});function Mb(e,t){t===void 0&&(t=[]);let r=[];return P.Children.forEach(e,(n,i)=>{if(!P.isValidElement(n))return;let s=[...t,i];if(n.type===P.Fragment){r.push.apply(r,Mb(n.props.children,s));return}n.type!==lt&&St(!1),!n.props.index||!n.props.children||St(!1);let a={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=Mb(n.props.children,s)),r.push(a)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pf(){return pf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pf.apply(this,arguments)}function RE(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,s;for(s=0;s<n.length;s++)i=n[s],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function PL(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function RL(e,t){return e.button===0&&(!t||t==="_self")&&!PL(e)}const AL=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],IL=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],ML="6";try{window.__reactRouterVersion=ML}catch{}const FL=P.createContext({isTransitioning:!1}),LL="startTransition",u6=TI[LL];function OL(e){let{basename:t,children:r,future:n,window:i}=e,s=P.useRef();s.current==null&&(s.current=zF({window:i,v5Compat:!0}));let a=s.current,[l,d]=P.useState({action:a.action,location:a.location}),{v7_startTransition:h}=n||{},f=P.useCallback(p=>{h&&u6?u6(()=>d(p)):d(p)},[d,h]);return P.useLayoutEffect(()=>a.listen(f),[a,f]),P.useEffect(()=>CL(n),[n]),P.createElement(EL,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:a,future:n})}const DL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Os=P.forwardRef(function(t,r){let{onClick:n,relative:i,reloadDocument:s,replace:a,state:l,target:d,to:h,preventScrollReset:f,viewTransition:p}=t,g=RE(t,AL),{basename:x}=P.useContext(Bs),w,b=!1;if(typeof h=="string"&&zL.test(h)&&(w=h,DL))try{let v=new URL(window.location.href),j=h.startsWith("//")?new URL(v.protocol+h):new URL(h),C=Zo(j.pathname,x);j.origin===v.origin&&C!=null?h=C+j.search+j.hash:b=!0}catch{}let k=dL(h,{relative:i}),_=$L(h,{replace:a,state:l,target:d,preventScrollReset:f,relative:i,viewTransition:p});function S(v){n&&n(v),v.defaultPrevented||_(v)}return P.createElement("a",pf({},g,{href:w||k,onClick:b||s?n:S,ref:r,target:d}))}),UL=P.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:i=!1,className:s="",end:a=!1,style:l,to:d,viewTransition:h,children:f}=t,p=RE(t,IL),g=Qf(d,{relative:p.relative}),x=Fa(),w=P.useContext(jE),{navigator:b,basename:k}=P.useContext(Bs),_=w!=null&&BL(g)&&h===!0,S=b.encodeLocation?b.encodeLocation(g).pathname:g.pathname,v=x.pathname,j=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;i||(v=v.toLowerCase(),j=j?j.toLowerCase():null,S=S.toLowerCase()),j&&k&&(j=Zo(j,k)||j);const C=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let R=v===S||!a&&v.startsWith(S)&&v.charAt(C)==="/",L=j!=null&&(j===S||!a&&j.startsWith(S)&&j.charAt(S.length)==="/"),A={isActive:R,isPending:L,isTransitioning:_},O=R?n:void 0,T;typeof s=="function"?T=s(A):T=[s,R?"active":null,L?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let I=typeof l=="function"?l(A):l;return P.createElement(Os,pf({},p,{"aria-current":O,className:T,ref:r,style:I,to:d,viewTransition:h}),typeof f=="function"?f(A):f)});var Fb;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Fb||(Fb={}));var d6;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(d6||(d6={}));function GL(e){let t=P.useContext(Yf);return t||St(!1),t}function $L(e,t){let{target:r,replace:n,state:i,preventScrollReset:s,relative:a,viewTransition:l}=t===void 0?{}:t,d=Wr(),h=Fa(),f=Qf(e,{relative:a});return P.useCallback(p=>{if(RL(p,r)){p.preventDefault();let g=n!==void 0?n:df(h)===df(f);d(e,{replace:g,state:i,preventScrollReset:s,relative:a,viewTransition:l})}},[h,d,f,n,i,r,e,s,a,l])}function BL(e,t){t===void 0&&(t={});let r=P.useContext(FL);r==null&&St(!1);let{basename:n}=GL(Fb.useViewTransitionState),i=Qf(e,{relative:t.relative});if(!r.isTransitioning)return!1;let s=Zo(r.currentLocation.pathname,n)||r.currentLocation.pathname,a=Zo(r.nextLocation.pathname,n)||r.nextLocation.pathname;return hf(i.pathname,a)!=null||hf(i.pathname,s)!=null}const u5="-",qL=e=>{const t=HL(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:a=>{const l=a.split(u5);return l[0]===""&&l.length!==1&&l.shift(),AE(l,t)||VL(a)},getConflictingClassGroupIds:(a,l)=>{const d=r[a]||[];return l&&n[a]?[...d,...n[a]]:d}}},AE=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),i=n?AE(e.slice(1),n):void 0;if(i)return i;if(t.validators.length===0)return;const s=e.join(u5);return(a=t.validators.find(({validator:l})=>l(s)))==null?void 0:a.classGroupId},h6=/^\[(.+)\]$/,VL=e=>{if(h6.test(e)){const t=h6.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},HL=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return KL(Object.entries(e.classGroups),r).forEach(([s,a])=>{Lb(a,n,s,t)}),n},Lb=(e,t,r,n)=>{e.forEach(i=>{if(typeof i=="string"){const s=i===""?t:f6(t,i);s.classGroupId=r;return}if(typeof i=="function"){if(WL(i)){Lb(i(n),t,r,n);return}t.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([s,a])=>{Lb(a,f6(t,s),r,n)})})},f6=(e,t)=>{let r=e;return t.split(u5).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},WL=e=>e.isThemeGetter,KL=(e,t)=>t?e.map(([r,n])=>{const i=n.map(s=>typeof s=="string"?t+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([a,l])=>[t+a,l])):s);return[r,i]}):e,YL=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const i=(s,a)=>{r.set(s,a),t++,t>e&&(t=0,n=r,r=new Map)};return{get(s){let a=r.get(s);if(a!==void 0)return a;if((a=n.get(s))!==void 0)return i(s,a),a},set(s,a){r.has(s)?r.set(s,a):i(s,a)}}},IE="!",XL=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,i=t[0],s=t.length,a=l=>{const d=[];let h=0,f=0,p;for(let k=0;k<l.length;k++){let _=l[k];if(h===0){if(_===i&&(n||l.slice(k,k+s)===t)){d.push(l.slice(f,k)),f=k+s;continue}if(_==="/"){p=k;continue}}_==="["?h++:_==="]"&&h--}const g=d.length===0?l:l.substring(f),x=g.startsWith(IE),w=x?g.substring(1):g,b=p&&p>f?p-f:void 0;return{modifiers:d,hasImportantModifier:x,baseClassName:w,maybePostfixModifierPosition:b}};return r?l=>r({className:l,parseClassName:a}):a},QL=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},ZL=e=>({cache:YL(e.cacheSize),parseClassName:XL(e),...qL(e)}),JL=/\s+/,eO=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=t,s=[],a=e.trim().split(JL);let l="";for(let d=a.length-1;d>=0;d-=1){const h=a[d],{modifiers:f,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:x}=r(h);let w=!!x,b=n(w?g.substring(0,x):g);if(!b){if(!w){l=h+(l.length>0?" "+l:l);continue}if(b=n(g),!b){l=h+(l.length>0?" "+l:l);continue}w=!1}const k=QL(f).join(":"),_=p?k+IE:k,S=_+b;if(s.includes(S))continue;s.push(S);const v=i(b,w);for(let j=0;j<v.length;++j){const C=v[j];s.push(_+C)}l=h+(l.length>0?" "+l:l)}return l};function tO(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=ME(t))&&(n&&(n+=" "),n+=r);return n}const ME=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=ME(e[n]))&&(r&&(r+=" "),r+=t);return r};function rO(e,...t){let r,n,i,s=a;function a(d){const h=t.reduce((f,p)=>p(f),e());return r=ZL(h),n=r.cache.get,i=r.cache.set,s=l,l(d)}function l(d){const h=n(d);if(h)return h;const f=eO(d,r);return i(d,f),f}return function(){return s(tO.apply(null,arguments))}}const nt=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},FE=/^\[(?:([a-z-]+):)?(.+)\]$/i,nO=/^\d+\/\d+$/,iO=new Set(["px","full","screen"]),sO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,aO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,oO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,lO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,cO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,bi=e=>Uo(e)||iO.has(e)||nO.test(e),as=e=>dl(e,"length",xO),Uo=e=>!!e&&!Number.isNaN(Number(e)),gg=e=>dl(e,"number",Uo),ic=e=>!!e&&Number.isInteger(Number(e)),uO=e=>e.endsWith("%")&&Uo(e.slice(0,-1)),Pe=e=>FE.test(e),os=e=>sO.test(e),dO=new Set(["length","size","percentage"]),hO=e=>dl(e,dO,LE),fO=e=>dl(e,"position",LE),pO=new Set(["image","url"]),mO=e=>dl(e,pO,yO),gO=e=>dl(e,"",vO),sc=()=>!0,dl=(e,t,r)=>{const n=FE.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},xO=e=>aO.test(e)&&!oO.test(e),LE=()=>!1,vO=e=>lO.test(e),yO=e=>cO.test(e),bO=()=>{const e=nt("colors"),t=nt("spacing"),r=nt("blur"),n=nt("brightness"),i=nt("borderColor"),s=nt("borderRadius"),a=nt("borderSpacing"),l=nt("borderWidth"),d=nt("contrast"),h=nt("grayscale"),f=nt("hueRotate"),p=nt("invert"),g=nt("gap"),x=nt("gradientColorStops"),w=nt("gradientColorStopPositions"),b=nt("inset"),k=nt("margin"),_=nt("opacity"),S=nt("padding"),v=nt("saturate"),j=nt("scale"),C=nt("sepia"),R=nt("skew"),L=nt("space"),A=nt("translate"),O=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto",Pe,t],M=()=>[Pe,t],$=()=>["",bi,as],F=()=>["auto",Uo,Pe],G=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],B=()=>["solid","dashed","dotted","double","none"],Y=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],K=()=>["start","end","center","between","around","evenly","stretch"],H=()=>["","0",Pe],W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],D=()=>[Uo,Pe];return{cacheSize:500,separator:":",theme:{colors:[sc],spacing:[bi,as],blur:["none","",os,Pe],brightness:D(),borderColor:[e],borderRadius:["none","","full",os,Pe],borderSpacing:M(),borderWidth:$(),contrast:D(),grayscale:H(),hueRotate:D(),invert:H(),gap:M(),gradientColorStops:[e],gradientColorStopPositions:[uO,as],inset:I(),margin:I(),opacity:D(),padding:M(),saturate:D(),scale:D(),sepia:H(),skew:D(),space:M(),translate:M()},classGroups:{aspect:[{aspect:["auto","square","video",Pe]}],container:["container"],columns:[{columns:[os]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...G(),Pe]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[b]}],"inset-x":[{"inset-x":[b]}],"inset-y":[{"inset-y":[b]}],start:[{start:[b]}],end:[{end:[b]}],top:[{top:[b]}],right:[{right:[b]}],bottom:[{bottom:[b]}],left:[{left:[b]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ic,Pe]}],basis:[{basis:I()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Pe]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",ic,Pe]}],"grid-cols":[{"grid-cols":[sc]}],"col-start-end":[{col:["auto",{span:["full",ic,Pe]},Pe]}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":[sc]}],"row-start-end":[{row:["auto",{span:[ic,Pe]},Pe]}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Pe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Pe]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal",...K()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...K(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...K(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[S]}],px:[{px:[S]}],py:[{py:[S]}],ps:[{ps:[S]}],pe:[{pe:[S]}],pt:[{pt:[S]}],pr:[{pr:[S]}],pb:[{pb:[S]}],pl:[{pl:[S]}],m:[{m:[k]}],mx:[{mx:[k]}],my:[{my:[k]}],ms:[{ms:[k]}],me:[{me:[k]}],mt:[{mt:[k]}],mr:[{mr:[k]}],mb:[{mb:[k]}],ml:[{ml:[k]}],"space-x":[{"space-x":[L]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[L]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Pe,t]}],"min-w":[{"min-w":[Pe,t,"min","max","fit"]}],"max-w":[{"max-w":[Pe,t,"none","full","min","max","fit","prose",{screen:[os]},os]}],h:[{h:[Pe,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Pe,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Pe,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Pe,t,"auto","min","max","fit"]}],"font-size":[{text:["base",os,as]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",gg]}],"font-family":[{font:[sc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Pe]}],"line-clamp":[{"line-clamp":["none",Uo,gg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",bi,Pe]}],"list-image":[{"list-image":["none",Pe]}],"list-style-type":[{list:["none","disc","decimal",Pe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...B(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",bi,as]}],"underline-offset":[{"underline-offset":["auto",bi,Pe]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...G(),fO]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",hO]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},mO]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...B(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:B()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...B()]}],"outline-offset":[{"outline-offset":[bi,Pe]}],"outline-w":[{outline:[bi,as]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[bi,as]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",os,gO]}],"shadow-color":[{shadow:[sc]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...Y(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Y()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",os,Pe]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[p]}],saturate:[{saturate:[v]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Pe]}],duration:[{duration:D()}],ease:[{ease:["linear","in","out","in-out",Pe]}],delay:[{delay:D()}],animate:[{animate:["none","spin","ping","pulse","bounce",Pe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[ic,Pe]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[R]}],"skew-y":[{"skew-y":[R]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Pe]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Pe]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Pe]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[bi,as,gg]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},d5=rO(bO),Ue=({children:e,className:t,...r})=>o.jsx("div",{className:d5("bg-glass backdrop-blur-xl border border-glass-border rounded-xl",t),...r,children:e}),ou=({url:e,name:t,alt:r="User",size:n="md",className:i})=>{const s={sm:"size-8 text-xs",md:"size-10 text-sm",lg:"size-16 text-lg",xl:"size-32 text-2xl"},a=t?t.charAt(0).toUpperCase():r?r.charAt(0).toUpperCase():"?";return o.jsx("div",{className:d5("rounded-full bg-surface-light border border-white/10 flex items-center justify-center overflow-hidden shrink-0 text-slate-400 font-bold select-none",s[n],i),children:e?o.jsx("img",{src:e,alt:t||r,className:"w-full h-full object-cover"}):o.jsx("span",{children:a})})},wO=()=>o.jsx("div",{className:"flex h-screen w-full overflow-hidden bg-background-dark relative",children:o.jsx("main",{className:"flex-1 min-w-0 relative overflow-hidden flex flex-col",children:o.jsx(c5,{})})}),Xe=P.forwardRef(({children:e,variant:t="primary",size:r="md",className:n,icon:i,isLoading:s,...a},l)=>{const d="inline-flex items-center justify-center rounded-lg font-medium transition-all focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed",h={primary:"bg-primary hover:bg-primary-hover text-white shadow-lg shadow-primary/25 border border-transparent",secondary:"bg-surface-light hover:bg-surface-lighter text-slate-200 border border-glass-border",ghost:"bg-transparent hover:bg-white/5 text-slate-400 hover:text-white",danger:"bg-red-500/10 hover:bg-red-500/20 text-red-500 border border-red-500/20"},f={sm:"px-3 py-1.5 text-xs gap-1.5",md:"px-4 py-2 text-sm gap-2",lg:"px-6 py-3 text-base gap-3"};return o.jsxs("button",{ref:l,className:d5(d,h[t],f[r],n),disabled:s,...a,children:[s?o.jsx("span",{className:"material-symbols-outlined animate-spin text-[18px]",children:"progress_activity"}):i?o.jsx("span",{className:"material-symbols-outlined text-[18px]",children:i}):null,e]})});Xe.displayName="Button";const _O=({isOpen:e,onClose:t,onCreate:r})=>{const[n,i]=P.useState(""),[s,a]=P.useState("Fantasy");if(!e)return null;const l=d=>{d.preventDefault(),r({title:n,genre:s}),i(""),t()};return o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t}),o.jsx("div",{className:"relative w-full max-w-md animate-in fade-in zoom-in duration-200",children:o.jsxs(Ue,{className:"p-8 border-primary/30 shadow-2xl shadow-primary/10",children:[o.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Create New World"}),o.jsxs("form",{onSubmit:l,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-400 mb-1 uppercase tracking-wider",children:"Project Title"}),o.jsx("input",{type:"text",value:n,onChange:d=>i(d.target.value),placeholder:"e.g., The Realms of Aethelgard",className:"w-full bg-background-dark/50 border border-glass-border rounded-lg px-4 py-3 text-white focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-all",autoFocus:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-400 mb-1 uppercase tracking-wider",children:"Genre"}),o.jsxs("select",{value:s,onChange:d=>a(d.target.value),className:"w-full bg-background-dark/50 border border-glass-border rounded-lg px-4 py-3 text-white focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-all appearance-none",children:[o.jsx("option",{value:"Fantasy",children:"Fantasy"}),o.jsx("option",{value:"Sci-Fi",children:"Sci-Fi"}),o.jsx("option",{value:"Horror",children:"Horror"}),o.jsx("option",{value:"Steampunk",children:"Steampunk"}),o.jsx("option",{value:"Modern",children:"Modern"}),o.jsx("option",{value:"Historical",children:"Historical"})]})]}),o.jsxs("div",{className:"pt-4 flex justify-end gap-3",children:[o.jsx(Xe,{variant:"ghost",onClick:t,type:"button",children:"Cancel"}),o.jsx(Xe,{variant:"primary",type:"submit",icon:"add",children:"Create World"})]})]})]})})]})},NO="/api",he={async request(e,t={}){const r=`${NO}${e}`,n={"Content-Type":"application/json",...t.headers},i=await fetch(r,{...t,headers:n,credentials:"include"});if(!i.ok){const s=await i.json().catch(()=>({}));throw new Error(s.error||`HTTP error! status: ${i.status}`)}return i.status===204||i.headers.get("content-length")==="0"?null:i.json()},get(e,t={}){return this.request(e,{method:"GET",headers:t})},post(e,t,r={}){return this.request(e,{method:"POST",body:JSON.stringify(t),headers:r})},put(e,t,r={}){return this.request(e,{method:"PUT",body:JSON.stringify(t),headers:r})},patch(e,t,r={}){return this.request(e,{method:"PATCH",body:JSON.stringify(t),headers:r})},delete(e,t={}){return this.request(e,{method:"DELETE",headers:t})}},xg={list:()=>he.get("/workspaces"),create:(e,t,r,n)=>he.post("/workspaces",{name:e,title:t,genre:r,imageUrl:n}),delete:e=>he.delete("/workspaces/"+e),select:e=>he.post("/workspaces/select",{projectName:e})},SO=({title:e,desc:t,type:r,updated:n,image:i,id:s,name:a,username:l,onDelete:d})=>o.jsx(Os,{to:`/${l}/${a}`,className:"block group",children:o.jsxs(Ue,{className:"h-64 flex flex-col p-6 hover:shadow-2xl hover:shadow-primary/20 hover:border-primary/50 transition-all relative",children:[o.jsx("div",{className:"absolute top-6 right-6 z-20 opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx("button",{onClick:h=>{h.preventDefault(),h.stopPropagation(),d(a)},className:"p-2 rounded-lg bg-red-500/10 hover:bg-red-500/20 text-red-500 transition-colors",children:o.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"})})}),o.jsxs("div",{className:"mb-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx("div",{className:"h-10 w-10 rounded-xl bg-primary/20 flex items-center justify-center text-primary border border-primary/20 group-hover:scale-105 transition-transform",children:o.jsx("span",{className:"material-symbols-outlined text-xl",children:r==="Fantasy"?"auto_awesome":r==="Sci-Fi"?"rocket_launch":"public"})}),o.jsxs("div",{children:[o.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-primary",children:r}),o.jsx("h3",{className:"text-xl font-bold text-white leading-tight group-hover:text-primary transition-colors",children:e})]})]}),o.jsx("p",{className:"text-sm text-slate-400 line-clamp-3 leading-relaxed",children:t})]}),o.jsxs("div",{className:"pt-4 border-t border-white/5 flex justify-between items-center text-xs text-slate-500",children:[o.jsxs("span",{children:["Updated ",n]}),o.jsx("span",{className:"group-hover:translate-x-1 transition-transform material-symbols-outlined text-base",children:"arrow_forward"})]})]})}),jO=()=>{const[e,t]=P.useState([]),[r,n]=P.useState(!1),[i,s]=P.useState(!0);Wr(),P.useEffect(()=>{a()},[]);const a=async()=>{try{const h=await he.get("/proyectos");t(h)}catch(h){console.error("Error fetching projects:",h)}finally{s(!1)}},l=async h=>{if(window.confirm(`Are you sure you want to delete "${h}"?`))try{await he.delete(`/proyectos/${h}`),a()}catch(f){console.error("Failed to delete project:",f)}},d=async h=>{try{(await he.post("/proyectos/crear",{nombreProyecto:h.title,tipo:h.genre,descripcion:`A new ${h.genre} world.`})).success&&(n(!1),a())}catch(f){console.error("Error creating project:",f)}};return o.jsxs("div",{className:"flex-1 flex flex-col items-center p-12 pt-28 overflow-y-auto custom-scrollbar relative",children:[o.jsxs("div",{className:"w-full max-w-6xl space-y-12",children:[o.jsxs("header",{className:"flex flex-col gap-2",children:[o.jsx("h1",{className:"text-5xl font-manrope font-black text-white tracking-tight",children:"Chronos Atlas"}),o.jsx("p",{className:"text-slate-500 text-lg font-medium",children:"Select a world to begin building."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[e.map(h=>o.jsx(SO,{id:h.id,name:h.nombreProyecto,username:h.usuario||"Roberto",title:h.nombreProyecto,desc:h.descripcion,type:h.tipo,updated:"Recently",image:h.imagenUrl,onDelete:l},h.id)),i&&e.length===0&&o.jsxs("div",{className:"col-span-full py-20 flex flex-col items-center gap-4 opacity-30",children:[o.jsx("span",{className:"material-symbols-outlined text-6xl animate-spin",children:"refresh"}),o.jsx("span",{className:"text-sm font-bold uppercase tracking-widest",children:"Scanning Vaults..."})]}),!i&&e.length===0&&o.jsxs("div",{className:"col-span-full py-20 flex flex-col items-center gap-4 border-2 border-dashed border-white/5 rounded-[3rem] bg-white/[0.02]",children:[o.jsx("span",{className:"material-symbols-outlined text-6xl text-slate-700",children:"folder_open"}),o.jsx("span",{className:"text-sm font-medium text-slate-500",children:"No worlds found. Time to create one."})]}),o.jsxs("div",{onClick:()=>n(!0),className:"group relative h-64 rounded-2xl border-2 border-dashed border-slate-700 hover:border-primary hover:bg-primary/5 flex flex-col items-center justify-center cursor-pointer transition-all",children:[o.jsx("div",{className:"size-16 rounded-full bg-surface-light flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:o.jsx("span",{className:"material-symbols-outlined text-3xl text-slate-400 group-hover:text-primary",children:"add"})}),o.jsx("span",{className:"text-sm font-bold text-slate-400 group-hover:text-primary",children:"Create New Project"})]})]})]}),o.jsx(_O,{isOpen:r,onClose:()=>n(!1),onCreate:d})]})},kO=["FANTASA","SCI-FI","HORROR","LORE","MISTERIO","HISTRICO","CYBERPUNK","STEAMPUNK"],CO=({isOpen:e,onClose:t,onCreate:r})=>{if(!e)return null;const[n,i]=P.useState(!1),[s,a]=P.useState({name:"",title:"",genre:"FANTASA",imageUrl:"https://images.unsplash.com/photo-1518709268805-4e9042af9f23?auto=format&fit=crop&q=80&w=800"}),l=h=>{const{name:f,value:p}=h.target;a(g=>({...g,[f]:p}))},d=h=>{h.preventDefault();let f=s.name;if(!f&&s.title&&(f=s.title.toLowerCase().replace(/[^a-z0-9]/g,"-")),!f){alert("Project ID/Name is required");return}r({...s,name:f}),t(),a({name:"",title:"",genre:"FANTASA",imageUrl:"https://images.unsplash.com/photo-1518709268805-4e9042af9f23?auto=format&fit=crop&q=80&w=800"})};return Su.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",onClick:t}),o.jsxs("div",{className:"relative w-full max-w-2xl bg-[#0a0a0c] border border-white/10 rounded-3xl shadow-2xl overflow-hidden flex animate-in zoom-in-95 duration-200",children:[o.jsxs("div",{className:"w-1/3 bg-black relative hidden sm:block",children:[o.jsx("img",{src:s.imageUrl,onError:()=>i(!0),className:`absolute inset-0 w-full h-full object-cover opacity-60 transition-opacity duration-500 ${n?"hidden":""}`,alt:"Preview"}),o.jsxs("div",{className:"absolute inset-x-0 bottom-0 p-6 bg-gradient-to-t from-black to-transparent",children:[o.jsx("h4",{className:"text-white font-black text-xl leading-none",children:s.title||"Untitled"}),o.jsx("span",{className:"text-[10px] font-bold text-primary uppercase tracking-widest mt-2 block",children:s.genre})]})]}),o.jsxs("div",{className:"flex-1 p-8",children:[o.jsx("h2",{className:"text-2xl font-black text-white mb-6",children:"Nuevo Cuaderno"}),o.jsxs("form",{onSubmit:d,className:"space-y-5",children:[o.jsxs("div",{className:"space-y-1.5",children:[o.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-text-muted",children:"Ttulo del Proyecto"}),o.jsx("input",{type:"text",name:"title",value:s.title,onChange:l,placeholder:"e.g. Las Crnicas de Etheria",className:"w-full bg-surface-dark border border-glass-border rounded-xl px-4 py-3 text-white text-sm focus:border-primary/50 focus:ring-1 focus:ring-primary/50 outline-none transition-all",autoFocus:!0})]}),o.jsxs("div",{className:"space-y-1.5",children:[o.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-text-muted",children:"ID de Archivo (Slug)"}),o.jsx("input",{type:"text",name:"name",value:s.name,onChange:l,placeholder:"e.g. etheria-v1",className:"w-full bg-surface-dark border border-glass-border rounded-xl px-4 py-3 text-white font-mono text-xs focus:border-primary/50 focus:ring-1 focus:ring-primary/50 outline-none transition-all placeholder:text-white/10"}),o.jsx("p",{className:"text-[10px] text-white/20",children:"Se usar como nombre del archivo .db"})]}),o.jsxs("div",{className:"space-y-1.5",children:[o.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-text-muted",children:"Gnero"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:kO.slice(0,4).map(h=>o.jsx("button",{type:"button",onClick:()=>a(f=>({...f,genre:h})),className:`px-3 py-2 rounded-lg text-[10px] font-bold border transition-all ${s.genre===h?"bg-primary text-white border-primary":"bg-surface-dark border-glass-border text-text-muted hover:border-white/20"}`,children:h},h))})]}),o.jsxs("div",{className:"space-y-1.5",children:[o.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-text-muted",children:"Imagen de Portada (URL)"}),o.jsx("input",{type:"text",name:"imageUrl",value:s.imageUrl,onChange:h=>{a(f=>({...f,imageUrl:h.target.value})),i(!1)},className:"w-full bg-surface-dark border border-glass-border rounded-xl px-4 py-3 text-white text-xs focus:border-primary/50 focus:ring-1 focus:ring-primary/50 outline-none transition-all truncate"})]}),o.jsxs("div",{className:"pt-4 flex gap-3",children:[o.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-3 bg-surface-dark hover:bg-white/5 border border-glass-border rounded-xl text-xs font-bold text-text-muted transition-all",children:"Cancelar"}),o.jsxs("button",{type:"submit",className:"flex-1 px-4 py-3 bg-primary hover:bg-primary-light text-white rounded-xl text-xs font-bold transition-all shadow-lg shadow-primary/20 flex items-center justify-center gap-2",children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"rocket_launch"}),"Crear Universo"]})]})]})]})]})]}),document.body)},EO=()=>{const e=Wr(),[t,r]=P.useState([]),[n,i]=P.useState(!0),[s,a]=P.useState(null),[l,d]=P.useState(""),[h,f]=P.useState(!1);P.useEffect(()=>{p()},[]);const p=async()=>{try{i(!0);const k=await xg.list();r(k)}catch(k){console.error("Failed to load workspaces",k),a("Error al cargar cuadernos. Est el servidor encendido?")}finally{i(!1)}},g=async k=>{try{i(!0);const _=await xg.select(k);_.success&&_.redirect&&(localStorage.setItem("user",JSON.stringify({username:"local",success:!0})),e(_.redirect))}catch(_){a(_.message||"Fallo al entrar al cuaderno"),i(!1)}},x=async k=>{try{i(!0),(await xg.create(k.name,k.title,k.genre,k.imageUrl)).success&&await g(k.name)}catch{a("Error al crear cuaderno"),i(!1)}},w=k=>{const _=k.split("").reduce((j,C)=>j+C.charCodeAt(0),0),S=["FANTASA","SCI-FI","HORROR","LORE","MISTERIO"],v=["https://images.unsplash.com/photo-1518709268805-4e9042af9f23?auto=format&fit=crop&q=80&w=800","https://images.unsplash.com/photo-1451187580459-43490279c0fa?auto=format&fit=crop&q=80&w=800","https://images.unsplash.com/photo-1505634467193-785724601157?auto=format&fit=crop&q=80&w=800","https://images.unsplash.com/photo-1478720568477-152d9b164e26?auto=format&fit=crop&q=80&w=800"];return{tag:S[_%S.length],img:v[_%v.length],desc:"Una tierra dividida por la magia y la tecnologa antigua...",initials:k.substring(0,2).toUpperCase(),time:"hace 2h"}},b=t.filter(k=>k.toLowerCase().includes(l.toLowerCase()));return o.jsxs("div",{className:"min-h-screen w-full bg-[#0a0b14] text-white flex flex-col items-center p-8 font-sans selection:bg-indigo-500/30 overflow-y-auto custom-scrollbar",children:[o.jsxs("header",{className:"w-full max-w-6xl mt-24 mb-12 flex flex-col lg:flex-row lg:items-end justify-between gap-8",children:[o.jsx("div",{className:"space-y-4",children:o.jsx("div",{className:"flex items-center gap-4",children:o.jsxs("h1",{className:"text-6xl font-black tracking-tighter leading-none",children:[o.jsx("span",{className:"block text-indigo-400",children:"Mis"}),o.jsx("span",{className:"block text-white",children:"Cuadernos"})]})})}),o.jsx("div",{className:"flex items-center gap-4",children:o.jsxs("div",{className:"relative group min-w-[300px]",children:[o.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-white/20 text-xl group-focus-within:text-indigo-400 transition-colors pointer-events-none",children:"search"}),o.jsx("input",{type:"text",placeholder:"Buscar...",value:l,onChange:k=>d(k.target.value),className:"w-full bg-[#13141f] border border-white/5 rounded-2xl py-3 pl-12 pr-4 text-sm text-white focus:outline-none focus:border-indigo-500/50 transition-all placeholder:text-white/10"})]})})]}),o.jsx("section",{className:"w-full max-w-6xl",children:n?o.jsxs("div",{className:"flex flex-col items-center gap-6 py-20 opacity-20",children:[o.jsx("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"}),o.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.3em]",children:"Accediendo al Sector Local..."})]}):o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 pb-20",children:[o.jsxs("div",{onClick:()=>f(!0),className:"group relative h-[380px] rounded-[2.5rem] border-2 border-dashed border-white/5 flex flex-col items-center justify-center gap-6 hover:bg-white/5 hover:border-indigo-500/30 transition-all cursor-pointer overflow-hidden animate-in fade-in duration-700",children:[o.jsx("div",{className:"w-20 h-20 rounded-full bg-[#13141f] border border-white/5 flex items-center justify-center text-4xl text-white/20 group-hover:scale-110 group-hover:text-indigo-400 transition-all",children:o.jsx("span",{className:"material-symbols-outlined text-4xl",children:"add"})}),o.jsxs("div",{className:"text-center",children:[o.jsx("h3",{className:"text-xl font-black tracking-tight text-white/50 group-hover:text-white transition-colors",children:"Nuevo Cuaderno"}),o.jsx("p",{className:"text-[10px] font-bold text-white/20 uppercase tracking-widest mt-2 group-hover:text-white/40",children:"Inicia un nuevo universo"})]})]}),b.map(k=>{const _=w(k);return o.jsxs("div",{onClick:()=>g(k),className:"group relative h-[380px] rounded-[2.5rem] bg-[#13141f] border border-white/5 overflow-hidden transition-all hover:-translate-y-2 hover:shadow-2xl hover:shadow-indigo-500/10 cursor-pointer animate-in fade-in slide-in-from-bottom-4",children:[o.jsxs("div",{className:"absolute inset-x-0 top-0 h-2/3",children:[o.jsx("img",{src:_.img,className:"w-full h-full object-cover opacity-40 group-hover:opacity-60 transition-opacity",alt:""}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#13141f] via-transparent to-transparent"})]}),o.jsx("div",{className:"absolute inset-0 flex flex-col justify-end p-8",children:o.jsxs("div",{className:"mt-auto space-y-3",children:[o.jsx("span",{className:"inline-block px-3 py-1 bg-red-500/20 border border-red-500/30 text-[9px] font-black text-red-100 rounded-lg tracking-widest uppercase",children:_.tag}),o.jsx("h3",{className:"text-3xl font-black text-white tracking-tighter leading-tight group-hover:text-indigo-400 transition-colors",children:k}),o.jsx("p",{className:"text-xs text-white/40 line-clamp-2 leading-relaxed",children:_.desc}),o.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-white/5 mt-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]"}),o.jsxs("span",{className:"text-[9px] font-black uppercase tracking-widest text-white/20",children:["ltima edicin: ",o.jsx("span",{className:"text-white/40",children:_.time})]})]}),o.jsx("div",{className:"w-8 h-8 rounded-full bg-white/5 border border-white/10 flex items-center justify-center text-[10px] font-black text-indigo-300",children:_.initials})]})]})})]},k)})]})}),s&&o.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 px-6 py-3 bg-red-500/20 border border-red-500/30 text-red-200 rounded-2xl text-xs font-bold shadow-2xl animate-bounce",children:s}),o.jsx(CO,{isOpen:h,onClose:()=>f(!1),onCreate:x})]})},ih=({icon:e,title:t,desc:r,color:n})=>o.jsxs("div",{className:"group relative p-8 rounded-[32px] bg-surface-dark border border-white/5 hover:border-white/10 transition-all cursor-pointer flex flex-col h-full gap-6 hover:shadow-2xl hover:shadow-black/40",children:[o.jsx("div",{className:`size-14 rounded-2xl ${n} flex items-center justify-center text-white shadow-lg group-hover:scale-110 transition-all duration-500`,children:o.jsx("span",{className:"material-symbols-outlined text-3xl",children:e})}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-2xl font-bold text-white tracking-tight",children:t}),o.jsx("p",{className:"text-slate-500 text-sm leading-relaxed",children:r})]}),o.jsxs("div",{className:"mt-auto pt-4 border-t border-white/5 flex items-center justify-between text-slate-500 group-hover:text-white transition-colors",children:[o.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Architect Tool"}),o.jsx("span",{className:"material-symbols-outlined text-xl group-hover:translate-x-1 transition-transform",children:"arrow_forward"})]})]}),TO=()=>{const{projectName:e,handleCreateEntity:t}=La(),r=Wr();return Kr(),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-12 gap-16 max-w-6xl mx-auto w-full",children:[o.jsxs("div",{className:"flex flex-col items-center text-center gap-8 max-w-2xl animate-in fade-in slide-in-from-bottom-8 duration-700",children:[o.jsx("div",{className:"size-20 rounded-full bg-white text-background-dark flex items-center justify-center shadow-2xl shadow-white/20",children:o.jsx("span",{className:"material-symbols-outlined text-4xl font-bold",children:"explore"})}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h1",{className:"text-6xl font-manrope font-black text-white tracking-tighter leading-tight",children:"Bienvenido de nuevo, Viajero."}),o.jsxs("p",{className:"text-xl text-slate-400 font-medium leading-relaxed",children:["Tu mundo ",o.jsx("span",{className:"text-primary font-bold",children:e||"Cargando..."})," espera ser descubierto. El lienzo est vaco, pero tu imaginacin no tiene lmites. Cmo empezamos hoy?"]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 w-full items-stretch animate-in fade-in slide-in-from-bottom-12 duration-1000 delay-300",children:[o.jsx("div",{onClick:()=>t(null,"default"),children:o.jsx(ih,{icon:"person_add",title:"Aadir Entidad",desc:"Agrega un personaje, lugar o item importante a tu base de datos.",color:"bg-indigo-600"})}),o.jsx("div",{onClick:()=>t(null,"map"),children:o.jsx(ih,{icon:"map",title:"Crear Mapa",desc:"Dibuja una representacin cartogrfica de una regin.",color:"bg-purple-600"})}),o.jsx("div",{onClick:()=>r("writing"),children:o.jsx(ih,{icon:"edit_note",title:"Empezar a Escribir",desc:"Abre el editor de texto y comienza un nuevo captulo.",color:"bg-emerald-600"})}),o.jsx("div",{onClick:()=>alert("WIP: Notas Rpidas"),children:o.jsx(ih,{icon:"lightbulb",title:"Ver Ideas Rpidas",desc:"Revisa tus notas y fragmentos de inspiracin guardados.",color:"bg-amber-600"})})]})]})},PO=()=>{var f,p;const e=Wr(),[t,r]=P.useState(null),[n,i]=P.useState("appearance"),[s,a]=P.useState({theme:"deep_space",font:"Manrope",fontSize:16,focusMode:!1,transparencyEffects:!0,vaultPath:"C:/Users/Author/Documents/ChronosAtlas/MyFirstWorld"});P.useEffect(()=>{console.log("Settings Page Mounted");try{const g=localStorage.getItem("user");g&&g!=="undefined"&&r(JSON.parse(g))}catch(g){console.error("Failed to parse user settings",g)}},[]);const l=async()=>{try{await he.post("/auth/logout",{})}catch(g){console.error("Logout error",g)}finally{localStorage.removeItem("user"),sessionStorage.clear(),e("/")}},d=[{id:"general",label:"General",icon:"settings"},{id:"appearance",label:"Apariencia",icon:"palette"},{id:"editor",label:"Editor",icon:"edit_note"},{id:"sync",label:"Sincronizacin",icon:"sync_lock"},{id:"notifications",label:"Notificaciones",icon:"notifications"}],h=[{id:"deep_space",label:"Deep Space",color:"#0f172a"},{id:"nebula",label:"Nebula",color:"#312e81"},{id:"high_contrast",label:"High Contrast",color:"#000000"}];return o.jsxs("div",{className:"flex w-full h-full bg-[#050508] text-white font-sans overflow-hidden",children:[o.jsxs("aside",{className:"w-64 flex-none flex flex-col border-r border-white/5 bg-[#0a0a0e]",children:[o.jsxs("div",{className:"p-8 pb-4",children:[o.jsx("div",{className:"size-10 rounded-full bg-white flex items-center justify-center text-black mb-4",children:o.jsx("span",{className:"material-symbols-outlined text-2xl",children:"settings"})}),o.jsx("h1",{className:"text-xl font-bold tracking-tight",children:"Ajustes"}),o.jsx("p",{className:"text-xs text-slate-500 font-mono mt-1",children:"v2.4.0 Local-Build"})]}),o.jsx("nav",{className:"flex-1 px-4 py-4 space-y-1",children:d.map(g=>o.jsxs("button",{onClick:()=>i(g.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold transition-all ${n===g.id?"bg-indigo-500/10 text-indigo-400":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:[o.jsx("span",{className:"material-symbols-outlined text-lg",children:g.icon}),g.label]},g.id))}),o.jsx("div",{className:"p-4 border-t border-white/5",children:o.jsxs("button",{onClick:l,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold text-red-400 hover:bg-red-500/10 transition-colors",children:[o.jsx("span",{className:"material-symbols-outlined text-lg",children:"logout"}),"Cerrar Sesin"]})})]}),o.jsx("main",{className:"flex-1 overflow-y-auto p-12 custom-scrollbar",children:o.jsxs("div",{className:"max-w-3xl mx-auto space-y-12",children:[o.jsxs("header",{children:[o.jsx("h2",{className:"text-3xl font-bold mb-2",children:(f=d.find(g=>g.id===n))==null?void 0:f.label}),o.jsx("p",{className:"text-slate-500",children:"Personaliza la interfaz visual y tu entorno de escritura para maximizar tu creatividad y concentracin."})]}),n==="appearance"&&o.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4",children:[o.jsxs("section",{className:"bg-[#0f0f13] border border-white/5 rounded-3xl p-8",children:[o.jsx("h3",{className:"text-lg font-bold mb-1",children:"Tema de la Interfaz"}),o.jsx("p",{className:"text-xs text-slate-500 mb-6",children:"Selecciona el esquema de colores que prefieras."}),o.jsx("div",{className:"grid grid-cols-3 gap-6",children:h.map(g=>o.jsxs("button",{onClick:()=>a({...s,theme:g.id}),className:`relative group text-left transition-all ${s.theme===g.id?"ring-2 ring-indigo-500":"hover:ring-1 hover:ring-white/20"} rounded-2xl overflow-hidden`,children:[o.jsx("div",{className:"h-32 bg-black/20 relative p-4 flex items-center justify-center",children:o.jsx("div",{className:"w-full h-full rounded-xl flex items-center justify-center",style:{backgroundColor:g.color},children:o.jsx("div",{className:"size-8 rounded-full bg-white/10 backdrop-blur-md"})})}),o.jsx("div",{className:"p-4 bg-[#18181b]",children:o.jsx("span",{className:"text-xs font-bold text-slate-300 group-hover:text-white",children:g.label})})]},g.id))})]}),o.jsxs("section",{className:"bg-[#0f0f13] border border-white/5 rounded-3xl p-8 space-y-8",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:"material-symbols-outlined text-indigo-400",children:"text_fields"}),o.jsx("h3",{className:"text-lg font-bold",children:"Configuracin del Editor"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-12 border-b border-white/5 pb-8",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx("label",{className:"text-xs font-bold text-slate-500",children:"Tipografa"}),o.jsxs("div",{className:"relative",children:[o.jsxs("select",{value:s.font,onChange:g=>a({...s,font:g.target.value}),className:"w-full bg-[#18181b] border border-white/10 rounded-xl px-4 py-3 text-sm text-white appearance-none outline-none focus:border-indigo-500 transition-colors",children:[o.jsx("option",{value:"Manrope",children:"Manrope (Sans-serif)"}),o.jsx("option",{value:"Inter",children:"Inter"}),o.jsx("option",{value:"Merriweather",children:"Merriweather (Serif)"})]}),o.jsx("span",{className:"material-symbols-outlined absolute right-4 top-1/2 -translate-y-1/2 text-slate-500 pointer-events-none text-sm",children:"expand_more"})]}),o.jsx("p",{className:"text-[10px] text-slate-600",children:"La fuente utilizada en el lienzo de escritura."})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("label",{className:"text-xs font-bold text-slate-500",children:"Tamao de Fuente"}),o.jsxs("span",{className:"text-xs font-bold text-indigo-400",children:[s.fontSize,"px"]})]}),o.jsx("input",{type:"range",min:"12",max:"24",value:s.fontSize,onChange:g=>a({...s,fontSize:parseInt(g.target.value)}),className:"w-full accent-indigo-500 h-1 bg-white/10 rounded-lg appearance-none cursor-pointer"}),o.jsxs("div",{className:"flex justify-between text-[10px] text-slate-600 font-bold uppercase",children:[o.jsx("span",{children:"Aa"}),o.jsx("span",{children:"Aa"})]})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex gap-4",children:[o.jsx("div",{className:"size-10 rounded-full bg-white/5 flex items-center justify-center text-slate-400",children:o.jsx("span",{className:"material-symbols-outlined",children:"center_focus_strong"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-bold text-white",children:"Modo Enfoque"}),o.jsx("p",{className:"text-xs text-slate-500",children:"Oculta todos los paneles laterales al escribir."})]})]}),o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:s.focusMode,onChange:g=>a({...s,focusMode:g.target.checked}),className:"sr-only peer"}),o.jsx("div",{className:"w-11 h-6 bg-white/10 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-slate-400 after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-500 peer-checked:after:bg-white"})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex gap-4",children:[o.jsx("div",{className:"size-10 rounded-full bg-white/5 flex items-center justify-center text-slate-400",children:o.jsx("span",{className:"material-symbols-outlined",children:"blur_on"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-bold text-white",children:"Efectos de Transparencia"}),o.jsx("p",{className:"text-xs text-slate-500",children:"Desactivar para mejorar el rendimiento."})]})]}),o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:s.transparencyEffects,onChange:g=>a({...s,transparencyEffects:g.target.checked}),className:"sr-only peer"}),o.jsx("div",{className:"w-11 h-6 bg-white/10 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-slate-400 after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-500 peer-checked:after:bg-white"})]})]})]})]}),o.jsxs("section",{className:"bg-[#0f0f13] border border-white/5 rounded-3xl p-1 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-indigo-500 rounded-l-3xl"}),o.jsxs("div",{className:"p-8",children:[o.jsxs("div",{className:"flex justify-between items-start mb-6",children:[o.jsxs("div",{className:"flex gap-4",children:[o.jsx("span",{className:"material-symbols-outlined text-indigo-400 text-2xl",children:"folder_special"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-white",children:"Almacenamiento Local"}),o.jsx("p",{className:"text-xs text-slate-500",children:"Tus datos viven en tu dispositivo. Gestiona tus copias de seguridad."})]})]}),o.jsxs("span",{className:"px-3 py-1 bg-green-500/10 text-green-400 rounded-full text-[10px] font-bold uppercase border border-green-500/20 flex items-center gap-2",children:[o.jsx("span",{className:"size-1.5 rounded-full bg-green-500 animate-pulse"})," Sincronizado"]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-slate-500 block mb-2",children:"Ruta de la Bveda"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("div",{className:"flex-1 bg-[#18181b] border border-white/10 rounded-xl px-4 py-3 text-xs font-mono text-slate-300 truncate",children:s.vaultPath}),o.jsx("button",{className:"px-4 py-2 bg-white/5 hover:bg-white/10 text-white rounded-xl text-xs font-bold transition-colors",children:"Cambiar"})]})]}),o.jsxs("div",{className:"bg-[#18181b] rounded-xl p-4 flex items-center justify-between border border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"size-10 rounded-full bg-indigo-500/20 flex items-center justify-center text-indigo-400",children:o.jsx("span",{className:"material-symbols-outlined",children:"history"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-bold text-white",children:"Copia de Seguridad Automtica"}),o.jsx("p",{className:"text-[10px] text-slate-500",children:"Ultima copia: Hace 12 minutos"})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"px-4 py-2 bg-white/5 hover:bg-white/10 text-white rounded-lg text-xs font-bold transition-colors",children:"Restaurar"}),o.jsx("button",{className:"px-4 py-2 bg-indigo-500 hover:bg-indigo-600 text-white rounded-lg text-xs font-bold transition-colors shadow-lg shadow-indigo-500/20",children:"Respaldar Ahora"})]})]})]})]})]}),o.jsx("div",{className:"flex justify-end pt-8 pb-20",children:o.jsx("button",{className:"px-8 py-3 bg-white text-black font-bold rounded-full hover:scale-105 transition-transform shadow-xl",children:"Guardar Cambios"})})]}),n!=="appearance"&&o.jsxs("div",{className:"flex flex-col items-center justify-center h-[50vh] text-slate-600",children:[o.jsx("span",{className:"material-symbols-outlined text-6xl mb-4 opacity-20",children:"construction"}),o.jsx("h3",{className:"text-xl font-bold text-slate-500",children:"En Construccin"}),o.jsxs("p",{className:"text-sm",children:["El mdulo ",(p=d.find(g=>g.id===n))==null?void 0:p.label," estar disponible pronto."]})]})]})})]})},ku=({isOpen:e,onClose:t,onConfirm:r,title:n,message:i,confirmText:s="Confirmar",cancelText:a="Cancelar",type:l="danger"})=>e?Su.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",onClick:t}),o.jsxs("div",{className:"relative w-full max-w-md bg-[#0a0a0c] border border-white/10 rounded-3xl shadow-2xl p-6 animate-in zoom-in-95 duration-200 overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-0 right-0 h-32 bg-gradient-to-b from-white/5 to-transparent pointer-events-none"}),o.jsxs("div",{className:"relative z-10 text-center",children:[o.jsx("div",{className:`mx-auto mb-4 size-16 rounded-2xl flex items-center justify-center ${l==="danger"?"bg-red-500/10 text-red-500":"bg-yellow-500/10 text-yellow-500"}`,children:o.jsx("span",{className:"material-symbols-outlined text-3xl",children:l==="danger"?"delete_forever":"warning"})}),o.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:n}),o.jsx("p",{className:"text-text-muted text-sm mb-8 leading-relaxed",children:i}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:t,className:"flex-1 px-4 py-3 rounded-xl bg-surface-light hover:bg-white/10 text-text-muted hover:text-white text-xs font-bold transition-all border border-white/5",children:a}),o.jsx("button",{onClick:()=>{r(),t()},className:`flex-1 px-4 py-3 rounded-xl text-white text-xs font-bold transition-all shadow-lg flex items-center justify-center gap-2
                                ${l==="danger"?"bg-red-500 hover:bg-red-600 shadow-red-500/20":"bg-primary hover:bg-primary-light shadow-primary/20"}`,children:o.jsx("span",{children:s})})]})]})]})]}),document.body):null,p6=({compact:e=!1})=>{const[t,r]=P.useState(null),[n,i]=P.useState([]),[s,a]=P.useState(!1),[l,d]=P.useState(null);P.useEffect(()=>{h()},[]);const h=async()=>{try{const x=await he.get("/world-bible/folders");x.length>0&&r(x[0].id),f()}catch(x){console.error("Init error:",x)}},f=async()=>{a(!0);try{const x=await he.get("/world-bible/templates/global");i(x)}catch(x){console.error("Error loading templates:",x)}finally{a(!1)}},p=async x=>{if(t)try{await he.post(`/world-bible/folders/${t}/templates`,{nombre:x.label,tipo:x.type,required:x.required,metadata:x.metadata?JSON.stringify(x.metadata):null,global:!0}),f()}catch(w){console.error("Error creating template:",w)}},g=async()=>{if(l)try{await he.delete(`/world-bible/templates/${l}`),i(x=>x.filter(w=>w.id!==l))}catch(x){console.error("Error deleting template:",x)}finally{d(null)}};return o.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4 duration-500",children:[o.jsxs(Ue,{className:`${e?"p-4 bg-transparent border-none shadow-none":"p-8 space-y-8"}`,children:[o.jsx("header",{className:`flex ${e?"flex-col gap-4":"justify-between items-center"}`,children:o.jsxs("div",{children:[o.jsx("h3",{className:`${e?"text-sm":"text-xl"} font-bold text-white`,children:"Atributos Globales"}),o.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Define atributos disponibles para todas las entidades."})]})}),o.jsxs("div",{className:"space-y-4",children:[s?o.jsx("div",{className:"text-center p-4 text-slate-500",children:"Cargando plantillas..."}):n.map((x,w)=>o.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-2xl bg-white/[0.02] border border-white/5 hover:border-primary/50 hover:bg-white/5 transition-all cursor-grab active:cursor-grabbing group select-none",draggable:!0,onDragStart:b=>{b.dataTransfer.setData("application/reactflow/type","attribute"),b.dataTransfer.setData("templateId",x.id),b.dataTransfer.setData("templateData",JSON.stringify(x)),b.dataTransfer.effectAllowed="copy"},children:[o.jsxs("span",{className:"text-[10px] font-black text-slate-700 w-6 group-hover:text-primary transition-colors",children:["0",w+1]}),o.jsxs("div",{className:"flex-1 pointer-events-none",children:[o.jsx("div",{className:"text-sm font-bold text-white",children:x.nombre}),o.jsxs("div",{className:"text-[10px] text-slate-500 uppercase tracking-widest",children:[x.tipo," ",x.esObligatorio&&" Required"]}),x.metadata&&o.jsx("div",{className:"text-[10px] text-slate-600 font-mono mt-1 truncate",children:x.metadata})]}),o.jsx("button",{onClick:()=>d(x.id),className:"p-1.5 text-slate-500 hover:text-red-500 hover:bg-red-500/10 rounded-lg transition-colors",title:"Eliminar Plantilla Global",children:o.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]},x.id)),o.jsx(RO,{onAdd:p})]})]}),o.jsx(ku,{isOpen:!!l,onClose:()=>d(null),onConfirm:g,title:"Eliminar Plantilla",message:"Ests seguro de que quieres eliminar esta plantilla? Esta accin es irreversible.",confirmText:"Eliminar",type:"danger"})]})},RO=({onAdd:e})=>{const[t,r]=P.useState(""),[n,i]=P.useState("text"),[s,a]=P.useState(!1),[l,d]=P.useState([""]),h=()=>d([...l,""]),f=x=>d(l.filter((w,b)=>b!==x)),p=(x,w)=>{const b=[...l];b[x]=w,d(b)},g=()=>{if(!t)return;let x=null;["select","multi_select"].includes(n)&&(x={options:l.filter(w=>w.trim())}),e({label:t,type:n,required:s,metadata:x}),r(""),d([""])};return o.jsxs("div",{className:"p-4 rounded-2xl border-2 border-dashed border-white/10 bg-white/[0.01] space-y-4",children:[o.jsx("h4",{className:"text-xs font-black uppercase tracking-widest text-primary",children:"Add New Attribute"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsx("input",{placeholder:"Field Name",value:t,onChange:x=>r(x.target.value),className:"bg-black/20 border border-white/5 rounded-xl px-4 py-2 text-xs text-white outline-none focus:border-primary/30 min-w-0"}),o.jsxs("select",{value:n,onChange:x=>i(x.target.value),className:"bg-black/20 border border-white/5 rounded-xl px-4 py-2 text-xs text-white outline-none",children:[o.jsx("option",{value:"text",children:"Text (Long)"}),o.jsx("option",{value:"short_text",children:"Text (Short)"}),o.jsx("option",{value:"number",children:"Number"}),o.jsx("option",{value:"date",children:"Date"}),o.jsx("option",{value:"select",children:"Single Selection (Dropdown)"}),o.jsx("option",{value:"multi_select",children:"Multiple Selection"}),o.jsx("option",{value:"boolean",children:"Switch (True/False)"})]})]}),["select","multi_select"].includes(n)&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Options"}),o.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto pr-2 custom-scrollbar",children:l.map((x,w)=>o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{placeholder:`Option ${w+1}`,value:x,onChange:b=>p(w,b.target.value),className:"flex-1 bg-black/20 border border-white/5 rounded-lg px-3 py-1.5 text-xs text-white outline-none focus:border-primary/30"}),o.jsx("button",{onClick:()=>f(w),className:"p-1.5 hover:bg-red-500/20 text-slate-500 hover:text-red-400 rounded-lg transition-colors",children:o.jsx("span",{className:"material-symbols-outlined text-sm",children:"close"})})]},w))}),o.jsx("button",{onClick:h,className:"w-full py-1.5 text-[10px] font-bold uppercase tracking-widest text-primary hover:bg-primary/5 rounded-lg border border-dashed border-primary/20 transition-all",children:"+ Add Custom Option"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:s,onChange:x=>a(x.target.checked),className:"size-4 rounded border-white/10 bg-white/5 accent-primary"}),o.jsx("span",{className:"text-[10px] font-bold text-slate-500",children:"Required Field"})]}),o.jsx("button",{onClick:g,className:"px-4 py-2 bg-primary/20 text-primary rounded-lg text-xs font-bold hover:bg-primary/30 transition-all",children:"+ Add Field"})]})]})},AO=({projectName:e,storageKey:t})=>{const[r,n]=P.useState([]),[i,s]=P.useState(!1),[a,l]=P.useState(null),d=()=>t||`notes_v2_${e}`;P.useEffect(()=>{const S=d();if(!S)return;const v=localStorage.getItem(S);if(v)n(JSON.parse(v));else if(!t){const j=localStorage.getItem(`notes_${e}`);if(j){const C={id:Date.now(),title:"Nota General",content:j};n([C]),localStorage.setItem(S,JSON.stringify([C]))}}},[e,t]);const h=S=>{n(S);const v=d();v&&localStorage.setItem(v,JSON.stringify(S))},f=()=>{const S={id:Date.now(),title:"Nueva Nota",content:""};h([...r,S]),l(S.id)},[p,g]=P.useState(null),x=S=>{g(S)},w=()=>{p&&(h(r.filter(S=>S.id!==p)),g(null))},b=(S,v,j)=>{h(r.map(C=>C.id===S?{...C,[v]:j}:C))},k=()=>s(!i),_=()=>o.jsxs("div",{className:`flex flex-col h-full bg-surface-dark/40 ${i?"":"max-h-[25vh]"}`,children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-glass-border bg-white/5",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"material-symbols-outlined text-sm text-primary",children:"edit_note"}),o.jsxs("h3",{className:"text-[10px] font-black uppercase tracking-widest text-white",children:["Notas (",r.length,")"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:f,className:"p-1 hover:text-primary text-text-muted transition-colors",title:"Aadir Nota",children:o.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"})}),o.jsx("button",{onClick:k,className:"p-1 hover:text-white text-text-muted transition-colors",title:"Pantalla Completa",children:o.jsx("span",{className:"material-symbols-outlined text-sm",children:i?"fullscreen_exit":"fullscreen"})})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2 space-y-2",children:r.length===0?o.jsx("div",{className:"py-8 text-center opacity-30 italic text-[10px] uppercase font-bold",children:"Sin notas"}):r.map(S=>o.jsxs("div",{className:"group bg-white/5 border border-glass-border rounded-xl overflow-hidden hover:border-primary/30 transition-all",children:[o.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-white/5",children:[o.jsx("input",{className:"bg-transparent border-none text-[11px] font-bold text-white outline-none w-full",value:S.title,onChange:v=>b(S.id,"title",v.target.value),placeholder:"Ttulo..."}),o.jsx("button",{onClick:()=>x(S.id),className:"opacity-0 group-hover:opacity-100 p-1 text-text-muted hover:text-red-400 transition-all",children:o.jsx("span",{className:"material-symbols-outlined text-xs",children:"delete"})})]}),o.jsx("textarea",{className:"w-full bg-transparent p-3 text-xs text-white/70 outline-none resize-none min-h-[80px] custom-scrollbar",value:S.content,onChange:v=>b(S.id,"content",v.target.value),placeholder:"Escribe el contenido aqu..."})]},S.id))}),o.jsx(ku,{isOpen:!!p,onClose:()=>g(null),onConfirm:w,title:"Eliminar Nota",message:"Ests seguro de que quieres eliminar esta nota? No se podr recuperar.",confirmText:"Eliminar",type:"danger"})]});return i?o.jsx("div",{className:"fixed inset-0 z-[100] bg-background-dark/95 backdrop-blur-md p-8 flex flex-col items-center",children:o.jsx("div",{className:"w-full max-w-4xl h-full flex flex-col border border-glass-border rounded-3xl overflow-hidden shadow-2xl bg-surface-dark",children:o.jsx(_,{})})}):o.jsx("div",{className:"h-full border border-glass-border rounded-2xl overflow-hidden",children:o.jsx(_,{})})},da=({to:e,icon:t,label:r,collapsed:n,end:i})=>o.jsxs(UL,{to:e,end:i,className:({isActive:s})=>`
            flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all group
            ${s?"bg-primary text-white shadow-lg shadow-primary/20":"text-text-muted hover:text-white hover:bg-white/5"}
            ${n?"justify-center":""}
        `,title:n?r:"",children:[o.jsx("span",{className:"material-symbols-outlined text-xl",children:t}),!n&&o.jsx("span",{className:"text-sm font-bold tracking-wide",children:r})]}),m6=e=>{switch(e==null?void 0:e.toLowerCase()){case"text":return"notes";case"short_text":return"short_text";case"number":return"pin";case"date":return"calendar_today";case"select":return"list";case"boolean":return"check_box";case"map":return"map";case"timeline":return"timeline";case"character":case"entidadindividual":return"person";case"location":case"zona":case"construccion":return"location_on";case"culture":case"entidadcolectiva":return"groups";case"universe":case"galaxy":case"system":case"planet":return"public";case"entity_link":return"link";default:return"description"}},IO=()=>{console.log("ArchitectLayout Mounting");const{username:e,projectName:t,folderSlug:r}=Kr();Wr();const n=Fa(),[i,s]=P.useState(!0),[a,l]=P.useState(!1),[d,h]=P.useState("Loading..."),[f,p]=P.useState(null),[g,x]=P.useState("NOTES"),[w,b]=P.useState(""),[k,_]=P.useState([]),[S,v]=P.useState(null),[j,C]=P.useState(null),[R,L]=P.useState({name:"",description:"",type:"regional",showGrid:!0,gridSize:50,width:800,height:600,bgImage:null}),[A,O]=P.useState(null);P.useState("identity");const[T,I]=P.useState("notes"),[M,$]=P.useState(""),[F,G]=P.useState("ALL"),B=n.pathname.includes("/bible"),[Y,K]=P.useState(null),[H,W]=P.useState([]),[D,q]=P.useState("identity"),[J,ee]=P.useState(null),ue=(U,X)=>{U.stopPropagation(),ee(X)},pe=async()=>{if(J){try{await he.delete(`/world-bible/templates/${J}`),_(U=>U.filter(X=>X.id!==J))}catch(U){console.error("Delete failed",U)}ee(null)}},V=async U=>{U.preventDefault();try{await he.put(`/world-bible/templates/${Y.id}`,Y),_(X=>X.map(le=>le.id===Y.id?Y:le)),K(null)}catch(X){console.error("Update failed",X)}},te=`/${e}/${t}`;P.useEffect(()=>{t&&oe(t);const U=()=>{t&&oe(t)};return window.addEventListener("focus",U),()=>window.removeEventListener("focus",U)},[t]);const oe=async U=>{try{const X=await he.get(`/proyectos/${U}`);X&&(h(X.nombreProyecto),p(X.id))}catch(X){console.error("Error loading project:",X)}};return o.jsxs("div",{className:"flex h-screen w-full overflow-hidden bg-background-dark text-text-main font-sans selection:bg-primary/30",children:[o.jsxs("aside",{className:`
                    flex-none bg-surface-dark border-r border-glass-border transition-all duration-500 relative flex flex-col z-30
                    ${i?"w-80":"w-20"}
                `,children:[o.jsxs("div",{className:"h-16 flex items-center justify-center border-b border-glass-border relative",children:[i?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"size-8 rounded-lg bg-surface-light flex items-center justify-center text-primary shadow-inner",children:o.jsx("span",{className:"material-symbols-outlined text-xl",children:"auto_stories"})}),o.jsx("h2",{className:"text-sm font-black uppercase tracking-widest text-white truncate max-w-[150px]",children:d})]}):o.jsx("button",{onClick:()=>s(!0),className:"size-10 rounded-xl hover:bg-white/5 flex items-center justify-center text-text-muted hover:text-white transition-all",children:o.jsx("span",{className:"material-symbols-outlined",children:"menu"})}),i&&o.jsx("button",{onClick:()=>s(!1),className:"absolute right-4 text-text-muted hover:text-white transition-colors",children:o.jsx("span",{className:"material-symbols-outlined text-lg",children:"dock_to_left"})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar flex flex-col",children:o.jsxs("div",{className:"p-3 space-y-1",children:[o.jsx(da,{to:te,icon:"home",label:"Dashboard",collapsed:!i,end:!0}),o.jsx(da,{to:`${te}/bible`,icon:"menu_book",label:"World Bible",collapsed:!i}),o.jsx(da,{to:`${te}/map`,icon:"map",label:"Atlas",collapsed:!i}),o.jsx(da,{to:`${te}/timeline`,icon:"calendar_month",label:"Chronology",collapsed:!i}),o.jsx(da,{to:`${te}/graph`,icon:"hub",label:"Graph",collapsed:!i}),o.jsx("div",{className:"h-px bg-glass-border my-2 mx-2 opacity-50"}),o.jsx(da,{to:`${te}/writing`,icon:"edit_note",label:"Writing",collapsed:!i}),o.jsx(da,{to:`${te}/settings`,icon:"settings",label:"Settings",collapsed:!i})]})}),o.jsx("footer",{className:"p-4 border-t border-glass-border",children:o.jsxs("div",{className:`flex items-center gap-3 ${!i&&"justify-center"}`,children:[o.jsx("div",{className:"size-10 rounded-full border border-glass-border p-1 bg-surface-light relative",children:o.jsx("div",{className:"w-full h-full rounded-full bg-gradient-to-br from-primary to-purple-500 flex items-center justify-center text-white font-black text-xs",children:e?e.substring(0,2).toUpperCase():"US"})}),i&&o.jsxs("div",{className:"overflow-hidden",children:[o.jsx("h4",{className:"text-xs font-bold text-white truncate",children:e||"User"}),o.jsx("p",{className:"text-[10px] text-text-muted uppercase font-black tracking-tighter",children:"Architect"})]})]})})]}),o.jsxs("main",{className:"flex-1 flex flex-col min-w-0 bg-background-dark relative",children:[o.jsx("div",{className:"h-16 w-full absolute top-0 left-0 bg-gradient-to-b from-background-dark to-transparent pointer-events-none"}),o.jsx("div",{className:"flex-1 flex overflow-hidden relative",children:o.jsx(c5,{context:{setRightPanelMode:x,setRightOpen:l,setRightPanelTitle:b,projectName:d,projectId:f,availableTemplates:k,setAvailableTemplates:_,setAddAttributeHandler:v,setCreateTemplateHandler:C,mapSettings:R,setMapSettings:L,setOnMapSettingsChange:O,entityTabs:H,setEntityTabs:W,activeEntityTab:D,setActiveEntityTab:q,folderSearchTerm:M,setFolderSearchTerm:$,folderFilterType:F,setFolderFilterType:G}})})]}),o.jsxs("aside",{className:`
                    flex-none bg-surface-dark border-l border-glass-border transition-all duration-500 relative flex flex-col z-30
                    ${a?"w-80":"w-20"}
                `,children:[o.jsx("header",{className:"h-16 flex items-center px-6 border-b border-glass-border justify-between shrink-0",children:a?o.jsxs(o.Fragment,{children:[g==="CUSTOM"?o.jsx("h2",{className:"text-xs font-black uppercase tracking-widest text-primary",children:w||"Panel"}):B&&g==="NOTES"?o.jsxs("div",{className:"flex bg-white/5 rounded-lg p-1 gap-1",children:[o.jsx("button",{onClick:()=>I("notes"),className:`px-3 py-1 rounded-md text-[10px] uppercase font-bold transition-all ${T==="notes"?"bg-primary text-white shadow":"text-slate-500 hover:text-white"}`,children:"Notas"}),o.jsx("button",{onClick:()=>I("templates"),className:`px-3 py-1 rounded-md text-[10px] uppercase font-bold transition-all ${T==="templates"?"bg-primary text-white shadow":"text-slate-500 hover:text-white"}`,children:"Plantillas"}),o.jsx("button",{onClick:()=>I("filters"),className:`px-3 py-1 rounded-md text-[10px] uppercase font-bold transition-all ${T==="filters"?"bg-primary text-white shadow":"text-slate-500 hover:text-white"}`,children:"Explorar"})]}):o.jsx("h2",{className:"text-xs font-black uppercase tracking-widest text-white",children:w||(g==="NOTES"?"Notas Globales":"Constructor")}),o.jsx("button",{onClick:()=>l(!1),className:"text-text-muted hover:text-white transition-colors",children:o.jsx("span",{className:"material-symbols-outlined text-lg",children:"dock_to_right"})})]}):o.jsx("button",{onClick:()=>l(!0),className:"w-full h-full flex items-center justify-center text-text-muted hover:text-white transition-colors",children:o.jsx("span",{className:"material-symbols-outlined",children:g==="NOTES"?"edit_note":g==="MAP"?"map":g==="CUSTOM"?"build":"handyman"})})}),o.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar p-0",children:a?g==="CUSTOM"?o.jsx("div",{id:"architect-right-panel-portal",className:"h-full relative flex flex-col"}):g==="NOTES"?T==="templates"&&B?o.jsx("div",{className:"h-full overflow-y-auto no-scrollbar",children:o.jsx(p6,{compact:!0})}):T==="filters"&&B?o.jsxs("div",{className:"h-full p-6 space-y-6 animate-in fade-in slide-in-from-right-4",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-text-muted",children:"Bsqueda"}),o.jsxs("div",{className:"bg-black/20 border border-white/10 rounded-xl p-3 flex items-center gap-2 focus-within:border-primary transition-colors",children:[o.jsx("span",{className:"material-symbols-outlined text-slate-500",children:"search"}),o.jsx("input",{value:M,onChange:U=>$(U.target.value),placeholder:"Buscar entidad...",className:"bg-transparent border-none outline-none text-sm text-white w-full placeholder-slate-600"}),M&&o.jsx("button",{onClick:()=>$(""),className:"text-slate-500 hover:text-white",children:o.jsx("span",{className:"material-symbols-outlined text-sm",children:"close"})})]})]}),o.jsx("div",{className:"h-px bg-glass-border"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-text-muted",children:"Filtrar por Tipo"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{id:"ALL",label:"Todos",icon:"grid_view"},{id:"ENTITY",label:"Entidades",icon:"person"},{id:"MAP",label:"Mapas",icon:"map"},{id:"TIMELINE",label:"Timelines",icon:"timeline"}].map(U=>o.jsxs("button",{onClick:()=>G(U.id),className:`
                                                        p-3 rounded-xl border flex flex-col items-center gap-2 transition-all
                                                        ${F===U.id?"bg-primary text-white border-primary shadow-lg shadow-primary/20":"bg-white/5 border-transparent text-slate-500 hover:bg-white/10 hover:text-white"}
                                                    `,children:[o.jsx("span",{className:"material-symbols-outlined",children:U.icon}),o.jsx("span",{className:"text-[10px] font-bold uppercase",children:U.label})]},U.id))})]})]}):o.jsx("div",{className:"h-full p-4 overflow-hidden",children:o.jsx(AO,{projectName:t})}):g==="MAP"?o.jsxs("div",{className:"p-6 space-y-8 animate-in fade-in slide-in-from-right-4",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-text-muted",children:"Grid System"}),o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:R.showGrid,onChange:U=>{const X={...R,showGrid:U.target.checked};L(X),A&&A(X)},className:"sr-only peer"}),o.jsx("div",{className:"w-9 h-5 bg-white/10 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-primary"})]})]}),o.jsxs("div",{className:`space-y-2 transition-opacity ${R.showGrid?"opacity-100":"opacity-30 pointer-events-none"}`,children:[o.jsxs("div",{className:"flex justify-between text-xs font-bold text-white",children:[o.jsx("span",{children:"Size"}),o.jsxs("span",{className:"font-mono text-primary",children:[R.gridSize,"px"]})]}),o.jsx("input",{type:"range",min:"10",max:"200",step:"10",value:R.gridSize,onChange:U=>{const X={...R,gridSize:parseInt(U.target.value)};L(X),A&&A(X)},className:"w-full h-1 bg-white/10 rounded-lg appearance-none cursor-pointer accent-primary"})]})]}),o.jsx("div",{className:"h-px bg-glass-border"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-text-muted",children:"Canvas Data"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500",children:"Width (px)"}),o.jsx("input",{type:"number",value:R.width,onChange:U=>{const X={...R,width:parseInt(U.target.value)};L(X),A&&A(X)},className:"w-full bg-black/20 border border-white/10 rounded-lg p-2 text-white text-right font-mono text-sm focus:border-primary outline-none"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500",children:"Height (px)"}),o.jsx("input",{type:"number",value:R.height,onChange:U=>{const X={...R,height:parseInt(U.target.value)};L(X),A&&A(X)},className:"w-full bg-black/20 border border-white/10 rounded-lg p-2 text-white text-right font-mono text-sm focus:border-primary outline-none"})]})]})]})]}):g==="ENTITY"?o.jsxs("div",{className:"flex flex-col h-full animate-in fade-in slide-in-from-right-4",children:[o.jsx("div",{className:"p-4 border-b border-glass-border",children:o.jsx("div",{className:"bg-black/40 p-1 rounded-xl flex",children:H.map(U=>{const X=le=>{switch(le.toLowerCase()){case"identity":return"badge";case"narrative":return"auto_stories";case"attributes":return"tune";case"notes":return"edit_note";default:return"circle"}};return o.jsxs("button",{onClick:()=>q(U),className:`
                                                        flex-1 py-2 rounded-lg transition-all group relative flex items-center justify-center
                                                        ${D===U?"bg-primary text-white shadow-lg":"text-text-muted hover:text-white hover:bg-white/5"}
                                                    `,title:U,children:[o.jsx("span",{className:"material-symbols-outlined text-lg",children:X(U)}),o.jsx("span",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 bg-black/90 text-white text-[10px] uppercase font-bold px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-50",children:U})]},U)})})}),D==="attributes"&&o.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col bg-black/20",children:[o.jsxs("div",{className:"px-6 py-4 text-[10px] font-black uppercase text-slate-500 tracking-widest flex items-center gap-2",children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"drag_indicator"})," Drag Attributes"]}),o.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar px-2",children:o.jsx(p6,{compact:!0,initialFolderSlug:r})})]})]}):g==="TOOLBOX"?o.jsx("div",{className:"p-4 space-y-6",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("h3",{className:"text-[10px] font-black uppercase tracking-widest text-text-muted px-2 flex justify-between items-center",children:[o.jsx("span",{children:"Plantillas Disponibles"}),o.jsx("button",{className:"text-primary hover:text-white transition-colors",title:"Crear Nueva Plantilla",onClick:()=>j&&j(),children:o.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"})})]}),k.length===0?o.jsx("div",{className:"p-6 text-center border border-dashed border-glass-border rounded-2xl opacity-30",children:o.jsx("p",{className:"text-[10px] uppercase font-bold",children:"Sin Plantillas"})}):k.map(U=>o.jsxs("button",{className:"w-full flex items-center gap-3 p-3 rounded-2xl bg-white/5 border border-glass-border hover:border-primary/50 hover:bg-primary/5 transition-all text-left group relative",draggable:!0,onDragStart:X=>{X.dataTransfer.setData("application/reactflow/type","attribute"),X.dataTransfer.setData("templateId",U.id),X.dataTransfer.effectAllowed="move"},onClick:()=>S&&S(U.id),children:[U.global&&o.jsx("span",{className:"absolute top-2 right-2 flex size-2 bg-blue-500 rounded-full shadow-lg shadow-blue-500/50",title:"Global"}),o.jsx("div",{className:"size-8 rounded-lg bg-surface-light flex items-center justify-center text-primary group-hover:scale-110 transition-transform",children:o.jsx("span",{className:"material-symbols-outlined text-sm",children:m6(U.tipo)})}),o.jsxs("div",{className:"overflow-hidden",children:[o.jsx("p",{className:"text-xs font-bold text-white truncate",children:U.nombre}),o.jsx("p",{className:"text-[10px] text-text-muted uppercase font-black tracking-tighter",children:U.tipo})]}),o.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[o.jsx("div",{onClick:X=>{X.stopPropagation(),K(U)},className:"p-1 hover:text-white text-text-muted hover:bg-white/10 rounded cursor-pointer",title:"Edit",children:o.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"})}),o.jsx("div",{onClick:X=>ue(X,U.id),className:"p-1 hover:text-red-400 text-text-muted hover:bg-white/10 rounded cursor-pointer",title:"Delete",children:o.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]})]},U.id))]})}):o.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-text-muted opacity-50",children:[o.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"dashboard"}),o.jsx("p",{className:"text-xs uppercase font-bold tracking-widest",children:"Select an item"})]}):o.jsx("div",{className:"flex flex-col items-center gap-4 py-4",children:g==="NOTES"?o.jsx("button",{className:"size-10 rounded-xl bg-white/5 flex items-center justify-center text-text-muted",title:"Notes",children:o.jsx("span",{className:"material-symbols-outlined text-lg",children:"edit_note"})}):k.slice(0,5).map(U=>o.jsxs("button",{className:"size-10 rounded-xl bg-white/5 flex items-center justify-center text-text-muted hover:text-white hover:bg-primary/20 transition-all relative",draggable:!0,onDragStart:X=>{X.dataTransfer.setData("application/reactflow/type","attribute"),X.dataTransfer.setData("templateId",U.id)},children:[U.global&&o.jsx("span",{className:"absolute top-0 right-0 size-2 bg-blue-500 rounded-full border border-surface-dark"}),o.jsx("span",{className:"material-symbols-outlined text-lg",children:m6(U.tipo)})]},U.id))})})]}),Y&&o.jsx("div",{className:"fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-surface-dark border border-glass-border rounded-2xl p-6 w-full max-w-md shadow-2xl animate-scale-in",children:[o.jsx("h3",{className:"text-xl font-black text-white mb-4",children:"Editar Plantilla"}),o.jsxs("form",{onSubmit:V,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs uppercase font-bold text-text-muted block mb-1",children:"Nombre"}),o.jsx("input",{autoFocus:!0,className:"w-full bg-black/30 border border-white/10 rounded-xl p-3 text-white focus:border-primary outline-none",value:Y.nombre,onChange:U=>K({...Y,nombre:U.target.value}),required:!0})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs uppercase font-bold text-text-muted block mb-1",children:"Tipo"}),o.jsxs("select",{className:"w-full bg-black/30 border border-white/10 rounded-xl p-3 text-white focus:border-primary outline-none",value:Y.tipo,onChange:U=>K({...Y,tipo:U.target.value}),children:[o.jsx("option",{value:"text",children:"Texto Largo"}),o.jsx("option",{value:"short_text",children:"Texto Corto"}),o.jsx("option",{value:"number",children:"Nmero"}),o.jsx("option",{value:"boolean",children:"Si/No"}),o.jsx("option",{value:"date",children:"Fecha"}),o.jsx("option",{value:"entity_link",children:"Vnculo Entidad"}),o.jsx("option",{value:"image",children:"Imagen URL"})]})]}),o.jsx("div",{className:"flex items-center",children:o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-3 bg-white/5 rounded-xl w-full hover:bg-white/10 transition-colors",children:[o.jsx("input",{type:"checkbox",checked:Y.global,onChange:U=>K({...Y,global:U.target.checked}),className:"accent-primary size-4"}),o.jsx("span",{className:"text-sm font-bold text-white",children:"Es Global?"})]})})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:()=>K(null),className:"px-4 py-2 text-text-muted hover:text-white font-bold transition-colors",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"px-6 py-2 bg-primary text-white rounded-xl font-bold shadow-lg shadow-primary/20 hover:scale-105 transition-transform",children:"Guardar"})]})]})]})}),o.jsx(ku,{isOpen:!!J,onClose:()=>ee(null),onConfirm:pe,title:"Eliminar Plantilla",message:"Ests seguro de que quieres eliminar esta plantilla? Esta accin no se puede deshacer.",confirmText:"Eliminar",type:"danger"})]})};function wr(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let r=0,n;r<e.length;r++)(n=wr(e[r]))!==""&&(t+=(t&&" ")+n);else for(let r in e)e[r]&&(t+=(t&&" ")+r);return t}var OE={exports:{}},DE={},zE={exports:{}},UE={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jo=P;function MO(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var FO=typeof Object.is=="function"?Object.is:MO,LO=Jo.useState,OO=Jo.useEffect,DO=Jo.useLayoutEffect,zO=Jo.useDebugValue;function UO(e,t){var r=t(),n=LO({inst:{value:r,getSnapshot:t}}),i=n[0].inst,s=n[1];return DO(function(){i.value=r,i.getSnapshot=t,vg(i)&&s({inst:i})},[e,r,t]),OO(function(){return vg(i)&&s({inst:i}),e(function(){vg(i)&&s({inst:i})})},[e]),zO(r),r}function vg(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!FO(e,r)}catch{return!0}}function GO(e,t){return t()}var $O=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?GO:UO;UE.useSyncExternalStore=Jo.useSyncExternalStore!==void 0?Jo.useSyncExternalStore:$O;zE.exports=UE;var BO=zE.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zf=P,qO=BO;function VO(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var HO=typeof Object.is=="function"?Object.is:VO,WO=qO.useSyncExternalStore,KO=Zf.useRef,YO=Zf.useEffect,XO=Zf.useMemo,QO=Zf.useDebugValue;DE.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var s=KO(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=XO(function(){function d(x){if(!h){if(h=!0,f=x,x=n(x),i!==void 0&&a.hasValue){var w=a.value;if(i(w,x))return p=w}return p=x}if(w=p,HO(f,x))return w;var b=n(x);return i!==void 0&&i(w,b)?(f=x,w):(f=x,p=b)}var h=!1,f,p,g=r===void 0?null:r;return[function(){return d(t())},g===null?void 0:function(){return d(g())}]},[t,r,n,i]);var l=WO(e,s[0],s[1]);return YO(function(){a.hasValue=!0,a.value=l},[l]),QO(l),l};OE.exports=DE;var ZO=OE.exports;const JO=vu(ZO),g6=e=>{let t;const r=new Set,n=(f,p)=>{const g=typeof f=="function"?f(t):f;if(!Object.is(g,t)){const x=t;t=p??(typeof g!="object"||g===null)?g:Object.assign({},t,g),r.forEach(w=>w(t,x))}},i=()=>t,d={setState:n,getState:i,getInitialState:()=>h,subscribe:f=>(r.add(f),()=>r.delete(f)),destroy:()=>{r.clear()}},h=t=e(n,i,d);return d},eD=e=>e?g6(e):g6,{useDebugValue:tD}=re,{useSyncExternalStoreWithSelector:rD}=JO,nD=e=>e;function GE(e,t=nD,r){const n=rD(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return tD(n),n}const x6=(e,t)=>{const r=eD(e),n=(i,s=t)=>GE(r,i,s);return Object.assign(n,r),n},iD=(e,t)=>e?x6(e,t):x6;function hr(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,i]of e)if(!Object.is(i,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}var sD={value:()=>{}};function Jf(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new Mh(r)}function Mh(e){this._=e}function aD(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}Mh.prototype=Jf.prototype={constructor:Mh,on:function(e,t){var r=this._,n=aD(e+"",r),i,s=-1,a=n.length;if(arguments.length<2){for(;++s<a;)if((i=(e=n[s]).type)&&(i=oD(r[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<a;)if(i=(e=n[s]).type)r[i]=v6(r[i],e.name,t);else if(t==null)for(i in r)r[i]=v6(r[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new Mh(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var r=new Array(i),n=0,i,s;n<i;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,i=s.length;n<i;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],i=0,s=n.length;i<s;++i)n[i].value.apply(t,r)}};function oD(e,t){for(var r=0,n=e.length,i;r<n;++r)if((i=e[r]).name===t)return i.value}function v6(e,t,r){for(var n=0,i=e.length;n<i;++n)if(e[n].name===t){e[n]=sD,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var Ob="http://www.w3.org/1999/xhtml";const y6={svg:"http://www.w3.org/2000/svg",xhtml:Ob,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ep(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),y6.hasOwnProperty(t)?{space:y6[t],local:e}:e}function lD(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===Ob&&t.documentElement.namespaceURI===Ob?t.createElement(e):t.createElementNS(r,e)}}function cD(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function $E(e){var t=ep(e);return(t.local?cD:lD)(t)}function uD(){}function h5(e){return e==null?uD:function(){return this.querySelector(e)}}function dD(e){typeof e!="function"&&(e=h5(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var s=t[i],a=s.length,l=n[i]=new Array(a),d,h,f=0;f<a;++f)(d=s[f])&&(h=e.call(d,d.__data__,f,s))&&("__data__"in d&&(h.__data__=d.__data__),l[f]=h);return new qr(n,this._parents)}function hD(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function fD(){return[]}function BE(e){return e==null?fD:function(){return this.querySelectorAll(e)}}function pD(e){return function(){return hD(e.apply(this,arguments))}}function mD(e){typeof e=="function"?e=pD(e):e=BE(e);for(var t=this._groups,r=t.length,n=[],i=[],s=0;s<r;++s)for(var a=t[s],l=a.length,d,h=0;h<l;++h)(d=a[h])&&(n.push(e.call(d,d.__data__,h,a)),i.push(d));return new qr(n,i)}function qE(e){return function(){return this.matches(e)}}function VE(e){return function(t){return t.matches(e)}}var gD=Array.prototype.find;function xD(e){return function(){return gD.call(this.children,e)}}function vD(){return this.firstElementChild}function yD(e){return this.select(e==null?vD:xD(typeof e=="function"?e:VE(e)))}var bD=Array.prototype.filter;function wD(){return Array.from(this.children)}function _D(e){return function(){return bD.call(this.children,e)}}function ND(e){return this.selectAll(e==null?wD:_D(typeof e=="function"?e:VE(e)))}function SD(e){typeof e!="function"&&(e=qE(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var s=t[i],a=s.length,l=n[i]=[],d,h=0;h<a;++h)(d=s[h])&&e.call(d,d.__data__,h,s)&&l.push(d);return new qr(n,this._parents)}function HE(e){return new Array(e.length)}function jD(){return new qr(this._enter||this._groups.map(HE),this._parents)}function mf(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}mf.prototype={constructor:mf,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function kD(e){return function(){return e}}function CD(e,t,r,n,i,s){for(var a=0,l,d=t.length,h=s.length;a<h;++a)(l=t[a])?(l.__data__=s[a],n[a]=l):r[a]=new mf(e,s[a]);for(;a<d;++a)(l=t[a])&&(i[a]=l)}function ED(e,t,r,n,i,s,a){var l,d,h=new Map,f=t.length,p=s.length,g=new Array(f),x;for(l=0;l<f;++l)(d=t[l])&&(g[l]=x=a.call(d,d.__data__,l,t)+"",h.has(x)?i[l]=d:h.set(x,d));for(l=0;l<p;++l)x=a.call(e,s[l],l,s)+"",(d=h.get(x))?(n[l]=d,d.__data__=s[l],h.delete(x)):r[l]=new mf(e,s[l]);for(l=0;l<f;++l)(d=t[l])&&h.get(g[l])===d&&(i[l]=d)}function TD(e){return e.__data__}function PD(e,t){if(!arguments.length)return Array.from(this,TD);var r=t?ED:CD,n=this._parents,i=this._groups;typeof e!="function"&&(e=kD(e));for(var s=i.length,a=new Array(s),l=new Array(s),d=new Array(s),h=0;h<s;++h){var f=n[h],p=i[h],g=p.length,x=RD(e.call(f,f&&f.__data__,h,n)),w=x.length,b=l[h]=new Array(w),k=a[h]=new Array(w),_=d[h]=new Array(g);r(f,p,b,k,_,x,t);for(var S=0,v=0,j,C;S<w;++S)if(j=b[S]){for(S>=v&&(v=S+1);!(C=k[v])&&++v<w;);j._next=C||null}}return a=new qr(a,n),a._enter=l,a._exit=d,a}function RD(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function AD(){return new qr(this._exit||this._groups.map(HE),this._parents)}function ID(e,t,r){var n=this.enter(),i=this,s=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),r==null?s.remove():r(s),n&&i?n.merge(i).order():i}function MD(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,i=r.length,s=n.length,a=Math.min(i,s),l=new Array(i),d=0;d<a;++d)for(var h=r[d],f=n[d],p=h.length,g=l[d]=new Array(p),x,w=0;w<p;++w)(x=h[w]||f[w])&&(g[w]=x);for(;d<i;++d)l[d]=r[d];return new qr(l,this._parents)}function FD(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],i=n.length-1,s=n[i],a;--i>=0;)(a=n[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function LD(e){e||(e=OD);function t(p,g){return p&&g?e(p.__data__,g.__data__):!p-!g}for(var r=this._groups,n=r.length,i=new Array(n),s=0;s<n;++s){for(var a=r[s],l=a.length,d=i[s]=new Array(l),h,f=0;f<l;++f)(h=a[f])&&(d[f]=h);d.sort(t)}return new qr(i,this._parents).order()}function OD(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function DD(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function zD(){return Array.from(this)}function UD(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,s=n.length;i<s;++i){var a=n[i];if(a)return a}return null}function GD(){let e=0;for(const t of this)++e;return e}function $D(){return!this.node()}function BD(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var i=t[r],s=0,a=i.length,l;s<a;++s)(l=i[s])&&e.call(l,l.__data__,s,i);return this}function qD(e){return function(){this.removeAttribute(e)}}function VD(e){return function(){this.removeAttributeNS(e.space,e.local)}}function HD(e,t){return function(){this.setAttribute(e,t)}}function WD(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function KD(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function YD(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function XD(e,t){var r=ep(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?VD:qD:typeof t=="function"?r.local?YD:KD:r.local?WD:HD)(r,t))}function WE(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function QD(e){return function(){this.style.removeProperty(e)}}function ZD(e,t,r){return function(){this.style.setProperty(e,t,r)}}function JD(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function ez(e,t,r){return arguments.length>1?this.each((t==null?QD:typeof t=="function"?JD:ZD)(e,t,r??"")):el(this.node(),e)}function el(e,t){return e.style.getPropertyValue(t)||WE(e).getComputedStyle(e,null).getPropertyValue(t)}function tz(e){return function(){delete this[e]}}function rz(e,t){return function(){this[e]=t}}function nz(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function iz(e,t){return arguments.length>1?this.each((t==null?tz:typeof t=="function"?nz:rz)(e,t)):this.node()[e]}function KE(e){return e.trim().split(/^|\s+/)}function f5(e){return e.classList||new YE(e)}function YE(e){this._node=e,this._names=KE(e.getAttribute("class")||"")}YE.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function XE(e,t){for(var r=f5(e),n=-1,i=t.length;++n<i;)r.add(t[n])}function QE(e,t){for(var r=f5(e),n=-1,i=t.length;++n<i;)r.remove(t[n])}function sz(e){return function(){XE(this,e)}}function az(e){return function(){QE(this,e)}}function oz(e,t){return function(){(t.apply(this,arguments)?XE:QE)(this,e)}}function lz(e,t){var r=KE(e+"");if(arguments.length<2){for(var n=f5(this.node()),i=-1,s=r.length;++i<s;)if(!n.contains(r[i]))return!1;return!0}return this.each((typeof t=="function"?oz:t?sz:az)(r,t))}function cz(){this.textContent=""}function uz(e){return function(){this.textContent=e}}function dz(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function hz(e){return arguments.length?this.each(e==null?cz:(typeof e=="function"?dz:uz)(e)):this.node().textContent}function fz(){this.innerHTML=""}function pz(e){return function(){this.innerHTML=e}}function mz(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function gz(e){return arguments.length?this.each(e==null?fz:(typeof e=="function"?mz:pz)(e)):this.node().innerHTML}function xz(){this.nextSibling&&this.parentNode.appendChild(this)}function vz(){return this.each(xz)}function yz(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function bz(){return this.each(yz)}function wz(e){var t=typeof e=="function"?e:$E(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function _z(){return null}function Nz(e,t){var r=typeof e=="function"?e:$E(e),n=t==null?_z:typeof t=="function"?t:h5(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function Sz(){var e=this.parentNode;e&&e.removeChild(this)}function jz(){return this.each(Sz)}function kz(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Cz(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ez(e){return this.select(e?Cz:kz)}function Tz(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Pz(e){return function(t){e.call(this,t,this.__data__)}}function Rz(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function Az(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,i=t.length,s;r<i;++r)s=t[r],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++n]=s;++n?t.length=n:delete this.__on}}}function Iz(e,t,r){return function(){var n=this.__on,i,s=Pz(t);if(n){for(var a=0,l=n.length;a<l;++a)if((i=n[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=r),i.value=t;return}}this.addEventListener(e.type,s,r),i={type:e.type,name:e.name,value:t,listener:s,options:r},n?n.push(i):this.__on=[i]}}function Mz(e,t,r){var n=Rz(e+""),i,s=n.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var d=0,h=l.length,f;d<h;++d)for(i=0,f=l[d];i<s;++i)if((a=n[i]).type===f.type&&a.name===f.name)return f.value}return}for(l=t?Iz:Az,i=0;i<s;++i)this.each(l(n[i],t,r));return this}function ZE(e,t,r){var n=WE(e),i=n.CustomEvent;typeof i=="function"?i=new i(t,r):(i=n.document.createEvent("Event"),r?(i.initEvent(t,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Fz(e,t){return function(){return ZE(this,e,t)}}function Lz(e,t){return function(){return ZE(this,e,t.apply(this,arguments))}}function Oz(e,t){return this.each((typeof t=="function"?Lz:Fz)(e,t))}function*Dz(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,s=n.length,a;i<s;++i)(a=n[i])&&(yield a)}var JE=[null];function qr(e,t){this._groups=e,this._parents=t}function Cu(){return new qr([[document.documentElement]],JE)}function zz(){return this}qr.prototype=Cu.prototype={constructor:qr,select:dD,selectAll:mD,selectChild:yD,selectChildren:ND,filter:SD,data:PD,enter:jD,exit:AD,join:ID,merge:MD,selection:zz,order:FD,sort:LD,call:DD,nodes:zD,node:UD,size:GD,empty:$D,each:BD,attr:XD,style:ez,property:iz,classed:lz,text:hz,html:gz,raise:vz,lower:bz,append:wz,insert:Nz,remove:jz,clone:Ez,datum:Tz,on:Mz,dispatch:Oz,[Symbol.iterator]:Dz};function Pn(e){return typeof e=="string"?new qr([[document.querySelector(e)]],[document.documentElement]):new qr([[e]],JE)}function Uz(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ei(e,t){if(e=Uz(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Gz={passive:!1},lu={capture:!0,passive:!1};function yg(e){e.stopImmediatePropagation()}function Go(e){e.preventDefault(),e.stopImmediatePropagation()}function eT(e){var t=e.document.documentElement,r=Pn(e).on("dragstart.drag",Go,lu);"onselectstart"in t?r.on("selectstart.drag",Go,lu):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function tT(e,t){var r=e.document.documentElement,n=Pn(e).on("dragstart.drag",null);t&&(n.on("click.drag",Go,lu),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const sh=e=>()=>e;function Db(e,{sourceEvent:t,subject:r,target:n,identifier:i,active:s,x:a,y:l,dx:d,dy:h,dispatch:f}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:f}})}Db.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function $z(e){return!e.ctrlKey&&!e.button}function Bz(){return this.parentNode}function qz(e,t){return t??{x:e.x,y:e.y}}function Vz(){return navigator.maxTouchPoints||"ontouchstart"in this}function Hz(){var e=$z,t=Bz,r=qz,n=Vz,i={},s=Jf("start","drag","end"),a=0,l,d,h,f,p=0;function g(j){j.on("mousedown.drag",x).filter(n).on("touchstart.drag",k).on("touchmove.drag",_,Gz).on("touchend.drag touchcancel.drag",S).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(j,C){if(!(f||!e.call(this,j,C))){var R=v(this,t.call(this,j,C),j,C,"mouse");R&&(Pn(j.view).on("mousemove.drag",w,lu).on("mouseup.drag",b,lu),eT(j.view),yg(j),h=!1,l=j.clientX,d=j.clientY,R("start",j))}}function w(j){if(Go(j),!h){var C=j.clientX-l,R=j.clientY-d;h=C*C+R*R>p}i.mouse("drag",j)}function b(j){Pn(j.view).on("mousemove.drag mouseup.drag",null),tT(j.view,h),Go(j),i.mouse("end",j)}function k(j,C){if(e.call(this,j,C)){var R=j.changedTouches,L=t.call(this,j,C),A=R.length,O,T;for(O=0;O<A;++O)(T=v(this,L,j,C,R[O].identifier,R[O]))&&(yg(j),T("start",j,R[O]))}}function _(j){var C=j.changedTouches,R=C.length,L,A;for(L=0;L<R;++L)(A=i[C[L].identifier])&&(Go(j),A("drag",j,C[L]))}function S(j){var C=j.changedTouches,R=C.length,L,A;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),L=0;L<R;++L)(A=i[C[L].identifier])&&(yg(j),A("end",j,C[L]))}function v(j,C,R,L,A,O){var T=s.copy(),I=ei(O||R,C),M,$,F;if((F=r.call(j,new Db("beforestart",{sourceEvent:R,target:g,identifier:A,active:a,x:I[0],y:I[1],dx:0,dy:0,dispatch:T}),L))!=null)return M=F.x-I[0]||0,$=F.y-I[1]||0,function G(B,Y,K){var H=I,W;switch(B){case"start":i[A]=G,W=a++;break;case"end":delete i[A],--a;case"drag":I=ei(K||Y,C),W=a;break}T.call(B,j,new Db(B,{sourceEvent:Y,subject:F,target:g,identifier:A,active:W,x:I[0]+M,y:I[1]+$,dx:I[0]-H[0],dy:I[1]-H[1],dispatch:T}),L)}}return g.filter=function(j){return arguments.length?(e=typeof j=="function"?j:sh(!!j),g):e},g.container=function(j){return arguments.length?(t=typeof j=="function"?j:sh(j),g):t},g.subject=function(j){return arguments.length?(r=typeof j=="function"?j:sh(j),g):r},g.touchable=function(j){return arguments.length?(n=typeof j=="function"?j:sh(!!j),g):n},g.on=function(){var j=s.on.apply(s,arguments);return j===s?g:j},g.clickDistance=function(j){return arguments.length?(p=(j=+j)*j,g):Math.sqrt(p)},g}function p5(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function rT(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Eu(){}var cu=.7,gf=1/cu,$o="\\s*([+-]?\\d+)\\s*",uu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ai="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wz=/^#([0-9a-f]{3,8})$/,Kz=new RegExp(`^rgb\\(${$o},${$o},${$o}\\)$`),Yz=new RegExp(`^rgb\\(${ai},${ai},${ai}\\)$`),Xz=new RegExp(`^rgba\\(${$o},${$o},${$o},${uu}\\)$`),Qz=new RegExp(`^rgba\\(${ai},${ai},${ai},${uu}\\)$`),Zz=new RegExp(`^hsl\\(${uu},${ai},${ai}\\)$`),Jz=new RegExp(`^hsla\\(${uu},${ai},${ai},${uu}\\)$`),b6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};p5(Eu,du,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:w6,formatHex:w6,formatHex8:eU,formatHsl:tU,formatRgb:_6,toString:_6});function w6(){return this.rgb().formatHex()}function eU(){return this.rgb().formatHex8()}function tU(){return nT(this).formatHsl()}function _6(){return this.rgb().formatRgb()}function du(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Wz.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?N6(t):r===3?new Pr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?ah(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?ah(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Kz.exec(e))?new Pr(t[1],t[2],t[3],1):(t=Yz.exec(e))?new Pr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Xz.exec(e))?ah(t[1],t[2],t[3],t[4]):(t=Qz.exec(e))?ah(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Zz.exec(e))?k6(t[1],t[2]/100,t[3]/100,1):(t=Jz.exec(e))?k6(t[1],t[2]/100,t[3]/100,t[4]):b6.hasOwnProperty(e)?N6(b6[e]):e==="transparent"?new Pr(NaN,NaN,NaN,0):null}function N6(e){return new Pr(e>>16&255,e>>8&255,e&255,1)}function ah(e,t,r,n){return n<=0&&(e=t=r=NaN),new Pr(e,t,r,n)}function rU(e){return e instanceof Eu||(e=du(e)),e?(e=e.rgb(),new Pr(e.r,e.g,e.b,e.opacity)):new Pr}function zb(e,t,r,n){return arguments.length===1?rU(e):new Pr(e,t,r,n??1)}function Pr(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}p5(Pr,zb,rT(Eu,{brighter(e){return e=e==null?gf:Math.pow(gf,e),new Pr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?cu:Math.pow(cu,e),new Pr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Pr(ja(this.r),ja(this.g),ja(this.b),xf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:S6,formatHex:S6,formatHex8:nU,formatRgb:j6,toString:j6}));function S6(){return`#${ya(this.r)}${ya(this.g)}${ya(this.b)}`}function nU(){return`#${ya(this.r)}${ya(this.g)}${ya(this.b)}${ya((isNaN(this.opacity)?1:this.opacity)*255)}`}function j6(){const e=xf(this.opacity);return`${e===1?"rgb(":"rgba("}${ja(this.r)}, ${ja(this.g)}, ${ja(this.b)}${e===1?")":`, ${e})`}`}function xf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ja(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ya(e){return e=ja(e),(e<16?"0":"")+e.toString(16)}function k6(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Rn(e,t,r,n)}function nT(e){if(e instanceof Rn)return new Rn(e.h,e.s,e.l,e.opacity);if(e instanceof Eu||(e=du(e)),!e)return new Rn;if(e instanceof Rn)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),s=Math.max(t,r,n),a=NaN,l=s-i,d=(s+i)/2;return l?(t===s?a=(r-n)/l+(r<n)*6:r===s?a=(n-t)/l+2:a=(t-r)/l+4,l/=d<.5?s+i:2-s-i,a*=60):l=d>0&&d<1?0:a,new Rn(a,l,d,e.opacity)}function iU(e,t,r,n){return arguments.length===1?nT(e):new Rn(e,t,r,n??1)}function Rn(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}p5(Rn,iU,rT(Eu,{brighter(e){return e=e==null?gf:Math.pow(gf,e),new Rn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?cu:Math.pow(cu,e),new Rn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new Pr(bg(e>=240?e-240:e+120,i,n),bg(e,i,n),bg(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new Rn(C6(this.h),oh(this.s),oh(this.l),xf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=xf(this.opacity);return`${e===1?"hsl(":"hsla("}${C6(this.h)}, ${oh(this.s)*100}%, ${oh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function C6(e){return e=(e||0)%360,e<0?e+360:e}function oh(e){return Math.max(0,Math.min(1,e||0))}function bg(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const iT=e=>()=>e;function sU(e,t){return function(r){return e+r*t}}function aU(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function oU(e){return(e=+e)==1?sT:function(t,r){return r-t?aU(t,r,e):iT(isNaN(t)?r:t)}}function sT(e,t){var r=t-e;return r?sU(e,r):iT(isNaN(e)?t:e)}const E6=function e(t){var r=oU(t);function n(i,s){var a=r((i=zb(i)).r,(s=zb(s)).r),l=r(i.g,s.g),d=r(i.b,s.b),h=sT(i.opacity,s.opacity);return function(f){return i.r=a(f),i.g=l(f),i.b=d(f),i.opacity=h(f),i+""}}return n.gamma=e,n}(1);function ps(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var Ub=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wg=new RegExp(Ub.source,"g");function lU(e){return function(){return e}}function cU(e){return function(t){return e(t)+""}}function uU(e,t){var r=Ub.lastIndex=wg.lastIndex=0,n,i,s,a=-1,l=[],d=[];for(e=e+"",t=t+"";(n=Ub.exec(e))&&(i=wg.exec(t));)(s=i.index)>r&&(s=t.slice(r,s),l[a]?l[a]+=s:l[++a]=s),(n=n[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,d.push({i:a,x:ps(n,i)})),r=wg.lastIndex;return r<t.length&&(s=t.slice(r),l[a]?l[a]+=s:l[++a]=s),l.length<2?d[0]?cU(d[0].x):lU(t):(t=d.length,function(h){for(var f=0,p;f<t;++f)l[(p=d[f]).i]=p.x(h);return l.join("")})}var T6=180/Math.PI,Gb={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function aT(e,t,r,n,i,s){var a,l,d;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(d=e*r+t*n)&&(r-=e*d,n-=t*d),(l=Math.sqrt(r*r+n*n))&&(r/=l,n/=l,d/=l),e*n<t*r&&(e=-e,t=-t,d=-d,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*T6,skewX:Math.atan(d)*T6,scaleX:a,scaleY:l}}var lh;function dU(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Gb:aT(t.a,t.b,t.c,t.d,t.e,t.f)}function hU(e){return e==null||(lh||(lh=document.createElementNS("http://www.w3.org/2000/svg","g")),lh.setAttribute("transform",e),!(e=lh.transform.baseVal.consolidate()))?Gb:(e=e.matrix,aT(e.a,e.b,e.c,e.d,e.e,e.f))}function oT(e,t,r,n){function i(h){return h.length?h.pop()+" ":""}function s(h,f,p,g,x,w){if(h!==p||f!==g){var b=x.push("translate(",null,t,null,r);w.push({i:b-4,x:ps(h,p)},{i:b-2,x:ps(f,g)})}else(p||g)&&x.push("translate("+p+t+g+r)}function a(h,f,p,g){h!==f?(h-f>180?f+=360:f-h>180&&(h+=360),g.push({i:p.push(i(p)+"rotate(",null,n)-2,x:ps(h,f)})):f&&p.push(i(p)+"rotate("+f+n)}function l(h,f,p,g){h!==f?g.push({i:p.push(i(p)+"skewX(",null,n)-2,x:ps(h,f)}):f&&p.push(i(p)+"skewX("+f+n)}function d(h,f,p,g,x,w){if(h!==p||f!==g){var b=x.push(i(x)+"scale(",null,",",null,")");w.push({i:b-4,x:ps(h,p)},{i:b-2,x:ps(f,g)})}else(p!==1||g!==1)&&x.push(i(x)+"scale("+p+","+g+")")}return function(h,f){var p=[],g=[];return h=e(h),f=e(f),s(h.translateX,h.translateY,f.translateX,f.translateY,p,g),a(h.rotate,f.rotate,p,g),l(h.skewX,f.skewX,p,g),d(h.scaleX,h.scaleY,f.scaleX,f.scaleY,p,g),h=f=null,function(x){for(var w=-1,b=g.length,k;++w<b;)p[(k=g[w]).i]=k.x(x);return p.join("")}}}var fU=oT(dU,"px, ","px)","deg)"),pU=oT(hU,", ",")",")"),mU=1e-12;function P6(e){return((e=Math.exp(e))+1/e)/2}function gU(e){return((e=Math.exp(e))-1/e)/2}function xU(e){return((e=Math.exp(2*e))-1)/(e+1)}const vU=function e(t,r,n){function i(s,a){var l=s[0],d=s[1],h=s[2],f=a[0],p=a[1],g=a[2],x=f-l,w=p-d,b=x*x+w*w,k,_;if(b<mU)_=Math.log(g/h)/t,k=function(L){return[l+L*x,d+L*w,h*Math.exp(t*L*_)]};else{var S=Math.sqrt(b),v=(g*g-h*h+n*b)/(2*h*r*S),j=(g*g-h*h-n*b)/(2*g*r*S),C=Math.log(Math.sqrt(v*v+1)-v),R=Math.log(Math.sqrt(j*j+1)-j);_=(R-C)/t,k=function(L){var A=L*_,O=P6(C),T=h/(r*S)*(O*xU(t*A+C)-gU(C));return[l+T*x,d+T*w,h*O/P6(t*A+C)]}}return k.duration=_*1e3*t/Math.SQRT2,k}return i.rho=function(s){var a=Math.max(.001,+s),l=a*a,d=l*l;return e(a,l,d)},i}(Math.SQRT2,2,4);var tl=0,_c=0,ac=0,lT=1e3,vf,Nc,yf=0,Ra=0,tp=0,hu=typeof performance=="object"&&performance.now?performance:Date,cT=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function m5(){return Ra||(cT(yU),Ra=hu.now()+tp)}function yU(){Ra=0}function bf(){this._call=this._time=this._next=null}bf.prototype=uT.prototype={constructor:bf,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?m5():+r)+(t==null?0:+t),!this._next&&Nc!==this&&(Nc?Nc._next=this:vf=this,Nc=this),this._call=e,this._time=r,$b()},stop:function(){this._call&&(this._call=null,this._time=1/0,$b())}};function uT(e,t,r){var n=new bf;return n.restart(e,t,r),n}function bU(){m5(),++tl;for(var e=vf,t;e;)(t=Ra-e._time)>=0&&e._call.call(void 0,t),e=e._next;--tl}function R6(){Ra=(yf=hu.now())+tp,tl=_c=0;try{bU()}finally{tl=0,_U(),Ra=0}}function wU(){var e=hu.now(),t=e-yf;t>lT&&(tp-=t,yf=e)}function _U(){for(var e,t=vf,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:vf=r);Nc=e,$b(n)}function $b(e){if(!tl){_c&&(_c=clearTimeout(_c));var t=e-Ra;t>24?(e<1/0&&(_c=setTimeout(R6,e-hu.now()-tp)),ac&&(ac=clearInterval(ac))):(ac||(yf=hu.now(),ac=setInterval(wU,lT)),tl=1,cT(R6))}}function A6(e,t,r){var n=new bf;return t=t==null?0:+t,n.restart(i=>{n.stop(),e(i+t)},t,r),n}var NU=Jf("start","end","cancel","interrupt"),SU=[],dT=0,I6=1,Bb=2,Fh=3,M6=4,qb=5,Lh=6;function rp(e,t,r,n,i,s){var a=e.__transition;if(!a)e.__transition={};else if(r in a)return;jU(e,r,{name:t,index:n,group:i,on:NU,tween:SU,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:dT})}function g5(e,t){var r=On(e,t);if(r.state>dT)throw new Error("too late; already scheduled");return r}function oi(e,t){var r=On(e,t);if(r.state>Fh)throw new Error("too late; already running");return r}function On(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function jU(e,t,r){var n=e.__transition,i;n[t]=r,r.timer=uT(s,0,r.time);function s(h){r.state=I6,r.timer.restart(a,r.delay,r.time),r.delay<=h&&a(h-r.delay)}function a(h){var f,p,g,x;if(r.state!==I6)return d();for(f in n)if(x=n[f],x.name===r.name){if(x.state===Fh)return A6(a);x.state===M6?(x.state=Lh,x.timer.stop(),x.on.call("interrupt",e,e.__data__,x.index,x.group),delete n[f]):+f<t&&(x.state=Lh,x.timer.stop(),x.on.call("cancel",e,e.__data__,x.index,x.group),delete n[f])}if(A6(function(){r.state===Fh&&(r.state=M6,r.timer.restart(l,r.delay,r.time),l(h))}),r.state=Bb,r.on.call("start",e,e.__data__,r.index,r.group),r.state===Bb){for(r.state=Fh,i=new Array(g=r.tween.length),f=0,p=-1;f<g;++f)(x=r.tween[f].value.call(e,e.__data__,r.index,r.group))&&(i[++p]=x);i.length=p+1}}function l(h){for(var f=h<r.duration?r.ease.call(null,h/r.duration):(r.timer.restart(d),r.state=qb,1),p=-1,g=i.length;++p<g;)i[p].call(e,f);r.state===qb&&(r.on.call("end",e,e.__data__,r.index,r.group),d())}function d(){r.state=Lh,r.timer.stop(),delete n[t];for(var h in n)return;delete e.__transition}}function Oh(e,t){var r=e.__transition,n,i,s=!0,a;if(r){t=t==null?null:t+"";for(a in r){if((n=r[a]).name!==t){s=!1;continue}i=n.state>Bb&&n.state<qb,n.state=Lh,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[a]}s&&delete e.__transition}}function kU(e){return this.each(function(){Oh(this,e)})}function CU(e,t){var r,n;return function(){var i=oi(this,e),s=i.tween;if(s!==r){n=r=s;for(var a=0,l=n.length;a<l;++a)if(n[a].name===t){n=n.slice(),n.splice(a,1);break}}i.tween=n}}function EU(e,t,r){var n,i;if(typeof r!="function")throw new Error;return function(){var s=oi(this,e),a=s.tween;if(a!==n){i=(n=a).slice();for(var l={name:t,value:r},d=0,h=i.length;d<h;++d)if(i[d].name===t){i[d]=l;break}d===h&&i.push(l)}s.tween=i}}function TU(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=On(this.node(),r).tween,i=0,s=n.length,a;i<s;++i)if((a=n[i]).name===e)return a.value;return null}return this.each((t==null?CU:EU)(r,e,t))}function x5(e,t,r){var n=e._id;return e.each(function(){var i=oi(this,n);(i.value||(i.value={}))[t]=r.apply(this,arguments)}),function(i){return On(i,n).value[t]}}function hT(e,t){var r;return(typeof t=="number"?ps:t instanceof du?E6:(r=du(t))?(t=r,E6):uU)(e,t)}function PU(e){return function(){this.removeAttribute(e)}}function RU(e){return function(){this.removeAttributeNS(e.space,e.local)}}function AU(e,t,r){var n,i=r+"",s;return function(){var a=this.getAttribute(e);return a===i?null:a===n?s:s=t(n=a,r)}}function IU(e,t,r){var n,i=r+"",s;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===n?s:s=t(n=a,r)}}function MU(e,t,r){var n,i,s;return function(){var a,l=r(this),d;return l==null?void this.removeAttribute(e):(a=this.getAttribute(e),d=l+"",a===d?null:a===n&&d===i?s:(i=d,s=t(n=a,l)))}}function FU(e,t,r){var n,i,s;return function(){var a,l=r(this),d;return l==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),d=l+"",a===d?null:a===n&&d===i?s:(i=d,s=t(n=a,l)))}}function LU(e,t){var r=ep(e),n=r==="transform"?pU:hT;return this.attrTween(e,typeof t=="function"?(r.local?FU:MU)(r,n,x5(this,"attr."+e,t)):t==null?(r.local?RU:PU)(r):(r.local?IU:AU)(r,n,t))}function OU(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function DU(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function zU(e,t){var r,n;function i(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&DU(e,s)),r}return i._value=t,i}function UU(e,t){var r,n;function i(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&OU(e,s)),r}return i._value=t,i}function GU(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=ep(e);return this.tween(r,(n.local?zU:UU)(n,t))}function $U(e,t){return function(){g5(this,e).delay=+t.apply(this,arguments)}}function BU(e,t){return t=+t,function(){g5(this,e).delay=t}}function qU(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?$U:BU)(t,e)):On(this.node(),t).delay}function VU(e,t){return function(){oi(this,e).duration=+t.apply(this,arguments)}}function HU(e,t){return t=+t,function(){oi(this,e).duration=t}}function WU(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?VU:HU)(t,e)):On(this.node(),t).duration}function KU(e,t){if(typeof t!="function")throw new Error;return function(){oi(this,e).ease=t}}function YU(e){var t=this._id;return arguments.length?this.each(KU(t,e)):On(this.node(),t).ease}function XU(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;oi(this,e).ease=r}}function QU(e){if(typeof e!="function")throw new Error;return this.each(XU(this._id,e))}function ZU(e){typeof e!="function"&&(e=qE(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var s=t[i],a=s.length,l=n[i]=[],d,h=0;h<a;++h)(d=s[h])&&e.call(d,d.__data__,h,s)&&l.push(d);return new Di(n,this._parents,this._name,this._id)}function JU(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,i=r.length,s=Math.min(n,i),a=new Array(n),l=0;l<s;++l)for(var d=t[l],h=r[l],f=d.length,p=a[l]=new Array(f),g,x=0;x<f;++x)(g=d[x]||h[x])&&(p[x]=g);for(;l<n;++l)a[l]=t[l];return new Di(a,this._parents,this._name,this._id)}function eG(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function tG(e,t,r){var n,i,s=eG(t)?g5:oi;return function(){var a=s(this,e),l=a.on;l!==n&&(i=(n=l).copy()).on(t,r),a.on=i}}function rG(e,t){var r=this._id;return arguments.length<2?On(this.node(),r).on.on(e):this.each(tG(r,e,t))}function nG(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function iG(){return this.on("end.remove",nG(this._id))}function sG(e){var t=this._name,r=this._id;typeof e!="function"&&(e=h5(e));for(var n=this._groups,i=n.length,s=new Array(i),a=0;a<i;++a)for(var l=n[a],d=l.length,h=s[a]=new Array(d),f,p,g=0;g<d;++g)(f=l[g])&&(p=e.call(f,f.__data__,g,l))&&("__data__"in f&&(p.__data__=f.__data__),h[g]=p,rp(h[g],t,r,g,h,On(f,r)));return new Di(s,this._parents,t,r)}function aG(e){var t=this._name,r=this._id;typeof e!="function"&&(e=BE(e));for(var n=this._groups,i=n.length,s=[],a=[],l=0;l<i;++l)for(var d=n[l],h=d.length,f,p=0;p<h;++p)if(f=d[p]){for(var g=e.call(f,f.__data__,p,d),x,w=On(f,r),b=0,k=g.length;b<k;++b)(x=g[b])&&rp(x,t,r,b,g,w);s.push(g),a.push(f)}return new Di(s,a,t,r)}var oG=Cu.prototype.constructor;function lG(){return new oG(this._groups,this._parents)}function cG(e,t){var r,n,i;return function(){var s=el(this,e),a=(this.style.removeProperty(e),el(this,e));return s===a?null:s===r&&a===n?i:i=t(r=s,n=a)}}function fT(e){return function(){this.style.removeProperty(e)}}function uG(e,t,r){var n,i=r+"",s;return function(){var a=el(this,e);return a===i?null:a===n?s:s=t(n=a,r)}}function dG(e,t,r){var n,i,s;return function(){var a=el(this,e),l=r(this),d=l+"";return l==null&&(d=l=(this.style.removeProperty(e),el(this,e))),a===d?null:a===n&&d===i?s:(i=d,s=t(n=a,l))}}function hG(e,t){var r,n,i,s="style."+t,a="end."+s,l;return function(){var d=oi(this,e),h=d.on,f=d.value[s]==null?l||(l=fT(t)):void 0;(h!==r||i!==f)&&(n=(r=h).copy()).on(a,i=f),d.on=n}}function fG(e,t,r){var n=(e+="")=="transform"?fU:hT;return t==null?this.styleTween(e,cG(e,n)).on("end.style."+e,fT(e)):typeof t=="function"?this.styleTween(e,dG(e,n,x5(this,"style."+e,t))).each(hG(this._id,e)):this.styleTween(e,uG(e,n,t),r).on("end.style."+e,null)}function pG(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function mG(e,t,r){var n,i;function s(){var a=t.apply(this,arguments);return a!==i&&(n=(i=a)&&pG(e,a,r)),n}return s._value=t,s}function gG(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,mG(e,t,r??""))}function xG(e){return function(){this.textContent=e}}function vG(e){return function(){var t=e(this);this.textContent=t??""}}function yG(e){return this.tween("text",typeof e=="function"?vG(x5(this,"text",e)):xG(e==null?"":e+""))}function bG(e){return function(t){this.textContent=e.call(this,t)}}function wG(e){var t,r;function n(){var i=e.apply(this,arguments);return i!==r&&(t=(r=i)&&bG(i)),t}return n._value=e,n}function _G(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,wG(e))}function NG(){for(var e=this._name,t=this._id,r=pT(),n=this._groups,i=n.length,s=0;s<i;++s)for(var a=n[s],l=a.length,d,h=0;h<l;++h)if(d=a[h]){var f=On(d,t);rp(d,e,r,h,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Di(n,this._parents,e,r)}function SG(){var e,t,r=this,n=r._id,i=r.size();return new Promise(function(s,a){var l={value:a},d={value:function(){--i===0&&s()}};r.each(function(){var h=oi(this,n),f=h.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(d)),h.on=t}),i===0&&s()})}var jG=0;function Di(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function pT(){return++jG}var wi=Cu.prototype;Di.prototype={constructor:Di,select:sG,selectAll:aG,selectChild:wi.selectChild,selectChildren:wi.selectChildren,filter:ZU,merge:JU,selection:lG,transition:NG,call:wi.call,nodes:wi.nodes,node:wi.node,size:wi.size,empty:wi.empty,each:wi.each,on:rG,attr:LU,attrTween:GU,style:fG,styleTween:gG,text:yG,textTween:_G,remove:iG,tween:TU,delay:qU,duration:WU,ease:YU,easeVarying:QU,end:SG,[Symbol.iterator]:wi[Symbol.iterator]};function kG(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var CG={time:null,delay:0,duration:250,ease:kG};function EG(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function TG(e){var t,r;e instanceof Di?(t=e._id,e=e._name):(t=pT(),(r=CG).time=m5(),e=e==null?null:e+"");for(var n=this._groups,i=n.length,s=0;s<i;++s)for(var a=n[s],l=a.length,d,h=0;h<l;++h)(d=a[h])&&rp(d,e,t,h,a,r||EG(d,t));return new Di(n,this._parents,e,t)}Cu.prototype.interrupt=kU;Cu.prototype.transition=TG;const ch=e=>()=>e;function PG(e,{sourceEvent:t,target:r,transform:n,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:i}})}function Ti(e,t,r){this.k=e,this.x=t,this.y=r}Ti.prototype={constructor:Ti,scale:function(e){return e===1?this:new Ti(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ti(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var As=new Ti(1,0,0);Ti.prototype;function _g(e){e.stopImmediatePropagation()}function oc(e){e.preventDefault(),e.stopImmediatePropagation()}function RG(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function AG(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function F6(){return this.__zoom||As}function IG(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function MG(){return navigator.maxTouchPoints||"ontouchstart"in this}function FG(e,t,r){var n=e.invertX(t[0][0])-r[0][0],i=e.invertX(t[1][0])-r[1][0],s=e.invertY(t[0][1])-r[0][1],a=e.invertY(t[1][1])-r[1][1];return e.translate(i>n?(n+i)/2:Math.min(0,n)||Math.max(0,i),a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a))}function LG(){var e=RG,t=AG,r=FG,n=IG,i=MG,s=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],l=250,d=vU,h=Jf("start","zoom","end"),f,p,g,x=500,w=150,b=0,k=10;function _(F){F.property("__zoom",F6).on("wheel.zoom",A,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",T).filter(i).on("touchstart.zoom",I).on("touchmove.zoom",M).on("touchend.zoom touchcancel.zoom",$).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(F,G,B,Y){var K=F.selection?F.selection():F;K.property("__zoom",F6),F!==K?C(F,G,B,Y):K.interrupt().each(function(){R(this,arguments).event(Y).start().zoom(null,typeof G=="function"?G.apply(this,arguments):G).end()})},_.scaleBy=function(F,G,B,Y){_.scaleTo(F,function(){var K=this.__zoom.k,H=typeof G=="function"?G.apply(this,arguments):G;return K*H},B,Y)},_.scaleTo=function(F,G,B,Y){_.transform(F,function(){var K=t.apply(this,arguments),H=this.__zoom,W=B==null?j(K):typeof B=="function"?B.apply(this,arguments):B,D=H.invert(W),q=typeof G=="function"?G.apply(this,arguments):G;return r(v(S(H,q),W,D),K,a)},B,Y)},_.translateBy=function(F,G,B,Y){_.transform(F,function(){return r(this.__zoom.translate(typeof G=="function"?G.apply(this,arguments):G,typeof B=="function"?B.apply(this,arguments):B),t.apply(this,arguments),a)},null,Y)},_.translateTo=function(F,G,B,Y,K){_.transform(F,function(){var H=t.apply(this,arguments),W=this.__zoom,D=Y==null?j(H):typeof Y=="function"?Y.apply(this,arguments):Y;return r(As.translate(D[0],D[1]).scale(W.k).translate(typeof G=="function"?-G.apply(this,arguments):-G,typeof B=="function"?-B.apply(this,arguments):-B),H,a)},Y,K)};function S(F,G){return G=Math.max(s[0],Math.min(s[1],G)),G===F.k?F:new Ti(G,F.x,F.y)}function v(F,G,B){var Y=G[0]-B[0]*F.k,K=G[1]-B[1]*F.k;return Y===F.x&&K===F.y?F:new Ti(F.k,Y,K)}function j(F){return[(+F[0][0]+ +F[1][0])/2,(+F[0][1]+ +F[1][1])/2]}function C(F,G,B,Y){F.on("start.zoom",function(){R(this,arguments).event(Y).start()}).on("interrupt.zoom end.zoom",function(){R(this,arguments).event(Y).end()}).tween("zoom",function(){var K=this,H=arguments,W=R(K,H).event(Y),D=t.apply(K,H),q=B==null?j(D):typeof B=="function"?B.apply(K,H):B,J=Math.max(D[1][0]-D[0][0],D[1][1]-D[0][1]),ee=K.__zoom,ue=typeof G=="function"?G.apply(K,H):G,pe=d(ee.invert(q).concat(J/ee.k),ue.invert(q).concat(J/ue.k));return function(V){if(V===1)V=ue;else{var te=pe(V),oe=J/te[2];V=new Ti(oe,q[0]-te[0]*oe,q[1]-te[1]*oe)}W.zoom(null,V)}})}function R(F,G,B){return!B&&F.__zooming||new L(F,G)}function L(F,G){this.that=F,this.args=G,this.active=0,this.sourceEvent=null,this.extent=t.apply(F,G),this.taps=0}L.prototype={event:function(F){return F&&(this.sourceEvent=F),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(F,G){return this.mouse&&F!=="mouse"&&(this.mouse[1]=G.invert(this.mouse[0])),this.touch0&&F!=="touch"&&(this.touch0[1]=G.invert(this.touch0[0])),this.touch1&&F!=="touch"&&(this.touch1[1]=G.invert(this.touch1[0])),this.that.__zoom=G,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(F){var G=Pn(this.that).datum();h.call(F,this.that,new PG(F,{sourceEvent:this.sourceEvent,target:_,type:F,transform:this.that.__zoom,dispatch:h}),G)}};function A(F,...G){if(!e.apply(this,arguments))return;var B=R(this,G).event(F),Y=this.__zoom,K=Math.max(s[0],Math.min(s[1],Y.k*Math.pow(2,n.apply(this,arguments)))),H=ei(F);if(B.wheel)(B.mouse[0][0]!==H[0]||B.mouse[0][1]!==H[1])&&(B.mouse[1]=Y.invert(B.mouse[0]=H)),clearTimeout(B.wheel);else{if(Y.k===K)return;B.mouse=[H,Y.invert(H)],Oh(this),B.start()}oc(F),B.wheel=setTimeout(W,w),B.zoom("mouse",r(v(S(Y,K),B.mouse[0],B.mouse[1]),B.extent,a));function W(){B.wheel=null,B.end()}}function O(F,...G){if(g||!e.apply(this,arguments))return;var B=F.currentTarget,Y=R(this,G,!0).event(F),K=Pn(F.view).on("mousemove.zoom",q,!0).on("mouseup.zoom",J,!0),H=ei(F,B),W=F.clientX,D=F.clientY;eT(F.view),_g(F),Y.mouse=[H,this.__zoom.invert(H)],Oh(this),Y.start();function q(ee){if(oc(ee),!Y.moved){var ue=ee.clientX-W,pe=ee.clientY-D;Y.moved=ue*ue+pe*pe>b}Y.event(ee).zoom("mouse",r(v(Y.that.__zoom,Y.mouse[0]=ei(ee,B),Y.mouse[1]),Y.extent,a))}function J(ee){K.on("mousemove.zoom mouseup.zoom",null),tT(ee.view,Y.moved),oc(ee),Y.event(ee).end()}}function T(F,...G){if(e.apply(this,arguments)){var B=this.__zoom,Y=ei(F.changedTouches?F.changedTouches[0]:F,this),K=B.invert(Y),H=B.k*(F.shiftKey?.5:2),W=r(v(S(B,H),Y,K),t.apply(this,G),a);oc(F),l>0?Pn(this).transition().duration(l).call(C,W,Y,F):Pn(this).call(_.transform,W,Y,F)}}function I(F,...G){if(e.apply(this,arguments)){var B=F.touches,Y=B.length,K=R(this,G,F.changedTouches.length===Y).event(F),H,W,D,q;for(_g(F),W=0;W<Y;++W)D=B[W],q=ei(D,this),q=[q,this.__zoom.invert(q),D.identifier],K.touch0?!K.touch1&&K.touch0[2]!==q[2]&&(K.touch1=q,K.taps=0):(K.touch0=q,H=!0,K.taps=1+!!f);f&&(f=clearTimeout(f)),H&&(K.taps<2&&(p=q[0],f=setTimeout(function(){f=null},x)),Oh(this),K.start())}}function M(F,...G){if(this.__zooming){var B=R(this,G).event(F),Y=F.changedTouches,K=Y.length,H,W,D,q;for(oc(F),H=0;H<K;++H)W=Y[H],D=ei(W,this),B.touch0&&B.touch0[2]===W.identifier?B.touch0[0]=D:B.touch1&&B.touch1[2]===W.identifier&&(B.touch1[0]=D);if(W=B.that.__zoom,B.touch1){var J=B.touch0[0],ee=B.touch0[1],ue=B.touch1[0],pe=B.touch1[1],V=(V=ue[0]-J[0])*V+(V=ue[1]-J[1])*V,te=(te=pe[0]-ee[0])*te+(te=pe[1]-ee[1])*te;W=S(W,Math.sqrt(V/te)),D=[(J[0]+ue[0])/2,(J[1]+ue[1])/2],q=[(ee[0]+pe[0])/2,(ee[1]+pe[1])/2]}else if(B.touch0)D=B.touch0[0],q=B.touch0[1];else return;B.zoom("touch",r(v(W,D,q),B.extent,a))}}function $(F,...G){if(this.__zooming){var B=R(this,G).event(F),Y=F.changedTouches,K=Y.length,H,W;for(_g(F),g&&clearTimeout(g),g=setTimeout(function(){g=null},x),H=0;H<K;++H)W=Y[H],B.touch0&&B.touch0[2]===W.identifier?delete B.touch0:B.touch1&&B.touch1[2]===W.identifier&&delete B.touch1;if(B.touch1&&!B.touch0&&(B.touch0=B.touch1,delete B.touch1),B.touch0)B.touch0[1]=this.__zoom.invert(B.touch0[0]);else if(B.end(),B.taps===2&&(W=ei(W,this),Math.hypot(p[0]-W[0],p[1]-W[1])<k)){var D=Pn(this).on("dblclick.zoom");D&&D.apply(this,arguments)}}}return _.wheelDelta=function(F){return arguments.length?(n=typeof F=="function"?F:ch(+F),_):n},_.filter=function(F){return arguments.length?(e=typeof F=="function"?F:ch(!!F),_):e},_.touchable=function(F){return arguments.length?(i=typeof F=="function"?F:ch(!!F),_):i},_.extent=function(F){return arguments.length?(t=typeof F=="function"?F:ch([[+F[0][0],+F[0][1]],[+F[1][0],+F[1][1]]]),_):t},_.scaleExtent=function(F){return arguments.length?(s[0]=+F[0],s[1]=+F[1],_):[s[0],s[1]]},_.translateExtent=function(F){return arguments.length?(a[0][0]=+F[0][0],a[1][0]=+F[1][0],a[0][1]=+F[0][1],a[1][1]=+F[1][1],_):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},_.constrain=function(F){return arguments.length?(r=F,_):r},_.duration=function(F){return arguments.length?(l=+F,_):l},_.interpolate=function(F){return arguments.length?(d=F,_):d},_.on=function(){var F=h.on.apply(h,arguments);return F===h?_:F},_.clickDistance=function(F){return arguments.length?(b=(F=+F)*F,_):Math.sqrt(b)},_.tapDistance=function(F){return arguments.length?(k=+F,_):k},_}const np=P.createContext(null),OG=np.Provider,zi={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},mT=zi.error001();function vt(e,t){const r=P.useContext(np);if(r===null)throw new Error(mT);return GE(r,e,t)}const Kt=()=>{const e=P.useContext(np);if(e===null)throw new Error(mT);return P.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},DG=e=>e.userSelectionActive?"none":"all";function gT({position:e,children:t,className:r,style:n,...i}){const s=vt(DG),a=`${e}`.split("-");return re.createElement("div",{className:wr(["react-flow__panel",r,...a]),style:{...n,pointerEvents:s},...i},t)}function zG({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:re.createElement(gT,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},re.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const UG=({x:e,y:t,label:r,labelStyle:n={},labelShowBg:i=!0,labelBgStyle:s={},labelBgPadding:a=[2,4],labelBgBorderRadius:l=2,children:d,className:h,...f})=>{const p=P.useRef(null),[g,x]=P.useState({x:0,y:0,width:0,height:0}),w=wr(["react-flow__edge-textwrapper",h]);return P.useEffect(()=>{if(p.current){const b=p.current.getBBox();x({x:b.x,y:b.y,width:b.width,height:b.height})}},[r]),typeof r>"u"||!r?null:re.createElement("g",{transform:`translate(${e-g.width/2} ${t-g.height/2})`,className:w,visibility:g.width?"visible":"hidden",...f},i&&re.createElement("rect",{width:g.width+2*a[0],x:-a[0],y:-a[1],height:g.height+2*a[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),re.createElement("text",{className:"react-flow__edge-text",y:g.height/2,dy:"0.3em",ref:p,style:n},r),d)};var GG=P.memo(UG);const v5=e=>({width:e.offsetWidth,height:e.offsetHeight}),rl=(e,t=0,r=1)=>Math.min(Math.max(e,t),r),y5=(e={x:0,y:0},t)=>({x:rl(e.x,t[0][0],t[1][0]),y:rl(e.y,t[0][1],t[1][1])}),L6=(e,t,r)=>e<t?rl(Math.abs(e-t),1,50)/50:e>r?-rl(Math.abs(e-r),1,50)/50:0,xT=(e,t)=>{const r=L6(e.x,35,t.width-35)*20,n=L6(e.y,35,t.height-35)*20;return[r,n]},vT=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},$G=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),b5=({x:e,y:t,width:r,height:n})=>({x:e,y:t,x2:e+r,y2:t+n}),BG=({x:e,y:t,x2:r,y2:n})=>({x:e,y:t,width:r-e,height:n-t}),O6=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Vb=(e,t)=>{const r=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),n=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(r*n)},qG=e=>un(e.width)&&un(e.height)&&un(e.x)&&un(e.y),un=e=>!isNaN(e)&&isFinite(e),_t=Symbol.for("internals"),yT=["Enter"," ","Escape"],VG=(e,t)=>{},HG=e=>"nativeEvent"in e;function Hb(e){var i,s;const t=HG(e)?e.nativeEvent:e,r=((s=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const bT=e=>"clientX"in e,Is=(e,t)=>{var s,a;const r=bT(e),n=r?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,i=r?e.clientY:(a=e.touches)==null?void 0:a[0].clientY;return{x:n-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},wf=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},Tu=({id:e,path:t,labelX:r,labelY:n,label:i,labelStyle:s,labelShowBg:a,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:h,style:f,markerEnd:p,markerStart:g,interactionWidth:x=20})=>re.createElement(re.Fragment,null,re.createElement("path",{id:e,style:f,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:p,markerStart:g}),x&&re.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:x,className:"react-flow__edge-interaction"}),i&&un(r)&&un(n)?re.createElement(GG,{x:r,y:n,label:i,labelStyle:s,labelShowBg:a,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:h}):null);Tu.displayName="BaseEdge";function lc(e,t,r){return r===void 0?r:n=>{const i=t().edges.find(s=>s.id===e);i&&r(n,{...i})}}function wT({sourceX:e,sourceY:t,targetX:r,targetY:n}){const i=Math.abs(r-e)/2,s=r<e?r+i:r-i,a=Math.abs(n-t)/2,l=n<t?n+a:n-a;return[s,l,i,a]}function _T({sourceX:e,sourceY:t,targetX:r,targetY:n,sourceControlX:i,sourceControlY:s,targetControlX:a,targetControlY:l}){const d=e*.125+i*.375+a*.375+r*.125,h=t*.125+s*.375+l*.375+n*.125,f=Math.abs(d-e),p=Math.abs(h-t);return[d,h,f,p]}var Aa;(function(e){e.Strict="strict",e.Loose="loose"})(Aa||(Aa={}));var ba;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(ba||(ba={}));var fu;(function(e){e.Partial="partial",e.Full="full"})(fu||(fu={}));var vs;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(vs||(vs={}));var nl;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(nl||(nl={}));var Ne;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Ne||(Ne={}));function D6({pos:e,x1:t,y1:r,x2:n,y2:i}){return e===Ne.Left||e===Ne.Right?[.5*(t+n),r]:[t,.5*(r+i)]}function NT({sourceX:e,sourceY:t,sourcePosition:r=Ne.Bottom,targetX:n,targetY:i,targetPosition:s=Ne.Top}){const[a,l]=D6({pos:r,x1:e,y1:t,x2:n,y2:i}),[d,h]=D6({pos:s,x1:n,y1:i,x2:e,y2:t}),[f,p,g,x]=_T({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:d,targetControlY:h});return[`M${e},${t} C${a},${l} ${d},${h} ${n},${i}`,f,p,g,x]}const w5=P.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:i=Ne.Bottom,targetPosition:s=Ne.Top,label:a,labelStyle:l,labelShowBg:d,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:p,style:g,markerEnd:x,markerStart:w,interactionWidth:b})=>{const[k,_,S]=NT({sourceX:e,sourceY:t,sourcePosition:i,targetX:r,targetY:n,targetPosition:s});return re.createElement(Tu,{path:k,labelX:_,labelY:S,label:a,labelStyle:l,labelShowBg:d,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:p,style:g,markerEnd:x,markerStart:w,interactionWidth:b})});w5.displayName="SimpleBezierEdge";const z6={[Ne.Left]:{x:-1,y:0},[Ne.Right]:{x:1,y:0},[Ne.Top]:{x:0,y:-1},[Ne.Bottom]:{x:0,y:1}},WG=({source:e,sourcePosition:t=Ne.Bottom,target:r})=>t===Ne.Left||t===Ne.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},U6=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function KG({source:e,sourcePosition:t=Ne.Bottom,target:r,targetPosition:n=Ne.Top,center:i,offset:s}){const a=z6[t],l=z6[n],d={x:e.x+a.x*s,y:e.y+a.y*s},h={x:r.x+l.x*s,y:r.y+l.y*s},f=WG({source:d,sourcePosition:t,target:h}),p=f.x!==0?"x":"y",g=f[p];let x=[],w,b;const k={x:0,y:0},_={x:0,y:0},[S,v,j,C]=wT({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(a[p]*l[p]===-1){w=i.x??S,b=i.y??v;const L=[{x:w,y:d.y},{x:w,y:h.y}],A=[{x:d.x,y:b},{x:h.x,y:b}];a[p]===g?x=p==="x"?L:A:x=p==="x"?A:L}else{const L=[{x:d.x,y:h.y}],A=[{x:h.x,y:d.y}];if(p==="x"?x=a.x===g?A:L:x=a.y===g?L:A,t===n){const $=Math.abs(e[p]-r[p]);if($<=s){const F=Math.min(s-1,s-$);a[p]===g?k[p]=(d[p]>e[p]?-1:1)*F:_[p]=(h[p]>r[p]?-1:1)*F}}if(t!==n){const $=p==="x"?"y":"x",F=a[p]===l[$],G=d[$]>h[$],B=d[$]<h[$];(a[p]===1&&(!F&&G||F&&B)||a[p]!==1&&(!F&&B||F&&G))&&(x=p==="x"?L:A)}const O={x:d.x+k.x,y:d.y+k.y},T={x:h.x+_.x,y:h.y+_.y},I=Math.max(Math.abs(O.x-x[0].x),Math.abs(T.x-x[0].x)),M=Math.max(Math.abs(O.y-x[0].y),Math.abs(T.y-x[0].y));I>=M?(w=(O.x+T.x)/2,b=x[0].y):(w=x[0].x,b=(O.y+T.y)/2)}return[[e,{x:d.x+k.x,y:d.y+k.y},...x,{x:h.x+_.x,y:h.y+_.y},r],w,b,j,C]}function YG(e,t,r,n){const i=Math.min(U6(e,t)/2,U6(t,r)/2,n),{x:s,y:a}=t;if(e.x===s&&s===r.x||e.y===a&&a===r.y)return`L${s} ${a}`;if(e.y===a){const h=e.x<r.x?-1:1,f=e.y<r.y?1:-1;return`L ${s+i*h},${a}Q ${s},${a} ${s},${a+i*f}`}const l=e.x<r.x?1:-1,d=e.y<r.y?-1:1;return`L ${s},${a+i*d}Q ${s},${a} ${s+i*l},${a}`}function Wb({sourceX:e,sourceY:t,sourcePosition:r=Ne.Bottom,targetX:n,targetY:i,targetPosition:s=Ne.Top,borderRadius:a=5,centerX:l,centerY:d,offset:h=20}){const[f,p,g,x,w]=KG({source:{x:e,y:t},sourcePosition:r,target:{x:n,y:i},targetPosition:s,center:{x:l,y:d},offset:h});return[f.reduce((k,_,S)=>{let v="";return S>0&&S<f.length-1?v=YG(f[S-1],_,f[S+1],a):v=`${S===0?"M":"L"}${_.x} ${_.y}`,k+=v,k},""),p,g,x,w]}const ip=P.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:i,labelStyle:s,labelShowBg:a,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:h,style:f,sourcePosition:p=Ne.Bottom,targetPosition:g=Ne.Top,markerEnd:x,markerStart:w,pathOptions:b,interactionWidth:k})=>{const[_,S,v]=Wb({sourceX:e,sourceY:t,sourcePosition:p,targetX:r,targetY:n,targetPosition:g,borderRadius:b==null?void 0:b.borderRadius,offset:b==null?void 0:b.offset});return re.createElement(Tu,{path:_,labelX:S,labelY:v,label:i,labelStyle:s,labelShowBg:a,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:h,style:f,markerEnd:x,markerStart:w,interactionWidth:k})});ip.displayName="SmoothStepEdge";const _5=P.memo(e=>{var t;return re.createElement(ip,{...e,pathOptions:P.useMemo(()=>{var r;return{borderRadius:0,offset:(r=e.pathOptions)==null?void 0:r.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});_5.displayName="StepEdge";function XG({sourceX:e,sourceY:t,targetX:r,targetY:n}){const[i,s,a,l]=wT({sourceX:e,sourceY:t,targetX:r,targetY:n});return[`M ${e},${t}L ${r},${n}`,i,s,a,l]}const N5=P.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:i,labelStyle:s,labelShowBg:a,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:h,style:f,markerEnd:p,markerStart:g,interactionWidth:x})=>{const[w,b,k]=XG({sourceX:e,sourceY:t,targetX:r,targetY:n});return re.createElement(Tu,{path:w,labelX:b,labelY:k,label:i,labelStyle:s,labelShowBg:a,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:h,style:f,markerEnd:p,markerStart:g,interactionWidth:x})});N5.displayName="StraightEdge";function uh(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function G6({pos:e,x1:t,y1:r,x2:n,y2:i,c:s}){switch(e){case Ne.Left:return[t-uh(t-n,s),r];case Ne.Right:return[t+uh(n-t,s),r];case Ne.Top:return[t,r-uh(r-i,s)];case Ne.Bottom:return[t,r+uh(i-r,s)]}}function ST({sourceX:e,sourceY:t,sourcePosition:r=Ne.Bottom,targetX:n,targetY:i,targetPosition:s=Ne.Top,curvature:a=.25}){const[l,d]=G6({pos:r,x1:e,y1:t,x2:n,y2:i,c:a}),[h,f]=G6({pos:s,x1:n,y1:i,x2:e,y2:t,c:a}),[p,g,x,w]=_T({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:l,sourceControlY:d,targetControlX:h,targetControlY:f});return[`M${e},${t} C${l},${d} ${h},${f} ${n},${i}`,p,g,x,w]}const _f=P.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:i=Ne.Bottom,targetPosition:s=Ne.Top,label:a,labelStyle:l,labelShowBg:d,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:p,style:g,markerEnd:x,markerStart:w,pathOptions:b,interactionWidth:k})=>{const[_,S,v]=ST({sourceX:e,sourceY:t,sourcePosition:i,targetX:r,targetY:n,targetPosition:s,curvature:b==null?void 0:b.curvature});return re.createElement(Tu,{path:_,labelX:S,labelY:v,label:a,labelStyle:l,labelShowBg:d,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:p,style:g,markerEnd:x,markerStart:w,interactionWidth:k})});_f.displayName="BezierEdge";const S5=P.createContext(null),QG=S5.Provider;S5.Consumer;const ZG=()=>P.useContext(S5),JG=e=>"id"in e&&"source"in e&&"target"in e,e$=({source:e,sourceHandle:t,target:r,targetHandle:n})=>`reactflow__edge-${e}${t||""}-${r}${n||""}`,Kb=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`,t$=(e,t)=>t.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),jT=(e,t)=>{if(!e.source||!e.target)return t;let r;return JG(e)?r={...e}:r={...e,id:e$(e)},t$(r,t)?t:t.concat(r)},Yb=({x:e,y:t},[r,n,i],s,[a,l])=>{const d={x:(e-r)/i,y:(t-n)/i};return s?{x:a*Math.round(d.x/a),y:l*Math.round(d.y/l)}:d},kT=({x:e,y:t},[r,n,i])=>({x:e*i+r,y:t*i+n}),Bo=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(e.width??0)*t[0],n=(e.height??0)*t[1],i={x:e.position.x-r,y:e.position.y-n};return{...i,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-n}:i}},j5=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((n,i)=>{const{x:s,y:a}=Bo(i,t).positionAbsolute;return $G(n,b5({x:s,y:a,width:i.width||0,height:i.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return BG(r)},CT=(e,t,[r,n,i]=[0,0,1],s=!1,a=!1,l=[0,0])=>{const d={x:(t.x-r)/i,y:(t.y-n)/i,width:t.width/i,height:t.height/i},h=[];return e.forEach(f=>{const{width:p,height:g,selectable:x=!0,hidden:w=!1}=f;if(a&&!x||w)return!1;const{positionAbsolute:b}=Bo(f,l),k={x:b.x,y:b.y,width:p||0,height:g||0},_=Vb(d,k),S=typeof p>"u"||typeof g>"u"||p===null||g===null,v=s&&_>0,j=(p||0)*(g||0);(S||v||_>=j||f.dragging)&&h.push(f)}),h},ET=(e,t)=>{const r=e.map(n=>n.id);return t.filter(n=>r.includes(n.source)||r.includes(n.target))},TT=(e,t,r,n,i,s=.1)=>{const a=t/(e.width*(1+s)),l=r/(e.height*(1+s)),d=Math.min(a,l),h=rl(d,n,i),f=e.x+e.width/2,p=e.y+e.height/2,g=t/2-f*h,x=r/2-p*h;return{x:g,y:x,zoom:h}},ma=(e,t=0)=>e.transition().duration(t);function $6(e,t,r,n){return(t[r]||[]).reduce((i,s)=>{var a,l;return`${e.id}-${s.id}-${r}`!==n&&i.push({id:s.id||null,type:r,nodeId:e.id,x:(((a=e.positionAbsolute)==null?void 0:a.x)??0)+s.x+s.width/2,y:(((l=e.positionAbsolute)==null?void 0:l.y)??0)+s.y+s.height/2}),i},[])}function r$(e,t,r,n,i,s){const{x:a,y:l}=Is(e),h=t.elementsFromPoint(a,l).find(w=>w.classList.contains("react-flow__handle"));if(h){const w=h.getAttribute("data-nodeid");if(w){const b=k5(void 0,h),k=h.getAttribute("data-handleid"),_=s({nodeId:w,id:k,type:b});if(_){const S=i.find(v=>v.nodeId===w&&v.type===b&&v.id===k);return{handle:{id:k,type:b,nodeId:w,x:(S==null?void 0:S.x)||r.x,y:(S==null?void 0:S.y)||r.y},validHandleResult:_}}}}let f=[],p=1/0;if(i.forEach(w=>{const b=Math.sqrt((w.x-r.x)**2+(w.y-r.y)**2);if(b<=n){const k=s(w);b<=p&&(b<p?f=[{handle:w,validHandleResult:k}]:b===p&&f.push({handle:w,validHandleResult:k}),p=b)}}),!f.length)return{handle:null,validHandleResult:PT()};if(f.length===1)return f[0];const g=f.some(({validHandleResult:w})=>w.isValid),x=f.some(({handle:w})=>w.type==="target");return f.find(({handle:w,validHandleResult:b})=>x?w.type==="target":g?b.isValid:!0)||f[0]}const n$={source:null,target:null,sourceHandle:null,targetHandle:null},PT=()=>({handleDomNode:null,isValid:!1,connection:n$,endHandle:null});function RT(e,t,r,n,i,s,a){const l=i==="target",d=a.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),h={...PT(),handleDomNode:d};if(d){const f=k5(void 0,d),p=d.getAttribute("data-nodeid"),g=d.getAttribute("data-handleid"),x=d.classList.contains("connectable"),w=d.classList.contains("connectableend"),b={source:l?p:r,sourceHandle:l?g:n,target:l?r:p,targetHandle:l?n:g};h.connection=b,x&&w&&(t===Aa.Strict?l&&f==="source"||!l&&f==="target":p!==r||g!==n)&&(h.endHandle={nodeId:p,handleId:g,type:f},h.isValid=s(b))}return h}function i$({nodes:e,nodeId:t,handleId:r,handleType:n}){return e.reduce((i,s)=>{if(s[_t]){const{handleBounds:a}=s[_t];let l=[],d=[];a&&(l=$6(s,a,"source",`${t}-${r}-${n}`),d=$6(s,a,"target",`${t}-${r}-${n}`)),i.push(...l,...d)}return i},[])}function k5(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Ng(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function s$(e,t){let r=null;return t?r="valid":e&&!t&&(r="invalid"),r}function AT({event:e,handleId:t,nodeId:r,onConnect:n,isTarget:i,getState:s,setState:a,isValidConnection:l,edgeUpdaterType:d,onReconnectEnd:h}){const f=vT(e.target),{connectionMode:p,domNode:g,autoPanOnConnect:x,connectionRadius:w,onConnectStart:b,panBy:k,getNodes:_,cancelConnection:S}=s();let v=0,j;const{x:C,y:R}=Is(e),L=f==null?void 0:f.elementFromPoint(C,R),A=k5(d,L),O=g==null?void 0:g.getBoundingClientRect();if(!O||!A)return;let T,I=Is(e,O),M=!1,$=null,F=!1,G=null;const B=i$({nodes:_(),nodeId:r,handleId:t,handleType:A}),Y=()=>{if(!x)return;const[W,D]=xT(I,O);k({x:W,y:D}),v=requestAnimationFrame(Y)};a({connectionPosition:I,connectionStatus:null,connectionNodeId:r,connectionHandleId:t,connectionHandleType:A,connectionStartHandle:{nodeId:r,handleId:t,type:A},connectionEndHandle:null}),b==null||b(e,{nodeId:r,handleId:t,handleType:A});function K(W){const{transform:D}=s();I=Is(W,O);const{handle:q,validHandleResult:J}=r$(W,f,Yb(I,D,!1,[1,1]),w,B,ee=>RT(ee,p,r,t,i?"target":"source",l,f));if(j=q,M||(Y(),M=!0),G=J.handleDomNode,$=J.connection,F=J.isValid,a({connectionPosition:j&&F?kT({x:j.x,y:j.y},D):I,connectionStatus:s$(!!j,F),connectionEndHandle:J.endHandle}),!j&&!F&&!G)return Ng(T);$.source!==$.target&&G&&(Ng(T),T=G,G.classList.add("connecting","react-flow__handle-connecting"),G.classList.toggle("valid",F),G.classList.toggle("react-flow__handle-valid",F))}function H(W){var D,q;(j||G)&&$&&F&&(n==null||n($)),(q=(D=s()).onConnectEnd)==null||q.call(D,W),d&&(h==null||h(W)),Ng(T),S(),cancelAnimationFrame(v),M=!1,F=!1,$=null,G=null,f.removeEventListener("mousemove",K),f.removeEventListener("mouseup",H),f.removeEventListener("touchmove",K),f.removeEventListener("touchend",H)}f.addEventListener("mousemove",K),f.addEventListener("mouseup",H),f.addEventListener("touchmove",K),f.addEventListener("touchend",H)}const B6=()=>!0,a$=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),o$=(e,t,r)=>n=>{const{connectionStartHandle:i,connectionEndHandle:s,connectionClickStartHandle:a}=n;return{connecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===r||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===r,clickConnecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===r}},IT=P.forwardRef(({type:e="source",position:t=Ne.Top,isValidConnection:r,isConnectable:n=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:a,onConnect:l,children:d,className:h,onMouseDown:f,onTouchStart:p,...g},x)=>{var O,T;const w=a||null,b=e==="target",k=Kt(),_=ZG(),{connectOnClick:S,noPanClassName:v}=vt(a$,hr),{connecting:j,clickConnecting:C}=vt(o$(_,w,e),hr);_||(T=(O=k.getState()).onError)==null||T.call(O,"010",zi.error010());const R=I=>{const{defaultEdgeOptions:M,onConnect:$,hasDefaultEdges:F}=k.getState(),G={...M,...I};if(F){const{edges:B,setEdges:Y}=k.getState();Y(jT(G,B))}$==null||$(G),l==null||l(G)},L=I=>{if(!_)return;const M=bT(I);i&&(M&&I.button===0||!M)&&AT({event:I,handleId:w,nodeId:_,onConnect:R,isTarget:b,getState:k.getState,setState:k.setState,isValidConnection:r||k.getState().isValidConnection||B6}),M?f==null||f(I):p==null||p(I)},A=I=>{const{onClickConnectStart:M,onClickConnectEnd:$,connectionClickStartHandle:F,connectionMode:G,isValidConnection:B}=k.getState();if(!_||!F&&!i)return;if(!F){M==null||M(I,{nodeId:_,handleId:w,handleType:e}),k.setState({connectionClickStartHandle:{nodeId:_,type:e,handleId:w}});return}const Y=vT(I.target),K=r||B||B6,{connection:H,isValid:W}=RT({nodeId:_,id:w,type:e},G,F.nodeId,F.handleId||null,F.type,K,Y);W&&R(H),$==null||$(I),k.setState({connectionClickStartHandle:null})};return re.createElement("div",{"data-handleid":w,"data-nodeid":_,"data-handlepos":t,"data-id":`${_}-${w}-${e}`,className:wr(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",v,h,{source:!b,target:b,connectable:n,connectablestart:i,connectableend:s,connecting:C,connectionindicator:n&&(i&&!j||s&&j)}]),onMouseDown:L,onTouchStart:L,onClick:S?A:void 0,ref:x,...g},d)});IT.displayName="Handle";var Nf=P.memo(IT);const MT=({data:e,isConnectable:t,targetPosition:r=Ne.Top,sourcePosition:n=Ne.Bottom})=>re.createElement(re.Fragment,null,re.createElement(Nf,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label,re.createElement(Nf,{type:"source",position:n,isConnectable:t}));MT.displayName="DefaultNode";var Xb=P.memo(MT);const FT=({data:e,isConnectable:t,sourcePosition:r=Ne.Bottom})=>re.createElement(re.Fragment,null,e==null?void 0:e.label,re.createElement(Nf,{type:"source",position:r,isConnectable:t}));FT.displayName="InputNode";var LT=P.memo(FT);const OT=({data:e,isConnectable:t,targetPosition:r=Ne.Top})=>re.createElement(re.Fragment,null,re.createElement(Nf,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label);OT.displayName="OutputNode";var DT=P.memo(OT);const C5=()=>null;C5.displayName="GroupNode";const l$=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),dh=e=>e.id;function c$(e,t){return hr(e.selectedNodes.map(dh),t.selectedNodes.map(dh))&&hr(e.selectedEdges.map(dh),t.selectedEdges.map(dh))}const zT=P.memo(({onSelectionChange:e})=>{const t=Kt(),{selectedNodes:r,selectedEdges:n}=vt(l$,c$);return P.useEffect(()=>{const i={nodes:r,edges:n};e==null||e(i),t.getState().onSelectionChange.forEach(s=>s(i))},[r,n,e]),null});zT.displayName="SelectionListener";const u$=e=>!!e.onSelectionChange;function d$({onSelectionChange:e}){const t=vt(u$);return e||t?re.createElement(zT,{onSelectionChange:e}):null}const h$=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function fo(e,t){P.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function Oe(e,t,r){P.useEffect(()=>{typeof t<"u"&&r({[e]:t})},[t])}const f$=({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:i,onConnectStart:s,onConnectEnd:a,onClickConnectStart:l,onClickConnectEnd:d,nodesDraggable:h,nodesConnectable:f,nodesFocusable:p,edgesFocusable:g,edgesUpdatable:x,elevateNodesOnSelect:w,minZoom:b,maxZoom:k,nodeExtent:_,onNodesChange:S,onEdgesChange:v,elementsSelectable:j,connectionMode:C,snapGrid:R,snapToGrid:L,translateExtent:A,connectOnClick:O,defaultEdgeOptions:T,fitView:I,fitViewOptions:M,onNodesDelete:$,onEdgesDelete:F,onNodeDrag:G,onNodeDragStart:B,onNodeDragStop:Y,onSelectionDrag:K,onSelectionDragStart:H,onSelectionDragStop:W,noPanClassName:D,nodeOrigin:q,rfId:J,autoPanOnConnect:ee,autoPanOnNodeDrag:ue,onError:pe,connectionRadius:V,isValidConnection:te,nodeDragThreshold:oe})=>{const{setNodes:U,setEdges:X,setDefaultNodesAndEdges:le,setMinZoom:me,setMaxZoom:ye,setTranslateExtent:ae,setNodeExtent:Fe,reset:fe}=vt(h$,hr),ge=Kt();return P.useEffect(()=>{const bt=n==null?void 0:n.map(pr=>({...pr,...T}));return le(r,bt),()=>{fe()}},[]),Oe("defaultEdgeOptions",T,ge.setState),Oe("connectionMode",C,ge.setState),Oe("onConnect",i,ge.setState),Oe("onConnectStart",s,ge.setState),Oe("onConnectEnd",a,ge.setState),Oe("onClickConnectStart",l,ge.setState),Oe("onClickConnectEnd",d,ge.setState),Oe("nodesDraggable",h,ge.setState),Oe("nodesConnectable",f,ge.setState),Oe("nodesFocusable",p,ge.setState),Oe("edgesFocusable",g,ge.setState),Oe("edgesUpdatable",x,ge.setState),Oe("elementsSelectable",j,ge.setState),Oe("elevateNodesOnSelect",w,ge.setState),Oe("snapToGrid",L,ge.setState),Oe("snapGrid",R,ge.setState),Oe("onNodesChange",S,ge.setState),Oe("onEdgesChange",v,ge.setState),Oe("connectOnClick",O,ge.setState),Oe("fitViewOnInit",I,ge.setState),Oe("fitViewOnInitOptions",M,ge.setState),Oe("onNodesDelete",$,ge.setState),Oe("onEdgesDelete",F,ge.setState),Oe("onNodeDrag",G,ge.setState),Oe("onNodeDragStart",B,ge.setState),Oe("onNodeDragStop",Y,ge.setState),Oe("onSelectionDrag",K,ge.setState),Oe("onSelectionDragStart",H,ge.setState),Oe("onSelectionDragStop",W,ge.setState),Oe("noPanClassName",D,ge.setState),Oe("nodeOrigin",q,ge.setState),Oe("rfId",J,ge.setState),Oe("autoPanOnConnect",ee,ge.setState),Oe("autoPanOnNodeDrag",ue,ge.setState),Oe("onError",pe,ge.setState),Oe("connectionRadius",V,ge.setState),Oe("isValidConnection",te,ge.setState),Oe("nodeDragThreshold",oe,ge.setState),fo(e,U),fo(t,X),fo(b,me),fo(k,ye),fo(A,ae),fo(_,Fe),null},q6={display:"none"},p$={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},UT="react-flow__node-desc",GT="react-flow__edge-desc",m$="react-flow__aria-live",g$=e=>e.ariaLiveMessage;function x$({rfId:e}){const t=vt(g$);return re.createElement("div",{id:`${m$}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:p$},t)}function v$({rfId:e,disableKeyboardA11y:t}){return re.createElement(re.Fragment,null,re.createElement("div",{id:`${UT}-${e}`,style:q6},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),re.createElement("div",{id:`${GT}-${e}`,style:q6},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&re.createElement(x$,{rfId:e}))}var pu=(e=null,t={actInsideInputWithModifier:!0})=>{const[r,n]=P.useState(!1),i=P.useRef(!1),s=P.useRef(new Set([])),[a,l]=P.useMemo(()=>{if(e!==null){const h=(Array.isArray(e)?e:[e]).filter(p=>typeof p=="string").map(p=>p.split("+")),f=h.reduce((p,g)=>p.concat(...g),[]);return[h,f]}return[[],[]]},[e]);return P.useEffect(()=>{const d=typeof document<"u"?document:null,h=(t==null?void 0:t.target)||d;if(e!==null){const f=x=>{if(i.current=x.ctrlKey||x.metaKey||x.shiftKey,(!i.current||i.current&&!t.actInsideInputWithModifier)&&Hb(x))return!1;const b=H6(x.code,l);s.current.add(x[b]),V6(a,s.current,!1)&&(x.preventDefault(),n(!0))},p=x=>{if((!i.current||i.current&&!t.actInsideInputWithModifier)&&Hb(x))return!1;const b=H6(x.code,l);V6(a,s.current,!0)?(n(!1),s.current.clear()):s.current.delete(x[b]),x.key==="Meta"&&s.current.clear(),i.current=!1},g=()=>{s.current.clear(),n(!1)};return h==null||h.addEventListener("keydown",f),h==null||h.addEventListener("keyup",p),window.addEventListener("blur",g),()=>{h==null||h.removeEventListener("keydown",f),h==null||h.removeEventListener("keyup",p),window.removeEventListener("blur",g)}}},[e,n]),r};function V6(e,t,r){return e.filter(n=>r||n.length===t.size).some(n=>n.every(i=>t.has(i)))}function H6(e,t){return t.includes(e)?"code":"key"}function $T(e,t,r,n){var l,d;const i=e.parentNode||e.parentId;if(!i)return r;const s=t.get(i),a=Bo(s,n);return $T(s,t,{x:(r.x??0)+a.x,y:(r.y??0)+a.y,z:(((l=s[_t])==null?void 0:l.z)??0)>(r.z??0)?((d=s[_t])==null?void 0:d.z)??0:r.z??0},n)}function BT(e,t,r){e.forEach(n=>{var s;const i=n.parentNode||n.parentId;if(i&&!e.has(i))throw new Error(`Parent node ${i} not found`);if(i||r!=null&&r[n.id]){const{x:a,y:l,z:d}=$T(n,e,{...n.position,z:((s=n[_t])==null?void 0:s.z)??0},t);n.positionAbsolute={x:a,y:l},n[_t].z=d,r!=null&&r[n.id]&&(n[_t].isParent=!0)}})}function Sg(e,t,r,n){const i=new Map,s={},a=n?1e3:0;return e.forEach(l=>{var x;const d=(un(l.zIndex)?l.zIndex:0)+(l.selected?a:0),h=t.get(l.id),f={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},p=l.parentNode||l.parentId;p&&(s[p]=!0);const g=(h==null?void 0:h.type)&&(h==null?void 0:h.type)!==l.type;Object.defineProperty(f,_t,{enumerable:!1,value:{handleBounds:g||(x=h==null?void 0:h[_t])==null?void 0:x.handleBounds,z:d}}),i.set(l.id,f)}),BT(i,r,s),i}function qT(e,t={}){const{getNodes:r,width:n,height:i,minZoom:s,maxZoom:a,d3Zoom:l,d3Selection:d,fitViewOnInitDone:h,fitViewOnInit:f,nodeOrigin:p}=e(),g=t.initial&&!h&&f;if(l&&d&&(g||!t.initial)){const w=r().filter(k=>{var S;const _=t.includeHiddenNodes?k.width&&k.height:!k.hidden;return(S=t.nodes)!=null&&S.length?_&&t.nodes.some(v=>v.id===k.id):_}),b=w.every(k=>k.width&&k.height);if(w.length>0&&b){const k=j5(w,p),{x:_,y:S,zoom:v}=TT(k,n,i,t.minZoom??s,t.maxZoom??a,t.padding??.1),j=As.translate(_,S).scale(v);return typeof t.duration=="number"&&t.duration>0?l.transform(ma(d,t.duration),j):l.transform(d,j),!0}}return!1}function y$(e,t){return e.forEach(r=>{const n=t.get(r.id);n&&t.set(n.id,{...n,[_t]:n[_t],selected:r.selected})}),new Map(t)}function b$(e,t){return t.map(r=>{const n=e.find(i=>i.id===r.id);return n&&(r.selected=n.selected),r})}function hh({changedNodes:e,changedEdges:t,get:r,set:n}){const{nodeInternals:i,edges:s,onNodesChange:a,onEdgesChange:l,hasDefaultNodes:d,hasDefaultEdges:h}=r();e!=null&&e.length&&(d&&n({nodeInternals:y$(e,i)}),a==null||a(e)),t!=null&&t.length&&(h&&n({edges:b$(t,s)}),l==null||l(t))}const po=()=>{},w$={zoomIn:po,zoomOut:po,zoomTo:po,getZoom:()=>1,setViewport:po,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:po,fitBounds:po,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},_$=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),N$=()=>{const e=Kt(),{d3Zoom:t,d3Selection:r}=vt(_$,hr);return P.useMemo(()=>r&&t?{zoomIn:i=>t.scaleBy(ma(r,i==null?void 0:i.duration),1.2),zoomOut:i=>t.scaleBy(ma(r,i==null?void 0:i.duration),1/1.2),zoomTo:(i,s)=>t.scaleTo(ma(r,s==null?void 0:s.duration),i),getZoom:()=>e.getState().transform[2],setViewport:(i,s)=>{const[a,l,d]=e.getState().transform,h=As.translate(i.x??a,i.y??l).scale(i.zoom??d);t.transform(ma(r,s==null?void 0:s.duration),h)},getViewport:()=>{const[i,s,a]=e.getState().transform;return{x:i,y:s,zoom:a}},fitView:i=>qT(e.getState,i),setCenter:(i,s,a)=>{const{width:l,height:d,maxZoom:h}=e.getState(),f=typeof(a==null?void 0:a.zoom)<"u"?a.zoom:h,p=l/2-i*f,g=d/2-s*f,x=As.translate(p,g).scale(f);t.transform(ma(r,a==null?void 0:a.duration),x)},fitBounds:(i,s)=>{const{width:a,height:l,minZoom:d,maxZoom:h}=e.getState(),{x:f,y:p,zoom:g}=TT(i,a,l,d,h,(s==null?void 0:s.padding)??.1),x=As.translate(f,p).scale(g);t.transform(ma(r,s==null?void 0:s.duration),x)},project:i=>{const{transform:s,snapToGrid:a,snapGrid:l}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Yb(i,s,a,l)},screenToFlowPosition:i=>{const{transform:s,snapToGrid:a,snapGrid:l,domNode:d}=e.getState();if(!d)return i;const{x:h,y:f}=d.getBoundingClientRect(),p={x:i.x-h,y:i.y-f};return Yb(p,s,a,l)},flowToScreenPosition:i=>{const{transform:s,domNode:a}=e.getState();if(!a)return i;const{x:l,y:d}=a.getBoundingClientRect(),h=kT(i,s);return{x:h.x+l,y:h.y+d}},viewportInitialized:!0}:w$,[t,r])};function E5(){const e=N$(),t=Kt(),r=P.useCallback(()=>t.getState().getNodes().map(b=>({...b})),[]),n=P.useCallback(b=>t.getState().nodeInternals.get(b),[]),i=P.useCallback(()=>{const{edges:b=[]}=t.getState();return b.map(k=>({...k}))},[]),s=P.useCallback(b=>{const{edges:k=[]}=t.getState();return k.find(_=>_.id===b)},[]),a=P.useCallback(b=>{const{getNodes:k,setNodes:_,hasDefaultNodes:S,onNodesChange:v}=t.getState(),j=k(),C=typeof b=="function"?b(j):b;if(S)_(C);else if(v){const R=C.length===0?j.map(L=>({type:"remove",id:L.id})):C.map(L=>({item:L,type:"reset"}));v(R)}},[]),l=P.useCallback(b=>{const{edges:k=[],setEdges:_,hasDefaultEdges:S,onEdgesChange:v}=t.getState(),j=typeof b=="function"?b(k):b;if(S)_(j);else if(v){const C=j.length===0?k.map(R=>({type:"remove",id:R.id})):j.map(R=>({item:R,type:"reset"}));v(C)}},[]),d=P.useCallback(b=>{const k=Array.isArray(b)?b:[b],{getNodes:_,setNodes:S,hasDefaultNodes:v,onNodesChange:j}=t.getState();if(v){const R=[..._(),...k];S(R)}else if(j){const C=k.map(R=>({item:R,type:"add"}));j(C)}},[]),h=P.useCallback(b=>{const k=Array.isArray(b)?b:[b],{edges:_=[],setEdges:S,hasDefaultEdges:v,onEdgesChange:j}=t.getState();if(v)S([..._,...k]);else if(j){const C=k.map(R=>({item:R,type:"add"}));j(C)}},[]),f=P.useCallback(()=>{const{getNodes:b,edges:k=[],transform:_}=t.getState(),[S,v,j]=_;return{nodes:b().map(C=>({...C})),edges:k.map(C=>({...C})),viewport:{x:S,y:v,zoom:j}}},[]),p=P.useCallback(({nodes:b,edges:k})=>{const{nodeInternals:_,getNodes:S,edges:v,hasDefaultNodes:j,hasDefaultEdges:C,onNodesDelete:R,onEdgesDelete:L,onNodesChange:A,onEdgesChange:O}=t.getState(),T=(b||[]).map(G=>G.id),I=(k||[]).map(G=>G.id),M=S().reduce((G,B)=>{const Y=B.parentNode||B.parentId,K=!T.includes(B.id)&&Y&&G.find(W=>W.id===Y);return(typeof B.deletable=="boolean"?B.deletable:!0)&&(T.includes(B.id)||K)&&G.push(B),G},[]),$=v.filter(G=>typeof G.deletable=="boolean"?G.deletable:!0),F=$.filter(G=>I.includes(G.id));if(M||F){const G=ET(M,$),B=[...F,...G],Y=B.reduce((K,H)=>(K.includes(H.id)||K.push(H.id),K),[]);if((C||j)&&(C&&t.setState({edges:v.filter(K=>!Y.includes(K.id))}),j&&(M.forEach(K=>{_.delete(K.id)}),t.setState({nodeInternals:new Map(_)}))),Y.length>0&&(L==null||L(B),O&&O(Y.map(K=>({id:K,type:"remove"})))),M.length>0&&(R==null||R(M),A)){const K=M.map(H=>({id:H.id,type:"remove"}));A(K)}}},[]),g=P.useCallback(b=>{const k=qG(b),_=k?null:t.getState().nodeInternals.get(b.id);return!k&&!_?[null,null,k]:[k?b:O6(_),_,k]},[]),x=P.useCallback((b,k=!0,_)=>{const[S,v,j]=g(b);return S?(_||t.getState().getNodes()).filter(C=>{if(!j&&(C.id===v.id||!C.positionAbsolute))return!1;const R=O6(C),L=Vb(R,S);return k&&L>0||L>=S.width*S.height}):[]},[]),w=P.useCallback((b,k,_=!0)=>{const[S]=g(b);if(!S)return!1;const v=Vb(S,k);return _&&v>0||v>=S.width*S.height},[]);return P.useMemo(()=>({...e,getNodes:r,getNode:n,getEdges:i,getEdge:s,setNodes:a,setEdges:l,addNodes:d,addEdges:h,toObject:f,deleteElements:p,getIntersectingNodes:x,isNodeIntersecting:w}),[e,r,n,i,s,a,l,d,h,f,p,x,w])}const S$={actInsideInputWithModifier:!1};var j$=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const r=Kt(),{deleteElements:n}=E5(),i=pu(e,S$),s=pu(t);P.useEffect(()=>{if(i){const{edges:a,getNodes:l}=r.getState(),d=l().filter(f=>f.selected),h=a.filter(f=>f.selected);n({nodes:d,edges:h}),r.setState({nodesSelectionActive:!1})}},[i]),P.useEffect(()=>{r.setState({multiSelectionActive:s})},[s])};function k$(e){const t=Kt();P.useEffect(()=>{let r;const n=()=>{var s,a;if(!e.current)return;const i=v5(e.current);(i.height===0||i.width===0)&&((a=(s=t.getState()).onError)==null||a.call(s,"004",zi.error004())),t.setState({width:i.width||500,height:i.height||500})};return n(),window.addEventListener("resize",n),e.current&&(r=new ResizeObserver(()=>n()),r.observe(e.current)),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}},[])}const T5={position:"absolute",width:"100%",height:"100%",top:0,left:0},C$=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,fh=e=>({x:e.x,y:e.y,zoom:e.k}),mo=(e,t)=>e.target.closest(`.${t}`),W6=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),K6=e=>{const t=e.ctrlKey&&wf()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},E$=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),T$=({onMove:e,onMoveStart:t,onMoveEnd:r,onPaneContextMenu:n,zoomOnScroll:i=!0,zoomOnPinch:s=!0,panOnScroll:a=!1,panOnScrollSpeed:l=.5,panOnScrollMode:d=ba.Free,zoomOnDoubleClick:h=!0,elementsSelectable:f,panOnDrag:p=!0,defaultViewport:g,translateExtent:x,minZoom:w,maxZoom:b,zoomActivationKeyCode:k,preventScrolling:_=!0,children:S,noWheelClassName:v,noPanClassName:j})=>{const C=P.useRef(),R=Kt(),L=P.useRef(!1),A=P.useRef(!1),O=P.useRef(null),T=P.useRef({x:0,y:0,zoom:0}),{d3Zoom:I,d3Selection:M,d3ZoomHandler:$,userSelectionActive:F}=vt(E$,hr),G=pu(k),B=P.useRef(0),Y=P.useRef(!1),K=P.useRef();return k$(O),P.useEffect(()=>{if(O.current){const H=O.current.getBoundingClientRect(),W=LG().scaleExtent([w,b]).translateExtent(x),D=Pn(O.current).call(W),q=As.translate(g.x,g.y).scale(rl(g.zoom,w,b)),J=[[0,0],[H.width,H.height]],ee=W.constrain()(q,J,x);W.transform(D,ee),W.wheelDelta(K6),R.setState({d3Zoom:W,d3Selection:D,d3ZoomHandler:D.on("wheel.zoom"),transform:[ee.x,ee.y,ee.k],domNode:O.current.closest(".react-flow")})}},[]),P.useEffect(()=>{M&&I&&(a&&!G&&!F?M.on("wheel.zoom",H=>{if(mo(H,v))return!1;H.preventDefault(),H.stopImmediatePropagation();const W=M.property("__zoom").k||1;if(H.ctrlKey&&s){const te=ei(H),oe=K6(H),U=W*Math.pow(2,oe);I.scaleTo(M,U,te,H);return}const D=H.deltaMode===1?20:1;let q=d===ba.Vertical?0:H.deltaX*D,J=d===ba.Horizontal?0:H.deltaY*D;!wf()&&H.shiftKey&&d!==ba.Vertical&&(q=H.deltaY*D,J=0),I.translateBy(M,-(q/W)*l,-(J/W)*l,{internal:!0});const ee=fh(M.property("__zoom")),{onViewportChangeStart:ue,onViewportChange:pe,onViewportChangeEnd:V}=R.getState();clearTimeout(K.current),Y.current||(Y.current=!0,t==null||t(H,ee),ue==null||ue(ee)),Y.current&&(e==null||e(H,ee),pe==null||pe(ee),K.current=setTimeout(()=>{r==null||r(H,ee),V==null||V(ee),Y.current=!1},150))},{passive:!1}):typeof $<"u"&&M.on("wheel.zoom",function(H,W){if(!_&&H.type==="wheel"&&!H.ctrlKey||mo(H,v))return null;H.preventDefault(),$.call(this,H,W)},{passive:!1}))},[F,a,d,M,I,$,G,s,_,v,t,e,r]),P.useEffect(()=>{I&&I.on("start",H=>{var q,J;if(!H.sourceEvent||H.sourceEvent.internal)return null;B.current=(q=H.sourceEvent)==null?void 0:q.button;const{onViewportChangeStart:W}=R.getState(),D=fh(H.transform);L.current=!0,T.current=D,((J=H.sourceEvent)==null?void 0:J.type)==="mousedown"&&R.setState({paneDragging:!0}),W==null||W(D),t==null||t(H.sourceEvent,D)})},[I,t]),P.useEffect(()=>{I&&(F&&!L.current?I.on("zoom",null):F||I.on("zoom",H=>{var D;const{onViewportChange:W}=R.getState();if(R.setState({transform:[H.transform.x,H.transform.y,H.transform.k]}),A.current=!!(n&&W6(p,B.current??0)),(e||W)&&!((D=H.sourceEvent)!=null&&D.internal)){const q=fh(H.transform);W==null||W(q),e==null||e(H.sourceEvent,q)}}))},[F,I,e,p,n]),P.useEffect(()=>{I&&I.on("end",H=>{if(!H.sourceEvent||H.sourceEvent.internal)return null;const{onViewportChangeEnd:W}=R.getState();if(L.current=!1,R.setState({paneDragging:!1}),n&&W6(p,B.current??0)&&!A.current&&n(H.sourceEvent),A.current=!1,(r||W)&&C$(T.current,H.transform)){const D=fh(H.transform);T.current=D,clearTimeout(C.current),C.current=setTimeout(()=>{W==null||W(D),r==null||r(H.sourceEvent,D)},a?150:0)}})},[I,a,p,r,n]),P.useEffect(()=>{I&&I.filter(H=>{const W=G||i,D=s&&H.ctrlKey;if((p===!0||Array.isArray(p)&&p.includes(1))&&H.button===1&&H.type==="mousedown"&&(mo(H,"react-flow__node")||mo(H,"react-flow__edge")))return!0;if(!p&&!W&&!a&&!h&&!s||F||!h&&H.type==="dblclick"||mo(H,v)&&H.type==="wheel"||mo(H,j)&&(H.type!=="wheel"||a&&H.type==="wheel"&&!G)||!s&&H.ctrlKey&&H.type==="wheel"||!W&&!a&&!D&&H.type==="wheel"||!p&&(H.type==="mousedown"||H.type==="touchstart")||Array.isArray(p)&&!p.includes(H.button)&&H.type==="mousedown")return!1;const q=Array.isArray(p)&&p.includes(H.button)||!H.button||H.button<=1;return(!H.ctrlKey||H.type==="wheel")&&q})},[F,I,i,s,a,h,p,f,G]),re.createElement("div",{className:"react-flow__renderer",ref:O,style:T5},S)},P$=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function R$(){const{userSelectionActive:e,userSelectionRect:t}=vt(P$,hr);return e&&t?re.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Y6(e,t){const r=t.parentNode||t.parentId,n=e.find(i=>i.id===r);if(n){const i=t.position.x+t.width-n.width,s=t.position.y+t.height-n.height;if(i>0||s>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,i>0&&(n.style.width+=i),s>0&&(n.style.height+=s),t.position.x<0){const a=Math.abs(t.position.x);n.position.x=n.position.x-a,n.style.width+=a,t.position.x=0}if(t.position.y<0){const a=Math.abs(t.position.y);n.position.y=n.position.y-a,n.style.height+=a,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function VT(e,t){if(e.some(n=>n.type==="reset"))return e.filter(n=>n.type==="reset").map(n=>n.item);const r=e.filter(n=>n.type==="add").map(n=>n.item);return t.reduce((n,i)=>{const s=e.filter(l=>l.id===i.id);if(s.length===0)return n.push(i),n;const a={...i};for(const l of s)if(l)switch(l.type){case"select":{a.selected=l.selected;break}case"position":{typeof l.position<"u"&&(a.position=l.position),typeof l.positionAbsolute<"u"&&(a.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(a.dragging=l.dragging),a.expandParent&&Y6(n,a);break}case"dimensions":{typeof l.dimensions<"u"&&(a.width=l.dimensions.width,a.height=l.dimensions.height),typeof l.updateStyle<"u"&&(a.style={...a.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(a.resizing=l.resizing),a.expandParent&&Y6(n,a);break}case"remove":return n}return n.push(a),n},r)}function HT(e,t){return VT(e,t)}function A$(e,t){return VT(e,t)}const ms=(e,t)=>({id:e,type:"select",selected:t});function Io(e,t){return e.reduce((r,n)=>{const i=t.includes(n.id);return!n.selected&&i?(n.selected=!0,r.push(ms(n.id,!0))):n.selected&&!i&&(n.selected=!1,r.push(ms(n.id,!1))),r},[])}const jg=(e,t)=>r=>{r.target===t.current&&(e==null||e(r))},I$=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),WT=P.memo(({isSelecting:e,selectionMode:t=fu.Full,panOnDrag:r,onSelectionStart:n,onSelectionEnd:i,onPaneClick:s,onPaneContextMenu:a,onPaneScroll:l,onPaneMouseEnter:d,onPaneMouseMove:h,onPaneMouseLeave:f,children:p})=>{const g=P.useRef(null),x=Kt(),w=P.useRef(0),b=P.useRef(0),k=P.useRef(),{userSelectionActive:_,elementsSelectable:S,dragging:v}=vt(I$,hr),j=()=>{x.setState({userSelectionActive:!1,userSelectionRect:null}),w.current=0,b.current=0},C=$=>{s==null||s($),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},R=$=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){$.preventDefault();return}a==null||a($)},L=l?$=>l($):void 0,A=$=>{const{resetSelectedElements:F,domNode:G}=x.getState();if(k.current=G==null?void 0:G.getBoundingClientRect(),!S||!e||$.button!==0||$.target!==g.current||!k.current)return;const{x:B,y:Y}=Is($,k.current);F(),x.setState({userSelectionRect:{width:0,height:0,startX:B,startY:Y,x:B,y:Y}}),n==null||n($)},O=$=>{const{userSelectionRect:F,nodeInternals:G,edges:B,transform:Y,onNodesChange:K,onEdgesChange:H,nodeOrigin:W,getNodes:D}=x.getState();if(!e||!k.current||!F)return;x.setState({userSelectionActive:!0,nodesSelectionActive:!1});const q=Is($,k.current),J=F.startX??0,ee=F.startY??0,ue={...F,x:q.x<J?q.x:J,y:q.y<ee?q.y:ee,width:Math.abs(q.x-J),height:Math.abs(q.y-ee)},pe=D(),V=CT(G,ue,Y,t===fu.Partial,!0,W),te=ET(V,B).map(U=>U.id),oe=V.map(U=>U.id);if(w.current!==oe.length){w.current=oe.length;const U=Io(pe,oe);U.length&&(K==null||K(U))}if(b.current!==te.length){b.current=te.length;const U=Io(B,te);U.length&&(H==null||H(U))}x.setState({userSelectionRect:ue})},T=$=>{if($.button!==0)return;const{userSelectionRect:F}=x.getState();!_&&F&&$.target===g.current&&(C==null||C($)),x.setState({nodesSelectionActive:w.current>0}),j(),i==null||i($)},I=$=>{_&&(x.setState({nodesSelectionActive:w.current>0}),i==null||i($)),j()},M=S&&(e||_);return re.createElement("div",{className:wr(["react-flow__pane",{dragging:v,selection:e}]),onClick:M?void 0:jg(C,g),onContextMenu:jg(R,g),onWheel:jg(L,g),onMouseEnter:M?void 0:d,onMouseDown:M?A:void 0,onMouseMove:M?O:h,onMouseUp:M?T:void 0,onMouseLeave:M?I:f,ref:g,style:T5},p,re.createElement(R$,null))});WT.displayName="Pane";function KT(e,t){const r=e.parentNode||e.parentId;if(!r)return!1;const n=t.get(r);return n?n.selected?!0:KT(n,t):!1}function X6(e,t,r){let n=e;do{if(n!=null&&n.matches(t))return!0;if(n===r.current)return!1;n=n.parentElement}while(n);return!1}function M$(e,t,r,n){return Array.from(e.values()).filter(i=>(i.selected||i.id===n)&&(!i.parentNode||i.parentId||!KT(i,e))&&(i.draggable||t&&typeof i.draggable>"u")).map(i=>{var s,a;return{id:i.id,position:i.position||{x:0,y:0},positionAbsolute:i.positionAbsolute||{x:0,y:0},distance:{x:r.x-(((s=i.positionAbsolute)==null?void 0:s.x)??0),y:r.y-(((a=i.positionAbsolute)==null?void 0:a.y)??0)},delta:{x:0,y:0},extent:i.extent,parentNode:i.parentNode||i.parentId,parentId:i.parentNode||i.parentId,width:i.width,height:i.height,expandParent:i.expandParent}})}function F$(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function YT(e,t,r,n,i=[0,0],s){const a=F$(e,e.extent||n);let l=a;const d=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(d&&e.width&&e.height){const p=r.get(d),{x:g,y:x}=Bo(p,i).positionAbsolute;l=p&&un(g)&&un(x)&&un(p.width)&&un(p.height)?[[g+e.width*i[0],x+e.height*i[1]],[g+p.width-e.width+e.width*i[0],x+p.height-e.height+e.height*i[1]]]:l}else s==null||s("005",zi.error005()),l=a;else if(e.extent&&d&&e.extent!=="parent"){const p=r.get(d),{x:g,y:x}=Bo(p,i).positionAbsolute;l=[[e.extent[0][0]+g,e.extent[0][1]+x],[e.extent[1][0]+g,e.extent[1][1]+x]]}let h={x:0,y:0};if(d){const p=r.get(d);h=Bo(p,i).positionAbsolute}const f=l&&l!=="parent"?y5(t,l):t;return{position:{x:f.x-h.x,y:f.y-h.y},positionAbsolute:f}}function kg({nodeId:e,dragItems:t,nodeInternals:r}){const n=t.map(i=>({...r.get(i.id),position:i.position,positionAbsolute:i.positionAbsolute}));return[e?n.find(i=>i.id===e):n[0],n]}const Q6=(e,t,r,n)=>{const i=t.querySelectorAll(e);if(!i||!i.length)return null;const s=Array.from(i),a=t.getBoundingClientRect(),l={x:a.width*n[0],y:a.height*n[1]};return s.map(d=>{const h=d.getBoundingClientRect();return{id:d.getAttribute("data-handleid"),position:d.getAttribute("data-handlepos"),x:(h.left-a.left-l.x)/r,y:(h.top-a.top-l.y)/r,...v5(d)}})};function cc(e,t,r){return r===void 0?r:n=>{const i=t().nodeInternals.get(e);i&&r(n,{...i})}}function Qb({id:e,store:t,unselect:r=!1,nodeRef:n}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:a,nodeInternals:l,onError:d}=t.getState(),h=l.get(e);if(!h){d==null||d("012",zi.error012(e));return}t.setState({nodesSelectionActive:!1}),h.selected?(r||h.selected&&a)&&(s({nodes:[h],edges:[]}),requestAnimationFrame(()=>{var f;return(f=n==null?void 0:n.current)==null?void 0:f.blur()})):i([e])}function L$(){const e=Kt();return P.useCallback(({sourceEvent:r})=>{const{transform:n,snapGrid:i,snapToGrid:s}=e.getState(),a=r.touches?r.touches[0].clientX:r.clientX,l=r.touches?r.touches[0].clientY:r.clientY,d={x:(a-n[0])/n[2],y:(l-n[1])/n[2]};return{xSnapped:s?i[0]*Math.round(d.x/i[0]):d.x,ySnapped:s?i[1]*Math.round(d.y/i[1]):d.y,...d}},[])}function Cg(e){return(t,r,n)=>e==null?void 0:e(t,n)}function XT({nodeRef:e,disabled:t=!1,noDragClassName:r,handleSelector:n,nodeId:i,isSelectable:s,selectNodesOnDrag:a}){const l=Kt(),[d,h]=P.useState(!1),f=P.useRef([]),p=P.useRef({x:null,y:null}),g=P.useRef(0),x=P.useRef(null),w=P.useRef({x:0,y:0}),b=P.useRef(null),k=P.useRef(!1),_=P.useRef(!1),S=P.useRef(!1),v=L$();return P.useEffect(()=>{if(e!=null&&e.current){const j=Pn(e.current),C=({x:A,y:O})=>{const{nodeInternals:T,onNodeDrag:I,onSelectionDrag:M,updateNodePositions:$,nodeExtent:F,snapGrid:G,snapToGrid:B,nodeOrigin:Y,onError:K}=l.getState();p.current={x:A,y:O};let H=!1,W={x:0,y:0,x2:0,y2:0};if(f.current.length>1&&F){const q=j5(f.current,Y);W=b5(q)}if(f.current=f.current.map(q=>{const J={x:A-q.distance.x,y:O-q.distance.y};B&&(J.x=G[0]*Math.round(J.x/G[0]),J.y=G[1]*Math.round(J.y/G[1]));const ee=[[F[0][0],F[0][1]],[F[1][0],F[1][1]]];f.current.length>1&&F&&!q.extent&&(ee[0][0]=q.positionAbsolute.x-W.x+F[0][0],ee[1][0]=q.positionAbsolute.x+(q.width??0)-W.x2+F[1][0],ee[0][1]=q.positionAbsolute.y-W.y+F[0][1],ee[1][1]=q.positionAbsolute.y+(q.height??0)-W.y2+F[1][1]);const ue=YT(q,J,T,ee,Y,K);return H=H||q.position.x!==ue.position.x||q.position.y!==ue.position.y,q.position=ue.position,q.positionAbsolute=ue.positionAbsolute,q}),!H)return;$(f.current,!0,!0),h(!0);const D=i?I:Cg(M);if(D&&b.current){const[q,J]=kg({nodeId:i,dragItems:f.current,nodeInternals:T});D(b.current,q,J)}},R=()=>{if(!x.current)return;const[A,O]=xT(w.current,x.current);if(A!==0||O!==0){const{transform:T,panBy:I}=l.getState();p.current.x=(p.current.x??0)-A/T[2],p.current.y=(p.current.y??0)-O/T[2],I({x:A,y:O})&&C(p.current)}g.current=requestAnimationFrame(R)},L=A=>{var Y;const{nodeInternals:O,multiSelectionActive:T,nodesDraggable:I,unselectNodesAndEdges:M,onNodeDragStart:$,onSelectionDragStart:F}=l.getState();_.current=!0;const G=i?$:Cg(F);(!a||!s)&&!T&&i&&((Y=O.get(i))!=null&&Y.selected||M()),i&&s&&a&&Qb({id:i,store:l,nodeRef:e});const B=v(A);if(p.current=B,f.current=M$(O,I,B,i),G&&f.current){const[K,H]=kg({nodeId:i,dragItems:f.current,nodeInternals:O});G(A.sourceEvent,K,H)}};if(t)j.on(".drag",null);else{const A=Hz().on("start",O=>{const{domNode:T,nodeDragThreshold:I}=l.getState();I===0&&L(O),S.current=!1;const M=v(O);p.current=M,x.current=(T==null?void 0:T.getBoundingClientRect())||null,w.current=Is(O.sourceEvent,x.current)}).on("drag",O=>{var $,F;const T=v(O),{autoPanOnNodeDrag:I,nodeDragThreshold:M}=l.getState();if(O.sourceEvent.type==="touchmove"&&O.sourceEvent.touches.length>1&&(S.current=!0),!S.current){if(!k.current&&_.current&&I&&(k.current=!0,R()),!_.current){const G=T.xSnapped-((($=p==null?void 0:p.current)==null?void 0:$.x)??0),B=T.ySnapped-(((F=p==null?void 0:p.current)==null?void 0:F.y)??0);Math.sqrt(G*G+B*B)>M&&L(O)}(p.current.x!==T.xSnapped||p.current.y!==T.ySnapped)&&f.current&&_.current&&(b.current=O.sourceEvent,w.current=Is(O.sourceEvent,x.current),C(T))}}).on("end",O=>{if(!(!_.current||S.current)&&(h(!1),k.current=!1,_.current=!1,cancelAnimationFrame(g.current),f.current)){const{updateNodePositions:T,nodeInternals:I,onNodeDragStop:M,onSelectionDragStop:$}=l.getState(),F=i?M:Cg($);if(T(f.current,!1,!1),F){const[G,B]=kg({nodeId:i,dragItems:f.current,nodeInternals:I});F(O.sourceEvent,G,B)}}}).filter(O=>{const T=O.target;return!O.button&&(!r||!X6(T,`.${r}`,e))&&(!n||X6(T,n,e))});return j.call(A),()=>{j.on(".drag",null)}}}},[e,t,r,n,s,l,i,a,v]),d}function QT(){const e=Kt();return P.useCallback(r=>{const{nodeInternals:n,nodeExtent:i,updateNodePositions:s,getNodes:a,snapToGrid:l,snapGrid:d,onError:h,nodesDraggable:f}=e.getState(),p=a().filter(S=>S.selected&&(S.draggable||f&&typeof S.draggable>"u")),g=l?d[0]:5,x=l?d[1]:5,w=r.isShiftPressed?4:1,b=r.x*g*w,k=r.y*x*w,_=p.map(S=>{if(S.positionAbsolute){const v={x:S.positionAbsolute.x+b,y:S.positionAbsolute.y+k};l&&(v.x=d[0]*Math.round(v.x/d[0]),v.y=d[1]*Math.round(v.y/d[1]));const{positionAbsolute:j,position:C}=YT(S,v,n,i,void 0,h);S.position=C,S.positionAbsolute=j}return S});s(_,!0,!1)},[])}const qo={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var uc=e=>{const t=({id:r,type:n,data:i,xPos:s,yPos:a,xPosOrigin:l,yPosOrigin:d,selected:h,onClick:f,onMouseEnter:p,onMouseMove:g,onMouseLeave:x,onContextMenu:w,onDoubleClick:b,style:k,className:_,isDraggable:S,isSelectable:v,isConnectable:j,isFocusable:C,selectNodesOnDrag:R,sourcePosition:L,targetPosition:A,hidden:O,resizeObserver:T,dragHandle:I,zIndex:M,isParent:$,noDragClassName:F,noPanClassName:G,initialized:B,disableKeyboardA11y:Y,ariaLabel:K,rfId:H,hasHandleBounds:W})=>{const D=Kt(),q=P.useRef(null),J=P.useRef(null),ee=P.useRef(L),ue=P.useRef(A),pe=P.useRef(n),V=v||S||f||p||g||x,te=QT(),oe=cc(r,D.getState,p),U=cc(r,D.getState,g),X=cc(r,D.getState,x),le=cc(r,D.getState,w),me=cc(r,D.getState,b),ye=fe=>{const{nodeDragThreshold:ge}=D.getState();if(v&&(!R||!S||ge>0)&&Qb({id:r,store:D,nodeRef:q}),f){const bt=D.getState().nodeInternals.get(r);bt&&f(fe,{...bt})}},ae=fe=>{if(!Hb(fe)&&!Y)if(yT.includes(fe.key)&&v){const ge=fe.key==="Escape";Qb({id:r,store:D,unselect:ge,nodeRef:q})}else S&&h&&Object.prototype.hasOwnProperty.call(qo,fe.key)&&(D.setState({ariaLiveMessage:`Moved selected node ${fe.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~a}`}),te({x:qo[fe.key].x,y:qo[fe.key].y,isShiftPressed:fe.shiftKey}))};P.useEffect(()=>()=>{J.current&&(T==null||T.unobserve(J.current),J.current=null)},[]),P.useEffect(()=>{if(q.current&&!O){const fe=q.current;(!B||!W||J.current!==fe)&&(J.current&&(T==null||T.unobserve(J.current)),T==null||T.observe(fe),J.current=fe)}},[O,B,W]),P.useEffect(()=>{const fe=pe.current!==n,ge=ee.current!==L,bt=ue.current!==A;q.current&&(fe||ge||bt)&&(fe&&(pe.current=n),ge&&(ee.current=L),bt&&(ue.current=A),D.getState().updateNodeDimensions([{id:r,nodeElement:q.current,forceUpdate:!0}]))},[r,n,L,A]);const Fe=XT({nodeRef:q,disabled:O||!S,noDragClassName:F,handleSelector:I,nodeId:r,isSelectable:v,selectNodesOnDrag:R});return O?null:re.createElement("div",{className:wr(["react-flow__node",`react-flow__node-${n}`,{[G]:S},_,{selected:h,selectable:v,parent:$,dragging:Fe}]),ref:q,style:{zIndex:M,transform:`translate(${l}px,${d}px)`,pointerEvents:V?"all":"none",visibility:B?"visible":"hidden",...k},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:oe,onMouseMove:U,onMouseLeave:X,onContextMenu:le,onClick:ye,onDoubleClick:me,onKeyDown:C?ae:void 0,tabIndex:C?0:void 0,role:C?"button":void 0,"aria-describedby":Y?void 0:`${UT}-${H}`,"aria-label":K},re.createElement(QG,{value:r},re.createElement(e,{id:r,data:i,type:n,xPos:s,yPos:a,selected:h,isConnectable:j,sourcePosition:L,targetPosition:A,dragging:Fe,dragHandle:I,zIndex:M})))};return t.displayName="NodeWrapper",P.memo(t)};const O$=e=>{const t=e.getNodes().filter(r=>r.selected);return{...j5(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function D$({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:r}){const n=Kt(),{width:i,height:s,x:a,y:l,transformString:d,userSelectionActive:h}=vt(O$,hr),f=QT(),p=P.useRef(null);if(P.useEffect(()=>{var w;r||(w=p.current)==null||w.focus({preventScroll:!0})},[r]),XT({nodeRef:p}),h||!i||!s)return null;const g=e?w=>{const b=n.getState().getNodes().filter(k=>k.selected);e(w,b)}:void 0,x=w=>{Object.prototype.hasOwnProperty.call(qo,w.key)&&f({x:qo[w.key].x,y:qo[w.key].y,isShiftPressed:w.shiftKey})};return re.createElement("div",{className:wr(["react-flow__nodesselection","react-flow__container",t]),style:{transform:d}},re.createElement("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:g,tabIndex:r?void 0:-1,onKeyDown:r?void 0:x,style:{width:i,height:s,top:l,left:a}}))}var z$=P.memo(D$);const U$=e=>e.nodesSelectionActive,ZT=({children:e,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:a,deleteKeyCode:l,onMove:d,onMoveStart:h,onMoveEnd:f,selectionKeyCode:p,selectionOnDrag:g,selectionMode:x,onSelectionStart:w,onSelectionEnd:b,multiSelectionKeyCode:k,panActivationKeyCode:_,zoomActivationKeyCode:S,elementsSelectable:v,zoomOnScroll:j,zoomOnPinch:C,panOnScroll:R,panOnScrollSpeed:L,panOnScrollMode:A,zoomOnDoubleClick:O,panOnDrag:T,defaultViewport:I,translateExtent:M,minZoom:$,maxZoom:F,preventScrolling:G,onSelectionContextMenu:B,noWheelClassName:Y,noPanClassName:K,disableKeyboardA11y:H})=>{const W=vt(U$),D=pu(p),q=pu(_),J=q||T,ee=q||R,ue=D||g&&J!==!0;return j$({deleteKeyCode:l,multiSelectionKeyCode:k}),re.createElement(T$,{onMove:d,onMoveStart:h,onMoveEnd:f,onPaneContextMenu:s,elementsSelectable:v,zoomOnScroll:j,zoomOnPinch:C,panOnScroll:ee,panOnScrollSpeed:L,panOnScrollMode:A,zoomOnDoubleClick:O,panOnDrag:!D&&J,defaultViewport:I,translateExtent:M,minZoom:$,maxZoom:F,zoomActivationKeyCode:S,preventScrolling:G,noWheelClassName:Y,noPanClassName:K},re.createElement(WT,{onSelectionStart:w,onSelectionEnd:b,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:a,panOnDrag:J,isSelecting:!!ue,selectionMode:x},e,W&&re.createElement(z$,{onSelectionContextMenu:B,noPanClassName:K,disableKeyboardA11y:H})))};ZT.displayName="FlowRenderer";var G$=P.memo(ZT);function $$(e){return vt(P.useCallback(r=>e?CT(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[e]))}function B$(e){const t={input:uc(e.input||LT),default:uc(e.default||Xb),output:uc(e.output||DT),group:uc(e.group||C5)},r={},n=Object.keys(e).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,s)=>(i[s]=uc(e[s]||Xb),i),r);return{...t,...n}}const q$=({x:e,y:t,width:r,height:n,origin:i})=>!r||!n?{x:e,y:t}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:e,y:t}:{x:e-r*i[0],y:t-n*i[1]},V$=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),JT=e=>{const{nodesDraggable:t,nodesConnectable:r,nodesFocusable:n,elementsSelectable:i,updateNodeDimensions:s,onError:a}=vt(V$,hr),l=$$(e.onlyRenderVisibleElements),d=P.useRef(),h=P.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const f=new ResizeObserver(p=>{const g=p.map(x=>({id:x.target.getAttribute("data-id"),nodeElement:x.target,forceUpdate:!0}));s(g)});return d.current=f,f},[]);return P.useEffect(()=>()=>{var f;(f=d==null?void 0:d.current)==null||f.disconnect()},[]),re.createElement("div",{className:"react-flow__nodes",style:T5},l.map(f=>{var C,R,L;let p=f.type||"default";e.nodeTypes[p]||(a==null||a("003",zi.error003(p)),p="default");const g=e.nodeTypes[p]||e.nodeTypes.default,x=!!(f.draggable||t&&typeof f.draggable>"u"),w=!!(f.selectable||i&&typeof f.selectable>"u"),b=!!(f.connectable||r&&typeof f.connectable>"u"),k=!!(f.focusable||n&&typeof f.focusable>"u"),_=e.nodeExtent?y5(f.positionAbsolute,e.nodeExtent):f.positionAbsolute,S=(_==null?void 0:_.x)??0,v=(_==null?void 0:_.y)??0,j=q$({x:S,y:v,width:f.width??0,height:f.height??0,origin:e.nodeOrigin});return re.createElement(g,{key:f.id,id:f.id,className:f.className,style:f.style,type:p,data:f.data,sourcePosition:f.sourcePosition||Ne.Bottom,targetPosition:f.targetPosition||Ne.Top,hidden:f.hidden,xPos:S,yPos:v,xPosOrigin:j.x,yPosOrigin:j.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!f.selected,isDraggable:x,isSelectable:w,isConnectable:b,isFocusable:k,resizeObserver:h,dragHandle:f.dragHandle,zIndex:((C=f[_t])==null?void 0:C.z)??0,isParent:!!((R=f[_t])!=null&&R.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!f.width&&!!f.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:f.ariaLabel,hasHandleBounds:!!((L=f[_t])!=null&&L.handleBounds)})}))};JT.displayName="NodeRenderer";var H$=P.memo(JT);const W$=(e,t,r)=>r===Ne.Left?e-t:r===Ne.Right?e+t:e,K$=(e,t,r)=>r===Ne.Top?e-t:r===Ne.Bottom?e+t:e,Z6="react-flow__edgeupdater",J6=({position:e,centerX:t,centerY:r,radius:n=10,onMouseDown:i,onMouseEnter:s,onMouseOut:a,type:l})=>re.createElement("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:a,className:wr([Z6,`${Z6}-${l}`]),cx:W$(t,n,e),cy:K$(r,n,e),r:n,stroke:"transparent",fill:"transparent"}),Y$=()=>!0;var go=e=>{const t=({id:r,className:n,type:i,data:s,onClick:a,onEdgeDoubleClick:l,selected:d,animated:h,label:f,labelStyle:p,labelShowBg:g,labelBgStyle:x,labelBgPadding:w,labelBgBorderRadius:b,style:k,source:_,target:S,sourceX:v,sourceY:j,targetX:C,targetY:R,sourcePosition:L,targetPosition:A,elementsSelectable:O,hidden:T,sourceHandleId:I,targetHandleId:M,onContextMenu:$,onMouseEnter:F,onMouseMove:G,onMouseLeave:B,reconnectRadius:Y,onReconnect:K,onReconnectStart:H,onReconnectEnd:W,markerEnd:D,markerStart:q,rfId:J,ariaLabel:ee,isFocusable:ue,isReconnectable:pe,pathOptions:V,interactionWidth:te,disableKeyboardA11y:oe})=>{const U=P.useRef(null),[X,le]=P.useState(!1),[me,ye]=P.useState(!1),ae=Kt(),Fe=P.useMemo(()=>`url('#${Kb(q,J)}')`,[q,J]),fe=P.useMemo(()=>`url('#${Kb(D,J)}')`,[D,J]);if(T)return null;const ge=Pt=>{var Lr;const{edges:rr,addSelectedEdges:Gt,unselectNodesAndEdges:Xt,multiSelectionActive:di}=ae.getState(),vn=rr.find(Zs=>Zs.id===r);vn&&(O&&(ae.setState({nodesSelectionActive:!1}),vn.selected&&di?(Xt({nodes:[],edges:[vn]}),(Lr=U.current)==null||Lr.blur()):Gt([r])),a&&a(Pt,vn))},bt=lc(r,ae.getState,l),pr=lc(r,ae.getState,$),Yr=lc(r,ae.getState,F),Yt=lc(r,ae.getState,G),ht=lc(r,ae.getState,B),Tt=(Pt,rr)=>{if(Pt.button!==0)return;const{edges:Gt,isValidConnection:Xt}=ae.getState(),di=rr?S:_,vn=(rr?M:I)||null,Lr=rr?"target":"source",Zs=Xt||Y$,Sl=rr,Js=Gt.find(hi=>hi.id===r);ye(!0),H==null||H(Pt,Js,Lr);const jl=hi=>{ye(!1),W==null||W(hi,Js,Lr)};AT({event:Pt,handleId:vn,nodeId:di,onConnect:hi=>K==null?void 0:K(Js,hi),isTarget:Sl,getState:ae.getState,setState:ae.setState,isValidConnection:Zs,edgeUpdaterType:Lr,onReconnectEnd:jl})},Fr=Pt=>Tt(Pt,!0),gn=Pt=>Tt(Pt,!1),Xr=()=>le(!0),mr=()=>le(!1),xn=!O&&!a,Gn=Pt=>{var rr;if(!oe&&yT.includes(Pt.key)&&O){const{unselectNodesAndEdges:Gt,addSelectedEdges:Xt,edges:di}=ae.getState();Pt.key==="Escape"?((rr=U.current)==null||rr.blur(),Gt({edges:[di.find(Lr=>Lr.id===r)]})):Xt([r])}};return re.createElement("g",{className:wr(["react-flow__edge",`react-flow__edge-${i}`,n,{selected:d,animated:h,inactive:xn,updating:X}]),onClick:ge,onDoubleClick:bt,onContextMenu:pr,onMouseEnter:Yr,onMouseMove:Yt,onMouseLeave:ht,onKeyDown:ue?Gn:void 0,tabIndex:ue?0:void 0,role:ue?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":ee===null?void 0:ee||`Edge from ${_} to ${S}`,"aria-describedby":ue?`${GT}-${J}`:void 0,ref:U},!me&&re.createElement(e,{id:r,source:_,target:S,selected:d,animated:h,label:f,labelStyle:p,labelShowBg:g,labelBgStyle:x,labelBgPadding:w,labelBgBorderRadius:b,data:s,style:k,sourceX:v,sourceY:j,targetX:C,targetY:R,sourcePosition:L,targetPosition:A,sourceHandleId:I,targetHandleId:M,markerStart:Fe,markerEnd:fe,pathOptions:V,interactionWidth:te}),pe&&re.createElement(re.Fragment,null,(pe==="source"||pe===!0)&&re.createElement(J6,{position:L,centerX:v,centerY:j,radius:Y,onMouseDown:Fr,onMouseEnter:Xr,onMouseOut:mr,type:"source"}),(pe==="target"||pe===!0)&&re.createElement(J6,{position:A,centerX:C,centerY:R,radius:Y,onMouseDown:gn,onMouseEnter:Xr,onMouseOut:mr,type:"target"})))};return t.displayName="EdgeWrapper",P.memo(t)};function X$(e){const t={default:go(e.default||_f),straight:go(e.bezier||N5),step:go(e.step||_5),smoothstep:go(e.step||ip),simplebezier:go(e.simplebezier||w5)},r={},n=Object.keys(e).filter(i=>!["default","bezier"].includes(i)).reduce((i,s)=>(i[s]=go(e[s]||_f),i),r);return{...t,...n}}function eN(e,t,r=null){const n=((r==null?void 0:r.x)||0)+t.x,i=((r==null?void 0:r.y)||0)+t.y,s=(r==null?void 0:r.width)||t.width,a=(r==null?void 0:r.height)||t.height;switch(e){case Ne.Top:return{x:n+s/2,y:i};case Ne.Right:return{x:n+s,y:i+a/2};case Ne.Bottom:return{x:n+s/2,y:i+a};case Ne.Left:return{x:n,y:i+a/2}}}function tN(e,t){return e?e.length===1||!t?e[0]:t&&e.find(r=>r.id===t)||null:null}const Q$=(e,t,r,n,i,s)=>{const a=eN(r,e,t),l=eN(s,n,i);return{sourceX:a.x,sourceY:a.y,targetX:l.x,targetY:l.y}};function Z$({sourcePos:e,targetPos:t,sourceWidth:r,sourceHeight:n,targetWidth:i,targetHeight:s,width:a,height:l,transform:d}){const h={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+r,t.x+i),y2:Math.max(e.y+n,t.y+s)};h.x===h.x2&&(h.x2+=1),h.y===h.y2&&(h.y2+=1);const f=b5({x:(0-d[0])/d[2],y:(0-d[1])/d[2],width:a/d[2],height:l/d[2]}),p=Math.max(0,Math.min(f.x2,h.x2)-Math.max(f.x,h.x)),g=Math.max(0,Math.min(f.y2,h.y2)-Math.max(f.y,h.y));return Math.ceil(p*g)>0}function rN(e){var n,i,s,a,l;const t=((n=e==null?void 0:e[_t])==null?void 0:n.handleBounds)||null,r=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.x)||0,y:((l=e==null?void 0:e.positionAbsolute)==null?void 0:l.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!r]}const J$=[{level:0,isMaxLevel:!0,edges:[]}];function eB(e,t,r=!1){let n=-1;const i=e.reduce((a,l)=>{var f,p;const d=un(l.zIndex);let h=d?l.zIndex:0;if(r){const g=t.get(l.target),x=t.get(l.source),w=l.selected||(g==null?void 0:g.selected)||(x==null?void 0:x.selected),b=Math.max(((f=x==null?void 0:x[_t])==null?void 0:f.z)||0,((p=g==null?void 0:g[_t])==null?void 0:p.z)||0,1e3);h=(d?l.zIndex:0)+(w?b:0)}return a[h]?a[h].push(l):a[h]=[l],n=h>n?h:n,a},{}),s=Object.entries(i).map(([a,l])=>{const d=+a;return{edges:l,level:d,isMaxLevel:d===n}});return s.length===0?J$:s}function tB(e,t,r){const n=vt(P.useCallback(i=>e?i.edges.filter(s=>{const a=t.get(s.source),l=t.get(s.target);return(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&Z$({sourcePos:a.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:a.width,sourceHeight:a.height,targetWidth:l.width,targetHeight:l.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[e,t]));return eB(n,t,r)}const rB=({color:e="none",strokeWidth:t=1})=>re.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),nB=({color:e="none",strokeWidth:t=1})=>re.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),nN={[nl.Arrow]:rB,[nl.ArrowClosed]:nB};function iB(e){const t=Kt();return P.useMemo(()=>{var i,s;return Object.prototype.hasOwnProperty.call(nN,e)?nN[e]:((s=(i=t.getState()).onError)==null||s.call(i,"009",zi.error009(e)),null)},[e])}const sB=({id:e,type:t,color:r,width:n=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:a,orient:l="auto-start-reverse"})=>{const d=iB(t);return d?re.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${n}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0"},re.createElement(d,{color:r,strokeWidth:a})):null},aB=({defaultColor:e,rfId:t})=>r=>{const n=[];return r.edges.reduce((i,s)=>([s.markerStart,s.markerEnd].forEach(a=>{if(a&&typeof a=="object"){const l=Kb(a,t);n.includes(l)||(i.push({id:l,color:a.color||e,...a}),n.push(l))}}),i),[]).sort((i,s)=>i.id.localeCompare(s.id))},eP=({defaultColor:e,rfId:t})=>{const r=vt(P.useCallback(aB({defaultColor:e,rfId:t}),[e,t]),(n,i)=>!(n.length!==i.length||n.some((s,a)=>s.id!==i[a].id)));return re.createElement("defs",null,r.map(n=>re.createElement(sB,{id:n.id,key:n.id,type:n.type,color:n.color,width:n.width,height:n.height,markerUnits:n.markerUnits,strokeWidth:n.strokeWidth,orient:n.orient})))};eP.displayName="MarkerDefinitions";var oB=P.memo(eP);const lB=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),tP=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:r,rfId:n,edgeTypes:i,noPanClassName:s,onEdgeContextMenu:a,onEdgeMouseEnter:l,onEdgeMouseMove:d,onEdgeMouseLeave:h,onEdgeClick:f,onEdgeDoubleClick:p,onReconnect:g,onReconnectStart:x,onReconnectEnd:w,reconnectRadius:b,children:k,disableKeyboardA11y:_})=>{const{edgesFocusable:S,edgesUpdatable:v,elementsSelectable:j,width:C,height:R,connectionMode:L,nodeInternals:A,onError:O}=vt(lB,hr),T=tB(t,A,r);return C?re.createElement(re.Fragment,null,T.map(({level:I,edges:M,isMaxLevel:$})=>re.createElement("svg",{key:I,style:{zIndex:I},width:C,height:R,className:"react-flow__edges react-flow__container"},$&&re.createElement(oB,{defaultColor:e,rfId:n}),re.createElement("g",null,M.map(F=>{const[G,B,Y]=rN(A.get(F.source)),[K,H,W]=rN(A.get(F.target));if(!Y||!W)return null;let D=F.type||"default";i[D]||(O==null||O("011",zi.error011(D)),D="default");const q=i[D]||i.default,J=L===Aa.Strict?H.target:(H.target??[]).concat(H.source??[]),ee=tN(B.source,F.sourceHandle),ue=tN(J,F.targetHandle),pe=(ee==null?void 0:ee.position)||Ne.Bottom,V=(ue==null?void 0:ue.position)||Ne.Top,te=!!(F.focusable||S&&typeof F.focusable>"u"),oe=F.reconnectable||F.updatable,U=typeof g<"u"&&(oe||v&&typeof oe>"u");if(!ee||!ue)return O==null||O("008",zi.error008(ee,F)),null;const{sourceX:X,sourceY:le,targetX:me,targetY:ye}=Q$(G,ee,pe,K,ue,V);return re.createElement(q,{key:F.id,id:F.id,className:wr([F.className,s]),type:D,data:F.data,selected:!!F.selected,animated:!!F.animated,hidden:!!F.hidden,label:F.label,labelStyle:F.labelStyle,labelShowBg:F.labelShowBg,labelBgStyle:F.labelBgStyle,labelBgPadding:F.labelBgPadding,labelBgBorderRadius:F.labelBgBorderRadius,style:F.style,source:F.source,target:F.target,sourceHandleId:F.sourceHandle,targetHandleId:F.targetHandle,markerEnd:F.markerEnd,markerStart:F.markerStart,sourceX:X,sourceY:le,targetX:me,targetY:ye,sourcePosition:pe,targetPosition:V,elementsSelectable:j,onContextMenu:a,onMouseEnter:l,onMouseMove:d,onMouseLeave:h,onClick:f,onEdgeDoubleClick:p,onReconnect:g,onReconnectStart:x,onReconnectEnd:w,reconnectRadius:b,rfId:n,ariaLabel:F.ariaLabel,isFocusable:te,isReconnectable:U,pathOptions:"pathOptions"in F?F.pathOptions:void 0,interactionWidth:F.interactionWidth,disableKeyboardA11y:_})})))),k):null};tP.displayName="EdgeRenderer";var cB=P.memo(tP);const uB=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function dB({children:e}){const t=vt(uB);return re.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function hB(e){const t=E5(),r=P.useRef(!1);P.useEffect(()=>{!r.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),r.current=!0)},[e,t.viewportInitialized])}const fB={[Ne.Left]:Ne.Right,[Ne.Right]:Ne.Left,[Ne.Top]:Ne.Bottom,[Ne.Bottom]:Ne.Top},rP=({nodeId:e,handleType:t,style:r,type:n=vs.Bezier,CustomComponent:i,connectionStatus:s})=>{var R,L,A;const{fromNode:a,handleId:l,toX:d,toY:h,connectionMode:f}=vt(P.useCallback(O=>({fromNode:O.nodeInternals.get(e),handleId:O.connectionHandleId,toX:(O.connectionPosition.x-O.transform[0])/O.transform[2],toY:(O.connectionPosition.y-O.transform[1])/O.transform[2],connectionMode:O.connectionMode}),[e]),hr),p=(R=a==null?void 0:a[_t])==null?void 0:R.handleBounds;let g=p==null?void 0:p[t];if(f===Aa.Loose&&(g=g||(p==null?void 0:p[t==="source"?"target":"source"])),!a||!g)return null;const x=l?g.find(O=>O.id===l):g[0],w=x?x.x+x.width/2:(a.width??0)/2,b=x?x.y+x.height/2:a.height??0,k=(((L=a.positionAbsolute)==null?void 0:L.x)??0)+w,_=(((A=a.positionAbsolute)==null?void 0:A.y)??0)+b,S=x==null?void 0:x.position,v=S?fB[S]:null;if(!S||!v)return null;if(i)return re.createElement(i,{connectionLineType:n,connectionLineStyle:r,fromNode:a,fromHandle:x,fromX:k,fromY:_,toX:d,toY:h,fromPosition:S,toPosition:v,connectionStatus:s});let j="";const C={sourceX:k,sourceY:_,sourcePosition:S,targetX:d,targetY:h,targetPosition:v};return n===vs.Bezier?[j]=ST(C):n===vs.Step?[j]=Wb({...C,borderRadius:0}):n===vs.SmoothStep?[j]=Wb(C):n===vs.SimpleBezier?[j]=NT(C):j=`M${k},${_} ${d},${h}`,re.createElement("path",{d:j,fill:"none",className:"react-flow__connection-path",style:r})};rP.displayName="ConnectionLine";const pB=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function mB({containerStyle:e,style:t,type:r,component:n}){const{nodeId:i,handleType:s,nodesConnectable:a,width:l,height:d,connectionStatus:h}=vt(pB,hr);return!(i&&s&&l&&a)?null:re.createElement("svg",{style:e,width:l,height:d,className:"react-flow__edges react-flow__connectionline react-flow__container"},re.createElement("g",{className:wr(["react-flow__connection",h])},re.createElement(rP,{nodeId:i,handleType:s,style:t,type:r,CustomComponent:n,connectionStatus:h})))}function iN(e,t){return P.useRef(null),Kt(),P.useMemo(()=>t(e),[e])}const nP=({nodeTypes:e,edgeTypes:t,onMove:r,onMoveStart:n,onMoveEnd:i,onInit:s,onNodeClick:a,onEdgeClick:l,onNodeDoubleClick:d,onEdgeDoubleClick:h,onNodeMouseEnter:f,onNodeMouseMove:p,onNodeMouseLeave:g,onNodeContextMenu:x,onSelectionContextMenu:w,onSelectionStart:b,onSelectionEnd:k,connectionLineType:_,connectionLineStyle:S,connectionLineComponent:v,connectionLineContainerStyle:j,selectionKeyCode:C,selectionOnDrag:R,selectionMode:L,multiSelectionKeyCode:A,panActivationKeyCode:O,zoomActivationKeyCode:T,deleteKeyCode:I,onlyRenderVisibleElements:M,elementsSelectable:$,selectNodesOnDrag:F,defaultViewport:G,translateExtent:B,minZoom:Y,maxZoom:K,preventScrolling:H,defaultMarkerColor:W,zoomOnScroll:D,zoomOnPinch:q,panOnScroll:J,panOnScrollSpeed:ee,panOnScrollMode:ue,zoomOnDoubleClick:pe,panOnDrag:V,onPaneClick:te,onPaneMouseEnter:oe,onPaneMouseMove:U,onPaneMouseLeave:X,onPaneScroll:le,onPaneContextMenu:me,onEdgeContextMenu:ye,onEdgeMouseEnter:ae,onEdgeMouseMove:Fe,onEdgeMouseLeave:fe,onReconnect:ge,onReconnectStart:bt,onReconnectEnd:pr,reconnectRadius:Yr,noDragClassName:Yt,noWheelClassName:ht,noPanClassName:Tt,elevateEdgesOnSelect:Fr,disableKeyboardA11y:gn,nodeOrigin:Xr,nodeExtent:mr,rfId:xn})=>{const Gn=iN(e,B$),Pt=iN(t,X$);return hB(s),re.createElement(G$,{onPaneClick:te,onPaneMouseEnter:oe,onPaneMouseMove:U,onPaneMouseLeave:X,onPaneContextMenu:me,onPaneScroll:le,deleteKeyCode:I,selectionKeyCode:C,selectionOnDrag:R,selectionMode:L,onSelectionStart:b,onSelectionEnd:k,multiSelectionKeyCode:A,panActivationKeyCode:O,zoomActivationKeyCode:T,elementsSelectable:$,onMove:r,onMoveStart:n,onMoveEnd:i,zoomOnScroll:D,zoomOnPinch:q,zoomOnDoubleClick:pe,panOnScroll:J,panOnScrollSpeed:ee,panOnScrollMode:ue,panOnDrag:V,defaultViewport:G,translateExtent:B,minZoom:Y,maxZoom:K,onSelectionContextMenu:w,preventScrolling:H,noDragClassName:Yt,noWheelClassName:ht,noPanClassName:Tt,disableKeyboardA11y:gn},re.createElement(dB,null,re.createElement(cB,{edgeTypes:Pt,onEdgeClick:l,onEdgeDoubleClick:h,onlyRenderVisibleElements:M,onEdgeContextMenu:ye,onEdgeMouseEnter:ae,onEdgeMouseMove:Fe,onEdgeMouseLeave:fe,onReconnect:ge,onReconnectStart:bt,onReconnectEnd:pr,reconnectRadius:Yr,defaultMarkerColor:W,noPanClassName:Tt,elevateEdgesOnSelect:!!Fr,disableKeyboardA11y:gn,rfId:xn},re.createElement(mB,{style:S,type:_,component:v,containerStyle:j})),re.createElement("div",{className:"react-flow__edgelabel-renderer"}),re.createElement(H$,{nodeTypes:Gn,onNodeClick:a,onNodeDoubleClick:d,onNodeMouseEnter:f,onNodeMouseMove:p,onNodeMouseLeave:g,onNodeContextMenu:x,selectNodesOnDrag:F,onlyRenderVisibleElements:M,noPanClassName:Tt,noDragClassName:Yt,disableKeyboardA11y:gn,nodeOrigin:Xr,nodeExtent:mr,rfId:xn})))};nP.displayName="GraphView";var gB=P.memo(nP);const Zb=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],ls={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Zb,nodeExtent:Zb,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Aa.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:VG,isValidConnection:void 0},xB=()=>iD((e,t)=>({...ls,setNodes:r=>{const{nodeInternals:n,nodeOrigin:i,elevateNodesOnSelect:s}=t();e({nodeInternals:Sg(r,n,i,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:n={}}=t();e({edges:r.map(i=>({...n,...i}))})},setDefaultNodesAndEdges:(r,n)=>{const i=typeof r<"u",s=typeof n<"u",a=i?Sg(r,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:a,edges:s?n:[],hasDefaultNodes:i,hasDefaultEdges:s})},updateNodeDimensions:r=>{const{onNodesChange:n,nodeInternals:i,fitViewOnInit:s,fitViewOnInitDone:a,fitViewOnInitOptions:l,domNode:d,nodeOrigin:h}=t(),f=d==null?void 0:d.querySelector(".react-flow__viewport");if(!f)return;const p=window.getComputedStyle(f),{m22:g}=new window.DOMMatrixReadOnly(p.transform),x=r.reduce((b,k)=>{const _=i.get(k.id);if(_!=null&&_.hidden)i.set(_.id,{..._,[_t]:{..._[_t],handleBounds:void 0}});else if(_){const S=v5(k.nodeElement);!!(S.width&&S.height&&(_.width!==S.width||_.height!==S.height||k.forceUpdate))&&(i.set(_.id,{..._,[_t]:{..._[_t],handleBounds:{source:Q6(".source",k.nodeElement,g,h),target:Q6(".target",k.nodeElement,g,h)}},...S}),b.push({id:_.id,type:"dimensions",dimensions:S}))}return b},[]);BT(i,h);const w=a||s&&!a&&qT(t,{initial:!0,...l});e({nodeInternals:new Map(i),fitViewOnInitDone:w}),(x==null?void 0:x.length)>0&&(n==null||n(x))},updateNodePositions:(r,n=!0,i=!1)=>{const{triggerNodeChanges:s}=t(),a=r.map(l=>{const d={id:l.id,type:"position",dragging:i};return n&&(d.positionAbsolute=l.positionAbsolute,d.position=l.position),d});s(a)},triggerNodeChanges:r=>{const{onNodesChange:n,nodeInternals:i,hasDefaultNodes:s,nodeOrigin:a,getNodes:l,elevateNodesOnSelect:d}=t();if(r!=null&&r.length){if(s){const h=HT(r,l()),f=Sg(h,i,a,d);e({nodeInternals:f})}n==null||n(r)}},addSelectedNodes:r=>{const{multiSelectionActive:n,edges:i,getNodes:s}=t();let a,l=null;n?a=r.map(d=>ms(d,!0)):(a=Io(s(),r),l=Io(i,[])),hh({changedNodes:a,changedEdges:l,get:t,set:e})},addSelectedEdges:r=>{const{multiSelectionActive:n,edges:i,getNodes:s}=t();let a,l=null;n?a=r.map(d=>ms(d,!0)):(a=Io(i,r),l=Io(s(),[])),hh({changedNodes:l,changedEdges:a,get:t,set:e})},unselectNodesAndEdges:({nodes:r,edges:n}={})=>{const{edges:i,getNodes:s}=t(),a=r||s(),l=n||i,d=a.map(f=>(f.selected=!1,ms(f.id,!1))),h=l.map(f=>ms(f.id,!1));hh({changedNodes:d,changedEdges:h,get:t,set:e})},setMinZoom:r=>{const{d3Zoom:n,maxZoom:i}=t();n==null||n.scaleExtent([r,i]),e({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:n,minZoom:i}=t();n==null||n.scaleExtent([i,r]),e({maxZoom:r})},setTranslateExtent:r=>{var n;(n=t().d3Zoom)==null||n.translateExtent(r),e({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:n}=t(),s=n().filter(l=>l.selected).map(l=>ms(l.id,!1)),a=r.filter(l=>l.selected).map(l=>ms(l.id,!1));hh({changedNodes:s,changedEdges:a,get:t,set:e})},setNodeExtent:r=>{const{nodeInternals:n}=t();n.forEach(i=>{i.positionAbsolute=y5(i.position,r)}),e({nodeExtent:r,nodeInternals:new Map(n)})},panBy:r=>{const{transform:n,width:i,height:s,d3Zoom:a,d3Selection:l,translateExtent:d}=t();if(!a||!l||!r.x&&!r.y)return!1;const h=As.translate(n[0]+r.x,n[1]+r.y).scale(n[2]),f=[[0,0],[i,s]],p=a==null?void 0:a.constrain()(h,f,d);return a.transform(l,p),n[0]!==p.x||n[1]!==p.y||n[2]!==p.k},cancelConnection:()=>e({connectionNodeId:ls.connectionNodeId,connectionHandleId:ls.connectionHandleId,connectionHandleType:ls.connectionHandleType,connectionStatus:ls.connectionStatus,connectionStartHandle:ls.connectionStartHandle,connectionEndHandle:ls.connectionEndHandle}),reset:()=>e({...ls})}),Object.is),P5=({children:e})=>{const t=P.useRef(null);return t.current||(t.current=xB()),re.createElement(OG,{value:t.current},e)};P5.displayName="ReactFlowProvider";const iP=({children:e})=>P.useContext(np)?re.createElement(re.Fragment,null,e):re.createElement(P5,null,e);iP.displayName="ReactFlowWrapper";const vB={input:LT,default:Xb,output:DT,group:C5},yB={default:_f,straight:N5,step:_5,smoothstep:ip,simplebezier:w5},bB=[0,0],wB=[15,15],_B={x:0,y:0,zoom:1},NB={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},sP=P.forwardRef(({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,className:i,nodeTypes:s=vB,edgeTypes:a=yB,onNodeClick:l,onEdgeClick:d,onInit:h,onMove:f,onMoveStart:p,onMoveEnd:g,onConnect:x,onConnectStart:w,onConnectEnd:b,onClickConnectStart:k,onClickConnectEnd:_,onNodeMouseEnter:S,onNodeMouseMove:v,onNodeMouseLeave:j,onNodeContextMenu:C,onNodeDoubleClick:R,onNodeDragStart:L,onNodeDrag:A,onNodeDragStop:O,onNodesDelete:T,onEdgesDelete:I,onSelectionChange:M,onSelectionDragStart:$,onSelectionDrag:F,onSelectionDragStop:G,onSelectionContextMenu:B,onSelectionStart:Y,onSelectionEnd:K,connectionMode:H=Aa.Strict,connectionLineType:W=vs.Bezier,connectionLineStyle:D,connectionLineComponent:q,connectionLineContainerStyle:J,deleteKeyCode:ee="Backspace",selectionKeyCode:ue="Shift",selectionOnDrag:pe=!1,selectionMode:V=fu.Full,panActivationKeyCode:te="Space",multiSelectionKeyCode:oe=wf()?"Meta":"Control",zoomActivationKeyCode:U=wf()?"Meta":"Control",snapToGrid:X=!1,snapGrid:le=wB,onlyRenderVisibleElements:me=!1,selectNodesOnDrag:ye=!0,nodesDraggable:ae,nodesConnectable:Fe,nodesFocusable:fe,nodeOrigin:ge=bB,edgesFocusable:bt,edgesUpdatable:pr,elementsSelectable:Yr,defaultViewport:Yt=_B,minZoom:ht=.5,maxZoom:Tt=2,translateExtent:Fr=Zb,preventScrolling:gn=!0,nodeExtent:Xr,defaultMarkerColor:mr="#b1b1b7",zoomOnScroll:xn=!0,zoomOnPinch:Gn=!0,panOnScroll:Pt=!1,panOnScrollSpeed:rr=.5,panOnScrollMode:Gt=ba.Free,zoomOnDoubleClick:Xt=!0,panOnDrag:di=!0,onPaneClick:vn,onPaneMouseEnter:Lr,onPaneMouseMove:Zs,onPaneMouseLeave:Sl,onPaneScroll:Js,onPaneContextMenu:jl,children:Uu,onEdgeContextMenu:hi,onEdgeDoubleClick:Gu,onEdgeMouseEnter:$u,onEdgeMouseMove:x0,onEdgeMouseLeave:kl,onEdgeUpdate:Bu,onEdgeUpdateStart:qu,onEdgeUpdateEnd:v0,onReconnect:y0,onReconnectStart:b0,onReconnectEnd:Vu,reconnectRadius:Cl=10,edgeUpdaterRadius:w0=10,onNodesChange:_0,onEdgesChange:Qa,noDragClassName:N0="nodrag",noWheelClassName:S0="nowheel",noPanClassName:Hu="nopan",fitView:j0=!1,fitViewOptions:k0,connectOnClick:C0=!0,attributionPosition:E0,proOptions:T0,defaultEdgeOptions:P0,elevateNodesOnSelect:R0=!0,elevateEdgesOnSelect:A0=!1,disableKeyboardA11y:Wu=!1,autoPanOnConnect:I0=!0,autoPanOnNodeDrag:M0=!0,connectionRadius:El=20,isValidConnection:ea,onError:Tl,style:Pl,id:Ku,nodeDragThreshold:Rl,...Yi},$n)=>{const Ke=Ku||"1";return re.createElement("div",{...Yi,style:{...Pl,...NB},ref:$n,className:wr(["react-flow",i]),"data-testid":"rf__wrapper",id:Ku},re.createElement(iP,null,re.createElement(gB,{onInit:h,onMove:f,onMoveStart:p,onMoveEnd:g,onNodeClick:l,onEdgeClick:d,onNodeMouseEnter:S,onNodeMouseMove:v,onNodeMouseLeave:j,onNodeContextMenu:C,onNodeDoubleClick:R,nodeTypes:s,edgeTypes:a,connectionLineType:W,connectionLineStyle:D,connectionLineComponent:q,connectionLineContainerStyle:J,selectionKeyCode:ue,selectionOnDrag:pe,selectionMode:V,deleteKeyCode:ee,multiSelectionKeyCode:oe,panActivationKeyCode:te,zoomActivationKeyCode:U,onlyRenderVisibleElements:me,selectNodesOnDrag:ye,defaultViewport:Yt,translateExtent:Fr,minZoom:ht,maxZoom:Tt,preventScrolling:gn,zoomOnScroll:xn,zoomOnPinch:Gn,zoomOnDoubleClick:Xt,panOnScroll:Pt,panOnScrollSpeed:rr,panOnScrollMode:Gt,panOnDrag:di,onPaneClick:vn,onPaneMouseEnter:Lr,onPaneMouseMove:Zs,onPaneMouseLeave:Sl,onPaneScroll:Js,onPaneContextMenu:jl,onSelectionContextMenu:B,onSelectionStart:Y,onSelectionEnd:K,onEdgeContextMenu:hi,onEdgeDoubleClick:Gu,onEdgeMouseEnter:$u,onEdgeMouseMove:x0,onEdgeMouseLeave:kl,onReconnect:y0??Bu,onReconnectStart:b0??qu,onReconnectEnd:Vu??v0,reconnectRadius:Cl??w0,defaultMarkerColor:mr,noDragClassName:N0,noWheelClassName:S0,noPanClassName:Hu,elevateEdgesOnSelect:A0,rfId:Ke,disableKeyboardA11y:Wu,nodeOrigin:ge,nodeExtent:Xr}),re.createElement(f$,{nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:x,onConnectStart:w,onConnectEnd:b,onClickConnectStart:k,onClickConnectEnd:_,nodesDraggable:ae,nodesConnectable:Fe,nodesFocusable:fe,edgesFocusable:bt,edgesUpdatable:pr,elementsSelectable:Yr,elevateNodesOnSelect:R0,minZoom:ht,maxZoom:Tt,nodeExtent:Xr,onNodesChange:_0,onEdgesChange:Qa,snapToGrid:X,snapGrid:le,connectionMode:H,translateExtent:Fr,connectOnClick:C0,defaultEdgeOptions:P0,fitView:j0,fitViewOptions:k0,onNodesDelete:T,onEdgesDelete:I,onNodeDragStart:L,onNodeDrag:A,onNodeDragStop:O,onSelectionDrag:F,onSelectionDragStart:$,onSelectionDragStop:G,noPanClassName:Hu,nodeOrigin:ge,rfId:Ke,autoPanOnConnect:I0,autoPanOnNodeDrag:M0,onError:Tl,connectionRadius:El,isValidConnection:ea,nodeDragThreshold:Rl}),re.createElement(d$,{onSelectionChange:M}),Uu,re.createElement(zG,{proOptions:T0,position:E0}),re.createElement(v$,{rfId:Ke,disableKeyboardA11y:Wu})))});sP.displayName="ReactFlow";function aP(e){return t=>{const[r,n]=P.useState(t),i=P.useCallback(s=>n(a=>e(s,a)),[]);return[r,n,i]}}const SB=aP(HT),jB=aP(A$);function kB(){return re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},re.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function CB(){return re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},re.createElement("path",{d:"M0 0h32v4.2H0z"}))}function EB(){return re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},re.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function TB(){return re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},re.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function PB(){return re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},re.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Sc=({children:e,className:t,...r})=>re.createElement("button",{type:"button",className:wr(["react-flow__controls-button",t]),...r},e);Sc.displayName="ControlButton";const RB=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),oP=({style:e,showZoom:t=!0,showFitView:r=!0,showInteractive:n=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:a,onFitView:l,onInteractiveChange:d,className:h,children:f,position:p="bottom-left"})=>{const g=Kt(),[x,w]=P.useState(!1),{isInteractive:b,minZoomReached:k,maxZoomReached:_}=vt(RB,hr),{zoomIn:S,zoomOut:v,fitView:j}=E5();if(P.useEffect(()=>{w(!0)},[]),!x)return null;const C=()=>{S(),s==null||s()},R=()=>{v(),a==null||a()},L=()=>{j(i),l==null||l()},A=()=>{g.setState({nodesDraggable:!b,nodesConnectable:!b,elementsSelectable:!b}),d==null||d(!b)};return re.createElement(gT,{className:wr(["react-flow__controls",h]),position:p,style:e,"data-testid":"rf__controls"},t&&re.createElement(re.Fragment,null,re.createElement(Sc,{onClick:C,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:_},re.createElement(kB,null)),re.createElement(Sc,{onClick:R,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:k},re.createElement(CB,null))),r&&re.createElement(Sc,{className:"react-flow__controls-fitview",onClick:L,title:"fit view","aria-label":"fit view"},re.createElement(EB,null)),n&&re.createElement(Sc,{className:"react-flow__controls-interactive",onClick:A,title:"toggle interactivity","aria-label":"toggle interactivity"},b?re.createElement(PB,null):re.createElement(TB,null)),f)};oP.displayName="Controls";var AB=P.memo(oP),Mn;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Mn||(Mn={}));function IB({color:e,dimensions:t,lineWidth:r}){return re.createElement("path",{stroke:e,strokeWidth:r,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function MB({color:e,radius:t}){return re.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const FB={[Mn.Dots]:"#91919a",[Mn.Lines]:"#eee",[Mn.Cross]:"#e2e2e2"},LB={[Mn.Dots]:1,[Mn.Lines]:1,[Mn.Cross]:6},OB=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function lP({id:e,variant:t=Mn.Dots,gap:r=20,size:n,lineWidth:i=1,offset:s=2,color:a,style:l,className:d}){const h=P.useRef(null),{transform:f,patternId:p}=vt(OB,hr),g=a||FB[t],x=n||LB[t],w=t===Mn.Dots,b=t===Mn.Cross,k=Array.isArray(r)?r:[r,r],_=[k[0]*f[2]||1,k[1]*f[2]||1],S=x*f[2],v=b?[S,S]:_,j=w?[S/s,S/s]:[v[0]/s,v[1]/s];return re.createElement("svg",{className:wr(["react-flow__background",d]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:h,"data-testid":"rf__background"},re.createElement("pattern",{id:p+e,x:f[0]%_[0],y:f[1]%_[1],width:_[0],height:_[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${j[0]},-${j[1]})`},w?re.createElement(MB,{color:g,radius:S/s}):re.createElement(IB,{dimensions:v,color:g,lineWidth:i})),re.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${p+e})`}))}lP.displayName="Background";var DB=P.memo(lP);function R5(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Eg,sN;function zB(){if(sN)return Eg;sN=1;function e(){this.__data__=[],this.size=0}return Eg=e,Eg}var Tg,aN;function hl(){if(aN)return Tg;aN=1;function e(t,r){return t===r||t!==t&&r!==r}return Tg=e,Tg}var Pg,oN;function sp(){if(oN)return Pg;oN=1;var e=hl();function t(r,n){for(var i=r.length;i--;)if(e(r[i][0],n))return i;return-1}return Pg=t,Pg}var Rg,lN;function UB(){if(lN)return Rg;lN=1;var e=sp(),t=Array.prototype,r=t.splice;function n(i){var s=this.__data__,a=e(s,i);if(a<0)return!1;var l=s.length-1;return a==l?s.pop():r.call(s,a,1),--this.size,!0}return Rg=n,Rg}var Ag,cN;function GB(){if(cN)return Ag;cN=1;var e=sp();function t(r){var n=this.__data__,i=e(n,r);return i<0?void 0:n[i][1]}return Ag=t,Ag}var Ig,uN;function $B(){if(uN)return Ig;uN=1;var e=sp();function t(r){return e(this.__data__,r)>-1}return Ig=t,Ig}var Mg,dN;function BB(){if(dN)return Mg;dN=1;var e=sp();function t(r,n){var i=this.__data__,s=e(i,r);return s<0?(++this.size,i.push([r,n])):i[s][1]=n,this}return Mg=t,Mg}var Fg,hN;function ap(){if(hN)return Fg;hN=1;var e=zB(),t=UB(),r=GB(),n=$B(),i=BB();function s(a){var l=-1,d=a==null?0:a.length;for(this.clear();++l<d;){var h=a[l];this.set(h[0],h[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=n,s.prototype.set=i,Fg=s,Fg}var Lg,fN;function qB(){if(fN)return Lg;fN=1;var e=ap();function t(){this.__data__=new e,this.size=0}return Lg=t,Lg}var Og,pN;function VB(){if(pN)return Og;pN=1;function e(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}return Og=e,Og}var Dg,mN;function HB(){if(mN)return Dg;mN=1;function e(t){return this.__data__.get(t)}return Dg=e,Dg}var zg,gN;function WB(){if(gN)return zg;gN=1;function e(t){return this.__data__.has(t)}return zg=e,zg}var Ug,xN;function cP(){if(xN)return Ug;xN=1;var e=typeof bo=="object"&&bo&&bo.Object===Object&&bo;return Ug=e,Ug}var Gg,vN;function Dn(){if(vN)return Gg;vN=1;var e=cP(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return Gg=r,Gg}var $g,yN;function fl(){if(yN)return $g;yN=1;var e=Dn(),t=e.Symbol;return $g=t,$g}var Bg,bN;function KB(){if(bN)return Bg;bN=1;var e=fl(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,i=e?e.toStringTag:void 0;function s(a){var l=r.call(a,i),d=a[i];try{a[i]=void 0;var h=!0}catch{}var f=n.call(a);return h&&(l?a[i]=d:delete a[i]),f}return Bg=s,Bg}var qg,wN;function YB(){if(wN)return qg;wN=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return qg=r,qg}var Vg,_N;function Oa(){if(_N)return Vg;_N=1;var e=fl(),t=KB(),r=YB(),n="[object Null]",i="[object Undefined]",s=e?e.toStringTag:void 0;function a(l){return l==null?l===void 0?i:n:s&&s in Object(l)?t(l):r(l)}return Vg=a,Vg}var Hg,NN;function pn(){if(NN)return Hg;NN=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return Hg=e,Hg}var Wg,SN;function Pu(){if(SN)return Wg;SN=1;var e=Oa(),t=pn(),r="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function a(l){if(!t(l))return!1;var d=e(l);return d==n||d==i||d==r||d==s}return Wg=a,Wg}var Kg,jN;function XB(){if(jN)return Kg;jN=1;var e=Dn(),t=e["__core-js_shared__"];return Kg=t,Kg}var Yg,kN;function QB(){if(kN)return Yg;kN=1;var e=XB(),t=function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!t&&t in n}return Yg=r,Yg}var Xg,CN;function uP(){if(CN)return Xg;CN=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return Xg=r,Xg}var Qg,EN;function ZB(){if(EN)return Qg;EN=1;var e=Pu(),t=QB(),r=pn(),n=uP(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,a=Function.prototype,l=Object.prototype,d=a.toString,h=l.hasOwnProperty,f=RegExp("^"+d.call(h).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(g){if(!r(g)||t(g))return!1;var x=e(g)?f:s;return x.test(n(g))}return Qg=p,Qg}var Zg,TN;function JB(){if(TN)return Zg;TN=1;function e(t,r){return t==null?void 0:t[r]}return Zg=e,Zg}var Jg,PN;function Da(){if(PN)return Jg;PN=1;var e=ZB(),t=JB();function r(n,i){var s=t(n,i);return e(s)?s:void 0}return Jg=r,Jg}var ex,RN;function A5(){if(RN)return ex;RN=1;var e=Da(),t=Dn(),r=e(t,"Map");return ex=r,ex}var tx,AN;function op(){if(AN)return tx;AN=1;var e=Da(),t=e(Object,"create");return tx=t,tx}var rx,IN;function eq(){if(IN)return rx;IN=1;var e=op();function t(){this.__data__=e?e(null):{},this.size=0}return rx=t,rx}var nx,MN;function tq(){if(MN)return nx;MN=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return nx=e,nx}var ix,FN;function rq(){if(FN)return ix;FN=1;var e=op(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function i(s){var a=this.__data__;if(e){var l=a[s];return l===t?void 0:l}return n.call(a,s)?a[s]:void 0}return ix=i,ix}var sx,LN;function nq(){if(LN)return sx;LN=1;var e=op(),t=Object.prototype,r=t.hasOwnProperty;function n(i){var s=this.__data__;return e?s[i]!==void 0:r.call(s,i)}return sx=n,sx}var ax,ON;function iq(){if(ON)return ax;ON=1;var e=op(),t="__lodash_hash_undefined__";function r(n,i){var s=this.__data__;return this.size+=this.has(n)?0:1,s[n]=e&&i===void 0?t:i,this}return ax=r,ax}var ox,DN;function sq(){if(DN)return ox;DN=1;var e=eq(),t=tq(),r=rq(),n=nq(),i=iq();function s(a){var l=-1,d=a==null?0:a.length;for(this.clear();++l<d;){var h=a[l];this.set(h[0],h[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=n,s.prototype.set=i,ox=s,ox}var lx,zN;function aq(){if(zN)return lx;zN=1;var e=sq(),t=ap(),r=A5();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return lx=n,lx}var cx,UN;function oq(){if(UN)return cx;UN=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return cx=e,cx}var ux,GN;function lp(){if(GN)return ux;GN=1;var e=oq();function t(r,n){var i=r.__data__;return e(n)?i[typeof n=="string"?"string":"hash"]:i.map}return ux=t,ux}var dx,$N;function lq(){if($N)return dx;$N=1;var e=lp();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return dx=t,dx}var hx,BN;function cq(){if(BN)return hx;BN=1;var e=lp();function t(r){return e(this,r).get(r)}return hx=t,hx}var fx,qN;function uq(){if(qN)return fx;qN=1;var e=lp();function t(r){return e(this,r).has(r)}return fx=t,fx}var px,VN;function dq(){if(VN)return px;VN=1;var e=lp();function t(r,n){var i=e(this,r),s=i.size;return i.set(r,n),this.size+=i.size==s?0:1,this}return px=t,px}var mx,HN;function I5(){if(HN)return mx;HN=1;var e=aq(),t=lq(),r=cq(),n=uq(),i=dq();function s(a){var l=-1,d=a==null?0:a.length;for(this.clear();++l<d;){var h=a[l];this.set(h[0],h[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=n,s.prototype.set=i,mx=s,mx}var gx,WN;function hq(){if(WN)return gx;WN=1;var e=ap(),t=A5(),r=I5(),n=200;function i(s,a){var l=this.__data__;if(l instanceof e){var d=l.__data__;if(!t||d.length<n-1)return d.push([s,a]),this.size=++l.size,this;l=this.__data__=new r(d)}return l.set(s,a),this.size=l.size,this}return gx=i,gx}var xx,KN;function cp(){if(KN)return xx;KN=1;var e=ap(),t=qB(),r=VB(),n=HB(),i=WB(),s=hq();function a(l){var d=this.__data__=new e(l);this.size=d.size}return a.prototype.clear=t,a.prototype.delete=r,a.prototype.get=n,a.prototype.has=i,a.prototype.set=s,xx=a,xx}var vx,YN;function M5(){if(YN)return vx;YN=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i&&r(t[n],n,t)!==!1;);return t}return vx=e,vx}var yx,XN;function dP(){if(XN)return yx;XN=1;var e=Da(),t=function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}}();return yx=t,yx}var bx,QN;function up(){if(QN)return bx;QN=1;var e=dP();function t(r,n,i){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[n]=i}return bx=t,bx}var wx,ZN;function dp(){if(ZN)return wx;ZN=1;var e=up(),t=hl(),r=Object.prototype,n=r.hasOwnProperty;function i(s,a,l){var d=s[a];(!(n.call(s,a)&&t(d,l))||l===void 0&&!(a in s))&&e(s,a,l)}return wx=i,wx}var _x,JN;function Ru(){if(JN)return _x;JN=1;var e=dp(),t=up();function r(n,i,s,a){var l=!s;s||(s={});for(var d=-1,h=i.length;++d<h;){var f=i[d],p=a?a(s[f],n[f],f,s,n):void 0;p===void 0&&(p=n[f]),l?t(s,f,p):e(s,f,p)}return s}return _x=r,_x}var Nx,e8;function fq(){if(e8)return Nx;e8=1;function e(t,r){for(var n=-1,i=Array(t);++n<t;)i[n]=r(n);return i}return Nx=e,Nx}var Sx,t8;function li(){if(t8)return Sx;t8=1;function e(t){return t!=null&&typeof t=="object"}return Sx=e,Sx}var jx,r8;function pq(){if(r8)return jx;r8=1;var e=Oa(),t=li(),r="[object Arguments]";function n(i){return t(i)&&e(i)==r}return jx=n,jx}var kx,n8;function Au(){if(n8)return kx;n8=1;var e=pq(),t=li(),r=Object.prototype,n=r.hasOwnProperty,i=r.propertyIsEnumerable,s=e(function(){return arguments}())?e:function(a){return t(a)&&n.call(a,"callee")&&!i.call(a,"callee")};return kx=s,kx}var Cx,i8;function It(){if(i8)return Cx;i8=1;var e=Array.isArray;return Cx=e,Cx}var jc={exports:{}},Ex,s8;function mq(){if(s8)return Ex;s8=1;function e(){return!1}return Ex=e,Ex}jc.exports;var a8;function pl(){return a8||(a8=1,function(e,t){var r=Dn(),n=mq(),i=t&&!t.nodeType&&t,s=i&&!0&&e&&!e.nodeType&&e,a=s&&s.exports===i,l=a?r.Buffer:void 0,d=l?l.isBuffer:void 0,h=d||n;e.exports=h}(jc,jc.exports)),jc.exports}var Tx,o8;function hp(){if(o8)return Tx;o8=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,i){var s=typeof n;return i=i??e,!!i&&(s=="number"||s!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<i}return Tx=r,Tx}var Px,l8;function F5(){if(l8)return Px;l8=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return Px=t,Px}var Rx,c8;function gq(){if(c8)return Rx;c8=1;var e=Oa(),t=F5(),r=li(),n="[object Arguments]",i="[object Array]",s="[object Boolean]",a="[object Date]",l="[object Error]",d="[object Function]",h="[object Map]",f="[object Number]",p="[object Object]",g="[object RegExp]",x="[object Set]",w="[object String]",b="[object WeakMap]",k="[object ArrayBuffer]",_="[object DataView]",S="[object Float32Array]",v="[object Float64Array]",j="[object Int8Array]",C="[object Int16Array]",R="[object Int32Array]",L="[object Uint8Array]",A="[object Uint8ClampedArray]",O="[object Uint16Array]",T="[object Uint32Array]",I={};I[S]=I[v]=I[j]=I[C]=I[R]=I[L]=I[A]=I[O]=I[T]=!0,I[n]=I[i]=I[k]=I[s]=I[_]=I[a]=I[l]=I[d]=I[h]=I[f]=I[p]=I[g]=I[x]=I[w]=I[b]=!1;function M($){return r($)&&t($.length)&&!!I[e($)]}return Rx=M,Rx}var Ax,u8;function fp(){if(u8)return Ax;u8=1;function e(t){return function(r){return t(r)}}return Ax=e,Ax}var kc={exports:{}};kc.exports;var d8;function L5(){return d8||(d8=1,function(e,t){var r=cP(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===n,a=s&&r.process,l=function(){try{var d=i&&i.require&&i.require("util").types;return d||a&&a.binding&&a.binding("util")}catch{}}();e.exports=l}(kc,kc.exports)),kc.exports}var Ix,h8;function Iu(){if(h8)return Ix;h8=1;var e=gq(),t=fp(),r=L5(),n=r&&r.isTypedArray,i=n?t(n):e;return Ix=i,Ix}var Mx,f8;function hP(){if(f8)return Mx;f8=1;var e=fq(),t=Au(),r=It(),n=pl(),i=hp(),s=Iu(),a=Object.prototype,l=a.hasOwnProperty;function d(h,f){var p=r(h),g=!p&&t(h),x=!p&&!g&&n(h),w=!p&&!g&&!x&&s(h),b=p||g||x||w,k=b?e(h.length,String):[],_=k.length;for(var S in h)(f||l.call(h,S))&&!(b&&(S=="length"||x&&(S=="offset"||S=="parent")||w&&(S=="buffer"||S=="byteLength"||S=="byteOffset")||i(S,_)))&&k.push(S);return k}return Mx=d,Mx}var Fx,p8;function pp(){if(p8)return Fx;p8=1;var e=Object.prototype;function t(r){var n=r&&r.constructor,i=typeof n=="function"&&n.prototype||e;return r===i}return Fx=t,Fx}var Lx,m8;function fP(){if(m8)return Lx;m8=1;function e(t,r){return function(n){return t(r(n))}}return Lx=e,Lx}var Ox,g8;function xq(){if(g8)return Ox;g8=1;var e=fP(),t=e(Object.keys,Object);return Ox=t,Ox}var Dx,x8;function O5(){if(x8)return Dx;x8=1;var e=pp(),t=xq(),r=Object.prototype,n=r.hasOwnProperty;function i(s){if(!e(s))return t(s);var a=[];for(var l in Object(s))n.call(s,l)&&l!="constructor"&&a.push(l);return a}return Dx=i,Dx}var zx,v8;function Bi(){if(v8)return zx;v8=1;var e=Pu(),t=F5();function r(n){return n!=null&&t(n.length)&&!e(n)}return zx=r,zx}var Ux,y8;function qs(){if(y8)return Ux;y8=1;var e=hP(),t=O5(),r=Bi();function n(i){return r(i)?e(i):t(i)}return Ux=n,Ux}var Gx,b8;function vq(){if(b8)return Gx;b8=1;var e=Ru(),t=qs();function r(n,i){return n&&e(i,t(i),n)}return Gx=r,Gx}var $x,w8;function yq(){if(w8)return $x;w8=1;function e(t){var r=[];if(t!=null)for(var n in Object(t))r.push(n);return r}return $x=e,$x}var Bx,_8;function bq(){if(_8)return Bx;_8=1;var e=pn(),t=pp(),r=yq(),n=Object.prototype,i=n.hasOwnProperty;function s(a){if(!e(a))return r(a);var l=t(a),d=[];for(var h in a)h=="constructor"&&(l||!i.call(a,h))||d.push(h);return d}return Bx=s,Bx}var qx,N8;function za(){if(N8)return qx;N8=1;var e=hP(),t=bq(),r=Bi();function n(i){return r(i)?e(i,!0):t(i)}return qx=n,qx}var Vx,S8;function wq(){if(S8)return Vx;S8=1;var e=Ru(),t=za();function r(n,i){return n&&e(i,t(i),n)}return Vx=r,Vx}var Cc={exports:{}};Cc.exports;var j8;function pP(){return j8||(j8=1,function(e,t){var r=Dn(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===n,a=s?r.Buffer:void 0,l=a?a.allocUnsafe:void 0;function d(h,f){if(f)return h.slice();var p=h.length,g=l?l(p):new h.constructor(p);return h.copy(g),g}e.exports=d}(Cc,Cc.exports)),Cc.exports}var Hx,k8;function mP(){if(k8)return Hx;k8=1;function e(t,r){var n=-1,i=t.length;for(r||(r=Array(i));++n<i;)r[n]=t[n];return r}return Hx=e,Hx}var Wx,C8;function gP(){if(C8)return Wx;C8=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,s=0,a=[];++n<i;){var l=t[n];r(l,n,t)&&(a[s++]=l)}return a}return Wx=e,Wx}var Kx,E8;function xP(){if(E8)return Kx;E8=1;function e(){return[]}return Kx=e,Kx}var Yx,T8;function D5(){if(T8)return Yx;T8=1;var e=gP(),t=xP(),r=Object.prototype,n=r.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(a){return a==null?[]:(a=Object(a),e(i(a),function(l){return n.call(a,l)}))}:t;return Yx=s,Yx}var Xx,P8;function _q(){if(P8)return Xx;P8=1;var e=Ru(),t=D5();function r(n,i){return e(n,t(n),i)}return Xx=r,Xx}var Qx,R8;function z5(){if(R8)return Qx;R8=1;function e(t,r){for(var n=-1,i=r.length,s=t.length;++n<i;)t[s+n]=r[n];return t}return Qx=e,Qx}var Zx,A8;function mp(){if(A8)return Zx;A8=1;var e=fP(),t=e(Object.getPrototypeOf,Object);return Zx=t,Zx}var Jx,I8;function vP(){if(I8)return Jx;I8=1;var e=z5(),t=mp(),r=D5(),n=xP(),i=Object.getOwnPropertySymbols,s=i?function(a){for(var l=[];a;)e(l,r(a)),a=t(a);return l}:n;return Jx=s,Jx}var e1,M8;function Nq(){if(M8)return e1;M8=1;var e=Ru(),t=vP();function r(n,i){return e(n,t(n),i)}return e1=r,e1}var t1,F8;function yP(){if(F8)return t1;F8=1;var e=z5(),t=It();function r(n,i,s){var a=i(n);return t(n)?a:e(a,s(n))}return t1=r,t1}var r1,L8;function bP(){if(L8)return r1;L8=1;var e=yP(),t=D5(),r=qs();function n(i){return e(i,r,t)}return r1=n,r1}var n1,O8;function Sq(){if(O8)return n1;O8=1;var e=yP(),t=vP(),r=za();function n(i){return e(i,r,t)}return n1=n,n1}var i1,D8;function jq(){if(D8)return i1;D8=1;var e=Da(),t=Dn(),r=e(t,"DataView");return i1=r,i1}var s1,z8;function kq(){if(z8)return s1;z8=1;var e=Da(),t=Dn(),r=e(t,"Promise");return s1=r,s1}var a1,U8;function wP(){if(U8)return a1;U8=1;var e=Da(),t=Dn(),r=e(t,"Set");return a1=r,a1}var o1,G8;function Cq(){if(G8)return o1;G8=1;var e=Da(),t=Dn(),r=e(t,"WeakMap");return o1=r,o1}var l1,$8;function ml(){if($8)return l1;$8=1;var e=jq(),t=A5(),r=kq(),n=wP(),i=Cq(),s=Oa(),a=uP(),l="[object Map]",d="[object Object]",h="[object Promise]",f="[object Set]",p="[object WeakMap]",g="[object DataView]",x=a(e),w=a(t),b=a(r),k=a(n),_=a(i),S=s;return(e&&S(new e(new ArrayBuffer(1)))!=g||t&&S(new t)!=l||r&&S(r.resolve())!=h||n&&S(new n)!=f||i&&S(new i)!=p)&&(S=function(v){var j=s(v),C=j==d?v.constructor:void 0,R=C?a(C):"";if(R)switch(R){case x:return g;case w:return l;case b:return h;case k:return f;case _:return p}return j}),l1=S,l1}var c1,B8;function Eq(){if(B8)return c1;B8=1;var e=Object.prototype,t=e.hasOwnProperty;function r(n){var i=n.length,s=new n.constructor(i);return i&&typeof n[0]=="string"&&t.call(n,"index")&&(s.index=n.index,s.input=n.input),s}return c1=r,c1}var u1,q8;function _P(){if(q8)return u1;q8=1;var e=Dn(),t=e.Uint8Array;return u1=t,u1}var d1,V8;function U5(){if(V8)return d1;V8=1;var e=_P();function t(r){var n=new r.constructor(r.byteLength);return new e(n).set(new e(r)),n}return d1=t,d1}var h1,H8;function Tq(){if(H8)return h1;H8=1;var e=U5();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.byteLength)}return h1=t,h1}var f1,W8;function Pq(){if(W8)return f1;W8=1;var e=/\w*$/;function t(r){var n=new r.constructor(r.source,e.exec(r));return n.lastIndex=r.lastIndex,n}return f1=t,f1}var p1,K8;function Rq(){if(K8)return p1;K8=1;var e=fl(),t=e?e.prototype:void 0,r=t?t.valueOf:void 0;function n(i){return r?Object(r.call(i)):{}}return p1=n,p1}var m1,Y8;function NP(){if(Y8)return m1;Y8=1;var e=U5();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.length)}return m1=t,m1}var g1,X8;function Aq(){if(X8)return g1;X8=1;var e=U5(),t=Tq(),r=Pq(),n=Rq(),i=NP(),s="[object Boolean]",a="[object Date]",l="[object Map]",d="[object Number]",h="[object RegExp]",f="[object Set]",p="[object String]",g="[object Symbol]",x="[object ArrayBuffer]",w="[object DataView]",b="[object Float32Array]",k="[object Float64Array]",_="[object Int8Array]",S="[object Int16Array]",v="[object Int32Array]",j="[object Uint8Array]",C="[object Uint8ClampedArray]",R="[object Uint16Array]",L="[object Uint32Array]";function A(O,T,I){var M=O.constructor;switch(T){case x:return e(O);case s:case a:return new M(+O);case w:return t(O,I);case b:case k:case _:case S:case v:case j:case C:case R:case L:return i(O,I);case l:return new M;case d:case p:return new M(O);case h:return r(O);case f:return new M;case g:return n(O)}}return g1=A,g1}var x1,Q8;function SP(){if(Q8)return x1;Q8=1;var e=pn(),t=Object.create,r=function(){function n(){}return function(i){if(!e(i))return{};if(t)return t(i);n.prototype=i;var s=new n;return n.prototype=void 0,s}}();return x1=r,x1}var v1,Z8;function jP(){if(Z8)return v1;Z8=1;var e=SP(),t=mp(),r=pp();function n(i){return typeof i.constructor=="function"&&!r(i)?e(t(i)):{}}return v1=n,v1}var y1,J8;function Iq(){if(J8)return y1;J8=1;var e=ml(),t=li(),r="[object Map]";function n(i){return t(i)&&e(i)==r}return y1=n,y1}var b1,eS;function Mq(){if(eS)return b1;eS=1;var e=Iq(),t=fp(),r=L5(),n=r&&r.isMap,i=n?t(n):e;return b1=i,b1}var w1,tS;function Fq(){if(tS)return w1;tS=1;var e=ml(),t=li(),r="[object Set]";function n(i){return t(i)&&e(i)==r}return w1=n,w1}var _1,rS;function Lq(){if(rS)return _1;rS=1;var e=Fq(),t=fp(),r=L5(),n=r&&r.isSet,i=n?t(n):e;return _1=i,_1}var N1,nS;function kP(){if(nS)return N1;nS=1;var e=cp(),t=M5(),r=dp(),n=vq(),i=wq(),s=pP(),a=mP(),l=_q(),d=Nq(),h=bP(),f=Sq(),p=ml(),g=Eq(),x=Aq(),w=jP(),b=It(),k=pl(),_=Mq(),S=pn(),v=Lq(),j=qs(),C=za(),R=1,L=2,A=4,O="[object Arguments]",T="[object Array]",I="[object Boolean]",M="[object Date]",$="[object Error]",F="[object Function]",G="[object GeneratorFunction]",B="[object Map]",Y="[object Number]",K="[object Object]",H="[object RegExp]",W="[object Set]",D="[object String]",q="[object Symbol]",J="[object WeakMap]",ee="[object ArrayBuffer]",ue="[object DataView]",pe="[object Float32Array]",V="[object Float64Array]",te="[object Int8Array]",oe="[object Int16Array]",U="[object Int32Array]",X="[object Uint8Array]",le="[object Uint8ClampedArray]",me="[object Uint16Array]",ye="[object Uint32Array]",ae={};ae[O]=ae[T]=ae[ee]=ae[ue]=ae[I]=ae[M]=ae[pe]=ae[V]=ae[te]=ae[oe]=ae[U]=ae[B]=ae[Y]=ae[K]=ae[H]=ae[W]=ae[D]=ae[q]=ae[X]=ae[le]=ae[me]=ae[ye]=!0,ae[$]=ae[F]=ae[J]=!1;function Fe(fe,ge,bt,pr,Yr,Yt){var ht,Tt=ge&R,Fr=ge&L,gn=ge&A;if(bt&&(ht=Yr?bt(fe,pr,Yr,Yt):bt(fe)),ht!==void 0)return ht;if(!S(fe))return fe;var Xr=b(fe);if(Xr){if(ht=g(fe),!Tt)return a(fe,ht)}else{var mr=p(fe),xn=mr==F||mr==G;if(k(fe))return s(fe,Tt);if(mr==K||mr==O||xn&&!Yr){if(ht=Fr||xn?{}:w(fe),!Tt)return Fr?d(fe,i(ht,fe)):l(fe,n(ht,fe))}else{if(!ae[mr])return Yr?fe:{};ht=x(fe,mr,Tt)}}Yt||(Yt=new e);var Gn=Yt.get(fe);if(Gn)return Gn;Yt.set(fe,ht),v(fe)?fe.forEach(function(Gt){ht.add(Fe(Gt,ge,bt,Gt,fe,Yt))}):_(fe)&&fe.forEach(function(Gt,Xt){ht.set(Xt,Fe(Gt,ge,bt,Xt,fe,Yt))});var Pt=gn?Fr?f:h:Fr?C:j,rr=Xr?void 0:Pt(fe);return t(rr||fe,function(Gt,Xt){rr&&(Xt=Gt,Gt=fe[Xt]),r(ht,Xt,Fe(Gt,ge,bt,Xt,fe,Yt))}),ht}return N1=Fe,N1}var S1,iS;function Oq(){if(iS)return S1;iS=1;var e=kP(),t=4;function r(n){return e(n,t)}return S1=r,S1}var j1,sS;function G5(){if(sS)return j1;sS=1;function e(t){return function(){return t}}return j1=e,j1}var k1,aS;function Dq(){if(aS)return k1;aS=1;function e(t){return function(r,n,i){for(var s=-1,a=Object(r),l=i(r),d=l.length;d--;){var h=l[t?d:++s];if(n(a[h],h,a)===!1)break}return r}}return k1=e,k1}var C1,oS;function $5(){if(oS)return C1;oS=1;var e=Dq(),t=e();return C1=t,C1}var E1,lS;function B5(){if(lS)return E1;lS=1;var e=$5(),t=qs();function r(n,i){return n&&e(n,i,t)}return E1=r,E1}var T1,cS;function zq(){if(cS)return T1;cS=1;var e=Bi();function t(r,n){return function(i,s){if(i==null)return i;if(!e(i))return r(i,s);for(var a=i.length,l=n?a:-1,d=Object(i);(n?l--:++l<a)&&s(d[l],l,d)!==!1;);return i}}return T1=t,T1}var P1,uS;function gp(){if(uS)return P1;uS=1;var e=B5(),t=zq(),r=t(e);return P1=r,P1}var R1,dS;function Ua(){if(dS)return R1;dS=1;function e(t){return t}return R1=e,R1}var A1,hS;function CP(){if(hS)return A1;hS=1;var e=Ua();function t(r){return typeof r=="function"?r:e}return A1=t,A1}var I1,fS;function EP(){if(fS)return I1;fS=1;var e=M5(),t=gp(),r=CP(),n=It();function i(s,a){var l=n(s)?e:t;return l(s,r(a))}return I1=i,I1}var M1,pS;function TP(){return pS||(pS=1,M1=EP()),M1}var F1,mS;function Uq(){if(mS)return F1;mS=1;var e=gp();function t(r,n){var i=[];return e(r,function(s,a,l){n(s,a,l)&&i.push(s)}),i}return F1=t,F1}var L1,gS;function Gq(){if(gS)return L1;gS=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return L1=t,L1}var O1,xS;function $q(){if(xS)return O1;xS=1;function e(t){return this.__data__.has(t)}return O1=e,O1}var D1,vS;function PP(){if(vS)return D1;vS=1;var e=I5(),t=Gq(),r=$q();function n(i){var s=-1,a=i==null?0:i.length;for(this.__data__=new e;++s<a;)this.add(i[s])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,D1=n,D1}var z1,yS;function Bq(){if(yS)return z1;yS=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(t[n],n,t))return!0;return!1}return z1=e,z1}var U1,bS;function RP(){if(bS)return U1;bS=1;function e(t,r){return t.has(r)}return U1=e,U1}var G1,wS;function AP(){if(wS)return G1;wS=1;var e=PP(),t=Bq(),r=RP(),n=1,i=2;function s(a,l,d,h,f,p){var g=d&n,x=a.length,w=l.length;if(x!=w&&!(g&&w>x))return!1;var b=p.get(a),k=p.get(l);if(b&&k)return b==l&&k==a;var _=-1,S=!0,v=d&i?new e:void 0;for(p.set(a,l),p.set(l,a);++_<x;){var j=a[_],C=l[_];if(h)var R=g?h(C,j,_,l,a,p):h(j,C,_,a,l,p);if(R!==void 0){if(R)continue;S=!1;break}if(v){if(!t(l,function(L,A){if(!r(v,A)&&(j===L||f(j,L,d,h,p)))return v.push(A)})){S=!1;break}}else if(!(j===C||f(j,C,d,h,p))){S=!1;break}}return p.delete(a),p.delete(l),S}return G1=s,G1}var $1,_S;function qq(){if(_S)return $1;_S=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i,s){n[++r]=[s,i]}),n}return $1=e,$1}var B1,NS;function q5(){if(NS)return B1;NS=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i){n[++r]=i}),n}return B1=e,B1}var q1,SS;function Vq(){if(SS)return q1;SS=1;var e=fl(),t=_P(),r=hl(),n=AP(),i=qq(),s=q5(),a=1,l=2,d="[object Boolean]",h="[object Date]",f="[object Error]",p="[object Map]",g="[object Number]",x="[object RegExp]",w="[object Set]",b="[object String]",k="[object Symbol]",_="[object ArrayBuffer]",S="[object DataView]",v=e?e.prototype:void 0,j=v?v.valueOf:void 0;function C(R,L,A,O,T,I,M){switch(A){case S:if(R.byteLength!=L.byteLength||R.byteOffset!=L.byteOffset)return!1;R=R.buffer,L=L.buffer;case _:return!(R.byteLength!=L.byteLength||!I(new t(R),new t(L)));case d:case h:case g:return r(+R,+L);case f:return R.name==L.name&&R.message==L.message;case x:case b:return R==L+"";case p:var $=i;case w:var F=O&a;if($||($=s),R.size!=L.size&&!F)return!1;var G=M.get(R);if(G)return G==L;O|=l,M.set(R,L);var B=n($(R),$(L),O,T,I,M);return M.delete(R),B;case k:if(j)return j.call(R)==j.call(L)}return!1}return q1=C,q1}var V1,jS;function Hq(){if(jS)return V1;jS=1;var e=bP(),t=1,r=Object.prototype,n=r.hasOwnProperty;function i(s,a,l,d,h,f){var p=l&t,g=e(s),x=g.length,w=e(a),b=w.length;if(x!=b&&!p)return!1;for(var k=x;k--;){var _=g[k];if(!(p?_ in a:n.call(a,_)))return!1}var S=f.get(s),v=f.get(a);if(S&&v)return S==a&&v==s;var j=!0;f.set(s,a),f.set(a,s);for(var C=p;++k<x;){_=g[k];var R=s[_],L=a[_];if(d)var A=p?d(L,R,_,a,s,f):d(R,L,_,s,a,f);if(!(A===void 0?R===L||h(R,L,l,d,f):A)){j=!1;break}C||(C=_=="constructor")}if(j&&!C){var O=s.constructor,T=a.constructor;O!=T&&"constructor"in s&&"constructor"in a&&!(typeof O=="function"&&O instanceof O&&typeof T=="function"&&T instanceof T)&&(j=!1)}return f.delete(s),f.delete(a),j}return V1=i,V1}var H1,kS;function Wq(){if(kS)return H1;kS=1;var e=cp(),t=AP(),r=Vq(),n=Hq(),i=ml(),s=It(),a=pl(),l=Iu(),d=1,h="[object Arguments]",f="[object Array]",p="[object Object]",g=Object.prototype,x=g.hasOwnProperty;function w(b,k,_,S,v,j){var C=s(b),R=s(k),L=C?f:i(b),A=R?f:i(k);L=L==h?p:L,A=A==h?p:A;var O=L==p,T=A==p,I=L==A;if(I&&a(b)){if(!a(k))return!1;C=!0,O=!1}if(I&&!O)return j||(j=new e),C||l(b)?t(b,k,_,S,v,j):r(b,k,L,_,S,v,j);if(!(_&d)){var M=O&&x.call(b,"__wrapped__"),$=T&&x.call(k,"__wrapped__");if(M||$){var F=M?b.value():b,G=$?k.value():k;return j||(j=new e),v(F,G,_,S,j)}}return I?(j||(j=new e),n(b,k,_,S,v,j)):!1}return H1=w,H1}var W1,CS;function IP(){if(CS)return W1;CS=1;var e=Wq(),t=li();function r(n,i,s,a,l){return n===i?!0:n==null||i==null||!t(n)&&!t(i)?n!==n&&i!==i:e(n,i,s,a,r,l)}return W1=r,W1}var K1,ES;function Kq(){if(ES)return K1;ES=1;var e=cp(),t=IP(),r=1,n=2;function i(s,a,l,d){var h=l.length,f=h,p=!d;if(s==null)return!f;for(s=Object(s);h--;){var g=l[h];if(p&&g[2]?g[1]!==s[g[0]]:!(g[0]in s))return!1}for(;++h<f;){g=l[h];var x=g[0],w=s[x],b=g[1];if(p&&g[2]){if(w===void 0&&!(x in s))return!1}else{var k=new e;if(d)var _=d(w,b,x,s,a,k);if(!(_===void 0?t(b,w,r|n,d,k):_))return!1}}return!0}return K1=i,K1}var Y1,TS;function MP(){if(TS)return Y1;TS=1;var e=pn();function t(r){return r===r&&!e(r)}return Y1=t,Y1}var X1,PS;function Yq(){if(PS)return X1;PS=1;var e=MP(),t=qs();function r(n){for(var i=t(n),s=i.length;s--;){var a=i[s],l=n[a];i[s]=[a,l,e(l)]}return i}return X1=r,X1}var Q1,RS;function FP(){if(RS)return Q1;RS=1;function e(t,r){return function(n){return n==null?!1:n[t]===r&&(r!==void 0||t in Object(n))}}return Q1=e,Q1}var Z1,AS;function Xq(){if(AS)return Z1;AS=1;var e=Kq(),t=Yq(),r=FP();function n(i){var s=t(i);return s.length==1&&s[0][2]?r(s[0][0],s[0][1]):function(a){return a===i||e(a,i,s)}}return Z1=n,Z1}var J1,IS;function gl(){if(IS)return J1;IS=1;var e=Oa(),t=li(),r="[object Symbol]";function n(i){return typeof i=="symbol"||t(i)&&e(i)==r}return J1=n,J1}var ev,MS;function V5(){if(MS)return ev;MS=1;var e=It(),t=gl(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(s,a){if(e(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||t(s)?!0:n.test(s)||!r.test(s)||a!=null&&s in Object(a)}return ev=i,ev}var tv,FS;function Qq(){if(FS)return tv;FS=1;var e=I5(),t="Expected a function";function r(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var s=function(){var a=arguments,l=i?i.apply(this,a):a[0],d=s.cache;if(d.has(l))return d.get(l);var h=n.apply(this,a);return s.cache=d.set(l,h)||d,h};return s.cache=new(r.Cache||e),s}return r.Cache=e,tv=r,tv}var rv,LS;function Zq(){if(LS)return rv;LS=1;var e=Qq(),t=500;function r(n){var i=e(n,function(a){return s.size===t&&s.clear(),a}),s=i.cache;return i}return rv=r,rv}var nv,OS;function Jq(){if(OS)return nv;OS=1;var e=Zq(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(t,function(a,l,d,h){s.push(d?h.replace(r,"$1"):l||a)}),s});return nv=n,nv}var iv,DS;function xp(){if(DS)return iv;DS=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,s=Array(i);++n<i;)s[n]=r(t[n],n,t);return s}return iv=e,iv}var sv,zS;function eV(){if(zS)return sv;zS=1;var e=fl(),t=xp(),r=It(),n=gl(),i=1/0,s=e?e.prototype:void 0,a=s?s.toString:void 0;function l(d){if(typeof d=="string")return d;if(r(d))return t(d,l)+"";if(n(d))return a?a.call(d):"";var h=d+"";return h=="0"&&1/d==-i?"-0":h}return sv=l,sv}var av,US;function LP(){if(US)return av;US=1;var e=eV();function t(r){return r==null?"":e(r)}return av=t,av}var ov,GS;function vp(){if(GS)return ov;GS=1;var e=It(),t=V5(),r=Jq(),n=LP();function i(s,a){return e(s)?s:t(s,a)?[s]:r(n(s))}return ov=i,ov}var lv,$S;function Mu(){if($S)return lv;$S=1;var e=gl(),t=1/0;function r(n){if(typeof n=="string"||e(n))return n;var i=n+"";return i=="0"&&1/n==-t?"-0":i}return lv=r,lv}var cv,BS;function yp(){if(BS)return cv;BS=1;var e=vp(),t=Mu();function r(n,i){i=e(i,n);for(var s=0,a=i.length;n!=null&&s<a;)n=n[t(i[s++])];return s&&s==a?n:void 0}return cv=r,cv}var uv,qS;function tV(){if(qS)return uv;qS=1;var e=yp();function t(r,n,i){var s=r==null?void 0:e(r,n);return s===void 0?i:s}return uv=t,uv}var dv,VS;function rV(){if(VS)return dv;VS=1;function e(t,r){return t!=null&&r in Object(t)}return dv=e,dv}var hv,HS;function OP(){if(HS)return hv;HS=1;var e=vp(),t=Au(),r=It(),n=hp(),i=F5(),s=Mu();function a(l,d,h){d=e(d,l);for(var f=-1,p=d.length,g=!1;++f<p;){var x=s(d[f]);if(!(g=l!=null&&h(l,x)))break;l=l[x]}return g||++f!=p?g:(p=l==null?0:l.length,!!p&&i(p)&&n(x,p)&&(r(l)||t(l)))}return hv=a,hv}var fv,WS;function DP(){if(WS)return fv;WS=1;var e=rV(),t=OP();function r(n,i){return n!=null&&t(n,i,e)}return fv=r,fv}var pv,KS;function nV(){if(KS)return pv;KS=1;var e=IP(),t=tV(),r=DP(),n=V5(),i=MP(),s=FP(),a=Mu(),l=1,d=2;function h(f,p){return n(f)&&i(p)?s(a(f),p):function(g){var x=t(g,f);return x===void 0&&x===p?r(g,f):e(p,x,l|d)}}return pv=h,pv}var mv,YS;function zP(){if(YS)return mv;YS=1;function e(t){return function(r){return r==null?void 0:r[t]}}return mv=e,mv}var gv,XS;function iV(){if(XS)return gv;XS=1;var e=yp();function t(r){return function(n){return e(n,r)}}return gv=t,gv}var xv,QS;function sV(){if(QS)return xv;QS=1;var e=zP(),t=iV(),r=V5(),n=Mu();function i(s){return r(s)?e(n(s)):t(s)}return xv=i,xv}var vv,ZS;function qi(){if(ZS)return vv;ZS=1;var e=Xq(),t=nV(),r=Ua(),n=It(),i=sV();function s(a){return typeof a=="function"?a:a==null?r:typeof a=="object"?n(a)?t(a[0],a[1]):e(a):i(a)}return vv=s,vv}var yv,JS;function UP(){if(JS)return yv;JS=1;var e=gP(),t=Uq(),r=qi(),n=It();function i(s,a){var l=n(s)?e:t;return l(s,r(a,3))}return yv=i,yv}var bv,e9;function aV(){if(e9)return bv;e9=1;var e=Object.prototype,t=e.hasOwnProperty;function r(n,i){return n!=null&&t.call(n,i)}return bv=r,bv}var wv,t9;function GP(){if(t9)return wv;t9=1;var e=aV(),t=OP();function r(n,i){return n!=null&&t(n,i,e)}return wv=r,wv}var _v,r9;function oV(){if(r9)return _v;r9=1;var e=O5(),t=ml(),r=Au(),n=It(),i=Bi(),s=pl(),a=pp(),l=Iu(),d="[object Map]",h="[object Set]",f=Object.prototype,p=f.hasOwnProperty;function g(x){if(x==null)return!0;if(i(x)&&(n(x)||typeof x=="string"||typeof x.splice=="function"||s(x)||l(x)||r(x)))return!x.length;var w=t(x);if(w==d||w==h)return!x.size;if(a(x))return!e(x).length;for(var b in x)if(p.call(x,b))return!1;return!0}return _v=g,_v}var Nv,n9;function $P(){if(n9)return Nv;n9=1;function e(t){return t===void 0}return Nv=e,Nv}var Sv,i9;function BP(){if(i9)return Sv;i9=1;var e=gp(),t=Bi();function r(n,i){var s=-1,a=t(n)?Array(n.length):[];return e(n,function(l,d,h){a[++s]=i(l,d,h)}),a}return Sv=r,Sv}var jv,s9;function qP(){if(s9)return jv;s9=1;var e=xp(),t=qi(),r=BP(),n=It();function i(s,a){var l=n(s)?e:r;return l(s,t(a,3))}return jv=i,jv}var kv,a9;function lV(){if(a9)return kv;a9=1;function e(t,r,n,i){var s=-1,a=t==null?0:t.length;for(i&&a&&(n=t[++s]);++s<a;)n=r(n,t[s],s,t);return n}return kv=e,kv}var Cv,o9;function cV(){if(o9)return Cv;o9=1;function e(t,r,n,i,s){return s(t,function(a,l,d){n=i?(i=!1,a):r(n,a,l,d)}),n}return Cv=e,Cv}var Ev,l9;function VP(){if(l9)return Ev;l9=1;var e=lV(),t=gp(),r=qi(),n=cV(),i=It();function s(a,l,d){var h=i(a)?e:n,f=arguments.length<3;return h(a,r(l,4),d,f,t)}return Ev=s,Ev}var Tv,c9;function uV(){if(c9)return Tv;c9=1;var e=Oa(),t=It(),r=li(),n="[object String]";function i(s){return typeof s=="string"||!t(s)&&r(s)&&e(s)==n}return Tv=i,Tv}var Pv,u9;function dV(){if(u9)return Pv;u9=1;var e=zP(),t=e("length");return Pv=t,Pv}var Rv,d9;function hV(){if(d9)return Rv;d9=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=t+r+n,s="\\ufe0e\\ufe0f",a="\\u200d",l=RegExp("["+a+e+i+s+"]");function d(h){return l.test(h)}return Rv=d,Rv}var Av,h9;function fV(){if(h9)return Av;h9=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=t+r+n,s="\\ufe0e\\ufe0f",a="["+e+"]",l="["+i+"]",d="\\ud83c[\\udffb-\\udfff]",h="(?:"+l+"|"+d+")",f="[^"+e+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",x="\\u200d",w=h+"?",b="["+s+"]?",k="(?:"+x+"(?:"+[f,p,g].join("|")+")"+b+w+")*",_=b+w+k,S="(?:"+[f+l+"?",l,p,g,a].join("|")+")",v=RegExp(d+"(?="+d+")|"+S+_,"g");function j(C){for(var R=v.lastIndex=0;v.test(C);)++R;return R}return Av=j,Av}var Iv,f9;function pV(){if(f9)return Iv;f9=1;var e=dV(),t=hV(),r=fV();function n(i){return t(i)?r(i):e(i)}return Iv=n,Iv}var Mv,p9;function mV(){if(p9)return Mv;p9=1;var e=O5(),t=ml(),r=Bi(),n=uV(),i=pV(),s="[object Map]",a="[object Set]";function l(d){if(d==null)return 0;if(r(d))return n(d)?i(d):d.length;var h=t(d);return h==s||h==a?d.size:e(d).length}return Mv=l,Mv}var Fv,m9;function gV(){if(m9)return Fv;m9=1;var e=M5(),t=SP(),r=B5(),n=qi(),i=mp(),s=It(),a=pl(),l=Pu(),d=pn(),h=Iu();function f(p,g,x){var w=s(p),b=w||a(p)||h(p);if(g=n(g,4),x==null){var k=p&&p.constructor;b?x=w?new k:[]:d(p)?x=l(k)?t(i(p)):{}:x={}}return(b?e:r)(p,function(_,S,v){return g(x,_,S,v)}),x}return Fv=f,Fv}var Lv,g9;function xV(){if(g9)return Lv;g9=1;var e=fl(),t=Au(),r=It(),n=e?e.isConcatSpreadable:void 0;function i(s){return r(s)||t(s)||!!(n&&s&&s[n])}return Lv=i,Lv}var Ov,x9;function H5(){if(x9)return Ov;x9=1;var e=z5(),t=xV();function r(n,i,s,a,l){var d=-1,h=n.length;for(s||(s=t),l||(l=[]);++d<h;){var f=n[d];i>0&&s(f)?i>1?r(f,i-1,s,a,l):e(l,f):a||(l[l.length]=f)}return l}return Ov=r,Ov}var Dv,v9;function vV(){if(v9)return Dv;v9=1;function e(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}return Dv=e,Dv}var zv,y9;function HP(){if(y9)return zv;y9=1;var e=vV(),t=Math.max;function r(n,i,s){return i=t(i===void 0?n.length-1:i,0),function(){for(var a=arguments,l=-1,d=t(a.length-i,0),h=Array(d);++l<d;)h[l]=a[i+l];l=-1;for(var f=Array(i+1);++l<i;)f[l]=a[l];return f[i]=s(h),e(n,this,f)}}return zv=r,zv}var Uv,b9;function yV(){if(b9)return Uv;b9=1;var e=G5(),t=dP(),r=Ua(),n=t?function(i,s){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(s),writable:!0})}:r;return Uv=n,Uv}var Gv,w9;function bV(){if(w9)return Gv;w9=1;var e=800,t=16,r=Date.now;function n(i){var s=0,a=0;return function(){var l=r(),d=t-(l-a);if(a=l,d>0){if(++s>=e)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return Gv=n,Gv}var $v,_9;function WP(){if(_9)return $v;_9=1;var e=yV(),t=bV(),r=t(e);return $v=r,$v}var Bv,N9;function bp(){if(N9)return Bv;N9=1;var e=Ua(),t=HP(),r=WP();function n(i,s){return r(t(i,s,e),i+"")}return Bv=n,Bv}var qv,S9;function KP(){if(S9)return qv;S9=1;function e(t,r,n,i){for(var s=t.length,a=n+(i?1:-1);i?a--:++a<s;)if(r(t[a],a,t))return a;return-1}return qv=e,qv}var Vv,j9;function wV(){if(j9)return Vv;j9=1;function e(t){return t!==t}return Vv=e,Vv}var Hv,k9;function _V(){if(k9)return Hv;k9=1;function e(t,r,n){for(var i=n-1,s=t.length;++i<s;)if(t[i]===r)return i;return-1}return Hv=e,Hv}var Wv,C9;function NV(){if(C9)return Wv;C9=1;var e=KP(),t=wV(),r=_V();function n(i,s,a){return s===s?r(i,s,a):e(i,t,a)}return Wv=n,Wv}var Kv,E9;function SV(){if(E9)return Kv;E9=1;var e=NV();function t(r,n){var i=r==null?0:r.length;return!!i&&e(r,n,0)>-1}return Kv=t,Kv}var Yv,T9;function jV(){if(T9)return Yv;T9=1;function e(t,r,n){for(var i=-1,s=t==null?0:t.length;++i<s;)if(n(r,t[i]))return!0;return!1}return Yv=e,Yv}var Xv,P9;function kV(){if(P9)return Xv;P9=1;function e(){}return Xv=e,Xv}var Qv,R9;function CV(){if(R9)return Qv;R9=1;var e=wP(),t=kV(),r=q5(),n=1/0,i=e&&1/r(new e([,-0]))[1]==n?function(s){return new e(s)}:t;return Qv=i,Qv}var Zv,A9;function EV(){if(A9)return Zv;A9=1;var e=PP(),t=SV(),r=jV(),n=RP(),i=CV(),s=q5(),a=200;function l(d,h,f){var p=-1,g=t,x=d.length,w=!0,b=[],k=b;if(f)w=!1,g=r;else if(x>=a){var _=h?null:i(d);if(_)return s(_);w=!1,g=n,k=new e}else k=h?[]:b;e:for(;++p<x;){var S=d[p],v=h?h(S):S;if(S=f||S!==0?S:0,w&&v===v){for(var j=k.length;j--;)if(k[j]===v)continue e;h&&k.push(v),b.push(S)}else g(k,v,f)||(k!==b&&k.push(v),b.push(S))}return b}return Zv=l,Zv}var Jv,I9;function YP(){if(I9)return Jv;I9=1;var e=Bi(),t=li();function r(n){return t(n)&&e(n)}return Jv=r,Jv}var ey,M9;function TV(){if(M9)return ey;M9=1;var e=H5(),t=bp(),r=EV(),n=YP(),i=t(function(s){return r(e(s,1,n,!0))});return ey=i,ey}var ty,F9;function PV(){if(F9)return ty;F9=1;var e=xp();function t(r,n){return e(n,function(i){return r[i]})}return ty=t,ty}var ry,L9;function XP(){if(L9)return ry;L9=1;var e=PV(),t=qs();function r(n){return n==null?[]:e(n,t(n))}return ry=r,ry}var ny,O9;function mn(){if(O9)return ny;O9=1;var e;if(typeof R5=="function")try{e={clone:Oq(),constant:G5(),each:TP(),filter:UP(),has:GP(),isArray:It(),isEmpty:oV(),isFunction:Pu(),isUndefined:$P(),keys:qs(),map:qP(),reduce:VP(),size:mV(),transform:gV(),union:TV(),values:XP()}}catch{}return e||(e=window._),ny=e,ny}var iy,D9;function W5(){if(D9)return iy;D9=1;var e=mn();iy=i;var t="\0",r="\0",n="";function i(f){this._isDirected=e.has(f,"directed")?f.directed:!0,this._isMultigraph=e.has(f,"multigraph")?f.multigraph:!1,this._isCompound=e.has(f,"compound")?f.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[r]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(f){return this._label=f,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(f){return e.isFunction(f)||(f=e.constant(f)),this._defaultNodeLabelFn=f,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var f=this;return e.filter(this.nodes(),function(p){return e.isEmpty(f._in[p])})},i.prototype.sinks=function(){var f=this;return e.filter(this.nodes(),function(p){return e.isEmpty(f._out[p])})},i.prototype.setNodes=function(f,p){var g=arguments,x=this;return e.each(f,function(w){g.length>1?x.setNode(w,p):x.setNode(w)}),this},i.prototype.setNode=function(f,p){return e.has(this._nodes,f)?(arguments.length>1&&(this._nodes[f]=p),this):(this._nodes[f]=arguments.length>1?p:this._defaultNodeLabelFn(f),this._isCompound&&(this._parent[f]=r,this._children[f]={},this._children[r][f]=!0),this._in[f]={},this._preds[f]={},this._out[f]={},this._sucs[f]={},++this._nodeCount,this)},i.prototype.node=function(f){return this._nodes[f]},i.prototype.hasNode=function(f){return e.has(this._nodes,f)},i.prototype.removeNode=function(f){var p=this;if(e.has(this._nodes,f)){var g=function(x){p.removeEdge(p._edgeObjs[x])};delete this._nodes[f],this._isCompound&&(this._removeFromParentsChildList(f),delete this._parent[f],e.each(this.children(f),function(x){p.setParent(x)}),delete this._children[f]),e.each(e.keys(this._in[f]),g),delete this._in[f],delete this._preds[f],e.each(e.keys(this._out[f]),g),delete this._out[f],delete this._sucs[f],--this._nodeCount}return this},i.prototype.setParent=function(f,p){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(p))p=r;else{p+="";for(var g=p;!e.isUndefined(g);g=this.parent(g))if(g===f)throw new Error("Setting "+p+" as parent of "+f+" would create a cycle");this.setNode(p)}return this.setNode(f),this._removeFromParentsChildList(f),this._parent[f]=p,this._children[p][f]=!0,this},i.prototype._removeFromParentsChildList=function(f){delete this._children[this._parent[f]][f]},i.prototype.parent=function(f){if(this._isCompound){var p=this._parent[f];if(p!==r)return p}},i.prototype.children=function(f){if(e.isUndefined(f)&&(f=r),this._isCompound){var p=this._children[f];if(p)return e.keys(p)}else{if(f===r)return this.nodes();if(this.hasNode(f))return[]}},i.prototype.predecessors=function(f){var p=this._preds[f];if(p)return e.keys(p)},i.prototype.successors=function(f){var p=this._sucs[f];if(p)return e.keys(p)},i.prototype.neighbors=function(f){var p=this.predecessors(f);if(p)return e.union(p,this.successors(f))},i.prototype.isLeaf=function(f){var p;return this.isDirected()?p=this.successors(f):p=this.neighbors(f),p.length===0},i.prototype.filterNodes=function(f){var p=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});p.setGraph(this.graph());var g=this;e.each(this._nodes,function(b,k){f(k)&&p.setNode(k,b)}),e.each(this._edgeObjs,function(b){p.hasNode(b.v)&&p.hasNode(b.w)&&p.setEdge(b,g.edge(b))});var x={};function w(b){var k=g.parent(b);return k===void 0||p.hasNode(k)?(x[b]=k,k):k in x?x[k]:w(k)}return this._isCompound&&e.each(p.nodes(),function(b){p.setParent(b,w(b))}),p},i.prototype.setDefaultEdgeLabel=function(f){return e.isFunction(f)||(f=e.constant(f)),this._defaultEdgeLabelFn=f,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(f,p){var g=this,x=arguments;return e.reduce(f,function(w,b){return x.length>1?g.setEdge(w,b,p):g.setEdge(w,b),b}),this},i.prototype.setEdge=function(){var f,p,g,x,w=!1,b=arguments[0];typeof b=="object"&&b!==null&&"v"in b?(f=b.v,p=b.w,g=b.name,arguments.length===2&&(x=arguments[1],w=!0)):(f=b,p=arguments[1],g=arguments[3],arguments.length>2&&(x=arguments[2],w=!0)),f=""+f,p=""+p,e.isUndefined(g)||(g=""+g);var k=l(this._isDirected,f,p,g);if(e.has(this._edgeLabels,k))return w&&(this._edgeLabels[k]=x),this;if(!e.isUndefined(g)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(f),this.setNode(p),this._edgeLabels[k]=w?x:this._defaultEdgeLabelFn(f,p,g);var _=d(this._isDirected,f,p,g);return f=_.v,p=_.w,Object.freeze(_),this._edgeObjs[k]=_,s(this._preds[p],f),s(this._sucs[f],p),this._in[p][k]=_,this._out[f][k]=_,this._edgeCount++,this},i.prototype.edge=function(f,p,g){var x=arguments.length===1?h(this._isDirected,arguments[0]):l(this._isDirected,f,p,g);return this._edgeLabels[x]},i.prototype.hasEdge=function(f,p,g){var x=arguments.length===1?h(this._isDirected,arguments[0]):l(this._isDirected,f,p,g);return e.has(this._edgeLabels,x)},i.prototype.removeEdge=function(f,p,g){var x=arguments.length===1?h(this._isDirected,arguments[0]):l(this._isDirected,f,p,g),w=this._edgeObjs[x];return w&&(f=w.v,p=w.w,delete this._edgeLabels[x],delete this._edgeObjs[x],a(this._preds[p],f),a(this._sucs[f],p),delete this._in[p][x],delete this._out[f][x],this._edgeCount--),this},i.prototype.inEdges=function(f,p){var g=this._in[f];if(g){var x=e.values(g);return p?e.filter(x,function(w){return w.v===p}):x}},i.prototype.outEdges=function(f,p){var g=this._out[f];if(g){var x=e.values(g);return p?e.filter(x,function(w){return w.w===p}):x}},i.prototype.nodeEdges=function(f,p){var g=this.inEdges(f,p);if(g)return g.concat(this.outEdges(f,p))};function s(f,p){f[p]?f[p]++:f[p]=1}function a(f,p){--f[p]||delete f[p]}function l(f,p,g,x){var w=""+p,b=""+g;if(!f&&w>b){var k=w;w=b,b=k}return w+n+b+n+(e.isUndefined(x)?t:x)}function d(f,p,g,x){var w=""+p,b=""+g;if(!f&&w>b){var k=w;w=b,b=k}var _={v:w,w:b};return x&&(_.name=x),_}function h(f,p){return l(f,p.v,p.w,p.name)}return iy}var sy,z9;function RV(){return z9||(z9=1,sy="2.1.8"),sy}var ay,U9;function AV(){return U9||(U9=1,ay={Graph:W5(),version:RV()}),ay}var oy,G9;function IV(){if(G9)return oy;G9=1;var e=mn(),t=W5();oy={write:r,read:s};function r(a){var l={options:{directed:a.isDirected(),multigraph:a.isMultigraph(),compound:a.isCompound()},nodes:n(a),edges:i(a)};return e.isUndefined(a.graph())||(l.value=e.clone(a.graph())),l}function n(a){return e.map(a.nodes(),function(l){var d=a.node(l),h=a.parent(l),f={v:l};return e.isUndefined(d)||(f.value=d),e.isUndefined(h)||(f.parent=h),f})}function i(a){return e.map(a.edges(),function(l){var d=a.edge(l),h={v:l.v,w:l.w};return e.isUndefined(l.name)||(h.name=l.name),e.isUndefined(d)||(h.value=d),h})}function s(a){var l=new t(a.options).setGraph(a.value);return e.each(a.nodes,function(d){l.setNode(d.v,d.value),d.parent&&l.setParent(d.v,d.parent)}),e.each(a.edges,function(d){l.setEdge({v:d.v,w:d.w,name:d.name},d.value)}),l}return oy}var ly,$9;function MV(){if($9)return ly;$9=1;var e=mn();ly=t;function t(r){var n={},i=[],s;function a(l){e.has(n,l)||(n[l]=!0,s.push(l),e.each(r.successors(l),a),e.each(r.predecessors(l),a))}return e.each(r.nodes(),function(l){s=[],a(l),s.length&&i.push(s)}),i}return ly}var cy,B9;function QP(){if(B9)return cy;B9=1;var e=mn();cy=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(r){return r.key})},t.prototype.has=function(r){return e.has(this._keyIndices,r)},t.prototype.priority=function(r){var n=this._keyIndices[r];if(n!==void 0)return this._arr[n].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(r,n){var i=this._keyIndices;if(r=String(r),!e.has(i,r)){var s=this._arr,a=s.length;return i[r]=a,s.push({key:r,priority:n}),this._decrease(a),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var r=this._arr.pop();return delete this._keyIndices[r.key],this._heapify(0),r.key},t.prototype.decrease=function(r,n){var i=this._keyIndices[r];if(n>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+this._arr[i].priority+" New: "+n);this._arr[i].priority=n,this._decrease(i)},t.prototype._heapify=function(r){var n=this._arr,i=2*r,s=i+1,a=r;i<n.length&&(a=n[i].priority<n[a].priority?i:a,s<n.length&&(a=n[s].priority<n[a].priority?s:a),a!==r&&(this._swap(r,a),this._heapify(a)))},t.prototype._decrease=function(r){for(var n=this._arr,i=n[r].priority,s;r!==0&&(s=r>>1,!(n[s].priority<i));)this._swap(r,s),r=s},t.prototype._swap=function(r,n){var i=this._arr,s=this._keyIndices,a=i[r],l=i[n];i[r]=l,i[n]=a,s[l.key]=r,s[a.key]=n},cy}var uy,q9;function ZP(){if(q9)return uy;q9=1;var e=mn(),t=QP();uy=n;var r=e.constant(1);function n(s,a,l,d){return i(s,String(a),l||r,d||function(h){return s.outEdges(h)})}function i(s,a,l,d){var h={},f=new t,p,g,x=function(w){var b=w.v!==p?w.v:w.w,k=h[b],_=l(w),S=g.distance+_;if(_<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+w+" Weight: "+_);S<k.distance&&(k.distance=S,k.predecessor=p,f.decrease(b,S))};for(s.nodes().forEach(function(w){var b=w===a?0:Number.POSITIVE_INFINITY;h[w]={distance:b},f.add(w,b)});f.size()>0&&(p=f.removeMin(),g=h[p],g.distance!==Number.POSITIVE_INFINITY);)d(p).forEach(x);return h}return uy}var dy,V9;function FV(){if(V9)return dy;V9=1;var e=ZP(),t=mn();dy=r;function r(n,i,s){return t.transform(n.nodes(),function(a,l){a[l]=e(n,l,i,s)},{})}return dy}var hy,H9;function JP(){if(H9)return hy;H9=1;var e=mn();hy=t;function t(r){var n=0,i=[],s={},a=[];function l(d){var h=s[d]={onStack:!0,lowlink:n,index:n++};if(i.push(d),r.successors(d).forEach(function(g){e.has(s,g)?s[g].onStack&&(h.lowlink=Math.min(h.lowlink,s[g].index)):(l(g),h.lowlink=Math.min(h.lowlink,s[g].lowlink))}),h.lowlink===h.index){var f=[],p;do p=i.pop(),s[p].onStack=!1,f.push(p);while(d!==p);a.push(f)}}return r.nodes().forEach(function(d){e.has(s,d)||l(d)}),a}return hy}var fy,W9;function LV(){if(W9)return fy;W9=1;var e=mn(),t=JP();fy=r;function r(n){return e.filter(t(n),function(i){return i.length>1||i.length===1&&n.hasEdge(i[0],i[0])})}return fy}var py,K9;function OV(){if(K9)return py;K9=1;var e=mn();py=r;var t=e.constant(1);function r(i,s,a){return n(i,s||t,a||function(l){return i.outEdges(l)})}function n(i,s,a){var l={},d=i.nodes();return d.forEach(function(h){l[h]={},l[h][h]={distance:0},d.forEach(function(f){h!==f&&(l[h][f]={distance:Number.POSITIVE_INFINITY})}),a(h).forEach(function(f){var p=f.v===h?f.w:f.v,g=s(f);l[h][p]={distance:g,predecessor:h}})}),d.forEach(function(h){var f=l[h];d.forEach(function(p){var g=l[p];d.forEach(function(x){var w=g[h],b=f[x],k=g[x],_=w.distance+b.distance;_<k.distance&&(k.distance=_,k.predecessor=b.predecessor)})})}),l}return py}var my,Y9;function eR(){if(Y9)return my;Y9=1;var e=mn();my=t,t.CycleException=r;function t(n){var i={},s={},a=[];function l(d){if(e.has(s,d))throw new r;e.has(i,d)||(s[d]=!0,i[d]=!0,e.each(n.predecessors(d),l),delete s[d],a.push(d))}if(e.each(n.sinks(),l),e.size(i)!==n.nodeCount())throw new r;return a}function r(){}return r.prototype=new Error,my}var gy,X9;function DV(){if(X9)return gy;X9=1;var e=eR();gy=t;function t(r){try{e(r)}catch(n){if(n instanceof e.CycleException)return!1;throw n}return!0}return gy}var xy,Q9;function tR(){if(Q9)return xy;Q9=1;var e=mn();xy=t;function t(n,i,s){e.isArray(i)||(i=[i]);var a=(n.isDirected()?n.successors:n.neighbors).bind(n),l=[],d={};return e.each(i,function(h){if(!n.hasNode(h))throw new Error("Graph does not have node: "+h);r(n,h,s==="post",d,a,l)}),l}function r(n,i,s,a,l,d){e.has(a,i)||(a[i]=!0,s||d.push(i),e.each(l(i),function(h){r(n,h,s,a,l,d)}),s&&d.push(i))}return xy}var vy,Z9;function zV(){if(Z9)return vy;Z9=1;var e=tR();vy=t;function t(r,n){return e(r,n,"post")}return vy}var yy,J9;function UV(){if(J9)return yy;J9=1;var e=tR();yy=t;function t(r,n){return e(r,n,"pre")}return yy}var by,ej;function GV(){if(ej)return by;ej=1;var e=mn(),t=W5(),r=QP();by=n;function n(i,s){var a=new t,l={},d=new r,h;function f(g){var x=g.v===h?g.w:g.v,w=d.priority(x);if(w!==void 0){var b=s(g);b<w&&(l[x]=h,d.decrease(x,b))}}if(i.nodeCount()===0)return a;e.each(i.nodes(),function(g){d.add(g,Number.POSITIVE_INFINITY),a.setNode(g)}),d.decrease(i.nodes()[0],0);for(var p=!1;d.size()>0;){if(h=d.removeMin(),e.has(l,h))a.setEdge(h,l[h]);else{if(p)throw new Error("Input graph is not connected: "+i);p=!0}i.nodeEdges(h).forEach(f)}return a}return by}var wy,tj;function $V(){return tj||(tj=1,wy={components:MV(),dijkstra:ZP(),dijkstraAll:FV(),findCycles:LV(),floydWarshall:OV(),isAcyclic:DV(),postorder:zV(),preorder:UV(),prim:GV(),tarjan:JP(),topsort:eR()}),wy}var _y,rj;function BV(){if(rj)return _y;rj=1;var e=AV();return _y={Graph:e.Graph,json:IV(),alg:$V(),version:e.version},_y}var Sf;if(typeof R5=="function")try{Sf=BV()}catch{}Sf||(Sf=window.graphlib);var zn=Sf,Ny,nj;function qV(){if(nj)return Ny;nj=1;var e=kP(),t=1,r=4;function n(i){return e(i,t|r)}return Ny=n,Ny}var Sy,ij;function wp(){if(ij)return Sy;ij=1;var e=hl(),t=Bi(),r=hp(),n=pn();function i(s,a,l){if(!n(l))return!1;var d=typeof a;return(d=="number"?t(l)&&r(a,l.length):d=="string"&&a in l)?e(l[a],s):!1}return Sy=i,Sy}var jy,sj;function VV(){if(sj)return jy;sj=1;var e=bp(),t=hl(),r=wp(),n=za(),i=Object.prototype,s=i.hasOwnProperty,a=e(function(l,d){l=Object(l);var h=-1,f=d.length,p=f>2?d[2]:void 0;for(p&&r(d[0],d[1],p)&&(f=1);++h<f;)for(var g=d[h],x=n(g),w=-1,b=x.length;++w<b;){var k=x[w],_=l[k];(_===void 0||t(_,i[k])&&!s.call(l,k))&&(l[k]=g[k])}return l});return jy=a,jy}var ky,aj;function HV(){if(aj)return ky;aj=1;var e=qi(),t=Bi(),r=qs();function n(i){return function(s,a,l){var d=Object(s);if(!t(s)){var h=e(a,3);s=r(s),a=function(p){return h(d[p],p,d)}}var f=i(s,a,l);return f>-1?d[h?s[f]:f]:void 0}}return ky=n,ky}var Cy,oj;function WV(){if(oj)return Cy;oj=1;var e=/\s/;function t(r){for(var n=r.length;n--&&e.test(r.charAt(n)););return n}return Cy=t,Cy}var Ey,lj;function KV(){if(lj)return Ey;lj=1;var e=WV(),t=/^\s+/;function r(n){return n&&n.slice(0,e(n)+1).replace(t,"")}return Ey=r,Ey}var Ty,cj;function YV(){if(cj)return Ty;cj=1;var e=KV(),t=pn(),r=gl(),n=0/0,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,l=parseInt;function d(h){if(typeof h=="number")return h;if(r(h))return n;if(t(h)){var f=typeof h.valueOf=="function"?h.valueOf():h;h=t(f)?f+"":f}if(typeof h!="string")return h===0?h:+h;h=e(h);var p=s.test(h);return p||a.test(h)?l(h.slice(2),p?2:8):i.test(h)?n:+h}return Ty=d,Ty}var Py,uj;function rR(){if(uj)return Py;uj=1;var e=YV(),t=1/0,r=17976931348623157e292;function n(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var s=i<0?-1:1;return s*r}return i===i?i:0}return Py=n,Py}var Ry,dj;function XV(){if(dj)return Ry;dj=1;var e=rR();function t(r){var n=e(r),i=n%1;return n===n?i?n-i:n:0}return Ry=t,Ry}var Ay,hj;function QV(){if(hj)return Ay;hj=1;var e=KP(),t=qi(),r=XV(),n=Math.max;function i(s,a,l){var d=s==null?0:s.length;if(!d)return-1;var h=l==null?0:r(l);return h<0&&(h=n(d+h,0)),e(s,t(a,3),h)}return Ay=i,Ay}var Iy,fj;function ZV(){if(fj)return Iy;fj=1;var e=HV(),t=QV(),r=e(t);return Iy=r,Iy}var My,pj;function nR(){if(pj)return My;pj=1;var e=H5();function t(r){var n=r==null?0:r.length;return n?e(r,1):[]}return My=t,My}var Fy,mj;function JV(){if(mj)return Fy;mj=1;var e=$5(),t=CP(),r=za();function n(i,s){return i==null?i:e(i,t(s),r)}return Fy=n,Fy}var Ly,gj;function eH(){if(gj)return Ly;gj=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return Ly=e,Ly}var Oy,xj;function tH(){if(xj)return Oy;xj=1;var e=up(),t=B5(),r=qi();function n(i,s){var a={};return s=r(s,3),t(i,function(l,d,h){e(a,d,s(l,d,h))}),a}return Oy=n,Oy}var Dy,vj;function K5(){if(vj)return Dy;vj=1;var e=gl();function t(r,n,i){for(var s=-1,a=r.length;++s<a;){var l=r[s],d=n(l);if(d!=null&&(h===void 0?d===d&&!e(d):i(d,h)))var h=d,f=l}return f}return Dy=t,Dy}var zy,yj;function rH(){if(yj)return zy;yj=1;function e(t,r){return t>r}return zy=e,zy}var Uy,bj;function nH(){if(bj)return Uy;bj=1;var e=K5(),t=rH(),r=Ua();function n(i){return i&&i.length?e(i,r,t):void 0}return Uy=n,Uy}var Gy,wj;function iR(){if(wj)return Gy;wj=1;var e=up(),t=hl();function r(n,i,s){(s!==void 0&&!t(n[i],s)||s===void 0&&!(i in n))&&e(n,i,s)}return Gy=r,Gy}var $y,_j;function iH(){if(_j)return $y;_j=1;var e=Oa(),t=mp(),r=li(),n="[object Object]",i=Function.prototype,s=Object.prototype,a=i.toString,l=s.hasOwnProperty,d=a.call(Object);function h(f){if(!r(f)||e(f)!=n)return!1;var p=t(f);if(p===null)return!0;var g=l.call(p,"constructor")&&p.constructor;return typeof g=="function"&&g instanceof g&&a.call(g)==d}return $y=h,$y}var By,Nj;function sR(){if(Nj)return By;Nj=1;function e(t,r){if(!(r==="constructor"&&typeof t[r]=="function")&&r!="__proto__")return t[r]}return By=e,By}var qy,Sj;function sH(){if(Sj)return qy;Sj=1;var e=Ru(),t=za();function r(n){return e(n,t(n))}return qy=r,qy}var Vy,jj;function aH(){if(jj)return Vy;jj=1;var e=iR(),t=pP(),r=NP(),n=mP(),i=jP(),s=Au(),a=It(),l=YP(),d=pl(),h=Pu(),f=pn(),p=iH(),g=Iu(),x=sR(),w=sH();function b(k,_,S,v,j,C,R){var L=x(k,S),A=x(_,S),O=R.get(A);if(O){e(k,S,O);return}var T=C?C(L,A,S+"",k,_,R):void 0,I=T===void 0;if(I){var M=a(A),$=!M&&d(A),F=!M&&!$&&g(A);T=A,M||$||F?a(L)?T=L:l(L)?T=n(L):$?(I=!1,T=t(A,!0)):F?(I=!1,T=r(A,!0)):T=[]:p(A)||s(A)?(T=L,s(L)?T=w(L):(!f(L)||h(L))&&(T=i(A))):I=!1}I&&(R.set(A,T),j(T,A,v,C,R),R.delete(A)),e(k,S,T)}return Vy=b,Vy}var Hy,kj;function oH(){if(kj)return Hy;kj=1;var e=cp(),t=iR(),r=$5(),n=aH(),i=pn(),s=za(),a=sR();function l(d,h,f,p,g){d!==h&&r(h,function(x,w){if(g||(g=new e),i(x))n(d,h,w,f,l,p,g);else{var b=p?p(a(d,w),x,w+"",d,h,g):void 0;b===void 0&&(b=x),t(d,w,b)}},s)}return Hy=l,Hy}var Wy,Cj;function lH(){if(Cj)return Wy;Cj=1;var e=bp(),t=wp();function r(n){return e(function(i,s){var a=-1,l=s.length,d=l>1?s[l-1]:void 0,h=l>2?s[2]:void 0;for(d=n.length>3&&typeof d=="function"?(l--,d):void 0,h&&t(s[0],s[1],h)&&(d=l<3?void 0:d,l=1),i=Object(i);++a<l;){var f=s[a];f&&n(i,f,a,d)}return i})}return Wy=r,Wy}var Ky,Ej;function cH(){if(Ej)return Ky;Ej=1;var e=oH(),t=lH(),r=t(function(n,i,s){e(n,i,s)});return Ky=r,Ky}var Yy,Tj;function aR(){if(Tj)return Yy;Tj=1;function e(t,r){return t<r}return Yy=e,Yy}var Xy,Pj;function uH(){if(Pj)return Xy;Pj=1;var e=K5(),t=aR(),r=Ua();function n(i){return i&&i.length?e(i,r,t):void 0}return Xy=n,Xy}var Qy,Rj;function dH(){if(Rj)return Qy;Rj=1;var e=K5(),t=qi(),r=aR();function n(i,s){return i&&i.length?e(i,t(s,2),r):void 0}return Qy=n,Qy}var Zy,Aj;function hH(){if(Aj)return Zy;Aj=1;var e=Dn(),t=function(){return e.Date.now()};return Zy=t,Zy}var Jy,Ij;function fH(){if(Ij)return Jy;Ij=1;var e=dp(),t=vp(),r=hp(),n=pn(),i=Mu();function s(a,l,d,h){if(!n(a))return a;l=t(l,a);for(var f=-1,p=l.length,g=p-1,x=a;x!=null&&++f<p;){var w=i(l[f]),b=d;if(w==="__proto__"||w==="constructor"||w==="prototype")return a;if(f!=g){var k=x[w];b=h?h(k,w,x):void 0,b===void 0&&(b=n(k)?k:r(l[f+1])?[]:{})}e(x,w,b),x=x[w]}return a}return Jy=s,Jy}var e2,Mj;function pH(){if(Mj)return e2;Mj=1;var e=yp(),t=fH(),r=vp();function n(i,s,a){for(var l=-1,d=s.length,h={};++l<d;){var f=s[l],p=e(i,f);a(p,f)&&t(h,r(f,i),p)}return h}return e2=n,e2}var t2,Fj;function mH(){if(Fj)return t2;Fj=1;var e=pH(),t=DP();function r(n,i){return e(n,i,function(s,a){return t(n,a)})}return t2=r,t2}var r2,Lj;function gH(){if(Lj)return r2;Lj=1;var e=nR(),t=HP(),r=WP();function n(i){return r(t(i,void 0,e),i+"")}return r2=n,r2}var n2,Oj;function xH(){if(Oj)return n2;Oj=1;var e=mH(),t=gH(),r=t(function(n,i){return n==null?{}:e(n,i)});return n2=r,n2}var i2,Dj;function vH(){if(Dj)return i2;Dj=1;var e=Math.ceil,t=Math.max;function r(n,i,s,a){for(var l=-1,d=t(e((i-n)/(s||1)),0),h=Array(d);d--;)h[a?d:++l]=n,n+=s;return h}return i2=r,i2}var s2,zj;function yH(){if(zj)return s2;zj=1;var e=vH(),t=wp(),r=rR();function n(i){return function(s,a,l){return l&&typeof l!="number"&&t(s,a,l)&&(a=l=void 0),s=r(s),a===void 0?(a=s,s=0):a=r(a),l=l===void 0?s<a?1:-1:r(l),e(s,a,l,i)}}return s2=n,s2}var a2,Uj;function bH(){if(Uj)return a2;Uj=1;var e=yH(),t=e();return a2=t,a2}var o2,Gj;function wH(){if(Gj)return o2;Gj=1;function e(t,r){var n=t.length;for(t.sort(r);n--;)t[n]=t[n].value;return t}return o2=e,o2}var l2,$j;function _H(){if($j)return l2;$j=1;var e=gl();function t(r,n){if(r!==n){var i=r!==void 0,s=r===null,a=r===r,l=e(r),d=n!==void 0,h=n===null,f=n===n,p=e(n);if(!h&&!p&&!l&&r>n||l&&d&&f&&!h&&!p||s&&d&&f||!i&&f||!a)return 1;if(!s&&!l&&!p&&r<n||p&&i&&a&&!s&&!l||h&&i&&a||!d&&a||!f)return-1}return 0}return l2=t,l2}var c2,Bj;function NH(){if(Bj)return c2;Bj=1;var e=_H();function t(r,n,i){for(var s=-1,a=r.criteria,l=n.criteria,d=a.length,h=i.length;++s<d;){var f=e(a[s],l[s]);if(f){if(s>=h)return f;var p=i[s];return f*(p=="desc"?-1:1)}}return r.index-n.index}return c2=t,c2}var u2,qj;function SH(){if(qj)return u2;qj=1;var e=xp(),t=yp(),r=qi(),n=BP(),i=wH(),s=fp(),a=NH(),l=Ua(),d=It();function h(f,p,g){p.length?p=e(p,function(b){return d(b)?function(k){return t(k,b.length===1?b[0]:b)}:b}):p=[l];var x=-1;p=e(p,s(r));var w=n(f,function(b,k,_){var S=e(p,function(v){return v(b)});return{criteria:S,index:++x,value:b}});return i(w,function(b,k){return a(b,k,g)})}return u2=h,u2}var d2,Vj;function jH(){if(Vj)return d2;Vj=1;var e=H5(),t=SH(),r=bp(),n=wp(),i=r(function(s,a){if(s==null)return[];var l=a.length;return l>1&&n(s,a[0],a[1])?a=[]:l>2&&n(a[0],a[1],a[2])&&(a=[a[0]]),t(s,e(a,1),[])});return d2=i,d2}var h2,Hj;function kH(){if(Hj)return h2;Hj=1;var e=LP(),t=0;function r(n){var i=++t;return e(n)+i}return h2=r,h2}var f2,Wj;function CH(){if(Wj)return f2;Wj=1;function e(t,r,n){for(var i=-1,s=t.length,a=r.length,l={};++i<s;){var d=i<a?r[i]:void 0;n(l,t[i],d)}return l}return f2=e,f2}var p2,Kj;function EH(){if(Kj)return p2;Kj=1;var e=dp(),t=CH();function r(n,i){return t(n||[],i||[],e)}return p2=r,p2}var jf;if(typeof R5=="function")try{jf={cloneDeep:qV(),constant:G5(),defaults:VV(),each:TP(),filter:UP(),find:ZV(),flatten:nR(),forEach:EP(),forIn:JV(),has:GP(),isUndefined:$P(),last:eH(),map:qP(),mapValues:tH(),max:nH(),merge:cH(),min:uH(),minBy:dH(),now:hH(),pick:xH(),range:bH(),reduce:VP(),sortBy:jH(),uniqueId:kH(),values:XP(),zipObject:EH()}}catch{}jf||(jf=window._);var ut=jf,TH=_p;function _p(){var e={};e._next=e._prev=e,this._sentinel=e}_p.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return oR(t),t};_p.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&oR(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t};_p.prototype.toString=function(){for(var e=[],t=this._sentinel,r=t._prev;r!==t;)e.push(JSON.stringify(r,PH)),r=r._prev;return"["+e.join(", ")+"]"};function oR(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function PH(e,t){if(e!=="_next"&&e!=="_prev")return t}var Pi=ut,RH=zn.Graph,AH=TH,IH=FH,MH=Pi.constant(1);function FH(e,t){if(e.nodeCount()<=1)return[];var r=OH(e,t||MH),n=LH(r.graph,r.buckets,r.zeroIdx);return Pi.flatten(Pi.map(n,function(i){return e.outEdges(i.v,i.w)}),!0)}function LH(e,t,r){for(var n=[],i=t[t.length-1],s=t[0],a;e.nodeCount();){for(;a=s.dequeue();)m2(e,t,r,a);for(;a=i.dequeue();)m2(e,t,r,a);if(e.nodeCount()){for(var l=t.length-2;l>0;--l)if(a=t[l].dequeue(),a){n=n.concat(m2(e,t,r,a,!0));break}}}return n}function m2(e,t,r,n,i){var s=i?[]:void 0;return Pi.forEach(e.inEdges(n.v),function(a){var l=e.edge(a),d=e.node(a.v);i&&s.push({v:a.v,w:a.w}),d.out-=l,Jb(t,r,d)}),Pi.forEach(e.outEdges(n.v),function(a){var l=e.edge(a),d=a.w,h=e.node(d);h.in-=l,Jb(t,r,h)}),e.removeNode(n.v),s}function OH(e,t){var r=new RH,n=0,i=0;Pi.forEach(e.nodes(),function(l){r.setNode(l,{v:l,in:0,out:0})}),Pi.forEach(e.edges(),function(l){var d=r.edge(l.v,l.w)||0,h=t(l),f=d+h;r.setEdge(l.v,l.w,f),i=Math.max(i,r.node(l.v).out+=h),n=Math.max(n,r.node(l.w).in+=h)});var s=Pi.range(i+n+3).map(function(){return new AH}),a=n+1;return Pi.forEach(r.nodes(),function(l){Jb(s,a,r.node(l))}),{graph:r,buckets:s,zeroIdx:a}}function Jb(e,t,r){r.out?r.in?e[r.out-r.in+t].enqueue(r):e[e.length-1].enqueue(r):e[0].enqueue(r)}var wa=ut,DH=IH,zH={run:UH,undo:$H};function UH(e){var t=e.graph().acyclicer==="greedy"?DH(e,r(e)):GH(e);wa.forEach(t,function(n){var i=e.edge(n);e.removeEdge(n),i.forwardName=n.name,i.reversed=!0,e.setEdge(n.w,n.v,i,wa.uniqueId("rev"))});function r(n){return function(i){return n.edge(i).weight}}}function GH(e){var t=[],r={},n={};function i(s){wa.has(n,s)||(n[s]=!0,r[s]=!0,wa.forEach(e.outEdges(s),function(a){wa.has(r,a.w)?t.push(a):i(a.w)}),delete r[s])}return wa.forEach(e.nodes(),i),t}function $H(e){wa.forEach(e.edges(),function(t){var r=e.edge(t);if(r.reversed){e.removeEdge(t);var n=r.forwardName;delete r.reversed,delete r.forwardName,e.setEdge(t.w,t.v,r,n)}})}var He=ut,lR=zn.Graph,Mr={addDummyNode:cR,simplify:BH,asNonCompoundGraph:qH,successorWeights:VH,predecessorWeights:HH,intersectRect:WH,buildLayerMatrix:KH,normalizeRanks:YH,removeEmptyRanks:XH,addBorderNode:QH,maxRank:uR,partition:ZH,time:JH,notime:eW};function cR(e,t,r,n){var i;do i=He.uniqueId(n);while(e.hasNode(i));return r.dummy=t,e.setNode(i,r),i}function BH(e){var t=new lR().setGraph(e.graph());return He.forEach(e.nodes(),function(r){t.setNode(r,e.node(r))}),He.forEach(e.edges(),function(r){var n=t.edge(r.v,r.w)||{weight:0,minlen:1},i=e.edge(r);t.setEdge(r.v,r.w,{weight:n.weight+i.weight,minlen:Math.max(n.minlen,i.minlen)})}),t}function qH(e){var t=new lR({multigraph:e.isMultigraph()}).setGraph(e.graph());return He.forEach(e.nodes(),function(r){e.children(r).length||t.setNode(r,e.node(r))}),He.forEach(e.edges(),function(r){t.setEdge(r,e.edge(r))}),t}function VH(e){var t=He.map(e.nodes(),function(r){var n={};return He.forEach(e.outEdges(r),function(i){n[i.w]=(n[i.w]||0)+e.edge(i).weight}),n});return He.zipObject(e.nodes(),t)}function HH(e){var t=He.map(e.nodes(),function(r){var n={};return He.forEach(e.inEdges(r),function(i){n[i.v]=(n[i.v]||0)+e.edge(i).weight}),n});return He.zipObject(e.nodes(),t)}function WH(e,t){var r=e.x,n=e.y,i=t.x-r,s=t.y-n,a=e.width/2,l=e.height/2;if(!i&&!s)throw new Error("Not possible to find intersection inside of the rectangle");var d,h;return Math.abs(s)*a>Math.abs(i)*l?(s<0&&(l=-l),d=l*i/s,h=l):(i<0&&(a=-a),d=a,h=a*s/i),{x:r+d,y:n+h}}function KH(e){var t=He.map(He.range(uR(e)+1),function(){return[]});return He.forEach(e.nodes(),function(r){var n=e.node(r),i=n.rank;He.isUndefined(i)||(t[i][n.order]=r)}),t}function YH(e){var t=He.min(He.map(e.nodes(),function(r){return e.node(r).rank}));He.forEach(e.nodes(),function(r){var n=e.node(r);He.has(n,"rank")&&(n.rank-=t)})}function XH(e){var t=He.min(He.map(e.nodes(),function(s){return e.node(s).rank})),r=[];He.forEach(e.nodes(),function(s){var a=e.node(s).rank-t;r[a]||(r[a]=[]),r[a].push(s)});var n=0,i=e.graph().nodeRankFactor;He.forEach(r,function(s,a){He.isUndefined(s)&&a%i!==0?--n:n&&He.forEach(s,function(l){e.node(l).rank+=n})})}function QH(e,t,r,n){var i={width:0,height:0};return arguments.length>=4&&(i.rank=r,i.order=n),cR(e,"border",i,t)}function uR(e){return He.max(He.map(e.nodes(),function(t){var r=e.node(t).rank;if(!He.isUndefined(r))return r}))}function ZH(e,t){var r={lhs:[],rhs:[]};return He.forEach(e,function(n){t(n)?r.lhs.push(n):r.rhs.push(n)}),r}function JH(e,t){var r=He.now();try{return t()}finally{console.log(e+" time: "+(He.now()-r)+"ms")}}function eW(e,t){return t()}var dR=ut,tW=Mr,rW={run:nW,undo:sW};function nW(e){e.graph().dummyChains=[],dR.forEach(e.edges(),function(t){iW(e,t)})}function iW(e,t){var r=t.v,n=e.node(r).rank,i=t.w,s=e.node(i).rank,a=t.name,l=e.edge(t),d=l.labelRank;if(s!==n+1){e.removeEdge(t);var h,f,p;for(p=0,++n;n<s;++p,++n)l.points=[],f={width:0,height:0,edgeLabel:l,edgeObj:t,rank:n},h=tW.addDummyNode(e,"edge",f,"_d"),n===d&&(f.width=l.width,f.height=l.height,f.dummy="edge-label",f.labelpos=l.labelpos),e.setEdge(r,h,{weight:l.weight},a),p===0&&e.graph().dummyChains.push(h),r=h;e.setEdge(r,i,{weight:l.weight},a)}}function sW(e){dR.forEach(e.graph().dummyChains,function(t){var r=e.node(t),n=r.edgeLabel,i;for(e.setEdge(r.edgeObj,n);r.dummy;)i=e.successors(t)[0],e.removeNode(t),n.points.push({x:r.x,y:r.y}),r.dummy==="edge-label"&&(n.x=r.x,n.y=r.y,n.width=r.width,n.height=r.height),t=i,r=e.node(t)})}var ph=ut,Np={longestPath:aW,slack:oW};function aW(e){var t={};function r(n){var i=e.node(n);if(ph.has(t,n))return i.rank;t[n]=!0;var s=ph.min(ph.map(e.outEdges(n),function(a){return r(a.w)-e.edge(a).minlen}));return(s===Number.POSITIVE_INFINITY||s===void 0||s===null)&&(s=0),i.rank=s}ph.forEach(e.sources(),r)}function oW(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var kf=ut,lW=zn.Graph,Cf=Np.slack,hR=cW;function cW(e){var t=new lW({directed:!1}),r=e.nodes()[0],n=e.nodeCount();t.setNode(r,{});for(var i,s;uW(t,e)<n;)i=dW(t,e),s=t.hasNode(i.v)?Cf(e,i):-Cf(e,i),hW(t,e,s);return t}function uW(e,t){function r(n){kf.forEach(t.nodeEdges(n),function(i){var s=i.v,a=n===s?i.w:s;!e.hasNode(a)&&!Cf(t,i)&&(e.setNode(a,{}),e.setEdge(n,a,{}),r(a))})}return kf.forEach(e.nodes(),r),e.nodeCount()}function dW(e,t){return kf.minBy(t.edges(),function(r){if(e.hasNode(r.v)!==e.hasNode(r.w))return Cf(t,r)})}function hW(e,t,r){kf.forEach(e.nodes(),function(n){t.node(n).rank+=r})}var Ui=ut,fW=hR,pW=Np.slack,mW=Np.longestPath,gW=zn.alg.preorder,xW=zn.alg.postorder,vW=Mr.simplify,yW=Ga;Ga.initLowLimValues=X5;Ga.initCutValues=Y5;Ga.calcCutValue=fR;Ga.leaveEdge=mR;Ga.enterEdge=gR;Ga.exchangeEdges=xR;function Ga(e){e=vW(e),mW(e);var t=fW(e);X5(t),Y5(t,e);for(var r,n;r=mR(t);)n=gR(t,e,r),xR(t,e,r,n)}function Y5(e,t){var r=xW(e,e.nodes());r=r.slice(0,r.length-1),Ui.forEach(r,function(n){bW(e,t,n)})}function bW(e,t,r){var n=e.node(r),i=n.parent;e.edge(r,i).cutvalue=fR(e,t,r)}function fR(e,t,r){var n=e.node(r),i=n.parent,s=!0,a=t.edge(r,i),l=0;return a||(s=!1,a=t.edge(i,r)),l=a.weight,Ui.forEach(t.nodeEdges(r),function(d){var h=d.v===r,f=h?d.w:d.v;if(f!==i){var p=h===s,g=t.edge(d).weight;if(l+=p?g:-g,_W(e,r,f)){var x=e.edge(r,f).cutvalue;l+=p?-x:x}}}),l}function X5(e,t){arguments.length<2&&(t=e.nodes()[0]),pR(e,{},1,t)}function pR(e,t,r,n,i){var s=r,a=e.node(n);return t[n]=!0,Ui.forEach(e.neighbors(n),function(l){Ui.has(t,l)||(r=pR(e,t,r,l,n))}),a.low=s,a.lim=r++,i?a.parent=i:delete a.parent,r}function mR(e){return Ui.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function gR(e,t,r){var n=r.v,i=r.w;t.hasEdge(n,i)||(n=r.w,i=r.v);var s=e.node(n),a=e.node(i),l=s,d=!1;s.lim>a.lim&&(l=a,d=!0);var h=Ui.filter(t.edges(),function(f){return d===Yj(e,e.node(f.v),l)&&d!==Yj(e,e.node(f.w),l)});return Ui.minBy(h,function(f){return pW(t,f)})}function xR(e,t,r,n){var i=r.v,s=r.w;e.removeEdge(i,s),e.setEdge(n.v,n.w,{}),X5(e),Y5(e,t),wW(e,t)}function wW(e,t){var r=Ui.find(e.nodes(),function(i){return!t.node(i).parent}),n=gW(e,r);n=n.slice(1),Ui.forEach(n,function(i){var s=e.node(i).parent,a=t.edge(i,s),l=!1;a||(a=t.edge(s,i),l=!0),t.node(i).rank=t.node(s).rank+(l?a.minlen:-a.minlen)})}function _W(e,t,r){return e.hasEdge(t,r)}function Yj(e,t,r){return r.low<=t.lim&&t.lim<=r.lim}var NW=Np,vR=NW.longestPath,SW=hR,jW=yW,kW=CW;function CW(e){switch(e.graph().ranker){case"network-simplex":Xj(e);break;case"tight-tree":TW(e);break;case"longest-path":EW(e);break;default:Xj(e)}}var EW=vR;function TW(e){vR(e),SW(e)}function Xj(e){jW(e)}var ew=ut,PW=RW;function RW(e){var t=IW(e);ew.forEach(e.graph().dummyChains,function(r){for(var n=e.node(r),i=n.edgeObj,s=AW(e,t,i.v,i.w),a=s.path,l=s.lca,d=0,h=a[d],f=!0;r!==i.w;){if(n=e.node(r),f){for(;(h=a[d])!==l&&e.node(h).maxRank<n.rank;)d++;h===l&&(f=!1)}if(!f){for(;d<a.length-1&&e.node(h=a[d+1]).minRank<=n.rank;)d++;h=a[d]}e.setParent(r,h),r=e.successors(r)[0]}})}function AW(e,t,r,n){var i=[],s=[],a=Math.min(t[r].low,t[n].low),l=Math.max(t[r].lim,t[n].lim),d,h;d=r;do d=e.parent(d),i.push(d);while(d&&(t[d].low>a||l>t[d].lim));for(h=d,d=n;(d=e.parent(d))!==h;)s.push(d);return{path:i.concat(s.reverse()),lca:h}}function IW(e){var t={},r=0;function n(i){var s=r;ew.forEach(e.children(i),n),t[i]={low:s,lim:r++}}return ew.forEach(e.children(),n),t}var Ri=ut,tw=Mr,MW={run:FW,cleanup:DW};function FW(e){var t=tw.addDummyNode(e,"root",{},"_root"),r=LW(e),n=Ri.max(Ri.values(r))-1,i=2*n+1;e.graph().nestingRoot=t,Ri.forEach(e.edges(),function(a){e.edge(a).minlen*=i});var s=OW(e)+1;Ri.forEach(e.children(),function(a){yR(e,t,i,s,n,r,a)}),e.graph().nodeRankFactor=i}function yR(e,t,r,n,i,s,a){var l=e.children(a);if(!l.length){a!==t&&e.setEdge(t,a,{weight:0,minlen:r});return}var d=tw.addBorderNode(e,"_bt"),h=tw.addBorderNode(e,"_bb"),f=e.node(a);e.setParent(d,a),f.borderTop=d,e.setParent(h,a),f.borderBottom=h,Ri.forEach(l,function(p){yR(e,t,r,n,i,s,p);var g=e.node(p),x=g.borderTop?g.borderTop:p,w=g.borderBottom?g.borderBottom:p,b=g.borderTop?n:2*n,k=x!==w?1:i-s[a]+1;e.setEdge(d,x,{weight:b,minlen:k,nestingEdge:!0}),e.setEdge(w,h,{weight:b,minlen:k,nestingEdge:!0})}),e.parent(a)||e.setEdge(t,d,{weight:0,minlen:i+s[a]})}function LW(e){var t={};function r(n,i){var s=e.children(n);s&&s.length&&Ri.forEach(s,function(a){r(a,i+1)}),t[n]=i}return Ri.forEach(e.children(),function(n){r(n,1)}),t}function OW(e){return Ri.reduce(e.edges(),function(t,r){return t+e.edge(r).weight},0)}function DW(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,Ri.forEach(e.edges(),function(r){var n=e.edge(r);n.nestingEdge&&e.removeEdge(r)})}var g2=ut,zW=Mr,UW=GW;function GW(e){function t(r){var n=e.children(r),i=e.node(r);if(n.length&&g2.forEach(n,t),g2.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var s=i.minRank,a=i.maxRank+1;s<a;++s)Qj(e,"borderLeft","_bl",r,i,s),Qj(e,"borderRight","_br",r,i,s)}}g2.forEach(e.children(),t)}function Qj(e,t,r,n,i,s){var a={width:0,height:0,rank:s,borderType:t},l=i[t][s-1],d=zW.addDummyNode(e,"border",a,r);i[t][s]=d,e.setParent(d,n),l&&e.setEdge(l,d,{weight:1})}var ni=ut,$W={adjust:BW,undo:qW};function BW(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&bR(e)}function qW(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&VW(e),(t==="lr"||t==="rl")&&(HW(e),bR(e))}function bR(e){ni.forEach(e.nodes(),function(t){Zj(e.node(t))}),ni.forEach(e.edges(),function(t){Zj(e.edge(t))})}function Zj(e){var t=e.width;e.width=e.height,e.height=t}function VW(e){ni.forEach(e.nodes(),function(t){x2(e.node(t))}),ni.forEach(e.edges(),function(t){var r=e.edge(t);ni.forEach(r.points,x2),ni.has(r,"y")&&x2(r)})}function x2(e){e.y=-e.y}function HW(e){ni.forEach(e.nodes(),function(t){v2(e.node(t))}),ni.forEach(e.edges(),function(t){var r=e.edge(t);ni.forEach(r.points,v2),ni.has(r,"x")&&v2(r)})}function v2(e){var t=e.x;e.x=e.y,e.y=t}var _i=ut,WW=KW;function KW(e){var t={},r=_i.filter(e.nodes(),function(l){return!e.children(l).length}),n=_i.max(_i.map(r,function(l){return e.node(l).rank})),i=_i.map(_i.range(n+1),function(){return[]});function s(l){if(!_i.has(t,l)){t[l]=!0;var d=e.node(l);i[d.rank].push(l),_i.forEach(e.successors(l),s)}}var a=_i.sortBy(r,function(l){return e.node(l).rank});return _i.forEach(a,s),i}var cs=ut,YW=XW;function XW(e,t){for(var r=0,n=1;n<t.length;++n)r+=QW(e,t[n-1],t[n]);return r}function QW(e,t,r){for(var n=cs.zipObject(r,cs.map(r,function(h,f){return f})),i=cs.flatten(cs.map(t,function(h){return cs.sortBy(cs.map(e.outEdges(h),function(f){return{pos:n[f.w],weight:e.edge(f).weight}}),"pos")}),!0),s=1;s<r.length;)s<<=1;var a=2*s-1;s-=1;var l=cs.map(new Array(a),function(){return 0}),d=0;return cs.forEach(i.forEach(function(h){var f=h.pos+s;l[f]+=h.weight;for(var p=0;f>0;)f%2&&(p+=l[f+1]),f=f-1>>1,l[f]+=h.weight;d+=h.weight*p})),d}var Jj=ut,ZW=JW;function JW(e,t){return Jj.map(t,function(r){var n=e.inEdges(r);if(n.length){var i=Jj.reduce(n,function(s,a){var l=e.edge(a),d=e.node(a.v);return{sum:s.sum+l.weight*d.order,weight:s.weight+l.weight}},{sum:0,weight:0});return{v:r,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:r}})}var Ur=ut,eK=tK;function tK(e,t){var r={};Ur.forEach(e,function(i,s){var a=r[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:s};Ur.isUndefined(i.barycenter)||(a.barycenter=i.barycenter,a.weight=i.weight)}),Ur.forEach(t.edges(),function(i){var s=r[i.v],a=r[i.w];!Ur.isUndefined(s)&&!Ur.isUndefined(a)&&(a.indegree++,s.out.push(r[i.w]))});var n=Ur.filter(r,function(i){return!i.indegree});return rK(n)}function rK(e){var t=[];function r(s){return function(a){a.merged||(Ur.isUndefined(a.barycenter)||Ur.isUndefined(s.barycenter)||a.barycenter>=s.barycenter)&&nK(s,a)}}function n(s){return function(a){a.in.push(s),--a.indegree===0&&e.push(a)}}for(;e.length;){var i=e.pop();t.push(i),Ur.forEach(i.in.reverse(),r(i)),Ur.forEach(i.out,n(i))}return Ur.map(Ur.filter(t,function(s){return!s.merged}),function(s){return Ur.pick(s,["vs","i","barycenter","weight"])})}function nK(e,t){var r=0,n=0;e.weight&&(r+=e.barycenter*e.weight,n+=e.weight),t.weight&&(r+=t.barycenter*t.weight,n+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=r/n,e.weight=n,e.i=Math.min(t.i,e.i),t.merged=!0}var Ec=ut,iK=Mr,sK=aK;function aK(e,t){var r=iK.partition(e,function(f){return Ec.has(f,"barycenter")}),n=r.lhs,i=Ec.sortBy(r.rhs,function(f){return-f.i}),s=[],a=0,l=0,d=0;n.sort(oK(!!t)),d=e7(s,i,d),Ec.forEach(n,function(f){d+=f.vs.length,s.push(f.vs),a+=f.barycenter*f.weight,l+=f.weight,d=e7(s,i,d)});var h={vs:Ec.flatten(s,!0)};return l&&(h.barycenter=a/l,h.weight=l),h}function e7(e,t,r){for(var n;t.length&&(n=Ec.last(t)).i<=r;)t.pop(),e.push(n.vs),r++;return r}function oK(e){return function(t,r){return t.barycenter<r.barycenter?-1:t.barycenter>r.barycenter?1:e?r.i-t.i:t.i-r.i}}var ys=ut,lK=ZW,cK=eK,uK=sK,dK=wR;function wR(e,t,r,n){var i=e.children(t),s=e.node(t),a=s?s.borderLeft:void 0,l=s?s.borderRight:void 0,d={};a&&(i=ys.filter(i,function(w){return w!==a&&w!==l}));var h=lK(e,i);ys.forEach(h,function(w){if(e.children(w.v).length){var b=wR(e,w.v,r,n);d[w.v]=b,ys.has(b,"barycenter")&&fK(w,b)}});var f=cK(h,r);hK(f,d);var p=uK(f,n);if(a&&(p.vs=ys.flatten([a,p.vs,l],!0),e.predecessors(a).length)){var g=e.node(e.predecessors(a)[0]),x=e.node(e.predecessors(l)[0]);ys.has(p,"barycenter")||(p.barycenter=0,p.weight=0),p.barycenter=(p.barycenter*p.weight+g.order+x.order)/(p.weight+2),p.weight+=2}return p}function hK(e,t){ys.forEach(e,function(r){r.vs=ys.flatten(r.vs.map(function(n){return t[n]?t[n].vs:n}),!0)})}function fK(e,t){ys.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var Tc=ut,pK=zn.Graph,mK=gK;function gK(e,t,r){var n=xK(e),i=new pK({compound:!0}).setGraph({root:n}).setDefaultNodeLabel(function(s){return e.node(s)});return Tc.forEach(e.nodes(),function(s){var a=e.node(s),l=e.parent(s);(a.rank===t||a.minRank<=t&&t<=a.maxRank)&&(i.setNode(s),i.setParent(s,l||n),Tc.forEach(e[r](s),function(d){var h=d.v===s?d.w:d.v,f=i.edge(h,s),p=Tc.isUndefined(f)?0:f.weight;i.setEdge(h,s,{weight:e.edge(d).weight+p})}),Tc.has(a,"minRank")&&i.setNode(s,{borderLeft:a.borderLeft[t],borderRight:a.borderRight[t]}))}),i}function xK(e){for(var t;e.hasNode(t=Tc.uniqueId("_root")););return t}var vK=ut,yK=bK;function bK(e,t,r){var n={},i;vK.forEach(r,function(s){for(var a=e.parent(s),l,d;a;){if(l=e.parent(a),l?(d=n[l],n[l]=a):(d=i,i=a),d&&d!==a){t.setEdge(d,a);return}a=l}})}var Ms=ut,wK=WW,_K=YW,NK=dK,SK=mK,jK=yK,kK=zn.Graph,t7=Mr,CK=EK;function EK(e){var t=t7.maxRank(e),r=r7(e,Ms.range(1,t+1),"inEdges"),n=r7(e,Ms.range(t-1,-1,-1),"outEdges"),i=wK(e);n7(e,i);for(var s=Number.POSITIVE_INFINITY,a,l=0,d=0;d<4;++l,++d){TK(l%2?r:n,l%4>=2),i=t7.buildLayerMatrix(e);var h=_K(e,i);h<s&&(d=0,a=Ms.cloneDeep(i),s=h)}n7(e,a)}function r7(e,t,r){return Ms.map(t,function(n){return SK(e,n,r)})}function TK(e,t){var r=new kK;Ms.forEach(e,function(n){var i=n.graph().root,s=NK(n,i,r,t);Ms.forEach(s.vs,function(a,l){n.node(a).order=l}),jK(n,r,s.vs)})}function n7(e,t){Ms.forEach(t,function(r){Ms.forEach(r,function(n,i){e.node(n).order=i})})}var Ce=ut,PK=zn.Graph,RK=Mr,AK={positionX:FK,findType1Conflicts:_R,findType2Conflicts:NR,addConflict:Q5,hasConflict:SR,verticalAlignment:jR,horizontalCompaction:kR,alignCoordinates:ER,findSmallestWidthAlignment:CR,balance:TR};function _R(e,t){var r={};function n(i,s){var a=0,l=0,d=i.length,h=Ce.last(s);return Ce.forEach(s,function(f,p){var g=IK(e,f),x=g?e.node(g).order:d;(g||f===h)&&(Ce.forEach(s.slice(l,p+1),function(w){Ce.forEach(e.predecessors(w),function(b){var k=e.node(b),_=k.order;(_<a||x<_)&&!(k.dummy&&e.node(w).dummy)&&Q5(r,b,w)})}),l=p+1,a=x)}),s}return Ce.reduce(t,n),r}function NR(e,t){var r={};function n(s,a,l,d,h){var f;Ce.forEach(Ce.range(a,l),function(p){f=s[p],e.node(f).dummy&&Ce.forEach(e.predecessors(f),function(g){var x=e.node(g);x.dummy&&(x.order<d||x.order>h)&&Q5(r,g,f)})})}function i(s,a){var l=-1,d,h=0;return Ce.forEach(a,function(f,p){if(e.node(f).dummy==="border"){var g=e.predecessors(f);g.length&&(d=e.node(g[0]).order,n(a,h,p,l,d),h=p,l=d)}n(a,h,a.length,d,s.length)}),a}return Ce.reduce(t,i),r}function IK(e,t){if(e.node(t).dummy)return Ce.find(e.predecessors(t),function(r){return e.node(r).dummy})}function Q5(e,t,r){if(t>r){var n=t;t=r,r=n}var i=e[t];i||(e[t]=i={}),i[r]=!0}function SR(e,t,r){if(t>r){var n=t;t=r,r=n}return Ce.has(e[t],r)}function jR(e,t,r,n){var i={},s={},a={};return Ce.forEach(t,function(l){Ce.forEach(l,function(d,h){i[d]=d,s[d]=d,a[d]=h})}),Ce.forEach(t,function(l){var d=-1;Ce.forEach(l,function(h){var f=n(h);if(f.length){f=Ce.sortBy(f,function(b){return a[b]});for(var p=(f.length-1)/2,g=Math.floor(p),x=Math.ceil(p);g<=x;++g){var w=f[g];s[h]===h&&d<a[w]&&!SR(r,h,w)&&(s[w]=h,s[h]=i[h]=i[w],d=a[w])}}})}),{root:i,align:s}}function kR(e,t,r,n,i){var s={},a=MK(e,t,r,i),l=i?"borderLeft":"borderRight";function d(p,g){for(var x=a.nodes(),w=x.pop(),b={};w;)b[w]?p(w):(b[w]=!0,x.push(w),x=x.concat(g(w))),w=x.pop()}function h(p){s[p]=a.inEdges(p).reduce(function(g,x){return Math.max(g,s[x.v]+a.edge(x))},0)}function f(p){var g=a.outEdges(p).reduce(function(w,b){return Math.min(w,s[b.w]-a.edge(b))},Number.POSITIVE_INFINITY),x=e.node(p);g!==Number.POSITIVE_INFINITY&&x.borderType!==l&&(s[p]=Math.max(s[p],g))}return d(h,a.predecessors.bind(a)),d(f,a.successors.bind(a)),Ce.forEach(n,function(p){s[p]=s[r[p]]}),s}function MK(e,t,r,n){var i=new PK,s=e.graph(),a=LK(s.nodesep,s.edgesep,n);return Ce.forEach(t,function(l){var d;Ce.forEach(l,function(h){var f=r[h];if(i.setNode(f),d){var p=r[d],g=i.edge(p,f);i.setEdge(p,f,Math.max(a(e,h,d),g||0))}d=h})}),i}function CR(e,t){return Ce.minBy(Ce.values(t),function(r){var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return Ce.forIn(r,function(s,a){var l=OK(e,a)/2;n=Math.max(s+l,n),i=Math.min(s-l,i)}),n-i})}function ER(e,t){var r=Ce.values(t),n=Ce.min(r),i=Ce.max(r);Ce.forEach(["u","d"],function(s){Ce.forEach(["l","r"],function(a){var l=s+a,d=e[l],h;if(d!==t){var f=Ce.values(d);h=a==="l"?n-Ce.min(f):i-Ce.max(f),h&&(e[l]=Ce.mapValues(d,function(p){return p+h}))}})})}function TR(e,t){return Ce.mapValues(e.ul,function(r,n){if(t)return e[t.toLowerCase()][n];var i=Ce.sortBy(Ce.map(e,n));return(i[1]+i[2])/2})}function FK(e){var t=RK.buildLayerMatrix(e),r=Ce.merge(_R(e,t),NR(e,t)),n={},i;Ce.forEach(["u","d"],function(a){i=a==="u"?t:Ce.values(t).reverse(),Ce.forEach(["l","r"],function(l){l==="r"&&(i=Ce.map(i,function(p){return Ce.values(p).reverse()}));var d=(a==="u"?e.predecessors:e.successors).bind(e),h=jR(e,i,r,d),f=kR(e,i,h.root,h.align,l==="r");l==="r"&&(f=Ce.mapValues(f,function(p){return-p})),n[a+l]=f})});var s=CR(e,n);return ER(n,s),TR(n,e.graph().align)}function LK(e,t,r){return function(n,i,s){var a=n.node(i),l=n.node(s),d=0,h;if(d+=a.width/2,Ce.has(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":h=-a.width/2;break;case"r":h=a.width/2;break}if(h&&(d+=r?h:-h),h=0,d+=(a.dummy?t:e)/2,d+=(l.dummy?t:e)/2,d+=l.width/2,Ce.has(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":h=l.width/2;break;case"r":h=-l.width/2;break}return h&&(d+=r?h:-h),h=0,d}}function OK(e,t){return e.node(t).width}var Pc=ut,PR=Mr,DK=AK.positionX,zK=UK;function UK(e){e=PR.asNonCompoundGraph(e),GK(e),Pc.forEach(DK(e),function(t,r){e.node(r).x=t})}function GK(e){var t=PR.buildLayerMatrix(e),r=e.graph().ranksep,n=0;Pc.forEach(t,function(i){var s=Pc.max(Pc.map(i,function(a){return e.node(a).height}));Pc.forEach(i,function(a){e.node(a).y=n+s/2}),n+=s+r})}var Ie=ut,i7=zH,s7=rW,$K=kW,BK=Mr.normalizeRanks,qK=PW,VK=Mr.removeEmptyRanks,a7=MW,HK=UW,o7=$W,WK=CK,KK=zK,Ds=Mr,YK=zn.Graph,XK=QK;function QK(e,t){var r=t&&t.debugTiming?Ds.time:Ds.notime;r("layout",function(){var n=r("  buildLayoutGraph",function(){return lY(e)});r("  runLayout",function(){ZK(n,r)}),r("  updateInputGraph",function(){JK(e,n)})})}function ZK(e,t){t("    makeSpaceForEdgeLabels",function(){cY(e)}),t("    removeSelfEdges",function(){vY(e)}),t("    acyclic",function(){i7.run(e)}),t("    nestingGraph.run",function(){a7.run(e)}),t("    rank",function(){$K(Ds.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){uY(e)}),t("    removeEmptyRanks",function(){VK(e)}),t("    nestingGraph.cleanup",function(){a7.cleanup(e)}),t("    normalizeRanks",function(){BK(e)}),t("    assignRankMinMax",function(){dY(e)}),t("    removeEdgeLabelProxies",function(){hY(e)}),t("    normalize.run",function(){s7.run(e)}),t("    parentDummyChains",function(){qK(e)}),t("    addBorderSegments",function(){HK(e)}),t("    order",function(){WK(e)}),t("    insertSelfEdges",function(){yY(e)}),t("    adjustCoordinateSystem",function(){o7.adjust(e)}),t("    position",function(){KK(e)}),t("    positionSelfEdges",function(){bY(e)}),t("    removeBorderNodes",function(){xY(e)}),t("    normalize.undo",function(){s7.undo(e)}),t("    fixupEdgeLabelCoords",function(){mY(e)}),t("    undoCoordinateSystem",function(){o7.undo(e)}),t("    translateGraph",function(){fY(e)}),t("    assignNodeIntersects",function(){pY(e)}),t("    reversePoints",function(){gY(e)}),t("    acyclic.undo",function(){i7.undo(e)})}function JK(e,t){Ie.forEach(e.nodes(),function(r){var n=e.node(r),i=t.node(r);n&&(n.x=i.x,n.y=i.y,t.children(r).length&&(n.width=i.width,n.height=i.height))}),Ie.forEach(e.edges(),function(r){var n=e.edge(r),i=t.edge(r);n.points=i.points,Ie.has(i,"x")&&(n.x=i.x,n.y=i.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var eY=["nodesep","edgesep","ranksep","marginx","marginy"],tY={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},rY=["acyclicer","ranker","rankdir","align"],nY=["width","height"],iY={width:0,height:0},sY=["minlen","weight","width","height","labeloffset"],aY={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},oY=["labelpos"];function lY(e){var t=new YK({multigraph:!0,compound:!0}),r=b2(e.graph());return t.setGraph(Ie.merge({},tY,y2(r,eY),Ie.pick(r,rY))),Ie.forEach(e.nodes(),function(n){var i=b2(e.node(n));t.setNode(n,Ie.defaults(y2(i,nY),iY)),t.setParent(n,e.parent(n))}),Ie.forEach(e.edges(),function(n){var i=b2(e.edge(n));t.setEdge(n,Ie.merge({},aY,y2(i,sY),Ie.pick(i,oY)))}),t}function cY(e){var t=e.graph();t.ranksep/=2,Ie.forEach(e.edges(),function(r){var n=e.edge(r);n.minlen*=2,n.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?n.width+=n.labeloffset:n.height+=n.labeloffset)})}function uY(e){Ie.forEach(e.edges(),function(t){var r=e.edge(t);if(r.width&&r.height){var n=e.node(t.v),i=e.node(t.w),s={rank:(i.rank-n.rank)/2+n.rank,e:t};Ds.addDummyNode(e,"edge-proxy",s,"_ep")}})}function dY(e){var t=0;Ie.forEach(e.nodes(),function(r){var n=e.node(r);n.borderTop&&(n.minRank=e.node(n.borderTop).rank,n.maxRank=e.node(n.borderBottom).rank,t=Ie.max(t,n.maxRank))}),e.graph().maxRank=t}function hY(e){Ie.forEach(e.nodes(),function(t){var r=e.node(t);r.dummy==="edge-proxy"&&(e.edge(r.e).labelRank=r.rank,e.removeNode(t))})}function fY(e){var t=Number.POSITIVE_INFINITY,r=0,n=Number.POSITIVE_INFINITY,i=0,s=e.graph(),a=s.marginx||0,l=s.marginy||0;function d(h){var f=h.x,p=h.y,g=h.width,x=h.height;t=Math.min(t,f-g/2),r=Math.max(r,f+g/2),n=Math.min(n,p-x/2),i=Math.max(i,p+x/2)}Ie.forEach(e.nodes(),function(h){d(e.node(h))}),Ie.forEach(e.edges(),function(h){var f=e.edge(h);Ie.has(f,"x")&&d(f)}),t-=a,n-=l,Ie.forEach(e.nodes(),function(h){var f=e.node(h);f.x-=t,f.y-=n}),Ie.forEach(e.edges(),function(h){var f=e.edge(h);Ie.forEach(f.points,function(p){p.x-=t,p.y-=n}),Ie.has(f,"x")&&(f.x-=t),Ie.has(f,"y")&&(f.y-=n)}),s.width=r-t+a,s.height=i-n+l}function pY(e){Ie.forEach(e.edges(),function(t){var r=e.edge(t),n=e.node(t.v),i=e.node(t.w),s,a;r.points?(s=r.points[0],a=r.points[r.points.length-1]):(r.points=[],s=i,a=n),r.points.unshift(Ds.intersectRect(n,s)),r.points.push(Ds.intersectRect(i,a))})}function mY(e){Ie.forEach(e.edges(),function(t){var r=e.edge(t);if(Ie.has(r,"x"))switch((r.labelpos==="l"||r.labelpos==="r")&&(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset;break}})}function gY(e){Ie.forEach(e.edges(),function(t){var r=e.edge(t);r.reversed&&r.points.reverse()})}function xY(e){Ie.forEach(e.nodes(),function(t){if(e.children(t).length){var r=e.node(t),n=e.node(r.borderTop),i=e.node(r.borderBottom),s=e.node(Ie.last(r.borderLeft)),a=e.node(Ie.last(r.borderRight));r.width=Math.abs(a.x-s.x),r.height=Math.abs(i.y-n.y),r.x=s.x+r.width/2,r.y=n.y+r.height/2}}),Ie.forEach(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function vY(e){Ie.forEach(e.edges(),function(t){if(t.v===t.w){var r=e.node(t.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function yY(e){var t=Ds.buildLayerMatrix(e);Ie.forEach(t,function(r){var n=0;Ie.forEach(r,function(i,s){var a=e.node(i);a.order=s+n,Ie.forEach(a.selfEdges,function(l){Ds.addDummyNode(e,"selfedge",{width:l.label.width,height:l.label.height,rank:a.rank,order:s+ ++n,e:l.e,label:l.label},"_se")}),delete a.selfEdges})})}function bY(e){Ie.forEach(e.nodes(),function(t){var r=e.node(t);if(r.dummy==="selfedge"){var n=e.node(r.e.v),i=n.x+n.width/2,s=n.y,a=r.x-i,l=n.height/2;e.setEdge(r.e,r.label),e.removeNode(t),r.label.points=[{x:i+2*a/3,y:s-l},{x:i+5*a/6,y:s-l},{x:i+a,y:s},{x:i+5*a/6,y:s+l},{x:i+2*a/3,y:s+l}],r.label.x=r.x,r.label.y=r.y}})}function y2(e,t){return Ie.mapValues(Ie.pick(e,t),Number)}function b2(e){var t={};return Ie.forEach(e,function(r,n){t[n.toLowerCase()]=r}),t}var mh=ut,wY=Mr,_Y=zn.Graph,NY={debugOrdering:SY};function SY(e){var t=wY.buildLayerMatrix(e),r=new _Y({compound:!0,multigraph:!0}).setGraph({});return mh.forEach(e.nodes(),function(n){r.setNode(n,{label:n}),r.setParent(n,"layer"+e.node(n).rank)}),mh.forEach(e.edges(),function(n){r.setEdge(n.v,n.w,{},n.name)}),mh.forEach(t,function(n,i){var s="layer"+i;r.setNode(s,{rank:"same"}),mh.reduce(n,function(a,l){return r.setEdge(a,l,{style:"invis"}),l})}),r}var jY="0.8.5",kY={graphlib:zn,layout:XK,debug:NY,util:{time:Mr.time,notime:Mr.notime},version:jY};const l7=vu(kY),CY=()=>{Kr();const e=P.useRef(null),[t,r,n]=SB([]),[i,s,a]=jB([]),[l,d]=P.useState([]),[h,f]=P.useState([]),[p,g]=P.useState("All"),[x,w]=P.useState(""),[b,k]=P.useState(!0),[_,S]=P.useState(null);P.useEffect(()=>{v()},[]),P.useEffect(()=>{j()},[l,p,x,t]);const v=async()=>{k(!0);try{const I=await he.get("/world-bible/entities");d(I),r([]),s([])}catch(I){console.error("Failed to load data",I)}finally{k(!1)}},j=()=>{let I=l;if(p!=="All"&&(I=I.filter(M=>p==="Individual"?M.categoria==="Individual"||!M.categoria&&(M.tipoEspecial==="entidadindividual"||!M.tipoEspecial):M.categoria===p)),x){const M=x.toLowerCase();I=I.filter($=>$.nombre.toLowerCase().includes(M))}f(I)},C=P.useCallback(I=>s(M=>jT({...I,type:"smoothstep",animated:!0,style:{stroke:"#6366f1"},markerEnd:{type:nl.ArrowClosed,color:"#6366f1"}},M)),[]),R=P.useCallback(I=>{I.preventDefault(),I.dataTransfer.dropEffect="move"},[]),L=P.useCallback(I=>{I.preventDefault();const M=I.dataTransfer.getData("application/reactflow/id"),$=JSON.parse(I.dataTransfer.getData("application/reactflow/data"));if(!M||!$)return;const F=_.screenToFlowPosition({x:I.clientX,y:I.clientY});let G="#475569";$.categoria==="Individual"?G="#6366f1":$.categoria==="Location"?G="#10b981":$.categoria==="Group"&&(G="#a855f7");const B={id:`node-${M}`,type:"default",position:F,data:{label:$.nombre,entityId:M,...$},style:{background:"rgba(20, 20, 25, 0.9)",color:"#fff",border:`1px solid ${G}`,borderRadius:"12px",padding:"10px",minWidth:"150px",backdropFilter:"blur(10px)",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}};r(Y=>Y.concat(B))},[_]),A=(I,M,$="TB")=>{const F=new l7.graphlib.Graph;F.setDefaultEdgeLabel(()=>({}));const G=$==="LR";return F.setGraph({rankdir:$}),I.forEach(Y=>{F.setNode(Y.id,{width:220,height:100})}),M.forEach(Y=>{F.setEdge(Y.source,Y.target)}),l7.layout(F),{nodes:I.map(Y=>{const K=F.node(Y.id);return Y.targetPosition=G?"left":"top",Y.sourcePosition=G?"right":"bottom",Y.position={x:K.x-220/2,y:K.y-100/2},Y}),edges:M}},O=()=>{const I=l.map(G=>{let B="#475569";return G.categoria==="Individual"?B="#6366f1":G.categoria==="Location"?B="#10b981":G.categoria==="Group"&&(B="#a855f7"),{id:`node-${G.id}`,type:"default",position:{x:0,y:0},data:{label:G.nombre,entityId:G.id,...G},style:{background:"rgba(20, 20, 25, 0.9)",color:"#fff",border:`1px solid ${B}`,borderRadius:"12px",padding:"10px",minWidth:"150px",backdropFilter:"blur(10px)",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}}),M=[];l.forEach(G=>{G.valores&&Array.isArray(G.valores)&&G.valores.forEach(B=>{if(B.plantilla&&B.plantilla.tipo==="entity_link"&&B.valor){const Y=`node-${B.valor}`,K=`node-${G.id}`;Y!==K&&M.push({id:`e${G.id}-${B.valor}`,source:K,target:Y,type:"smoothstep",animated:!0,style:{stroke:"#6366f1"},markerEnd:{type:nl.ArrowClosed,color:"#6366f1"}})}})});const{nodes:$,edges:F}=A(I,M);r([...$]),s([...F]),setTimeout(()=>{_&&_.fitView()},100)},T=(I,M)=>{I.dataTransfer.setData("application/reactflow/id",M.id),I.dataTransfer.setData("application/reactflow/data",JSON.stringify(M)),I.dataTransfer.effectAllowed="move"};return o.jsxs("div",{className:"w-full flex h-full bg-[#050508] relative overflow-hidden font-manrope",children:[o.jsxs("aside",{className:"w-80 border-r border-white/5 bg-surface-dark/80 backdrop-blur-xl flex flex-col z-20 shadow-2xl",children:[o.jsxs("div",{className:"p-6 border-b border-white/5 space-y-6 bg-gradient-to-b from-white/5 to-transparent",children:[o.jsxs("h2",{className:"text-sm font-black uppercase tracking-widest text-white flex items-center gap-3",children:[o.jsx("div",{className:"size-8 rounded-lg bg-primary flex items-center justify-center shadow-lg shadow-primary/20",children:o.jsx("span",{className:"material-symbols-outlined text-white text-lg",children:"hub"})}),"Graph Composer"]}),o.jsxs("div",{className:"relative group",children:[o.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-500 text-sm group-focus-within:text-primary transition-colors",children:"search"}),o.jsx("input",{type:"text",placeholder:"Search entities...",className:"w-full bg-black/40 border border-white/10 rounded-xl pl-9 pr-3 py-3 text-xs text-white focus:border-primary/50 focus:bg-black/50 outline-none transition-all placeholder:text-slate-600 font-bold",value:x,onChange:I=>w(I.target.value)})]}),o.jsx("div",{className:"flex gap-2 p-1 bg-black/40 rounded-xl overflow-x-auto no-scrollbar border border-white/5",children:["All","Individual","Location","Group","Event"].map(I=>o.jsx("button",{onClick:()=>g(I),className:`px-4 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider whitespace-nowrap transition-all ${p===I?"bg-primary text-white shadow-lg":"text-slate-500 hover:text-slate-300 hover:bg-white/5"}`,children:I},I))})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-2",children:[o.jsxs("p",{className:"text-[10px] uppercase font-bold text-slate-600 mb-3 pl-2 flex items-center gap-2",children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"drag_indicator"}),"Drag to Canvas"]}),h.map(I=>o.jsxs("div",{draggable:!0,onDragStart:M=>T(M,I),className:"group flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-transparent hover:border-primary/30 hover:bg-white/10 hover:shadow-lg hover:shadow-primary/5 cursor-grab active:cursor-grabbing transition-all select-none",children:[o.jsx(ou,{name:I.nombre,url:I.iconUrl,size:"sm",className:"rounded-lg opacity-80 group-hover:opacity-100 ring-2 ring-transparent group-hover:ring-primary/20 transition-all"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"text-xs font-bold text-slate-300 group-hover:text-white truncate transition-colors",children:I.nombre}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`text-[9px] uppercase tracking-wider font-bold ${I.categoria==="Individual"?"text-indigo-400":"text-slate-500"}`,children:I.categoria||"Entity"}),I.carpeta&&o.jsxs("span",{className:"text-[9px] text-white/30 truncate",children:[" ",I.carpeta.nombre]})]})]}),o.jsx("span",{className:"material-symbols-outlined text-slate-700 group-hover:text-primary text-lg transition-colors opacity-0 group-hover:opacity-100 transform translate-x-2 group-hover:translate-x-0 duration-300",children:"add_circle"})]},I.id)),h.length===0&&o.jsx("div",{className:"p-12 text-center text-slate-600 text-xs italic border-2 border-dashed border-white/5 rounded-xl m-4",children:"No entities found."})]})]}),o.jsxs("div",{className:"flex-1 h-full relative",ref:e,children:[o.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-indigo-900/10 via-[#050508] to-[#050508] pointer-events-none z-0"}),o.jsxs(sP,{nodes:t,edges:i,onNodesChange:n,onEdgesChange:a,onConnect:C,onInit:S,onDrop:L,onDragOver:R,fitView:!0,className:"bg-[#050508]",children:[o.jsx(DB,{color:"#222",gap:24,size:1}),o.jsx(AB,{className:"bg-surface-dark border border-white/10 text-white fill-white rounded-xl overflow-hidden shadow-xl"})]}),o.jsx("div",{className:"absolute top-6 right-6 z-10 flex gap-3",children:o.jsxs("div",{className:"bg-surface-dark/80 backdrop-blur border border-white/10 rounded-xl p-1 flex shadow-2xl",children:[o.jsx(Xe,{variant:"ghost",size:"sm",icon:"save",className:"hover:bg-white/5",children:"Save Layout"}),o.jsx("div",{className:"w-px bg-white/10 my-1"}),o.jsx(Xe,{onClick:O,variant:"primary",size:"sm",icon:"auto_fix_high",className:"shadow-lg shadow-primary/20",children:"Auto Layout"})]})})]})]})},EY=()=>o.jsx(P5,{children:o.jsx(CY,{})}),TY=({id:e})=>{const{id:t}=Kr(),r=Wr(),[n,i]=P.useState("overview"),[s,a]=P.useState(null),[l,d]=P.useState(!0),[h,f]=P.useState(!1);P.useEffect(()=>{p()},[e]);const p=async()=>{d(!0);try{const b=await he.get(`/bd/entidadindividual/${e}`);a(b)}catch(b){console.error("Error loading character:",b)}finally{d(!1)}},g=async()=>{try{await he.patch("/bd/modificar",{...s,tipoEntidad:"entidadindividual"}),f(!1)}catch(b){console.error("Error saving:",b)}},x=async()=>{if(window.confirm("Move this character to the Trash Bin?"))try{await he.delete(`/bd/entidadindividual/${e}`),r(`/project/${t}`)}catch(b){console.error(b)}},w=(b,k)=>{a(_=>({..._,[b]:k}))};return l?o.jsx("div",{className:"p-20 text-center text-slate-500 animate-pulse",children:"Summoning entity..."}):s?o.jsxs("div",{className:"flex h-full",children:[o.jsxs("div",{className:"flex-1 flex flex-col overflow-y-auto custom-scrollbar p-8 gap-6",children:[o.jsxs("div",{className:"flex items-start gap-6",children:[o.jsx("div",{className:"relative",children:o.jsx(ou,{url:s.imagenUrl||"https://images.unsplash.com/photo-1544005313-94ddf0286df2?q=80&w=1976&auto=format&fit=crop",size:"xl",className:"rounded-2xl border-2 border-primary shadow-[0_0_30px_rgba(99,102,242,0.3)]"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[o.jsx("span",{className:"text-xs font-bold text-primary bg-primary/10 px-2 py-0.5 rounded border border-primary/20",children:s.estado||"ACTIVE"}),o.jsx("span",{className:"text-xs font-bold text-slate-400 bg-surface-light px-2 py-0.5 rounded border border-white/5",children:s.tipo||"Unknown"})]}),o.jsxs("h1",{className:"text-4xl font-bold text-white mb-2",children:[s.nombre," ",s.apellidos]}),o.jsx("p",{className:"text-lg text-slate-300",children:s.origen||"Traveling the void"})]}),o.jsxs("div",{className:"flex gap-2",children:[!h&&o.jsx(Xe,{className:"border-red-500/30 text-red-400 hover:bg-red-500/10",icon:"delete",onClick:x,children:"Delete"}),o.jsx(Xe,{variant:"secondary",icon:h?"close":"edit",onClick:()=>f(!h),children:h?"Cancel":"Edit Profile"}),h&&o.jsx(Xe,{variant:"primary",icon:"save",onClick:g,children:"Save Changes"})]})]}),o.jsx("div",{className:"border-b border-glass-border flex gap-6",children:["Overview","Biography","Attributes & Stats","Relationships"].map(b=>o.jsx("button",{onClick:()=>i(b.toLowerCase()),className:`pb-4 px-2 text-sm font-bold border-b-2 transition-colors ${n===b.toLowerCase()?"text-primary border-primary":"text-slate-500 border-transparent hover:text-white"}`,children:b},b))}),o.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[o.jsx("div",{className:"col-span-1 space-y-6",children:o.jsxs(Ue,{className:"p-4",children:[o.jsxs("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-4 flex items-center gap-2",children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"fingerprint"})," Identity"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Name"}),o.jsx("input",{type:"text",value:s.nombre,onChange:b=>w("nombre",b.target.value),className:"w-full bg-surface-light border border-white/10 rounded px-3 py-2 text-white text-sm",readOnly:!h})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Surnames"}),o.jsx("input",{type:"text",value:s.apellidos||"",onChange:b=>w("apellidos",b.target.value),className:"w-full bg-surface-light border border-white/10 rounded px-3 py-2 text-white text-sm",readOnly:!h})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Type / Species"}),o.jsx("input",{type:"text",value:s.tipo||"",onChange:b=>w("tipo",b.target.value),className:"w-full bg-surface-light border border-white/10 rounded px-3 py-2 text-white text-sm",readOnly:!h})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Origin"}),o.jsx("input",{type:"text",value:s.origen||"",onChange:b=>w("origen",b.target.value),className:"w-full bg-surface-light border border-white/10 rounded px-3 py-2 text-white text-sm",readOnly:!h})]})]})]})}),o.jsx("div",{className:"col-span-2 space-y-6",children:o.jsxs(Ue,{className:"p-6 relative overflow-hidden group",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider flex items-center gap-2",children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"auto_stories"})," Narrative & Connections"]}),!h&&o.jsx("span",{className:"text-[10px] text-slate-600 bg-white/5 px-2 py-1 rounded",children:"Read Only"})]}),o.jsxs("div",{className:"mb-8",children:[o.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-primary mb-3 opacity-80",children:"Biography"}),o.jsx("textarea",{value:s.descripcion||"",onChange:b=>w("descripcion",b.target.value),readOnly:!h,className:`w-full bg-transparent border-none outline-none text-slate-300 text-sm leading-relaxed resize-none custom-scrollbar ${h?"min-h-[150px] placeholder-white/20":"h-auto overflow-hidden"}`,placeholder:"Write the history of this person..."}),o.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-primary mt-6 mb-3 opacity-80",children:"Behavior & Personality"}),o.jsx("textarea",{value:s.comportamiento||"",onChange:b=>w("comportamiento",b.target.value),readOnly:!h,className:`w-full bg-transparent border-none outline-none text-slate-300 text-sm leading-relaxed resize-none custom-scrollbar ${h?"min-h-[100px]":"h-auto overflow-hidden"}`,placeholder:"How does this person act?"})]}),o.jsxs("div",{className:"pt-6 border-t border-white/5",children:[o.jsxs("h4",{className:"text-[10px] font-black uppercase tracking-widest text-primary mb-4 flex items-center gap-2 opacity-80",children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"hub"})," Established Connections"]}),s.relaciones&&s.relaciones.length>0?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:s.relaciones.map((b,k)=>{var _,S,v;return o.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/5 rounded-xl border border-white/5 hover:border-primary/30 transition-colors",children:[o.jsx("div",{className:"size-8 rounded-full bg-white/10 flex items-center justify-center text-xs font-bold",children:((S=(_=b.entidadDestino)==null?void 0:_.nombre)==null?void 0:S.charAt(0))||"?"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"text-sm font-bold text-white truncate",children:((v=b.entidadDestino)==null?void 0:v.nombre)||"Unknown"}),o.jsx("div",{className:"text-[10px] text-primary truncate",children:b.tipoRelacion||"Connected"})]})]},k)})}):o.jsx("div",{className:"p-6 text-center bg-white/5 rounded-xl border border-dashed border-white/10",children:o.jsx("p",{className:"text-xs text-slate-500 italic",children:"No relationships recorded yet."})})]})]})})]})]}),o.jsxs("div",{className:"w-80 border-l border-glass-border bg-surface-dark/50 hidden xl:flex flex-col",children:[o.jsxs("div",{className:"p-4 border-b border-glass-border flex justify-between items-center",children:[o.jsx("span",{className:"text-xs font-bold text-slate-500",children:"QUICK NOTES"}),o.jsx("button",{className:"text-slate-400 hover:text-white",children:o.jsx("span",{className:"material-symbols-outlined text-sm",children:"open_in_new"})})]}),o.jsx("div",{className:"p-4 flex-1",children:o.jsx("textarea",{className:"w-full h-full bg-transparent border-none outline-none text-sm text-slate-300 placeholder-slate-600 resize-none",placeholder:"Draft a quick scene or jot down notes for Elara here..."})}),o.jsx("div",{className:"p-2 border-t border-glass-border text-right text-[10px] text-slate-600",children:"0 words"})]})]}):o.jsx("div",{className:"p-20 text-center text-red-500",children:"Character not found in the archives."})},c7=({id:e})=>{const[t,r]=P.useState(null),[n,i]=P.useState(!0),[s,a]=P.useState(!1);P.useEffect(()=>{l()},[e]);const l=async()=>{i(!0);try{const f=await he.get(`/bd/zona/${e}`);r(f)}catch(f){console.error("Error loading location:",f)}finally{i(!1)}},d=async()=>{try{await he.patch("/bd/modificar",{...t,tipoEntidad:"zona"}),a(!1)}catch(f){console.error("Error saving:",f)}},h=(f,p)=>{r(g=>({...g,[f]:p}))};return n?o.jsx("div",{className:"p-20 text-center text-slate-500 animate-pulse",children:"Scanning terrain..."}):t?o.jsxs("div",{className:"flex h-full overflow-y-auto custom-scrollbar p-8 flex-col gap-8",children:[o.jsxs("header",{className:"flex justify-between items-end",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:"text-xs font-bold text-emerald-400 bg-emerald-400/10 px-2 py-0.5 rounded border border-emerald-400/20",children:"LOCATION"}),o.jsx("span",{className:"text-xs font-bold text-slate-400 bg-surface-light px-2 py-0.5 rounded border border-white/5",children:t.tipo||"Wilderness"})]}),o.jsx("h1",{className:"text-5xl font-manrope font-black text-white tracking-tight",children:t.nombre}),o.jsx("p",{className:"text-slate-400 mt-2",children:t.apellidos||"Uncharted territory"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Xe,{variant:"secondary",icon:s?"close":"edit",onClick:()=>a(!s),children:s?"Cancel":"Edit Location"}),s&&o.jsx(Xe,{variant:"primary",icon:"save",onClick:d,children:"Update Records"})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-8",children:[o.jsxs("div",{className:"col-span-1 space-y-6",children:[o.jsxs(Ue,{className:"p-6",children:[o.jsxs("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-4 flex items-center gap-2",children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"straighten"})," Geography & Scale"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Size / Scale"}),o.jsx("input",{type:"text",value:t.tamanno||"",onChange:f=>h("tamanno",f.target.value),className:"w-full bg-surface-light border border-white/10 rounded px-3 py-2 text-white text-sm",readOnly:!s})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Development Level"}),o.jsx("input",{type:"text",value:t.desarrollo||"",onChange:f=>h("desarrollo",f.target.value),className:"w-full bg-surface-light border border-white/10 rounded px-3 py-2 text-white text-sm",readOnly:!s})]})]})]}),o.jsxs(Ue,{className:"p-6",children:[o.jsx("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-4",children:"Quick Stats"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-white/5 p-3 rounded-xl border border-white/5",children:[o.jsx("span",{className:"text-[10px] text-slate-500 block",children:"Density"}),o.jsx("span",{className:"text-white font-bold",children:"Medium"})]}),o.jsxs("div",{className:"bg-white/5 p-3 rounded-xl border border-white/5",children:[o.jsx("span",{className:"text-[10px] text-slate-500 block",children:"Security"}),o.jsx("span",{className:"text-emerald-400 font-bold",children:"Stable"})]})]})]})]}),o.jsx("div",{className:"col-span-2 space-y-6",children:o.jsxs(Ue,{className:"p-8",children:[o.jsxs("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-4 flex items-center gap-2",children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"description"})," Topographic Records & Lore"]}),o.jsx("textarea",{value:t.descripcion||"",onChange:f=>h("descripcion",f.target.value),readOnly:!s,className:"w-full bg-transparent border-none outline-none text-slate-300 text-lg leading-relaxed min-h-[400px] resize-none",placeholder:"Describe the vistas, the smells, and the secrets of this place..."})]})})]})]}):o.jsx("div",{className:"p-20 text-center text-red-500",children:"Location not found in the maps."})},PY=({id:e})=>{const[t,r]=P.useState(null),[n,i]=P.useState(!0),[s,a]=P.useState(!1);P.useEffect(()=>{l()},[e]);const l=async()=>{i(!0);try{const f=await he.get(`/bd/entidadcolectiva/${e}`);r(f)}catch(f){console.error("Error loading collective:",f)}finally{i(!1)}},d=async()=>{try{await he.patch("/bd/modificar",{...t,tipoEntidad:"entidadcolectiva"}),a(!1)}catch(f){console.error("Error saving:",f)}},h=(f,p)=>{r(g=>({...g,[f]:p}))};return n?o.jsx("div",{className:"p-20 text-center text-slate-500 animate-pulse",children:"Gathering intelligence..."}):t?o.jsxs("div",{className:"flex h-full overflow-y-auto custom-scrollbar p-8 flex-col gap-8",children:[o.jsxs("header",{className:"flex justify-between items-end",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:"text-xs font-bold text-indigo-400 bg-indigo-400/10 px-2 py-0.5 rounded border border-indigo-400/20",children:"COLLECTIVE"}),o.jsx("span",{className:"text-xs font-bold text-slate-400 bg-surface-light px-2 py-0.5 rounded border border-white/5",children:t.tipo||"Organization"})]}),o.jsx("h1",{className:"text-5xl font-manrope font-black text-white tracking-tight",children:t.nombre}),o.jsxs("p",{className:"text-slate-400 mt-2",children:[t.cantidadMiembros||"Unknown"," members"]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Xe,{variant:"secondary",icon:s?"close":"edit",onClick:()=>a(!s),children:s?"Cancel":"Edit Collective"}),s&&o.jsx(Xe,{variant:"primary",icon:"save",onClick:d,children:"Update Dossier"})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-8",children:[o.jsx("div",{className:"col-span-1 space-y-6",children:o.jsxs(Ue,{className:"p-6",children:[o.jsxs("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-4 flex items-center gap-2",children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"group_work"})," Group Dynamics"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Scale / Members"}),o.jsx("input",{type:"text",value:t.cantidadMiembros||"",onChange:f=>h("cantidadMiembros",f.target.value),className:"w-full bg-surface-light border border-white/10 rounded px-3 py-2 text-white text-sm",readOnly:!s})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Behavior / Alignment"}),o.jsx("input",{type:"text",value:t.comportamiento||"",onChange:f=>h("comportamiento",f.target.value),className:"w-full bg-surface-light border border-white/10 rounded px-3 py-2 text-white text-sm",readOnly:!s})]})]})]})}),o.jsx("div",{className:"col-span-2 space-y-6",children:o.jsxs(Ue,{className:"p-8",children:[o.jsxs("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-4 flex items-center gap-2",children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"history_edu"})," Mandate & History"]}),o.jsx("textarea",{value:t.descripcion||"",onChange:f=>h("descripcion",f.target.value),readOnly:!s,className:"w-full bg-transparent border-none outline-none text-slate-300 text-lg leading-relaxed min-h-[400px] resize-none",placeholder:"Detail the motives, the structure, and the legacy of this group..."})]})})]})]}):o.jsx("div",{className:"p-20 text-center text-red-500",children:"Collective not found in the records."})},RY=()=>o.jsx("div",{className:"flex-1 flex overflow-hidden bg-background-dark font-sans text-slate-300",children:o.jsxs("main",{className:"flex-1 flex flex-col p-12 overflow-y-auto custom-scrollbar relative",children:[o.jsxs("header",{className:"mb-12 space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-slate-500 font-bold text-[10px] tracking-widest uppercase",children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"grid_view"}),o.jsx("span",{children:"Universo Alpha"}),o.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_right"}),o.jsx("span",{children:"Galaxia Andrmeda"}),o.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_right"}),o.jsx("span",{className:"text-white",children:"Sistema Solar"})]}),o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"space-y-4 max-w-3xl",children:[o.jsxs("div",{className:"flex items-center gap-3 px-3 py-1 rounded bg-orange-500/10 text-orange-400 border border-orange-500/20 inline-block",children:[o.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"sunny"}),o.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"Sistema Planetario"}),o.jsx("span",{className:"text-[9px] font-bold text-slate-600 tracking-widest ml-2",children:"ID: SYS-SOL-001"})]}),o.jsx("h1",{className:"text-6xl font-manrope font-black text-white tracking-tight",children:"Sistema Solar"}),o.jsx("p",{className:"text-slate-400 text-lg leading-relaxed",children:"Sistema planetario principal ubicado en el Brazo de Orin, hogar de la nica vida biolgica compleja confirmada en el sector galctico Alpha-9."})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{className:"p-3 rounded-2xl bg-white/5 hover:bg-red-500/10 text-slate-500 hover:text-red-400 border border-white/5 transition-all outline-none",children:o.jsx("span",{className:"material-symbols-outlined",children:"delete"})}),o.jsx(Xe,{variant:"primary",icon:"save",children:"Guardar"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[o.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[o.jsxs("section",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"sell"}),o.jsx("h4",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Etiquetas"}),o.jsx("span",{className:"ml-auto text-[9px] font-bold text-slate-600 px-1.5 py-0.5 rounded bg-white/5",children:"3 ACTIVAS"})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx(w2,{label:"Estrella Tipo G",color:"amber",icon:"star"}),o.jsx(w2,{label:"Vida Confirmada",color:"emerald",icon:"tempest"}),o.jsx(w2,{label:"Rico en Agua",color:"cyan",icon:"water_drop"}),o.jsx("button",{className:"size-8 rounded-full border border-dashed border-white/10 flex items-center justify-center text-slate-600 hover:text-white hover:border-white/30 transition-all",children:"+"})]})]}),o.jsxs("section",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"analytics"}),o.jsx("h4",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Atributos Principales"}),o.jsx("button",{className:"ml-auto text-slate-600 hover:text-white transition-colors",children:o.jsx("span",{className:"material-symbols-outlined text-lg",children:"settings"})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(gh,{label:"Forma / Estructura",value:"Heliosfrica Estndar",icon:"hive"}),o.jsx(gh,{label:"Composicin",value:"Hidrgeno (74%), Helio (24%)",icon:"experiment"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsx(gh,{label:"Edad (Aos)",value:"4.6 MM",unit:"Aos"}),o.jsx(gh,{label:"Ciclo Orbital",value:"230 MM",unit:"Aos"})]})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"menu_book"}),o.jsx("h4",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Notas de Lore"})]}),o.jsx("textarea",{className:"w-full h-48 bg-white/5 border border-white/5 rounded-[2rem] p-6 text-sm text-slate-400 placeholder:text-slate-700 focus:border-primary/50 outline-none transition-all resize-none leading-relaxed italic shadow-inner",defaultValue:"El sistema contiene un cinturn de asteroides inusualmente denso entre el 4 y 5 planeta. Se teoriza que es el remanente de una colisin planetaria antigua conocida como 'El Gran Impacto' en las escrituras sagradas de los habitantes de Terra."})]})]}),o.jsx("div",{className:"lg:col-span-2",children:o.jsxs(Ue,{className:"h-full border-white/5 bg-surface-dark/40 overflow-hidden flex flex-col shadow-2xl",children:[o.jsxs("header",{className:"p-8 border-b border-white/5 flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"size-10 rounded-xl bg-primary/20 text-primary flex items-center justify-center",children:o.jsx("span",{className:"material-symbols-outlined",children:"hub"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-white text-lg tracking-tight",children:"Contenido Interno (Planetas)"}),o.jsx("p",{className:"text-[10px] font-medium text-slate-500 mt-0.5",children:"Arrastra para reordenar la jerarqua orbital"})]})]}),o.jsxs("div",{className:"px-3 py-1 rounded-full bg-emerald-500/10 text-emerald-400 border border-emerald-500/20 text-[10px] font-black uppercase tracking-widest flex items-center gap-2",children:[o.jsx("div",{className:"size-1.5 rounded-full bg-emerald-500 animate-pulse"}),"8 Entidades"]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-3",children:[o.jsx(dc,{name:"Mercurio",type:"Rocoso",stats:"430C | 88 Das",icon:"public"}),o.jsx(dc,{name:"Venus",type:"Atmsfera",stats:"462C | 225 Das",icon:"public"}),o.jsx(dc,{name:"Tierra",type:"Habitable",stats:"8B Hab | 1 Luna",icon:"public",active:!0}),o.jsx(dc,{name:"Marte",type:"Desierto",stats:"-60C | 2 Lunas",icon:"public"}),o.jsx(dc,{name:"Cinturn Asteroides",type:"Anillo",stats:">1M Obj",icon:"grain"})]}),o.jsx("div",{className:"p-8 bg-black/20 border-t border-white/5",children:o.jsxs("button",{className:"w-full py-4 rounded-[1.5rem] border-2 border-dashed border-white/10 text-slate-500 hover:text-white hover:border-primary/50 hover:bg-primary/5 transition-all flex items-center justify-center gap-3 font-black uppercase text-[10px] tracking-[0.2em]",children:[o.jsx("span",{className:"material-symbols-outlined",children:"add"}),"Aadir Nueva Entidad"]})})]})})]})]})}),w2=({label:e,color:t,icon:r})=>o.jsxs("div",{className:`px-4 py-1.5 rounded-xl bg-${t}-500/10 text-${t}-400 border border-${t}-500/20 flex items-center gap-2 text-[10px] font-black uppercase tracking-widest shadow-lg`,children:[o.jsx("span",{className:"material-symbols-outlined text-[14px]",children:r}),e]}),gh=({label:e,value:t,unit:r,icon:n})=>o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest text-slate-600 ml-1",children:e}),o.jsxs("div",{className:"w-full bg-white/5 border border-white/5 rounded-2xl px-5 py-3.5 flex items-center justify-between group hover:border-white/10 transition-all",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[n&&o.jsx("span",{className:"material-symbols-outlined text-slate-500 text-lg group-hover:text-primary transition-colors",children:n}),o.jsx("span",{className:"text-sm font-bold text-slate-300",children:t})]}),r&&o.jsx("span",{className:"text-[10px] font-black text-slate-600 uppercase tracking-widest",children:r})]})]}),dc=({name:e,type:t,stats:r,icon:n,active:i})=>o.jsxs("div",{className:`group flex items-center gap-6 p-4 rounded-2xl transition-all cursor-pointer ${i?"bg-primary/10 border border-primary/20 shadow-xl":"hover:bg-white/5 border border-transparent"}`,children:[o.jsx("span",{className:"material-symbols-outlined text-slate-700 group-hover:text-slate-500",children:"drag_indicator"}),o.jsx("div",{className:`size-12 rounded-xl flex items-center justify-center ${i?"bg-primary text-white shadow-lg shadow-primary/30":"bg-surface-dark border border-white/5 text-slate-500"}`,children:o.jsx("span",{className:"material-symbols-outlined text-3xl",children:n})}),o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("h4",{className:"text-sm font-bold text-white group-hover:text-primary transition-colors",children:e}),o.jsx("span",{className:`text-[8px] font-black px-1.5 py-0.5 rounded uppercase tracking-widest ${i?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-white/5 text-slate-600"}`,children:t})]})}),o.jsx("div",{className:"flex flex-col items-end gap-1",children:o.jsxs("div",{className:"flex items-center gap-1.5 text-slate-500",children:[o.jsx("span",{className:"material-symbols-outlined text-[12px]",children:"analytics"}),o.jsx("span",{className:"text-[10px] font-mono tracking-tight group-hover:text-slate-300",children:r})]})}),o.jsxs("div",{className:"flex gap-2 ml-4",children:[o.jsx("button",{className:"p-2 rounded-lg text-slate-700 hover:text-white hover:bg-white/5 transition-all",children:o.jsx("span",{className:"material-symbols-outlined text-xl",children:"edit_note"})}),i?o.jsx("button",{className:"size-8 rounded-full bg-primary text-white flex items-center justify-center shadow-lg",children:o.jsx("span",{className:"material-symbols-outlined text-lg",children:"arrow_forward"})}):o.jsx("button",{className:"p-2 rounded-lg text-slate-700 hover:text-white hover:bg-white/5 transition-all",children:o.jsx("span",{className:"material-symbols-outlined text-xl",children:"open_in_new"})})]})]}),AY=()=>o.jsx("div",{className:"flex-1 flex overflow-hidden bg-background-dark font-sans text-slate-300",children:o.jsxs("main",{className:"flex-1 flex flex-col p-12 overflow-y-auto custom-scrollbar relative",children:[o.jsxs("header",{className:"mb-12 space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-slate-500 font-bold text-[10px] tracking-widest uppercase",children:[o.jsx("span",{children:"Sistema Solar"}),o.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_right"}),o.jsx("span",{children:"Kepler-186f"}),o.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_right"}),o.jsx("span",{className:"text-white",children:"Territorios"})]}),o.jsxs("div",{className:"flex justify-between items-end",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[o.jsx("h1",{className:"text-6xl font-manrope font-black text-white tracking-tight",children:"Kepler-186f"}),o.jsx("span",{className:"material-symbols-outlined text-4xl text-primary",children:"public"})]}),o.jsx("p",{className:"text-slate-400 text-lg max-w-2xl leading-relaxed",children:"Gestin geopoltica y geogrfica de la superficie planetaria. Administra biomas, asentamientos y recursos estratgicos."})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Xe,{variant:"secondary",icon:"map",children:"Ver Atlas"}),o.jsx(Xe,{variant:"primary",icon:"add",children:"Nuevo Territorio"})]})]})]}),o.jsxs("section",{className:"space-y-8",children:[o.jsxs(Ue,{className:"p-2 flex items-center justify-between border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[o.jsxs("div",{className:"relative flex-1 max-w-sm",children:[o.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-500 text-sm",children:"search"}),o.jsx("input",{type:"text",placeholder:"Buscar por nombre...",className:"w-full bg-transparent border-none rounded-xl py-2 pl-9 pr-4 text-xs focus:ring-1 focus:ring-primary/30 outline-none transition-all"})]}),o.jsx("div",{className:"w-px h-6 bg-white/5 mx-2"}),o.jsx(_2,{label:"Bioma: Todos"}),o.jsx(_2,{label:"Poblacin"}),o.jsx(_2,{label:"Estado"})]}),o.jsxs("div",{className:"flex items-center gap-1 p-1 bg-white/5 rounded-lg",children:[o.jsx("button",{className:"p-1.5 rounded-md text-slate-500 hover:text-white transition-colors",children:o.jsx("span",{className:"material-symbols-outlined text-lg",children:"format_list_bulleted"})}),o.jsx("button",{className:"p-1.5 rounded-md bg-white/10 text-white shadow-sm",children:o.jsx("span",{className:"material-symbols-outlined text-lg",children:"grid_view"})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[o.jsx(N2,{title:"Nueva Neo-Tokyo",desc:"Metrpolis vertical construida sobre las...",image:"https://lh3.googleusercontent.com/aida-public/AB6AXuAYF5Q6W3o1w1f1",badges:["Capital"],stats:["15M","Templado","Costero"],color:"cyan"}),o.jsx(N2,{title:"Mar de Dunas",desc:"Extensin rida rica en especia slica...",image:"https://lh3.googleusercontent.com/aida-public/AB6AXuBYG6R7X4p2x2g2",stats:["Hostil","rido"],color:"amber"}),o.jsx(N2,{title:"Sanctum Bio-Domo",desc:"Instalacin de investigacin...",image:"https://lh3.googleusercontent.com/aida-public/AB6AXuCZ H7S8Y5q3z3h3",badges:["Ciencia"],stats:["5K","Jungla"],color:"purple"}),o.jsxs("div",{className:"group border-2 border-dashed border-white/5 rounded-[2.5rem] flex flex-col items-center justify-center p-12 gap-4 hover:border-primary/30 hover:bg-primary/5 transition-all cursor-pointer",children:[o.jsx("div",{className:"size-16 rounded-3xl bg-white/5 flex items-center justify-center group-hover:scale-110 transition-transform",children:o.jsx("span",{className:"material-symbols-outlined text-3xl text-slate-600 group-hover:text-primary",children:"add_location_alt"})}),o.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-600 group-hover:text-white",children:"Aadir Territorio"})]})]})]})]})}),_2=({label:e})=>o.jsxs("button",{className:"flex items-center gap-2 px-3 py-1.5 rounded-xl hover:bg-white/5 transition-all group",children:[o.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 group-hover:text-white",children:e}),o.jsx("span",{className:"material-symbols-outlined text-slate-600 text-[14px]",children:"expand_more"})]}),N2=({title:e,desc:t,image:r,badges:n=[],stats:i=[],color:s})=>o.jsxs("div",{className:"group relative rounded-[2.5rem] overflow-hidden border border-white/5 bg-surface-dark/50 hover:border-white/10 transition-all shadow-2xl",children:[o.jsxs("div",{className:"h-48 overflow-hidden relative",children:[o.jsx("img",{src:r,alt:e,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110 opacity-60 group-hover:opacity-100"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-surface-dark via-transparent to-transparent"}),o.jsx("div",{className:"absolute top-4 right-4 flex gap-2",children:n.map(a=>o.jsxs("span",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest bg-${s==="cyan"?"primary":s==="amber"?"amber-500":"purple-500"}/20 text-${s==="cyan"?"primary":s==="amber"?"amber-400":"purple-400"} border border-white/10 backdrop-blur-md flex items-center gap-1.5`,children:[o.jsx("span",{className:"material-symbols-outlined text-[12px]",children:a==="Capital"?"star":"science"}),a]},a))})]}),o.jsxs("div",{className:"p-8 space-y-6",children:[o.jsxs("header",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-manrope font-black text-white mb-2 group-hover:text-primary transition-colors",children:e}),o.jsx("p",{className:"text-xs text-slate-500 leading-relaxed line-clamp-2",children:t})]}),o.jsx("button",{className:"p-2 text-slate-700 hover:text-white",children:o.jsx("span",{className:"material-symbols-outlined",children:"more_vert"})})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(a=>o.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1 rounded-full bg-white/5 border border-white/5 text-[9px] font-black text-slate-400 uppercase tracking-widest",children:[o.jsx("div",{className:`size-1.5 rounded-full bg-${s==="cyan"?"primary":s==="amber"?"amber-500":"purple-500"}/50`}),a]},a))}),o.jsxs("div",{className:"flex gap-3 pt-2",children:[o.jsxs("button",{className:"flex-1 py-2.5 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 text-[10px] font-black uppercase tracking-widest text-slate-300 flex items-center justify-center gap-2 transition-all",children:[o.jsx("span",{className:"material-symbols-outlined text-sm opacity-50",children:"edit"})," Editar"]}),o.jsxs("button",{className:"flex-1 py-2.5 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 text-[10px] font-black uppercase tracking-widest text-slate-300 flex items-center justify-center gap-2 transition-all",children:[o.jsx("span",{className:"material-symbols-outlined text-sm opacity-50",children:"map"})," Ubicacin"]})]})]})]}),IY=()=>{const{type:e,entityId:t}=Kr(),r=()=>{const n=e==null?void 0:e.toLowerCase();switch(n){case"character":case"entidadindividual":return o.jsx(TY,{id:t});case"location":case"zona":return o.jsx(c7,{id:t});case"culture":case"entidadcolectiva":return o.jsx(PY,{id:t});case"universe":case"galaxy":case"system":return o.jsx(RY,{id:t,type:n});case"planet":return o.jsx(AY,{id:t});case"construccion":return o.jsx(c7,{id:t});case"efectos":return o.jsxs("div",{className:"p-8 text-white",children:["Effect/Spell View for ID: ",id]});case"interaccion":return o.jsxs("div",{className:"p-8 text-white",children:["Interaction/Event View for ID: ",id]});case"magic":return o.jsxs("div",{className:"p-8 text-white",children:["Magic System View for ID: ",id]});default:return o.jsxs("div",{className:"p-8 text-white",children:["Unknown Entity Type: ",e]})}};return o.jsx("div",{className:"flex-1 bg-background-dark overflow-hidden",children:r()})},MY=()=>{var V,te,oe;const{setRightPanelMode:e,setRightOpen:t,setRightPanelTitle:r}=La(),[n,i]=P.useState([]),[s,a]=P.useState(null),[l,d]=P.useState([]),[h,f]=P.useState(!0);P.useState(!1);const[p,g]=P.useState(!1),[x,w]=P.useState({nombre:"",descripcion:"",fechaTexto:"",ordenAbsoluto:0}),[b,k]=P.useState({nombre:"",descripcion:""}),[_,S]=P.useState(null);P.useState(null);const[v,j]=P.useState("eventos"),[C,R]=P.useState([]),[L,A]=P.useState([]),[O,T]=P.useState(null),I=re.useRef(!1),M=async U=>{try{return(await he.get("/bd/relacion")).filter(ye=>ye.tipoOrigen==="lineatiempo"&&ye.idOrigen===U||ye.tipoDestino==="lineatiempo"&&ye.idDestino===U).map(ye=>ye.idOrigen===U?ye.idDestino:ye.idOrigen)}catch(X){return console.error(X),[]}},$=async(U,X)=>{const le=await M(U),me=X.filter(ae=>le.includes(ae.id));R(me);const ye=X.filter(ae=>ae.id!==U&&!le.includes(ae.id));A(ye)},F=async U=>{if(!(!s||!U))try{await he.put("/bd/insertar",{tipoEntidad:"relacion",tipoOrigen:"lineatiempo",idOrigen:s,tipoDestino:"lineatiempo",idDestino:U,descripcion:"Anexo de lnea de tiempo"}),$(s,n)}catch(X){console.error(X)}},G=async U=>{const le=(await he.get("/bd/relacion")).find(me=>me.tipoOrigen==="lineatiempo"&&me.idOrigen===s&&me.idDestino===U||me.tipoDestino==="lineatiempo"&&me.idDestino===s&&me.idOrigen===U);le&&(await he.delete(`/bd/relacion/${le.id}`),$(s,n))};P.useEffect(()=>{e("CUSTOM"),r("Lnea de Tiempo"),t(!0);const U=setInterval(()=>{const X=document.getElementById("architect-right-panel-portal");X&&(T(X),clearInterval(U))},50);return()=>{clearInterval(U),e("NOTES"),r("")}},[]),P.useEffect(()=>{I.current||(I.current=!0,B())},[]),P.useEffect(()=>{s?(Y(s),$(s,n),S(null),w({nombre:"",descripcion:"",fechaTexto:"",ordenAbsoluto:0})):d([])},[s]),P.useEffect(()=>{if(v==="eventos"&&!_){const U=l.length>0?Math.max(...l.map(X=>X.ordenAbsoluto||0)):0;w(X=>({...X,ordenAbsoluto:U+1}))}},[v,l,_]);const B=async()=>{f(!0);try{const U=await he.get("/bd/lineatiempo"),X=[...new Map(U.map(ye=>[ye.id,ye])).values()],le=X.find(ye=>ye.esRaiz);X.length===0?(i([]),a(null)):(i(X),s||a(le?le.id:X[0].id));const me=X.filter(ye=>ye.esRaiz);if(me.length>1){me.sort((fe,ge)=>fe.id-ge.id);const ye=me[0],ae=me.slice(1);ae.forEach(fe=>he.delete(`/bd/lineatiempo/${fe.id}`).catch(console.error));const Fe=X.filter(fe=>fe.id===ye.id||!ae.find(ge=>ge.id===fe.id));i(Fe),s||a(ye.id)}}catch(U){console.error("Failed to load timelines",U)}finally{f(!1)}},Y=async U=>{try{const X=await he.get(`/timeline/linea/${U}/eventos`);X.sort((le,me)=>(le.ordenAbsoluto||0)-(me.ordenAbsoluto||0)),d(X)}catch(X){console.error("Failed to load events",X)}},K=async()=>{if(!s||!x.nombre)return;const U={...x,ordenAbsoluto:parseInt(x.ordenAbsoluto)||0};try{_?await he.put(`/timeline/evento/${_.id}`,{...U,lineaTiempo:{id:s}}):await he.post("/timeline/evento",{...U,lineaTiempo:{id:s}}),w({nombre:"",descripcion:"",fechaTexto:"",ordenAbsoluto:0}),S(null),Y(s)}catch(X){console.error(X)}},H=U=>{S(U),w({nombre:U.nombre,descripcion:U.descripcion,fechaTexto:U.fechaTexto,ordenAbsoluto:U.ordenAbsoluto||0}),j("eventos"),t(!0)},W=async()=>{if(b.nombre)try{const U=await he.post("/timeline/linea",{...b,esRaiz:!1});g(!1),k({nombre:"",descripcion:""}),B(),U&&U.id&&a(U.id)}catch(U){console.error(U)}},[D,q]=P.useState({open:!1,type:null,id:null,title:"",message:""}),J=(U,X)=>{X.stopPropagation(),q({open:!0,type:"TIMELINE",id:U,title:"Delete Timeline",message:"Are you sure you want to delete this timeline? All events will be lost."})},ee=(U,X)=>{X.stopPropagation(),q({open:!0,type:"EVENT",id:U,title:"Delete Event",message:"Are you sure you want to delete this event?"})},ue=async()=>{const{type:U,id:X}=D;if(!(!U||!X))try{if(U==="TIMELINE"){if(await he.delete(`/timeline/linea/${X}`),s===X){const le=n.filter(me=>me.id!==X);a(le.length>0?le[0].id:null)}B()}else U==="EVENT"&&(await he.delete(`/timeline/evento/${X}`),Y(s),_&&_.id===X&&S(null))}catch(le){console.error(le),alert("Error deleting item")}},pe=o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"p-4 border-b border-white/5",children:o.jsxs("div",{className:"flex bg-black/40 rounded-lg p-1",children:[o.jsx("button",{onClick:()=>j("eventos"),className:`flex-1 py-2 text-xs font-bold uppercase tracking-wider rounded-md transition-all ${v==="eventos"?"bg-primary text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Eventos"}),o.jsx("button",{onClick:()=>j("anexos"),className:`flex-1 py-2 text-xs font-bold uppercase tracking-wider rounded-md transition-all ${v==="anexos"?"bg-primary text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Anexos"})]})}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:[v==="eventos"&&o.jsx("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4",children:o.jsxs("div",{className:"bg-black/20 rounded-xl p-4 border border-white/5",children:[o.jsxs("h3",{className:"text-xs font-black uppercase text-primary mb-4 flex items-center justify-between",children:[_?"Edit Event":"New Event",_&&o.jsx("button",{onClick:()=>{S(null),w({nombre:"",descripcion:"",fechaTexto:"",ordenAbsoluto:l.length+1})},className:"text-[10px] text-slate-500 hover:text-white underline",children:"CANCEL"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-1 block",children:"Title"}),o.jsx("input",{className:"w-full bg-background-dark border border-white/10 rounded-lg p-2 text-sm text-white outline-none focus:border-primary",value:x.nombre,onChange:U=>w({...x,nombre:U.target.value}),placeholder:"Event Name"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-1 block",children:"Date Label"}),o.jsx("input",{className:"w-full bg-background-dark border border-white/10 rounded-lg p-2 text-sm text-white outline-none focus:border-primary",value:x.fechaTexto,onChange:U=>w({...x,fechaTexto:U.target.value}),placeholder:"e.g. Year 500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-1 block",children:"Order (Sort)"}),o.jsx("input",{type:"text",className:"w-full bg-background-dark border border-white/10 rounded-lg p-2 text-sm text-white outline-none focus:border-primary",value:x.ordenAbsoluto,onChange:U=>{const X=U.target.value;/^[-+]?\d*$/.test(X)&&w({...x,ordenAbsoluto:X})},placeholder:"+/- Num"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-1 block",children:"Description"}),o.jsx("textarea",{className:"w-full bg-background-dark border border-white/10 rounded-lg p-2 text-sm text-white outline-none focus:border-primary h-24 resize-none",value:x.descripcion,onChange:U=>w({...x,descripcion:U.target.value}),placeholder:"Describe what happened..."})]}),o.jsx("div",{className:"pt-2",children:o.jsx(Xe,{variant:"primary",onClick:K,className:"w-full justify-center",children:_?"Save Changes":"Create Event"})}),_&&o.jsx("button",{onClick:U=>ee(_.id,U),className:"w-full text-center text-xs text-red-500 hover:text-red-400 py-2 border border-red-500/20 rounded-lg hover:bg-red-500/10 transition-colors",children:"Delete Event"})]})]})}),v==="anexos"&&o.jsx("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4",children:o.jsxs("div",{className:"bg-black/20 rounded-xl p-4 border border-white/5",children:[o.jsx("h3",{className:"text-xs font-black uppercase text-primary mb-4",children:"Annexed Timelines"}),o.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Link other localized timelines to this one to verify chronological consistency."}),o.jsxs("div",{className:"space-y-2 mb-6",children:[C.map(U=>o.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/5 rounded-lg border border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"material-symbols-outlined text-xs text-slate-400",children:"timeline"}),o.jsx("span",{className:"text-xs font-bold text-slate-300",children:U.nombre})]}),o.jsx("button",{onClick:()=>G(U.id),className:"text-slate-500 hover:text-red-500",children:o.jsx("span",{className:"material-symbols-outlined text-sm",children:"link_off"})})]},U.id)),C.length===0&&o.jsx("span",{className:"text-xs text-slate-600 italic",children:"No linked timelines."})]}),o.jsx("h4",{className:"text-[10px] font-bold uppercase text-slate-400 mb-2",children:"Available to Link"}),o.jsxs("div",{className:"space-y-1",children:[L.map(U=>o.jsxs("button",{onClick:()=>F(U.id),className:"w-full flex items-center gap-2 p-2 hover:bg-white/5 rounded-lg text-left transition-colors group",children:[o.jsx("span",{className:"material-symbols-outlined text-xs text-green-500/50 group-hover:text-green-500",children:"add_link"}),o.jsx("span",{className:"text-xs text-slate-400 group-hover:text-white",children:U.nombre})]},U.id)),L.length===0&&o.jsx("span",{className:"text-xs text-slate-600 italic",children:"No other timelines available."})]})]})})]})]});return o.jsxs("div",{className:"flex h-screen bg-background-dark text-white overflow-hidden",children:[O&&Su.createPortal(pe,O),o.jsxs("aside",{className:"w-64 bg-surface-dark border-r border-white/5 flex flex-col p-4 z-20 shrink-0",children:[o.jsxs("header",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-xs font-black uppercase tracking-widest text-primary",children:"Timelines"}),o.jsx("button",{onClick:()=>g(!p),className:"text-slate-400 hover:text-white",children:o.jsx("span",{className:"material-symbols-outlined",children:"add"})})]}),p&&o.jsxs("div",{className:"mb-4 p-3 bg-black/20 rounded-xl space-y-2 border border-white/10 animate-in fade-in slide-in-from-left-2",children:[o.jsx("input",{className:"w-full bg-transparent border-b border-white/20 text-sm p-1 outline-none focus:border-primary",placeholder:"Name",value:b.nombre,onChange:U=>k({...b,nombre:U.target.value})}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{onClick:W,className:"text-xs font-bold text-primary",children:"CREATE"})})]}),o.jsx("div",{className:"space-y-2 overflow-y-auto flex-1 custom-scrollbar",children:n.map(U=>o.jsxs("div",{onClick:()=>a(U.id),className:`group flex items-center justify-between p-3 rounded-xl cursor-pointer transition-all border ${s===U.id?"bg-primary/10 border-primary text-white shadow-[0_0_15px_rgba(var(--primary-rgb),0.1)]":"bg-transparent border-transparent hover:bg-white/5 text-slate-400"}`,children:[o.jsxs("div",{className:"flex items-center gap-2 truncate",children:[o.jsx("span",{className:`material-symbols-outlined text-sm shrink-0 ${U.esRaiz?"text-amber-400":""}`,children:U.esRaiz?"public":"timeline"}),o.jsx("span",{className:"text-xs font-bold uppercase tracking-wide truncate",children:U.nombre})]}),o.jsx("button",{onClick:X=>J(U.id,X),className:"opacity-0 group-hover:opacity-100 text-slate-500 hover:text-red-500 transition-opacity",children:o.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]},U.id))})]}),o.jsxs("main",{className:"flex-1 relative flex flex-col h-full overflow-hidden bg-background-dark",children:[o.jsx("div",{className:"h-16 border-b border-white/5 bg-background-dark/80 backdrop-blur flex items-center px-8 z-10 shrink-0",children:o.jsxs("div",{children:[o.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[((V=n.find(U=>U.id===s))==null?void 0:V.esRaiz)&&o.jsx("span",{className:"text-amber-400 material-symbols-outlined",children:"star"}),((te=n.find(U=>U.id===s))==null?void 0:te.nombre)||"Select Timeline"]}),o.jsx("p",{className:"text-xs text-slate-500",children:(oe=n.find(U=>U.id===s))==null?void 0:oe.descripcion})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-8 relative custom-scrollbar z-10",children:o.jsxs("div",{className:"max-w-2xl mx-auto relative pl-8 border-l-2 border-white/10 space-y-8 pb-32",children:[l.length===0&&o.jsx("div",{className:"text-center text-slate-600 italic py-20",children:"No events yet. Use the right panel to add one."}),l.map((U,X)=>o.jsxs("div",{className:"relative group animate-in fade-in slide-in-from-bottom-4",style:{animationDelay:`${X*50}ms`},children:[o.jsx("div",{className:"absolute top-6 -left-[41px] size-4 rounded-full bg-white/20 border-4 border-background-dark group-hover:bg-primary transition-colors cursor-pointer",onClick:()=>H(U)}),o.jsxs("div",{className:"ml-4 bg-surface-dark/50 border border-white/5 p-5 rounded-2xl hover:border-primary/30 transition-all hover:bg-surface-dark group-hover:translate-x-1 duration-300 relative group/card",children:[o.jsxs("div",{className:"absolute top-3 right-3 opacity-0 group-hover/card:opacity-100 transition-opacity flex gap-1 bg-black/50 rounded-lg backdrop-blur-sm border border-white/5 p-1",children:[o.jsx("button",{onClick:()=>H(U),className:"p-1.5 text-slate-400 hover:text-white hover:bg-white/10 rounded transition-colors",title:"Edit",children:o.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"})}),o.jsx("button",{onClick:le=>ee(U.id,le),className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-500/10 rounded transition-colors",title:"Delete",children:o.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]}),o.jsx("div",{className:"flex justify-between items-start",children:o.jsxs("div",{children:[o.jsxs("div",{className:"flex flex-col mb-1",children:[o.jsx("h3",{className:"text-lg font-bold text-white",children:U.nombre}),o.jsx("span",{className:"text-xs font-mono font-bold text-primary opacity-80",children:U.fechaTexto})]}),o.jsx("p",{className:"text-sm text-slate-400 leading-relaxed",children:U.descripcion})]})})]})]},U.id))]})})]}),o.jsx(ku,{isOpen:D.open,onClose:()=>q({...D,open:!1}),onConfirm:ue,title:D.title,message:D.message,confirmText:"Delete",type:"danger"})]})},FY=({onCancel:e,onCreate:t})=>{const[r,n]=P.useState(1),[i,s]=P.useState("regional"),[a,l]=P.useState("upload");return o.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-background-dark/80 backdrop-blur-xl animate-in fade-in duration-300",children:o.jsx("div",{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto no-scrollbar relative animate-in zoom-in-95 duration-500",children:o.jsxs(Ue,{className:"p-0 border-white/10 shadow-[0_0_100px_rgba(0,0,0,0.5)] overflow-hidden",children:[o.jsxs("header",{className:"p-8 border-b border-white/5 flex justify-between items-center bg-white/[0.02]",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"size-12 rounded-2xl bg-primary/20 text-primary flex items-center justify-center",children:o.jsx("span",{className:"material-symbols-outlined text-2xl",children:"add_location_alt"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-manrope font-black text-white tracking-tight",children:"Crear Nuevo Mapa / Zona"}),o.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"Configura los detalles para tu nueva entrada cartogrfica."})]})]}),o.jsx("button",{onClick:e,className:"text-slate-500 hover:text-white transition-colors",children:o.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),o.jsxs("div",{className:"p-12 space-y-12",children:[o.jsxs("section",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`size-8 rounded-full flex items-center justify-center text-[10px] font-black ${r===1?"bg-primary text-white shadow-lg shadow-primary/30":"bg-white/10 text-slate-500"}`,children:"1"}),o.jsx("h2",{className:"text-sm font-black uppercase tracking-[0.2em] text-white",children:"Identidad y Jerarqua"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 pl-12",children:[o.jsx(LY,{label:"Nombre del Mapa",placeholder:"ej. La Costa de Zafiro"}),o.jsxs("div",{className:"space-y-1.5 row-span-2",children:[o.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-600 ml-1",children:"Descripcin"}),o.jsx("textarea",{placeholder:"Breve descripcin de la geografa, clima o importancia...",className:"w-full h-[120px] bg-white/5 border border-white/5 rounded-2xl p-4 text-sm text-white focus:border-primary/50 outline-none transition-all resize-none"})]}),o.jsxs("div",{className:"space-y-1.5",children:[o.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-600 ml-1",children:"Zona Padre (Opcional)"}),o.jsxs("select",{className:"w-full bg-white/5 border border-white/5 rounded-2xl px-4 py-3 text-sm text-white focus:border-primary/50 outline-none appearance-none",children:[o.jsx("option",{children:"Ninguna (Nivel Superior)"}),o.jsx("option",{children:"Reino de Aethelgard"}),o.jsx("option",{children:"Continente de Aurum"})]}),o.jsx("p",{className:"text-[9px] text-slate-500 italic mt-1 ml-1 text-primary/70",children:"Seleccionar un padre convierte esto en sub-zona."})]})]})]}),o.jsx("div",{className:"h-px w-full bg-white/5"}),o.jsxs("section",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`size-8 rounded-full flex items-center justify-center text-[10px] font-black ${r===2?"bg-primary text-white shadow-lg shadow-primary/30":"bg-white/10 text-slate-500"}`,children:"2"}),o.jsx("h2",{className:"text-sm font-black uppercase tracking-[0.2em] text-white",children:"Tipo de Mapa"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 pl-12",children:[o.jsx(S2,{active:i==="world",onClick:()=>s("world"),icon:"public",label:"Mapa Mundial",desc:"Continentes, ocanos, escala global."}),o.jsx(S2,{active:i==="regional",onClick:()=>s("regional"),icon:"map",label:"Mapa Regional",desc:"Reinos, provincias, biomas."}),o.jsx(S2,{active:i==="local",onClick:()=>s("local"),icon:"location_city",label:"Ciudad / Local",desc:"Ciudades, mazmorras, mapas de batalla."})]})]}),o.jsx("div",{className:"h-px w-full bg-white/5"}),o.jsxs("section",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`size-8 rounded-full flex items-center justify-center text-[10px] font-black ${r===3?"bg-primary text-white shadow-lg shadow-primary/30":"bg-white/10 text-slate-500"}`,children:"3"}),o.jsx("h2",{className:"text-sm font-black uppercase tracking-[0.2em] text-white",children:"Fuente del Lienzo"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pl-12",children:[o.jsx(u7,{active:a==="upload",onClick:()=>l("upload"),icon:"cloud_upload",label:"Cargar Archivo de Imagen",desc:"Arrastra y suelta o haz clic para buscar",subdesc:"JPG, PNG, WEBP  MAX 25MB"}),o.jsx(u7,{active:a==="blank",onClick:()=>l("blank"),icon:"brush",label:"Lienzo en Blanco",desc:"Crear un nuevo dibujo desde cero",subdesc:"4096 px x 4096 px"})]})]})]}),o.jsxs("footer",{className:"p-8 bg-white/[0.02] border-t border-white/5 flex justify-between items-center",children:[o.jsx("button",{onClick:e,className:"text-sm font-bold text-slate-500 hover:text-white transition-colors",children:"Cancelar"}),o.jsxs("div",{className:"flex items-center gap-6",children:[o.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-slate-600",children:"Cambios guardados localmente"}),o.jsx(Xe,{variant:"primary",className:"px-10 py-3 shadow-xl",onClick:()=>t(a),children:"Crear Mapa"})]})]})]})})})},LY=({label:e,placeholder:t})=>o.jsxs("div",{className:"space-y-1.5",children:[o.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-600 ml-1",children:e}),o.jsx("input",{type:"text",placeholder:t,className:"w-full bg-white/5 border border-white/5 rounded-2xl px-4 py-3 text-sm text-white focus:border-primary/50 transition-all outline-none"})]}),S2=({active:e,onClick:t,icon:r,label:n,desc:i})=>o.jsxs("div",{onClick:t,className:`p-6 rounded-3xl border transition-all cursor-pointer group ${e?"bg-primary/10 border-primary shadow-lg shadow-primary/10":"bg-white/5 border-white/5 hover:border-white/10"}`,children:[o.jsx("div",{className:`size-10 rounded-xl mb-4 flex items-center justify-center transition-all ${e?"bg-primary text-white":"bg-white/5 text-slate-500 group-hover:text-slate-300"}`,children:o.jsx("span",{className:"material-symbols-outlined",children:r})}),o.jsx("h3",{className:`text-sm font-bold mb-1 transition-colors ${e?"text-white":"text-slate-400 group-hover:text-slate-200"}`,children:n}),o.jsx("p",{className:"text-[10px] text-slate-500 leading-relaxed font-medium",children:i})]}),u7=({active:e,onClick:t,icon:r,label:n,desc:i,subdesc:s})=>o.jsxs("div",{onClick:t,className:`p-10 rounded-[2.5rem] border transition-all cursor-pointer group flex flex-col items-center text-center gap-4 ${e?"bg-primary/5 border-primary shadow-lg":"bg-white/[0.02] border-white/5 hover:border-white/10 hover:bg-white/[0.04]"}`,children:[o.jsx("div",{className:`size-16 rounded-[2rem] flex items-center justify-center transition-all ${e?"bg-primary text-white shadow-xl shadow-primary/20":"bg-white/5 text-slate-600 group-hover:text-slate-400"}`,children:o.jsx("span",{className:"material-symbols-outlined text-3xl",children:r})}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("h3",{className:`font-bold transition-colors ${e?"text-white":"text-slate-400"}`,children:n}),o.jsx("p",{className:"text-xs text-slate-500 font-medium",children:i})]}),o.jsx("div",{className:"flex gap-2 mt-2",children:s.split("").map((a,l)=>o.jsx("span",{className:"px-2 py-1 rounded bg-black/20 text-[8px] font-black text-slate-600 tracking-tighter uppercase whitespace-nowrap",children:a.trim()},l))})]}),OY=({mapTitle:e="Reino de Aethelgard",onSave:t,onBack:r})=>{const[n,i]=P.useState(100),[s,a]=P.useState(24),[l,d]=P.useState("#000000"),[h,f]=P.useState("brush"),[p,g]=P.useState(1),[x,w]=P.useState([{id:1,name:"Terreno Base",visible:!0,locked:!1,type:"raster"},{id:2,name:"Ros y Lagos",visible:!0,locked:!1,type:"vector"}]),b=re.useRef(null),[k,_]=P.useState(!1),S=[{id:"select",icon:"near_me"},{id:"brush",icon:"brush"},{id:"eraser",icon:"ink_eraser"},{id:"fill",icon:"format_color_fill"},{id:"measure",icon:"straighten"},{id:"text",icon:"title"}],v=()=>{var M;return(M=b.current)==null?void 0:M.getContext("2d")},j=M=>{const $=x.find(G=>G.id===p);if(!$||!$.visible||$.locked)return;const F=v();F&&(_(!0),F.beginPath(),F.moveTo(M.nativeEvent.offsetX,M.nativeEvent.offsetY),F.lineWidth=s,F.lineCap="round",F.lineJoin="round",F.globalAlpha=n/100,h==="eraser"?F.globalCompositeOperation="destination-out":(F.globalCompositeOperation="source-over",F.strokeStyle=l))},C=M=>{if(!k)return;const $=v();$&&($.lineTo(M.nativeEvent.offsetX,M.nativeEvent.offsetY),$.stroke())},R=()=>{var M;k&&(_(!1),(M=v())==null||M.closePath())},L=M=>{w($=>$.map(F=>F.id===M?{...F,visible:!F.visible}:F))},A=M=>{w($=>$.map(F=>F.id===M?{...F,locked:!F.locked}:F))},O=()=>{const M={id:Date.now(),name:`Capa ${x.length+1}`,visible:!0,locked:!1,type:"raster"};w([M,...x]),g(M.id)},T=M=>{x.length<=1||(w($=>$.filter(F=>F.id!==M)),p===M&&g(x[0].id))},I=()=>{var $;const M=($=b.current)==null?void 0:$.toDataURL();console.log("Saving Map Data:",M?"Data present":"Empty"),alert("Mapa guardado localmente (Simulado)")};return o.jsxs("div",{className:"flex-1 flex flex-col bg-[#050508] text-slate-300 font-sans h-full overflow-hidden relative",children:[o.jsxs("header",{className:"h-20 flex-none border-b border-white/5 flex items-center justify-between px-8 bg-surface-dark/80 backdrop-blur-md z-30",children:[o.jsxs("div",{className:"flex items-center gap-6",children:[o.jsx("button",{onClick:r,className:"p-2 rounded-xl bg-white/5 hover:bg-white/10 transition-colors",children:o.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),o.jsx("div",{className:"w-px h-8 bg-white/10"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-white tracking-tight",children:e}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"size-1.5 rounded-full bg-primary"}),o.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Guardado localmente"})]})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("button",{onClick:I,className:"flex items-center gap-2 px-5 py-2.5 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 transition-all text-sm font-bold",children:[o.jsx("span",{className:"material-symbols-outlined text-xl",children:"cloud_upload"}),"Guardar"]}),o.jsx(Xe,{variant:"primary",icon:"ios_share",className:"px-6 py-2.5 shadow-lg shadow-primary/20",children:"Exportar"}),o.jsx("div",{className:"size-10 rounded-full bg-gradient-to-br from-primary to-cyan-400 border-2 border-white/10 shadow-lg"})]})]}),o.jsxs("div",{className:"flex-1 flex relative overflow-hidden",children:[o.jsx("aside",{className:"absolute left-8 top-1/2 -translate-y-1/2 z-40",children:o.jsxs(Ue,{className:"p-2 flex flex-col gap-2 rounded-2xl border-white/10 bg-surface-dark/40 backdrop-blur-2xl shadow-2xl",children:[S.map(M=>o.jsx("button",{onClick:()=>f(M.id),className:`size-12 rounded-xl flex items-center justify-center transition-all ${h===M.id?"bg-primary text-white shadow-lg shadow-primary/30":"text-slate-500 hover:text-white hover:bg-white/5"}`,children:o.jsx("span",{className:"material-symbols-outlined text-xl",children:M.icon})},M.id)),o.jsx("div",{className:"w-8 h-px bg-white/10 mx-auto my-1"}),o.jsxs("div",{className:"relative group",children:[o.jsx("input",{type:"color",value:l,onChange:M=>d(M.target.value),className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full"}),o.jsx("div",{className:"size-12 rounded-xl flex items-center justify-center cursor-pointer",children:o.jsx("div",{className:"size-7 rounded-full border-2 border-white/20 shadow-inner group-hover:scale-110 transition-transform",style:{backgroundColor:l}})})]})]})}),o.jsxs("main",{className:"flex-1 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] bg-repeat relative overflow-hidden flex items-center justify-center p-20 no-scrollbar",children:[o.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"radial-gradient(circle, white 1px, transparent 1px)",backgroundSize:"30px 30px"}}),o.jsxs("div",{className:"relative group animate-in zoom-in-95 duration-700",children:[o.jsx("p",{className:"absolute -top-10 left-0 text-[10px] font-black uppercase tracking-[0.2em] text-slate-600",children:"Lienzo: 800x600px  RGB"}),o.jsx("div",{className:"relative bg-white rounded shadow-[0_0_100px_rgba(0,0,0,0.5)] overflow-hidden border border-white/10 cursor-crosshair",children:o.jsx("canvas",{ref:b,width:800,height:600,onMouseDown:j,onMouseMove:C,onMouseUp:R,onMouseLeave:R})})]})]}),o.jsxs("aside",{className:"absolute right-8 top-1/2 -translate-y-1/2 z-40 flex flex-col gap-6 w-80",children:[o.jsxs(Ue,{className:"p-6 space-y-6 rounded-3xl border-white/10 bg-surface-dark/40 backdrop-blur-2xl shadow-2xl",children:[o.jsxs("header",{className:"flex justify-between items-center",children:[o.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Propiedades"}),o.jsx("button",{className:"text-slate-600 hover:text-white transition-colors",children:o.jsx("span",{className:"material-symbols-outlined text-sm",children:"settings_input_component"})})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-xs font-bold text-slate-400",children:"Tamao del Pincel"}),o.jsxs("span",{className:"text-xs font-black text-white",children:[s,"px"]})]}),o.jsx("input",{type:"range",min:"1",max:"100",value:s,onChange:M=>a(M.target.value),className:"w-full accent-primary h-1 bg-white/5 rounded-full appearance-none cursor-pointer"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-xs font-bold text-slate-400",children:"Opacidad"}),o.jsxs("span",{className:"text-xs font-black text-white",children:[n,"%"]})]}),o.jsx("input",{type:"range",min:"0",max:"100",value:n,onChange:M=>i(M.target.value),className:"w-full accent-primary h-1 bg-white/5 rounded-full appearance-none cursor-pointer"})]})]})]}),o.jsxs(Ue,{className:"p-6 space-y-6 rounded-3xl border-white/10 bg-surface-dark/40 backdrop-blur-2xl shadow-2xl flex-1 max-h-[400px] overflow-hidden flex flex-col",children:[o.jsxs("header",{className:"flex justify-between items-center",children:[o.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Capas"}),o.jsx("div",{className:"flex gap-2 text-slate-600",children:o.jsx("button",{onClick:O,className:"hover:text-white transition-colors",children:o.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"})})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar space-y-2",children:x.map(M=>o.jsxs("div",{onClick:()=>g(M.id),className:`flex items-center gap-3 p-3 rounded-2xl transition-all cursor-pointer group select-none ${p===M.id?"bg-primary/10 border border-primary/20":"bg-transparent border border-transparent hover:bg-white/5"}`,children:[o.jsx("button",{onClick:$=>{$.stopPropagation(),L(M.id)},className:`material-symbols-outlined text-lg ${M.visible?"text-slate-500 hover:text-white":"text-slate-700"}`,children:M.locked?"lock":M.visible?"visibility":"visibility_off"}),o.jsx("div",{className:"size-10 rounded-lg bg-surface-light border border-white/5 flex items-center justify-center overflow-hidden",children:o.jsx("span",{className:"material-symbols-outlined opacity-30 text-xl",children:M.type==="raster"?"texture":"water_drop"})}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsx("p",{className:`text-xs font-bold truncate ${p===M.id?"text-white":"text-slate-400 group-hover:text-slate-200"}`,children:M.name})}),o.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[o.jsx("button",{onClick:$=>{$.stopPropagation(),A(M.id)},className:"material-symbols-outlined text-sm text-slate-700 hover:text-white transition-colors",children:M.locked?"lock_open":"lock"}),o.jsx("button",{onClick:$=>{$.stopPropagation(),T(M.id)},className:"material-symbols-outlined text-sm text-red-900/50 hover:text-red-400 transition-colors",children:"delete"})]})]},M.id))})]})]}),o.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 z-40",children:o.jsxs(Ue,{className:"px-6 py-3 flex items-center gap-8 rounded-2xl border-white/10 bg-surface-dark/40 backdrop-blur-2xl shadow-2xl",children:[o.jsxs("div",{className:"flex items-center gap-4 text-slate-500 border-r border-white/10 pr-6",children:[o.jsx("button",{className:"hover:text-white transition-colors",children:o.jsx("span",{className:"material-symbols-outlined",children:"undo"})}),o.jsx("button",{className:"hover:text-white transition-colors opacity-30 cursor-not-allowed",children:o.jsx("span",{className:"material-symbols-outlined",children:"redo"})})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{className:"text-slate-500 hover:text-white transition-colors",children:o.jsx("span",{className:"material-symbols-outlined",children:"remove"})}),o.jsx("span",{className:"text-[10px] font-black text-white w-10 text-center",children:"100%"}),o.jsx("button",{className:"text-slate-500 hover:text-white transition-colors",children:o.jsx("span",{className:"material-symbols-outlined",children:"add"})})]})]})})]})]})},DY=({map:e})=>{const[t,r]=P.useState(null);e!=null&&e.nombre;const n=[{id:1,name:"Torre Carmes",type:"location",x:"45%",y:"42%",color:"bg-primary"},{id:2,name:"Costa de Zafiro",type:"region",x:"55%",y:"35%",color:"bg-cyan-500"},{id:3,name:"Pramos de Hierro",type:"danger",x:"62%",y:"58%",color:"bg-amber-500"}];return o.jsxs("div",{className:"flex-1 flex overflow-hidden bg-background-dark font-sans text-slate-300 relative",children:[o.jsxs("main",{className:"flex-1 overflow-hidden relative group",children:[o.jsxs("div",{className:"absolute inset-4 rounded-[2.5rem] overflow-hidden border border-white/5 shadow-2xl bg-surface-dark",children:[o.jsx("img",{src:"https://images.unsplash.com/photo-1521295121783-8a321d551ad2?auto=format&fit=crop&w=2000&q=80",alt:"Background Map",className:"w-full h-full object-cover opacity-60 mix-blend-luminosity grayscale-[0.2]"}),o.jsx("div",{className:"absolute inset-0",children:n.map(i=>o.jsx("div",{onClick:()=>r(i),className:`absolute size-10 -translate-x-1/2 -translate-y-1/2 cursor-pointer transition-all hover:scale-125 z-10 ${(t==null?void 0:t.id)===i.id?"scale-125":""}`,style:{left:i.x,top:i.y},children:o.jsxs("div",{className:`size-full rounded-2xl ${i.color} border-4 border-background-dark shadow-[0_0_20px_rgba(0,0,0,0.5)] flex items-center justify-center text-white relative group/marker`,children:[o.jsx("span",{className:"material-symbols-outlined text-lg",children:i.type==="location"?"fort":i.type==="region"?"terrain":"skull"}),o.jsx("div",{className:"absolute top-12 left-1/2 -translate-x-1/2 px-3 py-1.5 rounded-lg bg-surface-dark border border-white/10 text-[9px] font-black uppercase tracking-widest text-white whitespace-nowrap opacity-0 group-hover/marker:opacity-100 transition-opacity",children:i.name}),o.jsx("div",{className:`absolute -inset-2 rounded-[1.5rem] opacity-20 animate-ping -z-10 ${i.color}`})]})},i.id))})]}),o.jsx("aside",{className:"absolute left-12 top-1/2 -translate-y-1/2 z-20 flex flex-col gap-4",children:o.jsxs(Ue,{className:"p-2 flex flex-col gap-2 rounded-2xl border-white/10 bg-surface-dark/40 backdrop-blur-2xl shadow-2xl",children:[o.jsx(hc,{icon:"near_me",active:!0}),o.jsx(hc,{icon:"location_on"}),o.jsx(hc,{icon:"brush"}),o.jsx(hc,{icon:"layers"}),o.jsx("div",{className:"w-8 h-px bg-white/10 mx-auto my-1"}),o.jsx(hc,{icon:"tune"})]})}),o.jsx("div",{className:"absolute bottom-12 left-12 z-20 px-4 py-2 rounded-xl bg-black/40 border border-white/10 backdrop-blur-md text-[10px] font-black tracking-widest text-slate-400",children:"125%"})]}),o.jsx("aside",{className:`flex-none bg-surface-dark border-l border-white/5 transition-all duration-700 relative z-30 ${t?"w-96 p-8 opacity-100":"w-0 p-0 opacity-0 overflow-hidden"}`,children:t&&o.jsxs("div",{className:"flex flex-col h-full gap-8 animate-in slide-in-from-right-8 duration-500",children:[o.jsxs("header",{className:"space-y-6",children:[o.jsxs("div",{className:"relative aspect-[4/3] rounded-3xl overflow-hidden border border-white/10 shadow-xl group",children:[o.jsx("img",{src:"https://images.unsplash.com/photo-1533154683836-84ea7a0bc310?auto=format&fit=crop&w=500&q=80",alt:"Detail",className:"w-full h-full object-cover grayscale-[0.4] group-hover:grayscale-0 transition-all duration-700"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background-dark via-transparent to-transparent"}),o.jsx("div",{className:"absolute top-4 right-4 flex gap-2",children:o.jsx("button",{onClick:()=>r(null),className:"size-8 rounded-lg bg-black/40 border border-white/10 backdrop-blur-md text-white flex items-center justify-center hover:bg-black/60 transition-colors",children:o.jsx("span",{className:"material-symbols-outlined text-sm",children:"close"})})}),o.jsxs("div",{className:"absolute bottom-4 left-4 flex gap-2",children:[o.jsx("span",{className:"px-3 py-1 rounded bg-primary/20 text-primary border border-primary/20 text-[8px] font-black uppercase tracking-widest backdrop-blur-md",children:"Lugar"}),o.jsx("span",{className:"px-3 py-1 rounded bg-emerald-500/20 text-emerald-400 border border-emerald-500/20 text-[8px] font-black uppercase tracking-widest backdrop-blur-md",children:"Capital"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsx("h2",{className:"text-3xl font-manrope font-black text-white tracking-tight leading-none",children:t.name}),o.jsx("button",{className:"text-slate-500 hover:text-white transition-colors p-2 rounded-xl hover:bg-white/5",children:o.jsx("span",{className:"material-symbols-outlined",children:"edit"})})]}),o.jsx("p",{className:"text-sm text-slate-400 leading-relaxed font-manrope",children:"La antigua sede de los Magos de Fuego, erigida sobre la caldera inactiva del Monte Ignis. Sus muros estn imbuidos de magia protectora."})]})]}),o.jsxs("div",{className:"space-y-8 flex-1 overflow-y-auto no-scrollbar",children:[o.jsxs("section",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center px-1",children:[o.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Habitantes Clave"}),o.jsx("button",{className:"text-[10px] font-bold text-primary hover:underline transition-all",children:"Ver todos"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(d7,{name:"Lyra Ignis",role:"Gran Maga"}),o.jsx(d7,{name:"Kaelen",role:"Capitn de la Guardia"})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500 px-1",children:"Eventos Relacionados"}),o.jsx(Ue,{className:"p-4 border-white/5 hover:border-white/10 transition-all cursor-pointer group",children:o.jsxs("div",{className:"flex gap-4 items-center",children:[o.jsx("div",{className:"size-10 rounded-xl bg-amber-500/10 text-amber-500 border border-amber-500/20 flex items-center justify-center",children:o.jsx("span",{className:"material-symbols-outlined text-xl",children:"history_edu"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-xs font-bold text-white group-hover:text-primary transition-colors",children:"El Asedio de Ceniza"}),o.jsx("p",{className:"text-[10px] text-slate-500 font-medium",children:"Hace 300 aos"})]})]})})]})]}),o.jsx("footer",{className:"pt-6 border-t border-white/5",children:o.jsx(Xe,{variant:"primary",icon:"auto_stories",className:"w-full py-4 rounded-2xl shadow-xl shadow-primary/20",children:"Abrir en la Biblia"})})]})})]})},hc=({icon:e,active:t})=>o.jsx("button",{className:`size-12 rounded-xl flex items-center justify-center transition-all ${t?"bg-primary text-white shadow-lg shadow-primary/30":"text-slate-500 hover:text-white hover:bg-white/5"}`,children:o.jsx("span",{className:"material-symbols-outlined text-xl",children:e})}),d7=({name:e,role:t})=>o.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-2xl bg-white/[0.02] border border-white/5 hover:border-white/10 transition-all cursor-pointer group",children:[o.jsx(ou,{name:e,size:"sm",className:"border-white/10 group-hover:border-primary/50 transition-all"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"text-xs font-bold text-white truncate",children:e}),o.jsx("p",{className:"text-[10px] text-slate-500 font-medium truncate",children:t})]}),o.jsx("span",{className:"material-symbols-outlined text-slate-700 text-sm group-hover:text-white transition-colors",children:"chevron_right"})]}),zY=({maps:e,onSelect:t,onCreateNew:r,onClose:n})=>o.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-background-dark/80 backdrop-blur-xl animate-in fade-in duration-300",children:o.jsx("div",{className:"w-full max-w-3xl animate-in zoom-in-95 duration-500",children:o.jsxs(Ue,{className:"overflow-hidden border-white/10 shadow-2xl",children:[o.jsxs("header",{className:"p-6 border-b border-white/5 flex justify-between items-center bg-white/[0.02]",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"material-symbols-outlined text-primary",children:"map"}),o.jsx("h2",{className:"text-xl font-manrope font-black text-white",children:"Cartografa del Proyecto"})]}),o.jsx("button",{onClick:n,className:"text-slate-500 hover:text-white transition-colors",children:o.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),o.jsxs("div",{className:"p-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-[60vh] overflow-y-auto custom-scrollbar",children:[o.jsxs("div",{onClick:r,className:"group p-6 rounded-2xl border-2 border-dashed border-white/5 hover:border-primary/50 hover:bg-primary/5 transition-all cursor-pointer flex flex-col items-center justify-center text-center gap-3",children:[o.jsx("div",{className:"size-12 rounded-full bg-primary/10 text-primary flex items-center justify-center group-hover:scale-110 transition-transform",children:o.jsx("span",{className:"material-symbols-outlined",children:"add"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-bold text-white",children:"Nuevo Mapa"}),o.jsx("p",{className:"text-[10px] text-slate-500 uppercase font-black tracking-tighter",children:"Crear desde cero"})]})]}),e.map(i=>o.jsxs("div",{onClick:()=>t(i),className:"group p-4 rounded-2xl bg-white/5 border border-white/5 hover:border-primary/50 hover:bg-white/10 transition-all cursor-pointer space-y-3",children:[o.jsx("div",{className:"aspect-video rounded-xl bg-surface-light border border-white/5 flex items-center justify-center overflow-hidden",children:o.jsx("span",{className:"material-symbols-outlined text-4xl opacity-20 group-hover:opacity-40 transition-opacity",children:"image"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-bold text-white truncate",children:i.nombre}),o.jsx("p",{className:"text-[10px] text-slate-500 uppercase font-black tracking-tighter",children:"ltima edicin: Reciente"})]})]},i.id))]}),o.jsx("footer",{className:"p-6 bg-white/[0.02] border-t border-white/5 flex justify-end",children:o.jsx("p",{className:"text-[10px] text-slate-600 font-bold uppercase tracking-widest",children:"Selecciona un mapa para cargar el visor"})})]})})}),UY=()=>{const[e,t]=P.useState("viewer"),[r,n]=P.useState([]),[i,s]=P.useState(null),[a,l]=P.useState(!1);P.useEffect(()=>{d()},[]);const d=async()=>{try{const p=(await he.get("/world-bible/entities")).filter(g=>g.tipoEspecial==="map");n(p),p.length>0&&!i&&s(p[0])}catch(f){console.error("Error loading maps",f)}},h=f=>{f==="blank"?t("editor"):(d(),t("viewer"))};return o.jsxs("div",{className:"flex-1 flex flex-col h-full bg-background-dark overflow-hidden",children:[e==="viewer"&&o.jsxs("div",{className:"flex-1 flex flex-col h-full relative",children:[o.jsx("button",{onClick:()=>l(!0),className:"absolute right-12 bottom-12 z-50 size-16 rounded-3xl bg-primary text-white flex items-center justify-center shadow-2xl shadow-primary/40 hover:scale-110 active:scale-95 transition-all group",children:o.jsx("span",{className:"material-symbols-outlined text-3xl group-hover:rotate-90 transition-transform duration-300",children:"add"})}),o.jsx(DY,{map:i}),a&&o.jsx(zY,{maps:r,onSelect:f=>{s(f),l(!1)},onCreateNew:()=>{l(!1),t("wizard")},onClose:()=>l(!1)})]}),e==="wizard"&&o.jsx(FY,{onCancel:()=>t("viewer"),onCreate:h}),e==="editor"&&o.jsx(OY,{onBack:()=>t("viewer"),onSave:()=>t("viewer")})]})},GY=()=>{const[e,t]=P.useState("Loading..."),[r,n]=P.useState({words:0,rules:0,glyphs:0}),[i,s]=P.useState("Standard Tongue");P.useEffect(()=>{a()},[]);const a=async()=>{try{const l=await he.get("/bd/proyecto-activo");t(l.nombreProyecto);const d=await he.get("/conlang/stats");n(d);const h=await he.get("/conlang/lenguas");h&&h.length>0&&s(h[0].nombre)}catch(l){console.error("Error loading conlang data:",l),t("Default Project")}};return o.jsxs("div",{className:"flex-1 flex flex-col h-full bg-[#0a0a0f] text-slate-300 font-sans overflow-y-auto no-scrollbar p-12 lg:p-16 gap-16",children:[o.jsxs("header",{className:"space-y-6",children:[o.jsxs("nav",{className:"flex items-center gap-3 text-[10px] font-black uppercase tracking-widest text-slate-500",children:[o.jsx("span",{children:e}),o.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_right"}),o.jsxs("span",{className:"text-white",children:["Conlang: ",i]})]}),o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"space-y-4 max-w-2xl",children:[o.jsx("h1",{className:"text-6xl font-manrope font-black text-white tracking-tight",children:i}),o.jsxs("p",{className:"text-lg text-slate-400 leading-relaxed",children:["A conlang belonging to ",e,". Manage its lexicon, grammar rules, and writing systems here."]}),o.jsxs("div",{className:"flex gap-4 pt-2",children:[o.jsx("span",{className:"px-3 py-1 rounded bg-emerald-500/10 text-emerald-400 border border-emerald-500/20 text-[9px] font-black uppercase tracking-widest",children:"Complete: 45%"}),o.jsx("span",{className:"px-3 py-1 rounded bg-primary/10 text-primary border border-primary/20 text-[9px] font-black uppercase tracking-widest",children:"Type: Agglutinative"})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-3 text-slate-500 border-r border-white/5 pr-6 mr-2",children:[o.jsx("span",{className:"material-symbols-outlined text-sm animate-pulse text-emerald-500",children:"save"}),o.jsx("span",{className:"text-[10px] font-bold",children:"Auto-Saved"}),o.jsx("span",{className:"material-symbols-outlined hover:text-white transition-colors cursor-pointer",children:"dark_mode"})]}),o.jsx(Xe,{variant:"primary",icon:"add",size:"md",children:"Create Element"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-12",children:[o.jsxs("section",{className:"xl:col-span-2 space-y-8",children:[o.jsxs("div",{className:"flex justify-between items-center px-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"material-symbols-outlined text-primary text-2xl",children:"menu_book"}),o.jsx("h3",{className:"text-xl font-bold text-white tracking-tight",children:"Lexicon"})]}),o.jsxs("span",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-widest hover:text-primary transition-all cursor-pointer",children:["View All (",r.words,")"]})]}),o.jsxs(Ue,{className:"p-0 border-white/5 bg-surface-dark/40 overflow-hidden shadow-2xl",children:[o.jsxs("div",{className:"p-4 border-b border-white/5 flex items-center gap-4",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-slate-600 text-lg",children:"search"}),o.jsx("input",{type:"text",placeholder:"Search word or meaning...",className:"w-full bg-white/5 border border-white/5 rounded-2xl py-3 pl-12 pr-4 text-xs focus:ring-1 focus:ring-primary/30 outline-none transition-all"})]}),o.jsx("button",{className:"size-10 rounded-xl bg-white/5 border border-white/5 flex items-center justify-center text-slate-500 hover:text-white transition-all",children:o.jsx("span",{className:"material-symbols-outlined text-xl",children:"tune"})})]}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsx(j2,{word:"Ael'or",type:"noun",gender:"neutral",def:"Starlight; specifically the light from the twin moons."}),o.jsx(j2,{word:"Vexi",type:"verb",gender:"transitive",def:"To weave magic; to create something from nothing."}),o.jsx(j2,{word:"Dra'kan",type:"adj",gender:"",def:"Ancient; belonging to the era of dragons."})]}),o.jsx("div",{className:"p-6 bg-black/20 border-t border-white/5",children:o.jsxs("button",{className:"w-full py-4 rounded-3xl border-2 border-dashed border-white/5 text-slate-600 hover:text-white hover:border-primary/50 hover:bg-primary/5 transition-all text-[10px] font-black uppercase tracking-[0.2em] flex items-center justify-center gap-3",children:[o.jsx("span",{className:"material-symbols-outlined",children:"add"}),"Add New Word"]})})]})]}),o.jsxs("section",{className:"space-y-8",children:[o.jsxs("div",{className:"flex justify-between items-center px-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"material-symbols-outlined text-primary text-2xl",children:"architecture"}),o.jsx("h3",{className:"text-xl font-bold text-white tracking-tight",children:"Grammar Rules"})]}),o.jsx("span",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-widest hover:text-primary transition-all cursor-pointer",children:"Manage"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(h7,{title:"Sentence Structure",status:"active",statusColor:"emerald",desc:"Standard order is SOV (Subject-Object-Verb), but poetry uses VSO for emphasis on action.",tags:["Syntax","Basic"]}),o.jsx(h7,{title:"Noun Declensions",status:"pending",statusColor:"amber",desc:"Seven cases marked by suffixes. Pluralization shifts the stress to the final syllable.",tags:["Morphology"]}),o.jsxs("button",{className:"w-full h-32 rounded-[2.5rem] border-2 border-dashed border-white/5 flex flex-col items-center justify-center gap-2 text-slate-600 hover:text-white hover:border-primary/30 hover:bg-primary/5 transition-all",children:[o.jsx("span",{className:"material-symbols-outlined",children:"add_circle"}),o.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Define New Rule"})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-12",children:[o.jsxs("section",{className:"space-y-8",children:[o.jsxs("div",{className:"flex justify-between items-center px-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"material-symbols-outlined text-primary text-2xl",children:"draw"}),o.jsx("h3",{className:"text-xl font-bold text-white tracking-tight",children:"Writing System"})]}),o.jsxs("div",{className:"flex gap-2 text-slate-600",children:[o.jsx("button",{className:"p-1 rounded hover:bg-white/5 hover:text-white",children:o.jsx("span",{className:"material-symbols-outlined text-lg",children:"grid_view"})}),o.jsx("button",{className:"p-1 rounded hover:bg-white/5 hover:text-white",children:o.jsx("span",{className:"material-symbols-outlined text-lg",children:"title"})})]})]}),o.jsxs(Ue,{className:"p-8 border-white/5 bg-surface-dark/40 rounded-[3rem] space-y-8 shadow-2xl",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-2xl font-black text-white tracking-tight mb-1",children:"Moon Script"}),o.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Abugida  Left-to-Right"})]}),o.jsx(Xe,{variant:"secondary",size:"sm",className:"bg-primary/10 border-primary/20 text-primary",children:"Open Editor"})]}),o.jsxs("div",{className:"grid grid-cols-6 gap-3",children:[["","","","",""].map(l=>o.jsx("div",{className:"aspect-square rounded-2xl bg-white/5 border border-white/5 flex items-center justify-center text-3xl font-serif text-white hover:bg-white/10 transition-all cursor-pointer",children:l},l)),o.jsx("div",{className:"aspect-square rounded-2xl border-2 border-dashed border-white/5 flex items-center justify-center text-slate-600 hover:border-primary/50 hover:text-white transition-all cursor-pointer",children:o.jsx("span",{className:"material-symbols-outlined",children:"add"})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-[8px] font-black uppercase tracking-widest text-slate-600",children:[o.jsx("span",{children:"Glyph Set"}),o.jsx("span",{children:"24/32 Completed"})]}),o.jsx("div",{className:"h-1.5 w-full bg-white/5 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-primary w-[75%] rounded-full shadow-[0_0_10px_rgba(99,102,242,0.5)]"})})]})]})]}),o.jsxs("section",{className:"space-y-8",children:[o.jsxs("div",{className:"flex items-center gap-3 px-2",children:[o.jsx("span",{className:"material-symbols-outlined text-primary text-2xl",children:"graphic_eq"}),o.jsx("h3",{className:"text-xl font-bold text-white tracking-tight",children:"Translator & Phonology"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[o.jsxs(Ue,{className:"p-8 border-primary/20 bg-primary/5 rounded-[3rem] space-y-6 shadow-2xl shadow-primary/10",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-primary",children:"Live Logographic Stream"}),o.jsx("span",{className:"material-symbols-outlined text-primary animate-pulse",children:"sync_alt"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("input",{type:"text",placeholder:"Source text here...",className:"w-full bg-black/40 border border-white/10 rounded-2xl p-4 text-xs font-bold text-white focus:border-primary/50 outline-none transition-all"}),o.jsxs("div",{className:"h-24 rounded-2xl bg-black/60 border border-white/5 flex items-center justify-center relative overflow-hidden group",children:[o.jsx("span",{className:"text-5xl font-serif text-white opacity-40 group-hover:opacity-100 transition-opacity",children:"   "}),o.jsx("div",{className:"absolute top-2 right-4 text-[7px] font-black uppercase tracking-widest text-slate-700",children:"Rendered Output"})]})]})]}),o.jsxs(Ue,{className:"p-8 border-white/5 bg-surface-dark/40 rounded-[3rem] space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Vowel Inventory"}),o.jsx("button",{className:"text-primary text-lg",children:o.jsx("span",{className:"material-symbols-outlined",children:"add"})})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:["/a/","/e/","/i/","/o/","/u/","/y/"].map(l=>o.jsx("div",{className:"px-3 py-1.5 rounded-xl bg-white/5 border border-white/5 text-[11px] font-mono font-bold text-slate-300 hover:text-white transition-colors cursor-pointer",children:l},l))})]}),o.jsxs(Ue,{className:"p-8 border-white/5 bg-surface-dark/40 rounded-[3rem] space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Vector Symbols"}),o.jsx("button",{className:"text-[8px] font-bold text-primary hover:underline transition-all",children:"Upload SVG"})]}),o.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[[{id:1,icon:"filter_vintage"},{id:2,icon:"auto_awesome"},{id:3,icon:"infinite"}].map(l=>o.jsx("div",{className:"aspect-square rounded-2xl bg-white/5 border border-white/5 flex items-center justify-center text-slate-400 hover:text-white transition-all cursor-pointer",children:o.jsx("span",{className:"material-symbols-outlined text-2xl",children:l.icon})},l.id)),o.jsxs("div",{className:"aspect-square rounded-2xl border-2 border-dashed border-white/5 flex flex-col items-center justify-center text-slate-700 hover:border-primary/50 hover:text-white transition-all cursor-pointer",children:[o.jsx("span",{className:"material-symbols-outlined text-lg",children:"cloud_upload"}),o.jsx("span",{className:"text-[7px] font-bold uppercase mt-1",children:"Add"})]})]})]})]})]})]})]})},j2=({word:e,type:t,gender:r,def:n})=>o.jsxs("div",{className:"p-4 rounded-2xl border border-transparent hover:bg-white/5 hover:border-white/5 transition-all group cursor-pointer relative",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[o.jsx("h4",{className:"text-xl font-manrope font-black text-white group-hover:text-primary transition-colors",children:e}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("span",{className:"text-[9px] font-bold text-slate-600 italic",children:t}),r&&o.jsxs("span",{className:"text-[9px] font-bold text-slate-700 uppercase",children:["(",r,")"]})]})]}),o.jsx("p",{className:"text-sm text-slate-400 leading-relaxed font-manrope",children:n}),o.jsx("button",{className:"absolute right-4 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity p-2 text-slate-600 hover:text-white",children:o.jsx("span",{className:"material-symbols-outlined",children:"edit_note"})})]}),h7=({title:e,status:t,statusColor:r,desc:n,tags:i})=>o.jsxs(Ue,{className:"p-8 border-white/5 hover:border-white/10 transition-all cursor-pointer group space-y-4",children:[o.jsxs("header",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`size-2 rounded-full bg-${r}-500 shadow-[0_0_10px_rgba(var(--${r}-rgb),0.5)]`}),o.jsx("h4",{className:"font-bold text-white group-hover:text-primary transition-colors",children:e})]}),o.jsx("button",{className:"text-slate-700 hover:text-white transition-colors",children:o.jsx("span",{className:"material-symbols-outlined",children:"more_vert"})})]}),o.jsx("p",{className:"text-[11px] text-slate-500 leading-relaxed font-manrope",children:n}),o.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(s=>o.jsx("span",{className:"px-2 py-0.5 rounded bg-white/5 border border-white/5 text-[8px] font-black uppercase tracking-widest text-slate-600",children:s},s))})]}),$Y=()=>o.jsxs("div",{className:"flex-1 flex flex-col h-full bg-[#050B0D] text-[#00E5FF] font-mono overflow-hidden",children:[o.jsxs("header",{className:"h-20 border-b border-[#00E5FF]/20 flex items-center justify-between px-10 bg-black/40 backdrop-blur-xl",children:[o.jsxs("div",{className:"flex items-center gap-10",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-[10px] opacity-40 uppercase tracking-[0.4em] font-bold",children:"Datastream_Nav"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"material-symbols-outlined text-2xl",children:"language"}),o.jsx("span",{className:"text-2xl font-black italic tracking-tighter",children:"Chronos Atlas"})]})]}),o.jsxs("div",{className:"flex items-center gap-4 border-l border-[#00E5FF]/20 pl-10",children:[o.jsx("span",{className:"text-3xl font-black tracking-[0.2em] italic opacity-80",children:"DIGITAL RUNE COMPILER"}),o.jsx("div",{className:"px-3 py-1 rounded-sm bg-[#00E5FF]/10 border border-[#00E5FF]/30 text-[10px] font-black uppercase tracking-widest animate-pulse",children:"Data Ready"})]})]}),o.jsxs("div",{className:"flex items-center gap-8",children:[o.jsxs("div",{className:"flex items-center gap-2 opacity-60 hover:opacity-100 transition-opacity cursor-pointer",children:[o.jsx("span",{className:"material-symbols-outlined text-lg",children:"help"}),o.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Protocol"})]}),o.jsxs("button",{className:"flex items-center gap-3 px-6 py-2.5 bg-[#00E5FF] text-black font-black uppercase text-xs tracking-widest rounded-sm hover:shadow-[0_0_20px_rgba(0,229,255,0.4)] transition-all",children:[o.jsx("span",{className:"material-symbols-outlined",children:"save"}),"Commit Data"]}),o.jsx("div",{className:"size-10 rounded-full bg-gradient-to-tr from-[#00E5FF] to-blue-600 border border-white/20 shadow-lg"})]})]}),o.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[o.jsxs("main",{className:"flex-1 flex flex-col p-12 gap-12 overflow-y-auto no-scrollbar relative",children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-white/5 overflow-hidden",children:o.jsx("div",{className:"h-full bg-[#00E5FF] w-[64%] shadow-[0_0_10px_#00E5FF]"})}),o.jsxs("section",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"size-2 bg-[#00E5FF] rounded-full shadow-[0_0_10px_#00E5FF]"}),o.jsx("h3",{className:"text-sm font-black uppercase tracking-[0.4em]",children:"Glyph Set (Scan)"})]}),o.jsxs("div",{className:"flex gap-4 opacity-40",children:[o.jsx("span",{className:"material-symbols-outlined text-xl",children:"grid_view"}),o.jsx("span",{className:"material-symbols-outlined text-xl",children:"view_list"})]})]}),o.jsxs("div",{className:"p-10 rounded-sm border border-[#00E5FF]/10 bg-[#00E5FF]/[0.02] grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-6",children:[o.jsx(Zn,{symbol:"",keyLabel:"A"}),o.jsx(Zn,{symbol:"",keyLabel:"B"}),o.jsx(Zn,{symbol:"",keyLabel:"C"}),o.jsx(Zn,{symbol:"",keyLabel:"D",active:!0}),o.jsx(Zn,{}),o.jsx(Zn,{}),o.jsx(Zn,{}),o.jsx(Zn,{}),o.jsx(Zn,{}),o.jsx(Zn,{}),o.jsx("div",{className:"aspect-square rounded shadow-inner border border-dashed border-[#00E5FF]/20 flex items-center justify-center hover:bg-[#00E5FF]/5 transition-colors cursor-pointer group",children:o.jsx("span",{className:"material-symbols-outlined opacity-20 group-hover:opacity-100 transition-opacity",children:"add"})})]}),o.jsxs("div",{className:"flex justify-between items-center text-[10px] font-black uppercase tracking-[0.2em] opacity-40",children:[o.jsx("span",{children:"26 Glyphs Mapped"}),o.jsxs("div",{className:"flex gap-10",children:[o.jsxs("button",{className:"hover:text-[#00E5FF] flex items-center gap-2",children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"tune"})," Manage"]}),o.jsxs("button",{className:"hover:text-[#00E5FF] flex items-center gap-2",children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"settings_input_component"})," Ranges"]})]})]})]}),o.jsxs("section",{className:"flex-1 flex flex-col gap-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"size-2 bg-[#00E5FF] rounded-full shadow-[0_0_10px_#00E5FF] opacity-40"}),o.jsx("h3",{className:"text-sm font-black uppercase tracking-[0.4em] opacity-40",children:"Live Preview Stream"})]}),o.jsxs("div",{className:"flex-1 rounded-sm border border-[#00E5FF]/10 bg-black/40 flex flex-col p-12 items-center justify-center relative group min-h-[300px]",children:[o.jsx("div",{className:"absolute top-4 left-4 text-[8px] opacity-20 uppercase tracking-widest font-black",children:"Buffer Status: Active"}),o.jsx("textarea",{className:"w-full h-full bg-transparent border-none outline-none text-center text-7xl font-bold tracking-widest text-[#00E5FF]/10 group-hover:text-[#00E5FF]/40 transition-all placeholder:text-[#00E5FF]/5 resize-none italic",placeholder:"Input your data stream here..."}),o.jsxs("div",{className:"absolute bottom-6 right-8 flex gap-6 text-[8px] font-black uppercase tracking-widest opacity-20",children:[o.jsx("span",{children:"48px"}),o.jsx("span",{children:"Regular"}),o.jsx("span",{children:"UTF-8"})]}),o.jsx("div",{className:"absolute inset-x-12 top-1/2 h-px bg-[#00E5FF]/10 -translate-y-1/2 pointer-events-none"})]})]})]}),o.jsxs("aside",{className:"w-[450px] border-l border-[#00E5FF]/10 p-10 flex flex-col gap-10 bg-black/40 backdrop-blur-xl relative z-20",children:[o.jsx("h3",{className:"text-xs font-black uppercase tracking-[0.4em] opacity-60 mb-2",children:"Configuration Matrix"}),o.jsxs(Ue,{className:"p-8 border-[#00E5FF]/20 bg-[#00E5FF]/[0.02] space-y-8 rounded-sm",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx("label",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-[#00E5FF]/60 block ml-1",children:"Font Name"}),o.jsx("input",{type:"text",defaultValue:"NEURALINK CIPHER",className:"w-full bg-black/60 border border-[#00E5FF]/30 px-6 py-4 text-xs font-black text-[#00E5FF] focus:border-[#00E5FF] outline-none transition-all tracking-widest uppercase italic"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("label",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-[#00E5FF]/60 block ml-1",children:"Author / Metadata"}),o.jsx("input",{type:"text",placeholder:"YOUR SYNTHETIC ID",className:"w-full bg-black/60 border border-[#00E5FF]/30 px-6 py-4 text-xs font-black text-[#00E5FF] focus:border-[#00E5FF] outline-none transition-all tracking-widest uppercase italic"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("label",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-[#00E5FF]/60 block ml-1",children:"Format"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsx("button",{className:"py-4 border border-[#00E5FF] bg-[#00E5FF]/10 text-[#00E5FF] text-xs font-black tracking-widest shadow-[0_0_15px_rgba(0,229,255,0.2)]",children:".TTF"}),o.jsx("button",{className:"py-4 border border-[#00E5FF]/20 text-[#00E5FF]/40 text-xs font-black tracking-widest hover:border-[#00E5FF]/40 transition-all",children:".OTF"})]})]}),o.jsxs("div",{className:"pt-4 space-y-6",children:[o.jsx(f7,{label:"Ligatures",active:!0}),o.jsx(f7,{label:"Kerning",active:!0})]}),o.jsxs("button",{className:"w-full py-6 mt-6 bg-gradient-to-r from-blue-600 to-fuchsia-500 text-white font-black uppercase text-xs tracking-[0.3em] flex items-center justify-center gap-4 hover:shadow-[0_0_30px_rgba(255,0,255,0.3)] transition-all animate-pulse",children:[o.jsx("span",{className:"material-symbols-outlined text-lg",children:"download"}),"Compile & Download"]})]}),o.jsxs("div",{className:"flex-1 flex flex-col gap-6 opacity-30 pointer-events-none",children:[o.jsxs("div",{className:"flex justify-between text-[10px] uppercase font-black",children:[o.jsx("span",{children:"Compiler Logs"}),o.jsx("span",{children:"V2.0.4"})]}),o.jsxs("div",{className:"flex-1 border border-[#00E5FF]/10 bg-black/20 p-6 flex flex-col font-mono text-[9px] gap-2 overflow-hidden",children:[o.jsx("p",{children:"[SCN] Initializing Glyph Buffer..."}),o.jsx("p",{children:"[MAP] Vector data detected for U+0394"}),o.jsx("p",{children:"[SYS] Memory allocation optimized"}),o.jsx("p",{className:"animate-pulse",children:"_"})]})]})]})]})]}),Zn=({symbol:e,keyLabel:t,active:r})=>o.jsxs("div",{className:`aspect-square rounded border transition-all cursor-pointer flex items-center justify-center relative group ${r?"bg-[#00E5FF]/20 border-[#00E5FF] shadow-[0_0_20px_rgba(0,229,255,0.3)]":"bg-black/40 border-[#00E5FF]/10 hover:border-[#00E5FF]/40"}`,children:[o.jsx("span",{className:`text-3xl font-serif ${r?"text-white":"opacity-20 group-hover:opacity-60"}`,children:e||"..."}),t&&o.jsx("span",{className:`absolute top-1 right-1 text-[8px] font-black uppercase ${r?"text-[#00E5FF]/80":"opacity-20"}`,children:t})]}),f7=({label:e,active:t})=>o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest opacity-60",children:e}),o.jsx("button",{className:`w-12 h-6 rounded-full p-1 transition-colors relative ${t?"bg-[#00E5FF]/40":"bg-white/5"}`,children:o.jsx("div",{className:`size-4 rounded-full bg-[#00E5FF] shadow-[0_0_10px_#00E5FF] transition-transform ${t?"translate-x-6":"translate-x-0"}`})})]}),BY=({onBack:e,onSave:t})=>{const[r,n]=P.useState(4),[i,s]=P.useState("curve"),[a,l]=P.useState(1),d=[{id:"select",icon:"near_me"},{id:"curve",icon:"gesture"},{id:"eraser",icon:"ink_eraser"},{id:"line",icon:"horizontal_rule"},{id:"shape",icon:"pentagon"},{id:"text",icon:"title"}],h=[{id:1,name:"Trazo Principal",type:"Vector",locked:!0,visible:!0},{id:2,name:"Detalles Secundarios",type:"Vector",locked:!0,visible:!0},{id:3,name:"Boceto Ref.",type:"Imagen (Raster)",locked:!0,visible:!1}];return o.jsxs("div",{className:"flex-1 flex flex-col bg-[#0a0a0f] text-slate-300 font-sans h-full overflow-hidden relative",children:[o.jsxs("header",{className:"h-20 flex-none border-b border-white/5 flex items-center justify-between px-8 bg-surface-dark/80 backdrop-blur-md z-30",children:[o.jsxs("div",{className:"flex items-center gap-6",children:[o.jsx("button",{onClick:e,className:"p-2 rounded-xl bg-white/5 hover:bg-white/10 transition-colors",children:o.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),o.jsx("div",{className:"w-px h-8 bg-white/10"}),o.jsxs("div",{children:[o.jsxs("nav",{className:"flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-slate-500 mb-0.5",children:[o.jsx("span",{children:"Idiomas"}),o.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_right"}),o.jsx("span",{className:"text-white",children:"Editor Grfico"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"flex items-center gap-4 text-slate-500",children:[o.jsx("button",{className:"hover:text-white transition-colors",children:o.jsx("span",{className:"material-symbols-outlined text-xl",children:"undo"})}),o.jsx("button",{className:"hover:text-white transition-colors",children:o.jsx("span",{className:"material-symbols-outlined text-xl",children:"redo"})})]}),o.jsx("div",{className:"w-px h-4 bg-white/10 mx-2"}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx("button",{className:"p-1 rounded hover:bg-white/5 text-slate-500 hover:text-white",children:o.jsx("span",{className:"material-symbols-outlined text-lg",children:"grid_on"})}),o.jsx("button",{className:"p-1 rounded bg-white/10 text-primary",children:o.jsx("span",{className:"material-symbols-outlined text-sm",children:"hub"})})]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("button",{className:"flex items-center gap-2 px-6 py-2.5 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 transition-all text-xs font-black uppercase tracking-widest text-slate-400",children:[o.jsx("span",{className:"material-symbols-outlined text-lg",children:"download"}),"Exportar SVG"]}),o.jsx(Xe,{variant:"primary",icon:"save",className:"px-8 py-3 shadow-xl shadow-primary/30",onClick:t,children:"Guardar Glifo"}),o.jsx("div",{className:"size-10 rounded-full bg-gradient-to-br from-primary to-orange-400 border-2 border-white/10 shadow-lg ml-2"})]})]}),o.jsxs("div",{className:"flex-1 flex relative overflow-hidden",children:[o.jsxs("aside",{className:"h-full w-20 flex-none border-r border-white/5 bg-surface-dark/40 backdrop-blur-xl flex flex-col items-center py-6 gap-2 z-40",children:[d.map(f=>o.jsx("button",{onClick:()=>s(f.id),className:`size-12 rounded-2xl flex items-center justify-center transition-all ${i===f.id?"bg-primary text-white shadow-lg shadow-primary/30":"text-slate-600 hover:text-white hover:bg-white/5"}`,children:o.jsx("span",{className:"material-symbols-outlined text-2xl",children:f.icon})},f.id)),o.jsx("div",{className:"flex-1"}),o.jsx("button",{className:"size-12 rounded-2xl flex items-center justify-center text-slate-600 hover:text-white transition-all",children:o.jsx("span",{className:"material-symbols-outlined text-2xl",children:"add_photo_alternate"})}),o.jsx("button",{className:"size-12 rounded-2xl flex items-center justify-center text-slate-600 hover:text-white transition-all",children:o.jsx("span",{className:"material-symbols-outlined text-2xl",children:"settings"})})]}),o.jsxs("main",{className:"flex-1 bg-[#050508] relative overflow-hidden flex items-center justify-center no-scrollbar",children:[o.jsx("div",{className:"absolute inset-x-20 top-1/2 h-px bg-red-500/20 pointer-events-none"}),o.jsxs("div",{className:"relative group animate-in zoom-in-95 duration-700",children:[o.jsx("div",{className:"absolute inset-x-0 top-10 h-px bg-white/10"}),o.jsx("div",{className:"absolute inset-x-0 bottom-10 h-px bg-white/10"}),o.jsxs("div",{className:"w-[600px] h-[600px] border border-white/5 rounded-3xl bg-black/40 flex items-center justify-center relative overflow-hidden",children:[o.jsxs("svg",{width:"400",height:"400",className:"drop-shadow-[0_0_20px_rgba(99,102,242,0.5)] scale-125",children:[o.jsx("circle",{cx:"200",cy:"230",r:"100",fill:"none",stroke:"#6366f1",strokeWidth:"6",strokeLinecap:"round"}),o.jsx("line",{x1:"200",y1:"230",x2:"200",y2:"380",stroke:"#6366f1",strokeWidth:"6",strokeLinecap:"round"}),o.jsx("circle",{cx:"200",cy:"230",r:"4",fill:"white"}),o.jsx("rect",{x:"196",y:"376",width:"8",height:"8",fill:"white"}),o.jsx("rect",{x:"96",y:"226",width:"8",height:"8",fill:"#6366f1"}),o.jsx("rect",{x:"296",y:"226",width:"8",height:"8",fill:"#6366f1"}),o.jsx("rect",{x:"136",y:"160",width:"6",height:"6",fill:"#6366f1",className:"opacity-40"}),o.jsx("rect",{x:"256",y:"160",width:"6",height:"6",fill:"#6366f1",className:"opacity-40"})]}),o.jsx("div",{className:"absolute top-[160px] left-[136px] size-1 border border-primary/40 border-dashed w-[20px] h-[100px] pointer-events-none"}),o.jsx("div",{className:"absolute top-[160px] right-[136px] size-1 border border-primary/40 border-dashed w-[20px] h-[100px] pointer-events-none"})]})]}),o.jsx("div",{className:"absolute bottom-10 left-1/2 -translate-x-1/2",children:o.jsxs(Ue,{className:"px-6 py-2.5 flex items-center gap-6 rounded-2xl border-white/10 bg-surface-dark/40 backdrop-blur-2xl shadow-2xl",children:[o.jsx("button",{className:"text-slate-500 hover:text-white transition-colors",children:o.jsx("span",{className:"material-symbols-outlined text-lg",children:"remove"})}),o.jsx("span",{className:"text-[10px] font-black text-white w-12 text-center uppercase tracking-widest",children:"120%"}),o.jsx("button",{className:"text-slate-500 hover:text-white transition-colors",children:o.jsx("span",{className:"material-symbols-outlined text-lg",children:"add"})})]})})]}),o.jsxs("aside",{className:"w-96 flex-none flex flex-col p-10 gap-10 bg-surface-dark/20 backdrop-blur-xl border-l border-white/5 z-40 overflow-y-auto no-scrollbar",children:[o.jsxs("section",{className:"space-y-6",children:[o.jsxs("header",{className:"flex justify-between items-center group cursor-pointer",children:[o.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Propiedades"}),o.jsx("span",{className:"material-symbols-outlined text-slate-700 text-sm",children:"more_horiz"})]}),o.jsxs(Ue,{className:"p-8 border-white/5 bg-surface-dark/40 rounded-[2rem] space-y-8",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-xs font-bold text-slate-400",children:"Grosor de Trazo"}),o.jsxs("span",{className:"px-2 py-0.5 rounded bg-white/5 text-[10px] font-black text-white",children:[r,"px"]})]}),o.jsx("input",{type:"range",min:"1",max:"20",value:r,onChange:f=>n(f.target.value),className:"w-full accent-primary h-1 bg-white/5 rounded-full appearance-none cursor-pointer"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-600 block ml-1",children:"Color / Relleno"}),o.jsxs("div",{className:"flex items-center gap-4 bg-black/40 rounded-2xl p-4 border border-white/5",children:[o.jsx("div",{className:"size-10 rounded-full bg-primary shadow-[0_0_15px_rgba(99,102,242,0.4)] border-2 border-white/20"}),o.jsx("input",{type:"text",defaultValue:"#2F2CED",className:"bg-transparent border-none outline-none text-xs font-mono text-slate-300 w-full"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-600 block ml-1",children:"Terminacin (Cap)"}),o.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[o.jsx(k2,{icon:"square"}),o.jsx(k2,{icon:"circle",active:!0}),o.jsx(k2,{icon:"rectangle"})]})]}),o.jsxs("button",{className:"w-full py-4 rounded-2xl bg-white/5 border border-white/5 text-[10px] font-black uppercase tracking-widest text-slate-300 flex items-center justify-center gap-3 hover:bg-white/10 transition-all",children:[o.jsx("span",{className:"material-symbols-outlined text-lg",children:"gesture"}),"Suavizar Trazo"]})]})]}),o.jsxs("section",{className:"flex-1 flex flex-col gap-6",children:[o.jsxs("header",{className:"flex justify-between items-center",children:[o.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Capas"}),o.jsx("button",{className:"p-1 rounded bg-white/5 text-slate-500 hover:text-white transition-all",children:o.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"})})]}),o.jsx("div",{className:"space-y-3 overflow-y-auto no-scrollbar flex-1",children:h.map(f=>o.jsxs("div",{onClick:()=>l(f.id),className:`flex items-center gap-4 p-4 rounded-2xl transition-all cursor-pointer group ${a===f.id?"bg-primary/10 border border-primary/20":"bg-white/[0.02] border border-white/5 opacity-60 hover:opacity-100 hover:border-white/10"}`,children:[o.jsx("button",{className:"material-symbols-outlined text-sm text-slate-500 hover:text-white",children:f.visible?"visibility":"visibility_off"}),o.jsx("div",{className:"size-10 rounded-xl bg-black border border-white/10 flex items-center justify-center",children:o.jsx("span",{className:"material-symbols-outlined text-slate-600 group-hover:text-primary transition-colors text-xl",children:f.type.includes("Vector")?"timeline":"image"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"text-xs font-bold text-white truncate",children:f.name}),o.jsx("p",{className:"text-[9px] text-slate-600 font-bold uppercase tracking-widest",children:f.type})]}),o.jsx("button",{className:"material-symbols-outlined text-slate-700 text-sm",children:"lock"})]},f.id))}),o.jsxs("div",{className:"flex gap-4 p-3 rounded-2xl bg-black/20 border border-white/5",children:[o.jsx("button",{className:"flex-1 p-2 rounded-xl hover:bg-white/5 text-slate-700 hover:text-white transition-all",children:o.jsx("span",{className:"material-symbols-outlined text-xl",children:"delete"})}),o.jsx("button",{className:"flex-1 p-2 rounded-xl hover:bg-white/5 text-slate-700 hover:text-white transition-all",children:o.jsx("span",{className:"material-symbols-outlined text-xl",children:"content_copy"})}),o.jsx("button",{className:"flex-1 p-2 rounded-xl hover:bg-white/5 text-slate-700 hover:text-white transition-all",children:o.jsx("span",{className:"material-symbols-outlined text-xl",children:"folder"})})]})]}),o.jsxs("div",{className:"p-6 rounded-[2rem] bg-gradient-to-br from-primary/20 to-orange-500/20 border border-white/10 space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"material-symbols-outlined text-primary",children:"auto_fix_high"}),o.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-white",children:"Vectorizacin Inteligente"})]}),o.jsx("p",{className:"text-[10px] text-slate-500 leading-relaxed font-manrope",children:"Arrastra una imagen para convertirla automticamente en nodos editables."}),o.jsx(Xe,{variant:"primary",size:"sm",className:"w-full text-[9px] py-3 rounded-xl shadow-lg",children:"Importar y Procesar"})]})]})]})]})},k2=({icon:e,active:t})=>o.jsx("button",{className:`py-4 rounded-xl border transition-all flex items-center justify-center ${t?"bg-primary/20 border-primary shadow-lg shadow-primary/20":"bg-white/5 border-white/5 hover:border-white/10"}`,children:o.jsx("span",{className:`material-symbols-outlined text-lg ${t?"text-white":"text-slate-600"}`,children:e})}),qY=()=>{const[e,t]=P.useState("hub");return o.jsxs("div",{className:"flex-1 flex flex-col h-full bg-[#050508] overflow-hidden",children:[e==="hub"&&o.jsxs("div",{className:"flex-1 flex flex-col h-full relative",children:[o.jsx("button",{onClick:()=>t("foundry"),className:"absolute right-12 bottom-12 z-50 size-16 rounded-3xl bg-primary text-white flex items-center justify-center shadow-2xl shadow-primary/40 hover:scale-110 active:scale-95 transition-all group",title:"Glyph Foundry",children:o.jsx("span",{className:"material-symbols-outlined text-3xl group-hover:rotate-12 transition-transform duration-300",children:"font_download"})}),o.jsx(GY,{onOpenEditor:()=>t("editor")})]}),e==="foundry"&&o.jsx($Y,{onBack:()=>t("hub")}),e==="editor"&&o.jsx(BY,{onBack:()=>t("hub"),onSave:()=>t("hub")})]})},VY=()=>{const[e,t]=P.useState(null),[r,n]=P.useState([]),[i,s]=P.useState(0),[a,l]=P.useState(!1),[d,h]=P.useState({top:0,left:0}),[f,p]=P.useState([]),[g,x]=P.useState(!1),w=P.useRef(null);P.useEffect(()=>{b(),_()},[]);const b=async()=>{try{let I=(await he.get("/escritura/cuadernos"))[0];I||(I=await he.post("/escritura/cuaderno",{titulo:"Chronicle"})),t(I),k(I.id)}catch(T){console.error("Error loading notebook:",T)}},k=async T=>{try{const I=await he.get(`/escritura/cuaderno/${T}/hojas`);n(I)}catch(I){console.error("Error loading pages:",I)}},_=async()=>{try{const T=await he.get("/bd/entidadindividual"),I=await he.get("/bd/zona"),M=await he.get("/bd/entidadcolectiva");p([...T.map($=>({id:$.id,name:$.nombre,type:"Character"})),...I.map($=>({id:$.id,name:$.nombre,type:"Location"})),...M.map($=>({id:$.id,name:$.nombre,type:"Item"}))])}catch(T){console.error("Error loading entities:",T)}},S=T=>{const I=[...r];I[i].contenido=T,n(I),w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{v(I[i])},1500)},v=async T=>{x(!0);try{await he.put(`/escritura/hoja/${T.id}`,{contenido:T.contenido})}catch(I){console.error("Error saving page:",I)}finally{x(!1)}},j=T=>{if(T.key==="@"){const I=T.target.getBoundingClientRect();h({top:I.top+20,left:Math.min(I.left+50,window.innerWidth-300)}),l(!0)}else T.key==="Escape"&&l(!1)},C=T=>{const I=r[i].contenido;S(I+T+" "),l(!1)},R=()=>{i<r.length-1?s(T=>T+1):L()},L=async()=>{try{const T=await he.post(`/escritura/cuaderno/${e.id}/hoja`,{});n([...r,T]),s(r.length)}catch(T){console.error("Error creating page:",T)}},A=r[i]||{contenido:"",numeroPagina:1},O=r[i+1];return o.jsxs("div",{className:"flex-1 flex flex-col h-full bg-[#050508] relative overflow-hidden",children:[o.jsxs("header",{className:"h-14 border-b border-white/5 bg-surface-dark/40 backdrop-blur-md flex items-center justify-between px-8 py-2",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{className:"p-2 rounded-lg hover:bg-white/5 text-slate-400 hover:text-white transition-colors",children:o.jsx("span",{className:"material-symbols-outlined text-xl",children:"format_bold"})}),o.jsx("button",{className:"p-2 rounded-lg hover:bg-white/5 text-slate-400 hover:text-white transition-colors",children:o.jsx("span",{className:"material-symbols-outlined text-xl",children:"format_italic"})}),o.jsx("button",{className:"p-2 rounded-lg hover:bg-white/5 text-slate-400 hover:text-white transition-colors",children:o.jsx("span",{className:"material-symbols-outlined text-xl",children:"link"})}),o.jsx("div",{className:"w-px h-6 bg-white/10 mx-2"}),o.jsxs("button",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-white/5 text-[10px] font-black uppercase tracking-widest text-slate-300 hover:bg-white/10 transition-all",children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"auto_stories"}),"Book View"]})]}),o.jsx("div",{className:"flex items-center gap-6 text-[10px] font-black uppercase tracking-[0.2em] text-slate-600",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`size-1.5 rounded-full ${g?"bg-amber-500 animate-pulse":"bg-emerald-500"}`}),g?"SAVING...":"SYNCED"]})})]}),o.jsx("main",{className:"flex-1 overflow-y-auto no-scrollbar py-12 px-8 flex justify-center bg-[url('https://grainy-gradients.vercel.app/noise.svg')] bg-repeat",children:o.jsxs("div",{className:"w-full max-w-4xl flex items-stretch gap-1 bg-surface-dark/40 rounded-[2.5rem] border border-white/5 shadow-[0_50px_100px_-20px_rgba(0,0,0,0.5)] overflow-hidden relative group",children:[o.jsx("div",{className:"absolute left-1/2 top-0 bottom-0 w-8 -translate-x-1/2 bg-gradient-to-r from-transparent via-black/40 to-transparent z-10 pointer-events-none"}),o.jsxs("article",{className:"flex-1 bg-white/[0.02] p-16 relative border-r border-white/5 flex flex-col gap-8",children:[o.jsxs("header",{className:"flex justify-between items-center opacity-30",children:[o.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:(e==null?void 0:e.titulo)||"Untitled"}),o.jsxs("span",{className:"text-[10px] font-black uppercase tracking-widest",children:["Sheet ",A.numeroPagina]})]}),o.jsxs("div",{className:"flex-1 flex flex-col",children:[A.numeroPagina===1?o.jsx("h1",{className:"text-4xl font-manrope font-black text-white mb-12 tracking-tight",children:(e==null?void 0:e.titulo)||"The Stars We Inherit"}):null,o.jsx("textarea",{className:"flex-1 bg-transparent border-none outline-none resize-none text-slate-300 font-serif leading-loose text-lg placeholder:text-slate-700 custom-scrollbar",placeholder:"Once upon a time in the Nebula clusters...",value:A.contenido,onChange:T=>S(T.target.value),onKeyDown:j})]})]}),o.jsxs("article",{className:"flex-1 bg-white/[0.01] p-16 relative flex flex-col gap-8",children:[o.jsxs("header",{className:"flex justify-between items-center opacity-30",children:[o.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Workspace"}),o.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Viewer"})]}),o.jsx("div",{className:"flex-1 flex flex-col opacity-60",children:O?o.jsx("p",{className:"font-serif leading-loose text-lg select-none text-slate-500 whitespace-pre-wrap line-clamp-[20]",children:O.contenido||"This page is currently empty."}):o.jsx("p",{className:"font-serif leading-loose text-lg select-none pointer-events-none italic text-slate-500",children:"This is the end of the current manuscript. Navigating forward will create a new sheet."})})]}),o.jsx("div",{className:"absolute inset-y-0 left-0 w-20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx("button",{onClick:()=>s(T=>Math.max(0,T-1)),className:"size-12 rounded-full bg-black/40 border border-white/10 backdrop-blur-md text-white flex items-center justify-center hover:bg-black/60 transition-all -ml-4 shadow-xl",children:o.jsx("span",{className:"material-symbols-outlined",children:"chevron_left"})})}),o.jsx("div",{className:"absolute inset-y-0 right-0 w-20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx("button",{onClick:R,className:"size-12 rounded-full bg-black/40 border border-white/10 backdrop-blur-md text-white flex items-center justify-center hover:bg-black/60 transition-all -mr-4 shadow-xl",children:o.jsx("span",{className:"material-symbols-outlined",children:"chevron_right"})})})]})}),a&&o.jsxs(Ue,{className:"absolute z-50 w-64 p-2 rounded-2xl border-primary/30 shadow-2xl shadow-primary/20 bg-surface-dark/90 backdrop-blur-xl animate-in fade-in zoom-in-95 duration-200",style:{top:d.top,left:d.left},children:[o.jsx("header",{className:"px-3 py-2 border-b border-white/5 mb-1",children:o.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-slate-500",children:"Reference Entity"})}),o.jsx("div",{className:"space-y-1",children:f.map(T=>o.jsxs("button",{onClick:()=>C(T.name),className:"w-full flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-primary/20 text-xs transition-all text-left",children:[o.jsx("span",{className:"material-symbols-outlined text-primary text-sm",children:T.type==="Character"?"person":T.type==="Location"?"location_on":"diamond"}),o.jsx("span",{className:"flex-1 font-bold text-slate-200",children:T.name}),o.jsx("span",{className:"text-[8px] font-black text-slate-600 uppercase tracking-widest",children:T.type})]},T.id))})]}),o.jsxs("footer",{className:"h-10 border-t border-white/5 bg-background-dark/80 px-8 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-6 text-[9px] font-black uppercase tracking-widest text-slate-600",children:[o.jsxs("span",{children:["Words: ",A.contenido.split(/\s+/).filter(Boolean).length]}),o.jsxs("span",{children:["Characters: ",A.contenido.length]})]}),o.jsx("div",{className:"flex items-center gap-4",children:o.jsxs("span",{className:"text-[9px] font-black uppercase tracking-widest text-primary",children:["Sheet ",A.numeroPagina," of ",r.length]})})]})]})};function HY(){const{id:e}=Kr();Wr();const[t,r]=P.useState([]),[n,i]=P.useState(!0),[s,a]=P.useState(null);P.useEffect(()=>{l()},[e]);const l=async()=>{try{i(!0);const f=await he.get("/api/papelera/items");r(f),a(null)}catch(f){console.error("Error loading trash:",f),a("Failed to load trash items.")}finally{i(!1)}},d=async(f,p)=>{try{await he.post(`/api/papelera/restaurar/${f}/${p}`),l()}catch(g){console.error("Restoration failed",g)}},h=async(f,p)=>{if(window.confirm("Are you sure you want to PERMANENTLY delete this item? This cannot be undone."))try{await he.delete(`/api/papelera/eliminar/${f}/${p}`),l()}catch(g){console.error("Deletion failed",g)}};return n?o.jsx("div",{className:"text-white p-8",children:"Loading Trash Bin..."}):o.jsxs("div",{className:"flex flex-col h-full bg-[#09090b] text-white p-8 overflow-y-auto",children:[o.jsx("h1",{className:"text-3xl font-light mb-2 text-white/90",children:"Trash Bin"}),o.jsx("p",{className:"text-white/50 mb-8 font-light text-sm",children:"Items are automatically deleted after 30 days."}),s&&o.jsx("div",{className:"bg-red-500/10 border border-red-500/20 text-red-400 p-4 rounded mb-6",children:s}),t.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center py-20 opacity-50 border border-dashed border-white/10 rounded-xl",children:[o.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"delete_outline"}),o.jsx("p",{children:"Trash is empty"})]}):o.jsx("div",{className:"bg-zinc-900/50 rounded-xl border border-white/5 overflow-hidden",children:o.jsxs("table",{className:"w-full text-left border-collapse",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-white/5 text-xs text-white/40 uppercase tracking-wider",children:[o.jsx("th",{className:"p-4 font-normal",children:"Name"}),o.jsx("th",{className:"p-4 font-normal",children:"Type"}),o.jsx("th",{className:"p-4 font-normal",children:"Deleted Date"}),o.jsx("th",{className:"p-4 font-normal text-right",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-white/5",children:t.map(f=>o.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[o.jsx("td",{className:"p-4 text-white/80 font-medium",children:f.nombre||"Untitled"}),o.jsx("td",{className:"p-4 text-white/50 text-sm",children:f.tipo}),o.jsx("td",{className:"p-4 text-white/50 text-sm font-mono",children:f.deleted_date?new Date(f.deleted_date).toLocaleDateString():"-"}),o.jsxs("td",{className:"p-4 text-right space-x-2",children:[o.jsx("button",{onClick:()=>d(f.tipo,f.id),className:"px-3 py-1.5 text-xs bg-emerald-500/10 text-emerald-400 hover:bg-emerald-500/20 rounded-md transition-colors border border-emerald-500/20",children:"RESTORE"}),o.jsx("button",{onClick:()=>h(f.tipo,f.id),className:"px-3 py-1.5 text-xs bg-red-500/10 text-red-400 hover:bg-red-500/20 rounded-md transition-colors border border-red-500/20",children:"DELETE"})]})]},`${f.tipo}-${f.id}`))})]})})]})}const WY=({attribute:e,value:t,onChange:r,onRemove:n,linkableEntities:i=[]})=>{const s=e.plantilla||e,a=()=>{switch(s.tipo){case"text":return o.jsx("textarea",{className:"w-full bg-transparent text-white text-sm font-medium focus:outline-none resize-none no-scrollbar h-auto min-h-[100px]",value:t||"",onChange:g=>r(g.target.value),placeholder:"..."});case"short_text":return o.jsx("input",{type:"text",className:"w-full bg-transparent text-white text-sm font-medium focus:outline-none",value:t||"",onChange:g=>r(g.target.value),placeholder:"..."});case"number":return o.jsx("input",{type:"number",className:"w-full bg-transparent text-white text-sm font-medium focus:outline-none",value:t||"",onChange:g=>r(g.target.value)});case"boolean":return o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:()=>r(t==="true"?"false":"true"),className:`size-6 rounded-lg border flex items-center justify-center transition-all ${t==="true"?"bg-primary border-primary text-white":"border-glass-border text-transparent hover:border-primary/50"}`,children:o.jsx("span",{className:"material-symbols-outlined text-sm",children:"check"})}),o.jsx("span",{className:"text-xs text-text-muted",children:t==="true"?"Enabled":"Disabled"})]});case"select":let l=[];try{l=(typeof s.metadata=="string"?JSON.parse(s.metadata||"{}"):s.metadata||{}).options||[]}catch{}return o.jsxs("div",{className:"relative",children:[o.jsxs("select",{className:"w-full bg-black/30 border border-white/5 rounded-xl px-4 py-2.5 text-sm text-white focus:outline-none focus:border-primary/50 appearance-none cursor-pointer",value:t||"",onChange:g=>r(g.target.value),children:[o.jsx("option",{value:"",children:"Select an option..."}),l.map((g,x)=>o.jsx("option",{value:g,className:"bg-surface-dark text-white p-2",children:g},x))]}),o.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-white/50",children:o.jsx("span",{className:"material-symbols-outlined text-sm",children:"unfold_more"})})]});case"multi_select":let d=[];try{d=(typeof s.metadata=="string"?JSON.parse(s.metadata||"{}"):s.metadata||{}).options||[]}catch{}let h=[];try{h=t?JSON.parse(t):[],Array.isArray(h)||(h=[])}catch(g){console.error("Error parsing select values",g)}const f=g=>{const x=h.includes(g)?h.filter(w=>w!==g):[...h,g];r(JSON.stringify(x))};return o.jsxs("div",{className:"bg-black/20 border border-white/5 rounded-xl p-2 space-y-1 max-h-40 overflow-y-auto custom-scrollbar",children:[d.map((g,x)=>o.jsxs("label",{onClick:w=>{w.preventDefault(),f(g)},className:"flex items-center gap-3 p-2 hover:bg-white/5 rounded-lg cursor-pointer group transition-colors",children:[o.jsx("div",{className:`size-4 rounded border flex items-center justify-center transition-all ${h.includes(g)?"bg-primary border-primary":"border-white/10 group-hover:border-white/30"}`,children:h.includes(g)&&o.jsx("span",{className:"material-symbols-outlined text-[10px] text-white",children:"check"})}),o.jsx("span",{className:`text-xs font-medium ${h.includes(g)?"text-white":"text-slate-400 group-hover:text-slate-200"}`,children:g})]},x)),d.length===0&&o.jsx("div",{className:"text-xs text-slate-500 p-2 italic",children:"No options defined."})]});case"date":return o.jsx("input",{type:"date",className:"w-full bg-transparent text-white text-sm font-medium focus:outline-none [color-scheme:dark]",value:t||"",onChange:g=>r(g.target.value)});case"entity_link":return o.jsxs("div",{className:"relative",children:[o.jsxs("select",{className:"w-full bg-black/30 border border-white/5 rounded-xl px-4 py-2.5 text-sm text-white focus:outline-none focus:border-primary/50 appearance-none cursor-pointer",value:t||"",onChange:g=>r(g.target.value),children:[o.jsx("option",{value:"",children:"Select an Entity Link..."}),i.map(g=>o.jsx("option",{value:g.id,className:"bg-surface-dark text-white p-2",children:g.nombre},g.id))]}),o.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-white/50",children:o.jsx("span",{className:"material-symbols-outlined text-sm",children:"link"})})]});case"image":return o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"flex gap-2",children:o.jsx("input",{type:"text",className:"flex-1 bg-black/30 border border-white/5 rounded-xl px-4 py-2 text-xs text-text-muted focus:text-white focus:outline-none",placeholder:"Image URL...",value:t||"",onChange:g=>r(g.target.value)})}),t&&o.jsx("div",{className:"w-full aspect-video rounded-xl bg-black/40 border border-white/5 overflow-hidden relative group",children:o.jsx("img",{src:t,alt:"Preview",className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity"})}),!t&&o.jsx("div",{className:"w-full h-20 rounded-xl bg-white/5 border border-dashed border-white/10 flex items-center justify-center text-text-muted/30",children:o.jsx("span",{className:"material-symbols-outlined",children:"image"})})]});case"table":const p=t||"[]";return o.jsxs("div",{className:"space-y-2",children:[o.jsx("textarea",{className:"w-full h-32 bg-black/30 border border-white/5 rounded-xl p-3 text-xs font-mono text-white/70 focus:outline-none focus:border-primary/50",value:p,onChange:g=>r(g.target.value),placeholder:'[{"Item": "Sword", "Qty": 1}, ...]'}),o.jsxs("div",{className:"text-[10px] text-text-muted flex justify-between",children:[o.jsx("span",{children:"JSON Format supported"}),o.jsx("span",{className:"material-symbols-outlined text-xs",children:"data_array"})]})]});default:return o.jsxs("div",{className:"text-sm font-medium text-white/70 italic p-2 rounded-lg bg-white/5 border border-white/5",children:[o.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-500 mr-2",children:s.tipo}),t]})}};return o.jsxs("div",{className:"p-4 border border-white/5 rounded-2xl bg-surface-dark/50 backdrop-blur-sm relative overflow-hidden h-full flex flex-col group hover:border-primary/20 transition-all",children:[o.jsxs("label",{className:"text-[10px] font-black uppercase tracking-widest text-text-muted mb-3 flex items-center justify-between gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"material-symbols-outlined text-xs opacity-50",children:"label"}),s.nombre]}),n&&o.jsx("button",{onClick:l=>{l.preventDefault(),n()},className:"text-white/20 hover:text-red-400 transition-colors",title:"Remove Attribute",children:o.jsx("span",{className:"material-symbols-outlined text-sm",children:"close"})})]}),o.jsx("div",{className:"flex-1 nodrag",children:a()}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"})]})},KY=[{value:"entidadIndividual",label:"Character"},{value:"entidadColectiva",label:"Group"},{value:"zona",label:"Location"},{value:"construccion",label:"Building"},{value:"efectos",label:"Effect"},{value:"interaccion",label:"Interaction"},{value:"lineatiempo",label:"Timeline"},{value:"eventotiempo",label:"Event"},{value:"mapa",label:"Map"}],YY=({entityId:e,entityType:t})=>{const[r,n]=P.useState([]),[i,s]=P.useState(!1),[a,l]=P.useState(!1),[d,h]=P.useState("entidadIndividual"),[f,p]=P.useState([]),[g,x]=P.useState(""),[w,b]=P.useState(""),[k,_]=P.useState(""),[S,v]=P.useState(!1);P.useEffect(()=>{e&&j()},[e,t]),P.useEffect(()=>{a&&d&&C(d)},[a,d]);const j=async()=>{s(!0);try{const T=(await he.get("/bd/relacion")).filter(M=>M.nodoOrigenId===parseInt(e)&&M.tipoOrigen===t||M.nodoDestinoId===parseInt(e)&&M.tipoDestino===t),I=await Promise.all(T.map(async M=>{const $=M.nodoOrigenId===parseInt(e),F=$?M.nodoDestinoId:M.nodoOrigenId,G=$?M.tipoDestino:M.tipoOrigen;try{const B=await he.get(`/bd/${G}/${F}`);return{...M,otherName:B.nombre,otherType:G,isOutgoing:$}}catch{return{...M,otherName:"Unknown/Deleted",otherType:G,isOutgoing:$}}}));n(I)}catch(O){console.error("Failed to load relationships",O)}finally{s(!1)}},C=async O=>{v(!0);try{const T=await he.get(`/bd/${O}`);p(T||[])}catch(T){console.error("Failed to fetch targets",T),p([])}finally{v(!1)}},R=async()=>{if(!(!g||!w))try{const O={nodoOrigenId:parseInt(e),tipoOrigen:t,nodoDestinoId:parseInt(g),tipoDestino:d,tipoRelacion:w,descripcion:k,tipoEntidad:"relacion"};await he.put("/bd/insertar",O),l(!1),A(),j()}catch(O){console.error("Failed to save relationship",O),alert("Error saving relationship")}},L=async O=>{if(confirm("Are you sure?"))try{await he.delete(`/bd/relacion/${O}`),j()}catch(T){console.error("Failed to delete",T)}},A=()=>{h("entidadIndividual"),x(""),b(""),_("")};return o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("header",{className:"flex justify-between items-center",children:[o.jsx("h3",{className:"text-lg font-bold text-white uppercase tracking-widest",children:"Relationships"}),o.jsx(Xe,{variant:"secondary",icon:"add_link",onClick:()=>l(!a),children:a?"Cancel":"Connect"})]}),a&&o.jsxs("div",{className:"p-4 rounded-2xl bg-white/5 border border-white/10 space-y-4 animate-in fade-in slide-in-from-top-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-500",children:"Target Type"}),o.jsx("select",{className:"w-full bg-black/40 border border-white/10 rounded-xl p-2 text-sm text-white outline-none focus:border-primary",value:d,onChange:O=>h(O.target.value),children:KY.map(O=>o.jsx("option",{value:O.value,children:O.label},O.value))})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-500",children:"Target Entity"}),o.jsxs("select",{className:"w-full bg-black/40 border border-white/10 rounded-xl p-2 text-sm text-white outline-none focus:border-primary",value:g,onChange:O=>x(O.target.value),disabled:S,children:[o.jsx("option",{value:"",children:"Select Target..."}),f.map(O=>o.jsx("option",{value:O.id,children:O.nombre},O.id))]})]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-500",children:"Relationship Type"}),o.jsx("input",{type:"text",placeholder:"e.g. Father of, Located in, Enemy of...",className:"w-full bg-black/40 border border-white/10 rounded-xl p-2 text-sm text-white outline-none focus:border-primary",value:w,onChange:O=>b(O.target.value)})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-500",children:"Description (The Why)"}),o.jsx("textarea",{placeholder:"Explain the nature of this connection...",className:"w-full bg-black/40 border border-white/10 rounded-xl p-2 text-sm text-white outline-none focus:border-primary h-20 resize-none",value:k,onChange:O=>_(O.target.value)})]}),o.jsx("div",{className:"flex justify-end pt-2",children:o.jsx(Xe,{variant:"primary",icon:"save",onClick:R,disabled:!g||!w,children:"Save Connection"})})]}),o.jsx("div",{className:"space-y-3",children:i?o.jsx("div",{className:"text-center text-slate-500 py-8",children:"Scanning connections..."}):r.length===0?o.jsx("div",{className:"text-center text-slate-500 py-8 italic border border-dashed border-white/10 rounded-2xl",children:"No connections established"}):r.map((O,T)=>o.jsxs("div",{className:"group relative p-4 rounded-2xl bg-surface-dark border border-white/5 hover:border-primary/50 transition-all flex items-start gap-4",children:[o.jsx("div",{className:"mt-1",children:o.jsx("span",{className:"material-symbols-outlined text-slate-500",children:O.isOutgoing?"arrow_outward":"arrow_inward"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:O.isOutgoing?"To:":"From:"}),o.jsx("span",{className:"text-sm font-bold text-white",children:O.otherName}),o.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded bg-white/10 text-slate-400 font-bold uppercase tracking-wider",children:O.otherType})]}),o.jsx("div",{className:"text-primary text-xs font-black uppercase tracking-widest mb-2",children:O.tipoRelacion}),O.descripcion&&o.jsxs("p",{className:"text-xs text-slate-400 leading-relaxed bg-black/20 p-2 rounded-lg border border-white/5",children:['"',O.descripcion,'"']})]}),o.jsx("button",{onClick:()=>L(O.id),className:"opacity-0 group-hover:opacity-100 p-2 text-slate-600 hover:text-red-400 transition-all",children:o.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]},O.id||T))})]})},fc=({mode:e})=>{const{username:t,projectName:r,entitySlug:n,folderSlug:i,type:s}=Kr(),a=Wr(),l=e==="creation",{setRightOpen:d,setAvailableTemplates:h,setRightPanelMode:f,setAddAttributeHandler:p,setEntityTabs:g,activeEntityTab:x,setActiveEntityTab:w}=La(),[b,k]=P.useState({nombre:"",tipo:"entidadindividual",descripcion:"",color:"#6366f1",apariencia:"",notas:"",iconUrl:null,tipoEspecial:s||null,carpeta:null,categoria:"Individual"}),[_,S]=P.useState([]),[v,j]=P.useState(!0),[C,R]=P.useState(!1),[L,A]=P.useState([]),[O,T]=P.useState([]),[I,M]=P.useState(!1);P.useEffect(()=>(d(!0),f("ENTITY"),g(["identity","narrative","attributes"]),w("identity"),()=>{f("NOTES"),g([])}),[]),P.useEffect(()=>{l?F():G()},[n,i,l]);const $=D=>{h(D),T(D),p(q=>{const J=D.find(ee=>ee.id===q);J&&S(ee=>[...ee,{id:`temp-${J.id}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,attribute:J,value:J.valorDefecto||"",isTemp:!0}])})},F=async()=>{j(!0);try{const D=await he.get(`/world-bible/folders/${i}`),q=await he.get(`/world-bible/folders/${i}/templates`);$(q),k(ee=>({...ee,nombre:`Nuevo ${s==="map"?"Mapa":s==="timeline"?"Cronograma":"Ente"}`,carpeta:D,tipoEspecial:s||"entidadindividual",tipo:s||"entidadindividual"}));const J=q.filter(ee=>ee.esObligatorio).map(ee=>({id:`temp-${ee.id}-${Math.random().toString(36).substr(2,9)}`,attribute:ee,value:ee.valorDefecto||"",isTemp:!0}));S(J)}catch(D){console.error("Error creating draft:",D)}finally{j(!1)}},G=async()=>{var D;j(!0);try{const q=await he.get(`/world-bible/entities/${n}`);if(k({...q,apariencia:q.apariencia||"",notas:q.notas||"",iconUrl:q.iconUrl||null,tags:q.tags||"",tipo:q.tipoEspecial||getHierarchyType(q.tipo).id,color:q.color||"#6366f1",categoria:q.categoria||"Individual"}),(D=q.carpeta)!=null&&D.id){const ee=await he.get(`/world-bible/folders/${q.carpeta.id}/templates`);$(ee)}const J=(q.valores||[]).filter(ee=>ee.plantilla).map(ee=>({id:ee.id.toString(),attribute:ee.plantilla,value:ee.valor,isTemp:!1}));S(J)}catch(q){console.error("Error loading entity:",q)}finally{j(!1)}},B=(D,q)=>{k(J=>({...J,[D]:q}))},Y=D=>{const q=D.target.files[0];if(q){const J=new FileReader;J.onloadend=()=>{B("iconUrl",J.result)},J.readAsDataURL(q)}},K=(D,q)=>{S(J=>J.map(ee=>ee.id===D?{...ee,value:q}:ee))},H=D=>{D.toString().startsWith("temp-")||A(q=>[...q,D]),S(q=>q.filter(J=>J.id!==D))},W=async(D=!0)=>{R(!0);try{const q={nombre:b.nombre,descripcion:b.descripcion,tags:b.tags,apariencia:b.apariencia,notas:b.notas,iconUrl:b.iconUrl,tipoEspecial:b.tipoEspecial||"entidadindividual",color:b.color,categoria:b.categoria};let J=b.id;if(l){if(!b.carpeta||!b.carpeta.id){alert("Error: No folder selected or folder not found."),R(!1);return}q.carpetaId=b.carpeta.id;const V=await he.post("/world-bible/entities",q);J=V.id;const te=[..._];for(let oe=0;oe<te.length;oe++){const U=te[oe];if(U.isTemp){const X=await he.post(`/world-bible/entities/${V.id}/attributes`,{plantillaId:U.attribute.id});await he.patch(`/world-bible/entities/${V.id}/values`,[{valorId:X.id,nuevoValor:U.value}]),te[oe]={...U,id:X.id.toString(),isTemp:!1}}}S(te),R(!1),D?a(`/${t}/${r}/bible/folder/${i}`):a(`/${t}/${r}/bible/folder/${i}/entity/${V.slug||V.id}`,{replace:!0});return}await he.put(`/world-bible/entities/${J}`,{nombre:q.nombre,color:q.color,iconUrl:q.iconUrl}),await he.patch(`/world-bible/entities/${J}/details`,{descripcion:q.descripcion,tags:q.tags,apariencia:q.apariencia,notas:q.notas,iconUrl:q.iconUrl}),L.length>0&&(await Promise.all(L.map(V=>he.delete(`/world-bible/values/${V}`))),A([]));const ee=_.filter(V=>!V.isTemp).map(V=>({valorId:parseInt(V.id),nuevoValor:V.value}));ee.length>0&&await he.patch(`/world-bible/entities/${J}/values`,ee);let ue=!1;const pe=[..._];console.log("Saving fields...",_);for(let V=0;V<pe.length;V++){const te=pe[V];if(te.isTemp){console.log("Processing temp field:",te);try{const oe=await he.post(`/world-bible/entities/${J}/attributes`,{plantillaId:te.attribute.id});console.log("Created attribute value:",oe),await he.patch(`/world-bible/entities/${J}/values`,[{valorId:oe.id,nuevoValor:te.value}]),pe[V]={...te,id:oe.id.toString(),isTemp:!1},ue=!0}catch(oe){console.error("Error saving field:",te,oe)}}}ue&&S(pe),R(!1)}catch(q){console.error("Save error",q),R(!1)}};return v?o.jsx("div",{className:"p-20 text-center animate-pulse",children:"Loading Builder..."}):o.jsx("div",{className:"flex h-full w-full bg-background-dark overflow-hidden",children:o.jsxs("div",{className:"flex-1 flex flex-col min-w-0 overflow-y-auto custom-scrollbar relative",children:[o.jsxs("div",{className:"border-b border-white/5 p-4 flex justify-between items-center bg-background-dark/80 backdrop-blur sticky top-0 z-30",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(ou,{url:b.iconUrl,name:b.nombre,className:"size-10 rounded-lg border border-white/10"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg font-bold text-white leading-tight",children:b.nombre||"Sin Nombre"}),o.jsx("span",{className:"text-[10px] uppercase font-black tracking-widest text-slate-500",children:l?"Creando Nueva Entidad":"Editando Entidad"})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:()=>a(`/${t}/${r}/bible/folder/${i}`),className:"px-4 py-2 rounded-xl text-slate-400 hover:text-white hover:bg-white/5 text-xs font-bold uppercase tracking-widest transition-all",children:"Cancelar"}),o.jsxs("div",{className:"flex bg-white/5 rounded-xl p-1 gap-1 border border-white/10",children:[o.jsxs("button",{onClick:()=>W(!0),disabled:C,className:"h-9 px-4 rounded-lg bg-primary hover:bg-primary-light text-white text-[10px] font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[C?o.jsx("span",{className:"material-symbols-outlined animate-spin text-sm",children:"refresh"}):o.jsx("span",{className:"material-symbols-outlined text-sm",children:"save"}),"Guardar"]}),o.jsx("div",{className:"w-px bg-white/10 my-1"}),o.jsx("button",{onClick:()=>W(!1),disabled:C,className:"h-9 px-3 rounded-lg bg-transparent hover:bg-white/10 text-white transition-all flex items-center justify-center disabled:opacity-50",title:"Guardar y Seguir Editando",children:o.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit_document"})})]})]})]}),o.jsxs("div",{className:"p-8 pb-32 max-w-5xl mx-auto w-full",children:[x==="identity"&&o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[o.jsxs(Ue,{className:`p-6 space-y-6 ${b.tipoEspecial==="map"?"lg:col-span-2":""}`,children:[o.jsxs("h3",{className:"text-xs font-black uppercase tracking-widest text-primary flex items-center gap-2 mb-6",children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"badge"})," Identity"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500 mb-1 block",children:"Full Name"}),o.jsx("input",{value:b.nombre,onChange:D=>B("nombre",D.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl p-3 text-sm text-white focus:border-primary/50 outline-none transition-colors",placeholder:"E.g. King Alaric"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500 mb-1 block",children:"Entity Type / Category"}),o.jsxs("select",{value:b.categoria||"Individual",onChange:D=>B("categoria",D.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl p-3 text-sm text-white focus:border-primary/50 outline-none transition-colors appearance-none",children:[o.jsx("option",{value:"Individual",children:"Individual (Character/Person)"}),o.jsx("option",{value:"Group",children:"Group / Faction"}),o.jsx("option",{value:"Location",children:"Location"}),o.jsx("option",{value:"Event",children:"Event"}),o.jsx("option",{value:"Object",children:"Object / Item"}),o.jsx("option",{value:"Concept",children:"Concept / Magic"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500 mb-1 block",children:"Tags (comma separated)"}),o.jsx("input",{value:b.tags,onChange:D=>B("tags",D.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl p-3 text-sm text-slate-300 focus:border-primary/50 outline-none transition-colors",placeholder:"Warrior, Leader, Human..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500 mb-1 block",children:"Icon / Portrait"}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(ou,{url:b.iconUrl,name:b.nombre,size:"lg",className:"rounded-xl"}),o.jsxs("label",{className:"cursor-pointer px-4 py-2 bg-white/5 hover:bg-white/10 rounded-lg border border-white/10 text-xs font-bold text-slate-300 transition-colors",children:["Upload Image",o.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Y})]}),b.iconUrl&&o.jsx("button",{onClick:()=>B("iconUrl",""),className:"p-2 hover:text-red-400 transition-colors",children:o.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]})]})]})]}),b.tipoEspecial!=="map"&&o.jsxs(Ue,{className:"p-6 space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h3",{className:"text-xs font-black uppercase tracking-widest text-primary flex items-center gap-2",children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"palette"})," Appearance"]}),o.jsx("div",{className:"flex gap-2",children:o.jsxs("label",{className:"cursor-pointer text-[10px] font-bold uppercase tracking-wider text-slate-500 hover:text-white transition-colors flex items-center gap-1",children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"add_photo_alternate"}),"Insert Image",o.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:D=>{const q=D.target.files[0];if(q){const J=new FileReader;J.onloadend=()=>{const ee=`

![${q.name}](${J.result})
`;B("apariencia",(b.apariencia||"")+ee)},J.readAsDataURL(q)}}})]})})]}),o.jsx("textarea",{value:b.apariencia,onChange:D=>B("apariencia",D.target.value),className:"w-full h-80 bg-black/30 border border-white/10 rounded-xl p-4 text-sm text-slate-300 leading-relaxed focus:border-primary/50 outline-none transition-colors custom-scrollbar font-mono",placeholder:"Describe their physical appearance, clothing, distinct marks... (Markdown Supported)"})]}),b.tipoEspecial==="map"?o.jsxs(Ue,{className:"p-6 lg:col-span-2 space-y-6",children:[o.jsxs("h3",{className:"text-xs font-black uppercase tracking-widest text-primary flex items-center gap-2 mb-6",children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"map"})," Cartography"]}),o.jsx("div",{onClick:()=>{let D=b.iconUrl;try{const q=JSON.parse(b.descripcion||"{}");q.snapshotUrl&&(D=q.snapshotUrl)}catch{}M(!0)},className:"w-full aspect-[21/9] bg-black/30 border border-white/10 rounded-xl overflow-hidden cursor-pointer group relative",children:(()=>{let D=b.iconUrl;try{const q=JSON.parse(b.descripcion||"{}");q.snapshotUrl&&(D=q.snapshotUrl)}catch{}return D?o.jsxs(o.Fragment,{children:[o.jsx("img",{src:D,alt:"Map Preview",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}),o.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:o.jsx("span",{className:"material-symbols-outlined text-white text-3xl",children:"zoom_in"})})]}):o.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-500 text-xs italic",children:"No map preview available"})})()}),o.jsx("div",{className:"flex justify-end",children:o.jsx(Xe,{variant:"secondary",size:"sm",icon:"edit",onClick:()=>window.open(`/${t}/${r}/map-editor/edit/${b.id}`,"_self"),children:"Open Editor"})})]}):o.jsxs(Ue,{className:"p-6 lg:col-span-2",children:[o.jsxs("h3",{className:"text-xs font-black uppercase tracking-widest text-primary flex items-center gap-2 mb-6",children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"sticky_note_2"})," Quick Notes"]}),o.jsx("textarea",{className:"w-full h-40 bg-black/30 border border-white/10 rounded-xl p-4 text-sm text-slate-300 leading-relaxed resize-none focus:border-primary/50 outline-none transition-colors custom-scrollbar font-mono placeholder:text-slate-600",placeholder:"Quick notes about this entity...",value:b.notas||"",onChange:D=>B("notas",D.target.value)})]})]}),x==="narrative"&&o.jsxs("div",{className:"animate-in fade-in duration-500 space-y-8",children:[o.jsxs(Ue,{className:"min-h-[40vh] flex flex-col p-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("h3",{className:"text-xs font-black uppercase tracking-widest text-primary flex items-center gap-2",children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"history_edu"})," Biography"]}),o.jsx("span",{className:"text-[10px] text-slate-500 bg-white/5 px-2 py-1 rounded",children:"Markdown Supported"})]}),o.jsx("textarea",{className:"flex-1 w-full bg-transparent border-none outline-none text-slate-300 leading-relaxed resize-none focus:ring-0 placeholder:text-slate-600 custom-scrollbar text-base min-h-[300px]",placeholder:"Write the origin story...",value:b.descripcion||"",onChange:D=>B("descripcion",D.target.value)})]}),o.jsxs(Ue,{className:"min-h-[40vh]",children:[o.jsxs("h3",{className:"text-xs font-black uppercase tracking-widest text-primary p-6 pb-0 flex items-center gap-2",children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"hub"})," Relationships"]}),l?o.jsxs("div",{className:"p-12 text-center text-slate-500",children:[o.jsx("span",{className:"material-symbols-outlined text-4xl mb-4",children:"save_as"}),o.jsx("p",{className:"text-sm font-bold",children:"Please save the entity first to manage relationships."})]}):o.jsx(YY,{entityId:b.id,entityType:b.tipo||"entidadindividual"})]})]}),x==="attributes"&&o.jsxs("div",{className:`animate-in fade-in duration-500 space-y-6 min-h-[50vh] transition-colors rounded-2xl p-4 ${window.isDraggingOver?"bg-primary/10 border-2 border-dashed border-primary":""}`,onDragOver:D=>{D.preventDefault(),D.dataTransfer.dropEffect="copy",D.currentTarget.classList.add("bg-primary/10","border-primary","border-dashed","border-2")},onDragLeave:D=>{D.preventDefault(),D.currentTarget.classList.remove("bg-primary/10","border-primary","border-dashed","border-2")},onDrop:D=>{if(D.preventDefault(),D.currentTarget.classList.remove("bg-primary/10","border-primary","border-dashed","border-2"),D.dataTransfer.getData("application/reactflow/type")!=="attribute")return;let J=null;try{const ee=D.dataTransfer.getData("templateData");if(ee)J=JSON.parse(ee);else{const ue=parseInt(D.dataTransfer.getData("templateId"));J=O.find(pe=>pe.id===ue)}}catch(ee){console.error("Drop error",ee)}J&&S(ee=>[...ee,{id:`temp-${J.id}-${Date.now()}`,attribute:J,value:J.valorDefecto||"",isTemp:!0}])},children:[o.jsxs("h3",{className:"text-xs font-black uppercase tracking-widest text-primary border-b border-white/5 pb-4 flex items-center justify-between",children:[o.jsx("span",{children:"Atributos especiales"}),o.jsx("span",{className:"text-[10px] text-slate-500 font-normal normal-case opacity-50 hidden md:block",children:"Arraste atributos desde el panel derecho"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border-2 border-dashed border-white/5 rounded-2xl hover:border-primary/20 transition-colors bg-white/[0.01]",children:[_.length===0&&o.jsxs("div",{className:"col-span-full py-12 text-center text-slate-500 text-sm pointer-events-none",children:[o.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 opacity-50",children:"drag_indicator"}),o.jsx("p",{children:"Arrastra plantillas aqu para aadir atributos"})]}),_.filter(D=>D.attribute).map(D=>o.jsx(WY,{attribute:D.attribute,value:D.value,onChange:q=>K(D.id,q),onRemove:()=>H(D.id)},D.id))]})]})]}),I&&b.iconUrl&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>M(!1),children:o.jsxs("div",{className:"relative max-w-[90vw] max-h-[90vh] p-2",children:[o.jsx("button",{onClick:()=>M(!1),className:"absolute -top-12 right-0 p-2 text-white hover:text-primary transition-colors",children:o.jsx("span",{className:"material-symbols-outlined text-3xl",children:"close"})}),o.jsx("img",{src:b.iconUrl,alt:b.nombre,className:"max-w-full max-h-[85vh] object-contain rounded-lg shadow-2xl border border-white/10",onClick:D=>D.stopPropagation()})]})})]})})},XY=e=>{switch(e==null?void 0:e.toLowerCase()){case"text":return"notes";case"short_text":return"short_text";case"number":return"pin";case"date":return"calendar_today";case"select":return"list";case"boolean":return"check_box";case"map":return"map";case"timeline":return"timeline";case"character":case"entidadindividual":return"person";case"location":case"zona":case"construccion":return"location_on";case"culture":case"entidadcolectiva":return"groups";case"universe":case"galaxy":case"system":case"planet":return"public";case"entity_link":return"link";default:return"description"}},rw=({item:e,type:t,linkTo:r,onContextMenu:n,onDelete:i})=>{const s=t==="folder";return o.jsxs(Os,{to:r,onContextMenu:n,className:"group relative flex flex-col p-4 rounded-3xl bg-surface-dark border border-glass-border hover:border-primary/50 hover:bg-white/5 transition-all duration-300 backdrop-blur-sm overflow-hidden",children:[e.iconUrl&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"absolute inset-0 z-0",children:o.jsx("img",{src:e.iconUrl,alt:"",className:"w-full h-full object-cover opacity-60 group-hover:scale-105 transition-transform duration-700"})}),o.jsx("div",{className:"absolute inset-0 z-0 bg-gradient-to-t from-[#0a0a0c] via-[#0a0a0c]/80 to-transparent"})]}),o.jsxs("div",{className:"relative z-10 flex items-start justify-between mb-4",children:[o.jsx("div",{className:`
                    size-12 rounded-2xl flex items-center justify-center text-xl transition-transform group-hover:scale-110 
                    ${s?"bg-primary/20 text-primary":"bg-white/5 text-text-muted group-hover:text-white backdrop-blur-md border border-white/5"}
                `,children:o.jsx("span",{className:"material-symbols-outlined",children:s?"folder":XY(e.tipoEspecial)})}),s&&o.jsx("div",{className:"px-2 py-1 rounded-lg bg-surface-light/50 border border-glass-border text-[10px] font-black text-white shadow-sm backdrop-blur-md",children:e.itemCount||0})]}),o.jsxs("div",{className:"relative z-10 mt-auto",children:[o.jsx("h3",{className:"text-sm font-bold text-white truncate group-hover:text-primary transition-colors drop-shadow-md",children:e.nombre}),o.jsx("p",{className:"text-[10px] font-bold uppercase tracking-widest text-text-muted mt-1 opacity-70 group-hover:opacity-100 transition-opacity",children:s?"Folder":e.tipoEspecial||"Entity"})]}),o.jsxs("div",{className:"absolute top-4 right-4 z-20 flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[i&&o.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),i(e)},className:"p-1.5 rounded-lg bg-red-500/10 hover:bg-red-500 text-red-500 hover:text-white transition-all border border-red-500/20 shadow-lg shadow-red-500/5 group/del backdrop-blur-md",children:o.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})}),o.jsx("span",{className:"material-symbols-outlined text-primary text-sm transform group-hover:translate-x-1 transition-transform drop-shadow-md",children:"arrow_forward"})]})]})},QY=({path:e,currentFolder:t})=>{const{username:r,projectName:n}=Kr(),i=`/${r}/${n}/bible`;return!e&&!t?null:o.jsxs("nav",{className:"flex items-center gap-2 text-[10px] uppercase font-bold tracking-wider text-slate-500 mb-4 overflow-x-auto no-scrollbar whitespace-nowrap",children:[o.jsxs(Os,{to:i,className:"hover:text-primary transition-colors flex items-center gap-1",children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"home"}),"Bible"]}),e&&e.map((s,a)=>o.jsxs(re.Fragment,{children:[o.jsx("span",{className:"text-slate-700",children:"/"}),o.jsx(Os,{to:`${i}/folder/${s.slug||s.id}`,className:"hover:text-primary transition-colors",children:s.nombre})]},s.id)),t&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-slate-700",children:"/"}),o.jsx("span",{className:"text-white bg-white/5 px-2 py-0.5 rounded",children:t.nombre})]})]})},_a={UNIVERSE:{id:"UNIVERSE",label:"Universo / Multiverso",description:"Contenedor supremo de realidades.",icon:"public",color:"text-purple-400",bgColor:"bg-purple-900/20"},GALAXY:{id:"GALAXY",label:"Galaxia",description:"Agrupacin masiva de sistemas estelares.",icon:"auto_awesome",color:"text-indigo-400",bgColor:"bg-indigo-900/20"},SYSTEM:{id:"SYSTEM",label:"Sistema Solar",description:"Estrella central y sus cuerpos orbitales.",icon:"wb_sunny",color:"text-yellow-400",bgColor:"bg-yellow-900/20"},PLANET:{id:"PLANET",label:"Planeta / Mundo",description:"Cuerpo celeste o plano de existencia principal.",icon:"public",color:"text-emerald-400",bgColor:"bg-emerald-900/20"},GEOGRAPHY:{id:"GEOGRAPHY",label:"Geografa",icon:"map",color:"text-green-300"},ENTITIES:{id:"ENTITIES",label:"Entidades",icon:"groups",color:"text-blue-300"},MAGIC:{id:"MAGIC",label:"Magia",icon:"auto_fix_high",color:"text-pink-300"},TIMELINE:{id:"TIMELINE",label:"Cronologa",icon:"history",color:"text-orange-300"},FACTIONS:{id:"FACTIONS",label:"Facciones",icon:"security",color:"text-red-300"},ITEMS:{id:"ITEMS",label:"Objetos",icon:"inventory_2",color:"text-gray-300"},FOLDER:{id:"FOLDER",label:"Carpeta",icon:"folder",color:"text-gray-400"}},nw=e=>_a[e]||_a.FOLDER,ZY=()=>{const{username:e,projectName:t,folderSlug:r}=Kr(),n=Wr(),{handleCreateEntity:i,handleDeleteEntity:s,handleCreateSimpleFolder:a,folderSearchTerm:l,folderFilterType:d}=La(),[h,f]=P.useState([]),[p,g]=P.useState(null),[x,w]=P.useState([]),[b,k]=P.useState(!0),_=h.filter(C=>{const R=C.nombre.toLowerCase().includes(l.toLowerCase()),L=d==="ALL"||d==="MAP"&&C.tipoEspecial==="map"||d==="TIMELINE"&&C.tipoEspecial==="timeline"||d==="ENTITY"&&(!C.tipoEspecial||C.tipoEspecial==="entidadindividual");return R&&L});P.useEffect(()=>{const C=R=>{const{folderId:L,removeId:A,type:O,item:T,expand:I}=R.detail||{};L===((p==null?void 0:p.id)||r)&&(A?f(M=>M.filter($=>$.id!==A)):T&&T.slug&&T.slug!==r?n(`/${e}/${t}/bible/folder/${T.slug}`,{replace:!0}):S())};return window.addEventListener("folder-update",C),()=>window.removeEventListener("folder-update",C)},[r,p==null?void 0:p.id]),P.useEffect(()=>{S()},[r]);const S=async()=>{k(!0);try{const[C,R]=await Promise.all([he.get(`/world-bible/folders/${r}/entities`),he.get(`/world-bible/folders/${r}`)]);f(C),R.folder?(g(R.folder),w(R.path||[])):(g(R||{name:"Folder"}),w([]))}catch(C){console.error("Error loading folder content:",C),g(null),w([])}finally{k(!1)}};if(b)return o.jsx("div",{className:"p-20 text-center animate-pulse text-text-muted",children:"Loading sector..."});if(!p)return o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-20 text-text-muted",children:[o.jsx("span",{className:"material-symbols-outlined text-6xl mb-4 opacity-20",children:"folder_off"}),o.jsx("h2",{className:"text-xl font-bold opacity-50",children:"Folder Not Found"}),o.jsx("p",{className:"text-sm opacity-30 mt-2",children:"The sector you are looking for does not exist or has been moved."}),o.jsx(Os,{to:`/${e}/${t}/bible`,className:"mt-6 px-6 py-2 bg-white/5 hover:bg-white/10 rounded-full text-xs font-bold transition-colors",children:"Return to Root"})]});const v=p&&p.tipo&&(["UNIVERSE","GALAXY","SYSTEM","PLANET"].includes(p.tipo)||p.tipo==="MAGIC"),j=p?nw(p.tipo):_a.FOLDER;return v?o.jsxs("div",{className:"flex-1 overflow-y-auto bg-[#0a0a0c] text-white w-full h-full relative",children:[o.jsxs("div",{className:`w-full min-h-[300px] ${j.bgColor} relative flex items-end p-10 border-b border-white/5`,children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0a0a0c] to-transparent opacity-80 pointer-events-none"}),o.jsx("div",{className:"absolute top-6 left-10 z-20",children:o.jsx(QY,{path:x,currentFolder:p})}),o.jsxs("div",{className:"relative z-10 flex gap-8 items-end w-full max-w-7xl mx-auto",children:[o.jsx("div",{className:`w-32 h-32 rounded-3xl ${j.bgColor} border border-white/10 flex items-center justify-center shadow-2xl`,children:o.jsx("span",{className:`material-symbols-outlined text-6xl ${j.color}`,children:j.icon})}),o.jsxs("div",{className:"flex-1 mb-2",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border border-white/10 ${j.bgColor} ${j.color}`,children:j.label}),o.jsxs("span",{className:"text-white/30 text-xs font-mono tracking-widest uppercase",children:["ID: ",p.id]})]}),o.jsx("h1",{className:"text-6xl font-black tracking-tighter text-white mb-2",children:p.nombre}),o.jsx("p",{className:"text-lg text-white/50 max-w-2xl font-light leading-relaxed",children:p.descripcion||"Sin descripcin definida para este sector cosmolgico."})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:()=>n(`/${e}/${t}/bible/folder/${r}/entity/new/entidadindividual`),className:"px-4 py-2 bg-primary/20 hover:bg-primary/30 text-primary rounded-xl text-[10px] font-black uppercase tracking-widest flex items-center gap-2 transition-all",children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"person_add"})," Nueva Entidad"]}),o.jsxs("button",{onClick:()=>n(`/${e}/${t}/map-editor/create/${r}`,{state:{folderId:p==null?void 0:p.id}}),className:"px-4 py-2 bg-white/5 hover:bg-white/10 text-white rounded-xl text-[10px] font-black uppercase tracking-widest flex items-center gap-2 transition-all border border-glass-border",children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"map"})," Mapa"]})]})]})]}),o.jsxs("div",{className:"max-w-7xl mx-auto p-10 grid grid-cols-1 lg:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-[#13141f] border border-white/5 rounded-2xl p-6",children:[o.jsx("h3",{className:"text-xs font-bold text-white/40 uppercase tracking-widest mb-4",children:"Estadsticas"}),o.jsx("div",{className:"grid grid-cols-2 gap-4",children:o.jsxs("div",{children:[o.jsx("div",{className:"text-2xl font-black text-white",children:h.length}),o.jsx("div",{className:"text-[10px] text-white/40 uppercase",children:"Entidades"})]})})]}),o.jsxs("div",{className:"bg-[#13141f] border border-white/5 rounded-2xl p-6 h-64 flex flex-col",children:[o.jsx("h3",{className:"text-xs font-bold text-white/40 uppercase tracking-widest mb-4",children:"Notas Rpidas"}),o.jsx("textarea",{className:"flex-1 bg-transparent resize-none outline-none text-sm text-white/70 placeholder-white/20",placeholder:"Escribir notas de la zona..."})]})]}),o.jsxs("div",{className:"lg:col-span-2",children:[o.jsx("h3",{className:"text-xs font-bold text-white/40 uppercase tracking-widest mb-4",children:"Contenido Interno"}),h.length===0&&o.jsxs("div",{className:"p-12 border border-dashed border-white/10 rounded-2xl text-center",children:[o.jsx("span",{className:"material-symbols-outlined text-4xl text-white/20 mb-2",children:"folder_open"}),o.jsx("p",{className:"text-white/30 text-sm",children:"Este sector est vaco."})]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:h.map(C=>o.jsx(rw,{item:C,type:"entity",linkTo:`/${e}/${t}/bible/folder/${p.slug||r}/entity/${C.slug||C.id}`,onDelete:()=>s(C.id,(p==null?void 0:p.id)||r)},C.id))})]})]})]}):o.jsxs("div",{className:"flex-1 p-8 max-w-[1600px] mx-auto w-full h-full overflow-y-auto",children:[o.jsxs("header",{className:"mb-8 flex items-end justify-between",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsxs(Os,{to:`/${e}/${t}/bible`,className:"text-xs font-bold text-text-muted hover:text-primary transition-colors flex items-center gap-1",children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"arrow_back"})," Root"]}),p&&o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] bg-white/5 border border-white/10 ${j.color}`,children:j.label})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:`material-symbols-outlined text-3xl ${j.color}`,children:j.icon}),o.jsx("h1",{className:"text-4xl font-black text-white tracking-tighter",children:(p==null?void 0:p.nombre)||"Unnamed Folder"})]}),o.jsx("p",{className:"text-white/50 text-sm mt-2 max-w-xl",children:p==null?void 0:p.descripcion})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:()=>n(`/${e}/${t}/bible/folder/${r}/entity/new/entidadindividual`),className:"h-10 px-4 rounded-xl bg-primary hover:bg-primary-light transition flex items-center gap-2 text-xs font-bold text-white shadow-lg shadow-primary/20",children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"person"}),o.jsx("span",{children:"Nueva Entidad"})]}),o.jsxs("button",{onClick:()=>n(`/${e}/${t}/map-editor/create/${r}`,{state:{folderId:p==null?void 0:p.id}}),className:"h-10 px-4 rounded-xl bg-surface-light border border-white/5 hover:bg-white/10 transition flex items-center gap-2 text-xs font-bold text-white shadow-lg",children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"map"}),o.jsx("span",{children:"Mapa"})]}),o.jsxs("button",{onClick:()=>a(p,"TIMELINE"),className:"h-10 px-4 rounded-xl bg-surface-light border border-white/5 hover:bg-white/10 transition flex items-center gap-2 text-xs font-bold text-white",children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"timeline"}),o.jsx("span",{children:"Timeline"})]})]})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:_.map(C=>o.jsx(rw,{item:C,type:"entity",linkTo:`/${e}/${t}/bible/folder/${(p==null?void 0:p.slug)||r}/entity/${C.slug||C.id}`,onDelete:()=>s(C.id,(p==null?void 0:p.id)||r)},C.id))}),h.length===0&&o.jsx("div",{className:"p-20 text-center border-2 border-dashed border-glass-border rounded-[3rem] opacity-30 mt-8",children:o.jsx("p",{className:"text-text-muted font-bold uppercase tracking-widest",children:"Empty Folder"})})]})},JY=e=>{switch(e==null?void 0:e.toLowerCase()){case"text":return"notes";case"short_text":return"short_text";case"number":return"pin";case"date":return"calendar_today";case"select":return"list";case"boolean":return"check_box";case"map":return"map";case"timeline":return"timeline";case"character":case"entidadindividual":return"person";case"location":case"zona":case"construccion":return"location_on";case"culture":case"entidadcolectiva":return"groups";case"universe":case"galaxy":case"system":case"planet":return"public";case"entity_link":return"link";default:return"description"}},eX=(e,t,r,n)=>{const i=r.slug||r.id;return`/${e}/${t}/bible/folder/${n||"root"}/entity/${i}`},RR=({folder:e,onCreateSubfolder:t,onRename:r,onDeleteFolder:n,onDeleteEntity:i,onCreateTemplate:s,onMoveEntity:a,onCreateEntity:l,onConfirmCreate:d,className:h})=>{const{username:f,projectName:p}=Kr(),g=Wr(),[x,w]=P.useState(!1),[b,k]=P.useState({folders:[],entities:[]}),[_,S]=P.useState(!1),[v,j]=P.useState(null),[C,R]=P.useState(e.nombre),[L,A]=P.useState(!1),[O,T]=P.useState(null);P.useEffect(()=>{R(e.nombre)},[e.nombre]),P.useEffect(()=>{const D=q=>{var X,le,me,ye;const{folderId:J,optimisticType:ee,confirmedType:ue,removeId:pe,item:V,oldId:te,expand:oe,type:U}=q.detail||{};if(J===e.id){if(oe&&(w(!0),_||I()),_)if(ee){const ae=ee==="folder"?"folders":"entities";k(Fe=>({...Fe,[ae]:[...Fe[ae].filter(fe=>fe.id!==V.id),V]}))}else if(ue){const ae=ue==="folder"?"folders":"entities";k(Fe=>({...Fe,[ae]:Fe[ae].map(fe=>fe.id===te?V:fe)}))}else if(pe){const ae=U==="folder"?"folders":"entities";k(Fe=>({...Fe,[ae]:Fe[ae].filter(fe=>fe.id!==pe)}))}else!ee&&!ue&&!pe&&I()}else((X=q.detail)==null?void 0:X.targetFolderId)===e.id&&((le=q.detail)==null?void 0:le.type)==="move-in"?_&&I():((me=q.detail)==null?void 0:me.sourceFolderId)===e.id&&((ye=q.detail)==null?void 0:ye.type)==="move-out"&&_&&k(ae=>({...ae,entities:ae.entities.filter(Fe=>Fe.id!==Fe.detail.entityId)}))};return window.addEventListener("folder-update",D),()=>window.removeEventListener("folder-update",D)},[e.id,_]);const I=async()=>{try{console.log("Loading content for folder:",e.id,"Slug:",e.slug);const[D,q]=await Promise.all([he.get(`/world-bible/folders/${e.id}/subfolders`),he.get(`/world-bible/folders/${e.id}/entities`)]);k({folders:D,entities:q}),S(!0)}catch(D){console.error("Error reloading folder content:",D),D.message&&D.message.includes("404")&&console.error(`404 for folder ${e.id} (${e.nombre})`)}},M=D=>{D.stopPropagation(),w(!x),!_&&!x&&I()},$=()=>g(`/${f}/${p}/bible/folder/${e.slug||e.id}`),F=(D,q,J,ee)=>{D.preventDefault(),D.stopPropagation(),j({x:D.clientX,y:D.clientY,type:q,id:J,name:ee})},G=()=>j(null);P.useEffect(()=>{if(v)return window.addEventListener("click",G),()=>window.removeEventListener("click",G)},[v]);const B=D=>{if(D.key==="Enter"){D.preventDefault();const q=D.target.value.trim();q?d(e.id,q,"folder",e.parentId,e.tipoEspecial):e.isNew&&i(e.id,e.parentId)}};if(e.isNew)return o.jsx("div",{className:"px-3 py-1 animate-in fade-in zoom-in-95 duration-200",children:o.jsx("input",{autoFocus:!0,type:"text",className:"w-full bg-surface-light border border-primary/50 rounded px-2 py-1 text-xs text-white outline-none",placeholder:"Folder Name...",onKeyDown:B,onBlur:D=>{const q=D.target.value.trim();q?d(e.id,q,"folder",e.parentId):i(e.id,e.parentId)}})});const Y=({item:D,type:q})=>o.jsx("div",{className:"px-3 py-1 animate-in fade-in zoom-in-95 duration-200",children:o.jsx("input",{autoFocus:!0,type:"text",defaultValue:D.nombre||"",className:"w-full bg-surface-light border border-primary/50 rounded px-2 py-1 text-xs text-white outline-none",placeholder:"Name...",onKeyDown:J=>{if(J.key==="Enter"){J.preventDefault();const ee=J.target.value.trim();ee?d(D.id,ee,q,e.id,D.tipoEspecial):D.isNew&&i(D.id,e.id),T(null)}else J.key==="Escape"&&(T(null),D.isNew&&i(D.id,e.id))},onBlur:J=>{const ee=J.target.value.trim();ee?d(D.id,ee,q,e.id,D.tipoEspecial):D.isNew&&i(D.id,e.id),T(null)}})}),K=D=>{D.preventDefault(),D.stopPropagation(),D.currentTarget.classList.add("bg-primary/20")},H=D=>{D.preventDefault(),D.stopPropagation(),D.currentTarget.classList.remove("bg-primary/20")},W=D=>{D.preventDefault(),D.stopPropagation(),D.currentTarget.classList.remove("bg-primary/20");const q=D.dataTransfer.getData("entityId"),J=D.dataTransfer.getData("sourceFolderId");q&&J&&J!==String(e.id)&&a(q,e.id,J)};return o.jsxs("div",{className:`space-y-1 select-none ${h||""}`,children:[o.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 rounded-xl text-xs font-bold text-text-muted hover:text-white hover:bg-white/5 cursor-pointer transition-all group relative",onClick:$,onContextMenu:D=>F(D,"folder",e.id,e.nombre),onDragOver:K,onDragLeave:H,onDrop:W,children:[o.jsx("span",{onClick:M,className:`material-symbols-outlined text-lg transition-transform hover:text-primary ${x?"rotate-90 text-primary":"opacity-50"}`,children:"chevron_right"}),o.jsx("span",{className:`material-symbols-outlined text-lg ${nw(e.tipo).color}`,children:nw(e.tipo).icon}),L?o.jsx("input",{autoFocus:!0,className:"bg-surface-light border border-primary/50 rounded px-2 py-0.5 text-xs text-white outline-none flex-1 min-w-0",defaultValue:C,onKeyDown:async D=>{if(D.key==="Enter"){const q=D.target.value.trim();if(q&&q!==C)try{await r(e.id,q),R(q)}catch(J){console.error(J)}A(!1)}else D.key==="Escape"&&A(!1)},onBlur:()=>A(!1),onClick:D=>D.stopPropagation()}):o.jsx("span",{className:"truncate flex-1",children:C})]}),v&&o.jsxs("div",{className:"fixed bg-surface-dark border border-glass-border shadow-2xl rounded-xl py-2 z-50 w-48 text-xs font-medium flex flex-col",style:{top:v.y,left:v.x},onClick:D=>D.stopPropagation(),children:[o.jsx("div",{className:"px-4 py-2 border-b border-white/5 font-bold text-text-muted truncate",children:v.name}),v.type==="folder"?o.jsxs(o.Fragment,{children:[o.jsxs("button",{className:"px-4 py-2 hover:bg-white/5 text-left flex items-center gap-2",onClick:()=>{l(e.id,"entidadindividual"),G()},children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"person"})," New Character"]}),o.jsxs("button",{className:"px-4 py-2 hover:bg-white/5 text-left flex items-center gap-2",onClick:()=>{g(`/${f}/${p}/map-editor/create/${e.id}`),G()},children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"map"})," New Map"]}),o.jsx("div",{className:"h-px bg-white/5 my-1"}),o.jsxs("button",{className:"px-4 py-2 hover:bg-white/5 text-left flex items-center gap-2",onClick:()=>{A(!0),G()},children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"})," Rename Folder"]}),o.jsxs("button",{className:"px-4 py-2 hover:bg-red-500/10 text-red-400 text-left flex items-center gap-2",onClick:()=>{n(e.id,e.parentId),G()},children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})," Delete Folder"]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("button",{className:"px-4 py-2 hover:bg-white/5 text-left flex items-center gap-2 cursor-pointer",onClick:()=>{T(v.id),G()},children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"})," Rename"]}),o.jsxs("button",{className:"px-4 py-2 hover:bg-red-500/10 text-red-400 text-left flex items-center gap-2",onClick:()=>{i(v.id,e.id),G()},children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})," Delete Entity"]})]})]}),x&&o.jsxs("div",{className:"ml-6 pl-4 border-l border-glass-border space-y-1 animate-slide-in",children:[b.folders.map(D=>o.jsx(RR,{folder:D,onCreateSubfolder:t,onRename:r,onDeleteFolder:n,onDeleteEntity:i,onCreateTemplate:s,onMoveEntity:a,onCreateEntity:l,onConfirmCreate:d},D.id)),b.entities.map(D=>D.isNew||D.id===O?o.jsx(Y,{item:D,type:"entity"},D.id):o.jsxs(Os,{to:eX(f,p,D,e.slug||e.id),onContextMenu:q=>F(q,"entity",D.id,D.nombre),className:`flex items-center gap-3 px-3 py-2 rounded-xl text-[11px] font-medium text-text-muted hover:text-white hover:bg-primary/10 transition-all group cursor-grab active:cursor-grabbing ${D.pending?"opacity-50 pointer-events-none":""}`,draggable:!D.pending,onDragStart:q=>{q.dataTransfer.setData("entityId",D.id),q.dataTransfer.setData("sourceFolderId",e.id)},children:[o.jsx("span",{className:"material-symbols-outlined text-sm opacity-70 group-hover:text-primary transition-colors",children:JY(D.tipoEspecial)}),o.jsx("span",{className:"truncate",children:D.nombre})]},D.id)),_&&b.folders.length===0&&b.entities.length===0&&o.jsx("div",{className:"px-3 py-2 text-[10px] text-text-muted/30 uppercase font-black italic tracking-tighter",children:"Empty Sector"})]})]})},tX=({isOpen:e,onClose:t,onCreate:r,parentFolder:n})=>{const[i,s]=P.useState({nombre:"",descripcion:"",tipo:"FOLDER",canvasType:"BLANK"});if(!e)return null;const a=()=>{r(i),t(),s({nombre:"",descripcion:"",tipo:"FOLDER",canvasType:"BLANK"})},l=[_a.UNIVERSE,_a.GALAXY,_a.SYSTEM,_a.PLANET];return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:o.jsxs("div",{className:"bg-[#1a1b26] w-full max-w-4xl rounded-2xl shadow-2xl border border-white/10 overflow-hidden flex flex-col max-h-[90vh]",children:[o.jsxs("div",{className:"p-6 border-b border-white/5 flex justify-between items-center bg-[#1f202e]",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-500/20 flex items-center justify-center text-indigo-400",children:o.jsx("span",{className:"material-icons text-sm",children:"add"})}),o.jsx("h2",{className:"text-xl font-semibold text-white",children:n?"Crear Nuevo Espacio":"Crear Nuevo Mapa"})]}),o.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition",children:o.jsx("span",{className:"material-icons",children:"close"})})]}),o.jsx("div",{className:"p-8 overflow-y-auto flex-1",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsx("h3",{className:"text-sm font-black uppercase tracking-widest text-indigo-400",children:"Identidad"}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-black text-white/30 uppercase mb-2",children:"Nombre del Espacio"}),o.jsx("input",{autoFocus:!0,type:"text",value:i.nombre,onChange:d=>s({...i,nombre:d.target.value}),className:"w-full bg-black/40 border border-white/5 rounded-2xl px-5 py-4 text-white focus:outline-none focus:border-indigo-500/50 transition-all shadow-inner",placeholder:"ej. Sistema Solar"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-black text-white/30 uppercase mb-2",children:"Descripcin"}),o.jsx("textarea",{value:i.descripcion,onChange:d=>s({...i,descripcion:d.target.value}),className:"w-full h-32 bg-black/40 border border-white/5 rounded-2xl px-5 py-4 text-white focus:outline-none focus:border-indigo-500/50 resize-none transition-all",placeholder:"Detalles sobre este nivel jerrquico..."})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx("h3",{className:"text-sm font-black uppercase tracking-widest text-indigo-400",children:"Configuracin"}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("label",{className:"block text-[10px] font-black text-white/30 uppercase mb-1",children:"Tipo de Jerarqua"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:l.concat([{id:"FOLDER",label:"Carpeta",icon:"folder",color:"text-white/50"}]).map(d=>o.jsxs("div",{onClick:()=>s({...i,tipo:d.id}),className:`flex items-center gap-3 p-3 rounded-xl border cursor-pointer transition-all ${i.tipo===d.id?"bg-indigo-500/10 border-indigo-500/50":"bg-white/5 border-white/5 hover:bg-white/10"}`,children:[o.jsx("span",{className:`material-icons text-lg ${d.color||""}`,children:d.icon}),o.jsx("span",{className:"text-xs font-bold text-white/80",children:d.label})]},d.id||"FOLDER"))})]}),o.jsx("div",{className:"p-4 rounded-2xl bg-indigo-500/5 border border-indigo-500/10",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-500/20 flex items-center justify-center text-indigo-400",children:o.jsx("span",{className:"material-icons",children:"info"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-[10px] uppercase font-black text-indigo-300",children:"Ubicacin Actual"}),o.jsx("p",{className:"text-xs text-indigo-100/50",children:n?n.nombre:"Raz del Mundo"})]})]})})]})]})}),o.jsxs("div",{className:"p-6 border-t border-white/5 flex justify-end gap-3 bg-[#1f202e]",children:[o.jsx("button",{onClick:t,className:"px-6 py-3 rounded-xl text-xs font-black uppercase tracking-widest text-text-muted hover:text-white transition",children:"Cancelar"}),o.jsx("button",{onClick:a,disabled:!i.nombre,className:"px-8 py-3 rounded-xl bg-indigo-600 hover:bg-indigo-500 text-white text-xs font-black uppercase tracking-widest shadow-lg shadow-indigo-500/20 transition-all disabled:opacity-30 disabled:pointer-events-none",children:"Confirmar y Crear"})]})]})})},rX=()=>{const{username:e,projectName:t}=Kr(),r=Wr(),{handleCreateEntity:n,...i}=La()||{},[s,a]=P.useState([]),[l,d]=P.useState(!1),[h,f]=P.useState(!1),[p,g]=P.useState(null),[x,w]=P.useState(!1),[b,k]=P.useState(null),_=`/${e}/${t}/bible`;P.useEffect(()=>{S()},[t]);const S=async()=>{try{const M=await he.get("/world-bible/folders");a(M)}catch(M){console.error("Error loading folders:",M)}},v=(M=null)=>{g(M),f(!0),d(!1)},j=async(M=null,$="FOLDER")=>{try{const F=M?typeof M=="object"?M.id:M:null,G=await he.post("/world-bible/folders",{nombre:$==="TIMELINE"?"Nueva Lnea de Tiempo":"Nueva Carpeta",padreId:F,tipo:$});if(F===null){const B=await he.get("/world-bible/folders");a(B),window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:null}}))}else window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:F,optimisticType:"folder",item:G,expand:!0}}))}catch(F){console.error("Error creating simple folder:",F)}},C=async M=>{try{const $=p?p.id:null,F=await he.post("/world-bible/folders",{nombre:M.nombre,descripcion:M.descripcion,padreId:$,tipo:M.tipo});if($===null){const G=await he.get("/world-bible/folders");a(G),window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:null}}))}else F.id||console.error("CRITICAL: Created folder has no ID!",F),window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:$,optimisticType:"folder",item:F,expand:!0}}))}catch($){console.error($),alert("Error creating folder/zone.")}},R=async(M,$="entidadindividual")=>{const F=typeof M=="object"?M.slug||M.id:M;r(`${_}/folder/${F}/entity/new/${$}`)},L=async(M,$)=>{try{await he.put(`/world-bible/folders/${M}`,{nombre:$}),a(F=>F.map(G=>G.id===M?{...G,nombre:$}:G))}catch(F){throw F}},A=(M,$=null)=>{k({id:M,parentId:$,type:"folder"}),w(!0)},O=async()=>{if(!b)return;const{id:M,parentId:$,type:F,folderId:G}=b;try{F==="folder"?(await he.delete(`/world-bible/folders/${M}`),$===null&&a(B=>B.filter(Y=>Y.id!==M)),window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:$,removeId:M,type:"folder"}}))):F==="entity"&&(await he.delete(`/world-bible/entities/${M}`),window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:G,removeId:M,type:"entity"}})))}catch(B){console.error("Deletion failed:",B),alert("Error trying to delete item.")}finally{k(null)}},T=(M,$)=>{k({id:M,folderId:$,type:"entity"}),w(!0)},I=async(M,$,F,G,B)=>{try{if(F==="folder")typeof M=="number"&&!M.toString().startsWith("temp")&&(await he.put(`/world-bible/folders/${M}`,{nombre:$}),window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:G,confirmedType:"folder",oldId:M,item:{id:M,nombre:$,parentId:G,tipo:B,uiKey:Date.now()}}})),G||a(Y=>Y.map(K=>K.id===M?{...K,nombre:$}:K)));else if(F==="entity")if(typeof M=="string"&&M.startsWith("new-")){const Y=await he.post("/world-bible/entities",{nombre:$,carpetaId:G,tipoEspecial:B||"entidadindividual"});window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:G,confirmedType:"entity",oldId:M,item:Y}}))}else await he.put(`/world-bible/entities/${M}`,{nombre:$}),window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:G,confirmedType:"entity",oldId:M,item:{id:M,nombre:$,carpeta:{id:G},tipoEspecial:B,slug:M}}})),window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:G}}))}catch(Y){console.error("Creation/Rename failed",Y),F==="folder"&&A(M,G)}};return o.jsxs("div",{className:"flex h-full w-full bg-background-dark max-w-[1920px] mx-auto",children:[o.jsxs("aside",{className:"w-80 flex-none flex flex-col border-r border-glass-border bg-surface-dark/50 z-10",children:[o.jsxs("div",{className:"p-4 border-b border-glass-border",children:[o.jsxs("div",{className:"relative group mb-3",children:[o.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-text-muted text-sm group-focus-within:text-primary transition-colors",children:"search"}),o.jsx("input",{type:"text",placeholder:"Buscar en Biblia...",className:"w-full bg-surface-light/50 border border-glass-border rounded-xl py-2 pl-9 pr-3 text-xs focus:border-primary/50 outline-none transition-all text-white placeholder:text-text-muted/50"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-[10px] font-black uppercase tracking-widest text-text-muted",children:"Explorador"}),o.jsx("div",{className:"relative",children:o.jsx("button",{className:"transition-colors hover:text-white text-primary",onClick:()=>j(null),title:"Crear Carpeta",children:o.jsx("span",{className:"material-symbols-outlined text-sm",children:"create_new_folder"})})})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar p-2 space-y-0.5",children:s.length===0?o.jsxs("div",{className:"p-8 text-center opacity-30",children:[o.jsx("span",{className:"material-symbols-outlined text-3xl mb-2",children:"folder_off"}),o.jsx("p",{className:"text-[10px] uppercase font-bold",children:"Biblia Vaca"})]}):s.map(M=>o.jsx(RR,{folder:M,onCreateSubfolder:j,onRename:L,onDeleteFolder:A,onDeleteEntity:A,onCreateTemplate:()=>{},onMoveEntity:($,F,G)=>console.log("move",$,F,G),onCreateEntity:R,onConfirmCreate:I},M.uiKey||M.id))})]}),o.jsx("main",{className:"flex-1 overflow-hidden relative bg-gradient-to-br from-background-dark to-surface-dark/20",children:o.jsx(c5,{context:{...i,folders:s,handleCreateEntity:R,handleOpenCreateModal:v,handleDeleteFolder:A,handleDeleteEntity:T,handleCreateSimpleFolder:j}})}),o.jsx(tX,{isOpen:h,onClose:()=>f(!1),onCreate:C,parentFolder:p}),o.jsx(ku,{isOpen:x,onClose:()=>w(!1),onConfirm:O,title:(b==null?void 0:b.type)==="folder"?"Borrar Carpeta":"Borrar Entidad",message:(b==null?void 0:b.type)==="folder"?"Esta accin eliminar la carpeta y todo su contenido. Ests seguro?":"Ests seguro de querer eliminar esta entidad de tu mundo?",confirmText:"S, borrar"})]})},nX=()=>{const{username:e,projectName:t}=Kr(),{handleOpenCreateModal:r,handleDeleteFolder:n,handleCreateSimpleFolder:i,folders:s=[]}=La();return s===void 0?o.jsx("div",{className:"p-20 text-center animate-pulse text-text-muted",children:"Loading World Bible..."}):o.jsxs("div",{className:"flex-1 p-8 max-w-[1600px] mx-auto w-full h-full overflow-y-auto",children:[o.jsxs("header",{className:"mb-8 flex items-end justify-between",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-3 text-xs font-black uppercase tracking-widest text-primary italic mb-2",children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"auto_stories"}),"World Bible"]}),o.jsx("h1",{className:"text-4xl font-black text-white tracking-tighter",children:"Root Index"}),o.jsx("p",{className:"text-text-muted mt-2 max-w-lg text-sm",children:"The central archive of your world. Organize characters, locations, timelines, and maps."})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs("button",{onClick:()=>i(null,"FOLDER"),className:"px-6 py-2 bg-primary hover:bg-primary-light text-white rounded-xl text-xs font-bold flex items-center gap-2 transition-all shadow-lg shadow-primary/20",children:[o.jsx("span",{className:"material-symbols-outlined text-sm",children:"create_new_folder"})," Nueva Carpeta"]})})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:s.map(a=>o.jsx(rw,{item:a,type:"folder",linkTo:`/${e}/${t}/bible/folder/${a.slug||a.id}`,onDelete:()=>n(a.id)},a.id))}),s.length===0&&o.jsxs("div",{className:"p-20 text-center border-2 border-dashed border-glass-border rounded-[3rem] opacity-30 mt-8",children:[o.jsx("span",{className:"material-symbols-outlined text-6xl mb-4 text-text-muted",children:"library_books"}),o.jsx("h3",{className:"text-xl font-bold text-white uppercase tracking-widest",children:"Archivo Vaco"}),o.jsx("p",{className:"text-text-muted mt-2",children:"Comienza creando espacios para organizar tu mundo."})]})]})};var AR={exports:{}},Sp={},Ef={},Ae={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._registerNode=e.Konva=e.glob=void 0;const t=Math.PI/180;function r(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}e.glob=typeof bo<"u"?bo:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},e.Konva={_global:e.glob,version:"9.3.16",isBrowser:r(),isUnminified:/param/.test((function(i){}).toString()),dblClickWindow:400,getAngle(i){return e.Konva.angleDeg?i*t:i},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return e.Konva.DD.isDragging},isTransforming(){var i;return(i=e.Konva.Transformer)===null||i===void 0?void 0:i.isTransforming()},isDragReady(){return!!e.Konva.DD.node},releaseCanvasOnDestroy:!0,document:e.glob.document,_injectGlobal(i){e.glob.Konva=i}};const n=i=>{e.Konva[i.prototype.getClassName()]=i};e._registerNode=n,e.Konva._injectGlobal(e.Konva)})(Ae);var yt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Util=e.Transform=void 0;const t=Ae;class r{constructor(j=[1,0,0,1,0,0]){this.dirty=!1,this.m=j&&j.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new r(this.m)}copyInto(j){j.m[0]=this.m[0],j.m[1]=this.m[1],j.m[2]=this.m[2],j.m[3]=this.m[3],j.m[4]=this.m[4],j.m[5]=this.m[5]}point(j){const C=this.m;return{x:C[0]*j.x+C[2]*j.y+C[4],y:C[1]*j.x+C[3]*j.y+C[5]}}translate(j,C){return this.m[4]+=this.m[0]*j+this.m[2]*C,this.m[5]+=this.m[1]*j+this.m[3]*C,this}scale(j,C){return this.m[0]*=j,this.m[1]*=j,this.m[2]*=C,this.m[3]*=C,this}rotate(j){const C=Math.cos(j),R=Math.sin(j),L=this.m[0]*C+this.m[2]*R,A=this.m[1]*C+this.m[3]*R,O=this.m[0]*-R+this.m[2]*C,T=this.m[1]*-R+this.m[3]*C;return this.m[0]=L,this.m[1]=A,this.m[2]=O,this.m[3]=T,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(j,C){const R=this.m[0]+this.m[2]*C,L=this.m[1]+this.m[3]*C,A=this.m[2]+this.m[0]*j,O=this.m[3]+this.m[1]*j;return this.m[0]=R,this.m[1]=L,this.m[2]=A,this.m[3]=O,this}multiply(j){const C=this.m[0]*j.m[0]+this.m[2]*j.m[1],R=this.m[1]*j.m[0]+this.m[3]*j.m[1],L=this.m[0]*j.m[2]+this.m[2]*j.m[3],A=this.m[1]*j.m[2]+this.m[3]*j.m[3],O=this.m[0]*j.m[4]+this.m[2]*j.m[5]+this.m[4],T=this.m[1]*j.m[4]+this.m[3]*j.m[5]+this.m[5];return this.m[0]=C,this.m[1]=R,this.m[2]=L,this.m[3]=A,this.m[4]=O,this.m[5]=T,this}invert(){const j=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),C=this.m[3]*j,R=-this.m[1]*j,L=-this.m[2]*j,A=this.m[0]*j,O=j*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),T=j*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=C,this.m[1]=R,this.m[2]=L,this.m[3]=A,this.m[4]=O,this.m[5]=T,this}getMatrix(){return this.m}decompose(){const j=this.m[0],C=this.m[1],R=this.m[2],L=this.m[3],A=this.m[4],O=this.m[5],T=j*L-C*R,I={x:A,y:O,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(j!=0||C!=0){const M=Math.sqrt(j*j+C*C);I.rotation=C>0?Math.acos(j/M):-Math.acos(j/M),I.scaleX=M,I.scaleY=T/M,I.skewX=(j*R+C*L)/T,I.skewY=0}else if(R!=0||L!=0){const M=Math.sqrt(R*R+L*L);I.rotation=Math.PI/2-(L>0?Math.acos(-R/M):-Math.acos(R/M)),I.scaleX=T/M,I.scaleY=M,I.skewX=0,I.skewY=(j*R+C*L)/T}return I.rotation=e.Util._getRotation(I.rotation),I}}e.Transform=r;let n="[object Array]",i="[object Number]",s="[object String]",a="[object Boolean]",l=Math.PI/180,d=180/Math.PI,h="#",f="",p="0",g="Konva warning: ",x="Konva error: ",w="rgb(",b={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},k=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,_=[];const S=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(v){setTimeout(v,60)};e.Util={_isElement(v){return!!(v&&v.nodeType==1)},_isFunction(v){return!!(v&&v.constructor&&v.call&&v.apply)},_isPlainObject(v){return!!v&&v.constructor===Object},_isArray(v){return Object.prototype.toString.call(v)===n},_isNumber(v){return Object.prototype.toString.call(v)===i&&!isNaN(v)&&isFinite(v)},_isString(v){return Object.prototype.toString.call(v)===s},_isBoolean(v){return Object.prototype.toString.call(v)===a},isObject(v){return v instanceof Object},isValidSelector(v){if(typeof v!="string")return!1;const j=v[0];return j==="#"||j==="."||j===j.toUpperCase()},_sign(v){return v===0||v>0?1:-1},requestAnimFrame(v){_.push(v),_.length===1&&S(function(){const j=_;_=[],j.forEach(function(C){C()})})},createCanvasElement(){const v=document.createElement("canvas");try{v.style=v.style||{}}catch{}return v},createImageElement(){return document.createElement("img")},_isInDocument(v){for(;v=v.parentNode;)if(v==document)return!0;return!1},_urlToImage(v,j){const C=e.Util.createImageElement();C.onload=function(){j(C)},C.src=v},_rgbToHex(v,j,C){return((1<<24)+(v<<16)+(j<<8)+C).toString(16).slice(1)},_hexToRgb(v){v=v.replace(h,f);const j=parseInt(v,16);return{r:j>>16&255,g:j>>8&255,b:j&255}},getRandomColor(){let v=(Math.random()*16777215<<0).toString(16);for(;v.length<6;)v=p+v;return h+v},getRGB(v){let j;return v in b?(j=b[v],{r:j[0],g:j[1],b:j[2]}):v[0]===h?this._hexToRgb(v.substring(1)):v.substr(0,4)===w?(j=k.exec(v.replace(/ /g,"")),{r:parseInt(j[1],10),g:parseInt(j[2],10),b:parseInt(j[3],10)}):{r:0,g:0,b:0}},colorToRGBA(v){return v=v||"black",e.Util._namedColorToRBA(v)||e.Util._hex3ColorToRGBA(v)||e.Util._hex4ColorToRGBA(v)||e.Util._hex6ColorToRGBA(v)||e.Util._hex8ColorToRGBA(v)||e.Util._rgbColorToRGBA(v)||e.Util._rgbaColorToRGBA(v)||e.Util._hslColorToRGBA(v)},_namedColorToRBA(v){const j=b[v.toLowerCase()];return j?{r:j[0],g:j[1],b:j[2],a:1}:null},_rgbColorToRGBA(v){if(v.indexOf("rgb(")===0){v=v.match(/rgb\(([^)]+)\)/)[1];const j=v.split(/ *, */).map(Number);return{r:j[0],g:j[1],b:j[2],a:1}}},_rgbaColorToRGBA(v){if(v.indexOf("rgba(")===0){v=v.match(/rgba\(([^)]+)\)/)[1];const j=v.split(/ *, */).map((C,R)=>C.slice(-1)==="%"?R===3?parseInt(C)/100:parseInt(C)/100*255:Number(C));return{r:j[0],g:j[1],b:j[2],a:j[3]}}},_hex8ColorToRGBA(v){if(v[0]==="#"&&v.length===9)return{r:parseInt(v.slice(1,3),16),g:parseInt(v.slice(3,5),16),b:parseInt(v.slice(5,7),16),a:parseInt(v.slice(7,9),16)/255}},_hex6ColorToRGBA(v){if(v[0]==="#"&&v.length===7)return{r:parseInt(v.slice(1,3),16),g:parseInt(v.slice(3,5),16),b:parseInt(v.slice(5,7),16),a:1}},_hex4ColorToRGBA(v){if(v[0]==="#"&&v.length===5)return{r:parseInt(v[1]+v[1],16),g:parseInt(v[2]+v[2],16),b:parseInt(v[3]+v[3],16),a:parseInt(v[4]+v[4],16)/255}},_hex3ColorToRGBA(v){if(v[0]==="#"&&v.length===4)return{r:parseInt(v[1]+v[1],16),g:parseInt(v[2]+v[2],16),b:parseInt(v[3]+v[3],16),a:1}},_hslColorToRGBA(v){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(v)){const[j,...C]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(v),R=Number(C[0])/360,L=Number(C[1])/100,A=Number(C[2])/100;let O,T,I;if(L===0)return I=A*255,{r:Math.round(I),g:Math.round(I),b:Math.round(I),a:1};A<.5?O=A*(1+L):O=A+L-A*L;const M=2*A-O,$=[0,0,0];for(let F=0;F<3;F++)T=R+1/3*-(F-1),T<0&&T++,T>1&&T--,6*T<1?I=M+(O-M)*6*T:2*T<1?I=O:3*T<2?I=M+(O-M)*(2/3-T)*6:I=M,$[F]=I*255;return{r:Math.round($[0]),g:Math.round($[1]),b:Math.round($[2]),a:1}}},haveIntersection(v,j){return!(j.x>v.x+v.width||j.x+j.width<v.x||j.y>v.y+v.height||j.y+j.height<v.y)},cloneObject(v){const j={};for(const C in v)this._isPlainObject(v[C])?j[C]=this.cloneObject(v[C]):this._isArray(v[C])?j[C]=this.cloneArray(v[C]):j[C]=v[C];return j},cloneArray(v){return v.slice(0)},degToRad(v){return v*l},radToDeg(v){return v*d},_degToRad(v){return e.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),e.Util.degToRad(v)},_radToDeg(v){return e.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),e.Util.radToDeg(v)},_getRotation(v){return t.Konva.angleDeg?e.Util.radToDeg(v):v},_capitalize(v){return v.charAt(0).toUpperCase()+v.slice(1)},throw(v){throw new Error(x+v)},error(v){console.error(x+v)},warn(v){t.Konva.showWarnings&&console.warn(g+v)},each(v,j){for(const C in v)j(C,v[C])},_inRange(v,j,C){return j<=v&&v<C},_getProjectionToSegment(v,j,C,R,L,A){let O,T,I;const M=(v-C)*(v-C)+(j-R)*(j-R);if(M==0)O=v,T=j,I=(L-C)*(L-C)+(A-R)*(A-R);else{const $=((L-v)*(C-v)+(A-j)*(R-j))/M;$<0?(O=v,T=j,I=(v-L)*(v-L)+(j-A)*(j-A)):$>1?(O=C,T=R,I=(C-L)*(C-L)+(R-A)*(R-A)):(O=v+$*(C-v),T=j+$*(R-j),I=(O-L)*(O-L)+(T-A)*(T-A))}return[O,T,I]},_getProjectionToLine(v,j,C){const R=e.Util.cloneObject(v);let L=Number.MAX_VALUE;return j.forEach(function(A,O){if(!C&&O===j.length-1)return;const T=j[(O+1)%j.length],I=e.Util._getProjectionToSegment(A.x,A.y,T.x,T.y,v.x,v.y),M=I[0],$=I[1],F=I[2];F<L&&(R.x=M,R.y=$,L=F)}),R},_prepareArrayForTween(v,j,C){let R,L=[],A=[];if(v.length>j.length){const T=j;j=v,v=T}for(R=0;R<v.length;R+=2)L.push({x:v[R],y:v[R+1]});for(R=0;R<j.length;R+=2)A.push({x:j[R],y:j[R+1]});const O=[];return A.forEach(function(T){const I=e.Util._getProjectionToLine(T,L,C);O.push(I.x),O.push(I.y)}),O},_prepareToStringify(v){let j;v.visitedByCircularReferenceRemoval=!0;for(const C in v)if(v.hasOwnProperty(C)&&v[C]&&typeof v[C]=="object"){if(j=Object.getOwnPropertyDescriptor(v,C),v[C].visitedByCircularReferenceRemoval||e.Util._isElement(v[C]))if(j.configurable)delete v[C];else return null;else if(e.Util._prepareToStringify(v[C])===null)if(j.configurable)delete v[C];else return null}return delete v.visitedByCircularReferenceRemoval,v},_assign(v,j){for(const C in j)v[C]=j[C];return v},_getFirstPointerId(v){return v.touches?v.changedTouches[0].identifier:v.pointerId||999},releaseCanvas(...v){t.Konva.releaseCanvasOnDestroy&&v.forEach(j=>{j.width=0,j.height=0})},drawRoundedRectPath(v,j,C,R){let L=0,A=0,O=0,T=0;typeof R=="number"?L=A=O=T=Math.min(R,j/2,C/2):(L=Math.min(R[0]||0,j/2,C/2),A=Math.min(R[1]||0,j/2,C/2),T=Math.min(R[2]||0,j/2,C/2),O=Math.min(R[3]||0,j/2,C/2)),v.moveTo(L,0),v.lineTo(j-A,0),v.arc(j-A,A,A,Math.PI*3/2,0,!1),v.lineTo(j,C-T),v.arc(j-T,C-T,T,0,Math.PI/2,!1),v.lineTo(O,C),v.arc(O,C-O,O,Math.PI/2,Math.PI,!1),v.lineTo(0,L),v.arc(L,L,L,Math.PI,Math.PI*3/2,!1)}}})(yt);var dt={},Me={},je={};Object.defineProperty(je,"__esModule",{value:!0});je.RGBComponent=iX;je.alphaComponent=sX;je.getNumberValidator=aX;je.getNumberOrArrayOfNumbersValidator=oX;je.getNumberOrAutoValidator=lX;je.getStringValidator=cX;je.getStringOrGradientValidator=uX;je.getFunctionValidator=dX;je.getNumberArrayValidator=hX;je.getBooleanValidator=fX;je.getComponentValidator=pX;const Vi=Ae,Nt=yt;function Hi(e){return Nt.Util._isString(e)?'"'+e+'"':Object.prototype.toString.call(e)==="[object Number]"||Nt.Util._isBoolean(e)?e:Object.prototype.toString.call(e)}function iX(e){return e>255?255:e<0?0:Math.round(e)}function sX(e){return e>1?1:e<1e-4?1e-4:e}function aX(){if(Vi.Konva.isUnminified)return function(e,t){return Nt.Util._isNumber(e)||Nt.Util.warn(Hi(e)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),e}}function oX(e){if(Vi.Konva.isUnminified)return function(t,r){const n=Nt.Util._isNumber(t),i=Nt.Util._isArray(t)&&t.length==e;return!n&&!i&&Nt.Util.warn(Hi(t)+' is a not valid value for "'+r+'" attribute. The value should be a number or Array<number>('+e+")"),t}}function lX(){if(Vi.Konva.isUnminified)return function(e,t){return Nt.Util._isNumber(e)||e==="auto"||Nt.Util.warn(Hi(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),e}}function cX(){if(Vi.Konva.isUnminified)return function(e,t){return Nt.Util._isString(e)||Nt.Util.warn(Hi(e)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),e}}function uX(){if(Vi.Konva.isUnminified)return function(e,t){const r=Nt.Util._isString(e),n=Object.prototype.toString.call(e)==="[object CanvasGradient]"||e&&e.addColorStop;return r||n||Nt.Util.warn(Hi(e)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),e}}function dX(){if(Vi.Konva.isUnminified)return function(e,t){return Nt.Util._isFunction(e)||Nt.Util.warn(Hi(e)+' is a not valid value for "'+t+'" attribute. The value should be a function.'),e}}function hX(){if(Vi.Konva.isUnminified)return function(e,t){const r=Int8Array?Object.getPrototypeOf(Int8Array):null;return r&&e instanceof r||(Nt.Util._isArray(e)?e.forEach(function(n){Nt.Util._isNumber(n)||Nt.Util.warn('"'+t+'" attribute has non numeric element '+n+". Make sure that all elements are numbers.")}):Nt.Util.warn(Hi(e)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),e}}function fX(){if(Vi.Konva.isUnminified)return function(e,t){return e===!0||e===!1||Nt.Util.warn(Hi(e)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),e}}function pX(e){if(Vi.Konva.isUnminified)return function(t,r){return t==null||Nt.Util.isObject(t)||Nt.Util.warn(Hi(t)+' is a not valid value for "'+r+'" attribute. The value should be an object with properties '+e),t}}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Factory=void 0;const t=yt,r=je,n="get",i="set";e.Factory={addGetterSetter(s,a,l,d,h){e.Factory.addGetter(s,a,l),e.Factory.addSetter(s,a,d,h),e.Factory.addOverloadedGetterSetter(s,a)},addGetter(s,a,l){const d=n+t.Util._capitalize(a);s.prototype[d]=s.prototype[d]||function(){const h=this.attrs[a];return h===void 0?l:h}},addSetter(s,a,l,d){const h=i+t.Util._capitalize(a);s.prototype[h]||e.Factory.overWriteSetter(s,a,l,d)},overWriteSetter(s,a,l,d){const h=i+t.Util._capitalize(a);s.prototype[h]=function(f){return l&&f!==void 0&&f!==null&&(f=l.call(this,f,a)),this._setAttr(a,f),d&&d.call(this),this}},addComponentsGetterSetter(s,a,l,d,h){let f=l.length,p=t.Util._capitalize,g=n+p(a),x=i+p(a),w,b;s.prototype[g]=function(){const _={};for(w=0;w<f;w++)b=l[w],_[b]=this.getAttr(a+p(b));return _};const k=(0,r.getComponentValidator)(l);s.prototype[x]=function(_){let S=this.attrs[a],v;d&&(_=d.call(this,_)),k&&k.call(this,_,a);for(v in _)_.hasOwnProperty(v)&&this._setAttr(a+p(v),_[v]);return _||l.forEach(j=>{this._setAttr(a+p(j),void 0)}),this._fireChangeEvent(a,S,_),h&&h.call(this),this},e.Factory.addOverloadedGetterSetter(s,a)},addOverloadedGetterSetter(s,a){const l=t.Util._capitalize(a),d=i+l,h=n+l;s.prototype[a]=function(){return arguments.length?(this[d](arguments[0]),this):this[h]()}},addDeprecatedGetterSetter(s,a,l,d){t.Util.error("Adding deprecated "+a);const h=n+t.Util._capitalize(a),f=a+" property is deprecated and will be removed soon. Look at Konva change log for more information.";s.prototype[h]=function(){t.Util.error(f);const p=this.attrs[a];return p===void 0?l:p},e.Factory.addSetter(s,a,d,function(){t.Util.error(f)}),e.Factory.addOverloadedGetterSetter(s,a)},backCompat(s,a){t.Util.each(a,function(l,d){const h=s.prototype[d],f=n+t.Util._capitalize(l),p=i+t.Util._capitalize(l);function g(){h.apply(this,arguments),t.Util.error('"'+l+'" method is deprecated and will be removed soon. Use ""'+d+'" instead.')}s.prototype[l]=g,s.prototype[f]=g,s.prototype[p]=g})},afterSetFilter(){this._filterUpToDate=!1}}})(Me);var Fn={},Ii={};Object.defineProperty(Ii,"__esModule",{value:!0});Ii.HitContext=Ii.SceneContext=Ii.Context=void 0;const IR=yt,mX=Ae;function gX(e){let t=[],r=e.length,n=IR.Util,i,s;for(i=0;i<r;i++)s=e[i],n._isNumber(s)?s=Math.round(s*1e3)/1e3:n._isString(s)||(s=s+""),t.push(s);return t}const p7=",",xX="(",vX=")",yX="([",bX="])",wX=";",_X="()",NX="=",m7=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],SX=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],jX=100;class jp{constructor(t){this.canvas=t,mX.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,r){let n=this.traceArr,i=n.length,s="",a,l,d,h;for(a=0;a<i;a++)l=n[a],d=l.method,d?(h=l.args,s+=d,t?s+=_X:IR.Util._isArray(h[0])?s+=yX+h.join(p7)+bX:(r&&(h=h.map(f=>typeof f=="number"?Math.floor(f):f)),s+=xX+h.join(p7)+vX)):(s+=l.property,t||(s+=NX+l.val)),s+=wX;return s}clearTrace(){this.traceArr=[]}_trace(t){let r=this.traceArr,n;r.push(t),n=r.length,n>=jX&&r.shift()}reset(){const t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){const r=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,r.getWidth()/r.pixelRatio,r.getHeight()/r.pixelRatio)}_applyLineCap(t){const r=t.attrs.lineCap;r&&this.setAttr("lineCap",r)}_applyOpacity(t){const r=t.getAbsoluteOpacity();r!==1&&this.setAttr("globalAlpha",r)}_applyLineJoin(t){const r=t.attrs.lineJoin;r&&this.setAttr("lineJoin",r)}setAttr(t,r){this._context[t]=r}arc(t,r,n,i,s,a){this._context.arc(t,r,n,i,s,a)}arcTo(t,r,n,i,s){this._context.arcTo(t,r,n,i,s)}beginPath(){this._context.beginPath()}bezierCurveTo(t,r,n,i,s,a){this._context.bezierCurveTo(t,r,n,i,s,a)}clearRect(t,r,n,i){this._context.clearRect(t,r,n,i)}clip(...t){this._context.clip.apply(this._context,t)}closePath(){this._context.closePath()}createImageData(t,r){const n=arguments;if(n.length===2)return this._context.createImageData(t,r);if(n.length===1)return this._context.createImageData(t)}createLinearGradient(t,r,n,i){return this._context.createLinearGradient(t,r,n,i)}createPattern(t,r){return this._context.createPattern(t,r)}createRadialGradient(t,r,n,i,s,a){return this._context.createRadialGradient(t,r,n,i,s,a)}drawImage(t,r,n,i,s,a,l,d,h){const f=arguments,p=this._context;f.length===3?p.drawImage(t,r,n):f.length===5?p.drawImage(t,r,n,i,s):f.length===9&&p.drawImage(t,r,n,i,s,a,l,d,h)}ellipse(t,r,n,i,s,a,l,d){this._context.ellipse(t,r,n,i,s,a,l,d)}isPointInPath(t,r,n,i){return n?this._context.isPointInPath(n,t,r,i):this._context.isPointInPath(t,r,i)}fill(...t){this._context.fill.apply(this._context,t)}fillRect(t,r,n,i){this._context.fillRect(t,r,n,i)}strokeRect(t,r,n,i){this._context.strokeRect(t,r,n,i)}fillText(t,r,n,i){i?this._context.fillText(t,r,n,i):this._context.fillText(t,r,n)}measureText(t){return this._context.measureText(t)}getImageData(t,r,n,i){return this._context.getImageData(t,r,n,i)}lineTo(t,r){this._context.lineTo(t,r)}moveTo(t,r){this._context.moveTo(t,r)}rect(t,r,n,i){this._context.rect(t,r,n,i)}roundRect(t,r,n,i,s){this._context.roundRect(t,r,n,i,s)}putImageData(t,r,n){this._context.putImageData(t,r,n)}quadraticCurveTo(t,r,n,i){this._context.quadraticCurveTo(t,r,n,i)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,r){this._context.scale(t,r)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,r,n,i,s,a){this._context.setTransform(t,r,n,i,s,a)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,r,n,i){this._context.strokeText(t,r,n,i)}transform(t,r,n,i,s,a){this._context.transform(t,r,n,i,s,a)}translate(t,r){this._context.translate(t,r)}_enableTrace(){let t=this,r=m7.length,n=this.setAttr,i,s;const a=function(l){let d=t[l],h;t[l]=function(){return s=gX(Array.prototype.slice.call(arguments,0)),h=d.apply(t,arguments),t._trace({method:l,args:s}),h}};for(i=0;i<r;i++)a(m7[i]);t.setAttr=function(){n.apply(t,arguments);const l=arguments[0];let d=arguments[1];(l==="shadowOffsetX"||l==="shadowOffsetY"||l==="shadowBlur")&&(d=d/this.canvas.getPixelRatio()),t._trace({property:l,val:d})}}_applyGlobalCompositeOperation(t){const r=t.attrs.globalCompositeOperation;!r||r==="source-over"||this.setAttr("globalCompositeOperation",r)}}Ii.Context=jp;SX.forEach(function(e){Object.defineProperty(jp.prototype,e,{get(){return this._context[e]},set(t){this._context[e]=t}})});class kX extends jp{constructor(t,{willReadFrequently:r=!1}={}){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:r})}_fillColor(t){const r=t.fill();this.setAttr("fillStyle",r),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){const r=t._getLinearGradient();r&&(this.setAttr("fillStyle",r),t._fillFunc(this))}_fillRadialGradient(t){const r=t._getRadialGradient();r&&(this.setAttr("fillStyle",r),t._fillFunc(this))}_fill(t){const r=t.fill(),n=t.getFillPriority();if(r&&n==="color"){this._fillColor(t);return}const i=t.getFillPatternImage();if(i&&n==="pattern"){this._fillPattern(t);return}const s=t.getFillLinearGradientColorStops();if(s&&n==="linear-gradient"){this._fillLinearGradient(t);return}const a=t.getFillRadialGradientColorStops();if(a&&n==="radial-gradient"){this._fillRadialGradient(t);return}r?this._fillColor(t):i?this._fillPattern(t):s?this._fillLinearGradient(t):a&&this._fillRadialGradient(t)}_strokeLinearGradient(t){const r=t.getStrokeLinearGradientStartPoint(),n=t.getStrokeLinearGradientEndPoint(),i=t.getStrokeLinearGradientColorStops(),s=this.createLinearGradient(r.x,r.y,n.x,n.y);if(i){for(let a=0;a<i.length;a+=2)s.addColorStop(i[a],i[a+1]);this.setAttr("strokeStyle",s)}}_stroke(t){const r=t.dash(),n=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!n){this.save();const s=this.getCanvas().getPixelRatio();this.setTransform(s,0,0,s,0,0)}this._applyLineCap(t),r&&t.dashEnabled()&&(this.setLineDash(r),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),n||this.restore()}}_applyShadow(t){var r,n,i;const s=(r=t.getShadowRGBA())!==null&&r!==void 0?r:"black",a=(n=t.getShadowBlur())!==null&&n!==void 0?n:5,l=(i=t.getShadowOffset())!==null&&i!==void 0?i:{x:0,y:0},d=t.getAbsoluteScale(),h=this.canvas.getPixelRatio(),f=d.x*h,p=d.y*h;this.setAttr("shadowColor",s),this.setAttr("shadowBlur",a*Math.min(Math.abs(f),Math.abs(p))),this.setAttr("shadowOffsetX",l.x*f),this.setAttr("shadowOffsetY",l.y*p)}}Ii.SceneContext=kX;class CX extends jp{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){const r=t.getStrokeScaleEnabled();if(!r){this.save();const s=this.getCanvas().getPixelRatio();this.setTransform(s,0,0,s,0,0)}this._applyLineCap(t);const n=t.hitStrokeWidth(),i=n==="auto"?t.strokeWidth():n;this.setAttr("lineWidth",i),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),r||this.restore()}}}Ii.HitContext=CX;Object.defineProperty(Fn,"__esModule",{value:!0});Fn.HitCanvas=Fn.SceneCanvas=Fn.Canvas=void 0;const Tf=yt,MR=Ii,FR=Ae,EX=Me,TX=je;let xh;function PX(){if(xh)return xh;const e=Tf.Util.createCanvasElement(),t=e.getContext("2d");return xh=function(){const r=FR.Konva._global.devicePixelRatio||1,n=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return r/n}(),Tf.Util.releaseCanvas(e),xh}class kp{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const n=(t||{}).pixelRatio||FR.Konva.pixelRatio||PX();this.pixelRatio=n,this._canvas=Tf.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){const r=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/r,this.getHeight()/r)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";const r=this.pixelRatio;this.getContext()._context.scale(r,r)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";const r=this.pixelRatio;this.getContext()._context.scale(r,r)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,r){this.setWidth(t||0),this.setHeight(r||0)}toDataURL(t,r){try{return this._canvas.toDataURL(t,r)}catch{try{return this._canvas.toDataURL()}catch(i){return Tf.Util.error("Unable to get data URL. "+i.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}Fn.Canvas=kp;EX.Factory.addGetterSetter(kp,"pixelRatio",void 0,(0,TX.getNumberValidator)());class RX extends kp{constructor(t={width:0,height:0,willReadFrequently:!1}){super(t),this.context=new MR.SceneContext(this,{willReadFrequently:t.willReadFrequently}),this.setSize(t.width,t.height)}}Fn.SceneCanvas=RX;class AX extends kp{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new MR.HitContext(this),this.setSize(t.width,t.height)}}Fn.HitCanvas=AX;var Cp={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DD=void 0;const t=Ae,r=yt;e.DD={get isDragging(){let n=!1;return e.DD._dragElements.forEach(i=>{i.dragStatus==="dragging"&&(n=!0)}),n},justDragged:!1,get node(){let n;return e.DD._dragElements.forEach(i=>{n=i.node}),n},_dragElements:new Map,_drag(n){const i=[];e.DD._dragElements.forEach((s,a)=>{const{node:l}=s,d=l.getStage();d.setPointersPositions(n),s.pointerId===void 0&&(s.pointerId=r.Util._getFirstPointerId(n));const h=d._changedPointerPositions.find(f=>f.id===s.pointerId);if(h){if(s.dragStatus!=="dragging"){const f=l.dragDistance();if(Math.max(Math.abs(h.x-s.startPointerPos.x),Math.abs(h.y-s.startPointerPos.y))<f||(l.startDrag({evt:n}),!l.isDragging()))return}l._setDragPosition(n,s),i.push(l)}}),i.forEach(s=>{s.fire("dragmove",{type:"dragmove",target:s,evt:n},!0)})},_endDragBefore(n){const i=[];e.DD._dragElements.forEach(s=>{const{node:a}=s,l=a.getStage();if(n&&l.setPointersPositions(n),!l._changedPointerPositions.find(f=>f.id===s.pointerId))return;(s.dragStatus==="dragging"||s.dragStatus==="stopped")&&(e.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,s.dragStatus="stopped");const h=s.node.getLayer()||s.node instanceof t.Konva.Stage&&s.node;h&&i.indexOf(h)===-1&&i.push(h)}),i.forEach(s=>{s.draw()})},_endDragAfter(n){e.DD._dragElements.forEach((i,s)=>{i.dragStatus==="stopped"&&i.node.fire("dragend",{type:"dragend",target:i.node,evt:n},!0),i.dragStatus!=="dragging"&&e.DD._dragElements.delete(s)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("touchcancel",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1),window.addEventListener("touchcancel",e.DD._endDragAfter,!1))})(Cp);Object.defineProperty(dt,"__esModule",{value:!0});dt.Node=void 0;const ze=yt,Fu=Me,pc=Fn,us=Ae,an=Cp,Et=je,Dh="absoluteOpacity",vh="allEventListeners",Si="absoluteTransform",g7="absoluteScale",ha="canvas",IX="Change",MX="children",FX="konva",iw="listening",x7="mouseenter",v7="mouseleave",y7="set",b7="Shape",zh=" ",w7="stage",ds="transform",LX="Stage",sw="visible",OX=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(zh);let DX=1;class ke{constructor(t){this._id=DX++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===ds||t===Si)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,r){let n=this._cache.get(t);return(n===void 0||(t===ds||t===Si)&&n.dirty===!0)&&(n=r.call(this),this._cache.set(t,n)),n}_calculate(t,r,n){if(!this._attachedDepsListeners.get(t)){const i=r.map(s=>s+"Change.konva").join(zh);this.on(i,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,n)}_getCanvasCache(){return this._cache.get(ha)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===Si&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(ha)){const{scene:t,filter:r,hit:n}=this._cache.get(ha);ze.Util.releaseCanvas(t,r,n),this._cache.delete(ha)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){const r=t||{};let n={};(r.x===void 0||r.y===void 0||r.width===void 0||r.height===void 0)&&(n=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let i=Math.ceil(r.width||n.width),s=Math.ceil(r.height||n.height),a=r.pixelRatio,l=r.x===void 0?Math.floor(n.x):r.x,d=r.y===void 0?Math.floor(n.y):r.y,h=r.offset||0,f=r.drawBorder||!1,p=r.hitCanvasPixelRatio||1;if(!i||!s){ze.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const g=Math.abs(Math.round(n.x)-l)>.5?1:0,x=Math.abs(Math.round(n.y)-d)>.5?1:0;i+=h*2+g,s+=h*2+x,l-=h,d-=h;const w=new pc.SceneCanvas({pixelRatio:a,width:i,height:s}),b=new pc.SceneCanvas({pixelRatio:a,width:0,height:0,willReadFrequently:!0}),k=new pc.HitCanvas({pixelRatio:p,width:i,height:s}),_=w.getContext(),S=k.getContext();return k.isCache=!0,w.isCache=!0,this._cache.delete(ha),this._filterUpToDate=!1,r.imageSmoothingEnabled===!1&&(w.getContext()._context.imageSmoothingEnabled=!1,b.getContext()._context.imageSmoothingEnabled=!1),_.save(),S.save(),_.translate(-l,-d),S.translate(-l,-d),this._isUnderCache=!0,this._clearSelfAndDescendantCache(Dh),this._clearSelfAndDescendantCache(g7),this.drawScene(w,this),this.drawHit(k,this),this._isUnderCache=!1,_.restore(),S.restore(),f&&(_.save(),_.beginPath(),_.rect(0,0,i,s),_.closePath(),_.setAttr("strokeStyle","red"),_.setAttr("lineWidth",5),_.stroke(),_.restore()),this._cache.set(ha,{scene:w,filter:b,hit:k,x:l,y:d}),this._requestDraw(),this}isCached(){return this._cache.has(ha)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,r){const n=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}];let i=1/0,s=1/0,a=-1/0,l=-1/0;const d=this.getAbsoluteTransform(r);return n.forEach(function(h){const f=d.point(h);i===void 0&&(i=a=f.x,s=l=f.y),i=Math.min(i,f.x),s=Math.min(s,f.y),a=Math.max(a,f.x),l=Math.max(l,f.y)}),{x:i,y:s,width:a-i,height:l-s}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const r=this._getCanvasCache();t.translate(r.x,r.y);const n=this._getCachedSceneCanvas(),i=n.pixelRatio;t.drawImage(n._canvas,0,0,n.width/i,n.height/i),t.restore()}_drawCachedHitCanvas(t){const r=this._getCanvasCache(),n=r.hit;t.save(),t.translate(r.x,r.y),t.drawImage(n._canvas,0,0,n.width/n.pixelRatio,n.height/n.pixelRatio),t.restore()}_getCachedSceneCanvas(){let t=this.filters(),r=this._getCanvasCache(),n=r.scene,i=r.filter,s=i.getContext(),a,l,d,h;if(t){if(!this._filterUpToDate){const f=n.pixelRatio;i.setSize(n.width/n.pixelRatio,n.height/n.pixelRatio);try{for(a=t.length,s.clear(),s.drawImage(n._canvas,0,0,n.getWidth()/f,n.getHeight()/f),l=s.getImageData(0,0,i.getWidth(),i.getHeight()),d=0;d<a;d++){if(h=t[d],typeof h!="function"){ze.Util.error("Filter should be type of function, but got "+typeof h+" instead. Please check correct filters");continue}h.call(this,l),s.putImageData(l,0,0)}}catch(p){ze.Util.error("Unable to apply filter. "+p.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return i}return n}on(t,r){if(this._cache&&this._cache.delete(vh),arguments.length===3)return this._delegate.apply(this,arguments);let n=t.split(zh),i=n.length,s,a,l,d,h;for(s=0;s<i;s++)a=n[s],l=a.split("."),d=l[0],h=l[1]||"",this.eventListeners[d]||(this.eventListeners[d]=[]),this.eventListeners[d].push({name:h,handler:r});return this}off(t,r){let n=(t||"").split(zh),i=n.length,s,a,l,d,h,f;if(this._cache&&this._cache.delete(vh),!t)for(a in this.eventListeners)this._off(a);for(s=0;s<i;s++)if(l=n[s],d=l.split("."),h=d[0],f=d[1],h)this.eventListeners[h]&&this._off(h,f,r);else for(a in this.eventListeners)this._off(a,f,r);return this}dispatchEvent(t){const r={target:this,type:t.type,evt:t};return this.fire(t.type,r),this}addEventListener(t,r){return this.on(t,function(n){r.call(this,n.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,r,n){const i=this;this.on(t,function(s){const a=s.target.findAncestors(r,!0,i);for(let l=0;l<a.length;l++)s=ze.Util.cloneObject(s),s.currentTarget=a[l],n.call(a[l],s)})}remove(){return this.isDragging()&&this.stopDrag(),an.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Si),this._clearSelfAndDescendantCache(Dh),this._clearSelfAndDescendantCache(g7),this._clearSelfAndDescendantCache(w7),this._clearSelfAndDescendantCache(sw),this._clearSelfAndDescendantCache(iw)}_remove(){this._clearCaches();const t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){const r="get"+ze.Util._capitalize(t);return ze.Util._isFunction(this[r])?this[r]():this.attrs[t]}getAncestors(){let t=this.getParent(),r=[];for(;t;)r.push(t),t=t.getParent();return r}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{let r,n;if(!t)return this;for(r in t)r!==MX&&(n=y7+ze.Util._capitalize(r),ze.Util._isFunction(this[n])?this[n](t[r]):this._setAttr(r,t[r]))}),this}isListening(){return this._getCache(iw,this._isListening)}_isListening(t){if(!this.listening())return!1;const n=this.getParent();return n&&n!==t&&this!==t?n._isListening(t):!0}isVisible(){return this._getCache(sw,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const n=this.getParent();return n&&n!==t&&this!==t?n._isVisible(t):!0}shouldDrawHit(t,r=!1){if(t)return this._isVisible(t)&&this._isListening(t);const n=this.getLayer();let i=!1;an.DD._dragElements.forEach(a=>{a.dragStatus==="dragging"&&(a.node.nodeType==="Stage"||a.node.getLayer()===n)&&(i=!0)});const s=!r&&!us.Konva.hitOnDragEnabled&&(i||us.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!s}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let t=this.getDepth(),r=this,n=0,i,s,a,l;function d(f){for(i=[],s=f.length,a=0;a<s;a++)l=f[a],n++,l.nodeType!==b7&&(i=i.concat(l.getChildren().slice())),l._id===r._id&&(a=s);i.length>0&&i[0].getDepth()<=t&&d(i)}const h=this.getStage();return r.nodeType!==LX&&h&&d(h.getChildren()),n}getDepth(){let t=0,r=this.parent;for(;r;)t++,r=r.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(ds),this._clearSelfAndDescendantCache(Si)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const t=this.getStage();if(!t)return null;const r=t.getPointerPosition();if(!r)return null;const n=this.getAbsoluteTransform().copy();return n.invert(),n.point(r)}getAbsolutePosition(t){let r=!1,n=this.parent;for(;n;){if(n.isCached()){r=!0;break}n=n.parent}r&&!t&&(t=!0);const i=this.getAbsoluteTransform(t).getMatrix(),s=new ze.Transform,a=this.offset();return s.m=i.slice(),s.translate(a.x,a.y),s.getTranslation()}setAbsolutePosition(t){const{x:r,y:n,...i}=this._clearTransform();this.attrs.x=r,this.attrs.y=n,this._clearCache(ds);const s=this._getAbsoluteTransform().copy();return s.invert(),s.translate(t.x,t.y),t={x:this.attrs.x+s.getTranslation().x,y:this.attrs.y+s.getTranslation().y},this._setTransform(i),this.setPosition({x:t.x,y:t.y}),this._clearCache(ds),this._clearSelfAndDescendantCache(Si),this}_setTransform(t){let r;for(r in t)this.attrs[r]=t[r]}_clearTransform(){const t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){let r=t.x,n=t.y,i=this.x(),s=this.y();return r!==void 0&&(i+=r),n!==void 0&&(s+=n),this.setPosition({x:i,y:s}),this}_eachAncestorReverse(t,r){let n=[],i=this.getParent(),s,a;if(!(r&&r._id===this._id)){for(n.unshift(this);i&&(!r||i._id!==r._id);)n.unshift(i),i=i.parent;for(s=n.length,a=0;a<s;a++)t(n[a])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return ze.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const t=this.index,r=this.parent.getChildren().length;return t<r-1?(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return ze.Util.warn("Node has no parent. moveUp function is ignored."),!1;const t=this.index,r=this.parent.getChildren().length;return t<r-1?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return ze.Util.warn("Node has no parent. moveDown function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return ze.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(t){if(!this.parent)return ze.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&ze.Util.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const r=this.index;return this.parent.children.splice(r,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Dh,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let t=this.opacity();const r=this.getParent();return r&&!r._isUnderCache&&(t*=r.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){let t=this.getAttrs(),r,n,i,s,a;const l={attrs:{},className:this.getClassName()};for(r in t)n=t[r],a=ze.Util.isObject(n)&&!ze.Util._isPlainObject(n)&&!ze.Util._isArray(n),!a&&(i=typeof this[r]=="function"&&this[r],delete t[r],s=i?i.call(this):null,t[r]=n,s!==n&&(l.attrs[r]=n));return ze.Util._prepareToStringify(l)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,r,n){const i=[];r&&this._isMatch(t)&&i.push(this);let s=this.parent;for(;s;){if(s===n)return i;s._isMatch(t)&&i.push(s),s=s.parent}return i}isAncestorOf(t){return!1}findAncestor(t,r,n){return this.findAncestors(t,r,n)[0]}_isMatch(t){if(!t)return!1;if(typeof t=="function")return t(this);let r=t.replace(/ /g,"").split(","),n=r.length,i,s;for(i=0;i<n;i++)if(s=r[i],ze.Util.isValidSelector(s)||(ze.Util.warn('Selector "'+s+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),ze.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),ze.Util.warn("Konva is awesome, right?")),s.charAt(0)==="#"){if(this.id()===s.slice(1))return!0}else if(s.charAt(0)==="."){if(this.hasName(s.slice(1)))return!0}else if(this.className===s||this.nodeType===s)return!0;return!1}getLayer(){const t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(w7,this._getStage)}_getStage(){const t=this.getParent();return t?t.getStage():null}fire(t,r={},n){return r.target=r.target||this,n?this._fireAndBubble(t,r):this._fire(t,r),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(Si,this._getAbsoluteTransform)}_getAbsoluteTransform(t){let r;if(t)return r=new ze.Transform,this._eachAncestorReverse(function(n){const i=n.transformsEnabled();i==="all"?r.multiply(n.getTransform()):i==="position"&&r.translate(n.x()-n.offsetX(),n.y()-n.offsetY())},t),r;{r=this._cache.get(Si)||new ze.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(r):r.reset();const n=this.transformsEnabled();if(n==="all")r.multiply(this.getTransform());else if(n==="position"){const i=this.attrs.x||0,s=this.attrs.y||0,a=this.attrs.offsetX||0,l=this.attrs.offsetY||0;r.translate(i-a,s-l)}return r.dirty=!1,r}}getAbsoluteScale(t){let r=this;for(;r;)r._isUnderCache&&(t=r),r=r.getParent();const i=this.getAbsoluteTransform(t).decompose();return{x:i.scaleX,y:i.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(ds,this._getTransform)}_getTransform(){var t,r;const n=this._cache.get(ds)||new ze.Transform;n.reset();const i=this.x(),s=this.y(),a=us.Konva.getAngle(this.rotation()),l=(t=this.attrs.scaleX)!==null&&t!==void 0?t:1,d=(r=this.attrs.scaleY)!==null&&r!==void 0?r:1,h=this.attrs.skewX||0,f=this.attrs.skewY||0,p=this.attrs.offsetX||0,g=this.attrs.offsetY||0;return(i!==0||s!==0)&&n.translate(i,s),a!==0&&n.rotate(a),(h!==0||f!==0)&&n.skew(h,f),(l!==1||d!==1)&&n.scale(l,d),(p!==0||g!==0)&&n.translate(-1*p,-1*g),n.dirty=!1,n}clone(t){let r=ze.Util.cloneObject(this.attrs),n,i,s,a,l;for(n in t)r[n]=t[n];const d=new this.constructor(r);for(n in this.eventListeners)for(i=this.eventListeners[n],s=i.length,a=0;a<s;a++)l=i[a],l.name.indexOf(FX)<0&&(d.eventListeners[n]||(d.eventListeners[n]=[]),d.eventListeners[n].push(l));return d}_toKonvaCanvas(t){t=t||{};const r=this.getClientRect(),n=this.getStage(),i=t.x!==void 0?t.x:Math.floor(r.x),s=t.y!==void 0?t.y:Math.floor(r.y),a=t.pixelRatio||1,l=new pc.SceneCanvas({width:t.width||Math.ceil(r.width)||(n?n.width():0),height:t.height||Math.ceil(r.height)||(n?n.height():0),pixelRatio:a}),d=l.getContext(),h=new pc.SceneCanvas({width:l.width/l.pixelRatio+Math.abs(i),height:l.height/l.pixelRatio+Math.abs(s),pixelRatio:l.pixelRatio});return t.imageSmoothingEnabled===!1&&(d._context.imageSmoothingEnabled=!1),d.save(),(i||s)&&d.translate(-1*i,-1*s),this.drawScene(l,void 0,h),d.restore(),l}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){t=t||{};const r=t.mimeType||null,n=t.quality||null,i=this._toKonvaCanvas(t).toDataURL(r,n);return t.callback&&t.callback(i),i}toImage(t){return new Promise((r,n)=>{try{const i=t==null?void 0:t.callback;i&&delete t.callback,ze.Util._urlToImage(this.toDataURL(t),function(s){r(s),i==null||i(s)})}catch(i){n(i)}})}toBlob(t){return new Promise((r,n)=>{try{const i=t==null?void 0:t.callback;i&&delete t.callback,this.toCanvas(t).toBlob(s=>{r(s),i==null||i(s)},t==null?void 0:t.mimeType,t==null?void 0:t.quality)}catch(i){n(i)}})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():us.Konva.dragDistance}_off(t,r,n){let i=this.eventListeners[t],s,a,l;for(s=0;s<i.length;s++)if(a=i[s].name,l=i[s].handler,(a!=="konva"||r==="konva")&&(!r||a===r)&&(!n||n===l)){if(i.splice(s,1),i.length===0){delete this.eventListeners[t];break}s--}}_fireChangeEvent(t,r,n){this._fire(t+IX,{oldVal:r,newVal:n})}addName(t){if(!this.hasName(t)){const r=this.name(),n=r?r+" "+t:t;this.name(n)}return this}hasName(t){if(!t)return!1;const r=this.name();return r?(r||"").split(/\s/g).indexOf(t)!==-1:!1}removeName(t){const r=(this.name()||"").split(/\s/g),n=r.indexOf(t);return n!==-1&&(r.splice(n,1),this.name(r.join(" "))),this}setAttr(t,r){const n=this[y7+ze.Util._capitalize(t)];return ze.Util._isFunction(n)?n.call(this,r):this._setAttr(t,r),this}_requestDraw(){if(us.Konva.autoDrawEnabled){const t=this.getLayer()||this.getStage();t==null||t.batchDraw()}}_setAttr(t,r){const n=this.attrs[t];n===r&&!ze.Util.isObject(r)||(r==null?delete this.attrs[t]:this.attrs[t]=r,this._shouldFireChangeEvents&&this._fireChangeEvent(t,n,r),this._requestDraw())}_setComponentAttr(t,r,n){let i;n!==void 0&&(i=this.attrs[t],i||(this.attrs[t]=this.getAttr(t)),this.attrs[t][r]=n,this._fireChangeEvent(t,i,n))}_fireAndBubble(t,r,n){if(r&&this.nodeType===b7&&(r.target=this),!((t===x7||t===v7)&&(n&&(this===n||this.isAncestorOf&&this.isAncestorOf(n))||this.nodeType==="Stage"&&!n))){this._fire(t,r);const s=(t===x7||t===v7)&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(r&&!r.cancelBubble||!r)&&this.parent&&this.parent.isListening()&&!s&&(n&&n.parent?this._fireAndBubble.call(this.parent,t,r,n):this._fireAndBubble.call(this.parent,t,r))}}_getProtoListeners(t){var r,n,i;const s=(r=this._cache.get(vh))!==null&&r!==void 0?r:{};let a=s==null?void 0:s[t];if(a===void 0){a=[];let l=Object.getPrototypeOf(this);for(;l;){const d=(i=(n=l.eventListeners)===null||n===void 0?void 0:n[t])!==null&&i!==void 0?i:[];a.push(...d),l=Object.getPrototypeOf(l)}s[t]=a,this._cache.set(vh,s)}return a}_fire(t,r){r=r||{},r.currentTarget=this,r.type=t;const n=this._getProtoListeners(t);if(n)for(var i=0;i<n.length;i++)n[i].handler.call(this,r);const s=this.eventListeners[t];if(s)for(var i=0;i<s.length;i++)s[i].handler.call(this,r)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){const r=t?t.pointerId:void 0,n=this.getStage(),i=this.getAbsolutePosition();if(!n)return;const s=n._getPointerById(r)||n._changedPointerPositions[0]||i;an.DD._dragElements.set(this._id,{node:this,startPointerPos:s,offset:{x:s.x-i.x,y:s.y-i.y},dragStatus:"ready",pointerId:r})}startDrag(t,r=!0){an.DD._dragElements.has(this._id)||this._createDragElement(t);const n=an.DD._dragElements.get(this._id);n.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},r)}_setDragPosition(t,r){const n=this.getStage()._getPointerById(r.pointerId);if(!n)return;let i={x:n.x-r.offset.x,y:n.y-r.offset.y};const s=this.dragBoundFunc();if(s!==void 0){const a=s.call(this,i,t);a?i=a:ze.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==i.x||this._lastPos.y!==i.y)&&(this.setAbsolutePosition(i),this._requestDraw()),this._lastPos=i}stopDrag(t){const r=an.DD._dragElements.get(this._id);r&&(r.dragStatus="stopped"),an.DD._endDragBefore(t),an.DD._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=an.DD._dragElements.get(this._id);return t?t.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){if(!(!(t.evt.button!==void 0)||us.Konva.dragButtons.indexOf(t.evt.button)>=0)||this.isDragging())return;let i=!1;an.DD._dragElements.forEach(s=>{this.isAncestorOf(s.node)&&(i=!0)}),i||this._createDragElement(t)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const r=an.DD._dragElements.get(this._id),n=r&&r.dragStatus==="dragging",i=r&&r.dragStatus==="ready";n?this.stopDrag():i&&an.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const r=this.getStage();if(!r)return!1;const n={x:-t.x,y:-t.y,width:r.width()+2*t.x,height:r.height()+2*t.y};return ze.Util.haveIntersection(n,this.getClientRect())}static create(t,r){return ze.Util._isString(t)&&(t=JSON.parse(t)),this._createNode(t,r)}static _createNode(t,r){let n=ke.prototype.getClassName.call(t),i=t.children,s,a,l;r&&(t.attrs.container=r),us.Konva[n]||(ze.Util.warn('Can not find a node with class name "'+n+'". Fallback to "Shape".'),n="Shape");const d=us.Konva[n];if(s=new d(t.attrs),i)for(a=i.length,l=0;l<a;l++)s.add(ke._createNode(i[l]));return s}}dt.Node=ke;ke.prototype.nodeType="Node";ke.prototype._attrsAffectingSize=[];ke.prototype.eventListeners={};ke.prototype.on.call(ke.prototype,OX,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(ds),this._clearSelfAndDescendantCache(Si)});ke.prototype.on.call(ke.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(sw)});ke.prototype.on.call(ke.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(iw)});ke.prototype.on.call(ke.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Dh)});const Je=Fu.Factory.addGetterSetter;Je(ke,"zIndex");Je(ke,"absolutePosition");Je(ke,"position");Je(ke,"x",0,(0,Et.getNumberValidator)());Je(ke,"y",0,(0,Et.getNumberValidator)());Je(ke,"globalCompositeOperation","source-over",(0,Et.getStringValidator)());Je(ke,"opacity",1,(0,Et.getNumberValidator)());Je(ke,"name","",(0,Et.getStringValidator)());Je(ke,"id","",(0,Et.getStringValidator)());Je(ke,"rotation",0,(0,Et.getNumberValidator)());Fu.Factory.addComponentsGetterSetter(ke,"scale",["x","y"]);Je(ke,"scaleX",1,(0,Et.getNumberValidator)());Je(ke,"scaleY",1,(0,Et.getNumberValidator)());Fu.Factory.addComponentsGetterSetter(ke,"skew",["x","y"]);Je(ke,"skewX",0,(0,Et.getNumberValidator)());Je(ke,"skewY",0,(0,Et.getNumberValidator)());Fu.Factory.addComponentsGetterSetter(ke,"offset",["x","y"]);Je(ke,"offsetX",0,(0,Et.getNumberValidator)());Je(ke,"offsetY",0,(0,Et.getNumberValidator)());Je(ke,"dragDistance",null,(0,Et.getNumberValidator)());Je(ke,"width",0,(0,Et.getNumberValidator)());Je(ke,"height",0,(0,Et.getNumberValidator)());Je(ke,"listening",!0,(0,Et.getBooleanValidator)());Je(ke,"preventDefault",!0,(0,Et.getBooleanValidator)());Je(ke,"filters",null,function(e){return this._filterUpToDate=!1,e});Je(ke,"visible",!0,(0,Et.getBooleanValidator)());Je(ke,"transformsEnabled","all",(0,Et.getStringValidator)());Je(ke,"size");Je(ke,"dragBoundFunc");Je(ke,"draggable",!1,(0,Et.getBooleanValidator)());Fu.Factory.backCompat(ke,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var $a={};Object.defineProperty($a,"__esModule",{value:!0});$a.Container=void 0;const xl=Me,C2=dt,Ep=je;class Ba extends C2.Node{constructor(){super(...arguments),this.children=[]}getChildren(t){if(!t)return this.children||[];const r=this.children||[],n=[];return r.forEach(function(i){t(i)&&n.push(i)}),n}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(t.length===0)return this;if(t.length>1){for(let n=0;n<t.length;n++)this.add(t[n]);return this}const r=t[0];return r.getParent()?(r.moveTo(this),this):(this._validateAdd(r),r.index=this.getChildren().length,r.parent=this,r._clearCaches(),this.getChildren().push(r),this._fire("add",{child:r}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){const r=this._generalFind(t,!0);return r.length>0?r[0]:void 0}_generalFind(t,r){const n=[];return this._descendants(i=>{const s=i._isMatch(t);return s&&n.push(i),!!(s&&r)}),n}_descendants(t){let r=!1;const n=this.getChildren();for(const i of n){if(r=t(i),r)return!0;if(i.hasChildren()&&(r=i._descendants(t),r))return!0}return!1}toObject(){const t=C2.Node.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(r=>{t.children.push(r.toObject())}),t}isAncestorOf(t){let r=t.getParent();for(;r;){if(r._id===this._id)return!0;r=r.getParent()}return!1}clone(t){const r=C2.Node.prototype.clone.call(this,t);return this.getChildren().forEach(function(n){r.add(n.clone())}),r}getAllIntersections(t){const r=[];return this.find("Shape").forEach(n=>{n.isVisible()&&n.intersects(t)&&r.push(n)}),r}_clearSelfAndDescendantCache(t){var r;super._clearSelfAndDescendantCache(t),!this.isCached()&&((r=this.children)===null||r===void 0||r.forEach(function(n){n._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;(t=this.children)===null||t===void 0||t.forEach(function(r,n){r.index=n}),this._requestDraw()}drawScene(t,r,n){const i=this.getLayer(),s=t||i&&i.getCanvas(),a=s&&s.getContext(),l=this._getCanvasCache(),d=l&&l.scene,h=s&&s.isCache;if(!this.isVisible()&&!h)return this;if(d){a.save();const f=this.getAbsoluteTransform(r).getMatrix();a.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this._drawCachedSceneCanvas(a),a.restore()}else this._drawChildren("drawScene",s,r,n);return this}drawHit(t,r){if(!this.shouldDrawHit(r))return this;const n=this.getLayer(),i=t||n&&n.hitCanvas,s=i&&i.getContext(),a=this._getCanvasCache();if(a&&a.hit){s.save();const d=this.getAbsoluteTransform(r).getMatrix();s.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this._drawCachedHitCanvas(s),s.restore()}else this._drawChildren("drawHit",i,r);return this}_drawChildren(t,r,n,i){var s;const a=r&&r.getContext(),l=this.clipWidth(),d=this.clipHeight(),h=this.clipFunc(),f=typeof l=="number"&&typeof d=="number"||h,p=n===this;if(f){a.save();const x=this.getAbsoluteTransform(n);let w=x.getMatrix();a.transform(w[0],w[1],w[2],w[3],w[4],w[5]),a.beginPath();let b;if(h)b=h.call(this,a,this);else{const k=this.clipX(),_=this.clipY();a.rect(k||0,_||0,l,d)}a.clip.apply(a,b),w=x.copy().invert().getMatrix(),a.transform(w[0],w[1],w[2],w[3],w[4],w[5])}const g=!p&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";g&&(a.save(),a._applyGlobalCompositeOperation(this)),(s=this.children)===null||s===void 0||s.forEach(function(x){x[t](r,n,i)}),g&&a.restore(),f&&a.restore()}getClientRect(t={}){var r;const n=t.skipTransform,i=t.relativeTo;let s,a,l,d,h={x:1/0,y:1/0,width:0,height:0};const f=this;(r=this.children)===null||r===void 0||r.forEach(function(x){if(!x.visible())return;const w=x.getClientRect({relativeTo:f,skipShadow:t.skipShadow,skipStroke:t.skipStroke});w.width===0&&w.height===0||(s===void 0?(s=w.x,a=w.y,l=w.x+w.width,d=w.y+w.height):(s=Math.min(s,w.x),a=Math.min(a,w.y),l=Math.max(l,w.x+w.width),d=Math.max(d,w.y+w.height)))});const p=this.find("Shape");let g=!1;for(let x=0;x<p.length;x++)if(p[x]._isVisible(this)){g=!0;break}return g&&s!==void 0?h={x:s,y:a,width:l-s,height:d-a}:h={x:0,y:0,width:0,height:0},n?h:this._transformedRect(h,i)}}$a.Container=Ba;xl.Factory.addComponentsGetterSetter(Ba,"clip",["x","y","width","height"]);xl.Factory.addGetterSetter(Ba,"clipX",void 0,(0,Ep.getNumberValidator)());xl.Factory.addGetterSetter(Ba,"clipY",void 0,(0,Ep.getNumberValidator)());xl.Factory.addGetterSetter(Ba,"clipWidth",void 0,(0,Ep.getNumberValidator)());xl.Factory.addGetterSetter(Ba,"clipHeight",void 0,(0,Ep.getNumberValidator)());xl.Factory.addGetterSetter(Ba,"clipFunc");var LR={},Vs={};Object.defineProperty(Vs,"__esModule",{value:!0});Vs.getCapturedShape=UX;Vs.createEvent=Z5;Vs.hasPointerCapture=GX;Vs.setPointerCapture=$X;Vs.releaseCapture=DR;const zX=Ae,mu=new Map,OR=zX.Konva._global.PointerEvent!==void 0;function UX(e){return mu.get(e)}function Z5(e){return{evt:e,pointerId:e.pointerId}}function GX(e,t){return mu.get(e)===t}function $X(e,t){DR(e),t.getStage()&&(mu.set(e,t),OR&&t._fire("gotpointercapture",Z5(new PointerEvent("gotpointercapture"))))}function DR(e,t){const r=mu.get(e);if(!r)return;const n=r.getStage();n&&n.content,mu.delete(e),OR&&r._fire("lostpointercapture",Z5(new PointerEvent("lostpointercapture")))}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.stages=void 0;const t=yt,r=Me,n=$a,i=Ae,s=Fn,a=Cp,l=Ae,d=Vs,h="Stage",f="string",p="px",g="mouseout",x="mouseleave",w="mouseover",b="mouseenter",k="mousemove",_="mousedown",S="mouseup",v="pointermove",j="pointerdown",C="pointerup",R="pointercancel",L="lostpointercapture",A="pointerout",O="pointerleave",T="pointerover",I="pointerenter",M="contextmenu",$="touchstart",F="touchend",G="touchmove",B="touchcancel",Y="wheel",K=5,H=[[b,"_pointerenter"],[_,"_pointerdown"],[k,"_pointermove"],[S,"_pointerup"],[x,"_pointerleave"],[$,"_pointerdown"],[G,"_pointermove"],[F,"_pointerup"],[B,"_pointercancel"],[w,"_pointerover"],[Y,"_wheel"],[M,"_contextmenu"],[j,"_pointerdown"],[v,"_pointermove"],[C,"_pointerup"],[R,"_pointercancel"],[L,"_lostpointercapture"]],W={mouse:{[A]:g,[O]:x,[T]:w,[I]:b,[v]:k,[j]:_,[C]:S,[R]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[A]:"touchout",[O]:"touchleave",[T]:"touchover",[I]:"touchenter",[v]:G,[j]:$,[C]:F,[R]:B,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[A]:A,[O]:O,[T]:T,[I]:I,[v]:v,[j]:j,[C]:C,[R]:R,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},D=pe=>pe.indexOf("pointer")>=0?"pointer":pe.indexOf("touch")>=0?"touch":"mouse",q=pe=>{const V=D(pe);if(V==="pointer")return i.Konva.pointerEventsEnabled&&W.pointer;if(V==="touch")return W.touch;if(V==="mouse")return W.mouse};function J(pe={}){return(pe.clipFunc||pe.clipWidth||pe.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),pe}const ee="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";e.stages=[];class ue extends n.Container{constructor(V){super(J(V)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),e.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{J(this.attrs)}),this._checkVisibility()}_validateAdd(V){const te=V.getType()==="Layer",oe=V.getType()==="FastLayer";te||oe||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const V=this.visible()?"":"none";this.content.style.display=V}setContainer(V){if(typeof V===f){if(V.charAt(0)==="."){const oe=V.slice(1);V=document.getElementsByClassName(oe)[0]}else{var te;V.charAt(0)!=="#"?te=V:te=V.slice(1),V=document.getElementById(te)}if(!V)throw"Can not find container in document with id "+te}return this._setAttr("container",V),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),V.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){let V=this.children,te=V.length,oe;for(oe=0;oe<te;oe++)V[oe].clear();return this}clone(V){return V||(V={}),V.container=typeof document<"u"&&document.createElement("div"),n.Container.prototype.clone.call(this,V)}destroy(){super.destroy();const V=this.content;V&&t.Util._isInDocument(V)&&this.container().removeChild(V);const te=e.stages.indexOf(this);return te>-1&&e.stages.splice(te,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const V=this._pointerPositions[0]||this._changedPointerPositions[0];return V?{x:V.x,y:V.y}:(t.Util.warn(ee),null)}_getPointerById(V){return this._pointerPositions.find(te=>te.id===V)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(V){V=V||{},V.x=V.x||0,V.y=V.y||0,V.width=V.width||this.width(),V.height=V.height||this.height();const te=new s.SceneCanvas({width:V.width,height:V.height,pixelRatio:V.pixelRatio||1}),oe=te.getContext()._context,U=this.children;return(V.x||V.y)&&oe.translate(-1*V.x,-1*V.y),U.forEach(function(X){if(!X.isVisible())return;const le=X._toKonvaCanvas(V);oe.drawImage(le._canvas,V.x,V.y,le.getWidth()/le.getPixelRatio(),le.getHeight()/le.getPixelRatio())}),te}getIntersection(V){if(!V)return null;let te=this.children,oe=te.length,U=oe-1,X;for(X=U;X>=0;X--){const le=te[X].getIntersection(V);if(le)return le}return null}_resizeDOM(){const V=this.width(),te=this.height();this.content&&(this.content.style.width=V+p,this.content.style.height=te+p),this.bufferCanvas.setSize(V,te),this.bufferHitCanvas.setSize(V,te),this.children.forEach(oe=>{oe.setSize({width:V,height:te}),oe.draw()})}add(V,...te){if(arguments.length>1){for(let U=0;U<arguments.length;U++)this.add(arguments[U]);return this}super.add(V);const oe=this.children.length;return oe>K&&t.Util.warn("The stage has "+oe+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),V.setSize({width:this.width(),height:this.height()}),V.draw(),i.Konva.isBrowser&&this.content.appendChild(V.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(V){return d.hasPointerCapture(V,this)}setPointerCapture(V){d.setPointerCapture(V,this)}releaseCapture(V){d.releaseCapture(V,this)}getLayers(){return this.children}_bindContentEvents(){i.Konva.isBrowser&&H.forEach(([V,te])=>{this.content.addEventListener(V,oe=>{this[te](oe)},{passive:!1})})}_pointerenter(V){this.setPointersPositions(V);const te=q(V.type);te&&this._fire(te.pointerenter,{evt:V,target:this,currentTarget:this})}_pointerover(V){this.setPointersPositions(V);const te=q(V.type);te&&this._fire(te.pointerover,{evt:V,target:this,currentTarget:this})}_getTargetShape(V){let te=this[V+"targetShape"];return te&&!te.getStage()&&(te=null),te}_pointerleave(V){const te=q(V.type),oe=D(V.type);if(!te)return;this.setPointersPositions(V);const U=this._getTargetShape(oe),X=!(i.Konva.isDragging()||i.Konva.isTransforming())||i.Konva.hitOnDragEnabled;U&&X?(U._fireAndBubble(te.pointerout,{evt:V}),U._fireAndBubble(te.pointerleave,{evt:V}),this._fire(te.pointerleave,{evt:V,target:this,currentTarget:this}),this[oe+"targetShape"]=null):X&&(this._fire(te.pointerleave,{evt:V,target:this,currentTarget:this}),this._fire(te.pointerout,{evt:V,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(V){const te=q(V.type),oe=D(V.type);if(!te)return;this.setPointersPositions(V);let U=!1;this._changedPointerPositions.forEach(X=>{const le=this.getIntersection(X);if(a.DD.justDragged=!1,i.Konva["_"+oe+"ListenClick"]=!0,!le||!le.isListening()){this[oe+"ClickStartShape"]=void 0;return}i.Konva.capturePointerEventsEnabled&&le.setPointerCapture(X.id),this[oe+"ClickStartShape"]=le,le._fireAndBubble(te.pointerdown,{evt:V,pointerId:X.id}),U=!0;const me=V.type.indexOf("touch")>=0;le.preventDefault()&&V.cancelable&&me&&V.preventDefault()}),U||this._fire(te.pointerdown,{evt:V,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(V){const te=q(V.type),oe=D(V.type);if(!te||(i.Konva.isDragging()&&a.DD.node.preventDefault()&&V.cancelable&&V.preventDefault(),this.setPointersPositions(V),!(!(i.Konva.isDragging()||i.Konva.isTransforming())||i.Konva.hitOnDragEnabled)))return;const X={};let le=!1;const me=this._getTargetShape(oe);this._changedPointerPositions.forEach(ye=>{const ae=d.getCapturedShape(ye.id)||this.getIntersection(ye),Fe=ye.id,fe={evt:V,pointerId:Fe},ge=me!==ae;if(ge&&me&&(me._fireAndBubble(te.pointerout,{...fe},ae),me._fireAndBubble(te.pointerleave,{...fe},ae)),ae){if(X[ae._id])return;X[ae._id]=!0}ae&&ae.isListening()?(le=!0,ge&&(ae._fireAndBubble(te.pointerover,{...fe},me),ae._fireAndBubble(te.pointerenter,{...fe},me),this[oe+"targetShape"]=ae),ae._fireAndBubble(te.pointermove,{...fe})):me&&(this._fire(te.pointerover,{evt:V,target:this,currentTarget:this,pointerId:Fe}),this[oe+"targetShape"]=null)}),le||this._fire(te.pointermove,{evt:V,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(V){const te=q(V.type),oe=D(V.type);if(!te)return;this.setPointersPositions(V);const U=this[oe+"ClickStartShape"],X=this[oe+"ClickEndShape"],le={};let me=!1;this._changedPointerPositions.forEach(ye=>{const ae=d.getCapturedShape(ye.id)||this.getIntersection(ye);if(ae){if(ae.releaseCapture(ye.id),le[ae._id])return;le[ae._id]=!0}const Fe=ye.id,fe={evt:V,pointerId:Fe};let ge=!1;i.Konva["_"+oe+"InDblClickWindow"]?(ge=!0,clearTimeout(this[oe+"DblTimeout"])):a.DD.justDragged||(i.Konva["_"+oe+"InDblClickWindow"]=!0,clearTimeout(this[oe+"DblTimeout"])),this[oe+"DblTimeout"]=setTimeout(function(){i.Konva["_"+oe+"InDblClickWindow"]=!1},i.Konva.dblClickWindow),ae&&ae.isListening()?(me=!0,this[oe+"ClickEndShape"]=ae,ae._fireAndBubble(te.pointerup,{...fe}),i.Konva["_"+oe+"ListenClick"]&&U&&U===ae&&(ae._fireAndBubble(te.pointerclick,{...fe}),ge&&X&&X===ae&&ae._fireAndBubble(te.pointerdblclick,{...fe}))):(this[oe+"ClickEndShape"]=null,i.Konva["_"+oe+"ListenClick"]&&this._fire(te.pointerclick,{evt:V,target:this,currentTarget:this,pointerId:Fe}),ge&&this._fire(te.pointerdblclick,{evt:V,target:this,currentTarget:this,pointerId:Fe}))}),me||this._fire(te.pointerup,{evt:V,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),i.Konva["_"+oe+"ListenClick"]=!1,V.cancelable&&oe!=="touch"&&V.preventDefault()}_contextmenu(V){this.setPointersPositions(V);const te=this.getIntersection(this.getPointerPosition());te&&te.isListening()?te._fireAndBubble(M,{evt:V}):this._fire(M,{evt:V,target:this,currentTarget:this})}_wheel(V){this.setPointersPositions(V);const te=this.getIntersection(this.getPointerPosition());te&&te.isListening()?te._fireAndBubble(Y,{evt:V}):this._fire(Y,{evt:V,target:this,currentTarget:this})}_pointercancel(V){this.setPointersPositions(V);const te=d.getCapturedShape(V.pointerId)||this.getIntersection(this.getPointerPosition());te&&te._fireAndBubble(C,d.createEvent(V)),d.releaseCapture(V.pointerId)}_lostpointercapture(V){d.releaseCapture(V.pointerId)}setPointersPositions(V){let te=this._getContentPosition(),oe=null,U=null;V=V||window.event,V.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(V.touches,X=>{this._pointerPositions.push({id:X.identifier,x:(X.clientX-te.left)/te.scaleX,y:(X.clientY-te.top)/te.scaleY})}),Array.prototype.forEach.call(V.changedTouches||V.touches,X=>{this._changedPointerPositions.push({id:X.identifier,x:(X.clientX-te.left)/te.scaleX,y:(X.clientY-te.top)/te.scaleY})})):(oe=(V.clientX-te.left)/te.scaleX,U=(V.clientY-te.top)/te.scaleY,this.pointerPos={x:oe,y:U},this._pointerPositions=[{x:oe,y:U,id:t.Util._getFirstPointerId(V)}],this._changedPointerPositions=[{x:oe,y:U,id:t.Util._getFirstPointerId(V)}])}_setPointerPosition(V){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(V)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const V=this.content.getBoundingClientRect();return{top:V.top,left:V.left,scaleX:V.width/this.content.clientWidth||1,scaleY:V.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new s.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new s.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!i.Konva.isBrowser)return;const V=this.container();if(!V)throw"Stage has no container. A container is required.";V.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),V.appendChild(this.content),this._resizeDOM()}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(V){V.batchDraw()}),this}}e.Stage=ue,ue.prototype.nodeType=h,(0,l._registerNode)(ue),r.Factory.addGetterSetter(ue,"container"),i.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{e.stages.forEach(pe=>{pe.batchDraw()})})})(LR);var Lu={},zt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.shapes=void 0;const t=Ae,r=yt,n=Me,i=dt,s=je,a=Ae,l=Vs,d="hasShadow",h="shadowRGBA",f="patternImage",p="linearGradient",g="radialGradient";let x;function w(){return x||(x=r.Util.createCanvasElement().getContext("2d"),x)}e.shapes={};function b(O){const T=this.attrs.fillRule;T?O.fill(T):O.fill()}function k(O){O.stroke()}function _(O){const T=this.attrs.fillRule;T?O.fill(T):O.fill()}function S(O){O.stroke()}function v(){this._clearCache(d)}function j(){this._clearCache(h)}function C(){this._clearCache(f)}function R(){this._clearCache(p)}function L(){this._clearCache(g)}class A extends i.Node{constructor(T){super(T);let I;for(;I=r.Util.getRandomColor(),!(I&&!(I in e.shapes)););this.colorKey=I,e.shapes[I]=this}getContext(){return r.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return r.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(d,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(f,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const I=w().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(I&&I.setTransform){const M=new r.Transform;M.translate(this.fillPatternX(),this.fillPatternY()),M.rotate(t.Konva.getAngle(this.fillPatternRotation())),M.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),M.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const $=M.getMatrix(),F=typeof DOMMatrix>"u"?{a:$[0],b:$[1],c:$[2],d:$[3],e:$[4],f:$[5]}:new DOMMatrix($);I.setTransform(F)}return I}}_getLinearGradient(){return this._getCache(p,this.__getLinearGradient)}__getLinearGradient(){const T=this.fillLinearGradientColorStops();if(T){const I=w(),M=this.fillLinearGradientStartPoint(),$=this.fillLinearGradientEndPoint(),F=I.createLinearGradient(M.x,M.y,$.x,$.y);for(let G=0;G<T.length;G+=2)F.addColorStop(T[G],T[G+1]);return F}}_getRadialGradient(){return this._getCache(g,this.__getRadialGradient)}__getRadialGradient(){const T=this.fillRadialGradientColorStops();if(T){const I=w(),M=this.fillRadialGradientStartPoint(),$=this.fillRadialGradientEndPoint(),F=I.createRadialGradient(M.x,M.y,this.fillRadialGradientStartRadius(),$.x,$.y,this.fillRadialGradientEndRadius());for(let G=0;G<T.length;G+=2)F.addColorStop(T[G],T[G+1]);return F}}getShadowRGBA(){return this._getCache(h,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const T=r.Util.colorToRGBA(this.shadowColor());if(T)return"rgba("+T.r+","+T.g+","+T.b+","+T.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const T=this.hitStrokeWidth();return T==="auto"?this.hasStroke():this.strokeEnabled()&&!!T}intersects(T){const I=this.getStage();if(!I)return!1;const M=I.bufferHitCanvas;return M.getContext().clear(),this.drawHit(M,void 0,!0),M.context.getImageData(Math.round(T.x),Math.round(T.y),1,1).data[3]>0}destroy(){return i.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(T){var I;if(!((I=this.attrs.perfectDrawEnabled)!==null&&I!==void 0?I:!0))return!1;const $=T||this.hasFill(),F=this.hasStroke(),G=this.getAbsoluteOpacity()!==1;if($&&F&&G)return!0;const B=this.hasShadow(),Y=this.shadowForStrokeEnabled();return!!($&&F&&B&&Y)}setStrokeHitEnabled(T){r.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),T?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const T=this.size();return{x:this._centroid?-T.width/2:0,y:this._centroid?-T.height/2:0,width:T.width,height:T.height}}getClientRect(T={}){let I=!1,M=this.getParent();for(;M;){if(M.isCached()){I=!0;break}M=M.getParent()}const $=T.skipTransform,F=T.relativeTo||I&&this.getStage()||void 0,G=this.getSelfRect(),Y=!T.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,K=G.width+Y,H=G.height+Y,W=!T.skipShadow&&this.hasShadow(),D=W?this.shadowOffsetX():0,q=W?this.shadowOffsetY():0,J=K+Math.abs(D),ee=H+Math.abs(q),ue=W&&this.shadowBlur()||0,pe=J+ue*2,V=ee+ue*2,te={width:pe,height:V,x:-(Y/2+ue)+Math.min(D,0)+G.x,y:-(Y/2+ue)+Math.min(q,0)+G.y};return $?te:this._transformedRect(te,F)}drawScene(T,I,M){const $=this.getLayer();let F=T||$.getCanvas(),G=F.getContext(),B=this._getCanvasCache(),Y=this.getSceneFunc(),K=this.hasShadow(),H,W;const D=F.isCache,q=I===this;if(!this.isVisible()&&!q)return this;if(B){G.save();const ee=this.getAbsoluteTransform(I).getMatrix();return G.transform(ee[0],ee[1],ee[2],ee[3],ee[4],ee[5]),this._drawCachedSceneCanvas(G),G.restore(),this}if(!Y)return this;if(G.save(),this._useBufferCanvas()&&!D){H=this.getStage();const ee=M||H.bufferCanvas;W=ee.getContext(),W.clear(),W.save(),W._applyLineJoin(this);var J=this.getAbsoluteTransform(I).getMatrix();W.transform(J[0],J[1],J[2],J[3],J[4],J[5]),Y.call(this,W,this),W.restore();const ue=ee.pixelRatio;K&&G._applyShadow(this),G._applyOpacity(this),G._applyGlobalCompositeOperation(this),G.drawImage(ee._canvas,0,0,ee.width/ue,ee.height/ue)}else{if(G._applyLineJoin(this),!q){var J=this.getAbsoluteTransform(I).getMatrix();G.transform(J[0],J[1],J[2],J[3],J[4],J[5]),G._applyOpacity(this),G._applyGlobalCompositeOperation(this)}K&&G._applyShadow(this),Y.call(this,G,this)}return G.restore(),this}drawHit(T,I,M=!1){if(!this.shouldDrawHit(I,M))return this;const $=this.getLayer(),F=T||$.hitCanvas,G=F&&F.getContext(),B=this.hitFunc()||this.sceneFunc(),Y=this._getCanvasCache(),K=Y&&Y.hit;if(this.colorKey||r.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),K){G.save();const W=this.getAbsoluteTransform(I).getMatrix();return G.transform(W[0],W[1],W[2],W[3],W[4],W[5]),this._drawCachedHitCanvas(G),G.restore(),this}if(!B)return this;if(G.save(),G._applyLineJoin(this),!(this===I)){const W=this.getAbsoluteTransform(I).getMatrix();G.transform(W[0],W[1],W[2],W[3],W[4],W[5])}return B.call(this,G,this),G.restore(),this}drawHitFromCache(T=0){let I=this._getCanvasCache(),M=this._getCachedSceneCanvas(),$=I.hit,F=$.getContext(),G=$.getWidth(),B=$.getHeight(),Y,K,H,W,D,q;F.clear(),F.drawImage(M._canvas,0,0,G,B);try{for(Y=F.getImageData(0,0,G,B),K=Y.data,H=K.length,W=r.Util._hexToRgb(this.colorKey),D=0;D<H;D+=4)q=K[D+3],q>T?(K[D]=W.r,K[D+1]=W.g,K[D+2]=W.b,K[D+3]=255):K[D+3]=0;F.putImageData(Y,0,0)}catch(J){r.Util.error("Unable to draw hit graph from cached scene canvas. "+J.message)}return this}hasPointerCapture(T){return l.hasPointerCapture(T,this)}setPointerCapture(T){l.setPointerCapture(T,this)}releaseCapture(T){l.releaseCapture(T,this)}}e.Shape=A,A.prototype._fillFunc=b,A.prototype._strokeFunc=k,A.prototype._fillFuncHit=_,A.prototype._strokeFuncHit=S,A.prototype._centroid=!1,A.prototype.nodeType="Shape",(0,a._registerNode)(A),A.prototype.eventListeners={},A.prototype.on.call(A.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",v),A.prototype.on.call(A.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",j),A.prototype.on.call(A.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",C),A.prototype.on.call(A.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",R),A.prototype.on.call(A.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",L),n.Factory.addGetterSetter(A,"stroke",void 0,(0,s.getStringOrGradientValidator)()),n.Factory.addGetterSetter(A,"strokeWidth",2,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(A,"fillAfterStrokeEnabled",!1),n.Factory.addGetterSetter(A,"hitStrokeWidth","auto",(0,s.getNumberOrAutoValidator)()),n.Factory.addGetterSetter(A,"strokeHitEnabled",!0,(0,s.getBooleanValidator)()),n.Factory.addGetterSetter(A,"perfectDrawEnabled",!0,(0,s.getBooleanValidator)()),n.Factory.addGetterSetter(A,"shadowForStrokeEnabled",!0,(0,s.getBooleanValidator)()),n.Factory.addGetterSetter(A,"lineJoin"),n.Factory.addGetterSetter(A,"lineCap"),n.Factory.addGetterSetter(A,"sceneFunc"),n.Factory.addGetterSetter(A,"hitFunc"),n.Factory.addGetterSetter(A,"dash"),n.Factory.addGetterSetter(A,"dashOffset",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(A,"shadowColor",void 0,(0,s.getStringValidator)()),n.Factory.addGetterSetter(A,"shadowBlur",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(A,"shadowOpacity",1,(0,s.getNumberValidator)()),n.Factory.addComponentsGetterSetter(A,"shadowOffset",["x","y"]),n.Factory.addGetterSetter(A,"shadowOffsetX",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(A,"shadowOffsetY",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(A,"fillPatternImage"),n.Factory.addGetterSetter(A,"fill",void 0,(0,s.getStringOrGradientValidator)()),n.Factory.addGetterSetter(A,"fillPatternX",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(A,"fillPatternY",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(A,"fillLinearGradientColorStops"),n.Factory.addGetterSetter(A,"strokeLinearGradientColorStops"),n.Factory.addGetterSetter(A,"fillRadialGradientStartRadius",0),n.Factory.addGetterSetter(A,"fillRadialGradientEndRadius",0),n.Factory.addGetterSetter(A,"fillRadialGradientColorStops"),n.Factory.addGetterSetter(A,"fillPatternRepeat","repeat"),n.Factory.addGetterSetter(A,"fillEnabled",!0),n.Factory.addGetterSetter(A,"strokeEnabled",!0),n.Factory.addGetterSetter(A,"shadowEnabled",!0),n.Factory.addGetterSetter(A,"dashEnabled",!0),n.Factory.addGetterSetter(A,"strokeScaleEnabled",!0),n.Factory.addGetterSetter(A,"fillPriority","color"),n.Factory.addComponentsGetterSetter(A,"fillPatternOffset",["x","y"]),n.Factory.addGetterSetter(A,"fillPatternOffsetX",0,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(A,"fillPatternOffsetY",0,(0,s.getNumberValidator)()),n.Factory.addComponentsGetterSetter(A,"fillPatternScale",["x","y"]),n.Factory.addGetterSetter(A,"fillPatternScaleX",1,(0,s.getNumberValidator)()),n.Factory.addGetterSetter(A,"fillPatternScaleY",1,(0,s.getNumberValidator)()),n.Factory.addComponentsGetterSetter(A,"fillLinearGradientStartPoint",["x","y"]),n.Factory.addComponentsGetterSetter(A,"strokeLinearGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(A,"fillLinearGradientStartPointX",0),n.Factory.addGetterSetter(A,"strokeLinearGradientStartPointX",0),n.Factory.addGetterSetter(A,"fillLinearGradientStartPointY",0),n.Factory.addGetterSetter(A,"strokeLinearGradientStartPointY",0),n.Factory.addComponentsGetterSetter(A,"fillLinearGradientEndPoint",["x","y"]),n.Factory.addComponentsGetterSetter(A,"strokeLinearGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(A,"fillLinearGradientEndPointX",0),n.Factory.addGetterSetter(A,"strokeLinearGradientEndPointX",0),n.Factory.addGetterSetter(A,"fillLinearGradientEndPointY",0),n.Factory.addGetterSetter(A,"strokeLinearGradientEndPointY",0),n.Factory.addComponentsGetterSetter(A,"fillRadialGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(A,"fillRadialGradientStartPointX",0),n.Factory.addGetterSetter(A,"fillRadialGradientStartPointY",0),n.Factory.addComponentsGetterSetter(A,"fillRadialGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(A,"fillRadialGradientEndPointX",0),n.Factory.addGetterSetter(A,"fillRadialGradientEndPointY",0),n.Factory.addGetterSetter(A,"fillPatternRotation",0),n.Factory.addGetterSetter(A,"fillRule",void 0,(0,s.getStringValidator)()),n.Factory.backCompat(A,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(zt);Object.defineProperty(Lu,"__esModule",{value:!0});Lu.Layer=void 0;const Ni=yt,E2=$a,xo=dt,J5=Me,_7=Fn,BX=je,qX=zt,VX=Ae,HX="#",WX="beforeDraw",KX="draw",zR=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],YX=zR.length;let vl=class extends E2.Container{constructor(t){super(t),this.canvas=new _7.SceneCanvas,this.hitCanvas=new _7.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);const r=this.getStage();return r&&r.content&&(r.content.removeChild(this.getNativeCanvasElement()),t<r.children.length-1?r.content.insertBefore(this.getNativeCanvasElement(),r.children[t+1].getCanvas()._canvas):r.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){xo.Node.prototype.moveToTop.call(this);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!xo.Node.prototype.moveUp.call(this))return!1;const r=this.getStage();return!r||!r.content?!1:(r.content.removeChild(this.getNativeCanvasElement()),this.index<r.children.length-1?r.content.insertBefore(this.getNativeCanvasElement(),r.children[this.index+1].getCanvas()._canvas):r.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(xo.Node.prototype.moveDown.call(this)){const t=this.getStage();if(t){const r=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),r[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(xo.Node.prototype.moveToBottom.call(this)){const t=this.getStage();if(t){const r=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),r[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const t=this.getNativeCanvasElement();return xo.Node.prototype.remove.call(this),t&&t.parentNode&&Ni.Util._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:r}){return this.canvas.setSize(t,r),this.hitCanvas.setSize(t,r),this._setSmoothEnabled(),this}_validateAdd(t){const r=t.getType();r!=="Group"&&r!=="Shape"&&Ni.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t=t||{},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),xo.Node.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){Ni.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){Ni.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,Ni.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;let r=1,n=!1;for(;;){for(let i=0;i<YX;i++){const s=zR[i],a=this._getIntersection({x:t.x+s.x*r,y:t.y+s.y*r}),l=a.shape;if(l)return l;if(n=!!a.antialiased,!a.antialiased)break}if(n)r+=1;else return null}}_getIntersection(t){const r=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(t.x*r),Math.round(t.y*r),1,1).data,i=n[3];if(i===255){const s=Ni.Util._rgbToHex(n[0],n[1],n[2]),a=qX.shapes[HX+s];return a?{shape:a}:{antialiased:!0}}else if(i>0)return{antialiased:!0};return{}}drawScene(t,r){const n=this.getLayer(),i=t||n&&n.getCanvas();return this._fire(WX,{node:this}),this.clearBeforeDraw()&&i.getContext().clear(),E2.Container.prototype.drawScene.call(this,i,r),this._fire(KX,{node:this}),this}drawHit(t,r){const n=this.getLayer(),i=t||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),E2.Container.prototype.drawHit.call(this,i,r),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){Ni.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return Ni.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const t=this.parent;!!this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}destroy(){return Ni.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};Lu.Layer=vl;vl.prototype.nodeType="Layer";(0,VX._registerNode)(vl);J5.Factory.addGetterSetter(vl,"imageSmoothingEnabled",!0);J5.Factory.addGetterSetter(vl,"clearBeforeDraw",!0);J5.Factory.addGetterSetter(vl,"hitGraphEnabled",!0,(0,BX.getBooleanValidator)());var Tp={};Object.defineProperty(Tp,"__esModule",{value:!0});Tp.FastLayer=void 0;const XX=yt,QX=Lu,ZX=Ae;class e3 extends QX.Layer{constructor(t){super(t),this.listening(!1),XX.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}Tp.FastLayer=e3;e3.prototype.nodeType="FastLayer";(0,ZX._registerNode)(e3);var yl={};Object.defineProperty(yl,"__esModule",{value:!0});yl.Group=void 0;const JX=yt,eQ=$a,tQ=Ae;class t3 extends eQ.Container{_validateAdd(t){const r=t.getType();r!=="Group"&&r!=="Shape"&&JX.Util.throw("You may only add groups and shapes to groups.")}}yl.Group=t3;t3.prototype.nodeType="Group";(0,tQ._registerNode)(t3);var bl={};Object.defineProperty(bl,"__esModule",{value:!0});bl.Animation=void 0;const T2=Ae,N7=yt,P2=function(){return T2.glob.performance&&T2.glob.performance.now?function(){return T2.glob.performance.now()}:function(){return new Date().getTime()}}();class ri{constructor(t,r){this.id=ri.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:P2(),frameRate:0},this.func=t,this.setLayers(r)}setLayers(t){let r=[];return t&&(r=Array.isArray(t)?t:[t]),this.layers=r,this}getLayers(){return this.layers}addLayer(t){const r=this.layers,n=r.length;for(let i=0;i<n;i++)if(r[i]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){const r=ri.animations,n=r.length;for(let i=0;i<n;i++)if(r[i].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=P2(),ri._addAnimation(this),this}stop(){return ri._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){const r=t.id,n=this.animations,i=n.length;for(let s=0;s<i;s++)if(n[s].id===r){this.animations.splice(s,1);break}}static _runFrames(){const t={},r=this.animations;for(let n=0;n<r.length;n++){const i=r[n],s=i.layers,a=i.func;i._updateFrameObject(P2());const l=s.length;let d;if(a?d=a.call(i,i.frame)!==!1:d=!0,!!d)for(let h=0;h<l;h++){const f=s[h];f._id!==void 0&&(t[f._id]=f)}}for(const n in t)t.hasOwnProperty(n)&&t[n].batchDraw()}static _animationLoop(){const t=ri;t.animations.length?(t._runFrames(),N7.Util.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,N7.Util.requestAnimFrame(this._animationLoop))}}bl.Animation=ri;ri.animations=[];ri.animIdCounter=0;ri.animRunning=!1;var UR={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Easings=e.Tween=void 0;const t=yt,r=bl,n=dt,i=Ae;let s={node:1,duration:1,easing:1,onFinish:1,yoyo:1},a=1,l=2,d=3,h=0,f=["fill","stroke","shadowColor"];class p{constructor(w,b,k,_,S,v,j){this.prop=w,this.propFunc=b,this.begin=_,this._pos=_,this.duration=v,this._change=0,this.prevPos=0,this.yoyo=j,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=k,this._change=S-this.begin,this.pause()}fire(w){const b=this[w];b&&b()}setTime(w){w>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():w<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=w,this.update())}getTime(){return this._time}setPosition(w){this.prevPos=this._pos,this.propFunc(w),this._pos=w}getPosition(w){return w===void 0&&(w=this._time),this.func(w,this.begin,this._change,this.duration)}play(){this.state=l,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=d,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(w){this.pause(),this._time=w,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const w=this.getTimer()-this._startTime;this.state===l?this.setTime(w):this.state===d&&this.setTime(this.duration-w)}pause(){this.state=a,this.fire("onPause")}getTimer(){return new Date().getTime()}}class g{constructor(w){let b=this,k=w.node,_=k._id,S,v=w.easing||e.Easings.Linear,j=!!w.yoyo,C;typeof w.duration>"u"?S=.3:w.duration===0?S=.001:S=w.duration,this.node=k,this._id=h++;const R=k.getLayer()||(k instanceof i.Konva.Stage?k.getLayers():null);R||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new r.Animation(function(){b.tween.onEnterFrame()},R),this.tween=new p(C,function(L){b._tweenFunc(L)},v,0,1,S*1e3,j),this._addListeners(),g.attrs[_]||(g.attrs[_]={}),g.attrs[_][this._id]||(g.attrs[_][this._id]={}),g.tweens[_]||(g.tweens[_]={});for(C in w)s[C]===void 0&&this._addAttr(C,w[C]);this.reset(),this.onFinish=w.onFinish,this.onReset=w.onReset,this.onUpdate=w.onUpdate}_addAttr(w,b){let k=this.node,_=k._id,S,v,j,C,R,L,A,O;if(j=g.tweens[_][w],j&&delete g.attrs[_][j][w],S=k.getAttr(w),t.Util._isArray(b))if(v=[],R=Math.max(b.length,S.length),w==="points"&&b.length!==S.length&&(b.length>S.length?(A=S,S=t.Util._prepareArrayForTween(S,b,k.closed())):(L=b,b=t.Util._prepareArrayForTween(b,S,k.closed()))),w.indexOf("fill")===0)for(C=0;C<R;C++)if(C%2===0)v.push(b[C]-S[C]);else{const T=t.Util.colorToRGBA(S[C]);O=t.Util.colorToRGBA(b[C]),S[C]=T,v.push({r:O.r-T.r,g:O.g-T.g,b:O.b-T.b,a:O.a-T.a})}else for(C=0;C<R;C++)v.push(b[C]-S[C]);else f.indexOf(w)!==-1?(S=t.Util.colorToRGBA(S),O=t.Util.colorToRGBA(b),v={r:O.r-S.r,g:O.g-S.g,b:O.b-S.b,a:O.a-S.a}):v=b-S;g.attrs[_][this._id][w]={start:S,diff:v,end:b,trueEnd:L,trueStart:A},g.tweens[_][w]=this._id}_tweenFunc(w){let b=this.node,k=g.attrs[b._id][this._id],_,S,v,j,C,R,L,A;for(_ in k){if(S=k[_],v=S.start,j=S.diff,A=S.end,t.Util._isArray(v))if(C=[],L=Math.max(v.length,A.length),_.indexOf("fill")===0)for(R=0;R<L;R++)R%2===0?C.push((v[R]||0)+j[R]*w):C.push("rgba("+Math.round(v[R].r+j[R].r*w)+","+Math.round(v[R].g+j[R].g*w)+","+Math.round(v[R].b+j[R].b*w)+","+(v[R].a+j[R].a*w)+")");else for(R=0;R<L;R++)C.push((v[R]||0)+j[R]*w);else f.indexOf(_)!==-1?C="rgba("+Math.round(v.r+j.r*w)+","+Math.round(v.g+j.g*w)+","+Math.round(v.b+j.b*w)+","+(v.a+j.a*w)+")":C=v+j*w;b.setAttr(_,C)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const w=this.node,b=g.attrs[w._id][this._id];b.points&&b.points.trueEnd&&w.setAttr("points",b.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const w=this.node,b=g.attrs[w._id][this._id];b.points&&b.points.trueStart&&w.points(b.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(w){return this.tween.seek(w*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){let w=this.node._id,b=this._id,k=g.tweens[w],_;this.pause();for(_ in k)delete g.tweens[w][_];delete g.attrs[w][b]}}e.Tween=g,g.attrs={},g.tweens={},n.Node.prototype.to=function(x){const w=x.onFinish;x.node=this,x.onFinish=function(){this.destroy(),w&&w()},new g(x).play()},e.Easings={BackEaseIn(x,w,b,k){return b*(x/=k)*x*((1.70158+1)*x-1.70158)+w},BackEaseOut(x,w,b,k){return b*((x=x/k-1)*x*((1.70158+1)*x+1.70158)+1)+w},BackEaseInOut(x,w,b,k){let _=1.70158;return(x/=k/2)<1?b/2*(x*x*(((_*=1.525)+1)*x-_))+w:b/2*((x-=2)*x*(((_*=1.525)+1)*x+_)+2)+w},ElasticEaseIn(x,w,b,k,_,S){let v=0;return x===0?w:(x/=k)===1?w+b:(S||(S=k*.3),!_||_<Math.abs(b)?(_=b,v=S/4):v=S/(2*Math.PI)*Math.asin(b/_),-(_*Math.pow(2,10*(x-=1))*Math.sin((x*k-v)*(2*Math.PI)/S))+w)},ElasticEaseOut(x,w,b,k,_,S){let v=0;return x===0?w:(x/=k)===1?w+b:(S||(S=k*.3),!_||_<Math.abs(b)?(_=b,v=S/4):v=S/(2*Math.PI)*Math.asin(b/_),_*Math.pow(2,-10*x)*Math.sin((x*k-v)*(2*Math.PI)/S)+b+w)},ElasticEaseInOut(x,w,b,k,_,S){let v=0;return x===0?w:(x/=k/2)===2?w+b:(S||(S=k*(.3*1.5)),!_||_<Math.abs(b)?(_=b,v=S/4):v=S/(2*Math.PI)*Math.asin(b/_),x<1?-.5*(_*Math.pow(2,10*(x-=1))*Math.sin((x*k-v)*(2*Math.PI)/S))+w:_*Math.pow(2,-10*(x-=1))*Math.sin((x*k-v)*(2*Math.PI)/S)*.5+b+w)},BounceEaseOut(x,w,b,k){return(x/=k)<1/2.75?b*(7.5625*x*x)+w:x<2/2.75?b*(7.5625*(x-=1.5/2.75)*x+.75)+w:x<2.5/2.75?b*(7.5625*(x-=2.25/2.75)*x+.9375)+w:b*(7.5625*(x-=2.625/2.75)*x+.984375)+w},BounceEaseIn(x,w,b,k){return b-e.Easings.BounceEaseOut(k-x,0,b,k)+w},BounceEaseInOut(x,w,b,k){return x<k/2?e.Easings.BounceEaseIn(x*2,0,b,k)*.5+w:e.Easings.BounceEaseOut(x*2-k,0,b,k)*.5+b*.5+w},EaseIn(x,w,b,k){return b*(x/=k)*x+w},EaseOut(x,w,b,k){return-b*(x/=k)*(x-2)+w},EaseInOut(x,w,b,k){return(x/=k/2)<1?b/2*x*x+w:-b/2*(--x*(x-2)-1)+w},StrongEaseIn(x,w,b,k){return b*(x/=k)*x*x*x*x+w},StrongEaseOut(x,w,b,k){return b*((x=x/k-1)*x*x*x*x+1)+w},StrongEaseInOut(x,w,b,k){return(x/=k/2)<1?b/2*x*x*x*x*x+w:b/2*((x-=2)*x*x*x*x+2)+w},Linear(x,w,b,k){return b*x/k+w}}})(UR);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;const t=Ae,r=yt,n=dt,i=$a,s=LR,a=Lu,l=Tp,d=yl,h=Cp,f=zt,p=bl,g=UR,x=Ii,w=Fn;e.Konva=r.Util._assign(t.Konva,{Util:r.Util,Transform:r.Transform,Node:n.Node,Container:i.Container,Stage:s.Stage,stages:s.stages,Layer:a.Layer,FastLayer:l.FastLayer,Group:d.Group,DD:h.DD,Shape:f.Shape,shapes:f.shapes,Animation:p.Animation,Tween:g.Tween,Easings:g.Easings,Context:x.Context,Canvas:w.Canvas}),e.default=e.Konva})(Ef);var Pp={};Object.defineProperty(Pp,"__esModule",{value:!0});Pp.Arc=void 0;const Rp=Me,rQ=zt,S7=Ae,Ap=je,nQ=Ae;class Wi extends rQ.Shape{_sceneFunc(t){const r=S7.Konva.getAngle(this.angle()),n=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,r,n),t.arc(0,0,this.innerRadius(),r,0,!n),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),r=this.outerRadius(),n=this.clockwise(),i=S7.Konva.getAngle(n?360-this.angle():this.angle()),s=Math.cos(Math.min(i,Math.PI)),a=1,l=Math.sin(Math.min(Math.max(Math.PI,i),3*Math.PI/2)),d=Math.sin(Math.min(i,Math.PI/2)),h=s*(s>0?t:r),f=a*r,p=l*(l>0?t:r),g=d*(d>0?r:t);return{x:h,y:n?-1*g:p,width:f-h,height:g-p}}}Pp.Arc=Wi;Wi.prototype._centroid=!0;Wi.prototype.className="Arc";Wi.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,nQ._registerNode)(Wi);Rp.Factory.addGetterSetter(Wi,"innerRadius",0,(0,Ap.getNumberValidator)());Rp.Factory.addGetterSetter(Wi,"outerRadius",0,(0,Ap.getNumberValidator)());Rp.Factory.addGetterSetter(Wi,"angle",0,(0,Ap.getNumberValidator)());Rp.Factory.addGetterSetter(Wi,"clockwise",!1,(0,Ap.getBooleanValidator)());var Ip={},Ou={};Object.defineProperty(Ou,"__esModule",{value:!0});Ou.Line=void 0;const Mp=Me,iQ=Ae,sQ=zt,GR=je;function aw(e,t,r,n,i,s,a){const l=Math.sqrt(Math.pow(r-e,2)+Math.pow(n-t,2)),d=Math.sqrt(Math.pow(i-r,2)+Math.pow(s-n,2)),h=a*l/(l+d),f=a*d/(l+d),p=r-h*(i-e),g=n-h*(s-t),x=r+f*(i-e),w=n+f*(s-t);return[p,g,x,w]}function j7(e,t){const r=e.length,n=[];for(let i=2;i<r-2;i+=2){const s=aw(e[i-2],e[i-1],e[i],e[i+1],e[i+2],e[i+3],t);isNaN(s[0])||(n.push(s[0]),n.push(s[1]),n.push(e[i]),n.push(e[i+1]),n.push(s[2]),n.push(s[3]))}return n}let Hs=class extends sQ.Shape{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){let r=this.points(),n=r.length,i=this.tension(),s=this.closed(),a=this.bezier(),l,d,h;if(n){if(t.beginPath(),t.moveTo(r[0],r[1]),i!==0&&n>4){for(l=this.getTensionPoints(),d=l.length,h=s?0:4,s||t.quadraticCurveTo(l[0],l[1],l[2],l[3]);h<d-2;)t.bezierCurveTo(l[h++],l[h++],l[h++],l[h++],l[h++],l[h++]);s||t.quadraticCurveTo(l[d-2],l[d-1],r[n-2],r[n-1])}else if(a)for(h=2;h<n;)t.bezierCurveTo(r[h++],r[h++],r[h++],r[h++],r[h++],r[h++]);else for(h=2;h<n;h+=2)t.lineTo(r[h],r[h+1]);s?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():j7(this.points(),this.tension())}_getTensionPointsClosed(){const t=this.points(),r=t.length,n=this.tension(),i=aw(t[r-2],t[r-1],t[0],t[1],t[2],t[3],n),s=aw(t[r-4],t[r-3],t[r-2],t[r-1],t[0],t[1],n),a=j7(t,n);return[i[2],i[3]].concat(a).concat([s[0],s[1],t[r-2],t[r-1],s[2],s[3],i[0],i[1],t[0],t[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:t=this.points();let r=t[0],n=t[0],i=t[1],s=t[1],a,l;for(let d=0;d<t.length/2;d++)a=t[d*2],l=t[d*2+1],r=Math.min(r,a),n=Math.max(n,a),i=Math.min(i,l),s=Math.max(s,l);return{x:r,y:i,width:n-r,height:s-i}}};Ou.Line=Hs;Hs.prototype.className="Line";Hs.prototype._attrsAffectingSize=["points","bezier","tension"];(0,iQ._registerNode)(Hs);Mp.Factory.addGetterSetter(Hs,"closed",!1);Mp.Factory.addGetterSetter(Hs,"bezier",!1);Mp.Factory.addGetterSetter(Hs,"tension",0,(0,GR.getNumberValidator)());Mp.Factory.addGetterSetter(Hs,"points",[],(0,GR.getNumberArrayValidator)());var wl={},$R={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.t2length=e.getQuadraticArcLength=e.getCubicArcLength=e.binomialCoefficients=e.cValues=e.tValues=void 0,e.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],e.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],e.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const t=(a,l,d)=>{let h,f;const g=d/2;h=0;for(let x=0;x<20;x++)f=g*e.tValues[20][x]+g,h+=e.cValues[20][x]*n(a,l,f);return g*h};e.getCubicArcLength=t;const r=(a,l,d)=>{d===void 0&&(d=1);const h=a[0]-2*a[1]+a[2],f=l[0]-2*l[1]+l[2],p=2*a[1]-2*a[0],g=2*l[1]-2*l[0],x=4*(h*h+f*f),w=4*(h*p+f*g),b=p*p+g*g;if(x===0)return d*Math.sqrt(Math.pow(a[2]-a[0],2)+Math.pow(l[2]-l[0],2));const k=w/(2*x),_=b/x,S=d+k,v=_-k*k,j=S*S+v>0?Math.sqrt(S*S+v):0,C=k*k+v>0?Math.sqrt(k*k+v):0,R=k+Math.sqrt(k*k+v)!==0?v*Math.log(Math.abs((S+j)/(k+C))):0;return Math.sqrt(x)/2*(S*j-k*C+R)};e.getQuadraticArcLength=r;function n(a,l,d){const h=i(1,d,a),f=i(1,d,l),p=h*h+f*f;return Math.sqrt(p)}const i=(a,l,d)=>{const h=d.length-1;let f,p;if(h===0)return 0;if(a===0){p=0;for(let g=0;g<=h;g++)p+=e.binomialCoefficients[h][g]*Math.pow(1-l,h-g)*Math.pow(l,g)*d[g];return p}else{f=new Array(h);for(let g=0;g<h;g++)f[g]=h*(d[g+1]-d[g]);return i(a-1,l,f)}},s=(a,l,d)=>{let h=1,f=a/l,p=(a-d(f))/l,g=0;for(;h>.001;){const x=d(f+p),w=Math.abs(a-x)/l;if(w<h)h=w,f+=p;else{const b=d(f-p),k=Math.abs(a-b)/l;k<h?(h=k,f-=p):p/=2}if(g++,g>500)break}return f};e.t2length=s})($R);Object.defineProperty(wl,"__esModule",{value:!0});wl.Path=void 0;const aQ=Me,oQ=zt,lQ=Ae,vo=$R;class Lt extends oQ.Shape{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Lt.parsePathData(this.data()),this.pathLength=Lt.getPathLength(this.dataArray)}_sceneFunc(t){const r=this.dataArray;t.beginPath();let n=!1;for(let b=0;b<r.length;b++){const k=r[b].command,_=r[b].points;switch(k){case"L":t.lineTo(_[0],_[1]);break;case"M":t.moveTo(_[0],_[1]);break;case"C":t.bezierCurveTo(_[0],_[1],_[2],_[3],_[4],_[5]);break;case"Q":t.quadraticCurveTo(_[0],_[1],_[2],_[3]);break;case"A":var i=_[0],s=_[1],a=_[2],l=_[3],d=_[4],h=_[5],f=_[6],p=_[7],g=a>l?a:l,x=a>l?1:a/l,w=a>l?l/a:1;t.translate(i,s),t.rotate(f),t.scale(x,w),t.arc(0,0,g,d,d+h,1-p),t.scale(1/x,1/w),t.rotate(-f),t.translate(-i,-s);break;case"z":n=!0,t.closePath();break}}!n&&!this.hasFill()?t.strokeShape(this):t.fillStrokeShape(this)}getSelfRect(){let t=[];this.dataArray.forEach(function(d){if(d.command==="A"){const h=d.points[4],f=d.points[5],p=d.points[4]+f;let g=Math.PI/180;if(Math.abs(h-p)<g&&(g=Math.abs(h-p)),f<0)for(let x=h-g;x>p;x-=g){const w=Lt.getPointOnEllipticalArc(d.points[0],d.points[1],d.points[2],d.points[3],x,0);t.push(w.x,w.y)}else for(let x=h+g;x<p;x+=g){const w=Lt.getPointOnEllipticalArc(d.points[0],d.points[1],d.points[2],d.points[3],x,0);t.push(w.x,w.y)}}else if(d.command==="C")for(let h=0;h<=1;h+=.01){const f=Lt.getPointOnCubicBezier(h,d.start.x,d.start.y,d.points[0],d.points[1],d.points[2],d.points[3],d.points[4],d.points[5]);t.push(f.x,f.y)}else t=t.concat(d.points)});let r=t[0],n=t[0],i=t[1],s=t[1],a,l;for(let d=0;d<t.length/2;d++)a=t[d*2],l=t[d*2+1],isNaN(a)||(r=Math.min(r,a),n=Math.max(n,a)),isNaN(l)||(i=Math.min(i,l),s=Math.max(s,l));return{x:r,y:i,width:n-r,height:s-i}}getLength(){return this.pathLength}getPointAtLength(t){return Lt.getPointAtLengthOfDataArray(t,this.dataArray)}static getLineLength(t,r,n,i){return Math.sqrt((n-t)*(n-t)+(i-r)*(i-r))}static getPathLength(t){let r=0;for(let n=0;n<t.length;++n)r+=t[n].pathLength;return r}static getPointAtLengthOfDataArray(t,r){let n,i=0,s=r.length;if(!s)return null;for(;i<s&&t>r[i].pathLength;)t-=r[i].pathLength,++i;if(i===s)return n=r[i-1].points.slice(-2),{x:n[0],y:n[1]};if(t<.01)return n=r[i].points.slice(0,2),{x:n[0],y:n[1]};const a=r[i],l=a.points;switch(a.command){case"L":return Lt.getPointOnLine(t,a.start.x,a.start.y,l[0],l[1]);case"C":return Lt.getPointOnCubicBezier((0,vo.t2length)(t,Lt.getPathLength(r),b=>(0,vo.getCubicArcLength)([a.start.x,l[0],l[2],l[4]],[a.start.y,l[1],l[3],l[5]],b)),a.start.x,a.start.y,l[0],l[1],l[2],l[3],l[4],l[5]);case"Q":return Lt.getPointOnQuadraticBezier((0,vo.t2length)(t,Lt.getPathLength(r),b=>(0,vo.getQuadraticArcLength)([a.start.x,l[0],l[2]],[a.start.y,l[1],l[3]],b)),a.start.x,a.start.y,l[0],l[1],l[2],l[3]);case"A":var d=l[0],h=l[1],f=l[2],p=l[3],g=l[4],x=l[5],w=l[6];return g+=x*t/a.pathLength,Lt.getPointOnEllipticalArc(d,h,f,p,g,w)}return null}static getPointOnLine(t,r,n,i,s,a,l){a=a??r,l=l??n;const d=this.getLineLength(r,n,i,s);if(d<1e-10)return{x:r,y:n};if(i===r)return{x:a,y:l+(s>n?t:-t)};const h=(s-n)/(i-r),f=Math.sqrt(t*t/(1+h*h))*(i<r?-1:1),p=h*f;if(Math.abs(l-n-h*(a-r))<1e-10)return{x:a+f,y:l+p};const g=((a-r)*(i-r)+(l-n)*(s-n))/(d*d),x=r+g*(i-r),w=n+g*(s-n),b=this.getLineLength(a,l,x,w),k=Math.sqrt(t*t-b*b),_=Math.sqrt(k*k/(1+h*h))*(i<r?-1:1),S=h*_;return{x:x+_,y:w+S}}static getPointOnCubicBezier(t,r,n,i,s,a,l,d,h){function f(k){return k*k*k}function p(k){return 3*k*k*(1-k)}function g(k){return 3*k*(1-k)*(1-k)}function x(k){return(1-k)*(1-k)*(1-k)}const w=d*f(t)+a*p(t)+i*g(t)+r*x(t),b=h*f(t)+l*p(t)+s*g(t)+n*x(t);return{x:w,y:b}}static getPointOnQuadraticBezier(t,r,n,i,s,a,l){function d(x){return x*x}function h(x){return 2*x*(1-x)}function f(x){return(1-x)*(1-x)}const p=a*d(t)+i*h(t)+r*f(t),g=l*d(t)+s*h(t)+n*f(t);return{x:p,y:g}}static getPointOnEllipticalArc(t,r,n,i,s,a){const l=Math.cos(a),d=Math.sin(a),h={x:n*Math.cos(s),y:i*Math.sin(s)};return{x:t+(h.x*l-h.y*d),y:r+(h.x*d+h.y*l)}}static parsePathData(t){if(!t)return[];let r=t;const n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];r=r.replace(new RegExp(" ","g"),",");for(var i=0;i<n.length;i++)r=r.replace(new RegExp(n[i],"g"),"|"+n[i]);const s=r.split("|"),a=[],l=[];let d=0,h=0;const f=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let p;for(i=1;i<s.length;i++){let A=s[i],O=A.charAt(0);for(A=A.slice(1),l.length=0;p=f.exec(A);)l.push(p[0]);const T=[];for(let I=0,M=l.length;I<M;I++){if(l[I]==="00"){T.push(0,0);continue}const $=parseFloat(l[I]);isNaN($)?T.push(0):T.push($)}for(;T.length>0&&!isNaN(T[0]);){let I="",M=[];const $=d,F=h;var g,x,w,b,k,_,S,v,j,C;switch(O){case"l":d+=T.shift(),h+=T.shift(),I="L",M.push(d,h);break;case"L":d=T.shift(),h=T.shift(),M.push(d,h);break;case"m":var R=T.shift(),L=T.shift();if(d+=R,h+=L,I="M",a.length>2&&a[a.length-1].command==="z"){for(let G=a.length-2;G>=0;G--)if(a[G].command==="M"){d=a[G].points[0]+R,h=a[G].points[1]+L;break}}M.push(d,h),O="l";break;case"M":d=T.shift(),h=T.shift(),I="M",M.push(d,h),O="L";break;case"h":d+=T.shift(),I="L",M.push(d,h);break;case"H":d=T.shift(),I="L",M.push(d,h);break;case"v":h+=T.shift(),I="L",M.push(d,h);break;case"V":h=T.shift(),I="L",M.push(d,h);break;case"C":M.push(T.shift(),T.shift(),T.shift(),T.shift()),d=T.shift(),h=T.shift(),M.push(d,h);break;case"c":M.push(d+T.shift(),h+T.shift(),d+T.shift(),h+T.shift()),d+=T.shift(),h+=T.shift(),I="C",M.push(d,h);break;case"S":x=d,w=h,g=a[a.length-1],g.command==="C"&&(x=d+(d-g.points[2]),w=h+(h-g.points[3])),M.push(x,w,T.shift(),T.shift()),d=T.shift(),h=T.shift(),I="C",M.push(d,h);break;case"s":x=d,w=h,g=a[a.length-1],g.command==="C"&&(x=d+(d-g.points[2]),w=h+(h-g.points[3])),M.push(x,w,d+T.shift(),h+T.shift()),d+=T.shift(),h+=T.shift(),I="C",M.push(d,h);break;case"Q":M.push(T.shift(),T.shift()),d=T.shift(),h=T.shift(),M.push(d,h);break;case"q":M.push(d+T.shift(),h+T.shift()),d+=T.shift(),h+=T.shift(),I="Q",M.push(d,h);break;case"T":x=d,w=h,g=a[a.length-1],g.command==="Q"&&(x=d+(d-g.points[0]),w=h+(h-g.points[1])),d=T.shift(),h=T.shift(),I="Q",M.push(x,w,d,h);break;case"t":x=d,w=h,g=a[a.length-1],g.command==="Q"&&(x=d+(d-g.points[0]),w=h+(h-g.points[1])),d+=T.shift(),h+=T.shift(),I="Q",M.push(x,w,d,h);break;case"A":b=T.shift(),k=T.shift(),_=T.shift(),S=T.shift(),v=T.shift(),j=d,C=h,d=T.shift(),h=T.shift(),I="A",M=this.convertEndpointToCenterParameterization(j,C,d,h,S,v,b,k,_);break;case"a":b=T.shift(),k=T.shift(),_=T.shift(),S=T.shift(),v=T.shift(),j=d,C=h,d+=T.shift(),h+=T.shift(),I="A",M=this.convertEndpointToCenterParameterization(j,C,d,h,S,v,b,k,_);break}a.push({command:I||O,points:M,start:{x:$,y:F},pathLength:this.calcLength($,F,I||O,M)})}(O==="z"||O==="Z")&&a.push({command:"z",points:[],start:void 0,pathLength:0})}return a}static calcLength(t,r,n,i){let s,a,l,d;const h=Lt;switch(n){case"L":return h.getLineLength(t,r,i[0],i[1]);case"C":return(0,vo.getCubicArcLength)([t,i[0],i[2],i[4]],[r,i[1],i[3],i[5]],1);case"Q":return(0,vo.getQuadraticArcLength)([t,i[0],i[2]],[r,i[1],i[3]],1);case"A":s=0;var f=i[4],p=i[5],g=i[4]+p,x=Math.PI/180;if(Math.abs(f-g)<x&&(x=Math.abs(f-g)),a=h.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],f,0),p<0)for(d=f-x;d>g;d-=x)l=h.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],d,0),s+=h.getLineLength(a.x,a.y,l.x,l.y),a=l;else for(d=f+x;d<g;d+=x)l=h.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],d,0),s+=h.getLineLength(a.x,a.y,l.x,l.y),a=l;return l=h.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],g,0),s+=h.getLineLength(a.x,a.y,l.x,l.y),s}return 0}static convertEndpointToCenterParameterization(t,r,n,i,s,a,l,d,h){const f=h*(Math.PI/180),p=Math.cos(f)*(t-n)/2+Math.sin(f)*(r-i)/2,g=-1*Math.sin(f)*(t-n)/2+Math.cos(f)*(r-i)/2,x=p*p/(l*l)+g*g/(d*d);x>1&&(l*=Math.sqrt(x),d*=Math.sqrt(x));let w=Math.sqrt((l*l*(d*d)-l*l*(g*g)-d*d*(p*p))/(l*l*(g*g)+d*d*(p*p)));s===a&&(w*=-1),isNaN(w)&&(w=0);const b=w*l*g/d,k=w*-d*p/l,_=(t+n)/2+Math.cos(f)*b-Math.sin(f)*k,S=(r+i)/2+Math.sin(f)*b+Math.cos(f)*k,v=function(T){return Math.sqrt(T[0]*T[0]+T[1]*T[1])},j=function(T,I){return(T[0]*I[0]+T[1]*I[1])/(v(T)*v(I))},C=function(T,I){return(T[0]*I[1]<T[1]*I[0]?-1:1)*Math.acos(j(T,I))},R=C([1,0],[(p-b)/l,(g-k)/d]),L=[(p-b)/l,(g-k)/d],A=[(-1*p-b)/l,(-1*g-k)/d];let O=C(L,A);return j(L,A)<=-1&&(O=Math.PI),j(L,A)>=1&&(O=0),a===0&&O>0&&(O=O-2*Math.PI),a===1&&O<0&&(O=O+2*Math.PI),[_,S,l,d,R,O,f,a]}}wl.Path=Lt;Lt.prototype.className="Path";Lt.prototype._attrsAffectingSize=["data"];(0,lQ._registerNode)(Lt);aQ.Factory.addGetterSetter(Lt,"data");Object.defineProperty(Ip,"__esModule",{value:!0});Ip.Arrow=void 0;const Fp=Me,cQ=Ou,BR=je,uQ=Ae,k7=wl;class qa extends cQ.Line{_sceneFunc(t){super._sceneFunc(t);const r=Math.PI*2,n=this.points();let i=n;const s=this.tension()!==0&&n.length>4;s&&(i=this.getTensionPoints());const a=this.pointerLength(),l=n.length;let d,h;if(s){const g=[i[i.length-4],i[i.length-3],i[i.length-2],i[i.length-1],n[l-2],n[l-1]],x=k7.Path.calcLength(i[i.length-4],i[i.length-3],"C",g),w=k7.Path.getPointOnQuadraticBezier(Math.min(1,1-a/x),g[0],g[1],g[2],g[3],g[4],g[5]);d=n[l-2]-w.x,h=n[l-1]-w.y}else d=n[l-2]-n[l-4],h=n[l-1]-n[l-3];const f=(Math.atan2(h,d)+r)%r,p=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(n[l-2],n[l-1]),t.rotate(f),t.moveTo(0,0),t.lineTo(-a,p/2),t.lineTo(-a,-p/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(n[0],n[1]),s?(d=(i[0]+i[2])/2-n[0],h=(i[1]+i[3])/2-n[1]):(d=n[2]-n[0],h=n[3]-n[1]),t.rotate((Math.atan2(-h,-d)+r)%r),t.moveTo(0,0),t.lineTo(-a,p/2),t.lineTo(-a,-p/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){const r=this.dashEnabled();r&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),r&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),r=this.pointerWidth()/2;return{x:t.x-r,y:t.y-r,width:t.width+r*2,height:t.height+r*2}}}Ip.Arrow=qa;qa.prototype.className="Arrow";(0,uQ._registerNode)(qa);Fp.Factory.addGetterSetter(qa,"pointerLength",10,(0,BR.getNumberValidator)());Fp.Factory.addGetterSetter(qa,"pointerWidth",10,(0,BR.getNumberValidator)());Fp.Factory.addGetterSetter(qa,"pointerAtBeginning",!1);Fp.Factory.addGetterSetter(qa,"pointerAtEnding",!0);var Lp={};Object.defineProperty(Lp,"__esModule",{value:!0});Lp.Circle=void 0;const dQ=Me,hQ=zt,fQ=je,pQ=Ae;class _l extends hQ.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}}Lp.Circle=_l;_l.prototype._centroid=!0;_l.prototype.className="Circle";_l.prototype._attrsAffectingSize=["radius"];(0,pQ._registerNode)(_l);dQ.Factory.addGetterSetter(_l,"radius",0,(0,fQ.getNumberValidator)());var Op={};Object.defineProperty(Op,"__esModule",{value:!0});Op.Ellipse=void 0;const r3=Me,mQ=zt,qR=je,gQ=Ae;class Ws extends mQ.Shape{_sceneFunc(t){const r=this.radiusX(),n=this.radiusY();t.beginPath(),t.save(),r!==n&&t.scale(1,n/r),t.arc(0,0,r,0,Math.PI*2,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}Op.Ellipse=Ws;Ws.prototype.className="Ellipse";Ws.prototype._centroid=!0;Ws.prototype._attrsAffectingSize=["radiusX","radiusY"];(0,gQ._registerNode)(Ws);r3.Factory.addComponentsGetterSetter(Ws,"radius",["x","y"]);r3.Factory.addGetterSetter(Ws,"radiusX",0,(0,qR.getNumberValidator)());r3.Factory.addGetterSetter(Ws,"radiusY",0,(0,qR.getNumberValidator)());var Dp={};Object.defineProperty(Dp,"__esModule",{value:!0});Dp.Image=void 0;const R2=yt,Va=Me,xQ=zt,vQ=Ae,Du=je;let ci=class VR extends xQ.Shape{constructor(t){super(t),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&t.readyState===4||t&&t.addEventListener&&t.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){const t=!!this.cornerRadius(),r=this.hasShadow();return t&&r?!0:super._useBufferCanvas(!0)}_sceneFunc(t){const r=this.getWidth(),n=this.getHeight(),i=this.cornerRadius(),s=this.attrs.image;let a;if(s){const l=this.attrs.cropWidth,d=this.attrs.cropHeight;l&&d?a=[s,this.cropX(),this.cropY(),l,d,0,0,r,n]:a=[s,0,0,r,n]}(this.hasFill()||this.hasStroke()||i)&&(t.beginPath(),i?R2.Util.drawRoundedRectPath(t,r,n,i):t.rect(0,0,r,n),t.closePath(),t.fillStrokeShape(this)),s&&(i&&t.clip(),t.drawImage.apply(t,a))}_hitFunc(t){const r=this.width(),n=this.height(),i=this.cornerRadius();t.beginPath(),i?R2.Util.drawRoundedRectPath(t,r,n,i):t.rect(0,0,r,n),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,r;return(t=this.attrs.width)!==null&&t!==void 0?t:(r=this.image())===null||r===void 0?void 0:r.width}getHeight(){var t,r;return(t=this.attrs.height)!==null&&t!==void 0?t:(r=this.image())===null||r===void 0?void 0:r.height}static fromURL(t,r,n=null){const i=R2.Util.createImageElement();i.onload=function(){const s=new VR({image:i});r(s)},i.onerror=n,i.crossOrigin="Anonymous",i.src=t}};Dp.Image=ci;ci.prototype.className="Image";(0,vQ._registerNode)(ci);Va.Factory.addGetterSetter(ci,"cornerRadius",0,(0,Du.getNumberOrArrayOfNumbersValidator)(4));Va.Factory.addGetterSetter(ci,"image");Va.Factory.addComponentsGetterSetter(ci,"crop",["x","y","width","height"]);Va.Factory.addGetterSetter(ci,"cropX",0,(0,Du.getNumberValidator)());Va.Factory.addGetterSetter(ci,"cropY",0,(0,Du.getNumberValidator)());Va.Factory.addGetterSetter(ci,"cropWidth",0,(0,Du.getNumberValidator)());Va.Factory.addGetterSetter(ci,"cropHeight",0,(0,Du.getNumberValidator)());var il={};Object.defineProperty(il,"__esModule",{value:!0});il.Tag=il.Label=void 0;const zp=Me,yQ=zt,bQ=yl,n3=je,HR=Ae,WR=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],wQ="Change.konva",_Q="none",ow="up",lw="right",cw="down",uw="left",NQ=WR.length;class i3 extends bQ.Group{constructor(t){super(t),this.on("add.konva",function(r){this._addListeners(r.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){let r=this,n;const i=function(){r._sync()};for(n=0;n<NQ;n++)t.on(WR[n]+wQ,i)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let t=this.getText(),r=this.getTag(),n,i,s,a,l,d,h;if(t&&r){switch(n=t.width(),i=t.height(),s=r.pointerDirection(),a=r.pointerWidth(),h=r.pointerHeight(),l=0,d=0,s){case ow:l=n/2,d=-1*h;break;case lw:l=n+a,d=i/2;break;case cw:l=n/2,d=i+h;break;case uw:l=-1*a,d=i/2;break}r.setAttrs({x:-1*l,y:-1*d,width:n,height:i}),t.setAttrs({x:-1*l,y:-1*d})}}}il.Label=i3;i3.prototype.className="Label";(0,HR._registerNode)(i3);class Ha extends yQ.Shape{_sceneFunc(t){const r=this.width(),n=this.height(),i=this.pointerDirection(),s=this.pointerWidth(),a=this.pointerHeight(),l=this.cornerRadius();let d=0,h=0,f=0,p=0;typeof l=="number"?d=h=f=p=Math.min(l,r/2,n/2):(d=Math.min(l[0]||0,r/2,n/2),h=Math.min(l[1]||0,r/2,n/2),p=Math.min(l[2]||0,r/2,n/2),f=Math.min(l[3]||0,r/2,n/2)),t.beginPath(),t.moveTo(d,0),i===ow&&(t.lineTo((r-s)/2,0),t.lineTo(r/2,-1*a),t.lineTo((r+s)/2,0)),t.lineTo(r-h,0),t.arc(r-h,h,h,Math.PI*3/2,0,!1),i===lw&&(t.lineTo(r,(n-a)/2),t.lineTo(r+s,n/2),t.lineTo(r,(n+a)/2)),t.lineTo(r,n-p),t.arc(r-p,n-p,p,0,Math.PI/2,!1),i===cw&&(t.lineTo((r+s)/2,n),t.lineTo(r/2,n+a),t.lineTo((r-s)/2,n)),t.lineTo(f,n),t.arc(f,n-f,f,Math.PI/2,Math.PI,!1),i===uw&&(t.lineTo(0,(n+a)/2),t.lineTo(-1*s,n/2),t.lineTo(0,(n-a)/2)),t.lineTo(0,d),t.arc(d,d,d,Math.PI,Math.PI*3/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){let t=0,r=0,n=this.pointerWidth(),i=this.pointerHeight(),s=this.pointerDirection(),a=this.width(),l=this.height();return s===ow?(r-=i,l+=i):s===cw?l+=i:s===uw?(t-=n*1.5,a+=n):s===lw&&(a+=n*1.5),{x:t,y:r,width:a,height:l}}}il.Tag=Ha;Ha.prototype.className="Tag";(0,HR._registerNode)(Ha);zp.Factory.addGetterSetter(Ha,"pointerDirection",_Q);zp.Factory.addGetterSetter(Ha,"pointerWidth",0,(0,n3.getNumberValidator)());zp.Factory.addGetterSetter(Ha,"pointerHeight",0,(0,n3.getNumberValidator)());zp.Factory.addGetterSetter(Ha,"cornerRadius",0,(0,n3.getNumberOrArrayOfNumbersValidator)(4));var zu={};Object.defineProperty(zu,"__esModule",{value:!0});zu.Rect=void 0;const SQ=Me,jQ=zt,kQ=Ae,CQ=yt,EQ=je;let Up=class extends jQ.Shape{_sceneFunc(t){const r=this.cornerRadius(),n=this.width(),i=this.height();t.beginPath(),r?CQ.Util.drawRoundedRectPath(t,n,i,r):t.rect(0,0,n,i),t.closePath(),t.fillStrokeShape(this)}};zu.Rect=Up;Up.prototype.className="Rect";(0,kQ._registerNode)(Up);SQ.Factory.addGetterSetter(Up,"cornerRadius",0,(0,EQ.getNumberOrArrayOfNumbersValidator)(4));var Gp={};Object.defineProperty(Gp,"__esModule",{value:!0});Gp.RegularPolygon=void 0;const KR=Me,TQ=zt,YR=je,PQ=Ae;class Wa extends TQ.Shape{_sceneFunc(t){const r=this._getPoints();t.beginPath(),t.moveTo(r[0].x,r[0].y);for(let n=1;n<r.length;n++)t.lineTo(r[n].x,r[n].y);t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,r=this.attrs.radius||0,n=[];for(let i=0;i<t;i++)n.push({x:r*Math.sin(i*2*Math.PI/t),y:-1*r*Math.cos(i*2*Math.PI/t)});return n}getSelfRect(){const t=this._getPoints();let r=t[0].x,n=t[0].y,i=t[0].x,s=t[0].y;return t.forEach(a=>{r=Math.min(r,a.x),n=Math.max(n,a.x),i=Math.min(i,a.y),s=Math.max(s,a.y)}),{x:r,y:i,width:n-r,height:s-i}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}Gp.RegularPolygon=Wa;Wa.prototype.className="RegularPolygon";Wa.prototype._centroid=!0;Wa.prototype._attrsAffectingSize=["radius"];(0,PQ._registerNode)(Wa);KR.Factory.addGetterSetter(Wa,"radius",0,(0,YR.getNumberValidator)());KR.Factory.addGetterSetter(Wa,"sides",0,(0,YR.getNumberValidator)());var $p={};Object.defineProperty($p,"__esModule",{value:!0});$p.Ring=void 0;const XR=Me,RQ=zt,QR=je,AQ=Ae,C7=Math.PI*2;class Ka extends RQ.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,C7,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),C7,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}$p.Ring=Ka;Ka.prototype.className="Ring";Ka.prototype._centroid=!0;Ka.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,AQ._registerNode)(Ka);XR.Factory.addGetterSetter(Ka,"innerRadius",0,(0,QR.getNumberValidator)());XR.Factory.addGetterSetter(Ka,"outerRadius",0,(0,QR.getNumberValidator)());var Bp={};Object.defineProperty(Bp,"__esModule",{value:!0});Bp.Sprite=void 0;const Ya=Me,IQ=zt,MQ=bl,ZR=je,FQ=Ae;class ui extends IQ.Shape{constructor(t){super(t),this._updated=!0,this.anim=new MQ.Animation(()=>{const r=this._updated;return this._updated=!1,r}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(t){const r=this.animation(),n=this.frameIndex(),i=n*4,s=this.animations()[r],a=this.frameOffsets(),l=s[i+0],d=s[i+1],h=s[i+2],f=s[i+3],p=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,h,f),t.closePath(),t.fillStrokeShape(this)),p)if(a){const g=a[r],x=n*2;t.drawImage(p,l,d,h,f,g[x+0],g[x+1],h,f)}else t.drawImage(p,l,d,h,f,0,0,h,f)}_hitFunc(t){const r=this.animation(),n=this.frameIndex(),i=n*4,s=this.animations()[r],a=this.frameOffsets(),l=s[i+2],d=s[i+3];if(t.beginPath(),a){const h=a[r],f=n*2;t.rect(h[f+0],h[f+1],l,d)}else t.rect(0,0,l,d);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const t=this.frameIndex(),r=this.animation(),n=this.animations(),i=n[r],s=i.length/4;t<s-1?this.frameIndex(t+1):this.frameIndex(0)}}Bp.Sprite=ui;ui.prototype.className="Sprite";(0,FQ._registerNode)(ui);Ya.Factory.addGetterSetter(ui,"animation");Ya.Factory.addGetterSetter(ui,"animations");Ya.Factory.addGetterSetter(ui,"frameOffsets");Ya.Factory.addGetterSetter(ui,"image");Ya.Factory.addGetterSetter(ui,"frameIndex",0,(0,ZR.getNumberValidator)());Ya.Factory.addGetterSetter(ui,"frameRate",17,(0,ZR.getNumberValidator)());Ya.Factory.backCompat(ui,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var qp={};Object.defineProperty(qp,"__esModule",{value:!0});qp.Star=void 0;const s3=Me,LQ=zt,a3=je,OQ=Ae;class Ks extends LQ.Shape{_sceneFunc(t){const r=this.innerRadius(),n=this.outerRadius(),i=this.numPoints();t.beginPath(),t.moveTo(0,0-n);for(let s=1;s<i*2;s++){const a=s%2===0?n:r,l=a*Math.sin(s*Math.PI/i),d=-1*a*Math.cos(s*Math.PI/i);t.lineTo(l,d)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}qp.Star=Ks;Ks.prototype.className="Star";Ks.prototype._centroid=!0;Ks.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,OQ._registerNode)(Ks);s3.Factory.addGetterSetter(Ks,"numPoints",5,(0,a3.getNumberValidator)());s3.Factory.addGetterSetter(Ks,"innerRadius",0,(0,a3.getNumberValidator)());s3.Factory.addGetterSetter(Ks,"outerRadius",0,(0,a3.getNumberValidator)());var Nl={};Object.defineProperty(Nl,"__esModule",{value:!0});Nl.Text=void 0;Nl.stringToArray=JR;const dw=yt,fr=Me,DQ=zt,A2=Ae,Ys=je,zQ=Ae;function JR(e){return[...e].reduce((t,r,n,i)=>(/\p{Emoji_Modifier_Base}\p{Emoji_Modifier}?(?:\u200D\p{Emoji_Presentation})+/u.test(r)?t.push(r):/\p{Regional_Indicator}{2}/u.test(r+(i[n+1]||""))?t.push(r+i[n+1]):n>0&&/\p{Mn}|\p{Me}|\p{Mc}/u.test(r)?t[t.length-1]+=r:t.push(r),t),[])}const yo="auto",UQ="center",eA="inherit",mc="justify",GQ="Change.konva",$Q="2d",E7="-",tA="left",BQ="text",qQ="Text",VQ="top",HQ="bottom",T7="middle",rA="normal",WQ="px ",yh=" ",KQ="right",P7="rtl",YQ="word",XQ="char",R7="none",I2="",nA=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],QQ=nA.length;function ZQ(e){return e.split(",").map(t=>{t=t.trim();const r=t.indexOf(" ")>=0,n=t.indexOf('"')>=0||t.indexOf("'")>=0;return r&&!n&&(t=`"${t}"`),t}).join(", ")}let bh;function M2(){return bh||(bh=dw.Util.createCanvasElement().getContext($Q),bh)}function JQ(e){e.fillText(this._partialText,this._partialTextX,this._partialTextY)}function eZ(e){e.setAttr("miterLimit",2),e.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function tZ(e){return e=e||{},!e.fillLinearGradientColorStops&&!e.fillRadialGradientColorStops&&!e.fillPatternImage&&(e.fill=e.fill||"black"),e}let jt=class extends DQ.Shape{constructor(t){super(tZ(t)),this._partialTextX=0,this._partialTextY=0;for(let r=0;r<QQ;r++)this.on(nA[r]+GQ,this._setTextData);this._setTextData()}_sceneFunc(t){const r=this.textArr,n=r.length;if(!this.text())return;let i=this.padding(),s=this.fontSize(),a=this.lineHeight()*s,l=this.verticalAlign(),d=this.direction(),h=0,f=this.align(),p=this.getWidth(),g=this.letterSpacing(),x=this.fill(),w=this.textDecoration(),b=w.indexOf("underline")!==-1,k=w.indexOf("line-through")!==-1,_;d=d===eA?t.direction:d;let S=a/2,v=T7;if(A2.Konva._fixTextRendering){const $=this.measureSize("M");v="alphabetic",S=($.fontBoundingBoxAscent-$.fontBoundingBoxDescent)/2+a/2}var j=0,C=0;for(d===P7&&t.setAttr("direction",d),t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",v),t.setAttr("textAlign",tA),l===T7?h=(this.getHeight()-n*a-i*2)/2:l===HQ&&(h=this.getHeight()-n*a-i*2),t.translate(i,h+i),_=0;_<n;_++){var j=0,C=0,R=r[_],L=R.text,A=R.width,O=R.lastInParagraph,T,I,M;if(t.save(),f===KQ?j+=p-A-i*2:f===UQ&&(j+=(p-A-i*2)/2),b){t.save(),t.beginPath();const G=A2.Konva._fixTextRendering?Math.round(s/4):Math.round(s/2),B=j,Y=S+C+G;t.moveTo(B,Y),T=L.split(" ").length-1,I=T===0,M=f===mc&&!O?p-i*2:A,t.lineTo(B+Math.round(M),Y),t.lineWidth=s/15;const K=this._getLinearGradient();t.strokeStyle=K||x,t.stroke(),t.restore()}if(k){t.save(),t.beginPath();const G=A2.Konva._fixTextRendering?-Math.round(s/4):0;t.moveTo(j,S+C+G),T=L.split(" ").length-1,I=T===0,M=f===mc&&O&&!I?p-i*2:A,t.lineTo(j+Math.round(M),S+C+G),t.lineWidth=s/15;const B=this._getLinearGradient();t.strokeStyle=B||x,t.stroke(),t.restore()}if(d!==P7&&(g!==0||f===mc)){T=L.split(" ").length-1;const G=JR(L);for(let B=0;B<G.length;B++){const Y=G[B];Y===" "&&!O&&f===mc&&(j+=(p-i*2-A)/T),this._partialTextX=j,this._partialTextY=S+C,this._partialText=Y,t.fillStrokeShape(this),j+=this.measureSize(Y).width+g}}else g!==0&&t.setAttr("letterSpacing",`${g}px`),this._partialTextX=j,this._partialTextY=S+C,this._partialText=L,t.fillStrokeShape(this);t.restore(),n>1&&(S+=a)}}_hitFunc(t){const r=this.getWidth(),n=this.getHeight();t.beginPath(),t.rect(0,0,r,n),t.closePath(),t.fillStrokeShape(this)}setText(t){const r=dw.Util._isString(t)?t:t==null?"":t+"";return this._setAttr(BQ,r),this}getWidth(){return this.attrs.width===yo||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===yo||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return dw.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var r,n,i,s,a,l,d,h,f,p,g;let x=M2(),w=this.fontSize(),b;x.save(),x.font=this._getContextFont(),b=x.measureText(t),x.restore();const k=w/100;return{actualBoundingBoxAscent:(r=b.actualBoundingBoxAscent)!==null&&r!==void 0?r:71.58203125*k,actualBoundingBoxDescent:(n=b.actualBoundingBoxDescent)!==null&&n!==void 0?n:0,actualBoundingBoxLeft:(i=b.actualBoundingBoxLeft)!==null&&i!==void 0?i:-7.421875*k,actualBoundingBoxRight:(s=b.actualBoundingBoxRight)!==null&&s!==void 0?s:75.732421875*k,alphabeticBaseline:(a=b.alphabeticBaseline)!==null&&a!==void 0?a:0,emHeightAscent:(l=b.emHeightAscent)!==null&&l!==void 0?l:100*k,emHeightDescent:(d=b.emHeightDescent)!==null&&d!==void 0?d:-20*k,fontBoundingBoxAscent:(h=b.fontBoundingBoxAscent)!==null&&h!==void 0?h:91*k,fontBoundingBoxDescent:(f=b.fontBoundingBoxDescent)!==null&&f!==void 0?f:21*k,hangingBaseline:(p=b.hangingBaseline)!==null&&p!==void 0?p:72.80000305175781*k,ideographicBaseline:(g=b.ideographicBaseline)!==null&&g!==void 0?g:-21*k,width:b.width,height:w}}_getContextFont(){return this.fontStyle()+yh+this.fontVariant()+yh+(this.fontSize()+WQ)+ZQ(this.fontFamily())}_addTextLine(t){this.align()===mc&&(t=t.trim());const n=this._getTextWidth(t);return this.textArr.push({text:t,width:n,lastInParagraph:!1})}_getTextWidth(t){const r=this.letterSpacing(),n=t.length;return M2().measureText(t).width+(n?r*(n-1):0)}_setTextData(){let t=this.text().split(`
`),r=+this.fontSize(),n=0,i=this.lineHeight()*r,s=this.attrs.width,a=this.attrs.height,l=s!==yo&&s!==void 0,d=a!==yo&&a!==void 0,h=this.padding(),f=s-h*2,p=a-h*2,g=0,x=this.wrap(),w=x!==R7,b=x!==XQ&&w,k=this.ellipsis();this.textArr=[],M2().font=this._getContextFont();const _=k?this._getTextWidth(I2):0;for(let v=0,j=t.length;v<j;++v){let C=t[v],R=this._getTextWidth(C);if(l&&R>f)for(;C.length>0;){let L=0,A=C.length,O="",T=0;for(;L<A;){const I=L+A>>>1,M=C.slice(0,I+1),$=this._getTextWidth(M)+_;$<=f?(L=I+1,O=M,T=$):A=I}if(O){if(b){var S;const M=C[O.length];(M===yh||M===E7)&&T<=f?S=O.length:S=Math.max(O.lastIndexOf(yh),O.lastIndexOf(E7))+1,S>0&&(L=S,O=O.slice(0,L),T=this._getTextWidth(O))}if(O=O.trimRight(),this._addTextLine(O),n=Math.max(n,T),g+=i,this._shouldHandleEllipsis(g)){this._tryToAddEllipsisToLastLine();break}if(C=C.slice(L),C=C.trimLeft(),C.length>0&&(R=this._getTextWidth(C),R<=f)){this._addTextLine(C),g+=i,n=Math.max(n,R);break}}else break}else this._addTextLine(C),g+=i,n=Math.max(n,R),this._shouldHandleEllipsis(g)&&v<j-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),d&&g+i>p)break}this.textHeight=r,this.textWidth=n}_shouldHandleEllipsis(t){const r=+this.fontSize(),n=this.lineHeight()*r,i=this.attrs.height,s=i!==yo&&i!==void 0,a=this.padding(),l=i-a*2;return!(this.wrap()!==R7)||s&&t+n>l}_tryToAddEllipsisToLastLine(){const t=this.attrs.width,r=t!==yo&&t!==void 0,n=this.padding(),i=t-n*2,s=this.ellipsis(),a=this.textArr[this.textArr.length-1];!a||!s||(r&&(this._getTextWidth(a.text+I2)<i||(a.text=a.text.slice(0,a.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(a.text+I2))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const t=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,r=this.hasShadow();return t&&r?!0:super._useBufferCanvas()}};Nl.Text=jt;jt.prototype._fillFunc=JQ;jt.prototype._strokeFunc=eZ;jt.prototype.className=qQ;jt.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];(0,zQ._registerNode)(jt);fr.Factory.overWriteSetter(jt,"width",(0,Ys.getNumberOrAutoValidator)());fr.Factory.overWriteSetter(jt,"height",(0,Ys.getNumberOrAutoValidator)());fr.Factory.addGetterSetter(jt,"direction",eA);fr.Factory.addGetterSetter(jt,"fontFamily","Arial");fr.Factory.addGetterSetter(jt,"fontSize",12,(0,Ys.getNumberValidator)());fr.Factory.addGetterSetter(jt,"fontStyle",rA);fr.Factory.addGetterSetter(jt,"fontVariant",rA);fr.Factory.addGetterSetter(jt,"padding",0,(0,Ys.getNumberValidator)());fr.Factory.addGetterSetter(jt,"align",tA);fr.Factory.addGetterSetter(jt,"verticalAlign",VQ);fr.Factory.addGetterSetter(jt,"lineHeight",1,(0,Ys.getNumberValidator)());fr.Factory.addGetterSetter(jt,"wrap",YQ);fr.Factory.addGetterSetter(jt,"ellipsis",!1,(0,Ys.getBooleanValidator)());fr.Factory.addGetterSetter(jt,"letterSpacing",0,(0,Ys.getNumberValidator)());fr.Factory.addGetterSetter(jt,"text","",(0,Ys.getStringValidator)());fr.Factory.addGetterSetter(jt,"textDecoration","");var Vp={};Object.defineProperty(Vp,"__esModule",{value:!0});Vp.TextPath=void 0;const F2=yt,Un=Me,rZ=zt,gc=wl,L2=Nl,iA=je,nZ=Ae,iZ="",sA="normal";function aA(e){e.fillText(this.partialText,0,0)}function oA(e){e.strokeText(this.partialText,0,0)}class Ut extends rZ.Shape{constructor(t){super(t),this.dummyCanvas=F2.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return gc.Path.getPathLength(this.dataArray)}_getPointAtLength(t){if(!this.attrs.data)return null;const r=this.pathLength;return t-1>r?null:gc.Path.getPointAtLengthOfDataArray(t,this.dataArray)}_readDataAttribute(){this.dataArray=gc.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();const r=this.textDecoration(),n=this.fill(),i=this.fontSize(),s=this.glyphInfo;r==="underline"&&t.beginPath();for(let a=0;a<s.length;a++){t.save();const l=s[a].p0;t.translate(l.x,l.y),t.rotate(s[a].rotation),this.partialText=s[a].text,t.fillStrokeShape(this),r==="underline"&&(a===0&&t.moveTo(0,i/2+1),t.lineTo(i,i/2+1)),t.restore()}r==="underline"&&(t.strokeStyle=n,t.lineWidth=i/20,t.stroke()),t.restore()}_hitFunc(t){t.beginPath();const r=this.glyphInfo;if(r.length>=1){const n=r[0].p0;t.moveTo(n.x,n.y)}for(let n=0;n<r.length;n++){const i=r[n].p1;t.lineTo(i.x,i.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return F2.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return L2.Text.prototype.setText.call(this,t)}_getContextFont(){return L2.Text.prototype._getContextFont.call(this)}_getTextSize(t){const n=this.dummyCanvas.getContext("2d");n.save(),n.font=this._getContextFont();const i=n.measureText(t);return n.restore(),{width:i.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:t,height:r}=this._getTextSize(this.attrs.text);if(this.textWidth=t,this.textHeight=r,this.glyphInfo=[],!this.attrs.data)return null;const n=this.letterSpacing(),i=this.align(),s=this.kerningFunc(),a=Math.max(this.textWidth+((this.attrs.text||"").length-1)*n,0);let l=0;i==="center"&&(l=Math.max(0,this.pathLength/2-a/2)),i==="right"&&(l=Math.max(0,this.pathLength-a));const d=(0,L2.stringToArray)(this.text());let h=l;for(let f=0;f<d.length;f++){const p=this._getPointAtLength(h);if(!p)return;let g=this._getTextSize(d[f]).width+n;if(d[f]===" "&&i==="justify"){const S=this.text().split(" ").length-1;g+=(this.pathLength-a)/S}const x=this._getPointAtLength(h+g);if(!x)return;const w=gc.Path.getLineLength(p.x,p.y,x.x,x.y);let b=0;if(s)try{b=s(d[f-1],d[f])*this.fontSize()}catch{b=0}p.x+=b,x.x+=b,this.textWidth+=b;const k=gc.Path.getPointOnLine(b+w/2,p.x,p.y,x.x,x.y),_=Math.atan2(x.y-p.y,x.x-p.x);this.glyphInfo.push({transposeX:k.x,transposeY:k.y,text:d[f],rotation:_,p0:p,p1:x}),h+=g}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const t=[];this.glyphInfo.forEach(function(h){t.push(h.p0.x),t.push(h.p0.y),t.push(h.p1.x),t.push(h.p1.y)});let r=t[0]||0,n=t[0]||0,i=t[1]||0,s=t[1]||0,a,l;for(let h=0;h<t.length/2;h++)a=t[h*2],l=t[h*2+1],r=Math.min(r,a),n=Math.max(n,a),i=Math.min(i,l),s=Math.max(s,l);const d=this.fontSize();return{x:r-d/2,y:i-d/2,width:n-r+d,height:s-i+d}}destroy(){return F2.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}Vp.TextPath=Ut;Ut.prototype._fillFunc=aA;Ut.prototype._strokeFunc=oA;Ut.prototype._fillFuncHit=aA;Ut.prototype._strokeFuncHit=oA;Ut.prototype.className="TextPath";Ut.prototype._attrsAffectingSize=["text","fontSize","data"];(0,nZ._registerNode)(Ut);Un.Factory.addGetterSetter(Ut,"data");Un.Factory.addGetterSetter(Ut,"fontFamily","Arial");Un.Factory.addGetterSetter(Ut,"fontSize",12,(0,iA.getNumberValidator)());Un.Factory.addGetterSetter(Ut,"fontStyle",sA);Un.Factory.addGetterSetter(Ut,"align","left");Un.Factory.addGetterSetter(Ut,"letterSpacing",0,(0,iA.getNumberValidator)());Un.Factory.addGetterSetter(Ut,"textBaseline","middle");Un.Factory.addGetterSetter(Ut,"fontVariant",sA);Un.Factory.addGetterSetter(Ut,"text",iZ);Un.Factory.addGetterSetter(Ut,"textDecoration",null);Un.Factory.addGetterSetter(Ut,"kerningFunc",null);var Hp={};Object.defineProperty(Hp,"__esModule",{value:!0});Hp.Transformer=void 0;const Qe=yt,We=Me,A7=dt,sZ=zt,aZ=zu,I7=yl,kn=Ae,Xs=je,oZ=Ae,lA="tr-konva",lZ=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(e=>e+`.${lA}`).join(" "),M7="nodesRect",cZ=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],uZ={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},dZ="ontouchstart"in kn.Konva._global;function hZ(e,t,r){if(e==="rotater")return r;t+=Qe.Util.degToRad(uZ[e]||0);const n=(Qe.Util.radToDeg(t)%360+360)%360;return Qe.Util._inRange(n,315+22.5,360)||Qe.Util._inRange(n,0,22.5)?"ns-resize":Qe.Util._inRange(n,45-22.5,45+22.5)?"nesw-resize":Qe.Util._inRange(n,90-22.5,90+22.5)?"ew-resize":Qe.Util._inRange(n,135-22.5,135+22.5)?"nwse-resize":Qe.Util._inRange(n,180-22.5,180+22.5)?"ns-resize":Qe.Util._inRange(n,225-22.5,225+22.5)?"nesw-resize":Qe.Util._inRange(n,270-22.5,270+22.5)?"ew-resize":Qe.Util._inRange(n,315-22.5,315+22.5)?"nwse-resize":(Qe.Util.error("Transformer has unknown angle for cursor detection: "+n),"pointer")}const Pf=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],F7=1e8;function fZ(e){return{x:e.x+e.width/2*Math.cos(e.rotation)+e.height/2*Math.sin(-e.rotation),y:e.y+e.height/2*Math.cos(e.rotation)+e.width/2*Math.sin(e.rotation)}}function cA(e,t,r){const n=r.x+(e.x-r.x)*Math.cos(t)-(e.y-r.y)*Math.sin(t),i=r.y+(e.x-r.x)*Math.sin(t)+(e.y-r.y)*Math.cos(t);return{...e,rotation:e.rotation+t,x:n,y:i}}function pZ(e,t){const r=fZ(e);return cA(e,t,r)}function mZ(e,t,r){let n=t;for(let i=0;i<e.length;i++){const s=kn.Konva.getAngle(e[i]),a=Math.abs(s-t)%(Math.PI*2);Math.min(a,Math.PI*2-a)<r&&(n=s)}return n}let hw=0,Ge=class extends I7.Group{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(lZ,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return Qe.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return lA+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const r=t.filter(i=>i.isAncestorOf(this)?(Qe.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=t=r,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(i=>{const s=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},a=i._attrsAffectingSize.map(l=>l+"Change."+this._getEventNamespace()).join(" ");i.on(a,s),i.on(cZ.map(l=>l+`.${this._getEventNamespace()}`).join(" "),s),i.on(`absoluteTransformChange.${this._getEventNamespace()}`,s),this._proxyDrag(i)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(t){let r;t.on(`dragstart.${this._getEventNamespace()}`,n=>{r=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(n,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,n=>{if(!r)return;const i=t.getAbsolutePosition(),s=i.x-r.x,a=i.y-r.y;this.nodes().forEach(l=>{if(l===t||l.isDragging())return;const d=l.getAbsolutePosition();l.setAbsolutePosition({x:d.x+s,y:d.y+a}),l.startDrag(n)}),r=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(M7),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(M7,this.__getNodeRect)}__getNodeShape(t,r=this.rotation(),n){const i=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),s=t.getAbsoluteScale(n),a=t.getAbsolutePosition(n),l=i.x*s.x-t.offsetX()*s.x,d=i.y*s.y-t.offsetY()*s.y,h=(kn.Konva.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),f={x:a.x+l*Math.cos(h)+d*Math.sin(-h),y:a.y+d*Math.cos(h)+l*Math.sin(h),width:i.width*s.x,height:i.height*s.y,rotation:h};return cA(f,-kn.Konva.getAngle(r),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-F7,y:-F7,width:0,height:0,rotation:0};const r=[];this.nodes().map(h=>{const f=h.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),p=[{x:f.x,y:f.y},{x:f.x+f.width,y:f.y},{x:f.x+f.width,y:f.y+f.height},{x:f.x,y:f.y+f.height}],g=h.getAbsoluteTransform();p.forEach(function(x){const w=g.point(x);r.push(w)})});const n=new Qe.Transform;n.rotate(-kn.Konva.getAngle(this.rotation()));let i=1/0,s=1/0,a=-1/0,l=-1/0;r.forEach(function(h){const f=n.point(h);i===void 0&&(i=a=f.x,s=l=f.y),i=Math.min(i,f.x),s=Math.min(s,f.y),a=Math.max(a,f.x),l=Math.max(l,f.y)}),n.invert();const d=n.point({x:i,y:s});return{x:d.x,y:d.y,width:a-i,height:l-s,rotation:kn.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Pf.forEach(t=>{this._createAnchor(t)}),this._createAnchor("rotater")}_createAnchor(t){const r=new aZ.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:dZ?10:"auto"}),n=this;r.on("mousedown touchstart",function(i){n._handleMouseDown(i)}),r.on("dragstart",i=>{r.stopDrag(),i.cancelBubble=!0}),r.on("dragend",i=>{i.cancelBubble=!0}),r.on("mouseenter",()=>{const i=kn.Konva.getAngle(this.rotation()),s=this.rotateAnchorCursor(),a=hZ(t,i,s);r.getStage().content&&(r.getStage().content.style.cursor=a),this._cursorChange=!0}),r.on("mouseout",()=>{r.getStage().content&&(r.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(r)}_createBack(){const t=new sZ.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(r,n){const i=n.getParent(),s=i.padding();r.beginPath(),r.rect(-s,-s,n.width()+s*2,n.height()+s*2),r.moveTo(n.width()/2,-s),i.rotateEnabled()&&i.rotateLineVisible()&&r.lineTo(n.width()/2,-i.rotateAnchorOffset()*Qe.Util._sign(n.height())-s),r.fillStrokeShape(n)},hitFunc:(r,n)=>{if(!this.shouldOverdrawWholeArea())return;const i=this.padding();r.beginPath(),r.rect(-i,-i,n.width()+i*2,n.height()+i*2),r.fillStrokeShape(n)}});this.add(t),this._proxyDrag(t),t.on("dragstart",r=>{r.cancelBubble=!0}),t.on("dragmove",r=>{r.cancelBubble=!0}),t.on("dragend",r=>{r.cancelBubble=!0}),this.on("dragmove",r=>{this.update()})}_handleMouseDown(t){if(this._transforming)return;this._movingAnchorName=t.target.name().split(" ")[0];const r=this._getNodeRect(),n=r.width,i=r.height,s=Math.sqrt(Math.pow(n,2)+Math.pow(i,2));this.sin=Math.abs(i/s),this.cos=Math.abs(n/s),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const a=t.target.getAbsolutePosition(),l=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:l.x-a.x,y:l.y-a.y},hw++,this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(d=>{d._fire("transformstart",{evt:t.evt,target:d})})}_handleMouseMove(t){let r,n,i;const s=this.findOne("."+this._movingAnchorName),a=s.getStage();a.setPointersPositions(t);const l=a.getPointerPosition();let d={x:l.x-this._anchorDragOffset.x,y:l.y-this._anchorDragOffset.y};const h=s.getAbsolutePosition();this.anchorDragBoundFunc()&&(d=this.anchorDragBoundFunc()(h,d,t)),s.setAbsolutePosition(d);const f=s.getAbsolutePosition();if(h.x===f.x&&h.y===f.y)return;if(this._movingAnchorName==="rotater"){const C=this._getNodeRect();r=s.x()-C.width/2,n=-s.y()+C.height/2;let R=Math.atan2(-n,r)+Math.PI/2;C.height<0&&(R-=Math.PI);const A=kn.Konva.getAngle(this.rotation())+R,O=kn.Konva.getAngle(this.rotationSnapTolerance()),I=mZ(this.rotationSnaps(),A,O)-C.rotation,M=pZ(C,I);this._fitNodesInto(M,t);return}const p=this.shiftBehavior();let g;p==="inverted"?g=this.keepRatio()&&!t.shiftKey:p==="none"?g=this.keepRatio():g=this.keepRatio()||t.shiftKey;var _=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(g){var x=_?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};i=Math.sqrt(Math.pow(x.x-s.x(),2)+Math.pow(x.y-s.y(),2));var w=this.findOne(".top-left").x()>x.x?-1:1,b=this.findOne(".top-left").y()>x.y?-1:1;r=i*this.cos*w,n=i*this.sin*b,this.findOne(".top-left").x(x.x-r),this.findOne(".top-left").y(x.y-n)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(s.y());else if(this._movingAnchorName==="top-right"){if(g){var x=_?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};i=Math.sqrt(Math.pow(s.x()-x.x,2)+Math.pow(x.y-s.y(),2));var w=this.findOne(".top-right").x()<x.x?-1:1,b=this.findOne(".top-right").y()>x.y?-1:1;r=i*this.cos*w,n=i*this.sin*b,this.findOne(".top-right").x(x.x+r),this.findOne(".top-right").y(x.y-n)}var k=s.position();this.findOne(".top-left").y(k.y),this.findOne(".bottom-right").x(k.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(s.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(s.x());else if(this._movingAnchorName==="bottom-left"){if(g){var x=_?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};i=Math.sqrt(Math.pow(x.x-s.x(),2)+Math.pow(s.y()-x.y,2));var w=x.x<s.x()?-1:1,b=s.y()<x.y?-1:1;r=i*this.cos*w,n=i*this.sin*b,s.x(x.x-r),s.y(x.y+n)}k=s.position(),this.findOne(".top-left").x(k.x),this.findOne(".bottom-right").y(k.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(s.y());else if(this._movingAnchorName==="bottom-right"){if(g){var x=_?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};i=Math.sqrt(Math.pow(s.x()-x.x,2)+Math.pow(s.y()-x.y,2));var w=this.findOne(".bottom-right").x()<x.x?-1:1,b=this.findOne(".bottom-right").y()<x.y?-1:1;r=i*this.cos*w,n=i*this.sin*b,this.findOne(".bottom-right").x(x.x+r),this.findOne(".bottom-right").y(x.y+n)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var _=this.centeredScaling()||t.altKey;if(_){const C=this.findOne(".top-left"),R=this.findOne(".bottom-right"),L=C.x(),A=C.y(),O=this.getWidth()-R.x(),T=this.getHeight()-R.y();R.move({x:-L,y:-A}),C.move({x:O,y:T})}const S=this.findOne(".top-left").getAbsolutePosition();r=S.x,n=S.y;const v=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),j=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:r,y:n,width:v,height:j,rotation:kn.Konva.getAngle(this.rotation())},t)}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){var r;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const n=this.getNode();hw--,this._fire("transformend",{evt:t,target:n}),(r=this.getLayer())===null||r===void 0||r.batchDraw(),n&&this._nodes.forEach(i=>{var s;i._fire("transformend",{evt:t,target:i}),(s=i.getLayer())===null||s===void 0||s.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(t,r){const n=this._getNodeRect(),i=1;if(Qe.Util._inRange(t.width,-this.padding()*2-i,i)){this.update();return}if(Qe.Util._inRange(t.height,-this.padding()*2-i,i)){this.update();return}const s=new Qe.Transform;if(s.rotate(kn.Konva.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const g=s.point({x:-this.padding()*2,y:0});t.x+=g.x,t.y+=g.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=g.x,this._anchorDragOffset.y-=g.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const g=s.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=g.x,this._anchorDragOffset.y-=g.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const g=s.point({x:0,y:-this.padding()*2});t.x+=g.x,t.y+=g.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=g.x,this._anchorDragOffset.y-=g.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const g=s.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=g.x,this._anchorDragOffset.y-=g.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){const g=this.boundBoxFunc()(n,t);g?t=g:Qe.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const a=1e7,l=new Qe.Transform;l.translate(n.x,n.y),l.rotate(n.rotation),l.scale(n.width/a,n.height/a);const d=new Qe.Transform,h=t.width/a,f=t.height/a;this.flipEnabled()===!1?(d.translate(t.x,t.y),d.rotate(t.rotation),d.translate(t.width<0?t.width:0,t.height<0?t.height:0),d.scale(Math.abs(h),Math.abs(f))):(d.translate(t.x,t.y),d.rotate(t.rotation),d.scale(h,f));const p=d.multiply(l.invert());this._nodes.forEach(g=>{var x;const w=g.getParent().getAbsoluteTransform(),b=g.getTransform().copy();b.translate(g.offsetX(),g.offsetY());const k=new Qe.Transform;k.multiply(w.copy().invert()).multiply(p).multiply(w).multiply(b);const _=k.decompose();g.setAttrs(_),(x=g.getLayer())===null||x===void 0||x.batchDraw()}),this.rotation(Qe.Util._getRotation(t.rotation)),this._nodes.forEach(g=>{this._fire("transform",{evt:r,target:g}),g._fire("transform",{evt:r,target:g})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,r){this.findOne(t).setAttrs(r)}update(){var t;const r=this._getNodeRect();this.rotation(Qe.Util._getRotation(r.rotation));const n=r.width,i=r.height,s=this.enabledAnchors(),a=this.resizeEnabled(),l=this.padding(),d=this.anchorSize(),h=this.find("._anchor");h.forEach(p=>{p.setAttrs({width:d,height:d,offsetX:d/2,offsetY:d/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:d/2+l,offsetY:d/2+l,visible:a&&s.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:n/2,y:0,offsetY:d/2+l,visible:a&&s.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:n,y:0,offsetX:d/2-l,offsetY:d/2+l,visible:a&&s.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:i/2,offsetX:d/2+l,visible:a&&s.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:n,y:i/2,offsetX:d/2-l,visible:a&&s.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:i,offsetX:d/2+l,offsetY:d/2-l,visible:a&&s.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:n/2,y:i,offsetY:d/2-l,visible:a&&s.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:n,y:i,offsetX:d/2-l,offsetY:d/2-l,visible:a&&s.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:n/2,y:-this.rotateAnchorOffset()*Qe.Util._sign(i)-l,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:n,height:i,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const f=this.anchorStyleFunc();f&&h.forEach(p=>{f(p)}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),I7.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return A7.Node.prototype.toObject.call(this)}clone(t){return A7.Node.prototype.clone.call(this,t)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Hp.Transformer=Ge;Ge.isTransforming=()=>hw>0;function gZ(e){return e instanceof Array||Qe.Util.warn("enabledAnchors value should be an array"),e instanceof Array&&e.forEach(function(t){Pf.indexOf(t)===-1&&Qe.Util.warn("Unknown anchor name: "+t+". Available names are: "+Pf.join(", "))}),e||[]}Ge.prototype.className="Transformer";(0,oZ._registerNode)(Ge);We.Factory.addGetterSetter(Ge,"enabledAnchors",Pf,gZ);We.Factory.addGetterSetter(Ge,"flipEnabled",!0,(0,Xs.getBooleanValidator)());We.Factory.addGetterSetter(Ge,"resizeEnabled",!0);We.Factory.addGetterSetter(Ge,"anchorSize",10,(0,Xs.getNumberValidator)());We.Factory.addGetterSetter(Ge,"rotateEnabled",!0);We.Factory.addGetterSetter(Ge,"rotateLineVisible",!0);We.Factory.addGetterSetter(Ge,"rotationSnaps",[]);We.Factory.addGetterSetter(Ge,"rotateAnchorOffset",50,(0,Xs.getNumberValidator)());We.Factory.addGetterSetter(Ge,"rotateAnchorCursor","crosshair");We.Factory.addGetterSetter(Ge,"rotationSnapTolerance",5,(0,Xs.getNumberValidator)());We.Factory.addGetterSetter(Ge,"borderEnabled",!0);We.Factory.addGetterSetter(Ge,"anchorStroke","rgb(0, 161, 255)");We.Factory.addGetterSetter(Ge,"anchorStrokeWidth",1,(0,Xs.getNumberValidator)());We.Factory.addGetterSetter(Ge,"anchorFill","white");We.Factory.addGetterSetter(Ge,"anchorCornerRadius",0,(0,Xs.getNumberValidator)());We.Factory.addGetterSetter(Ge,"borderStroke","rgb(0, 161, 255)");We.Factory.addGetterSetter(Ge,"borderStrokeWidth",1,(0,Xs.getNumberValidator)());We.Factory.addGetterSetter(Ge,"borderDash");We.Factory.addGetterSetter(Ge,"keepRatio",!0);We.Factory.addGetterSetter(Ge,"shiftBehavior","default");We.Factory.addGetterSetter(Ge,"centeredScaling",!1);We.Factory.addGetterSetter(Ge,"ignoreStroke",!1);We.Factory.addGetterSetter(Ge,"padding",0,(0,Xs.getNumberValidator)());We.Factory.addGetterSetter(Ge,"node");We.Factory.addGetterSetter(Ge,"nodes");We.Factory.addGetterSetter(Ge,"boundBoxFunc");We.Factory.addGetterSetter(Ge,"anchorDragBoundFunc");We.Factory.addGetterSetter(Ge,"anchorStyleFunc");We.Factory.addGetterSetter(Ge,"shouldOverdrawWholeArea",!1);We.Factory.addGetterSetter(Ge,"useSingleNodeRotation",!0);We.Factory.backCompat(Ge,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var Wp={};Object.defineProperty(Wp,"__esModule",{value:!0});Wp.Wedge=void 0;const Kp=Me,xZ=zt,vZ=Ae,uA=je,yZ=Ae;class Ki extends xZ.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,vZ.Konva.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}Wp.Wedge=Ki;Ki.prototype.className="Wedge";Ki.prototype._centroid=!0;Ki.prototype._attrsAffectingSize=["radius"];(0,yZ._registerNode)(Ki);Kp.Factory.addGetterSetter(Ki,"radius",0,(0,uA.getNumberValidator)());Kp.Factory.addGetterSetter(Ki,"angle",0,(0,uA.getNumberValidator)());Kp.Factory.addGetterSetter(Ki,"clockwise",!1);Kp.Factory.backCompat(Ki,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var Yp={};Object.defineProperty(Yp,"__esModule",{value:!0});Yp.Blur=void 0;const L7=Me,bZ=dt,wZ=je;function O7(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const _Z=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],NZ=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function SZ(e,t){const r=e.data,n=e.width,i=e.height;let s,a,l,d,h,f,p,g,x,w,b,k,_,S,v,j,C,R,L,A,O,T,I,M,$=t+t+1,F=n-1,G=i-1,B=t+1,Y=B*(B+1)/2,K=new O7,H=null,W=K,D=null,q=null,J=_Z[t],ee=NZ[t];for(l=1;l<$;l++)W=W.next=new O7,l===B&&(H=W);for(W.next=K,p=f=0,a=0;a<i;a++){for(j=C=R=L=g=x=w=b=0,k=B*(A=r[f]),_=B*(O=r[f+1]),S=B*(T=r[f+2]),v=B*(I=r[f+3]),g+=Y*A,x+=Y*O,w+=Y*T,b+=Y*I,W=K,l=0;l<B;l++)W.r=A,W.g=O,W.b=T,W.a=I,W=W.next;for(l=1;l<B;l++)d=f+((F<l?F:l)<<2),g+=(W.r=A=r[d])*(M=B-l),x+=(W.g=O=r[d+1])*M,w+=(W.b=T=r[d+2])*M,b+=(W.a=I=r[d+3])*M,j+=A,C+=O,R+=T,L+=I,W=W.next;for(D=K,q=H,s=0;s<n;s++)r[f+3]=I=b*J>>ee,I!==0?(I=255/I,r[f]=(g*J>>ee)*I,r[f+1]=(x*J>>ee)*I,r[f+2]=(w*J>>ee)*I):r[f]=r[f+1]=r[f+2]=0,g-=k,x-=_,w-=S,b-=v,k-=D.r,_-=D.g,S-=D.b,v-=D.a,d=p+((d=s+t+1)<F?d:F)<<2,j+=D.r=r[d],C+=D.g=r[d+1],R+=D.b=r[d+2],L+=D.a=r[d+3],g+=j,x+=C,w+=R,b+=L,D=D.next,k+=A=q.r,_+=O=q.g,S+=T=q.b,v+=I=q.a,j-=A,C-=O,R-=T,L-=I,q=q.next,f+=4;p+=n}for(s=0;s<n;s++){for(C=R=L=j=x=w=b=g=0,f=s<<2,k=B*(A=r[f]),_=B*(O=r[f+1]),S=B*(T=r[f+2]),v=B*(I=r[f+3]),g+=Y*A,x+=Y*O,w+=Y*T,b+=Y*I,W=K,l=0;l<B;l++)W.r=A,W.g=O,W.b=T,W.a=I,W=W.next;for(h=n,l=1;l<=t;l++)f=h+s<<2,g+=(W.r=A=r[f])*(M=B-l),x+=(W.g=O=r[f+1])*M,w+=(W.b=T=r[f+2])*M,b+=(W.a=I=r[f+3])*M,j+=A,C+=O,R+=T,L+=I,W=W.next,l<G&&(h+=n);for(f=s,D=K,q=H,a=0;a<i;a++)d=f<<2,r[d+3]=I=b*J>>ee,I>0?(I=255/I,r[d]=(g*J>>ee)*I,r[d+1]=(x*J>>ee)*I,r[d+2]=(w*J>>ee)*I):r[d]=r[d+1]=r[d+2]=0,g-=k,x-=_,w-=S,b-=v,k-=D.r,_-=D.g,S-=D.b,v-=D.a,d=s+((d=a+B)<G?d:G)*n<<2,g+=j+=D.r=r[d],x+=C+=D.g=r[d+1],w+=R+=D.b=r[d+2],b+=L+=D.a=r[d+3],D=D.next,k+=A=q.r,_+=O=q.g,S+=T=q.b,v+=I=q.a,j-=A,C-=O,R-=T,L-=I,q=q.next,f+=n}}const jZ=function(t){const r=Math.round(this.blurRadius());r>0&&SZ(t,r)};Yp.Blur=jZ;L7.Factory.addGetterSetter(bZ.Node,"blurRadius",0,(0,wZ.getNumberValidator)(),L7.Factory.afterSetFilter);var Xp={};Object.defineProperty(Xp,"__esModule",{value:!0});Xp.Brighten=void 0;const D7=Me,kZ=dt,CZ=je,EZ=function(e){let t=this.brightness()*255,r=e.data,n=r.length,i;for(i=0;i<n;i+=4)r[i]+=t,r[i+1]+=t,r[i+2]+=t};Xp.Brighten=EZ;D7.Factory.addGetterSetter(kZ.Node,"brightness",0,(0,CZ.getNumberValidator)(),D7.Factory.afterSetFilter);var Qp={};Object.defineProperty(Qp,"__esModule",{value:!0});Qp.Contrast=void 0;const z7=Me,TZ=dt,PZ=je,RZ=function(e){const t=Math.pow((this.contrast()+100)/100,2);let r=e.data,n=r.length,i=150,s=150,a=150,l;for(l=0;l<n;l+=4)i=r[l],s=r[l+1],a=r[l+2],i/=255,i-=.5,i*=t,i+=.5,i*=255,s/=255,s-=.5,s*=t,s+=.5,s*=255,a/=255,a-=.5,a*=t,a+=.5,a*=255,i=i<0?0:i>255?255:i,s=s<0?0:s>255?255:s,a=a<0?0:a>255?255:a,r[l]=i,r[l+1]=s,r[l+2]=a};Qp.Contrast=RZ;z7.Factory.addGetterSetter(TZ.Node,"contrast",0,(0,PZ.getNumberValidator)(),z7.Factory.afterSetFilter);var Zp={};Object.defineProperty(Zp,"__esModule",{value:!0});Zp.Emboss=void 0;const zs=Me,Jp=dt,AZ=yt,dA=je,IZ=function(e){let t=this.embossStrength()*10,r=this.embossWhiteLevel()*255,n=this.embossDirection(),i=this.embossBlend(),s=0,a=0,l=e.data,d=e.width,h=e.height,f=d*4,p=h;switch(n){case"top-left":s=-1,a=-1;break;case"top":s=-1,a=0;break;case"top-right":s=-1,a=1;break;case"right":s=0,a=1;break;case"bottom-right":s=1,a=1;break;case"bottom":s=1,a=0;break;case"bottom-left":s=1,a=-1;break;case"left":s=0,a=-1;break;default:AZ.Util.error("Unknown emboss direction: "+n)}do{const g=(p-1)*f;let x=s;p+x<1&&(x=0),p+x>h&&(x=0);const w=(p-1+x)*d*4;let b=d;do{const k=g+(b-1)*4;let _=a;b+_<1&&(_=0),b+_>d&&(_=0);const S=w+(b-1+_)*4,v=l[k]-l[S],j=l[k+1]-l[S+1],C=l[k+2]-l[S+2];let R=v;const L=R>0?R:-R,A=j>0?j:-j,O=C>0?C:-C;if(A>L&&(R=j),O>L&&(R=C),R*=t,i){const T=l[k]+R,I=l[k+1]+R,M=l[k+2]+R;l[k]=T>255?255:T<0?0:T,l[k+1]=I>255?255:I<0?0:I,l[k+2]=M>255?255:M<0?0:M}else{let T=r-R;T<0?T=0:T>255&&(T=255),l[k]=l[k+1]=l[k+2]=T}}while(--b)}while(--p)};Zp.Emboss=IZ;zs.Factory.addGetterSetter(Jp.Node,"embossStrength",.5,(0,dA.getNumberValidator)(),zs.Factory.afterSetFilter);zs.Factory.addGetterSetter(Jp.Node,"embossWhiteLevel",.5,(0,dA.getNumberValidator)(),zs.Factory.afterSetFilter);zs.Factory.addGetterSetter(Jp.Node,"embossDirection","top-left",null,zs.Factory.afterSetFilter);zs.Factory.addGetterSetter(Jp.Node,"embossBlend",!1,null,zs.Factory.afterSetFilter);var e0={};Object.defineProperty(e0,"__esModule",{value:!0});e0.Enhance=void 0;const U7=Me,MZ=dt,FZ=je;function O2(e,t,r,n,i){let s=r-t,a=i-n,l;return s===0?n+a/2:a===0?n:(l=(e-t)/s,l=a*l+n,l)}const LZ=function(e){let t=e.data,r=t.length,n=t[0],i=n,s,a=t[1],l=a,d,h=t[2],f=h,p,g;const x=this.enhance();if(x===0)return;for(g=0;g<r;g+=4)s=t[g+0],s<n?n=s:s>i&&(i=s),d=t[g+1],d<a?a=d:d>l&&(l=d),p=t[g+2],p<h?h=p:p>f&&(f=p);i===n&&(i=255,n=0),l===a&&(l=255,a=0),f===h&&(f=255,h=0);let w,b,k,_,S,v,j,C,R;for(x>0?(b=i+x*(255-i),k=n-x*(n-0),S=l+x*(255-l),v=a-x*(a-0),C=f+x*(255-f),R=h-x*(h-0)):(w=(i+n)*.5,b=i+x*(i-w),k=n+x*(n-w),_=(l+a)*.5,S=l+x*(l-_),v=a+x*(a-_),j=(f+h)*.5,C=f+x*(f-j),R=h+x*(h-j)),g=0;g<r;g+=4)t[g+0]=O2(t[g+0],n,i,k,b),t[g+1]=O2(t[g+1],a,l,v,S),t[g+2]=O2(t[g+2],h,f,R,C)};e0.Enhance=LZ;U7.Factory.addGetterSetter(MZ.Node,"enhance",0,(0,FZ.getNumberValidator)(),U7.Factory.afterSetFilter);var t0={};Object.defineProperty(t0,"__esModule",{value:!0});t0.Grayscale=void 0;const OZ=function(e){let t=e.data,r=t.length,n,i;for(n=0;n<r;n+=4)i=.34*t[n]+.5*t[n+1]+.16*t[n+2],t[n]=i,t[n+1]=i,t[n+2]=i};t0.Grayscale=OZ;var r0={};Object.defineProperty(r0,"__esModule",{value:!0});r0.HSL=void 0;const sl=Me,o3=dt,l3=je;sl.Factory.addGetterSetter(o3.Node,"hue",0,(0,l3.getNumberValidator)(),sl.Factory.afterSetFilter);sl.Factory.addGetterSetter(o3.Node,"saturation",0,(0,l3.getNumberValidator)(),sl.Factory.afterSetFilter);sl.Factory.addGetterSetter(o3.Node,"luminance",0,(0,l3.getNumberValidator)(),sl.Factory.afterSetFilter);const DZ=function(e){let t=e.data,r=t.length,n=1,i=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,a=this.luminance()*127,l;const d=n*i*Math.cos(s*Math.PI/180),h=n*i*Math.sin(s*Math.PI/180),f=.299*n+.701*d+.167*h,p=.587*n-.587*d+.33*h,g=.114*n-.114*d-.497*h,x=.299*n-.299*d-.328*h,w=.587*n+.413*d+.035*h,b=.114*n-.114*d+.293*h,k=.299*n-.3*d+1.25*h,_=.587*n-.586*d-1.05*h,S=.114*n+.886*d-.2*h;let v,j,C,R;for(l=0;l<r;l+=4)v=t[l+0],j=t[l+1],C=t[l+2],R=t[l+3],t[l+0]=f*v+p*j+g*C+a,t[l+1]=x*v+w*j+b*C+a,t[l+2]=k*v+_*j+S*C+a,t[l+3]=R};r0.HSL=DZ;var n0={};Object.defineProperty(n0,"__esModule",{value:!0});n0.HSV=void 0;const al=Me,c3=dt,u3=je,zZ=function(e){const t=e.data,r=t.length,n=Math.pow(2,this.value()),i=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,a=n*i*Math.cos(s*Math.PI/180),l=n*i*Math.sin(s*Math.PI/180),d=.299*n+.701*a+.167*l,h=.587*n-.587*a+.33*l,f=.114*n-.114*a-.497*l,p=.299*n-.299*a-.328*l,g=.587*n+.413*a+.035*l,x=.114*n-.114*a+.293*l,w=.299*n-.3*a+1.25*l,b=.587*n-.586*a-1.05*l,k=.114*n+.886*a-.2*l;let _,S,v,j;for(let C=0;C<r;C+=4)_=t[C+0],S=t[C+1],v=t[C+2],j=t[C+3],t[C+0]=d*_+h*S+f*v,t[C+1]=p*_+g*S+x*v,t[C+2]=w*_+b*S+k*v,t[C+3]=j};n0.HSV=zZ;al.Factory.addGetterSetter(c3.Node,"hue",0,(0,u3.getNumberValidator)(),al.Factory.afterSetFilter);al.Factory.addGetterSetter(c3.Node,"saturation",0,(0,u3.getNumberValidator)(),al.Factory.afterSetFilter);al.Factory.addGetterSetter(c3.Node,"value",0,(0,u3.getNumberValidator)(),al.Factory.afterSetFilter);var i0={};Object.defineProperty(i0,"__esModule",{value:!0});i0.Invert=void 0;const UZ=function(e){let t=e.data,r=t.length,n;for(n=0;n<r;n+=4)t[n]=255-t[n],t[n+1]=255-t[n+1],t[n+2]=255-t[n+2]};i0.Invert=UZ;var s0={};Object.defineProperty(s0,"__esModule",{value:!0});s0.Kaleidoscope=void 0;const Rf=Me,hA=dt,G7=yt,fA=je,GZ=function(e,t,r){let n=e.data,i=t.data,s=e.width,a=e.height,l=r.polarCenterX||s/2,d=r.polarCenterY||a/2,h,f,p,g=0,x=0,w=0,b=0,k,_=Math.sqrt(l*l+d*d);f=s-l,p=a-d,k=Math.sqrt(f*f+p*p),_=k>_?k:_;let S=a,v=s,j,C,R=360/v*Math.PI/180,L,A;for(C=0;C<v;C+=1)for(L=Math.sin(C*R),A=Math.cos(C*R),j=0;j<S;j+=1)f=Math.floor(l+_*j/S*A),p=Math.floor(d+_*j/S*L),h=(p*s+f)*4,g=n[h+0],x=n[h+1],w=n[h+2],b=n[h+3],h=(C+j*s)*4,i[h+0]=g,i[h+1]=x,i[h+2]=w,i[h+3]=b},$Z=function(e,t,r){let n=e.data,i=t.data,s=e.width,a=e.height,l=r.polarCenterX||s/2,d=r.polarCenterY||a/2,h,f,p,g,x,w=0,b=0,k=0,_=0,S,v=Math.sqrt(l*l+d*d);f=s-l,p=a-d,S=Math.sqrt(f*f+p*p),v=S>v?S:v;let j=a,C=s,R,L,A=r.polarRotation||0,O,T;for(f=0;f<s;f+=1)for(p=0;p<a;p+=1)g=f-l,x=p-d,R=Math.sqrt(g*g+x*x)*j/v,L=(Math.atan2(x,g)*180/Math.PI+360+A)%360,L=L*C/360,O=Math.floor(L),T=Math.floor(R),h=(T*s+O)*4,w=n[h+0],b=n[h+1],k=n[h+2],_=n[h+3],h=(p*s+f)*4,i[h+0]=w,i[h+1]=b,i[h+2]=k,i[h+3]=_},BZ=function(e){const t=e.width,r=e.height;let n,i,s,a,l,d,h,f,p,g,x=Math.round(this.kaleidoscopePower());const w=Math.round(this.kaleidoscopeAngle()),b=Math.floor(t*(w%360)/360);if(x<1)return;const k=G7.Util.createCanvasElement();k.width=t,k.height=r;const _=k.getContext("2d").getImageData(0,0,t,r);G7.Util.releaseCanvas(k),GZ(e,_,{polarCenterX:t/2,polarCenterY:r/2});let S=t/Math.pow(2,x);for(;S<=8;)S=S*2,x-=1;S=Math.ceil(S);let v=S,j=0,C=v,R=1;for(b+S>t&&(j=v,C=0,R=-1),i=0;i<r;i+=1)for(n=j;n!==C;n+=R)s=Math.round(n+b)%t,p=(t*i+s)*4,l=_.data[p+0],d=_.data[p+1],h=_.data[p+2],f=_.data[p+3],g=(t*i+n)*4,_.data[g+0]=l,_.data[g+1]=d,_.data[g+2]=h,_.data[g+3]=f;for(i=0;i<r;i+=1)for(v=Math.floor(S),a=0;a<x;a+=1){for(n=0;n<v+1;n+=1)p=(t*i+n)*4,l=_.data[p+0],d=_.data[p+1],h=_.data[p+2],f=_.data[p+3],g=(t*i+v*2-n-1)*4,_.data[g+0]=l,_.data[g+1]=d,_.data[g+2]=h,_.data[g+3]=f;v*=2}$Z(_,e,{polarRotation:0})};s0.Kaleidoscope=BZ;Rf.Factory.addGetterSetter(hA.Node,"kaleidoscopePower",2,(0,fA.getNumberValidator)(),Rf.Factory.afterSetFilter);Rf.Factory.addGetterSetter(hA.Node,"kaleidoscopeAngle",0,(0,fA.getNumberValidator)(),Rf.Factory.afterSetFilter);var a0={};Object.defineProperty(a0,"__esModule",{value:!0});a0.Mask=void 0;const $7=Me,qZ=dt,VZ=je;function wh(e,t,r){let n=(r*e.width+t)*4;const i=[];return i.push(e.data[n++],e.data[n++],e.data[n++],e.data[n++]),i}function xc(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2))}function HZ(e){const t=[0,0,0];for(let r=0;r<e.length;r++)t[0]+=e[r][0],t[1]+=e[r][1],t[2]+=e[r][2];return t[0]/=e.length,t[1]/=e.length,t[2]/=e.length,t}function WZ(e,t){const r=wh(e,0,0),n=wh(e,e.width-1,0),i=wh(e,0,e.height-1),s=wh(e,e.width-1,e.height-1),a=t||10;if(xc(r,n)<a&&xc(n,s)<a&&xc(s,i)<a&&xc(i,r)<a){const l=HZ([n,r,s,i]),d=[];for(let h=0;h<e.width*e.height;h++){const f=xc(l,[e.data[h*4],e.data[h*4+1],e.data[h*4+2]]);d[h]=f<a?0:255}return d}}function KZ(e,t){for(let r=0;r<e.width*e.height;r++)e.data[4*r+3]=t[r]}function YZ(e,t,r){const n=[1,1,1,1,0,1,1,1,1],i=Math.round(Math.sqrt(n.length)),s=Math.floor(i/2),a=[];for(let l=0;l<r;l++)for(let d=0;d<t;d++){const h=l*t+d;let f=0;for(let p=0;p<i;p++)for(let g=0;g<i;g++){const x=l+p-s,w=d+g-s;if(x>=0&&x<r&&w>=0&&w<t){const b=x*t+w,k=n[p*i+g];f+=e[b]*k}}a[h]=f===255*8?255:0}return a}function XZ(e,t,r){const n=[1,1,1,1,1,1,1,1,1],i=Math.round(Math.sqrt(n.length)),s=Math.floor(i/2),a=[];for(let l=0;l<r;l++)for(let d=0;d<t;d++){const h=l*t+d;let f=0;for(let p=0;p<i;p++)for(let g=0;g<i;g++){const x=l+p-s,w=d+g-s;if(x>=0&&x<r&&w>=0&&w<t){const b=x*t+w,k=n[p*i+g];f+=e[b]*k}}a[h]=f>=255*4?255:0}return a}function QZ(e,t,r){const n=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],i=Math.round(Math.sqrt(n.length)),s=Math.floor(i/2),a=[];for(let l=0;l<r;l++)for(let d=0;d<t;d++){const h=l*t+d;let f=0;for(let p=0;p<i;p++)for(let g=0;g<i;g++){const x=l+p-s,w=d+g-s;if(x>=0&&x<r&&w>=0&&w<t){const b=x*t+w,k=n[p*i+g];f+=e[b]*k}}a[h]=f}return a}const ZZ=function(e){let t=this.threshold(),r=WZ(e,t);return r&&(r=YZ(r,e.width,e.height),r=XZ(r,e.width,e.height),r=QZ(r,e.width,e.height),KZ(e,r)),e};a0.Mask=ZZ;$7.Factory.addGetterSetter(qZ.Node,"threshold",0,(0,VZ.getNumberValidator)(),$7.Factory.afterSetFilter);var o0={};Object.defineProperty(o0,"__esModule",{value:!0});o0.Noise=void 0;const B7=Me,JZ=dt,eJ=je,tJ=function(e){const t=this.noise()*255,r=e.data,n=r.length,i=t/2;for(let s=0;s<n;s+=4)r[s+0]+=i-2*i*Math.random(),r[s+1]+=i-2*i*Math.random(),r[s+2]+=i-2*i*Math.random()};o0.Noise=tJ;B7.Factory.addGetterSetter(JZ.Node,"noise",.2,(0,eJ.getNumberValidator)(),B7.Factory.afterSetFilter);var l0={};Object.defineProperty(l0,"__esModule",{value:!0});l0.Pixelate=void 0;const q7=Me,rJ=yt,nJ=dt,iJ=je,sJ=function(e){let t=Math.ceil(this.pixelSize()),r=e.width,n=e.height,i,s,a,l,d,h,f,p=Math.ceil(r/t),g=Math.ceil(n/t),x,w,b,k,_,S,v,j=e.data;if(t<=0){rJ.Util.error("pixelSize value can not be <= 0");return}for(_=0;_<p;_+=1)for(S=0;S<g;S+=1){for(l=0,d=0,h=0,f=0,x=_*t,w=x+t,b=S*t,k=b+t,v=0,i=x;i<w;i+=1)if(!(i>=r))for(s=b;s<k;s+=1)s>=n||(a=(r*s+i)*4,l+=j[a+0],d+=j[a+1],h+=j[a+2],f+=j[a+3],v+=1);for(l=l/v,d=d/v,h=h/v,f=f/v,i=x;i<w;i+=1)if(!(i>=r))for(s=b;s<k;s+=1)s>=n||(a=(r*s+i)*4,j[a+0]=l,j[a+1]=d,j[a+2]=h,j[a+3]=f)}};l0.Pixelate=sJ;q7.Factory.addGetterSetter(nJ.Node,"pixelSize",8,(0,iJ.getNumberValidator)(),q7.Factory.afterSetFilter);var c0={};Object.defineProperty(c0,"__esModule",{value:!0});c0.Posterize=void 0;const V7=Me,aJ=dt,oJ=je,lJ=function(e){let t=Math.round(this.levels()*254)+1,r=e.data,n=r.length,i=255/t,s;for(s=0;s<n;s+=1)r[s]=Math.floor(r[s]/i)*i};c0.Posterize=lJ;V7.Factory.addGetterSetter(aJ.Node,"levels",.5,(0,oJ.getNumberValidator)(),V7.Factory.afterSetFilter);var u0={};Object.defineProperty(u0,"__esModule",{value:!0});u0.RGB=void 0;const Af=Me,d3=dt,cJ=je,uJ=function(e){let t=e.data,r=t.length,n=this.red(),i=this.green(),s=this.blue(),a,l;for(a=0;a<r;a+=4)l=(.34*t[a]+.5*t[a+1]+.16*t[a+2])/255,t[a]=l*n,t[a+1]=l*i,t[a+2]=l*s,t[a+3]=t[a+3]};u0.RGB=uJ;Af.Factory.addGetterSetter(d3.Node,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});Af.Factory.addGetterSetter(d3.Node,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});Af.Factory.addGetterSetter(d3.Node,"blue",0,cJ.RGBComponent,Af.Factory.afterSetFilter);var d0={};Object.defineProperty(d0,"__esModule",{value:!0});d0.RGBA=void 0;const gu=Me,h0=dt,dJ=je,hJ=function(e){const t=e.data,r=t.length,n=this.red(),i=this.green(),s=this.blue(),a=this.alpha();for(let l=0;l<r;l+=4){const d=1-a;t[l]=n*a+t[l]*d,t[l+1]=i*a+t[l+1]*d,t[l+2]=s*a+t[l+2]*d}};d0.RGBA=hJ;gu.Factory.addGetterSetter(h0.Node,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});gu.Factory.addGetterSetter(h0.Node,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});gu.Factory.addGetterSetter(h0.Node,"blue",0,dJ.RGBComponent,gu.Factory.afterSetFilter);gu.Factory.addGetterSetter(h0.Node,"alpha",1,function(e){return this._filterUpToDate=!1,e>1?1:e<0?0:e});var f0={};Object.defineProperty(f0,"__esModule",{value:!0});f0.Sepia=void 0;const fJ=function(e){let t=e.data,r=t.length,n,i,s,a;for(n=0;n<r;n+=4)i=t[n+0],s=t[n+1],a=t[n+2],t[n+0]=Math.min(255,i*.393+s*.769+a*.189),t[n+1]=Math.min(255,i*.349+s*.686+a*.168),t[n+2]=Math.min(255,i*.272+s*.534+a*.131)};f0.Sepia=fJ;var p0={};Object.defineProperty(p0,"__esModule",{value:!0});p0.Solarize=void 0;const pJ=function(e){const t=e.data,r=e.width,n=e.height,i=r*4;let s=n;do{const a=(s-1)*i;let l=r;do{const d=a+(l-1)*4;let h=t[d],f=t[d+1],p=t[d+2];h>127&&(h=255-h),f>127&&(f=255-f),p>127&&(p=255-p),t[d]=h,t[d+1]=f,t[d+2]=p}while(--l)}while(--s)};p0.Solarize=pJ;var m0={};Object.defineProperty(m0,"__esModule",{value:!0});m0.Threshold=void 0;const H7=Me,mJ=dt,gJ=je,xJ=function(e){const t=this.threshold()*255,r=e.data,n=r.length;for(let i=0;i<n;i+=1)r[i]=r[i]<t?0:255};m0.Threshold=xJ;H7.Factory.addGetterSetter(mJ.Node,"threshold",.5,(0,gJ.getNumberValidator)(),H7.Factory.afterSetFilter);Object.defineProperty(Sp,"__esModule",{value:!0});Sp.Konva=void 0;const W7=Ef,vJ=Pp,yJ=Ip,bJ=Lp,wJ=Op,_J=Dp,K7=il,NJ=Ou,SJ=wl,jJ=zu,kJ=Gp,CJ=$p,EJ=Bp,TJ=qp,PJ=Nl,RJ=Vp,AJ=Hp,IJ=Wp,MJ=Yp,FJ=Xp,LJ=Qp,OJ=Zp,DJ=e0,zJ=t0,UJ=r0,GJ=n0,$J=i0,BJ=s0,qJ=a0,VJ=o0,HJ=l0,WJ=c0,KJ=u0,YJ=d0,XJ=f0,QJ=p0,ZJ=m0;Sp.Konva=W7.Konva.Util._assign(W7.Konva,{Arc:vJ.Arc,Arrow:yJ.Arrow,Circle:bJ.Circle,Ellipse:wJ.Ellipse,Image:_J.Image,Label:K7.Label,Tag:K7.Tag,Line:NJ.Line,Path:SJ.Path,Rect:jJ.Rect,RegularPolygon:kJ.RegularPolygon,Ring:CJ.Ring,Sprite:EJ.Sprite,Star:TJ.Star,Text:PJ.Text,TextPath:RJ.TextPath,Transformer:AJ.Transformer,Wedge:IJ.Wedge,Filters:{Blur:MJ.Blur,Brighten:FJ.Brighten,Contrast:LJ.Contrast,Emboss:OJ.Emboss,Enhance:DJ.Enhance,Grayscale:zJ.Grayscale,HSL:UJ.HSL,HSV:GJ.HSV,Invert:$J.Invert,Kaleidoscope:BJ.Kaleidoscope,Mask:qJ.Mask,Noise:VJ.Noise,Pixelate:HJ.Pixelate,Posterize:WJ.Posterize,RGB:KJ.RGB,RGBA:YJ.RGBA,Sepia:XJ.Sepia,Solarize:QJ.Solarize,Threshold:ZJ.Threshold}});var JJ=AR.exports;Object.defineProperty(JJ,"__esModule",{value:!0});const eee=Sp;AR.exports=eee.Konva;var fw={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;var r=Ef;Object.defineProperty(t,"Konva",{enumerable:!0,get:function(){return r.Konva}});const n=Ef;e.exports=n.Konva})(fw,fw.exports);var tee=fw.exports;const xu=vu(tee);var pA={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ree=function(t){var r={},n=P,i=Ac,s=Object.assign;function a(c){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+c,m=1;m<arguments.length;m++)u+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,d=Symbol.for("react.element"),h=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),w=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),j=Symbol.for("react.offscreen"),C=Symbol.iterator;function R(c){return c===null||typeof c!="object"?null:(c=C&&c[C]||c["@@iterator"],typeof c=="function"?c:null)}function L(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case f:return"Fragment";case h:return"Portal";case g:return"Profiler";case p:return"StrictMode";case k:return"Suspense";case _:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case w:return(c.displayName||"Context")+".Consumer";case x:return(c._context.displayName||"Context")+".Provider";case b:var u=c.render;return c=c.displayName,c||(c=u.displayName||u.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case S:return u=c.displayName||null,u!==null?u:L(c.type)||"Memo";case v:u=c._payload,c=c._init;try{return L(c(u))}catch{}}return null}function A(c){var u=c.type;switch(c.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=u.render,c=c.displayName||c.name||"",u.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return L(u);case 8:return u===p?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function O(c){var u=c,m=c;if(c.alternate)for(;u.return;)u=u.return;else{c=u;do u=c,u.flags&4098&&(m=u.return),c=u.return;while(c)}return u.tag===3?m:null}function T(c){if(O(c)!==c)throw Error(a(188))}function I(c){var u=c.alternate;if(!u){if(u=O(c),u===null)throw Error(a(188));return u!==c?null:c}for(var m=c,y=u;;){var N=m.return;if(N===null)break;var E=N.alternate;if(E===null){if(y=N.return,y!==null){m=y;continue}break}if(N.child===E.child){for(E=N.child;E;){if(E===m)return T(N),c;if(E===y)return T(N),u;E=E.sibling}throw Error(a(188))}if(m.return!==y.return)m=N,y=E;else{for(var z=!1,Q=N.child;Q;){if(Q===m){z=!0,m=N,y=E;break}if(Q===y){z=!0,y=N,m=E;break}Q=Q.sibling}if(!z){for(Q=E.child;Q;){if(Q===m){z=!0,m=E,y=N;break}if(Q===y){z=!0,y=E,m=N;break}Q=Q.sibling}if(!z)throw Error(a(189))}}if(m.alternate!==y)throw Error(a(190))}if(m.tag!==3)throw Error(a(188));return m.stateNode.current===m?c:u}function M(c){return c=I(c),c!==null?$(c):null}function $(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var u=$(c);if(u!==null)return u;c=c.sibling}return null}function F(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){if(c.tag!==4){var u=F(c);if(u!==null)return u}c=c.sibling}return null}var G=Array.isArray,B=t.getPublicInstance,Y=t.getRootHostContext,K=t.getChildHostContext,H=t.prepareForCommit,W=t.resetAfterCommit,D=t.createInstance,q=t.appendInitialChild,J=t.finalizeInitialChildren,ee=t.prepareUpdate,ue=t.shouldSetTextContent,pe=t.createTextInstance,V=t.scheduleTimeout,te=t.cancelTimeout,oe=t.noTimeout,U=t.isPrimaryRenderer,X=t.supportsMutation,le=t.supportsPersistence,me=t.supportsHydration,ye=t.getInstanceFromNode,ae=t.preparePortalMount,Fe=t.getCurrentEventPriority,fe=t.detachDeletedInstance,ge=t.supportsMicrotasks,bt=t.scheduleMicrotask,pr=t.supportsTestSelectors,Yr=t.findFiberRoot,Yt=t.getBoundingRect,ht=t.getTextContent,Tt=t.isHiddenSubtree,Fr=t.matchAccessibilityRole,gn=t.setFocusIfFocusable,Xr=t.setupIntersectionObserver,mr=t.appendChild,xn=t.appendChildToContainer,Gn=t.commitTextUpdate,Pt=t.commitMount,rr=t.commitUpdate,Gt=t.insertBefore,Xt=t.insertInContainerBefore,di=t.removeChild,vn=t.removeChildFromContainer,Lr=t.resetTextContent,Zs=t.hideInstance,Sl=t.hideTextInstance,Js=t.unhideInstance,jl=t.unhideTextInstance,Uu=t.clearContainer,hi=t.cloneInstance,Gu=t.createContainerChildSet,$u=t.appendChildToContainerChildSet,x0=t.finalizeContainerChildren,kl=t.replaceContainerChildren,Bu=t.cloneHiddenInstance,qu=t.cloneHiddenTextInstance,v0=t.canHydrateInstance,y0=t.canHydrateTextInstance,b0=t.canHydrateSuspenseInstance,Vu=t.isSuspenseInstancePending,Cl=t.isSuspenseInstanceFallback,w0=t.getSuspenseInstanceFallbackErrorDetails,_0=t.registerSuspenseInstanceRetry,Qa=t.getNextHydratableSibling,N0=t.getFirstHydratableChild,S0=t.getFirstHydratableChildWithinContainer,Hu=t.getFirstHydratableChildWithinSuspenseInstance,j0=t.hydrateInstance,k0=t.hydrateTextInstance,C0=t.hydrateSuspenseInstance,E0=t.getNextHydratableInstanceAfterSuspenseInstance,T0=t.commitHydratedContainer,P0=t.commitHydratedSuspenseInstance,R0=t.clearSuspenseBoundary,A0=t.clearSuspenseBoundaryFromContainer,Wu=t.shouldDeleteUnhydratedTailInstances,I0=t.didNotMatchHydratedContainerTextInstance,M0=t.didNotMatchHydratedTextInstance,El;function ea(c){if(El===void 0)try{throw Error()}catch(m){var u=m.stack.trim().match(/\n( *(at )?)/);El=u&&u[1]||""}return`
`+El+c}var Tl=!1;function Pl(c,u){if(!c||Tl)return"";Tl=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(de){var y=de}Reflect.construct(c,[],u)}else{try{u.call()}catch(de){y=de}c.call(u.prototype)}else{try{throw Error()}catch(de){y=de}c()}}catch(de){if(de&&y&&typeof de.stack=="string"){for(var N=de.stack.split(`
`),E=y.stack.split(`
`),z=N.length-1,Q=E.length-1;1<=z&&0<=Q&&N[z]!==E[Q];)Q--;for(;1<=z&&0<=Q;z--,Q--)if(N[z]!==E[Q]){if(z!==1||Q!==1)do if(z--,Q--,0>Q||N[z]!==E[Q]){var ie=`
`+N[z].replace(" at new "," at ");return c.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",c.displayName)),ie}while(1<=z&&0<=Q);break}}}finally{Tl=!1,Error.prepareStackTrace=m}return(c=c?c.displayName||c.name:"")?ea(c):""}var Ku=Object.prototype.hasOwnProperty,Rl=[],Yi=-1;function $n(c){return{current:c}}function Ke(c){0>Yi||(c.current=Rl[Yi],Rl[Yi]=null,Yi--)}function et(c,u){Yi++,Rl[Yi]=c.current,c.current=u}var Xi={},nr=$n(Xi),_r=$n(!1),ta=Xi;function Za(c,u){var m=c.type.contextTypes;if(!m)return Xi;var y=c.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===u)return y.__reactInternalMemoizedMaskedChildContext;var N={},E;for(E in m)N[E]=u[E];return y&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=u,c.__reactInternalMemoizedMaskedChildContext=N),N}function Nr(c){return c=c.childContextTypes,c!=null}function Yu(){Ke(_r),Ke(nr)}function p3(c,u,m){if(nr.current!==Xi)throw Error(a(168));et(nr,u),et(_r,m)}function m3(c,u,m){var y=c.stateNode;if(u=u.childContextTypes,typeof y.getChildContext!="function")return m;y=y.getChildContext();for(var N in y)if(!(N in u))throw Error(a(108,A(c)||"Unknown",N));return s({},m,y)}function Xu(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Xi,ta=nr.current,et(nr,c),et(_r,_r.current),!0}function g3(c,u,m){var y=c.stateNode;if(!y)throw Error(a(169));m?(c=m3(c,u,ta),y.__reactInternalMemoizedMergedChildContext=c,Ke(_r),Ke(nr),et(nr,c)):Ke(_r),et(_r,m)}var yn=Math.clz32?Math.clz32:SA,_A=Math.log,NA=Math.LN2;function SA(c){return c>>>=0,c===0?32:31-(_A(c)/NA|0)|0}var Qu=64,Zu=4194304;function Al(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Ju(c,u){var m=c.pendingLanes;if(m===0)return 0;var y=0,N=c.suspendedLanes,E=c.pingedLanes,z=m&268435455;if(z!==0){var Q=z&~N;Q!==0?y=Al(Q):(E&=z,E!==0&&(y=Al(E)))}else z=m&~N,z!==0?y=Al(z):E!==0&&(y=Al(E));if(y===0)return 0;if(u!==0&&u!==y&&!(u&N)&&(N=y&-y,E=u&-u,N>=E||N===16&&(E&4194240)!==0))return u;if(y&4&&(y|=m&16),u=c.entangledLanes,u!==0)for(c=c.entanglements,u&=y;0<u;)m=31-yn(u),N=1<<m,y|=c[m],u&=~N;return y}function jA(c,u){switch(c){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kA(c,u){for(var m=c.suspendedLanes,y=c.pingedLanes,N=c.expirationTimes,E=c.pendingLanes;0<E;){var z=31-yn(E),Q=1<<z,ie=N[z];ie===-1?(!(Q&m)||Q&y)&&(N[z]=jA(Q,u)):ie<=u&&(c.expiredLanes|=Q),E&=~Q}}function F0(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function x3(){var c=Qu;return Qu<<=1,!(Qu&4194240)&&(Qu=64),c}function L0(c){for(var u=[],m=0;31>m;m++)u.push(c);return u}function Il(c,u,m){c.pendingLanes|=u,u!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,u=31-yn(u),c[u]=m}function CA(c,u){var m=c.pendingLanes&~u;c.pendingLanes=u,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=u,c.mutableReadLanes&=u,c.entangledLanes&=u,u=c.entanglements;var y=c.eventTimes;for(c=c.expirationTimes;0<m;){var N=31-yn(m),E=1<<N;u[N]=0,y[N]=-1,c[N]=-1,m&=~E}}function O0(c,u){var m=c.entangledLanes|=u;for(c=c.entanglements;m;){var y=31-yn(m),N=1<<y;N&u|c[y]&u&&(c[y]|=u),m&=~N}}var Be=0;function v3(c){return c&=-c,1<c?4<c?c&268435455?16:536870912:4:1}var D0=i.unstable_scheduleCallback,y3=i.unstable_cancelCallback,EA=i.unstable_shouldYield,TA=i.unstable_requestPaint,$t=i.unstable_now,z0=i.unstable_ImmediatePriority,PA=i.unstable_UserBlockingPriority,U0=i.unstable_NormalPriority,RA=i.unstable_IdlePriority,ed=null,Bn=null;function AA(c){if(Bn&&typeof Bn.onCommitFiberRoot=="function")try{Bn.onCommitFiberRoot(ed,c,void 0,(c.current.flags&128)===128)}catch{}}function IA(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var bn=typeof Object.is=="function"?Object.is:IA,fi=null,td=!1,G0=!1;function b3(c){fi===null?fi=[c]:fi.push(c)}function MA(c){td=!0,b3(c)}function qn(){if(!G0&&fi!==null){G0=!0;var c=0,u=Be;try{var m=fi;for(Be=1;c<m.length;c++){var y=m[c];do y=y(!0);while(y!==null)}fi=null,td=!1}catch(N){throw fi!==null&&(fi=fi.slice(c+1)),D0(z0,qn),N}finally{Be=u,G0=!1}}return null}var Ja=[],eo=0,rd=null,nd=0,Qr=[],Zr=0,ra=null,pi=1,mi="";function na(c,u){Ja[eo++]=nd,Ja[eo++]=rd,rd=c,nd=u}function w3(c,u,m){Qr[Zr++]=pi,Qr[Zr++]=mi,Qr[Zr++]=ra,ra=c;var y=pi;c=mi;var N=32-yn(y)-1;y&=~(1<<N),m+=1;var E=32-yn(u)+N;if(30<E){var z=N-N%5;E=(y&(1<<z)-1).toString(32),y>>=z,N-=z,pi=1<<32-yn(u)+N|m<<N|y,mi=E+c}else pi=1<<E|m<<N|y,mi=c}function $0(c){c.return!==null&&(na(c,1),w3(c,1,0))}function B0(c){for(;c===rd;)rd=Ja[--eo],Ja[eo]=null,nd=Ja[--eo],Ja[eo]=null;for(;c===ra;)ra=Qr[--Zr],Qr[Zr]=null,mi=Qr[--Zr],Qr[Zr]=null,pi=Qr[--Zr],Qr[Zr]=null}var Or=null,Jr=null,at=!1,Ml=!1,wn=null;function _3(c,u){var m=sn(5,null,null,0);m.elementType="DELETED",m.stateNode=u,m.return=c,u=c.deletions,u===null?(c.deletions=[m],c.flags|=16):u.push(m)}function N3(c,u){switch(c.tag){case 5:return u=v0(u,c.type,c.pendingProps),u!==null?(c.stateNode=u,Or=c,Jr=N0(u),!0):!1;case 6:return u=y0(u,c.pendingProps),u!==null?(c.stateNode=u,Or=c,Jr=null,!0):!1;case 13:if(u=b0(u),u!==null){var m=ra!==null?{id:pi,overflow:mi}:null;return c.memoizedState={dehydrated:u,treeContext:m,retryLane:1073741824},m=sn(18,null,null,0),m.stateNode=u,m.return=c,c.child=m,Or=c,Jr=null,!0}return!1;default:return!1}}function q0(c){return(c.mode&1)!==0&&(c.flags&128)===0}function V0(c){if(at){var u=Jr;if(u){var m=u;if(!N3(c,u)){if(q0(c))throw Error(a(418));u=Qa(m);var y=Or;u&&N3(c,u)?_3(y,m):(c.flags=c.flags&-4097|2,at=!1,Or=c)}}else{if(q0(c))throw Error(a(418));c.flags=c.flags&-4097|2,at=!1,Or=c}}}function S3(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;Or=c}function sd(c){if(!me||c!==Or)return!1;if(!at)return S3(c),at=!0,!1;if(c.tag!==3&&(c.tag!==5||Wu(c.type)&&!ue(c.type,c.memoizedProps))){var u=Jr;if(u){if(q0(c))throw j3(),Error(a(418));for(;u;)_3(c,u),u=Qa(u)}}if(S3(c),c.tag===13){if(!me)throw Error(a(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));Jr=E0(c)}else Jr=Or?Qa(c.stateNode):null;return!0}function j3(){for(var c=Jr;c;)c=Qa(c)}function to(){me&&(Jr=Or=null,Ml=at=!1)}function H0(c){wn===null?wn=[c]:wn.push(c)}var FA=l.ReactCurrentBatchConfig;function ad(c,u){if(bn(c,u))return!0;if(typeof c!="object"||c===null||typeof u!="object"||u===null)return!1;var m=Object.keys(c),y=Object.keys(u);if(m.length!==y.length)return!1;for(y=0;y<m.length;y++){var N=m[y];if(!Ku.call(u,N)||!bn(c[N],u[N]))return!1}return!0}function LA(c){switch(c.tag){case 5:return ea(c.type);case 16:return ea("Lazy");case 13:return ea("Suspense");case 19:return ea("SuspenseList");case 0:case 2:case 15:return c=Pl(c.type,!1),c;case 11:return c=Pl(c.type.render,!1),c;case 1:return c=Pl(c.type,!0),c;default:return""}}function Fl(c,u,m){if(c=m.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(a(309));var y=m.stateNode}if(!y)throw Error(a(147,c));var N=y,E=""+c;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===E?u.ref:(u=function(z){var Q=N.refs;z===null?delete Q[E]:Q[E]=z},u._stringRef=E,u)}if(typeof c!="string")throw Error(a(284));if(!m._owner)throw Error(a(290,c))}return c}function od(c,u){throw c=Object.prototype.toString.call(u),Error(a(31,c==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":c))}function k3(c){var u=c._init;return u(c._payload)}function C3(c){function u(ne,Z){if(c){var se=ne.deletions;se===null?(ne.deletions=[Z],ne.flags|=16):se.push(Z)}}function m(ne,Z){if(!c)return null;for(;Z!==null;)u(ne,Z),Z=Z.sibling;return null}function y(ne,Z){for(ne=new Map;Z!==null;)Z.key!==null?ne.set(Z.key,Z):ne.set(Z.index,Z),Z=Z.sibling;return ne}function N(ne,Z){return ne=ns(ne,Z),ne.index=0,ne.sibling=null,ne}function E(ne,Z,se){return ne.index=se,c?(se=ne.alternate,se!==null?(se=se.index,se<Z?(ne.flags|=2,Z):se):(ne.flags|=2,Z)):(ne.flags|=1048576,Z)}function z(ne){return c&&ne.alternate===null&&(ne.flags|=2),ne}function Q(ne,Z,se,ve){return Z===null||Z.tag!==6?(Z=Gm(se,ne.mode,ve),Z.return=ne,Z):(Z=N(Z,se),Z.return=ne,Z)}function ie(ne,Z,se,ve){var Se=se.type;return Se===f?_e(ne,Z,se.props.children,ve,se.key):Z!==null&&(Z.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===v&&k3(Se)===Z.type)?(ve=N(Z,se.props),ve.ref=Fl(ne,Z,se),ve.return=ne,ve):(ve=Dd(se.type,se.key,se.props,null,ne.mode,ve),ve.ref=Fl(ne,Z,se),ve.return=ne,ve)}function de(ne,Z,se,ve){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==se.containerInfo||Z.stateNode.implementation!==se.implementation?(Z=$m(se,ne.mode,ve),Z.return=ne,Z):(Z=N(Z,se.children||[]),Z.return=ne,Z)}function _e(ne,Z,se,ve,Se){return Z===null||Z.tag!==7?(Z=ua(se,ne.mode,ve,Se),Z.return=ne,Z):(Z=N(Z,se),Z.return=ne,Z)}function Ee(ne,Z,se){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Z=Gm(""+Z,ne.mode,se),Z.return=ne,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case d:return se=Dd(Z.type,Z.key,Z.props,null,ne.mode,se),se.ref=Fl(ne,null,Z),se.return=ne,se;case h:return Z=$m(Z,ne.mode,se),Z.return=ne,Z;case v:var ve=Z._init;return Ee(ne,ve(Z._payload),se)}if(G(Z)||R(Z))return Z=ua(Z,ne.mode,se,null),Z.return=ne,Z;od(ne,Z)}return null}function xe(ne,Z,se,ve){var Se=Z!==null?Z.key:null;if(typeof se=="string"&&se!==""||typeof se=="number")return Se!==null?null:Q(ne,Z,""+se,ve);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case d:return se.key===Se?ie(ne,Z,se,ve):null;case h:return se.key===Se?de(ne,Z,se,ve):null;case v:return Se=se._init,xe(ne,Z,Se(se._payload),ve)}if(G(se)||R(se))return Se!==null?null:_e(ne,Z,se,ve,null);od(ne,se)}return null}function rt(ne,Z,se,ve,Se){if(typeof ve=="string"&&ve!==""||typeof ve=="number")return ne=ne.get(se)||null,Q(Z,ne,""+ve,Se);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case d:return ne=ne.get(ve.key===null?se:ve.key)||null,ie(Z,ne,ve,Se);case h:return ne=ne.get(ve.key===null?se:ve.key)||null,de(Z,ne,ve,Se);case v:var Re=ve._init;return rt(ne,Z,se,Re(ve._payload),Se)}if(G(ve)||R(ve))return ne=ne.get(se)||null,_e(Z,ne,ve,Se,null);od(Z,ve)}return null}function Ze(ne,Z,se,ve){for(var Se=null,Re=null,Te=Z,qe=Z=0,Vt=null;Te!==null&&qe<se.length;qe++){Te.index>qe?(Vt=Te,Te=null):Vt=Te.sibling;var Ve=xe(ne,Te,se[qe],ve);if(Ve===null){Te===null&&(Te=Vt);break}c&&Te&&Ve.alternate===null&&u(ne,Te),Z=E(Ve,Z,qe),Re===null?Se=Ve:Re.sibling=Ve,Re=Ve,Te=Vt}if(qe===se.length)return m(ne,Te),at&&na(ne,qe),Se;if(Te===null){for(;qe<se.length;qe++)Te=Ee(ne,se[qe],ve),Te!==null&&(Z=E(Te,Z,qe),Re===null?Se=Te:Re.sibling=Te,Re=Te);return at&&na(ne,qe),Se}for(Te=y(ne,Te);qe<se.length;qe++)Vt=rt(Te,ne,qe,se[qe],ve),Vt!==null&&(c&&Vt.alternate!==null&&Te.delete(Vt.key===null?qe:Vt.key),Z=E(Vt,Z,qe),Re===null?Se=Vt:Re.sibling=Vt,Re=Vt);return c&&Te.forEach(function(is){return u(ne,is)}),at&&na(ne,qe),Se}function Cr(ne,Z,se,ve){var Se=R(se);if(typeof Se!="function")throw Error(a(150));if(se=Se.call(se),se==null)throw Error(a(151));for(var Re=Se=null,Te=Z,qe=Z=0,Vt=null,Ve=se.next();Te!==null&&!Ve.done;qe++,Ve=se.next()){Te.index>qe?(Vt=Te,Te=null):Vt=Te.sibling;var is=xe(ne,Te,Ve.value,ve);if(is===null){Te===null&&(Te=Vt);break}c&&Te&&is.alternate===null&&u(ne,Te),Z=E(is,Z,qe),Re===null?Se=is:Re.sibling=is,Re=is,Te=Vt}if(Ve.done)return m(ne,Te),at&&na(ne,qe),Se;if(Te===null){for(;!Ve.done;qe++,Ve=se.next())Ve=Ee(ne,Ve.value,ve),Ve!==null&&(Z=E(Ve,Z,qe),Re===null?Se=Ve:Re.sibling=Ve,Re=Ve);return at&&na(ne,qe),Se}for(Te=y(ne,Te);!Ve.done;qe++,Ve=se.next())Ve=rt(Te,ne,qe,Ve.value,ve),Ve!==null&&(c&&Ve.alternate!==null&&Te.delete(Ve.key===null?qe:Ve.key),Z=E(Ve,Z,qe),Re===null?Se=Ve:Re.sibling=Ve,Re=Ve);return c&&Te.forEach(function(hI){return u(ne,hI)}),at&&na(ne,qe),Se}function yi(ne,Z,se,ve){if(typeof se=="object"&&se!==null&&se.type===f&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case d:e:{for(var Se=se.key,Re=Z;Re!==null;){if(Re.key===Se){if(Se=se.type,Se===f){if(Re.tag===7){m(ne,Re.sibling),Z=N(Re,se.props.children),Z.return=ne,ne=Z;break e}}else if(Re.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===v&&k3(Se)===Re.type){m(ne,Re.sibling),Z=N(Re,se.props),Z.ref=Fl(ne,Re,se),Z.return=ne,ne=Z;break e}m(ne,Re);break}else u(ne,Re);Re=Re.sibling}se.type===f?(Z=ua(se.props.children,ne.mode,ve,se.key),Z.return=ne,ne=Z):(ve=Dd(se.type,se.key,se.props,null,ne.mode,ve),ve.ref=Fl(ne,Z,se),ve.return=ne,ne=ve)}return z(ne);case h:e:{for(Re=se.key;Z!==null;){if(Z.key===Re)if(Z.tag===4&&Z.stateNode.containerInfo===se.containerInfo&&Z.stateNode.implementation===se.implementation){m(ne,Z.sibling),Z=N(Z,se.children||[]),Z.return=ne,ne=Z;break e}else{m(ne,Z);break}else u(ne,Z);Z=Z.sibling}Z=$m(se,ne.mode,ve),Z.return=ne,ne=Z}return z(ne);case v:return Re=se._init,yi(ne,Z,Re(se._payload),ve)}if(G(se))return Ze(ne,Z,se,ve);if(R(se))return Cr(ne,Z,se,ve);od(ne,se)}return typeof se=="string"&&se!==""||typeof se=="number"?(se=""+se,Z!==null&&Z.tag===6?(m(ne,Z.sibling),Z=N(Z,se),Z.return=ne,ne=Z):(m(ne,Z),Z=Gm(se,ne.mode,ve),Z.return=ne,ne=Z),z(ne)):m(ne,Z)}return yi}var ro=C3(!0),E3=C3(!1),ld=$n(null),cd=null,no=null,W0=null;function K0(){W0=no=cd=null}function T3(c,u,m){U?(et(ld,u._currentValue),u._currentValue=m):(et(ld,u._currentValue2),u._currentValue2=m)}function Y0(c){var u=ld.current;Ke(ld),U?c._currentValue=u:c._currentValue2=u}function X0(c,u,m){for(;c!==null;){var y=c.alternate;if((c.childLanes&u)!==u?(c.childLanes|=u,y!==null&&(y.childLanes|=u)):y!==null&&(y.childLanes&u)!==u&&(y.childLanes|=u),c===m)break;c=c.return}}function io(c,u){cd=c,W0=no=null,c=c.dependencies,c!==null&&c.firstContext!==null&&(c.lanes&u&&(Sr=!0),c.firstContext=null)}function en(c){var u=U?c._currentValue:c._currentValue2;if(W0!==c)if(c={context:c,memoizedValue:u,next:null},no===null){if(cd===null)throw Error(a(308));no=c,cd.dependencies={lanes:0,firstContext:c}}else no=no.next=c;return u}var ia=null;function Q0(c){ia===null?ia=[c]:ia.push(c)}function P3(c,u,m,y){var N=u.interleaved;return N===null?(m.next=m,Q0(u)):(m.next=N.next,N.next=m),u.interleaved=m,Vn(c,y)}function Vn(c,u){c.lanes|=u;var m=c.alternate;for(m!==null&&(m.lanes|=u),m=c,c=c.return;c!==null;)c.childLanes|=u,m=c.alternate,m!==null&&(m.childLanes|=u),m=c,c=c.return;return m.tag===3?m.stateNode:null}var Qi=!1;function Z0(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function R3(c,u){c=c.updateQueue,u.updateQueue===c&&(u.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function gi(c,u){return{eventTime:c,lane:u,tag:0,payload:null,callback:null,next:null}}function Zi(c,u,m){var y=c.updateQueue;if(y===null)return null;if(y=y.shared,Le&2){var N=y.pending;return N===null?u.next=u:(u.next=N.next,N.next=u),y.pending=u,Vn(c,m)}return N=y.interleaved,N===null?(u.next=u,Q0(y)):(u.next=N.next,N.next=u),y.interleaved=u,Vn(c,m)}function ud(c,u,m){if(u=u.updateQueue,u!==null&&(u=u.shared,(m&4194240)!==0)){var y=u.lanes;y&=c.pendingLanes,m|=y,u.lanes=m,O0(c,m)}}function A3(c,u){var m=c.updateQueue,y=c.alternate;if(y!==null&&(y=y.updateQueue,m===y)){var N=null,E=null;if(m=m.firstBaseUpdate,m!==null){do{var z={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};E===null?N=E=z:E=E.next=z,m=m.next}while(m!==null);E===null?N=E=u:E=E.next=u}else N=E=u;m={baseState:y.baseState,firstBaseUpdate:N,lastBaseUpdate:E,shared:y.shared,effects:y.effects},c.updateQueue=m;return}c=m.lastBaseUpdate,c===null?m.firstBaseUpdate=u:c.next=u,m.lastBaseUpdate=u}function dd(c,u,m,y){var N=c.updateQueue;Qi=!1;var E=N.firstBaseUpdate,z=N.lastBaseUpdate,Q=N.shared.pending;if(Q!==null){N.shared.pending=null;var ie=Q,de=ie.next;ie.next=null,z===null?E=de:z.next=de,z=ie;var _e=c.alternate;_e!==null&&(_e=_e.updateQueue,Q=_e.lastBaseUpdate,Q!==z&&(Q===null?_e.firstBaseUpdate=de:Q.next=de,_e.lastBaseUpdate=ie))}if(E!==null){var Ee=N.baseState;z=0,_e=de=ie=null,Q=E;do{var xe=Q.lane,rt=Q.eventTime;if((y&xe)===xe){_e!==null&&(_e=_e.next={eventTime:rt,lane:0,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null});e:{var Ze=c,Cr=Q;switch(xe=u,rt=m,Cr.tag){case 1:if(Ze=Cr.payload,typeof Ze=="function"){Ee=Ze.call(rt,Ee,xe);break e}Ee=Ze;break e;case 3:Ze.flags=Ze.flags&-65537|128;case 0:if(Ze=Cr.payload,xe=typeof Ze=="function"?Ze.call(rt,Ee,xe):Ze,xe==null)break e;Ee=s({},Ee,xe);break e;case 2:Qi=!0}}Q.callback!==null&&Q.lane!==0&&(c.flags|=64,xe=N.effects,xe===null?N.effects=[Q]:xe.push(Q))}else rt={eventTime:rt,lane:xe,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},_e===null?(de=_e=rt,ie=Ee):_e=_e.next=rt,z|=xe;if(Q=Q.next,Q===null){if(Q=N.shared.pending,Q===null)break;xe=Q,Q=xe.next,xe.next=null,N.lastBaseUpdate=xe,N.shared.pending=null}}while(1);if(_e===null&&(ie=Ee),N.baseState=ie,N.firstBaseUpdate=de,N.lastBaseUpdate=_e,u=N.shared.interleaved,u!==null){N=u;do z|=N.lane,N=N.next;while(N!==u)}else E===null&&(N.shared.lanes=0);aa|=z,c.lanes=z,c.memoizedState=Ee}}function I3(c,u,m){if(c=u.effects,u.effects=null,c!==null)for(u=0;u<c.length;u++){var y=c[u],N=y.callback;if(N!==null){if(y.callback=null,y=m,typeof N!="function")throw Error(a(191,N));N.call(y)}}}var Ll={},tn=$n(Ll),Ol=$n(Ll),so=$n(Ll);function Hn(c){if(c===Ll)throw Error(a(174));return c}function J0(c,u){et(so,u),et(Ol,c),et(tn,Ll),c=Y(u),Ke(tn),et(tn,c)}function ao(){Ke(tn),Ke(Ol),Ke(so)}function M3(c){var u=Hn(so.current),m=Hn(tn.current);u=K(m,c.type,u),m!==u&&(et(Ol,c),et(tn,u))}function em(c){Ol.current===c&&(Ke(tn),Ke(Ol))}var ft=$n(0);function hd(c){for(var u=c;u!==null;){if(u.tag===13){var m=u.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||Vu(m)||Cl(m)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if(u.flags&128)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===c)break;for(;u.sibling===null;){if(u.return===null||u.return===c)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var tm=[];function rm(){for(var c=0;c<tm.length;c++){var u=tm[c];U?u._workInProgressVersionPrimary=null:u._workInProgressVersionSecondary=null}tm.length=0}var fd=l.ReactCurrentDispatcher,nm=l.ReactCurrentBatchConfig,sa=0,pt=null,Mt=null,Bt=null,pd=!1,Dl=!1,zl=0,OA=0;function ir(){throw Error(a(321))}function im(c,u){if(u===null)return!1;for(var m=0;m<u.length&&m<c.length;m++)if(!bn(c[m],u[m]))return!1;return!0}function sm(c,u,m,y,N,E){if(sa=E,pt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,fd.current=c===null||c.memoizedState===null?GA:$A,c=m(y,N),Dl){E=0;do{if(Dl=!1,zl=0,25<=E)throw Error(a(301));E+=1,Bt=Mt=null,u.updateQueue=null,fd.current=BA,c=m(y,N)}while(Dl)}if(fd.current=xd,u=Mt!==null&&Mt.next!==null,sa=0,Bt=Mt=pt=null,pd=!1,u)throw Error(a(300));return c}function am(){var c=zl!==0;return zl=0,c}function Wn(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?pt.memoizedState=Bt=c:Bt=Bt.next=c,Bt}function rn(){if(Mt===null){var c=pt.alternate;c=c!==null?c.memoizedState:null}else c=Mt.next;var u=Bt===null?pt.memoizedState:Bt.next;if(u!==null)Bt=u,Mt=c;else{if(c===null)throw Error(a(310));Mt=c,c={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},Bt===null?pt.memoizedState=Bt=c:Bt=Bt.next=c}return Bt}function Ul(c,u){return typeof u=="function"?u(c):u}function om(c){var u=rn(),m=u.queue;if(m===null)throw Error(a(311));m.lastRenderedReducer=c;var y=Mt,N=y.baseQueue,E=m.pending;if(E!==null){if(N!==null){var z=N.next;N.next=E.next,E.next=z}y.baseQueue=N=E,m.pending=null}if(N!==null){E=N.next,y=y.baseState;var Q=z=null,ie=null,de=E;do{var _e=de.lane;if((sa&_e)===_e)ie!==null&&(ie=ie.next={lane:0,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null}),y=de.hasEagerState?de.eagerState:c(y,de.action);else{var Ee={lane:_e,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null};ie===null?(Q=ie=Ee,z=y):ie=ie.next=Ee,pt.lanes|=_e,aa|=_e}de=de.next}while(de!==null&&de!==E);ie===null?z=y:ie.next=Q,bn(y,u.memoizedState)||(Sr=!0),u.memoizedState=y,u.baseState=z,u.baseQueue=ie,m.lastRenderedState=y}if(c=m.interleaved,c!==null){N=c;do E=N.lane,pt.lanes|=E,aa|=E,N=N.next;while(N!==c)}else N===null&&(m.lanes=0);return[u.memoizedState,m.dispatch]}function lm(c){var u=rn(),m=u.queue;if(m===null)throw Error(a(311));m.lastRenderedReducer=c;var y=m.dispatch,N=m.pending,E=u.memoizedState;if(N!==null){m.pending=null;var z=N=N.next;do E=c(E,z.action),z=z.next;while(z!==N);bn(E,u.memoizedState)||(Sr=!0),u.memoizedState=E,u.baseQueue===null&&(u.baseState=E),m.lastRenderedState=E}return[E,y]}function F3(){}function L3(c,u){var m=pt,y=rn(),N=u(),E=!bn(y.memoizedState,N);if(E&&(y.memoizedState=N,Sr=!0),y=y.queue,cm(z3.bind(null,m,y,c),[c]),y.getSnapshot!==u||E||Bt!==null&&Bt.memoizedState.tag&1){if(m.flags|=2048,Gl(9,D3.bind(null,m,y,N,u),void 0,null),qt===null)throw Error(a(349));sa&30||O3(m,u,N)}return N}function O3(c,u,m){c.flags|=16384,c={getSnapshot:u,value:m},u=pt.updateQueue,u===null?(u={lastEffect:null,stores:null},pt.updateQueue=u,u.stores=[c]):(m=u.stores,m===null?u.stores=[c]:m.push(c))}function D3(c,u,m,y){u.value=m,u.getSnapshot=y,U3(u)&&G3(c)}function z3(c,u,m){return m(function(){U3(u)&&G3(c)})}function U3(c){var u=c.getSnapshot;c=c.value;try{var m=u();return!bn(c,m)}catch{return!0}}function G3(c){var u=Vn(c,1);u!==null&&nn(u,c,1,-1)}function $3(c){var u=Wn();return typeof c=="function"&&(c=c()),u.memoizedState=u.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ul,lastRenderedState:c},u.queue=c,c=c.dispatch=UA.bind(null,pt,c),[u.memoizedState,c]}function Gl(c,u,m,y){return c={tag:c,create:u,destroy:m,deps:y,next:null},u=pt.updateQueue,u===null?(u={lastEffect:null,stores:null},pt.updateQueue=u,u.lastEffect=c.next=c):(m=u.lastEffect,m===null?u.lastEffect=c.next=c:(y=m.next,m.next=c,c.next=y,u.lastEffect=c)),c}function B3(){return rn().memoizedState}function md(c,u,m,y){var N=Wn();pt.flags|=c,N.memoizedState=Gl(1|u,m,void 0,y===void 0?null:y)}function gd(c,u,m,y){var N=rn();y=y===void 0?null:y;var E=void 0;if(Mt!==null){var z=Mt.memoizedState;if(E=z.destroy,y!==null&&im(y,z.deps)){N.memoizedState=Gl(u,m,E,y);return}}pt.flags|=c,N.memoizedState=Gl(1|u,m,E,y)}function q3(c,u){return md(8390656,8,c,u)}function cm(c,u){return gd(2048,8,c,u)}function V3(c,u){return gd(4,2,c,u)}function H3(c,u){return gd(4,4,c,u)}function W3(c,u){if(typeof u=="function")return c=c(),u(c),function(){u(null)};if(u!=null)return c=c(),u.current=c,function(){u.current=null}}function K3(c,u,m){return m=m!=null?m.concat([c]):null,gd(4,4,W3.bind(null,u,c),m)}function um(){}function Y3(c,u){var m=rn();u=u===void 0?null:u;var y=m.memoizedState;return y!==null&&u!==null&&im(u,y[1])?y[0]:(m.memoizedState=[c,u],c)}function X3(c,u){var m=rn();u=u===void 0?null:u;var y=m.memoizedState;return y!==null&&u!==null&&im(u,y[1])?y[0]:(c=c(),m.memoizedState=[c,u],c)}function Q3(c,u,m){return sa&21?(bn(m,u)||(m=x3(),pt.lanes|=m,aa|=m,c.baseState=!0),u):(c.baseState&&(c.baseState=!1,Sr=!0),c.memoizedState=m)}function DA(c,u){var m=Be;Be=m!==0&&4>m?m:4,c(!0);var y=nm.transition;nm.transition={};try{c(!1),u()}finally{Be=m,nm.transition=y}}function Z3(){return rn().memoizedState}function zA(c,u,m){var y=ts(c);if(m={lane:y,action:m,hasEagerState:!1,eagerState:null,next:null},J3(c))e4(u,m);else if(m=P3(c,u,m,y),m!==null){var N=or();nn(m,c,y,N),t4(m,u,y)}}function UA(c,u,m){var y=ts(c),N={lane:y,action:m,hasEagerState:!1,eagerState:null,next:null};if(J3(c))e4(u,N);else{var E=c.alternate;if(c.lanes===0&&(E===null||E.lanes===0)&&(E=u.lastRenderedReducer,E!==null))try{var z=u.lastRenderedState,Q=E(z,m);if(N.hasEagerState=!0,N.eagerState=Q,bn(Q,z)){var ie=u.interleaved;ie===null?(N.next=N,Q0(u)):(N.next=ie.next,ie.next=N),u.interleaved=N;return}}catch{}finally{}m=P3(c,u,N,y),m!==null&&(N=or(),nn(m,c,y,N),t4(m,u,y))}}function J3(c){var u=c.alternate;return c===pt||u!==null&&u===pt}function e4(c,u){Dl=pd=!0;var m=c.pending;m===null?u.next=u:(u.next=m.next,m.next=u),c.pending=u}function t4(c,u,m){if(m&4194240){var y=u.lanes;y&=c.pendingLanes,m|=y,u.lanes=m,O0(c,m)}}var xd={readContext:en,useCallback:ir,useContext:ir,useEffect:ir,useImperativeHandle:ir,useInsertionEffect:ir,useLayoutEffect:ir,useMemo:ir,useReducer:ir,useRef:ir,useState:ir,useDebugValue:ir,useDeferredValue:ir,useTransition:ir,useMutableSource:ir,useSyncExternalStore:ir,useId:ir,unstable_isNewReconciler:!1},GA={readContext:en,useCallback:function(c,u){return Wn().memoizedState=[c,u===void 0?null:u],c},useContext:en,useEffect:q3,useImperativeHandle:function(c,u,m){return m=m!=null?m.concat([c]):null,md(4194308,4,W3.bind(null,u,c),m)},useLayoutEffect:function(c,u){return md(4194308,4,c,u)},useInsertionEffect:function(c,u){return md(4,2,c,u)},useMemo:function(c,u){var m=Wn();return u=u===void 0?null:u,c=c(),m.memoizedState=[c,u],c},useReducer:function(c,u,m){var y=Wn();return u=m!==void 0?m(u):u,y.memoizedState=y.baseState=u,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:u},y.queue=c,c=c.dispatch=zA.bind(null,pt,c),[y.memoizedState,c]},useRef:function(c){var u=Wn();return c={current:c},u.memoizedState=c},useState:$3,useDebugValue:um,useDeferredValue:function(c){return Wn().memoizedState=c},useTransition:function(){var c=$3(!1),u=c[0];return c=DA.bind(null,c[1]),Wn().memoizedState=c,[u,c]},useMutableSource:function(){},useSyncExternalStore:function(c,u,m){var y=pt,N=Wn();if(at){if(m===void 0)throw Error(a(407));m=m()}else{if(m=u(),qt===null)throw Error(a(349));sa&30||O3(y,u,m)}N.memoizedState=m;var E={value:m,getSnapshot:u};return N.queue=E,q3(z3.bind(null,y,E,c),[c]),y.flags|=2048,Gl(9,D3.bind(null,y,E,m,u),void 0,null),m},useId:function(){var c=Wn(),u=qt.identifierPrefix;if(at){var m=mi,y=pi;m=(y&~(1<<32-yn(y)-1)).toString(32)+m,u=":"+u+"R"+m,m=zl++,0<m&&(u+="H"+m.toString(32)),u+=":"}else m=OA++,u=":"+u+"r"+m.toString(32)+":";return c.memoizedState=u},unstable_isNewReconciler:!1},$A={readContext:en,useCallback:Y3,useContext:en,useEffect:cm,useImperativeHandle:K3,useInsertionEffect:V3,useLayoutEffect:H3,useMemo:X3,useReducer:om,useRef:B3,useState:function(){return om(Ul)},useDebugValue:um,useDeferredValue:function(c){var u=rn();return Q3(u,Mt.memoizedState,c)},useTransition:function(){var c=om(Ul)[0],u=rn().memoizedState;return[c,u]},useMutableSource:F3,useSyncExternalStore:L3,useId:Z3,unstable_isNewReconciler:!1},BA={readContext:en,useCallback:Y3,useContext:en,useEffect:cm,useImperativeHandle:K3,useInsertionEffect:V3,useLayoutEffect:H3,useMemo:X3,useReducer:lm,useRef:B3,useState:function(){return lm(Ul)},useDebugValue:um,useDeferredValue:function(c){var u=rn();return Mt===null?u.memoizedState=c:Q3(u,Mt.memoizedState,c)},useTransition:function(){var c=lm(Ul)[0],u=rn().memoizedState;return[c,u]},useMutableSource:F3,useSyncExternalStore:L3,useId:Z3,unstable_isNewReconciler:!1};function _n(c,u){if(c&&c.defaultProps){u=s({},u),c=c.defaultProps;for(var m in c)u[m]===void 0&&(u[m]=c[m]);return u}return u}function dm(c,u,m,y){u=c.memoizedState,m=m(y,u),m=m==null?u:s({},u,m),c.memoizedState=m,c.lanes===0&&(c.updateQueue.baseState=m)}var vd={isMounted:function(c){return(c=c._reactInternals)?O(c)===c:!1},enqueueSetState:function(c,u,m){c=c._reactInternals;var y=or(),N=ts(c),E=gi(y,N);E.payload=u,m!=null&&(E.callback=m),u=Zi(c,E,N),u!==null&&(nn(u,c,N,y),ud(u,c,N))},enqueueReplaceState:function(c,u,m){c=c._reactInternals;var y=or(),N=ts(c),E=gi(y,N);E.tag=1,E.payload=u,m!=null&&(E.callback=m),u=Zi(c,E,N),u!==null&&(nn(u,c,N,y),ud(u,c,N))},enqueueForceUpdate:function(c,u){c=c._reactInternals;var m=or(),y=ts(c),N=gi(m,y);N.tag=2,u!=null&&(N.callback=u),u=Zi(c,N,y),u!==null&&(nn(u,c,y,m),ud(u,c,y))}};function r4(c,u,m,y,N,E,z){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(y,E,z):u.prototype&&u.prototype.isPureReactComponent?!ad(m,y)||!ad(N,E):!0}function n4(c,u,m){var y=!1,N=Xi,E=u.contextType;return typeof E=="object"&&E!==null?E=en(E):(N=Nr(u)?ta:nr.current,y=u.contextTypes,E=(y=y!=null)?Za(c,N):Xi),u=new u(m,E),c.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=vd,c.stateNode=u,u._reactInternals=c,y&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=N,c.__reactInternalMemoizedMaskedChildContext=E),u}function i4(c,u,m,y){c=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(m,y),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(m,y),u.state!==c&&vd.enqueueReplaceState(u,u.state,null)}function hm(c,u,m,y){var N=c.stateNode;N.props=m,N.state=c.memoizedState,N.refs={},Z0(c);var E=u.contextType;typeof E=="object"&&E!==null?N.context=en(E):(E=Nr(u)?ta:nr.current,N.context=Za(c,E)),N.state=c.memoizedState,E=u.getDerivedStateFromProps,typeof E=="function"&&(dm(c,u,E,m),N.state=c.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(u=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),u!==N.state&&vd.enqueueReplaceState(N,N.state,null),dd(c,m,N,y),N.state=c.memoizedState),typeof N.componentDidMount=="function"&&(c.flags|=4194308)}function oo(c,u){try{var m="",y=u;do m+=LA(y),y=y.return;while(y);var N=m}catch(E){N=`
Error generating stack: `+E.message+`
`+E.stack}return{value:c,source:u,stack:N,digest:null}}function fm(c,u,m){return{value:c,source:null,stack:m??null,digest:u??null}}function pm(c,u){try{console.error(u.value)}catch(m){setTimeout(function(){throw m})}}var qA=typeof WeakMap=="function"?WeakMap:Map;function s4(c,u,m){m=gi(-1,m),m.tag=3,m.payload={element:null};var y=u.value;return m.callback=function(){Ad||(Ad=!0,Mm=y),pm(c,u)},m}function a4(c,u,m){m=gi(-1,m),m.tag=3;var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var N=u.value;m.payload=function(){return y(N)},m.callback=function(){pm(c,u)}}var E=c.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(m.callback=function(){pm(c,u),typeof y!="function"&&(Ji===null?Ji=new Set([this]):Ji.add(this));var z=u.stack;this.componentDidCatch(u.value,{componentStack:z!==null?z:""})}),m}function o4(c,u,m){var y=c.pingCache;if(y===null){y=c.pingCache=new qA;var N=new Set;y.set(u,N)}else N=y.get(u),N===void 0&&(N=new Set,y.set(u,N));N.has(m)||(N.add(m),c=iI.bind(null,c,u,m),u.then(c,c))}function l4(c){do{var u;if((u=c.tag===13)&&(u=c.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return c;c=c.return}while(c!==null);return null}function c4(c,u,m,y,N){return c.mode&1?(c.flags|=65536,c.lanes=N,c):(c===u?c.flags|=65536:(c.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(u=gi(-1,1),u.tag=2,Zi(m,u,1))),m.lanes|=1),c)}var VA=l.ReactCurrentOwner,Sr=!1;function gr(c,u,m,y){u.child=c===null?E3(u,null,m,y):ro(u,c.child,m,y)}function u4(c,u,m,y,N){m=m.render;var E=u.ref;return io(u,N),y=sm(c,u,m,y,E,N),m=am(),c!==null&&!Sr?(u.updateQueue=c.updateQueue,u.flags&=-2053,c.lanes&=~N,xi(c,u,N)):(at&&m&&$0(u),u.flags|=1,gr(c,u,y,N),u.child)}function d4(c,u,m,y,N){if(c===null){var E=m.type;return typeof E=="function"&&!Um(E)&&E.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(u.tag=15,u.type=E,h4(c,u,E,y,N)):(c=Dd(m.type,null,y,u,u.mode,N),c.ref=u.ref,c.return=u,u.child=c)}if(E=c.child,!(c.lanes&N)){var z=E.memoizedProps;if(m=m.compare,m=m!==null?m:ad,m(z,y)&&c.ref===u.ref)return xi(c,u,N)}return u.flags|=1,c=ns(E,y),c.ref=u.ref,c.return=u,u.child=c}function h4(c,u,m,y,N){if(c!==null){var E=c.memoizedProps;if(ad(E,y)&&c.ref===u.ref)if(Sr=!1,u.pendingProps=y=E,(c.lanes&N)!==0)c.flags&131072&&(Sr=!0);else return u.lanes=c.lanes,xi(c,u,N)}return mm(c,u,m,y,N)}function f4(c,u,m){var y=u.pendingProps,N=y.children,E=c!==null?c.memoizedState:null;if(y.mode==="hidden")if(!(u.mode&1))u.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(co,Dr),Dr|=m;else{if(!(m&1073741824))return c=E!==null?E.baseLanes|m:m,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:c,cachePool:null,transitions:null},u.updateQueue=null,et(co,Dr),Dr|=c,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=E!==null?E.baseLanes:m,et(co,Dr),Dr|=y}else E!==null?(y=E.baseLanes|m,u.memoizedState=null):y=m,et(co,Dr),Dr|=y;return gr(c,u,N,m),u.child}function p4(c,u){var m=u.ref;(c===null&&m!==null||c!==null&&c.ref!==m)&&(u.flags|=512,u.flags|=2097152)}function mm(c,u,m,y,N){var E=Nr(m)?ta:nr.current;return E=Za(u,E),io(u,N),m=sm(c,u,m,y,E,N),y=am(),c!==null&&!Sr?(u.updateQueue=c.updateQueue,u.flags&=-2053,c.lanes&=~N,xi(c,u,N)):(at&&y&&$0(u),u.flags|=1,gr(c,u,m,N),u.child)}function m4(c,u,m,y,N){if(Nr(m)){var E=!0;Xu(u)}else E=!1;if(io(u,N),u.stateNode===null)bd(c,u),n4(u,m,y),hm(u,m,y,N),y=!0;else if(c===null){var z=u.stateNode,Q=u.memoizedProps;z.props=Q;var ie=z.context,de=m.contextType;typeof de=="object"&&de!==null?de=en(de):(de=Nr(m)?ta:nr.current,de=Za(u,de));var _e=m.getDerivedStateFromProps,Ee=typeof _e=="function"||typeof z.getSnapshotBeforeUpdate=="function";Ee||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(Q!==y||ie!==de)&&i4(u,z,y,de),Qi=!1;var xe=u.memoizedState;z.state=xe,dd(u,y,z,N),ie=u.memoizedState,Q!==y||xe!==ie||_r.current||Qi?(typeof _e=="function"&&(dm(u,m,_e,y),ie=u.memoizedState),(Q=Qi||r4(u,m,Q,y,xe,ie,de))?(Ee||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(u.flags|=4194308)):(typeof z.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=y,u.memoizedState=ie),z.props=y,z.state=ie,z.context=de,y=Q):(typeof z.componentDidMount=="function"&&(u.flags|=4194308),y=!1)}else{z=u.stateNode,R3(c,u),Q=u.memoizedProps,de=u.type===u.elementType?Q:_n(u.type,Q),z.props=de,Ee=u.pendingProps,xe=z.context,ie=m.contextType,typeof ie=="object"&&ie!==null?ie=en(ie):(ie=Nr(m)?ta:nr.current,ie=Za(u,ie));var rt=m.getDerivedStateFromProps;(_e=typeof rt=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(Q!==Ee||xe!==ie)&&i4(u,z,y,ie),Qi=!1,xe=u.memoizedState,z.state=xe,dd(u,y,z,N);var Ze=u.memoizedState;Q!==Ee||xe!==Ze||_r.current||Qi?(typeof rt=="function"&&(dm(u,m,rt,y),Ze=u.memoizedState),(de=Qi||r4(u,m,de,y,xe,Ze,ie)||!1)?(_e||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(y,Ze,ie),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(y,Ze,ie)),typeof z.componentDidUpdate=="function"&&(u.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof z.componentDidUpdate!="function"||Q===c.memoizedProps&&xe===c.memoizedState||(u.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||Q===c.memoizedProps&&xe===c.memoizedState||(u.flags|=1024),u.memoizedProps=y,u.memoizedState=Ze),z.props=y,z.state=Ze,z.context=ie,y=de):(typeof z.componentDidUpdate!="function"||Q===c.memoizedProps&&xe===c.memoizedState||(u.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||Q===c.memoizedProps&&xe===c.memoizedState||(u.flags|=1024),y=!1)}return gm(c,u,m,y,E,N)}function gm(c,u,m,y,N,E){p4(c,u);var z=(u.flags&128)!==0;if(!y&&!z)return N&&g3(u,m,!1),xi(c,u,E);y=u.stateNode,VA.current=u;var Q=z&&typeof m.getDerivedStateFromError!="function"?null:y.render();return u.flags|=1,c!==null&&z?(u.child=ro(u,c.child,null,E),u.child=ro(u,null,Q,E)):gr(c,u,Q,E),u.memoizedState=y.state,N&&g3(u,m,!0),u.child}function g4(c){var u=c.stateNode;u.pendingContext?p3(c,u.pendingContext,u.pendingContext!==u.context):u.context&&p3(c,u.context,!1),J0(c,u.containerInfo)}function x4(c,u,m,y,N){return to(),H0(N),u.flags|=256,gr(c,u,m,y),u.child}var xm={dehydrated:null,treeContext:null,retryLane:0};function vm(c){return{baseLanes:c,cachePool:null,transitions:null}}function v4(c,u,m){var y=u.pendingProps,N=ft.current,E=!1,z=(u.flags&128)!==0,Q;if((Q=z)||(Q=c!==null&&c.memoizedState===null?!1:(N&2)!==0),Q?(E=!0,u.flags&=-129):(c===null||c.memoizedState!==null)&&(N|=1),et(ft,N&1),c===null)return V0(u),c=u.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?(u.mode&1?Cl(c)?u.lanes=8:u.lanes=1073741824:u.lanes=1,null):(z=y.children,c=y.fallback,E?(y=u.mode,E=u.child,z={mode:"hidden",children:z},!(y&1)&&E!==null?(E.childLanes=0,E.pendingProps=z):E=zd(z,y,0,null),c=ua(c,y,m,null),E.return=u,c.return=u,E.sibling=c,u.child=E,u.child.memoizedState=vm(m),u.memoizedState=xm,c):ym(u,z));if(N=c.memoizedState,N!==null&&(Q=N.dehydrated,Q!==null))return HA(c,u,z,y,Q,N,m);if(E){E=y.fallback,z=u.mode,N=c.child,Q=N.sibling;var ie={mode:"hidden",children:y.children};return!(z&1)&&u.child!==N?(y=u.child,y.childLanes=0,y.pendingProps=ie,u.deletions=null):(y=ns(N,ie),y.subtreeFlags=N.subtreeFlags&14680064),Q!==null?E=ns(Q,E):(E=ua(E,z,m,null),E.flags|=2),E.return=u,y.return=u,y.sibling=E,u.child=y,y=E,E=u.child,z=c.child.memoizedState,z=z===null?vm(m):{baseLanes:z.baseLanes|m,cachePool:null,transitions:z.transitions},E.memoizedState=z,E.childLanes=c.childLanes&~m,u.memoizedState=xm,y}return E=c.child,c=E.sibling,y=ns(E,{mode:"visible",children:y.children}),!(u.mode&1)&&(y.lanes=m),y.return=u,y.sibling=null,c!==null&&(m=u.deletions,m===null?(u.deletions=[c],u.flags|=16):m.push(c)),u.child=y,u.memoizedState=null,y}function ym(c,u){return u=zd({mode:"visible",children:u},c.mode,0,null),u.return=c,c.child=u}function yd(c,u,m,y){return y!==null&&H0(y),ro(u,c.child,null,m),c=ym(u,u.pendingProps.children),c.flags|=2,u.memoizedState=null,c}function HA(c,u,m,y,N,E,z){if(m)return u.flags&256?(u.flags&=-257,y=fm(Error(a(422))),yd(c,u,z,y)):u.memoizedState!==null?(u.child=c.child,u.flags|=128,null):(E=y.fallback,N=u.mode,y=zd({mode:"visible",children:y.children},N,0,null),E=ua(E,N,z,null),E.flags|=2,y.return=u,E.return=u,y.sibling=E,u.child=y,u.mode&1&&ro(u,c.child,null,z),u.child.memoizedState=vm(z),u.memoizedState=xm,E);if(!(u.mode&1))return yd(c,u,z,null);if(Cl(N))return y=w0(N).digest,E=Error(a(419)),y=fm(E,y,void 0),yd(c,u,z,y);if(m=(z&c.childLanes)!==0,Sr||m){if(y=qt,y!==null){switch(z&-z){case 4:N=2;break;case 16:N=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:N=32;break;case 536870912:N=268435456;break;default:N=0}N=N&(y.suspendedLanes|z)?0:N,N!==0&&N!==E.retryLane&&(E.retryLane=N,Vn(c,N),nn(y,c,N,-1))}return zm(),y=fm(Error(a(421))),yd(c,u,z,y)}return Vu(N)?(u.flags|=128,u.child=c.child,u=sI.bind(null,c),_0(N,u),null):(c=E.treeContext,me&&(Jr=Hu(N),Or=u,at=!0,wn=null,Ml=!1,c!==null&&(Qr[Zr++]=pi,Qr[Zr++]=mi,Qr[Zr++]=ra,pi=c.id,mi=c.overflow,ra=u)),u=ym(u,y.children),u.flags|=4096,u)}function y4(c,u,m){c.lanes|=u;var y=c.alternate;y!==null&&(y.lanes|=u),X0(c.return,u,m)}function bm(c,u,m,y,N){var E=c.memoizedState;E===null?c.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:y,tail:m,tailMode:N}:(E.isBackwards=u,E.rendering=null,E.renderingStartTime=0,E.last=y,E.tail=m,E.tailMode=N)}function b4(c,u,m){var y=u.pendingProps,N=y.revealOrder,E=y.tail;if(gr(c,u,y.children,m),y=ft.current,y&2)y=y&1|2,u.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=u.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&y4(c,m,u);else if(c.tag===19)y4(c,m,u);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break e;for(;c.sibling===null;){if(c.return===null||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}y&=1}if(et(ft,y),!(u.mode&1))u.memoizedState=null;else switch(N){case"forwards":for(m=u.child,N=null;m!==null;)c=m.alternate,c!==null&&hd(c)===null&&(N=m),m=m.sibling;m=N,m===null?(N=u.child,u.child=null):(N=m.sibling,m.sibling=null),bm(u,!1,N,m,E);break;case"backwards":for(m=null,N=u.child,u.child=null;N!==null;){if(c=N.alternate,c!==null&&hd(c)===null){u.child=N;break}c=N.sibling,N.sibling=m,m=N,N=c}bm(u,!0,m,null,E);break;case"together":bm(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function bd(c,u){!(u.mode&1)&&c!==null&&(c.alternate=null,u.alternate=null,u.flags|=2)}function xi(c,u,m){if(c!==null&&(u.dependencies=c.dependencies),aa|=u.lanes,!(m&u.childLanes))return null;if(c!==null&&u.child!==c.child)throw Error(a(153));if(u.child!==null){for(c=u.child,m=ns(c,c.pendingProps),u.child=m,m.return=u;c.sibling!==null;)c=c.sibling,m=m.sibling=ns(c,c.pendingProps),m.return=u;m.sibling=null}return u.child}function WA(c,u,m){switch(u.tag){case 3:g4(u),to();break;case 5:M3(u);break;case 1:Nr(u.type)&&Xu(u);break;case 4:J0(u,u.stateNode.containerInfo);break;case 10:T3(u,u.type._context,u.memoizedProps.value);break;case 13:var y=u.memoizedState;if(y!==null)return y.dehydrated!==null?(et(ft,ft.current&1),u.flags|=128,null):m&u.child.childLanes?v4(c,u,m):(et(ft,ft.current&1),c=xi(c,u,m),c!==null?c.sibling:null);et(ft,ft.current&1);break;case 19:if(y=(m&u.childLanes)!==0,c.flags&128){if(y)return b4(c,u,m);u.flags|=128}var N=u.memoizedState;if(N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),et(ft,ft.current),y)break;return null;case 22:case 23:return u.lanes=0,f4(c,u,m)}return xi(c,u,m)}function Kn(c){c.flags|=4}function w4(c,u){if(c!==null&&c.child===u.child)return!0;if(u.flags&16)return!1;for(c=u.child;c!==null;){if(c.flags&12854||c.subtreeFlags&12854)return!1;c=c.sibling}return!0}var $l,Bl,wd,_d;if(X)$l=function(c,u){for(var m=u.child;m!==null;){if(m.tag===5||m.tag===6)q(c,m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===u)break;for(;m.sibling===null;){if(m.return===null||m.return===u)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},Bl=function(){},wd=function(c,u,m,y,N){if(c=c.memoizedProps,c!==y){var E=u.stateNode,z=Hn(tn.current);m=ee(E,m,c,y,N,z),(u.updateQueue=m)&&Kn(u)}},_d=function(c,u,m,y){m!==y&&Kn(u)};else if(le){$l=function(c,u,m,y){for(var N=u.child;N!==null;){if(N.tag===5){var E=N.stateNode;m&&y&&(E=Bu(E,N.type,N.memoizedProps,N)),q(c,E)}else if(N.tag===6)E=N.stateNode,m&&y&&(E=qu(E,N.memoizedProps,N)),q(c,E);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)E=N.child,E!==null&&(E.return=N),$l(c,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===u)break;for(;N.sibling===null;){if(N.return===null||N.return===u)return;N=N.return}N.sibling.return=N.return,N=N.sibling}};var _4=function(c,u,m,y){for(var N=u.child;N!==null;){if(N.tag===5){var E=N.stateNode;m&&y&&(E=Bu(E,N.type,N.memoizedProps,N)),$u(c,E)}else if(N.tag===6)E=N.stateNode,m&&y&&(E=qu(E,N.memoizedProps,N)),$u(c,E);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)E=N.child,E!==null&&(E.return=N),_4(c,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===u)break;for(;N.sibling===null;){if(N.return===null||N.return===u)return;N=N.return}N.sibling.return=N.return,N=N.sibling}};Bl=function(c,u){var m=u.stateNode;if(!w4(c,u)){c=m.containerInfo;var y=Gu(c);_4(y,u,!1,!1),m.pendingChildren=y,Kn(u),x0(c,y)}},wd=function(c,u,m,y,N){var E=c.stateNode,z=c.memoizedProps;if((c=w4(c,u))&&z===y)u.stateNode=E;else{var Q=u.stateNode,ie=Hn(tn.current),de=null;z!==y&&(de=ee(Q,m,z,y,N,ie)),c&&de===null?u.stateNode=E:(E=hi(E,de,m,z,y,u,c,Q),J(E,m,y,N,ie)&&Kn(u),u.stateNode=E,c?Kn(u):$l(E,u,!1,!1))}},_d=function(c,u,m,y){m!==y?(c=Hn(so.current),m=Hn(tn.current),u.stateNode=pe(y,c,m,u),Kn(u)):u.stateNode=c.stateNode}}else Bl=function(){},wd=function(){},_d=function(){};function ql(c,u){if(!at)switch(c.tailMode){case"hidden":u=c.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?c.tail=null:m.sibling=null;break;case"collapsed":m=c.tail;for(var y=null;m!==null;)m.alternate!==null&&(y=m),m=m.sibling;y===null?u||c.tail===null?c.tail=null:c.tail.sibling=null:y.sibling=null}}function sr(c){var u=c.alternate!==null&&c.alternate.child===c.child,m=0,y=0;if(u)for(var N=c.child;N!==null;)m|=N.lanes|N.childLanes,y|=N.subtreeFlags&14680064,y|=N.flags&14680064,N.return=c,N=N.sibling;else for(N=c.child;N!==null;)m|=N.lanes|N.childLanes,y|=N.subtreeFlags,y|=N.flags,N.return=c,N=N.sibling;return c.subtreeFlags|=y,c.childLanes=m,u}function KA(c,u,m){var y=u.pendingProps;switch(B0(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sr(u),null;case 1:return Nr(u.type)&&Yu(),sr(u),null;case 3:return m=u.stateNode,ao(),Ke(_r),Ke(nr),rm(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(c===null||c.child===null)&&(sd(u)?Kn(u):c===null||c.memoizedState.isDehydrated&&!(u.flags&256)||(u.flags|=1024,wn!==null&&(Om(wn),wn=null))),Bl(c,u),sr(u),null;case 5:em(u),m=Hn(so.current);var N=u.type;if(c!==null&&u.stateNode!=null)wd(c,u,N,y,m),c.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!y){if(u.stateNode===null)throw Error(a(166));return sr(u),null}if(c=Hn(tn.current),sd(u)){if(!me)throw Error(a(175));c=j0(u.stateNode,u.type,u.memoizedProps,m,c,u,!Ml),u.updateQueue=c,c!==null&&Kn(u)}else{var E=D(N,y,m,c,u);$l(E,u,!1,!1),u.stateNode=E,J(E,N,y,m,c)&&Kn(u)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return sr(u),null;case 6:if(c&&u.stateNode!=null)_d(c,u,c.memoizedProps,y);else{if(typeof y!="string"&&u.stateNode===null)throw Error(a(166));if(c=Hn(so.current),m=Hn(tn.current),sd(u)){if(!me)throw Error(a(176));if(c=u.stateNode,m=u.memoizedProps,(y=k0(c,m,u,!Ml))&&(N=Or,N!==null))switch(N.tag){case 3:I0(N.stateNode.containerInfo,c,m,(N.mode&1)!==0);break;case 5:M0(N.type,N.memoizedProps,N.stateNode,c,m,(N.mode&1)!==0)}y&&Kn(u)}else u.stateNode=pe(y,c,m,u)}return sr(u),null;case 13:if(Ke(ft),y=u.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(at&&Jr!==null&&u.mode&1&&!(u.flags&128))j3(),to(),u.flags|=98560,N=!1;else if(N=sd(u),y!==null&&y.dehydrated!==null){if(c===null){if(!N)throw Error(a(318));if(!me)throw Error(a(344));if(N=u.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(a(317));C0(N,u)}else to(),!(u.flags&128)&&(u.memoizedState=null),u.flags|=4;sr(u),N=!1}else wn!==null&&(Om(wn),wn=null),N=!0;if(!N)return u.flags&65536?u:null}return u.flags&128?(u.lanes=m,u):(m=y!==null,m!==(c!==null&&c.memoizedState!==null)&&m&&(u.child.flags|=8192,u.mode&1&&(c===null||ft.current&1?Ft===0&&(Ft=3):zm())),u.updateQueue!==null&&(u.flags|=4),sr(u),null);case 4:return ao(),Bl(c,u),c===null&&ae(u.stateNode.containerInfo),sr(u),null;case 10:return Y0(u.type._context),sr(u),null;case 17:return Nr(u.type)&&Yu(),sr(u),null;case 19:if(Ke(ft),N=u.memoizedState,N===null)return sr(u),null;if(y=(u.flags&128)!==0,E=N.rendering,E===null)if(y)ql(N,!1);else{if(Ft!==0||c!==null&&c.flags&128)for(c=u.child;c!==null;){if(E=hd(c),E!==null){for(u.flags|=128,ql(N,!1),c=E.updateQueue,c!==null&&(u.updateQueue=c,u.flags|=4),u.subtreeFlags=0,c=m,m=u.child;m!==null;)y=m,N=c,y.flags&=14680066,E=y.alternate,E===null?(y.childLanes=0,y.lanes=N,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=E.childLanes,y.lanes=E.lanes,y.child=E.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=E.memoizedProps,y.memoizedState=E.memoizedState,y.updateQueue=E.updateQueue,y.type=E.type,N=E.dependencies,y.dependencies=N===null?null:{lanes:N.lanes,firstContext:N.firstContext}),m=m.sibling;return et(ft,ft.current&1|2),u.child}c=c.sibling}N.tail!==null&&$t()>Im&&(u.flags|=128,y=!0,ql(N,!1),u.lanes=4194304)}else{if(!y)if(c=hd(E),c!==null){if(u.flags|=128,y=!0,c=c.updateQueue,c!==null&&(u.updateQueue=c,u.flags|=4),ql(N,!0),N.tail===null&&N.tailMode==="hidden"&&!E.alternate&&!at)return sr(u),null}else 2*$t()-N.renderingStartTime>Im&&m!==1073741824&&(u.flags|=128,y=!0,ql(N,!1),u.lanes=4194304);N.isBackwards?(E.sibling=u.child,u.child=E):(c=N.last,c!==null?c.sibling=E:u.child=E,N.last=E)}return N.tail!==null?(u=N.tail,N.rendering=u,N.tail=u.sibling,N.renderingStartTime=$t(),u.sibling=null,c=ft.current,et(ft,y?c&1|2:c&1),u):(sr(u),null);case 22:case 23:return Dm(),m=u.memoizedState!==null,c!==null&&c.memoizedState!==null!==m&&(u.flags|=8192),m&&u.mode&1?Dr&1073741824&&(sr(u),X&&u.subtreeFlags&6&&(u.flags|=8192)):sr(u),null;case 24:return null;case 25:return null}throw Error(a(156,u.tag))}function YA(c,u){switch(B0(u),u.tag){case 1:return Nr(u.type)&&Yu(),c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 3:return ao(),Ke(_r),Ke(nr),rm(),c=u.flags,c&65536&&!(c&128)?(u.flags=c&-65537|128,u):null;case 5:return em(u),null;case 13:if(Ke(ft),c=u.memoizedState,c!==null&&c.dehydrated!==null){if(u.alternate===null)throw Error(a(340));to()}return c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 19:return Ke(ft),null;case 4:return ao(),null;case 10:return Y0(u.type._context),null;case 22:case 23:return Dm(),null;case 24:return null;default:return null}}var Nd=!1,ar=!1,XA=typeof WeakSet=="function"?WeakSet:Set,be=null;function lo(c,u){var m=c.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(y){ot(c,u,y)}else m.current=null}function wm(c,u,m){try{m()}catch(y){ot(c,u,y)}}var N4=!1;function QA(c,u){for(H(c.containerInfo),be=u;be!==null;)if(c=be,u=c.child,(c.subtreeFlags&1028)!==0&&u!==null)u.return=c,be=u;else for(;be!==null;){c=be;try{var m=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,N=m.memoizedState,E=c.stateNode,z=E.getSnapshotBeforeUpdate(c.elementType===c.type?y:_n(c.type,y),N);E.__reactInternalSnapshotBeforeUpdate=z}break;case 3:X&&Uu(c.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(Q){ot(c,c.return,Q)}if(u=c.sibling,u!==null){u.return=c.return,be=u;break}be=c.return}return m=N4,N4=!1,m}function Vl(c,u,m){var y=u.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var N=y=y.next;do{if((N.tag&c)===c){var E=N.destroy;N.destroy=void 0,E!==void 0&&wm(u,m,E)}N=N.next}while(N!==y)}}function Sd(c,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var m=u=u.next;do{if((m.tag&c)===c){var y=m.create;m.destroy=y()}m=m.next}while(m!==u)}}function _m(c){var u=c.ref;if(u!==null){var m=c.stateNode;switch(c.tag){case 5:c=B(m);break;default:c=m}typeof u=="function"?u(c):u.current=c}}function S4(c){var u=c.alternate;u!==null&&(c.alternate=null,S4(u)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(u=c.stateNode,u!==null&&fe(u)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function j4(c){return c.tag===5||c.tag===3||c.tag===4}function k4(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||j4(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Nm(c,u,m){var y=c.tag;if(y===5||y===6)c=c.stateNode,u?Xt(m,c,u):xn(m,c);else if(y!==4&&(c=c.child,c!==null))for(Nm(c,u,m),c=c.sibling;c!==null;)Nm(c,u,m),c=c.sibling}function Sm(c,u,m){var y=c.tag;if(y===5||y===6)c=c.stateNode,u?Gt(m,c,u):mr(m,c);else if(y!==4&&(c=c.child,c!==null))for(Sm(c,u,m),c=c.sibling;c!==null;)Sm(c,u,m),c=c.sibling}var Qt=null,Nn=!1;function Yn(c,u,m){for(m=m.child;m!==null;)jm(c,u,m),m=m.sibling}function jm(c,u,m){if(Bn&&typeof Bn.onCommitFiberUnmount=="function")try{Bn.onCommitFiberUnmount(ed,m)}catch{}switch(m.tag){case 5:ar||lo(m,u);case 6:if(X){var y=Qt,N=Nn;Qt=null,Yn(c,u,m),Qt=y,Nn=N,Qt!==null&&(Nn?vn(Qt,m.stateNode):di(Qt,m.stateNode))}else Yn(c,u,m);break;case 18:X&&Qt!==null&&(Nn?A0(Qt,m.stateNode):R0(Qt,m.stateNode));break;case 4:X?(y=Qt,N=Nn,Qt=m.stateNode.containerInfo,Nn=!0,Yn(c,u,m),Qt=y,Nn=N):(le&&(y=m.stateNode.containerInfo,N=Gu(y),kl(y,N)),Yn(c,u,m));break;case 0:case 11:case 14:case 15:if(!ar&&(y=m.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){N=y=y.next;do{var E=N,z=E.destroy;E=E.tag,z!==void 0&&(E&2||E&4)&&wm(m,u,z),N=N.next}while(N!==y)}Yn(c,u,m);break;case 1:if(!ar&&(lo(m,u),y=m.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=m.memoizedProps,y.state=m.memoizedState,y.componentWillUnmount()}catch(Q){ot(m,u,Q)}Yn(c,u,m);break;case 21:Yn(c,u,m);break;case 22:m.mode&1?(ar=(y=ar)||m.memoizedState!==null,Yn(c,u,m),ar=y):Yn(c,u,m);break;default:Yn(c,u,m)}}function C4(c){var u=c.updateQueue;if(u!==null){c.updateQueue=null;var m=c.stateNode;m===null&&(m=c.stateNode=new XA),u.forEach(function(y){var N=aI.bind(null,c,y);m.has(y)||(m.add(y),y.then(N,N))})}}function Sn(c,u){var m=u.deletions;if(m!==null)for(var y=0;y<m.length;y++){var N=m[y];try{var E=c,z=u;if(X){var Q=z;e:for(;Q!==null;){switch(Q.tag){case 5:Qt=Q.stateNode,Nn=!1;break e;case 3:Qt=Q.stateNode.containerInfo,Nn=!0;break e;case 4:Qt=Q.stateNode.containerInfo,Nn=!0;break e}Q=Q.return}if(Qt===null)throw Error(a(160));jm(E,z,N),Qt=null,Nn=!1}else jm(E,z,N);var ie=N.alternate;ie!==null&&(ie.return=null),N.return=null}catch(de){ot(N,u,de)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)E4(u,c),u=u.sibling}function E4(c,u){var m=c.alternate,y=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(Sn(u,c),Xn(c),y&4){try{Vl(3,c,c.return),Sd(3,c)}catch(xe){ot(c,c.return,xe)}try{Vl(5,c,c.return)}catch(xe){ot(c,c.return,xe)}}break;case 1:Sn(u,c),Xn(c),y&512&&m!==null&&lo(m,m.return);break;case 5:if(Sn(u,c),Xn(c),y&512&&m!==null&&lo(m,m.return),X){if(c.flags&32){var N=c.stateNode;try{Lr(N)}catch(xe){ot(c,c.return,xe)}}if(y&4&&(N=c.stateNode,N!=null)){var E=c.memoizedProps;if(m=m!==null?m.memoizedProps:E,y=c.type,u=c.updateQueue,c.updateQueue=null,u!==null)try{rr(N,u,y,m,E,c)}catch(xe){ot(c,c.return,xe)}}}break;case 6:if(Sn(u,c),Xn(c),y&4&&X){if(c.stateNode===null)throw Error(a(162));N=c.stateNode,E=c.memoizedProps,m=m!==null?m.memoizedProps:E;try{Gn(N,m,E)}catch(xe){ot(c,c.return,xe)}}break;case 3:if(Sn(u,c),Xn(c),y&4){if(X&&me&&m!==null&&m.memoizedState.isDehydrated)try{T0(u.containerInfo)}catch(xe){ot(c,c.return,xe)}if(le){N=u.containerInfo,E=u.pendingChildren;try{kl(N,E)}catch(xe){ot(c,c.return,xe)}}}break;case 4:if(Sn(u,c),Xn(c),y&4&&le){E=c.stateNode,N=E.containerInfo,E=E.pendingChildren;try{kl(N,E)}catch(xe){ot(c,c.return,xe)}}break;case 13:Sn(u,c),Xn(c),N=c.child,N.flags&8192&&(E=N.memoizedState!==null,N.stateNode.isHidden=E,!E||N.alternate!==null&&N.alternate.memoizedState!==null||(Am=$t())),y&4&&C4(c);break;case 22:var z=m!==null&&m.memoizedState!==null;if(c.mode&1?(ar=(m=ar)||z,Sn(u,c),ar=m):Sn(u,c),Xn(c),y&8192){if(m=c.memoizedState!==null,(c.stateNode.isHidden=m)&&!z&&c.mode&1)for(be=c,y=c.child;y!==null;){for(u=be=y;be!==null;){z=be;var Q=z.child;switch(z.tag){case 0:case 11:case 14:case 15:Vl(4,z,z.return);break;case 1:lo(z,z.return);var ie=z.stateNode;if(typeof ie.componentWillUnmount=="function"){var de=z,_e=z.return;try{var Ee=de;ie.props=Ee.memoizedProps,ie.state=Ee.memoizedState,ie.componentWillUnmount()}catch(xe){ot(de,_e,xe)}}break;case 5:lo(z,z.return);break;case 22:if(z.memoizedState!==null){R4(u);continue}}Q!==null?(Q.return=z,be=Q):R4(u)}y=y.sibling}if(X){e:if(y=null,X)for(u=c;;){if(u.tag===5){if(y===null){y=u;try{N=u.stateNode,m?Zs(N):Js(u.stateNode,u.memoizedProps)}catch(xe){ot(c,c.return,xe)}}}else if(u.tag===6){if(y===null)try{E=u.stateNode,m?Sl(E):jl(E,u.memoizedProps)}catch(xe){ot(c,c.return,xe)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===c)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===c)break e;for(;u.sibling===null;){if(u.return===null||u.return===c)break e;y===u&&(y=null),u=u.return}y===u&&(y=null),u.sibling.return=u.return,u=u.sibling}}}break;case 19:Sn(u,c),Xn(c),y&4&&C4(c);break;case 21:break;default:Sn(u,c),Xn(c)}}function Xn(c){var u=c.flags;if(u&2){try{if(X){e:{for(var m=c.return;m!==null;){if(j4(m)){var y=m;break e}m=m.return}throw Error(a(160))}switch(y.tag){case 5:var N=y.stateNode;y.flags&32&&(Lr(N),y.flags&=-33);var E=k4(c);Sm(c,E,N);break;case 3:case 4:var z=y.stateNode.containerInfo,Q=k4(c);Nm(c,Q,z);break;default:throw Error(a(161))}}}catch(ie){ot(c,c.return,ie)}c.flags&=-3}u&4096&&(c.flags&=-4097)}function ZA(c,u,m){be=c,T4(c)}function T4(c,u,m){for(var y=(c.mode&1)!==0;be!==null;){var N=be,E=N.child;if(N.tag===22&&y){var z=N.memoizedState!==null||Nd;if(!z){var Q=N.alternate,ie=Q!==null&&Q.memoizedState!==null||ar;Q=Nd;var de=ar;if(Nd=z,(ar=ie)&&!de)for(be=N;be!==null;)z=be,ie=z.child,z.tag===22&&z.memoizedState!==null?A4(N):ie!==null?(ie.return=z,be=ie):A4(N);for(;E!==null;)be=E,T4(E),E=E.sibling;be=N,Nd=Q,ar=de}P4(c)}else N.subtreeFlags&8772&&E!==null?(E.return=N,be=E):P4(c)}}function P4(c){for(;be!==null;){var u=be;if(u.flags&8772){var m=u.alternate;try{if(u.flags&8772)switch(u.tag){case 0:case 11:case 15:ar||Sd(5,u);break;case 1:var y=u.stateNode;if(u.flags&4&&!ar)if(m===null)y.componentDidMount();else{var N=u.elementType===u.type?m.memoizedProps:_n(u.type,m.memoizedProps);y.componentDidUpdate(N,m.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var E=u.updateQueue;E!==null&&I3(u,E,y);break;case 3:var z=u.updateQueue;if(z!==null){if(m=null,u.child!==null)switch(u.child.tag){case 5:m=B(u.child.stateNode);break;case 1:m=u.child.stateNode}I3(u,z,m)}break;case 5:var Q=u.stateNode;m===null&&u.flags&4&&Pt(Q,u.type,u.memoizedProps,u);break;case 6:break;case 4:break;case 12:break;case 13:if(me&&u.memoizedState===null){var ie=u.alternate;if(ie!==null){var de=ie.memoizedState;if(de!==null){var _e=de.dehydrated;_e!==null&&P0(_e)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}ar||u.flags&512&&_m(u)}catch(Ee){ot(u,u.return,Ee)}}if(u===c){be=null;break}if(m=u.sibling,m!==null){m.return=u.return,be=m;break}be=u.return}}function R4(c){for(;be!==null;){var u=be;if(u===c){be=null;break}var m=u.sibling;if(m!==null){m.return=u.return,be=m;break}be=u.return}}function A4(c){for(;be!==null;){var u=be;try{switch(u.tag){case 0:case 11:case 15:var m=u.return;try{Sd(4,u)}catch(ie){ot(u,m,ie)}break;case 1:var y=u.stateNode;if(typeof y.componentDidMount=="function"){var N=u.return;try{y.componentDidMount()}catch(ie){ot(u,N,ie)}}var E=u.return;try{_m(u)}catch(ie){ot(u,E,ie)}break;case 5:var z=u.return;try{_m(u)}catch(ie){ot(u,z,ie)}}}catch(ie){ot(u,u.return,ie)}if(u===c){be=null;break}var Q=u.sibling;if(Q!==null){Q.return=u.return,be=Q;break}be=u.return}}var jd=0,kd=1,Cd=2,Ed=3,Td=4;if(typeof Symbol=="function"&&Symbol.for){var Hl=Symbol.for;jd=Hl("selector.component"),kd=Hl("selector.has_pseudo_class"),Cd=Hl("selector.role"),Ed=Hl("selector.test_id"),Td=Hl("selector.text")}function km(c){var u=ye(c);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(a(364));return u}if(c=Yr(c),c===null)throw Error(a(362));return c.stateNode.current}function Cm(c,u){switch(u.$$typeof){case jd:if(c.type===u.value)return!0;break;case kd:e:{u=u.value,c=[c,0];for(var m=0;m<c.length;){var y=c[m++],N=c[m++],E=u[N];if(y.tag!==5||!Tt(y)){for(;E!=null&&Cm(y,E);)N++,E=u[N];if(N===u.length){u=!0;break e}else for(y=y.child;y!==null;)c.push(y,N),y=y.sibling}}u=!1}return u;case Cd:if(c.tag===5&&Fr(c.stateNode,u.value))return!0;break;case Td:if((c.tag===5||c.tag===6)&&(c=ht(c),c!==null&&0<=c.indexOf(u.value)))return!0;break;case Ed:if(c.tag===5&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===u.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function Em(c){switch(c.$$typeof){case jd:return"<"+(L(c.value)||"Unknown")+">";case kd:return":has("+(Em(c)||"")+")";case Cd:return'[role="'+c.value+'"]';case Td:return'"'+c.value+'"';case Ed:return'[data-testname="'+c.value+'"]';default:throw Error(a(365))}}function I4(c,u){var m=[];c=[c,0];for(var y=0;y<c.length;){var N=c[y++],E=c[y++],z=u[E];if(N.tag!==5||!Tt(N)){for(;z!=null&&Cm(N,z);)E++,z=u[E];if(E===u.length)m.push(N);else for(N=N.child;N!==null;)c.push(N,E),N=N.sibling}}return m}function Tm(c,u){if(!pr)throw Error(a(363));c=km(c),c=I4(c,u),u=[],c=Array.from(c);for(var m=0;m<c.length;){var y=c[m++];if(y.tag===5)Tt(y)||u.push(y.stateNode);else for(y=y.child;y!==null;)c.push(y),y=y.sibling}return u}var JA=Math.ceil,Pd=l.ReactCurrentDispatcher,Pm=l.ReactCurrentOwner,kt=l.ReactCurrentBatchConfig,Le=0,qt=null,Rt=null,Zt=0,Dr=0,co=$n(0),Ft=0,Wl=null,aa=0,Rd=0,Rm=0,Kl=null,jr=null,Am=0,Im=1/0,vi=null;function uo(){Im=$t()+500}var Ad=!1,Mm=null,Ji=null,Id=!1,es=null,Md=0,Yl=0,Fm=null,Fd=-1,Ld=0;function or(){return Le&6?$t():Fd!==-1?Fd:Fd=$t()}function ts(c){return c.mode&1?Le&2&&Zt!==0?Zt&-Zt:FA.transition!==null?(Ld===0&&(Ld=x3()),Ld):(c=Be,c!==0?c:Fe()):1}function nn(c,u,m,y){if(50<Yl)throw Yl=0,Fm=null,Error(a(185));Il(c,m,y),(!(Le&2)||c!==qt)&&(c===qt&&(!(Le&2)&&(Rd|=m),Ft===4&&rs(c,Zt)),kr(c,y),m===1&&Le===0&&!(u.mode&1)&&(uo(),td&&qn()))}function kr(c,u){var m=c.callbackNode;kA(c,u);var y=Ju(c,c===qt?Zt:0);if(y===0)m!==null&&y3(m),c.callbackNode=null,c.callbackPriority=0;else if(u=y&-y,c.callbackPriority!==u){if(m!=null&&y3(m),u===1)c.tag===0?MA(F4.bind(null,c)):b3(F4.bind(null,c)),ge?bt(function(){!(Le&6)&&qn()}):D0(z0,qn),m=null;else{switch(v3(y)){case 1:m=z0;break;case 4:m=PA;break;case 16:m=U0;break;case 536870912:m=RA;break;default:m=U0}m=q4(m,M4.bind(null,c))}c.callbackPriority=u,c.callbackNode=m}}function M4(c,u){if(Fd=-1,Ld=0,Le&6)throw Error(a(327));var m=c.callbackNode;if(ca()&&c.callbackNode!==m)return null;var y=Ju(c,c===qt?Zt:0);if(y===0)return null;if(y&30||y&c.expiredLanes||u)u=Od(c,y);else{u=y;var N=Le;Le|=2;var E=D4();(qt!==c||Zt!==u)&&(vi=null,uo(),oa(c,u));do try{rI();break}catch(Q){O4(c,Q)}while(1);K0(),Pd.current=E,Le=N,Rt!==null?u=0:(qt=null,Zt=0,u=Ft)}if(u!==0){if(u===2&&(N=F0(c),N!==0&&(y=N,u=Lm(c,N))),u===1)throw m=Wl,oa(c,0),rs(c,y),kr(c,$t()),m;if(u===6)rs(c,y);else{if(N=c.current.alternate,!(y&30)&&!eI(N)&&(u=Od(c,y),u===2&&(E=F0(c),E!==0&&(y=E,u=Lm(c,E))),u===1))throw m=Wl,oa(c,0),rs(c,y),kr(c,$t()),m;switch(c.finishedWork=N,c.finishedLanes=y,u){case 0:case 1:throw Error(a(345));case 2:la(c,jr,vi);break;case 3:if(rs(c,y),(y&130023424)===y&&(u=Am+500-$t(),10<u)){if(Ju(c,0)!==0)break;if(N=c.suspendedLanes,(N&y)!==y){or(),c.pingedLanes|=c.suspendedLanes&N;break}c.timeoutHandle=V(la.bind(null,c,jr,vi),u);break}la(c,jr,vi);break;case 4:if(rs(c,y),(y&4194240)===y)break;for(u=c.eventTimes,N=-1;0<y;){var z=31-yn(y);E=1<<z,z=u[z],z>N&&(N=z),y&=~E}if(y=N,y=$t()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*JA(y/1960))-y,10<y){c.timeoutHandle=V(la.bind(null,c,jr,vi),y);break}la(c,jr,vi);break;case 5:la(c,jr,vi);break;default:throw Error(a(329))}}}return kr(c,$t()),c.callbackNode===m?M4.bind(null,c):null}function Lm(c,u){var m=Kl;return c.current.memoizedState.isDehydrated&&(oa(c,u).flags|=256),c=Od(c,u),c!==2&&(u=jr,jr=m,u!==null&&Om(u)),c}function Om(c){jr===null?jr=c:jr.push.apply(jr,c)}function eI(c){for(var u=c;;){if(u.flags&16384){var m=u.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var y=0;y<m.length;y++){var N=m[y],E=N.getSnapshot;N=N.value;try{if(!bn(E(),N))return!1}catch{return!1}}}if(m=u.child,u.subtreeFlags&16384&&m!==null)m.return=u,u=m;else{if(u===c)break;for(;u.sibling===null;){if(u.return===null||u.return===c)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function rs(c,u){for(u&=~Rm,u&=~Rd,c.suspendedLanes|=u,c.pingedLanes&=~u,c=c.expirationTimes;0<u;){var m=31-yn(u),y=1<<m;c[m]=-1,u&=~y}}function F4(c){if(Le&6)throw Error(a(327));ca();var u=Ju(c,0);if(!(u&1))return kr(c,$t()),null;var m=Od(c,u);if(c.tag!==0&&m===2){var y=F0(c);y!==0&&(u=y,m=Lm(c,y))}if(m===1)throw m=Wl,oa(c,0),rs(c,u),kr(c,$t()),m;if(m===6)throw Error(a(345));return c.finishedWork=c.current.alternate,c.finishedLanes=u,la(c,jr,vi),kr(c,$t()),null}function L4(c){es!==null&&es.tag===0&&!(Le&6)&&ca();var u=Le;Le|=1;var m=kt.transition,y=Be;try{if(kt.transition=null,Be=1,c)return c()}finally{Be=y,kt.transition=m,Le=u,!(Le&6)&&qn()}}function Dm(){Dr=co.current,Ke(co)}function oa(c,u){c.finishedWork=null,c.finishedLanes=0;var m=c.timeoutHandle;if(m!==oe&&(c.timeoutHandle=oe,te(m)),Rt!==null)for(m=Rt.return;m!==null;){var y=m;switch(B0(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Yu();break;case 3:ao(),Ke(_r),Ke(nr),rm();break;case 5:em(y);break;case 4:ao();break;case 13:Ke(ft);break;case 19:Ke(ft);break;case 10:Y0(y.type._context);break;case 22:case 23:Dm()}m=m.return}if(qt=c,Rt=c=ns(c.current,null),Zt=Dr=u,Ft=0,Wl=null,Rm=Rd=aa=0,jr=Kl=null,ia!==null){for(u=0;u<ia.length;u++)if(m=ia[u],y=m.interleaved,y!==null){m.interleaved=null;var N=y.next,E=m.pending;if(E!==null){var z=E.next;E.next=N,y.next=z}m.pending=y}ia=null}return c}function O4(c,u){do{var m=Rt;try{if(K0(),fd.current=xd,pd){for(var y=pt.memoizedState;y!==null;){var N=y.queue;N!==null&&(N.pending=null),y=y.next}pd=!1}if(sa=0,Bt=Mt=pt=null,Dl=!1,zl=0,Pm.current=null,m===null||m.return===null){Ft=1,Wl=u,Rt=null;break}e:{var E=c,z=m.return,Q=m,ie=u;if(u=Zt,Q.flags|=32768,ie!==null&&typeof ie=="object"&&typeof ie.then=="function"){var de=ie,_e=Q,Ee=_e.tag;if(!(_e.mode&1)&&(Ee===0||Ee===11||Ee===15)){var xe=_e.alternate;xe?(_e.updateQueue=xe.updateQueue,_e.memoizedState=xe.memoizedState,_e.lanes=xe.lanes):(_e.updateQueue=null,_e.memoizedState=null)}var rt=l4(z);if(rt!==null){rt.flags&=-257,c4(rt,z,Q,E,u),rt.mode&1&&o4(E,de,u),u=rt,ie=de;var Ze=u.updateQueue;if(Ze===null){var Cr=new Set;Cr.add(ie),u.updateQueue=Cr}else Ze.add(ie);break e}else{if(!(u&1)){o4(E,de,u),zm();break e}ie=Error(a(426))}}else if(at&&Q.mode&1){var yi=l4(z);if(yi!==null){!(yi.flags&65536)&&(yi.flags|=256),c4(yi,z,Q,E,u),H0(oo(ie,Q));break e}}E=ie=oo(ie,Q),Ft!==4&&(Ft=2),Kl===null?Kl=[E]:Kl.push(E),E=z;do{switch(E.tag){case 3:E.flags|=65536,u&=-u,E.lanes|=u;var ne=s4(E,ie,u);A3(E,ne);break e;case 1:Q=ie;var Z=E.type,se=E.stateNode;if(!(E.flags&128)&&(typeof Z.getDerivedStateFromError=="function"||se!==null&&typeof se.componentDidCatch=="function"&&(Ji===null||!Ji.has(se)))){E.flags|=65536,u&=-u,E.lanes|=u;var ve=a4(E,Q,u);A3(E,ve);break e}}E=E.return}while(E!==null)}U4(m)}catch(Se){u=Se,Rt===m&&m!==null&&(Rt=m=m.return);continue}break}while(1)}function D4(){var c=Pd.current;return Pd.current=xd,c===null?xd:c}function zm(){(Ft===0||Ft===3||Ft===2)&&(Ft=4),qt===null||!(aa&268435455)&&!(Rd&268435455)||rs(qt,Zt)}function Od(c,u){var m=Le;Le|=2;var y=D4();(qt!==c||Zt!==u)&&(vi=null,oa(c,u));do try{tI();break}catch(N){O4(c,N)}while(1);if(K0(),Le=m,Pd.current=y,Rt!==null)throw Error(a(261));return qt=null,Zt=0,Ft}function tI(){for(;Rt!==null;)z4(Rt)}function rI(){for(;Rt!==null&&!EA();)z4(Rt)}function z4(c){var u=B4(c.alternate,c,Dr);c.memoizedProps=c.pendingProps,u===null?U4(c):Rt=u,Pm.current=null}function U4(c){var u=c;do{var m=u.alternate;if(c=u.return,u.flags&32768){if(m=YA(m,u),m!==null){m.flags&=32767,Rt=m;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Ft=6,Rt=null;return}}else if(m=KA(m,u,Dr),m!==null){Rt=m;return}if(u=u.sibling,u!==null){Rt=u;return}Rt=u=c}while(u!==null);Ft===0&&(Ft=5)}function la(c,u,m){var y=Be,N=kt.transition;try{kt.transition=null,Be=1,nI(c,u,m,y)}finally{kt.transition=N,Be=y}return null}function nI(c,u,m,y){do ca();while(es!==null);if(Le&6)throw Error(a(327));m=c.finishedWork;var N=c.finishedLanes;if(m===null)return null;if(c.finishedWork=null,c.finishedLanes=0,m===c.current)throw Error(a(177));c.callbackNode=null,c.callbackPriority=0;var E=m.lanes|m.childLanes;if(CA(c,E),c===qt&&(Rt=qt=null,Zt=0),!(m.subtreeFlags&2064)&&!(m.flags&2064)||Id||(Id=!0,q4(U0,function(){return ca(),null})),E=(m.flags&15990)!==0,m.subtreeFlags&15990||E){E=kt.transition,kt.transition=null;var z=Be;Be=1;var Q=Le;Le|=4,Pm.current=null,QA(c,m),E4(m,c),W(c.containerInfo),c.current=m,ZA(m),TA(),Le=Q,Be=z,kt.transition=E}else c.current=m;if(Id&&(Id=!1,es=c,Md=N),E=c.pendingLanes,E===0&&(Ji=null),AA(m.stateNode),kr(c,$t()),u!==null)for(y=c.onRecoverableError,m=0;m<u.length;m++)N=u[m],y(N.value,{componentStack:N.stack,digest:N.digest});if(Ad)throw Ad=!1,c=Mm,Mm=null,c;return Md&1&&c.tag!==0&&ca(),E=c.pendingLanes,E&1?c===Fm?Yl++:(Yl=0,Fm=c):Yl=0,qn(),null}function ca(){if(es!==null){var c=v3(Md),u=kt.transition,m=Be;try{if(kt.transition=null,Be=16>c?16:c,es===null)var y=!1;else{if(c=es,es=null,Md=0,Le&6)throw Error(a(331));var N=Le;for(Le|=4,be=c.current;be!==null;){var E=be,z=E.child;if(be.flags&16){var Q=E.deletions;if(Q!==null){for(var ie=0;ie<Q.length;ie++){var de=Q[ie];for(be=de;be!==null;){var _e=be;switch(_e.tag){case 0:case 11:case 15:Vl(8,_e,E)}var Ee=_e.child;if(Ee!==null)Ee.return=_e,be=Ee;else for(;be!==null;){_e=be;var xe=_e.sibling,rt=_e.return;if(S4(_e),_e===de){be=null;break}if(xe!==null){xe.return=rt,be=xe;break}be=rt}}}var Ze=E.alternate;if(Ze!==null){var Cr=Ze.child;if(Cr!==null){Ze.child=null;do{var yi=Cr.sibling;Cr.sibling=null,Cr=yi}while(Cr!==null)}}be=E}}if(E.subtreeFlags&2064&&z!==null)z.return=E,be=z;else e:for(;be!==null;){if(E=be,E.flags&2048)switch(E.tag){case 0:case 11:case 15:Vl(9,E,E.return)}var ne=E.sibling;if(ne!==null){ne.return=E.return,be=ne;break e}be=E.return}}var Z=c.current;for(be=Z;be!==null;){z=be;var se=z.child;if(z.subtreeFlags&2064&&se!==null)se.return=z,be=se;else e:for(z=Z;be!==null;){if(Q=be,Q.flags&2048)try{switch(Q.tag){case 0:case 11:case 15:Sd(9,Q)}}catch(Se){ot(Q,Q.return,Se)}if(Q===z){be=null;break e}var ve=Q.sibling;if(ve!==null){ve.return=Q.return,be=ve;break e}be=Q.return}}if(Le=N,qn(),Bn&&typeof Bn.onPostCommitFiberRoot=="function")try{Bn.onPostCommitFiberRoot(ed,c)}catch{}y=!0}return y}finally{Be=m,kt.transition=u}}return!1}function G4(c,u,m){u=oo(m,u),u=s4(c,u,1),c=Zi(c,u,1),u=or(),c!==null&&(Il(c,1,u),kr(c,u))}function ot(c,u,m){if(c.tag===3)G4(c,c,m);else for(;u!==null;){if(u.tag===3){G4(u,c,m);break}else if(u.tag===1){var y=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Ji===null||!Ji.has(y))){c=oo(m,c),c=a4(u,c,1),u=Zi(u,c,1),c=or(),u!==null&&(Il(u,1,c),kr(u,c));break}}u=u.return}}function iI(c,u,m){var y=c.pingCache;y!==null&&y.delete(u),u=or(),c.pingedLanes|=c.suspendedLanes&m,qt===c&&(Zt&m)===m&&(Ft===4||Ft===3&&(Zt&130023424)===Zt&&500>$t()-Am?oa(c,0):Rm|=m),kr(c,u)}function $4(c,u){u===0&&(c.mode&1?(u=Zu,Zu<<=1,!(Zu&130023424)&&(Zu=4194304)):u=1);var m=or();c=Vn(c,u),c!==null&&(Il(c,u,m),kr(c,m))}function sI(c){var u=c.memoizedState,m=0;u!==null&&(m=u.retryLane),$4(c,m)}function aI(c,u){var m=0;switch(c.tag){case 13:var y=c.stateNode,N=c.memoizedState;N!==null&&(m=N.retryLane);break;case 19:y=c.stateNode;break;default:throw Error(a(314))}y!==null&&y.delete(u),$4(c,m)}var B4;B4=function(c,u,m){if(c!==null)if(c.memoizedProps!==u.pendingProps||_r.current)Sr=!0;else{if(!(c.lanes&m)&&!(u.flags&128))return Sr=!1,WA(c,u,m);Sr=!!(c.flags&131072)}else Sr=!1,at&&u.flags&1048576&&w3(u,nd,u.index);switch(u.lanes=0,u.tag){case 2:var y=u.type;bd(c,u),c=u.pendingProps;var N=Za(u,nr.current);io(u,m),N=sm(null,u,y,c,N,m);var E=am();return u.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,Nr(y)?(E=!0,Xu(u)):E=!1,u.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,Z0(u),N.updater=vd,u.stateNode=N,N._reactInternals=u,hm(u,y,c,m),u=gm(null,u,y,!0,E,m)):(u.tag=0,at&&E&&$0(u),gr(null,u,N,m),u=u.child),u;case 16:y=u.elementType;e:{switch(bd(c,u),c=u.pendingProps,N=y._init,y=N(y._payload),u.type=y,N=u.tag=lI(y),c=_n(y,c),N){case 0:u=mm(null,u,y,c,m);break e;case 1:u=m4(null,u,y,c,m);break e;case 11:u=u4(null,u,y,c,m);break e;case 14:u=d4(null,u,y,_n(y.type,c),m);break e}throw Error(a(306,y,""))}return u;case 0:return y=u.type,N=u.pendingProps,N=u.elementType===y?N:_n(y,N),mm(c,u,y,N,m);case 1:return y=u.type,N=u.pendingProps,N=u.elementType===y?N:_n(y,N),m4(c,u,y,N,m);case 3:e:{if(g4(u),c===null)throw Error(a(387));y=u.pendingProps,E=u.memoizedState,N=E.element,R3(c,u),dd(u,y,null,m);var z=u.memoizedState;if(y=z.element,me&&E.isDehydrated)if(E={element:y,isDehydrated:!1,cache:z.cache,pendingSuspenseBoundaries:z.pendingSuspenseBoundaries,transitions:z.transitions},u.updateQueue.baseState=E,u.memoizedState=E,u.flags&256){N=oo(Error(a(423)),u),u=x4(c,u,y,m,N);break e}else if(y!==N){N=oo(Error(a(424)),u),u=x4(c,u,y,m,N);break e}else for(me&&(Jr=S0(u.stateNode.containerInfo),Or=u,at=!0,wn=null,Ml=!1),m=E3(u,null,y,m),u.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(to(),y===N){u=xi(c,u,m);break e}gr(c,u,y,m)}u=u.child}return u;case 5:return M3(u),c===null&&V0(u),y=u.type,N=u.pendingProps,E=c!==null?c.memoizedProps:null,z=N.children,ue(y,N)?z=null:E!==null&&ue(y,E)&&(u.flags|=32),p4(c,u),gr(c,u,z,m),u.child;case 6:return c===null&&V0(u),null;case 13:return v4(c,u,m);case 4:return J0(u,u.stateNode.containerInfo),y=u.pendingProps,c===null?u.child=ro(u,null,y,m):gr(c,u,y,m),u.child;case 11:return y=u.type,N=u.pendingProps,N=u.elementType===y?N:_n(y,N),u4(c,u,y,N,m);case 7:return gr(c,u,u.pendingProps,m),u.child;case 8:return gr(c,u,u.pendingProps.children,m),u.child;case 12:return gr(c,u,u.pendingProps.children,m),u.child;case 10:e:{if(y=u.type._context,N=u.pendingProps,E=u.memoizedProps,z=N.value,T3(u,y,z),E!==null)if(bn(E.value,z)){if(E.children===N.children&&!_r.current){u=xi(c,u,m);break e}}else for(E=u.child,E!==null&&(E.return=u);E!==null;){var Q=E.dependencies;if(Q!==null){z=E.child;for(var ie=Q.firstContext;ie!==null;){if(ie.context===y){if(E.tag===1){ie=gi(-1,m&-m),ie.tag=2;var de=E.updateQueue;if(de!==null){de=de.shared;var _e=de.pending;_e===null?ie.next=ie:(ie.next=_e.next,_e.next=ie),de.pending=ie}}E.lanes|=m,ie=E.alternate,ie!==null&&(ie.lanes|=m),X0(E.return,m,u),Q.lanes|=m;break}ie=ie.next}}else if(E.tag===10)z=E.type===u.type?null:E.child;else if(E.tag===18){if(z=E.return,z===null)throw Error(a(341));z.lanes|=m,Q=z.alternate,Q!==null&&(Q.lanes|=m),X0(z,m,u),z=E.sibling}else z=E.child;if(z!==null)z.return=E;else for(z=E;z!==null;){if(z===u){z=null;break}if(E=z.sibling,E!==null){E.return=z.return,z=E;break}z=z.return}E=z}gr(c,u,N.children,m),u=u.child}return u;case 9:return N=u.type,y=u.pendingProps.children,io(u,m),N=en(N),y=y(N),u.flags|=1,gr(c,u,y,m),u.child;case 14:return y=u.type,N=_n(y,u.pendingProps),N=_n(y.type,N),d4(c,u,y,N,m);case 15:return h4(c,u,u.type,u.pendingProps,m);case 17:return y=u.type,N=u.pendingProps,N=u.elementType===y?N:_n(y,N),bd(c,u),u.tag=1,Nr(y)?(c=!0,Xu(u)):c=!1,io(u,m),n4(u,y,N),hm(u,y,N,m),gm(null,u,y,!0,c,m);case 19:return b4(c,u,m);case 22:return f4(c,u,m)}throw Error(a(156,u.tag))};function q4(c,u){return D0(c,u)}function oI(c,u,m,y){this.tag=c,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sn(c,u,m,y){return new oI(c,u,m,y)}function Um(c){return c=c.prototype,!(!c||!c.isReactComponent)}function lI(c){if(typeof c=="function")return Um(c)?1:0;if(c!=null){if(c=c.$$typeof,c===b)return 11;if(c===S)return 14}return 2}function ns(c,u){var m=c.alternate;return m===null?(m=sn(c.tag,u,c.key,c.mode),m.elementType=c.elementType,m.type=c.type,m.stateNode=c.stateNode,m.alternate=c,c.alternate=m):(m.pendingProps=u,m.type=c.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=c.flags&14680064,m.childLanes=c.childLanes,m.lanes=c.lanes,m.child=c.child,m.memoizedProps=c.memoizedProps,m.memoizedState=c.memoizedState,m.updateQueue=c.updateQueue,u=c.dependencies,m.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},m.sibling=c.sibling,m.index=c.index,m.ref=c.ref,m}function Dd(c,u,m,y,N,E){var z=2;if(y=c,typeof c=="function")Um(c)&&(z=1);else if(typeof c=="string")z=5;else e:switch(c){case f:return ua(m.children,N,E,u);case p:z=8,N|=8;break;case g:return c=sn(12,m,u,N|2),c.elementType=g,c.lanes=E,c;case k:return c=sn(13,m,u,N),c.elementType=k,c.lanes=E,c;case _:return c=sn(19,m,u,N),c.elementType=_,c.lanes=E,c;case j:return zd(m,N,E,u);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case x:z=10;break e;case w:z=9;break e;case b:z=11;break e;case S:z=14;break e;case v:z=16,y=null;break e}throw Error(a(130,c==null?c:typeof c,""))}return u=sn(z,m,u,N),u.elementType=c,u.type=y,u.lanes=E,u}function ua(c,u,m,y){return c=sn(7,c,y,u),c.lanes=m,c}function zd(c,u,m,y){return c=sn(22,c,y,u),c.elementType=j,c.lanes=m,c.stateNode={isHidden:!1},c}function Gm(c,u,m){return c=sn(6,c,null,u),c.lanes=m,c}function $m(c,u,m){return u=sn(4,c.children!==null?c.children:[],c.key,u),u.lanes=m,u.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},u}function cI(c,u,m,y,N){this.tag=u,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=oe,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=L0(0),this.expirationTimes=L0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=L0(0),this.identifierPrefix=y,this.onRecoverableError=N,me&&(this.mutableSourceEagerHydrationData=null)}function V4(c,u,m,y,N,E,z,Q,ie){return c=new cI(c,u,m,Q,ie),u===1?(u=1,E===!0&&(u|=8)):u=0,E=sn(3,null,null,u),c.current=E,E.stateNode=c,E.memoizedState={element:y,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},Z0(E),c}function H4(c){if(!c)return Xi;c=c._reactInternals;e:{if(O(c)!==c||c.tag!==1)throw Error(a(170));var u=c;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(Nr(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(a(171))}if(c.tag===1){var m=c.type;if(Nr(m))return m3(c,m,u)}return u}function W4(c){var u=c._reactInternals;if(u===void 0)throw typeof c.render=="function"?Error(a(188)):(c=Object.keys(c).join(","),Error(a(268,c)));return c=M(u),c===null?null:c.stateNode}function K4(c,u){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var m=c.retryLane;c.retryLane=m!==0&&m<u?m:u}}function Ud(c,u){K4(c,u),(c=c.alternate)&&K4(c,u)}function uI(c){return c=M(c),c===null?null:c.stateNode}function dI(){return null}return r.attemptContinuousHydration=function(c){if(c.tag===13){var u=Vn(c,134217728);if(u!==null){var m=or();nn(u,c,134217728,m)}Ud(c,134217728)}},r.attemptDiscreteHydration=function(c){if(c.tag===13){var u=Vn(c,1);if(u!==null){var m=or();nn(u,c,1,m)}Ud(c,1)}},r.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13){var u=ts(c),m=Vn(c,u);if(m!==null){var y=or();nn(m,c,u,y)}Ud(c,u)}},r.attemptSynchronousHydration=function(c){switch(c.tag){case 3:var u=c.stateNode;if(u.current.memoizedState.isDehydrated){var m=Al(u.pendingLanes);m!==0&&(O0(u,m|1),kr(u,$t()),!(Le&6)&&(uo(),qn()))}break;case 13:L4(function(){var y=Vn(c,1);if(y!==null){var N=or();nn(y,c,1,N)}}),Ud(c,1)}},r.batchedUpdates=function(c,u){var m=Le;Le|=1;try{return c(u)}finally{Le=m,Le===0&&(uo(),td&&qn())}},r.createComponentSelector=function(c){return{$$typeof:jd,value:c}},r.createContainer=function(c,u,m,y,N,E,z){return V4(c,u,!1,null,m,y,N,E,z)},r.createHasPseudoClassSelector=function(c){return{$$typeof:kd,value:c}},r.createHydrationContainer=function(c,u,m,y,N,E,z,Q,ie){return c=V4(m,y,!0,c,N,E,z,Q,ie),c.context=H4(null),m=c.current,y=or(),N=ts(m),E=gi(y,N),E.callback=u??null,Zi(m,E,N),c.current.lanes=N,Il(c,N,y),kr(c,y),c},r.createPortal=function(c,u,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:y==null?null:""+y,children:c,containerInfo:u,implementation:m}},r.createRoleSelector=function(c){return{$$typeof:Cd,value:c}},r.createTestNameSelector=function(c){return{$$typeof:Ed,value:c}},r.createTextSelector=function(c){return{$$typeof:Td,value:c}},r.deferredUpdates=function(c){var u=Be,m=kt.transition;try{return kt.transition=null,Be=16,c()}finally{Be=u,kt.transition=m}},r.discreteUpdates=function(c,u,m,y,N){var E=Be,z=kt.transition;try{return kt.transition=null,Be=1,c(u,m,y,N)}finally{Be=E,kt.transition=z,Le===0&&uo()}},r.findAllNodes=Tm,r.findBoundingRects=function(c,u){if(!pr)throw Error(a(363));u=Tm(c,u),c=[];for(var m=0;m<u.length;m++)c.push(Yt(u[m]));for(u=c.length-1;0<u;u--){m=c[u];for(var y=m.x,N=y+m.width,E=m.y,z=E+m.height,Q=u-1;0<=Q;Q--)if(u!==Q){var ie=c[Q],de=ie.x,_e=de+ie.width,Ee=ie.y,xe=Ee+ie.height;if(y>=de&&E>=Ee&&N<=_e&&z<=xe){c.splice(u,1);break}else if(y!==de||m.width!==ie.width||xe<E||Ee>z){if(!(E!==Ee||m.height!==ie.height||_e<y||de>N)){de>y&&(ie.width+=de-y,ie.x=y),_e<N&&(ie.width=N-de),c.splice(u,1);break}}else{Ee>E&&(ie.height+=Ee-E,ie.y=E),xe<z&&(ie.height=z-Ee),c.splice(u,1);break}}}return c},r.findHostInstance=W4,r.findHostInstanceWithNoPortals=function(c){return c=I(c),c=c!==null?F(c):null,c===null?null:c.stateNode},r.findHostInstanceWithWarning=function(c){return W4(c)},r.flushControlled=function(c){var u=Le;Le|=1;var m=kt.transition,y=Be;try{kt.transition=null,Be=1,c()}finally{Be=y,kt.transition=m,Le=u,Le===0&&(uo(),qn())}},r.flushPassiveEffects=ca,r.flushSync=L4,r.focusWithin=function(c,u){if(!pr)throw Error(a(363));for(c=km(c),u=I4(c,u),u=Array.from(u),c=0;c<u.length;){var m=u[c++];if(!Tt(m)){if(m.tag===5&&gn(m.stateNode))return!0;for(m=m.child;m!==null;)u.push(m),m=m.sibling}}return!1},r.getCurrentUpdatePriority=function(){return Be},r.getFindAllNodesFailureDescription=function(c,u){if(!pr)throw Error(a(363));var m=0,y=[];c=[km(c),0];for(var N=0;N<c.length;){var E=c[N++],z=c[N++],Q=u[z];if((E.tag!==5||!Tt(E))&&(Cm(E,Q)&&(y.push(Em(Q)),z++,z>m&&(m=z)),z<u.length))for(E=E.child;E!==null;)c.push(E,z),E=E.sibling}if(m<u.length){for(c=[];m<u.length;m++)c.push(Em(u[m]));return`findAllNodes was able to match part of the selector:
  `+(y.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},r.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return B(c.child.stateNode);default:return c.child.stateNode}},r.injectIntoDevTools=function(c){if(c={bundleType:c.bundleType,version:c.version,rendererPackageName:c.rendererPackageName,rendererConfig:c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:l.ReactCurrentDispatcher,findHostInstanceByFiber:uI,findFiberByHostInstance:c.findFiberByHostInstance||dI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(u.isDisabled||!u.supportsFiber)c=!0;else{try{ed=u.inject(c),Bn=u}catch{}c=!!u.checkDCE}}return c},r.isAlreadyRendering=function(){return!1},r.observeVisibleRects=function(c,u,m,y){if(!pr)throw Error(a(363));c=Tm(c,u);var N=Xr(c,m,y).disconnect;return{disconnect:function(){N()}}},r.registerMutableSourceForHydration=function(c,u){var m=u._getVersion;m=m(u._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[u,m]:c.mutableSourceEagerHydrationData.push(u,m)},r.runWithPriority=function(c,u){var m=Be;try{return Be=c,u()}finally{Be=m}},r.shouldError=function(){return null},r.shouldSuspend=function(){return!1},r.updateContainer=function(c,u,m,y){var N=u.current,E=or(),z=ts(N);return m=H4(m),u.context===null?u.context=m:u.pendingContext=m,u=gi(E,z),u.payload={element:c},y=y===void 0?null:y,y!==null&&(u.callback=y),c=Zi(N,u,z),c!==null&&(nn(c,N,z,E),ud(c,N,z)),z},r};pA.exports=ree;var nee=pA.exports;const iee=vu(nee);var mA={exports:{}},Xa={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Xa.ConcurrentRoot=1;Xa.ContinuousEventPriority=4;Xa.DefaultEventPriority=16;Xa.DiscreteEventPriority=1;Xa.IdleEventPriority=536870912;Xa.LegacyRoot=0;mA.exports=Xa;var gA=mA.exports;const Y7={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let X7=!1,Q7=!1;const h3=".react-konva-event",see=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,aee=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,oee={};function g0(e,t,r=oee){if(!X7&&"zIndex"in t&&(console.warn(aee),X7=!0),!Q7&&t.draggable){var n=t.x!==void 0||t.y!==void 0,i=t.onDragEnd||t.onDragMove;n&&!i&&(console.warn(see),Q7=!0)}for(var s in r)if(!Y7[s]){var a=s.slice(0,2)==="on",l=r[s]!==t[s];if(a&&l){var d=s.substr(2).toLowerCase();d.substr(0,7)==="content"&&(d="content"+d.substr(7,1).toUpperCase()+d.substr(8)),e.off(d,r[s])}var h=!t.hasOwnProperty(s);h&&e.setAttr(s,void 0)}var f=t._useStrictMode,p={},g=!1;const x={};for(var s in t)if(!Y7[s]){var a=s.slice(0,2)==="on",w=r[s]!==t[s];if(a&&w){var d=s.substr(2).toLowerCase();d.substr(0,7)==="content"&&(d="content"+d.substr(7,1).toUpperCase()+d.substr(8)),t[s]&&(x[d]=t[s])}!a&&(t[s]!==r[s]||f&&t[s]!==e.getAttr(s))&&(g=!0,p[s]=t[s])}g&&(e.setAttrs(p),Qs(e));for(var d in x)e.on(d+h3,x[d])}function Qs(e){if(!Ae.Konva.autoDrawEnabled){var t=e.getLayer()||e.getStage();t&&t.batchDraw()}}const xA={},lee={};xu.Node.prototype._applyProps=g0;function cee(e,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}e.add(t),Qs(e)}function uee(e,t,r){let n=xu[e];n||(console.error(`Konva has no node with the type ${e}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${e}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),n=xu.Group);const i={},s={};for(var a in t){var l=a.slice(0,2)==="on";l?s[a]=t[a]:i[a]=t[a]}const d=new n(i);return g0(d,s),d}function dee(e,t,r){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${e}"`)}function hee(e,t,r){return!1}function fee(e){return e}function pee(){return null}function mee(){return null}function gee(e,t,r,n){return lee}function xee(){}function vee(e){}function yee(e,t){return!1}function bee(){return xA}function wee(){return xA}const _ee=setTimeout,Nee=clearTimeout,See=-1;function jee(e,t){return!1}const kee=!1,Cee=!0,Eee=!0;function Tee(e,t){t.parent===e?t.moveToTop():e.add(t),Qs(e)}function Pee(e,t){t.parent===e?t.moveToTop():e.add(t),Qs(e)}function vA(e,t,r){t._remove(),e.add(t),t.setZIndex(r.getZIndex()),Qs(e)}function Ree(e,t,r){vA(e,t,r)}function Aee(e,t){t.destroy(),t.off(h3),Qs(e)}function Iee(e,t){t.destroy(),t.off(h3),Qs(e)}function Mee(e,t,r){console.error(`Text components are not yet supported in ReactKonva. You text is: "${r}"`)}function Fee(e,t,r){}function Lee(e,t,r,n,i){g0(e,i,n)}function Oee(e){e.hide(),Qs(e)}function Dee(e){}function zee(e,t){(t.visible==null||t.visible)&&e.show()}function Uee(e,t){}function Gee(e){}function $ee(){}const Bee=()=>gA.DefaultEventPriority,qee=Object.freeze(Object.defineProperty({__proto__:null,appendChild:Tee,appendChildToContainer:Pee,appendInitialChild:cee,cancelTimeout:Nee,clearContainer:Gee,commitMount:Fee,commitTextUpdate:Mee,commitUpdate:Lee,createInstance:uee,createTextInstance:dee,detachDeletedInstance:$ee,finalizeInitialChildren:hee,getChildHostContext:wee,getCurrentEventPriority:Bee,getPublicInstance:fee,getRootHostContext:bee,hideInstance:Oee,hideTextInstance:Dee,idlePriority:Ac.unstable_IdlePriority,insertBefore:vA,insertInContainerBefore:Ree,isPrimaryRenderer:kee,noTimeout:See,now:Ac.unstable_now,prepareForCommit:pee,preparePortalMount:mee,prepareUpdate:gee,removeChild:Aee,removeChildFromContainer:Iee,resetAfterCommit:xee,resetTextContent:vee,run:Ac.unstable_runWithPriority,scheduleTimeout:_ee,shouldDeprioritizeSubtree:yee,shouldSetTextContent:jee,supportsMutation:Eee,unhideInstance:zee,unhideTextInstance:Uee,warnsIfNotActing:Cee},Symbol.toStringTag,{value:"Module"}));var Vee=Object.defineProperty,Hee=Object.defineProperties,Wee=Object.getOwnPropertyDescriptors,Z7=Object.getOwnPropertySymbols,Kee=Object.prototype.hasOwnProperty,Yee=Object.prototype.propertyIsEnumerable,J7=(e,t,r)=>t in e?Vee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ek=(e,t)=>{for(var r in t||(t={}))Kee.call(t,r)&&J7(e,r,t[r]);if(Z7)for(var r of Z7(t))Yee.call(t,r)&&J7(e,r,t[r]);return e},Xee=(e,t)=>Hee(e,Wee(t)),tk,rk;typeof window<"u"&&((tk=window.document)!=null&&tk.createElement||((rk=window.navigator)==null?void 0:rk.product)==="ReactNative")?P.useLayoutEffect:P.useEffect;function yA(e,t,r){if(!e)return;if(r(e)===!0)return e;let n=t?e.return:e.child;for(;n;){const i=yA(n,t,r);if(i)return i;n=t?null:n.sibling}}function bA(e){try{return Object.defineProperties(e,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return e}}const nk=console.error;console.error=function(){const e=[...arguments].join("");if(e!=null&&e.startsWith("Warning:")&&e.includes("useContext")){console.error=nk;return}return nk.apply(this,arguments)};const f3=bA(P.createContext(null));class wA extends P.Component{render(){return P.createElement(f3.Provider,{value:this._reactInternals},this.props.children)}}function Qee(){const e=P.useContext(f3);if(e===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=P.useId();return P.useMemo(()=>{for(const n of[e,e==null?void 0:e.alternate]){if(!n)continue;const i=yA(n,!1,s=>{let a=s.memoizedState;for(;a;){if(a.memoizedState===t)return!0;a=a.next}});if(i)return i}},[e,t])}function Zee(){const e=Qee(),[t]=P.useState(()=>new Map);t.clear();let r=e;for(;r;){if(r.type&&typeof r.type=="object"){const i=r.type._context===void 0&&r.type.Provider===r.type?r.type:r.type._context;i&&i!==f3&&!t.has(i)&&t.set(i,P.useContext(bA(i)))}r=r.return}return t}function Jee(){const e=Zee();return P.useMemo(()=>Array.from(e.keys()).reduce((t,r)=>n=>P.createElement(t,null,P.createElement(r.Provider,Xee(ek({},n),{value:e.get(r)}))),t=>P.createElement(wA,ek({},t))),[e])}function ete(e){const t=re.useRef({});return re.useLayoutEffect(()=>{t.current=e}),re.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const tte=e=>{const t=re.useRef(),r=re.useRef(),n=re.useRef(),i=ete(e),s=Jee(),a=l=>{const{forwardedRef:d}=e;d&&(typeof d=="function"?d(l):d.current=l)};return re.useLayoutEffect(()=>(r.current=new xu.Stage({width:e.width,height:e.height,container:t.current}),a(r.current),n.current=Rc.createContainer(r.current,gA.LegacyRoot,!1,null),Rc.updateContainer(re.createElement(s,{},e.children),n.current),()=>{xu.isBrowser&&(a(null),Rc.updateContainer(null,n.current,null),r.current.destroy())}),[]),re.useLayoutEffect(()=>{a(r.current),g0(r.current,e,i),Rc.updateContainer(re.createElement(s,{},e.children),n.current,null)}),re.createElement("div",{ref:t,id:e.id,accessKey:e.accessKey,className:e.className,role:e.role,style:e.style,tabIndex:e.tabIndex,title:e.title})},ik="Layer",sk="Rect",rte="Line",nte="Image",ite="Text",ste="Transformer",Rc=iee(qee);Rc.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:re.version,rendererPackageName:"react-konva"});const ate=re.forwardRef((e,t)=>re.createElement(wA,{},re.createElement(tte,{...e,forwardedRef:t}))),ote=({isOpen:e,onClose:t,onConfirm:r,title:n,message:i,initialValue:s="",placeholder:a="",confirmText:l="Confirmar",cancelText:d="Cancelar"})=>{const[h,f]=P.useState(s),p=P.useRef(null);if(P.useEffect(()=>{f(s)},[s,e]),P.useEffect(()=>{e&&p.current&&setTimeout(()=>p.current.focus(),50)},[e]),!e)return null;const g=x=>{x.preventDefault(),r(h),t()};return Su.createPortal(o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:o.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl p-6 shadow-2xl w-full max-w-md space-y-4 animate-in zoom-in-95 duration-200 relative overflow-hidden",onClick:x=>x.stopPropagation(),children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-primary to-transparent opacity-50"}),o.jsx("h3",{className:"text-xl font-bold text-white",children:n}),i&&o.jsx("p",{className:"text-sm text-slate-400 leading-relaxed",children:i}),o.jsxs("form",{onSubmit:g,className:"space-y-4",children:[o.jsx("input",{ref:p,type:"text",value:h,onChange:x=>f(x.target.value),placeholder:a,className:"w-full bg-black/20 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:border-primary/50 focus:ring-1 focus:ring-primary/50 outline-none transition-all font-mono text-sm"}),o.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[o.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm text-slate-400 hover:text-white transition-colors",children:d}),o.jsx(Xe,{type:"submit",variant:"primary",disabled:!h.trim(),children:l})]})]})]})}),document.body)},D2=({stepNumber:e,title:t,isOpen:r,onClick:n,children:i})=>o.jsxs("div",{className:`border border-white/10 rounded-2xl bg-[#13141f] overflow-hidden transition-all duration-300 ${r?"ring-1 ring-primary/50":"opacity-80"}`,children:[o.jsxs("button",{onClick:n,className:"w-full flex items-center justify-between p-6 hover:bg-white/5 transition-colors",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`size-8 rounded-full flex items-center justify-center font-black text-sm ${r?"bg-primary text-white":"bg-white/10 text-slate-400"}`,children:e}),o.jsx("h3",{className:`text-lg font-bold ${r?"text-white":"text-slate-400"}`,children:t})]}),o.jsx("span",{className:`material-symbols-outlined transition-transform duration-300 ${r?"rotate-180 text-primary":"text-slate-500"}`,children:"expand_more"})]}),r&&o.jsx("div",{className:"p-6 pt-0 border-t border-white/5 animate-in fade-in slide-in-from-top-2",children:i})]}),z2=({icon:e,title:t,desc:r,selected:n,onClick:i})=>o.jsxs("div",{onClick:i,className:`p-6 rounded-xl border cursor-pointer transition-all relative group h-full flex flex-col justify-between ${n?"bg-primary/20 border-primary shadow-[0_0_30px_rgba(var(--color-primary),0.3)]":"bg-[#0a0a0c] border-white/10 hover:border-white/30"}`,children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:`size-12 rounded-lg flex items-center justify-center mb-4 ${n?"bg-primary text-white":"bg-white/10 text-slate-400 group-hover:text-white group-hover:bg-white/20"}`,children:o.jsx("span",{className:"material-symbols-outlined text-2xl",children:e})}),o.jsx("h4",{className:"font-bold text-white mb-1",children:t}),o.jsx("p",{className:"text-xs text-slate-500 leading-relaxed",children:r})]}),n&&o.jsx("div",{className:"absolute top-4 right-4 size-3 bg-primary rounded-full shadow-glow"})]}),lte=({src:e,x:t,y:r,width:n,height:i})=>{const[s,a]=P.useState(null);return P.useEffect(()=>{if(!e)return;const l=new window.Image;l.src=e,l.crossOrigin="Anonymous",l.onload=()=>{a(l)}},[e]),o.jsx(nte,{image:s,x:t,y:r,width:n,height:i})},cte=({selectedId:e})=>{const t=re.useRef();return re.useEffect(()=>{if(e){const r=t.current.getStage().findOne("#"+e);r&&(t.current.nodes([r]),t.current.getLayer().batchDraw())}else t.current.nodes([])},[e]),o.jsx(ste,{ref:t})},ak=({mode:e})=>{var oe;const{username:t,projectName:r,folderId:n,entityId:i}=Kr(),s=Wr(),a=Fa(),{setRightOpen:l,setRightPanelMode:d,setAvailableTemplates:h,mapSettings:f,setMapSettings:p,setOnMapSettingsChange:g}=La(),[x,w]=P.useState(e==="create"?"setup":"editor");P.useEffect(()=>{w(e==="create"?"setup":"editor")},[e]);const[b,k]=P.useState(((oe=a.state)==null?void 0:oe.folderId)||null),[_,S]=P.useState(1),[v,j]=P.useState({name:"New Map",description:"",parentZone:null,type:"regional",sourceType:"blank",dims:{width:800,height:600},bgImage:null}),[C,R]=P.useState(!1),[L,A]=P.useState("brush"),[O,T]=P.useState([]),[I,M]=P.useState([]),[$,F]=P.useState([]),[G,B]=P.useState(null),Y=re.useRef(!1),[K,H]=P.useState({isOpen:!1,id:null,text:""}),W=U=>{U.target===U.target.getStage()&&B(null)},D=U=>{W(U);const le=U.target.getStage().getPointerPosition();L!=="select"&&(Y.current=!0,L==="brush"||L==="eraser"?T([...O,{id:`line-${Date.now()}`,tool:L,points:[le.x,le.y],color:L==="eraser"?"#ffffff":"#df4b26",size:L==="eraser"?20:5}]):L==="rect"?M([...I,{id:`rect-${Date.now()}`,x:le.x,y:le.y,width:0,height:0,color:"#df4b26"}]):L==="text"&&(F([...$,{id:`text-${Date.now()}`,x:le.x,y:le.y,text:"Double click to edit",fontSize:20,color:"#ffffff"}]),Y.current=!1))},q=U=>{if(!Y.current)return;const le=U.target.getStage().getPointerPosition();L==="brush"||L==="eraser"?T(me=>{const ye=[...me],ae={...ye[ye.length-1]};return ae.points=ae.points.concat([le.x,le.y]),ye[ye.length-1]=ae,ye}):L==="rect"&&M(me=>{const ye=[...me],ae={...ye[ye.length-1]};return ae.width=le.x-ae.x,ae.height=le.y-ae.y,ye[ye.length-1]=ae,ye})},J=()=>{Y.current=!1};P.useEffect(()=>{if(l(x==="editor"),x==="editor"){d("MAP");const U={showGrid:!0,gridSize:50,width:v.dims.width,height:v.dims.height};p(U),g(X=>{X&&j(le=>({...le,dims:{width:X.width,height:X.height}}))})}},[x]),P.useEffect(()=>{e==="create"&&!b&&n&&(console.log("Resolving folder ID for slug:",n),he.get(`/world-bible/folders/${n}`).then(U=>k(U.id)).catch(U=>console.error("Could not resolve folder ID",U)))},[e,n,b]);const ee=U=>{const X=U.target.files[0];if(X){const le=new FileReader;le.onload=me=>{const ye=new Image;ye.onload=()=>{j(ae=>({...ae,bgImage:me.target.result,dims:{width:ye.width,height:ye.height},sourceType:"upload"}))},ye.src=me.target.result},le.readAsDataURL(X)}},ue=re.useRef(null),pe=async()=>{if(!b){alert("Folder context missing. Please start from the folder view again.");return}R(!0);try{let U=v.bgImage;if(ue.current){const me=ue.current.findOne("Transformer");if(me&&me.nodes([]),U=ue.current.toDataURL({pixelRatio:.5}),me&&G){const ye=ue.current.findOne("#"+G);ye&&me.nodes([ye])}}const X={nombre:v.name,tipoEspecial:"map",carpetaId:b,descripcion:JSON.stringify({description:v.description,type:v.type,width:v.dims.width,height:v.dims.height,bgImage:v.bgImage?"BINARY_DATA":null,layers:{lines:O,rectangles:I,texts:$},snapshotUrl:U}),iconUrl:U},le=await he.post("/world-bible/entities",X);window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:b}})),s(`/${t}/${r}/map-editor/edit/${le.id}`,{replace:!0})}catch(U){console.error(U),alert("Error creating map. Check console.")}finally{R(!1)}},V=re.useRef(null);P.useEffect(()=>{(!e||e==="edit")&&i&&he.get(`/world-bible/entities/${i}`).then(U=>{k(U.carpetaId),V.current=U.iconUrl,w("editor");let X={};try{X=U.descripcion?JSON.parse(U.descripcion):{}}catch(le){console.error("Error parsing map data",le)}j({name:U.nombre,description:X.description||"",parentZone:null,type:X.type||"regional",sourceType:X.bgImage?"upload":"blank",dims:{width:X.width||800,height:X.height||600},bgImage:X.bgImage}),X.layers&&(T(X.layers.lines||[]),M(X.layers.rectangles||[]),F(X.layers.texts||[])),p({name:U.nombre,description:X.description||"",type:X.type||"regional",showGrid:!0,gridSize:50,width:X.width||800,height:X.height||600,bgImage:X.bgImage})}).catch(U=>console.error("Error loading entity",U))},[e,i]);const te=async()=>{R(!0);try{let U=v.bgImage;if(ue.current){B(null);const le=ue.current.findOne("Transformer");le&&le.nodes([]),U=ue.current.toDataURL({pixelRatio:.5})}const X={id:i,nombre:v.name,tipoEspecial:"map",carpetaId:b,descripcion:JSON.stringify({description:v.description,type:v.type,width:v.dims.width,height:v.dims.height,bgImage:v.bgImage?"BINARY_DATA":null,layers:{lines:O,rectangles:I,texts:$},snapshotUrl:U}),iconUrl:V.current};await he.put(`/world-bible/entities/${i}`,X),s(b?`/${t}/${r}/bible/folder/${b}`:`/${t}/${r}/bible`)}catch(U){console.error("Save failed",U),alert("Error saving map")}finally{R(!1)}};return x==="setup"?o.jsxs("div",{className:"flex-1 flex flex-col h-screen bg-[#060608] text-white",children:[o.jsxs("div",{className:"h-16 border-b border-white/5 flex items-center justify-between px-8 bg-[#0a0a0c]",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-primary/20 rounded-lg text-primary",children:o.jsx("span",{className:"material-symbols-outlined",children:"add_circle"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg font-bold leading-tight",children:"Create New Map / Zone"}),o.jsx("p",{className:"text-[10px] text-slate-500 uppercase font-bold tracking-wider",children:"Configure details for your new cartography entry"})]})]}),o.jsx("button",{onClick:()=>s(-1),className:"p-2 hover:bg-white/5 rounded-full text-slate-500 hover:text-white transition-colors",children:o.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-8",children:o.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[o.jsx(D2,{stepNumber:"1",title:"Identity & Hierarchy",isOpen:_===1,onClick:()=>S(1),children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500 mb-2 block",children:"Map Name"}),o.jsx("input",{autoFocus:!0,value:v.name,onChange:U=>j({...v,name:U.target.value}),className:"w-full bg-[#0a0a0c] border border-white/10 rounded-xl p-4 text-white focus:border-primary outline-none transition-colors",placeholder:"e.g. The Sapphire Coast"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500 mb-2 block",children:"Parent Zone (Optional)"}),o.jsxs("div",{className:"w-full bg-[#0a0a0c] border border-white/10 rounded-xl p-4 text-slate-400 flex items-center justify-between cursor-pointer hover:border-white/20",children:[o.jsx("span",{children:"Current Folder (Default)"}),o.jsx("span",{className:"material-symbols-outlined text-sm",children:"expand_more"})]}),o.jsx("p",{className:"text-[10px] text-slate-600 mt-2",children:"Selecting a parent makes this a sub-zone."})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500 mb-2 block",children:"Description"}),o.jsx("textarea",{value:v.description,onChange:U=>j({...v,description:U.target.value}),className:"w-full h-40 bg-[#0a0a0c] border border-white/10 rounded-xl p-4 text-white resize-none focus:border-primary outline-none transition-colors leading-relaxed",placeholder:"Brief description of geography, climate, or importance..."})]})]})}),o.jsx(D2,{stepNumber:"2",title:"Map Type",isOpen:_===2,onClick:()=>S(2),children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx(z2,{icon:"public",title:"World Map",desc:"Continents, oceans, global scale.",selected:v.type==="world",onClick:()=>j({...v,type:"world"})}),o.jsx(z2,{icon:"map",title:"Regional Map",desc:"Kingdoms, provinces, biomes.",selected:v.type==="regional",onClick:()=>j({...v,type:"regional"})}),o.jsx(z2,{icon:"location_city",title:"City / Local",desc:"Cities, dungeons, battlemaps.",selected:v.type==="local",onClick:()=>j({...v,type:"local"})})]})}),o.jsx(D2,{stepNumber:"3",title:"Canvas Source",isOpen:_===3,onClick:()=>S(3),children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{onClick:()=>document.getElementById("map-upload-input").click(),className:`relative p-8 rounded-xl border-2 border-dashed flex flex-col items-center justify-center text-center cursor-pointer transition-all group min-h-[200px] ${v.sourceType==="upload"?"border-primary bg-primary/5":"border-white/10 hover:border-white/30 bg-[#0a0a0c]"}`,children:[o.jsx("input",{id:"map-upload-input",type:"file",accept:"image/*",className:"hidden",onChange:ee}),v.bgImage?o.jsx("img",{src:v.bgImage,alt:"Preview",className:"absolute inset-0 w-full h-full object-cover rounded-xl opacity-50 group-hover:opacity-70"}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"size-16 bg-white/5 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:o.jsx("span",{className:"material-symbols-outlined text-3xl text-slate-400",children:"cloud_upload"})}),o.jsx("h4",{className:"font-bold text-white",children:"Upload Image File"}),o.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Drag & drop or click to browse"}),o.jsx("p",{className:"text-[10px] text-slate-600 mt-1 uppercase font-bold",children:"JPG, PNG, WEBP  Max 20MB"})]}),v.sourceType==="upload"&&o.jsx("div",{className:"absolute top-4 right-4 size-3 bg-primary rounded-full shadow-glow z-10"})]}),o.jsxs("div",{onClick:()=>j({...v,sourceType:"blank",bgImage:null}),className:`p-8 rounded-xl border flex flex-col items-center justify-center text-center cursor-pointer transition-all min-h-[200px] ${v.sourceType==="blank"?"border-primary bg-primary/5":"border-white/10 hover:border-white/30 bg-[#0a0a0c]"}`,children:[o.jsx("div",{className:"size-16 bg-white/5 rounded-full flex items-center justify-center mb-4",children:o.jsx("span",{className:"material-symbols-outlined text-3xl text-slate-400",children:"check_box_outline_blank"})}),o.jsx("h4",{className:"font-bold text-white",children:"Blank Canvas"}),o.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Start a new drawing from scratch"}),v.sourceType==="blank"&&o.jsxs("div",{className:"mt-6 flex items-center gap-2 bg-black/50 p-1 rounded-lg border border-white/10",children:[o.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-500 px-2",children:"Size"}),o.jsx("span",{className:"text-xs font-mono text-white",children:"4096 px"}),o.jsx("span",{className:"text-xs text-slate-500",children:"x"}),o.jsx("span",{className:"text-xs font-mono text-white",children:"4096 px"})]})]})]})})]})}),o.jsxs("div",{className:"h-20 border-t border-white/5 bg-[#0a0a0c] flex items-center justify-between px-8 z-20",children:[o.jsx("button",{onClick:()=>s(-1),className:"text-sm font-bold text-slate-500 hover:text-white transition-colors",children:"Cancel"}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("span",{className:"text-xs text-slate-600 italic",children:"Changes saved locally"}),o.jsx(Xe,{variant:"primary",size:"lg",icon:"check",onClick:pe,disabled:!v.name||C,className:"bg-primary hover:bg-primary-light text-white shadow-lg shadow-primary/25 px-8",children:C?"Creating...":"Create Map"})]})]})]}):o.jsxs("div",{className:"flex flex-col h-screen w-full bg-[#0f0f13] text-white overflow-hidden",children:[o.jsxs("header",{className:"h-14 border-b border-white/5 flex items-center justify-between px-4 bg-[#1a1a20] shrink-0",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:()=>s(-1),className:"p-2 hover:bg-white/5 rounded-full",title:"Back to Collection",children:o.jsx("span",{className:"material-symbols-outlined text-sm",children:"arrow_back"})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("input",{value:v.name,onChange:U=>j({...v,name:U.target.value}),className:"bg-transparent font-bold text-sm outline-none focus:bg-white/5 rounded px-2 -ml-2"}),o.jsxs("span",{className:"text-[10px] text-text-muted px-2",children:[v.dims.width," x ",v.dims.height,"  ",(f==null?void 0:f.gridSize)||50,"px Grid"]})]})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx(Xe,{variant:"primary",size:"sm",icon:"save",onClick:te,disabled:C,children:C?"Saving...":"Save Changes"})})]}),o.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[o.jsx("div",{className:"w-14 bg-[#1a1a20] border-r border-white/5 flex flex-col items-center py-4 gap-4 z-10",children:[{id:"select",icon:"near_me"},{id:"brush",icon:"brush"},{id:"eraser",icon:"ink_eraser"},{id:"rect",icon:"check_box_outline_blank"},{id:"text",icon:"title"}].map(U=>o.jsx("button",{onClick:()=>A(U.id),className:`p-2 rounded-lg transition-colors ${L===U.id?"bg-primary text-white shadow-lg shadow-primary/30":"hover:bg-white/5 text-slate-400 hover:text-white"}`,children:o.jsx("span",{className:"material-symbols-outlined",children:U.icon})},U.id))}),o.jsx("div",{className:"flex-1 overflow-auto bg-[#0f0f13] relative flex items-center justify-center p-8 custom-scrollbar",children:o.jsx("div",{className:"bg-[#1a1a20] shadow-[0_0_50px_rgba(0,0,0,0.5)] flex-none",children:o.jsxs(ate,{ref:ue,width:v.dims.width,height:v.dims.height,onMouseDown:D,onMouseMove:q,onMouseUp:J,className:"bg-white",children:[o.jsxs(ik,{children:[v.bgImage&&o.jsx(lte,{src:v.bgImage,x:0,y:0,width:v.dims.width,height:v.dims.height}),(f==null?void 0:f.showGrid)&&o.jsx(sk,{width:v.dims.width,height:v.dims.height,fillPatternImage:(()=>{const U=document.createElement("canvas");U.width=f.gridSize||50,U.height=f.gridSize||50;const X=U.getContext("2d");return X.strokeStyle="rgba(0,0,0,0.2)",X.lineWidth=1,X.strokeRect(0,0,U.width,U.height),U})(),listening:!1})]}),o.jsxs(ik,{children:[O.map((U,X)=>o.jsx(rte,{points:U.points,stroke:U.color,strokeWidth:U.size,tension:.5,lineCap:"round",lineJoin:"round",globalCompositeOperation:U.tool==="eraser"?"destination-out":"source-over"},X)),I.map((U,X)=>o.jsx(sk,{id:U.id,x:U.x,y:U.y,width:U.width,height:U.height,stroke:U.color,strokeWidth:2,draggable:L==="select",onClick:()=>L==="select"&&B(U.id),onTap:()=>L==="select"&&B(U.id)},U.id)),$.map((U,X)=>o.jsx(ite,{id:U.id,x:U.x,y:U.y,text:U.text,fontSize:U.fontSize,fill:U.color,draggable:L==="select",onClick:()=>L==="select"&&B(U.id),onTap:()=>L==="select"&&B(U.id),onDblClick:le=>{H({isOpen:!0,id:U.id,text:U.text})}},U.id)),o.jsx(cte,{selectedId:G})]})]})})})]}),o.jsx(ote,{isOpen:K.isOpen,onClose:()=>H(U=>({...U,isOpen:!1})),title:"Edit Map Text",initialValue:K.text,onConfirm:U=>{F(X=>X.map(le=>le.id===K.id?{...le,text:U}:le))},confirmText:"Save Text"})]})};function ute(){return o.jsx(OL,{children:o.jsxs(TL,{children:[o.jsx(lt,{path:"/",element:o.jsx(EO,{})}),o.jsxs(lt,{element:o.jsx(wO,{}),children:[o.jsx(lt,{path:"/dashboard",element:o.jsx(jO,{})}),o.jsxs(lt,{path:"/:username/:projectName",element:o.jsx(IO,{}),children:[o.jsx(lt,{index:!0,element:o.jsx(TO,{})}),o.jsx(lt,{path:"writing",element:o.jsx(VY,{})}),o.jsx(lt,{path:"entities/:type/:entityId",element:o.jsx(IY,{})}),o.jsx(lt,{path:"settings",element:o.jsx(PO,{})}),o.jsx(lt,{path:"map-editor/create/:folderId",element:o.jsx(ak,{mode:"create"})}),o.jsx(lt,{path:"map-editor/edit/:entityId",element:o.jsx(ak,{mode:"edit"})}),o.jsxs(lt,{path:"bible",element:o.jsx(rX,{}),children:[o.jsx(lt,{index:!0,element:o.jsx(nX,{})}),o.jsx(lt,{path:"folder/:folderSlug/entity/new/:type",element:o.jsx(fc,{mode:"creation"})}),o.jsx(lt,{path:"folder/:folderSlug",element:o.jsx(ZY,{})}),o.jsx(lt,{path:"entity/:entitySlug",element:o.jsx(fc,{})}),o.jsx(lt,{path:"folder/:folderSlug/entity/:entitySlug",element:o.jsx(fc,{})}),o.jsx(lt,{path:"folder/:folderSlug/map/:entitySlug",element:o.jsx(fc,{})}),o.jsx(lt,{path:"folder/:folderSlug/timeline/:entitySlug",element:o.jsx(fc,{})})]}),o.jsx(lt,{path:"map",element:o.jsx(UY,{})}),o.jsx(lt,{path:"timeline",element:o.jsx(MY,{})}),o.jsx(lt,{path:"languages",element:o.jsx(qY,{})}),o.jsx(lt,{path:"trash",element:o.jsx(HY,{})}),o.jsx(lt,{path:"graph",element:o.jsx(EY,{})})]})]})]})})}class dte extends re.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,r){this.setState({error:t,errorInfo:r}),console.error("Uncaught Error:",t,r)}render(){return this.state.hasError?o.jsxs("div",{style:{padding:20,background:"#222",color:"red",height:"100vh"},children:[o.jsx("h1",{children:"Something went wrong."}),o.jsxs("details",{style:{whiteSpace:"pre-wrap"},children:[this.state.error&&this.state.error.toString(),o.jsx("br",{}),this.state.errorInfo&&this.state.errorInfo.componentStack]})]}):this.props.children}}const ok=document.getElementById("root");ok?U2.createRoot(ok).render(o.jsx(re.StrictMode,{children:o.jsx(dte,{children:o.jsx(ute,{})})})):console.error("React root element not found (looked for #root)");
