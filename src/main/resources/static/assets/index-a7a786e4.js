var CF=Object.defineProperty;var jF=(t,e,n)=>e in t?CF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var TF=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var je=(t,e,n)=>(jF(t,typeof e!="symbol"?e+"":e,n),n);var Tge=TF((Yr,Xr)=>{function AF(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Qt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Uo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var bA={exports:{}},Bg={},wA={exports:{}},ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xh=Symbol.for("react.element"),OF=Symbol.for("react.portal"),PF=Symbol.for("react.fragment"),RF=Symbol.for("react.strict_mode"),LF=Symbol.for("react.profiler"),IF=Symbol.for("react.provider"),MF=Symbol.for("react.context"),DF=Symbol.for("react.forward_ref"),FF=Symbol.for("react.suspense"),qF=Symbol.for("react.memo"),BF=Symbol.for("react.lazy"),xS=Symbol.iterator;function zF(t){return t===null||typeof t!="object"?null:(t=xS&&t[xS]||t["@@iterator"],typeof t=="function"?t:null)}var _A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},NA=Object.assign,SA={};function Wu(t,e,n){this.props=t,this.context=e,this.refs=SA,this.updater=n||_A}Wu.prototype.isReactComponent={};Wu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Wu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function EA(){}EA.prototype=Wu.prototype;function y3(t,e,n){this.props=t,this.context=e,this.refs=SA,this.updater=n||_A}var x3=y3.prototype=new EA;x3.constructor=y3;NA(x3,Wu.prototype);x3.isPureReactComponent=!0;var bS=Array.isArray,kA=Object.prototype.hasOwnProperty,b3={current:null},CA={key:!0,ref:!0,__self:!0,__source:!0};function jA(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)kA.call(e,r)&&!CA.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:xh,type:t,key:s,ref:a,props:i,_owner:b3.current}}function $F(t,e){return{$$typeof:xh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function w3(t){return typeof t=="object"&&t!==null&&t.$$typeof===xh}function UF(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var wS=/\/+/g;function Mv(t,e){return typeof t=="object"&&t!==null&&t.key!=null?UF(""+t.key):e.toString(36)}function ym(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case xh:case OF:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+Mv(a,0):r,bS(i)?(n="",t!=null&&(n=t.replace(wS,"$&/")+"/"),ym(i,e,n,"",function(u){return u})):i!=null&&(w3(i)&&(i=$F(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(wS,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",bS(t))for(var o=0;o<t.length;o++){s=t[o];var l=r+Mv(s,o);a+=ym(s,e,n,l,i)}else if(l=zF(t),typeof l=="function")for(t=l.call(t),o=0;!(s=t.next()).done;)s=s.value,l=r+Mv(s,o++),a+=ym(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Tp(t,e,n){if(t==null)return t;var r=[],i=0;return ym(t,r,"","",function(s){return e.call(n,s,i++)}),r}function GF(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var br={current:null},xm={transition:null},HF={ReactCurrentDispatcher:br,ReactCurrentBatchConfig:xm,ReactCurrentOwner:b3};function TA(){throw Error("act(...) is not supported in production builds of React.")}ot.Children={map:Tp,forEach:function(t,e,n){Tp(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Tp(t,function(){e++}),e},toArray:function(t){return Tp(t,function(e){return e})||[]},only:function(t){if(!w3(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ot.Component=Wu;ot.Fragment=PF;ot.Profiler=LF;ot.PureComponent=y3;ot.StrictMode=RF;ot.Suspense=FF;ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HF;ot.act=TA;ot.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=NA({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=b3.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)kA.call(e,l)&&!CA.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:xh,type:t.type,key:i,ref:s,props:r,_owner:a}};ot.createContext=function(t){return t={$$typeof:MF,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:IF,_context:t},t.Consumer=t};ot.createElement=jA;ot.createFactory=function(t){var e=jA.bind(null,t);return e.type=t,e};ot.createRef=function(){return{current:null}};ot.forwardRef=function(t){return{$$typeof:DF,render:t}};ot.isValidElement=w3;ot.lazy=function(t){return{$$typeof:BF,_payload:{_status:-1,_result:t},_init:GF}};ot.memo=function(t,e){return{$$typeof:qF,type:t,compare:e===void 0?null:e}};ot.startTransition=function(t){var e=xm.transition;xm.transition={};try{t()}finally{xm.transition=e}};ot.unstable_act=TA;ot.useCallback=function(t,e){return br.current.useCallback(t,e)};ot.useContext=function(t){return br.current.useContext(t)};ot.useDebugValue=function(){};ot.useDeferredValue=function(t){return br.current.useDeferredValue(t)};ot.useEffect=function(t,e){return br.current.useEffect(t,e)};ot.useId=function(){return br.current.useId()};ot.useImperativeHandle=function(t,e,n){return br.current.useImperativeHandle(t,e,n)};ot.useInsertionEffect=function(t,e){return br.current.useInsertionEffect(t,e)};ot.useLayoutEffect=function(t,e){return br.current.useLayoutEffect(t,e)};ot.useMemo=function(t,e){return br.current.useMemo(t,e)};ot.useReducer=function(t,e,n){return br.current.useReducer(t,e,n)};ot.useRef=function(t){return br.current.useRef(t)};ot.useState=function(t){return br.current.useState(t)};ot.useSyncExternalStore=function(t,e,n){return br.current.useSyncExternalStore(t,e,n)};ot.useTransition=function(){return br.current.useTransition()};ot.version="18.3.1";wA.exports=ot;var V=wA.exports;const fe=Uo(V),VF=AF({__proto__:null,default:fe},[V]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WF=V,KF=Symbol.for("react.element"),YF=Symbol.for("react.fragment"),XF=Object.prototype.hasOwnProperty,QF=WF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ZF={key:!0,ref:!0,__self:!0,__source:!0};function AA(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)XF.call(e,r)&&!ZF.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:KF,type:t,key:s,ref:a,props:i,_owner:QF.current}}Bg.Fragment=YF;Bg.jsx=AA;Bg.jsxs=AA;bA.exports=Bg;var c=bA.exports,y5={},OA={exports:{}},ei={},PA={exports:{}},RA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Y,H){var B=Y.length;Y.push(H);e:for(;0<B;){var L=B-1>>>1,z=Y[L];if(0<i(z,H))Y[L]=H,Y[B]=z,B=L;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var H=Y[0],B=Y.pop();if(B!==H){Y[0]=B;e:for(var L=0,z=Y.length,K=z>>>1;L<K;){var J=2*(L+1)-1,ne=Y[J],X=J+1,G=Y[X];if(0>i(ne,B))X<z&&0>i(G,ne)?(Y[L]=G,Y[X]=B,L=X):(Y[L]=ne,Y[J]=B,L=J);else if(X<z&&0>i(G,B))Y[L]=G,Y[X]=B,L=X;else break e}}return H}function i(Y,H){var B=Y.sortIndex-H.sortIndex;return B!==0?B:Y.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],u=[],d=1,p=null,h=3,m=!1,y=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(Y){for(var H=n(u);H!==null;){if(H.callback===null)r(u);else if(H.startTime<=Y)r(u),H.sortIndex=H.expirationTime,e(l,H);else break;H=n(u)}}function N(Y){if(x=!1,b(Y),!y)if(n(l)!==null)y=!0,U(E);else{var H=n(u);H!==null&&W(N,H.startTime-Y)}}function E(Y,H){y=!1,x&&(x=!1,v(T),T=-1),m=!0;var B=h;try{for(b(H),p=n(l);p!==null&&(!(p.expirationTime>H)||Y&&!j());){var L=p.callback;if(typeof L=="function"){p.callback=null,h=p.priorityLevel;var z=L(p.expirationTime<=H);H=t.unstable_now(),typeof z=="function"?p.callback=z:p===n(l)&&r(l),b(H)}else r(l);p=n(l)}if(p!==null)var K=!0;else{var J=n(u);J!==null&&W(N,J.startTime-H),K=!1}return K}finally{p=null,h=B,m=!1}}var A=!1,P=null,T=-1,M=5,k=-1;function j(){return!(t.unstable_now()-k<M)}function O(){if(P!==null){var Y=t.unstable_now();k=Y;var H=!0;try{H=P(!0,Y)}finally{H?q():(A=!1,P=null)}}else A=!1}var q;if(typeof w=="function")q=function(){w(O)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,D=I.port2;I.port1.onmessage=O,q=function(){D.postMessage(null)}}else q=function(){_(O,0)};function U(Y){P=Y,A||(A=!0,q())}function W(Y,H){T=_(function(){Y(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,U(E))},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(Y){switch(h){case 1:case 2:case 3:var H=3;break;default:H=h}var B=h;h=H;try{return Y()}finally{h=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Y,H){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var B=h;h=Y;try{return H()}finally{h=B}},t.unstable_scheduleCallback=function(Y,H,B){var L=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?L+B:L):B=L,Y){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=B+z,Y={id:d++,callback:H,priorityLevel:Y,startTime:B,expirationTime:z,sortIndex:-1},B>L?(Y.sortIndex=B,e(u,Y),n(l)===null&&Y===n(u)&&(x?(v(T),T=-1):x=!0,W(N,B-L))):(Y.sortIndex=z,e(l,Y),y||m||(y=!0,U(E))),Y},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(Y){var H=h;return function(){var B=h;h=H;try{return Y.apply(this,arguments)}finally{h=B}}}})(RA);PA.exports=RA;var bf=PA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JF=V,Zr=bf;function Ne(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var LA=new Set,Lf={};function tc(t,e){ku(t,e),ku(t+"Capture",e)}function ku(t,e){for(Lf[t]=e,t=0;t<e.length;t++)LA.add(e[t])}var ya=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),x5=Object.prototype.hasOwnProperty,eq=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_S={},NS={};function tq(t){return x5.call(NS,t)?!0:x5.call(_S,t)?!1:eq.test(t)?NS[t]=!0:(_S[t]=!0,!1)}function nq(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function rq(t,e,n,r){if(e===null||typeof e>"u"||nq(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wr(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Yn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Yn[t]=new wr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Yn[e]=new wr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Yn[t]=new wr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Yn[t]=new wr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Yn[t]=new wr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Yn[t]=new wr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Yn[t]=new wr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Yn[t]=new wr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Yn[t]=new wr(t,5,!1,t.toLowerCase(),null,!1,!1)});var _3=/[\-:]([a-z])/g;function N3(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(_3,N3);Yn[e]=new wr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(_3,N3);Yn[e]=new wr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(_3,N3);Yn[e]=new wr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Yn[t]=new wr(t,1,!1,t.toLowerCase(),null,!1,!1)});Yn.xlinkHref=new wr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Yn[t]=new wr(t,1,!1,t.toLowerCase(),null,!0,!0)});function S3(t,e,n,r){var i=Yn.hasOwnProperty(e)?Yn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(rq(e,n,i,r)&&(n=null),r||i===null?tq(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ja=JF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ap=Symbol.for("react.element"),Jc=Symbol.for("react.portal"),eu=Symbol.for("react.fragment"),E3=Symbol.for("react.strict_mode"),b5=Symbol.for("react.profiler"),IA=Symbol.for("react.provider"),MA=Symbol.for("react.context"),k3=Symbol.for("react.forward_ref"),w5=Symbol.for("react.suspense"),_5=Symbol.for("react.suspense_list"),C3=Symbol.for("react.memo"),uo=Symbol.for("react.lazy"),DA=Symbol.for("react.offscreen"),SS=Symbol.iterator;function Ld(t){return t===null||typeof t!="object"?null:(t=SS&&t[SS]||t["@@iterator"],typeof t=="function"?t:null)}var Jt=Object.assign,Dv;function af(t){if(Dv===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Dv=e&&e[1]||""}return`
`+Dv+t}var Fv=!1;function qv(t,e){if(!t||Fv)return"";Fv=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{Fv=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?af(t):""}function iq(t){switch(t.tag){case 5:return af(t.type);case 16:return af("Lazy");case 13:return af("Suspense");case 19:return af("SuspenseList");case 0:case 2:case 15:return t=qv(t.type,!1),t;case 11:return t=qv(t.type.render,!1),t;case 1:return t=qv(t.type,!0),t;default:return""}}function N5(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case eu:return"Fragment";case Jc:return"Portal";case b5:return"Profiler";case E3:return"StrictMode";case w5:return"Suspense";case _5:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case MA:return(t.displayName||"Context")+".Consumer";case IA:return(t._context.displayName||"Context")+".Provider";case k3:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case C3:return e=t.displayName||null,e!==null?e:N5(t.type)||"Memo";case uo:e=t._payload,t=t._init;try{return N5(t(e))}catch{}}return null}function sq(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return N5(e);case 8:return e===E3?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Do(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function FA(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function aq(t){var e=FA(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Op(t){t._valueTracker||(t._valueTracker=aq(t))}function qA(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=FA(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function qm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function S5(t,e){var n=e.checked;return Jt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ES(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Do(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function BA(t,e){e=e.checked,e!=null&&S3(t,"checked",e,!1)}function E5(t,e){BA(t,e);var n=Do(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?k5(t,e.type,n):e.hasOwnProperty("defaultValue")&&k5(t,e.type,Do(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function kS(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function k5(t,e,n){(e!=="number"||qm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var of=Array.isArray;function fu(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Do(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function C5(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ne(91));return Jt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function CS(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ne(92));if(of(n)){if(1<n.length)throw Error(Ne(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Do(n)}}function zA(t,e){var n=Do(e.value),r=Do(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function jS(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $A(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function j5(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$A(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Pp,UA=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Pp=Pp||document.createElement("div"),Pp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Pp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function If(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var wf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oq=["Webkit","ms","Moz","O"];Object.keys(wf).forEach(function(t){oq.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),wf[e]=wf[t]})});function GA(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||wf.hasOwnProperty(t)&&wf[t]?(""+e).trim():e+"px"}function HA(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=GA(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var lq=Jt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function T5(t,e){if(e){if(lq[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ne(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ne(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ne(62))}}function A5(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var O5=null;function j3(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var P5=null,hu=null,pu=null;function TS(t){if(t=_h(t)){if(typeof P5!="function")throw Error(Ne(280));var e=t.stateNode;e&&(e=Hg(e),P5(t.stateNode,t.type,e))}}function VA(t){hu?pu?pu.push(t):pu=[t]:hu=t}function WA(){if(hu){var t=hu,e=pu;if(pu=hu=null,TS(t),e)for(t=0;t<e.length;t++)TS(e[t])}}function KA(t,e){return t(e)}function YA(){}var Bv=!1;function XA(t,e,n){if(Bv)return t(e,n);Bv=!0;try{return KA(t,e,n)}finally{Bv=!1,(hu!==null||pu!==null)&&(YA(),WA())}}function Mf(t,e){var n=t.stateNode;if(n===null)return null;var r=Hg(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ne(231,e,typeof n));return n}var R5=!1;if(ya)try{var Id={};Object.defineProperty(Id,"passive",{get:function(){R5=!0}}),window.addEventListener("test",Id,Id),window.removeEventListener("test",Id,Id)}catch{R5=!1}function cq(t,e,n,r,i,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var _f=!1,Bm=null,zm=!1,L5=null,uq={onError:function(t){_f=!0,Bm=t}};function dq(t,e,n,r,i,s,a,o,l){_f=!1,Bm=null,cq.apply(uq,arguments)}function fq(t,e,n,r,i,s,a,o,l){if(dq.apply(this,arguments),_f){if(_f){var u=Bm;_f=!1,Bm=null}else throw Error(Ne(198));zm||(zm=!0,L5=u)}}function nc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function QA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function AS(t){if(nc(t)!==t)throw Error(Ne(188))}function hq(t){var e=t.alternate;if(!e){if(e=nc(t),e===null)throw Error(Ne(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return AS(i),t;if(s===r)return AS(i),e;s=s.sibling}throw Error(Ne(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(Ne(189))}}if(n.alternate!==r)throw Error(Ne(190))}if(n.tag!==3)throw Error(Ne(188));return n.stateNode.current===n?t:e}function ZA(t){return t=hq(t),t!==null?JA(t):null}function JA(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=JA(t);if(e!==null)return e;t=t.sibling}return null}var eO=Zr.unstable_scheduleCallback,OS=Zr.unstable_cancelCallback,pq=Zr.unstable_shouldYield,mq=Zr.unstable_requestPaint,hn=Zr.unstable_now,gq=Zr.unstable_getCurrentPriorityLevel,T3=Zr.unstable_ImmediatePriority,tO=Zr.unstable_UserBlockingPriority,$m=Zr.unstable_NormalPriority,vq=Zr.unstable_LowPriority,nO=Zr.unstable_IdlePriority,zg=null,As=null;function yq(t){if(As&&typeof As.onCommitFiberRoot=="function")try{As.onCommitFiberRoot(zg,t,void 0,(t.current.flags&128)===128)}catch{}}var Xi=Math.clz32?Math.clz32:wq,xq=Math.log,bq=Math.LN2;function wq(t){return t>>>=0,t===0?32:31-(xq(t)/bq|0)|0}var Rp=64,Lp=4194304;function lf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Um(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=lf(o):(s&=a,s!==0&&(r=lf(s)))}else a=n&~i,a!==0?r=lf(a):s!==0&&(r=lf(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Xi(e),i=1<<n,r|=t[n],e&=~i;return r}function _q(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nq(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Xi(s),o=1<<a,l=i[a];l===-1?(!(o&n)||o&r)&&(i[a]=_q(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}}function I5(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function rO(){var t=Rp;return Rp<<=1,!(Rp&4194240)&&(Rp=64),t}function zv(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function bh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Xi(e),t[e]=n}function Sq(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Xi(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function A3(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Xi(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var St=0;function iO(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var sO,O3,aO,oO,lO,M5=!1,Ip=[],So=null,Eo=null,ko=null,Df=new Map,Ff=new Map,mo=[],Eq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function PS(t,e){switch(t){case"focusin":case"focusout":So=null;break;case"dragenter":case"dragleave":Eo=null;break;case"mouseover":case"mouseout":ko=null;break;case"pointerover":case"pointerout":Df.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ff.delete(e.pointerId)}}function Md(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=_h(e),e!==null&&O3(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function kq(t,e,n,r,i){switch(e){case"focusin":return So=Md(So,t,e,n,r,i),!0;case"dragenter":return Eo=Md(Eo,t,e,n,r,i),!0;case"mouseover":return ko=Md(ko,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Df.set(s,Md(Df.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ff.set(s,Md(Ff.get(s)||null,t,e,n,r,i)),!0}return!1}function cO(t){var e=Ll(t.target);if(e!==null){var n=nc(e);if(n!==null){if(e=n.tag,e===13){if(e=QA(n),e!==null){t.blockedOn=e,lO(t.priority,function(){aO(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function bm(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=D5(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);O5=r,n.target.dispatchEvent(r),O5=null}else return e=_h(n),e!==null&&O3(e),t.blockedOn=n,!1;e.shift()}return!0}function RS(t,e,n){bm(t)&&n.delete(e)}function Cq(){M5=!1,So!==null&&bm(So)&&(So=null),Eo!==null&&bm(Eo)&&(Eo=null),ko!==null&&bm(ko)&&(ko=null),Df.forEach(RS),Ff.forEach(RS)}function Dd(t,e){t.blockedOn===e&&(t.blockedOn=null,M5||(M5=!0,Zr.unstable_scheduleCallback(Zr.unstable_NormalPriority,Cq)))}function qf(t){function e(i){return Dd(i,t)}if(0<Ip.length){Dd(Ip[0],t);for(var n=1;n<Ip.length;n++){var r=Ip[n];r.blockedOn===t&&(r.blockedOn=null)}}for(So!==null&&Dd(So,t),Eo!==null&&Dd(Eo,t),ko!==null&&Dd(ko,t),Df.forEach(e),Ff.forEach(e),n=0;n<mo.length;n++)r=mo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<mo.length&&(n=mo[0],n.blockedOn===null);)cO(n),n.blockedOn===null&&mo.shift()}var mu=ja.ReactCurrentBatchConfig,Gm=!0;function jq(t,e,n,r){var i=St,s=mu.transition;mu.transition=null;try{St=1,P3(t,e,n,r)}finally{St=i,mu.transition=s}}function Tq(t,e,n,r){var i=St,s=mu.transition;mu.transition=null;try{St=4,P3(t,e,n,r)}finally{St=i,mu.transition=s}}function P3(t,e,n,r){if(Gm){var i=D5(t,e,n,r);if(i===null)Qv(t,e,r,Hm,n),PS(t,r);else if(kq(i,t,e,n,r))r.stopPropagation();else if(PS(t,r),e&4&&-1<Eq.indexOf(t)){for(;i!==null;){var s=_h(i);if(s!==null&&sO(s),s=D5(t,e,n,r),s===null&&Qv(t,e,r,Hm,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Qv(t,e,r,null,n)}}var Hm=null;function D5(t,e,n,r){if(Hm=null,t=j3(r),t=Ll(t),t!==null)if(e=nc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=QA(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Hm=t,null}function uO(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gq()){case T3:return 1;case tO:return 4;case $m:case vq:return 16;case nO:return 536870912;default:return 16}default:return 16}}var xo=null,R3=null,wm=null;function dO(){if(wm)return wm;var t,e=R3,n=e.length,r,i="value"in xo?xo.value:xo.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return wm=i.slice(t,1<r?1-r:void 0)}function _m(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Mp(){return!0}function LS(){return!1}function ti(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Mp:LS,this.isPropagationStopped=LS,this}return Jt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Mp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Mp)},persist:function(){},isPersistent:Mp}),e}var Ku={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},L3=ti(Ku),wh=Jt({},Ku,{view:0,detail:0}),Aq=ti(wh),$v,Uv,Fd,$g=Jt({},wh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:I3,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fd&&(Fd&&t.type==="mousemove"?($v=t.screenX-Fd.screenX,Uv=t.screenY-Fd.screenY):Uv=$v=0,Fd=t),$v)},movementY:function(t){return"movementY"in t?t.movementY:Uv}}),IS=ti($g),Oq=Jt({},$g,{dataTransfer:0}),Pq=ti(Oq),Rq=Jt({},wh,{relatedTarget:0}),Gv=ti(Rq),Lq=Jt({},Ku,{animationName:0,elapsedTime:0,pseudoElement:0}),Iq=ti(Lq),Mq=Jt({},Ku,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Dq=ti(Mq),Fq=Jt({},Ku,{data:0}),MS=ti(Fq),qq={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bq={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zq={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $q(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=zq[t])?!!e[t]:!1}function I3(){return $q}var Uq=Jt({},wh,{key:function(t){if(t.key){var e=qq[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=_m(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Bq[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:I3,charCode:function(t){return t.type==="keypress"?_m(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_m(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Gq=ti(Uq),Hq=Jt({},$g,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),DS=ti(Hq),Vq=Jt({},wh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:I3}),Wq=ti(Vq),Kq=Jt({},Ku,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yq=ti(Kq),Xq=Jt({},$g,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Qq=ti(Xq),Zq=[9,13,27,32],M3=ya&&"CompositionEvent"in window,Nf=null;ya&&"documentMode"in document&&(Nf=document.documentMode);var Jq=ya&&"TextEvent"in window&&!Nf,fO=ya&&(!M3||Nf&&8<Nf&&11>=Nf),FS=String.fromCharCode(32),qS=!1;function hO(t,e){switch(t){case"keyup":return Zq.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pO(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var tu=!1;function eB(t,e){switch(t){case"compositionend":return pO(e);case"keypress":return e.which!==32?null:(qS=!0,FS);case"textInput":return t=e.data,t===FS&&qS?null:t;default:return null}}function tB(t,e){if(tu)return t==="compositionend"||!M3&&hO(t,e)?(t=dO(),wm=R3=xo=null,tu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return fO&&e.locale!=="ko"?null:e.data;default:return null}}var nB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function BS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!nB[t.type]:e==="textarea"}function mO(t,e,n,r){VA(r),e=Vm(e,"onChange"),0<e.length&&(n=new L3("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Sf=null,Bf=null;function rB(t){kO(t,0)}function Ug(t){var e=iu(t);if(qA(e))return t}function iB(t,e){if(t==="change")return e}var gO=!1;if(ya){var Hv;if(ya){var Vv="oninput"in document;if(!Vv){var zS=document.createElement("div");zS.setAttribute("oninput","return;"),Vv=typeof zS.oninput=="function"}Hv=Vv}else Hv=!1;gO=Hv&&(!document.documentMode||9<document.documentMode)}function $S(){Sf&&(Sf.detachEvent("onpropertychange",vO),Bf=Sf=null)}function vO(t){if(t.propertyName==="value"&&Ug(Bf)){var e=[];mO(e,Bf,t,j3(t)),XA(rB,e)}}function sB(t,e,n){t==="focusin"?($S(),Sf=e,Bf=n,Sf.attachEvent("onpropertychange",vO)):t==="focusout"&&$S()}function aB(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ug(Bf)}function oB(t,e){if(t==="click")return Ug(e)}function lB(t,e){if(t==="input"||t==="change")return Ug(e)}function cB(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ts=typeof Object.is=="function"?Object.is:cB;function zf(t,e){if(ts(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!x5.call(e,i)||!ts(t[i],e[i]))return!1}return!0}function US(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function GS(t,e){var n=US(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=US(n)}}function yO(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?yO(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function xO(){for(var t=window,e=qm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=qm(t.document)}return e}function D3(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function uB(t){var e=xO(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&yO(n.ownerDocument.documentElement,n)){if(r!==null&&D3(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=GS(n,s);var a=GS(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var dB=ya&&"documentMode"in document&&11>=document.documentMode,nu=null,F5=null,Ef=null,q5=!1;function HS(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;q5||nu==null||nu!==qm(r)||(r=nu,"selectionStart"in r&&D3(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ef&&zf(Ef,r)||(Ef=r,r=Vm(F5,"onSelect"),0<r.length&&(e=new L3("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=nu)))}function Dp(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ru={animationend:Dp("Animation","AnimationEnd"),animationiteration:Dp("Animation","AnimationIteration"),animationstart:Dp("Animation","AnimationStart"),transitionend:Dp("Transition","TransitionEnd")},Wv={},bO={};ya&&(bO=document.createElement("div").style,"AnimationEvent"in window||(delete ru.animationend.animation,delete ru.animationiteration.animation,delete ru.animationstart.animation),"TransitionEvent"in window||delete ru.transitionend.transition);function Gg(t){if(Wv[t])return Wv[t];if(!ru[t])return t;var e=ru[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in bO)return Wv[t]=e[n];return t}var wO=Gg("animationend"),_O=Gg("animationiteration"),NO=Gg("animationstart"),SO=Gg("transitionend"),EO=new Map,VS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Go(t,e){EO.set(t,e),tc(e,[t])}for(var Kv=0;Kv<VS.length;Kv++){var Yv=VS[Kv],fB=Yv.toLowerCase(),hB=Yv[0].toUpperCase()+Yv.slice(1);Go(fB,"on"+hB)}Go(wO,"onAnimationEnd");Go(_O,"onAnimationIteration");Go(NO,"onAnimationStart");Go("dblclick","onDoubleClick");Go("focusin","onFocus");Go("focusout","onBlur");Go(SO,"onTransitionEnd");ku("onMouseEnter",["mouseout","mouseover"]);ku("onMouseLeave",["mouseout","mouseover"]);ku("onPointerEnter",["pointerout","pointerover"]);ku("onPointerLeave",["pointerout","pointerover"]);tc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));tc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));tc("onBeforeInput",["compositionend","keypress","textInput","paste"]);tc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));tc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));tc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pB=new Set("cancel close invalid load scroll toggle".split(" ").concat(cf));function WS(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,fq(r,e,void 0,t),t.currentTarget=null}function kO(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;WS(i,o,u),s=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;WS(i,o,u),s=l}}}if(zm)throw t=L5,zm=!1,L5=null,t}function Lt(t,e){var n=e[G5];n===void 0&&(n=e[G5]=new Set);var r=t+"__bubble";n.has(r)||(CO(e,t,2,!1),n.add(r))}function Xv(t,e,n){var r=0;e&&(r|=4),CO(n,t,r,e)}var Fp="_reactListening"+Math.random().toString(36).slice(2);function $f(t){if(!t[Fp]){t[Fp]=!0,LA.forEach(function(n){n!=="selectionchange"&&(pB.has(n)||Xv(n,!1,t),Xv(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Fp]||(e[Fp]=!0,Xv("selectionchange",!1,e))}}function CO(t,e,n,r){switch(uO(e)){case 1:var i=jq;break;case 4:i=Tq;break;default:i=P3}n=i.bind(null,e,n,t),i=void 0,!R5||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Qv(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Ll(o),a===null)return;if(l=a.tag,l===5||l===6){r=s=a;continue e}o=o.parentNode}}r=r.return}XA(function(){var u=s,d=j3(n),p=[];e:{var h=EO.get(t);if(h!==void 0){var m=L3,y=t;switch(t){case"keypress":if(_m(n)===0)break e;case"keydown":case"keyup":m=Gq;break;case"focusin":y="focus",m=Gv;break;case"focusout":y="blur",m=Gv;break;case"beforeblur":case"afterblur":m=Gv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=IS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Pq;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Wq;break;case wO:case _O:case NO:m=Iq;break;case SO:m=Yq;break;case"scroll":m=Aq;break;case"wheel":m=Qq;break;case"copy":case"cut":case"paste":m=Dq;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=DS}var x=(e&4)!==0,_=!x&&t==="scroll",v=x?h!==null?h+"Capture":null:h;x=[];for(var w=u,b;w!==null;){b=w;var N=b.stateNode;if(b.tag===5&&N!==null&&(b=N,v!==null&&(N=Mf(w,v),N!=null&&x.push(Uf(w,N,b)))),_)break;w=w.return}0<x.length&&(h=new m(h,y,null,n,d),p.push({event:h,listeners:x}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",h&&n!==O5&&(y=n.relatedTarget||n.fromElement)&&(Ll(y)||y[xa]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=u,y=y?Ll(y):null,y!==null&&(_=nc(y),y!==_||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=u),m!==y)){if(x=IS,N="onMouseLeave",v="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(x=DS,N="onPointerLeave",v="onPointerEnter",w="pointer"),_=m==null?h:iu(m),b=y==null?h:iu(y),h=new x(N,w+"leave",m,n,d),h.target=_,h.relatedTarget=b,N=null,Ll(d)===u&&(x=new x(v,w+"enter",y,n,d),x.target=b,x.relatedTarget=_,N=x),_=N,m&&y)t:{for(x=m,v=y,w=0,b=x;b;b=qc(b))w++;for(b=0,N=v;N;N=qc(N))b++;for(;0<w-b;)x=qc(x),w--;for(;0<b-w;)v=qc(v),b--;for(;w--;){if(x===v||v!==null&&x===v.alternate)break t;x=qc(x),v=qc(v)}x=null}else x=null;m!==null&&KS(p,h,m,x,!1),y!==null&&_!==null&&KS(p,_,y,x,!0)}}e:{if(h=u?iu(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var E=iB;else if(BS(h))if(gO)E=lB;else{E=aB;var A=sB}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(E=oB);if(E&&(E=E(t,u))){mO(p,E,n,d);break e}A&&A(t,h,u),t==="focusout"&&(A=h._wrapperState)&&A.controlled&&h.type==="number"&&k5(h,"number",h.value)}switch(A=u?iu(u):window,t){case"focusin":(BS(A)||A.contentEditable==="true")&&(nu=A,F5=u,Ef=null);break;case"focusout":Ef=F5=nu=null;break;case"mousedown":q5=!0;break;case"contextmenu":case"mouseup":case"dragend":q5=!1,HS(p,n,d);break;case"selectionchange":if(dB)break;case"keydown":case"keyup":HS(p,n,d)}var P;if(M3)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else tu?hO(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(fO&&n.locale!=="ko"&&(tu||T!=="onCompositionStart"?T==="onCompositionEnd"&&tu&&(P=dO()):(xo=d,R3="value"in xo?xo.value:xo.textContent,tu=!0)),A=Vm(u,T),0<A.length&&(T=new MS(T,t,null,n,d),p.push({event:T,listeners:A}),P?T.data=P:(P=pO(n),P!==null&&(T.data=P)))),(P=Jq?eB(t,n):tB(t,n))&&(u=Vm(u,"onBeforeInput"),0<u.length&&(d=new MS("onBeforeInput","beforeinput",null,n,d),p.push({event:d,listeners:u}),d.data=P))}kO(p,e)})}function Uf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vm(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Mf(t,n),s!=null&&r.unshift(Uf(t,s,i)),s=Mf(t,e),s!=null&&r.push(Uf(t,s,i))),t=t.return}return r}function qc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function KS(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,i?(l=Mf(n,s),l!=null&&a.unshift(Uf(n,l,o))):i||(l=Mf(n,s),l!=null&&a.push(Uf(n,l,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var mB=/\r\n?/g,gB=/\u0000|\uFFFD/g;function YS(t){return(typeof t=="string"?t:""+t).replace(mB,`
`).replace(gB,"")}function qp(t,e,n){if(e=YS(e),YS(t)!==e&&n)throw Error(Ne(425))}function Wm(){}var B5=null,z5=null;function $5(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var U5=typeof setTimeout=="function"?setTimeout:void 0,vB=typeof clearTimeout=="function"?clearTimeout:void 0,XS=typeof Promise=="function"?Promise:void 0,yB=typeof queueMicrotask=="function"?queueMicrotask:typeof XS<"u"?function(t){return XS.resolve(null).then(t).catch(xB)}:U5;function xB(t){setTimeout(function(){throw t})}function Zv(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),qf(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);qf(e)}function Co(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function QS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Yu=Math.random().toString(36).slice(2),Cs="__reactFiber$"+Yu,Gf="__reactProps$"+Yu,xa="__reactContainer$"+Yu,G5="__reactEvents$"+Yu,bB="__reactListeners$"+Yu,wB="__reactHandles$"+Yu;function Ll(t){var e=t[Cs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[xa]||n[Cs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=QS(t);t!==null;){if(n=t[Cs])return n;t=QS(t)}return e}t=n,n=t.parentNode}return null}function _h(t){return t=t[Cs]||t[xa],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function iu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ne(33))}function Hg(t){return t[Gf]||null}var H5=[],su=-1;function Ho(t){return{current:t}}function Dt(t){0>su||(t.current=H5[su],H5[su]=null,su--)}function Ot(t,e){su++,H5[su]=t.current,t.current=e}var Fo={},ur=Ho(Fo),Mr=Ho(!1),Gl=Fo;function Cu(t,e){var n=t.type.contextTypes;if(!n)return Fo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Dr(t){return t=t.childContextTypes,t!=null}function Km(){Dt(Mr),Dt(ur)}function ZS(t,e,n){if(ur.current!==Fo)throw Error(Ne(168));Ot(ur,e),Ot(Mr,n)}function jO(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ne(108,sq(t)||"Unknown",i));return Jt({},n,r)}function Ym(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fo,Gl=ur.current,Ot(ur,t),Ot(Mr,Mr.current),!0}function JS(t,e,n){var r=t.stateNode;if(!r)throw Error(Ne(169));n?(t=jO(t,e,Gl),r.__reactInternalMemoizedMergedChildContext=t,Dt(Mr),Dt(ur),Ot(ur,t)):Dt(Mr),Ot(Mr,n)}var ua=null,Vg=!1,Jv=!1;function TO(t){ua===null?ua=[t]:ua.push(t)}function _B(t){Vg=!0,TO(t)}function Vo(){if(!Jv&&ua!==null){Jv=!0;var t=0,e=St;try{var n=ua;for(St=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ua=null,Vg=!1}catch(i){throw ua!==null&&(ua=ua.slice(t+1)),eO(T3,Vo),i}finally{St=e,Jv=!1}}return null}var au=[],ou=0,Xm=null,Qm=0,xi=[],bi=0,Hl=null,da=1,fa="";function Al(t,e){au[ou++]=Qm,au[ou++]=Xm,Xm=t,Qm=e}function AO(t,e,n){xi[bi++]=da,xi[bi++]=fa,xi[bi++]=Hl,Hl=t;var r=da;t=fa;var i=32-Xi(r)-1;r&=~(1<<i),n+=1;var s=32-Xi(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,da=1<<32-Xi(e)+i|n<<i|r,fa=s+t}else da=1<<s|n<<i|r,fa=t}function F3(t){t.return!==null&&(Al(t,1),AO(t,1,0))}function q3(t){for(;t===Xm;)Xm=au[--ou],au[ou]=null,Qm=au[--ou],au[ou]=null;for(;t===Hl;)Hl=xi[--bi],xi[bi]=null,fa=xi[--bi],xi[bi]=null,da=xi[--bi],xi[bi]=null}var Qr=null,Wr=null,$t=!1,Vi=null;function OO(t,e){var n=Si(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function eE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qr=t,Wr=Co(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qr=t,Wr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Hl!==null?{id:da,overflow:fa}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Si(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Qr=t,Wr=null,!0):!1;default:return!1}}function V5(t){return(t.mode&1)!==0&&(t.flags&128)===0}function W5(t){if($t){var e=Wr;if(e){var n=e;if(!eE(t,e)){if(V5(t))throw Error(Ne(418));e=Co(n.nextSibling);var r=Qr;e&&eE(t,e)?OO(r,n):(t.flags=t.flags&-4097|2,$t=!1,Qr=t)}}else{if(V5(t))throw Error(Ne(418));t.flags=t.flags&-4097|2,$t=!1,Qr=t}}}function tE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qr=t}function Bp(t){if(t!==Qr)return!1;if(!$t)return tE(t),$t=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!$5(t.type,t.memoizedProps)),e&&(e=Wr)){if(V5(t))throw PO(),Error(Ne(418));for(;e;)OO(t,e),e=Co(e.nextSibling)}if(tE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ne(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Wr=Co(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Wr=null}}else Wr=Qr?Co(t.stateNode.nextSibling):null;return!0}function PO(){for(var t=Wr;t;)t=Co(t.nextSibling)}function ju(){Wr=Qr=null,$t=!1}function B3(t){Vi===null?Vi=[t]:Vi.push(t)}var NB=ja.ReactCurrentBatchConfig;function qd(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ne(309));var r=n.stateNode}if(!r)throw Error(Ne(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(Ne(284));if(!n._owner)throw Error(Ne(290,t))}return t}function zp(t,e){throw t=Object.prototype.toString.call(e),Error(Ne(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function nE(t){var e=t._init;return e(t._payload)}function RO(t){function e(v,w){if(t){var b=v.deletions;b===null?(v.deletions=[w],v.flags|=16):b.push(w)}}function n(v,w){if(!t)return null;for(;w!==null;)e(v,w),w=w.sibling;return null}function r(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function i(v,w){return v=Oo(v,w),v.index=0,v.sibling=null,v}function s(v,w,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<w?(v.flags|=2,w):b):(v.flags|=2,w)):(v.flags|=1048576,w)}function a(v){return t&&v.alternate===null&&(v.flags|=2),v}function o(v,w,b,N){return w===null||w.tag!==6?(w=ay(b,v.mode,N),w.return=v,w):(w=i(w,b),w.return=v,w)}function l(v,w,b,N){var E=b.type;return E===eu?d(v,w,b.props.children,N,b.key):w!==null&&(w.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===uo&&nE(E)===w.type)?(N=i(w,b.props),N.ref=qd(v,w,b),N.return=v,N):(N=Tm(b.type,b.key,b.props,null,v.mode,N),N.ref=qd(v,w,b),N.return=v,N)}function u(v,w,b,N){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=oy(b,v.mode,N),w.return=v,w):(w=i(w,b.children||[]),w.return=v,w)}function d(v,w,b,N,E){return w===null||w.tag!==7?(w=$l(b,v.mode,N,E),w.return=v,w):(w=i(w,b),w.return=v,w)}function p(v,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=ay(""+w,v.mode,b),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ap:return b=Tm(w.type,w.key,w.props,null,v.mode,b),b.ref=qd(v,null,w),b.return=v,b;case Jc:return w=oy(w,v.mode,b),w.return=v,w;case uo:var N=w._init;return p(v,N(w._payload),b)}if(of(w)||Ld(w))return w=$l(w,v.mode,b,null),w.return=v,w;zp(v,w)}return null}function h(v,w,b,N){var E=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return E!==null?null:o(v,w,""+b,N);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ap:return b.key===E?l(v,w,b,N):null;case Jc:return b.key===E?u(v,w,b,N):null;case uo:return E=b._init,h(v,w,E(b._payload),N)}if(of(b)||Ld(b))return E!==null?null:d(v,w,b,N,null);zp(v,b)}return null}function m(v,w,b,N,E){if(typeof N=="string"&&N!==""||typeof N=="number")return v=v.get(b)||null,o(w,v,""+N,E);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Ap:return v=v.get(N.key===null?b:N.key)||null,l(w,v,N,E);case Jc:return v=v.get(N.key===null?b:N.key)||null,u(w,v,N,E);case uo:var A=N._init;return m(v,w,b,A(N._payload),E)}if(of(N)||Ld(N))return v=v.get(b)||null,d(w,v,N,E,null);zp(w,N)}return null}function y(v,w,b,N){for(var E=null,A=null,P=w,T=w=0,M=null;P!==null&&T<b.length;T++){P.index>T?(M=P,P=null):M=P.sibling;var k=h(v,P,b[T],N);if(k===null){P===null&&(P=M);break}t&&P&&k.alternate===null&&e(v,P),w=s(k,w,T),A===null?E=k:A.sibling=k,A=k,P=M}if(T===b.length)return n(v,P),$t&&Al(v,T),E;if(P===null){for(;T<b.length;T++)P=p(v,b[T],N),P!==null&&(w=s(P,w,T),A===null?E=P:A.sibling=P,A=P);return $t&&Al(v,T),E}for(P=r(v,P);T<b.length;T++)M=m(P,v,T,b[T],N),M!==null&&(t&&M.alternate!==null&&P.delete(M.key===null?T:M.key),w=s(M,w,T),A===null?E=M:A.sibling=M,A=M);return t&&P.forEach(function(j){return e(v,j)}),$t&&Al(v,T),E}function x(v,w,b,N){var E=Ld(b);if(typeof E!="function")throw Error(Ne(150));if(b=E.call(b),b==null)throw Error(Ne(151));for(var A=E=null,P=w,T=w=0,M=null,k=b.next();P!==null&&!k.done;T++,k=b.next()){P.index>T?(M=P,P=null):M=P.sibling;var j=h(v,P,k.value,N);if(j===null){P===null&&(P=M);break}t&&P&&j.alternate===null&&e(v,P),w=s(j,w,T),A===null?E=j:A.sibling=j,A=j,P=M}if(k.done)return n(v,P),$t&&Al(v,T),E;if(P===null){for(;!k.done;T++,k=b.next())k=p(v,k.value,N),k!==null&&(w=s(k,w,T),A===null?E=k:A.sibling=k,A=k);return $t&&Al(v,T),E}for(P=r(v,P);!k.done;T++,k=b.next())k=m(P,v,T,k.value,N),k!==null&&(t&&k.alternate!==null&&P.delete(k.key===null?T:k.key),w=s(k,w,T),A===null?E=k:A.sibling=k,A=k);return t&&P.forEach(function(O){return e(v,O)}),$t&&Al(v,T),E}function _(v,w,b,N){if(typeof b=="object"&&b!==null&&b.type===eu&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Ap:e:{for(var E=b.key,A=w;A!==null;){if(A.key===E){if(E=b.type,E===eu){if(A.tag===7){n(v,A.sibling),w=i(A,b.props.children),w.return=v,v=w;break e}}else if(A.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===uo&&nE(E)===A.type){n(v,A.sibling),w=i(A,b.props),w.ref=qd(v,A,b),w.return=v,v=w;break e}n(v,A);break}else e(v,A);A=A.sibling}b.type===eu?(w=$l(b.props.children,v.mode,N,b.key),w.return=v,v=w):(N=Tm(b.type,b.key,b.props,null,v.mode,N),N.ref=qd(v,w,b),N.return=v,v=N)}return a(v);case Jc:e:{for(A=b.key;w!==null;){if(w.key===A)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){n(v,w.sibling),w=i(w,b.children||[]),w.return=v,v=w;break e}else{n(v,w);break}else e(v,w);w=w.sibling}w=oy(b,v.mode,N),w.return=v,v=w}return a(v);case uo:return A=b._init,_(v,w,A(b._payload),N)}if(of(b))return y(v,w,b,N);if(Ld(b))return x(v,w,b,N);zp(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(n(v,w.sibling),w=i(w,b),w.return=v,v=w):(n(v,w),w=ay(b,v.mode,N),w.return=v,v=w),a(v)):n(v,w)}return _}var Tu=RO(!0),LO=RO(!1),Zm=Ho(null),Jm=null,lu=null,z3=null;function $3(){z3=lu=Jm=null}function U3(t){var e=Zm.current;Dt(Zm),t._currentValue=e}function K5(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function gu(t,e){Jm=t,z3=lu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Lr=!0),t.firstContext=null)}function ji(t){var e=t._currentValue;if(z3!==t)if(t={context:t,memoizedValue:e,next:null},lu===null){if(Jm===null)throw Error(Ne(308));lu=t,Jm.dependencies={lanes:0,firstContext:t}}else lu=lu.next=t;return e}var Il=null;function G3(t){Il===null?Il=[t]:Il.push(t)}function IO(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,G3(e)):(n.next=i.next,i.next=n),e.interleaved=n,ba(t,r)}function ba(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var fo=!1;function H3(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function MO(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ga(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function jo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,pt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ba(t,n)}return i=r.interleaved,i===null?(e.next=e,G3(r)):(e.next=i.next,i.next=e),r.interleaved=e,ba(t,n)}function Nm(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,A3(t,n)}}function rE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function eg(t,e,n,r){var i=t.updateQueue;fo=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?s=u:a.next=u,a=l;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=l))}if(s!==null){var p=i.baseState;a=0,d=u=l=null,o=s;do{var h=o.lane,m=o.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=t,x=o;switch(h=e,m=n,x.tag){case 1:if(y=x.payload,typeof y=="function"){p=y.call(m,p,h);break e}p=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=x.payload,h=typeof y=="function"?y.call(m,p,h):y,h==null)break e;p=Jt({},p,h);break e;case 2:fo=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[o]:h.push(o))}else m={eventTime:m,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=m,l=p):d=d.next=m,a|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;h=o,o=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(d===null&&(l=p),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Wl|=a,t.lanes=a,t.memoizedState=p}}function iE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Ne(191,i));i.call(r)}}}var Nh={},Os=Ho(Nh),Hf=Ho(Nh),Vf=Ho(Nh);function Ml(t){if(t===Nh)throw Error(Ne(174));return t}function V3(t,e){switch(Ot(Vf,e),Ot(Hf,t),Ot(Os,Nh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:j5(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=j5(e,t)}Dt(Os),Ot(Os,e)}function Au(){Dt(Os),Dt(Hf),Dt(Vf)}function DO(t){Ml(Vf.current);var e=Ml(Os.current),n=j5(e,t.type);e!==n&&(Ot(Hf,t),Ot(Os,n))}function W3(t){Hf.current===t&&(Dt(Os),Dt(Hf))}var Xt=Ho(0);function tg(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ey=[];function K3(){for(var t=0;t<ey.length;t++)ey[t]._workInProgressVersionPrimary=null;ey.length=0}var Sm=ja.ReactCurrentDispatcher,ty=ja.ReactCurrentBatchConfig,Vl=0,Zt=null,jn=null,Dn=null,ng=!1,kf=!1,Wf=0,SB=0;function sr(){throw Error(Ne(321))}function Y3(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ts(t[n],e[n]))return!1;return!0}function X3(t,e,n,r,i,s){if(Vl=s,Zt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Sm.current=t===null||t.memoizedState===null?jB:TB,t=n(r,i),kf){s=0;do{if(kf=!1,Wf=0,25<=s)throw Error(Ne(301));s+=1,Dn=jn=null,e.updateQueue=null,Sm.current=AB,t=n(r,i)}while(kf)}if(Sm.current=rg,e=jn!==null&&jn.next!==null,Vl=0,Dn=jn=Zt=null,ng=!1,e)throw Error(Ne(300));return t}function Q3(){var t=Wf!==0;return Wf=0,t}function Ss(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dn===null?Zt.memoizedState=Dn=t:Dn=Dn.next=t,Dn}function Ti(){if(jn===null){var t=Zt.alternate;t=t!==null?t.memoizedState:null}else t=jn.next;var e=Dn===null?Zt.memoizedState:Dn.next;if(e!==null)Dn=e,jn=t;else{if(t===null)throw Error(Ne(310));jn=t,t={memoizedState:jn.memoizedState,baseState:jn.baseState,baseQueue:jn.baseQueue,queue:jn.queue,next:null},Dn===null?Zt.memoizedState=Dn=t:Dn=Dn.next=t}return Dn}function Kf(t,e){return typeof e=="function"?e(t):e}function ny(t){var e=Ti(),n=e.queue;if(n===null)throw Error(Ne(311));n.lastRenderedReducer=t;var r=jn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,l=null,u=s;do{var d=u.lane;if((Vl&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var p={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=p,a=r):l=l.next=p,Zt.lanes|=d,Wl|=d}u=u.next}while(u!==null&&u!==s);l===null?a=r:l.next=o,ts(r,e.memoizedState)||(Lr=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Zt.lanes|=s,Wl|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ry(t){var e=Ti(),n=e.queue;if(n===null)throw Error(Ne(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);ts(s,e.memoizedState)||(Lr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function FO(){}function qO(t,e){var n=Zt,r=Ti(),i=e(),s=!ts(r.memoizedState,i);if(s&&(r.memoizedState=i,Lr=!0),r=r.queue,Z3($O.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Dn!==null&&Dn.memoizedState.tag&1){if(n.flags|=2048,Yf(9,zO.bind(null,n,r,i,e),void 0,null),Fn===null)throw Error(Ne(349));Vl&30||BO(n,e,i)}return i}function BO(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Zt.updateQueue,e===null?(e={lastEffect:null,stores:null},Zt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function zO(t,e,n,r){e.value=n,e.getSnapshot=r,UO(e)&&GO(t)}function $O(t,e,n){return n(function(){UO(e)&&GO(t)})}function UO(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ts(t,n)}catch{return!0}}function GO(t){var e=ba(t,1);e!==null&&Qi(e,t,1,-1)}function sE(t){var e=Ss();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kf,lastRenderedState:t},e.queue=t,t=t.dispatch=CB.bind(null,Zt,t),[e.memoizedState,t]}function Yf(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Zt.updateQueue,e===null?(e={lastEffect:null,stores:null},Zt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function HO(){return Ti().memoizedState}function Em(t,e,n,r){var i=Ss();Zt.flags|=t,i.memoizedState=Yf(1|e,n,void 0,r===void 0?null:r)}function Wg(t,e,n,r){var i=Ti();r=r===void 0?null:r;var s=void 0;if(jn!==null){var a=jn.memoizedState;if(s=a.destroy,r!==null&&Y3(r,a.deps)){i.memoizedState=Yf(e,n,s,r);return}}Zt.flags|=t,i.memoizedState=Yf(1|e,n,s,r)}function aE(t,e){return Em(8390656,8,t,e)}function Z3(t,e){return Wg(2048,8,t,e)}function VO(t,e){return Wg(4,2,t,e)}function WO(t,e){return Wg(4,4,t,e)}function KO(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function YO(t,e,n){return n=n!=null?n.concat([t]):null,Wg(4,4,KO.bind(null,e,t),n)}function J3(){}function XO(t,e){var n=Ti();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Y3(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function QO(t,e){var n=Ti();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Y3(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ZO(t,e,n){return Vl&21?(ts(n,e)||(n=rO(),Zt.lanes|=n,Wl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Lr=!0),t.memoizedState=n)}function EB(t,e){var n=St;St=n!==0&&4>n?n:4,t(!0);var r=ty.transition;ty.transition={};try{t(!1),e()}finally{St=n,ty.transition=r}}function JO(){return Ti().memoizedState}function kB(t,e,n){var r=Ao(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},eP(t))tP(e,n);else if(n=IO(t,e,n,r),n!==null){var i=xr();Qi(n,t,r,i),nP(n,e,r)}}function CB(t,e,n){var r=Ao(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(eP(t))tP(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,ts(o,a)){var l=e.interleaved;l===null?(i.next=i,G3(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=IO(t,e,i,r),n!==null&&(i=xr(),Qi(n,t,r,i),nP(n,e,r))}}function eP(t){var e=t.alternate;return t===Zt||e!==null&&e===Zt}function tP(t,e){kf=ng=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function nP(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,A3(t,n)}}var rg={readContext:ji,useCallback:sr,useContext:sr,useEffect:sr,useImperativeHandle:sr,useInsertionEffect:sr,useLayoutEffect:sr,useMemo:sr,useReducer:sr,useRef:sr,useState:sr,useDebugValue:sr,useDeferredValue:sr,useTransition:sr,useMutableSource:sr,useSyncExternalStore:sr,useId:sr,unstable_isNewReconciler:!1},jB={readContext:ji,useCallback:function(t,e){return Ss().memoizedState=[t,e===void 0?null:e],t},useContext:ji,useEffect:aE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Em(4194308,4,KO.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Em(4194308,4,t,e)},useInsertionEffect:function(t,e){return Em(4,2,t,e)},useMemo:function(t,e){var n=Ss();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ss();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=kB.bind(null,Zt,t),[r.memoizedState,t]},useRef:function(t){var e=Ss();return t={current:t},e.memoizedState=t},useState:sE,useDebugValue:J3,useDeferredValue:function(t){return Ss().memoizedState=t},useTransition:function(){var t=sE(!1),e=t[0];return t=EB.bind(null,t[1]),Ss().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Zt,i=Ss();if($t){if(n===void 0)throw Error(Ne(407));n=n()}else{if(n=e(),Fn===null)throw Error(Ne(349));Vl&30||BO(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,aE($O.bind(null,r,s,t),[t]),r.flags|=2048,Yf(9,zO.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ss(),e=Fn.identifierPrefix;if($t){var n=fa,r=da;n=(r&~(1<<32-Xi(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Wf++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=SB++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},TB={readContext:ji,useCallback:XO,useContext:ji,useEffect:Z3,useImperativeHandle:YO,useInsertionEffect:VO,useLayoutEffect:WO,useMemo:QO,useReducer:ny,useRef:HO,useState:function(){return ny(Kf)},useDebugValue:J3,useDeferredValue:function(t){var e=Ti();return ZO(e,jn.memoizedState,t)},useTransition:function(){var t=ny(Kf)[0],e=Ti().memoizedState;return[t,e]},useMutableSource:FO,useSyncExternalStore:qO,useId:JO,unstable_isNewReconciler:!1},AB={readContext:ji,useCallback:XO,useContext:ji,useEffect:Z3,useImperativeHandle:YO,useInsertionEffect:VO,useLayoutEffect:WO,useMemo:QO,useReducer:ry,useRef:HO,useState:function(){return ry(Kf)},useDebugValue:J3,useDeferredValue:function(t){var e=Ti();return jn===null?e.memoizedState=t:ZO(e,jn.memoizedState,t)},useTransition:function(){var t=ry(Kf)[0],e=Ti().memoizedState;return[t,e]},useMutableSource:FO,useSyncExternalStore:qO,useId:JO,unstable_isNewReconciler:!1};function Gi(t,e){if(t&&t.defaultProps){e=Jt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Y5(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Jt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Kg={isMounted:function(t){return(t=t._reactInternals)?nc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=xr(),i=Ao(t),s=ga(r,i);s.payload=e,n!=null&&(s.callback=n),e=jo(t,s,i),e!==null&&(Qi(e,t,i,r),Nm(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=xr(),i=Ao(t),s=ga(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=jo(t,s,i),e!==null&&(Qi(e,t,i,r),Nm(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xr(),r=Ao(t),i=ga(n,r);i.tag=2,e!=null&&(i.callback=e),e=jo(t,i,r),e!==null&&(Qi(e,t,r,n),Nm(e,t,r))}};function oE(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!zf(n,r)||!zf(i,s):!0}function rP(t,e,n){var r=!1,i=Fo,s=e.contextType;return typeof s=="object"&&s!==null?s=ji(s):(i=Dr(e)?Gl:ur.current,r=e.contextTypes,s=(r=r!=null)?Cu(t,i):Fo),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Kg,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function lE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Kg.enqueueReplaceState(e,e.state,null)}function X5(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},H3(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ji(s):(s=Dr(e)?Gl:ur.current,i.context=Cu(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Y5(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Kg.enqueueReplaceState(i,i.state,null),eg(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ou(t,e){try{var n="",r=e;do n+=iq(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function iy(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Q5(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var OB=typeof WeakMap=="function"?WeakMap:Map;function iP(t,e,n){n=ga(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){sg||(sg=!0,o_=r),Q5(t,e)},n}function sP(t,e,n){n=ga(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Q5(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Q5(t,e),typeof r!="function"&&(To===null?To=new Set([this]):To.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function cE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new OB;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=HB.bind(null,t,e,n),e.then(t,t))}function uE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function dE(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ga(-1,1),e.tag=2,jo(n,e,1))),n.lanes|=1),t)}var PB=ja.ReactCurrentOwner,Lr=!1;function vr(t,e,n,r){e.child=t===null?LO(e,null,n,r):Tu(e,t.child,n,r)}function fE(t,e,n,r,i){n=n.render;var s=e.ref;return gu(e,i),r=X3(t,e,n,r,s,i),n=Q3(),t!==null&&!Lr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,wa(t,e,i)):($t&&n&&F3(e),e.flags|=1,vr(t,e,r,i),e.child)}function hE(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!o4(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,aP(t,e,s,r,i)):(t=Tm(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:zf,n(a,r)&&t.ref===e.ref)return wa(t,e,i)}return e.flags|=1,t=Oo(s,r),t.ref=e.ref,t.return=e,e.child=t}function aP(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(zf(s,r)&&t.ref===e.ref)if(Lr=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Lr=!0);else return e.lanes=t.lanes,wa(t,e,i)}return Z5(t,e,n,r,i)}function oP(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ot(uu,Hr),Hr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ot(uu,Hr),Hr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ot(uu,Hr),Hr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ot(uu,Hr),Hr|=r;return vr(t,e,i,n),e.child}function lP(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Z5(t,e,n,r,i){var s=Dr(n)?Gl:ur.current;return s=Cu(e,s),gu(e,i),n=X3(t,e,n,r,s,i),r=Q3(),t!==null&&!Lr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,wa(t,e,i)):($t&&r&&F3(e),e.flags|=1,vr(t,e,n,i),e.child)}function pE(t,e,n,r,i){if(Dr(n)){var s=!0;Ym(e)}else s=!1;if(gu(e,i),e.stateNode===null)km(t,e),rP(e,n,r),X5(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=ji(u):(u=Dr(n)?Gl:ur.current,u=Cu(e,u));var d=n.getDerivedStateFromProps,p=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==u)&&lE(e,a,r,u),fo=!1;var h=e.memoizedState;a.state=h,eg(e,r,a,i),l=e.memoizedState,o!==r||h!==l||Mr.current||fo?(typeof d=="function"&&(Y5(e,n,d,r),l=e.memoizedState),(o=fo||oE(e,n,o,r,h,l,u))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=u,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,MO(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:Gi(e.type,o),a.props=u,p=e.pendingProps,h=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=ji(l):(l=Dr(n)?Gl:ur.current,l=Cu(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==p||h!==l)&&lE(e,a,r,l),fo=!1,h=e.memoizedState,a.state=h,eg(e,r,a,i);var y=e.memoizedState;o!==p||h!==y||Mr.current||fo?(typeof m=="function"&&(Y5(e,n,m,r),y=e.memoizedState),(u=fo||oE(e,n,u,r,h,y,l)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,y,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,y,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),a.props=r,a.state=y,a.context=l,r=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return J5(t,e,n,r,s,i)}function J5(t,e,n,r,i,s){lP(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&JS(e,n,!1),wa(t,e,s);r=e.stateNode,PB.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Tu(e,t.child,null,s),e.child=Tu(e,null,o,s)):vr(t,e,o,s),e.memoizedState=r.state,i&&JS(e,n,!0),e.child}function cP(t){var e=t.stateNode;e.pendingContext?ZS(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ZS(t,e.context,!1),V3(t,e.containerInfo)}function mE(t,e,n,r,i){return ju(),B3(i),e.flags|=256,vr(t,e,n,r),e.child}var e_={dehydrated:null,treeContext:null,retryLane:0};function t_(t){return{baseLanes:t,cachePool:null,transitions:null}}function uP(t,e,n){var r=e.pendingProps,i=Xt.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ot(Xt,i&1),t===null)return W5(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Qg(a,r,0,null),t=$l(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=t_(n),e.memoizedState=e_,t):e4(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return RB(t,e,a,r,o,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Oo(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Oo(o,s):(s=$l(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?t_(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=e_,r}return s=t.child,t=s.sibling,r=Oo(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function e4(t,e){return e=Qg({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function $p(t,e,n,r){return r!==null&&B3(r),Tu(e,t.child,null,n),t=e4(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function RB(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=iy(Error(Ne(422))),$p(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Qg({mode:"visible",children:r.children},i,0,null),s=$l(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Tu(e,t.child,null,a),e.child.memoizedState=t_(a),e.memoizedState=e_,s);if(!(e.mode&1))return $p(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(Ne(419)),r=iy(s,r,void 0),$p(t,e,a,r)}if(o=(a&t.childLanes)!==0,Lr||o){if(r=Fn,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ba(t,i),Qi(r,t,i,-1))}return a4(),r=iy(Error(Ne(421))),$p(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=VB.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Wr=Co(i.nextSibling),Qr=e,$t=!0,Vi=null,t!==null&&(xi[bi++]=da,xi[bi++]=fa,xi[bi++]=Hl,da=t.id,fa=t.overflow,Hl=e),e=e4(e,r.children),e.flags|=4096,e)}function gE(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),K5(t.return,e,n)}function sy(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function dP(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(vr(t,e,r.children,n),r=Xt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&gE(t,n,e);else if(t.tag===19)gE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ot(Xt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&tg(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),sy(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&tg(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}sy(e,!0,n,null,s);break;case"together":sy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function km(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function wa(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Wl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ne(153));if(e.child!==null){for(t=e.child,n=Oo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Oo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function LB(t,e,n){switch(e.tag){case 3:cP(e),ju();break;case 5:DO(e);break;case 1:Dr(e.type)&&Ym(e);break;case 4:V3(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ot(Zm,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ot(Xt,Xt.current&1),e.flags|=128,null):n&e.child.childLanes?uP(t,e,n):(Ot(Xt,Xt.current&1),t=wa(t,e,n),t!==null?t.sibling:null);Ot(Xt,Xt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return dP(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ot(Xt,Xt.current),r)break;return null;case 22:case 23:return e.lanes=0,oP(t,e,n)}return wa(t,e,n)}var fP,n_,hP,pP;fP=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};n_=function(){};hP=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ml(Os.current);var s=null;switch(n){case"input":i=S5(t,i),r=S5(t,r),s=[];break;case"select":i=Jt({},i,{value:void 0}),r=Jt({},r,{value:void 0}),s=[];break;case"textarea":i=C5(t,i),r=C5(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Wm)}T5(n,r);var a;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Lf.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Lf.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Lt("scroll",t),s||o===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};pP=function(t,e,n,r){n!==r&&(e.flags|=4)};function Bd(t,e){if(!$t)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ar(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function IB(t,e,n){var r=e.pendingProps;switch(q3(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ar(e),null;case 1:return Dr(e.type)&&Km(),ar(e),null;case 3:return r=e.stateNode,Au(),Dt(Mr),Dt(ur),K3(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Bp(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Vi!==null&&(u_(Vi),Vi=null))),n_(t,e),ar(e),null;case 5:W3(e);var i=Ml(Vf.current);if(n=e.type,t!==null&&e.stateNode!=null)hP(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ne(166));return ar(e),null}if(t=Ml(Os.current),Bp(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Cs]=e,r[Gf]=s,t=(e.mode&1)!==0,n){case"dialog":Lt("cancel",r),Lt("close",r);break;case"iframe":case"object":case"embed":Lt("load",r);break;case"video":case"audio":for(i=0;i<cf.length;i++)Lt(cf[i],r);break;case"source":Lt("error",r);break;case"img":case"image":case"link":Lt("error",r),Lt("load",r);break;case"details":Lt("toggle",r);break;case"input":ES(r,s),Lt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Lt("invalid",r);break;case"textarea":CS(r,s),Lt("invalid",r)}T5(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&qp(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&qp(r.textContent,o,t),i=["children",""+o]):Lf.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Lt("scroll",r)}switch(n){case"input":Op(r),kS(r,s,!0);break;case"textarea":Op(r),jS(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Wm)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$A(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Cs]=e,t[Gf]=r,fP(t,e,!1,!1),e.stateNode=t;e:{switch(a=A5(n,r),n){case"dialog":Lt("cancel",t),Lt("close",t),i=r;break;case"iframe":case"object":case"embed":Lt("load",t),i=r;break;case"video":case"audio":for(i=0;i<cf.length;i++)Lt(cf[i],t);i=r;break;case"source":Lt("error",t),i=r;break;case"img":case"image":case"link":Lt("error",t),Lt("load",t),i=r;break;case"details":Lt("toggle",t),i=r;break;case"input":ES(t,r),i=S5(t,r),Lt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Jt({},r,{value:void 0}),Lt("invalid",t);break;case"textarea":CS(t,r),i=C5(t,r),Lt("invalid",t);break;default:i=r}T5(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?HA(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&UA(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&If(t,l):typeof l=="number"&&If(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Lf.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Lt("scroll",t):l!=null&&S3(t,s,l,a))}switch(n){case"input":Op(t),kS(t,r,!1);break;case"textarea":Op(t),jS(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Do(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?fu(t,!!r.multiple,s,!1):r.defaultValue!=null&&fu(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Wm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ar(e),null;case 6:if(t&&e.stateNode!=null)pP(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ne(166));if(n=Ml(Vf.current),Ml(Os.current),Bp(e)){if(r=e.stateNode,n=e.memoizedProps,r[Cs]=e,(s=r.nodeValue!==n)&&(t=Qr,t!==null))switch(t.tag){case 3:qp(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&qp(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Cs]=e,e.stateNode=r}return ar(e),null;case 13:if(Dt(Xt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if($t&&Wr!==null&&e.mode&1&&!(e.flags&128))PO(),ju(),e.flags|=98560,s=!1;else if(s=Bp(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Ne(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ne(317));s[Cs]=e}else ju(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ar(e),s=!1}else Vi!==null&&(u_(Vi),Vi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Xt.current&1?An===0&&(An=3):a4())),e.updateQueue!==null&&(e.flags|=4),ar(e),null);case 4:return Au(),n_(t,e),t===null&&$f(e.stateNode.containerInfo),ar(e),null;case 10:return U3(e.type._context),ar(e),null;case 17:return Dr(e.type)&&Km(),ar(e),null;case 19:if(Dt(Xt),s=e.memoizedState,s===null)return ar(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)Bd(s,!1);else{if(An!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=tg(t),a!==null){for(e.flags|=128,Bd(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ot(Xt,Xt.current&1|2),e.child}t=t.sibling}s.tail!==null&&hn()>Pu&&(e.flags|=128,r=!0,Bd(s,!1),e.lanes=4194304)}else{if(!r)if(t=tg(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Bd(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!$t)return ar(e),null}else 2*hn()-s.renderingStartTime>Pu&&n!==1073741824&&(e.flags|=128,r=!0,Bd(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=hn(),e.sibling=null,n=Xt.current,Ot(Xt,r?n&1|2:n&1),e):(ar(e),null);case 22:case 23:return s4(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Hr&1073741824&&(ar(e),e.subtreeFlags&6&&(e.flags|=8192)):ar(e),null;case 24:return null;case 25:return null}throw Error(Ne(156,e.tag))}function MB(t,e){switch(q3(e),e.tag){case 1:return Dr(e.type)&&Km(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Au(),Dt(Mr),Dt(ur),K3(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return W3(e),null;case 13:if(Dt(Xt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ne(340));ju()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Dt(Xt),null;case 4:return Au(),null;case 10:return U3(e.type._context),null;case 22:case 23:return s4(),null;case 24:return null;default:return null}}var Up=!1,or=!1,DB=typeof WeakSet=="function"?WeakSet:Set,Re=null;function cu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){rn(t,e,r)}else n.current=null}function r_(t,e,n){try{n()}catch(r){rn(t,e,r)}}var vE=!1;function FB(t,e){if(B5=Gm,t=xO(),D3(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,u=0,d=0,p=t,h=null;t:for(;;){for(var m;p!==n||i!==0&&p.nodeType!==3||(o=a+i),p!==s||r!==0&&p.nodeType!==3||(l=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(m=p.firstChild)!==null;)h=p,p=m;for(;;){if(p===t)break t;if(h===n&&++u===i&&(o=a),h===s&&++d===r&&(l=a),(m=p.nextSibling)!==null)break;p=h,h=p.parentNode}p=m}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(z5={focusedElem:t,selectionRange:n},Gm=!1,Re=e;Re!==null;)if(e=Re,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Re=t;else for(;Re!==null;){e=Re;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var x=y.memoizedProps,_=y.memoizedState,v=e.stateNode,w=v.getSnapshotBeforeUpdate(e.elementType===e.type?x:Gi(e.type,x),_);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ne(163))}}catch(N){rn(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,Re=t;break}Re=e.return}return y=vE,vE=!1,y}function Cf(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&r_(e,n,s)}i=i.next}while(i!==r)}}function Yg(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function i_(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function mP(t){var e=t.alternate;e!==null&&(t.alternate=null,mP(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Cs],delete e[Gf],delete e[G5],delete e[bB],delete e[wB])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function gP(t){return t.tag===5||t.tag===3||t.tag===4}function yE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||gP(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function s_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Wm));else if(r!==4&&(t=t.child,t!==null))for(s_(t,e,n),t=t.sibling;t!==null;)s_(t,e,n),t=t.sibling}function a_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(a_(t,e,n),t=t.sibling;t!==null;)a_(t,e,n),t=t.sibling}var Vn=null,Hi=!1;function no(t,e,n){for(n=n.child;n!==null;)vP(t,e,n),n=n.sibling}function vP(t,e,n){if(As&&typeof As.onCommitFiberUnmount=="function")try{As.onCommitFiberUnmount(zg,n)}catch{}switch(n.tag){case 5:or||cu(n,e);case 6:var r=Vn,i=Hi;Vn=null,no(t,e,n),Vn=r,Hi=i,Vn!==null&&(Hi?(t=Vn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Vn.removeChild(n.stateNode));break;case 18:Vn!==null&&(Hi?(t=Vn,n=n.stateNode,t.nodeType===8?Zv(t.parentNode,n):t.nodeType===1&&Zv(t,n),qf(t)):Zv(Vn,n.stateNode));break;case 4:r=Vn,i=Hi,Vn=n.stateNode.containerInfo,Hi=!0,no(t,e,n),Vn=r,Hi=i;break;case 0:case 11:case 14:case 15:if(!or&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&r_(n,e,a),i=i.next}while(i!==r)}no(t,e,n);break;case 1:if(!or&&(cu(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){rn(n,e,o)}no(t,e,n);break;case 21:no(t,e,n);break;case 22:n.mode&1?(or=(r=or)||n.memoizedState!==null,no(t,e,n),or=r):no(t,e,n);break;default:no(t,e,n)}}function xE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new DB),e.forEach(function(r){var i=WB.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Bi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Vn=o.stateNode,Hi=!1;break e;case 3:Vn=o.stateNode.containerInfo,Hi=!0;break e;case 4:Vn=o.stateNode.containerInfo,Hi=!0;break e}o=o.return}if(Vn===null)throw Error(Ne(160));vP(s,a,i),Vn=null,Hi=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){rn(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)yP(e,t),e=e.sibling}function yP(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Bi(e,t),ws(t),r&4){try{Cf(3,t,t.return),Yg(3,t)}catch(x){rn(t,t.return,x)}try{Cf(5,t,t.return)}catch(x){rn(t,t.return,x)}}break;case 1:Bi(e,t),ws(t),r&512&&n!==null&&cu(n,n.return);break;case 5:if(Bi(e,t),ws(t),r&512&&n!==null&&cu(n,n.return),t.flags&32){var i=t.stateNode;try{If(i,"")}catch(x){rn(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&BA(i,s),A5(o,a);var u=A5(o,s);for(a=0;a<l.length;a+=2){var d=l[a],p=l[a+1];d==="style"?HA(i,p):d==="dangerouslySetInnerHTML"?UA(i,p):d==="children"?If(i,p):S3(i,d,p,u)}switch(o){case"input":E5(i,s);break;case"textarea":zA(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?fu(i,!!s.multiple,m,!1):h!==!!s.multiple&&(s.defaultValue!=null?fu(i,!!s.multiple,s.defaultValue,!0):fu(i,!!s.multiple,s.multiple?[]:"",!1))}i[Gf]=s}catch(x){rn(t,t.return,x)}}break;case 6:if(Bi(e,t),ws(t),r&4){if(t.stateNode===null)throw Error(Ne(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(x){rn(t,t.return,x)}}break;case 3:if(Bi(e,t),ws(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{qf(e.containerInfo)}catch(x){rn(t,t.return,x)}break;case 4:Bi(e,t),ws(t);break;case 13:Bi(e,t),ws(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(r4=hn())),r&4&&xE(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(or=(u=or)||d,Bi(e,t),or=u):Bi(e,t),ws(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Re=t,d=t.child;d!==null;){for(p=Re=d;Re!==null;){switch(h=Re,m=h.child,h.tag){case 0:case 11:case 14:case 15:Cf(4,h,h.return);break;case 1:cu(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(x){rn(r,n,x)}}break;case 5:cu(h,h.return);break;case 22:if(h.memoizedState!==null){wE(p);continue}}m!==null?(m.return=h,Re=m):wE(p)}d=d.sibling}e:for(d=null,p=t;;){if(p.tag===5){if(d===null){d=p;try{i=p.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=p.stateNode,l=p.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=GA("display",a))}catch(x){rn(t,t.return,x)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(x){rn(t,t.return,x)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Bi(e,t),ws(t),r&4&&xE(t);break;case 21:break;default:Bi(e,t),ws(t)}}function ws(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(gP(n)){var r=n;break e}n=n.return}throw Error(Ne(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(If(i,""),r.flags&=-33);var s=yE(t);a_(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=yE(t);s_(t,o,a);break;default:throw Error(Ne(161))}}catch(l){rn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function qB(t,e,n){Re=t,xP(t)}function xP(t,e,n){for(var r=(t.mode&1)!==0;Re!==null;){var i=Re,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Up;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||or;o=Up;var u=or;if(Up=a,(or=l)&&!u)for(Re=i;Re!==null;)a=Re,l=a.child,a.tag===22&&a.memoizedState!==null?_E(i):l!==null?(l.return=a,Re=l):_E(i);for(;s!==null;)Re=s,xP(s),s=s.sibling;Re=i,Up=o,or=u}bE(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Re=s):bE(t)}}function bE(t){for(;Re!==null;){var e=Re;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:or||Yg(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!or)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Gi(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&iE(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}iE(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&qf(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ne(163))}or||e.flags&512&&i_(e)}catch(h){rn(e,e.return,h)}}if(e===t){Re=null;break}if(n=e.sibling,n!==null){n.return=e.return,Re=n;break}Re=e.return}}function wE(t){for(;Re!==null;){var e=Re;if(e===t){Re=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Re=n;break}Re=e.return}}function _E(t){for(;Re!==null;){var e=Re;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Yg(4,e)}catch(l){rn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){rn(e,i,l)}}var s=e.return;try{i_(e)}catch(l){rn(e,s,l)}break;case 5:var a=e.return;try{i_(e)}catch(l){rn(e,a,l)}}}catch(l){rn(e,e.return,l)}if(e===t){Re=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Re=o;break}Re=e.return}}var BB=Math.ceil,ig=ja.ReactCurrentDispatcher,t4=ja.ReactCurrentOwner,Ci=ja.ReactCurrentBatchConfig,pt=0,Fn=null,xn=null,Wn=0,Hr=0,uu=Ho(0),An=0,Xf=null,Wl=0,Xg=0,n4=0,jf=null,Rr=null,r4=0,Pu=1/0,ca=null,sg=!1,o_=null,To=null,Gp=!1,bo=null,ag=0,Tf=0,l_=null,Cm=-1,jm=0;function xr(){return pt&6?hn():Cm!==-1?Cm:Cm=hn()}function Ao(t){return t.mode&1?pt&2&&Wn!==0?Wn&-Wn:NB.transition!==null?(jm===0&&(jm=rO()),jm):(t=St,t!==0||(t=window.event,t=t===void 0?16:uO(t.type)),t):1}function Qi(t,e,n,r){if(50<Tf)throw Tf=0,l_=null,Error(Ne(185));bh(t,n,r),(!(pt&2)||t!==Fn)&&(t===Fn&&(!(pt&2)&&(Xg|=n),An===4&&go(t,Wn)),Fr(t,r),n===1&&pt===0&&!(e.mode&1)&&(Pu=hn()+500,Vg&&Vo()))}function Fr(t,e){var n=t.callbackNode;Nq(t,e);var r=Um(t,t===Fn?Wn:0);if(r===0)n!==null&&OS(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&OS(n),e===1)t.tag===0?_B(NE.bind(null,t)):TO(NE.bind(null,t)),yB(function(){!(pt&6)&&Vo()}),n=null;else{switch(iO(r)){case 1:n=T3;break;case 4:n=tO;break;case 16:n=$m;break;case 536870912:n=nO;break;default:n=$m}n=CP(n,bP.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function bP(t,e){if(Cm=-1,jm=0,pt&6)throw Error(Ne(327));var n=t.callbackNode;if(vu()&&t.callbackNode!==n)return null;var r=Um(t,t===Fn?Wn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=og(t,r);else{e=r;var i=pt;pt|=2;var s=_P();(Fn!==t||Wn!==e)&&(ca=null,Pu=hn()+500,zl(t,e));do try{UB();break}catch(o){wP(t,o)}while(1);$3(),ig.current=s,pt=i,xn!==null?e=0:(Fn=null,Wn=0,e=An)}if(e!==0){if(e===2&&(i=I5(t),i!==0&&(r=i,e=c_(t,i))),e===1)throw n=Xf,zl(t,0),go(t,r),Fr(t,hn()),n;if(e===6)go(t,r);else{if(i=t.current.alternate,!(r&30)&&!zB(i)&&(e=og(t,r),e===2&&(s=I5(t),s!==0&&(r=s,e=c_(t,s))),e===1))throw n=Xf,zl(t,0),go(t,r),Fr(t,hn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Ne(345));case 2:Ol(t,Rr,ca);break;case 3:if(go(t,r),(r&130023424)===r&&(e=r4+500-hn(),10<e)){if(Um(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){xr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=U5(Ol.bind(null,t,Rr,ca),e);break}Ol(t,Rr,ca);break;case 4:if(go(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-Xi(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=hn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*BB(r/1960))-r,10<r){t.timeoutHandle=U5(Ol.bind(null,t,Rr,ca),r);break}Ol(t,Rr,ca);break;case 5:Ol(t,Rr,ca);break;default:throw Error(Ne(329))}}}return Fr(t,hn()),t.callbackNode===n?bP.bind(null,t):null}function c_(t,e){var n=jf;return t.current.memoizedState.isDehydrated&&(zl(t,e).flags|=256),t=og(t,e),t!==2&&(e=Rr,Rr=n,e!==null&&u_(e)),t}function u_(t){Rr===null?Rr=t:Rr.push.apply(Rr,t)}function zB(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ts(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function go(t,e){for(e&=~n4,e&=~Xg,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Xi(e),r=1<<n;t[n]=-1,e&=~r}}function NE(t){if(pt&6)throw Error(Ne(327));vu();var e=Um(t,0);if(!(e&1))return Fr(t,hn()),null;var n=og(t,e);if(t.tag!==0&&n===2){var r=I5(t);r!==0&&(e=r,n=c_(t,r))}if(n===1)throw n=Xf,zl(t,0),go(t,e),Fr(t,hn()),n;if(n===6)throw Error(Ne(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ol(t,Rr,ca),Fr(t,hn()),null}function i4(t,e){var n=pt;pt|=1;try{return t(e)}finally{pt=n,pt===0&&(Pu=hn()+500,Vg&&Vo())}}function Kl(t){bo!==null&&bo.tag===0&&!(pt&6)&&vu();var e=pt;pt|=1;var n=Ci.transition,r=St;try{if(Ci.transition=null,St=1,t)return t()}finally{St=r,Ci.transition=n,pt=e,!(pt&6)&&Vo()}}function s4(){Hr=uu.current,Dt(uu)}function zl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,vB(n)),xn!==null)for(n=xn.return;n!==null;){var r=n;switch(q3(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Km();break;case 3:Au(),Dt(Mr),Dt(ur),K3();break;case 5:W3(r);break;case 4:Au();break;case 13:Dt(Xt);break;case 19:Dt(Xt);break;case 10:U3(r.type._context);break;case 22:case 23:s4()}n=n.return}if(Fn=t,xn=t=Oo(t.current,null),Wn=Hr=e,An=0,Xf=null,n4=Xg=Wl=0,Rr=jf=null,Il!==null){for(e=0;e<Il.length;e++)if(n=Il[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Il=null}return t}function wP(t,e){do{var n=xn;try{if($3(),Sm.current=rg,ng){for(var r=Zt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ng=!1}if(Vl=0,Dn=jn=Zt=null,kf=!1,Wf=0,t4.current=null,n===null||n.return===null){An=1,Xf=e,xn=null;break}e:{var s=t,a=n.return,o=n,l=e;if(e=Wn,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=o,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=uE(a);if(m!==null){m.flags&=-257,dE(m,a,o,s,e),m.mode&1&&cE(s,u,e),e=m,l=u;var y=e.updateQueue;if(y===null){var x=new Set;x.add(l),e.updateQueue=x}else y.add(l);break e}else{if(!(e&1)){cE(s,u,e),a4();break e}l=Error(Ne(426))}}else if($t&&o.mode&1){var _=uE(a);if(_!==null){!(_.flags&65536)&&(_.flags|=256),dE(_,a,o,s,e),B3(Ou(l,o));break e}}s=l=Ou(l,o),An!==4&&(An=2),jf===null?jf=[s]:jf.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=iP(s,l,e);rE(s,v);break e;case 1:o=l;var w=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(To===null||!To.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var N=sP(s,o,e);rE(s,N);break e}}s=s.return}while(s!==null)}SP(n)}catch(E){e=E,xn===n&&n!==null&&(xn=n=n.return);continue}break}while(1)}function _P(){var t=ig.current;return ig.current=rg,t===null?rg:t}function a4(){(An===0||An===3||An===2)&&(An=4),Fn===null||!(Wl&268435455)&&!(Xg&268435455)||go(Fn,Wn)}function og(t,e){var n=pt;pt|=2;var r=_P();(Fn!==t||Wn!==e)&&(ca=null,zl(t,e));do try{$B();break}catch(i){wP(t,i)}while(1);if($3(),pt=n,ig.current=r,xn!==null)throw Error(Ne(261));return Fn=null,Wn=0,An}function $B(){for(;xn!==null;)NP(xn)}function UB(){for(;xn!==null&&!pq();)NP(xn)}function NP(t){var e=kP(t.alternate,t,Hr);t.memoizedProps=t.pendingProps,e===null?SP(t):xn=e,t4.current=null}function SP(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=MB(n,e),n!==null){n.flags&=32767,xn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{An=6,xn=null;return}}else if(n=IB(n,e,Hr),n!==null){xn=n;return}if(e=e.sibling,e!==null){xn=e;return}xn=e=t}while(e!==null);An===0&&(An=5)}function Ol(t,e,n){var r=St,i=Ci.transition;try{Ci.transition=null,St=1,GB(t,e,n,r)}finally{Ci.transition=i,St=r}return null}function GB(t,e,n,r){do vu();while(bo!==null);if(pt&6)throw Error(Ne(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ne(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Sq(t,s),t===Fn&&(xn=Fn=null,Wn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Gp||(Gp=!0,CP($m,function(){return vu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ci.transition,Ci.transition=null;var a=St;St=1;var o=pt;pt|=4,t4.current=null,FB(t,n),yP(n,t),uB(z5),Gm=!!B5,z5=B5=null,t.current=n,qB(n),mq(),pt=o,St=a,Ci.transition=s}else t.current=n;if(Gp&&(Gp=!1,bo=t,ag=i),s=t.pendingLanes,s===0&&(To=null),yq(n.stateNode),Fr(t,hn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(sg)throw sg=!1,t=o_,o_=null,t;return ag&1&&t.tag!==0&&vu(),s=t.pendingLanes,s&1?t===l_?Tf++:(Tf=0,l_=t):Tf=0,Vo(),null}function vu(){if(bo!==null){var t=iO(ag),e=Ci.transition,n=St;try{if(Ci.transition=null,St=16>t?16:t,bo===null)var r=!1;else{if(t=bo,bo=null,ag=0,pt&6)throw Error(Ne(331));var i=pt;for(pt|=4,Re=t.current;Re!==null;){var s=Re,a=s.child;if(Re.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(Re=u;Re!==null;){var d=Re;switch(d.tag){case 0:case 11:case 15:Cf(8,d,s)}var p=d.child;if(p!==null)p.return=d,Re=p;else for(;Re!==null;){d=Re;var h=d.sibling,m=d.return;if(mP(d),d===u){Re=null;break}if(h!==null){h.return=m,Re=h;break}Re=m}}}var y=s.alternate;if(y!==null){var x=y.child;if(x!==null){y.child=null;do{var _=x.sibling;x.sibling=null,x=_}while(x!==null)}}Re=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Re=a;else e:for(;Re!==null;){if(s=Re,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Cf(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Re=v;break e}Re=s.return}}var w=t.current;for(Re=w;Re!==null;){a=Re;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,Re=b;else e:for(a=w;Re!==null;){if(o=Re,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Yg(9,o)}}catch(E){rn(o,o.return,E)}if(o===a){Re=null;break e}var N=o.sibling;if(N!==null){N.return=o.return,Re=N;break e}Re=o.return}}if(pt=i,Vo(),As&&typeof As.onPostCommitFiberRoot=="function")try{As.onPostCommitFiberRoot(zg,t)}catch{}r=!0}return r}finally{St=n,Ci.transition=e}}return!1}function SE(t,e,n){e=Ou(n,e),e=iP(t,e,1),t=jo(t,e,1),e=xr(),t!==null&&(bh(t,1,e),Fr(t,e))}function rn(t,e,n){if(t.tag===3)SE(t,t,n);else for(;e!==null;){if(e.tag===3){SE(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(To===null||!To.has(r))){t=Ou(n,t),t=sP(e,t,1),e=jo(e,t,1),t=xr(),e!==null&&(bh(e,1,t),Fr(e,t));break}}e=e.return}}function HB(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=xr(),t.pingedLanes|=t.suspendedLanes&n,Fn===t&&(Wn&n)===n&&(An===4||An===3&&(Wn&130023424)===Wn&&500>hn()-r4?zl(t,0):n4|=n),Fr(t,e)}function EP(t,e){e===0&&(t.mode&1?(e=Lp,Lp<<=1,!(Lp&130023424)&&(Lp=4194304)):e=1);var n=xr();t=ba(t,e),t!==null&&(bh(t,e,n),Fr(t,n))}function VB(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),EP(t,n)}function WB(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ne(314))}r!==null&&r.delete(e),EP(t,n)}var kP;kP=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Mr.current)Lr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Lr=!1,LB(t,e,n);Lr=!!(t.flags&131072)}else Lr=!1,$t&&e.flags&1048576&&AO(e,Qm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;km(t,e),t=e.pendingProps;var i=Cu(e,ur.current);gu(e,n),i=X3(null,e,r,t,i,n);var s=Q3();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dr(r)?(s=!0,Ym(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,H3(e),i.updater=Kg,e.stateNode=i,i._reactInternals=e,X5(e,r,t,n),e=J5(null,e,r,!0,s,n)):(e.tag=0,$t&&s&&F3(e),vr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(km(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=YB(r),t=Gi(r,t),i){case 0:e=Z5(null,e,r,t,n);break e;case 1:e=pE(null,e,r,t,n);break e;case 11:e=fE(null,e,r,t,n);break e;case 14:e=hE(null,e,r,Gi(r.type,t),n);break e}throw Error(Ne(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gi(r,i),Z5(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gi(r,i),pE(t,e,r,i,n);case 3:e:{if(cP(e),t===null)throw Error(Ne(387));r=e.pendingProps,s=e.memoizedState,i=s.element,MO(t,e),eg(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ou(Error(Ne(423)),e),e=mE(t,e,r,n,i);break e}else if(r!==i){i=Ou(Error(Ne(424)),e),e=mE(t,e,r,n,i);break e}else for(Wr=Co(e.stateNode.containerInfo.firstChild),Qr=e,$t=!0,Vi=null,n=LO(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ju(),r===i){e=wa(t,e,n);break e}vr(t,e,r,n)}e=e.child}return e;case 5:return DO(e),t===null&&W5(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,$5(r,i)?a=null:s!==null&&$5(r,s)&&(e.flags|=32),lP(t,e),vr(t,e,a,n),e.child;case 6:return t===null&&W5(e),null;case 13:return uP(t,e,n);case 4:return V3(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Tu(e,null,r,n):vr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gi(r,i),fE(t,e,r,i,n);case 7:return vr(t,e,e.pendingProps,n),e.child;case 8:return vr(t,e,e.pendingProps.children,n),e.child;case 12:return vr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Ot(Zm,r._currentValue),r._currentValue=a,s!==null)if(ts(s.value,a)){if(s.children===i.children&&!Mr.current){e=wa(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ga(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),K5(s.return,n,e),o.lanes|=n;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Ne(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),K5(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}vr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,gu(e,n),i=ji(i),r=r(i),e.flags|=1,vr(t,e,r,n),e.child;case 14:return r=e.type,i=Gi(r,e.pendingProps),i=Gi(r.type,i),hE(t,e,r,i,n);case 15:return aP(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gi(r,i),km(t,e),e.tag=1,Dr(r)?(t=!0,Ym(e)):t=!1,gu(e,n),rP(e,r,i),X5(e,r,i,n),J5(null,e,r,!0,t,n);case 19:return dP(t,e,n);case 22:return oP(t,e,n)}throw Error(Ne(156,e.tag))};function CP(t,e){return eO(t,e)}function KB(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Si(t,e,n,r){return new KB(t,e,n,r)}function o4(t){return t=t.prototype,!(!t||!t.isReactComponent)}function YB(t){if(typeof t=="function")return o4(t)?1:0;if(t!=null){if(t=t.$$typeof,t===k3)return 11;if(t===C3)return 14}return 2}function Oo(t,e){var n=t.alternate;return n===null?(n=Si(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Tm(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")o4(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case eu:return $l(n.children,i,s,e);case E3:a=8,i|=8;break;case b5:return t=Si(12,n,e,i|2),t.elementType=b5,t.lanes=s,t;case w5:return t=Si(13,n,e,i),t.elementType=w5,t.lanes=s,t;case _5:return t=Si(19,n,e,i),t.elementType=_5,t.lanes=s,t;case DA:return Qg(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case IA:a=10;break e;case MA:a=9;break e;case k3:a=11;break e;case C3:a=14;break e;case uo:a=16,r=null;break e}throw Error(Ne(130,t==null?t:typeof t,""))}return e=Si(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function $l(t,e,n,r){return t=Si(7,t,r,e),t.lanes=n,t}function Qg(t,e,n,r){return t=Si(22,t,r,e),t.elementType=DA,t.lanes=n,t.stateNode={isHidden:!1},t}function ay(t,e,n){return t=Si(6,t,null,e),t.lanes=n,t}function oy(t,e,n){return e=Si(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function XB(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zv(0),this.expirationTimes=zv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zv(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function l4(t,e,n,r,i,s,a,o,l){return t=new XB(t,e,n,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Si(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},H3(s),t}function QB(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function jP(t){if(!t)return Fo;t=t._reactInternals;e:{if(nc(t)!==t||t.tag!==1)throw Error(Ne(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Dr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ne(171))}if(t.tag===1){var n=t.type;if(Dr(n))return jO(t,n,e)}return e}function TP(t,e,n,r,i,s,a,o,l){return t=l4(n,r,!0,t,i,s,a,o,l),t.context=jP(null),n=t.current,r=xr(),i=Ao(n),s=ga(r,i),s.callback=e??null,jo(n,s,i),t.current.lanes=i,bh(t,i,r),Fr(t,r),t}function Zg(t,e,n,r){var i=e.current,s=xr(),a=Ao(i);return n=jP(n),e.context===null?e.context=n:e.pendingContext=n,e=ga(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=jo(i,e,a),t!==null&&(Qi(t,i,a,s),Nm(t,i,a)),a}function lg(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function EE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function c4(t,e){EE(t,e),(t=t.alternate)&&EE(t,e)}function ZB(){return null}var AP=typeof reportError=="function"?reportError:function(t){console.error(t)};function u4(t){this._internalRoot=t}Jg.prototype.render=u4.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ne(409));Zg(t,e,null,null)};Jg.prototype.unmount=u4.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Kl(function(){Zg(null,t,null,null)}),e[xa]=null}};function Jg(t){this._internalRoot=t}Jg.prototype.unstable_scheduleHydration=function(t){if(t){var e=oO();t={blockedOn:null,target:t,priority:e};for(var n=0;n<mo.length&&e!==0&&e<mo[n].priority;n++);mo.splice(n,0,t),n===0&&cO(t)}};function d4(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function e0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function kE(){}function JB(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=lg(a);s.call(u)}}var a=TP(e,r,t,0,null,!1,!1,"",kE);return t._reactRootContainer=a,t[xa]=a.current,$f(t.nodeType===8?t.parentNode:t),Kl(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=lg(l);o.call(u)}}var l=l4(t,0,!1,null,null,!1,!1,"",kE);return t._reactRootContainer=l,t[xa]=l.current,$f(t.nodeType===8?t.parentNode:t),Kl(function(){Zg(e,l,n,r)}),l}function t0(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=lg(a);o.call(l)}}Zg(e,a,t,i)}else a=JB(n,e,t,i,r);return lg(a)}sO=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=lf(e.pendingLanes);n!==0&&(A3(e,n|1),Fr(e,hn()),!(pt&6)&&(Pu=hn()+500,Vo()))}break;case 13:Kl(function(){var r=ba(t,1);if(r!==null){var i=xr();Qi(r,t,1,i)}}),c4(t,1)}};O3=function(t){if(t.tag===13){var e=ba(t,134217728);if(e!==null){var n=xr();Qi(e,t,134217728,n)}c4(t,134217728)}};aO=function(t){if(t.tag===13){var e=Ao(t),n=ba(t,e);if(n!==null){var r=xr();Qi(n,t,e,r)}c4(t,e)}};oO=function(){return St};lO=function(t,e){var n=St;try{return St=t,e()}finally{St=n}};P5=function(t,e,n){switch(e){case"input":if(E5(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Hg(r);if(!i)throw Error(Ne(90));qA(r),E5(r,i)}}}break;case"textarea":zA(t,n);break;case"select":e=n.value,e!=null&&fu(t,!!n.multiple,e,!1)}};KA=i4;YA=Kl;var ez={usingClientEntryPoint:!1,Events:[_h,iu,Hg,VA,WA,i4]},zd={findFiberByHostInstance:Ll,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tz={bundleType:zd.bundleType,version:zd.version,rendererPackageName:zd.rendererPackageName,rendererConfig:zd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ja.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ZA(t),t===null?null:t.stateNode},findFiberByHostInstance:zd.findFiberByHostInstance||ZB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hp.isDisabled&&Hp.supportsFiber)try{zg=Hp.inject(tz),As=Hp}catch{}}ei.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ez;ei.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d4(e))throw Error(Ne(200));return QB(t,e,null,n)};ei.createRoot=function(t,e){if(!d4(t))throw Error(Ne(299));var n=!1,r="",i=AP;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=l4(t,1,!1,null,null,n,!1,r,i),t[xa]=e.current,$f(t.nodeType===8?t.parentNode:t),new u4(e)};ei.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ne(188)):(t=Object.keys(t).join(","),Error(Ne(268,t)));return t=ZA(e),t=t===null?null:t.stateNode,t};ei.flushSync=function(t){return Kl(t)};ei.hydrate=function(t,e,n){if(!e0(e))throw Error(Ne(200));return t0(null,t,e,!0,n)};ei.hydrateRoot=function(t,e,n){if(!d4(t))throw Error(Ne(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=AP;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=TP(e,null,t,1,n??null,i,!1,s,a),t[xa]=e.current,$f(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Jg(e)};ei.render=function(t,e,n){if(!e0(e))throw Error(Ne(200));return t0(null,t,e,!1,n)};ei.unmountComponentAtNode=function(t){if(!e0(t))throw Error(Ne(40));return t._reactRootContainer?(Kl(function(){t0(null,null,t,!1,function(){t._reactRootContainer=null,t[xa]=null})}),!0):!1};ei.unstable_batchedUpdates=i4;ei.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!e0(n))throw Error(Ne(200));if(t==null||t._reactInternals===void 0)throw Error(Ne(38));return t0(t,e,n,!1,r)};ei.version="18.3.1-next-f1338f8080-20240426";function OP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(OP)}catch(t){console.error(t)}}OP(),OA.exports=ei;var qo=OA.exports,CE=qo;y5.createRoot=CE.createRoot,y5.hydrateRoot=CE.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qf(){return Qf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qf.apply(this,arguments)}var wo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(wo||(wo={}));const jE="popstate";function nz(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:a,hash:o}=r.location;return d_("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:cg(i)}return iz(e,n,null,t)}function on(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function f4(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rz(){return Math.random().toString(36).substr(2,8)}function TE(t,e){return{usr:t.state,key:t.key,idx:e}}function d_(t,e,n,r){return n===void 0&&(n=null),Qf({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Xu(e):e,{state:n,key:e&&e.key||r||rz()})}function cg(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Xu(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function iz(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o=wo.Pop,l=null,u=d();u==null&&(u=0,a.replaceState(Qf({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function p(){o=wo.Pop;let _=d(),v=_==null?null:_-u;u=_,l&&l({action:o,location:x.location,delta:v})}function h(_,v){o=wo.Push;let w=d_(x.location,_,v);n&&n(w,_),u=d()+1;let b=TE(w,u),N=x.createHref(w);try{a.pushState(b,"",N)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(N)}s&&l&&l({action:o,location:x.location,delta:1})}function m(_,v){o=wo.Replace;let w=d_(x.location,_,v);n&&n(w,_),u=d();let b=TE(w,u),N=x.createHref(w);a.replaceState(b,"",N),s&&l&&l({action:o,location:x.location,delta:0})}function y(_){let v=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof _=="string"?_:cg(_);return w=w.replace(/ $/,"%20"),on(v,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,v)}let x={get action(){return o},get location(){return t(i,a)},listen(_){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(jE,p),l=_,()=>{i.removeEventListener(jE,p),l=null}},createHref(_){return e(i,_)},createURL:y,encodeLocation(_){let v=y(_);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:m,go(_){return a.go(_)}};return x}var AE;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(AE||(AE={}));function sz(t,e,n){return n===void 0&&(n="/"),az(t,e,n,!1)}function az(t,e,n,r){let i=typeof e=="string"?Xu(e):e,s=Ru(i.pathname||"/",n);if(s==null)return null;let a=PP(t);oz(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=yz(s);o=gz(a[l],u,r)}return o}function PP(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(on(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Po([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(on(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),PP(s.children,e,d,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:pz(u,s.index),routesMeta:d})};return t.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of RP(s.path))i(s,a,l)}),e}function RP(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=RP(r.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function oz(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:mz(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const lz=/^:[\w-]+$/,cz=3,uz=2,dz=1,fz=10,hz=-2,OE=t=>t==="*";function pz(t,e){let n=t.split("/"),r=n.length;return n.some(OE)&&(r+=hz),e&&(r+=uz),n.filter(i=>!OE(i)).reduce((i,s)=>i+(lz.test(s)?cz:s===""?dz:fz),r)}function mz(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function gz(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],u=o===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",p=ug({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),h=l.route;if(!p&&u&&n&&!r[r.length-1].route.index&&(p=ug({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!p)return null;Object.assign(i,p.params),a.push({params:i,pathname:Po([s,p.pathname]),pathnameBase:Nz(Po([s,p.pathnameBase])),route:h}),p.pathnameBase!=="/"&&(s=Po([s,p.pathnameBase]))}return a}function ug(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=vz(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((u,d,p)=>{let{paramName:h,isOptional:m}=d;if(h==="*"){let x=o[p]||"";a=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const y=o[p];return m&&!y?u[h]=void 0:u[h]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:t}}function vz(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),f4(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function yz(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return f4(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ru(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const xz=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bz=t=>xz.test(t);function wz(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Xu(t):t,s;if(n)if(bz(n))s=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),f4(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?s=PE(n.substring(1),"/"):s=PE(n,e)}else s=e;return{pathname:s,search:Sz(r),hash:Ez(i)}}function PE(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function ly(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _z(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function LP(t,e){let n=_z(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function IP(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Xu(t):(i=Qf({},t),on(!i.pathname||!i.pathname.includes("?"),ly("?","pathname","search",i)),on(!i.pathname||!i.pathname.includes("#"),ly("#","pathname","hash",i)),on(!i.search||!i.search.includes("#"),ly("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=n;else{let p=e.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),p-=1;i.pathname=h.join("/")}o=p>=0?e[p]:"/"}let l=wz(i,o),u=a&&a!=="/"&&a.endsWith("/"),d=(s||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const Po=t=>t.join("/").replace(/\/\/+/g,"/"),Nz=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Sz=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Ez=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function kz(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const MP=["post","put","patch","delete"];new Set(MP);const Cz=["get",...MP];new Set(Cz);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zf(){return Zf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zf.apply(this,arguments)}const n0=V.createContext(null),DP=V.createContext(null),Wo=V.createContext(null),r0=V.createContext(null),Ta=V.createContext({outlet:null,matches:[],isDataRoute:!1}),FP=V.createContext(null);function jz(t,e){let{relative:n}=e===void 0?{}:e;Sh()||on(!1);let{basename:r,navigator:i}=V.useContext(Wo),{hash:s,pathname:a,search:o}=i0(t,{relative:n}),l=a;return r!=="/"&&(l=a==="/"?r:Po([r,a])),i.createHref({pathname:l,search:o,hash:s})}function Sh(){return V.useContext(r0)!=null}function rc(){return Sh()||on(!1),V.useContext(r0).location}function qP(t){V.useContext(Wo).static||V.useLayoutEffect(t)}function ni(){let{isDataRoute:t}=V.useContext(Ta);return t?$z():Tz()}function Tz(){Sh()||on(!1);let t=V.useContext(n0),{basename:e,future:n,navigator:r}=V.useContext(Wo),{matches:i}=V.useContext(Ta),{pathname:s}=rc(),a=JSON.stringify(LP(i,n.v7_relativeSplatPath)),o=V.useRef(!1);return qP(()=>{o.current=!0}),V.useCallback(function(u,d){if(d===void 0&&(d={}),!o.current)return;if(typeof u=="number"){r.go(u);return}let p=IP(u,JSON.parse(a),s,d.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Po([e,p.pathname])),(d.replace?r.replace:r.push)(p,d.state,d)},[e,r,a,s,t])}const BP=V.createContext(null);function Ko(){return V.useContext(BP)}function Az(t){let e=V.useContext(Ta).outlet;return e&&V.createElement(BP.Provider,{value:t},e)}function ri(){let{matches:t}=V.useContext(Ta),e=t[t.length-1];return e?e.params:{}}function i0(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=V.useContext(Wo),{matches:i}=V.useContext(Ta),{pathname:s}=rc(),a=JSON.stringify(LP(i,r.v7_relativeSplatPath));return V.useMemo(()=>IP(t,JSON.parse(a),s,n==="path"),[t,a,s,n])}function Oz(t,e){return Pz(t,e)}function Pz(t,e,n,r){Sh()||on(!1);let{navigator:i}=V.useContext(Wo),{matches:s}=V.useContext(Ta),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=rc(),d;if(e){var p;let _=typeof e=="string"?Xu(e):e;l==="/"||(p=_.pathname)!=null&&p.startsWith(l)||on(!1),d=_}else d=u;let h=d.pathname||"/",m=h;if(l!=="/"){let _=l.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(_.length).join("/")}let y=sz(t,{pathname:m}),x=Dz(y&&y.map(_=>Object.assign({},_,{params:Object.assign({},o,_.params),pathname:Po([l,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:Po([l,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,n,r);return e&&x?V.createElement(r0.Provider,{value:{location:Zf({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:wo.Pop}},x):x}function Rz(){let t=zz(),e=kz(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),n?V.createElement("pre",{style:i},n):null,s)}const Lz=V.createElement(Rz,null);class Iz extends V.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?V.createElement(Ta.Provider,{value:this.props.routeContext},V.createElement(FP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Mz(t){let{routeContext:e,match:n,children:r}=t,i=V.useContext(n0);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),V.createElement(Ta.Provider,{value:e},r)}function Dz(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=(i=n)==null?void 0:i.errors;if(o!=null){let d=a.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);d>=0||on(!1),a=a.slice(0,Math.min(a.length,d+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<a.length;d++){let p=a[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=d),p.route.id){let{loaderData:h,errors:m}=n,y=p.route.loader&&h[p.route.id]===void 0&&(!m||m[p.route.id]===void 0);if(p.route.lazy||y){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,p,h)=>{let m,y=!1,x=null,_=null;n&&(m=o&&p.route.id?o[p.route.id]:void 0,x=p.route.errorElement||Lz,l&&(u<0&&h===0?(Uz("route-fallback",!1),y=!0,_=null):u===h&&(y=!0,_=p.route.hydrateFallbackElement||null)));let v=e.concat(a.slice(0,h+1)),w=()=>{let b;return m?b=x:y?b=_:p.route.Component?b=V.createElement(p.route.Component,null):p.route.element?b=p.route.element:b=d,V.createElement(Mz,{match:p,routeContext:{outlet:d,matches:v,isDataRoute:n!=null},children:b})};return n&&(p.route.ErrorBoundary||p.route.errorElement||h===0)?V.createElement(Iz,{location:n.location,revalidation:n.revalidation,component:x,error:m,children:w(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):w()},null)}var zP=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(zP||{}),dg=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(dg||{});function Fz(t){let e=V.useContext(n0);return e||on(!1),e}function qz(t){let e=V.useContext(DP);return e||on(!1),e}function Bz(t){let e=V.useContext(Ta);return e||on(!1),e}function $P(t){let e=Bz(),n=e.matches[e.matches.length-1];return n.route.id||on(!1),n.route.id}function zz(){var t;let e=V.useContext(FP),n=qz(dg.UseRouteError),r=$P(dg.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function $z(){let{router:t}=Fz(zP.UseNavigateStable),e=$P(dg.UseNavigateStable),n=V.useRef(!1);return qP(()=>{n.current=!0}),V.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Zf({fromRouteId:e},s)))},[t,e])}const RE={};function Uz(t,e,n){!e&&!RE[t]&&(RE[t]=!0)}function Gz(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function h4(t){return Az(t.context)}function Yt(t){on(!1)}function Hz(t){let{basename:e="/",children:n=null,location:r,navigationType:i=wo.Pop,navigator:s,static:a=!1,future:o}=t;Sh()&&on(!1);let l=e.replace(/^\/*/,"/"),u=V.useMemo(()=>({basename:l,navigator:s,static:a,future:Zf({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);typeof r=="string"&&(r=Xu(r));let{pathname:d="/",search:p="",hash:h="",state:m=null,key:y="default"}=r,x=V.useMemo(()=>{let _=Ru(d,l);return _==null?null:{location:{pathname:_,search:p,hash:h,state:m,key:y},navigationType:i}},[l,d,p,h,m,y,i]);return x==null?null:V.createElement(Wo.Provider,{value:u},V.createElement(r0.Provider,{children:n,value:x}))}function Vz(t){let{children:e,location:n}=t;return Oz(f_(e),n)}new Promise(()=>{});function f_(t,e){e===void 0&&(e=[]);let n=[];return V.Children.forEach(t,(r,i)=>{if(!V.isValidElement(r))return;let s=[...e,i];if(r.type===V.Fragment){n.push.apply(n,f_(r.props.children,s));return}r.type!==Yt&&on(!1),!r.props.index||!r.props.children||on(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=f_(r.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fg(){return fg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fg.apply(this,arguments)}function UP(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Wz(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Kz(t,e){return t.button===0&&(!e||e==="_self")&&!Wz(t)}const Yz=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Xz=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Qz="6";try{window.__reactRouterVersion=Qz}catch{}const Zz=V.createContext({isTransitioning:!1}),Jz="startTransition",LE=VF[Jz];function e$(t){let{basename:e,children:n,future:r,window:i}=t,s=V.useRef();s.current==null&&(s.current=nz({window:i,v5Compat:!0}));let a=s.current,[o,l]=V.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},d=V.useCallback(p=>{u&&LE?LE(()=>l(p)):l(p)},[l,u]);return V.useLayoutEffect(()=>a.listen(d),[a,d]),V.useEffect(()=>Gz(r),[r]),V.createElement(Hz,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:a,future:r})}const t$=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",n$=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yl=V.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:o,target:l,to:u,preventScrollReset:d,viewTransition:p}=e,h=UP(e,Yz),{basename:m}=V.useContext(Wo),y,x=!1;if(typeof u=="string"&&n$.test(u)&&(y=u,t$))try{let b=new URL(window.location.href),N=u.startsWith("//")?new URL(b.protocol+u):new URL(u),E=Ru(N.pathname,m);N.origin===b.origin&&E!=null?u=E+N.search+N.hash:x=!0}catch{}let _=jz(u,{relative:i}),v=s$(u,{replace:a,state:o,target:l,preventScrollReset:d,relative:i,viewTransition:p});function w(b){r&&r(b),b.defaultPrevented||v(b)}return V.createElement("a",fg({},h,{href:y||_,onClick:x||s?r:w,ref:n,target:l}))}),r$=V.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:a=!1,style:o,to:l,viewTransition:u,children:d}=e,p=UP(e,Xz),h=i0(l,{relative:p.relative}),m=rc(),y=V.useContext(DP),{navigator:x,basename:_}=V.useContext(Wo),v=y!=null&&a$(h)&&u===!0,w=x.encodeLocation?x.encodeLocation(h).pathname:h.pathname,b=m.pathname,N=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;i||(b=b.toLowerCase(),N=N?N.toLowerCase():null,w=w.toLowerCase()),N&&_&&(N=Ru(N,_)||N);const E=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let A=b===w||!a&&b.startsWith(w)&&b.charAt(E)==="/",P=N!=null&&(N===w||!a&&N.startsWith(w)&&N.charAt(w.length)==="/"),T={isActive:A,isPending:P,isTransitioning:v},M=A?r:void 0,k;typeof s=="function"?k=s(T):k=[s,A?"active":null,P?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let j=typeof o=="function"?o(T):o;return V.createElement(Yl,fg({},p,{"aria-current":M,className:k,ref:n,style:j,to:l,viewTransition:u}),typeof d=="function"?d(T):d)});var h_;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(h_||(h_={}));var IE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(IE||(IE={}));function i$(t){let e=V.useContext(n0);return e||on(!1),e}function s$(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:o}=e===void 0?{}:e,l=ni(),u=rc(),d=i0(t,{relative:a});return V.useCallback(p=>{if(Kz(p,n)){p.preventDefault();let h=r!==void 0?r:cg(u)===cg(d);l(t,{replace:h,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[u,l,d,r,i,n,t,s,a,o])}function a$(t,e){e===void 0&&(e={});let n=V.useContext(Zz);n==null&&on(!1);let{basename:r}=i$(h_.useViewTransitionState),i=i0(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Ru(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Ru(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ug(i.pathname,a)!=null||ug(i.pathname,s)!=null}const p4="-",o$=t=>{const e=c$(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const o=a.split(p4);return o[0]===""&&o.length!==1&&o.shift(),GP(o,e)||l$(a)},getConflictingClassGroupIds:(a,o)=>{const l=n[a]||[];return o&&r[a]?[...l,...r[a]]:l}}},GP=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?GP(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(p4);return(a=e.validators.find(({validator:o})=>o(s)))==null?void 0:a.classGroupId},ME=/^\[(.+)\]$/,l$=t=>{if(ME.test(t)){const e=ME.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},c$=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return d$(Object.entries(t.classGroups),n).forEach(([s,a])=>{p_(a,r,s,e)}),r},p_=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:DE(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(u$(i)){p_(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,a])=>{p_(a,DE(e,s),n,r)})})},DE=(t,e)=>{let n=t;return e.split(p4).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},u$=t=>t.isThemeGetter,d$=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([a,o])=>[e+a,o])):s);return[n,i]}):t,f$=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,a)=>{n.set(s,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let a=n.get(s);if(a!==void 0)return a;if((a=r.get(s))!==void 0)return i(s,a),a},set(s,a){n.has(s)?n.set(s,a):i(s,a)}}},HP="!",h$=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,a=o=>{const l=[];let u=0,d=0,p;for(let _=0;_<o.length;_++){let v=o[_];if(u===0){if(v===i&&(r||o.slice(_,_+s)===e)){l.push(o.slice(d,_)),d=_+s;continue}if(v==="/"){p=_;continue}}v==="["?u++:v==="]"&&u--}const h=l.length===0?o:o.substring(d),m=h.startsWith(HP),y=m?h.substring(1):h,x=p&&p>d?p-d:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:y,maybePostfixModifierPosition:x}};return n?o=>n({className:o,parseClassName:a}):a},p$=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},m$=t=>({cache:f$(t.cacheSize),parseClassName:h$(t),...o$(t)}),g$=/\s+/,v$=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],a=t.trim().split(g$);let o="";for(let l=a.length-1;l>=0;l-=1){const u=a[l],{modifiers:d,hasImportantModifier:p,baseClassName:h,maybePostfixModifierPosition:m}=n(u);let y=!!m,x=r(y?h.substring(0,m):h);if(!x){if(!y){o=u+(o.length>0?" "+o:o);continue}if(x=r(h),!x){o=u+(o.length>0?" "+o:o);continue}y=!1}const _=p$(d).join(":"),v=p?_+HP:_,w=v+x;if(s.includes(w))continue;s.push(w);const b=i(x,y);for(let N=0;N<b.length;++N){const E=b[N];s.push(v+E)}o=u+(o.length>0?" "+o:o)}return o};function y$(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=VP(e))&&(r&&(r+=" "),r+=n);return r}const VP=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=VP(t[r]))&&(n&&(n+=" "),n+=e);return n};function x$(t,...e){let n,r,i,s=a;function a(l){const u=e.reduce((d,p)=>p(d),t());return n=m$(u),r=n.cache.get,i=n.cache.set,s=o,o(l)}function o(l){const u=r(l);if(u)return u;const d=v$(l,n);return i(l,d),d}return function(){return s(y$.apply(null,arguments))}}const Rt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},WP=/^\[(?:([a-z-]+):)?(.+)\]$/i,b$=/^\d+\/\d+$/,w$=new Set(["px","full","screen"]),_$=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,N$=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,S$=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,E$=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,k$=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,na=t=>yu(t)||w$.has(t)||b$.test(t),ro=t=>Qu(t,"length",L$),yu=t=>!!t&&!Number.isNaN(Number(t)),cy=t=>Qu(t,"number",yu),$d=t=>!!t&&Number.isInteger(Number(t)),C$=t=>t.endsWith("%")&&yu(t.slice(0,-1)),Qe=t=>WP.test(t),io=t=>_$.test(t),j$=new Set(["length","size","percentage"]),T$=t=>Qu(t,j$,KP),A$=t=>Qu(t,"position",KP),O$=new Set(["image","url"]),P$=t=>Qu(t,O$,M$),R$=t=>Qu(t,"",I$),Ud=()=>!0,Qu=(t,e,n)=>{const r=WP.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},L$=t=>N$.test(t)&&!S$.test(t),KP=()=>!1,I$=t=>E$.test(t),M$=t=>k$.test(t),D$=()=>{const t=Rt("colors"),e=Rt("spacing"),n=Rt("blur"),r=Rt("brightness"),i=Rt("borderColor"),s=Rt("borderRadius"),a=Rt("borderSpacing"),o=Rt("borderWidth"),l=Rt("contrast"),u=Rt("grayscale"),d=Rt("hueRotate"),p=Rt("invert"),h=Rt("gap"),m=Rt("gradientColorStops"),y=Rt("gradientColorStopPositions"),x=Rt("inset"),_=Rt("margin"),v=Rt("opacity"),w=Rt("padding"),b=Rt("saturate"),N=Rt("scale"),E=Rt("sepia"),A=Rt("skew"),P=Rt("space"),T=Rt("translate"),M=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto",Qe,e],O=()=>[Qe,e],q=()=>["",na,ro],I=()=>["auto",yu,Qe],D=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],U=()=>["solid","dashed","dotted","double","none"],W=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Y=()=>["start","end","center","between","around","evenly","stretch"],H=()=>["","0",Qe],B=()=>["auto","avoid","all","avoid-page","page","left","right","column"],L=()=>[yu,Qe];return{cacheSize:500,separator:":",theme:{colors:[Ud],spacing:[na,ro],blur:["none","",io,Qe],brightness:L(),borderColor:[t],borderRadius:["none","","full",io,Qe],borderSpacing:O(),borderWidth:q(),contrast:L(),grayscale:H(),hueRotate:L(),invert:H(),gap:O(),gradientColorStops:[t],gradientColorStopPositions:[C$,ro],inset:j(),margin:j(),opacity:L(),padding:O(),saturate:L(),scale:L(),sepia:H(),skew:L(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",Qe]}],container:["container"],columns:[{columns:[io]}],"break-after":[{"break-after":B()}],"break-before":[{"break-before":B()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...D(),Qe]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",$d,Qe]}],basis:[{basis:j()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Qe]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",$d,Qe]}],"grid-cols":[{"grid-cols":[Ud]}],"col-start-end":[{col:["auto",{span:["full",$d,Qe]},Qe]}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":[Ud]}],"row-start-end":[{row:["auto",{span:[$d,Qe]},Qe]}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Qe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Qe]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...Y()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Y(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Y(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Qe,e]}],"min-w":[{"min-w":[Qe,e,"min","max","fit"]}],"max-w":[{"max-w":[Qe,e,"none","full","min","max","fit","prose",{screen:[io]},io]}],h:[{h:[Qe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Qe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Qe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Qe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",io,ro]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",cy]}],"font-family":[{font:[Ud]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Qe]}],"line-clamp":[{"line-clamp":["none",yu,cy]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",na,Qe]}],"list-image":[{"list-image":["none",Qe]}],"list-style-type":[{list:["none","disc","decimal",Qe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...U(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",na,ro]}],"underline-offset":[{"underline-offset":["auto",na,Qe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Qe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Qe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...D(),A$]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",T$]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},P$]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...U(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:U()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...U()]}],"outline-offset":[{"outline-offset":[na,Qe]}],"outline-w":[{outline:[na,ro]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[na,ro]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",io,R$]}],"shadow-color":[{shadow:[Ud]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...W(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":W()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",io,Qe]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[p]}],saturate:[{saturate:[b]}],sepia:[{sepia:[E]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[E]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Qe]}],duration:[{duration:L()}],ease:[{ease:["linear","in","out","in-out",Qe]}],delay:[{delay:L()}],animate:[{animate:["none","spin","ping","pulse","bounce",Qe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[$d,Qe]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[A]}],"skew-y":[{"skew-y":[A]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Qe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Qe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Qe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[na,ro,cy]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},m4=x$(D$),ft=({children:t,className:e,...n})=>c.jsx("div",{className:m4("bg-glass backdrop-blur-xl border border-glass-border rounded-xl",e),...n,children:t}),Jf=({url:t,name:e,alt:n="User",size:r="md",className:i})=>{const s={sm:"size-8 text-xs",md:"size-10 text-sm",lg:"size-16 text-lg",xl:"size-32 text-2xl"},a=e?e.charAt(0).toUpperCase():n?n.charAt(0).toUpperCase():"?";return c.jsx("div",{className:m4("rounded-full bg-surface-light border border-white/10 flex items-center justify-center overflow-hidden shrink-0 text-slate-400 font-bold select-none",s[r],i),children:t?c.jsx("img",{src:t,alt:e||n,className:"w-full h-full object-cover"}):c.jsx("span",{children:a})})},F$=()=>c.jsx("div",{className:"flex h-screen w-full overflow-hidden bg-background-dark relative",children:c.jsx("main",{className:"flex-1 min-w-0 relative overflow-hidden flex flex-col",children:c.jsx(h4,{})})}),q$="/api",ke={async request(t,e={}){const n=`${q$}${t}`,r={"Content-Type":"application/json",...e.headers},i=await fetch(n,{...e,headers:r,credentials:"include"});if(!i.ok){const s=await i.json().catch(()=>({}));throw new Error(s.error||`HTTP error! status: ${i.status}`)}return i.status===204||i.headers.get("content-length")==="0"?null:i.json()},get(t,e={}){return this.request(t,{method:"GET",headers:e})},post(t,e,n={}){return this.request(t,{method:"POST",body:JSON.stringify(e),headers:n})},put(t,e,n={}){return this.request(t,{method:"PUT",body:JSON.stringify(e),headers:n})},patch(t,e,n={}){return this.request(t,{method:"PATCH",body:JSON.stringify(e),headers:n})},delete(t,e={}){return this.request(t,{method:"DELETE",headers:e})}},uy={list:()=>ke.get("/workspaces"),create:(t,e,n,r)=>ke.post("/workspaces",{name:t,title:e,genre:n,imageUrl:r}),delete:t=>ke.delete("/workspaces/"+t),select:t=>ke.post("/workspaces/select",{projectName:t})},B$=["FANTASA","SCI-FI","HORROR","LORE","MISTERIO","HISTRICO","CYBERPUNK","STEAMPUNK"],z$=({isOpen:t,onClose:e,onCreate:n})=>{if(!t)return null;const[r,i]=V.useState(!1),[s,a]=V.useState({name:"",title:"",genre:"FANTASA",imageUrl:"https://images.unsplash.com/photo-1518709268805-4e9042af9f23?auto=format&fit=crop&q=80&w=800"}),o=u=>{const{name:d,value:p}=u.target;a(h=>({...h,[d]:p}))},l=u=>{u.preventDefault();let d=s.name;if(!d&&s.title&&(d=s.title.toLowerCase().replace(/[^a-z0-9]/g,"-")),!d){alert("Project ID/Name is required");return}n({...s,name:d}),e(),a({name:"",title:"",genre:"FANTASA",imageUrl:"https://images.unsplash.com/photo-1518709268805-4e9042af9f23?auto=format&fit=crop&q=80&w=800"})};return qo.createPortal(c.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[c.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",onClick:e}),c.jsxs("div",{className:"relative w-full max-w-2xl bg-[#0a0a0c] border border-white/10 rounded-3xl shadow-2xl overflow-hidden flex animate-in zoom-in-95 duration-200",children:[c.jsxs("div",{className:"w-1/3 bg-black relative hidden sm:block",children:[c.jsx("img",{src:s.imageUrl,onError:()=>i(!0),className:`absolute inset-0 w-full h-full object-cover opacity-60 transition-opacity duration-500 ${r?"hidden":""}`,alt:"Preview"}),c.jsxs("div",{className:"absolute inset-x-0 bottom-0 p-6 bg-gradient-to-t from-black to-transparent",children:[c.jsx("h4",{className:"text-white font-black text-xl leading-none",children:s.title||"Untitled"}),c.jsx("span",{className:"text-[10px] font-bold text-primary uppercase tracking-widest mt-2 block",children:s.genre})]})]}),c.jsxs("div",{className:"flex-1 p-8",children:[c.jsx("h2",{className:"text-2xl font-black text-white mb-6",children:"Nuevo Cuaderno"}),c.jsxs("form",{onSubmit:l,className:"space-y-5",children:[c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-text-muted",children:"Ttulo del Proyecto"}),c.jsx("input",{type:"text",name:"title",value:s.title,onChange:o,placeholder:"e.g. Las Crnicas de Etheria",className:"w-full bg-surface-dark border border-glass-border rounded-xl px-4 py-3 text-white text-sm focus:border-primary/50 focus:ring-1 focus:ring-primary/50 outline-none transition-all",autoFocus:!0})]}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-text-muted",children:"ID de Archivo (Slug)"}),c.jsx("input",{type:"text",name:"name",value:s.name,onChange:o,placeholder:"e.g. etheria-v1",className:"w-full bg-surface-dark border border-glass-border rounded-xl px-4 py-3 text-white font-mono text-xs focus:border-primary/50 focus:ring-1 focus:ring-primary/50 outline-none transition-all placeholder:text-white/10"}),c.jsx("p",{className:"text-[10px] text-white/20",children:"Se usar como nombre del archivo .db"})]}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-text-muted",children:"Gnero"}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:B$.slice(0,4).map(u=>c.jsx("button",{type:"button",onClick:()=>a(d=>({...d,genre:u})),className:`px-3 py-2 rounded-lg text-[10px] font-bold border transition-all ${s.genre===u?"bg-primary text-white border-primary":"bg-surface-dark border-glass-border text-text-muted hover:border-white/20"}`,children:u},u))})]}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-text-muted",children:"Imagen de Portada (URL)"}),c.jsx("input",{type:"text",name:"imageUrl",value:s.imageUrl,onChange:u=>{a(d=>({...d,imageUrl:u.target.value})),i(!1)},className:"w-full bg-surface-dark border border-glass-border rounded-xl px-4 py-3 text-white text-xs focus:border-primary/50 focus:ring-1 focus:ring-primary/50 outline-none transition-all truncate"})]}),c.jsxs("div",{className:"pt-4 flex gap-3",children:[c.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-3 bg-surface-dark hover:bg-white/5 border border-glass-border rounded-xl text-xs font-bold text-text-muted transition-all",children:"Cancelar"}),c.jsxs("button",{type:"submit",className:"flex-1 px-4 py-3 bg-primary hover:bg-primary-light text-white rounded-xl text-xs font-bold transition-all shadow-lg shadow-primary/20 flex items-center justify-center gap-2",children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"rocket_launch"}),"Crear Universo"]})]})]})]})]})]}),document.body)},$$=()=>{const t=ni(),[e,n]=V.useState([]),[r,i]=V.useState(!0),[s,a]=V.useState(null),[o,l]=V.useState(""),[u,d]=V.useState(!1);V.useEffect(()=>{p()},[]);const p=async()=>{try{i(!0);const _=await uy.list();n(_)}catch(_){console.error("Failed to load workspaces",_),a("Error al cargar cuadernos. Est el servidor encendido?")}finally{i(!1)}},h=async _=>{try{i(!0);const v=await uy.select(_);v.success&&v.redirect&&(localStorage.setItem("user",JSON.stringify({username:"local",success:!0})),t(v.redirect))}catch(v){a(v.message||"Fallo al entrar al cuaderno"),i(!1)}},m=async _=>{try{i(!0),(await uy.create(_.name,_.title,_.genre,_.imageUrl)).success&&await h(_.name)}catch{a("Error al crear cuaderno"),i(!1)}},y=_=>{const v=_.split("").reduce((N,E)=>N+E.charCodeAt(0),0),w=["FANTASA","SCI-FI","HORROR","LORE","MISTERIO"],b=["https://images.unsplash.com/photo-1518709268805-4e9042af9f23?auto=format&fit=crop&q=80&w=800","https://images.unsplash.com/photo-1451187580459-43490279c0fa?auto=format&fit=crop&q=80&w=800","https://images.unsplash.com/photo-1505634467193-785724601157?auto=format&fit=crop&q=80&w=800","https://images.unsplash.com/photo-1478720568477-152d9b164e26?auto=format&fit=crop&q=80&w=800"];return{tag:w[v%w.length],img:b[v%b.length],desc:"Una tierra dividida por la magia y la tecnologa antigua...",initials:_.substring(0,2).toUpperCase(),time:"hace 2h"}},x=e.filter(_=>_.toLowerCase().includes(o.toLowerCase()));return c.jsxs("div",{className:"min-h-screen w-full bg-[#0a0b14] text-white flex flex-col items-center p-8 font-sans selection:bg-indigo-500/30 overflow-y-auto custom-scrollbar",children:[c.jsxs("header",{className:"w-full max-w-6xl mt-24 mb-12 flex flex-col lg:flex-row lg:items-end justify-between gap-8",children:[c.jsx("div",{className:"space-y-4",children:c.jsx("div",{className:"flex items-center gap-4",children:c.jsxs("h1",{className:"text-6xl font-black tracking-tighter leading-none",children:[c.jsx("span",{className:"block text-indigo-400",children:"Mis"}),c.jsx("span",{className:"block text-white",children:"Cuadernos"})]})})}),c.jsx("div",{className:"flex items-center gap-4",children:c.jsxs("div",{className:"relative group min-w-[300px]",children:[c.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-white/20 text-xl group-focus-within:text-indigo-400 transition-colors pointer-events-none",children:"search"}),c.jsx("input",{type:"text",placeholder:"Buscar...",value:o,onChange:_=>l(_.target.value),className:"w-full bg-[#13141f] border border-white/5 rounded-2xl py-3 pl-12 pr-4 text-sm text-white focus:outline-none focus:border-indigo-500/50 transition-all placeholder:text-white/10"})]})})]}),c.jsx("section",{className:"w-full max-w-6xl",children:r?c.jsxs("div",{className:"flex flex-col items-center gap-6 py-20 opacity-20",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"}),c.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.3em]",children:"Accediendo al Sector Local..."})]}):c.jsxs("div",{className:"flex flex-wrap gap-6 justify-start pb-20",children:[c.jsxs("div",{onClick:()=>d(!0),className:"group relative h-[380px] rounded-[2.5rem] border-2 border-dashed border-white/5 flex flex-col items-center justify-center gap-6 hover:bg-white/5 hover:border-indigo-500/30 transition-all cursor-pointer overflow-hidden animate-in fade-in duration-700 w-full md:w-[calc(50%-0.75rem)] lg:w-[calc(33.333%-1rem)]",children:[c.jsx("div",{className:"w-20 h-20 rounded-full bg-[#13141f] border border-white/5 flex items-center justify-center text-4xl text-white/20 group-hover:scale-110 group-hover:text-indigo-400 transition-all",children:c.jsx("span",{className:"material-symbols-outlined text-4xl",children:"add"})}),c.jsxs("div",{className:"text-center",children:[c.jsx("h3",{className:"text-xl font-black tracking-tight text-white/50 group-hover:text-white transition-colors",children:"Nuevo Cuaderno"}),c.jsx("p",{className:"text-[10px] font-bold text-white/20 uppercase tracking-widest mt-2 group-hover:text-white/40",children:"Inicia un nuevo universo"})]})]}),x.map(_=>{const v=y(_);return c.jsxs("div",{onClick:()=>h(_),className:"group relative h-[380px] rounded-[2.5rem] bg-[#13141f] border border-white/5 overflow-hidden transition-all hover:-translate-y-2 hover:shadow-2xl hover:shadow-indigo-500/10 cursor-pointer animate-in fade-in slide-in-from-bottom-4 w-full md:w-[calc(50%-0.75rem)] lg:w-[calc(33.333%-1rem)]",children:[c.jsxs("div",{className:"absolute inset-x-0 top-0 h-2/3",children:[c.jsx("img",{src:v.img,className:"w-full h-full object-cover opacity-40 group-hover:opacity-60 transition-opacity",alt:""}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#13141f] via-transparent to-transparent"})]}),c.jsx("div",{className:"absolute inset-0 flex flex-col justify-end p-8",children:c.jsxs("div",{className:"mt-auto space-y-3",children:[c.jsx("span",{className:"inline-block px-3 py-1 bg-red-500/20 border border-red-500/30 text-[9px] font-black text-red-100 rounded-lg tracking-widest uppercase",children:v.tag}),c.jsx("h3",{className:"text-3xl font-black text-white tracking-tighter leading-tight group-hover:text-indigo-400 transition-colors",children:_}),c.jsx("p",{className:"text-xs text-white/40 line-clamp-2 leading-relaxed",children:v.desc}),c.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-white/5 mt-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]"}),c.jsxs("span",{className:"text-[9px] font-black uppercase tracking-widest text-white/20",children:["ltima edicin: ",c.jsx("span",{className:"text-white/40",children:v.time})]})]}),c.jsx("div",{className:"w-8 h-8 rounded-full bg-white/5 border border-white/10 flex items-center justify-center text-[10px] font-black text-indigo-300",children:v.initials})]})]})})]},_)})]})}),s&&c.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 px-6 py-3 bg-red-500/20 border border-red-500/30 text-red-200 rounded-2xl text-xs font-bold shadow-2xl animate-bounce",children:s}),c.jsx(z$,{isOpen:u,onClose:()=>d(!1),onCreate:m})]})},Vp=({icon:t,title:e,desc:n,color:r})=>c.jsxs("div",{className:"group relative p-8 rounded-[32px] bg-surface-dark border border-white/5 hover:border-white/10 transition-all cursor-pointer flex flex-col h-full gap-6 hover:shadow-2xl hover:shadow-black/40",children:[c.jsx("div",{className:`size-14 rounded-2xl ${r} flex items-center justify-center text-white shadow-lg group-hover:scale-110 transition-all duration-500`,children:c.jsx("span",{className:"material-symbols-outlined text-3xl",children:t})}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-2xl font-bold text-white tracking-tight",children:e}),c.jsx("p",{className:"text-slate-500 text-sm leading-relaxed",children:n})]}),c.jsxs("div",{className:"mt-auto pt-4 border-t border-white/5 flex items-center justify-between text-slate-500 group-hover:text-white transition-colors",children:[c.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Architect Tool"}),c.jsx("span",{className:"material-symbols-outlined text-xl group-hover:translate-x-1 transition-transform",children:"arrow_forward"})]})]}),U$=()=>{const{projectName:t,handleCreateEntity:e}=Ko(),n=ni();return ri(),c.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-12 gap-16 max-w-6xl mx-auto w-full",children:[c.jsxs("div",{className:"flex flex-col items-center text-center gap-8 max-w-2xl animate-in fade-in slide-in-from-bottom-8 duration-700",children:[c.jsx("div",{className:"size-20 rounded-full bg-white text-background-dark flex items-center justify-center shadow-2xl shadow-white/20",children:c.jsx("span",{className:"material-symbols-outlined text-4xl font-bold",children:"explore"})}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h1",{className:"text-6xl font-manrope font-black text-white tracking-tighter leading-tight",children:"Bienvenido de nuevo, Viajero."}),c.jsxs("p",{className:"text-xl text-slate-400 font-medium leading-relaxed",children:["Tu mundo ",c.jsx("span",{className:"text-primary font-bold",children:t||"Cargando..."})," espera ser descubierto. El lienzo est vaco, pero tu imaginacin no tiene lmites. Cmo empezamos hoy?"]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 w-full items-stretch animate-in fade-in slide-in-from-bottom-12 duration-1000 delay-300",children:[c.jsx("div",{onClick:()=>e(null,"default"),children:c.jsx(Vp,{icon:"person_add",title:"Aadir Entidad",desc:"Agrega un personaje, lugar o item importante a tu base de datos.",color:"bg-indigo-600"})}),c.jsx("div",{onClick:()=>e(null,"map"),children:c.jsx(Vp,{icon:"map",title:"Crear Mapa",desc:"Dibuja una representacin cartogrfica de una regin.",color:"bg-purple-600"})}),c.jsx("div",{onClick:()=>n("writing"),children:c.jsx(Vp,{icon:"edit_note",title:"Empezar a Escribir",desc:"Abre el editor de texto y comienza un nuevo captulo.",color:"bg-emerald-600"})}),c.jsx("div",{onClick:()=>alert("WIP: Notas Rpidas"),children:c.jsx(Vp,{icon:"lightbulb",title:"Ver Ideas Rpidas",desc:"Revisa tus notas y fragmentos de inspiracin guardados.",color:"bg-amber-600"})})]})]})},G$=()=>{var d,p;const t=ni(),[e,n]=V.useState(null),[r,i]=V.useState("appearance"),[s,a]=V.useState({theme:"deep_space",font:"Manrope",fontSize:16,focusMode:!1,transparencyEffects:!0,vaultPath:"./data"});V.useEffect(()=>{console.log("Settings Page Mounted");try{const h=localStorage.getItem("user");h&&h!=="undefined"&&n(JSON.parse(h))}catch(h){console.error("Failed to parse user settings",h)}},[]);const o=async()=>{try{await ke.post("/auth/logout",{})}catch(h){console.error("Logout error",h)}finally{localStorage.removeItem("user"),sessionStorage.clear(),t("/")}},l=[{id:"general",label:"General",icon:"settings"},{id:"appearance",label:"Apariencia",icon:"palette"},{id:"editor",label:"Editor",icon:"edit_note"},{id:"sync",label:"Sincronizacin",icon:"sync_lock"},{id:"notifications",label:"Notificaciones",icon:"notifications"}],u=[{id:"deep_space",label:"Deep Space",color:"#0f172a"},{id:"nebula",label:"Nebula",color:"#312e81"},{id:"high_contrast",label:"High Contrast",color:"#000000"}];return c.jsxs("div",{className:"flex w-full h-full bg-[#050508] text-white font-sans overflow-hidden",children:[c.jsxs("aside",{className:"w-64 flex-none flex flex-col border-r border-white/5 bg-[#0a0a0e]",children:[c.jsxs("div",{className:"p-8 pb-4",children:[c.jsx("div",{className:"size-10 rounded-full bg-white flex items-center justify-center text-black mb-4",children:c.jsx("span",{className:"material-symbols-outlined text-2xl",children:"settings"})}),c.jsx("h1",{className:"text-xl font-bold tracking-tight",children:"Ajustes"}),c.jsx("p",{className:"text-xs text-slate-500 font-mono mt-1",children:"v2.4.0 Local-Build"})]}),c.jsx("nav",{className:"flex-1 px-4 py-4 space-y-1",children:l.map(h=>c.jsxs("button",{onClick:()=>i(h.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold transition-all ${r===h.id?"bg-indigo-500/10 text-indigo-400":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:[c.jsx("span",{className:"material-symbols-outlined text-lg",children:h.icon}),h.label]},h.id))}),c.jsx("div",{className:"p-4 border-t border-white/5",children:c.jsxs("button",{onClick:o,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold text-red-400 hover:bg-red-500/10 transition-colors",children:[c.jsx("span",{className:"material-symbols-outlined text-lg",children:"logout"}),"Cerrar Sesin"]})})]}),c.jsx("main",{className:"flex-1 overflow-y-auto p-12 custom-scrollbar",children:c.jsxs("div",{className:"max-w-3xl mx-auto space-y-12",children:[c.jsxs("header",{children:[c.jsx("h2",{className:"text-3xl font-bold mb-2",children:(d=l.find(h=>h.id===r))==null?void 0:d.label}),c.jsx("p",{className:"text-slate-500",children:"Personaliza la interfaz visual y tu entorno de escritura para maximizar tu creatividad y concentracin."})]}),r==="appearance"&&c.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4",children:[c.jsxs("section",{className:"bg-[#0f0f13] border border-white/5 rounded-3xl p-8",children:[c.jsx("h3",{className:"text-lg font-bold mb-1",children:"Tema de la Interfaz"}),c.jsx("p",{className:"text-xs text-slate-500 mb-6",children:"Selecciona el esquema de colores que prefieras."}),c.jsx("div",{className:"grid grid-cols-3 gap-6",children:u.map(h=>c.jsxs("button",{onClick:()=>a({...s,theme:h.id}),className:`relative group text-left transition-all ${s.theme===h.id?"ring-2 ring-indigo-500":"hover:ring-1 hover:ring-white/20"} rounded-2xl overflow-hidden`,children:[c.jsx("div",{className:"h-32 bg-black/20 relative p-4 flex items-center justify-center",children:c.jsx("div",{className:"w-full h-full rounded-xl flex items-center justify-center",style:{backgroundColor:h.color},children:c.jsx("div",{className:"size-8 rounded-full bg-white/10 backdrop-blur-md"})})}),c.jsx("div",{className:"p-4 bg-[#18181b]",children:c.jsx("span",{className:"text-xs font-bold text-slate-300 group-hover:text-white",children:h.label})})]},h.id))})]}),c.jsxs("section",{className:"bg-[#0f0f13] border border-white/5 rounded-3xl p-8 space-y-8",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("span",{className:"material-symbols-outlined text-indigo-400",children:"text_fields"}),c.jsx("h3",{className:"text-lg font-bold",children:"Configuracin del Editor"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-12 border-b border-white/5 pb-8",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsx("label",{className:"text-xs font-bold text-slate-500",children:"Tipografa"}),c.jsxs("div",{className:"relative",children:[c.jsxs("select",{value:s.font,onChange:h=>a({...s,font:h.target.value}),className:"w-full bg-[#18181b] border border-white/10 rounded-xl px-4 py-3 text-sm text-white appearance-none outline-none focus:border-indigo-500 transition-colors",children:[c.jsx("option",{value:"Manrope",children:"Manrope (Sans-serif)"}),c.jsx("option",{value:"Inter",children:"Inter"}),c.jsx("option",{value:"Merriweather",children:"Merriweather (Serif)"})]}),c.jsx("span",{className:"material-symbols-outlined absolute right-4 top-1/2 -translate-y-1/2 text-slate-500 pointer-events-none text-sm",children:"expand_more"})]}),c.jsx("p",{className:"text-[10px] text-slate-600",children:"La fuente utilizada en el lienzo de escritura."})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("label",{className:"text-xs font-bold text-slate-500",children:"Tamao de Fuente"}),c.jsxs("span",{className:"text-xs font-bold text-indigo-400",children:[s.fontSize,"px"]})]}),c.jsx("input",{type:"range",min:"12",max:"24",value:s.fontSize,onChange:h=>a({...s,fontSize:parseInt(h.target.value)}),className:"w-full accent-indigo-500 h-1 bg-white/10 rounded-lg appearance-none cursor-pointer"}),c.jsxs("div",{className:"flex justify-between text-[10px] text-slate-600 font-bold uppercase",children:[c.jsx("span",{children:"Aa"}),c.jsx("span",{children:"Aa"})]})]})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex gap-4",children:[c.jsx("div",{className:"size-10 rounded-full bg-white/5 flex items-center justify-center text-slate-400",children:c.jsx("span",{className:"material-symbols-outlined",children:"center_focus_strong"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-bold text-white",children:"Modo Enfoque"}),c.jsx("p",{className:"text-xs text-slate-500",children:"Oculta todos los paneles laterales al escribir."})]})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:s.focusMode,onChange:h=>a({...s,focusMode:h.target.checked}),className:"sr-only peer"}),c.jsx("div",{className:"w-11 h-6 bg-white/10 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-slate-400 after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-500 peer-checked:after:bg-white"})]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex gap-4",children:[c.jsx("div",{className:"size-10 rounded-full bg-white/5 flex items-center justify-center text-slate-400",children:c.jsx("span",{className:"material-symbols-outlined",children:"blur_on"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-bold text-white",children:"Efectos de Transparencia"}),c.jsx("p",{className:"text-xs text-slate-500",children:"Desactivar para mejorar el rendimiento."})]})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:s.transparencyEffects,onChange:h=>a({...s,transparencyEffects:h.target.checked}),className:"sr-only peer"}),c.jsx("div",{className:"w-11 h-6 bg-white/10 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-slate-400 after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-500 peer-checked:after:bg-white"})]})]})]})]}),c.jsxs("section",{className:"bg-[#0f0f13] border border-white/5 rounded-3xl p-1 relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-indigo-500 rounded-l-3xl"}),c.jsxs("div",{className:"p-8",children:[c.jsxs("div",{className:"flex justify-between items-start mb-6",children:[c.jsxs("div",{className:"flex gap-4",children:[c.jsx("span",{className:"material-symbols-outlined text-indigo-400 text-2xl",children:"folder_special"}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-white",children:"Almacenamiento Local"}),c.jsx("p",{className:"text-xs text-slate-500",children:"Tus datos viven en tu dispositivo. Gestiona tus copias de seguridad."})]})]}),c.jsxs("span",{className:"px-3 py-1 bg-green-500/10 text-green-400 rounded-full text-[10px] font-bold uppercase border border-green-500/20 flex items-center gap-2",children:[c.jsx("span",{className:"size-1.5 rounded-full bg-green-500 animate-pulse"})," Sincronizado"]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-slate-500 block mb-2",children:"Ruta de la Bveda"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("div",{className:"flex-1 bg-[#18181b] border border-white/10 rounded-xl px-4 py-3 text-xs font-mono text-slate-300 truncate",children:s.vaultPath}),c.jsx("button",{className:"px-4 py-2 bg-white/5 hover:bg-white/10 text-white rounded-xl text-xs font-bold transition-colors",children:"Cambiar"})]})]}),c.jsxs("div",{className:"bg-[#18181b] rounded-xl p-4 flex items-center justify-between border border-white/5",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"size-10 rounded-full bg-indigo-500/20 flex items-center justify-center text-indigo-400",children:c.jsx("span",{className:"material-symbols-outlined",children:"history"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-bold text-white",children:"Copia de Seguridad Automtica"}),c.jsx("p",{className:"text-[10px] text-slate-500",children:"Ultima copia: Hace 12 minutos"})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{className:"px-4 py-2 bg-white/5 hover:bg-white/10 text-white rounded-lg text-xs font-bold transition-colors",children:"Restaurar"}),c.jsx("button",{className:"px-4 py-2 bg-indigo-500 hover:bg-indigo-600 text-white rounded-lg text-xs font-bold transition-colors shadow-lg shadow-indigo-500/20",children:"Respaldar Ahora"})]})]})]})]})]}),c.jsx("div",{className:"flex justify-end pt-8 pb-20",children:c.jsx("button",{className:"px-8 py-3 bg-white text-black font-bold rounded-full hover:scale-105 transition-transform shadow-xl",children:"Guardar Cambios"})})]}),r!=="appearance"&&c.jsxs("div",{className:"flex flex-col items-center justify-center h-[50vh] text-slate-600",children:[c.jsx("span",{className:"material-symbols-outlined text-6xl mb-4 opacity-20",children:"construction"}),c.jsx("h3",{className:"text-xl font-bold text-slate-500",children:"En Construccin"}),c.jsxs("p",{className:"text-sm",children:["El mdulo ",(p=l.find(h=>h.id===r))==null?void 0:p.label," estar disponible pronto."]})]})]})})]})},Ct=V.forwardRef(({children:t,variant:e="primary",size:n="md",className:r,icon:i,isLoading:s,...a},o)=>{const l="inline-flex items-center justify-center rounded-lg font-medium transition-all focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed",u={primary:"bg-primary hover:bg-primary-hover text-white shadow-lg shadow-primary/25 border border-transparent",secondary:"bg-surface-light hover:bg-surface-lighter text-slate-200 border border-glass-border",ghost:"bg-transparent hover:bg-white/5 text-slate-400 hover:text-white",danger:"bg-red-500/10 hover:bg-red-500/20 text-red-500 border border-red-500/20"},d={sm:"px-3 py-1.5 text-xs gap-1.5",md:"px-4 py-2 text-sm gap-2",lg:"px-6 py-3 text-base gap-3"};return c.jsxs("button",{ref:o,className:m4(l,u[e],d[n],r),disabled:s,...a,children:[s?c.jsx("span",{className:"material-symbols-outlined animate-spin text-[18px]",children:"progress_activity"}):i?c.jsx("span",{className:"material-symbols-outlined text-[18px]",children:i}):null,t]})});Ct.displayName="Button";const Eh=({isOpen:t,onClose:e,onConfirm:n,title:r,message:i,confirmText:s="Confirmar",cancelText:a="Cancelar",type:o="danger"})=>t?qo.createPortal(c.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[c.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",onClick:e}),c.jsxs("div",{className:"relative w-full max-w-md bg-[#0a0a0c] border border-white/10 rounded-3xl shadow-2xl p-6 animate-in zoom-in-95 duration-200 overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 left-0 right-0 h-32 bg-gradient-to-b from-white/5 to-transparent pointer-events-none"}),c.jsxs("div",{className:"relative z-10 text-center",children:[c.jsx("div",{className:`mx-auto mb-4 size-16 rounded-2xl flex items-center justify-center ${o==="danger"?"bg-red-500/10 text-red-500":"bg-yellow-500/10 text-yellow-500"}`,children:c.jsx("span",{className:"material-symbols-outlined text-3xl",children:o==="danger"?"delete_forever":"warning"})}),c.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:r}),c.jsx("p",{className:"text-text-muted text-sm mb-8 leading-relaxed",children:i}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:e,className:"flex-1 px-4 py-3 rounded-xl bg-surface-light hover:bg-white/10 text-text-muted hover:text-white text-xs font-bold transition-all border border-white/5",children:a}),c.jsx("button",{onClick:()=>{n(),e()},className:`flex-1 px-4 py-3 rounded-xl text-white text-xs font-bold transition-all shadow-lg flex items-center justify-center gap-2
                                ${o==="danger"?"bg-red-500 hover:bg-red-600 shadow-red-500/20":"bg-primary hover:bg-primary-light shadow-primary/20"}`,children:c.jsx("span",{children:s})})]})]})]})]}),document.body):null,FE=({compact:t=!1})=>{const[e,n]=V.useState(null),[r,i]=V.useState([]),[s,a]=V.useState(!1),[o,l]=V.useState(null);V.useEffect(()=>{u()},[]);const u=async()=>{try{const m=await ke.get("/world-bible/folders");m.length>0&&n(m[0].id),d()}catch(m){console.error("Init error:",m)}},d=async()=>{a(!0);try{const m=await ke.get("/world-bible/templates/global");i(m)}catch(m){console.error("Error loading templates:",m)}finally{a(!1)}},p=async m=>{if(e)try{await ke.post(`/world-bible/folders/${e}/templates`,{nombre:m.label,tipo:m.type,required:m.required,metadata:m.metadata?JSON.stringify(m.metadata):null,global:!0}),d()}catch(y){console.error("Error creating template:",y)}},h=async()=>{if(o)try{await ke.delete(`/world-bible/templates/${o}`),i(m=>m.filter(y=>y.id!==o))}catch(m){console.error("Error deleting template:",m)}finally{l(null)}};return c.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4 duration-500",children:[c.jsxs(ft,{className:`${t?"p-4 bg-transparent border-none shadow-none":"p-8 space-y-8"}`,children:[c.jsx("header",{className:`flex ${t?"flex-col gap-4":"justify-between items-center"}`,children:c.jsxs("div",{children:[c.jsx("h3",{className:`${t?"text-sm":"text-xl"} font-bold text-white`,children:"Atributos Globales"}),c.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Define atributos disponibles para todas las entidades."})]})}),c.jsxs("div",{className:"space-y-4",children:[s?c.jsx("div",{className:"text-center p-4 text-slate-500",children:"Cargando plantillas..."}):r.map((m,y)=>c.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-2xl bg-white/[0.02] border border-white/5 hover:border-primary/50 hover:bg-white/5 transition-all cursor-grab active:cursor-grabbing group select-none",draggable:!0,onDragStart:x=>{x.dataTransfer.setData("application/reactflow/type","attribute"),x.dataTransfer.setData("templateId",m.id),x.dataTransfer.setData("templateData",JSON.stringify(m)),x.dataTransfer.effectAllowed="copy"},children:[c.jsxs("span",{className:"text-[10px] font-black text-slate-700 w-6 group-hover:text-primary transition-colors",children:["0",y+1]}),c.jsxs("div",{className:"flex-1 pointer-events-none",children:[c.jsx("div",{className:"text-sm font-bold text-white",children:m.nombre}),c.jsxs("div",{className:"text-[10px] text-slate-500 uppercase tracking-widest",children:[m.tipo," ",m.esObligatorio&&" Required"]}),m.metadata&&c.jsx("div",{className:"text-[10px] text-slate-600 font-mono mt-1 truncate",children:m.metadata})]}),c.jsx("button",{onClick:()=>l(m.id),className:"p-1.5 text-slate-500 hover:text-red-500 hover:bg-red-500/10 rounded-lg transition-colors",title:"Eliminar Plantilla Global",children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]},m.id)),c.jsx(H$,{onAdd:p})]})]}),c.jsx(Eh,{isOpen:!!o,onClose:()=>l(null),onConfirm:h,title:"Eliminar Plantilla",message:"Ests seguro de que quieres eliminar esta plantilla? Esta accin es irreversible.",confirmText:"Eliminar",type:"danger"})]})},H$=({onAdd:t})=>{const[e,n]=V.useState(""),[r,i]=V.useState("text"),[s,a]=V.useState(!1),[o,l]=V.useState([""]),u=()=>l([...o,""]),d=m=>l(o.filter((y,x)=>x!==m)),p=(m,y)=>{const x=[...o];x[m]=y,l(x)},h=()=>{if(!e)return;let m=null;["select","multi_select"].includes(r)&&(m={options:o.filter(y=>y.trim())}),t({label:e,type:r,required:s,metadata:m}),n(""),l([""])};return c.jsxs("div",{className:"p-4 rounded-2xl border-2 border-dashed border-white/10 bg-white/[0.01] space-y-4",children:[c.jsx("h4",{className:"text-xs font-black uppercase tracking-widest text-primary",children:"Add New Attribute"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx("input",{placeholder:"Field Name",value:e,onChange:m=>n(m.target.value),className:"bg-black/20 border border-white/5 rounded-xl px-4 py-2 text-xs text-white outline-none focus:border-primary/30 min-w-0"}),c.jsxs("select",{value:r,onChange:m=>i(m.target.value),className:"bg-black/20 border border-white/5 rounded-xl px-4 py-2 text-xs text-white outline-none",children:[c.jsx("option",{value:"text",children:"Text (Long)"}),c.jsx("option",{value:"short_text",children:"Text (Short)"}),c.jsx("option",{value:"number",children:"Number"}),c.jsx("option",{value:"date",children:"Date"}),c.jsx("option",{value:"select",children:"Single Selection (Dropdown)"}),c.jsx("option",{value:"multi_select",children:"Multiple Selection"}),c.jsx("option",{value:"boolean",children:"Switch (True/False)"})]})]}),["select","multi_select"].includes(r)&&c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Options"}),c.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto pr-2 custom-scrollbar",children:o.map((m,y)=>c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{placeholder:`Option ${y+1}`,value:m,onChange:x=>p(y,x.target.value),className:"flex-1 bg-black/20 border border-white/5 rounded-lg px-3 py-1.5 text-xs text-white outline-none focus:border-primary/30"}),c.jsx("button",{onClick:()=>d(y),className:"p-1.5 hover:bg-red-500/20 text-slate-500 hover:text-red-400 rounded-lg transition-colors",children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:"close"})})]},y))}),c.jsx("button",{onClick:u,className:"w-full py-1.5 text-[10px] font-bold uppercase tracking-widest text-primary hover:bg-primary/5 rounded-lg border border-dashed border-primary/20 transition-all",children:"+ Add Custom Option"})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:s,onChange:m=>a(m.target.checked),className:"size-4 rounded border-white/10 bg-white/5 accent-primary"}),c.jsx("span",{className:"text-[10px] font-bold text-slate-500",children:"Required Field"})]}),c.jsx("button",{onClick:h,className:"px-4 py-2 bg-primary/20 text-primary rounded-lg text-xs font-bold hover:bg-primary/30 transition-all",children:"+ Add Field"})]})]})},qE=({projectName:t,storageKey:e})=>{const[n,r]=V.useState([]),[i,s]=V.useState(!1),[a,o]=V.useState(null),l=()=>e||`notes_v2_${t}`;V.useEffect(()=>{const w=l();if(!w)return;const b=localStorage.getItem(w);if(b)r(JSON.parse(b));else if(!e){const N=localStorage.getItem(`notes_${t}`);if(N){const E={id:Date.now(),title:"Nota General",content:N};r([E]),localStorage.setItem(w,JSON.stringify([E]))}}},[t,e]);const u=w=>{r(w);const b=l();b&&localStorage.setItem(b,JSON.stringify(w))},d=()=>{const w={id:Date.now(),title:"Nueva Nota",content:""};u([...n,w]),o(w.id)},[p,h]=V.useState(null),m=w=>{h(w)},y=()=>{p&&(u(n.filter(w=>w.id!==p)),h(null))},x=(w,b,N)=>{u(n.map(E=>E.id===w?{...E,[b]:N}:E))},_=()=>s(!i),v=()=>c.jsxs("div",{className:`flex flex-col h-full bg-surface-dark/40 ${i?"":"max-h-[25vh]"}`,children:[c.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-glass-border bg-white/5",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"material-symbols-outlined text-sm text-primary",children:"edit_note"}),c.jsxs("h3",{className:"text-[10px] font-black uppercase tracking-widest text-white",children:["Notas (",n.length,")"]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:d,className:"p-1 hover:text-primary text-text-muted transition-colors",title:"Aadir Nota",children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"})}),c.jsx("button",{onClick:_,className:"p-1 hover:text-white text-text-muted transition-colors",title:"Pantalla Completa",children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:i?"fullscreen_exit":"fullscreen"})})]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2 space-y-2",children:n.length===0?c.jsx("div",{className:"py-8 text-center opacity-30 italic text-[10px] uppercase font-bold",children:"Sin notas"}):n.map(w=>c.jsxs("div",{className:"group bg-white/5 border border-glass-border rounded-xl overflow-hidden hover:border-primary/30 transition-all",children:[c.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-white/5",children:[c.jsx("input",{className:"bg-transparent border-none text-[11px] font-bold text-white outline-none w-full",value:w.title,onChange:b=>x(w.id,"title",b.target.value),placeholder:"Ttulo..."}),c.jsx("button",{onClick:()=>m(w.id),className:"opacity-0 group-hover:opacity-100 p-1 text-text-muted hover:text-red-400 transition-all",children:c.jsx("span",{className:"material-symbols-outlined text-xs",children:"delete"})})]}),c.jsx("textarea",{className:"w-full bg-transparent p-3 text-xs text-white/70 outline-none resize-none min-h-[80px] custom-scrollbar",value:w.content,onChange:b=>x(w.id,"content",b.target.value),placeholder:"Escribe el contenido aqu..."})]},w.id))}),c.jsx(Eh,{isOpen:!!p,onClose:()=>h(null),onConfirm:y,title:"Eliminar Nota",message:"Ests seguro de que quieres eliminar esta nota? No se podr recuperar.",confirmText:"Eliminar",type:"danger"})]});return i?c.jsx("div",{className:"fixed inset-0 z-[100] bg-background-dark/95 backdrop-blur-md p-8 flex flex-col items-center",children:c.jsx("div",{className:"w-full max-w-4xl h-full flex flex-col border border-glass-border rounded-3xl overflow-hidden shadow-2xl bg-surface-dark",children:c.jsx(v,{})})}):c.jsx("div",{className:"h-full border border-glass-border rounded-2xl overflow-hidden",children:c.jsx(v,{})})},jl=({to:t,icon:e,label:n,collapsed:r,end:i})=>c.jsxs(r$,{to:t,end:i,className:({isActive:s})=>`
            flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all group
            ${s?"bg-primary text-white shadow-lg shadow-primary/20":"text-text-muted hover:text-white hover:bg-white/5"}
            ${r?"justify-center":""}
        `,title:r?n:"",children:[c.jsx("span",{className:"material-symbols-outlined text-xl",children:e}),!r&&c.jsx("span",{className:"text-sm font-bold tracking-wide",children:n})]}),BE=t=>{switch(t==null?void 0:t.toLowerCase()){case"text":return"notes";case"short_text":return"short_text";case"number":return"pin";case"date":return"calendar_today";case"select":return"list";case"boolean":return"check_box";case"map":return"map";case"timeline":return"timeline";case"character":case"entidadindividual":return"person";case"location":case"zona":case"construccion":return"location_on";case"culture":case"entidadcolectiva":return"groups";case"universe":case"galaxy":case"system":case"planet":return"public";case"entity_link":return"link";default:return"description"}},V$=()=>{console.log("ArchitectLayout Mounting");const{username:t,projectName:e,folderSlug:n}=ri();ni();const r=rc(),[i,s]=V.useState(!0),[a,o]=V.useState(!1),[l,u]=V.useState("Loading..."),[d,p]=V.useState(null),[h,m]=V.useState("NOTES"),[y,x]=V.useState(""),[_,v]=V.useState([]),[w,b]=V.useState(null),[N,E]=V.useState(null),[A,P]=V.useState({name:"",description:"",type:"regional",showGrid:!0,gridSize:50,width:800,height:600,bgImage:null}),[T,M]=V.useState(null);V.useState("identity");const[k,j]=V.useState("notes"),[O,q]=V.useState(""),[I,D]=V.useState("ALL"),U=r.pathname.includes("/bible"),W=r.pathname.includes("/writing"),[Y,H]=V.useState("index"),[B,L]=V.useState(null),[z,K]=V.useState([]),[J,ne]=V.useState("identity"),[X,G]=V.useState(null),te=(le,ue)=>{le.stopPropagation(),G(ue)},re=async()=>{if(X){try{await ke.delete(`/world-bible/templates/${X}`),v(le=>le.filter(ue=>ue.id!==X))}catch(le){console.error("Delete failed",le)}G(null)}},Q=async le=>{le.preventDefault();try{await ke.put(`/world-bible/templates/${B.id}`,B),v(ue=>ue.map(he=>he.id===B.id?B:he)),L(null)}catch(ue){console.error("Update failed",ue)}},se=`/${t}/${e}`;V.useEffect(()=>{e&&de(e);const le=()=>{e&&de(e)};return window.addEventListener("focus",le),()=>window.removeEventListener("focus",le)},[e]),V.useEffect(()=>{U&&s(!1)},[U]);const de=async le=>{try{const ue=await ke.get(`/proyectos/${le}`);ue&&(u(ue.nombreProyecto),p(ue.id))}catch(ue){console.error("Error loading project:",ue)}};return c.jsxs("div",{className:"flex h-screen w-full overflow-hidden bg-background-dark text-text-main font-sans selection:bg-primary/30",children:[c.jsxs("aside",{className:`
                    flex-none bg-surface-dark border-r border-glass-border transition-all duration-500 relative flex flex-col z-30
                    ${i?"w-80":"w-20"}
                `,children:[c.jsxs("div",{className:"h-16 flex items-center justify-center border-b border-glass-border relative",children:[i?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"size-8 rounded-lg bg-surface-light flex items-center justify-center text-primary shadow-inner",children:c.jsx("span",{className:"material-symbols-outlined",children:"auto_stories"})}),c.jsx("h2",{className:"text-sm font-black uppercase tracking-widest text-white truncate max-w-[150px]",children:l})]}):c.jsx("button",{onClick:()=>s(!0),className:"size-10 rounded-xl hover:bg-white/5 flex items-center justify-center text-text-muted hover:text-white transition-all",children:c.jsx("span",{className:"material-symbols-outlined",children:"menu"})}),i&&c.jsx("button",{onClick:()=>s(!1),className:"absolute right-4 text-text-muted hover:text-white transition-colors",children:c.jsx("span",{className:"material-symbols-outlined text-lg",children:"dock_to_left"})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar flex flex-col",children:c.jsxs("div",{className:"p-3 space-y-1",children:[c.jsx(jl,{to:se,icon:"home",label:"Dashboard",collapsed:!i,end:!0}),c.jsx(jl,{to:`${se}/bible`,icon:"menu_book",label:"World Bible",collapsed:!i}),c.jsx(jl,{to:`${se}/map`,icon:"map",label:"Atlas",collapsed:!i}),c.jsx(jl,{to:`${se}/timeline`,icon:"calendar_month",label:"Chronology",collapsed:!i}),c.jsx(jl,{to:`${se}/graph`,icon:"hub",label:"Graph",collapsed:!i}),c.jsx("div",{className:"h-px bg-glass-border my-2 mx-2 opacity-50"}),c.jsx(jl,{to:`${se}/writing`,icon:"edit_note",label:"Writing",collapsed:!i}),c.jsx(jl,{to:`${se}/settings`,icon:"settings",label:"Settings",collapsed:!i})]})}),c.jsx("footer",{className:"p-4 border-t border-glass-border",children:c.jsxs("div",{className:`flex items-center gap-3 ${!i&&"justify-center"}`,children:[c.jsx("div",{className:"size-10 rounded-full border border-glass-border p-1 bg-surface-light relative",children:c.jsx("div",{className:"w-full h-full rounded-full bg-gradient-to-br from-primary to-purple-500 flex items-center justify-center text-white font-black text-xs",children:t?t.substring(0,2).toUpperCase():"US"})}),i&&c.jsxs("div",{className:"overflow-hidden",children:[c.jsx("h4",{className:"text-xs font-bold text-white truncate",children:t||"User"}),c.jsx("p",{className:"text-[10px] text-text-muted uppercase font-black tracking-tighter",children:"Architect"})]})]})})]}),c.jsxs("main",{className:"flex-1 flex flex-col min-w-0 bg-background-dark relative",children:[c.jsx("div",{className:"h-16 w-full absolute top-0 left-0 bg-gradient-to-b from-background-dark to-transparent pointer-events-none"}),c.jsx("div",{className:"flex-1 flex overflow-hidden relative",children:c.jsx(h4,{context:{setRightPanelMode:m,setRightOpen:o,setRightPanelTitle:x,projectName:l,projectId:d,availableTemplates:_,setAvailableTemplates:v,setAddAttributeHandler:b,setCreateTemplateHandler:E,mapSettings:A,setMapSettings:P,setOnMapSettingsChange:M,entityTabs:z,setEntityTabs:K,activeEntityTab:J,setActiveEntityTab:ne,folderSearchTerm:O,setFolderSearchTerm:q,folderFilterType:I,setFolderFilterType:D}})})]}),c.jsxs("aside",{className:`
                    flex-none bg-surface-dark border-l border-glass-border transition-all duration-500 relative flex flex-col z-30
                    ${a?"w-80":"w-20"}
                `,children:[c.jsx("header",{className:"h-16 flex items-center px-6 border-b border-glass-border justify-between shrink-0",children:a?c.jsxs(c.Fragment,{children:[h==="CUSTOM"&&!W?c.jsx("h2",{className:"text-xs font-black uppercase tracking-widest text-primary",children:y||"Panel"}):W?c.jsxs("div",{className:"flex bg-white/5 rounded-lg p-1 gap-1 w-full mr-4",children:[c.jsx("button",{onClick:()=>H("index"),className:`flex-1 py-1 rounded-md text-[10px] uppercase font-bold transition-all ${Y==="index"?"bg-primary text-white shadow":"text-slate-500 hover:text-white"}`,children:"ndice"}),c.jsx("button",{onClick:()=>H("notes"),className:`flex-1 py-1 rounded-md text-[10px] uppercase font-bold transition-all ${Y==="notes"?"bg-primary text-white shadow":"text-slate-500 hover:text-white"}`,children:"Notas"})]}):U&&h==="NOTES"?c.jsxs("div",{className:"flex bg-white/5 rounded-lg p-1 gap-1",children:[c.jsx("button",{onClick:()=>j("notes"),className:`px-3 py-1 rounded-md text-[10px] uppercase font-bold transition-all ${k==="notes"?"bg-primary text-white shadow":"text-slate-500 hover:text-white"}`,children:"Notas"}),c.jsx("button",{onClick:()=>j("templates"),className:`px-3 py-1 rounded-md text-[10px] uppercase font-bold transition-all ${k==="templates"?"bg-primary text-white shadow":"text-slate-500 hover:text-white"}`,children:"Plantillas"}),c.jsx("button",{onClick:()=>j("filters"),className:`px-3 py-1 rounded-md text-[10px] uppercase font-bold transition-all ${k==="filters"?"bg-primary text-white shadow":"text-slate-500 hover:text-white"}`,children:"Explorar"})]}):c.jsx("h2",{className:"text-xs font-black uppercase tracking-widest text-white",children:y||(h==="NOTES"?"Notas Globales":"Constructor")}),c.jsx("button",{onClick:()=>o(!1),className:"text-text-muted hover:text-white transition-colors shrink-0",children:c.jsx("span",{className:"material-symbols-outlined text-lg",children:"dock_to_right"})})]}):c.jsx("button",{onClick:()=>o(!0),className:"w-full h-full flex items-center justify-center text-text-muted hover:text-white transition-colors",children:c.jsx("span",{className:"material-symbols-outlined",children:h==="NOTES"||W?"edit_note":h==="MAP"?"map":h==="CUSTOM"?"build":"handyman"})})}),c.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar p-0",children:a?W?c.jsxs(c.Fragment,{children:[c.jsx("div",{id:"architect-right-panel-portal",className:`h-full relative flex flex-col ${Y==="index"?"block":"hidden"}`}),c.jsx("div",{className:`h-full p-4 overflow-hidden ${Y==="notes"?"block":"hidden"}`,children:c.jsx(qE,{projectName:e})})]}):h==="CUSTOM"?c.jsx("div",{id:"architect-right-panel-portal",className:"h-full relative flex flex-col"}):h==="NOTES"?k==="templates"&&U?c.jsx("div",{className:"h-full overflow-y-auto no-scrollbar",children:c.jsx(FE,{compact:!0})}):k==="filters"&&U?c.jsxs("div",{className:"h-full p-6 space-y-6 animate-in fade-in slide-in-from-right-4",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-text-muted",children:"Bsqueda"}),c.jsxs("div",{className:"bg-black/20 border border-white/10 rounded-xl p-3 flex items-center gap-2 focus-within:border-primary transition-colors",children:[c.jsx("span",{className:"material-symbols-outlined text-slate-500",children:"search"}),c.jsx("input",{value:O,onChange:le=>q(le.target.value),placeholder:"Buscar entidad...",className:"bg-transparent border-none outline-none text-sm text-white w-full placeholder-slate-600"}),O&&c.jsx("button",{onClick:()=>q(""),className:"text-slate-500 hover:text-white",children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:"close"})})]})]}),c.jsx("div",{className:"h-px bg-glass-border"}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-text-muted",children:"Filtrar por Tipo"}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{id:"ALL",label:"Todos",icon:"grid_view"},{id:"ENTITY",label:"Entidades",icon:"person"},{id:"MAP",label:"Mapas",icon:"map"},{id:"TIMELINE",label:"Timelines",icon:"timeline"}].map(le=>c.jsxs("button",{onClick:()=>D(le.id),className:`
                                                        p-3 rounded-xl border flex flex-col items-center gap-2 transition-all
                                                        ${I===le.id?"bg-primary text-white border-primary shadow-lg shadow-primary/20":"bg-white/5 border-transparent text-slate-500 hover:bg-white/10 hover:text-white"}
                                                    `,children:[c.jsx("span",{className:"material-symbols-outlined",children:le.icon}),c.jsx("span",{className:"text-[10px] font-bold uppercase",children:le.label})]},le.id))})]})]}):c.jsx("div",{className:"h-full p-4 overflow-hidden",children:c.jsx(qE,{projectName:e})}):h==="MAP"?c.jsxs("div",{className:"p-6 space-y-8 animate-in fade-in slide-in-from-right-4",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-text-muted",children:"Grid System"}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:A.showGrid,onChange:le=>{const ue={...A,showGrid:le.target.checked};P(ue),T&&T(ue)},className:"sr-only peer"}),c.jsx("div",{className:"w-9 h-5 bg-white/10 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-primary"})]})]}),c.jsxs("div",{className:`space-y-2 transition-opacity ${A.showGrid?"opacity-100":"opacity-30 pointer-events-none"}`,children:[c.jsxs("div",{className:"flex justify-between text-xs font-bold text-white",children:[c.jsx("span",{children:"Size"}),c.jsxs("span",{className:"font-mono text-primary",children:[A.gridSize,"px"]})]}),c.jsx("input",{type:"range",min:"10",max:"200",step:"10",value:A.gridSize,onChange:le=>{const ue={...A,gridSize:parseInt(le.target.value)};P(ue),T&&T(ue)},className:"w-full h-1 bg-white/10 rounded-lg appearance-none cursor-pointer accent-primary"})]})]}),c.jsx("div",{className:"h-px bg-glass-border"}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-text-muted",children:"Canvas Data"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500",children:"Width (px)"}),c.jsx("input",{type:"number",value:A.width,onChange:le=>{const ue={...A,width:parseInt(le.target.value)};P(ue),T&&T(ue)},className:"w-full bg-black/20 border border-white/10 rounded-lg p-2 text-white text-right font-mono text-sm focus:border-primary outline-none"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500",children:"Height (px)"}),c.jsx("input",{type:"number",value:A.height,onChange:le=>{const ue={...A,height:parseInt(le.target.value)};P(ue),T&&T(ue)},className:"w-full bg-black/20 border border-white/10 rounded-lg p-2 text-white text-right font-mono text-sm focus:border-primary outline-none"})]})]})]})]}):h==="ENTITY"?c.jsxs("div",{className:"flex flex-col h-full animate-in fade-in slide-in-from-right-4",children:[c.jsx("div",{className:"p-4 border-b border-glass-border",children:c.jsx("div",{className:"bg-black/40 p-1 rounded-xl flex",children:z.map(le=>{const ue=he=>{switch(he.toLowerCase()){case"identity":return"badge";case"narrative":return"auto_stories";case"attributes":return"tune";case"notes":return"edit_note";default:return"circle"}};return c.jsxs("button",{onClick:()=>ne(le),className:`
                                                        flex-1 py-2 rounded-lg transition-all group relative flex items-center justify-center
                                                        ${J===le?"bg-primary text-white shadow-lg":"text-text-muted hover:text-white hover:bg-white/5"}
                                                    `,title:le,children:[c.jsx("span",{className:"material-symbols-outlined text-lg",children:ue(le)}),c.jsx("span",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 bg-black/90 text-white text-[10px] uppercase font-bold px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-50",children:le})]},le)})})}),J==="attributes"&&c.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col bg-black/20",children:[c.jsxs("div",{className:"px-6 py-4 text-[10px] font-black uppercase text-slate-500 tracking-widest flex items-center gap-2",children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"drag_indicator"})," Drag Attributes"]}),c.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar px-2",children:c.jsx(FE,{compact:!0,initialFolderSlug:n})})]})]}):h==="TOOLBOX"?c.jsx("div",{className:"p-4 space-y-6",children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("h3",{className:"text-[10px] font-black uppercase tracking-widest text-text-muted px-2 flex justify-between items-center",children:[c.jsx("span",{children:"Plantillas Disponibles"}),c.jsx("button",{className:"text-primary hover:text-white transition-colors",title:"Crear Nueva Plantilla",onClick:()=>N&&N(),children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"})})]}),_.length===0?c.jsx("div",{className:"p-6 text-center border border-dashed border-glass-border rounded-2xl opacity-30",children:c.jsx("p",{className:"text-[10px] uppercase font-bold",children:"Sin Plantillas"})}):_.map(le=>c.jsxs("button",{className:"w-full flex items-center gap-3 p-3 rounded-2xl bg-white/5 border border-glass-border hover:border-primary/50 hover:bg-primary/5 transition-all text-left group relative",draggable:!0,onDragStart:ue=>{ue.dataTransfer.setData("application/reactflow/type","attribute"),ue.dataTransfer.setData("templateId",le.id),ue.dataTransfer.effectAllowed="move"},onClick:()=>w&&w(le.id),children:[le.global&&c.jsx("span",{className:"absolute top-2 right-2 flex size-2 bg-blue-500 rounded-full shadow-lg shadow-blue-500/50",title:"Global"}),c.jsx("div",{className:"size-8 rounded-lg bg-surface-light flex items-center justify-center text-primary group-hover:scale-110 transition-transform",children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:BE(le.tipo)})}),c.jsxs("div",{className:"overflow-hidden",children:[c.jsx("p",{className:"text-xs font-bold text-white truncate",children:le.nombre}),c.jsx("p",{className:"text-[10px] text-text-muted uppercase font-black tracking-tighter",children:le.tipo})]}),c.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("div",{onClick:ue=>{ue.stopPropagation(),L(le)},className:"p-1 hover:text-white text-text-muted hover:bg-white/10 rounded cursor-pointer",title:"Edit",children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"})}),c.jsx("div",{onClick:ue=>te(ue,le.id),className:"p-1 hover:text-red-400 text-text-muted hover:bg-white/10 rounded cursor-pointer",title:"Delete",children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]})]},le.id))]})}):c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-text-muted opacity-50",children:[c.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"dashboard"}),c.jsx("p",{className:"text-xs uppercase font-bold tracking-widest",children:"Select an item"})]}):c.jsx("div",{className:"flex flex-col items-center gap-4 py-4",children:h==="NOTES"?c.jsx("button",{className:"size-10 rounded-xl bg-white/5 flex items-center justify-center text-text-muted",title:"Notes",children:c.jsx("span",{className:"material-symbols-outlined text-lg",children:"edit_note"})}):_.slice(0,5).map(le=>c.jsxs("button",{className:"size-10 rounded-xl bg-white/5 flex items-center justify-center text-text-muted hover:text-white hover:bg-primary/20 transition-all relative",draggable:!0,onDragStart:ue=>{ue.dataTransfer.setData("application/reactflow/type","attribute"),ue.dataTransfer.setData("templateId",le.id)},children:[le.global&&c.jsx("span",{className:"absolute top-0 right-0 size-2 bg-blue-500 rounded-full border border-surface-dark"}),c.jsx("span",{className:"material-symbols-outlined text-lg",children:BE(le.tipo)})]},le.id))})})]}),B&&c.jsx("div",{className:"fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-surface-dark border border-glass-border rounded-2xl p-6 w-full max-w-md shadow-2xl animate-scale-in",children:[c.jsx("h3",{className:"text-xl font-black text-white mb-4",children:"Editar Plantilla"}),c.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs uppercase font-bold text-text-muted block mb-1",children:"Nombre"}),c.jsx("input",{autoFocus:!0,className:"w-full bg-black/30 border border-white/10 rounded-xl p-3 text-white focus:border-primary outline-none",value:B.nombre,onChange:le=>L({...B,nombre:le.target.value}),required:!0})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs uppercase font-bold text-text-muted block mb-1",children:"Tipo"}),c.jsxs("select",{className:"w-full bg-black/30 border border-white/10 rounded-xl p-3 text-white focus:border-primary outline-none",value:B.tipo,onChange:le=>L({...B,tipo:le.target.value}),children:[c.jsx("option",{value:"text",children:"Texto Largo"}),c.jsx("option",{value:"short_text",children:"Texto Corto"}),c.jsx("option",{value:"number",children:"Nmero"}),c.jsx("option",{value:"boolean",children:"Si/No"}),c.jsx("option",{value:"date",children:"Fecha"}),c.jsx("option",{value:"entity_link",children:"Vnculo Entidad"}),c.jsx("option",{value:"image",children:"Imagen URL"})]})]}),c.jsx("div",{className:"flex items-center",children:c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-3 bg-white/5 rounded-xl w-full hover:bg-white/10 transition-colors",children:[c.jsx("input",{type:"checkbox",checked:B.global,onChange:le=>L({...B,global:le.target.checked}),className:"accent-primary size-4"}),c.jsx("span",{className:"text-sm font-bold text-white",children:"Es Global?"})]})})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:()=>L(null),className:"px-4 py-2 text-text-muted hover:text-white font-bold transition-colors",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"px-6 py-2 bg-primary text-white rounded-xl font-bold shadow-lg shadow-primary/20 hover:scale-105 transition-transform",children:"Guardar"})]})]})]})}),c.jsx(Eh,{isOpen:!!X,onClose:()=>G(null),onConfirm:re,title:"Eliminar Plantilla",message:"Ests seguro de que quieres eliminar esta plantilla? Esta accin no se puede deshacer.",confirmText:"Eliminar",type:"danger"})]})};function _r(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=_r(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var YP={exports:{}},XP={},QP={exports:{}},ZP={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lu=V;function W$(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var K$=typeof Object.is=="function"?Object.is:W$,Y$=Lu.useState,X$=Lu.useEffect,Q$=Lu.useLayoutEffect,Z$=Lu.useDebugValue;function J$(t,e){var n=e(),r=Y$({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return Q$(function(){i.value=n,i.getSnapshot=e,dy(i)&&s({inst:i})},[t,n,e]),X$(function(){return dy(i)&&s({inst:i}),t(function(){dy(i)&&s({inst:i})})},[t]),Z$(n),n}function dy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!K$(t,n)}catch{return!0}}function eU(t,e){return e()}var tU=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?eU:J$;ZP.useSyncExternalStore=Lu.useSyncExternalStore!==void 0?Lu.useSyncExternalStore:tU;QP.exports=ZP;var nU=QP.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s0=V,rU=nU;function iU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sU=typeof Object.is=="function"?Object.is:iU,aU=rU.useSyncExternalStore,oU=s0.useRef,lU=s0.useEffect,cU=s0.useMemo,uU=s0.useDebugValue;XP.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=oU(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=cU(function(){function l(m){if(!u){if(u=!0,d=m,m=r(m),i!==void 0&&a.hasValue){var y=a.value;if(i(y,m))return p=y}return p=m}if(y=p,sU(d,m))return y;var x=r(m);return i!==void 0&&i(y,x)?(d=m,y):(d=m,p=x)}var u=!1,d,p,h=n===void 0?null:n;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,n,r,i]);var o=aU(t,s[0],s[1]);return lU(function(){a.hasValue=!0,a.value=o},[o]),uU(o),o};YP.exports=XP;var dU=YP.exports;const fU=Uo(dU),zE=t=>{let e;const n=new Set,r=(d,p)=>{const h=typeof d=="function"?d(e):d;if(!Object.is(h,e)){const m=e;e=p??(typeof h!="object"||h===null)?h:Object.assign({},e,h),n.forEach(y=>y(e,m))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{n.clear()}},u=e=t(r,i,l);return l},hU=t=>t?zE(t):zE,{useDebugValue:pU}=fe,{useSyncExternalStoreWithSelector:mU}=fU,gU=t=>t;function JP(t,e=gU,n){const r=mU(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return pU(r),r}const $E=(t,e)=>{const n=hU(t),r=(i,s=e)=>JP(n,i,s);return Object.assign(r,n),r},vU=(t,e)=>t?$E(t,e):$E;function dr(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}var yU={value:()=>{}};function a0(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Am(n)}function Am(t){this._=t}function xU(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Am.prototype=a0.prototype={constructor:Am,on:function(t,e){var n=this._,r=xU(t+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(t=r[s]).type)&&(i=bU(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(i=(t=r[s]).type)n[i]=UE(n[i],t.name,e);else if(e==null)for(i in n)n[i]=UE(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Am(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function bU(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function UE(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=yU,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var m_="http://www.w3.org/1999/xhtml";const GE={svg:"http://www.w3.org/2000/svg",xhtml:m_,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function o0(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),GE.hasOwnProperty(e)?{space:GE[e],local:t}:t}function wU(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===m_&&e.documentElement.namespaceURI===m_?e.createElement(t):e.createElementNS(n,t)}}function _U(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function eR(t){var e=o0(t);return(e.local?_U:wU)(e)}function NU(){}function g4(t){return t==null?NU:function(){return this.querySelector(t)}}function SU(t){typeof t!="function"&&(t=g4(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=new Array(a),l,u,d=0;d<a;++d)(l=s[d])&&(u=t.call(l,l.__data__,d,s))&&("__data__"in l&&(u.__data__=l.__data__),o[d]=u);return new Jr(r,this._parents)}function EU(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function kU(){return[]}function tR(t){return t==null?kU:function(){return this.querySelectorAll(t)}}function CU(t){return function(){return EU(t.apply(this,arguments))}}function jU(t){typeof t=="function"?t=CU(t):t=tR(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var a=e[s],o=a.length,l,u=0;u<o;++u)(l=a[u])&&(r.push(t.call(l,l.__data__,u,a)),i.push(l));return new Jr(r,i)}function nR(t){return function(){return this.matches(t)}}function rR(t){return function(e){return e.matches(t)}}var TU=Array.prototype.find;function AU(t){return function(){return TU.call(this.children,t)}}function OU(){return this.firstElementChild}function PU(t){return this.select(t==null?OU:AU(typeof t=="function"?t:rR(t)))}var RU=Array.prototype.filter;function LU(){return Array.from(this.children)}function IU(t){return function(){return RU.call(this.children,t)}}function MU(t){return this.selectAll(t==null?LU:IU(typeof t=="function"?t:rR(t)))}function DU(t){typeof t!="function"&&(t=nR(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=[],l,u=0;u<a;++u)(l=s[u])&&t.call(l,l.__data__,u,s)&&o.push(l);return new Jr(r,this._parents)}function iR(t){return new Array(t.length)}function FU(){return new Jr(this._enter||this._groups.map(iR),this._parents)}function hg(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}hg.prototype={constructor:hg,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function qU(t){return function(){return t}}function BU(t,e,n,r,i,s){for(var a=0,o,l=e.length,u=s.length;a<u;++a)(o=e[a])?(o.__data__=s[a],r[a]=o):n[a]=new hg(t,s[a]);for(;a<l;++a)(o=e[a])&&(i[a]=o)}function zU(t,e,n,r,i,s,a){var o,l,u=new Map,d=e.length,p=s.length,h=new Array(d),m;for(o=0;o<d;++o)(l=e[o])&&(h[o]=m=a.call(l,l.__data__,o,e)+"",u.has(m)?i[o]=l:u.set(m,l));for(o=0;o<p;++o)m=a.call(t,s[o],o,s)+"",(l=u.get(m))?(r[o]=l,l.__data__=s[o],u.delete(m)):n[o]=new hg(t,s[o]);for(o=0;o<d;++o)(l=e[o])&&u.get(h[o])===l&&(i[o]=l)}function $U(t){return t.__data__}function UU(t,e){if(!arguments.length)return Array.from(this,$U);var n=e?zU:BU,r=this._parents,i=this._groups;typeof t!="function"&&(t=qU(t));for(var s=i.length,a=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var d=r[u],p=i[u],h=p.length,m=GU(t.call(d,d&&d.__data__,u,r)),y=m.length,x=o[u]=new Array(y),_=a[u]=new Array(y),v=l[u]=new Array(h);n(d,p,x,_,v,m,e);for(var w=0,b=0,N,E;w<y;++w)if(N=x[w]){for(w>=b&&(b=w+1);!(E=_[b])&&++b<y;);N._next=E||null}}return a=new Jr(a,r),a._enter=o,a._exit=l,a}function GU(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function HU(){return new Jr(this._exit||this._groups.map(iR),this._parents)}function VU(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function WU(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,a=Math.min(i,s),o=new Array(i),l=0;l<a;++l)for(var u=n[l],d=r[l],p=u.length,h=o[l]=new Array(p),m,y=0;y<p;++y)(m=u[y]||d[y])&&(h[y]=m);for(;l<i;++l)o[l]=n[l];return new Jr(o,this._parents)}function KU(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function YU(t){t||(t=XU);function e(p,h){return p&&h?t(p.__data__,h.__data__):!p-!h}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a=n[s],o=a.length,l=i[s]=new Array(o),u,d=0;d<o;++d)(u=a[d])&&(l[d]=u);l.sort(e)}return new Jr(i,this._parents).order()}function XU(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function QU(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ZU(){return Array.from(this)}function JU(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function eG(){let t=0;for(const e of this)++t;return t}function tG(){return!this.node()}function nG(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,a=i.length,o;s<a;++s)(o=i[s])&&t.call(o,o.__data__,s,i);return this}function rG(t){return function(){this.removeAttribute(t)}}function iG(t){return function(){this.removeAttributeNS(t.space,t.local)}}function sG(t,e){return function(){this.setAttribute(t,e)}}function aG(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function oG(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function lG(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function cG(t,e){var n=o0(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?iG:rG:typeof e=="function"?n.local?lG:oG:n.local?aG:sG)(n,e))}function sR(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function uG(t){return function(){this.style.removeProperty(t)}}function dG(t,e,n){return function(){this.style.setProperty(t,e,n)}}function fG(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function hG(t,e,n){return arguments.length>1?this.each((e==null?uG:typeof e=="function"?fG:dG)(t,e,n??"")):Iu(this.node(),t)}function Iu(t,e){return t.style.getPropertyValue(e)||sR(t).getComputedStyle(t,null).getPropertyValue(e)}function pG(t){return function(){delete this[t]}}function mG(t,e){return function(){this[t]=e}}function gG(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function vG(t,e){return arguments.length>1?this.each((e==null?pG:typeof e=="function"?gG:mG)(t,e)):this.node()[t]}function aR(t){return t.trim().split(/^|\s+/)}function v4(t){return t.classList||new oR(t)}function oR(t){this._node=t,this._names=aR(t.getAttribute("class")||"")}oR.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function lR(t,e){for(var n=v4(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function cR(t,e){for(var n=v4(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function yG(t){return function(){lR(this,t)}}function xG(t){return function(){cR(this,t)}}function bG(t,e){return function(){(e.apply(this,arguments)?lR:cR)(this,t)}}function wG(t,e){var n=aR(t+"");if(arguments.length<2){for(var r=v4(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?bG:e?yG:xG)(n,e))}function _G(){this.textContent=""}function NG(t){return function(){this.textContent=t}}function SG(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function EG(t){return arguments.length?this.each(t==null?_G:(typeof t=="function"?SG:NG)(t)):this.node().textContent}function kG(){this.innerHTML=""}function CG(t){return function(){this.innerHTML=t}}function jG(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function TG(t){return arguments.length?this.each(t==null?kG:(typeof t=="function"?jG:CG)(t)):this.node().innerHTML}function AG(){this.nextSibling&&this.parentNode.appendChild(this)}function OG(){return this.each(AG)}function PG(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function RG(){return this.each(PG)}function LG(t){var e=typeof t=="function"?t:eR(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function IG(){return null}function MG(t,e){var n=typeof t=="function"?t:eR(t),r=e==null?IG:typeof e=="function"?e:g4(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function DG(){var t=this.parentNode;t&&t.removeChild(this)}function FG(){return this.each(DG)}function qG(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function BG(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function zG(t){return this.select(t?BG:qG)}function $G(t){return arguments.length?this.property("__data__",t):this.node().__data__}function UG(t){return function(e){t.call(this,e,this.__data__)}}function GG(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function HG(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function VG(t,e,n){return function(){var r=this.__on,i,s=UG(e);if(r){for(var a=0,o=r.length;a<o;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function WG(t,e,n){var r=GG(t+""),i,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,u=o.length,d;l<u;++l)for(i=0,d=o[l];i<s;++i)if((a=r[i]).type===d.type&&a.name===d.name)return d.value}return}for(o=e?VG:HG,i=0;i<s;++i)this.each(o(r[i],e,n));return this}function uR(t,e,n){var r=sR(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function KG(t,e){return function(){return uR(this,t,e)}}function YG(t,e){return function(){return uR(this,t,e.apply(this,arguments))}}function XG(t,e){return this.each((typeof e=="function"?YG:KG)(t,e))}function*QG(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,a;i<s;++i)(a=r[i])&&(yield a)}var dR=[null];function Jr(t,e){this._groups=t,this._parents=e}function kh(){return new Jr([[document.documentElement]],dR)}function ZG(){return this}Jr.prototype=kh.prototype={constructor:Jr,select:SU,selectAll:jU,selectChild:PU,selectChildren:MU,filter:DU,data:UU,enter:FU,exit:HU,join:VU,merge:WU,selection:ZG,order:KU,sort:YU,call:QU,nodes:ZU,node:JU,size:eG,empty:tG,each:nG,attr:cG,style:hG,property:vG,classed:wG,text:EG,html:TG,raise:OG,lower:RG,append:LG,insert:MG,remove:FG,clone:zG,datum:$G,on:WG,dispatch:XG,[Symbol.iterator]:QG};function Wi(t){return typeof t=="string"?new Jr([[document.querySelector(t)]],[document.documentElement]):new Jr([[t]],dR)}function JG(t){let e;for(;e=t.sourceEvent;)t=e;return t}function ks(t,e){if(t=JG(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const eH={passive:!1},eh={capture:!0,passive:!1};function fy(t){t.stopImmediatePropagation()}function xu(t){t.preventDefault(),t.stopImmediatePropagation()}function fR(t){var e=t.document.documentElement,n=Wi(t).on("dragstart.drag",xu,eh);"onselectstart"in e?n.on("selectstart.drag",xu,eh):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function hR(t,e){var n=t.document.documentElement,r=Wi(t).on("dragstart.drag",null);e&&(r.on("click.drag",xu,eh),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Wp=t=>()=>t;function g_(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:s,x:a,y:o,dx:l,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}g_.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function tH(t){return!t.ctrlKey&&!t.button}function nH(){return this.parentNode}function rH(t,e){return e??{x:t.x,y:t.y}}function iH(){return navigator.maxTouchPoints||"ontouchstart"in this}function sH(){var t=tH,e=nH,n=rH,r=iH,i={},s=a0("start","drag","end"),a=0,o,l,u,d,p=0;function h(N){N.on("mousedown.drag",m).filter(r).on("touchstart.drag",_).on("touchmove.drag",v,eH).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(N,E){if(!(d||!t.call(this,N,E))){var A=b(this,e.call(this,N,E),N,E,"mouse");A&&(Wi(N.view).on("mousemove.drag",y,eh).on("mouseup.drag",x,eh),fR(N.view),fy(N),u=!1,o=N.clientX,l=N.clientY,A("start",N))}}function y(N){if(xu(N),!u){var E=N.clientX-o,A=N.clientY-l;u=E*E+A*A>p}i.mouse("drag",N)}function x(N){Wi(N.view).on("mousemove.drag mouseup.drag",null),hR(N.view,u),xu(N),i.mouse("end",N)}function _(N,E){if(t.call(this,N,E)){var A=N.changedTouches,P=e.call(this,N,E),T=A.length,M,k;for(M=0;M<T;++M)(k=b(this,P,N,E,A[M].identifier,A[M]))&&(fy(N),k("start",N,A[M]))}}function v(N){var E=N.changedTouches,A=E.length,P,T;for(P=0;P<A;++P)(T=i[E[P].identifier])&&(xu(N),T("drag",N,E[P]))}function w(N){var E=N.changedTouches,A=E.length,P,T;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),P=0;P<A;++P)(T=i[E[P].identifier])&&(fy(N),T("end",N,E[P]))}function b(N,E,A,P,T,M){var k=s.copy(),j=ks(M||A,E),O,q,I;if((I=n.call(N,new g_("beforestart",{sourceEvent:A,target:h,identifier:T,active:a,x:j[0],y:j[1],dx:0,dy:0,dispatch:k}),P))!=null)return O=I.x-j[0]||0,q=I.y-j[1]||0,function D(U,W,Y){var H=j,B;switch(U){case"start":i[T]=D,B=a++;break;case"end":delete i[T],--a;case"drag":j=ks(Y||W,E),B=a;break}k.call(U,N,new g_(U,{sourceEvent:W,subject:I,target:h,identifier:T,active:B,x:j[0]+O,y:j[1]+q,dx:j[0]-H[0],dy:j[1]-H[1],dispatch:k}),P)}}return h.filter=function(N){return arguments.length?(t=typeof N=="function"?N:Wp(!!N),h):t},h.container=function(N){return arguments.length?(e=typeof N=="function"?N:Wp(N),h):e},h.subject=function(N){return arguments.length?(n=typeof N=="function"?N:Wp(N),h):n},h.touchable=function(N){return arguments.length?(r=typeof N=="function"?N:Wp(!!N),h):r},h.on=function(){var N=s.on.apply(s,arguments);return N===s?h:N},h.clickDistance=function(N){return arguments.length?(p=(N=+N)*N,h):Math.sqrt(p)},h}function y4(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function pR(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ch(){}var th=.7,pg=1/th,bu="\\s*([+-]?\\d+)\\s*",nh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ps="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",aH=/^#([0-9a-f]{3,8})$/,oH=new RegExp(`^rgb\\(${bu},${bu},${bu}\\)$`),lH=new RegExp(`^rgb\\(${Ps},${Ps},${Ps}\\)$`),cH=new RegExp(`^rgba\\(${bu},${bu},${bu},${nh}\\)$`),uH=new RegExp(`^rgba\\(${Ps},${Ps},${Ps},${nh}\\)$`),dH=new RegExp(`^hsl\\(${nh},${Ps},${Ps}\\)$`),fH=new RegExp(`^hsla\\(${nh},${Ps},${Ps},${nh}\\)$`),HE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};y4(Ch,rh,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:VE,formatHex:VE,formatHex8:hH,formatHsl:pH,formatRgb:WE,toString:WE});function VE(){return this.rgb().formatHex()}function hH(){return this.rgb().formatHex8()}function pH(){return mR(this).formatHsl()}function WE(){return this.rgb().formatRgb()}function rh(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=aH.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?KE(e):n===3?new Ir(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Kp(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Kp(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=oH.exec(t))?new Ir(e[1],e[2],e[3],1):(e=lH.exec(t))?new Ir(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=cH.exec(t))?Kp(e[1],e[2],e[3],e[4]):(e=uH.exec(t))?Kp(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=dH.exec(t))?QE(e[1],e[2]/100,e[3]/100,1):(e=fH.exec(t))?QE(e[1],e[2]/100,e[3]/100,e[4]):HE.hasOwnProperty(t)?KE(HE[t]):t==="transparent"?new Ir(NaN,NaN,NaN,0):null}function KE(t){return new Ir(t>>16&255,t>>8&255,t&255,1)}function Kp(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ir(t,e,n,r)}function mH(t){return t instanceof Ch||(t=rh(t)),t?(t=t.rgb(),new Ir(t.r,t.g,t.b,t.opacity)):new Ir}function v_(t,e,n,r){return arguments.length===1?mH(t):new Ir(t,e,n,r??1)}function Ir(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}y4(Ir,v_,pR(Ch,{brighter(t){return t=t==null?pg:Math.pow(pg,t),new Ir(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?th:Math.pow(th,t),new Ir(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ir(Ul(this.r),Ul(this.g),Ul(this.b),mg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:YE,formatHex:YE,formatHex8:gH,formatRgb:XE,toString:XE}));function YE(){return`#${Dl(this.r)}${Dl(this.g)}${Dl(this.b)}`}function gH(){return`#${Dl(this.r)}${Dl(this.g)}${Dl(this.b)}${Dl((isNaN(this.opacity)?1:this.opacity)*255)}`}function XE(){const t=mg(this.opacity);return`${t===1?"rgb(":"rgba("}${Ul(this.r)}, ${Ul(this.g)}, ${Ul(this.b)}${t===1?")":`, ${t})`}`}function mg(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ul(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Dl(t){return t=Ul(t),(t<16?"0":"")+t.toString(16)}function QE(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ki(t,e,n,r)}function mR(t){if(t instanceof Ki)return new Ki(t.h,t.s,t.l,t.opacity);if(t instanceof Ch||(t=rh(t)),!t)return new Ki;if(t instanceof Ki)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,o=s-i,l=(s+i)/2;return o?(e===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-e)/o+2:a=(e-n)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new Ki(a,o,l,t.opacity)}function vH(t,e,n,r){return arguments.length===1?mR(t):new Ki(t,e,n,r??1)}function Ki(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}y4(Ki,vH,pR(Ch,{brighter(t){return t=t==null?pg:Math.pow(pg,t),new Ki(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?th:Math.pow(th,t),new Ki(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Ir(hy(t>=240?t-240:t+120,i,r),hy(t,i,r),hy(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Ki(ZE(this.h),Yp(this.s),Yp(this.l),mg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=mg(this.opacity);return`${t===1?"hsl(":"hsla("}${ZE(this.h)}, ${Yp(this.s)*100}%, ${Yp(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ZE(t){return t=(t||0)%360,t<0?t+360:t}function Yp(t){return Math.max(0,Math.min(1,t||0))}function hy(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const gR=t=>()=>t;function yH(t,e){return function(n){return t+n*e}}function xH(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function bH(t){return(t=+t)==1?vR:function(e,n){return n-e?xH(e,n,t):gR(isNaN(e)?n:e)}}function vR(t,e){var n=e-t;return n?yH(t,n):gR(isNaN(t)?e:t)}const JE=function t(e){var n=bH(e);function r(i,s){var a=n((i=v_(i)).r,(s=v_(s)).r),o=n(i.g,s.g),l=n(i.b,s.b),u=vR(i.opacity,s.opacity);return function(d){return i.r=a(d),i.g=o(d),i.b=l(d),i.opacity=u(d),i+""}}return r.gamma=t,r}(1);function ho(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var y_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,py=new RegExp(y_.source,"g");function wH(t){return function(){return t}}function _H(t){return function(e){return t(e)+""}}function NH(t,e){var n=y_.lastIndex=py.lastIndex=0,r,i,s,a=-1,o=[],l=[];for(t=t+"",e=e+"";(r=y_.exec(t))&&(i=py.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:ho(r,i)})),n=py.lastIndex;return n<e.length&&(s=e.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?_H(l[0].x):wH(e):(e=l.length,function(u){for(var d=0,p;d<e;++d)o[(p=l[d]).i]=p.x(u);return o.join("")})}var e8=180/Math.PI,x_={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function yR(t,e,n,r,i,s){var a,o,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,l/=o),t*r<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*e8,skewX:Math.atan(l)*e8,scaleX:a,scaleY:o}}var Xp;function SH(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?x_:yR(e.a,e.b,e.c,e.d,e.e,e.f)}function EH(t){return t==null||(Xp||(Xp=document.createElementNS("http://www.w3.org/2000/svg","g")),Xp.setAttribute("transform",t),!(t=Xp.transform.baseVal.consolidate()))?x_:(t=t.matrix,yR(t.a,t.b,t.c,t.d,t.e,t.f))}function xR(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function s(u,d,p,h,m,y){if(u!==p||d!==h){var x=m.push("translate(",null,e,null,n);y.push({i:x-4,x:ho(u,p)},{i:x-2,x:ho(d,h)})}else(p||h)&&m.push("translate("+p+e+h+n)}function a(u,d,p,h){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),h.push({i:p.push(i(p)+"rotate(",null,r)-2,x:ho(u,d)})):d&&p.push(i(p)+"rotate("+d+r)}function o(u,d,p,h){u!==d?h.push({i:p.push(i(p)+"skewX(",null,r)-2,x:ho(u,d)}):d&&p.push(i(p)+"skewX("+d+r)}function l(u,d,p,h,m,y){if(u!==p||d!==h){var x=m.push(i(m)+"scale(",null,",",null,")");y.push({i:x-4,x:ho(u,p)},{i:x-2,x:ho(d,h)})}else(p!==1||h!==1)&&m.push(i(m)+"scale("+p+","+h+")")}return function(u,d){var p=[],h=[];return u=t(u),d=t(d),s(u.translateX,u.translateY,d.translateX,d.translateY,p,h),a(u.rotate,d.rotate,p,h),o(u.skewX,d.skewX,p,h),l(u.scaleX,u.scaleY,d.scaleX,d.scaleY,p,h),u=d=null,function(m){for(var y=-1,x=h.length,_;++y<x;)p[(_=h[y]).i]=_.x(m);return p.join("")}}}var kH=xR(SH,"px, ","px)","deg)"),CH=xR(EH,", ",")",")"),jH=1e-12;function t8(t){return((t=Math.exp(t))+1/t)/2}function TH(t){return((t=Math.exp(t))-1/t)/2}function AH(t){return((t=Math.exp(2*t))-1)/(t+1)}const OH=function t(e,n,r){function i(s,a){var o=s[0],l=s[1],u=s[2],d=a[0],p=a[1],h=a[2],m=d-o,y=p-l,x=m*m+y*y,_,v;if(x<jH)v=Math.log(h/u)/e,_=function(P){return[o+P*m,l+P*y,u*Math.exp(e*P*v)]};else{var w=Math.sqrt(x),b=(h*h-u*u+r*x)/(2*u*n*w),N=(h*h-u*u-r*x)/(2*h*n*w),E=Math.log(Math.sqrt(b*b+1)-b),A=Math.log(Math.sqrt(N*N+1)-N);v=(A-E)/e,_=function(P){var T=P*v,M=t8(E),k=u/(n*w)*(M*AH(e*T+E)-TH(E));return[o+k*m,l+k*y,u*M/t8(e*T+E)]}}return _.duration=v*1e3*e/Math.SQRT2,_}return i.rho=function(s){var a=Math.max(.001,+s),o=a*a,l=o*o;return t(a,o,l)},i}(Math.SQRT2,2,4);var Mu=0,uf=0,Gd=0,bR=1e3,gg,df,vg=0,Xl=0,l0=0,ih=typeof performance=="object"&&performance.now?performance:Date,wR=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function x4(){return Xl||(wR(PH),Xl=ih.now()+l0)}function PH(){Xl=0}function yg(){this._call=this._time=this._next=null}yg.prototype=_R.prototype={constructor:yg,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?x4():+n)+(e==null?0:+e),!this._next&&df!==this&&(df?df._next=this:gg=this,df=this),this._call=t,this._time=n,b_()},stop:function(){this._call&&(this._call=null,this._time=1/0,b_())}};function _R(t,e,n){var r=new yg;return r.restart(t,e,n),r}function RH(){x4(),++Mu;for(var t=gg,e;t;)(e=Xl-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Mu}function n8(){Xl=(vg=ih.now())+l0,Mu=uf=0;try{RH()}finally{Mu=0,IH(),Xl=0}}function LH(){var t=ih.now(),e=t-vg;e>bR&&(l0-=e,vg=t)}function IH(){for(var t,e=gg,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:gg=n);df=t,b_(r)}function b_(t){if(!Mu){uf&&(uf=clearTimeout(uf));var e=t-Xl;e>24?(t<1/0&&(uf=setTimeout(n8,t-ih.now()-l0)),Gd&&(Gd=clearInterval(Gd))):(Gd||(vg=ih.now(),Gd=setInterval(LH,bR)),Mu=1,wR(n8))}}function r8(t,e,n){var r=new yg;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var MH=a0("start","end","cancel","interrupt"),DH=[],NR=0,i8=1,w_=2,Om=3,s8=4,__=5,Pm=6;function c0(t,e,n,r,i,s){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;FH(t,n,{name:e,index:r,group:i,on:MH,tween:DH,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:NR})}function b4(t,e){var n=rs(t,e);if(n.state>NR)throw new Error("too late; already scheduled");return n}function Ds(t,e){var n=rs(t,e);if(n.state>Om)throw new Error("too late; already running");return n}function rs(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function FH(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=_R(s,0,n.time);function s(u){n.state=i8,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var d,p,h,m;if(n.state!==i8)return l();for(d in r)if(m=r[d],m.name===n.name){if(m.state===Om)return r8(a);m.state===s8?(m.state=Pm,m.timer.stop(),m.on.call("interrupt",t,t.__data__,m.index,m.group),delete r[d]):+d<e&&(m.state=Pm,m.timer.stop(),m.on.call("cancel",t,t.__data__,m.index,m.group),delete r[d])}if(r8(function(){n.state===Om&&(n.state=s8,n.timer.restart(o,n.delay,n.time),o(u))}),n.state=w_,n.on.call("start",t,t.__data__,n.index,n.group),n.state===w_){for(n.state=Om,i=new Array(h=n.tween.length),d=0,p=-1;d<h;++d)(m=n.tween[d].value.call(t,t.__data__,n.index,n.group))&&(i[++p]=m);i.length=p+1}}function o(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=__,1),p=-1,h=i.length;++p<h;)i[p].call(t,d);n.state===__&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=Pm,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function Rm(t,e){var n=t.__transition,r,i,s=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){s=!1;continue}i=r.state>w_&&r.state<__,r.state=Pm,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}s&&delete t.__transition}}function qH(t){return this.each(function(){Rm(this,t)})}function BH(t,e){var n,r;return function(){var i=Ds(this,t),s=i.tween;if(s!==n){r=n=s;for(var a=0,o=r.length;a<o;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function zH(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Ds(this,t),a=s.tween;if(a!==r){i=(r=a).slice();for(var o={name:e,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=o;break}l===u&&i.push(o)}s.tween=i}}function $H(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=rs(this.node(),n).tween,i=0,s=r.length,a;i<s;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?BH:zH)(n,t,e))}function w4(t,e,n){var r=t._id;return t.each(function(){var i=Ds(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return rs(i,r).value[e]}}function SR(t,e){var n;return(typeof e=="number"?ho:e instanceof rh?JE:(n=rh(e))?(e=n,JE):NH)(t,e)}function UH(t){return function(){this.removeAttribute(t)}}function GH(t){return function(){this.removeAttributeNS(t.space,t.local)}}function HH(t,e,n){var r,i=n+"",s;return function(){var a=this.getAttribute(t);return a===i?null:a===r?s:s=e(r=a,n)}}function VH(t,e,n){var r,i=n+"",s;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?s:s=e(r=a,n)}}function WH(t,e,n){var r,i,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttribute(t):(a=this.getAttribute(t),l=o+"",a===l?null:a===r&&l===i?s:(i=l,s=e(r=a,o)))}}function KH(t,e,n){var r,i,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),l=o+"",a===l?null:a===r&&l===i?s:(i=l,s=e(r=a,o)))}}function YH(t,e){var n=o0(t),r=n==="transform"?CH:SR;return this.attrTween(t,typeof e=="function"?(n.local?KH:WH)(n,r,w4(this,"attr."+t,e)):e==null?(n.local?GH:UH)(n):(n.local?VH:HH)(n,r,e))}function XH(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function QH(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function ZH(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&QH(t,s)),n}return i._value=e,i}function JH(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&XH(t,s)),n}return i._value=e,i}function eV(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=o0(t);return this.tween(n,(r.local?ZH:JH)(r,e))}function tV(t,e){return function(){b4(this,t).delay=+e.apply(this,arguments)}}function nV(t,e){return e=+e,function(){b4(this,t).delay=e}}function rV(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?tV:nV)(e,t)):rs(this.node(),e).delay}function iV(t,e){return function(){Ds(this,t).duration=+e.apply(this,arguments)}}function sV(t,e){return e=+e,function(){Ds(this,t).duration=e}}function aV(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?iV:sV)(e,t)):rs(this.node(),e).duration}function oV(t,e){if(typeof e!="function")throw new Error;return function(){Ds(this,t).ease=e}}function lV(t){var e=this._id;return arguments.length?this.each(oV(e,t)):rs(this.node(),e).ease}function cV(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Ds(this,t).ease=n}}function uV(t){if(typeof t!="function")throw new Error;return this.each(cV(this._id,t))}function dV(t){typeof t!="function"&&(t=nR(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=[],l,u=0;u<a;++u)(l=s[u])&&t.call(l,l.__data__,u,s)&&o.push(l);return new _a(r,this._parents,this._name,this._id)}function fV(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),a=new Array(r),o=0;o<s;++o)for(var l=e[o],u=n[o],d=l.length,p=a[o]=new Array(d),h,m=0;m<d;++m)(h=l[m]||u[m])&&(p[m]=h);for(;o<r;++o)a[o]=e[o];return new _a(a,this._parents,this._name,this._id)}function hV(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function pV(t,e,n){var r,i,s=hV(e)?b4:Ds;return function(){var a=s(this,t),o=a.on;o!==r&&(i=(r=o).copy()).on(e,n),a.on=i}}function mV(t,e){var n=this._id;return arguments.length<2?rs(this.node(),n).on.on(t):this.each(pV(n,t,e))}function gV(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function vV(){return this.on("end.remove",gV(this._id))}function yV(t){var e=this._name,n=this._id;typeof t!="function"&&(t=g4(t));for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a)for(var o=r[a],l=o.length,u=s[a]=new Array(l),d,p,h=0;h<l;++h)(d=o[h])&&(p=t.call(d,d.__data__,h,o))&&("__data__"in d&&(p.__data__=d.__data__),u[h]=p,c0(u[h],e,n,h,u,rs(d,n)));return new _a(s,this._parents,e,n)}function xV(t){var e=this._name,n=this._id;typeof t!="function"&&(t=tR(t));for(var r=this._groups,i=r.length,s=[],a=[],o=0;o<i;++o)for(var l=r[o],u=l.length,d,p=0;p<u;++p)if(d=l[p]){for(var h=t.call(d,d.__data__,p,l),m,y=rs(d,n),x=0,_=h.length;x<_;++x)(m=h[x])&&c0(m,e,n,x,h,y);s.push(h),a.push(d)}return new _a(s,a,e,n)}var bV=kh.prototype.constructor;function wV(){return new bV(this._groups,this._parents)}function _V(t,e){var n,r,i;return function(){var s=Iu(this,t),a=(this.style.removeProperty(t),Iu(this,t));return s===a?null:s===n&&a===r?i:i=e(n=s,r=a)}}function ER(t){return function(){this.style.removeProperty(t)}}function NV(t,e,n){var r,i=n+"",s;return function(){var a=Iu(this,t);return a===i?null:a===r?s:s=e(r=a,n)}}function SV(t,e,n){var r,i,s;return function(){var a=Iu(this,t),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(t),Iu(this,t))),a===l?null:a===r&&l===i?s:(i=l,s=e(r=a,o))}}function EV(t,e){var n,r,i,s="style."+e,a="end."+s,o;return function(){var l=Ds(this,t),u=l.on,d=l.value[s]==null?o||(o=ER(e)):void 0;(u!==n||i!==d)&&(r=(n=u).copy()).on(a,i=d),l.on=r}}function kV(t,e,n){var r=(t+="")=="transform"?kH:SR;return e==null?this.styleTween(t,_V(t,r)).on("end.style."+t,ER(t)):typeof e=="function"?this.styleTween(t,SV(t,r,w4(this,"style."+t,e))).each(EV(this._id,t)):this.styleTween(t,NV(t,r,e),n).on("end.style."+t,null)}function CV(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function jV(t,e,n){var r,i;function s(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&CV(t,a,n)),r}return s._value=e,s}function TV(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,jV(t,e,n??""))}function AV(t){return function(){this.textContent=t}}function OV(t){return function(){var e=t(this);this.textContent=e??""}}function PV(t){return this.tween("text",typeof t=="function"?OV(w4(this,"text",t)):AV(t==null?"":t+""))}function RV(t){return function(e){this.textContent=t.call(this,e)}}function LV(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&RV(i)),e}return r._value=t,r}function IV(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,LV(t))}function MV(){for(var t=this._name,e=this._id,n=kR(),r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,l,u=0;u<o;++u)if(l=a[u]){var d=rs(l,e);c0(l,t,n,u,a,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new _a(r,this._parents,t,n)}function DV(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,a){var o={value:a},l={value:function(){--i===0&&s()}};n.each(function(){var u=Ds(this,r),d=u.on;d!==t&&(e=(t=d).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),u.on=e}),i===0&&s()})}var FV=0;function _a(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function kR(){return++FV}var ra=kh.prototype;_a.prototype={constructor:_a,select:yV,selectAll:xV,selectChild:ra.selectChild,selectChildren:ra.selectChildren,filter:dV,merge:fV,selection:wV,transition:MV,call:ra.call,nodes:ra.nodes,node:ra.node,size:ra.size,empty:ra.empty,each:ra.each,on:mV,attr:YH,attrTween:eV,style:kV,styleTween:TV,text:PV,textTween:IV,remove:vV,tween:$H,delay:rV,duration:aV,ease:lV,easeVarying:uV,end:DV,[Symbol.iterator]:ra[Symbol.iterator]};function qV(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var BV={time:null,delay:0,duration:250,ease:qV};function zV(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function $V(t){var e,n;t instanceof _a?(e=t._id,t=t._name):(e=kR(),(n=BV).time=x4(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,l,u=0;u<o;++u)(l=a[u])&&c0(l,t,e,u,a,n||zV(l,e));return new _a(r,this._parents,t,e)}kh.prototype.interrupt=qH;kh.prototype.transition=$V;const Qp=t=>()=>t;function UV(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function ha(t,e,n){this.k=t,this.x=e,this.y=n}ha.prototype={constructor:ha,scale:function(t){return t===1?this:new ha(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new ha(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ro=new ha(1,0,0);ha.prototype;function my(t){t.stopImmediatePropagation()}function Hd(t){t.preventDefault(),t.stopImmediatePropagation()}function GV(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function HV(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function a8(){return this.__zoom||Ro}function VV(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function WV(){return navigator.maxTouchPoints||"ontouchstart"in this}function KV(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a))}function YV(){var t=GV,e=HV,n=KV,r=VV,i=WV,s=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],o=250,l=OH,u=a0("start","zoom","end"),d,p,h,m=500,y=150,x=0,_=10;function v(I){I.property("__zoom",a8).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",M).on("dblclick.zoom",k).filter(i).on("touchstart.zoom",j).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(I,D,U,W){var Y=I.selection?I.selection():I;Y.property("__zoom",a8),I!==Y?E(I,D,U,W):Y.interrupt().each(function(){A(this,arguments).event(W).start().zoom(null,typeof D=="function"?D.apply(this,arguments):D).end()})},v.scaleBy=function(I,D,U,W){v.scaleTo(I,function(){var Y=this.__zoom.k,H=typeof D=="function"?D.apply(this,arguments):D;return Y*H},U,W)},v.scaleTo=function(I,D,U,W){v.transform(I,function(){var Y=e.apply(this,arguments),H=this.__zoom,B=U==null?N(Y):typeof U=="function"?U.apply(this,arguments):U,L=H.invert(B),z=typeof D=="function"?D.apply(this,arguments):D;return n(b(w(H,z),B,L),Y,a)},U,W)},v.translateBy=function(I,D,U,W){v.transform(I,function(){return n(this.__zoom.translate(typeof D=="function"?D.apply(this,arguments):D,typeof U=="function"?U.apply(this,arguments):U),e.apply(this,arguments),a)},null,W)},v.translateTo=function(I,D,U,W,Y){v.transform(I,function(){var H=e.apply(this,arguments),B=this.__zoom,L=W==null?N(H):typeof W=="function"?W.apply(this,arguments):W;return n(Ro.translate(L[0],L[1]).scale(B.k).translate(typeof D=="function"?-D.apply(this,arguments):-D,typeof U=="function"?-U.apply(this,arguments):-U),H,a)},W,Y)};function w(I,D){return D=Math.max(s[0],Math.min(s[1],D)),D===I.k?I:new ha(D,I.x,I.y)}function b(I,D,U){var W=D[0]-U[0]*I.k,Y=D[1]-U[1]*I.k;return W===I.x&&Y===I.y?I:new ha(I.k,W,Y)}function N(I){return[(+I[0][0]+ +I[1][0])/2,(+I[0][1]+ +I[1][1])/2]}function E(I,D,U,W){I.on("start.zoom",function(){A(this,arguments).event(W).start()}).on("interrupt.zoom end.zoom",function(){A(this,arguments).event(W).end()}).tween("zoom",function(){var Y=this,H=arguments,B=A(Y,H).event(W),L=e.apply(Y,H),z=U==null?N(L):typeof U=="function"?U.apply(Y,H):U,K=Math.max(L[1][0]-L[0][0],L[1][1]-L[0][1]),J=Y.__zoom,ne=typeof D=="function"?D.apply(Y,H):D,X=l(J.invert(z).concat(K/J.k),ne.invert(z).concat(K/ne.k));return function(G){if(G===1)G=ne;else{var te=X(G),re=K/te[2];G=new ha(re,z[0]-te[0]*re,z[1]-te[1]*re)}B.zoom(null,G)}})}function A(I,D,U){return!U&&I.__zooming||new P(I,D)}function P(I,D){this.that=I,this.args=D,this.active=0,this.sourceEvent=null,this.extent=e.apply(I,D),this.taps=0}P.prototype={event:function(I){return I&&(this.sourceEvent=I),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(I,D){return this.mouse&&I!=="mouse"&&(this.mouse[1]=D.invert(this.mouse[0])),this.touch0&&I!=="touch"&&(this.touch0[1]=D.invert(this.touch0[0])),this.touch1&&I!=="touch"&&(this.touch1[1]=D.invert(this.touch1[0])),this.that.__zoom=D,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(I){var D=Wi(this.that).datum();u.call(I,this.that,new UV(I,{sourceEvent:this.sourceEvent,target:v,type:I,transform:this.that.__zoom,dispatch:u}),D)}};function T(I,...D){if(!t.apply(this,arguments))return;var U=A(this,D).event(I),W=this.__zoom,Y=Math.max(s[0],Math.min(s[1],W.k*Math.pow(2,r.apply(this,arguments)))),H=ks(I);if(U.wheel)(U.mouse[0][0]!==H[0]||U.mouse[0][1]!==H[1])&&(U.mouse[1]=W.invert(U.mouse[0]=H)),clearTimeout(U.wheel);else{if(W.k===Y)return;U.mouse=[H,W.invert(H)],Rm(this),U.start()}Hd(I),U.wheel=setTimeout(B,y),U.zoom("mouse",n(b(w(W,Y),U.mouse[0],U.mouse[1]),U.extent,a));function B(){U.wheel=null,U.end()}}function M(I,...D){if(h||!t.apply(this,arguments))return;var U=I.currentTarget,W=A(this,D,!0).event(I),Y=Wi(I.view).on("mousemove.zoom",z,!0).on("mouseup.zoom",K,!0),H=ks(I,U),B=I.clientX,L=I.clientY;fR(I.view),my(I),W.mouse=[H,this.__zoom.invert(H)],Rm(this),W.start();function z(J){if(Hd(J),!W.moved){var ne=J.clientX-B,X=J.clientY-L;W.moved=ne*ne+X*X>x}W.event(J).zoom("mouse",n(b(W.that.__zoom,W.mouse[0]=ks(J,U),W.mouse[1]),W.extent,a))}function K(J){Y.on("mousemove.zoom mouseup.zoom",null),hR(J.view,W.moved),Hd(J),W.event(J).end()}}function k(I,...D){if(t.apply(this,arguments)){var U=this.__zoom,W=ks(I.changedTouches?I.changedTouches[0]:I,this),Y=U.invert(W),H=U.k*(I.shiftKey?.5:2),B=n(b(w(U,H),W,Y),e.apply(this,D),a);Hd(I),o>0?Wi(this).transition().duration(o).call(E,B,W,I):Wi(this).call(v.transform,B,W,I)}}function j(I,...D){if(t.apply(this,arguments)){var U=I.touches,W=U.length,Y=A(this,D,I.changedTouches.length===W).event(I),H,B,L,z;for(my(I),B=0;B<W;++B)L=U[B],z=ks(L,this),z=[z,this.__zoom.invert(z),L.identifier],Y.touch0?!Y.touch1&&Y.touch0[2]!==z[2]&&(Y.touch1=z,Y.taps=0):(Y.touch0=z,H=!0,Y.taps=1+!!d);d&&(d=clearTimeout(d)),H&&(Y.taps<2&&(p=z[0],d=setTimeout(function(){d=null},m)),Rm(this),Y.start())}}function O(I,...D){if(this.__zooming){var U=A(this,D).event(I),W=I.changedTouches,Y=W.length,H,B,L,z;for(Hd(I),H=0;H<Y;++H)B=W[H],L=ks(B,this),U.touch0&&U.touch0[2]===B.identifier?U.touch0[0]=L:U.touch1&&U.touch1[2]===B.identifier&&(U.touch1[0]=L);if(B=U.that.__zoom,U.touch1){var K=U.touch0[0],J=U.touch0[1],ne=U.touch1[0],X=U.touch1[1],G=(G=ne[0]-K[0])*G+(G=ne[1]-K[1])*G,te=(te=X[0]-J[0])*te+(te=X[1]-J[1])*te;B=w(B,Math.sqrt(G/te)),L=[(K[0]+ne[0])/2,(K[1]+ne[1])/2],z=[(J[0]+X[0])/2,(J[1]+X[1])/2]}else if(U.touch0)L=U.touch0[0],z=U.touch0[1];else return;U.zoom("touch",n(b(B,L,z),U.extent,a))}}function q(I,...D){if(this.__zooming){var U=A(this,D).event(I),W=I.changedTouches,Y=W.length,H,B;for(my(I),h&&clearTimeout(h),h=setTimeout(function(){h=null},m),H=0;H<Y;++H)B=W[H],U.touch0&&U.touch0[2]===B.identifier?delete U.touch0:U.touch1&&U.touch1[2]===B.identifier&&delete U.touch1;if(U.touch1&&!U.touch0&&(U.touch0=U.touch1,delete U.touch1),U.touch0)U.touch0[1]=this.__zoom.invert(U.touch0[0]);else if(U.end(),U.taps===2&&(B=ks(B,this),Math.hypot(p[0]-B[0],p[1]-B[1])<_)){var L=Wi(this).on("dblclick.zoom");L&&L.apply(this,arguments)}}}return v.wheelDelta=function(I){return arguments.length?(r=typeof I=="function"?I:Qp(+I),v):r},v.filter=function(I){return arguments.length?(t=typeof I=="function"?I:Qp(!!I),v):t},v.touchable=function(I){return arguments.length?(i=typeof I=="function"?I:Qp(!!I),v):i},v.extent=function(I){return arguments.length?(e=typeof I=="function"?I:Qp([[+I[0][0],+I[0][1]],[+I[1][0],+I[1][1]]]),v):e},v.scaleExtent=function(I){return arguments.length?(s[0]=+I[0],s[1]=+I[1],v):[s[0],s[1]]},v.translateExtent=function(I){return arguments.length?(a[0][0]=+I[0][0],a[1][0]=+I[1][0],a[0][1]=+I[0][1],a[1][1]=+I[1][1],v):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},v.constrain=function(I){return arguments.length?(n=I,v):n},v.duration=function(I){return arguments.length?(o=+I,v):o},v.interpolate=function(I){return arguments.length?(l=I,v):l},v.on=function(){var I=u.on.apply(u,arguments);return I===u?v:I},v.clickDistance=function(I){return arguments.length?(x=(I=+I)*I,v):Math.sqrt(x)},v.tapDistance=function(I){return arguments.length?(_=+I,v):_},v}const u0=V.createContext(null),XV=u0.Provider,Na={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},CR=Na.error001();function en(t,e){const n=V.useContext(u0);if(n===null)throw new Error(CR);return JP(n,t,e)}const qn=()=>{const t=V.useContext(u0);if(t===null)throw new Error(CR);return V.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},QV=t=>t.userSelectionActive?"none":"all";function jR({position:t,children:e,className:n,style:r,...i}){const s=en(QV),a=`${t}`.split("-");return fe.createElement("div",{className:_r(["react-flow__panel",n,...a]),style:{...r,pointerEvents:s},...i},e)}function ZV({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:fe.createElement(jR,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},fe.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const JV=({x:t,y:e,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:s={},labelBgPadding:a=[2,4],labelBgBorderRadius:o=2,children:l,className:u,...d})=>{const p=V.useRef(null),[h,m]=V.useState({x:0,y:0,width:0,height:0}),y=_r(["react-flow__edge-textwrapper",u]);return V.useEffect(()=>{if(p.current){const x=p.current.getBBox();m({x:x.x,y:x.y,width:x.width,height:x.height})}},[n]),typeof n>"u"||!n?null:fe.createElement("g",{transform:`translate(${t-h.width/2} ${e-h.height/2})`,className:y,visibility:h.width?"visible":"hidden",...d},i&&fe.createElement("rect",{width:h.width+2*a[0],x:-a[0],y:-a[1],height:h.height+2*a[1],className:"react-flow__edge-textbg",style:s,rx:o,ry:o}),fe.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:p,style:r},n),l)};var eW=V.memo(JV);const _4=t=>({width:t.offsetWidth,height:t.offsetHeight}),Du=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),N4=(t={x:0,y:0},e)=>({x:Du(t.x,e[0][0],e[1][0]),y:Du(t.y,e[0][1],e[1][1])}),o8=(t,e,n)=>t<e?Du(Math.abs(t-e),1,50)/50:t>n?-Du(Math.abs(t-n),1,50)/50:0,TR=(t,e)=>{const n=o8(t.x,35,e.width-35)*20,r=o8(t.y,35,e.height-35)*20;return[n,r]},AR=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},tW=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),S4=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),nW=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),l8=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),N_=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},rW=t=>Ei(t.width)&&Ei(t.height)&&Ei(t.x)&&Ei(t.y),Ei=t=>!isNaN(t)&&isFinite(t),sn=Symbol.for("internals"),OR=["Enter"," ","Escape"],iW=(t,e)=>{},sW=t=>"nativeEvent"in t;function S_(t){var i,s;const e=sW(t)?t.nativeEvent:t,n=((s=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:s[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const PR=t=>"clientX"in t,Lo=(t,e)=>{var s,a;const n=PR(t),r=n?t.clientX:(s=t.touches)==null?void 0:s[0].clientX,i=n?t.clientY:(a=t.touches)==null?void 0:a[0].clientY;return{x:r-((e==null?void 0:e.left)??0),y:i-((e==null?void 0:e.top)??0)}},xg=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},jh=({id:t,path:e,labelX:n,labelY:r,label:i,labelStyle:s,labelShowBg:a,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:p,markerStart:h,interactionWidth:m=20})=>fe.createElement(fe.Fragment,null,fe.createElement("path",{id:t,style:d,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:p,markerStart:h}),m&&fe.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}),i&&Ei(n)&&Ei(r)?fe.createElement(eW,{x:n,y:r,label:i,labelStyle:s,labelShowBg:a,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u}):null);jh.displayName="BaseEdge";function Vd(t,e,n){return n===void 0?n:r=>{const i=e().edges.find(s=>s.id===t);i&&n(r,{...i})}}function RR({sourceX:t,sourceY:e,targetX:n,targetY:r}){const i=Math.abs(n-t)/2,s=n<t?n+i:n-i,a=Math.abs(r-e)/2,o=r<e?r+a:r-a;return[s,o,i,a]}function LR({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:a,targetControlY:o}){const l=t*.125+i*.375+a*.375+n*.125,u=e*.125+s*.375+o*.375+r*.125,d=Math.abs(l-t),p=Math.abs(u-e);return[l,u,d,p]}var Ql;(function(t){t.Strict="strict",t.Loose="loose"})(Ql||(Ql={}));var Fl;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Fl||(Fl={}));var sh;(function(t){t.Partial="partial",t.Full="full"})(sh||(sh={}));var vo;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(vo||(vo={}));var Fu;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Fu||(Fu={}));var ze;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(ze||(ze={}));function c8({pos:t,x1:e,y1:n,x2:r,y2:i}){return t===ze.Left||t===ze.Right?[.5*(e+r),n]:[e,.5*(n+i)]}function IR({sourceX:t,sourceY:e,sourcePosition:n=ze.Bottom,targetX:r,targetY:i,targetPosition:s=ze.Top}){const[a,o]=c8({pos:n,x1:t,y1:e,x2:r,y2:i}),[l,u]=c8({pos:s,x1:r,y1:i,x2:t,y2:e}),[d,p,h,m]=LR({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:a,sourceControlY:o,targetControlX:l,targetControlY:u});return[`M${t},${e} C${a},${o} ${l},${u} ${r},${i}`,d,p,h,m]}const E4=V.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:i=ze.Bottom,targetPosition:s=ze.Top,label:a,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:p,style:h,markerEnd:m,markerStart:y,interactionWidth:x})=>{const[_,v,w]=IR({sourceX:t,sourceY:e,sourcePosition:i,targetX:n,targetY:r,targetPosition:s});return fe.createElement(jh,{path:_,labelX:v,labelY:w,label:a,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:p,style:h,markerEnd:m,markerStart:y,interactionWidth:x})});E4.displayName="SimpleBezierEdge";const u8={[ze.Left]:{x:-1,y:0},[ze.Right]:{x:1,y:0},[ze.Top]:{x:0,y:-1},[ze.Bottom]:{x:0,y:1}},aW=({source:t,sourcePosition:e=ze.Bottom,target:n})=>e===ze.Left||e===ze.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},d8=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function oW({source:t,sourcePosition:e=ze.Bottom,target:n,targetPosition:r=ze.Top,center:i,offset:s}){const a=u8[e],o=u8[r],l={x:t.x+a.x*s,y:t.y+a.y*s},u={x:n.x+o.x*s,y:n.y+o.y*s},d=aW({source:l,sourcePosition:e,target:u}),p=d.x!==0?"x":"y",h=d[p];let m=[],y,x;const _={x:0,y:0},v={x:0,y:0},[w,b,N,E]=RR({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(a[p]*o[p]===-1){y=i.x??w,x=i.y??b;const P=[{x:y,y:l.y},{x:y,y:u.y}],T=[{x:l.x,y:x},{x:u.x,y:x}];a[p]===h?m=p==="x"?P:T:m=p==="x"?T:P}else{const P=[{x:l.x,y:u.y}],T=[{x:u.x,y:l.y}];if(p==="x"?m=a.x===h?T:P:m=a.y===h?P:T,e===r){const q=Math.abs(t[p]-n[p]);if(q<=s){const I=Math.min(s-1,s-q);a[p]===h?_[p]=(l[p]>t[p]?-1:1)*I:v[p]=(u[p]>n[p]?-1:1)*I}}if(e!==r){const q=p==="x"?"y":"x",I=a[p]===o[q],D=l[q]>u[q],U=l[q]<u[q];(a[p]===1&&(!I&&D||I&&U)||a[p]!==1&&(!I&&U||I&&D))&&(m=p==="x"?P:T)}const M={x:l.x+_.x,y:l.y+_.y},k={x:u.x+v.x,y:u.y+v.y},j=Math.max(Math.abs(M.x-m[0].x),Math.abs(k.x-m[0].x)),O=Math.max(Math.abs(M.y-m[0].y),Math.abs(k.y-m[0].y));j>=O?(y=(M.x+k.x)/2,x=m[0].y):(y=m[0].x,x=(M.y+k.y)/2)}return[[t,{x:l.x+_.x,y:l.y+_.y},...m,{x:u.x+v.x,y:u.y+v.y},n],y,x,N,E]}function lW(t,e,n,r){const i=Math.min(d8(t,e)/2,d8(e,n)/2,r),{x:s,y:a}=e;if(t.x===s&&s===n.x||t.y===a&&a===n.y)return`L${s} ${a}`;if(t.y===a){const u=t.x<n.x?-1:1,d=t.y<n.y?1:-1;return`L ${s+i*u},${a}Q ${s},${a} ${s},${a+i*d}`}const o=t.x<n.x?1:-1,l=t.y<n.y?-1:1;return`L ${s},${a+i*l}Q ${s},${a} ${s+i*o},${a}`}function E_({sourceX:t,sourceY:e,sourcePosition:n=ze.Bottom,targetX:r,targetY:i,targetPosition:s=ze.Top,borderRadius:a=5,centerX:o,centerY:l,offset:u=20}){const[d,p,h,m,y]=oW({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:o,y:l},offset:u});return[d.reduce((_,v,w)=>{let b="";return w>0&&w<d.length-1?b=lW(d[w-1],v,d[w+1],a):b=`${w===0?"M":"L"}${v.x} ${v.y}`,_+=b,_},""),p,h,m,y]}const d0=V.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:i,labelStyle:s,labelShowBg:a,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,sourcePosition:p=ze.Bottom,targetPosition:h=ze.Top,markerEnd:m,markerStart:y,pathOptions:x,interactionWidth:_})=>{const[v,w,b]=E_({sourceX:t,sourceY:e,sourcePosition:p,targetX:n,targetY:r,targetPosition:h,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset});return fe.createElement(jh,{path:v,labelX:w,labelY:b,label:i,labelStyle:s,labelShowBg:a,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:m,markerStart:y,interactionWidth:_})});d0.displayName="SmoothStepEdge";const k4=V.memo(t=>{var e;return fe.createElement(d0,{...t,pathOptions:V.useMemo(()=>{var n;return{borderRadius:0,offset:(n=t.pathOptions)==null?void 0:n.offset}},[(e=t.pathOptions)==null?void 0:e.offset])})});k4.displayName="StepEdge";function cW({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[i,s,a,o]=RR({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,i,s,a,o]}const C4=V.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:i,labelStyle:s,labelShowBg:a,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:p,markerStart:h,interactionWidth:m})=>{const[y,x,_]=cW({sourceX:t,sourceY:e,targetX:n,targetY:r});return fe.createElement(jh,{path:y,labelX:x,labelY:_,label:i,labelStyle:s,labelShowBg:a,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:p,markerStart:h,interactionWidth:m})});C4.displayName="StraightEdge";function Zp(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function f8({pos:t,x1:e,y1:n,x2:r,y2:i,c:s}){switch(t){case ze.Left:return[e-Zp(e-r,s),n];case ze.Right:return[e+Zp(r-e,s),n];case ze.Top:return[e,n-Zp(n-i,s)];case ze.Bottom:return[e,n+Zp(i-n,s)]}}function MR({sourceX:t,sourceY:e,sourcePosition:n=ze.Bottom,targetX:r,targetY:i,targetPosition:s=ze.Top,curvature:a=.25}){const[o,l]=f8({pos:n,x1:t,y1:e,x2:r,y2:i,c:a}),[u,d]=f8({pos:s,x1:r,y1:i,x2:t,y2:e,c:a}),[p,h,m,y]=LR({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:d});return[`M${t},${e} C${o},${l} ${u},${d} ${r},${i}`,p,h,m,y]}const bg=V.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:i=ze.Bottom,targetPosition:s=ze.Top,label:a,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:p,style:h,markerEnd:m,markerStart:y,pathOptions:x,interactionWidth:_})=>{const[v,w,b]=MR({sourceX:t,sourceY:e,sourcePosition:i,targetX:n,targetY:r,targetPosition:s,curvature:x==null?void 0:x.curvature});return fe.createElement(jh,{path:v,labelX:w,labelY:b,label:a,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:p,style:h,markerEnd:m,markerStart:y,interactionWidth:_})});bg.displayName="BezierEdge";const j4=V.createContext(null),uW=j4.Provider;j4.Consumer;const dW=()=>V.useContext(j4),fW=t=>"id"in t&&"source"in t&&"target"in t,hW=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`reactflow__edge-${t}${e||""}-${n}${r||""}`,k_=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`,pW=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),DR=(t,e)=>{if(!t.source||!t.target)return e;let n;return fW(t)?n={...t}:n={...t,id:hW(t)},pW(n,e)?e:e.concat(n)},C_=({x:t,y:e},[n,r,i],s,[a,o])=>{const l={x:(t-n)/i,y:(e-r)/i};return s?{x:a*Math.round(l.x/a),y:o*Math.round(l.y/o)}:l},FR=({x:t,y:e},[n,r,i])=>({x:t*i+n,y:e*i+r}),wu=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],r=(t.height??0)*e[1],i={x:t.position.x-n,y:t.position.y-r};return{...i,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-r}:i}},T4=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,i)=>{const{x:s,y:a}=wu(i,e).positionAbsolute;return tW(r,S4({x:s,y:a,width:i.width||0,height:i.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return nW(n)},qR=(t,e,[n,r,i]=[0,0,1],s=!1,a=!1,o=[0,0])=>{const l={x:(e.x-n)/i,y:(e.y-r)/i,width:e.width/i,height:e.height/i},u=[];return t.forEach(d=>{const{width:p,height:h,selectable:m=!0,hidden:y=!1}=d;if(a&&!m||y)return!1;const{positionAbsolute:x}=wu(d,o),_={x:x.x,y:x.y,width:p||0,height:h||0},v=N_(l,_),w=typeof p>"u"||typeof h>"u"||p===null||h===null,b=s&&v>0,N=(p||0)*(h||0);(w||b||v>=N||d.dragging)&&u.push(d)}),u},BR=(t,e)=>{const n=t.map(r=>r.id);return e.filter(r=>n.includes(r.source)||n.includes(r.target))},zR=(t,e,n,r,i,s=.1)=>{const a=e/(t.width*(1+s)),o=n/(t.height*(1+s)),l=Math.min(a,o),u=Du(l,r,i),d=t.x+t.width/2,p=t.y+t.height/2,h=e/2-d*u,m=n/2-p*u;return{x:h,y:m,zoom:u}},Pl=(t,e=0)=>t.transition().duration(e);function h8(t,e,n,r){return(e[n]||[]).reduce((i,s)=>{var a,o;return`${t.id}-${s.id}-${n}`!==r&&i.push({id:s.id||null,type:n,nodeId:t.id,x:(((a=t.positionAbsolute)==null?void 0:a.x)??0)+s.x+s.width/2,y:(((o=t.positionAbsolute)==null?void 0:o.y)??0)+s.y+s.height/2}),i},[])}function mW(t,e,n,r,i,s){const{x:a,y:o}=Lo(t),u=e.elementsFromPoint(a,o).find(y=>y.classList.contains("react-flow__handle"));if(u){const y=u.getAttribute("data-nodeid");if(y){const x=A4(void 0,u),_=u.getAttribute("data-handleid"),v=s({nodeId:y,id:_,type:x});if(v){const w=i.find(b=>b.nodeId===y&&b.type===x&&b.id===_);return{handle:{id:_,type:x,nodeId:y,x:(w==null?void 0:w.x)||n.x,y:(w==null?void 0:w.y)||n.y},validHandleResult:v}}}}let d=[],p=1/0;if(i.forEach(y=>{const x=Math.sqrt((y.x-n.x)**2+(y.y-n.y)**2);if(x<=r){const _=s(y);x<=p&&(x<p?d=[{handle:y,validHandleResult:_}]:x===p&&d.push({handle:y,validHandleResult:_}),p=x)}}),!d.length)return{handle:null,validHandleResult:$R()};if(d.length===1)return d[0];const h=d.some(({validHandleResult:y})=>y.isValid),m=d.some(({handle:y})=>y.type==="target");return d.find(({handle:y,validHandleResult:x})=>m?y.type==="target":h?x.isValid:!0)||d[0]}const gW={source:null,target:null,sourceHandle:null,targetHandle:null},$R=()=>({handleDomNode:null,isValid:!1,connection:gW,endHandle:null});function UR(t,e,n,r,i,s,a){const o=i==="target",l=a.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),u={...$R(),handleDomNode:l};if(l){const d=A4(void 0,l),p=l.getAttribute("data-nodeid"),h=l.getAttribute("data-handleid"),m=l.classList.contains("connectable"),y=l.classList.contains("connectableend"),x={source:o?p:n,sourceHandle:o?h:r,target:o?n:p,targetHandle:o?r:h};u.connection=x,m&&y&&(e===Ql.Strict?o&&d==="source"||!o&&d==="target":p!==n||h!==r)&&(u.endHandle={nodeId:p,handleId:h,type:d},u.isValid=s(x))}return u}function vW({nodes:t,nodeId:e,handleId:n,handleType:r}){return t.reduce((i,s)=>{if(s[sn]){const{handleBounds:a}=s[sn];let o=[],l=[];a&&(o=h8(s,a,"source",`${e}-${n}-${r}`),l=h8(s,a,"target",`${e}-${n}-${r}`)),i.push(...o,...l)}return i},[])}function A4(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function gy(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function yW(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function GR({event:t,handleId:e,nodeId:n,onConnect:r,isTarget:i,getState:s,setState:a,isValidConnection:o,edgeUpdaterType:l,onReconnectEnd:u}){const d=AR(t.target),{connectionMode:p,domNode:h,autoPanOnConnect:m,connectionRadius:y,onConnectStart:x,panBy:_,getNodes:v,cancelConnection:w}=s();let b=0,N;const{x:E,y:A}=Lo(t),P=d==null?void 0:d.elementFromPoint(E,A),T=A4(l,P),M=h==null?void 0:h.getBoundingClientRect();if(!M||!T)return;let k,j=Lo(t,M),O=!1,q=null,I=!1,D=null;const U=vW({nodes:v(),nodeId:n,handleId:e,handleType:T}),W=()=>{if(!m)return;const[B,L]=TR(j,M);_({x:B,y:L}),b=requestAnimationFrame(W)};a({connectionPosition:j,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:T,connectionStartHandle:{nodeId:n,handleId:e,type:T},connectionEndHandle:null}),x==null||x(t,{nodeId:n,handleId:e,handleType:T});function Y(B){const{transform:L}=s();j=Lo(B,M);const{handle:z,validHandleResult:K}=mW(B,d,C_(j,L,!1,[1,1]),y,U,J=>UR(J,p,n,e,i?"target":"source",o,d));if(N=z,O||(W(),O=!0),D=K.handleDomNode,q=K.connection,I=K.isValid,a({connectionPosition:N&&I?FR({x:N.x,y:N.y},L):j,connectionStatus:yW(!!N,I),connectionEndHandle:K.endHandle}),!N&&!I&&!D)return gy(k);q.source!==q.target&&D&&(gy(k),k=D,D.classList.add("connecting","react-flow__handle-connecting"),D.classList.toggle("valid",I),D.classList.toggle("react-flow__handle-valid",I))}function H(B){var L,z;(N||D)&&q&&I&&(r==null||r(q)),(z=(L=s()).onConnectEnd)==null||z.call(L,B),l&&(u==null||u(B)),gy(k),w(),cancelAnimationFrame(b),O=!1,I=!1,q=null,D=null,d.removeEventListener("mousemove",Y),d.removeEventListener("mouseup",H),d.removeEventListener("touchmove",Y),d.removeEventListener("touchend",H)}d.addEventListener("mousemove",Y),d.addEventListener("mouseup",H),d.addEventListener("touchmove",Y),d.addEventListener("touchend",H)}const p8=()=>!0,xW=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),bW=(t,e,n)=>r=>{const{connectionStartHandle:i,connectionEndHandle:s,connectionClickStartHandle:a}=r;return{connecting:(i==null?void 0:i.nodeId)===t&&(i==null?void 0:i.handleId)===e&&(i==null?void 0:i.type)===n||(s==null?void 0:s.nodeId)===t&&(s==null?void 0:s.handleId)===e&&(s==null?void 0:s.type)===n,clickConnecting:(a==null?void 0:a.nodeId)===t&&(a==null?void 0:a.handleId)===e&&(a==null?void 0:a.type)===n}},HR=V.forwardRef(({type:t="source",position:e=ze.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:a,onConnect:o,children:l,className:u,onMouseDown:d,onTouchStart:p,...h},m)=>{var M,k;const y=a||null,x=t==="target",_=qn(),v=dW(),{connectOnClick:w,noPanClassName:b}=en(xW,dr),{connecting:N,clickConnecting:E}=en(bW(v,y,t),dr);v||(k=(M=_.getState()).onError)==null||k.call(M,"010",Na.error010());const A=j=>{const{defaultEdgeOptions:O,onConnect:q,hasDefaultEdges:I}=_.getState(),D={...O,...j};if(I){const{edges:U,setEdges:W}=_.getState();W(DR(D,U))}q==null||q(D),o==null||o(D)},P=j=>{if(!v)return;const O=PR(j);i&&(O&&j.button===0||!O)&&GR({event:j,handleId:y,nodeId:v,onConnect:A,isTarget:x,getState:_.getState,setState:_.setState,isValidConnection:n||_.getState().isValidConnection||p8}),O?d==null||d(j):p==null||p(j)},T=j=>{const{onClickConnectStart:O,onClickConnectEnd:q,connectionClickStartHandle:I,connectionMode:D,isValidConnection:U}=_.getState();if(!v||!I&&!i)return;if(!I){O==null||O(j,{nodeId:v,handleId:y,handleType:t}),_.setState({connectionClickStartHandle:{nodeId:v,type:t,handleId:y}});return}const W=AR(j.target),Y=n||U||p8,{connection:H,isValid:B}=UR({nodeId:v,id:y,type:t},D,I.nodeId,I.handleId||null,I.type,Y,W);B&&A(H),q==null||q(j),_.setState({connectionClickStartHandle:null})};return fe.createElement("div",{"data-handleid":y,"data-nodeid":v,"data-handlepos":e,"data-id":`${v}-${y}-${t}`,className:_r(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",b,u,{source:!x,target:x,connectable:r,connectablestart:i,connectableend:s,connecting:E,connectionindicator:r&&(i&&!N||s&&N)}]),onMouseDown:P,onTouchStart:P,onClick:w?T:void 0,ref:m,...h},l)});HR.displayName="Handle";var wg=V.memo(HR);const VR=({data:t,isConnectable:e,targetPosition:n=ze.Top,sourcePosition:r=ze.Bottom})=>fe.createElement(fe.Fragment,null,fe.createElement(wg,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label,fe.createElement(wg,{type:"source",position:r,isConnectable:e}));VR.displayName="DefaultNode";var j_=V.memo(VR);const WR=({data:t,isConnectable:e,sourcePosition:n=ze.Bottom})=>fe.createElement(fe.Fragment,null,t==null?void 0:t.label,fe.createElement(wg,{type:"source",position:n,isConnectable:e}));WR.displayName="InputNode";var KR=V.memo(WR);const YR=({data:t,isConnectable:e,targetPosition:n=ze.Top})=>fe.createElement(fe.Fragment,null,fe.createElement(wg,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label);YR.displayName="OutputNode";var XR=V.memo(YR);const O4=()=>null;O4.displayName="GroupNode";const wW=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),Jp=t=>t.id;function _W(t,e){return dr(t.selectedNodes.map(Jp),e.selectedNodes.map(Jp))&&dr(t.selectedEdges.map(Jp),e.selectedEdges.map(Jp))}const QR=V.memo(({onSelectionChange:t})=>{const e=qn(),{selectedNodes:n,selectedEdges:r}=en(wW,_W);return V.useEffect(()=>{const i={nodes:n,edges:r};t==null||t(i),e.getState().onSelectionChange.forEach(s=>s(i))},[n,r,t]),null});QR.displayName="SelectionListener";const NW=t=>!!t.onSelectionChange;function SW({onSelectionChange:t}){const e=en(NW);return t||e?fe.createElement(QR,{onSelectionChange:t}):null}const EW=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function Bc(t,e){V.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function it(t,e,n){V.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const kW=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:i,onConnectStart:s,onConnectEnd:a,onClickConnectStart:o,onClickConnectEnd:l,nodesDraggable:u,nodesConnectable:d,nodesFocusable:p,edgesFocusable:h,edgesUpdatable:m,elevateNodesOnSelect:y,minZoom:x,maxZoom:_,nodeExtent:v,onNodesChange:w,onEdgesChange:b,elementsSelectable:N,connectionMode:E,snapGrid:A,snapToGrid:P,translateExtent:T,connectOnClick:M,defaultEdgeOptions:k,fitView:j,fitViewOptions:O,onNodesDelete:q,onEdgesDelete:I,onNodeDrag:D,onNodeDragStart:U,onNodeDragStop:W,onSelectionDrag:Y,onSelectionDragStart:H,onSelectionDragStop:B,noPanClassName:L,nodeOrigin:z,rfId:K,autoPanOnConnect:J,autoPanOnNodeDrag:ne,onError:X,connectionRadius:G,isValidConnection:te,nodeDragThreshold:re})=>{const{setNodes:Q,setEdges:se,setDefaultNodesAndEdges:de,setMinZoom:le,setMaxZoom:ue,setTranslateExtent:he,setNodeExtent:qe,reset:we}=en(EW,dr),ae=qn();return V.useEffect(()=>{const me=r==null?void 0:r.map(_e=>({..._e,...k}));return de(n,me),()=>{we()}},[]),it("defaultEdgeOptions",k,ae.setState),it("connectionMode",E,ae.setState),it("onConnect",i,ae.setState),it("onConnectStart",s,ae.setState),it("onConnectEnd",a,ae.setState),it("onClickConnectStart",o,ae.setState),it("onClickConnectEnd",l,ae.setState),it("nodesDraggable",u,ae.setState),it("nodesConnectable",d,ae.setState),it("nodesFocusable",p,ae.setState),it("edgesFocusable",h,ae.setState),it("edgesUpdatable",m,ae.setState),it("elementsSelectable",N,ae.setState),it("elevateNodesOnSelect",y,ae.setState),it("snapToGrid",P,ae.setState),it("snapGrid",A,ae.setState),it("onNodesChange",w,ae.setState),it("onEdgesChange",b,ae.setState),it("connectOnClick",M,ae.setState),it("fitViewOnInit",j,ae.setState),it("fitViewOnInitOptions",O,ae.setState),it("onNodesDelete",q,ae.setState),it("onEdgesDelete",I,ae.setState),it("onNodeDrag",D,ae.setState),it("onNodeDragStart",U,ae.setState),it("onNodeDragStop",W,ae.setState),it("onSelectionDrag",Y,ae.setState),it("onSelectionDragStart",H,ae.setState),it("onSelectionDragStop",B,ae.setState),it("noPanClassName",L,ae.setState),it("nodeOrigin",z,ae.setState),it("rfId",K,ae.setState),it("autoPanOnConnect",J,ae.setState),it("autoPanOnNodeDrag",ne,ae.setState),it("onError",X,ae.setState),it("connectionRadius",G,ae.setState),it("isValidConnection",te,ae.setState),it("nodeDragThreshold",re,ae.setState),Bc(t,Q),Bc(e,se),Bc(x,le),Bc(_,ue),Bc(T,he),Bc(v,qe),null},m8={display:"none"},CW={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ZR="react-flow__node-desc",JR="react-flow__edge-desc",jW="react-flow__aria-live",TW=t=>t.ariaLiveMessage;function AW({rfId:t}){const e=en(TW);return fe.createElement("div",{id:`${jW}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:CW},e)}function OW({rfId:t,disableKeyboardA11y:e}){return fe.createElement(fe.Fragment,null,fe.createElement("div",{id:`${ZR}-${t}`,style:m8},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),fe.createElement("div",{id:`${JR}-${t}`,style:m8},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&fe.createElement(AW,{rfId:t}))}var ah=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,r]=V.useState(!1),i=V.useRef(!1),s=V.useRef(new Set([])),[a,o]=V.useMemo(()=>{if(t!==null){const u=(Array.isArray(t)?t:[t]).filter(p=>typeof p=="string").map(p=>p.split("+")),d=u.reduce((p,h)=>p.concat(...h),[]);return[u,d]}return[[],[]]},[t]);return V.useEffect(()=>{const l=typeof document<"u"?document:null,u=(e==null?void 0:e.target)||l;if(t!==null){const d=m=>{if(i.current=m.ctrlKey||m.metaKey||m.shiftKey,(!i.current||i.current&&!e.actInsideInputWithModifier)&&S_(m))return!1;const x=v8(m.code,o);s.current.add(m[x]),g8(a,s.current,!1)&&(m.preventDefault(),r(!0))},p=m=>{if((!i.current||i.current&&!e.actInsideInputWithModifier)&&S_(m))return!1;const x=v8(m.code,o);g8(a,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(m[x]),m.key==="Meta"&&s.current.clear(),i.current=!1},h=()=>{s.current.clear(),r(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",p),window.addEventListener("blur",h),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",p),window.removeEventListener("blur",h)}}},[t,r]),n};function g8(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(i=>e.has(i)))}function v8(t,e){return e.includes(t)?"code":"key"}function eL(t,e,n,r){var o,l;const i=t.parentNode||t.parentId;if(!i)return n;const s=e.get(i),a=wu(s,r);return eL(s,e,{x:(n.x??0)+a.x,y:(n.y??0)+a.y,z:(((o=s[sn])==null?void 0:o.z)??0)>(n.z??0)?((l=s[sn])==null?void 0:l.z)??0:n.z??0},r)}function tL(t,e,n){t.forEach(r=>{var s;const i=r.parentNode||r.parentId;if(i&&!t.has(i))throw new Error(`Parent node ${i} not found`);if(i||n!=null&&n[r.id]){const{x:a,y:o,z:l}=eL(r,t,{...r.position,z:((s=r[sn])==null?void 0:s.z)??0},e);r.positionAbsolute={x:a,y:o},r[sn].z=l,n!=null&&n[r.id]&&(r[sn].isParent=!0)}})}function vy(t,e,n,r){const i=new Map,s={},a=r?1e3:0;return t.forEach(o=>{var m;const l=(Ei(o.zIndex)?o.zIndex:0)+(o.selected?a:0),u=e.get(o.id),d={...o,positionAbsolute:{x:o.position.x,y:o.position.y}},p=o.parentNode||o.parentId;p&&(s[p]=!0);const h=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==o.type;Object.defineProperty(d,sn,{enumerable:!1,value:{handleBounds:h||(m=u==null?void 0:u[sn])==null?void 0:m.handleBounds,z:l}}),i.set(o.id,d)}),tL(i,n,s),i}function nL(t,e={}){const{getNodes:n,width:r,height:i,minZoom:s,maxZoom:a,d3Zoom:o,d3Selection:l,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:p}=t(),h=e.initial&&!u&&d;if(o&&l&&(h||!e.initial)){const y=n().filter(_=>{var w;const v=e.includeHiddenNodes?_.width&&_.height:!_.hidden;return(w=e.nodes)!=null&&w.length?v&&e.nodes.some(b=>b.id===_.id):v}),x=y.every(_=>_.width&&_.height);if(y.length>0&&x){const _=T4(y,p),{x:v,y:w,zoom:b}=zR(_,r,i,e.minZoom??s,e.maxZoom??a,e.padding??.1),N=Ro.translate(v,w).scale(b);return typeof e.duration=="number"&&e.duration>0?o.transform(Pl(l,e.duration),N):o.transform(l,N),!0}}return!1}function PW(t,e){return t.forEach(n=>{const r=e.get(n.id);r&&e.set(r.id,{...r,[sn]:r[sn],selected:n.selected})}),new Map(e)}function RW(t,e){return e.map(n=>{const r=t.find(i=>i.id===n.id);return r&&(n.selected=r.selected),n})}function em({changedNodes:t,changedEdges:e,get:n,set:r}){const{nodeInternals:i,edges:s,onNodesChange:a,onEdgesChange:o,hasDefaultNodes:l,hasDefaultEdges:u}=n();t!=null&&t.length&&(l&&r({nodeInternals:PW(t,i)}),a==null||a(t)),e!=null&&e.length&&(u&&r({edges:RW(e,s)}),o==null||o(e))}const zc=()=>{},LW={zoomIn:zc,zoomOut:zc,zoomTo:zc,getZoom:()=>1,setViewport:zc,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:zc,fitBounds:zc,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},IW=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),MW=()=>{const t=qn(),{d3Zoom:e,d3Selection:n}=en(IW,dr);return V.useMemo(()=>n&&e?{zoomIn:i=>e.scaleBy(Pl(n,i==null?void 0:i.duration),1.2),zoomOut:i=>e.scaleBy(Pl(n,i==null?void 0:i.duration),1/1.2),zoomTo:(i,s)=>e.scaleTo(Pl(n,s==null?void 0:s.duration),i),getZoom:()=>t.getState().transform[2],setViewport:(i,s)=>{const[a,o,l]=t.getState().transform,u=Ro.translate(i.x??a,i.y??o).scale(i.zoom??l);e.transform(Pl(n,s==null?void 0:s.duration),u)},getViewport:()=>{const[i,s,a]=t.getState().transform;return{x:i,y:s,zoom:a}},fitView:i=>nL(t.getState,i),setCenter:(i,s,a)=>{const{width:o,height:l,maxZoom:u}=t.getState(),d=typeof(a==null?void 0:a.zoom)<"u"?a.zoom:u,p=o/2-i*d,h=l/2-s*d,m=Ro.translate(p,h).scale(d);e.transform(Pl(n,a==null?void 0:a.duration),m)},fitBounds:(i,s)=>{const{width:a,height:o,minZoom:l,maxZoom:u}=t.getState(),{x:d,y:p,zoom:h}=zR(i,a,o,l,u,(s==null?void 0:s.padding)??.1),m=Ro.translate(d,p).scale(h);e.transform(Pl(n,s==null?void 0:s.duration),m)},project:i=>{const{transform:s,snapToGrid:a,snapGrid:o}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),C_(i,s,a,o)},screenToFlowPosition:i=>{const{transform:s,snapToGrid:a,snapGrid:o,domNode:l}=t.getState();if(!l)return i;const{x:u,y:d}=l.getBoundingClientRect(),p={x:i.x-u,y:i.y-d};return C_(p,s,a,o)},flowToScreenPosition:i=>{const{transform:s,domNode:a}=t.getState();if(!a)return i;const{x:o,y:l}=a.getBoundingClientRect(),u=FR(i,s);return{x:u.x+o,y:u.y+l}},viewportInitialized:!0}:LW,[e,n])};function P4(){const t=MW(),e=qn(),n=V.useCallback(()=>e.getState().getNodes().map(x=>({...x})),[]),r=V.useCallback(x=>e.getState().nodeInternals.get(x),[]),i=V.useCallback(()=>{const{edges:x=[]}=e.getState();return x.map(_=>({..._}))},[]),s=V.useCallback(x=>{const{edges:_=[]}=e.getState();return _.find(v=>v.id===x)},[]),a=V.useCallback(x=>{const{getNodes:_,setNodes:v,hasDefaultNodes:w,onNodesChange:b}=e.getState(),N=_(),E=typeof x=="function"?x(N):x;if(w)v(E);else if(b){const A=E.length===0?N.map(P=>({type:"remove",id:P.id})):E.map(P=>({item:P,type:"reset"}));b(A)}},[]),o=V.useCallback(x=>{const{edges:_=[],setEdges:v,hasDefaultEdges:w,onEdgesChange:b}=e.getState(),N=typeof x=="function"?x(_):x;if(w)v(N);else if(b){const E=N.length===0?_.map(A=>({type:"remove",id:A.id})):N.map(A=>({item:A,type:"reset"}));b(E)}},[]),l=V.useCallback(x=>{const _=Array.isArray(x)?x:[x],{getNodes:v,setNodes:w,hasDefaultNodes:b,onNodesChange:N}=e.getState();if(b){const A=[...v(),..._];w(A)}else if(N){const E=_.map(A=>({item:A,type:"add"}));N(E)}},[]),u=V.useCallback(x=>{const _=Array.isArray(x)?x:[x],{edges:v=[],setEdges:w,hasDefaultEdges:b,onEdgesChange:N}=e.getState();if(b)w([...v,..._]);else if(N){const E=_.map(A=>({item:A,type:"add"}));N(E)}},[]),d=V.useCallback(()=>{const{getNodes:x,edges:_=[],transform:v}=e.getState(),[w,b,N]=v;return{nodes:x().map(E=>({...E})),edges:_.map(E=>({...E})),viewport:{x:w,y:b,zoom:N}}},[]),p=V.useCallback(({nodes:x,edges:_})=>{const{nodeInternals:v,getNodes:w,edges:b,hasDefaultNodes:N,hasDefaultEdges:E,onNodesDelete:A,onEdgesDelete:P,onNodesChange:T,onEdgesChange:M}=e.getState(),k=(x||[]).map(D=>D.id),j=(_||[]).map(D=>D.id),O=w().reduce((D,U)=>{const W=U.parentNode||U.parentId,Y=!k.includes(U.id)&&W&&D.find(B=>B.id===W);return(typeof U.deletable=="boolean"?U.deletable:!0)&&(k.includes(U.id)||Y)&&D.push(U),D},[]),q=b.filter(D=>typeof D.deletable=="boolean"?D.deletable:!0),I=q.filter(D=>j.includes(D.id));if(O||I){const D=BR(O,q),U=[...I,...D],W=U.reduce((Y,H)=>(Y.includes(H.id)||Y.push(H.id),Y),[]);if((E||N)&&(E&&e.setState({edges:b.filter(Y=>!W.includes(Y.id))}),N&&(O.forEach(Y=>{v.delete(Y.id)}),e.setState({nodeInternals:new Map(v)}))),W.length>0&&(P==null||P(U),M&&M(W.map(Y=>({id:Y,type:"remove"})))),O.length>0&&(A==null||A(O),T)){const Y=O.map(H=>({id:H.id,type:"remove"}));T(Y)}}},[]),h=V.useCallback(x=>{const _=rW(x),v=_?null:e.getState().nodeInternals.get(x.id);return!_&&!v?[null,null,_]:[_?x:l8(v),v,_]},[]),m=V.useCallback((x,_=!0,v)=>{const[w,b,N]=h(x);return w?(v||e.getState().getNodes()).filter(E=>{if(!N&&(E.id===b.id||!E.positionAbsolute))return!1;const A=l8(E),P=N_(A,w);return _&&P>0||P>=w.width*w.height}):[]},[]),y=V.useCallback((x,_,v=!0)=>{const[w]=h(x);if(!w)return!1;const b=N_(w,_);return v&&b>0||b>=w.width*w.height},[]);return V.useMemo(()=>({...t,getNodes:n,getNode:r,getEdges:i,getEdge:s,setNodes:a,setEdges:o,addNodes:l,addEdges:u,toObject:d,deleteElements:p,getIntersectingNodes:m,isNodeIntersecting:y}),[t,n,r,i,s,a,o,l,u,d,p,m,y])}const DW={actInsideInputWithModifier:!1};var FW=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=qn(),{deleteElements:r}=P4(),i=ah(t,DW),s=ah(e);V.useEffect(()=>{if(i){const{edges:a,getNodes:o}=n.getState(),l=o().filter(d=>d.selected),u=a.filter(d=>d.selected);r({nodes:l,edges:u}),n.setState({nodesSelectionActive:!1})}},[i]),V.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])};function qW(t){const e=qn();V.useEffect(()=>{let n;const r=()=>{var s,a;if(!t.current)return;const i=_4(t.current);(i.height===0||i.width===0)&&((a=(s=e.getState()).onError)==null||a.call(s,"004",Na.error004())),e.setState({width:i.width||500,height:i.height||500})};return r(),window.addEventListener("resize",r),t.current&&(n=new ResizeObserver(()=>r()),n.observe(t.current)),()=>{window.removeEventListener("resize",r),n&&t.current&&n.unobserve(t.current)}},[])}const R4={position:"absolute",width:"100%",height:"100%",top:0,left:0},BW=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,tm=t=>({x:t.x,y:t.y,zoom:t.k}),$c=(t,e)=>t.target.closest(`.${e}`),y8=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),x8=t=>{const e=t.ctrlKey&&xg()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},zW=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),$W=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:i=!0,zoomOnPinch:s=!0,panOnScroll:a=!1,panOnScrollSpeed:o=.5,panOnScrollMode:l=Fl.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:p=!0,defaultViewport:h,translateExtent:m,minZoom:y,maxZoom:x,zoomActivationKeyCode:_,preventScrolling:v=!0,children:w,noWheelClassName:b,noPanClassName:N})=>{const E=V.useRef(),A=qn(),P=V.useRef(!1),T=V.useRef(!1),M=V.useRef(null),k=V.useRef({x:0,y:0,zoom:0}),{d3Zoom:j,d3Selection:O,d3ZoomHandler:q,userSelectionActive:I}=en(zW,dr),D=ah(_),U=V.useRef(0),W=V.useRef(!1),Y=V.useRef();return qW(M),V.useEffect(()=>{if(M.current){const H=M.current.getBoundingClientRect(),B=YV().scaleExtent([y,x]).translateExtent(m),L=Wi(M.current).call(B),z=Ro.translate(h.x,h.y).scale(Du(h.zoom,y,x)),K=[[0,0],[H.width,H.height]],J=B.constrain()(z,K,m);B.transform(L,J),B.wheelDelta(x8),A.setState({d3Zoom:B,d3Selection:L,d3ZoomHandler:L.on("wheel.zoom"),transform:[J.x,J.y,J.k],domNode:M.current.closest(".react-flow")})}},[]),V.useEffect(()=>{O&&j&&(a&&!D&&!I?O.on("wheel.zoom",H=>{if($c(H,b))return!1;H.preventDefault(),H.stopImmediatePropagation();const B=O.property("__zoom").k||1;if(H.ctrlKey&&s){const te=ks(H),re=x8(H),Q=B*Math.pow(2,re);j.scaleTo(O,Q,te,H);return}const L=H.deltaMode===1?20:1;let z=l===Fl.Vertical?0:H.deltaX*L,K=l===Fl.Horizontal?0:H.deltaY*L;!xg()&&H.shiftKey&&l!==Fl.Vertical&&(z=H.deltaY*L,K=0),j.translateBy(O,-(z/B)*o,-(K/B)*o,{internal:!0});const J=tm(O.property("__zoom")),{onViewportChangeStart:ne,onViewportChange:X,onViewportChangeEnd:G}=A.getState();clearTimeout(Y.current),W.current||(W.current=!0,e==null||e(H,J),ne==null||ne(J)),W.current&&(t==null||t(H,J),X==null||X(J),Y.current=setTimeout(()=>{n==null||n(H,J),G==null||G(J),W.current=!1},150))},{passive:!1}):typeof q<"u"&&O.on("wheel.zoom",function(H,B){if(!v&&H.type==="wheel"&&!H.ctrlKey||$c(H,b))return null;H.preventDefault(),q.call(this,H,B)},{passive:!1}))},[I,a,l,O,j,q,D,s,v,b,e,t,n]),V.useEffect(()=>{j&&j.on("start",H=>{var z,K;if(!H.sourceEvent||H.sourceEvent.internal)return null;U.current=(z=H.sourceEvent)==null?void 0:z.button;const{onViewportChangeStart:B}=A.getState(),L=tm(H.transform);P.current=!0,k.current=L,((K=H.sourceEvent)==null?void 0:K.type)==="mousedown"&&A.setState({paneDragging:!0}),B==null||B(L),e==null||e(H.sourceEvent,L)})},[j,e]),V.useEffect(()=>{j&&(I&&!P.current?j.on("zoom",null):I||j.on("zoom",H=>{var L;const{onViewportChange:B}=A.getState();if(A.setState({transform:[H.transform.x,H.transform.y,H.transform.k]}),T.current=!!(r&&y8(p,U.current??0)),(t||B)&&!((L=H.sourceEvent)!=null&&L.internal)){const z=tm(H.transform);B==null||B(z),t==null||t(H.sourceEvent,z)}}))},[I,j,t,p,r]),V.useEffect(()=>{j&&j.on("end",H=>{if(!H.sourceEvent||H.sourceEvent.internal)return null;const{onViewportChangeEnd:B}=A.getState();if(P.current=!1,A.setState({paneDragging:!1}),r&&y8(p,U.current??0)&&!T.current&&r(H.sourceEvent),T.current=!1,(n||B)&&BW(k.current,H.transform)){const L=tm(H.transform);k.current=L,clearTimeout(E.current),E.current=setTimeout(()=>{B==null||B(L),n==null||n(H.sourceEvent,L)},a?150:0)}})},[j,a,p,n,r]),V.useEffect(()=>{j&&j.filter(H=>{const B=D||i,L=s&&H.ctrlKey;if((p===!0||Array.isArray(p)&&p.includes(1))&&H.button===1&&H.type==="mousedown"&&($c(H,"react-flow__node")||$c(H,"react-flow__edge")))return!0;if(!p&&!B&&!a&&!u&&!s||I||!u&&H.type==="dblclick"||$c(H,b)&&H.type==="wheel"||$c(H,N)&&(H.type!=="wheel"||a&&H.type==="wheel"&&!D)||!s&&H.ctrlKey&&H.type==="wheel"||!B&&!a&&!L&&H.type==="wheel"||!p&&(H.type==="mousedown"||H.type==="touchstart")||Array.isArray(p)&&!p.includes(H.button)&&H.type==="mousedown")return!1;const z=Array.isArray(p)&&p.includes(H.button)||!H.button||H.button<=1;return(!H.ctrlKey||H.type==="wheel")&&z})},[I,j,i,s,a,u,p,d,D]),fe.createElement("div",{className:"react-flow__renderer",ref:M,style:R4},w)},UW=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function GW(){const{userSelectionActive:t,userSelectionRect:e}=en(UW,dr);return t&&e?fe.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function b8(t,e){const n=e.parentNode||e.parentId,r=t.find(i=>i.id===n);if(r){const i=e.position.x+e.width-r.width,s=e.position.y+e.height-r.height;if(i>0||s>0||e.position.x<0||e.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,i>0&&(r.style.width+=i),s>0&&(r.style.height+=s),e.position.x<0){const a=Math.abs(e.position.x);r.position.x=r.position.x-a,r.style.width+=a,e.position.x=0}if(e.position.y<0){const a=Math.abs(e.position.y);r.position.y=r.position.y-a,r.style.height+=a,e.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function rL(t,e){if(t.some(r=>r.type==="reset"))return t.filter(r=>r.type==="reset").map(r=>r.item);const n=t.filter(r=>r.type==="add").map(r=>r.item);return e.reduce((r,i)=>{const s=t.filter(o=>o.id===i.id);if(s.length===0)return r.push(i),r;const a={...i};for(const o of s)if(o)switch(o.type){case"select":{a.selected=o.selected;break}case"position":{typeof o.position<"u"&&(a.position=o.position),typeof o.positionAbsolute<"u"&&(a.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(a.dragging=o.dragging),a.expandParent&&b8(r,a);break}case"dimensions":{typeof o.dimensions<"u"&&(a.width=o.dimensions.width,a.height=o.dimensions.height),typeof o.updateStyle<"u"&&(a.style={...a.style||{},...o.dimensions}),typeof o.resizing=="boolean"&&(a.resizing=o.resizing),a.expandParent&&b8(r,a);break}case"remove":return r}return r.push(a),r},n)}function iL(t,e){return rL(t,e)}function HW(t,e){return rL(t,e)}const po=(t,e)=>({id:t,type:"select",selected:e});function du(t,e){return t.reduce((n,r)=>{const i=e.includes(r.id);return!r.selected&&i?(r.selected=!0,n.push(po(r.id,!0))):r.selected&&!i&&(r.selected=!1,n.push(po(r.id,!1))),n},[])}const yy=(t,e)=>n=>{n.target===e.current&&(t==null||t(n))},VW=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),sL=V.memo(({isSelecting:t,selectionMode:e=sh.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:i,onPaneClick:s,onPaneContextMenu:a,onPaneScroll:o,onPaneMouseEnter:l,onPaneMouseMove:u,onPaneMouseLeave:d,children:p})=>{const h=V.useRef(null),m=qn(),y=V.useRef(0),x=V.useRef(0),_=V.useRef(),{userSelectionActive:v,elementsSelectable:w,dragging:b}=en(VW,dr),N=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),y.current=0,x.current=0},E=q=>{s==null||s(q),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},A=q=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){q.preventDefault();return}a==null||a(q)},P=o?q=>o(q):void 0,T=q=>{const{resetSelectedElements:I,domNode:D}=m.getState();if(_.current=D==null?void 0:D.getBoundingClientRect(),!w||!t||q.button!==0||q.target!==h.current||!_.current)return;const{x:U,y:W}=Lo(q,_.current);I(),m.setState({userSelectionRect:{width:0,height:0,startX:U,startY:W,x:U,y:W}}),r==null||r(q)},M=q=>{const{userSelectionRect:I,nodeInternals:D,edges:U,transform:W,onNodesChange:Y,onEdgesChange:H,nodeOrigin:B,getNodes:L}=m.getState();if(!t||!_.current||!I)return;m.setState({userSelectionActive:!0,nodesSelectionActive:!1});const z=Lo(q,_.current),K=I.startX??0,J=I.startY??0,ne={...I,x:z.x<K?z.x:K,y:z.y<J?z.y:J,width:Math.abs(z.x-K),height:Math.abs(z.y-J)},X=L(),G=qR(D,ne,W,e===sh.Partial,!0,B),te=BR(G,U).map(Q=>Q.id),re=G.map(Q=>Q.id);if(y.current!==re.length){y.current=re.length;const Q=du(X,re);Q.length&&(Y==null||Y(Q))}if(x.current!==te.length){x.current=te.length;const Q=du(U,te);Q.length&&(H==null||H(Q))}m.setState({userSelectionRect:ne})},k=q=>{if(q.button!==0)return;const{userSelectionRect:I}=m.getState();!v&&I&&q.target===h.current&&(E==null||E(q)),m.setState({nodesSelectionActive:y.current>0}),N(),i==null||i(q)},j=q=>{v&&(m.setState({nodesSelectionActive:y.current>0}),i==null||i(q)),N()},O=w&&(t||v);return fe.createElement("div",{className:_r(["react-flow__pane",{dragging:b,selection:t}]),onClick:O?void 0:yy(E,h),onContextMenu:yy(A,h),onWheel:yy(P,h),onMouseEnter:O?void 0:l,onMouseDown:O?T:void 0,onMouseMove:O?M:u,onMouseUp:O?k:void 0,onMouseLeave:O?j:d,ref:h,style:R4},p,fe.createElement(GW,null))});sL.displayName="Pane";function aL(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const r=e.get(n);return r?r.selected?!0:aL(r,e):!1}function w8(t,e,n){let r=t;do{if(r!=null&&r.matches(e))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function WW(t,e,n,r){return Array.from(t.values()).filter(i=>(i.selected||i.id===r)&&(!i.parentNode||i.parentId||!aL(i,t))&&(i.draggable||e&&typeof i.draggable>"u")).map(i=>{var s,a;return{id:i.id,position:i.position||{x:0,y:0},positionAbsolute:i.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((s=i.positionAbsolute)==null?void 0:s.x)??0),y:n.y-(((a=i.positionAbsolute)==null?void 0:a.y)??0)},delta:{x:0,y:0},extent:i.extent,parentNode:i.parentNode||i.parentId,parentId:i.parentNode||i.parentId,width:i.width,height:i.height,expandParent:i.expandParent}})}function KW(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function oL(t,e,n,r,i=[0,0],s){const a=KW(t,t.extent||r);let o=a;const l=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(l&&t.width&&t.height){const p=n.get(l),{x:h,y:m}=wu(p,i).positionAbsolute;o=p&&Ei(h)&&Ei(m)&&Ei(p.width)&&Ei(p.height)?[[h+t.width*i[0],m+t.height*i[1]],[h+p.width-t.width+t.width*i[0],m+p.height-t.height+t.height*i[1]]]:o}else s==null||s("005",Na.error005()),o=a;else if(t.extent&&l&&t.extent!=="parent"){const p=n.get(l),{x:h,y:m}=wu(p,i).positionAbsolute;o=[[t.extent[0][0]+h,t.extent[0][1]+m],[t.extent[1][0]+h,t.extent[1][1]+m]]}let u={x:0,y:0};if(l){const p=n.get(l);u=wu(p,i).positionAbsolute}const d=o&&o!=="parent"?N4(e,o):e;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function xy({nodeId:t,dragItems:e,nodeInternals:n}){const r=e.map(i=>({...n.get(i.id),position:i.position,positionAbsolute:i.positionAbsolute}));return[t?r.find(i=>i.id===t):r[0],r]}const _8=(t,e,n,r)=>{const i=e.querySelectorAll(t);if(!i||!i.length)return null;const s=Array.from(i),a=e.getBoundingClientRect(),o={x:a.width*r[0],y:a.height*r[1]};return s.map(l=>{const u=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(u.left-a.left-o.x)/n,y:(u.top-a.top-o.y)/n,..._4(l)}})};function Wd(t,e,n){return n===void 0?n:r=>{const i=e().nodeInternals.get(t);i&&n(r,{...i})}}function T_({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:a,nodeInternals:o,onError:l}=e.getState(),u=o.get(t);if(!u){l==null||l("012",Na.error012(t));return}e.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&a)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=r==null?void 0:r.current)==null?void 0:d.blur()})):i([t])}function YW(){const t=qn();return V.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:i,snapToGrid:s}=t.getState(),a=n.touches?n.touches[0].clientX:n.clientX,o=n.touches?n.touches[0].clientY:n.clientY,l={x:(a-r[0])/r[2],y:(o-r[1])/r[2]};return{xSnapped:s?i[0]*Math.round(l.x/i[0]):l.x,ySnapped:s?i[1]*Math.round(l.y/i[1]):l.y,...l}},[])}function by(t){return(e,n,r)=>t==null?void 0:t(e,r)}function lL({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,selectNodesOnDrag:a}){const o=qn(),[l,u]=V.useState(!1),d=V.useRef([]),p=V.useRef({x:null,y:null}),h=V.useRef(0),m=V.useRef(null),y=V.useRef({x:0,y:0}),x=V.useRef(null),_=V.useRef(!1),v=V.useRef(!1),w=V.useRef(!1),b=YW();return V.useEffect(()=>{if(t!=null&&t.current){const N=Wi(t.current),E=({x:T,y:M})=>{const{nodeInternals:k,onNodeDrag:j,onSelectionDrag:O,updateNodePositions:q,nodeExtent:I,snapGrid:D,snapToGrid:U,nodeOrigin:W,onError:Y}=o.getState();p.current={x:T,y:M};let H=!1,B={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&I){const z=T4(d.current,W);B=S4(z)}if(d.current=d.current.map(z=>{const K={x:T-z.distance.x,y:M-z.distance.y};U&&(K.x=D[0]*Math.round(K.x/D[0]),K.y=D[1]*Math.round(K.y/D[1]));const J=[[I[0][0],I[0][1]],[I[1][0],I[1][1]]];d.current.length>1&&I&&!z.extent&&(J[0][0]=z.positionAbsolute.x-B.x+I[0][0],J[1][0]=z.positionAbsolute.x+(z.width??0)-B.x2+I[1][0],J[0][1]=z.positionAbsolute.y-B.y+I[0][1],J[1][1]=z.positionAbsolute.y+(z.height??0)-B.y2+I[1][1]);const ne=oL(z,K,k,J,W,Y);return H=H||z.position.x!==ne.position.x||z.position.y!==ne.position.y,z.position=ne.position,z.positionAbsolute=ne.positionAbsolute,z}),!H)return;q(d.current,!0,!0),u(!0);const L=i?j:by(O);if(L&&x.current){const[z,K]=xy({nodeId:i,dragItems:d.current,nodeInternals:k});L(x.current,z,K)}},A=()=>{if(!m.current)return;const[T,M]=TR(y.current,m.current);if(T!==0||M!==0){const{transform:k,panBy:j}=o.getState();p.current.x=(p.current.x??0)-T/k[2],p.current.y=(p.current.y??0)-M/k[2],j({x:T,y:M})&&E(p.current)}h.current=requestAnimationFrame(A)},P=T=>{var W;const{nodeInternals:M,multiSelectionActive:k,nodesDraggable:j,unselectNodesAndEdges:O,onNodeDragStart:q,onSelectionDragStart:I}=o.getState();v.current=!0;const D=i?q:by(I);(!a||!s)&&!k&&i&&((W=M.get(i))!=null&&W.selected||O()),i&&s&&a&&T_({id:i,store:o,nodeRef:t});const U=b(T);if(p.current=U,d.current=WW(M,j,U,i),D&&d.current){const[Y,H]=xy({nodeId:i,dragItems:d.current,nodeInternals:M});D(T.sourceEvent,Y,H)}};if(e)N.on(".drag",null);else{const T=sH().on("start",M=>{const{domNode:k,nodeDragThreshold:j}=o.getState();j===0&&P(M),w.current=!1;const O=b(M);p.current=O,m.current=(k==null?void 0:k.getBoundingClientRect())||null,y.current=Lo(M.sourceEvent,m.current)}).on("drag",M=>{var q,I;const k=b(M),{autoPanOnNodeDrag:j,nodeDragThreshold:O}=o.getState();if(M.sourceEvent.type==="touchmove"&&M.sourceEvent.touches.length>1&&(w.current=!0),!w.current){if(!_.current&&v.current&&j&&(_.current=!0,A()),!v.current){const D=k.xSnapped-(((q=p==null?void 0:p.current)==null?void 0:q.x)??0),U=k.ySnapped-(((I=p==null?void 0:p.current)==null?void 0:I.y)??0);Math.sqrt(D*D+U*U)>O&&P(M)}(p.current.x!==k.xSnapped||p.current.y!==k.ySnapped)&&d.current&&v.current&&(x.current=M.sourceEvent,y.current=Lo(M.sourceEvent,m.current),E(k))}}).on("end",M=>{if(!(!v.current||w.current)&&(u(!1),_.current=!1,v.current=!1,cancelAnimationFrame(h.current),d.current)){const{updateNodePositions:k,nodeInternals:j,onNodeDragStop:O,onSelectionDragStop:q}=o.getState(),I=i?O:by(q);if(k(d.current,!1,!1),I){const[D,U]=xy({nodeId:i,dragItems:d.current,nodeInternals:j});I(M.sourceEvent,D,U)}}}).filter(M=>{const k=M.target;return!M.button&&(!n||!w8(k,`.${n}`,t))&&(!r||w8(k,r,t))});return N.call(T),()=>{N.on(".drag",null)}}}},[t,e,n,r,s,o,i,a,b]),l}function cL(){const t=qn();return V.useCallback(n=>{const{nodeInternals:r,nodeExtent:i,updateNodePositions:s,getNodes:a,snapToGrid:o,snapGrid:l,onError:u,nodesDraggable:d}=t.getState(),p=a().filter(w=>w.selected&&(w.draggable||d&&typeof w.draggable>"u")),h=o?l[0]:5,m=o?l[1]:5,y=n.isShiftPressed?4:1,x=n.x*h*y,_=n.y*m*y,v=p.map(w=>{if(w.positionAbsolute){const b={x:w.positionAbsolute.x+x,y:w.positionAbsolute.y+_};o&&(b.x=l[0]*Math.round(b.x/l[0]),b.y=l[1]*Math.round(b.y/l[1]));const{positionAbsolute:N,position:E}=oL(w,b,r,i,void 0,u);w.position=E,w.positionAbsolute=N}return w});s(v,!0,!1)},[])}const _u={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Kd=t=>{const e=({id:n,type:r,data:i,xPos:s,yPos:a,xPosOrigin:o,yPosOrigin:l,selected:u,onClick:d,onMouseEnter:p,onMouseMove:h,onMouseLeave:m,onContextMenu:y,onDoubleClick:x,style:_,className:v,isDraggable:w,isSelectable:b,isConnectable:N,isFocusable:E,selectNodesOnDrag:A,sourcePosition:P,targetPosition:T,hidden:M,resizeObserver:k,dragHandle:j,zIndex:O,isParent:q,noDragClassName:I,noPanClassName:D,initialized:U,disableKeyboardA11y:W,ariaLabel:Y,rfId:H,hasHandleBounds:B})=>{const L=qn(),z=V.useRef(null),K=V.useRef(null),J=V.useRef(P),ne=V.useRef(T),X=V.useRef(r),G=b||w||d||p||h||m,te=cL(),re=Wd(n,L.getState,p),Q=Wd(n,L.getState,h),se=Wd(n,L.getState,m),de=Wd(n,L.getState,y),le=Wd(n,L.getState,x),ue=we=>{const{nodeDragThreshold:ae}=L.getState();if(b&&(!A||!w||ae>0)&&T_({id:n,store:L,nodeRef:z}),d){const me=L.getState().nodeInternals.get(n);me&&d(we,{...me})}},he=we=>{if(!S_(we)&&!W)if(OR.includes(we.key)&&b){const ae=we.key==="Escape";T_({id:n,store:L,unselect:ae,nodeRef:z})}else w&&u&&Object.prototype.hasOwnProperty.call(_u,we.key)&&(L.setState({ariaLiveMessage:`Moved selected node ${we.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~a}`}),te({x:_u[we.key].x,y:_u[we.key].y,isShiftPressed:we.shiftKey}))};V.useEffect(()=>()=>{K.current&&(k==null||k.unobserve(K.current),K.current=null)},[]),V.useEffect(()=>{if(z.current&&!M){const we=z.current;(!U||!B||K.current!==we)&&(K.current&&(k==null||k.unobserve(K.current)),k==null||k.observe(we),K.current=we)}},[M,U,B]),V.useEffect(()=>{const we=X.current!==r,ae=J.current!==P,me=ne.current!==T;z.current&&(we||ae||me)&&(we&&(X.current=r),ae&&(J.current=P),me&&(ne.current=T),L.getState().updateNodeDimensions([{id:n,nodeElement:z.current,forceUpdate:!0}]))},[n,r,P,T]);const qe=lL({nodeRef:z,disabled:M||!w,noDragClassName:I,handleSelector:j,nodeId:n,isSelectable:b,selectNodesOnDrag:A});return M?null:fe.createElement("div",{className:_r(["react-flow__node",`react-flow__node-${r}`,{[D]:w},v,{selected:u,selectable:b,parent:q,dragging:qe}]),ref:z,style:{zIndex:O,transform:`translate(${o}px,${l}px)`,pointerEvents:G?"all":"none",visibility:U?"visible":"hidden",..._},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:re,onMouseMove:Q,onMouseLeave:se,onContextMenu:de,onClick:ue,onDoubleClick:le,onKeyDown:E?he:void 0,tabIndex:E?0:void 0,role:E?"button":void 0,"aria-describedby":W?void 0:`${ZR}-${H}`,"aria-label":Y},fe.createElement(uW,{value:n},fe.createElement(t,{id:n,data:i,type:r,xPos:s,yPos:a,selected:u,isConnectable:N,sourcePosition:P,targetPosition:T,dragging:qe,dragHandle:j,zIndex:O})))};return e.displayName="NodeWrapper",V.memo(e)};const XW=t=>{const e=t.getNodes().filter(n=>n.selected);return{...T4(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function QW({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=qn(),{width:i,height:s,x:a,y:o,transformString:l,userSelectionActive:u}=en(XW,dr),d=cL(),p=V.useRef(null);if(V.useEffect(()=>{var y;n||(y=p.current)==null||y.focus({preventScroll:!0})},[n]),lL({nodeRef:p}),u||!i||!s)return null;const h=t?y=>{const x=r.getState().getNodes().filter(_=>_.selected);t(y,x)}:void 0,m=y=>{Object.prototype.hasOwnProperty.call(_u,y.key)&&d({x:_u[y.key].x,y:_u[y.key].y,isShiftPressed:y.shiftKey})};return fe.createElement("div",{className:_r(["react-flow__nodesselection","react-flow__container",e]),style:{transform:l}},fe.createElement("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:n?void 0:-1,onKeyDown:n?void 0:m,style:{width:i,height:s,top:o,left:a}}))}var ZW=V.memo(QW);const JW=t=>t.nodesSelectionActive,uL=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:a,deleteKeyCode:o,onMove:l,onMoveStart:u,onMoveEnd:d,selectionKeyCode:p,selectionOnDrag:h,selectionMode:m,onSelectionStart:y,onSelectionEnd:x,multiSelectionKeyCode:_,panActivationKeyCode:v,zoomActivationKeyCode:w,elementsSelectable:b,zoomOnScroll:N,zoomOnPinch:E,panOnScroll:A,panOnScrollSpeed:P,panOnScrollMode:T,zoomOnDoubleClick:M,panOnDrag:k,defaultViewport:j,translateExtent:O,minZoom:q,maxZoom:I,preventScrolling:D,onSelectionContextMenu:U,noWheelClassName:W,noPanClassName:Y,disableKeyboardA11y:H})=>{const B=en(JW),L=ah(p),z=ah(v),K=z||k,J=z||A,ne=L||h&&K!==!0;return FW({deleteKeyCode:o,multiSelectionKeyCode:_}),fe.createElement($W,{onMove:l,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:b,zoomOnScroll:N,zoomOnPinch:E,panOnScroll:J,panOnScrollSpeed:P,panOnScrollMode:T,zoomOnDoubleClick:M,panOnDrag:!L&&K,defaultViewport:j,translateExtent:O,minZoom:q,maxZoom:I,zoomActivationKeyCode:w,preventScrolling:D,noWheelClassName:W,noPanClassName:Y},fe.createElement(sL,{onSelectionStart:y,onSelectionEnd:x,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:a,panOnDrag:K,isSelecting:!!ne,selectionMode:m},t,B&&fe.createElement(ZW,{onSelectionContextMenu:U,noPanClassName:Y,disableKeyboardA11y:H})))};uL.displayName="FlowRenderer";var eK=V.memo(uL);function tK(t){return en(V.useCallback(n=>t?qR(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function nK(t){const e={input:Kd(t.input||KR),default:Kd(t.default||j_),output:Kd(t.output||XR),group:Kd(t.group||O4)},n={},r=Object.keys(t).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,s)=>(i[s]=Kd(t[s]||j_),i),n);return{...e,...r}}const rK=({x:t,y:e,width:n,height:r,origin:i})=>!n||!r?{x:t,y:e}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:t,y:e}:{x:t-n*i[0],y:e-r*i[1]},iK=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),dL=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:s,onError:a}=en(iK,dr),o=tK(t.onlyRenderVisibleElements),l=V.useRef(),u=V.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(p=>{const h=p.map(m=>({id:m.target.getAttribute("data-id"),nodeElement:m.target,forceUpdate:!0}));s(h)});return l.current=d,d},[]);return V.useEffect(()=>()=>{var d;(d=l==null?void 0:l.current)==null||d.disconnect()},[]),fe.createElement("div",{className:"react-flow__nodes",style:R4},o.map(d=>{var E,A,P;let p=d.type||"default";t.nodeTypes[p]||(a==null||a("003",Na.error003(p)),p="default");const h=t.nodeTypes[p]||t.nodeTypes.default,m=!!(d.draggable||e&&typeof d.draggable>"u"),y=!!(d.selectable||i&&typeof d.selectable>"u"),x=!!(d.connectable||n&&typeof d.connectable>"u"),_=!!(d.focusable||r&&typeof d.focusable>"u"),v=t.nodeExtent?N4(d.positionAbsolute,t.nodeExtent):d.positionAbsolute,w=(v==null?void 0:v.x)??0,b=(v==null?void 0:v.y)??0,N=rK({x:w,y:b,width:d.width??0,height:d.height??0,origin:t.nodeOrigin});return fe.createElement(h,{key:d.id,id:d.id,className:d.className,style:d.style,type:p,data:d.data,sourcePosition:d.sourcePosition||ze.Bottom,targetPosition:d.targetPosition||ze.Top,hidden:d.hidden,xPos:w,yPos:b,xPosOrigin:N.x,yPosOrigin:N.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!d.selected,isDraggable:m,isSelectable:y,isConnectable:x,isFocusable:_,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((E=d[sn])==null?void 0:E.z)??0,isParent:!!((A=d[sn])!=null&&A.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!d.width&&!!d.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((P=d[sn])!=null&&P.handleBounds)})}))};dL.displayName="NodeRenderer";var sK=V.memo(dL);const aK=(t,e,n)=>n===ze.Left?t-e:n===ze.Right?t+e:t,oK=(t,e,n)=>n===ze.Top?t-e:n===ze.Bottom?t+e:t,N8="react-flow__edgeupdater",S8=({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:a,type:o})=>fe.createElement("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:a,className:_r([N8,`${N8}-${o}`]),cx:aK(e,r,t),cy:oK(n,r,t),r,stroke:"transparent",fill:"transparent"}),lK=()=>!0;var Uc=t=>{const e=({id:n,className:r,type:i,data:s,onClick:a,onEdgeDoubleClick:o,selected:l,animated:u,label:d,labelStyle:p,labelShowBg:h,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:x,style:_,source:v,target:w,sourceX:b,sourceY:N,targetX:E,targetY:A,sourcePosition:P,targetPosition:T,elementsSelectable:M,hidden:k,sourceHandleId:j,targetHandleId:O,onContextMenu:q,onMouseEnter:I,onMouseMove:D,onMouseLeave:U,reconnectRadius:W,onReconnect:Y,onReconnectStart:H,onReconnectEnd:B,markerEnd:L,markerStart:z,rfId:K,ariaLabel:J,isFocusable:ne,isReconnectable:X,pathOptions:G,interactionWidth:te,disableKeyboardA11y:re})=>{const Q=V.useRef(null),[se,de]=V.useState(!1),[le,ue]=V.useState(!1),he=qn(),qe=V.useMemo(()=>`url('#${k_(z,K)}')`,[z,K]),we=V.useMemo(()=>`url('#${k_(L,K)}')`,[L,K]);if(k)return null;const ae=dt=>{var mn;const{edges:cn,addSelectedEdges:nn,unselectNodesAndEdges:Ht,multiSelectionActive:Xn}=he.getState(),Qn=cn.find(hr=>hr.id===n);Qn&&(M&&(he.setState({nodesSelectionActive:!1}),Qn.selected&&Xn?(Ht({nodes:[],edges:[Qn]}),(mn=Q.current)==null||mn.blur()):nn([n])),a&&a(dt,Qn))},me=Vd(n,he.getState,o),_e=Vd(n,he.getState,q),Ee=Vd(n,he.getState,I),xe=Vd(n,he.getState,D),Oe=Vd(n,he.getState,U),Te=(dt,cn)=>{if(dt.button!==0)return;const{edges:nn,isValidConnection:Ht}=he.getState(),Xn=cn?w:v,Qn=(cn?O:j)||null,mn=cn?"target":"source",hr=Ht||lK,Bn=cn,Nr=nn.find(pr=>pr.id===n);ue(!0),H==null||H(dt,Nr,mn);const Pi=pr=>{ue(!1),B==null||B(pr,Nr,mn)};GR({event:dt,handleId:Qn,nodeId:Xn,onConnect:pr=>Y==null?void 0:Y(Nr,pr),isTarget:Bn,getState:he.getState,setState:he.setState,isValidConnection:hr,edgeUpdaterType:mn,onReconnectEnd:Pi})},Be=dt=>Te(dt,!0),Et=dt=>Te(dt,!1),bt=()=>de(!0),He=()=>de(!1),wn=!M&&!a,Ve=dt=>{var cn;if(!re&&OR.includes(dt.key)&&M){const{unselectNodesAndEdges:nn,addSelectedEdges:Ht,edges:Xn}=he.getState();dt.key==="Escape"?((cn=Q.current)==null||cn.blur(),nn({edges:[Xn.find(mn=>mn.id===n)]})):Ht([n])}};return fe.createElement("g",{className:_r(["react-flow__edge",`react-flow__edge-${i}`,r,{selected:l,animated:u,inactive:wn,updating:se}]),onClick:ae,onDoubleClick:me,onContextMenu:_e,onMouseEnter:Ee,onMouseMove:xe,onMouseLeave:Oe,onKeyDown:ne?Ve:void 0,tabIndex:ne?0:void 0,role:ne?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":J===null?void 0:J||`Edge from ${v} to ${w}`,"aria-describedby":ne?`${JR}-${K}`:void 0,ref:Q},!le&&fe.createElement(t,{id:n,source:v,target:w,selected:l,animated:u,label:d,labelStyle:p,labelShowBg:h,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:x,data:s,style:_,sourceX:b,sourceY:N,targetX:E,targetY:A,sourcePosition:P,targetPosition:T,sourceHandleId:j,targetHandleId:O,markerStart:qe,markerEnd:we,pathOptions:G,interactionWidth:te}),X&&fe.createElement(fe.Fragment,null,(X==="source"||X===!0)&&fe.createElement(S8,{position:P,centerX:b,centerY:N,radius:W,onMouseDown:Be,onMouseEnter:bt,onMouseOut:He,type:"source"}),(X==="target"||X===!0)&&fe.createElement(S8,{position:T,centerX:E,centerY:A,radius:W,onMouseDown:Et,onMouseEnter:bt,onMouseOut:He,type:"target"})))};return e.displayName="EdgeWrapper",V.memo(e)};function cK(t){const e={default:Uc(t.default||bg),straight:Uc(t.bezier||C4),step:Uc(t.step||k4),smoothstep:Uc(t.step||d0),simplebezier:Uc(t.simplebezier||E4)},n={},r=Object.keys(t).filter(i=>!["default","bezier"].includes(i)).reduce((i,s)=>(i[s]=Uc(t[s]||bg),i),n);return{...e,...r}}function E8(t,e,n=null){const r=((n==null?void 0:n.x)||0)+e.x,i=((n==null?void 0:n.y)||0)+e.y,s=(n==null?void 0:n.width)||e.width,a=(n==null?void 0:n.height)||e.height;switch(t){case ze.Top:return{x:r+s/2,y:i};case ze.Right:return{x:r+s,y:i+a/2};case ze.Bottom:return{x:r+s/2,y:i+a};case ze.Left:return{x:r,y:i+a/2}}}function k8(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const uK=(t,e,n,r,i,s)=>{const a=E8(n,t,e),o=E8(s,r,i);return{sourceX:a.x,sourceY:a.y,targetX:o.x,targetY:o.y}};function dK({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:s,width:a,height:o,transform:l}){const u={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+i),y2:Math.max(t.y+r,e.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=S4({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:a/l[2],height:o/l[2]}),p=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),h=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(p*h)>0}function C8(t){var r,i,s,a,o;const e=((r=t==null?void 0:t[sn])==null?void 0:r.handleBounds)||null,n=e&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&typeof((i=t==null?void 0:t.positionAbsolute)==null?void 0:i.x)<"u"&&typeof((s=t==null?void 0:t.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((a=t==null?void 0:t.positionAbsolute)==null?void 0:a.x)||0,y:((o=t==null?void 0:t.positionAbsolute)==null?void 0:o.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},e,!!n]}const fK=[{level:0,isMaxLevel:!0,edges:[]}];function hK(t,e,n=!1){let r=-1;const i=t.reduce((a,o)=>{var d,p;const l=Ei(o.zIndex);let u=l?o.zIndex:0;if(n){const h=e.get(o.target),m=e.get(o.source),y=o.selected||(h==null?void 0:h.selected)||(m==null?void 0:m.selected),x=Math.max(((d=m==null?void 0:m[sn])==null?void 0:d.z)||0,((p=h==null?void 0:h[sn])==null?void 0:p.z)||0,1e3);u=(l?o.zIndex:0)+(y?x:0)}return a[u]?a[u].push(o):a[u]=[o],r=u>r?u:r,a},{}),s=Object.entries(i).map(([a,o])=>{const l=+a;return{edges:o,level:l,isMaxLevel:l===r}});return s.length===0?fK:s}function pK(t,e,n){const r=en(V.useCallback(i=>t?i.edges.filter(s=>{const a=e.get(s.source),o=e.get(s.target);return(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&dK({sourcePos:a.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:a.width,sourceHeight:a.height,targetWidth:o.width,targetHeight:o.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[t,e]));return hK(r,e,n)}const mK=({color:t="none",strokeWidth:e=1})=>fe.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),gK=({color:t="none",strokeWidth:e=1})=>fe.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),j8={[Fu.Arrow]:mK,[Fu.ArrowClosed]:gK};function vK(t){const e=qn();return V.useMemo(()=>{var i,s;return Object.prototype.hasOwnProperty.call(j8,t)?j8[t]:((s=(i=e.getState()).onError)==null||s.call(i,"009",Na.error009(t)),null)},[t])}const yK=({id:t,type:e,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:a,orient:o="auto-start-reverse"})=>{const l=vK(e);return l?fe.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:o,refX:"0",refY:"0"},fe.createElement(l,{color:n,strokeWidth:a})):null},xK=({defaultColor:t,rfId:e})=>n=>{const r=[];return n.edges.reduce((i,s)=>([s.markerStart,s.markerEnd].forEach(a=>{if(a&&typeof a=="object"){const o=k_(a,e);r.includes(o)||(i.push({id:o,color:a.color||t,...a}),r.push(o))}}),i),[]).sort((i,s)=>i.id.localeCompare(s.id))},fL=({defaultColor:t,rfId:e})=>{const n=en(V.useCallback(xK({defaultColor:t,rfId:e}),[t,e]),(r,i)=>!(r.length!==i.length||r.some((s,a)=>s.id!==i[a].id)));return fe.createElement("defs",null,n.map(r=>fe.createElement(yK,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};fL.displayName="MarkerDefinitions";var bK=V.memo(fL);const wK=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),hL=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:r,edgeTypes:i,noPanClassName:s,onEdgeContextMenu:a,onEdgeMouseEnter:o,onEdgeMouseMove:l,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:p,onReconnect:h,onReconnectStart:m,onReconnectEnd:y,reconnectRadius:x,children:_,disableKeyboardA11y:v})=>{const{edgesFocusable:w,edgesUpdatable:b,elementsSelectable:N,width:E,height:A,connectionMode:P,nodeInternals:T,onError:M}=en(wK,dr),k=pK(e,T,n);return E?fe.createElement(fe.Fragment,null,k.map(({level:j,edges:O,isMaxLevel:q})=>fe.createElement("svg",{key:j,style:{zIndex:j},width:E,height:A,className:"react-flow__edges react-flow__container"},q&&fe.createElement(bK,{defaultColor:t,rfId:r}),fe.createElement("g",null,O.map(I=>{const[D,U,W]=C8(T.get(I.source)),[Y,H,B]=C8(T.get(I.target));if(!W||!B)return null;let L=I.type||"default";i[L]||(M==null||M("011",Na.error011(L)),L="default");const z=i[L]||i.default,K=P===Ql.Strict?H.target:(H.target??[]).concat(H.source??[]),J=k8(U.source,I.sourceHandle),ne=k8(K,I.targetHandle),X=(J==null?void 0:J.position)||ze.Bottom,G=(ne==null?void 0:ne.position)||ze.Top,te=!!(I.focusable||w&&typeof I.focusable>"u"),re=I.reconnectable||I.updatable,Q=typeof h<"u"&&(re||b&&typeof re>"u");if(!J||!ne)return M==null||M("008",Na.error008(J,I)),null;const{sourceX:se,sourceY:de,targetX:le,targetY:ue}=uK(D,J,X,Y,ne,G);return fe.createElement(z,{key:I.id,id:I.id,className:_r([I.className,s]),type:L,data:I.data,selected:!!I.selected,animated:!!I.animated,hidden:!!I.hidden,label:I.label,labelStyle:I.labelStyle,labelShowBg:I.labelShowBg,labelBgStyle:I.labelBgStyle,labelBgPadding:I.labelBgPadding,labelBgBorderRadius:I.labelBgBorderRadius,style:I.style,source:I.source,target:I.target,sourceHandleId:I.sourceHandle,targetHandleId:I.targetHandle,markerEnd:I.markerEnd,markerStart:I.markerStart,sourceX:se,sourceY:de,targetX:le,targetY:ue,sourcePosition:X,targetPosition:G,elementsSelectable:N,onContextMenu:a,onMouseEnter:o,onMouseMove:l,onMouseLeave:u,onClick:d,onEdgeDoubleClick:p,onReconnect:h,onReconnectStart:m,onReconnectEnd:y,reconnectRadius:x,rfId:r,ariaLabel:I.ariaLabel,isFocusable:te,isReconnectable:Q,pathOptions:"pathOptions"in I?I.pathOptions:void 0,interactionWidth:I.interactionWidth,disableKeyboardA11y:v})})))),_):null};hL.displayName="EdgeRenderer";var _K=V.memo(hL);const NK=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function SK({children:t}){const e=en(NK);return fe.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function EK(t){const e=P4(),n=V.useRef(!1);V.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const kK={[ze.Left]:ze.Right,[ze.Right]:ze.Left,[ze.Top]:ze.Bottom,[ze.Bottom]:ze.Top},pL=({nodeId:t,handleType:e,style:n,type:r=vo.Bezier,CustomComponent:i,connectionStatus:s})=>{var A,P,T;const{fromNode:a,handleId:o,toX:l,toY:u,connectionMode:d}=en(V.useCallback(M=>({fromNode:M.nodeInternals.get(t),handleId:M.connectionHandleId,toX:(M.connectionPosition.x-M.transform[0])/M.transform[2],toY:(M.connectionPosition.y-M.transform[1])/M.transform[2],connectionMode:M.connectionMode}),[t]),dr),p=(A=a==null?void 0:a[sn])==null?void 0:A.handleBounds;let h=p==null?void 0:p[e];if(d===Ql.Loose&&(h=h||(p==null?void 0:p[e==="source"?"target":"source"])),!a||!h)return null;const m=o?h.find(M=>M.id===o):h[0],y=m?m.x+m.width/2:(a.width??0)/2,x=m?m.y+m.height/2:a.height??0,_=(((P=a.positionAbsolute)==null?void 0:P.x)??0)+y,v=(((T=a.positionAbsolute)==null?void 0:T.y)??0)+x,w=m==null?void 0:m.position,b=w?kK[w]:null;if(!w||!b)return null;if(i)return fe.createElement(i,{connectionLineType:r,connectionLineStyle:n,fromNode:a,fromHandle:m,fromX:_,fromY:v,toX:l,toY:u,fromPosition:w,toPosition:b,connectionStatus:s});let N="";const E={sourceX:_,sourceY:v,sourcePosition:w,targetX:l,targetY:u,targetPosition:b};return r===vo.Bezier?[N]=MR(E):r===vo.Step?[N]=E_({...E,borderRadius:0}):r===vo.SmoothStep?[N]=E_(E):r===vo.SimpleBezier?[N]=IR(E):N=`M${_},${v} ${l},${u}`,fe.createElement("path",{d:N,fill:"none",className:"react-flow__connection-path",style:n})};pL.displayName="ConnectionLine";const CK=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function jK({containerStyle:t,style:e,type:n,component:r}){const{nodeId:i,handleType:s,nodesConnectable:a,width:o,height:l,connectionStatus:u}=en(CK,dr);return!(i&&s&&o&&a)?null:fe.createElement("svg",{style:t,width:o,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},fe.createElement("g",{className:_r(["react-flow__connection",u])},fe.createElement(pL,{nodeId:i,handleType:s,style:e,type:n,CustomComponent:r,connectionStatus:u})))}function T8(t,e){return V.useRef(null),qn(),V.useMemo(()=>e(t),[t])}const mL=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:r,onMoveEnd:i,onInit:s,onNodeClick:a,onEdgeClick:o,onNodeDoubleClick:l,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:p,onNodeMouseLeave:h,onNodeContextMenu:m,onSelectionContextMenu:y,onSelectionStart:x,onSelectionEnd:_,connectionLineType:v,connectionLineStyle:w,connectionLineComponent:b,connectionLineContainerStyle:N,selectionKeyCode:E,selectionOnDrag:A,selectionMode:P,multiSelectionKeyCode:T,panActivationKeyCode:M,zoomActivationKeyCode:k,deleteKeyCode:j,onlyRenderVisibleElements:O,elementsSelectable:q,selectNodesOnDrag:I,defaultViewport:D,translateExtent:U,minZoom:W,maxZoom:Y,preventScrolling:H,defaultMarkerColor:B,zoomOnScroll:L,zoomOnPinch:z,panOnScroll:K,panOnScrollSpeed:J,panOnScrollMode:ne,zoomOnDoubleClick:X,panOnDrag:G,onPaneClick:te,onPaneMouseEnter:re,onPaneMouseMove:Q,onPaneMouseLeave:se,onPaneScroll:de,onPaneContextMenu:le,onEdgeContextMenu:ue,onEdgeMouseEnter:he,onEdgeMouseMove:qe,onEdgeMouseLeave:we,onReconnect:ae,onReconnectStart:me,onReconnectEnd:_e,reconnectRadius:Ee,noDragClassName:xe,noWheelClassName:Oe,noPanClassName:Te,elevateEdgesOnSelect:Be,disableKeyboardA11y:Et,nodeOrigin:bt,nodeExtent:He,rfId:wn})=>{const Ve=T8(t,nK),dt=T8(e,cK);return EK(s),fe.createElement(eK,{onPaneClick:te,onPaneMouseEnter:re,onPaneMouseMove:Q,onPaneMouseLeave:se,onPaneContextMenu:le,onPaneScroll:de,deleteKeyCode:j,selectionKeyCode:E,selectionOnDrag:A,selectionMode:P,onSelectionStart:x,onSelectionEnd:_,multiSelectionKeyCode:T,panActivationKeyCode:M,zoomActivationKeyCode:k,elementsSelectable:q,onMove:n,onMoveStart:r,onMoveEnd:i,zoomOnScroll:L,zoomOnPinch:z,zoomOnDoubleClick:X,panOnScroll:K,panOnScrollSpeed:J,panOnScrollMode:ne,panOnDrag:G,defaultViewport:D,translateExtent:U,minZoom:W,maxZoom:Y,onSelectionContextMenu:y,preventScrolling:H,noDragClassName:xe,noWheelClassName:Oe,noPanClassName:Te,disableKeyboardA11y:Et},fe.createElement(SK,null,fe.createElement(_K,{edgeTypes:dt,onEdgeClick:o,onEdgeDoubleClick:u,onlyRenderVisibleElements:O,onEdgeContextMenu:ue,onEdgeMouseEnter:he,onEdgeMouseMove:qe,onEdgeMouseLeave:we,onReconnect:ae,onReconnectStart:me,onReconnectEnd:_e,reconnectRadius:Ee,defaultMarkerColor:B,noPanClassName:Te,elevateEdgesOnSelect:!!Be,disableKeyboardA11y:Et,rfId:wn},fe.createElement(jK,{style:w,type:v,component:b,containerStyle:N})),fe.createElement("div",{className:"react-flow__edgelabel-renderer"}),fe.createElement(sK,{nodeTypes:Ve,onNodeClick:a,onNodeDoubleClick:l,onNodeMouseEnter:d,onNodeMouseMove:p,onNodeMouseLeave:h,onNodeContextMenu:m,selectNodesOnDrag:I,onlyRenderVisibleElements:O,noPanClassName:Te,noDragClassName:xe,disableKeyboardA11y:Et,nodeOrigin:bt,nodeExtent:He,rfId:wn})))};mL.displayName="GraphView";var TK=V.memo(mL);const A_=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],so={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:A_,nodeExtent:A_,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Ql.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:iW,isValidConnection:void 0},AK=()=>vU((t,e)=>({...so,setNodes:n=>{const{nodeInternals:r,nodeOrigin:i,elevateNodesOnSelect:s}=e();t({nodeInternals:vy(n,r,i,s)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=e();t({edges:n.map(i=>({...r,...i}))})},setDefaultNodesAndEdges:(n,r)=>{const i=typeof n<"u",s=typeof r<"u",a=i?vy(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:a,edges:s?r:[],hasDefaultNodes:i,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:i,fitViewOnInit:s,fitViewOnInitDone:a,fitViewOnInitOptions:o,domNode:l,nodeOrigin:u}=e(),d=l==null?void 0:l.querySelector(".react-flow__viewport");if(!d)return;const p=window.getComputedStyle(d),{m22:h}=new window.DOMMatrixReadOnly(p.transform),m=n.reduce((x,_)=>{const v=i.get(_.id);if(v!=null&&v.hidden)i.set(v.id,{...v,[sn]:{...v[sn],handleBounds:void 0}});else if(v){const w=_4(_.nodeElement);!!(w.width&&w.height&&(v.width!==w.width||v.height!==w.height||_.forceUpdate))&&(i.set(v.id,{...v,[sn]:{...v[sn],handleBounds:{source:_8(".source",_.nodeElement,h,u),target:_8(".target",_.nodeElement,h,u)}},...w}),x.push({id:v.id,type:"dimensions",dimensions:w}))}return x},[]);tL(i,u);const y=a||s&&!a&&nL(e,{initial:!0,...o});t({nodeInternals:new Map(i),fitViewOnInitDone:y}),(m==null?void 0:m.length)>0&&(r==null||r(m))},updateNodePositions:(n,r=!0,i=!1)=>{const{triggerNodeChanges:s}=e(),a=n.map(o=>{const l={id:o.id,type:"position",dragging:i};return r&&(l.positionAbsolute=o.positionAbsolute,l.position=o.position),l});s(a)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:i,hasDefaultNodes:s,nodeOrigin:a,getNodes:o,elevateNodesOnSelect:l}=e();if(n!=null&&n.length){if(s){const u=iL(n,o()),d=vy(u,i,a,l);t({nodeInternals:d})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:i,getNodes:s}=e();let a,o=null;r?a=n.map(l=>po(l,!0)):(a=du(s(),n),o=du(i,[])),em({changedNodes:a,changedEdges:o,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:i,getNodes:s}=e();let a,o=null;r?a=n.map(l=>po(l,!0)):(a=du(i,n),o=du(s(),[])),em({changedNodes:o,changedEdges:a,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:i,getNodes:s}=e(),a=n||s(),o=r||i,l=a.map(d=>(d.selected=!1,po(d.id,!1))),u=o.map(d=>po(d.id,!1));em({changedNodes:l,changedEdges:u,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:i}=e();r==null||r.scaleExtent([n,i]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:i}=e();r==null||r.scaleExtent([i,n]),t({maxZoom:n})},setTranslateExtent:n=>{var r;(r=e().d3Zoom)==null||r.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=e(),s=r().filter(o=>o.selected).map(o=>po(o.id,!1)),a=n.filter(o=>o.selected).map(o=>po(o.id,!1));em({changedNodes:s,changedEdges:a,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:r}=e();r.forEach(i=>{i.positionAbsolute=N4(i.position,n)}),t({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:i,height:s,d3Zoom:a,d3Selection:o,translateExtent:l}=e();if(!a||!o||!n.x&&!n.y)return!1;const u=Ro.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),d=[[0,0],[i,s]],p=a==null?void 0:a.constrain()(u,d,l);return a.transform(o,p),r[0]!==p.x||r[1]!==p.y||r[2]!==p.k},cancelConnection:()=>t({connectionNodeId:so.connectionNodeId,connectionHandleId:so.connectionHandleId,connectionHandleType:so.connectionHandleType,connectionStatus:so.connectionStatus,connectionStartHandle:so.connectionStartHandle,connectionEndHandle:so.connectionEndHandle}),reset:()=>t({...so})}),Object.is),L4=({children:t})=>{const e=V.useRef(null);return e.current||(e.current=AK()),fe.createElement(XV,{value:e.current},t)};L4.displayName="ReactFlowProvider";const gL=({children:t})=>V.useContext(u0)?fe.createElement(fe.Fragment,null,t):fe.createElement(L4,null,t);gL.displayName="ReactFlowWrapper";const OK={input:KR,default:j_,output:XR,group:O4},PK={default:bg,straight:C4,step:k4,smoothstep:d0,simplebezier:E4},RK=[0,0],LK=[15,15],IK={x:0,y:0,zoom:1},MK={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},vL=V.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s=OK,edgeTypes:a=PK,onNodeClick:o,onEdgeClick:l,onInit:u,onMove:d,onMoveStart:p,onMoveEnd:h,onConnect:m,onConnectStart:y,onConnectEnd:x,onClickConnectStart:_,onClickConnectEnd:v,onNodeMouseEnter:w,onNodeMouseMove:b,onNodeMouseLeave:N,onNodeContextMenu:E,onNodeDoubleClick:A,onNodeDragStart:P,onNodeDrag:T,onNodeDragStop:M,onNodesDelete:k,onEdgesDelete:j,onSelectionChange:O,onSelectionDragStart:q,onSelectionDrag:I,onSelectionDragStop:D,onSelectionContextMenu:U,onSelectionStart:W,onSelectionEnd:Y,connectionMode:H=Ql.Strict,connectionLineType:B=vo.Bezier,connectionLineStyle:L,connectionLineComponent:z,connectionLineContainerStyle:K,deleteKeyCode:J="Backspace",selectionKeyCode:ne="Shift",selectionOnDrag:X=!1,selectionMode:G=sh.Full,panActivationKeyCode:te="Space",multiSelectionKeyCode:re=xg()?"Meta":"Control",zoomActivationKeyCode:Q=xg()?"Meta":"Control",snapToGrid:se=!1,snapGrid:de=LK,onlyRenderVisibleElements:le=!1,selectNodesOnDrag:ue=!0,nodesDraggable:he,nodesConnectable:qe,nodesFocusable:we,nodeOrigin:ae=RK,edgesFocusable:me,edgesUpdatable:_e,elementsSelectable:Ee,defaultViewport:xe=IK,minZoom:Oe=.5,maxZoom:Te=2,translateExtent:Be=A_,preventScrolling:Et=!0,nodeExtent:bt,defaultMarkerColor:He="#b1b1b7",zoomOnScroll:wn=!0,zoomOnPinch:Ve=!0,panOnScroll:dt=!1,panOnScrollSpeed:cn=.5,panOnScrollMode:nn=Fl.Free,zoomOnDoubleClick:Ht=!0,panOnDrag:Xn=!0,onPaneClick:Qn,onPaneMouseEnter:mn,onPaneMouseMove:hr,onPaneMouseLeave:Bn,onPaneScroll:Nr,onPaneContextMenu:Pi,children:si,onEdgeContextMenu:pr,onEdgeDoubleClick:ai,onEdgeMouseEnter:cs,onEdgeMouseMove:Us,onEdgeMouseLeave:Ri,onEdgeUpdate:Br,onEdgeUpdateStart:Gs,onEdgeUpdateEnd:zr,onReconnect:sl,onReconnectStart:al,onReconnectEnd:Fa,reconnectRadius:us=10,edgeUpdaterRadius:Hs=10,onNodesChange:un,onEdgesChange:ds,noDragClassName:ol="nodrag",noWheelClassName:ll="nowheel",noPanClassName:qa="nopan",fitView:cl=!1,fitViewOptions:gn,connectOnClick:ul=!0,attributionPosition:dl,proOptions:fl,defaultEdgeOptions:hl,elevateNodesOnSelect:pl=!0,elevateEdgesOnSelect:Rn=!1,disableKeyboardA11y:Ba=!1,autoPanOnConnect:ml=!0,autoPanOnNodeDrag:gl=!0,connectionRadius:Vs=20,isValidConnection:Li,onError:oi,style:fs,id:Ii,nodeDragThreshold:Zn,...Sr},Er)=>{const ht=Ii||"1";return fe.createElement("div",{...Sr,style:{...fs,...MK},ref:Er,className:_r(["react-flow",i]),"data-testid":"rf__wrapper",id:Ii},fe.createElement(gL,null,fe.createElement(TK,{onInit:u,onMove:d,onMoveStart:p,onMoveEnd:h,onNodeClick:o,onEdgeClick:l,onNodeMouseEnter:w,onNodeMouseMove:b,onNodeMouseLeave:N,onNodeContextMenu:E,onNodeDoubleClick:A,nodeTypes:s,edgeTypes:a,connectionLineType:B,connectionLineStyle:L,connectionLineComponent:z,connectionLineContainerStyle:K,selectionKeyCode:ne,selectionOnDrag:X,selectionMode:G,deleteKeyCode:J,multiSelectionKeyCode:re,panActivationKeyCode:te,zoomActivationKeyCode:Q,onlyRenderVisibleElements:le,selectNodesOnDrag:ue,defaultViewport:xe,translateExtent:Be,minZoom:Oe,maxZoom:Te,preventScrolling:Et,zoomOnScroll:wn,zoomOnPinch:Ve,zoomOnDoubleClick:Ht,panOnScroll:dt,panOnScrollSpeed:cn,panOnScrollMode:nn,panOnDrag:Xn,onPaneClick:Qn,onPaneMouseEnter:mn,onPaneMouseMove:hr,onPaneMouseLeave:Bn,onPaneScroll:Nr,onPaneContextMenu:Pi,onSelectionContextMenu:U,onSelectionStart:W,onSelectionEnd:Y,onEdgeContextMenu:pr,onEdgeDoubleClick:ai,onEdgeMouseEnter:cs,onEdgeMouseMove:Us,onEdgeMouseLeave:Ri,onReconnect:sl??Br,onReconnectStart:al??Gs,onReconnectEnd:Fa??zr,reconnectRadius:us??Hs,defaultMarkerColor:He,noDragClassName:ol,noWheelClassName:ll,noPanClassName:qa,elevateEdgesOnSelect:Rn,rfId:ht,disableKeyboardA11y:Ba,nodeOrigin:ae,nodeExtent:bt}),fe.createElement(kW,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:m,onConnectStart:y,onConnectEnd:x,onClickConnectStart:_,onClickConnectEnd:v,nodesDraggable:he,nodesConnectable:qe,nodesFocusable:we,edgesFocusable:me,edgesUpdatable:_e,elementsSelectable:Ee,elevateNodesOnSelect:pl,minZoom:Oe,maxZoom:Te,nodeExtent:bt,onNodesChange:un,onEdgesChange:ds,snapToGrid:se,snapGrid:de,connectionMode:H,translateExtent:Be,connectOnClick:ul,defaultEdgeOptions:hl,fitView:cl,fitViewOptions:gn,onNodesDelete:k,onEdgesDelete:j,onNodeDragStart:P,onNodeDrag:T,onNodeDragStop:M,onSelectionDrag:I,onSelectionDragStart:q,onSelectionDragStop:D,noPanClassName:qa,nodeOrigin:ae,rfId:ht,autoPanOnConnect:ml,autoPanOnNodeDrag:gl,onError:oi,connectionRadius:Vs,isValidConnection:Li,nodeDragThreshold:Zn}),fe.createElement(SW,{onSelectionChange:O}),si,fe.createElement(ZV,{proOptions:fl,position:dl}),fe.createElement(OW,{rfId:ht,disableKeyboardA11y:Ba})))});vL.displayName="ReactFlow";function yL(t){return e=>{const[n,r]=V.useState(e),i=V.useCallback(s=>r(a=>t(s,a)),[]);return[n,r,i]}}const DK=yL(iL),FK=yL(HW);function qK(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},fe.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function BK(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},fe.createElement("path",{d:"M0 0h32v4.2H0z"}))}function zK(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},fe.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function $K(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},fe.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function UK(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},fe.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const ff=({children:t,className:e,...n})=>fe.createElement("button",{type:"button",className:_r(["react-flow__controls-button",e]),...n},t);ff.displayName="ControlButton";const GK=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),xL=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:a,onFitView:o,onInteractiveChange:l,className:u,children:d,position:p="bottom-left"})=>{const h=qn(),[m,y]=V.useState(!1),{isInteractive:x,minZoomReached:_,maxZoomReached:v}=en(GK,dr),{zoomIn:w,zoomOut:b,fitView:N}=P4();if(V.useEffect(()=>{y(!0)},[]),!m)return null;const E=()=>{w(),s==null||s()},A=()=>{b(),a==null||a()},P=()=>{N(i),o==null||o()},T=()=>{h.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),l==null||l(!x)};return fe.createElement(jR,{className:_r(["react-flow__controls",u]),position:p,style:t,"data-testid":"rf__controls"},e&&fe.createElement(fe.Fragment,null,fe.createElement(ff,{onClick:E,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:v},fe.createElement(qK,null)),fe.createElement(ff,{onClick:A,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:_},fe.createElement(BK,null))),n&&fe.createElement(ff,{className:"react-flow__controls-fitview",onClick:P,title:"fit view","aria-label":"fit view"},fe.createElement(zK,null)),r&&fe.createElement(ff,{className:"react-flow__controls-interactive",onClick:T,title:"toggle interactivity","aria-label":"toggle interactivity"},x?fe.createElement(UK,null):fe.createElement($K,null)),d)};xL.displayName="Controls";var HK=V.memo(xL),Zi;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Zi||(Zi={}));function VK({color:t,dimensions:e,lineWidth:n}){return fe.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function WK({color:t,radius:e}){return fe.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const KK={[Zi.Dots]:"#91919a",[Zi.Lines]:"#eee",[Zi.Cross]:"#e2e2e2"},YK={[Zi.Dots]:1,[Zi.Lines]:1,[Zi.Cross]:6},XK=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function bL({id:t,variant:e=Zi.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=2,color:a,style:o,className:l}){const u=V.useRef(null),{transform:d,patternId:p}=en(XK,dr),h=a||KK[e],m=r||YK[e],y=e===Zi.Dots,x=e===Zi.Cross,_=Array.isArray(n)?n:[n,n],v=[_[0]*d[2]||1,_[1]*d[2]||1],w=m*d[2],b=x?[w,w]:v,N=y?[w/s,w/s]:[b[0]/s,b[1]/s];return fe.createElement("svg",{className:_r(["react-flow__background",l]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},fe.createElement("pattern",{id:p+t,x:d[0]%v[0],y:d[1]%v[1],width:v[0],height:v[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${N[0]},-${N[1]})`},y?fe.createElement(WK,{color:h,radius:w/s}):fe.createElement(VK,{dimensions:b,color:h,lineWidth:i})),fe.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${p+t})`}))}bL.displayName="Background";var QK=V.memo(bL);function I4(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var wy,A8;function ZK(){if(A8)return wy;A8=1;function t(){this.__data__=[],this.size=0}return wy=t,wy}var _y,O8;function Zu(){if(O8)return _y;O8=1;function t(e,n){return e===n||e!==e&&n!==n}return _y=t,_y}var Ny,P8;function f0(){if(P8)return Ny;P8=1;var t=Zu();function e(n,r){for(var i=n.length;i--;)if(t(n[i][0],r))return i;return-1}return Ny=e,Ny}var Sy,R8;function JK(){if(R8)return Sy;R8=1;var t=f0(),e=Array.prototype,n=e.splice;function r(i){var s=this.__data__,a=t(s,i);if(a<0)return!1;var o=s.length-1;return a==o?s.pop():n.call(s,a,1),--this.size,!0}return Sy=r,Sy}var Ey,L8;function eY(){if(L8)return Ey;L8=1;var t=f0();function e(n){var r=this.__data__,i=t(r,n);return i<0?void 0:r[i][1]}return Ey=e,Ey}var ky,I8;function tY(){if(I8)return ky;I8=1;var t=f0();function e(n){return t(this.__data__,n)>-1}return ky=e,ky}var Cy,M8;function nY(){if(M8)return Cy;M8=1;var t=f0();function e(n,r){var i=this.__data__,s=t(i,n);return s<0?(++this.size,i.push([n,r])):i[s][1]=r,this}return Cy=e,Cy}var jy,D8;function h0(){if(D8)return jy;D8=1;var t=ZK(),e=JK(),n=eY(),r=tY(),i=nY();function s(a){var o=-1,l=a==null?0:a.length;for(this.clear();++o<l;){var u=a[o];this.set(u[0],u[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,jy=s,jy}var Ty,F8;function rY(){if(F8)return Ty;F8=1;var t=h0();function e(){this.__data__=new t,this.size=0}return Ty=e,Ty}var Ay,q8;function iY(){if(q8)return Ay;q8=1;function t(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}return Ay=t,Ay}var Oy,B8;function sY(){if(B8)return Oy;B8=1;function t(e){return this.__data__.get(e)}return Oy=t,Oy}var Py,z8;function aY(){if(z8)return Py;z8=1;function t(e){return this.__data__.has(e)}return Py=t,Py}var Ry,$8;function wL(){if($8)return Ry;$8=1;var t=typeof Qt=="object"&&Qt&&Qt.Object===Object&&Qt;return Ry=t,Ry}var Ly,U8;function is(){if(U8)return Ly;U8=1;var t=wL(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return Ly=n,Ly}var Iy,G8;function Ju(){if(G8)return Iy;G8=1;var t=is(),e=t.Symbol;return Iy=e,Iy}var My,H8;function oY(){if(H8)return My;H8=1;var t=Ju(),e=Object.prototype,n=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function s(a){var o=n.call(a,i),l=a[i];try{a[i]=void 0;var u=!0}catch{}var d=r.call(a);return u&&(o?a[i]=l:delete a[i]),d}return My=s,My}var Dy,V8;function lY(){if(V8)return Dy;V8=1;var t=Object.prototype,e=t.toString;function n(r){return e.call(r)}return Dy=n,Dy}var Fy,W8;function ic(){if(W8)return Fy;W8=1;var t=Ju(),e=oY(),n=lY(),r="[object Null]",i="[object Undefined]",s=t?t.toStringTag:void 0;function a(o){return o==null?o===void 0?i:r:s&&s in Object(o)?e(o):n(o)}return Fy=a,Fy}var qy,K8;function Ai(){if(K8)return qy;K8=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return qy=t,qy}var By,Y8;function Th(){if(Y8)return By;Y8=1;var t=ic(),e=Ai(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function a(o){if(!e(o))return!1;var l=t(o);return l==r||l==i||l==n||l==s}return By=a,By}var zy,X8;function cY(){if(X8)return zy;X8=1;var t=is(),e=t["__core-js_shared__"];return zy=e,zy}var $y,Q8;function uY(){if(Q8)return $y;Q8=1;var t=cY(),e=function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!e&&e in r}return $y=n,$y}var Uy,Z8;function _L(){if(Z8)return Uy;Z8=1;var t=Function.prototype,e=t.toString;function n(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return Uy=n,Uy}var Gy,J8;function dY(){if(J8)return Gy;J8=1;var t=Th(),e=uY(),n=Ai(),r=_L(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,a=Function.prototype,o=Object.prototype,l=a.toString,u=o.hasOwnProperty,d=RegExp("^"+l.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(h){if(!n(h)||e(h))return!1;var m=t(h)?d:s;return m.test(r(h))}return Gy=p,Gy}var Hy,ek;function fY(){if(ek)return Hy;ek=1;function t(e,n){return e==null?void 0:e[n]}return Hy=t,Hy}var Vy,tk;function sc(){if(tk)return Vy;tk=1;var t=dY(),e=fY();function n(r,i){var s=e(r,i);return t(s)?s:void 0}return Vy=n,Vy}var Wy,nk;function M4(){if(nk)return Wy;nk=1;var t=sc(),e=is(),n=t(e,"Map");return Wy=n,Wy}var hY=sc(),pY=hY(Object,"create"),p0=pY,rk=p0;function mY(){this.__data__=rk?rk(null):{},this.size=0}var gY=mY;function vY(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var yY=vY,xY=p0,bY="__lodash_hash_undefined__",wY=Object.prototype,_Y=wY.hasOwnProperty;function NY(t){var e=this.__data__;if(xY){var n=e[t];return n===bY?void 0:n}return _Y.call(e,t)?e[t]:void 0}var SY=NY,EY=p0,kY=Object.prototype,CY=kY.hasOwnProperty;function jY(t){var e=this.__data__;return EY?e[t]!==void 0:CY.call(e,t)}var TY=jY,AY=p0,OY="__lodash_hash_undefined__";function PY(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=AY&&e===void 0?OY:e,this}var RY=PY,LY=gY,IY=yY,MY=SY,DY=TY,FY=RY;function ed(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ed.prototype.clear=LY;ed.prototype.delete=IY;ed.prototype.get=MY;ed.prototype.has=DY;ed.prototype.set=FY;var qY=ed,ik=qY,BY=h0(),zY=M4();function $Y(){this.size=0,this.__data__={hash:new ik,map:new(zY||BY),string:new ik}}var UY=$Y;function GY(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var HY=GY,VY=HY;function WY(t,e){var n=t.__data__;return VY(e)?n[typeof e=="string"?"string":"hash"]:n.map}var m0=WY,KY=m0;function YY(t){var e=KY(this,t).delete(t);return this.size-=e?1:0,e}var XY=YY,QY=m0;function ZY(t){return QY(this,t).get(t)}var JY=ZY,eX=m0;function tX(t){return eX(this,t).has(t)}var nX=tX,rX=m0;function iX(t,e){var n=rX(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var sX=iX,aX=UY,oX=XY,lX=JY,cX=nX,uX=sX;function td(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}td.prototype.clear=aX;td.prototype.delete=oX;td.prototype.get=lX;td.prototype.has=cX;td.prototype.set=uX;var D4=td,Ky,sk;function dX(){if(sk)return Ky;sk=1;var t=h0(),e=M4(),n=D4,r=200;function i(s,a){var o=this.__data__;if(o instanceof t){var l=o.__data__;if(!e||l.length<r-1)return l.push([s,a]),this.size=++o.size,this;o=this.__data__=new n(l)}return o.set(s,a),this.size=o.size,this}return Ky=i,Ky}var Yy,ak;function g0(){if(ak)return Yy;ak=1;var t=h0(),e=rY(),n=iY(),r=sY(),i=aY(),s=dX();function a(o){var l=this.__data__=new t(o);this.size=l.size}return a.prototype.clear=e,a.prototype.delete=n,a.prototype.get=r,a.prototype.has=i,a.prototype.set=s,Yy=a,Yy}var Xy,ok;function F4(){if(ok)return Xy;ok=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i&&n(e[r],r,e)!==!1;);return e}return Xy=t,Xy}var Qy,lk;function NL(){if(lk)return Qy;lk=1;var t=sc(),e=function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}}();return Qy=e,Qy}var Zy,ck;function v0(){if(ck)return Zy;ck=1;var t=NL();function e(n,r,i){r=="__proto__"&&t?t(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return Zy=e,Zy}var Jy,uk;function y0(){if(uk)return Jy;uk=1;var t=v0(),e=Zu(),n=Object.prototype,r=n.hasOwnProperty;function i(s,a,o){var l=s[a];(!(r.call(s,a)&&e(l,o))||o===void 0&&!(a in s))&&t(s,a,o)}return Jy=i,Jy}var ex,dk;function Ah(){if(dk)return ex;dk=1;var t=y0(),e=v0();function n(r,i,s,a){var o=!s;s||(s={});for(var l=-1,u=i.length;++l<u;){var d=i[l],p=a?a(s[d],r[d],d,s,r):void 0;p===void 0&&(p=r[d]),o?e(s,d,p):t(s,d,p)}return s}return ex=n,ex}var tx,fk;function fX(){if(fk)return tx;fk=1;function t(e,n){for(var r=-1,i=Array(e);++r<e;)i[r]=n(r);return i}return tx=t,tx}function hX(t){return t!=null&&typeof t=="object"}var Fs=hX,nx,hk;function pX(){if(hk)return nx;hk=1;var t=ic(),e=Fs,n="[object Arguments]";function r(i){return e(i)&&t(i)==n}return nx=r,nx}var rx,pk;function Oh(){if(pk)return rx;pk=1;var t=pX(),e=Fs,n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,s=t(function(){return arguments}())?t:function(a){return e(a)&&r.call(a,"callee")&&!i.call(a,"callee")};return rx=s,rx}var ix,mk;function bn(){if(mk)return ix;mk=1;var t=Array.isArray;return ix=t,ix}var hf={exports:{}},sx,gk;function mX(){if(gk)return sx;gk=1;function t(){return!1}return sx=t,sx}hf.exports;var vk;function nd(){return vk||(vk=1,function(t,e){var n=is(),r=mX(),i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===i,o=a?n.Buffer:void 0,l=o?o.isBuffer:void 0,u=l||r;t.exports=u}(hf,hf.exports)),hf.exports}var ax,yk;function x0(){if(yk)return ax;yk=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(r,i){var s=typeof r;return i=i??t,!!i&&(s=="number"||s!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return ax=n,ax}var ox,xk;function q4(){if(xk)return ox;xk=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return ox=e,ox}var gX=ic(),vX=q4(),yX=Fs,xX="[object Arguments]",bX="[object Array]",wX="[object Boolean]",_X="[object Date]",NX="[object Error]",SX="[object Function]",EX="[object Map]",kX="[object Number]",CX="[object Object]",jX="[object RegExp]",TX="[object Set]",AX="[object String]",OX="[object WeakMap]",PX="[object ArrayBuffer]",RX="[object DataView]",LX="[object Float32Array]",IX="[object Float64Array]",MX="[object Int8Array]",DX="[object Int16Array]",FX="[object Int32Array]",qX="[object Uint8Array]",BX="[object Uint8ClampedArray]",zX="[object Uint16Array]",$X="[object Uint32Array]",It={};It[LX]=It[IX]=It[MX]=It[DX]=It[FX]=It[qX]=It[BX]=It[zX]=It[$X]=!0;It[xX]=It[bX]=It[PX]=It[wX]=It[RX]=It[_X]=It[NX]=It[SX]=It[EX]=It[kX]=It[CX]=It[jX]=It[TX]=It[AX]=It[OX]=!1;function UX(t){return yX(t)&&vX(t.length)&&!!It[gX(t)]}var GX=UX,lx,bk;function b0(){if(bk)return lx;bk=1;function t(e){return function(n){return e(n)}}return lx=t,lx}var _g={exports:{}};_g.exports;(function(t,e){var n=wL(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,a=s&&n.process,o=function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();t.exports=o})(_g,_g.exports);var B4=_g.exports,HX=GX,VX=b0(),wk=B4,_k=wk&&wk.isTypedArray,WX=_k?VX(_k):HX,Ph=WX,cx,Nk;function SL(){if(Nk)return cx;Nk=1;var t=fX(),e=Oh(),n=bn(),r=nd(),i=x0(),s=Ph,a=Object.prototype,o=a.hasOwnProperty;function l(u,d){var p=n(u),h=!p&&e(u),m=!p&&!h&&r(u),y=!p&&!h&&!m&&s(u),x=p||h||m||y,_=x?t(u.length,String):[],v=_.length;for(var w in u)(d||o.call(u,w))&&!(x&&(w=="length"||m&&(w=="offset"||w=="parent")||y&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||i(w,v)))&&_.push(w);return _}return cx=l,cx}var ux,Sk;function w0(){if(Sk)return ux;Sk=1;var t=Object.prototype;function e(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||t;return n===i}return ux=e,ux}var dx,Ek;function EL(){if(Ek)return dx;Ek=1;function t(e,n){return function(r){return e(n(r))}}return dx=t,dx}var fx,kk;function KX(){if(kk)return fx;kk=1;var t=EL(),e=t(Object.keys,Object);return fx=e,fx}var hx,Ck;function z4(){if(Ck)return hx;Ck=1;var t=w0(),e=KX(),n=Object.prototype,r=n.hasOwnProperty;function i(s){if(!t(s))return e(s);var a=[];for(var o in Object(s))r.call(s,o)&&o!="constructor"&&a.push(o);return a}return hx=i,hx}var px,jk;function Aa(){if(jk)return px;jk=1;var t=Th(),e=q4();function n(r){return r!=null&&e(r.length)&&!t(r)}return px=n,px}var mx,Tk;function Yo(){if(Tk)return mx;Tk=1;var t=SL(),e=z4(),n=Aa();function r(i){return n(i)?t(i):e(i)}return mx=r,mx}var gx,Ak;function YX(){if(Ak)return gx;Ak=1;var t=Ah(),e=Yo();function n(r,i){return r&&t(i,e(i),r)}return gx=n,gx}var vx,Ok;function XX(){if(Ok)return vx;Ok=1;function t(e){var n=[];if(e!=null)for(var r in Object(e))n.push(r);return n}return vx=t,vx}var yx,Pk;function QX(){if(Pk)return yx;Pk=1;var t=Ai(),e=w0(),n=XX(),r=Object.prototype,i=r.hasOwnProperty;function s(a){if(!t(a))return n(a);var o=e(a),l=[];for(var u in a)u=="constructor"&&(o||!i.call(a,u))||l.push(u);return l}return yx=s,yx}var xx,Rk;function ac(){if(Rk)return xx;Rk=1;var t=SL(),e=QX(),n=Aa();function r(i){return n(i)?t(i,!0):e(i)}return xx=r,xx}var bx,Lk;function ZX(){if(Lk)return bx;Lk=1;var t=Ah(),e=ac();function n(r,i){return r&&t(i,e(i),r)}return bx=n,bx}var pf={exports:{}};pf.exports;var Ik;function kL(){return Ik||(Ik=1,function(t,e){var n=is(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,a=s?n.Buffer:void 0,o=a?a.allocUnsafe:void 0;function l(u,d){if(d)return u.slice();var p=u.length,h=o?o(p):new u.constructor(p);return u.copy(h),h}t.exports=l}(pf,pf.exports)),pf.exports}var wx,Mk;function CL(){if(Mk)return wx;Mk=1;function t(e,n){var r=-1,i=e.length;for(n||(n=Array(i));++r<i;)n[r]=e[r];return n}return wx=t,wx}var _x,Dk;function jL(){if(Dk)return _x;Dk=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,s=0,a=[];++r<i;){var o=e[r];n(o,r,e)&&(a[s++]=o)}return a}return _x=t,_x}var Nx,Fk;function TL(){if(Fk)return Nx;Fk=1;function t(){return[]}return Nx=t,Nx}var Sx,qk;function $4(){if(qk)return Sx;qk=1;var t=jL(),e=TL(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(a){return a==null?[]:(a=Object(a),t(i(a),function(o){return r.call(a,o)}))}:e;return Sx=s,Sx}var Ex,Bk;function JX(){if(Bk)return Ex;Bk=1;var t=Ah(),e=$4();function n(r,i){return t(r,e(r),i)}return Ex=n,Ex}var kx,zk;function U4(){if(zk)return kx;zk=1;function t(e,n){for(var r=-1,i=n.length,s=e.length;++r<i;)e[s+r]=n[r];return e}return kx=t,kx}var Cx,$k;function _0(){if($k)return Cx;$k=1;var t=EL(),e=t(Object.getPrototypeOf,Object);return Cx=e,Cx}var jx,Uk;function AL(){if(Uk)return jx;Uk=1;var t=U4(),e=_0(),n=$4(),r=TL(),i=Object.getOwnPropertySymbols,s=i?function(a){for(var o=[];a;)t(o,n(a)),a=e(a);return o}:r;return jx=s,jx}var Tx,Gk;function eQ(){if(Gk)return Tx;Gk=1;var t=Ah(),e=AL();function n(r,i){return t(r,e(r),i)}return Tx=n,Tx}var Ax,Hk;function OL(){if(Hk)return Ax;Hk=1;var t=U4(),e=bn();function n(r,i,s){var a=i(r);return e(r)?a:t(a,s(r))}return Ax=n,Ax}var Ox,Vk;function PL(){if(Vk)return Ox;Vk=1;var t=OL(),e=$4(),n=Yo();function r(i){return t(i,n,e)}return Ox=r,Ox}var Px,Wk;function tQ(){if(Wk)return Px;Wk=1;var t=OL(),e=AL(),n=ac();function r(i){return t(i,n,e)}return Px=r,Px}var Rx,Kk;function nQ(){if(Kk)return Rx;Kk=1;var t=sc(),e=is(),n=t(e,"DataView");return Rx=n,Rx}var Lx,Yk;function rQ(){if(Yk)return Lx;Yk=1;var t=sc(),e=is(),n=t(e,"Promise");return Lx=n,Lx}var Ix,Xk;function RL(){if(Xk)return Ix;Xk=1;var t=sc(),e=is(),n=t(e,"Set");return Ix=n,Ix}var Mx,Qk;function iQ(){if(Qk)return Mx;Qk=1;var t=sc(),e=is(),n=t(e,"WeakMap");return Mx=n,Mx}var Dx,Zk;function rd(){if(Zk)return Dx;Zk=1;var t=nQ(),e=M4(),n=rQ(),r=RL(),i=iQ(),s=ic(),a=_L(),o="[object Map]",l="[object Object]",u="[object Promise]",d="[object Set]",p="[object WeakMap]",h="[object DataView]",m=a(t),y=a(e),x=a(n),_=a(r),v=a(i),w=s;return(t&&w(new t(new ArrayBuffer(1)))!=h||e&&w(new e)!=o||n&&w(n.resolve())!=u||r&&w(new r)!=d||i&&w(new i)!=p)&&(w=function(b){var N=s(b),E=N==l?b.constructor:void 0,A=E?a(E):"";if(A)switch(A){case m:return h;case y:return o;case x:return u;case _:return d;case v:return p}return N}),Dx=w,Dx}var Fx,Jk;function sQ(){if(Jk)return Fx;Jk=1;var t=Object.prototype,e=t.hasOwnProperty;function n(r){var i=r.length,s=new r.constructor(i);return i&&typeof r[0]=="string"&&e.call(r,"index")&&(s.index=r.index,s.input=r.input),s}return Fx=n,Fx}var aQ=is(),oQ=aQ.Uint8Array,LL=oQ,qx,e9;function G4(){if(e9)return qx;e9=1;var t=LL;function e(n){var r=new n.constructor(n.byteLength);return new t(r).set(new t(n)),r}return qx=e,qx}var Bx,t9;function lQ(){if(t9)return Bx;t9=1;var t=G4();function e(n,r){var i=r?t(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return Bx=e,Bx}var zx,n9;function cQ(){if(n9)return zx;n9=1;var t=/\w*$/;function e(n){var r=new n.constructor(n.source,t.exec(n));return r.lastIndex=n.lastIndex,r}return zx=e,zx}var $x,r9;function uQ(){if(r9)return $x;r9=1;var t=Ju(),e=t?t.prototype:void 0,n=e?e.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return $x=r,$x}var Ux,i9;function IL(){if(i9)return Ux;i9=1;var t=G4();function e(n,r){var i=r?t(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return Ux=e,Ux}var Gx,s9;function dQ(){if(s9)return Gx;s9=1;var t=G4(),e=lQ(),n=cQ(),r=uQ(),i=IL(),s="[object Boolean]",a="[object Date]",o="[object Map]",l="[object Number]",u="[object RegExp]",d="[object Set]",p="[object String]",h="[object Symbol]",m="[object ArrayBuffer]",y="[object DataView]",x="[object Float32Array]",_="[object Float64Array]",v="[object Int8Array]",w="[object Int16Array]",b="[object Int32Array]",N="[object Uint8Array]",E="[object Uint8ClampedArray]",A="[object Uint16Array]",P="[object Uint32Array]";function T(M,k,j){var O=M.constructor;switch(k){case m:return t(M);case s:case a:return new O(+M);case y:return e(M,j);case x:case _:case v:case w:case b:case N:case E:case A:case P:return i(M,j);case o:return new O;case l:case p:return new O(M);case u:return n(M);case d:return new O;case h:return r(M)}}return Gx=T,Gx}var Hx,a9;function ML(){if(a9)return Hx;a9=1;var t=Ai(),e=Object.create,n=function(){function r(){}return function(i){if(!t(i))return{};if(e)return e(i);r.prototype=i;var s=new r;return r.prototype=void 0,s}}();return Hx=n,Hx}var Vx,o9;function DL(){if(o9)return Vx;o9=1;var t=ML(),e=_0(),n=w0();function r(i){return typeof i.constructor=="function"&&!n(i)?t(e(i)):{}}return Vx=r,Vx}var Wx,l9;function fQ(){if(l9)return Wx;l9=1;var t=rd(),e=Fs,n="[object Map]";function r(i){return e(i)&&t(i)==n}return Wx=r,Wx}var Kx,c9;function hQ(){if(c9)return Kx;c9=1;var t=fQ(),e=b0(),n=B4,r=n&&n.isMap,i=r?e(r):t;return Kx=i,Kx}var Yx,u9;function pQ(){if(u9)return Yx;u9=1;var t=rd(),e=Fs,n="[object Set]";function r(i){return e(i)&&t(i)==n}return Yx=r,Yx}var Xx,d9;function mQ(){if(d9)return Xx;d9=1;var t=pQ(),e=b0(),n=B4,r=n&&n.isSet,i=r?e(r):t;return Xx=i,Xx}var Qx,f9;function FL(){if(f9)return Qx;f9=1;var t=g0(),e=F4(),n=y0(),r=YX(),i=ZX(),s=kL(),a=CL(),o=JX(),l=eQ(),u=PL(),d=tQ(),p=rd(),h=sQ(),m=dQ(),y=DL(),x=bn(),_=nd(),v=hQ(),w=Ai(),b=mQ(),N=Yo(),E=ac(),A=1,P=2,T=4,M="[object Arguments]",k="[object Array]",j="[object Boolean]",O="[object Date]",q="[object Error]",I="[object Function]",D="[object GeneratorFunction]",U="[object Map]",W="[object Number]",Y="[object Object]",H="[object RegExp]",B="[object Set]",L="[object String]",z="[object Symbol]",K="[object WeakMap]",J="[object ArrayBuffer]",ne="[object DataView]",X="[object Float32Array]",G="[object Float64Array]",te="[object Int8Array]",re="[object Int16Array]",Q="[object Int32Array]",se="[object Uint8Array]",de="[object Uint8ClampedArray]",le="[object Uint16Array]",ue="[object Uint32Array]",he={};he[M]=he[k]=he[J]=he[ne]=he[j]=he[O]=he[X]=he[G]=he[te]=he[re]=he[Q]=he[U]=he[W]=he[Y]=he[H]=he[B]=he[L]=he[z]=he[se]=he[de]=he[le]=he[ue]=!0,he[q]=he[I]=he[K]=!1;function qe(we,ae,me,_e,Ee,xe){var Oe,Te=ae&A,Be=ae&P,Et=ae&T;if(me&&(Oe=Ee?me(we,_e,Ee,xe):me(we)),Oe!==void 0)return Oe;if(!w(we))return we;var bt=x(we);if(bt){if(Oe=h(we),!Te)return a(we,Oe)}else{var He=p(we),wn=He==I||He==D;if(_(we))return s(we,Te);if(He==Y||He==M||wn&&!Ee){if(Oe=Be||wn?{}:y(we),!Te)return Be?l(we,i(Oe,we)):o(we,r(Oe,we))}else{if(!he[He])return Ee?we:{};Oe=m(we,He,Te)}}xe||(xe=new t);var Ve=xe.get(we);if(Ve)return Ve;xe.set(we,Oe),b(we)?we.forEach(function(nn){Oe.add(qe(nn,ae,me,nn,we,xe))}):v(we)&&we.forEach(function(nn,Ht){Oe.set(Ht,qe(nn,ae,me,Ht,we,xe))});var dt=Et?Be?d:u:Be?E:N,cn=bt?void 0:dt(we);return e(cn||we,function(nn,Ht){cn&&(Ht=nn,nn=we[Ht]),n(Oe,Ht,qe(nn,ae,me,Ht,we,xe))}),Oe}return Qx=qe,Qx}var Zx,h9;function gQ(){if(h9)return Zx;h9=1;var t=FL(),e=4;function n(r){return t(r,e)}return Zx=n,Zx}var Jx,p9;function H4(){if(p9)return Jx;p9=1;function t(e){return function(){return e}}return Jx=t,Jx}var eb,m9;function vQ(){if(m9)return eb;m9=1;function t(e){return function(n,r,i){for(var s=-1,a=Object(n),o=i(n),l=o.length;l--;){var u=o[e?l:++s];if(r(a[u],u,a)===!1)break}return n}}return eb=t,eb}var tb,g9;function V4(){if(g9)return tb;g9=1;var t=vQ(),e=t();return tb=e,tb}var nb,v9;function W4(){if(v9)return nb;v9=1;var t=V4(),e=Yo();function n(r,i){return r&&t(r,i,e)}return nb=n,nb}var rb,y9;function yQ(){if(y9)return rb;y9=1;var t=Aa();function e(n,r){return function(i,s){if(i==null)return i;if(!t(i))return n(i,s);for(var a=i.length,o=r?a:-1,l=Object(i);(r?o--:++o<a)&&s(l[o],o,l)!==!1;);return i}}return rb=e,rb}var ib,x9;function N0(){if(x9)return ib;x9=1;var t=W4(),e=yQ(),n=e(t);return ib=n,ib}var sb,b9;function oc(){if(b9)return sb;b9=1;function t(e){return e}return sb=t,sb}var ab,w9;function qL(){if(w9)return ab;w9=1;var t=oc();function e(n){return typeof n=="function"?n:t}return ab=e,ab}var ob,_9;function BL(){if(_9)return ob;_9=1;var t=F4(),e=N0(),n=qL(),r=bn();function i(s,a){var o=r(s)?t:e;return o(s,n(a))}return ob=i,ob}var lb,N9;function zL(){return N9||(N9=1,lb=BL()),lb}var cb,S9;function xQ(){if(S9)return cb;S9=1;var t=N0();function e(n,r){var i=[];return t(n,function(s,a,o){r(s,a,o)&&i.push(s)}),i}return cb=e,cb}var bQ="__lodash_hash_undefined__";function wQ(t){return this.__data__.set(t,bQ),this}var _Q=wQ;function NQ(t){return this.__data__.has(t)}var SQ=NQ,EQ=D4,kQ=_Q,CQ=SQ;function Ng(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new EQ;++e<n;)this.add(t[e])}Ng.prototype.add=Ng.prototype.push=kQ;Ng.prototype.has=CQ;var $L=Ng;function jQ(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var TQ=jQ;function AQ(t,e){return t.has(e)}var UL=AQ,OQ=$L,PQ=TQ,RQ=UL,LQ=1,IQ=2;function MQ(t,e,n,r,i,s){var a=n&LQ,o=t.length,l=e.length;if(o!=l&&!(a&&l>o))return!1;var u=s.get(t),d=s.get(e);if(u&&d)return u==e&&d==t;var p=-1,h=!0,m=n&IQ?new OQ:void 0;for(s.set(t,e),s.set(e,t);++p<o;){var y=t[p],x=e[p];if(r)var _=a?r(x,y,p,e,t,s):r(y,x,p,t,e,s);if(_!==void 0){if(_)continue;h=!1;break}if(m){if(!PQ(e,function(v,w){if(!RQ(m,w)&&(y===v||i(y,v,n,r,s)))return m.push(w)})){h=!1;break}}else if(!(y===x||i(y,x,n,r,s))){h=!1;break}}return s.delete(t),s.delete(e),h}var GL=MQ;function DQ(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var FQ=DQ;function qQ(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var K4=qQ,E9=Ju(),k9=LL,BQ=Zu(),zQ=GL,$Q=FQ,UQ=K4,GQ=1,HQ=2,VQ="[object Boolean]",WQ="[object Date]",KQ="[object Error]",YQ="[object Map]",XQ="[object Number]",QQ="[object RegExp]",ZQ="[object Set]",JQ="[object String]",eZ="[object Symbol]",tZ="[object ArrayBuffer]",nZ="[object DataView]",C9=E9?E9.prototype:void 0,ub=C9?C9.valueOf:void 0;function rZ(t,e,n,r,i,s,a){switch(n){case nZ:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case tZ:return!(t.byteLength!=e.byteLength||!s(new k9(t),new k9(e)));case VQ:case WQ:case XQ:return BQ(+t,+e);case KQ:return t.name==e.name&&t.message==e.message;case QQ:case JQ:return t==e+"";case YQ:var o=$Q;case ZQ:var l=r&GQ;if(o||(o=UQ),t.size!=e.size&&!l)return!1;var u=a.get(t);if(u)return u==e;r|=HQ,a.set(t,e);var d=zQ(o(t),o(e),r,i,s,a);return a.delete(t),d;case eZ:if(ub)return ub.call(t)==ub.call(e)}return!1}var iZ=rZ,j9=PL(),sZ=1,aZ=Object.prototype,oZ=aZ.hasOwnProperty;function lZ(t,e,n,r,i,s){var a=n&sZ,o=j9(t),l=o.length,u=j9(e),d=u.length;if(l!=d&&!a)return!1;for(var p=l;p--;){var h=o[p];if(!(a?h in e:oZ.call(e,h)))return!1}var m=s.get(t),y=s.get(e);if(m&&y)return m==e&&y==t;var x=!0;s.set(t,e),s.set(e,t);for(var _=a;++p<l;){h=o[p];var v=t[h],w=e[h];if(r)var b=a?r(w,v,h,e,t,s):r(v,w,h,t,e,s);if(!(b===void 0?v===w||i(v,w,n,r,s):b)){x=!1;break}_||(_=h=="constructor")}if(x&&!_){var N=t.constructor,E=e.constructor;N!=E&&"constructor"in t&&"constructor"in e&&!(typeof N=="function"&&N instanceof N&&typeof E=="function"&&E instanceof E)&&(x=!1)}return s.delete(t),s.delete(e),x}var cZ=lZ,db=g0(),uZ=GL,dZ=iZ,fZ=cZ,T9=rd(),A9=bn(),O9=nd(),hZ=Ph,pZ=1,P9="[object Arguments]",R9="[object Array]",nm="[object Object]",mZ=Object.prototype,L9=mZ.hasOwnProperty;function gZ(t,e,n,r,i,s){var a=A9(t),o=A9(e),l=a?R9:T9(t),u=o?R9:T9(e);l=l==P9?nm:l,u=u==P9?nm:u;var d=l==nm,p=u==nm,h=l==u;if(h&&O9(t)){if(!O9(e))return!1;a=!0,d=!1}if(h&&!d)return s||(s=new db),a||hZ(t)?uZ(t,e,n,r,i,s):dZ(t,e,l,n,r,i,s);if(!(n&pZ)){var m=d&&L9.call(t,"__wrapped__"),y=p&&L9.call(e,"__wrapped__");if(m||y){var x=m?t.value():t,_=y?e.value():e;return s||(s=new db),i(x,_,n,r,s)}}return h?(s||(s=new db),fZ(t,e,n,r,i,s)):!1}var vZ=gZ,yZ=vZ,I9=Fs;function HL(t,e,n,r,i){return t===e?!0:t==null||e==null||!I9(t)&&!I9(e)?t!==t&&e!==e:yZ(t,e,n,r,HL,i)}var Y4=HL,fb,M9;function xZ(){if(M9)return fb;M9=1;var t=g0(),e=Y4,n=1,r=2;function i(s,a,o,l){var u=o.length,d=u,p=!l;if(s==null)return!d;for(s=Object(s);u--;){var h=o[u];if(p&&h[2]?h[1]!==s[h[0]]:!(h[0]in s))return!1}for(;++u<d;){h=o[u];var m=h[0],y=s[m],x=h[1];if(p&&h[2]){if(y===void 0&&!(m in s))return!1}else{var _=new t;if(l)var v=l(y,x,m,s,a,_);if(!(v===void 0?e(x,y,n|r,l,_):v))return!1}}return!0}return fb=i,fb}var hb,D9;function VL(){if(D9)return hb;D9=1;var t=Ai();function e(n){return n===n&&!t(n)}return hb=e,hb}var pb,F9;function bZ(){if(F9)return pb;F9=1;var t=VL(),e=Yo();function n(r){for(var i=e(r),s=i.length;s--;){var a=i[s],o=r[a];i[s]=[a,o,t(o)]}return i}return pb=n,pb}var mb,q9;function WL(){if(q9)return mb;q9=1;function t(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}return mb=t,mb}var gb,B9;function wZ(){if(B9)return gb;B9=1;var t=xZ(),e=bZ(),n=WL();function r(i){var s=e(i);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(a){return a===i||t(a,i,s)}}return gb=r,gb}var vb,z9;function sd(){if(z9)return vb;z9=1;var t=ic(),e=Fs,n="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==n}return vb=r,vb}var yb,$9;function X4(){if($9)return yb;$9=1;var t=bn(),e=sd(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,a){if(t(s))return!1;var o=typeof s;return o=="number"||o=="symbol"||o=="boolean"||s==null||e(s)?!0:r.test(s)||!n.test(s)||a!=null&&s in Object(a)}return yb=i,yb}var xb,U9;function _Z(){if(U9)return xb;U9=1;var t=D4,e="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var s=function(){var a=arguments,o=i?i.apply(this,a):a[0],l=s.cache;if(l.has(o))return l.get(o);var u=r.apply(this,a);return s.cache=l.set(o,u)||l,u};return s.cache=new(n.Cache||t),s}return n.Cache=t,xb=n,xb}var bb,G9;function NZ(){if(G9)return bb;G9=1;var t=_Z(),e=500;function n(r){var i=t(r,function(a){return s.size===e&&s.clear(),a}),s=i.cache;return i}return bb=n,bb}var wb,H9;function SZ(){if(H9)return wb;H9=1;var t=NZ(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=t(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(e,function(a,o,l,u){s.push(l?u.replace(n,"$1"):o||a)}),s});return wb=r,wb}var _b,V9;function S0(){if(V9)return _b;V9=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,s=Array(i);++r<i;)s[r]=n(e[r],r,e);return s}return _b=t,_b}var Nb,W9;function EZ(){if(W9)return Nb;W9=1;var t=Ju(),e=S0(),n=bn(),r=sd(),i=1/0,s=t?t.prototype:void 0,a=s?s.toString:void 0;function o(l){if(typeof l=="string")return l;if(n(l))return e(l,o)+"";if(r(l))return a?a.call(l):"";var u=l+"";return u=="0"&&1/l==-i?"-0":u}return Nb=o,Nb}var Sb,K9;function KL(){if(K9)return Sb;K9=1;var t=EZ();function e(n){return n==null?"":t(n)}return Sb=e,Sb}var Eb,Y9;function E0(){if(Y9)return Eb;Y9=1;var t=bn(),e=X4(),n=SZ(),r=KL();function i(s,a){return t(s)?s:e(s,a)?[s]:n(r(s))}return Eb=i,Eb}var kb,X9;function Rh(){if(X9)return kb;X9=1;var t=sd(),e=1/0;function n(r){if(typeof r=="string"||t(r))return r;var i=r+"";return i=="0"&&1/r==-e?"-0":i}return kb=n,kb}var Cb,Q9;function k0(){if(Q9)return Cb;Q9=1;var t=E0(),e=Rh();function n(r,i){i=t(i,r);for(var s=0,a=i.length;r!=null&&s<a;)r=r[e(i[s++])];return s&&s==a?r:void 0}return Cb=n,Cb}var jb,Z9;function kZ(){if(Z9)return jb;Z9=1;var t=k0();function e(n,r,i){var s=n==null?void 0:t(n,r);return s===void 0?i:s}return jb=e,jb}var Tb,J9;function CZ(){if(J9)return Tb;J9=1;function t(e,n){return e!=null&&n in Object(e)}return Tb=t,Tb}var Ab,eC;function YL(){if(eC)return Ab;eC=1;var t=E0(),e=Oh(),n=bn(),r=x0(),i=q4(),s=Rh();function a(o,l,u){l=t(l,o);for(var d=-1,p=l.length,h=!1;++d<p;){var m=s(l[d]);if(!(h=o!=null&&u(o,m)))break;o=o[m]}return h||++d!=p?h:(p=o==null?0:o.length,!!p&&i(p)&&r(m,p)&&(n(o)||e(o)))}return Ab=a,Ab}var Ob,tC;function XL(){if(tC)return Ob;tC=1;var t=CZ(),e=YL();function n(r,i){return r!=null&&e(r,i,t)}return Ob=n,Ob}var Pb,nC;function jZ(){if(nC)return Pb;nC=1;var t=Y4,e=kZ(),n=XL(),r=X4(),i=VL(),s=WL(),a=Rh(),o=1,l=2;function u(d,p){return r(d)&&i(p)?s(a(d),p):function(h){var m=e(h,d);return m===void 0&&m===p?n(h,d):t(p,m,o|l)}}return Pb=u,Pb}var Rb,rC;function QL(){if(rC)return Rb;rC=1;function t(e){return function(n){return n==null?void 0:n[e]}}return Rb=t,Rb}var Lb,iC;function TZ(){if(iC)return Lb;iC=1;var t=k0();function e(n){return function(r){return t(r,n)}}return Lb=e,Lb}var Ib,sC;function AZ(){if(sC)return Ib;sC=1;var t=QL(),e=TZ(),n=X4(),r=Rh();function i(s){return n(s)?t(r(s)):e(s)}return Ib=i,Ib}var Mb,aC;function Oa(){if(aC)return Mb;aC=1;var t=wZ(),e=jZ(),n=oc(),r=bn(),i=AZ();function s(a){return typeof a=="function"?a:a==null?n:typeof a=="object"?r(a)?e(a[0],a[1]):t(a):i(a)}return Mb=s,Mb}var Db,oC;function ZL(){if(oC)return Db;oC=1;var t=jL(),e=xQ(),n=Oa(),r=bn();function i(s,a){var o=r(s)?t:e;return o(s,n(a,3))}return Db=i,Db}var Fb,lC;function OZ(){if(lC)return Fb;lC=1;var t=Object.prototype,e=t.hasOwnProperty;function n(r,i){return r!=null&&e.call(r,i)}return Fb=n,Fb}var qb,cC;function JL(){if(cC)return qb;cC=1;var t=OZ(),e=YL();function n(r,i){return r!=null&&e(r,i,t)}return qb=n,qb}var Bb,uC;function PZ(){if(uC)return Bb;uC=1;var t=z4(),e=rd(),n=Oh(),r=bn(),i=Aa(),s=nd(),a=w0(),o=Ph,l="[object Map]",u="[object Set]",d=Object.prototype,p=d.hasOwnProperty;function h(m){if(m==null)return!0;if(i(m)&&(r(m)||typeof m=="string"||typeof m.splice=="function"||s(m)||o(m)||n(m)))return!m.length;var y=e(m);if(y==l||y==u)return!m.size;if(a(m))return!t(m).length;for(var x in m)if(p.call(m,x))return!1;return!0}return Bb=h,Bb}var zb,dC;function eI(){if(dC)return zb;dC=1;function t(e){return e===void 0}return zb=t,zb}var $b,fC;function tI(){if(fC)return $b;fC=1;var t=N0(),e=Aa();function n(r,i){var s=-1,a=e(r)?Array(r.length):[];return t(r,function(o,l,u){a[++s]=i(o,l,u)}),a}return $b=n,$b}var Ub,hC;function nI(){if(hC)return Ub;hC=1;var t=S0(),e=Oa(),n=tI(),r=bn();function i(s,a){var o=r(s)?t:n;return o(s,e(a,3))}return Ub=i,Ub}var Gb,pC;function RZ(){if(pC)return Gb;pC=1;function t(e,n,r,i){var s=-1,a=e==null?0:e.length;for(i&&a&&(r=e[++s]);++s<a;)r=n(r,e[s],s,e);return r}return Gb=t,Gb}var Hb,mC;function LZ(){if(mC)return Hb;mC=1;function t(e,n,r,i,s){return s(e,function(a,o,l){r=i?(i=!1,a):n(r,a,o,l)}),r}return Hb=t,Hb}var Vb,gC;function rI(){if(gC)return Vb;gC=1;var t=RZ(),e=N0(),n=Oa(),r=LZ(),i=bn();function s(a,o,l){var u=i(a)?t:r,d=arguments.length<3;return u(a,n(o,4),l,d,e)}return Vb=s,Vb}var Wb,vC;function IZ(){if(vC)return Wb;vC=1;var t=ic(),e=bn(),n=Fs,r="[object String]";function i(s){return typeof s=="string"||!e(s)&&n(s)&&t(s)==r}return Wb=i,Wb}var Kb,yC;function MZ(){if(yC)return Kb;yC=1;var t=QL(),e=t("length");return Kb=e,Kb}var Yb,xC;function DZ(){if(xC)return Yb;xC=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,s="\\ufe0e\\ufe0f",a="\\u200d",o=RegExp("["+a+t+i+s+"]");function l(u){return o.test(u)}return Yb=l,Yb}var Xb,bC;function FZ(){if(bC)return Xb;bC=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,s="\\ufe0e\\ufe0f",a="["+t+"]",o="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",u="(?:"+o+"|"+l+")",d="[^"+t+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",m="\\u200d",y=u+"?",x="["+s+"]?",_="(?:"+m+"(?:"+[d,p,h].join("|")+")"+x+y+")*",v=x+y+_,w="(?:"+[d+o+"?",o,p,h,a].join("|")+")",b=RegExp(l+"(?="+l+")|"+w+v,"g");function N(E){for(var A=b.lastIndex=0;b.test(E);)++A;return A}return Xb=N,Xb}var Qb,wC;function qZ(){if(wC)return Qb;wC=1;var t=MZ(),e=DZ(),n=FZ();function r(i){return e(i)?n(i):t(i)}return Qb=r,Qb}var Zb,_C;function BZ(){if(_C)return Zb;_C=1;var t=z4(),e=rd(),n=Aa(),r=IZ(),i=qZ(),s="[object Map]",a="[object Set]";function o(l){if(l==null)return 0;if(n(l))return r(l)?i(l):l.length;var u=e(l);return u==s||u==a?l.size:t(l).length}return Zb=o,Zb}var Jb,NC;function zZ(){if(NC)return Jb;NC=1;var t=F4(),e=ML(),n=W4(),r=Oa(),i=_0(),s=bn(),a=nd(),o=Th(),l=Ai(),u=Ph;function d(p,h,m){var y=s(p),x=y||a(p)||u(p);if(h=r(h,4),m==null){var _=p&&p.constructor;x?m=y?new _:[]:l(p)?m=o(_)?e(i(p)):{}:m={}}return(x?t:n)(p,function(v,w,b){return h(m,v,w,b)}),m}return Jb=d,Jb}var e2,SC;function $Z(){if(SC)return e2;SC=1;var t=Ju(),e=Oh(),n=bn(),r=t?t.isConcatSpreadable:void 0;function i(s){return n(s)||e(s)||!!(r&&s&&s[r])}return e2=i,e2}var t2,EC;function Q4(){if(EC)return t2;EC=1;var t=U4(),e=$Z();function n(r,i,s,a,o){var l=-1,u=r.length;for(s||(s=e),o||(o=[]);++l<u;){var d=r[l];i>0&&s(d)?i>1?n(d,i-1,s,a,o):t(o,d):a||(o[o.length]=d)}return o}return t2=n,t2}var n2,kC;function UZ(){if(kC)return n2;kC=1;function t(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}return n2=t,n2}var r2,CC;function iI(){if(CC)return r2;CC=1;var t=UZ(),e=Math.max;function n(r,i,s){return i=e(i===void 0?r.length-1:i,0),function(){for(var a=arguments,o=-1,l=e(a.length-i,0),u=Array(l);++o<l;)u[o]=a[i+o];o=-1;for(var d=Array(i+1);++o<i;)d[o]=a[o];return d[i]=s(u),t(r,this,d)}}return r2=n,r2}var i2,jC;function GZ(){if(jC)return i2;jC=1;var t=H4(),e=NL(),n=oc(),r=e?function(i,s){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(s),writable:!0})}:n;return i2=r,i2}var s2,TC;function HZ(){if(TC)return s2;TC=1;var t=800,e=16,n=Date.now;function r(i){var s=0,a=0;return function(){var o=n(),l=e-(o-a);if(a=o,l>0){if(++s>=t)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return s2=r,s2}var a2,AC;function sI(){if(AC)return a2;AC=1;var t=GZ(),e=HZ(),n=e(t);return a2=n,a2}var o2,OC;function C0(){if(OC)return o2;OC=1;var t=oc(),e=iI(),n=sI();function r(i,s){return n(e(i,s,t),i+"")}return o2=r,o2}var l2,PC;function aI(){if(PC)return l2;PC=1;function t(e,n,r,i){for(var s=e.length,a=r+(i?1:-1);i?a--:++a<s;)if(n(e[a],a,e))return a;return-1}return l2=t,l2}var c2,RC;function VZ(){if(RC)return c2;RC=1;function t(e){return e!==e}return c2=t,c2}var u2,LC;function WZ(){if(LC)return u2;LC=1;function t(e,n,r){for(var i=r-1,s=e.length;++i<s;)if(e[i]===n)return i;return-1}return u2=t,u2}var d2,IC;function KZ(){if(IC)return d2;IC=1;var t=aI(),e=VZ(),n=WZ();function r(i,s,a){return s===s?n(i,s,a):t(i,e,a)}return d2=r,d2}var f2,MC;function YZ(){if(MC)return f2;MC=1;var t=KZ();function e(n,r){var i=n==null?0:n.length;return!!i&&t(n,r,0)>-1}return f2=e,f2}var h2,DC;function XZ(){if(DC)return h2;DC=1;function t(e,n,r){for(var i=-1,s=e==null?0:e.length;++i<s;)if(r(n,e[i]))return!0;return!1}return h2=t,h2}var p2,FC;function QZ(){if(FC)return p2;FC=1;function t(){}return p2=t,p2}var m2,qC;function ZZ(){if(qC)return m2;qC=1;var t=RL(),e=QZ(),n=K4,r=1/0,i=t&&1/n(new t([,-0]))[1]==r?function(s){return new t(s)}:e;return m2=i,m2}var g2,BC;function JZ(){if(BC)return g2;BC=1;var t=$L,e=YZ(),n=XZ(),r=UL,i=ZZ(),s=K4,a=200;function o(l,u,d){var p=-1,h=e,m=l.length,y=!0,x=[],_=x;if(d)y=!1,h=n;else if(m>=a){var v=u?null:i(l);if(v)return s(v);y=!1,h=r,_=new t}else _=u?[]:x;e:for(;++p<m;){var w=l[p],b=u?u(w):w;if(w=d||w!==0?w:0,y&&b===b){for(var N=_.length;N--;)if(_[N]===b)continue e;u&&_.push(b),x.push(w)}else h(_,b,d)||(_!==x&&_.push(b),x.push(w))}return x}return g2=o,g2}var v2,zC;function oI(){if(zC)return v2;zC=1;var t=Aa(),e=Fs;function n(r){return e(r)&&t(r)}return v2=n,v2}var y2,$C;function eJ(){if($C)return y2;$C=1;var t=Q4(),e=C0(),n=JZ(),r=oI(),i=e(function(s){return n(t(s,1,r,!0))});return y2=i,y2}var x2,UC;function tJ(){if(UC)return x2;UC=1;var t=S0();function e(n,r){return t(r,function(i){return n[i]})}return x2=e,x2}var b2,GC;function lI(){if(GC)return b2;GC=1;var t=tJ(),e=Yo();function n(r){return r==null?[]:t(r,e(r))}return b2=n,b2}var w2,HC;function Oi(){if(HC)return w2;HC=1;var t;if(typeof I4=="function")try{t={clone:gQ(),constant:H4(),each:zL(),filter:ZL(),has:JL(),isArray:bn(),isEmpty:PZ(),isFunction:Th(),isUndefined:eI(),keys:Yo(),map:nI(),reduce:rI(),size:BZ(),transform:zZ(),union:eJ(),values:lI()}}catch{}return t||(t=window._),w2=t,w2}var _2,VC;function Z4(){if(VC)return _2;VC=1;var t=Oi();_2=i;var e="\0",n="\0",r="";function i(d){this._isDirected=t.has(d,"directed")?d.directed:!0,this._isMultigraph=t.has(d,"multigraph")?d.multigraph:!1,this._isCompound=t.has(d,"compound")?d.compound:!1,this._label=void 0,this._defaultNodeLabelFn=t.constant(void 0),this._defaultEdgeLabelFn=t.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(d){return this._label=d,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(d){return t.isFunction(d)||(d=t.constant(d)),this._defaultNodeLabelFn=d,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return t.keys(this._nodes)},i.prototype.sources=function(){var d=this;return t.filter(this.nodes(),function(p){return t.isEmpty(d._in[p])})},i.prototype.sinks=function(){var d=this;return t.filter(this.nodes(),function(p){return t.isEmpty(d._out[p])})},i.prototype.setNodes=function(d,p){var h=arguments,m=this;return t.each(d,function(y){h.length>1?m.setNode(y,p):m.setNode(y)}),this},i.prototype.setNode=function(d,p){return t.has(this._nodes,d)?(arguments.length>1&&(this._nodes[d]=p),this):(this._nodes[d]=arguments.length>1?p:this._defaultNodeLabelFn(d),this._isCompound&&(this._parent[d]=n,this._children[d]={},this._children[n][d]=!0),this._in[d]={},this._preds[d]={},this._out[d]={},this._sucs[d]={},++this._nodeCount,this)},i.prototype.node=function(d){return this._nodes[d]},i.prototype.hasNode=function(d){return t.has(this._nodes,d)},i.prototype.removeNode=function(d){var p=this;if(t.has(this._nodes,d)){var h=function(m){p.removeEdge(p._edgeObjs[m])};delete this._nodes[d],this._isCompound&&(this._removeFromParentsChildList(d),delete this._parent[d],t.each(this.children(d),function(m){p.setParent(m)}),delete this._children[d]),t.each(t.keys(this._in[d]),h),delete this._in[d],delete this._preds[d],t.each(t.keys(this._out[d]),h),delete this._out[d],delete this._sucs[d],--this._nodeCount}return this},i.prototype.setParent=function(d,p){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(t.isUndefined(p))p=n;else{p+="";for(var h=p;!t.isUndefined(h);h=this.parent(h))if(h===d)throw new Error("Setting "+p+" as parent of "+d+" would create a cycle");this.setNode(p)}return this.setNode(d),this._removeFromParentsChildList(d),this._parent[d]=p,this._children[p][d]=!0,this},i.prototype._removeFromParentsChildList=function(d){delete this._children[this._parent[d]][d]},i.prototype.parent=function(d){if(this._isCompound){var p=this._parent[d];if(p!==n)return p}},i.prototype.children=function(d){if(t.isUndefined(d)&&(d=n),this._isCompound){var p=this._children[d];if(p)return t.keys(p)}else{if(d===n)return this.nodes();if(this.hasNode(d))return[]}},i.prototype.predecessors=function(d){var p=this._preds[d];if(p)return t.keys(p)},i.prototype.successors=function(d){var p=this._sucs[d];if(p)return t.keys(p)},i.prototype.neighbors=function(d){var p=this.predecessors(d);if(p)return t.union(p,this.successors(d))},i.prototype.isLeaf=function(d){var p;return this.isDirected()?p=this.successors(d):p=this.neighbors(d),p.length===0},i.prototype.filterNodes=function(d){var p=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});p.setGraph(this.graph());var h=this;t.each(this._nodes,function(x,_){d(_)&&p.setNode(_,x)}),t.each(this._edgeObjs,function(x){p.hasNode(x.v)&&p.hasNode(x.w)&&p.setEdge(x,h.edge(x))});var m={};function y(x){var _=h.parent(x);return _===void 0||p.hasNode(_)?(m[x]=_,_):_ in m?m[_]:y(_)}return this._isCompound&&t.each(p.nodes(),function(x){p.setParent(x,y(x))}),p},i.prototype.setDefaultEdgeLabel=function(d){return t.isFunction(d)||(d=t.constant(d)),this._defaultEdgeLabelFn=d,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return t.values(this._edgeObjs)},i.prototype.setPath=function(d,p){var h=this,m=arguments;return t.reduce(d,function(y,x){return m.length>1?h.setEdge(y,x,p):h.setEdge(y,x),x}),this},i.prototype.setEdge=function(){var d,p,h,m,y=!1,x=arguments[0];typeof x=="object"&&x!==null&&"v"in x?(d=x.v,p=x.w,h=x.name,arguments.length===2&&(m=arguments[1],y=!0)):(d=x,p=arguments[1],h=arguments[3],arguments.length>2&&(m=arguments[2],y=!0)),d=""+d,p=""+p,t.isUndefined(h)||(h=""+h);var _=o(this._isDirected,d,p,h);if(t.has(this._edgeLabels,_))return y&&(this._edgeLabels[_]=m),this;if(!t.isUndefined(h)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(d),this.setNode(p),this._edgeLabels[_]=y?m:this._defaultEdgeLabelFn(d,p,h);var v=l(this._isDirected,d,p,h);return d=v.v,p=v.w,Object.freeze(v),this._edgeObjs[_]=v,s(this._preds[p],d),s(this._sucs[d],p),this._in[p][_]=v,this._out[d][_]=v,this._edgeCount++,this},i.prototype.edge=function(d,p,h){var m=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,d,p,h);return this._edgeLabels[m]},i.prototype.hasEdge=function(d,p,h){var m=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,d,p,h);return t.has(this._edgeLabels,m)},i.prototype.removeEdge=function(d,p,h){var m=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,d,p,h),y=this._edgeObjs[m];return y&&(d=y.v,p=y.w,delete this._edgeLabels[m],delete this._edgeObjs[m],a(this._preds[p],d),a(this._sucs[d],p),delete this._in[p][m],delete this._out[d][m],this._edgeCount--),this},i.prototype.inEdges=function(d,p){var h=this._in[d];if(h){var m=t.values(h);return p?t.filter(m,function(y){return y.v===p}):m}},i.prototype.outEdges=function(d,p){var h=this._out[d];if(h){var m=t.values(h);return p?t.filter(m,function(y){return y.w===p}):m}},i.prototype.nodeEdges=function(d,p){var h=this.inEdges(d,p);if(h)return h.concat(this.outEdges(d,p))};function s(d,p){d[p]?d[p]++:d[p]=1}function a(d,p){--d[p]||delete d[p]}function o(d,p,h,m){var y=""+p,x=""+h;if(!d&&y>x){var _=y;y=x,x=_}return y+r+x+r+(t.isUndefined(m)?e:m)}function l(d,p,h,m){var y=""+p,x=""+h;if(!d&&y>x){var _=y;y=x,x=_}var v={v:y,w:x};return m&&(v.name=m),v}function u(d,p){return o(d,p.v,p.w,p.name)}return _2}var N2,WC;function nJ(){return WC||(WC=1,N2="2.1.8"),N2}var S2,KC;function rJ(){return KC||(KC=1,S2={Graph:Z4(),version:nJ()}),S2}var E2,YC;function iJ(){if(YC)return E2;YC=1;var t=Oi(),e=Z4();E2={write:n,read:s};function n(a){var o={options:{directed:a.isDirected(),multigraph:a.isMultigraph(),compound:a.isCompound()},nodes:r(a),edges:i(a)};return t.isUndefined(a.graph())||(o.value=t.clone(a.graph())),o}function r(a){return t.map(a.nodes(),function(o){var l=a.node(o),u=a.parent(o),d={v:o};return t.isUndefined(l)||(d.value=l),t.isUndefined(u)||(d.parent=u),d})}function i(a){return t.map(a.edges(),function(o){var l=a.edge(o),u={v:o.v,w:o.w};return t.isUndefined(o.name)||(u.name=o.name),t.isUndefined(l)||(u.value=l),u})}function s(a){var o=new e(a.options).setGraph(a.value);return t.each(a.nodes,function(l){o.setNode(l.v,l.value),l.parent&&o.setParent(l.v,l.parent)}),t.each(a.edges,function(l){o.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),o}return E2}var k2,XC;function sJ(){if(XC)return k2;XC=1;var t=Oi();k2=e;function e(n){var r={},i=[],s;function a(o){t.has(r,o)||(r[o]=!0,s.push(o),t.each(n.successors(o),a),t.each(n.predecessors(o),a))}return t.each(n.nodes(),function(o){s=[],a(o),s.length&&i.push(s)}),i}return k2}var C2,QC;function cI(){if(QC)return C2;QC=1;var t=Oi();C2=e;function e(){this._arr=[],this._keyIndices={}}return e.prototype.size=function(){return this._arr.length},e.prototype.keys=function(){return this._arr.map(function(n){return n.key})},e.prototype.has=function(n){return t.has(this._keyIndices,n)},e.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},e.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},e.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!t.has(i,n)){var s=this._arr,a=s.length;return i[n]=a,s.push({key:n,priority:r}),this._decrease(a),!0}return!1},e.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},e.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},e.prototype._heapify=function(n){var r=this._arr,i=2*n,s=i+1,a=n;i<r.length&&(a=r[i].priority<r[a].priority?i:a,s<r.length&&(a=r[s].priority<r[a].priority?s:a),a!==n&&(this._swap(n,a),this._heapify(a)))},e.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,s;n!==0&&(s=n>>1,!(r[s].priority<i));)this._swap(n,s),n=s},e.prototype._swap=function(n,r){var i=this._arr,s=this._keyIndices,a=i[n],o=i[r];i[n]=o,i[r]=a,s[o.key]=n,s[a.key]=r},C2}var j2,ZC;function uI(){if(ZC)return j2;ZC=1;var t=Oi(),e=cI();j2=r;var n=t.constant(1);function r(s,a,o,l){return i(s,String(a),o||n,l||function(u){return s.outEdges(u)})}function i(s,a,o,l){var u={},d=new e,p,h,m=function(y){var x=y.v!==p?y.v:y.w,_=u[x],v=o(y),w=h.distance+v;if(v<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+y+" Weight: "+v);w<_.distance&&(_.distance=w,_.predecessor=p,d.decrease(x,w))};for(s.nodes().forEach(function(y){var x=y===a?0:Number.POSITIVE_INFINITY;u[y]={distance:x},d.add(y,x)});d.size()>0&&(p=d.removeMin(),h=u[p],h.distance!==Number.POSITIVE_INFINITY);)l(p).forEach(m);return u}return j2}var T2,JC;function aJ(){if(JC)return T2;JC=1;var t=uI(),e=Oi();T2=n;function n(r,i,s){return e.transform(r.nodes(),function(a,o){a[o]=t(r,o,i,s)},{})}return T2}var A2,e7;function dI(){if(e7)return A2;e7=1;var t=Oi();A2=e;function e(n){var r=0,i=[],s={},a=[];function o(l){var u=s[l]={onStack:!0,lowlink:r,index:r++};if(i.push(l),n.successors(l).forEach(function(h){t.has(s,h)?s[h].onStack&&(u.lowlink=Math.min(u.lowlink,s[h].index)):(o(h),u.lowlink=Math.min(u.lowlink,s[h].lowlink))}),u.lowlink===u.index){var d=[],p;do p=i.pop(),s[p].onStack=!1,d.push(p);while(l!==p);a.push(d)}}return n.nodes().forEach(function(l){t.has(s,l)||o(l)}),a}return A2}var O2,t7;function oJ(){if(t7)return O2;t7=1;var t=Oi(),e=dI();O2=n;function n(r){return t.filter(e(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return O2}var P2,n7;function lJ(){if(n7)return P2;n7=1;var t=Oi();P2=n;var e=t.constant(1);function n(i,s,a){return r(i,s||e,a||function(o){return i.outEdges(o)})}function r(i,s,a){var o={},l=i.nodes();return l.forEach(function(u){o[u]={},o[u][u]={distance:0},l.forEach(function(d){u!==d&&(o[u][d]={distance:Number.POSITIVE_INFINITY})}),a(u).forEach(function(d){var p=d.v===u?d.w:d.v,h=s(d);o[u][p]={distance:h,predecessor:u}})}),l.forEach(function(u){var d=o[u];l.forEach(function(p){var h=o[p];l.forEach(function(m){var y=h[u],x=d[m],_=h[m],v=y.distance+x.distance;v<_.distance&&(_.distance=v,_.predecessor=x.predecessor)})})}),o}return P2}var R2,r7;function fI(){if(r7)return R2;r7=1;var t=Oi();R2=e,e.CycleException=n;function e(r){var i={},s={},a=[];function o(l){if(t.has(s,l))throw new n;t.has(i,l)||(s[l]=!0,i[l]=!0,t.each(r.predecessors(l),o),delete s[l],a.push(l))}if(t.each(r.sinks(),o),t.size(i)!==r.nodeCount())throw new n;return a}function n(){}return n.prototype=new Error,R2}var L2,i7;function cJ(){if(i7)return L2;i7=1;var t=fI();L2=e;function e(n){try{t(n)}catch(r){if(r instanceof t.CycleException)return!1;throw r}return!0}return L2}var I2,s7;function hI(){if(s7)return I2;s7=1;var t=Oi();I2=e;function e(r,i,s){t.isArray(i)||(i=[i]);var a=(r.isDirected()?r.successors:r.neighbors).bind(r),o=[],l={};return t.each(i,function(u){if(!r.hasNode(u))throw new Error("Graph does not have node: "+u);n(r,u,s==="post",l,a,o)}),o}function n(r,i,s,a,o,l){t.has(a,i)||(a[i]=!0,s||l.push(i),t.each(o(i),function(u){n(r,u,s,a,o,l)}),s&&l.push(i))}return I2}var M2,a7;function uJ(){if(a7)return M2;a7=1;var t=hI();M2=e;function e(n,r){return t(n,r,"post")}return M2}var D2,o7;function dJ(){if(o7)return D2;o7=1;var t=hI();D2=e;function e(n,r){return t(n,r,"pre")}return D2}var F2,l7;function fJ(){if(l7)return F2;l7=1;var t=Oi(),e=Z4(),n=cI();F2=r;function r(i,s){var a=new e,o={},l=new n,u;function d(h){var m=h.v===u?h.w:h.v,y=l.priority(m);if(y!==void 0){var x=s(h);x<y&&(o[m]=u,l.decrease(m,x))}}if(i.nodeCount()===0)return a;t.each(i.nodes(),function(h){l.add(h,Number.POSITIVE_INFINITY),a.setNode(h)}),l.decrease(i.nodes()[0],0);for(var p=!1;l.size()>0;){if(u=l.removeMin(),t.has(o,u))a.setEdge(u,o[u]);else{if(p)throw new Error("Input graph is not connected: "+i);p=!0}i.nodeEdges(u).forEach(d)}return a}return F2}var q2,c7;function hJ(){return c7||(c7=1,q2={components:sJ(),dijkstra:uI(),dijkstraAll:aJ(),findCycles:oJ(),floydWarshall:lJ(),isAcyclic:cJ(),postorder:uJ(),preorder:dJ(),prim:fJ(),tarjan:dI(),topsort:fI()}),q2}var B2,u7;function pJ(){if(u7)return B2;u7=1;var t=rJ();return B2={Graph:t.Graph,json:iJ(),alg:hJ(),version:t.version},B2}var Sg;if(typeof I4=="function")try{Sg=pJ()}catch{}Sg||(Sg=window.graphlib);var ss=Sg,z2,d7;function mJ(){if(d7)return z2;d7=1;var t=FL(),e=1,n=4;function r(i){return t(i,e|n)}return z2=r,z2}var $2,f7;function j0(){if(f7)return $2;f7=1;var t=Zu(),e=Aa(),n=x0(),r=Ai();function i(s,a,o){if(!r(o))return!1;var l=typeof a;return(l=="number"?e(o)&&n(a,o.length):l=="string"&&a in o)?t(o[a],s):!1}return $2=i,$2}var U2,h7;function gJ(){if(h7)return U2;h7=1;var t=C0(),e=Zu(),n=j0(),r=ac(),i=Object.prototype,s=i.hasOwnProperty,a=t(function(o,l){o=Object(o);var u=-1,d=l.length,p=d>2?l[2]:void 0;for(p&&n(l[0],l[1],p)&&(d=1);++u<d;)for(var h=l[u],m=r(h),y=-1,x=m.length;++y<x;){var _=m[y],v=o[_];(v===void 0||e(v,i[_])&&!s.call(o,_))&&(o[_]=h[_])}return o});return U2=a,U2}var G2,p7;function vJ(){if(p7)return G2;p7=1;var t=Oa(),e=Aa(),n=Yo();function r(i){return function(s,a,o){var l=Object(s);if(!e(s)){var u=t(a,3);s=n(s),a=function(p){return u(l[p],p,l)}}var d=i(s,a,o);return d>-1?l[u?s[d]:d]:void 0}}return G2=r,G2}var H2,m7;function yJ(){if(m7)return H2;m7=1;var t=/\s/;function e(n){for(var r=n.length;r--&&t.test(n.charAt(r)););return r}return H2=e,H2}var V2,g7;function xJ(){if(g7)return V2;g7=1;var t=yJ(),e=/^\s+/;function n(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return V2=n,V2}var W2,v7;function bJ(){if(v7)return W2;v7=1;var t=xJ(),e=Ai(),n=sd(),r=0/0,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt;function l(u){if(typeof u=="number")return u;if(n(u))return r;if(e(u)){var d=typeof u.valueOf=="function"?u.valueOf():u;u=e(d)?d+"":d}if(typeof u!="string")return u===0?u:+u;u=t(u);var p=s.test(u);return p||a.test(u)?o(u.slice(2),p?2:8):i.test(u)?r:+u}return W2=l,W2}var K2,y7;function pI(){if(y7)return K2;y7=1;var t=bJ(),e=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-e){var s=i<0?-1:1;return s*n}return i===i?i:0}return K2=r,K2}var Y2,x7;function wJ(){if(x7)return Y2;x7=1;var t=pI();function e(n){var r=t(n),i=r%1;return r===r?i?r-i:r:0}return Y2=e,Y2}var X2,b7;function _J(){if(b7)return X2;b7=1;var t=aI(),e=Oa(),n=wJ(),r=Math.max;function i(s,a,o){var l=s==null?0:s.length;if(!l)return-1;var u=o==null?0:n(o);return u<0&&(u=r(l+u,0)),t(s,e(a,3),u)}return X2=i,X2}var Q2,w7;function NJ(){if(w7)return Q2;w7=1;var t=vJ(),e=_J(),n=t(e);return Q2=n,Q2}var Z2,_7;function mI(){if(_7)return Z2;_7=1;var t=Q4();function e(n){var r=n==null?0:n.length;return r?t(n,1):[]}return Z2=e,Z2}var J2,N7;function SJ(){if(N7)return J2;N7=1;var t=V4(),e=qL(),n=ac();function r(i,s){return i==null?i:t(i,e(s),n)}return J2=r,J2}var ew,S7;function EJ(){if(S7)return ew;S7=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return ew=t,ew}var tw,E7;function kJ(){if(E7)return tw;E7=1;var t=v0(),e=W4(),n=Oa();function r(i,s){var a={};return s=n(s,3),e(i,function(o,l,u){t(a,l,s(o,l,u))}),a}return tw=r,tw}var nw,k7;function J4(){if(k7)return nw;k7=1;var t=sd();function e(n,r,i){for(var s=-1,a=n.length;++s<a;){var o=n[s],l=r(o);if(l!=null&&(u===void 0?l===l&&!t(l):i(l,u)))var u=l,d=o}return d}return nw=e,nw}var rw,C7;function CJ(){if(C7)return rw;C7=1;function t(e,n){return e>n}return rw=t,rw}var iw,j7;function jJ(){if(j7)return iw;j7=1;var t=J4(),e=CJ(),n=oc();function r(i){return i&&i.length?t(i,n,e):void 0}return iw=r,iw}var sw,T7;function gI(){if(T7)return sw;T7=1;var t=v0(),e=Zu();function n(r,i,s){(s!==void 0&&!e(r[i],s)||s===void 0&&!(i in r))&&t(r,i,s)}return sw=n,sw}var aw,A7;function TJ(){if(A7)return aw;A7=1;var t=ic(),e=_0(),n=Fs,r="[object Object]",i=Function.prototype,s=Object.prototype,a=i.toString,o=s.hasOwnProperty,l=a.call(Object);function u(d){if(!n(d)||t(d)!=r)return!1;var p=e(d);if(p===null)return!0;var h=o.call(p,"constructor")&&p.constructor;return typeof h=="function"&&h instanceof h&&a.call(h)==l}return aw=u,aw}var ow,O7;function vI(){if(O7)return ow;O7=1;function t(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}return ow=t,ow}var lw,P7;function AJ(){if(P7)return lw;P7=1;var t=Ah(),e=ac();function n(r){return t(r,e(r))}return lw=n,lw}var cw,R7;function OJ(){if(R7)return cw;R7=1;var t=gI(),e=kL(),n=IL(),r=CL(),i=DL(),s=Oh(),a=bn(),o=oI(),l=nd(),u=Th(),d=Ai(),p=TJ(),h=Ph,m=vI(),y=AJ();function x(_,v,w,b,N,E,A){var P=m(_,w),T=m(v,w),M=A.get(T);if(M){t(_,w,M);return}var k=E?E(P,T,w+"",_,v,A):void 0,j=k===void 0;if(j){var O=a(T),q=!O&&l(T),I=!O&&!q&&h(T);k=T,O||q||I?a(P)?k=P:o(P)?k=r(P):q?(j=!1,k=e(T,!0)):I?(j=!1,k=n(T,!0)):k=[]:p(T)||s(T)?(k=P,s(P)?k=y(P):(!d(P)||u(P))&&(k=i(T))):j=!1}j&&(A.set(T,k),N(k,T,b,E,A),A.delete(T)),t(_,w,k)}return cw=x,cw}var uw,L7;function PJ(){if(L7)return uw;L7=1;var t=g0(),e=gI(),n=V4(),r=OJ(),i=Ai(),s=ac(),a=vI();function o(l,u,d,p,h){l!==u&&n(u,function(m,y){if(h||(h=new t),i(m))r(l,u,y,d,o,p,h);else{var x=p?p(a(l,y),m,y+"",l,u,h):void 0;x===void 0&&(x=m),e(l,y,x)}},s)}return uw=o,uw}var dw,I7;function RJ(){if(I7)return dw;I7=1;var t=C0(),e=j0();function n(r){return t(function(i,s){var a=-1,o=s.length,l=o>1?s[o-1]:void 0,u=o>2?s[2]:void 0;for(l=r.length>3&&typeof l=="function"?(o--,l):void 0,u&&e(s[0],s[1],u)&&(l=o<3?void 0:l,o=1),i=Object(i);++a<o;){var d=s[a];d&&r(i,d,a,l)}return i})}return dw=n,dw}var fw,M7;function LJ(){if(M7)return fw;M7=1;var t=PJ(),e=RJ(),n=e(function(r,i,s){t(r,i,s)});return fw=n,fw}var hw,D7;function yI(){if(D7)return hw;D7=1;function t(e,n){return e<n}return hw=t,hw}var pw,F7;function IJ(){if(F7)return pw;F7=1;var t=J4(),e=yI(),n=oc();function r(i){return i&&i.length?t(i,n,e):void 0}return pw=r,pw}var mw,q7;function MJ(){if(q7)return mw;q7=1;var t=J4(),e=Oa(),n=yI();function r(i,s){return i&&i.length?t(i,e(s,2),n):void 0}return mw=r,mw}var gw,B7;function DJ(){if(B7)return gw;B7=1;var t=is(),e=function(){return t.Date.now()};return gw=e,gw}var vw,z7;function FJ(){if(z7)return vw;z7=1;var t=y0(),e=E0(),n=x0(),r=Ai(),i=Rh();function s(a,o,l,u){if(!r(a))return a;o=e(o,a);for(var d=-1,p=o.length,h=p-1,m=a;m!=null&&++d<p;){var y=i(o[d]),x=l;if(y==="__proto__"||y==="constructor"||y==="prototype")return a;if(d!=h){var _=m[y];x=u?u(_,y,m):void 0,x===void 0&&(x=r(_)?_:n(o[d+1])?[]:{})}t(m,y,x),m=m[y]}return a}return vw=s,vw}var yw,$7;function qJ(){if($7)return yw;$7=1;var t=k0(),e=FJ(),n=E0();function r(i,s,a){for(var o=-1,l=s.length,u={};++o<l;){var d=s[o],p=t(i,d);a(p,d)&&e(u,n(d,i),p)}return u}return yw=r,yw}var xw,U7;function BJ(){if(U7)return xw;U7=1;var t=qJ(),e=XL();function n(r,i){return t(r,i,function(s,a){return e(r,a)})}return xw=n,xw}var bw,G7;function zJ(){if(G7)return bw;G7=1;var t=mI(),e=iI(),n=sI();function r(i){return n(e(i,void 0,t),i+"")}return bw=r,bw}var ww,H7;function $J(){if(H7)return ww;H7=1;var t=BJ(),e=zJ(),n=e(function(r,i){return r==null?{}:t(r,i)});return ww=n,ww}var _w,V7;function UJ(){if(V7)return _w;V7=1;var t=Math.ceil,e=Math.max;function n(r,i,s,a){for(var o=-1,l=e(t((i-r)/(s||1)),0),u=Array(l);l--;)u[a?l:++o]=r,r+=s;return u}return _w=n,_w}var Nw,W7;function GJ(){if(W7)return Nw;W7=1;var t=UJ(),e=j0(),n=pI();function r(i){return function(s,a,o){return o&&typeof o!="number"&&e(s,a,o)&&(a=o=void 0),s=n(s),a===void 0?(a=s,s=0):a=n(a),o=o===void 0?s<a?1:-1:n(o),t(s,a,o,i)}}return Nw=r,Nw}var Sw,K7;function HJ(){if(K7)return Sw;K7=1;var t=GJ(),e=t();return Sw=e,Sw}var Ew,Y7;function VJ(){if(Y7)return Ew;Y7=1;function t(e,n){var r=e.length;for(e.sort(n);r--;)e[r]=e[r].value;return e}return Ew=t,Ew}var kw,X7;function WJ(){if(X7)return kw;X7=1;var t=sd();function e(n,r){if(n!==r){var i=n!==void 0,s=n===null,a=n===n,o=t(n),l=r!==void 0,u=r===null,d=r===r,p=t(r);if(!u&&!p&&!o&&n>r||o&&l&&d&&!u&&!p||s&&l&&d||!i&&d||!a)return 1;if(!s&&!o&&!p&&n<r||p&&i&&a&&!s&&!o||u&&i&&a||!l&&a||!d)return-1}return 0}return kw=e,kw}var Cw,Q7;function KJ(){if(Q7)return Cw;Q7=1;var t=WJ();function e(n,r,i){for(var s=-1,a=n.criteria,o=r.criteria,l=a.length,u=i.length;++s<l;){var d=t(a[s],o[s]);if(d){if(s>=u)return d;var p=i[s];return d*(p=="desc"?-1:1)}}return n.index-r.index}return Cw=e,Cw}var jw,Z7;function YJ(){if(Z7)return jw;Z7=1;var t=S0(),e=k0(),n=Oa(),r=tI(),i=VJ(),s=b0(),a=KJ(),o=oc(),l=bn();function u(d,p,h){p.length?p=t(p,function(x){return l(x)?function(_){return e(_,x.length===1?x[0]:x)}:x}):p=[o];var m=-1;p=t(p,s(n));var y=r(d,function(x,_,v){var w=t(p,function(b){return b(x)});return{criteria:w,index:++m,value:x}});return i(y,function(x,_){return a(x,_,h)})}return jw=u,jw}var Tw,J7;function XJ(){if(J7)return Tw;J7=1;var t=Q4(),e=YJ(),n=C0(),r=j0(),i=n(function(s,a){if(s==null)return[];var o=a.length;return o>1&&r(s,a[0],a[1])?a=[]:o>2&&r(a[0],a[1],a[2])&&(a=[a[0]]),e(s,t(a,1),[])});return Tw=i,Tw}var Aw,ej;function QJ(){if(ej)return Aw;ej=1;var t=KL(),e=0;function n(r){var i=++e;return t(r)+i}return Aw=n,Aw}var Ow,tj;function ZJ(){if(tj)return Ow;tj=1;function t(e,n,r){for(var i=-1,s=e.length,a=n.length,o={};++i<s;){var l=i<a?n[i]:void 0;r(o,e[i],l)}return o}return Ow=t,Ow}var Pw,nj;function JJ(){if(nj)return Pw;nj=1;var t=y0(),e=ZJ();function n(r,i){return e(r||[],i||[],t)}return Pw=n,Pw}var Eg;if(typeof I4=="function")try{Eg={cloneDeep:mJ(),constant:H4(),defaults:gJ(),each:zL(),filter:ZL(),find:NJ(),flatten:mI(),forEach:BL(),forIn:SJ(),has:JL(),isUndefined:eI(),last:EJ(),map:nI(),mapValues:kJ(),max:jJ(),merge:LJ(),min:IJ(),minBy:MJ(),now:DJ(),pick:$J(),range:HJ(),reduce:rI(),sortBy:XJ(),uniqueId:QJ(),values:lI(),zipObject:JJ()}}catch{}Eg||(Eg=window._);var Ut=Eg,eee=T0;function T0(){var t={};t._next=t._prev=t,this._sentinel=t}T0.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return xI(e),e};T0.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&xI(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e};T0.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,tee)),n=n._prev;return"["+t.join(", ")+"]"};function xI(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function tee(t,e){if(t!=="_next"&&t!=="_prev")return e}var pa=Ut,nee=ss.Graph,ree=eee,iee=aee,see=pa.constant(1);function aee(t,e){if(t.nodeCount()<=1)return[];var n=lee(t,e||see),r=oee(n.graph,n.buckets,n.zeroIdx);return pa.flatten(pa.map(r,function(i){return t.outEdges(i.v,i.w)}),!0)}function oee(t,e,n){for(var r=[],i=e[e.length-1],s=e[0],a;t.nodeCount();){for(;a=s.dequeue();)Rw(t,e,n,a);for(;a=i.dequeue();)Rw(t,e,n,a);if(t.nodeCount()){for(var o=e.length-2;o>0;--o)if(a=e[o].dequeue(),a){r=r.concat(Rw(t,e,n,a,!0));break}}}return r}function Rw(t,e,n,r,i){var s=i?[]:void 0;return pa.forEach(t.inEdges(r.v),function(a){var o=t.edge(a),l=t.node(a.v);i&&s.push({v:a.v,w:a.w}),l.out-=o,O_(e,n,l)}),pa.forEach(t.outEdges(r.v),function(a){var o=t.edge(a),l=a.w,u=t.node(l);u.in-=o,O_(e,n,u)}),t.removeNode(r.v),s}function lee(t,e){var n=new nee,r=0,i=0;pa.forEach(t.nodes(),function(o){n.setNode(o,{v:o,in:0,out:0})}),pa.forEach(t.edges(),function(o){var l=n.edge(o.v,o.w)||0,u=e(o),d=l+u;n.setEdge(o.v,o.w,d),i=Math.max(i,n.node(o.v).out+=u),r=Math.max(r,n.node(o.w).in+=u)});var s=pa.range(i+r+3).map(function(){return new ree}),a=r+1;return pa.forEach(n.nodes(),function(o){O_(s,a,n.node(o))}),{graph:n,buckets:s,zeroIdx:a}}function O_(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}var ql=Ut,cee=iee,uee={run:dee,undo:hee};function dee(t){var e=t.graph().acyclicer==="greedy"?cee(t,n(t)):fee(t);ql.forEach(e,function(r){var i=t.edge(r);t.removeEdge(r),i.forwardName=r.name,i.reversed=!0,t.setEdge(r.w,r.v,i,ql.uniqueId("rev"))});function n(r){return function(i){return r.edge(i).weight}}}function fee(t){var e=[],n={},r={};function i(s){ql.has(r,s)||(r[s]=!0,n[s]=!0,ql.forEach(t.outEdges(s),function(a){ql.has(n,a.w)?e.push(a):i(a.w)}),delete n[s])}return ql.forEach(t.nodes(),i),e}function hee(t){ql.forEach(t.edges(),function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}})}var yt=Ut,bI=ss.Graph,qr={addDummyNode:wI,simplify:pee,asNonCompoundGraph:mee,successorWeights:gee,predecessorWeights:vee,intersectRect:yee,buildLayerMatrix:xee,normalizeRanks:bee,removeEmptyRanks:wee,addBorderNode:_ee,maxRank:_I,partition:Nee,time:See,notime:Eee};function wI(t,e,n,r){var i;do i=yt.uniqueId(r);while(t.hasNode(i));return n.dummy=e,t.setNode(i,n),i}function pee(t){var e=new bI().setGraph(t.graph());return yt.forEach(t.nodes(),function(n){e.setNode(n,t.node(n))}),yt.forEach(t.edges(),function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),e}function mee(t){var e=new bI({multigraph:t.isMultigraph()}).setGraph(t.graph());return yt.forEach(t.nodes(),function(n){t.children(n).length||e.setNode(n,t.node(n))}),yt.forEach(t.edges(),function(n){e.setEdge(n,t.edge(n))}),e}function gee(t){var e=yt.map(t.nodes(),function(n){var r={};return yt.forEach(t.outEdges(n),function(i){r[i.w]=(r[i.w]||0)+t.edge(i).weight}),r});return yt.zipObject(t.nodes(),e)}function vee(t){var e=yt.map(t.nodes(),function(n){var r={};return yt.forEach(t.inEdges(n),function(i){r[i.v]=(r[i.v]||0)+t.edge(i).weight}),r});return yt.zipObject(t.nodes(),e)}function yee(t,e){var n=t.x,r=t.y,i=e.x-n,s=e.y-r,a=t.width/2,o=t.height/2;if(!i&&!s)throw new Error("Not possible to find intersection inside of the rectangle");var l,u;return Math.abs(s)*a>Math.abs(i)*o?(s<0&&(o=-o),l=o*i/s,u=o):(i<0&&(a=-a),l=a,u=a*s/i),{x:n+l,y:r+u}}function xee(t){var e=yt.map(yt.range(_I(t)+1),function(){return[]});return yt.forEach(t.nodes(),function(n){var r=t.node(n),i=r.rank;yt.isUndefined(i)||(e[i][r.order]=n)}),e}function bee(t){var e=yt.min(yt.map(t.nodes(),function(n){return t.node(n).rank}));yt.forEach(t.nodes(),function(n){var r=t.node(n);yt.has(r,"rank")&&(r.rank-=e)})}function wee(t){var e=yt.min(yt.map(t.nodes(),function(s){return t.node(s).rank})),n=[];yt.forEach(t.nodes(),function(s){var a=t.node(s).rank-e;n[a]||(n[a]=[]),n[a].push(s)});var r=0,i=t.graph().nodeRankFactor;yt.forEach(n,function(s,a){yt.isUndefined(s)&&a%i!==0?--r:r&&yt.forEach(s,function(o){t.node(o).rank+=r})})}function _ee(t,e,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),wI(t,"border",i,e)}function _I(t){return yt.max(yt.map(t.nodes(),function(e){var n=t.node(e).rank;if(!yt.isUndefined(n))return n}))}function Nee(t,e){var n={lhs:[],rhs:[]};return yt.forEach(t,function(r){e(r)?n.lhs.push(r):n.rhs.push(r)}),n}function See(t,e){var n=yt.now();try{return e()}finally{console.log(t+" time: "+(yt.now()-n)+"ms")}}function Eee(t,e){return e()}var NI=Ut,kee=qr,Cee={run:jee,undo:Aee};function jee(t){t.graph().dummyChains=[],NI.forEach(t.edges(),function(e){Tee(t,e)})}function Tee(t,e){var n=e.v,r=t.node(n).rank,i=e.w,s=t.node(i).rank,a=e.name,o=t.edge(e),l=o.labelRank;if(s!==r+1){t.removeEdge(e);var u,d,p;for(p=0,++r;r<s;++p,++r)o.points=[],d={width:0,height:0,edgeLabel:o,edgeObj:e,rank:r},u=kee.addDummyNode(t,"edge",d,"_d"),r===l&&(d.width=o.width,d.height=o.height,d.dummy="edge-label",d.labelpos=o.labelpos),t.setEdge(n,u,{weight:o.weight},a),p===0&&t.graph().dummyChains.push(u),n=u;t.setEdge(n,i,{weight:o.weight},a)}}function Aee(t){NI.forEach(t.graph().dummyChains,function(e){var n=t.node(e),r=n.edgeLabel,i;for(t.setEdge(n.edgeObj,r);n.dummy;)i=t.successors(e)[0],t.removeNode(e),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),e=i,n=t.node(e)})}var rm=Ut,A0={longestPath:Oee,slack:Pee};function Oee(t){var e={};function n(r){var i=t.node(r);if(rm.has(e,r))return i.rank;e[r]=!0;var s=rm.min(rm.map(t.outEdges(r),function(a){return n(a.w)-t.edge(a).minlen}));return(s===Number.POSITIVE_INFINITY||s===void 0||s===null)&&(s=0),i.rank=s}rm.forEach(t.sources(),n)}function Pee(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}var kg=Ut,Ree=ss.Graph,Cg=A0.slack,SI=Lee;function Lee(t){var e=new Ree({directed:!1}),n=t.nodes()[0],r=t.nodeCount();e.setNode(n,{});for(var i,s;Iee(e,t)<r;)i=Mee(e,t),s=e.hasNode(i.v)?Cg(t,i):-Cg(t,i),Dee(e,t,s);return e}function Iee(t,e){function n(r){kg.forEach(e.nodeEdges(r),function(i){var s=i.v,a=r===s?i.w:s;!t.hasNode(a)&&!Cg(e,i)&&(t.setNode(a,{}),t.setEdge(r,a,{}),n(a))})}return kg.forEach(t.nodes(),n),t.nodeCount()}function Mee(t,e){return kg.minBy(e.edges(),function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return Cg(e,n)})}function Dee(t,e,n){kg.forEach(t.nodes(),function(r){e.node(r).rank+=n})}var Sa=Ut,Fee=SI,qee=A0.slack,Bee=A0.longestPath,zee=ss.alg.preorder,$ee=ss.alg.postorder,Uee=qr.simplify,Gee=lc;lc.initLowLimValues=tN;lc.initCutValues=eN;lc.calcCutValue=EI;lc.leaveEdge=CI;lc.enterEdge=jI;lc.exchangeEdges=TI;function lc(t){t=Uee(t),Bee(t);var e=Fee(t);tN(e),eN(e,t);for(var n,r;n=CI(e);)r=jI(e,t,n),TI(e,t,n,r)}function eN(t,e){var n=$ee(t,t.nodes());n=n.slice(0,n.length-1),Sa.forEach(n,function(r){Hee(t,e,r)})}function Hee(t,e,n){var r=t.node(n),i=r.parent;t.edge(n,i).cutvalue=EI(t,e,n)}function EI(t,e,n){var r=t.node(n),i=r.parent,s=!0,a=e.edge(n,i),o=0;return a||(s=!1,a=e.edge(i,n)),o=a.weight,Sa.forEach(e.nodeEdges(n),function(l){var u=l.v===n,d=u?l.w:l.v;if(d!==i){var p=u===s,h=e.edge(l).weight;if(o+=p?h:-h,Wee(t,n,d)){var m=t.edge(n,d).cutvalue;o+=p?-m:m}}}),o}function tN(t,e){arguments.length<2&&(e=t.nodes()[0]),kI(t,{},1,e)}function kI(t,e,n,r,i){var s=n,a=t.node(r);return e[r]=!0,Sa.forEach(t.neighbors(r),function(o){Sa.has(e,o)||(n=kI(t,e,n,o,r))}),a.low=s,a.lim=n++,i?a.parent=i:delete a.parent,n}function CI(t){return Sa.find(t.edges(),function(e){return t.edge(e).cutvalue<0})}function jI(t,e,n){var r=n.v,i=n.w;e.hasEdge(r,i)||(r=n.w,i=n.v);var s=t.node(r),a=t.node(i),o=s,l=!1;s.lim>a.lim&&(o=a,l=!0);var u=Sa.filter(e.edges(),function(d){return l===rj(t,t.node(d.v),o)&&l!==rj(t,t.node(d.w),o)});return Sa.minBy(u,function(d){return qee(e,d)})}function TI(t,e,n,r){var i=n.v,s=n.w;t.removeEdge(i,s),t.setEdge(r.v,r.w,{}),tN(t),eN(t,e),Vee(t,e)}function Vee(t,e){var n=Sa.find(t.nodes(),function(i){return!e.node(i).parent}),r=zee(t,n);r=r.slice(1),Sa.forEach(r,function(i){var s=t.node(i).parent,a=e.edge(i,s),o=!1;a||(a=e.edge(s,i),o=!0),e.node(i).rank=e.node(s).rank+(o?a.minlen:-a.minlen)})}function Wee(t,e,n){return t.hasEdge(e,n)}function rj(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}var Kee=A0,AI=Kee.longestPath,Yee=SI,Xee=Gee,Qee=Zee;function Zee(t){switch(t.graph().ranker){case"network-simplex":ij(t);break;case"tight-tree":ete(t);break;case"longest-path":Jee(t);break;default:ij(t)}}var Jee=AI;function ete(t){AI(t),Yee(t)}function ij(t){Xee(t)}var P_=Ut,tte=nte;function nte(t){var e=ite(t);P_.forEach(t.graph().dummyChains,function(n){for(var r=t.node(n),i=r.edgeObj,s=rte(t,e,i.v,i.w),a=s.path,o=s.lca,l=0,u=a[l],d=!0;n!==i.w;){if(r=t.node(n),d){for(;(u=a[l])!==o&&t.node(u).maxRank<r.rank;)l++;u===o&&(d=!1)}if(!d){for(;l<a.length-1&&t.node(u=a[l+1]).minRank<=r.rank;)l++;u=a[l]}t.setParent(n,u),n=t.successors(n)[0]}})}function rte(t,e,n,r){var i=[],s=[],a=Math.min(e[n].low,e[r].low),o=Math.max(e[n].lim,e[r].lim),l,u;l=n;do l=t.parent(l),i.push(l);while(l&&(e[l].low>a||o>e[l].lim));for(u=l,l=r;(l=t.parent(l))!==u;)s.push(l);return{path:i.concat(s.reverse()),lca:u}}function ite(t){var e={},n=0;function r(i){var s=n;P_.forEach(t.children(i),r),e[i]={low:s,lim:n++}}return P_.forEach(t.children(),r),e}var ma=Ut,R_=qr,ste={run:ate,cleanup:cte};function ate(t){var e=R_.addDummyNode(t,"root",{},"_root"),n=ote(t),r=ma.max(ma.values(n))-1,i=2*r+1;t.graph().nestingRoot=e,ma.forEach(t.edges(),function(a){t.edge(a).minlen*=i});var s=lte(t)+1;ma.forEach(t.children(),function(a){OI(t,e,i,s,r,n,a)}),t.graph().nodeRankFactor=i}function OI(t,e,n,r,i,s,a){var o=t.children(a);if(!o.length){a!==e&&t.setEdge(e,a,{weight:0,minlen:n});return}var l=R_.addBorderNode(t,"_bt"),u=R_.addBorderNode(t,"_bb"),d=t.node(a);t.setParent(l,a),d.borderTop=l,t.setParent(u,a),d.borderBottom=u,ma.forEach(o,function(p){OI(t,e,n,r,i,s,p);var h=t.node(p),m=h.borderTop?h.borderTop:p,y=h.borderBottom?h.borderBottom:p,x=h.borderTop?r:2*r,_=m!==y?1:i-s[a]+1;t.setEdge(l,m,{weight:x,minlen:_,nestingEdge:!0}),t.setEdge(y,u,{weight:x,minlen:_,nestingEdge:!0})}),t.parent(a)||t.setEdge(e,l,{weight:0,minlen:i+s[a]})}function ote(t){var e={};function n(r,i){var s=t.children(r);s&&s.length&&ma.forEach(s,function(a){n(a,i+1)}),e[r]=i}return ma.forEach(t.children(),function(r){n(r,1)}),e}function lte(t){return ma.reduce(t.edges(),function(e,n){return e+t.edge(n).weight},0)}function cte(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,ma.forEach(t.edges(),function(n){var r=t.edge(n);r.nestingEdge&&t.removeEdge(n)})}var Lw=Ut,ute=qr,dte=fte;function fte(t){function e(n){var r=t.children(n),i=t.node(n);if(r.length&&Lw.forEach(r,e),Lw.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var s=i.minRank,a=i.maxRank+1;s<a;++s)sj(t,"borderLeft","_bl",n,i,s),sj(t,"borderRight","_br",n,i,s)}}Lw.forEach(t.children(),e)}function sj(t,e,n,r,i,s){var a={width:0,height:0,rank:s,borderType:e},o=i[e][s-1],l=ute.addDummyNode(t,"border",a,n);i[e][s]=l,t.setParent(l,r),o&&t.setEdge(o,l,{weight:1})}var Ts=Ut,hte={adjust:pte,undo:mte};function pte(t){var e=t.graph().rankdir.toLowerCase();(e==="lr"||e==="rl")&&PI(t)}function mte(t){var e=t.graph().rankdir.toLowerCase();(e==="bt"||e==="rl")&&gte(t),(e==="lr"||e==="rl")&&(vte(t),PI(t))}function PI(t){Ts.forEach(t.nodes(),function(e){aj(t.node(e))}),Ts.forEach(t.edges(),function(e){aj(t.edge(e))})}function aj(t){var e=t.width;t.width=t.height,t.height=e}function gte(t){Ts.forEach(t.nodes(),function(e){Iw(t.node(e))}),Ts.forEach(t.edges(),function(e){var n=t.edge(e);Ts.forEach(n.points,Iw),Ts.has(n,"y")&&Iw(n)})}function Iw(t){t.y=-t.y}function vte(t){Ts.forEach(t.nodes(),function(e){Mw(t.node(e))}),Ts.forEach(t.edges(),function(e){var n=t.edge(e);Ts.forEach(n.points,Mw),Ts.has(n,"x")&&Mw(n)})}function Mw(t){var e=t.x;t.x=t.y,t.y=e}var ia=Ut,yte=xte;function xte(t){var e={},n=ia.filter(t.nodes(),function(o){return!t.children(o).length}),r=ia.max(ia.map(n,function(o){return t.node(o).rank})),i=ia.map(ia.range(r+1),function(){return[]});function s(o){if(!ia.has(e,o)){e[o]=!0;var l=t.node(o);i[l.rank].push(o),ia.forEach(t.successors(o),s)}}var a=ia.sortBy(n,function(o){return t.node(o).rank});return ia.forEach(a,s),i}var ao=Ut,bte=wte;function wte(t,e){for(var n=0,r=1;r<e.length;++r)n+=_te(t,e[r-1],e[r]);return n}function _te(t,e,n){for(var r=ao.zipObject(n,ao.map(n,function(u,d){return d})),i=ao.flatten(ao.map(e,function(u){return ao.sortBy(ao.map(t.outEdges(u),function(d){return{pos:r[d.w],weight:t.edge(d).weight}}),"pos")}),!0),s=1;s<n.length;)s<<=1;var a=2*s-1;s-=1;var o=ao.map(new Array(a),function(){return 0}),l=0;return ao.forEach(i.forEach(function(u){var d=u.pos+s;o[d]+=u.weight;for(var p=0;d>0;)d%2&&(p+=o[d+1]),d=d-1>>1,o[d]+=u.weight;l+=u.weight*p})),l}var oj=Ut,Nte=Ste;function Ste(t,e){return oj.map(e,function(n){var r=t.inEdges(n);if(r.length){var i=oj.reduce(r,function(s,a){var o=t.edge(a),l=t.node(a.v);return{sum:s.sum+o.weight*l.order,weight:s.weight+o.weight}},{sum:0,weight:0});return{v:n,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:n}})}var Vr=Ut,Ete=kte;function kte(t,e){var n={};Vr.forEach(t,function(i,s){var a=n[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:s};Vr.isUndefined(i.barycenter)||(a.barycenter=i.barycenter,a.weight=i.weight)}),Vr.forEach(e.edges(),function(i){var s=n[i.v],a=n[i.w];!Vr.isUndefined(s)&&!Vr.isUndefined(a)&&(a.indegree++,s.out.push(n[i.w]))});var r=Vr.filter(n,function(i){return!i.indegree});return Cte(r)}function Cte(t){var e=[];function n(s){return function(a){a.merged||(Vr.isUndefined(a.barycenter)||Vr.isUndefined(s.barycenter)||a.barycenter>=s.barycenter)&&jte(s,a)}}function r(s){return function(a){a.in.push(s),--a.indegree===0&&t.push(a)}}for(;t.length;){var i=t.pop();e.push(i),Vr.forEach(i.in.reverse(),n(i)),Vr.forEach(i.out,r(i))}return Vr.map(Vr.filter(e,function(s){return!s.merged}),function(s){return Vr.pick(s,["vs","i","barycenter","weight"])})}function jte(t,e){var n=0,r=0;t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=n/r,t.weight=r,t.i=Math.min(e.i,t.i),e.merged=!0}var mf=Ut,Tte=qr,Ate=Ote;function Ote(t,e){var n=Tte.partition(t,function(d){return mf.has(d,"barycenter")}),r=n.lhs,i=mf.sortBy(n.rhs,function(d){return-d.i}),s=[],a=0,o=0,l=0;r.sort(Pte(!!e)),l=lj(s,i,l),mf.forEach(r,function(d){l+=d.vs.length,s.push(d.vs),a+=d.barycenter*d.weight,o+=d.weight,l=lj(s,i,l)});var u={vs:mf.flatten(s,!0)};return o&&(u.barycenter=a/o,u.weight=o),u}function lj(t,e,n){for(var r;e.length&&(r=mf.last(e)).i<=n;)e.pop(),t.push(r.vs),n++;return n}function Pte(t){return function(e,n){return e.barycenter<n.barycenter?-1:e.barycenter>n.barycenter?1:t?n.i-e.i:e.i-n.i}}var yo=Ut,Rte=Nte,Lte=Ete,Ite=Ate,Mte=RI;function RI(t,e,n,r){var i=t.children(e),s=t.node(e),a=s?s.borderLeft:void 0,o=s?s.borderRight:void 0,l={};a&&(i=yo.filter(i,function(y){return y!==a&&y!==o}));var u=Rte(t,i);yo.forEach(u,function(y){if(t.children(y.v).length){var x=RI(t,y.v,n,r);l[y.v]=x,yo.has(x,"barycenter")&&Fte(y,x)}});var d=Lte(u,n);Dte(d,l);var p=Ite(d,r);if(a&&(p.vs=yo.flatten([a,p.vs,o],!0),t.predecessors(a).length)){var h=t.node(t.predecessors(a)[0]),m=t.node(t.predecessors(o)[0]);yo.has(p,"barycenter")||(p.barycenter=0,p.weight=0),p.barycenter=(p.barycenter*p.weight+h.order+m.order)/(p.weight+2),p.weight+=2}return p}function Dte(t,e){yo.forEach(t,function(n){n.vs=yo.flatten(n.vs.map(function(r){return e[r]?e[r].vs:r}),!0)})}function Fte(t,e){yo.isUndefined(t.barycenter)?(t.barycenter=e.barycenter,t.weight=e.weight):(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight)}var gf=Ut,qte=ss.Graph,Bte=zte;function zte(t,e,n){var r=$te(t),i=new qte({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(s){return t.node(s)});return gf.forEach(t.nodes(),function(s){var a=t.node(s),o=t.parent(s);(a.rank===e||a.minRank<=e&&e<=a.maxRank)&&(i.setNode(s),i.setParent(s,o||r),gf.forEach(t[n](s),function(l){var u=l.v===s?l.w:l.v,d=i.edge(u,s),p=gf.isUndefined(d)?0:d.weight;i.setEdge(u,s,{weight:t.edge(l).weight+p})}),gf.has(a,"minRank")&&i.setNode(s,{borderLeft:a.borderLeft[e],borderRight:a.borderRight[e]}))}),i}function $te(t){for(var e;t.hasNode(e=gf.uniqueId("_root")););return e}var Ute=Ut,Gte=Hte;function Hte(t,e,n){var r={},i;Ute.forEach(n,function(s){for(var a=t.parent(s),o,l;a;){if(o=t.parent(a),o?(l=r[o],r[o]=a):(l=i,i=a),l&&l!==a){e.setEdge(l,a);return}a=o}})}var Io=Ut,Vte=yte,Wte=bte,Kte=Mte,Yte=Bte,Xte=Gte,Qte=ss.Graph,cj=qr,Zte=Jte;function Jte(t){var e=cj.maxRank(t),n=uj(t,Io.range(1,e+1),"inEdges"),r=uj(t,Io.range(e-1,-1,-1),"outEdges"),i=Vte(t);dj(t,i);for(var s=Number.POSITIVE_INFINITY,a,o=0,l=0;l<4;++o,++l){ene(o%2?n:r,o%4>=2),i=cj.buildLayerMatrix(t);var u=Wte(t,i);u<s&&(l=0,a=Io.cloneDeep(i),s=u)}dj(t,a)}function uj(t,e,n){return Io.map(e,function(r){return Yte(t,r,n)})}function ene(t,e){var n=new Qte;Io.forEach(t,function(r){var i=r.graph().root,s=Kte(r,i,n,e);Io.forEach(s.vs,function(a,o){r.node(a).order=o}),Xte(r,n,s.vs)})}function dj(t,e){Io.forEach(e,function(n){Io.forEach(n,function(r,i){t.node(r).order=i})})}var We=Ut,tne=ss.Graph,nne=qr,rne={positionX:ane,findType1Conflicts:LI,findType2Conflicts:II,addConflict:nN,hasConflict:MI,verticalAlignment:DI,horizontalCompaction:FI,alignCoordinates:BI,findSmallestWidthAlignment:qI,balance:zI};function LI(t,e){var n={};function r(i,s){var a=0,o=0,l=i.length,u=We.last(s);return We.forEach(s,function(d,p){var h=ine(t,d),m=h?t.node(h).order:l;(h||d===u)&&(We.forEach(s.slice(o,p+1),function(y){We.forEach(t.predecessors(y),function(x){var _=t.node(x),v=_.order;(v<a||m<v)&&!(_.dummy&&t.node(y).dummy)&&nN(n,x,y)})}),o=p+1,a=m)}),s}return We.reduce(e,r),n}function II(t,e){var n={};function r(s,a,o,l,u){var d;We.forEach(We.range(a,o),function(p){d=s[p],t.node(d).dummy&&We.forEach(t.predecessors(d),function(h){var m=t.node(h);m.dummy&&(m.order<l||m.order>u)&&nN(n,h,d)})})}function i(s,a){var o=-1,l,u=0;return We.forEach(a,function(d,p){if(t.node(d).dummy==="border"){var h=t.predecessors(d);h.length&&(l=t.node(h[0]).order,r(a,u,p,o,l),u=p,o=l)}r(a,u,a.length,l,s.length)}),a}return We.reduce(e,i),n}function ine(t,e){if(t.node(e).dummy)return We.find(t.predecessors(e),function(n){return t.node(n).dummy})}function nN(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];i||(t[e]=i={}),i[n]=!0}function MI(t,e,n){if(e>n){var r=e;e=n,n=r}return We.has(t[e],n)}function DI(t,e,n,r){var i={},s={},a={};return We.forEach(e,function(o){We.forEach(o,function(l,u){i[l]=l,s[l]=l,a[l]=u})}),We.forEach(e,function(o){var l=-1;We.forEach(o,function(u){var d=r(u);if(d.length){d=We.sortBy(d,function(x){return a[x]});for(var p=(d.length-1)/2,h=Math.floor(p),m=Math.ceil(p);h<=m;++h){var y=d[h];s[u]===u&&l<a[y]&&!MI(n,u,y)&&(s[y]=u,s[u]=i[u]=i[y],l=a[y])}}})}),{root:i,align:s}}function FI(t,e,n,r,i){var s={},a=sne(t,e,n,i),o=i?"borderLeft":"borderRight";function l(p,h){for(var m=a.nodes(),y=m.pop(),x={};y;)x[y]?p(y):(x[y]=!0,m.push(y),m=m.concat(h(y))),y=m.pop()}function u(p){s[p]=a.inEdges(p).reduce(function(h,m){return Math.max(h,s[m.v]+a.edge(m))},0)}function d(p){var h=a.outEdges(p).reduce(function(y,x){return Math.min(y,s[x.w]-a.edge(x))},Number.POSITIVE_INFINITY),m=t.node(p);h!==Number.POSITIVE_INFINITY&&m.borderType!==o&&(s[p]=Math.max(s[p],h))}return l(u,a.predecessors.bind(a)),l(d,a.successors.bind(a)),We.forEach(r,function(p){s[p]=s[n[p]]}),s}function sne(t,e,n,r){var i=new tne,s=t.graph(),a=one(s.nodesep,s.edgesep,r);return We.forEach(e,function(o){var l;We.forEach(o,function(u){var d=n[u];if(i.setNode(d),l){var p=n[l],h=i.edge(p,d);i.setEdge(p,d,Math.max(a(t,u,l),h||0))}l=u})}),i}function qI(t,e){return We.minBy(We.values(e),function(n){var r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return We.forIn(n,function(s,a){var o=lne(t,a)/2;r=Math.max(s+o,r),i=Math.min(s-o,i)}),r-i})}function BI(t,e){var n=We.values(e),r=We.min(n),i=We.max(n);We.forEach(["u","d"],function(s){We.forEach(["l","r"],function(a){var o=s+a,l=t[o],u;if(l!==e){var d=We.values(l);u=a==="l"?r-We.min(d):i-We.max(d),u&&(t[o]=We.mapValues(l,function(p){return p+u}))}})})}function zI(t,e){return We.mapValues(t.ul,function(n,r){if(e)return t[e.toLowerCase()][r];var i=We.sortBy(We.map(t,r));return(i[1]+i[2])/2})}function ane(t){var e=nne.buildLayerMatrix(t),n=We.merge(LI(t,e),II(t,e)),r={},i;We.forEach(["u","d"],function(a){i=a==="u"?e:We.values(e).reverse(),We.forEach(["l","r"],function(o){o==="r"&&(i=We.map(i,function(p){return We.values(p).reverse()}));var l=(a==="u"?t.predecessors:t.successors).bind(t),u=DI(t,i,n,l),d=FI(t,i,u.root,u.align,o==="r");o==="r"&&(d=We.mapValues(d,function(p){return-p})),r[a+o]=d})});var s=qI(t,r);return BI(r,s),zI(r,t.graph().align)}function one(t,e,n){return function(r,i,s){var a=r.node(i),o=r.node(s),l=0,u;if(l+=a.width/2,We.has(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":u=-a.width/2;break;case"r":u=a.width/2;break}if(u&&(l+=n?u:-u),u=0,l+=(a.dummy?e:t)/2,l+=(o.dummy?e:t)/2,l+=o.width/2,We.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":u=o.width/2;break;case"r":u=-o.width/2;break}return u&&(l+=n?u:-u),u=0,l}}function lne(t,e){return t.node(e).width}var vf=Ut,$I=qr,cne=rne.positionX,une=dne;function dne(t){t=$I.asNonCompoundGraph(t),fne(t),vf.forEach(cne(t),function(e,n){t.node(n).x=e})}function fne(t){var e=$I.buildLayerMatrix(t),n=t.graph().ranksep,r=0;vf.forEach(e,function(i){var s=vf.max(vf.map(i,function(a){return t.node(a).height}));vf.forEach(i,function(a){t.node(a).y=r+s/2}),r+=s+n})}var et=Ut,fj=uee,hj=Cee,hne=Qee,pne=qr.normalizeRanks,mne=tte,gne=qr.removeEmptyRanks,pj=ste,vne=dte,mj=hte,yne=Zte,xne=une,Bo=qr,bne=ss.Graph,wne=_ne;function _ne(t,e){var n=e&&e.debugTiming?Bo.time:Bo.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return Rne(t)});n("  runLayout",function(){Nne(r,n)}),n("  updateInputGraph",function(){Sne(t,r)})})}function Nne(t,e){e("    makeSpaceForEdgeLabels",function(){Lne(t)}),e("    removeSelfEdges",function(){Une(t)}),e("    acyclic",function(){fj.run(t)}),e("    nestingGraph.run",function(){pj.run(t)}),e("    rank",function(){hne(Bo.asNonCompoundGraph(t))}),e("    injectEdgeLabelProxies",function(){Ine(t)}),e("    removeEmptyRanks",function(){gne(t)}),e("    nestingGraph.cleanup",function(){pj.cleanup(t)}),e("    normalizeRanks",function(){pne(t)}),e("    assignRankMinMax",function(){Mne(t)}),e("    removeEdgeLabelProxies",function(){Dne(t)}),e("    normalize.run",function(){hj.run(t)}),e("    parentDummyChains",function(){mne(t)}),e("    addBorderSegments",function(){vne(t)}),e("    order",function(){yne(t)}),e("    insertSelfEdges",function(){Gne(t)}),e("    adjustCoordinateSystem",function(){mj.adjust(t)}),e("    position",function(){xne(t)}),e("    positionSelfEdges",function(){Hne(t)}),e("    removeBorderNodes",function(){$ne(t)}),e("    normalize.undo",function(){hj.undo(t)}),e("    fixupEdgeLabelCoords",function(){Bne(t)}),e("    undoCoordinateSystem",function(){mj.undo(t)}),e("    translateGraph",function(){Fne(t)}),e("    assignNodeIntersects",function(){qne(t)}),e("    reversePoints",function(){zne(t)}),e("    acyclic.undo",function(){fj.undo(t)})}function Sne(t,e){et.forEach(t.nodes(),function(n){var r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,e.children(n).length&&(r.width=i.width,r.height=i.height))}),et.forEach(t.edges(),function(n){var r=t.edge(n),i=e.edge(n);r.points=i.points,et.has(i,"x")&&(r.x=i.x,r.y=i.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height}var Ene=["nodesep","edgesep","ranksep","marginx","marginy"],kne={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Cne=["acyclicer","ranker","rankdir","align"],jne=["width","height"],Tne={width:0,height:0},Ane=["minlen","weight","width","height","labeloffset"],One={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Pne=["labelpos"];function Rne(t){var e=new bne({multigraph:!0,compound:!0}),n=Fw(t.graph());return e.setGraph(et.merge({},kne,Dw(n,Ene),et.pick(n,Cne))),et.forEach(t.nodes(),function(r){var i=Fw(t.node(r));e.setNode(r,et.defaults(Dw(i,jne),Tne)),e.setParent(r,t.parent(r))}),et.forEach(t.edges(),function(r){var i=Fw(t.edge(r));e.setEdge(r,et.merge({},One,Dw(i,Ane),et.pick(i,Pne)))}),e}function Lne(t){var e=t.graph();e.ranksep/=2,et.forEach(t.edges(),function(n){var r=t.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(e.rankdir==="TB"||e.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function Ine(t){et.forEach(t.edges(),function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i=t.node(e.w),s={rank:(i.rank-r.rank)/2+r.rank,e};Bo.addDummyNode(t,"edge-proxy",s,"_ep")}})}function Mne(t){var e=0;et.forEach(t.nodes(),function(n){var r=t.node(n);r.borderTop&&(r.minRank=t.node(r.borderTop).rank,r.maxRank=t.node(r.borderBottom).rank,e=et.max(e,r.maxRank))}),t.graph().maxRank=e}function Dne(t){et.forEach(t.nodes(),function(e){var n=t.node(e);n.dummy==="edge-proxy"&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))})}function Fne(t){var e=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,s=t.graph(),a=s.marginx||0,o=s.marginy||0;function l(u){var d=u.x,p=u.y,h=u.width,m=u.height;e=Math.min(e,d-h/2),n=Math.max(n,d+h/2),r=Math.min(r,p-m/2),i=Math.max(i,p+m/2)}et.forEach(t.nodes(),function(u){l(t.node(u))}),et.forEach(t.edges(),function(u){var d=t.edge(u);et.has(d,"x")&&l(d)}),e-=a,r-=o,et.forEach(t.nodes(),function(u){var d=t.node(u);d.x-=e,d.y-=r}),et.forEach(t.edges(),function(u){var d=t.edge(u);et.forEach(d.points,function(p){p.x-=e,p.y-=r}),et.has(d,"x")&&(d.x-=e),et.has(d,"y")&&(d.y-=r)}),s.width=n-e+a,s.height=i-r+o}function qne(t){et.forEach(t.edges(),function(e){var n=t.edge(e),r=t.node(e.v),i=t.node(e.w),s,a;n.points?(s=n.points[0],a=n.points[n.points.length-1]):(n.points=[],s=i,a=r),n.points.unshift(Bo.intersectRect(r,s)),n.points.push(Bo.intersectRect(i,a))})}function Bne(t){et.forEach(t.edges(),function(e){var n=t.edge(e);if(et.has(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function zne(t){et.forEach(t.edges(),function(e){var n=t.edge(e);n.reversed&&n.points.reverse()})}function $ne(t){et.forEach(t.nodes(),function(e){if(t.children(e).length){var n=t.node(e),r=t.node(n.borderTop),i=t.node(n.borderBottom),s=t.node(et.last(n.borderLeft)),a=t.node(et.last(n.borderRight));n.width=Math.abs(a.x-s.x),n.height=Math.abs(i.y-r.y),n.x=s.x+n.width/2,n.y=r.y+n.height/2}}),et.forEach(t.nodes(),function(e){t.node(e).dummy==="border"&&t.removeNode(e)})}function Une(t){et.forEach(t.edges(),function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e,label:t.edge(e)}),t.removeEdge(e)}})}function Gne(t){var e=Bo.buildLayerMatrix(t);et.forEach(e,function(n){var r=0;et.forEach(n,function(i,s){var a=t.node(i);a.order=s+r,et.forEach(a.selfEdges,function(o){Bo.addDummyNode(t,"selfedge",{width:o.label.width,height:o.label.height,rank:a.rank,order:s+ ++r,e:o.e,label:o.label},"_se")}),delete a.selfEdges})})}function Hne(t){et.forEach(t.nodes(),function(e){var n=t.node(e);if(n.dummy==="selfedge"){var r=t.node(n.e.v),i=r.x+r.width/2,s=r.y,a=n.x-i,o=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*a/3,y:s-o},{x:i+5*a/6,y:s-o},{x:i+a,y:s},{x:i+5*a/6,y:s+o},{x:i+2*a/3,y:s+o}],n.label.x=n.x,n.label.y=n.y}})}function Dw(t,e){return et.mapValues(et.pick(t,e),Number)}function Fw(t){var e={};return et.forEach(t,function(n,r){e[r.toLowerCase()]=n}),e}var im=Ut,Vne=qr,Wne=ss.Graph,Kne={debugOrdering:Yne};function Yne(t){var e=Vne.buildLayerMatrix(t),n=new Wne({compound:!0,multigraph:!0}).setGraph({});return im.forEach(t.nodes(),function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+t.node(r).rank)}),im.forEach(t.edges(),function(r){n.setEdge(r.v,r.w,{},r.name)}),im.forEach(e,function(r,i){var s="layer"+i;n.setNode(s,{rank:"same"}),im.reduce(r,function(a,o){return n.setEdge(a,o,{style:"invis"}),o})}),n}var Xne="0.8.5",Qne={graphlib:ss,layout:wne,debug:Kne,util:{time:qr.time,notime:qr.notime},version:Xne};const gj=Uo(Qne),Zne=()=>{ri();const t=V.useRef(null),[e,n,r]=DK([]),[i,s,a]=FK([]),[o,l]=V.useState([]),[u,d]=V.useState([]),[p,h]=V.useState("All"),[m,y]=V.useState(""),[x,_]=V.useState(!0),[v,w]=V.useState(null);V.useEffect(()=>{b()},[]),V.useEffect(()=>{N()},[o,p,m,e]);const b=async()=>{_(!0);try{const j=await ke.get("/world-bible/entities");l(j),n([]),s([])}catch(j){console.error("Failed to load data",j)}finally{_(!1)}},N=()=>{let j=o;if(p!=="All"&&(j=j.filter(O=>p==="Individual"?O.categoria==="Individual"||!O.categoria&&(O.tipoEspecial==="entidadindividual"||!O.tipoEspecial):O.categoria===p)),m){const O=m.toLowerCase();j=j.filter(q=>q.nombre.toLowerCase().includes(O))}d(j)},E=V.useCallback(j=>s(O=>DR({...j,type:"smoothstep",animated:!0,style:{stroke:"#6366f1"},markerEnd:{type:Fu.ArrowClosed,color:"#6366f1"}},O)),[]),A=V.useCallback(j=>{j.preventDefault(),j.dataTransfer.dropEffect="move"},[]),P=V.useCallback(j=>{j.preventDefault();const O=j.dataTransfer.getData("application/reactflow/id"),q=JSON.parse(j.dataTransfer.getData("application/reactflow/data"));if(!O||!q)return;const I=v.screenToFlowPosition({x:j.clientX,y:j.clientY});let D="#475569";q.categoria==="Individual"?D="#6366f1":q.categoria==="Location"?D="#10b981":q.categoria==="Group"&&(D="#a855f7");const U={id:`node-${O}`,type:"default",position:I,data:{label:q.nombre,entityId:O,...q},style:{background:"rgba(20, 20, 25, 0.9)",color:"#fff",border:`1px solid ${D}`,borderRadius:"12px",padding:"10px",minWidth:"150px",backdropFilter:"blur(10px)",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}};n(W=>W.concat(U))},[v]),T=(j,O,q="TB")=>{const I=new gj.graphlib.Graph;I.setDefaultEdgeLabel(()=>({}));const D=q==="LR";return I.setGraph({rankdir:q}),j.forEach(W=>{I.setNode(W.id,{width:220,height:100})}),O.forEach(W=>{I.setEdge(W.source,W.target)}),gj.layout(I),{nodes:j.map(W=>{const Y=I.node(W.id);return W.targetPosition=D?"left":"top",W.sourcePosition=D?"right":"bottom",W.position={x:Y.x-220/2,y:Y.y-100/2},W}),edges:O}},M=()=>{const j=o.map(D=>{let U="#475569";return D.categoria==="Individual"?U="#6366f1":D.categoria==="Location"?U="#10b981":D.categoria==="Group"&&(U="#a855f7"),{id:`node-${D.id}`,type:"default",position:{x:0,y:0},data:{label:D.nombre,entityId:D.id,...D},style:{background:"rgba(20, 20, 25, 0.9)",color:"#fff",border:`1px solid ${U}`,borderRadius:"12px",padding:"10px",minWidth:"150px",backdropFilter:"blur(10px)",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}}),O=[];o.forEach(D=>{D.valores&&Array.isArray(D.valores)&&D.valores.forEach(U=>{if(U.plantilla&&U.plantilla.tipo==="entity_link"&&U.valor){const W=`node-${U.valor}`,Y=`node-${D.id}`;W!==Y&&O.push({id:`e${D.id}-${U.valor}`,source:Y,target:W,type:"smoothstep",animated:!0,style:{stroke:"#6366f1"},markerEnd:{type:Fu.ArrowClosed,color:"#6366f1"}})}})});const{nodes:q,edges:I}=T(j,O);n([...q]),s([...I]),setTimeout(()=>{v&&v.fitView()},100)},k=(j,O)=>{j.dataTransfer.setData("application/reactflow/id",O.id),j.dataTransfer.setData("application/reactflow/data",JSON.stringify(O)),j.dataTransfer.effectAllowed="move"};return c.jsxs("div",{className:"w-full flex h-full bg-[#050508] relative overflow-hidden font-manrope",children:[c.jsxs("aside",{className:"w-80 border-r border-white/5 bg-surface-dark/80 backdrop-blur-xl flex flex-col z-20 shadow-2xl",children:[c.jsxs("div",{className:"p-6 border-b border-white/5 space-y-6 bg-gradient-to-b from-white/5 to-transparent",children:[c.jsxs("h2",{className:"text-sm font-black uppercase tracking-widest text-white flex items-center gap-3",children:[c.jsx("div",{className:"size-8 rounded-lg bg-primary flex items-center justify-center shadow-lg shadow-primary/20",children:c.jsx("span",{className:"material-symbols-outlined text-white text-lg",children:"hub"})}),"Graph Composer"]}),c.jsxs("div",{className:"relative group",children:[c.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-500 text-sm group-focus-within:text-primary transition-colors",children:"search"}),c.jsx("input",{type:"text",placeholder:"Search entities...",className:"w-full bg-black/40 border border-white/10 rounded-xl pl-9 pr-3 py-3 text-xs text-white focus:border-primary/50 focus:bg-black/50 outline-none transition-all placeholder:text-slate-600 font-bold",value:m,onChange:j=>y(j.target.value)})]}),c.jsx("div",{className:"flex gap-2 p-1 bg-black/40 rounded-xl overflow-x-auto no-scrollbar border border-white/5",children:["All","Individual","Location","Group","Event"].map(j=>c.jsx("button",{onClick:()=>h(j),className:`px-4 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider whitespace-nowrap transition-all ${p===j?"bg-primary text-white shadow-lg":"text-slate-500 hover:text-slate-300 hover:bg-white/5"}`,children:j},j))})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-2",children:[c.jsxs("p",{className:"text-[10px] uppercase font-bold text-slate-600 mb-3 pl-2 flex items-center gap-2",children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"drag_indicator"}),"Drag to Canvas"]}),u.map(j=>c.jsxs("div",{draggable:!0,onDragStart:O=>k(O,j),className:"group flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-transparent hover:border-primary/30 hover:bg-white/10 hover:shadow-lg hover:shadow-primary/5 cursor-grab active:cursor-grabbing transition-all select-none",children:[c.jsx(Jf,{name:j.nombre,url:j.iconUrl,size:"sm",className:"rounded-lg opacity-80 group-hover:opacity-100 ring-2 ring-transparent group-hover:ring-primary/20 transition-all"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-xs font-bold text-slate-300 group-hover:text-white truncate transition-colors",children:j.nombre}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:`text-[9px] uppercase tracking-wider font-bold ${j.categoria==="Individual"?"text-indigo-400":"text-slate-500"}`,children:j.categoria||"Entity"}),j.carpeta&&c.jsxs("span",{className:"text-[9px] text-white/30 truncate",children:[" ",j.carpeta.nombre]})]})]}),c.jsx("span",{className:"material-symbols-outlined text-slate-700 group-hover:text-primary text-lg transition-colors opacity-0 group-hover:opacity-100 transform translate-x-2 group-hover:translate-x-0 duration-300",children:"add_circle"})]},j.id)),u.length===0&&c.jsx("div",{className:"p-12 text-center text-slate-600 text-xs italic border-2 border-dashed border-white/5 rounded-xl m-4",children:"No entities found."})]})]}),c.jsxs("div",{className:"flex-1 h-full relative",ref:t,children:[c.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-indigo-900/10 via-[#050508] to-[#050508] pointer-events-none z-0"}),c.jsxs(vL,{nodes:e,edges:i,onNodesChange:r,onEdgesChange:a,onConnect:E,onInit:w,onDrop:P,onDragOver:A,fitView:!0,className:"bg-[#050508]",children:[c.jsx(QK,{color:"#222",gap:24,size:1}),c.jsx(HK,{className:"bg-surface-dark border border-white/10 text-white fill-white rounded-xl overflow-hidden shadow-xl"})]}),c.jsx("div",{className:"absolute top-6 right-6 z-10 flex gap-3",children:c.jsxs("div",{className:"bg-surface-dark/80 backdrop-blur border border-white/10 rounded-xl p-1 flex shadow-2xl",children:[c.jsx(Ct,{variant:"ghost",size:"sm",icon:"save",className:"hover:bg-white/5",children:"Save Layout"}),c.jsx("div",{className:"w-px bg-white/10 my-1"}),c.jsx(Ct,{onClick:M,variant:"primary",size:"sm",icon:"auto_fix_high",className:"shadow-lg shadow-primary/20",children:"Auto Layout"})]})})]})]})},Jne=()=>c.jsx(L4,{children:c.jsx(Zne,{})}),ere=({id:t})=>{const{id:e}=ri(),n=ni(),[r,i]=V.useState("overview"),[s,a]=V.useState(null),[o,l]=V.useState(!0),[u,d]=V.useState(!1);V.useEffect(()=>{p()},[t]);const p=async()=>{l(!0);try{const x=await ke.get(`/bd/entidadindividual/${t}`);a(x)}catch(x){console.error("Error loading character:",x)}finally{l(!1)}},h=async()=>{try{await ke.patch("/bd/modificar",{...s,tipoEntidad:"entidadindividual"}),d(!1)}catch(x){console.error("Error saving:",x)}},m=async()=>{if(window.confirm("Move this character to the Trash Bin?"))try{await ke.delete(`/bd/entidadindividual/${t}`),n(`/project/${e}`)}catch(x){console.error(x)}},y=(x,_)=>{a(v=>({...v,[x]:_}))};return o?c.jsx("div",{className:"p-20 text-center text-slate-500 animate-pulse",children:"Summoning entity..."}):s?c.jsxs("div",{className:"flex h-full",children:[c.jsxs("div",{className:"flex-1 flex flex-col overflow-y-auto custom-scrollbar p-8 gap-6",children:[c.jsxs("div",{className:"flex items-start gap-6",children:[c.jsx("div",{className:"relative",children:c.jsx(Jf,{url:s.imagenUrl||"https://images.unsplash.com/photo-1544005313-94ddf0286df2?q=80&w=1976&auto=format&fit=crop",size:"xl",className:"rounded-2xl border-2 border-primary shadow-[0_0_30px_rgba(99,102,242,0.3)]"})}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[c.jsx("span",{className:"text-xs font-bold text-primary bg-primary/10 px-2 py-0.5 rounded border border-primary/20",children:s.estado||"ACTIVE"}),c.jsx("span",{className:"text-xs font-bold text-slate-400 bg-surface-light px-2 py-0.5 rounded border border-white/5",children:s.tipo||"Unknown"})]}),c.jsxs("h1",{className:"text-4xl font-bold text-white mb-2",children:[s.nombre," ",s.apellidos]}),c.jsx("p",{className:"text-lg text-slate-300",children:s.origen||"Traveling the void"})]}),c.jsxs("div",{className:"flex gap-2",children:[!u&&c.jsx(Ct,{className:"border-red-500/30 text-red-400 hover:bg-red-500/10",icon:"delete",onClick:m,children:"Delete"}),c.jsx(Ct,{variant:"secondary",icon:u?"close":"edit",onClick:()=>d(!u),children:u?"Cancel":"Edit Profile"}),u&&c.jsx(Ct,{variant:"primary",icon:"save",onClick:h,children:"Save Changes"})]})]}),c.jsx("div",{className:"border-b border-glass-border flex gap-6",children:["Overview","Biography","Attributes & Stats","Relationships"].map(x=>c.jsx("button",{onClick:()=>i(x.toLowerCase()),className:`pb-4 px-2 text-sm font-bold border-b-2 transition-colors ${r===x.toLowerCase()?"text-primary border-primary":"text-slate-500 border-transparent hover:text-white"}`,children:x},x))}),c.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[c.jsx("div",{className:"col-span-1 space-y-6",children:c.jsxs(ft,{className:"p-4",children:[c.jsxs("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-4 flex items-center gap-2",children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"fingerprint"})," Identity"]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Name"}),c.jsx("input",{type:"text",value:s.nombre,onChange:x=>y("nombre",x.target.value),className:"w-full bg-surface-light border border-white/10 rounded px-3 py-2 text-white text-sm",readOnly:!u})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Surnames"}),c.jsx("input",{type:"text",value:s.apellidos||"",onChange:x=>y("apellidos",x.target.value),className:"w-full bg-surface-light border border-white/10 rounded px-3 py-2 text-white text-sm",readOnly:!u})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Type / Species"}),c.jsx("input",{type:"text",value:s.tipo||"",onChange:x=>y("tipo",x.target.value),className:"w-full bg-surface-light border border-white/10 rounded px-3 py-2 text-white text-sm",readOnly:!u})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Origin"}),c.jsx("input",{type:"text",value:s.origen||"",onChange:x=>y("origen",x.target.value),className:"w-full bg-surface-light border border-white/10 rounded px-3 py-2 text-white text-sm",readOnly:!u})]})]})]})}),c.jsx("div",{className:"col-span-2 space-y-6",children:c.jsxs(ft,{className:"p-6 relative overflow-hidden group",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider flex items-center gap-2",children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"auto_stories"})," Narrative & Connections"]}),!u&&c.jsx("span",{className:"text-[10px] text-slate-600 bg-white/5 px-2 py-1 rounded",children:"Read Only"})]}),c.jsxs("div",{className:"mb-8",children:[c.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-primary mb-3 opacity-80",children:"Biography"}),c.jsx("textarea",{value:s.descripcion||"",onChange:x=>y("descripcion",x.target.value),readOnly:!u,className:`w-full bg-transparent border-none outline-none text-slate-300 text-sm leading-relaxed resize-none custom-scrollbar ${u?"min-h-[150px] placeholder-white/20":"h-auto overflow-hidden"}`,placeholder:"Write the history of this person..."}),c.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-primary mt-6 mb-3 opacity-80",children:"Behavior & Personality"}),c.jsx("textarea",{value:s.comportamiento||"",onChange:x=>y("comportamiento",x.target.value),readOnly:!u,className:`w-full bg-transparent border-none outline-none text-slate-300 text-sm leading-relaxed resize-none custom-scrollbar ${u?"min-h-[100px]":"h-auto overflow-hidden"}`,placeholder:"How does this person act?"})]}),c.jsxs("div",{className:"pt-6 border-t border-white/5",children:[c.jsxs("h4",{className:"text-[10px] font-black uppercase tracking-widest text-primary mb-4 flex items-center gap-2 opacity-80",children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"hub"})," Established Connections"]}),s.relaciones&&s.relaciones.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:s.relaciones.map((x,_)=>{var v,w,b;return c.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/5 rounded-xl border border-white/5 hover:border-primary/30 transition-colors",children:[c.jsx("div",{className:"size-8 rounded-full bg-white/10 flex items-center justify-center text-xs font-bold",children:((w=(v=x.entidadDestino)==null?void 0:v.nombre)==null?void 0:w.charAt(0))||"?"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-bold text-white truncate",children:((b=x.entidadDestino)==null?void 0:b.nombre)||"Unknown"}),c.jsx("div",{className:"text-[10px] text-primary truncate",children:x.tipoRelacion||"Connected"})]})]},_)})}):c.jsx("div",{className:"p-6 text-center bg-white/5 rounded-xl border border-dashed border-white/10",children:c.jsx("p",{className:"text-xs text-slate-500 italic",children:"No relationships recorded yet."})})]})]})})]})]}),c.jsxs("div",{className:"w-80 border-l border-glass-border bg-surface-dark/50 hidden xl:flex flex-col",children:[c.jsxs("div",{className:"p-4 border-b border-glass-border flex justify-between items-center",children:[c.jsx("span",{className:"text-xs font-bold text-slate-500",children:"QUICK NOTES"}),c.jsx("button",{className:"text-slate-400 hover:text-white",children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:"open_in_new"})})]}),c.jsx("div",{className:"p-4 flex-1",children:c.jsx("textarea",{className:"w-full h-full bg-transparent border-none outline-none text-sm text-slate-300 placeholder-slate-600 resize-none",placeholder:"Draft a quick scene or jot down notes for Elara here..."})}),c.jsx("div",{className:"p-2 border-t border-glass-border text-right text-[10px] text-slate-600",children:"0 words"})]})]}):c.jsx("div",{className:"p-20 text-center text-red-500",children:"Character not found in the archives."})},vj=({id:t})=>{const[e,n]=V.useState(null),[r,i]=V.useState(!0),[s,a]=V.useState(!1);V.useEffect(()=>{o()},[t]);const o=async()=>{i(!0);try{const d=await ke.get(`/bd/zona/${t}`);n(d)}catch(d){console.error("Error loading location:",d)}finally{i(!1)}},l=async()=>{try{await ke.patch("/bd/modificar",{...e,tipoEntidad:"zona"}),a(!1)}catch(d){console.error("Error saving:",d)}},u=(d,p)=>{n(h=>({...h,[d]:p}))};return r?c.jsx("div",{className:"p-20 text-center text-slate-500 animate-pulse",children:"Scanning terrain..."}):e?c.jsxs("div",{className:"flex h-full overflow-y-auto custom-scrollbar p-8 flex-col gap-8",children:[c.jsxs("header",{className:"flex justify-between items-end",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("span",{className:"text-xs font-bold text-emerald-400 bg-emerald-400/10 px-2 py-0.5 rounded border border-emerald-400/20",children:"LOCATION"}),c.jsx("span",{className:"text-xs font-bold text-slate-400 bg-surface-light px-2 py-0.5 rounded border border-white/5",children:e.tipo||"Wilderness"})]}),c.jsx("h1",{className:"text-5xl font-manrope font-black text-white tracking-tight",children:e.nombre}),c.jsx("p",{className:"text-slate-400 mt-2",children:e.apellidos||"Uncharted territory"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(Ct,{variant:"secondary",icon:s?"close":"edit",onClick:()=>a(!s),children:s?"Cancel":"Edit Location"}),s&&c.jsx(Ct,{variant:"primary",icon:"save",onClick:l,children:"Update Records"})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-8",children:[c.jsxs("div",{className:"col-span-1 space-y-6",children:[c.jsxs(ft,{className:"p-6",children:[c.jsxs("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-4 flex items-center gap-2",children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"straighten"})," Geography & Scale"]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Size / Scale"}),c.jsx("input",{type:"text",value:e.tamanno||"",onChange:d=>u("tamanno",d.target.value),className:"w-full bg-surface-light border border-white/10 rounded px-3 py-2 text-white text-sm",readOnly:!s})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Development Level"}),c.jsx("input",{type:"text",value:e.desarrollo||"",onChange:d=>u("desarrollo",d.target.value),className:"w-full bg-surface-light border border-white/10 rounded px-3 py-2 text-white text-sm",readOnly:!s})]})]})]}),c.jsxs(ft,{className:"p-6",children:[c.jsx("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-4",children:"Quick Stats"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-white/5 p-3 rounded-xl border border-white/5",children:[c.jsx("span",{className:"text-[10px] text-slate-500 block",children:"Density"}),c.jsx("span",{className:"text-white font-bold",children:"Medium"})]}),c.jsxs("div",{className:"bg-white/5 p-3 rounded-xl border border-white/5",children:[c.jsx("span",{className:"text-[10px] text-slate-500 block",children:"Security"}),c.jsx("span",{className:"text-emerald-400 font-bold",children:"Stable"})]})]})]})]}),c.jsx("div",{className:"col-span-2 space-y-6",children:c.jsxs(ft,{className:"p-8",children:[c.jsxs("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-4 flex items-center gap-2",children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"description"})," Topographic Records & Lore"]}),c.jsx("textarea",{value:e.descripcion||"",onChange:d=>u("descripcion",d.target.value),readOnly:!s,className:"w-full bg-transparent border-none outline-none text-slate-300 text-lg leading-relaxed min-h-[400px] resize-none",placeholder:"Describe the vistas, the smells, and the secrets of this place..."})]})})]})]}):c.jsx("div",{className:"p-20 text-center text-red-500",children:"Location not found in the maps."})},tre=({id:t})=>{const[e,n]=V.useState(null),[r,i]=V.useState(!0),[s,a]=V.useState(!1);V.useEffect(()=>{o()},[t]);const o=async()=>{i(!0);try{const d=await ke.get(`/bd/entidadcolectiva/${t}`);n(d)}catch(d){console.error("Error loading collective:",d)}finally{i(!1)}},l=async()=>{try{await ke.patch("/bd/modificar",{...e,tipoEntidad:"entidadcolectiva"}),a(!1)}catch(d){console.error("Error saving:",d)}},u=(d,p)=>{n(h=>({...h,[d]:p}))};return r?c.jsx("div",{className:"p-20 text-center text-slate-500 animate-pulse",children:"Gathering intelligence..."}):e?c.jsxs("div",{className:"flex h-full overflow-y-auto custom-scrollbar p-8 flex-col gap-8",children:[c.jsxs("header",{className:"flex justify-between items-end",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("span",{className:"text-xs font-bold text-indigo-400 bg-indigo-400/10 px-2 py-0.5 rounded border border-indigo-400/20",children:"COLLECTIVE"}),c.jsx("span",{className:"text-xs font-bold text-slate-400 bg-surface-light px-2 py-0.5 rounded border border-white/5",children:e.tipo||"Organization"})]}),c.jsx("h1",{className:"text-5xl font-manrope font-black text-white tracking-tight",children:e.nombre}),c.jsxs("p",{className:"text-slate-400 mt-2",children:[e.cantidadMiembros||"Unknown"," members"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(Ct,{variant:"secondary",icon:s?"close":"edit",onClick:()=>a(!s),children:s?"Cancel":"Edit Collective"}),s&&c.jsx(Ct,{variant:"primary",icon:"save",onClick:l,children:"Update Dossier"})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-8",children:[c.jsx("div",{className:"col-span-1 space-y-6",children:c.jsxs(ft,{className:"p-6",children:[c.jsxs("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-4 flex items-center gap-2",children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"group_work"})," Group Dynamics"]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Scale / Members"}),c.jsx("input",{type:"text",value:e.cantidadMiembros||"",onChange:d=>u("cantidadMiembros",d.target.value),className:"w-full bg-surface-light border border-white/10 rounded px-3 py-2 text-white text-sm",readOnly:!s})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Behavior / Alignment"}),c.jsx("input",{type:"text",value:e.comportamiento||"",onChange:d=>u("comportamiento",d.target.value),className:"w-full bg-surface-light border border-white/10 rounded px-3 py-2 text-white text-sm",readOnly:!s})]})]})]})}),c.jsx("div",{className:"col-span-2 space-y-6",children:c.jsxs(ft,{className:"p-8",children:[c.jsxs("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-4 flex items-center gap-2",children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"history_edu"})," Mandate & History"]}),c.jsx("textarea",{value:e.descripcion||"",onChange:d=>u("descripcion",d.target.value),readOnly:!s,className:"w-full bg-transparent border-none outline-none text-slate-300 text-lg leading-relaxed min-h-[400px] resize-none",placeholder:"Detail the motives, the structure, and the legacy of this group..."})]})})]})]}):c.jsx("div",{className:"p-20 text-center text-red-500",children:"Collective not found in the records."})},nre=()=>c.jsx("div",{className:"flex-1 flex overflow-hidden bg-background-dark font-sans text-slate-300",children:c.jsxs("main",{className:"flex-1 flex flex-col p-12 overflow-y-auto custom-scrollbar relative",children:[c.jsxs("header",{className:"mb-12 space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-2 text-slate-500 font-bold text-[10px] tracking-widest uppercase",children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"grid_view"}),c.jsx("span",{children:"Universo Alpha"}),c.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_right"}),c.jsx("span",{children:"Galaxia Andrmeda"}),c.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_right"}),c.jsx("span",{className:"text-white",children:"Sistema Solar"})]}),c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"space-y-4 max-w-3xl",children:[c.jsxs("div",{className:"flex items-center gap-3 px-3 py-1 rounded bg-orange-500/10 text-orange-400 border border-orange-500/20 inline-block",children:[c.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"sunny"}),c.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"Sistema Planetario"}),c.jsx("span",{className:"text-[9px] font-bold text-slate-600 tracking-widest ml-2",children:"ID: SYS-SOL-001"})]}),c.jsx("h1",{className:"text-6xl font-manrope font-black text-white tracking-tight",children:"Sistema Solar"}),c.jsx("p",{className:"text-slate-400 text-lg leading-relaxed",children:"Sistema planetario principal ubicado en el Brazo de Orin, hogar de la nica vida biolgica compleja confirmada en el sector galctico Alpha-9."})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{className:"p-3 rounded-2xl bg-white/5 hover:bg-red-500/10 text-slate-500 hover:text-red-400 border border-white/5 transition-all outline-none",children:c.jsx("span",{className:"material-symbols-outlined",children:"delete"})}),c.jsx(Ct,{variant:"primary",icon:"save",children:"Guardar"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[c.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[c.jsxs("section",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"sell"}),c.jsx("h4",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Etiquetas"}),c.jsx("span",{className:"ml-auto text-[9px] font-bold text-slate-600 px-1.5 py-0.5 rounded bg-white/5",children:"3 ACTIVAS"})]}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx(qw,{label:"Estrella Tipo G",color:"amber",icon:"star"}),c.jsx(qw,{label:"Vida Confirmada",color:"emerald",icon:"tempest"}),c.jsx(qw,{label:"Rico en Agua",color:"cyan",icon:"water_drop"}),c.jsx("button",{className:"size-8 rounded-full border border-dashed border-white/10 flex items-center justify-center text-slate-600 hover:text-white hover:border-white/30 transition-all",children:"+"})]})]}),c.jsxs("section",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"analytics"}),c.jsx("h4",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Atributos Principales"}),c.jsx("button",{className:"ml-auto text-slate-600 hover:text-white transition-colors",children:c.jsx("span",{className:"material-symbols-outlined text-lg",children:"settings"})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx(sm,{label:"Forma / Estructura",value:"Heliosfrica Estndar",icon:"hive"}),c.jsx(sm,{label:"Composicin",value:"Hidrgeno (74%), Helio (24%)",icon:"experiment"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx(sm,{label:"Edad (Aos)",value:"4.6 MM",unit:"Aos"}),c.jsx(sm,{label:"Ciclo Orbital",value:"230 MM",unit:"Aos"})]})]})]}),c.jsxs("section",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"menu_book"}),c.jsx("h4",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Notas de Lore"})]}),c.jsx("textarea",{className:"w-full h-48 bg-white/5 border border-white/5 rounded-[2rem] p-6 text-sm text-slate-400 placeholder:text-slate-700 focus:border-primary/50 outline-none transition-all resize-none leading-relaxed italic shadow-inner",defaultValue:"El sistema contiene un cinturn de asteroides inusualmente denso entre el 4 y 5 planeta. Se teoriza que es el remanente de una colisin planetaria antigua conocida como 'El Gran Impacto' en las escrituras sagradas de los habitantes de Terra."})]})]}),c.jsx("div",{className:"lg:col-span-2",children:c.jsxs(ft,{className:"h-full border-white/5 bg-surface-dark/40 overflow-hidden flex flex-col shadow-2xl",children:[c.jsxs("header",{className:"p-8 border-b border-white/5 flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"size-10 rounded-xl bg-primary/20 text-primary flex items-center justify-center",children:c.jsx("span",{className:"material-symbols-outlined",children:"hub"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-white text-lg tracking-tight",children:"Contenido Interno (Planetas)"}),c.jsx("p",{className:"text-[10px] font-medium text-slate-500 mt-0.5",children:"Arrastra para reordenar la jerarqua orbital"})]})]}),c.jsxs("div",{className:"px-3 py-1 rounded-full bg-emerald-500/10 text-emerald-400 border border-emerald-500/20 text-[10px] font-black uppercase tracking-widest flex items-center gap-2",children:[c.jsx("div",{className:"size-1.5 rounded-full bg-emerald-500 animate-pulse"}),"8 Entidades"]})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-3",children:[c.jsx(Yd,{name:"Mercurio",type:"Rocoso",stats:"430C | 88 Das",icon:"public"}),c.jsx(Yd,{name:"Venus",type:"Atmsfera",stats:"462C | 225 Das",icon:"public"}),c.jsx(Yd,{name:"Tierra",type:"Habitable",stats:"8B Hab | 1 Luna",icon:"public",active:!0}),c.jsx(Yd,{name:"Marte",type:"Desierto",stats:"-60C | 2 Lunas",icon:"public"}),c.jsx(Yd,{name:"Cinturn Asteroides",type:"Anillo",stats:">1M Obj",icon:"grain"})]}),c.jsx("div",{className:"p-8 bg-black/20 border-t border-white/5",children:c.jsxs("button",{className:"w-full py-4 rounded-[1.5rem] border-2 border-dashed border-white/10 text-slate-500 hover:text-white hover:border-primary/50 hover:bg-primary/5 transition-all flex items-center justify-center gap-3 font-black uppercase text-[10px] tracking-[0.2em]",children:[c.jsx("span",{className:"material-symbols-outlined",children:"add"}),"Aadir Nueva Entidad"]})})]})})]})]})}),qw=({label:t,color:e,icon:n})=>c.jsxs("div",{className:`px-4 py-1.5 rounded-xl bg-${e}-500/10 text-${e}-400 border border-${e}-500/20 flex items-center gap-2 text-[10px] font-black uppercase tracking-widest shadow-lg`,children:[c.jsx("span",{className:"material-symbols-outlined text-[14px]",children:n}),t]}),sm=({label:t,value:e,unit:n,icon:r})=>c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest text-slate-600 ml-1",children:t}),c.jsxs("div",{className:"w-full bg-white/5 border border-white/5 rounded-2xl px-5 py-3.5 flex items-center justify-between group hover:border-white/10 transition-all",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[r&&c.jsx("span",{className:"material-symbols-outlined text-slate-500 text-lg group-hover:text-primary transition-colors",children:r}),c.jsx("span",{className:"text-sm font-bold text-slate-300",children:e})]}),n&&c.jsx("span",{className:"text-[10px] font-black text-slate-600 uppercase tracking-widest",children:n})]})]}),Yd=({name:t,type:e,stats:n,icon:r,active:i})=>c.jsxs("div",{className:`group flex items-center gap-6 p-4 rounded-2xl transition-all cursor-pointer ${i?"bg-primary/10 border border-primary/20 shadow-xl":"hover:bg-white/5 border border-transparent"}`,children:[c.jsx("span",{className:"material-symbols-outlined text-slate-700 group-hover:text-slate-500",children:"drag_indicator"}),c.jsx("div",{className:`size-12 rounded-xl flex items-center justify-center ${i?"bg-primary text-white shadow-lg shadow-primary/30":"bg-surface-dark border border-white/5 text-slate-500"}`,children:c.jsx("span",{className:"material-symbols-outlined text-3xl",children:r})}),c.jsx("div",{className:"flex-1",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("h4",{className:"text-sm font-bold text-white group-hover:text-primary transition-colors",children:t}),c.jsx("span",{className:`text-[8px] font-black px-1.5 py-0.5 rounded uppercase tracking-widest ${i?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-white/5 text-slate-600"}`,children:e})]})}),c.jsx("div",{className:"flex flex-col items-end gap-1",children:c.jsxs("div",{className:"flex items-center gap-1.5 text-slate-500",children:[c.jsx("span",{className:"material-symbols-outlined text-[12px]",children:"analytics"}),c.jsx("span",{className:"text-[10px] font-mono tracking-tight group-hover:text-slate-300",children:n})]})}),c.jsxs("div",{className:"flex gap-2 ml-4",children:[c.jsx("button",{className:"p-2 rounded-lg text-slate-700 hover:text-white hover:bg-white/5 transition-all",children:c.jsx("span",{className:"material-symbols-outlined text-xl",children:"edit_note"})}),i?c.jsx("button",{className:"size-8 rounded-full bg-primary text-white flex items-center justify-center shadow-lg",children:c.jsx("span",{className:"material-symbols-outlined text-lg",children:"arrow_forward"})}):c.jsx("button",{className:"p-2 rounded-lg text-slate-700 hover:text-white hover:bg-white/5 transition-all",children:c.jsx("span",{className:"material-symbols-outlined text-xl",children:"open_in_new"})})]})]}),rre=()=>c.jsx("div",{className:"flex-1 flex overflow-hidden bg-background-dark font-sans text-slate-300",children:c.jsxs("main",{className:"flex-1 flex flex-col p-12 overflow-y-auto custom-scrollbar relative",children:[c.jsxs("header",{className:"mb-12 space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-2 text-slate-500 font-bold text-[10px] tracking-widest uppercase",children:[c.jsx("span",{children:"Sistema Solar"}),c.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_right"}),c.jsx("span",{children:"Kepler-186f"}),c.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_right"}),c.jsx("span",{className:"text-white",children:"Territorios"})]}),c.jsxs("div",{className:"flex justify-between items-end",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[c.jsx("h1",{className:"text-6xl font-manrope font-black text-white tracking-tight",children:"Kepler-186f"}),c.jsx("span",{className:"material-symbols-outlined text-4xl text-primary",children:"public"})]}),c.jsx("p",{className:"text-slate-400 text-lg max-w-2xl leading-relaxed",children:"Gestin geopoltica y geogrfica de la superficie planetaria. Administra biomas, asentamientos y recursos estratgicos."})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx(Ct,{variant:"secondary",icon:"map",children:"Ver Atlas"}),c.jsx(Ct,{variant:"primary",icon:"add",children:"Nuevo Territorio"})]})]})]}),c.jsxs("section",{className:"space-y-8",children:[c.jsxs(ft,{className:"p-2 flex items-center justify-between border-white/5",children:[c.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[c.jsxs("div",{className:"relative flex-1 max-w-sm",children:[c.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-500 text-sm",children:"search"}),c.jsx("input",{type:"text",placeholder:"Buscar por nombre...",className:"w-full bg-transparent border-none rounded-xl py-2 pl-9 pr-4 text-xs focus:ring-1 focus:ring-primary/30 outline-none transition-all"})]}),c.jsx("div",{className:"w-px h-6 bg-white/5 mx-2"}),c.jsx(Bw,{label:"Bioma: Todos"}),c.jsx(Bw,{label:"Poblacin"}),c.jsx(Bw,{label:"Estado"})]}),c.jsxs("div",{className:"flex items-center gap-1 p-1 bg-white/5 rounded-lg",children:[c.jsx("button",{className:"p-1.5 rounded-md text-slate-500 hover:text-white transition-colors",children:c.jsx("span",{className:"material-symbols-outlined text-lg",children:"format_list_bulleted"})}),c.jsx("button",{className:"p-1.5 rounded-md bg-white/10 text-white shadow-sm",children:c.jsx("span",{className:"material-symbols-outlined text-lg",children:"grid_view"})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[c.jsx(zw,{title:"Nueva Neo-Tokyo",desc:"Metrpolis vertical construida sobre las...",image:"https://lh3.googleusercontent.com/aida-public/AB6AXuAYF5Q6W3o1w1f1",badges:["Capital"],stats:["15M","Templado","Costero"],color:"cyan"}),c.jsx(zw,{title:"Mar de Dunas",desc:"Extensin rida rica en especia slica...",image:"https://lh3.googleusercontent.com/aida-public/AB6AXuBYG6R7X4p2x2g2",stats:["Hostil","rido"],color:"amber"}),c.jsx(zw,{title:"Sanctum Bio-Domo",desc:"Instalacin de investigacin...",image:"https://lh3.googleusercontent.com/aida-public/AB6AXuCZ H7S8Y5q3z3h3",badges:["Ciencia"],stats:["5K","Jungla"],color:"purple"}),c.jsxs("div",{className:"group border-2 border-dashed border-white/5 rounded-[2.5rem] flex flex-col items-center justify-center p-12 gap-4 hover:border-primary/30 hover:bg-primary/5 transition-all cursor-pointer",children:[c.jsx("div",{className:"size-16 rounded-3xl bg-white/5 flex items-center justify-center group-hover:scale-110 transition-transform",children:c.jsx("span",{className:"material-symbols-outlined text-3xl text-slate-600 group-hover:text-primary",children:"add_location_alt"})}),c.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-600 group-hover:text-white",children:"Aadir Territorio"})]})]})]})]})}),Bw=({label:t})=>c.jsxs("button",{className:"flex items-center gap-2 px-3 py-1.5 rounded-xl hover:bg-white/5 transition-all group",children:[c.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 group-hover:text-white",children:t}),c.jsx("span",{className:"material-symbols-outlined text-slate-600 text-[14px]",children:"expand_more"})]}),zw=({title:t,desc:e,image:n,badges:r=[],stats:i=[],color:s})=>c.jsxs("div",{className:"group relative rounded-[2.5rem] overflow-hidden border border-white/5 bg-surface-dark/50 hover:border-white/10 transition-all shadow-2xl",children:[c.jsxs("div",{className:"h-48 overflow-hidden relative",children:[c.jsx("img",{src:n,alt:t,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110 opacity-60 group-hover:opacity-100"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-surface-dark via-transparent to-transparent"}),c.jsx("div",{className:"absolute top-4 right-4 flex gap-2",children:r.map(a=>c.jsxs("span",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest bg-${s==="cyan"?"primary":s==="amber"?"amber-500":"purple-500"}/20 text-${s==="cyan"?"primary":s==="amber"?"amber-400":"purple-400"} border border-white/10 backdrop-blur-md flex items-center gap-1.5`,children:[c.jsx("span",{className:"material-symbols-outlined text-[12px]",children:a==="Capital"?"star":"science"}),a]},a))})]}),c.jsxs("div",{className:"p-8 space-y-6",children:[c.jsxs("header",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-manrope font-black text-white mb-2 group-hover:text-primary transition-colors",children:t}),c.jsx("p",{className:"text-xs text-slate-500 leading-relaxed line-clamp-2",children:e})]}),c.jsx("button",{className:"p-2 text-slate-700 hover:text-white",children:c.jsx("span",{className:"material-symbols-outlined",children:"more_vert"})})]}),c.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(a=>c.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1 rounded-full bg-white/5 border border-white/5 text-[9px] font-black text-slate-400 uppercase tracking-widest",children:[c.jsx("div",{className:`size-1.5 rounded-full bg-${s==="cyan"?"primary":s==="amber"?"amber-500":"purple-500"}/50`}),a]},a))}),c.jsxs("div",{className:"flex gap-3 pt-2",children:[c.jsxs("button",{className:"flex-1 py-2.5 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 text-[10px] font-black uppercase tracking-widest text-slate-300 flex items-center justify-center gap-2 transition-all",children:[c.jsx("span",{className:"material-symbols-outlined text-sm opacity-50",children:"edit"})," Editar"]}),c.jsxs("button",{className:"flex-1 py-2.5 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 text-[10px] font-black uppercase tracking-widest text-slate-300 flex items-center justify-center gap-2 transition-all",children:[c.jsx("span",{className:"material-symbols-outlined text-sm opacity-50",children:"map"})," Ubicacin"]})]})]})]}),ire=()=>{const{type:t,entityId:e}=ri(),n=()=>{const r=t==null?void 0:t.toLowerCase();switch(r){case"character":case"entidadindividual":return c.jsx(ere,{id:e});case"location":case"zona":return c.jsx(vj,{id:e});case"culture":case"entidadcolectiva":return c.jsx(tre,{id:e});case"universe":case"galaxy":case"system":return c.jsx(nre,{id:e,type:r});case"planet":return c.jsx(rre,{id:e});case"construccion":return c.jsx(vj,{id:e});case"efectos":return c.jsxs("div",{className:"p-8 text-white",children:["Effect/Spell View for ID: ",id]});case"interaccion":return c.jsxs("div",{className:"p-8 text-white",children:["Interaction/Event View for ID: ",id]});case"magic":return c.jsxs("div",{className:"p-8 text-white",children:["Magic System View for ID: ",id]});default:return c.jsxs("div",{className:"p-8 text-white",children:["Unknown Entity Type: ",t]})}};return c.jsx("div",{className:"flex-1 bg-background-dark overflow-hidden",children:n()})},sre=()=>{var G,te,re;const{setRightPanelMode:t,setRightOpen:e,setRightPanelTitle:n}=Ko(),[r,i]=V.useState([]),[s,a]=V.useState(null),[o,l]=V.useState([]),[u,d]=V.useState(!0);V.useState(!1);const[p,h]=V.useState(!1),[m,y]=V.useState({nombre:"",descripcion:"",fechaTexto:"",ordenAbsoluto:0}),[x,_]=V.useState({nombre:"",descripcion:""}),[v,w]=V.useState(null);V.useState(null);const[b,N]=V.useState("eventos"),[E,A]=V.useState([]),[P,T]=V.useState([]),[M,k]=V.useState(null),j=fe.useRef(!1),O=async Q=>{try{return(await ke.get("/bd/relacion")).filter(ue=>ue.tipoOrigen==="lineatiempo"&&ue.idOrigen===Q||ue.tipoDestino==="lineatiempo"&&ue.idDestino===Q).map(ue=>ue.idOrigen===Q?ue.idDestino:ue.idOrigen)}catch(se){return console.error(se),[]}},q=async(Q,se)=>{const de=await O(Q),le=se.filter(he=>de.includes(he.id));A(le);const ue=se.filter(he=>he.id!==Q&&!de.includes(he.id));T(ue)},I=async Q=>{if(!(!s||!Q))try{await ke.put("/bd/insertar",{tipoEntidad:"relacion",tipoOrigen:"lineatiempo",idOrigen:s,tipoDestino:"lineatiempo",idDestino:Q,descripcion:"Anexo de lnea de tiempo"}),q(s,r)}catch(se){console.error(se)}},D=async Q=>{const de=(await ke.get("/bd/relacion")).find(le=>le.tipoOrigen==="lineatiempo"&&le.idOrigen===s&&le.idDestino===Q||le.tipoDestino==="lineatiempo"&&le.idDestino===s&&le.idOrigen===Q);de&&(await ke.delete(`/bd/relacion/${de.id}`),q(s,r))};V.useEffect(()=>{t("CUSTOM"),n("Lnea de Tiempo"),e(!0);const Q=setInterval(()=>{const se=document.getElementById("architect-right-panel-portal");se&&(k(se),clearInterval(Q))},50);return()=>{clearInterval(Q),t("NOTES"),n("")}},[]),V.useEffect(()=>{j.current||(j.current=!0,U())},[]),V.useEffect(()=>{s?(W(s),q(s,r),w(null),y({nombre:"",descripcion:"",fechaTexto:"",ordenAbsoluto:0})):l([])},[s]),V.useEffect(()=>{if(b==="eventos"&&!v){const Q=o.length>0?Math.max(...o.map(se=>se.ordenAbsoluto||0)):0;y(se=>({...se,ordenAbsoluto:Q+1}))}},[b,o,v]);const U=async()=>{d(!0);try{const Q=await ke.get("/bd/lineatiempo"),se=[...new Map(Q.map(ue=>[ue.id,ue])).values()],de=se.find(ue=>ue.esRaiz);se.length===0?(i([]),a(null)):(i(se),s||a(de?de.id:se[0].id));const le=se.filter(ue=>ue.esRaiz);if(le.length>1){le.sort((we,ae)=>we.id-ae.id);const ue=le[0],he=le.slice(1);he.forEach(we=>ke.delete(`/bd/lineatiempo/${we.id}`).catch(console.error));const qe=se.filter(we=>we.id===ue.id||!he.find(ae=>ae.id===we.id));i(qe),s||a(ue.id)}}catch(Q){console.error("Failed to load timelines",Q)}finally{d(!1)}},W=async Q=>{try{const se=await ke.get(`/timeline/linea/${Q}/eventos`);se.sort((de,le)=>(de.ordenAbsoluto||0)-(le.ordenAbsoluto||0)),l(se)}catch(se){console.error("Failed to load events",se)}},Y=async()=>{if(!s||!m.nombre)return;const Q={...m,ordenAbsoluto:parseInt(m.ordenAbsoluto)||0};try{v?await ke.put(`/timeline/evento/${v.id}`,{...Q,lineaTiempo:{id:s}}):await ke.post("/timeline/evento",{...Q,lineaTiempo:{id:s}}),y({nombre:"",descripcion:"",fechaTexto:"",ordenAbsoluto:0}),w(null),W(s)}catch(se){console.error(se)}},H=Q=>{w(Q),y({nombre:Q.nombre,descripcion:Q.descripcion,fechaTexto:Q.fechaTexto,ordenAbsoluto:Q.ordenAbsoluto||0}),N("eventos"),e(!0)},B=async()=>{if(x.nombre)try{const Q=await ke.post("/timeline/linea",{...x,esRaiz:!1});h(!1),_({nombre:"",descripcion:""}),U(),Q&&Q.id&&a(Q.id)}catch(Q){console.error(Q)}},[L,z]=V.useState({open:!1,type:null,id:null,title:"",message:""}),K=(Q,se)=>{se.stopPropagation(),z({open:!0,type:"TIMELINE",id:Q,title:"Delete Timeline",message:"Are you sure you want to delete this timeline? All events will be lost."})},J=(Q,se)=>{se.stopPropagation(),z({open:!0,type:"EVENT",id:Q,title:"Delete Event",message:"Are you sure you want to delete this event?"})},ne=async()=>{const{type:Q,id:se}=L;if(!(!Q||!se))try{if(Q==="TIMELINE"){if(await ke.delete(`/timeline/linea/${se}`),s===se){const de=r.filter(le=>le.id!==se);a(de.length>0?de[0].id:null)}U()}else Q==="EVENT"&&(await ke.delete(`/timeline/evento/${se}`),W(s),v&&v.id===se&&w(null))}catch(de){console.error(de),alert("Error deleting item")}},X=c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"p-4 border-b border-white/5",children:c.jsxs("div",{className:"flex bg-black/40 rounded-lg p-1",children:[c.jsx("button",{onClick:()=>N("eventos"),className:`flex-1 py-2 text-xs font-bold uppercase tracking-wider rounded-md transition-all ${b==="eventos"?"bg-primary text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Eventos"}),c.jsx("button",{onClick:()=>N("anexos"),className:`flex-1 py-2 text-xs font-bold uppercase tracking-wider rounded-md transition-all ${b==="anexos"?"bg-primary text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Anexos"})]})}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:[b==="eventos"&&c.jsx("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4",children:c.jsxs("div",{className:"bg-black/20 rounded-xl p-4 border border-white/5",children:[c.jsxs("h3",{className:"text-xs font-black uppercase text-primary mb-4 flex items-center justify-between",children:[v?"Edit Event":"New Event",v&&c.jsx("button",{onClick:()=>{w(null),y({nombre:"",descripcion:"",fechaTexto:"",ordenAbsoluto:o.length+1})},className:"text-[10px] text-slate-500 hover:text-white underline",children:"CANCEL"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-1 block",children:"Title"}),c.jsx("input",{className:"w-full bg-background-dark border border-white/10 rounded-lg p-2 text-sm text-white outline-none focus:border-primary",value:m.nombre,onChange:Q=>y({...m,nombre:Q.target.value}),placeholder:"Event Name"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-1 block",children:"Date Label"}),c.jsx("input",{className:"w-full bg-background-dark border border-white/10 rounded-lg p-2 text-sm text-white outline-none focus:border-primary",value:m.fechaTexto,onChange:Q=>y({...m,fechaTexto:Q.target.value}),placeholder:"e.g. Year 500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-1 block",children:"Order (Sort)"}),c.jsx("input",{type:"text",className:"w-full bg-background-dark border border-white/10 rounded-lg p-2 text-sm text-white outline-none focus:border-primary",value:m.ordenAbsoluto,onChange:Q=>{const se=Q.target.value;/^[-+]?\d*$/.test(se)&&y({...m,ordenAbsoluto:se})},placeholder:"+/- Num"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-1 block",children:"Description"}),c.jsx("textarea",{className:"w-full bg-background-dark border border-white/10 rounded-lg p-2 text-sm text-white outline-none focus:border-primary h-24 resize-none",value:m.descripcion,onChange:Q=>y({...m,descripcion:Q.target.value}),placeholder:"Describe what happened..."})]}),c.jsx("div",{className:"pt-2",children:c.jsx(Ct,{variant:"primary",onClick:Y,className:"w-full justify-center",children:v?"Save Changes":"Create Event"})}),v&&c.jsx("button",{onClick:Q=>J(v.id,Q),className:"w-full text-center text-xs text-red-500 hover:text-red-400 py-2 border border-red-500/20 rounded-lg hover:bg-red-500/10 transition-colors",children:"Delete Event"})]})]})}),b==="anexos"&&c.jsx("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4",children:c.jsxs("div",{className:"bg-black/20 rounded-xl p-4 border border-white/5",children:[c.jsx("h3",{className:"text-xs font-black uppercase text-primary mb-4",children:"Annexed Timelines"}),c.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Link other localized timelines to this one to verify chronological consistency."}),c.jsxs("div",{className:"space-y-2 mb-6",children:[E.map(Q=>c.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/5 rounded-lg border border-white/5",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"material-symbols-outlined text-xs text-slate-400",children:"timeline"}),c.jsx("span",{className:"text-xs font-bold text-slate-300",children:Q.nombre})]}),c.jsx("button",{onClick:()=>D(Q.id),className:"text-slate-500 hover:text-red-500",children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:"link_off"})})]},Q.id)),E.length===0&&c.jsx("span",{className:"text-xs text-slate-600 italic",children:"No linked timelines."})]}),c.jsx("h4",{className:"text-[10px] font-bold uppercase text-slate-400 mb-2",children:"Available to Link"}),c.jsxs("div",{className:"space-y-1",children:[P.map(Q=>c.jsxs("button",{onClick:()=>I(Q.id),className:"w-full flex items-center gap-2 p-2 hover:bg-white/5 rounded-lg text-left transition-colors group",children:[c.jsx("span",{className:"material-symbols-outlined text-xs text-green-500/50 group-hover:text-green-500",children:"add_link"}),c.jsx("span",{className:"text-xs text-slate-400 group-hover:text-white",children:Q.nombre})]},Q.id)),P.length===0&&c.jsx("span",{className:"text-xs text-slate-600 italic",children:"No other timelines available."})]})]})})]})]});return c.jsxs("div",{className:"flex h-screen bg-background-dark text-white overflow-hidden",children:[M&&qo.createPortal(X,M),c.jsxs("aside",{className:"w-64 bg-surface-dark border-r border-white/5 flex flex-col p-4 z-20 shrink-0",children:[c.jsxs("header",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-xs font-black uppercase tracking-widest text-primary",children:"Timelines"}),c.jsx("button",{onClick:()=>h(!p),className:"text-slate-400 hover:text-white",children:c.jsx("span",{className:"material-symbols-outlined",children:"add"})})]}),p&&c.jsxs("div",{className:"mb-4 p-3 bg-black/20 rounded-xl space-y-2 border border-white/10 animate-in fade-in slide-in-from-left-2",children:[c.jsx("input",{className:"w-full bg-transparent border-b border-white/20 text-sm p-1 outline-none focus:border-primary",placeholder:"Name",value:x.nombre,onChange:Q=>_({...x,nombre:Q.target.value})}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{onClick:B,className:"text-xs font-bold text-primary",children:"CREATE"})})]}),c.jsx("div",{className:"space-y-2 overflow-y-auto flex-1 custom-scrollbar",children:r.map(Q=>c.jsxs("div",{onClick:()=>a(Q.id),className:`group flex items-center justify-between p-3 rounded-xl cursor-pointer transition-all border ${s===Q.id?"bg-primary/10 border-primary text-white shadow-[0_0_15px_rgba(var(--primary-rgb),0.1)]":"bg-transparent border-transparent hover:bg-white/5 text-slate-400"}`,children:[c.jsxs("div",{className:"flex items-center gap-2 truncate",children:[c.jsx("span",{className:`material-symbols-outlined text-sm shrink-0 ${Q.esRaiz?"text-amber-400":""}`,children:Q.esRaiz?"public":"timeline"}),c.jsx("span",{className:"text-xs font-bold uppercase tracking-wide truncate",children:Q.nombre})]}),c.jsx("button",{onClick:se=>K(Q.id,se),className:"opacity-0 group-hover:opacity-100 text-slate-500 hover:text-red-500 transition-opacity",children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]},Q.id))})]}),c.jsxs("main",{className:"flex-1 relative flex flex-col h-full overflow-hidden bg-background-dark",children:[c.jsx("div",{className:"h-16 border-b border-white/5 bg-background-dark/80 backdrop-blur flex items-center px-8 z-10 shrink-0",children:c.jsxs("div",{children:[c.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[((G=r.find(Q=>Q.id===s))==null?void 0:G.esRaiz)&&c.jsx("span",{className:"text-amber-400 material-symbols-outlined",children:"star"}),((te=r.find(Q=>Q.id===s))==null?void 0:te.nombre)||"Select Timeline"]}),c.jsx("p",{className:"text-xs text-slate-500",children:(re=r.find(Q=>Q.id===s))==null?void 0:re.descripcion})]})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-8 relative custom-scrollbar z-10",children:c.jsxs("div",{className:"max-w-2xl mx-auto relative pl-8 border-l-2 border-white/10 space-y-8 pb-32",children:[o.length===0&&c.jsx("div",{className:"text-center text-slate-600 italic py-20",children:"No events yet. Use the right panel to add one."}),o.map((Q,se)=>c.jsxs("div",{className:"relative group animate-in fade-in slide-in-from-bottom-4",style:{animationDelay:`${se*50}ms`},children:[c.jsx("div",{className:"absolute top-6 -left-[41px] size-4 rounded-full bg-white/20 border-4 border-background-dark group-hover:bg-primary transition-colors cursor-pointer",onClick:()=>H(Q)}),c.jsxs("div",{className:"ml-4 bg-surface-dark/50 border border-white/5 p-5 rounded-2xl hover:border-primary/30 transition-all hover:bg-surface-dark group-hover:translate-x-1 duration-300 relative group/card",children:[c.jsxs("div",{className:"absolute top-3 right-3 opacity-0 group-hover/card:opacity-100 transition-opacity flex gap-1 bg-black/50 rounded-lg backdrop-blur-sm border border-white/5 p-1",children:[c.jsx("button",{onClick:()=>H(Q),className:"p-1.5 text-slate-400 hover:text-white hover:bg-white/10 rounded transition-colors",title:"Edit",children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"})}),c.jsx("button",{onClick:de=>J(Q.id,de),className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-500/10 rounded transition-colors",title:"Delete",children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]}),c.jsx("div",{className:"flex justify-between items-start",children:c.jsxs("div",{children:[c.jsxs("div",{className:"flex flex-col mb-1",children:[c.jsx("h3",{className:"text-lg font-bold text-white",children:Q.nombre}),c.jsx("span",{className:"text-xs font-mono font-bold text-primary opacity-80",children:Q.fechaTexto})]}),c.jsx("p",{className:"text-sm text-slate-400 leading-relaxed",children:Q.descripcion})]})})]})]},Q.id))]})})]}),c.jsx(Eh,{isOpen:L.open,onClose:()=>z({...L,open:!1}),onConfirm:ne,title:L.title,message:L.message,confirmText:"Delete",type:"danger"})]})},are=({onCancel:t,onCreate:e})=>{const[n,r]=V.useState(1),[i,s]=V.useState("regional"),[a,o]=V.useState("upload");return c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-background-dark/80 backdrop-blur-xl animate-in fade-in duration-300",children:c.jsx("div",{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto no-scrollbar relative animate-in zoom-in-95 duration-500",children:c.jsxs(ft,{className:"p-0 border-white/10 shadow-[0_0_100px_rgba(0,0,0,0.5)] overflow-hidden",children:[c.jsxs("header",{className:"p-8 border-b border-white/5 flex justify-between items-center bg-white/[0.02]",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"size-12 rounded-2xl bg-primary/20 text-primary flex items-center justify-center",children:c.jsx("span",{className:"material-symbols-outlined text-2xl",children:"add_location_alt"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-manrope font-black text-white tracking-tight",children:"Crear Nuevo Mapa / Zona"}),c.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"Configura los detalles para tu nueva entrada cartogrfica."})]})]}),c.jsx("button",{onClick:t,className:"text-slate-500 hover:text-white transition-colors",children:c.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),c.jsxs("div",{className:"p-12 space-y-12",children:[c.jsxs("section",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:`size-8 rounded-full flex items-center justify-center text-[10px] font-black ${n===1?"bg-primary text-white shadow-lg shadow-primary/30":"bg-white/10 text-slate-500"}`,children:"1"}),c.jsx("h2",{className:"text-sm font-black uppercase tracking-[0.2em] text-white",children:"Identidad y Jerarqua"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 pl-12",children:[c.jsx(ore,{label:"Nombre del Mapa",placeholder:"ej. La Costa de Zafiro"}),c.jsxs("div",{className:"space-y-1.5 row-span-2",children:[c.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-600 ml-1",children:"Descripcin"}),c.jsx("textarea",{placeholder:"Breve descripcin de la geografa, clima o importancia...",className:"w-full h-[120px] bg-white/5 border border-white/5 rounded-2xl p-4 text-sm text-white focus:border-primary/50 outline-none transition-all resize-none"})]}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-600 ml-1",children:"Zona Padre (Opcional)"}),c.jsxs("select",{className:"w-full bg-white/5 border border-white/5 rounded-2xl px-4 py-3 text-sm text-white focus:border-primary/50 outline-none appearance-none",children:[c.jsx("option",{children:"Ninguna (Nivel Superior)"}),c.jsx("option",{children:"Reino de Aethelgard"}),c.jsx("option",{children:"Continente de Aurum"})]}),c.jsx("p",{className:"text-[9px] text-slate-500 italic mt-1 ml-1 text-primary/70",children:"Seleccionar un padre convierte esto en sub-zona."})]})]})]}),c.jsx("div",{className:"h-px w-full bg-white/5"}),c.jsxs("section",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:`size-8 rounded-full flex items-center justify-center text-[10px] font-black ${n===2?"bg-primary text-white shadow-lg shadow-primary/30":"bg-white/10 text-slate-500"}`,children:"2"}),c.jsx("h2",{className:"text-sm font-black uppercase tracking-[0.2em] text-white",children:"Tipo de Mapa"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 pl-12",children:[c.jsx($w,{active:i==="world",onClick:()=>s("world"),icon:"public",label:"Mapa Mundial",desc:"Continentes, ocanos, escala global."}),c.jsx($w,{active:i==="regional",onClick:()=>s("regional"),icon:"map",label:"Mapa Regional",desc:"Reinos, provincias, biomas."}),c.jsx($w,{active:i==="local",onClick:()=>s("local"),icon:"location_city",label:"Ciudad / Local",desc:"Ciudades, mazmorras, mapas de batalla."})]})]}),c.jsx("div",{className:"h-px w-full bg-white/5"}),c.jsxs("section",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:`size-8 rounded-full flex items-center justify-center text-[10px] font-black ${n===3?"bg-primary text-white shadow-lg shadow-primary/30":"bg-white/10 text-slate-500"}`,children:"3"}),c.jsx("h2",{className:"text-sm font-black uppercase tracking-[0.2em] text-white",children:"Fuente del Lienzo"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pl-12",children:[c.jsx(yj,{active:a==="upload",onClick:()=>o("upload"),icon:"cloud_upload",label:"Cargar Archivo de Imagen",desc:"Arrastra y suelta o haz clic para buscar",subdesc:"JPG, PNG, WEBP  MAX 25MB"}),c.jsx(yj,{active:a==="blank",onClick:()=>o("blank"),icon:"brush",label:"Lienzo en Blanco",desc:"Crear un nuevo dibujo desde cero",subdesc:"4096 px x 4096 px"})]})]})]}),c.jsxs("footer",{className:"p-8 bg-white/[0.02] border-t border-white/5 flex justify-between items-center",children:[c.jsx("button",{onClick:t,className:"text-sm font-bold text-slate-500 hover:text-white transition-colors",children:"Cancelar"}),c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-slate-600",children:"Cambios guardados localmente"}),c.jsx(Ct,{variant:"primary",className:"px-10 py-3 shadow-xl",onClick:()=>e(a),children:"Crear Mapa"})]})]})]})})})},ore=({label:t,placeholder:e})=>c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-600 ml-1",children:t}),c.jsx("input",{type:"text",placeholder:e,className:"w-full bg-white/5 border border-white/5 rounded-2xl px-4 py-3 text-sm text-white focus:border-primary/50 transition-all outline-none"})]}),$w=({active:t,onClick:e,icon:n,label:r,desc:i})=>c.jsxs("div",{onClick:e,className:`p-6 rounded-3xl border transition-all cursor-pointer group ${t?"bg-primary/10 border-primary shadow-lg shadow-primary/10":"bg-white/5 border-white/5 hover:border-white/10"}`,children:[c.jsx("div",{className:`size-10 rounded-xl mb-4 flex items-center justify-center transition-all ${t?"bg-primary text-white":"bg-white/5 text-slate-500 group-hover:text-slate-300"}`,children:c.jsx("span",{className:"material-symbols-outlined",children:n})}),c.jsx("h3",{className:`text-sm font-bold mb-1 transition-colors ${t?"text-white":"text-slate-400 group-hover:text-slate-200"}`,children:r}),c.jsx("p",{className:"text-[10px] text-slate-500 leading-relaxed font-medium",children:i})]}),yj=({active:t,onClick:e,icon:n,label:r,desc:i,subdesc:s})=>c.jsxs("div",{onClick:e,className:`p-10 rounded-[2.5rem] border transition-all cursor-pointer group flex flex-col items-center text-center gap-4 ${t?"bg-primary/5 border-primary shadow-lg":"bg-white/[0.02] border-white/5 hover:border-white/10 hover:bg-white/[0.04]"}`,children:[c.jsx("div",{className:`size-16 rounded-[2rem] flex items-center justify-center transition-all ${t?"bg-primary text-white shadow-xl shadow-primary/20":"bg-white/5 text-slate-600 group-hover:text-slate-400"}`,children:c.jsx("span",{className:"material-symbols-outlined text-3xl",children:n})}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("h3",{className:`font-bold transition-colors ${t?"text-white":"text-slate-400"}`,children:r}),c.jsx("p",{className:"text-xs text-slate-500 font-medium",children:i})]}),c.jsx("div",{className:"flex gap-2 mt-2",children:s.split("").map((a,o)=>c.jsx("span",{className:"px-2 py-1 rounded bg-black/20 text-[8px] font-black text-slate-600 tracking-tighter uppercase whitespace-nowrap",children:a.trim()},o))})]}),lre=({mapTitle:t="Reino de Aethelgard",onSave:e,onBack:n})=>{const[r,i]=V.useState(100),[s,a]=V.useState(24),[o,l]=V.useState("#000000"),[u,d]=V.useState("brush"),[p,h]=V.useState(1),[m,y]=V.useState([{id:1,name:"Terreno Base",visible:!0,locked:!1,type:"raster"},{id:2,name:"Ros y Lagos",visible:!0,locked:!1,type:"vector"}]),x=fe.useRef(null),[_,v]=V.useState(!1),w=[{id:"select",icon:"near_me"},{id:"brush",icon:"brush"},{id:"eraser",icon:"ink_eraser"},{id:"fill",icon:"format_color_fill"},{id:"measure",icon:"straighten"},{id:"text",icon:"title"}],b=()=>{var O;return(O=x.current)==null?void 0:O.getContext("2d")},N=O=>{const q=m.find(D=>D.id===p);if(!q||!q.visible||q.locked)return;const I=b();I&&(v(!0),I.beginPath(),I.moveTo(O.nativeEvent.offsetX,O.nativeEvent.offsetY),I.lineWidth=s,I.lineCap="round",I.lineJoin="round",I.globalAlpha=r/100,u==="eraser"?I.globalCompositeOperation="destination-out":(I.globalCompositeOperation="source-over",I.strokeStyle=o))},E=O=>{if(!_)return;const q=b();q&&(q.lineTo(O.nativeEvent.offsetX,O.nativeEvent.offsetY),q.stroke())},A=()=>{var O;_&&(v(!1),(O=b())==null||O.closePath())},P=O=>{y(q=>q.map(I=>I.id===O?{...I,visible:!I.visible}:I))},T=O=>{y(q=>q.map(I=>I.id===O?{...I,locked:!I.locked}:I))},M=()=>{const O={id:Date.now(),name:`Capa ${m.length+1}`,visible:!0,locked:!1,type:"raster"};y([O,...m]),h(O.id)},k=O=>{m.length<=1||(y(q=>q.filter(I=>I.id!==O)),p===O&&h(m[0].id))},j=(O=!0)=>{var I;const q=(I=x.current)==null?void 0:I.toDataURL();console.log("Saving Map Data:",q?"Data present":"Empty"),O&&e&&e(q)};return c.jsxs("div",{className:"flex-1 flex flex-col bg-[#050508] text-slate-300 font-sans h-full overflow-hidden relative",children:[c.jsxs("header",{className:"h-20 flex-none border-b border-white/5 flex items-center justify-between px-8 bg-surface-dark/80 backdrop-blur-md z-30",children:[c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsx("button",{onClick:n,className:"p-2 rounded-xl bg-white/5 hover:bg-white/10 transition-colors",children:c.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),c.jsx("div",{className:"w-px h-8 bg-white/10"}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-white tracking-tight",children:t}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"size-1.5 rounded-full bg-primary"}),c.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Guardado localmente"})]})]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:n,className:"px-4 py-2 rounded-xl text-slate-400 hover:text-white hover:bg-white/5 text-xs font-bold uppercase tracking-widest transition-all",children:"Cancelar"}),c.jsxs("div",{className:"flex bg-white/5 rounded-xl p-1 gap-1 border border-white/10",children:[c.jsxs("button",{onClick:()=>j(!0),className:"h-9 px-4 rounded-lg bg-primary hover:bg-primary-light text-white text-[10px] font-black uppercase tracking-widest transition-all flex items-center gap-2",children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"save"}),"Guardar"]}),c.jsx("div",{className:"w-px bg-white/10 my-1"}),c.jsx("button",{onClick:()=>j(!1),className:"h-9 px-3 rounded-lg bg-transparent hover:bg-white/10 text-white transition-all flex items-center justify-center",title:"Guardar y Seguir Editando",children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit_document"})})]})]})]}),c.jsxs("div",{className:"flex-1 flex relative overflow-hidden",children:[c.jsx("aside",{className:"absolute left-8 top-1/2 -translate-y-1/2 z-40",children:c.jsxs(ft,{className:"p-2 flex flex-col gap-2 rounded-2xl border-white/10 bg-surface-dark/40 backdrop-blur-2xl shadow-2xl",children:[w.map(O=>c.jsx("button",{onClick:()=>d(O.id),className:`size-12 rounded-xl flex items-center justify-center transition-all ${u===O.id?"bg-primary text-white shadow-lg shadow-primary/30":"text-slate-500 hover:text-white hover:bg-white/5"}`,children:c.jsx("span",{className:"material-symbols-outlined text-xl",children:O.icon})},O.id)),c.jsx("div",{className:"w-8 h-px bg-white/10 mx-auto my-1"}),c.jsxs("div",{className:"relative group",children:[c.jsx("input",{type:"color",value:o,onChange:O=>l(O.target.value),className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full"}),c.jsx("div",{className:"size-12 rounded-xl flex items-center justify-center cursor-pointer",children:c.jsx("div",{className:"size-7 rounded-full border-2 border-white/20 shadow-inner group-hover:scale-110 transition-transform",style:{backgroundColor:o}})})]})]})}),c.jsxs("main",{className:"flex-1 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] bg-repeat relative overflow-hidden flex items-center justify-center p-20 no-scrollbar",children:[c.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"radial-gradient(circle, white 1px, transparent 1px)",backgroundSize:"30px 30px"}}),c.jsxs("div",{className:"relative group animate-in zoom-in-95 duration-700",children:[c.jsx("p",{className:"absolute -top-10 left-0 text-[10px] font-black uppercase tracking-[0.2em] text-slate-600",children:"Lienzo: 800x600px  RGB"}),c.jsx("div",{className:"relative bg-white rounded shadow-[0_0_100px_rgba(0,0,0,0.5)] overflow-hidden border border-white/10 cursor-crosshair",children:c.jsx("canvas",{ref:x,width:800,height:600,onMouseDown:N,onMouseMove:E,onMouseUp:A,onMouseLeave:A})})]})]}),c.jsxs("aside",{className:"absolute right-8 top-1/2 -translate-y-1/2 z-40 flex flex-col gap-6 w-80",children:[c.jsxs(ft,{className:"p-6 space-y-6 rounded-3xl border-white/10 bg-surface-dark/40 backdrop-blur-2xl shadow-2xl",children:[c.jsxs("header",{className:"flex justify-between items-center",children:[c.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Propiedades"}),c.jsx("button",{className:"text-slate-600 hover:text-white transition-colors",children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:"settings_input_component"})})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-xs font-bold text-slate-400",children:"Tamao del Pincel"}),c.jsxs("span",{className:"text-xs font-black text-white",children:[s,"px"]})]}),c.jsx("input",{type:"range",min:"1",max:"100",value:s,onChange:O=>a(O.target.value),className:"w-full accent-primary h-1 bg-white/5 rounded-full appearance-none cursor-pointer"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-xs font-bold text-slate-400",children:"Opacidad"}),c.jsxs("span",{className:"text-xs font-black text-white",children:[r,"%"]})]}),c.jsx("input",{type:"range",min:"0",max:"100",value:r,onChange:O=>i(O.target.value),className:"w-full accent-primary h-1 bg-white/5 rounded-full appearance-none cursor-pointer"})]})]})]}),c.jsxs(ft,{className:"p-6 space-y-6 rounded-3xl border-white/10 bg-surface-dark/40 backdrop-blur-2xl shadow-2xl flex-1 max-h-[400px] overflow-hidden flex flex-col",children:[c.jsxs("header",{className:"flex justify-between items-center",children:[c.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Capas"}),c.jsx("div",{className:"flex gap-2 text-slate-600",children:c.jsx("button",{onClick:M,className:"hover:text-white transition-colors",children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"})})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar space-y-2",children:m.map(O=>c.jsxs("div",{onClick:()=>h(O.id),className:`flex items-center gap-3 p-3 rounded-2xl transition-all cursor-pointer group select-none ${p===O.id?"bg-primary/10 border border-primary/20":"bg-transparent border border-transparent hover:bg-white/5"}`,children:[c.jsx("button",{onClick:q=>{q.stopPropagation(),P(O.id)},className:`material-symbols-outlined text-lg ${O.visible?"text-slate-500 hover:text-white":"text-slate-700"}`,children:O.locked?"lock":O.visible?"visibility":"visibility_off"}),c.jsx("div",{className:"size-10 rounded-lg bg-surface-light border border-white/5 flex items-center justify-center overflow-hidden",children:c.jsx("span",{className:"material-symbols-outlined opacity-30 text-xl",children:O.type==="raster"?"texture":"water_drop"})}),c.jsx("div",{className:"flex-1 min-w-0",children:c.jsx("p",{className:`text-xs font-bold truncate ${p===O.id?"text-white":"text-slate-400 group-hover:text-slate-200"}`,children:O.name})}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:q=>{q.stopPropagation(),T(O.id)},className:"material-symbols-outlined text-sm text-slate-700 hover:text-white transition-colors",children:O.locked?"lock_open":"lock"}),c.jsx("button",{onClick:q=>{q.stopPropagation(),k(O.id)},className:"material-symbols-outlined text-sm text-red-900/50 hover:text-red-400 transition-colors",children:"delete"})]})]},O.id))})]})]}),c.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 z-40",children:c.jsxs(ft,{className:"px-6 py-3 flex items-center gap-8 rounded-2xl border-white/10 bg-surface-dark/40 backdrop-blur-2xl shadow-2xl",children:[c.jsxs("div",{className:"flex items-center gap-4 text-slate-500 border-r border-white/10 pr-6",children:[c.jsx("button",{className:"hover:text-white transition-colors",children:c.jsx("span",{className:"material-symbols-outlined",children:"undo"})}),c.jsx("button",{className:"hover:text-white transition-colors opacity-30 cursor-not-allowed",children:c.jsx("span",{className:"material-symbols-outlined",children:"redo"})})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{className:"text-slate-500 hover:text-white transition-colors",children:c.jsx("span",{className:"material-symbols-outlined",children:"remove"})}),c.jsx("span",{className:"text-[10px] font-black text-white w-10 text-center",children:"100%"}),c.jsx("button",{className:"text-slate-500 hover:text-white transition-colors",children:c.jsx("span",{className:"material-symbols-outlined",children:"add"})})]})]})})]})]})},cre=({map:t})=>{const[e,n]=V.useState(null);t!=null&&t.nombre;const r=[{id:1,name:"Torre Carmes",type:"location",x:"45%",y:"42%",color:"bg-primary"},{id:2,name:"Costa de Zafiro",type:"region",x:"55%",y:"35%",color:"bg-cyan-500"},{id:3,name:"Pramos de Hierro",type:"danger",x:"62%",y:"58%",color:"bg-amber-500"}];return c.jsxs("div",{className:"flex-1 flex overflow-hidden bg-background-dark font-sans text-slate-300 relative",children:[c.jsxs("main",{className:"flex-1 overflow-hidden relative group",children:[c.jsxs("div",{className:"absolute inset-4 rounded-[2.5rem] overflow-hidden border border-white/5 shadow-2xl bg-surface-dark",children:[c.jsx("img",{src:"https://images.unsplash.com/photo-1521295121783-8a321d551ad2?auto=format&fit=crop&w=2000&q=80",alt:"Background Map",className:"w-full h-full object-cover opacity-60 mix-blend-luminosity grayscale-[0.2]"}),c.jsx("div",{className:"absolute inset-0",children:r.map(i=>c.jsx("div",{onClick:()=>n(i),className:`absolute size-10 -translate-x-1/2 -translate-y-1/2 cursor-pointer transition-all hover:scale-125 z-10 ${(e==null?void 0:e.id)===i.id?"scale-125":""}`,style:{left:i.x,top:i.y},children:c.jsxs("div",{className:`size-full rounded-2xl ${i.color} border-4 border-background-dark shadow-[0_0_20px_rgba(0,0,0,0.5)] flex items-center justify-center text-white relative group/marker`,children:[c.jsx("span",{className:"material-symbols-outlined text-lg",children:i.type==="location"?"fort":i.type==="region"?"terrain":"skull"}),c.jsx("div",{className:"absolute top-12 left-1/2 -translate-x-1/2 px-3 py-1.5 rounded-lg bg-surface-dark border border-white/10 text-[9px] font-black uppercase tracking-widest text-white whitespace-nowrap opacity-0 group-hover/marker:opacity-100 transition-opacity",children:i.name}),c.jsx("div",{className:`absolute -inset-2 rounded-[1.5rem] opacity-20 animate-ping -z-10 ${i.color}`})]})},i.id))})]}),c.jsx("aside",{className:"absolute left-12 top-1/2 -translate-y-1/2 z-20 flex flex-col gap-4",children:c.jsxs(ft,{className:"p-2 flex flex-col gap-2 rounded-2xl border-white/10 bg-surface-dark/40 backdrop-blur-2xl shadow-2xl",children:[c.jsx(Xd,{icon:"near_me",active:!0}),c.jsx(Xd,{icon:"location_on"}),c.jsx(Xd,{icon:"brush"}),c.jsx(Xd,{icon:"layers"}),c.jsx("div",{className:"w-8 h-px bg-white/10 mx-auto my-1"}),c.jsx(Xd,{icon:"tune"})]})}),c.jsx("div",{className:"absolute bottom-12 left-12 z-20 px-4 py-2 rounded-xl bg-black/40 border border-white/10 backdrop-blur-md text-[10px] font-black tracking-widest text-slate-400",children:"125%"})]}),c.jsx("aside",{className:`flex-none bg-surface-dark border-l border-white/5 transition-all duration-700 relative z-30 ${e?"w-96 p-8 opacity-100":"w-0 p-0 opacity-0 overflow-hidden"}`,children:e&&c.jsxs("div",{className:"flex flex-col h-full gap-8 animate-in slide-in-from-right-8 duration-500",children:[c.jsxs("header",{className:"space-y-6",children:[c.jsxs("div",{className:"relative aspect-[4/3] rounded-3xl overflow-hidden border border-white/10 shadow-xl group",children:[c.jsx("img",{src:"https://images.unsplash.com/photo-1533154683836-84ea7a0bc310?auto=format&fit=crop&w=500&q=80",alt:"Detail",className:"w-full h-full object-cover grayscale-[0.4] group-hover:grayscale-0 transition-all duration-700"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background-dark via-transparent to-transparent"}),c.jsx("div",{className:"absolute top-4 right-4 flex gap-2",children:c.jsx("button",{onClick:()=>n(null),className:"size-8 rounded-lg bg-black/40 border border-white/10 backdrop-blur-md text-white flex items-center justify-center hover:bg-black/60 transition-colors",children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:"close"})})}),c.jsxs("div",{className:"absolute bottom-4 left-4 flex gap-2",children:[c.jsx("span",{className:"px-3 py-1 rounded bg-primary/20 text-primary border border-primary/20 text-[8px] font-black uppercase tracking-widest backdrop-blur-md",children:"Lugar"}),c.jsx("span",{className:"px-3 py-1 rounded bg-emerald-500/20 text-emerald-400 border border-emerald-500/20 text-[8px] font-black uppercase tracking-widest backdrop-blur-md",children:"Capital"})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("h2",{className:"text-3xl font-manrope font-black text-white tracking-tight leading-none",children:e.name}),c.jsx("button",{className:"text-slate-500 hover:text-white transition-colors p-2 rounded-xl hover:bg-white/5",children:c.jsx("span",{className:"material-symbols-outlined",children:"edit"})})]}),c.jsx("p",{className:"text-sm text-slate-400 leading-relaxed font-manrope",children:"La antigua sede de los Magos de Fuego, erigida sobre la caldera inactiva del Monte Ignis. Sus muros estn imbuidos de magia protectora."})]})]}),c.jsxs("div",{className:"space-y-8 flex-1 overflow-y-auto no-scrollbar",children:[c.jsxs("section",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center px-1",children:[c.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Habitantes Clave"}),c.jsx("button",{className:"text-[10px] font-bold text-primary hover:underline transition-all",children:"Ver todos"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx(xj,{name:"Lyra Ignis",role:"Gran Maga"}),c.jsx(xj,{name:"Kaelen",role:"Capitn de la Guardia"})]})]}),c.jsxs("section",{className:"space-y-4",children:[c.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500 px-1",children:"Eventos Relacionados"}),c.jsx(ft,{className:"p-4 border-white/5 hover:border-white/10 transition-all cursor-pointer group",children:c.jsxs("div",{className:"flex gap-4 items-center",children:[c.jsx("div",{className:"size-10 rounded-xl bg-amber-500/10 text-amber-500 border border-amber-500/20 flex items-center justify-center",children:c.jsx("span",{className:"material-symbols-outlined text-xl",children:"history_edu"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-xs font-bold text-white group-hover:text-primary transition-colors",children:"El Asedio de Ceniza"}),c.jsx("p",{className:"text-[10px] text-slate-500 font-medium",children:"Hace 300 aos"})]})]})})]})]}),c.jsx("footer",{className:"pt-6 border-t border-white/5",children:c.jsx(Ct,{variant:"primary",icon:"auto_stories",className:"w-full py-4 rounded-2xl shadow-xl shadow-primary/20",children:"Abrir en la Biblia"})})]})})]})},Xd=({icon:t,active:e})=>c.jsx("button",{className:`size-12 rounded-xl flex items-center justify-center transition-all ${e?"bg-primary text-white shadow-lg shadow-primary/30":"text-slate-500 hover:text-white hover:bg-white/5"}`,children:c.jsx("span",{className:"material-symbols-outlined text-xl",children:t})}),xj=({name:t,role:e})=>c.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-2xl bg-white/[0.02] border border-white/5 hover:border-white/10 transition-all cursor-pointer group",children:[c.jsx(Jf,{name:t,size:"sm",className:"border-white/10 group-hover:border-primary/50 transition-all"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h4",{className:"text-xs font-bold text-white truncate",children:t}),c.jsx("p",{className:"text-[10px] text-slate-500 font-medium truncate",children:e})]}),c.jsx("span",{className:"material-symbols-outlined text-slate-700 text-sm group-hover:text-white transition-colors",children:"chevron_right"})]}),ure=({maps:t,onSelect:e,onCreateNew:n,onClose:r})=>c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-background-dark/80 backdrop-blur-xl animate-in fade-in duration-300",children:c.jsx("div",{className:"w-full max-w-3xl animate-in zoom-in-95 duration-500",children:c.jsxs(ft,{className:"overflow-hidden border-white/10 shadow-2xl",children:[c.jsxs("header",{className:"p-6 border-b border-white/5 flex justify-between items-center bg-white/[0.02]",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"material-symbols-outlined text-primary",children:"map"}),c.jsx("h2",{className:"text-xl font-manrope font-black text-white",children:"Cartografa del Proyecto"})]}),c.jsx("button",{onClick:r,className:"text-slate-500 hover:text-white transition-colors",children:c.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),c.jsxs("div",{className:"p-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-[60vh] overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{onClick:n,className:"group p-6 rounded-2xl border-2 border-dashed border-white/5 hover:border-primary/50 hover:bg-primary/5 transition-all cursor-pointer flex flex-col items-center justify-center text-center gap-3",children:[c.jsx("div",{className:"size-12 rounded-full bg-primary/10 text-primary flex items-center justify-center group-hover:scale-110 transition-transform",children:c.jsx("span",{className:"material-symbols-outlined",children:"add"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-bold text-white",children:"Nuevo Mapa"}),c.jsx("p",{className:"text-[10px] text-slate-500 uppercase font-black tracking-tighter",children:"Crear desde cero"})]})]}),t.map(i=>c.jsxs("div",{onClick:()=>e(i),className:"group p-4 rounded-2xl bg-white/5 border border-white/5 hover:border-primary/50 hover:bg-white/10 transition-all cursor-pointer space-y-3",children:[c.jsx("div",{className:"aspect-video rounded-xl bg-surface-light border border-white/5 flex items-center justify-center overflow-hidden",children:c.jsx("span",{className:"material-symbols-outlined text-4xl opacity-20 group-hover:opacity-40 transition-opacity",children:"image"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-bold text-white truncate",children:i.nombre}),c.jsx("p",{className:"text-[10px] text-slate-500 uppercase font-black tracking-tighter",children:"ltima edicin: Reciente"})]})]},i.id))]}),c.jsx("footer",{className:"p-6 bg-white/[0.02] border-t border-white/5 flex justify-end",children:c.jsx("p",{className:"text-[10px] text-slate-600 font-bold uppercase tracking-widest",children:"Selecciona un mapa para cargar el visor"})})]})})}),dre=()=>{const[t,e]=V.useState("viewer"),[n,r]=V.useState([]),[i,s]=V.useState(null),[a,o]=V.useState(!1);V.useEffect(()=>{l()},[]);const l=async()=>{try{const p=(await ke.get("/world-bible/entities")).filter(h=>h.tipoEspecial==="map");r(p),p.length>0&&!i&&s(p[0])}catch(d){console.error("Error loading maps",d)}},u=d=>{d==="blank"?e("editor"):(l(),e("viewer"))};return c.jsxs("div",{className:"flex-1 flex flex-col h-full bg-background-dark overflow-hidden",children:[t==="viewer"&&c.jsxs("div",{className:"flex-1 flex flex-col h-full relative",children:[c.jsx("button",{onClick:()=>o(!0),className:"absolute right-12 bottom-12 z-50 size-16 rounded-3xl bg-primary text-white flex items-center justify-center shadow-2xl shadow-primary/40 hover:scale-110 active:scale-95 transition-all group",children:c.jsx("span",{className:"material-symbols-outlined text-3xl group-hover:rotate-90 transition-transform duration-300",children:"add"})}),c.jsx(cre,{map:i}),a&&c.jsx(ure,{maps:n,onSelect:d=>{s(d),o(!1)},onCreateNew:()=>{o(!1),e("wizard")},onClose:()=>o(!1)})]}),t==="wizard"&&c.jsx(are,{onCancel:()=>e("viewer"),onCreate:u}),t==="editor"&&c.jsx(lre,{onBack:()=>e("viewer"),onSave:()=>e("viewer")})]})},fre=()=>{const[t,e]=V.useState("Loading..."),[n,r]=V.useState({words:0,rules:0,glyphs:0}),[i,s]=V.useState("Standard Tongue");V.useEffect(()=>{a()},[]);const a=async()=>{try{const o=await ke.get("/bd/proyecto-activo");e(o.nombreProyecto);const l=await ke.get("/conlang/stats");r(l);const u=await ke.get("/conlang/lenguas");u&&u.length>0&&s(u[0].nombre)}catch(o){console.error("Error loading conlang data:",o),e("Default Project")}};return c.jsxs("div",{className:"flex-1 flex flex-col h-full bg-[#0a0a0f] text-slate-300 font-sans overflow-y-auto no-scrollbar p-12 lg:p-16 gap-16",children:[c.jsxs("header",{className:"space-y-6",children:[c.jsxs("nav",{className:"flex items-center gap-3 text-[10px] font-black uppercase tracking-widest text-slate-500",children:[c.jsx("span",{children:t}),c.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_right"}),c.jsxs("span",{className:"text-white",children:["Conlang: ",i]})]}),c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"space-y-4 max-w-2xl",children:[c.jsx("h1",{className:"text-6xl font-manrope font-black text-white tracking-tight",children:i}),c.jsxs("p",{className:"text-lg text-slate-400 leading-relaxed",children:["A conlang belonging to ",t,". Manage its lexicon, grammar rules, and writing systems here."]}),c.jsxs("div",{className:"flex gap-4 pt-2",children:[c.jsx("span",{className:"px-3 py-1 rounded bg-emerald-500/10 text-emerald-400 border border-emerald-500/20 text-[9px] font-black uppercase tracking-widest",children:"Complete: 45%"}),c.jsx("span",{className:"px-3 py-1 rounded bg-primary/10 text-primary border border-primary/20 text-[9px] font-black uppercase tracking-widest",children:"Type: Agglutinative"})]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-3 text-slate-500 border-r border-white/5 pr-6 mr-2",children:[c.jsx("span",{className:"material-symbols-outlined text-sm animate-pulse text-emerald-500",children:"save"}),c.jsx("span",{className:"text-[10px] font-bold",children:"Auto-Saved"}),c.jsx("span",{className:"material-symbols-outlined hover:text-white transition-colors cursor-pointer",children:"dark_mode"})]}),c.jsx(Ct,{variant:"primary",icon:"add",size:"md",children:"Create Element"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-12",children:[c.jsxs("section",{className:"xl:col-span-2 space-y-8",children:[c.jsxs("div",{className:"flex justify-between items-center px-2",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"material-symbols-outlined text-primary text-2xl",children:"menu_book"}),c.jsx("h3",{className:"text-xl font-bold text-white tracking-tight",children:"Lexicon"})]}),c.jsxs("span",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-widest hover:text-primary transition-all cursor-pointer",children:["View All (",n.words,")"]})]}),c.jsxs(ft,{className:"p-0 border-white/5 bg-surface-dark/40 overflow-hidden shadow-2xl",children:[c.jsxs("div",{className:"p-4 border-b border-white/5 flex items-center gap-4",children:[c.jsxs("div",{className:"flex-1 relative",children:[c.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-slate-600 text-lg",children:"search"}),c.jsx("input",{type:"text",placeholder:"Search word or meaning...",className:"w-full bg-white/5 border border-white/5 rounded-2xl py-3 pl-12 pr-4 text-xs focus:ring-1 focus:ring-primary/30 outline-none transition-all"})]}),c.jsx("button",{className:"size-10 rounded-xl bg-white/5 border border-white/5 flex items-center justify-center text-slate-500 hover:text-white transition-all",children:c.jsx("span",{className:"material-symbols-outlined text-xl",children:"tune"})})]}),c.jsxs("div",{className:"p-6 space-y-4",children:[c.jsx(Uw,{word:"Ael'or",type:"noun",gender:"neutral",def:"Starlight; specifically the light from the twin moons."}),c.jsx(Uw,{word:"Vexi",type:"verb",gender:"transitive",def:"To weave magic; to create something from nothing."}),c.jsx(Uw,{word:"Dra'kan",type:"adj",gender:"",def:"Ancient; belonging to the era of dragons."})]}),c.jsx("div",{className:"p-6 bg-black/20 border-t border-white/5",children:c.jsxs("button",{className:"w-full py-4 rounded-3xl border-2 border-dashed border-white/5 text-slate-600 hover:text-white hover:border-primary/50 hover:bg-primary/5 transition-all text-[10px] font-black uppercase tracking-[0.2em] flex items-center justify-center gap-3",children:[c.jsx("span",{className:"material-symbols-outlined",children:"add"}),"Add New Word"]})})]})]}),c.jsxs("section",{className:"space-y-8",children:[c.jsxs("div",{className:"flex justify-between items-center px-2",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"material-symbols-outlined text-primary text-2xl",children:"architecture"}),c.jsx("h3",{className:"text-xl font-bold text-white tracking-tight",children:"Grammar Rules"})]}),c.jsx("span",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-widest hover:text-primary transition-all cursor-pointer",children:"Manage"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx(bj,{title:"Sentence Structure",status:"active",statusColor:"emerald",desc:"Standard order is SOV (Subject-Object-Verb), but poetry uses VSO for emphasis on action.",tags:["Syntax","Basic"]}),c.jsx(bj,{title:"Noun Declensions",status:"pending",statusColor:"amber",desc:"Seven cases marked by suffixes. Pluralization shifts the stress to the final syllable.",tags:["Morphology"]}),c.jsxs("button",{className:"w-full h-32 rounded-[2.5rem] border-2 border-dashed border-white/5 flex flex-col items-center justify-center gap-2 text-slate-600 hover:text-white hover:border-primary/30 hover:bg-primary/5 transition-all",children:[c.jsx("span",{className:"material-symbols-outlined",children:"add_circle"}),c.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Define New Rule"})]})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-12",children:[c.jsxs("section",{className:"space-y-8",children:[c.jsxs("div",{className:"flex justify-between items-center px-2",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"material-symbols-outlined text-primary text-2xl",children:"draw"}),c.jsx("h3",{className:"text-xl font-bold text-white tracking-tight",children:"Writing System"})]}),c.jsxs("div",{className:"flex gap-2 text-slate-600",children:[c.jsx("button",{className:"p-1 rounded hover:bg-white/5 hover:text-white",children:c.jsx("span",{className:"material-symbols-outlined text-lg",children:"grid_view"})}),c.jsx("button",{className:"p-1 rounded hover:bg-white/5 hover:text-white",children:c.jsx("span",{className:"material-symbols-outlined text-lg",children:"title"})})]})]}),c.jsxs(ft,{className:"p-8 border-white/5 bg-surface-dark/40 rounded-[3rem] space-y-8 shadow-2xl",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-2xl font-black text-white tracking-tight mb-1",children:"Moon Script"}),c.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Abugida  Left-to-Right"})]}),c.jsx(Ct,{variant:"secondary",size:"sm",className:"bg-primary/10 border-primary/20 text-primary",children:"Open Editor"})]}),c.jsxs("div",{className:"grid grid-cols-6 gap-3",children:[["","","","",""].map(o=>c.jsx("div",{className:"aspect-square rounded-2xl bg-white/5 border border-white/5 flex items-center justify-center text-3xl font-serif text-white hover:bg-white/10 transition-all cursor-pointer",children:o},o)),c.jsx("div",{className:"aspect-square rounded-2xl border-2 border-dashed border-white/5 flex items-center justify-center text-slate-600 hover:border-primary/50 hover:text-white transition-all cursor-pointer",children:c.jsx("span",{className:"material-symbols-outlined",children:"add"})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between text-[8px] font-black uppercase tracking-widest text-slate-600",children:[c.jsx("span",{children:"Glyph Set"}),c.jsx("span",{children:"24/32 Completed"})]}),c.jsx("div",{className:"h-1.5 w-full bg-white/5 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-primary w-[75%] rounded-full shadow-[0_0_10px_rgba(99,102,242,0.5)]"})})]})]})]}),c.jsxs("section",{className:"space-y-8",children:[c.jsxs("div",{className:"flex items-center gap-3 px-2",children:[c.jsx("span",{className:"material-symbols-outlined text-primary text-2xl",children:"graphic_eq"}),c.jsx("h3",{className:"text-xl font-bold text-white tracking-tight",children:"Translator & Phonology"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs(ft,{className:"p-8 border-primary/20 bg-primary/5 rounded-[3rem] space-y-6 shadow-2xl shadow-primary/10",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-primary",children:"Live Logographic Stream"}),c.jsx("span",{className:"material-symbols-outlined text-primary animate-pulse",children:"sync_alt"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("input",{type:"text",placeholder:"Source text here...",className:"w-full bg-black/40 border border-white/10 rounded-2xl p-4 text-xs font-bold text-white focus:border-primary/50 outline-none transition-all"}),c.jsxs("div",{className:"h-24 rounded-2xl bg-black/60 border border-white/5 flex items-center justify-center relative overflow-hidden group",children:[c.jsx("span",{className:"text-5xl font-serif text-white opacity-40 group-hover:opacity-100 transition-opacity",children:"   "}),c.jsx("div",{className:"absolute top-2 right-4 text-[7px] font-black uppercase tracking-widest text-slate-700",children:"Rendered Output"})]})]})]}),c.jsxs(ft,{className:"p-8 border-white/5 bg-surface-dark/40 rounded-[3rem] space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Vowel Inventory"}),c.jsx("button",{className:"text-primary text-lg",children:c.jsx("span",{className:"material-symbols-outlined",children:"add"})})]}),c.jsx("div",{className:"flex flex-wrap gap-2",children:["/a/","/e/","/i/","/o/","/u/","/y/"].map(o=>c.jsx("div",{className:"px-3 py-1.5 rounded-xl bg-white/5 border border-white/5 text-[11px] font-mono font-bold text-slate-300 hover:text-white transition-colors cursor-pointer",children:o},o))})]}),c.jsxs(ft,{className:"p-8 border-white/5 bg-surface-dark/40 rounded-[3rem] space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Vector Symbols"}),c.jsx("button",{className:"text-[8px] font-bold text-primary hover:underline transition-all",children:"Upload SVG"})]}),c.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[[{id:1,icon:"filter_vintage"},{id:2,icon:"auto_awesome"},{id:3,icon:"infinite"}].map(o=>c.jsx("div",{className:"aspect-square rounded-2xl bg-white/5 border border-white/5 flex items-center justify-center text-slate-400 hover:text-white transition-all cursor-pointer",children:c.jsx("span",{className:"material-symbols-outlined text-2xl",children:o.icon})},o.id)),c.jsxs("div",{className:"aspect-square rounded-2xl border-2 border-dashed border-white/5 flex flex-col items-center justify-center text-slate-700 hover:border-primary/50 hover:text-white transition-all cursor-pointer",children:[c.jsx("span",{className:"material-symbols-outlined text-lg",children:"cloud_upload"}),c.jsx("span",{className:"text-[7px] font-bold uppercase mt-1",children:"Add"})]})]})]})]})]})]})]})},Uw=({word:t,type:e,gender:n,def:r})=>c.jsxs("div",{className:"p-4 rounded-2xl border border-transparent hover:bg-white/5 hover:border-white/5 transition-all group cursor-pointer relative",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[c.jsx("h4",{className:"text-xl font-manrope font-black text-white group-hover:text-primary transition-colors",children:t}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("span",{className:"text-[9px] font-bold text-slate-600 italic",children:e}),n&&c.jsxs("span",{className:"text-[9px] font-bold text-slate-700 uppercase",children:["(",n,")"]})]})]}),c.jsx("p",{className:"text-sm text-slate-400 leading-relaxed font-manrope",children:r}),c.jsx("button",{className:"absolute right-4 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity p-2 text-slate-600 hover:text-white",children:c.jsx("span",{className:"material-symbols-outlined",children:"edit_note"})})]}),bj=({title:t,status:e,statusColor:n,desc:r,tags:i})=>c.jsxs(ft,{className:"p-8 border-white/5 hover:border-white/10 transition-all cursor-pointer group space-y-4",children:[c.jsxs("header",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`size-2 rounded-full bg-${n}-500 shadow-[0_0_10px_rgba(var(--${n}-rgb),0.5)]`}),c.jsx("h4",{className:"font-bold text-white group-hover:text-primary transition-colors",children:t})]}),c.jsx("button",{className:"text-slate-700 hover:text-white transition-colors",children:c.jsx("span",{className:"material-symbols-outlined",children:"more_vert"})})]}),c.jsx("p",{className:"text-[11px] text-slate-500 leading-relaxed font-manrope",children:r}),c.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(s=>c.jsx("span",{className:"px-2 py-0.5 rounded bg-white/5 border border-white/5 text-[8px] font-black uppercase tracking-widest text-slate-600",children:s},s))})]}),hre=()=>c.jsxs("div",{className:"flex-1 flex flex-col h-full bg-[#050B0D] text-[#00E5FF] font-mono overflow-hidden",children:[c.jsxs("header",{className:"h-20 border-b border-[#00E5FF]/20 flex items-center justify-between px-10 bg-black/40 backdrop-blur-xl",children:[c.jsxs("div",{className:"flex items-center gap-10",children:[c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-[10px] opacity-40 uppercase tracking-[0.4em] font-bold",children:"Datastream_Nav"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"material-symbols-outlined text-2xl",children:"language"}),c.jsx("span",{className:"text-2xl font-black italic tracking-tighter",children:"Chronos Atlas"})]})]}),c.jsxs("div",{className:"flex items-center gap-4 border-l border-[#00E5FF]/20 pl-10",children:[c.jsx("span",{className:"text-3xl font-black tracking-[0.2em] italic opacity-80",children:"DIGITAL RUNE COMPILER"}),c.jsx("div",{className:"px-3 py-1 rounded-sm bg-[#00E5FF]/10 border border-[#00E5FF]/30 text-[10px] font-black uppercase tracking-widest animate-pulse",children:"Data Ready"})]})]}),c.jsxs("div",{className:"flex items-center gap-8",children:[c.jsxs("div",{className:"flex items-center gap-2 opacity-60 hover:opacity-100 transition-opacity cursor-pointer",children:[c.jsx("span",{className:"material-symbols-outlined text-lg",children:"help"}),c.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Protocol"})]}),c.jsxs("button",{className:"flex items-center gap-3 px-6 py-2.5 bg-[#00E5FF] text-black font-black uppercase text-xs tracking-widest rounded-sm hover:shadow-[0_0_20px_rgba(0,229,255,0.4)] transition-all",children:[c.jsx("span",{className:"material-symbols-outlined",children:"save"}),"Commit Data"]}),c.jsx("div",{className:"size-10 rounded-full bg-gradient-to-tr from-[#00E5FF] to-blue-600 border border-white/20 shadow-lg"})]})]}),c.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[c.jsxs("main",{className:"flex-1 flex flex-col p-12 gap-12 overflow-y-auto no-scrollbar relative",children:[c.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-white/5 overflow-hidden",children:c.jsx("div",{className:"h-full bg-[#00E5FF] w-[64%] shadow-[0_0_10px_#00E5FF]"})}),c.jsxs("section",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"size-2 bg-[#00E5FF] rounded-full shadow-[0_0_10px_#00E5FF]"}),c.jsx("h3",{className:"text-sm font-black uppercase tracking-[0.4em]",children:"Glyph Set (Scan)"})]}),c.jsxs("div",{className:"flex gap-4 opacity-40",children:[c.jsx("span",{className:"material-symbols-outlined text-xl",children:"grid_view"}),c.jsx("span",{className:"material-symbols-outlined text-xl",children:"view_list"})]})]}),c.jsxs("div",{className:"p-10 rounded-sm border border-[#00E5FF]/10 bg-[#00E5FF]/[0.02] grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-6",children:[c.jsx(_s,{symbol:"",keyLabel:"A"}),c.jsx(_s,{symbol:"",keyLabel:"B"}),c.jsx(_s,{symbol:"",keyLabel:"C"}),c.jsx(_s,{symbol:"",keyLabel:"D",active:!0}),c.jsx(_s,{}),c.jsx(_s,{}),c.jsx(_s,{}),c.jsx(_s,{}),c.jsx(_s,{}),c.jsx(_s,{}),c.jsx("div",{className:"aspect-square rounded shadow-inner border border-dashed border-[#00E5FF]/20 flex items-center justify-center hover:bg-[#00E5FF]/5 transition-colors cursor-pointer group",children:c.jsx("span",{className:"material-symbols-outlined opacity-20 group-hover:opacity-100 transition-opacity",children:"add"})})]}),c.jsxs("div",{className:"flex justify-between items-center text-[10px] font-black uppercase tracking-[0.2em] opacity-40",children:[c.jsx("span",{children:"26 Glyphs Mapped"}),c.jsxs("div",{className:"flex gap-10",children:[c.jsxs("button",{className:"hover:text-[#00E5FF] flex items-center gap-2",children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"tune"})," Manage"]}),c.jsxs("button",{className:"hover:text-[#00E5FF] flex items-center gap-2",children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"settings_input_component"})," Ranges"]})]})]})]}),c.jsxs("section",{className:"flex-1 flex flex-col gap-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"size-2 bg-[#00E5FF] rounded-full shadow-[0_0_10px_#00E5FF] opacity-40"}),c.jsx("h3",{className:"text-sm font-black uppercase tracking-[0.4em] opacity-40",children:"Live Preview Stream"})]}),c.jsxs("div",{className:"flex-1 rounded-sm border border-[#00E5FF]/10 bg-black/40 flex flex-col p-12 items-center justify-center relative group min-h-[300px]",children:[c.jsx("div",{className:"absolute top-4 left-4 text-[8px] opacity-20 uppercase tracking-widest font-black",children:"Buffer Status: Active"}),c.jsx("textarea",{className:"w-full h-full bg-transparent border-none outline-none text-center text-7xl font-bold tracking-widest text-[#00E5FF]/10 group-hover:text-[#00E5FF]/40 transition-all placeholder:text-[#00E5FF]/5 resize-none italic",placeholder:"Input your data stream here..."}),c.jsxs("div",{className:"absolute bottom-6 right-8 flex gap-6 text-[8px] font-black uppercase tracking-widest opacity-20",children:[c.jsx("span",{children:"48px"}),c.jsx("span",{children:"Regular"}),c.jsx("span",{children:"UTF-8"})]}),c.jsx("div",{className:"absolute inset-x-12 top-1/2 h-px bg-[#00E5FF]/10 -translate-y-1/2 pointer-events-none"})]})]})]}),c.jsxs("aside",{className:"w-[450px] border-l border-[#00E5FF]/10 p-10 flex flex-col gap-10 bg-black/40 backdrop-blur-xl relative z-20",children:[c.jsx("h3",{className:"text-xs font-black uppercase tracking-[0.4em] opacity-60 mb-2",children:"Configuration Matrix"}),c.jsxs(ft,{className:"p-8 border-[#00E5FF]/20 bg-[#00E5FF]/[0.02] space-y-8 rounded-sm",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("label",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-[#00E5FF]/60 block ml-1",children:"Font Name"}),c.jsx("input",{type:"text",defaultValue:"NEURALINK CIPHER",className:"w-full bg-black/60 border border-[#00E5FF]/30 px-6 py-4 text-xs font-black text-[#00E5FF] focus:border-[#00E5FF] outline-none transition-all tracking-widest uppercase italic"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("label",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-[#00E5FF]/60 block ml-1",children:"Author / Metadata"}),c.jsx("input",{type:"text",placeholder:"YOUR SYNTHETIC ID",className:"w-full bg-black/60 border border-[#00E5FF]/30 px-6 py-4 text-xs font-black text-[#00E5FF] focus:border-[#00E5FF] outline-none transition-all tracking-widest uppercase italic"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("label",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-[#00E5FF]/60 block ml-1",children:"Format"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx("button",{className:"py-4 border border-[#00E5FF] bg-[#00E5FF]/10 text-[#00E5FF] text-xs font-black tracking-widest shadow-[0_0_15px_rgba(0,229,255,0.2)]",children:".TTF"}),c.jsx("button",{className:"py-4 border border-[#00E5FF]/20 text-[#00E5FF]/40 text-xs font-black tracking-widest hover:border-[#00E5FF]/40 transition-all",children:".OTF"})]})]}),c.jsxs("div",{className:"pt-4 space-y-6",children:[c.jsx(wj,{label:"Ligatures",active:!0}),c.jsx(wj,{label:"Kerning",active:!0})]}),c.jsxs("button",{className:"w-full py-6 mt-6 bg-gradient-to-r from-blue-600 to-fuchsia-500 text-white font-black uppercase text-xs tracking-[0.3em] flex items-center justify-center gap-4 hover:shadow-[0_0_30px_rgba(255,0,255,0.3)] transition-all animate-pulse",children:[c.jsx("span",{className:"material-symbols-outlined text-lg",children:"download"}),"Compile & Download"]})]}),c.jsxs("div",{className:"flex-1 flex flex-col gap-6 opacity-30 pointer-events-none",children:[c.jsxs("div",{className:"flex justify-between text-[10px] uppercase font-black",children:[c.jsx("span",{children:"Compiler Logs"}),c.jsx("span",{children:"V2.0.4"})]}),c.jsxs("div",{className:"flex-1 border border-[#00E5FF]/10 bg-black/20 p-6 flex flex-col font-mono text-[9px] gap-2 overflow-hidden",children:[c.jsx("p",{children:"[SCN] Initializing Glyph Buffer..."}),c.jsx("p",{children:"[MAP] Vector data detected for U+0394"}),c.jsx("p",{children:"[SYS] Memory allocation optimized"}),c.jsx("p",{className:"animate-pulse",children:"_"})]})]})]})]})]}),_s=({symbol:t,keyLabel:e,active:n})=>c.jsxs("div",{className:`aspect-square rounded border transition-all cursor-pointer flex items-center justify-center relative group ${n?"bg-[#00E5FF]/20 border-[#00E5FF] shadow-[0_0_20px_rgba(0,229,255,0.3)]":"bg-black/40 border-[#00E5FF]/10 hover:border-[#00E5FF]/40"}`,children:[c.jsx("span",{className:`text-3xl font-serif ${n?"text-white":"opacity-20 group-hover:opacity-60"}`,children:t||"..."}),e&&c.jsx("span",{className:`absolute top-1 right-1 text-[8px] font-black uppercase ${n?"text-[#00E5FF]/80":"opacity-20"}`,children:e})]}),wj=({label:t,active:e})=>c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest opacity-60",children:t}),c.jsx("button",{className:`w-12 h-6 rounded-full p-1 transition-colors relative ${e?"bg-[#00E5FF]/40":"bg-white/5"}`,children:c.jsx("div",{className:`size-4 rounded-full bg-[#00E5FF] shadow-[0_0_10px_#00E5FF] transition-transform ${e?"translate-x-6":"translate-x-0"}`})})]}),pre=({onBack:t,onSave:e})=>{const[n,r]=V.useState(4),[i,s]=V.useState("curve"),[a,o]=V.useState(1),l=[{id:"select",icon:"near_me"},{id:"curve",icon:"gesture"},{id:"eraser",icon:"ink_eraser"},{id:"line",icon:"horizontal_rule"},{id:"shape",icon:"pentagon"},{id:"text",icon:"title"}],u=[{id:1,name:"Trazo Principal",type:"Vector",locked:!0,visible:!0},{id:2,name:"Detalles Secundarios",type:"Vector",locked:!0,visible:!0},{id:3,name:"Boceto Ref.",type:"Imagen (Raster)",locked:!0,visible:!1}];return c.jsxs("div",{className:"flex-1 flex flex-col bg-[#0a0a0f] text-slate-300 font-sans h-full overflow-hidden relative",children:[c.jsxs("header",{className:"h-20 flex-none border-b border-white/5 flex items-center justify-between px-8 bg-surface-dark/80 backdrop-blur-md z-30",children:[c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsx("button",{onClick:t,className:"p-2 rounded-xl bg-white/5 hover:bg-white/10 transition-colors",children:c.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),c.jsx("div",{className:"w-px h-8 bg-white/10"}),c.jsxs("div",{children:[c.jsxs("nav",{className:"flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-slate-500 mb-0.5",children:[c.jsx("span",{children:"Idiomas"}),c.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_right"}),c.jsx("span",{className:"text-white",children:"Editor Grfico"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("div",{className:"flex items-center gap-4 text-slate-500",children:[c.jsx("button",{className:"hover:text-white transition-colors",children:c.jsx("span",{className:"material-symbols-outlined text-xl",children:"undo"})}),c.jsx("button",{className:"hover:text-white transition-colors",children:c.jsx("span",{className:"material-symbols-outlined text-xl",children:"redo"})})]}),c.jsx("div",{className:"w-px h-4 bg-white/10 mx-2"}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{className:"p-1 rounded hover:bg-white/5 text-slate-500 hover:text-white",children:c.jsx("span",{className:"material-symbols-outlined text-lg",children:"grid_on"})}),c.jsx("button",{className:"p-1 rounded bg-white/10 text-primary",children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:"hub"})})]})]})]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("button",{className:"flex items-center gap-2 px-6 py-2.5 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 transition-all text-xs font-black uppercase tracking-widest text-slate-400",children:[c.jsx("span",{className:"material-symbols-outlined text-lg",children:"download"}),"Exportar SVG"]}),c.jsx(Ct,{variant:"primary",icon:"save",className:"px-8 py-3 shadow-xl shadow-primary/30",onClick:e,children:"Guardar Glifo"}),c.jsx("div",{className:"size-10 rounded-full bg-gradient-to-br from-primary to-orange-400 border-2 border-white/10 shadow-lg ml-2"})]})]}),c.jsxs("div",{className:"flex-1 flex relative overflow-hidden",children:[c.jsxs("aside",{className:"h-full w-20 flex-none border-r border-white/5 bg-surface-dark/40 backdrop-blur-xl flex flex-col items-center py-6 gap-2 z-40",children:[l.map(d=>c.jsx("button",{onClick:()=>s(d.id),className:`size-12 rounded-2xl flex items-center justify-center transition-all ${i===d.id?"bg-primary text-white shadow-lg shadow-primary/30":"text-slate-600 hover:text-white hover:bg-white/5"}`,children:c.jsx("span",{className:"material-symbols-outlined text-2xl",children:d.icon})},d.id)),c.jsx("div",{className:"flex-1"}),c.jsx("button",{className:"size-12 rounded-2xl flex items-center justify-center text-slate-600 hover:text-white transition-all",children:c.jsx("span",{className:"material-symbols-outlined text-2xl",children:"add_photo_alternate"})}),c.jsx("button",{className:"size-12 rounded-2xl flex items-center justify-center text-slate-600 hover:text-white transition-all",children:c.jsx("span",{className:"material-symbols-outlined text-2xl",children:"settings"})})]}),c.jsxs("main",{className:"flex-1 bg-[#050508] relative overflow-hidden flex items-center justify-center no-scrollbar",children:[c.jsx("div",{className:"absolute inset-x-20 top-1/2 h-px bg-red-500/20 pointer-events-none"}),c.jsxs("div",{className:"relative group animate-in zoom-in-95 duration-700",children:[c.jsx("div",{className:"absolute inset-x-0 top-10 h-px bg-white/10"}),c.jsx("div",{className:"absolute inset-x-0 bottom-10 h-px bg-white/10"}),c.jsxs("div",{className:"w-[600px] h-[600px] border border-white/5 rounded-3xl bg-black/40 flex items-center justify-center relative overflow-hidden",children:[c.jsxs("svg",{width:"400",height:"400",className:"drop-shadow-[0_0_20px_rgba(99,102,242,0.5)] scale-125",children:[c.jsx("circle",{cx:"200",cy:"230",r:"100",fill:"none",stroke:"#6366f1",strokeWidth:"6",strokeLinecap:"round"}),c.jsx("line",{x1:"200",y1:"230",x2:"200",y2:"380",stroke:"#6366f1",strokeWidth:"6",strokeLinecap:"round"}),c.jsx("circle",{cx:"200",cy:"230",r:"4",fill:"white"}),c.jsx("rect",{x:"196",y:"376",width:"8",height:"8",fill:"white"}),c.jsx("rect",{x:"96",y:"226",width:"8",height:"8",fill:"#6366f1"}),c.jsx("rect",{x:"296",y:"226",width:"8",height:"8",fill:"#6366f1"}),c.jsx("rect",{x:"136",y:"160",width:"6",height:"6",fill:"#6366f1",className:"opacity-40"}),c.jsx("rect",{x:"256",y:"160",width:"6",height:"6",fill:"#6366f1",className:"opacity-40"})]}),c.jsx("div",{className:"absolute top-[160px] left-[136px] size-1 border border-primary/40 border-dashed w-[20px] h-[100px] pointer-events-none"}),c.jsx("div",{className:"absolute top-[160px] right-[136px] size-1 border border-primary/40 border-dashed w-[20px] h-[100px] pointer-events-none"})]})]}),c.jsx("div",{className:"absolute bottom-10 left-1/2 -translate-x-1/2",children:c.jsxs(ft,{className:"px-6 py-2.5 flex items-center gap-6 rounded-2xl border-white/10 bg-surface-dark/40 backdrop-blur-2xl shadow-2xl",children:[c.jsx("button",{className:"text-slate-500 hover:text-white transition-colors",children:c.jsx("span",{className:"material-symbols-outlined text-lg",children:"remove"})}),c.jsx("span",{className:"text-[10px] font-black text-white w-12 text-center uppercase tracking-widest",children:"120%"}),c.jsx("button",{className:"text-slate-500 hover:text-white transition-colors",children:c.jsx("span",{className:"material-symbols-outlined text-lg",children:"add"})})]})})]}),c.jsxs("aside",{className:"w-96 flex-none flex flex-col p-10 gap-10 bg-surface-dark/20 backdrop-blur-xl border-l border-white/5 z-40 overflow-y-auto no-scrollbar",children:[c.jsxs("section",{className:"space-y-6",children:[c.jsxs("header",{className:"flex justify-between items-center group cursor-pointer",children:[c.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Propiedades"}),c.jsx("span",{className:"material-symbols-outlined text-slate-700 text-sm",children:"more_horiz"})]}),c.jsxs(ft,{className:"p-8 border-white/5 bg-surface-dark/40 rounded-[2rem] space-y-8",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-xs font-bold text-slate-400",children:"Grosor de Trazo"}),c.jsxs("span",{className:"px-2 py-0.5 rounded bg-white/5 text-[10px] font-black text-white",children:[n,"px"]})]}),c.jsx("input",{type:"range",min:"1",max:"20",value:n,onChange:d=>r(d.target.value),className:"w-full accent-primary h-1 bg-white/5 rounded-full appearance-none cursor-pointer"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-600 block ml-1",children:"Color / Relleno"}),c.jsxs("div",{className:"flex items-center gap-4 bg-black/40 rounded-2xl p-4 border border-white/5",children:[c.jsx("div",{className:"size-10 rounded-full bg-primary shadow-[0_0_15px_rgba(99,102,242,0.4)] border-2 border-white/20"}),c.jsx("input",{type:"text",defaultValue:"#2F2CED",className:"bg-transparent border-none outline-none text-xs font-mono text-slate-300 w-full"})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-600 block ml-1",children:"Terminacin (Cap)"}),c.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[c.jsx(Gw,{icon:"square"}),c.jsx(Gw,{icon:"circle",active:!0}),c.jsx(Gw,{icon:"rectangle"})]})]}),c.jsxs("button",{className:"w-full py-4 rounded-2xl bg-white/5 border border-white/5 text-[10px] font-black uppercase tracking-widest text-slate-300 flex items-center justify-center gap-3 hover:bg-white/10 transition-all",children:[c.jsx("span",{className:"material-symbols-outlined text-lg",children:"gesture"}),"Suavizar Trazo"]})]})]}),c.jsxs("section",{className:"flex-1 flex flex-col gap-6",children:[c.jsxs("header",{className:"flex justify-between items-center",children:[c.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Capas"}),c.jsx("button",{className:"p-1 rounded bg-white/5 text-slate-500 hover:text-white transition-all",children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"})})]}),c.jsx("div",{className:"space-y-3 overflow-y-auto no-scrollbar flex-1",children:u.map(d=>c.jsxs("div",{onClick:()=>o(d.id),className:`flex items-center gap-4 p-4 rounded-2xl transition-all cursor-pointer group ${a===d.id?"bg-primary/10 border border-primary/20":"bg-white/[0.02] border border-white/5 opacity-60 hover:opacity-100 hover:border-white/10"}`,children:[c.jsx("button",{className:"material-symbols-outlined text-sm text-slate-500 hover:text-white",children:d.visible?"visibility":"visibility_off"}),c.jsx("div",{className:"size-10 rounded-xl bg-black border border-white/10 flex items-center justify-center",children:c.jsx("span",{className:"material-symbols-outlined text-slate-600 group-hover:text-primary transition-colors text-xl",children:d.type.includes("Vector")?"timeline":"image"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h4",{className:"text-xs font-bold text-white truncate",children:d.name}),c.jsx("p",{className:"text-[9px] text-slate-600 font-bold uppercase tracking-widest",children:d.type})]}),c.jsx("button",{className:"material-symbols-outlined text-slate-700 text-sm",children:"lock"})]},d.id))}),c.jsxs("div",{className:"flex gap-4 p-3 rounded-2xl bg-black/20 border border-white/5",children:[c.jsx("button",{className:"flex-1 p-2 rounded-xl hover:bg-white/5 text-slate-700 hover:text-white transition-all",children:c.jsx("span",{className:"material-symbols-outlined text-xl",children:"delete"})}),c.jsx("button",{className:"flex-1 p-2 rounded-xl hover:bg-white/5 text-slate-700 hover:text-white transition-all",children:c.jsx("span",{className:"material-symbols-outlined text-xl",children:"content_copy"})}),c.jsx("button",{className:"flex-1 p-2 rounded-xl hover:bg-white/5 text-slate-700 hover:text-white transition-all",children:c.jsx("span",{className:"material-symbols-outlined text-xl",children:"folder"})})]})]}),c.jsxs("div",{className:"p-6 rounded-[2rem] bg-gradient-to-br from-primary/20 to-orange-500/20 border border-white/10 space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"material-symbols-outlined text-primary",children:"auto_fix_high"}),c.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-white",children:"Vectorizacin Inteligente"})]}),c.jsx("p",{className:"text-[10px] text-slate-500 leading-relaxed font-manrope",children:"Arrastra una imagen para convertirla automticamente en nodos editables."}),c.jsx(Ct,{variant:"primary",size:"sm",className:"w-full text-[9px] py-3 rounded-xl shadow-lg",children:"Importar y Procesar"})]})]})]})]})},Gw=({icon:t,active:e})=>c.jsx("button",{className:`py-4 rounded-xl border transition-all flex items-center justify-center ${e?"bg-primary/20 border-primary shadow-lg shadow-primary/20":"bg-white/5 border-white/5 hover:border-white/10"}`,children:c.jsx("span",{className:`material-symbols-outlined text-lg ${e?"text-white":"text-slate-600"}`,children:t})}),mre=()=>{const[t,e]=V.useState("hub");return c.jsxs("div",{className:"flex-1 flex flex-col h-full bg-[#050508] overflow-hidden",children:[t==="hub"&&c.jsxs("div",{className:"flex-1 flex flex-col h-full relative",children:[c.jsx("button",{onClick:()=>e("foundry"),className:"absolute right-12 bottom-12 z-50 size-16 rounded-3xl bg-primary text-white flex items-center justify-center shadow-2xl shadow-primary/40 hover:scale-110 active:scale-95 transition-all group",title:"Glyph Foundry",children:c.jsx("span",{className:"material-symbols-outlined text-3xl group-hover:rotate-12 transition-transform duration-300",children:"font_download"})}),c.jsx(fre,{onOpenEditor:()=>e("editor")})]}),t==="foundry"&&c.jsx(hre,{onBack:()=>e("hub")}),t==="editor"&&c.jsx(pre,{onBack:()=>e("hub"),onSave:()=>e("hub")})]})};var gre=Y4;function vre(t,e){return gre(t,e)}var yre=vre,UI={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(t,e){(function(r,i){t.exports=i()})(typeof self<"u"?self:Qt,function(){return function(n){var r={};function i(s){if(r[s])return r[s].exports;var a=r[s]={i:s,l:!1,exports:{}};return n[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=n,i.c=r,i.d=function(s,a,o){i.o(s,a)||Object.defineProperty(s,a,{configurable:!1,enumerable:!0,get:o})},i.n=function(s){var a=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(a,"a",a),a},i.o=function(s,a){return Object.prototype.hasOwnProperty.call(s,a)},i.p="",i(i.s=109)}([function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(17),a=i(18),o=i(19),l=i(45),u=i(46),d=i(47),p=i(48),h=i(49),m=i(12),y=i(32),x=i(33),_=i(31),v=i(1),w={Scope:v.Scope,create:v.create,find:v.find,query:v.query,register:v.register,Container:s.default,Format:a.default,Leaf:o.default,Embed:p.default,Scroll:l.default,Block:d.default,Inline:u.default,Text:h.default,Attributor:{Attribute:m.default,Class:y.default,Style:x.default,Store:_.default}};r.default=w},function(n,r,i){var s=this&&this.__extends||function(){var _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,w){v.__proto__=w}||function(v,w){for(var b in w)w.hasOwnProperty(b)&&(v[b]=w[b])};return function(v,w){_(v,w);function b(){this.constructor=v}v.prototype=w===null?Object.create(w):(b.prototype=w.prototype,new b)}}();Object.defineProperty(r,"__esModule",{value:!0});var a=function(_){s(v,_);function v(w){var b=this;return w="[Parchment] "+w,b=_.call(this,w)||this,b.message=w,b.name=b.constructor.name,b}return v}(Error);r.ParchmentError=a;var o={},l={},u={},d={};r.DATA_KEY="__blot";var p;(function(_){_[_.TYPE=3]="TYPE",_[_.LEVEL=12]="LEVEL",_[_.ATTRIBUTE=13]="ATTRIBUTE",_[_.BLOT=14]="BLOT",_[_.INLINE=7]="INLINE",_[_.BLOCK=11]="BLOCK",_[_.BLOCK_BLOT=10]="BLOCK_BLOT",_[_.INLINE_BLOT=6]="INLINE_BLOT",_[_.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",_[_.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",_[_.ANY=15]="ANY"})(p=r.Scope||(r.Scope={}));function h(_,v){var w=y(_);if(w==null)throw new a("Unable to create "+_+" blot");var b=w,N=_ instanceof Node||_.nodeType===Node.TEXT_NODE?_:b.create(v);return new b(N,v)}r.create=h;function m(_,v){return v===void 0&&(v=!1),_==null?null:_[r.DATA_KEY]!=null?_[r.DATA_KEY].blot:v?m(_.parentNode,v):null}r.find=m;function y(_,v){v===void 0&&(v=p.ANY);var w;if(typeof _=="string")w=d[_]||o[_];else if(_ instanceof Text||_.nodeType===Node.TEXT_NODE)w=d.text;else if(typeof _=="number")_&p.LEVEL&p.BLOCK?w=d.block:_&p.LEVEL&p.INLINE&&(w=d.inline);else if(_ instanceof HTMLElement){var b=(_.getAttribute("class")||"").split(/\s+/);for(var N in b)if(w=l[b[N]],w)break;w=w||u[_.tagName]}return w==null?null:v&p.LEVEL&w.scope&&v&p.TYPE&w.scope?w:null}r.query=y;function x(){for(var _=[],v=0;v<arguments.length;v++)_[v]=arguments[v];if(_.length>1)return _.map(function(N){return x(N)});var w=_[0];if(typeof w.blotName!="string"&&typeof w.attrName!="string")throw new a("Invalid definition");if(w.blotName==="abstract")throw new a("Cannot register abstract class");if(d[w.blotName||w.attrName]=w,typeof w.keyName=="string")o[w.keyName]=w;else if(w.className!=null&&(l[w.className]=w),w.tagName!=null){Array.isArray(w.tagName)?w.tagName=w.tagName.map(function(N){return N.toUpperCase()}):w.tagName=w.tagName.toUpperCase();var b=Array.isArray(w.tagName)?w.tagName:[w.tagName];b.forEach(function(N){(u[N]==null||w.className==null)&&(u[N]=w)})}return w}r.register=x},function(n,r,i){var s=i(51),a=i(11),o=i(3),l=i(20),u=String.fromCharCode(0),d=function(p){Array.isArray(p)?this.ops=p:p!=null&&Array.isArray(p.ops)?this.ops=p.ops:this.ops=[]};d.prototype.insert=function(p,h){var m={};return p.length===0?this:(m.insert=p,h!=null&&typeof h=="object"&&Object.keys(h).length>0&&(m.attributes=h),this.push(m))},d.prototype.delete=function(p){return p<=0?this:this.push({delete:p})},d.prototype.retain=function(p,h){if(p<=0)return this;var m={retain:p};return h!=null&&typeof h=="object"&&Object.keys(h).length>0&&(m.attributes=h),this.push(m)},d.prototype.push=function(p){var h=this.ops.length,m=this.ops[h-1];if(p=o(!0,{},p),typeof m=="object"){if(typeof p.delete=="number"&&typeof m.delete=="number")return this.ops[h-1]={delete:m.delete+p.delete},this;if(typeof m.delete=="number"&&p.insert!=null&&(h-=1,m=this.ops[h-1],typeof m!="object"))return this.ops.unshift(p),this;if(a(p.attributes,m.attributes)){if(typeof p.insert=="string"&&typeof m.insert=="string")return this.ops[h-1]={insert:m.insert+p.insert},typeof p.attributes=="object"&&(this.ops[h-1].attributes=p.attributes),this;if(typeof p.retain=="number"&&typeof m.retain=="number")return this.ops[h-1]={retain:m.retain+p.retain},typeof p.attributes=="object"&&(this.ops[h-1].attributes=p.attributes),this}}return h===this.ops.length?this.ops.push(p):this.ops.splice(h,0,p),this},d.prototype.chop=function(){var p=this.ops[this.ops.length-1];return p&&p.retain&&!p.attributes&&this.ops.pop(),this},d.prototype.filter=function(p){return this.ops.filter(p)},d.prototype.forEach=function(p){this.ops.forEach(p)},d.prototype.map=function(p){return this.ops.map(p)},d.prototype.partition=function(p){var h=[],m=[];return this.forEach(function(y){var x=p(y)?h:m;x.push(y)}),[h,m]},d.prototype.reduce=function(p,h){return this.ops.reduce(p,h)},d.prototype.changeLength=function(){return this.reduce(function(p,h){return h.insert?p+l.length(h):h.delete?p-h.delete:p},0)},d.prototype.length=function(){return this.reduce(function(p,h){return p+l.length(h)},0)},d.prototype.slice=function(p,h){p=p||0,typeof h!="number"&&(h=1/0);for(var m=[],y=l.iterator(this.ops),x=0;x<h&&y.hasNext();){var _;x<p?_=y.next(p-x):(_=y.next(h-x),m.push(_)),x+=l.length(_)}return new d(m)},d.prototype.compose=function(p){var h=l.iterator(this.ops),m=l.iterator(p.ops),y=[],x=m.peek();if(x!=null&&typeof x.retain=="number"&&x.attributes==null){for(var _=x.retain;h.peekType()==="insert"&&h.peekLength()<=_;)_-=h.peekLength(),y.push(h.next());x.retain-_>0&&m.next(x.retain-_)}for(var v=new d(y);h.hasNext()||m.hasNext();)if(m.peekType()==="insert")v.push(m.next());else if(h.peekType()==="delete")v.push(h.next());else{var w=Math.min(h.peekLength(),m.peekLength()),b=h.next(w),N=m.next(w);if(typeof N.retain=="number"){var E={};typeof b.retain=="number"?E.retain=w:E.insert=b.insert;var A=l.attributes.compose(b.attributes,N.attributes,typeof b.retain=="number");if(A&&(E.attributes=A),v.push(E),!m.hasNext()&&a(v.ops[v.ops.length-1],E)){var P=new d(h.rest());return v.concat(P).chop()}}else typeof N.delete=="number"&&typeof b.retain=="number"&&v.push(N)}return v.chop()},d.prototype.concat=function(p){var h=new d(this.ops.slice());return p.ops.length>0&&(h.push(p.ops[0]),h.ops=h.ops.concat(p.ops.slice(1))),h},d.prototype.diff=function(p,h){if(this.ops===p.ops)return new d;var m=[this,p].map(function(w){return w.map(function(b){if(b.insert!=null)return typeof b.insert=="string"?b.insert:u;var N=w===p?"on":"with";throw new Error("diff() called "+N+" non-document")}).join("")}),y=new d,x=s(m[0],m[1],h),_=l.iterator(this.ops),v=l.iterator(p.ops);return x.forEach(function(w){for(var b=w[1].length;b>0;){var N=0;switch(w[0]){case s.INSERT:N=Math.min(v.peekLength(),b),y.push(v.next(N));break;case s.DELETE:N=Math.min(b,_.peekLength()),_.next(N),y.delete(N);break;case s.EQUAL:N=Math.min(_.peekLength(),v.peekLength(),b);var E=_.next(N),A=v.next(N);a(E.insert,A.insert)?y.retain(N,l.attributes.diff(E.attributes,A.attributes)):y.push(A).delete(N);break}b-=N}}),y.chop()},d.prototype.eachLine=function(p,h){h=h||`
`;for(var m=l.iterator(this.ops),y=new d,x=0;m.hasNext();){if(m.peekType()!=="insert")return;var _=m.peek(),v=l.length(_)-m.peekLength(),w=typeof _.insert=="string"?_.insert.indexOf(h,v)-v:-1;if(w<0)y.push(m.next());else if(w>0)y.push(m.next(w));else{if(p(y,m.next(1).attributes||{},x)===!1)return;x+=1,y=new d}}y.length()>0&&p(y,{},x)},d.prototype.transform=function(p,h){if(h=!!h,typeof p=="number")return this.transformPosition(p,h);for(var m=l.iterator(this.ops),y=l.iterator(p.ops),x=new d;m.hasNext()||y.hasNext();)if(m.peekType()==="insert"&&(h||y.peekType()!=="insert"))x.retain(l.length(m.next()));else if(y.peekType()==="insert")x.push(y.next());else{var _=Math.min(m.peekLength(),y.peekLength()),v=m.next(_),w=y.next(_);if(v.delete)continue;w.delete?x.push(w):x.retain(_,l.attributes.transform(v.attributes,w.attributes,h))}return x.chop()},d.prototype.transformPosition=function(p,h){h=!!h;for(var m=l.iterator(this.ops),y=0;m.hasNext()&&y<=p;){var x=m.peekLength(),_=m.peekType();if(m.next(),_==="delete"){p-=Math.min(x,p-y);continue}else _==="insert"&&(y<p||!h)&&(p+=x);y+=x}return p},n.exports=d},function(n,r){var i=Object.prototype.hasOwnProperty,s=Object.prototype.toString,a=Object.defineProperty,o=Object.getOwnPropertyDescriptor,l=function(m){return typeof Array.isArray=="function"?Array.isArray(m):s.call(m)==="[object Array]"},u=function(m){if(!m||s.call(m)!=="[object Object]")return!1;var y=i.call(m,"constructor"),x=m.constructor&&m.constructor.prototype&&i.call(m.constructor.prototype,"isPrototypeOf");if(m.constructor&&!y&&!x)return!1;var _;for(_ in m);return typeof _>"u"||i.call(m,_)},d=function(m,y){a&&y.name==="__proto__"?a(m,y.name,{enumerable:!0,configurable:!0,value:y.newValue,writable:!0}):m[y.name]=y.newValue},p=function(m,y){if(y==="__proto__")if(i.call(m,y)){if(o)return o(m,y).value}else return;return m[y]};n.exports=function h(){var m,y,x,_,v,w,b=arguments[0],N=1,E=arguments.length,A=!1;for(typeof b=="boolean"&&(A=b,b=arguments[1]||{},N=2),(b==null||typeof b!="object"&&typeof b!="function")&&(b={});N<E;++N)if(m=arguments[N],m!=null)for(y in m)x=p(b,y),_=p(m,y),b!==_&&(A&&_&&(u(_)||(v=l(_)))?(v?(v=!1,w=x&&l(x)?x:[]):w=x&&u(x)?x:{},d(b,{name:y,newValue:h(A,w,_)})):typeof _<"u"&&d(b,{name:y,newValue:_}));return b}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BlockEmbed=r.bubbleFormats=void 0;var s=function(){function j(O,q){for(var I=0;I<q.length;I++){var D=q[I];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(O,D.key,D)}}return function(O,q,I){return q&&j(O.prototype,q),I&&j(O,I),O}}(),a=function j(O,q,I){O===null&&(O=Function.prototype);var D=Object.getOwnPropertyDescriptor(O,q);if(D===void 0){var U=Object.getPrototypeOf(O);return U===null?void 0:j(U,q,I)}else{if("value"in D)return D.value;var W=D.get;return W===void 0?void 0:W.call(I)}},o=i(3),l=b(o),u=i(2),d=b(u),p=i(0),h=b(p),m=i(16),y=b(m),x=i(6),_=b(x),v=i(7),w=b(v);function b(j){return j&&j.__esModule?j:{default:j}}function N(j,O){if(!(j instanceof O))throw new TypeError("Cannot call a class as a function")}function E(j,O){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:j}function A(j,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);j.prototype=Object.create(O&&O.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(j,O):j.__proto__=O)}var P=1,T=function(j){A(O,j);function O(){return N(this,O),E(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return s(O,[{key:"attach",value:function(){a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"attach",this).call(this),this.attributes=new h.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new d.default().insert(this.value(),(0,l.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(I,D){var U=h.default.query(I,h.default.Scope.BLOCK_ATTRIBUTE);U!=null&&this.attributes.attribute(U,D)}},{key:"formatAt",value:function(I,D,U,W){this.format(U,W)}},{key:"insertAt",value:function(I,D,U){if(typeof D=="string"&&D.endsWith(`
`)){var W=h.default.create(M.blotName);this.parent.insertBefore(W,I===0?this:this.next),W.insertAt(0,D.slice(0,-1))}else a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertAt",this).call(this,I,D,U)}}]),O}(h.default.Embed);T.scope=h.default.Scope.BLOCK_BLOT;var M=function(j){A(O,j);function O(q){N(this,O);var I=E(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,q));return I.cache={},I}return s(O,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(h.default.Leaf).reduce(function(I,D){return D.length()===0?I:I.insert(D.value(),k(D))},new d.default).insert(`
`,k(this))),this.cache.delta}},{key:"deleteAt",value:function(I,D){a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"deleteAt",this).call(this,I,D),this.cache={}}},{key:"formatAt",value:function(I,D,U,W){D<=0||(h.default.query(U,h.default.Scope.BLOCK)?I+D===this.length()&&this.format(U,W):a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"formatAt",this).call(this,I,Math.min(D,this.length()-I-1),U,W),this.cache={})}},{key:"insertAt",value:function(I,D,U){if(U!=null)return a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertAt",this).call(this,I,D,U);if(D.length!==0){var W=D.split(`
`),Y=W.shift();Y.length>0&&(I<this.length()-1||this.children.tail==null?a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertAt",this).call(this,Math.min(I,this.length()-1),Y):this.children.tail.insertAt(this.children.tail.length(),Y),this.cache={});var H=this;W.reduce(function(B,L){return H=H.split(B,!0),H.insertAt(0,L),L.length},I+Y.length)}}},{key:"insertBefore",value:function(I,D){var U=this.children.head;a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertBefore",this).call(this,I,D),U instanceof y.default&&U.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"length",this).call(this)+P),this.cache.length}},{key:"moveChildren",value:function(I,D){a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"moveChildren",this).call(this,I,D),this.cache={}}},{key:"optimize",value:function(I){a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"optimize",this).call(this,I),this.cache={}}},{key:"path",value:function(I){return a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"path",this).call(this,I,!0)}},{key:"removeChild",value:function(I){a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"removeChild",this).call(this,I),this.cache={}}},{key:"split",value:function(I){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(D&&(I===0||I>=this.length()-P)){var U=this.clone();return I===0?(this.parent.insertBefore(U,this),this):(this.parent.insertBefore(U,this.next),U)}else{var W=a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"split",this).call(this,I,D);return this.cache={},W}}}]),O}(h.default.Block);M.blotName="block",M.tagName="P",M.defaultChild="break",M.allowedChildren=[_.default,h.default.Embed,w.default];function k(j){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return j==null||(typeof j.formats=="function"&&(O=(0,l.default)(O,j.formats())),j.parent==null||j.parent.blotName=="scroll"||j.parent.statics.scope!==j.statics.scope)?O:k(j.parent,O)}r.bubbleFormats=k,r.BlockEmbed=T,r.default=M},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.overload=r.expandConfig=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},a=function(){function H(B,L){var z=[],K=!0,J=!1,ne=void 0;try{for(var X=B[Symbol.iterator](),G;!(K=(G=X.next()).done)&&(z.push(G.value),!(L&&z.length===L));K=!0);}catch(te){J=!0,ne=te}finally{try{!K&&X.return&&X.return()}finally{if(J)throw ne}}return z}return function(B,L){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return H(B,L);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function H(B,L){for(var z=0;z<L.length;z++){var K=L[z];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(B,K.key,K)}}return function(B,L,z){return L&&H(B.prototype,L),z&&H(B,z),B}}();i(50);var l=i(2),u=k(l),d=i(14),p=k(d),h=i(8),m=k(h),y=i(9),x=k(y),_=i(0),v=k(_),w=i(15),b=k(w),N=i(3),E=k(N),A=i(10),P=k(A),T=i(34),M=k(T);function k(H){return H&&H.__esModule?H:{default:H}}function j(H,B,L){return B in H?Object.defineProperty(H,B,{value:L,enumerable:!0,configurable:!0,writable:!0}):H[B]=L,H}function O(H,B){if(!(H instanceof B))throw new TypeError("Cannot call a class as a function")}var q=(0,P.default)("quill"),I=function(){o(H,null,[{key:"debug",value:function(L){L===!0&&(L="log"),P.default.level(L)}},{key:"find",value:function(L){return L.__quill||v.default.find(L)}},{key:"import",value:function(L){return this.imports[L]==null&&q.error("Cannot import "+L+". Are you sure it was registered?"),this.imports[L]}},{key:"register",value:function(L,z){var K=this,J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof L!="string"){var ne=L.attrName||L.blotName;typeof ne=="string"?this.register("formats/"+ne,L,z):Object.keys(L).forEach(function(X){K.register(X,L[X],z)})}else this.imports[L]!=null&&!J&&q.warn("Overwriting "+L+" with",z),this.imports[L]=z,(L.startsWith("blots/")||L.startsWith("formats/"))&&z.blotName!=="abstract"?v.default.register(z):L.startsWith("modules")&&typeof z.register=="function"&&z.register()}}]);function H(B){var L=this,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(O(this,H),this.options=D(B,z),this.container=this.options.container,this.container==null)return q.error("Invalid Quill container",B);this.options.debug&&H.debug(this.options.debug);var K=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new m.default,this.scroll=v.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new p.default(this.scroll),this.selection=new b.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(m.default.events.EDITOR_CHANGE,function(ne){ne===m.default.events.TEXT_CHANGE&&L.root.classList.toggle("ql-blank",L.editor.isBlank())}),this.emitter.on(m.default.events.SCROLL_UPDATE,function(ne,X){var G=L.selection.lastRange,te=G&&G.length===0?G.index:void 0;U.call(L,function(){return L.editor.update(null,X,te)},ne)});var J=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+K+"<p><br></p></div>");this.setContents(J),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return o(H,[{key:"addContainer",value:function(L){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof L=="string"){var K=L;L=document.createElement("div"),L.classList.add(K)}return this.container.insertBefore(L,z),L}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(L,z,K){var J=this,ne=W(L,z,K),X=a(ne,4);return L=X[0],z=X[1],K=X[3],U.call(this,function(){return J.editor.deleteText(L,z)},K,L,-1*z)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(L),this.container.classList.toggle("ql-disabled",!L)}},{key:"focus",value:function(){var L=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=L,this.scrollIntoView()}},{key:"format",value:function(L,z){var K=this,J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:m.default.sources.API;return U.call(this,function(){var ne=K.getSelection(!0),X=new u.default;if(ne==null)return X;if(v.default.query(L,v.default.Scope.BLOCK))X=K.editor.formatLine(ne.index,ne.length,j({},L,z));else{if(ne.length===0)return K.selection.format(L,z),X;X=K.editor.formatText(ne.index,ne.length,j({},L,z))}return K.setSelection(ne,m.default.sources.SILENT),X},J)}},{key:"formatLine",value:function(L,z,K,J,ne){var X=this,G=void 0,te=W(L,z,K,J,ne),re=a(te,4);return L=re[0],z=re[1],G=re[2],ne=re[3],U.call(this,function(){return X.editor.formatLine(L,z,G)},ne,L,0)}},{key:"formatText",value:function(L,z,K,J,ne){var X=this,G=void 0,te=W(L,z,K,J,ne),re=a(te,4);return L=re[0],z=re[1],G=re[2],ne=re[3],U.call(this,function(){return X.editor.formatText(L,z,G)},ne,L,0)}},{key:"getBounds",value:function(L){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,K=void 0;typeof L=="number"?K=this.selection.getBounds(L,z):K=this.selection.getBounds(L.index,L.length);var J=this.container.getBoundingClientRect();return{bottom:K.bottom-J.top,height:K.height,left:K.left-J.left,right:K.right-J.left,top:K.top-J.top,width:K.width}}},{key:"getContents",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-L,K=W(L,z),J=a(K,2);return L=J[0],z=J[1],this.editor.getContents(L,z)}},{key:"getFormat",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof L=="number"?this.editor.getFormat(L,z):this.editor.getFormat(L.index,L.length)}},{key:"getIndex",value:function(L){return L.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(L){return this.scroll.leaf(L)}},{key:"getLine",value:function(L){return this.scroll.line(L)}},{key:"getLines",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof L!="number"?this.scroll.lines(L.index,L.length):this.scroll.lines(L,z)}},{key:"getModule",value:function(L){return this.theme.modules[L]}},{key:"getSelection",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return L&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-L,K=W(L,z),J=a(K,2);return L=J[0],z=J[1],this.editor.getText(L,z)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(L,z,K){var J=this,ne=arguments.length>3&&arguments[3]!==void 0?arguments[3]:H.sources.API;return U.call(this,function(){return J.editor.insertEmbed(L,z,K)},ne,L)}},{key:"insertText",value:function(L,z,K,J,ne){var X=this,G=void 0,te=W(L,0,K,J,ne),re=a(te,4);return L=re[0],G=re[2],ne=re[3],U.call(this,function(){return X.editor.insertText(L,z,G)},ne,L,z.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(L,z,K){this.clipboard.dangerouslyPasteHTML(L,z,K)}},{key:"removeFormat",value:function(L,z,K){var J=this,ne=W(L,z,K),X=a(ne,4);return L=X[0],z=X[1],K=X[3],U.call(this,function(){return J.editor.removeFormat(L,z)},K,L)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(L){var z=this,K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:m.default.sources.API;return U.call(this,function(){L=new u.default(L);var J=z.getLength(),ne=z.editor.deleteText(0,J),X=z.editor.applyDelta(L),G=X.ops[X.ops.length-1];G!=null&&typeof G.insert=="string"&&G.insert[G.insert.length-1]===`
`&&(z.editor.deleteText(z.getLength()-1,1),X.delete(1));var te=ne.compose(X);return te},K)}},{key:"setSelection",value:function(L,z,K){if(L==null)this.selection.setRange(null,z||H.sources.API);else{var J=W(L,z,K),ne=a(J,4);L=ne[0],z=ne[1],K=ne[3],this.selection.setRange(new w.Range(L,z),K),K!==m.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(L){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:m.default.sources.API,K=new u.default().insert(L);return this.setContents(K,z)}},{key:"update",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m.default.sources.USER,z=this.scroll.update(L);return this.selection.update(L),z}},{key:"updateContents",value:function(L){var z=this,K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:m.default.sources.API;return U.call(this,function(){return L=new u.default(L),z.editor.applyDelta(L,K)},K,!0)}}]),H}();I.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},I.events=m.default.events,I.sources=m.default.sources,I.version="1.3.7",I.imports={delta:u.default,parchment:v.default,"core/module":x.default,"core/theme":M.default};function D(H,B){if(B=(0,E.default)(!0,{container:H,modules:{clipboard:!0,keyboard:!0,history:!0}},B),!B.theme||B.theme===I.DEFAULTS.theme)B.theme=M.default;else if(B.theme=I.import("themes/"+B.theme),B.theme==null)throw new Error("Invalid theme "+B.theme+". Did you register it?");var L=(0,E.default)(!0,{},B.theme.DEFAULTS);[L,B].forEach(function(J){J.modules=J.modules||{},Object.keys(J.modules).forEach(function(ne){J.modules[ne]===!0&&(J.modules[ne]={})})});var z=Object.keys(L.modules).concat(Object.keys(B.modules)),K=z.reduce(function(J,ne){var X=I.import("modules/"+ne);return X==null?q.error("Cannot load "+ne+" module. Are you sure you registered it?"):J[ne]=X.DEFAULTS||{},J},{});return B.modules!=null&&B.modules.toolbar&&B.modules.toolbar.constructor!==Object&&(B.modules.toolbar={container:B.modules.toolbar}),B=(0,E.default)(!0,{},I.DEFAULTS,{modules:K},L,B),["bounds","container","scrollingContainer"].forEach(function(J){typeof B[J]=="string"&&(B[J]=document.querySelector(B[J]))}),B.modules=Object.keys(B.modules).reduce(function(J,ne){return B.modules[ne]&&(J[ne]=B.modules[ne]),J},{}),B}function U(H,B,L,z){if(this.options.strict&&!this.isEnabled()&&B===m.default.sources.USER)return new u.default;var K=L==null?null:this.getSelection(),J=this.editor.delta,ne=H();if(K!=null&&(L===!0&&(L=K.index),z==null?K=Y(K,ne,B):z!==0&&(K=Y(K,L,z,B)),this.setSelection(K,m.default.sources.SILENT)),ne.length()>0){var X,G=[m.default.events.TEXT_CHANGE,ne,J,B];if((X=this.emitter).emit.apply(X,[m.default.events.EDITOR_CHANGE].concat(G)),B!==m.default.sources.SILENT){var te;(te=this.emitter).emit.apply(te,G)}}return ne}function W(H,B,L,z,K){var J={};return typeof H.index=="number"&&typeof H.length=="number"?typeof B!="number"?(K=z,z=L,L=B,B=H.length,H=H.index):(B=H.length,H=H.index):typeof B!="number"&&(K=z,z=L,L=B,B=0),(typeof L>"u"?"undefined":s(L))==="object"?(J=L,K=z):typeof L=="string"&&(z!=null?J[L]=z:K=L),K=K||m.default.sources.API,[H,B,J,K]}function Y(H,B,L,z){if(H==null)return null;var K=void 0,J=void 0;if(B instanceof u.default){var ne=[H.index,H.index+H.length].map(function(re){return B.transformPosition(re,z!==m.default.sources.USER)}),X=a(ne,2);K=X[0],J=X[1]}else{var G=[H.index,H.index+H.length].map(function(re){return re<B||re===B&&z===m.default.sources.USER?re:L>=0?re+L:Math.max(B,re+L)}),te=a(G,2);K=te[0],J=te[1]}return new w.Range(K,J-K)}r.expandConfig=D,r.overload=W,r.default=I},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function _(v,w){for(var b=0;b<w.length;b++){var N=w[b];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(v,N.key,N)}}return function(v,w,b){return w&&_(v.prototype,w),b&&_(v,b),v}}(),a=function _(v,w,b){v===null&&(v=Function.prototype);var N=Object.getOwnPropertyDescriptor(v,w);if(N===void 0){var E=Object.getPrototypeOf(v);return E===null?void 0:_(E,w,b)}else{if("value"in N)return N.value;var A=N.get;return A===void 0?void 0:A.call(b)}},o=i(7),l=p(o),u=i(0),d=p(u);function p(_){return _&&_.__esModule?_:{default:_}}function h(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function m(_,v){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:_}function y(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(_,v):_.__proto__=v)}var x=function(_){y(v,_);function v(){return h(this,v),m(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return s(v,[{key:"formatAt",value:function(b,N,E,A){if(v.compare(this.statics.blotName,E)<0&&d.default.query(E,d.default.Scope.BLOT)){var P=this.isolate(b,N);A&&P.wrap(E,A)}else a(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"formatAt",this).call(this,b,N,E,A)}},{key:"optimize",value:function(b){if(a(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,b),this.parent instanceof v&&v.compare(this.statics.blotName,this.parent.statics.blotName)>0){var N=this.parent.isolate(this.offset(),this.length());this.moveChildren(N),N.wrap(this)}}}],[{key:"compare",value:function(b,N){var E=v.order.indexOf(b),A=v.order.indexOf(N);return E>=0||A>=0?E-A:b===N?0:b<N?-1:1}}]),v}(d.default.Inline);x.allowedChildren=[x,d.default.Embed,l.default],x.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],r.default=x},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(0),a=o(s);function o(h){return h&&h.__esModule?h:{default:h}}function l(h,m){if(!(h instanceof m))throw new TypeError("Cannot call a class as a function")}function u(h,m){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:h}function d(h,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);h.prototype=Object.create(m&&m.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(h,m):h.__proto__=m)}var p=function(h){d(m,h);function m(){return l(this,m),u(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m}(a.default.Text);r.default=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function w(b,N){for(var E=0;E<N.length;E++){var A=N[E];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(b,A.key,A)}}return function(b,N,E){return N&&w(b.prototype,N),E&&w(b,E),b}}(),a=function w(b,N,E){b===null&&(b=Function.prototype);var A=Object.getOwnPropertyDescriptor(b,N);if(A===void 0){var P=Object.getPrototypeOf(b);return P===null?void 0:w(P,N,E)}else{if("value"in A)return A.value;var T=A.get;return T===void 0?void 0:T.call(E)}},o=i(54),l=p(o),u=i(10),d=p(u);function p(w){return w&&w.__esModule?w:{default:w}}function h(w,b){if(!(w instanceof b))throw new TypeError("Cannot call a class as a function")}function m(w,b){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:w}function y(w,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);w.prototype=Object.create(b&&b.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(w,b):w.__proto__=b)}var x=(0,d.default)("quill:events"),_=["selectionchange","mousedown","mouseup","click"];_.forEach(function(w){document.addEventListener(w,function(){for(var b=arguments.length,N=Array(b),E=0;E<b;E++)N[E]=arguments[E];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(A){if(A.__quill&&A.__quill.emitter){var P;(P=A.__quill.emitter).handleDOM.apply(P,N)}})})});var v=function(w){y(b,w);function b(){h(this,b);var N=m(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return N.listeners={},N.on("error",x.error),N}return s(b,[{key:"emit",value:function(){x.log.apply(x,arguments),a(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(E){for(var A=arguments.length,P=Array(A>1?A-1:0),T=1;T<A;T++)P[T-1]=arguments[T];(this.listeners[E.type]||[]).forEach(function(M){var k=M.node,j=M.handler;(E.target===k||k.contains(E.target))&&j.apply(void 0,[E].concat(P))})}},{key:"listenDOM",value:function(E,A,P){this.listeners[E]||(this.listeners[E]=[]),this.listeners[E].push({node:A,handler:P})}}]),b}(l.default);v.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},v.sources={API:"api",SILENT:"silent",USER:"user"},r.default=v},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});function s(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")}var a=function o(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s(this,o),this.quill=l,this.options=u};a.DEFAULTS={},r.default=a},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=["error","warn","log","info"],a="warn";function o(u){if(s.indexOf(u)<=s.indexOf(a)){for(var d,p=arguments.length,h=Array(p>1?p-1:0),m=1;m<p;m++)h[m-1]=arguments[m];(d=console)[u].apply(d,h)}}function l(u){return s.reduce(function(d,p){return d[p]=o.bind(console,p,u),d},{})}o.level=l.level=function(u){a=u},r.default=l},function(n,r,i){var s=Array.prototype.slice,a=i(52),o=i(53),l=n.exports=function(h,m,y){return y||(y={}),h===m?!0:h instanceof Date&&m instanceof Date?h.getTime()===m.getTime():!h||!m||typeof h!="object"&&typeof m!="object"?y.strict?h===m:h==m:p(h,m,y)};function u(h){return h==null}function d(h){return!(!h||typeof h!="object"||typeof h.length!="number"||typeof h.copy!="function"||typeof h.slice!="function"||h.length>0&&typeof h[0]!="number")}function p(h,m,y){var x,_;if(u(h)||u(m)||h.prototype!==m.prototype)return!1;if(o(h))return o(m)?(h=s.call(h),m=s.call(m),l(h,m,y)):!1;if(d(h)){if(!d(m)||h.length!==m.length)return!1;for(x=0;x<h.length;x++)if(h[x]!==m[x])return!1;return!0}try{var v=a(h),w=a(m)}catch{return!1}if(v.length!=w.length)return!1;for(v.sort(),w.sort(),x=v.length-1;x>=0;x--)if(v[x]!=w[x])return!1;for(x=v.length-1;x>=0;x--)if(_=v[x],!l(h[_],m[_],y))return!1;return typeof h==typeof m}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(1),a=function(){function o(l,u,d){d===void 0&&(d={}),this.attrName=l,this.keyName=u;var p=s.Scope.TYPE&s.Scope.ATTRIBUTE;d.scope!=null?this.scope=d.scope&s.Scope.LEVEL|p:this.scope=s.Scope.ATTRIBUTE,d.whitelist!=null&&(this.whitelist=d.whitelist)}return o.keys=function(l){return[].map.call(l.attributes,function(u){return u.name})},o.prototype.add=function(l,u){return this.canAdd(l,u)?(l.setAttribute(this.keyName,u),!0):!1},o.prototype.canAdd=function(l,u){var d=s.query(l,s.Scope.BLOT&(this.scope|s.Scope.TYPE));return d==null?!1:this.whitelist==null?!0:typeof u=="string"?this.whitelist.indexOf(u.replace(/["']/g,""))>-1:this.whitelist.indexOf(u)>-1},o.prototype.remove=function(l){l.removeAttribute(this.keyName)},o.prototype.value=function(l){var u=l.getAttribute(this.keyName);return this.canAdd(l,u)&&u?u:""},o}();r.default=a},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Code=void 0;var s=function(){function T(M,k){var j=[],O=!0,q=!1,I=void 0;try{for(var D=M[Symbol.iterator](),U;!(O=(U=D.next()).done)&&(j.push(U.value),!(k&&j.length===k));O=!0);}catch(W){q=!0,I=W}finally{try{!O&&D.return&&D.return()}finally{if(q)throw I}}return j}return function(M,k){if(Array.isArray(M))return M;if(Symbol.iterator in Object(M))return T(M,k);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function T(M,k){for(var j=0;j<k.length;j++){var O=k[j];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(M,O.key,O)}}return function(M,k,j){return k&&T(M.prototype,k),j&&T(M,j),M}}(),o=function T(M,k,j){M===null&&(M=Function.prototype);var O=Object.getOwnPropertyDescriptor(M,k);if(O===void 0){var q=Object.getPrototypeOf(M);return q===null?void 0:T(q,k,j)}else{if("value"in O)return O.value;var I=O.get;return I===void 0?void 0:I.call(j)}},l=i(2),u=w(l),d=i(0),p=w(d),h=i(4),m=w(h),y=i(6),x=w(y),_=i(7),v=w(_);function w(T){return T&&T.__esModule?T:{default:T}}function b(T,M){if(!(T instanceof M))throw new TypeError("Cannot call a class as a function")}function N(T,M){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M&&(typeof M=="object"||typeof M=="function")?M:T}function E(T,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof M);T.prototype=Object.create(M&&M.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(T,M):T.__proto__=M)}var A=function(T){E(M,T);function M(){return b(this,M),N(this,(M.__proto__||Object.getPrototypeOf(M)).apply(this,arguments))}return M}(x.default);A.blotName="code",A.tagName="CODE";var P=function(T){E(M,T);function M(){return b(this,M),N(this,(M.__proto__||Object.getPrototypeOf(M)).apply(this,arguments))}return a(M,[{key:"delta",value:function(){var j=this,O=this.domNode.textContent;return O.endsWith(`
`)&&(O=O.slice(0,-1)),O.split(`
`).reduce(function(q,I){return q.insert(I).insert(`
`,j.formats())},new u.default)}},{key:"format",value:function(j,O){if(!(j===this.statics.blotName&&O)){var q=this.descendant(v.default,this.length()-1),I=s(q,1),D=I[0];D!=null&&D.deleteAt(D.length()-1,1),o(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"format",this).call(this,j,O)}}},{key:"formatAt",value:function(j,O,q,I){if(O!==0&&!(p.default.query(q,p.default.Scope.BLOCK)==null||q===this.statics.blotName&&I===this.statics.formats(this.domNode))){var D=this.newlineIndex(j);if(!(D<0||D>=j+O)){var U=this.newlineIndex(j,!0)+1,W=D-U+1,Y=this.isolate(U,W),H=Y.next;Y.format(q,I),H instanceof M&&H.formatAt(0,j-U+O-W,q,I)}}}},{key:"insertAt",value:function(j,O,q){if(q==null){var I=this.descendant(v.default,j),D=s(I,2),U=D[0],W=D[1];U.insertAt(W,O)}}},{key:"length",value:function(){var j=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?j:j+1}},{key:"newlineIndex",value:function(j){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(O)return this.domNode.textContent.slice(0,j).lastIndexOf(`
`);var q=this.domNode.textContent.slice(j).indexOf(`
`);return q>-1?j+q:-1}},{key:"optimize",value:function(j){this.domNode.textContent.endsWith(`
`)||this.appendChild(p.default.create("text",`
`)),o(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"optimize",this).call(this,j);var O=this.next;O!=null&&O.prev===this&&O.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===O.statics.formats(O.domNode)&&(O.optimize(j),O.moveChildren(this),O.remove())}},{key:"replace",value:function(j){o(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"replace",this).call(this,j),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(O){var q=p.default.find(O);q==null?O.parentNode.removeChild(O):q instanceof p.default.Embed?q.remove():q.unwrap()})}}],[{key:"create",value:function(j){var O=o(M.__proto__||Object.getPrototypeOf(M),"create",this).call(this,j);return O.setAttribute("spellcheck",!1),O}},{key:"formats",value:function(){return!0}}]),M}(m.default);P.blotName="code-block",P.tagName="PRE",P.TAB="  ",r.Code=A,r.default=P},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},a=function(){function H(B,L){var z=[],K=!0,J=!1,ne=void 0;try{for(var X=B[Symbol.iterator](),G;!(K=(G=X.next()).done)&&(z.push(G.value),!(L&&z.length===L));K=!0);}catch(te){J=!0,ne=te}finally{try{!K&&X.return&&X.return()}finally{if(J)throw ne}}return z}return function(B,L){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return H(B,L);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function H(B,L){for(var z=0;z<L.length;z++){var K=L[z];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(B,K.key,K)}}return function(B,L,z){return L&&H(B.prototype,L),z&&H(B,z),B}}(),l=i(2),u=O(l),d=i(20),p=O(d),h=i(0),m=O(h),y=i(13),x=O(y),_=i(24),v=O(_),w=i(4),b=O(w),N=i(16),E=O(N),A=i(21),P=O(A),T=i(11),M=O(T),k=i(3),j=O(k);function O(H){return H&&H.__esModule?H:{default:H}}function q(H,B,L){return B in H?Object.defineProperty(H,B,{value:L,enumerable:!0,configurable:!0,writable:!0}):H[B]=L,H}function I(H,B){if(!(H instanceof B))throw new TypeError("Cannot call a class as a function")}var D=/^[ -~]*$/,U=function(){function H(B){I(this,H),this.scroll=B,this.delta=this.getDelta()}return o(H,[{key:"applyDelta",value:function(L){var z=this,K=!1;this.scroll.update();var J=this.scroll.length();return this.scroll.batchStart(),L=Y(L),L.reduce(function(ne,X){var G=X.retain||X.delete||X.insert.length||1,te=X.attributes||{};if(X.insert!=null){if(typeof X.insert=="string"){var re=X.insert;re.endsWith(`
`)&&K&&(K=!1,re=re.slice(0,-1)),ne>=J&&!re.endsWith(`
`)&&(K=!0),z.scroll.insertAt(ne,re);var Q=z.scroll.line(ne),se=a(Q,2),de=se[0],le=se[1],ue=(0,j.default)({},(0,w.bubbleFormats)(de));if(de instanceof b.default){var he=de.descendant(m.default.Leaf,le),qe=a(he,1),we=qe[0];ue=(0,j.default)(ue,(0,w.bubbleFormats)(we))}te=p.default.attributes.diff(ue,te)||{}}else if(s(X.insert)==="object"){var ae=Object.keys(X.insert)[0];if(ae==null)return ne;z.scroll.insertAt(ne,ae,X.insert[ae])}J+=G}return Object.keys(te).forEach(function(me){z.scroll.formatAt(ne,G,me,te[me])}),ne+G},0),L.reduce(function(ne,X){return typeof X.delete=="number"?(z.scroll.deleteAt(ne,X.delete),ne):ne+(X.retain||X.insert.length||1)},0),this.scroll.batchEnd(),this.update(L)}},{key:"deleteText",value:function(L,z){return this.scroll.deleteAt(L,z),this.update(new u.default().retain(L).delete(z))}},{key:"formatLine",value:function(L,z){var K=this,J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(J).forEach(function(ne){if(!(K.scroll.whitelist!=null&&!K.scroll.whitelist[ne])){var X=K.scroll.lines(L,Math.max(z,1)),G=z;X.forEach(function(te){var re=te.length();if(!(te instanceof x.default))te.format(ne,J[ne]);else{var Q=L-te.offset(K.scroll),se=te.newlineIndex(Q+G)-Q+1;te.formatAt(Q,se,ne,J[ne])}G-=re})}}),this.scroll.optimize(),this.update(new u.default().retain(L).retain(z,(0,P.default)(J)))}},{key:"formatText",value:function(L,z){var K=this,J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(J).forEach(function(ne){K.scroll.formatAt(L,z,ne,J[ne])}),this.update(new u.default().retain(L).retain(z,(0,P.default)(J)))}},{key:"getContents",value:function(L,z){return this.delta.slice(L,L+z)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(L,z){return L.concat(z.delta())},new u.default)}},{key:"getFormat",value:function(L){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,K=[],J=[];z===0?this.scroll.path(L).forEach(function(X){var G=a(X,1),te=G[0];te instanceof b.default?K.push(te):te instanceof m.default.Leaf&&J.push(te)}):(K=this.scroll.lines(L,z),J=this.scroll.descendants(m.default.Leaf,L,z));var ne=[K,J].map(function(X){if(X.length===0)return{};for(var G=(0,w.bubbleFormats)(X.shift());Object.keys(G).length>0;){var te=X.shift();if(te==null)return G;G=W((0,w.bubbleFormats)(te),G)}return G});return j.default.apply(j.default,ne)}},{key:"getText",value:function(L,z){return this.getContents(L,z).filter(function(K){return typeof K.insert=="string"}).map(function(K){return K.insert}).join("")}},{key:"insertEmbed",value:function(L,z,K){return this.scroll.insertAt(L,z,K),this.update(new u.default().retain(L).insert(q({},z,K)))}},{key:"insertText",value:function(L,z){var K=this,J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return z=z.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(L,z),Object.keys(J).forEach(function(ne){K.scroll.formatAt(L,z.length,ne,J[ne])}),this.update(new u.default().retain(L).insert(z,(0,P.default)(J)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var L=this.scroll.children.head;return L.statics.blotName!==b.default.blotName||L.children.length>1?!1:L.children.head instanceof E.default}},{key:"removeFormat",value:function(L,z){var K=this.getText(L,z),J=this.scroll.line(L+z),ne=a(J,2),X=ne[0],G=ne[1],te=0,re=new u.default;X!=null&&(X instanceof x.default?te=X.newlineIndex(G)-G+1:te=X.length()-G,re=X.delta().slice(G,G+te-1).insert(`
`));var Q=this.getContents(L,z+te),se=Q.diff(new u.default().insert(K).concat(re)),de=new u.default().retain(L).concat(se);return this.applyDelta(de)}},{key:"update",value:function(L){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,J=this.delta;if(z.length===1&&z[0].type==="characterData"&&z[0].target.data.match(D)&&m.default.find(z[0].target)){var ne=m.default.find(z[0].target),X=(0,w.bubbleFormats)(ne),G=ne.offset(this.scroll),te=z[0].oldValue.replace(v.default.CONTENTS,""),re=new u.default().insert(te),Q=new u.default().insert(ne.value()),se=new u.default().retain(G).concat(re.diff(Q,K));L=se.reduce(function(de,le){return le.insert?de.insert(le.insert,X):de.push(le)},new u.default),this.delta=J.compose(L)}else this.delta=this.getDelta(),(!L||!(0,M.default)(J.compose(L),this.delta))&&(L=J.diff(this.delta,K));return L}}]),H}();function W(H,B){return Object.keys(B).reduce(function(L,z){return H[z]==null||(B[z]===H[z]?L[z]=B[z]:Array.isArray(B[z])?B[z].indexOf(H[z])<0&&(L[z]=B[z].concat([H[z]])):L[z]=[B[z],H[z]]),L},{})}function Y(H){return H.reduce(function(B,L){if(L.insert===1){var z=(0,P.default)(L.attributes);return delete z.image,B.insert({image:L.attributes.image},z)}if(L.attributes!=null&&(L.attributes.list===!0||L.attributes.bullet===!0)&&(L=(0,P.default)(L),L.attributes.list?L.attributes.list="ordered":(L.attributes.list="bullet",delete L.attributes.bullet)),typeof L.insert=="string"){var K=L.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return B.insert(K,L.attributes)}return B.push(L)},new u.default)}r.default=U},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Range=void 0;var s=function(){function T(M,k){var j=[],O=!0,q=!1,I=void 0;try{for(var D=M[Symbol.iterator](),U;!(O=(U=D.next()).done)&&(j.push(U.value),!(k&&j.length===k));O=!0);}catch(W){q=!0,I=W}finally{try{!O&&D.return&&D.return()}finally{if(q)throw I}}return j}return function(M,k){if(Array.isArray(M))return M;if(Symbol.iterator in Object(M))return T(M,k);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function T(M,k){for(var j=0;j<k.length;j++){var O=k[j];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(M,O.key,O)}}return function(M,k,j){return k&&T(M.prototype,k),j&&T(M,j),M}}(),o=i(0),l=v(o),u=i(21),d=v(u),p=i(11),h=v(p),m=i(8),y=v(m),x=i(10),_=v(x);function v(T){return T&&T.__esModule?T:{default:T}}function w(T){if(Array.isArray(T)){for(var M=0,k=Array(T.length);M<T.length;M++)k[M]=T[M];return k}else return Array.from(T)}function b(T,M){if(!(T instanceof M))throw new TypeError("Cannot call a class as a function")}var N=(0,_.default)("quill:selection"),E=function T(M){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;b(this,T),this.index=M,this.length=k},A=function(){function T(M,k){var j=this;b(this,T),this.emitter=k,this.scroll=M,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=l.default.create("cursor",this),this.lastRange=this.savedRange=new E(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){j.mouseDown||setTimeout(j.update.bind(j,y.default.sources.USER),1)}),this.emitter.on(y.default.events.EDITOR_CHANGE,function(O,q){O===y.default.events.TEXT_CHANGE&&q.length()>0&&j.update(y.default.sources.SILENT)}),this.emitter.on(y.default.events.SCROLL_BEFORE_UPDATE,function(){if(j.hasFocus()){var O=j.getNativeRange();O!=null&&O.start.node!==j.cursor.textNode&&j.emitter.once(y.default.events.SCROLL_UPDATE,function(){try{j.setNativeRange(O.start.node,O.start.offset,O.end.node,O.end.offset)}catch{}})}}),this.emitter.on(y.default.events.SCROLL_OPTIMIZE,function(O,q){if(q.range){var I=q.range,D=I.startNode,U=I.startOffset,W=I.endNode,Y=I.endOffset;j.setNativeRange(D,U,W,Y)}}),this.update(y.default.sources.SILENT)}return a(T,[{key:"handleComposition",value:function(){var k=this;this.root.addEventListener("compositionstart",function(){k.composing=!0}),this.root.addEventListener("compositionend",function(){if(k.composing=!1,k.cursor.parent){var j=k.cursor.restore();if(!j)return;setTimeout(function(){k.setNativeRange(j.startNode,j.startOffset,j.endNode,j.endOffset)},1)}})}},{key:"handleDragging",value:function(){var k=this;this.emitter.listenDOM("mousedown",document.body,function(){k.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){k.mouseDown=!1,k.update(y.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(k,j){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[k])){this.scroll.update();var O=this.getNativeRange();if(!(O==null||!O.native.collapsed||l.default.query(k,l.default.Scope.BLOCK))){if(O.start.node!==this.cursor.textNode){var q=l.default.find(O.start.node,!1);if(q==null)return;if(q instanceof l.default.Leaf){var I=q.split(O.start.offset);q.parent.insertBefore(this.cursor,I)}else q.insertBefore(this.cursor,O.start.node);this.cursor.attach()}this.cursor.format(k,j),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(k){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,O=this.scroll.length();k=Math.min(k,O-1),j=Math.min(k+j,O-1)-k;var q=void 0,I=this.scroll.leaf(k),D=s(I,2),U=D[0],W=D[1];if(U==null)return null;var Y=U.position(W,!0),H=s(Y,2);q=H[0],W=H[1];var B=document.createRange();if(j>0){B.setStart(q,W);var L=this.scroll.leaf(k+j),z=s(L,2);if(U=z[0],W=z[1],U==null)return null;var K=U.position(W,!0),J=s(K,2);return q=J[0],W=J[1],B.setEnd(q,W),B.getBoundingClientRect()}else{var ne="left",X=void 0;return q instanceof Text?(W<q.data.length?(B.setStart(q,W),B.setEnd(q,W+1)):(B.setStart(q,W-1),B.setEnd(q,W),ne="right"),X=B.getBoundingClientRect()):(X=U.domNode.getBoundingClientRect(),W>0&&(ne="right")),{bottom:X.top+X.height,height:X.height,left:X[ne],right:X[ne],top:X.top,width:0}}}},{key:"getNativeRange",value:function(){var k=document.getSelection();if(k==null||k.rangeCount<=0)return null;var j=k.getRangeAt(0);if(j==null)return null;var O=this.normalizeNative(j);return N.info("getNativeRange",O),O}},{key:"getRange",value:function(){var k=this.getNativeRange();if(k==null)return[null,null];var j=this.normalizedToRange(k);return[j,k]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(k){var j=this,O=[[k.start.node,k.start.offset]];k.native.collapsed||O.push([k.end.node,k.end.offset]);var q=O.map(function(U){var W=s(U,2),Y=W[0],H=W[1],B=l.default.find(Y,!0),L=B.offset(j.scroll);return H===0?L:B instanceof l.default.Container?L+B.length():L+B.index(Y,H)}),I=Math.min(Math.max.apply(Math,w(q)),this.scroll.length()-1),D=Math.min.apply(Math,[I].concat(w(q)));return new E(D,I-D)}},{key:"normalizeNative",value:function(k){if(!P(this.root,k.startContainer)||!k.collapsed&&!P(this.root,k.endContainer))return null;var j={start:{node:k.startContainer,offset:k.startOffset},end:{node:k.endContainer,offset:k.endOffset},native:k};return[j.start,j.end].forEach(function(O){for(var q=O.node,I=O.offset;!(q instanceof Text)&&q.childNodes.length>0;)if(q.childNodes.length>I)q=q.childNodes[I],I=0;else if(q.childNodes.length===I)q=q.lastChild,I=q instanceof Text?q.data.length:q.childNodes.length+1;else break;O.node=q,O.offset=I}),j}},{key:"rangeToNative",value:function(k){var j=this,O=k.collapsed?[k.index]:[k.index,k.index+k.length],q=[],I=this.scroll.length();return O.forEach(function(D,U){D=Math.min(I-1,D);var W=void 0,Y=j.scroll.leaf(D),H=s(Y,2),B=H[0],L=H[1],z=B.position(L,U!==0),K=s(z,2);W=K[0],L=K[1],q.push(W,L)}),q.length<2&&(q=q.concat(q)),q}},{key:"scrollIntoView",value:function(k){var j=this.lastRange;if(j!=null){var O=this.getBounds(j.index,j.length);if(O!=null){var q=this.scroll.length()-1,I=this.scroll.line(Math.min(j.index,q)),D=s(I,1),U=D[0],W=U;if(j.length>0){var Y=this.scroll.line(Math.min(j.index+j.length,q)),H=s(Y,1);W=H[0]}if(!(U==null||W==null)){var B=k.getBoundingClientRect();O.top<B.top?k.scrollTop-=B.top-O.top:O.bottom>B.bottom&&(k.scrollTop+=O.bottom-B.bottom)}}}}},{key:"setNativeRange",value:function(k,j){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k,q=arguments.length>3&&arguments[3]!==void 0?arguments[3]:j,I=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(N.info("setNativeRange",k,j,O,q),!(k!=null&&(this.root.parentNode==null||k.parentNode==null||O.parentNode==null))){var D=document.getSelection();if(D!=null)if(k!=null){this.hasFocus()||this.root.focus();var U=(this.getNativeRange()||{}).native;if(U==null||I||k!==U.startContainer||j!==U.startOffset||O!==U.endContainer||q!==U.endOffset){k.tagName=="BR"&&(j=[].indexOf.call(k.parentNode.childNodes,k),k=k.parentNode),O.tagName=="BR"&&(q=[].indexOf.call(O.parentNode.childNodes,O),O=O.parentNode);var W=document.createRange();W.setStart(k,j),W.setEnd(O,q),D.removeAllRanges(),D.addRange(W)}}else D.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(k){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.default.sources.API;if(typeof j=="string"&&(O=j,j=!1),N.info("setRange",k),k!=null){var q=this.rangeToNative(k);this.setNativeRange.apply(this,w(q).concat([j]))}else this.setNativeRange(null);this.update(O)}},{key:"update",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y.default.sources.USER,j=this.lastRange,O=this.getRange(),q=s(O,2),I=q[0],D=q[1];if(this.lastRange=I,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,h.default)(j,this.lastRange)){var U;!this.composing&&D!=null&&D.native.collapsed&&D.start.node!==this.cursor.textNode&&this.cursor.restore();var W=[y.default.events.SELECTION_CHANGE,(0,d.default)(this.lastRange),(0,d.default)(j),k];if((U=this.emitter).emit.apply(U,[y.default.events.EDITOR_CHANGE].concat(W)),k!==y.default.sources.SILENT){var Y;(Y=this.emitter).emit.apply(Y,W)}}}}]),T}();function P(T,M){try{M.parentNode}catch{return!1}return M instanceof Text&&(M=M.parentNode),T.contains(M)}r.Range=E,r.default=A},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function y(x,_){for(var v=0;v<_.length;v++){var w=_[v];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(x,w.key,w)}}return function(x,_,v){return _&&y(x.prototype,_),v&&y(x,v),x}}(),a=function y(x,_,v){x===null&&(x=Function.prototype);var w=Object.getOwnPropertyDescriptor(x,_);if(w===void 0){var b=Object.getPrototypeOf(x);return b===null?void 0:y(b,_,v)}else{if("value"in w)return w.value;var N=w.get;return N===void 0?void 0:N.call(v)}},o=i(0),l=u(o);function u(y){return y&&y.__esModule?y:{default:y}}function d(y,x){if(!(y instanceof x))throw new TypeError("Cannot call a class as a function")}function p(y,x){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:y}function h(y,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);y.prototype=Object.create(x&&x.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(y,x):y.__proto__=x)}var m=function(y){h(x,y);function x(){return d(this,x),p(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return s(x,[{key:"insertInto",value:function(v,w){v.children.length===0?a(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertInto",this).call(this,v,w):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),x}(l.default.Embed);m.blotName="break",m.tagName="BR",r.default=m},function(n,r,i){var s=this&&this.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,m){h.__proto__=m}||function(h,m){for(var y in m)m.hasOwnProperty(y)&&(h[y]=m[y])};return function(h,m){p(h,m);function y(){this.constructor=h}h.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)}}();Object.defineProperty(r,"__esModule",{value:!0});var a=i(44),o=i(30),l=i(1),u=function(p){s(h,p);function h(m){var y=p.call(this,m)||this;return y.build(),y}return h.prototype.appendChild=function(m){this.insertBefore(m)},h.prototype.attach=function(){p.prototype.attach.call(this),this.children.forEach(function(m){m.attach()})},h.prototype.build=function(){var m=this;this.children=new a.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(y){try{var x=d(y);m.insertBefore(x,m.children.head||void 0)}catch(_){if(_ instanceof l.ParchmentError)return;throw _}})},h.prototype.deleteAt=function(m,y){if(m===0&&y===this.length())return this.remove();this.children.forEachAt(m,y,function(x,_,v){x.deleteAt(_,v)})},h.prototype.descendant=function(m,y){var x=this.children.find(y),_=x[0],v=x[1];return m.blotName==null&&m(_)||m.blotName!=null&&_ instanceof m?[_,v]:_ instanceof h?_.descendant(m,v):[null,-1]},h.prototype.descendants=function(m,y,x){y===void 0&&(y=0),x===void 0&&(x=Number.MAX_VALUE);var _=[],v=x;return this.children.forEachAt(y,x,function(w,b,N){(m.blotName==null&&m(w)||m.blotName!=null&&w instanceof m)&&_.push(w),w instanceof h&&(_=_.concat(w.descendants(m,b,v))),v-=N}),_},h.prototype.detach=function(){this.children.forEach(function(m){m.detach()}),p.prototype.detach.call(this)},h.prototype.formatAt=function(m,y,x,_){this.children.forEachAt(m,y,function(v,w,b){v.formatAt(w,b,x,_)})},h.prototype.insertAt=function(m,y,x){var _=this.children.find(m),v=_[0],w=_[1];if(v)v.insertAt(w,y,x);else{var b=x==null?l.create("text",y):l.create(y,x);this.appendChild(b)}},h.prototype.insertBefore=function(m,y){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(x){return m instanceof x}))throw new l.ParchmentError("Cannot insert "+m.statics.blotName+" into "+this.statics.blotName);m.insertInto(this,y)},h.prototype.length=function(){return this.children.reduce(function(m,y){return m+y.length()},0)},h.prototype.moveChildren=function(m,y){this.children.forEach(function(x){m.insertBefore(x,y)})},h.prototype.optimize=function(m){if(p.prototype.optimize.call(this,m),this.children.length===0)if(this.statics.defaultChild!=null){var y=l.create(this.statics.defaultChild);this.appendChild(y),y.optimize(m)}else this.remove()},h.prototype.path=function(m,y){y===void 0&&(y=!1);var x=this.children.find(m,y),_=x[0],v=x[1],w=[[this,m]];return _ instanceof h?w.concat(_.path(v,y)):(_!=null&&w.push([_,v]),w)},h.prototype.removeChild=function(m){this.children.remove(m)},h.prototype.replace=function(m){m instanceof h&&m.moveChildren(this),p.prototype.replace.call(this,m)},h.prototype.split=function(m,y){if(y===void 0&&(y=!1),!y){if(m===0)return this;if(m===this.length())return this.next}var x=this.clone();return this.parent.insertBefore(x,this.next),this.children.forEachAt(m,this.length(),function(_,v,w){_=_.split(v,y),x.appendChild(_)}),x},h.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},h.prototype.update=function(m,y){var x=this,_=[],v=[];m.forEach(function(w){w.target===x.domNode&&w.type==="childList"&&(_.push.apply(_,w.addedNodes),v.push.apply(v,w.removedNodes))}),v.forEach(function(w){if(!(w.parentNode!=null&&w.tagName!=="IFRAME"&&document.body.compareDocumentPosition(w)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var b=l.find(w);b!=null&&(b.domNode.parentNode==null||b.domNode.parentNode===x.domNode)&&b.detach()}}),_.filter(function(w){return w.parentNode==x.domNode}).sort(function(w,b){return w===b?0:w.compareDocumentPosition(b)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(w){var b=null;w.nextSibling!=null&&(b=l.find(w.nextSibling));var N=d(w);(N.next!=b||N.next==null)&&(N.parent!=null&&N.parent.removeChild(x),x.insertBefore(N,b||void 0))})},h}(o.default);function d(p){var h=l.find(p);if(h==null)try{h=l.create(p)}catch{h=l.create(l.Scope.INLINE),[].slice.call(p.childNodes).forEach(function(y){h.domNode.appendChild(y)}),p.parentNode&&p.parentNode.replaceChild(h.domNode,p),h.attach()}return h}r.default=u},function(n,r,i){var s=this&&this.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,m){h.__proto__=m}||function(h,m){for(var y in m)m.hasOwnProperty(y)&&(h[y]=m[y])};return function(h,m){p(h,m);function y(){this.constructor=h}h.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)}}();Object.defineProperty(r,"__esModule",{value:!0});var a=i(12),o=i(31),l=i(17),u=i(1),d=function(p){s(h,p);function h(m){var y=p.call(this,m)||this;return y.attributes=new o.default(y.domNode),y}return h.formats=function(m){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return m.tagName.toLowerCase()},h.prototype.format=function(m,y){var x=u.query(m);x instanceof a.default?this.attributes.attribute(x,y):y&&x!=null&&(m!==this.statics.blotName||this.formats()[m]!==y)&&this.replaceWith(m,y)},h.prototype.formats=function(){var m=this.attributes.values(),y=this.statics.formats(this.domNode);return y!=null&&(m[this.statics.blotName]=y),m},h.prototype.replaceWith=function(m,y){var x=p.prototype.replaceWith.call(this,m,y);return this.attributes.copy(x),x},h.prototype.update=function(m,y){var x=this;p.prototype.update.call(this,m,y),m.some(function(_){return _.target===x.domNode&&_.type==="attributes"})&&this.attributes.build()},h.prototype.wrap=function(m,y){var x=p.prototype.wrap.call(this,m,y);return x instanceof h&&x.statics.scope===this.statics.scope&&this.attributes.move(x),x},h}(l.default);r.default=d},function(n,r,i){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var h in p)p.hasOwnProperty(h)&&(d[h]=p[h])};return function(d,p){u(d,p);function h(){this.constructor=d}d.prototype=p===null?Object.create(p):(h.prototype=p.prototype,new h)}}();Object.defineProperty(r,"__esModule",{value:!0});var a=i(30),o=i(1),l=function(u){s(d,u);function d(){return u!==null&&u.apply(this,arguments)||this}return d.value=function(p){return!0},d.prototype.index=function(p,h){return this.domNode===p||this.domNode.compareDocumentPosition(p)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(h,1):-1},d.prototype.position=function(p,h){var m=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return p>0&&(m+=1),[this.parent.domNode,m]},d.prototype.value=function(){var p;return p={},p[this.statics.blotName]=this.statics.value(this.domNode)||!0,p},d.scope=o.Scope.INLINE_BLOT,d}(a.default);r.default=l},function(n,r,i){var s=i(11),a=i(3),o={attributes:{compose:function(u,d,p){typeof u!="object"&&(u={}),typeof d!="object"&&(d={});var h=a(!0,{},d);p||(h=Object.keys(h).reduce(function(y,x){return h[x]!=null&&(y[x]=h[x]),y},{}));for(var m in u)u[m]!==void 0&&d[m]===void 0&&(h[m]=u[m]);return Object.keys(h).length>0?h:void 0},diff:function(u,d){typeof u!="object"&&(u={}),typeof d!="object"&&(d={});var p=Object.keys(u).concat(Object.keys(d)).reduce(function(h,m){return s(u[m],d[m])||(h[m]=d[m]===void 0?null:d[m]),h},{});return Object.keys(p).length>0?p:void 0},transform:function(u,d,p){if(typeof u!="object")return d;if(typeof d=="object"){if(!p)return d;var h=Object.keys(d).reduce(function(m,y){return u[y]===void 0&&(m[y]=d[y]),m},{});return Object.keys(h).length>0?h:void 0}}},iterator:function(u){return new l(u)},length:function(u){return typeof u.delete=="number"?u.delete:typeof u.retain=="number"?u.retain:typeof u.insert=="string"?u.insert.length:1}};function l(u){this.ops=u,this.index=0,this.offset=0}l.prototype.hasNext=function(){return this.peekLength()<1/0},l.prototype.next=function(u){u||(u=1/0);var d=this.ops[this.index];if(d){var p=this.offset,h=o.length(d);if(u>=h-p?(u=h-p,this.index+=1,this.offset=0):this.offset+=u,typeof d.delete=="number")return{delete:u};var m={};return d.attributes&&(m.attributes=d.attributes),typeof d.retain=="number"?m.retain=u:typeof d.insert=="string"?m.insert=d.insert.substr(p,u):m.insert=d.insert,m}else return{retain:1/0}},l.prototype.peek=function(){return this.ops[this.index]},l.prototype.peekLength=function(){return this.ops[this.index]?o.length(this.ops[this.index])-this.offset:1/0},l.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},l.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var u=this.offset,d=this.index,p=this.next(),h=this.ops.slice(this.index);return this.offset=u,this.index=d,[p].concat(h)}else return[]},n.exports=o},function(n,r){var i=function(){function s(x,_){return _!=null&&x instanceof _}var a;try{a=Map}catch{a=function(){}}var o;try{o=Set}catch{o=function(){}}var l;try{l=Promise}catch{l=function(){}}function u(x,_,v,w,b){typeof _=="object"&&(v=_.depth,w=_.prototype,b=_.includeNonEnumerable,_=_.circular);var N=[],E=[],A=typeof Buffer<"u";typeof _>"u"&&(_=!0),typeof v>"u"&&(v=1/0);function P(T,M){if(T===null)return null;if(M===0)return T;var k,j;if(typeof T!="object")return T;if(s(T,a))k=new a;else if(s(T,o))k=new o;else if(s(T,l))k=new l(function(B,L){T.then(function(z){B(P(z,M-1))},function(z){L(P(z,M-1))})});else if(u.__isArray(T))k=[];else if(u.__isRegExp(T))k=new RegExp(T.source,y(T)),T.lastIndex&&(k.lastIndex=T.lastIndex);else if(u.__isDate(T))k=new Date(T.getTime());else{if(A&&Buffer.isBuffer(T))return Buffer.allocUnsafe?k=Buffer.allocUnsafe(T.length):k=new Buffer(T.length),T.copy(k),k;s(T,Error)?k=Object.create(T):typeof w>"u"?(j=Object.getPrototypeOf(T),k=Object.create(j)):(k=Object.create(w),j=w)}if(_){var O=N.indexOf(T);if(O!=-1)return E[O];N.push(T),E.push(k)}s(T,a)&&T.forEach(function(B,L){var z=P(L,M-1),K=P(B,M-1);k.set(z,K)}),s(T,o)&&T.forEach(function(B){var L=P(B,M-1);k.add(L)});for(var q in T){var I;j&&(I=Object.getOwnPropertyDescriptor(j,q)),!(I&&I.set==null)&&(k[q]=P(T[q],M-1))}if(Object.getOwnPropertySymbols)for(var D=Object.getOwnPropertySymbols(T),q=0;q<D.length;q++){var U=D[q],W=Object.getOwnPropertyDescriptor(T,U);W&&!W.enumerable&&!b||(k[U]=P(T[U],M-1),W.enumerable||Object.defineProperty(k,U,{enumerable:!1}))}if(b)for(var Y=Object.getOwnPropertyNames(T),q=0;q<Y.length;q++){var H=Y[q],W=Object.getOwnPropertyDescriptor(T,H);W&&W.enumerable||(k[H]=P(T[H],M-1),Object.defineProperty(k,H,{enumerable:!1}))}return k}return P(x,v)}u.clonePrototype=function(_){if(_===null)return null;var v=function(){};return v.prototype=_,new v};function d(x){return Object.prototype.toString.call(x)}u.__objToStr=d;function p(x){return typeof x=="object"&&d(x)==="[object Date]"}u.__isDate=p;function h(x){return typeof x=="object"&&d(x)==="[object Array]"}u.__isArray=h;function m(x){return typeof x=="object"&&d(x)==="[object RegExp]"}u.__isRegExp=m;function y(x){var _="";return x.global&&(_+="g"),x.ignoreCase&&(_+="i"),x.multiline&&(_+="m"),_}return u.__getRegExpFlags=y,u}();typeof n=="object"&&n.exports&&(n.exports=i)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function k(j,O){var q=[],I=!0,D=!1,U=void 0;try{for(var W=j[Symbol.iterator](),Y;!(I=(Y=W.next()).done)&&(q.push(Y.value),!(O&&q.length===O));I=!0);}catch(H){D=!0,U=H}finally{try{!I&&W.return&&W.return()}finally{if(D)throw U}}return q}return function(j,O){if(Array.isArray(j))return j;if(Symbol.iterator in Object(j))return k(j,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function k(j,O){for(var q=0;q<O.length;q++){var I=O[q];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(j,I.key,I)}}return function(j,O,q){return O&&k(j.prototype,O),q&&k(j,q),j}}(),o=function k(j,O,q){j===null&&(j=Function.prototype);var I=Object.getOwnPropertyDescriptor(j,O);if(I===void 0){var D=Object.getPrototypeOf(j);return D===null?void 0:k(D,O,q)}else{if("value"in I)return I.value;var U=I.get;return U===void 0?void 0:U.call(q)}},l=i(0),u=N(l),d=i(8),p=N(d),h=i(4),m=N(h),y=i(16),x=N(y),_=i(13),v=N(_),w=i(25),b=N(w);function N(k){return k&&k.__esModule?k:{default:k}}function E(k,j){if(!(k instanceof j))throw new TypeError("Cannot call a class as a function")}function A(k,j){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:k}function P(k,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);k.prototype=Object.create(j&&j.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(k,j):k.__proto__=j)}function T(k){return k instanceof m.default||k instanceof h.BlockEmbed}var M=function(k){P(j,k);function j(O,q){E(this,j);var I=A(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,O));return I.emitter=q.emitter,Array.isArray(q.whitelist)&&(I.whitelist=q.whitelist.reduce(function(D,U){return D[U]=!0,D},{})),I.domNode.addEventListener("DOMNodeInserted",function(){}),I.optimize(),I.enable(),I}return a(j,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(q,I){var D=this.line(q),U=s(D,2),W=U[0],Y=U[1],H=this.line(q+I),B=s(H,1),L=B[0];if(o(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"deleteAt",this).call(this,q,I),L!=null&&W!==L&&Y>0){if(W instanceof h.BlockEmbed||L instanceof h.BlockEmbed){this.optimize();return}if(W instanceof v.default){var z=W.newlineIndex(W.length(),!0);if(z>-1&&(W=W.split(z+1),W===L)){this.optimize();return}}else if(L instanceof v.default){var K=L.newlineIndex(0);K>-1&&L.split(K+1)}var J=L.children.head instanceof x.default?null:L.children.head;W.moveChildren(L,J),W.remove()}this.optimize()}},{key:"enable",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",q)}},{key:"formatAt",value:function(q,I,D,U){this.whitelist!=null&&!this.whitelist[D]||(o(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"formatAt",this).call(this,q,I,D,U),this.optimize())}},{key:"insertAt",value:function(q,I,D){if(!(D!=null&&this.whitelist!=null&&!this.whitelist[I])){if(q>=this.length())if(D==null||u.default.query(I,u.default.Scope.BLOCK)==null){var U=u.default.create(this.statics.defaultChild);this.appendChild(U),D==null&&I.endsWith(`
`)&&(I=I.slice(0,-1)),U.insertAt(0,I,D)}else{var W=u.default.create(I,D);this.appendChild(W)}else o(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"insertAt",this).call(this,q,I,D);this.optimize()}}},{key:"insertBefore",value:function(q,I){if(q.statics.scope===u.default.Scope.INLINE_BLOT){var D=u.default.create(this.statics.defaultChild);D.appendChild(q),q=D}o(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"insertBefore",this).call(this,q,I)}},{key:"leaf",value:function(q){return this.path(q).pop()||[null,-1]}},{key:"line",value:function(q){return q===this.length()?this.line(q-1):this.descendant(T,q)}},{key:"lines",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,D=function U(W,Y,H){var B=[],L=H;return W.children.forEachAt(Y,H,function(z,K,J){T(z)?B.push(z):z instanceof u.default.Container&&(B=B.concat(U(z,K,L))),L-=J}),B};return D(this,q,I)}},{key:"optimize",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(o(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"optimize",this).call(this,q,I),q.length>0&&this.emitter.emit(p.default.events.SCROLL_OPTIMIZE,q,I))}},{key:"path",value:function(q){return o(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"path",this).call(this,q).slice(1)}},{key:"update",value:function(q){if(this.batch!==!0){var I=p.default.sources.USER;typeof q=="string"&&(I=q),Array.isArray(q)||(q=this.observer.takeRecords()),q.length>0&&this.emitter.emit(p.default.events.SCROLL_BEFORE_UPDATE,I,q),o(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"update",this).call(this,q.concat([])),q.length>0&&this.emitter.emit(p.default.events.SCROLL_UPDATE,I,q)}}}]),j}(u.default.Scroll);M.blotName="scroll",M.className="ql-editor",M.tagName="DIV",M.defaultChild="block",M.allowedChildren=[m.default,h.BlockEmbed,b.default],r.default=M},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SHORTKEY=r.default=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},a=function(){function X(G,te){var re=[],Q=!0,se=!1,de=void 0;try{for(var le=G[Symbol.iterator](),ue;!(Q=(ue=le.next()).done)&&(re.push(ue.value),!(te&&re.length===te));Q=!0);}catch(he){se=!0,de=he}finally{try{!Q&&le.return&&le.return()}finally{if(se)throw de}}return re}return function(G,te){if(Array.isArray(G))return G;if(Symbol.iterator in Object(G))return X(G,te);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function X(G,te){for(var re=0;re<te.length;re++){var Q=te[re];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(G,Q.key,Q)}}return function(G,te,re){return te&&X(G.prototype,te),re&&X(G,re),G}}(),l=i(21),u=k(l),d=i(11),p=k(d),h=i(3),m=k(h),y=i(2),x=k(y),_=i(20),v=k(_),w=i(0),b=k(w),N=i(5),E=k(N),A=i(10),P=k(A),T=i(9),M=k(T);function k(X){return X&&X.__esModule?X:{default:X}}function j(X,G,te){return G in X?Object.defineProperty(X,G,{value:te,enumerable:!0,configurable:!0,writable:!0}):X[G]=te,X}function O(X,G){if(!(X instanceof G))throw new TypeError("Cannot call a class as a function")}function q(X,G){if(!X)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G&&(typeof G=="object"||typeof G=="function")?G:X}function I(X,G){if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof G);X.prototype=Object.create(G&&G.prototype,{constructor:{value:X,enumerable:!1,writable:!0,configurable:!0}}),G&&(Object.setPrototypeOf?Object.setPrototypeOf(X,G):X.__proto__=G)}var D=(0,P.default)("quill:keyboard"),U=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",W=function(X){I(G,X),o(G,null,[{key:"match",value:function(re,Q){return Q=ne(Q),["altKey","ctrlKey","metaKey","shiftKey"].some(function(se){return!!Q[se]!==re[se]&&Q[se]!==null})?!1:Q.key===(re.which||re.keyCode)}}]);function G(te,re){O(this,G);var Q=q(this,(G.__proto__||Object.getPrototypeOf(G)).call(this,te,re));return Q.bindings={},Object.keys(Q.options.bindings).forEach(function(se){se==="list autofill"&&te.scroll.whitelist!=null&&!te.scroll.whitelist.list||Q.options.bindings[se]&&Q.addBinding(Q.options.bindings[se])}),Q.addBinding({key:G.keys.ENTER,shiftKey:null},z),Q.addBinding({key:G.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(Q.addBinding({key:G.keys.BACKSPACE},{collapsed:!0},H),Q.addBinding({key:G.keys.DELETE},{collapsed:!0},B)):(Q.addBinding({key:G.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},H),Q.addBinding({key:G.keys.DELETE},{collapsed:!0,suffix:/^.?$/},B)),Q.addBinding({key:G.keys.BACKSPACE},{collapsed:!1},L),Q.addBinding({key:G.keys.DELETE},{collapsed:!1},L),Q.addBinding({key:G.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},H),Q.listen(),Q}return o(G,[{key:"addBinding",value:function(re){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},de=ne(re);if(de==null||de.key==null)return D.warn("Attempted to add invalid keyboard binding",de);typeof Q=="function"&&(Q={handler:Q}),typeof se=="function"&&(se={handler:se}),de=(0,m.default)(de,Q,se),this.bindings[de.key]=this.bindings[de.key]||[],this.bindings[de.key].push(de)}},{key:"listen",value:function(){var re=this;this.quill.root.addEventListener("keydown",function(Q){if(!Q.defaultPrevented){var se=Q.which||Q.keyCode,de=(re.bindings[se]||[]).filter(function(Ve){return G.match(Q,Ve)});if(de.length!==0){var le=re.quill.getSelection();if(!(le==null||!re.quill.hasFocus())){var ue=re.quill.getLine(le.index),he=a(ue,2),qe=he[0],we=he[1],ae=re.quill.getLeaf(le.index),me=a(ae,2),_e=me[0],Ee=me[1],xe=le.length===0?[_e,Ee]:re.quill.getLeaf(le.index+le.length),Oe=a(xe,2),Te=Oe[0],Be=Oe[1],Et=_e instanceof b.default.Text?_e.value().slice(0,Ee):"",bt=Te instanceof b.default.Text?Te.value().slice(Be):"",He={collapsed:le.length===0,empty:le.length===0&&qe.length()<=1,format:re.quill.getFormat(le),offset:we,prefix:Et,suffix:bt},wn=de.some(function(Ve){if(Ve.collapsed!=null&&Ve.collapsed!==He.collapsed||Ve.empty!=null&&Ve.empty!==He.empty||Ve.offset!=null&&Ve.offset!==He.offset)return!1;if(Array.isArray(Ve.format)){if(Ve.format.every(function(dt){return He.format[dt]==null}))return!1}else if(s(Ve.format)==="object"&&!Object.keys(Ve.format).every(function(dt){return Ve.format[dt]===!0?He.format[dt]!=null:Ve.format[dt]===!1?He.format[dt]==null:(0,p.default)(Ve.format[dt],He.format[dt])}))return!1;return Ve.prefix!=null&&!Ve.prefix.test(He.prefix)||Ve.suffix!=null&&!Ve.suffix.test(He.suffix)?!1:Ve.handler.call(re,le,He)!==!0});wn&&Q.preventDefault()}}}})}}]),G}(M.default);W.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},W.DEFAULTS={bindings:{bold:J("bold"),italic:J("italic"),underline:J("underline"),indent:{key:W.keys.TAB,format:["blockquote","indent","list"],handler:function(G,te){if(te.collapsed&&te.offset!==0)return!0;this.quill.format("indent","+1",E.default.sources.USER)}},outdent:{key:W.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(G,te){if(te.collapsed&&te.offset!==0)return!0;this.quill.format("indent","-1",E.default.sources.USER)}},"outdent backspace":{key:W.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(G,te){te.format.indent!=null?this.quill.format("indent","-1",E.default.sources.USER):te.format.list!=null&&this.quill.format("list",!1,E.default.sources.USER)}},"indent code-block":K(!0),"outdent code-block":K(!1),"remove tab":{key:W.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(G){this.quill.deleteText(G.index-1,1,E.default.sources.USER)}},tab:{key:W.keys.TAB,handler:function(G){this.quill.history.cutoff();var te=new x.default().retain(G.index).delete(G.length).insert("	");this.quill.updateContents(te,E.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(G.index+1,E.default.sources.SILENT)}},"list empty enter":{key:W.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(G,te){this.quill.format("list",!1,E.default.sources.USER),te.format.indent&&this.quill.format("indent",!1,E.default.sources.USER)}},"checklist enter":{key:W.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(G){var te=this.quill.getLine(G.index),re=a(te,2),Q=re[0],se=re[1],de=(0,m.default)({},Q.formats(),{list:"checked"}),le=new x.default().retain(G.index).insert(`
`,de).retain(Q.length()-se-1).retain(1,{list:"unchecked"});this.quill.updateContents(le,E.default.sources.USER),this.quill.setSelection(G.index+1,E.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:W.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(G,te){var re=this.quill.getLine(G.index),Q=a(re,2),se=Q[0],de=Q[1],le=new x.default().retain(G.index).insert(`
`,te.format).retain(se.length()-de-1).retain(1,{header:null});this.quill.updateContents(le,E.default.sources.USER),this.quill.setSelection(G.index+1,E.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(G,te){var re=te.prefix.length,Q=this.quill.getLine(G.index),se=a(Q,2),de=se[0],le=se[1];if(le>re)return!0;var ue=void 0;switch(te.prefix.trim()){case"[]":case"[ ]":ue="unchecked";break;case"[x]":ue="checked";break;case"-":case"*":ue="bullet";break;default:ue="ordered"}this.quill.insertText(G.index," ",E.default.sources.USER),this.quill.history.cutoff();var he=new x.default().retain(G.index-le).delete(re+1).retain(de.length()-2-le).retain(1,{list:ue});this.quill.updateContents(he,E.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(G.index-re,E.default.sources.SILENT)}},"code exit":{key:W.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(G){var te=this.quill.getLine(G.index),re=a(te,2),Q=re[0],se=re[1],de=new x.default().retain(G.index+Q.length()-se-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(de,E.default.sources.USER)}},"embed left":Y(W.keys.LEFT,!1),"embed left shift":Y(W.keys.LEFT,!0),"embed right":Y(W.keys.RIGHT,!1),"embed right shift":Y(W.keys.RIGHT,!0)}};function Y(X,G){var te,re=X===W.keys.LEFT?"prefix":"suffix";return te={key:X,shiftKey:G,altKey:null},j(te,re,/^$/),j(te,"handler",function(se){var de=se.index;X===W.keys.RIGHT&&(de+=se.length+1);var le=this.quill.getLeaf(de),ue=a(le,1),he=ue[0];return he instanceof b.default.Embed?(X===W.keys.LEFT?G?this.quill.setSelection(se.index-1,se.length+1,E.default.sources.USER):this.quill.setSelection(se.index-1,E.default.sources.USER):G?this.quill.setSelection(se.index,se.length+1,E.default.sources.USER):this.quill.setSelection(se.index+se.length+1,E.default.sources.USER),!1):!0}),te}function H(X,G){if(!(X.index===0||this.quill.getLength()<=1)){var te=this.quill.getLine(X.index),re=a(te,1),Q=re[0],se={};if(G.offset===0){var de=this.quill.getLine(X.index-1),le=a(de,1),ue=le[0];if(ue!=null&&ue.length()>1){var he=Q.formats(),qe=this.quill.getFormat(X.index-1,1);se=v.default.attributes.diff(he,qe)||{}}}var we=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(G.prefix)?2:1;this.quill.deleteText(X.index-we,we,E.default.sources.USER),Object.keys(se).length>0&&this.quill.formatLine(X.index-we,we,se,E.default.sources.USER),this.quill.focus()}}function B(X,G){var te=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(G.suffix)?2:1;if(!(X.index>=this.quill.getLength()-te)){var re={},Q=0,se=this.quill.getLine(X.index),de=a(se,1),le=de[0];if(G.offset>=le.length()-1){var ue=this.quill.getLine(X.index+1),he=a(ue,1),qe=he[0];if(qe){var we=le.formats(),ae=this.quill.getFormat(X.index,1);re=v.default.attributes.diff(we,ae)||{},Q=qe.length()}}this.quill.deleteText(X.index,te,E.default.sources.USER),Object.keys(re).length>0&&this.quill.formatLine(X.index+Q-1,te,re,E.default.sources.USER)}}function L(X){var G=this.quill.getLines(X),te={};if(G.length>1){var re=G[0].formats(),Q=G[G.length-1].formats();te=v.default.attributes.diff(Q,re)||{}}this.quill.deleteText(X,E.default.sources.USER),Object.keys(te).length>0&&this.quill.formatLine(X.index,1,te,E.default.sources.USER),this.quill.setSelection(X.index,E.default.sources.SILENT),this.quill.focus()}function z(X,G){var te=this;X.length>0&&this.quill.scroll.deleteAt(X.index,X.length);var re=Object.keys(G.format).reduce(function(Q,se){return b.default.query(se,b.default.Scope.BLOCK)&&!Array.isArray(G.format[se])&&(Q[se]=G.format[se]),Q},{});this.quill.insertText(X.index,`
`,re,E.default.sources.USER),this.quill.setSelection(X.index+1,E.default.sources.SILENT),this.quill.focus(),Object.keys(G.format).forEach(function(Q){re[Q]==null&&(Array.isArray(G.format[Q])||Q!=="link"&&te.quill.format(Q,G.format[Q],E.default.sources.USER))})}function K(X){return{key:W.keys.TAB,shiftKey:!X,format:{"code-block":!0},handler:function(te){var re=b.default.query("code-block"),Q=te.index,se=te.length,de=this.quill.scroll.descendant(re,Q),le=a(de,2),ue=le[0],he=le[1];if(ue!=null){var qe=this.quill.getIndex(ue),we=ue.newlineIndex(he,!0)+1,ae=ue.newlineIndex(qe+he+se),me=ue.domNode.textContent.slice(we,ae).split(`
`);he=0,me.forEach(function(_e,Ee){X?(ue.insertAt(we+he,re.TAB),he+=re.TAB.length,Ee===0?Q+=re.TAB.length:se+=re.TAB.length):_e.startsWith(re.TAB)&&(ue.deleteAt(we+he,re.TAB.length),he-=re.TAB.length,Ee===0?Q-=re.TAB.length:se-=re.TAB.length),he+=_e.length+1}),this.quill.update(E.default.sources.USER),this.quill.setSelection(Q,se,E.default.sources.SILENT)}}}}function J(X){return{key:X[0].toUpperCase(),shortKey:!0,handler:function(te,re){this.quill.format(X,!re.format[X],E.default.sources.USER)}}}function ne(X){if(typeof X=="string"||typeof X=="number")return ne({key:X});if((typeof X>"u"?"undefined":s(X))==="object"&&(X=(0,u.default)(X,!1)),typeof X.key=="string")if(W.keys[X.key.toUpperCase()]!=null)X.key=W.keys[X.key.toUpperCase()];else if(X.key.length===1)X.key=X.key.toUpperCase().charCodeAt(0);else return null;return X.shortKey&&(X[U]=X.shortKey,delete X.shortKey),X}r.default=W,r.SHORTKEY=U},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function v(w,b){var N=[],E=!0,A=!1,P=void 0;try{for(var T=w[Symbol.iterator](),M;!(E=(M=T.next()).done)&&(N.push(M.value),!(b&&N.length===b));E=!0);}catch(k){A=!0,P=k}finally{try{!E&&T.return&&T.return()}finally{if(A)throw P}}return N}return function(w,b){if(Array.isArray(w))return w;if(Symbol.iterator in Object(w))return v(w,b);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function v(w,b,N){w===null&&(w=Function.prototype);var E=Object.getOwnPropertyDescriptor(w,b);if(E===void 0){var A=Object.getPrototypeOf(w);return A===null?void 0:v(A,b,N)}else{if("value"in E)return E.value;var P=E.get;return P===void 0?void 0:P.call(N)}},o=function(){function v(w,b){for(var N=0;N<b.length;N++){var E=b[N];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(w,E.key,E)}}return function(w,b,N){return b&&v(w.prototype,b),N&&v(w,N),w}}(),l=i(0),u=h(l),d=i(7),p=h(d);function h(v){return v&&v.__esModule?v:{default:v}}function m(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function y(v,w){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:v}function x(v,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);v.prototype=Object.create(w&&w.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(v,w):v.__proto__=w)}var _=function(v){x(w,v),o(w,null,[{key:"value",value:function(){}}]);function w(b,N){m(this,w);var E=y(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,b));return E.selection=N,E.textNode=document.createTextNode(w.CONTENTS),E.domNode.appendChild(E.textNode),E._length=0,E}return o(w,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(N,E){if(this._length!==0)return a(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,N,E);for(var A=this,P=0;A!=null&&A.statics.scope!==u.default.Scope.BLOCK_BLOT;)P+=A.offset(A.parent),A=A.parent;A!=null&&(this._length=w.CONTENTS.length,A.optimize(),A.formatAt(P,w.CONTENTS.length,N,E),this._length=0)}},{key:"index",value:function(N,E){return N===this.textNode?0:a(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"index",this).call(this,N,E)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){a(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var N=this.textNode,E=this.selection.getNativeRange(),A=void 0,P=void 0,T=void 0;if(E!=null&&E.start.node===N&&E.end.node===N){var M=[N,E.start.offset,E.end.offset];A=M[0],P=M[1],T=M[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==w.CONTENTS){var k=this.textNode.data.split(w.CONTENTS).join("");this.next instanceof p.default?(A=this.next.domNode,this.next.insertAt(0,k),this.textNode.data=w.CONTENTS):(this.textNode.data=k,this.parent.insertBefore(u.default.create(this.textNode),this),this.textNode=document.createTextNode(w.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),P!=null){var j=[P,T].map(function(q){return Math.max(0,Math.min(A.data.length,q-1))}),O=s(j,2);return P=O[0],T=O[1],{startNode:A,startOffset:P,endNode:A,endOffset:T}}}}},{key:"update",value:function(N,E){var A=this;if(N.some(function(T){return T.type==="characterData"&&T.target===A.textNode})){var P=this.restore();P&&(E.range=P)}}},{key:"value",value:function(){return""}}]),w}(u.default.Embed);_.blotName="cursor",_.className="ql-cursor",_.tagName="span",_.CONTENTS="\uFEFF",r.default=_},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(0),a=u(s),o=i(4),l=u(o);function u(y){return y&&y.__esModule?y:{default:y}}function d(y,x){if(!(y instanceof x))throw new TypeError("Cannot call a class as a function")}function p(y,x){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:y}function h(y,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);y.prototype=Object.create(x&&x.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(y,x):y.__proto__=x)}var m=function(y){h(x,y);function x(){return d(this,x),p(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return x}(a.default.Container);m.allowedChildren=[l.default,o.BlockEmbed,m],r.default=m},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.ColorStyle=r.ColorClass=r.ColorAttributor=void 0;var s=function(){function _(v,w){for(var b=0;b<w.length;b++){var N=w[b];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(v,N.key,N)}}return function(v,w,b){return w&&_(v.prototype,w),b&&_(v,b),v}}(),a=function _(v,w,b){v===null&&(v=Function.prototype);var N=Object.getOwnPropertyDescriptor(v,w);if(N===void 0){var E=Object.getPrototypeOf(v);return E===null?void 0:_(E,w,b)}else{if("value"in N)return N.value;var A=N.get;return A===void 0?void 0:A.call(b)}},o=i(0),l=u(o);function u(_){return _&&_.__esModule?_:{default:_}}function d(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function p(_,v){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:_}function h(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(_,v):_.__proto__=v)}var m=function(_){h(v,_);function v(){return d(this,v),p(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return s(v,[{key:"value",value:function(b){var N=a(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"value",this).call(this,b);return N.startsWith("rgb(")?(N=N.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+N.split(",").map(function(E){return("00"+parseInt(E).toString(16)).slice(-2)}).join("")):N}}]),v}(l.default.Attributor.Style),y=new l.default.Attributor.Class("color","ql-color",{scope:l.default.Scope.INLINE}),x=new m("color","color",{scope:l.default.Scope.INLINE});r.ColorAttributor=m,r.ColorClass=y,r.ColorStyle=x},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitize=r.default=void 0;var s=function(){function x(_,v){for(var w=0;w<v.length;w++){var b=v[w];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(_,b.key,b)}}return function(_,v,w){return v&&x(_.prototype,v),w&&x(_,w),_}}(),a=function x(_,v,w){_===null&&(_=Function.prototype);var b=Object.getOwnPropertyDescriptor(_,v);if(b===void 0){var N=Object.getPrototypeOf(_);return N===null?void 0:x(N,v,w)}else{if("value"in b)return b.value;var E=b.get;return E===void 0?void 0:E.call(w)}},o=i(6),l=u(o);function u(x){return x&&x.__esModule?x:{default:x}}function d(x,_){if(!(x instanceof _))throw new TypeError("Cannot call a class as a function")}function p(x,_){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:x}function h(x,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);x.prototype=Object.create(_&&_.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(x,_):x.__proto__=_)}var m=function(x){h(_,x);function _(){return d(this,_),p(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return s(_,[{key:"format",value:function(w,b){if(w!==this.statics.blotName||!b)return a(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"format",this).call(this,w,b);b=this.constructor.sanitize(b),this.domNode.setAttribute("href",b)}}],[{key:"create",value:function(w){var b=a(_.__proto__||Object.getPrototypeOf(_),"create",this).call(this,w);return w=this.sanitize(w),b.setAttribute("href",w),b.setAttribute("rel","noopener noreferrer"),b.setAttribute("target","_blank"),b}},{key:"formats",value:function(w){return w.getAttribute("href")}},{key:"sanitize",value:function(w){return y(w,this.PROTOCOL_WHITELIST)?w:this.SANITIZED_URL}}]),_}(l.default);m.blotName="link",m.tagName="A",m.SANITIZED_URL="about:blank",m.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function y(x,_){var v=document.createElement("a");v.href=x;var w=v.href.slice(0,v.href.indexOf(":"));return _.indexOf(w)>-1}r.default=m,r.sanitize=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},a=function(){function _(v,w){for(var b=0;b<w.length;b++){var N=w[b];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(v,N.key,N)}}return function(v,w,b){return w&&_(v.prototype,w),b&&_(v,b),v}}(),o=i(23),l=p(o),u=i(107),d=p(u);function p(_){return _&&_.__esModule?_:{default:_}}function h(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}var m=0;function y(_,v){_.setAttribute(v,_.getAttribute(v)!=="true")}var x=function(){function _(v){var w=this;h(this,_),this.select=v,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){w.togglePicker()}),this.label.addEventListener("keydown",function(b){switch(b.keyCode){case l.default.keys.ENTER:w.togglePicker();break;case l.default.keys.ESCAPE:w.escape(),b.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return a(_,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),y(this.label,"aria-expanded"),y(this.options,"aria-hidden")}},{key:"buildItem",value:function(w){var b=this,N=document.createElement("span");return N.tabIndex="0",N.setAttribute("role","button"),N.classList.add("ql-picker-item"),w.hasAttribute("value")&&N.setAttribute("data-value",w.getAttribute("value")),w.textContent&&N.setAttribute("data-label",w.textContent),N.addEventListener("click",function(){b.selectItem(N,!0)}),N.addEventListener("keydown",function(E){switch(E.keyCode){case l.default.keys.ENTER:b.selectItem(N,!0),E.preventDefault();break;case l.default.keys.ESCAPE:b.escape(),E.preventDefault();break}}),N}},{key:"buildLabel",value:function(){var w=document.createElement("span");return w.classList.add("ql-picker-label"),w.innerHTML=d.default,w.tabIndex="0",w.setAttribute("role","button"),w.setAttribute("aria-expanded","false"),this.container.appendChild(w),w}},{key:"buildOptions",value:function(){var w=this,b=document.createElement("span");b.classList.add("ql-picker-options"),b.setAttribute("aria-hidden","true"),b.tabIndex="-1",b.id="ql-picker-options-"+m,m+=1,this.label.setAttribute("aria-controls",b.id),this.options=b,[].slice.call(this.select.options).forEach(function(N){var E=w.buildItem(N);b.appendChild(E),N.selected===!0&&w.selectItem(E)}),this.container.appendChild(b)}},{key:"buildPicker",value:function(){var w=this;[].slice.call(this.select.attributes).forEach(function(b){w.container.setAttribute(b.name,b.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var w=this;this.close(),setTimeout(function(){return w.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(w){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,N=this.container.querySelector(".ql-selected");if(w!==N&&(N!=null&&N.classList.remove("ql-selected"),w!=null&&(w.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(w.parentNode.children,w),w.hasAttribute("data-value")?this.label.setAttribute("data-value",w.getAttribute("data-value")):this.label.removeAttribute("data-value"),w.hasAttribute("data-label")?this.label.setAttribute("data-label",w.getAttribute("data-label")):this.label.removeAttribute("data-label"),b))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":s(Event))==="object"){var E=document.createEvent("Event");E.initEvent("change",!0,!0),this.select.dispatchEvent(E)}this.close()}}},{key:"update",value:function(){var w=void 0;if(this.select.selectedIndex>-1){var b=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];w=this.select.options[this.select.selectedIndex],this.selectItem(b)}else this.selectItem(null);var N=w!=null&&w!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",N)}}]),_}();r.default=x},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(0),a=D(s),o=i(5),l=D(o),u=i(4),d=D(u),p=i(16),h=D(p),m=i(25),y=D(m),x=i(24),_=D(x),v=i(35),w=D(v),b=i(6),N=D(b),E=i(22),A=D(E),P=i(7),T=D(P),M=i(55),k=D(M),j=i(42),O=D(j),q=i(23),I=D(q);function D(U){return U&&U.__esModule?U:{default:U}}l.default.register({"blots/block":d.default,"blots/block/embed":u.BlockEmbed,"blots/break":h.default,"blots/container":y.default,"blots/cursor":_.default,"blots/embed":w.default,"blots/inline":N.default,"blots/scroll":A.default,"blots/text":T.default,"modules/clipboard":k.default,"modules/history":O.default,"modules/keyboard":I.default}),a.default.register(d.default,h.default,_.default,N.default,A.default,T.default),r.default=l.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(1),a=function(){function o(l){this.domNode=l,this.domNode[s.DATA_KEY]={blot:this}}return Object.defineProperty(o.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),o.create=function(l){if(this.tagName==null)throw new s.ParchmentError("Blot definition missing tagName");var u;return Array.isArray(this.tagName)?(typeof l=="string"&&(l=l.toUpperCase(),parseInt(l).toString()===l&&(l=parseInt(l))),typeof l=="number"?u=document.createElement(this.tagName[l-1]):this.tagName.indexOf(l)>-1?u=document.createElement(l):u=document.createElement(this.tagName[0])):u=document.createElement(this.tagName),this.className&&u.classList.add(this.className),u},o.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},o.prototype.clone=function(){var l=this.domNode.cloneNode(!1);return s.create(l)},o.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[s.DATA_KEY]},o.prototype.deleteAt=function(l,u){var d=this.isolate(l,u);d.remove()},o.prototype.formatAt=function(l,u,d,p){var h=this.isolate(l,u);if(s.query(d,s.Scope.BLOT)!=null&&p)h.wrap(d,p);else if(s.query(d,s.Scope.ATTRIBUTE)!=null){var m=s.create(this.statics.scope);h.wrap(m),m.format(d,p)}},o.prototype.insertAt=function(l,u,d){var p=d==null?s.create("text",u):s.create(u,d),h=this.split(l);this.parent.insertBefore(p,h)},o.prototype.insertInto=function(l,u){u===void 0&&(u=null),this.parent!=null&&this.parent.children.remove(this);var d=null;l.children.insertBefore(this,u),u!=null&&(d=u.domNode),(this.domNode.parentNode!=l.domNode||this.domNode.nextSibling!=d)&&l.domNode.insertBefore(this.domNode,d),this.parent=l,this.attach()},o.prototype.isolate=function(l,u){var d=this.split(l);return d.split(u),d},o.prototype.length=function(){return 1},o.prototype.offset=function(l){return l===void 0&&(l=this.parent),this.parent==null||this==l?0:this.parent.children.offset(this)+this.parent.offset(l)},o.prototype.optimize=function(l){this.domNode[s.DATA_KEY]!=null&&delete this.domNode[s.DATA_KEY].mutations},o.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},o.prototype.replace=function(l){l.parent!=null&&(l.parent.insertBefore(this,l.next),l.remove())},o.prototype.replaceWith=function(l,u){var d=typeof l=="string"?s.create(l,u):l;return d.replace(this),d},o.prototype.split=function(l,u){return l===0?this:this.next},o.prototype.update=function(l,u){},o.prototype.wrap=function(l,u){var d=typeof l=="string"?s.create(l,u):l;return this.parent!=null&&this.parent.insertBefore(d,this.next),d.appendChild(this),d},o.blotName="abstract",o}();r.default=a},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(12),a=i(32),o=i(33),l=i(1),u=function(){function d(p){this.attributes={},this.domNode=p,this.build()}return d.prototype.attribute=function(p,h){h?p.add(this.domNode,h)&&(p.value(this.domNode)!=null?this.attributes[p.attrName]=p:delete this.attributes[p.attrName]):(p.remove(this.domNode),delete this.attributes[p.attrName])},d.prototype.build=function(){var p=this;this.attributes={};var h=s.default.keys(this.domNode),m=a.default.keys(this.domNode),y=o.default.keys(this.domNode);h.concat(m).concat(y).forEach(function(x){var _=l.query(x,l.Scope.ATTRIBUTE);_ instanceof s.default&&(p.attributes[_.attrName]=_)})},d.prototype.copy=function(p){var h=this;Object.keys(this.attributes).forEach(function(m){var y=h.attributes[m].value(h.domNode);p.format(m,y)})},d.prototype.move=function(p){var h=this;this.copy(p),Object.keys(this.attributes).forEach(function(m){h.attributes[m].remove(h.domNode)}),this.attributes={}},d.prototype.values=function(){var p=this;return Object.keys(this.attributes).reduce(function(h,m){return h[m]=p.attributes[m].value(p.domNode),h},{})},d}();r.default=u},function(n,r,i){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var h in p)p.hasOwnProperty(h)&&(d[h]=p[h])};return function(d,p){u(d,p);function h(){this.constructor=d}d.prototype=p===null?Object.create(p):(h.prototype=p.prototype,new h)}}();Object.defineProperty(r,"__esModule",{value:!0});var a=i(12);function o(u,d){var p=u.getAttribute("class")||"";return p.split(/\s+/).filter(function(h){return h.indexOf(d+"-")===0})}var l=function(u){s(d,u);function d(){return u!==null&&u.apply(this,arguments)||this}return d.keys=function(p){return(p.getAttribute("class")||"").split(/\s+/).map(function(h){return h.split("-").slice(0,-1).join("-")})},d.prototype.add=function(p,h){return this.canAdd(p,h)?(this.remove(p),p.classList.add(this.keyName+"-"+h),!0):!1},d.prototype.remove=function(p){var h=o(p,this.keyName);h.forEach(function(m){p.classList.remove(m)}),p.classList.length===0&&p.removeAttribute("class")},d.prototype.value=function(p){var h=o(p,this.keyName)[0]||"",m=h.slice(this.keyName.length+1);return this.canAdd(p,m)?m:""},d}(a.default);r.default=l},function(n,r,i){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var h in p)p.hasOwnProperty(h)&&(d[h]=p[h])};return function(d,p){u(d,p);function h(){this.constructor=d}d.prototype=p===null?Object.create(p):(h.prototype=p.prototype,new h)}}();Object.defineProperty(r,"__esModule",{value:!0});var a=i(12);function o(u){var d=u.split("-"),p=d.slice(1).map(function(h){return h[0].toUpperCase()+h.slice(1)}).join("");return d[0]+p}var l=function(u){s(d,u);function d(){return u!==null&&u.apply(this,arguments)||this}return d.keys=function(p){return(p.getAttribute("style")||"").split(";").map(function(h){var m=h.split(":");return m[0].trim()})},d.prototype.add=function(p,h){return this.canAdd(p,h)?(p.style[o(this.keyName)]=h,!0):!1},d.prototype.remove=function(p){p.style[o(this.keyName)]="",p.getAttribute("style")||p.removeAttribute("style")},d.prototype.value=function(p){var h=p.style[o(this.keyName)];return this.canAdd(p,h)?h:""},d}(a.default);r.default=l},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function l(u,d){for(var p=0;p<d.length;p++){var h=d[p];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(u,h.key,h)}}return function(u,d,p){return d&&l(u.prototype,d),p&&l(u,p),u}}();function a(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}var o=function(){function l(u,d){a(this,l),this.quill=u,this.options=d,this.modules={}}return s(l,[{key:"init",value:function(){var d=this;Object.keys(this.options.modules).forEach(function(p){d.modules[p]==null&&d.addModule(p)})}},{key:"addModule",value:function(d){var p=this.quill.constructor.import("modules/"+d);return this.modules[d]=new p(this.quill,this.options.modules[d]||{}),this.modules[d]}}]),l}();o.DEFAULTS={modules:{}},o.themes={default:o},r.default=o},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function v(w,b){for(var N=0;N<b.length;N++){var E=b[N];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(w,E.key,E)}}return function(w,b,N){return b&&v(w.prototype,b),N&&v(w,N),w}}(),a=function v(w,b,N){w===null&&(w=Function.prototype);var E=Object.getOwnPropertyDescriptor(w,b);if(E===void 0){var A=Object.getPrototypeOf(w);return A===null?void 0:v(A,b,N)}else{if("value"in E)return E.value;var P=E.get;return P===void 0?void 0:P.call(N)}},o=i(0),l=p(o),u=i(7),d=p(u);function p(v){return v&&v.__esModule?v:{default:v}}function h(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function m(v,w){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:v}function y(v,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);v.prototype=Object.create(w&&w.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(v,w):v.__proto__=w)}var x="\uFEFF",_=function(v){y(w,v);function w(b){h(this,w);var N=m(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,b));return N.contentNode=document.createElement("span"),N.contentNode.setAttribute("contenteditable",!1),[].slice.call(N.domNode.childNodes).forEach(function(E){N.contentNode.appendChild(E)}),N.leftGuard=document.createTextNode(x),N.rightGuard=document.createTextNode(x),N.domNode.appendChild(N.leftGuard),N.domNode.appendChild(N.contentNode),N.domNode.appendChild(N.rightGuard),N}return s(w,[{key:"index",value:function(N,E){return N===this.leftGuard?0:N===this.rightGuard?1:a(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"index",this).call(this,N,E)}},{key:"restore",value:function(N){var E=void 0,A=void 0,P=N.data.split(x).join("");if(N===this.leftGuard)if(this.prev instanceof d.default){var T=this.prev.length();this.prev.insertAt(T,P),E={startNode:this.prev.domNode,startOffset:T+P.length}}else A=document.createTextNode(P),this.parent.insertBefore(l.default.create(A),this),E={startNode:A,startOffset:P.length};else N===this.rightGuard&&(this.next instanceof d.default?(this.next.insertAt(0,P),E={startNode:this.next.domNode,startOffset:P.length}):(A=document.createTextNode(P),this.parent.insertBefore(l.default.create(A),this.next),E={startNode:A,startOffset:P.length}));return N.data=x,E}},{key:"update",value:function(N,E){var A=this;N.forEach(function(P){if(P.type==="characterData"&&(P.target===A.leftGuard||P.target===A.rightGuard)){var T=A.restore(P.target);T&&(E.range=T)}})}}]),w}(l.default.Embed);r.default=_},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.AlignStyle=r.AlignClass=r.AlignAttribute=void 0;var s=i(0),a=o(s);function o(h){return h&&h.__esModule?h:{default:h}}var l={scope:a.default.Scope.BLOCK,whitelist:["right","center","justify"]},u=new a.default.Attributor.Attribute("align","align",l),d=new a.default.Attributor.Class("align","ql-align",l),p=new a.default.Attributor.Style("align","text-align",l);r.AlignAttribute=u,r.AlignClass=d,r.AlignStyle=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.BackgroundStyle=r.BackgroundClass=void 0;var s=i(0),a=l(s),o=i(26);function l(p){return p&&p.__esModule?p:{default:p}}var u=new a.default.Attributor.Class("background","ql-bg",{scope:a.default.Scope.INLINE}),d=new o.ColorAttributor("background","background-color",{scope:a.default.Scope.INLINE});r.BackgroundClass=u,r.BackgroundStyle=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.DirectionStyle=r.DirectionClass=r.DirectionAttribute=void 0;var s=i(0),a=o(s);function o(h){return h&&h.__esModule?h:{default:h}}var l={scope:a.default.Scope.BLOCK,whitelist:["rtl"]},u=new a.default.Attributor.Attribute("direction","dir",l),d=new a.default.Attributor.Class("direction","ql-direction",l),p=new a.default.Attributor.Style("direction","direction",l);r.DirectionAttribute=u,r.DirectionClass=d,r.DirectionStyle=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.FontClass=r.FontStyle=void 0;var s=function(){function v(w,b){for(var N=0;N<b.length;N++){var E=b[N];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(w,E.key,E)}}return function(w,b,N){return b&&v(w.prototype,b),N&&v(w,N),w}}(),a=function v(w,b,N){w===null&&(w=Function.prototype);var E=Object.getOwnPropertyDescriptor(w,b);if(E===void 0){var A=Object.getPrototypeOf(w);return A===null?void 0:v(A,b,N)}else{if("value"in E)return E.value;var P=E.get;return P===void 0?void 0:P.call(N)}},o=i(0),l=u(o);function u(v){return v&&v.__esModule?v:{default:v}}function d(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function p(v,w){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:v}function h(v,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);v.prototype=Object.create(w&&w.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(v,w):v.__proto__=w)}var m={scope:l.default.Scope.INLINE,whitelist:["serif","monospace"]},y=new l.default.Attributor.Class("font","ql-font",m),x=function(v){h(w,v);function w(){return d(this,w),p(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return s(w,[{key:"value",value:function(N){return a(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"value",this).call(this,N).replace(/["']/g,"")}}]),w}(l.default.Attributor.Style),_=new x("font","font-family",m);r.FontStyle=_,r.FontClass=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SizeStyle=r.SizeClass=void 0;var s=i(0),a=o(s);function o(d){return d&&d.__esModule?d:{default:d}}var l=new a.default.Attributor.Class("size","ql-size",{scope:a.default.Scope.INLINE,whitelist:["small","large","huge"]}),u=new a.default.Attributor.Style("size","font-size",{scope:a.default.Scope.INLINE,whitelist:["10px","18px","32px"]});r.SizeClass=l,r.SizeStyle=u},function(n,r,i){n.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.getLastChangeIndex=r.default=void 0;var s=function(){function b(N,E){for(var A=0;A<E.length;A++){var P=E[A];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(N,P.key,P)}}return function(N,E,A){return E&&b(N.prototype,E),A&&b(N,A),N}}(),a=i(0),o=h(a),l=i(5),u=h(l),d=i(9),p=h(d);function h(b){return b&&b.__esModule?b:{default:b}}function m(b,N){if(!(b instanceof N))throw new TypeError("Cannot call a class as a function")}function y(b,N){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:b}function x(b,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);b.prototype=Object.create(N&&N.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(b,N):b.__proto__=N)}var _=function(b){x(N,b);function N(E,A){m(this,N);var P=y(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,E,A));return P.lastRecorded=0,P.ignoreChange=!1,P.clear(),P.quill.on(u.default.events.EDITOR_CHANGE,function(T,M,k,j){T!==u.default.events.TEXT_CHANGE||P.ignoreChange||(!P.options.userOnly||j===u.default.sources.USER?P.record(M,k):P.transform(M))}),P.quill.keyboard.addBinding({key:"Z",shortKey:!0},P.undo.bind(P)),P.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},P.redo.bind(P)),/Win/i.test(navigator.platform)&&P.quill.keyboard.addBinding({key:"Y",shortKey:!0},P.redo.bind(P)),P}return s(N,[{key:"change",value:function(A,P){if(this.stack[A].length!==0){var T=this.stack[A].pop();this.stack[P].push(T),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(T[A],u.default.sources.USER),this.ignoreChange=!1;var M=w(T[A]);this.quill.setSelection(M)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(A,P){if(A.ops.length!==0){this.stack.redo=[];var T=this.quill.getContents().diff(P),M=Date.now();if(this.lastRecorded+this.options.delay>M&&this.stack.undo.length>0){var k=this.stack.undo.pop();T=T.compose(k.undo),A=k.redo.compose(A)}else this.lastRecorded=M;this.stack.undo.push({redo:A,undo:T}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(A){this.stack.undo.forEach(function(P){P.undo=A.transform(P.undo,!0),P.redo=A.transform(P.redo,!0)}),this.stack.redo.forEach(function(P){P.undo=A.transform(P.undo,!0),P.redo=A.transform(P.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),N}(p.default);_.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function v(b){var N=b.ops[b.ops.length-1];return N==null?!1:N.insert!=null?typeof N.insert=="string"&&N.insert.endsWith(`
`):N.attributes!=null?Object.keys(N.attributes).some(function(E){return o.default.query(E,o.default.Scope.BLOCK)!=null}):!1}function w(b){var N=b.reduce(function(A,P){return A+=P.delete||0,A},0),E=b.length()-N;return v(b)&&(E-=1),E}r.default=_,r.getLastChangeIndex=w},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BaseTooltip=void 0;var s=function(){function z(K,J){for(var ne=0;ne<J.length;ne++){var X=J[ne];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(K,X.key,X)}}return function(K,J,ne){return J&&z(K.prototype,J),ne&&z(K,ne),K}}(),a=function z(K,J,ne){K===null&&(K=Function.prototype);var X=Object.getOwnPropertyDescriptor(K,J);if(X===void 0){var G=Object.getPrototypeOf(K);return G===null?void 0:z(G,J,ne)}else{if("value"in X)return X.value;var te=X.get;return te===void 0?void 0:te.call(ne)}},o=i(3),l=M(o),u=i(2),d=M(u),p=i(8),h=M(p),m=i(23),y=M(m),x=i(34),_=M(x),v=i(59),w=M(v),b=i(60),N=M(b),E=i(28),A=M(E),P=i(61),T=M(P);function M(z){return z&&z.__esModule?z:{default:z}}function k(z,K){if(!(z instanceof K))throw new TypeError("Cannot call a class as a function")}function j(z,K){if(!z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return K&&(typeof K=="object"||typeof K=="function")?K:z}function O(z,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof K);z.prototype=Object.create(K&&K.prototype,{constructor:{value:z,enumerable:!1,writable:!0,configurable:!0}}),K&&(Object.setPrototypeOf?Object.setPrototypeOf(z,K):z.__proto__=K)}var q=[!1,"center","right","justify"],I=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],D=[!1,"serif","monospace"],U=["1","2","3",!1],W=["small",!1,"large","huge"],Y=function(z){O(K,z);function K(J,ne){k(this,K);var X=j(this,(K.__proto__||Object.getPrototypeOf(K)).call(this,J,ne)),G=function te(re){if(!document.body.contains(J.root))return document.body.removeEventListener("click",te);X.tooltip!=null&&!X.tooltip.root.contains(re.target)&&document.activeElement!==X.tooltip.textbox&&!X.quill.hasFocus()&&X.tooltip.hide(),X.pickers!=null&&X.pickers.forEach(function(Q){Q.container.contains(re.target)||Q.close()})};return J.emitter.listenDOM("click",document.body,G),X}return s(K,[{key:"addModule",value:function(ne){var X=a(K.prototype.__proto__||Object.getPrototypeOf(K.prototype),"addModule",this).call(this,ne);return ne==="toolbar"&&this.extendToolbar(X),X}},{key:"buildButtons",value:function(ne,X){ne.forEach(function(G){var te=G.getAttribute("class")||"";te.split(/\s+/).forEach(function(re){if(re.startsWith("ql-")&&(re=re.slice(3),X[re]!=null))if(re==="direction")G.innerHTML=X[re][""]+X[re].rtl;else if(typeof X[re]=="string")G.innerHTML=X[re];else{var Q=G.value||"";Q!=null&&X[re][Q]&&(G.innerHTML=X[re][Q])}})})}},{key:"buildPickers",value:function(ne,X){var G=this;this.pickers=ne.map(function(re){if(re.classList.contains("ql-align"))return re.querySelector("option")==null&&L(re,q),new N.default(re,X.align);if(re.classList.contains("ql-background")||re.classList.contains("ql-color")){var Q=re.classList.contains("ql-background")?"background":"color";return re.querySelector("option")==null&&L(re,I,Q==="background"?"#ffffff":"#000000"),new w.default(re,X[Q])}else return re.querySelector("option")==null&&(re.classList.contains("ql-font")?L(re,D):re.classList.contains("ql-header")?L(re,U):re.classList.contains("ql-size")&&L(re,W)),new A.default(re)});var te=function(){G.pickers.forEach(function(Q){Q.update()})};this.quill.on(h.default.events.EDITOR_CHANGE,te)}}]),K}(_.default);Y.DEFAULTS=(0,l.default)(!0,{},_.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var K=this,J=this.container.querySelector("input.ql-image[type=file]");J==null&&(J=document.createElement("input"),J.setAttribute("type","file"),J.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),J.classList.add("ql-image"),J.addEventListener("change",function(){if(J.files!=null&&J.files[0]!=null){var ne=new FileReader;ne.onload=function(X){var G=K.quill.getSelection(!0);K.quill.updateContents(new d.default().retain(G.index).delete(G.length).insert({image:X.target.result}),h.default.sources.USER),K.quill.setSelection(G.index+1,h.default.sources.SILENT),J.value=""},ne.readAsDataURL(J.files[0])}}),this.container.appendChild(J)),J.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var H=function(z){O(K,z);function K(J,ne){k(this,K);var X=j(this,(K.__proto__||Object.getPrototypeOf(K)).call(this,J,ne));return X.textbox=X.root.querySelector('input[type="text"]'),X.listen(),X}return s(K,[{key:"listen",value:function(){var ne=this;this.textbox.addEventListener("keydown",function(X){y.default.match(X,"enter")?(ne.save(),X.preventDefault()):y.default.match(X,"escape")&&(ne.cancel(),X.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),X!=null?this.textbox.value=X:ne!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+ne)||""),this.root.setAttribute("data-mode",ne)}},{key:"restoreFocus",value:function(){var ne=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=ne}},{key:"save",value:function(){var ne=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var X=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",ne,h.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",ne,h.default.sources.USER)),this.quill.root.scrollTop=X;break}case"video":ne=B(ne);case"formula":{if(!ne)break;var G=this.quill.getSelection(!0);if(G!=null){var te=G.index+G.length;this.quill.insertEmbed(te,this.root.getAttribute("data-mode"),ne,h.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(te+1," ",h.default.sources.USER),this.quill.setSelection(te+2,h.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),K}(T.default);function B(z){var K=z.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||z.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return K?(K[1]||"https")+"://www.youtube.com/embed/"+K[2]+"?showinfo=0":(K=z.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(K[1]||"https")+"://player.vimeo.com/video/"+K[2]+"/":z}function L(z,K){var J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;K.forEach(function(ne){var X=document.createElement("option");ne===J?X.setAttribute("selected","selected"):X.setAttribute("value",ne),z.appendChild(X)})}r.BaseTooltip=H,r.default=Y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function a(){this.head=this.tail=null,this.length=0}return a.prototype.append=function(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];this.insertBefore(o[0],null),o.length>1&&this.append.apply(this,o.slice(1))},a.prototype.contains=function(o){for(var l,u=this.iterator();l=u();)if(l===o)return!0;return!1},a.prototype.insertBefore=function(o,l){o&&(o.next=l,l!=null?(o.prev=l.prev,l.prev!=null&&(l.prev.next=o),l.prev=o,l===this.head&&(this.head=o)):this.tail!=null?(this.tail.next=o,o.prev=this.tail,this.tail=o):(o.prev=null,this.head=this.tail=o),this.length+=1)},a.prototype.offset=function(o){for(var l=0,u=this.head;u!=null;){if(u===o)return l;l+=u.length(),u=u.next}return-1},a.prototype.remove=function(o){this.contains(o)&&(o.prev!=null&&(o.prev.next=o.next),o.next!=null&&(o.next.prev=o.prev),o===this.head&&(this.head=o.next),o===this.tail&&(this.tail=o.prev),this.length-=1)},a.prototype.iterator=function(o){return o===void 0&&(o=this.head),function(){var l=o;return o!=null&&(o=o.next),l}},a.prototype.find=function(o,l){l===void 0&&(l=!1);for(var u,d=this.iterator();u=d();){var p=u.length();if(o<p||l&&o===p&&(u.next==null||u.next.length()!==0))return[u,o];o-=p}return[null,0]},a.prototype.forEach=function(o){for(var l,u=this.iterator();l=u();)o(l)},a.prototype.forEachAt=function(o,l,u){if(!(l<=0))for(var d=this.find(o),p=d[0],h=d[1],m,y=o-h,x=this.iterator(p);(m=x())&&y<o+l;){var _=m.length();o>y?u(m,o-y,Math.min(l,y+_-o)):u(m,0,Math.min(_,o+l-y)),y+=_}},a.prototype.map=function(o){return this.reduce(function(l,u){return l.push(o(u)),l},[])},a.prototype.reduce=function(o,l){for(var u,d=this.iterator();u=d();)l=o(l,u);return l},a}();r.default=s},function(n,r,i){var s=this&&this.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,m){h.__proto__=m}||function(h,m){for(var y in m)m.hasOwnProperty(y)&&(h[y]=m[y])};return function(h,m){p(h,m);function y(){this.constructor=h}h.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)}}();Object.defineProperty(r,"__esModule",{value:!0});var a=i(17),o=i(1),l={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},u=100,d=function(p){s(h,p);function h(m){var y=p.call(this,m)||this;return y.scroll=y,y.observer=new MutationObserver(function(x){y.update(x)}),y.observer.observe(y.domNode,l),y.attach(),y}return h.prototype.detach=function(){p.prototype.detach.call(this),this.observer.disconnect()},h.prototype.deleteAt=function(m,y){this.update(),m===0&&y===this.length()?this.children.forEach(function(x){x.remove()}):p.prototype.deleteAt.call(this,m,y)},h.prototype.formatAt=function(m,y,x,_){this.update(),p.prototype.formatAt.call(this,m,y,x,_)},h.prototype.insertAt=function(m,y,x){this.update(),p.prototype.insertAt.call(this,m,y,x)},h.prototype.optimize=function(m,y){var x=this;m===void 0&&(m=[]),y===void 0&&(y={}),p.prototype.optimize.call(this,y);for(var _=[].slice.call(this.observer.takeRecords());_.length>0;)m.push(_.pop());for(var v=function(E,A){A===void 0&&(A=!0),!(E==null||E===x)&&E.domNode.parentNode!=null&&(E.domNode[o.DATA_KEY].mutations==null&&(E.domNode[o.DATA_KEY].mutations=[]),A&&v(E.parent))},w=function(E){E.domNode[o.DATA_KEY]==null||E.domNode[o.DATA_KEY].mutations==null||(E instanceof a.default&&E.children.forEach(w),E.optimize(y))},b=m,N=0;b.length>0;N+=1){if(N>=u)throw new Error("[Parchment] Maximum optimize iterations reached");for(b.forEach(function(E){var A=o.find(E.target,!0);A!=null&&(A.domNode===E.target&&(E.type==="childList"?(v(o.find(E.previousSibling,!1)),[].forEach.call(E.addedNodes,function(P){var T=o.find(P,!1);v(T,!1),T instanceof a.default&&T.children.forEach(function(M){v(M,!1)})})):E.type==="attributes"&&v(A.prev)),v(A))}),this.children.forEach(w),b=[].slice.call(this.observer.takeRecords()),_=b.slice();_.length>0;)m.push(_.pop())}},h.prototype.update=function(m,y){var x=this;y===void 0&&(y={}),m=m||this.observer.takeRecords(),m.map(function(_){var v=o.find(_.target,!0);return v==null?null:v.domNode[o.DATA_KEY].mutations==null?(v.domNode[o.DATA_KEY].mutations=[_],v):(v.domNode[o.DATA_KEY].mutations.push(_),null)}).forEach(function(_){_==null||_===x||_.domNode[o.DATA_KEY]==null||_.update(_.domNode[o.DATA_KEY].mutations||[],y)}),this.domNode[o.DATA_KEY].mutations!=null&&p.prototype.update.call(this,this.domNode[o.DATA_KEY].mutations,y),this.optimize(m,y)},h.blotName="scroll",h.defaultChild="block",h.scope=o.Scope.BLOCK_BLOT,h.tagName="DIV",h}(a.default);r.default=d},function(n,r,i){var s=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])};return function(p,h){d(p,h);function m(){this.constructor=p}p.prototype=h===null?Object.create(h):(m.prototype=h.prototype,new m)}}();Object.defineProperty(r,"__esModule",{value:!0});var a=i(18),o=i(1);function l(d,p){if(Object.keys(d).length!==Object.keys(p).length)return!1;for(var h in d)if(d[h]!==p[h])return!1;return!0}var u=function(d){s(p,d);function p(){return d!==null&&d.apply(this,arguments)||this}return p.formats=function(h){if(h.tagName!==p.tagName)return d.formats.call(this,h)},p.prototype.format=function(h,m){var y=this;h===this.statics.blotName&&!m?(this.children.forEach(function(x){x instanceof a.default||(x=x.wrap(p.blotName,!0)),y.attributes.copy(x)}),this.unwrap()):d.prototype.format.call(this,h,m)},p.prototype.formatAt=function(h,m,y,x){if(this.formats()[y]!=null||o.query(y,o.Scope.ATTRIBUTE)){var _=this.isolate(h,m);_.format(y,x)}else d.prototype.formatAt.call(this,h,m,y,x)},p.prototype.optimize=function(h){d.prototype.optimize.call(this,h);var m=this.formats();if(Object.keys(m).length===0)return this.unwrap();var y=this.next;y instanceof p&&y.prev===this&&l(m,y.formats())&&(y.moveChildren(this),y.remove())},p.blotName="inline",p.scope=o.Scope.INLINE_BLOT,p.tagName="SPAN",p}(a.default);r.default=u},function(n,r,i){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var h in p)p.hasOwnProperty(h)&&(d[h]=p[h])};return function(d,p){u(d,p);function h(){this.constructor=d}d.prototype=p===null?Object.create(p):(h.prototype=p.prototype,new h)}}();Object.defineProperty(r,"__esModule",{value:!0});var a=i(18),o=i(1),l=function(u){s(d,u);function d(){return u!==null&&u.apply(this,arguments)||this}return d.formats=function(p){var h=o.query(d.blotName).tagName;if(p.tagName!==h)return u.formats.call(this,p)},d.prototype.format=function(p,h){o.query(p,o.Scope.BLOCK)!=null&&(p===this.statics.blotName&&!h?this.replaceWith(d.blotName):u.prototype.format.call(this,p,h))},d.prototype.formatAt=function(p,h,m,y){o.query(m,o.Scope.BLOCK)!=null?this.format(m,y):u.prototype.formatAt.call(this,p,h,m,y)},d.prototype.insertAt=function(p,h,m){if(m==null||o.query(h,o.Scope.INLINE)!=null)u.prototype.insertAt.call(this,p,h,m);else{var y=this.split(p),x=o.create(h,m);y.parent.insertBefore(x,y)}},d.prototype.update=function(p,h){navigator.userAgent.match(/Trident/)?this.build():u.prototype.update.call(this,p,h)},d.blotName="block",d.scope=o.Scope.BLOCK_BLOT,d.tagName="P",d}(a.default);r.default=l},function(n,r,i){var s=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var p in d)d.hasOwnProperty(p)&&(u[p]=d[p])};return function(u,d){l(u,d);function p(){this.constructor=u}u.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)}}();Object.defineProperty(r,"__esModule",{value:!0});var a=i(19),o=function(l){s(u,l);function u(){return l!==null&&l.apply(this,arguments)||this}return u.formats=function(d){},u.prototype.format=function(d,p){l.prototype.formatAt.call(this,0,this.length(),d,p)},u.prototype.formatAt=function(d,p,h,m){d===0&&p===this.length()?this.format(h,m):l.prototype.formatAt.call(this,d,p,h,m)},u.prototype.formats=function(){return this.statics.formats(this.domNode)},u}(a.default);r.default=o},function(n,r,i){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var h in p)p.hasOwnProperty(h)&&(d[h]=p[h])};return function(d,p){u(d,p);function h(){this.constructor=d}d.prototype=p===null?Object.create(p):(h.prototype=p.prototype,new h)}}();Object.defineProperty(r,"__esModule",{value:!0});var a=i(19),o=i(1),l=function(u){s(d,u);function d(p){var h=u.call(this,p)||this;return h.text=h.statics.value(h.domNode),h}return d.create=function(p){return document.createTextNode(p)},d.value=function(p){var h=p.data;return h.normalize&&(h=h.normalize()),h},d.prototype.deleteAt=function(p,h){this.domNode.data=this.text=this.text.slice(0,p)+this.text.slice(p+h)},d.prototype.index=function(p,h){return this.domNode===p?h:-1},d.prototype.insertAt=function(p,h,m){m==null?(this.text=this.text.slice(0,p)+h+this.text.slice(p),this.domNode.data=this.text):u.prototype.insertAt.call(this,p,h,m)},d.prototype.length=function(){return this.text.length},d.prototype.optimize=function(p){u.prototype.optimize.call(this,p),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof d&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},d.prototype.position=function(p,h){return[this.domNode,p]},d.prototype.split=function(p,h){if(h===void 0&&(h=!1),!h){if(p===0)return this;if(p===this.length())return this.next}var m=o.create(this.domNode.splitText(p));return this.parent.insertBefore(m,this.next),this.text=this.statics.value(this.domNode),m},d.prototype.update=function(p,h){var m=this;p.some(function(y){return y.type==="characterData"&&y.target===m.domNode})&&(this.text=this.statics.value(this.domNode))},d.prototype.value=function(){return this.text},d.blotName="text",d.scope=o.Scope.INLINE_BLOT,d}(a.default);r.default=l},function(n,r,i){var s=document.createElement("div");if(s.classList.toggle("test-class",!1),s.classList.contains("test-class")){var a=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(o,l){return arguments.length>1&&!this.contains(o)==!l?l:a.call(this,o)}}String.prototype.startsWith||(String.prototype.startsWith=function(o,l){return l=l||0,this.substr(l,o.length)===o}),String.prototype.endsWith||(String.prototype.endsWith=function(o,l){var u=this.toString();(typeof l!="number"||!isFinite(l)||Math.floor(l)!==l||l>u.length)&&(l=u.length),l-=o.length;var d=u.indexOf(o,l);return d!==-1&&d===l}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(l){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof l!="function")throw new TypeError("predicate must be a function");for(var u=Object(this),d=u.length>>>0,p=arguments[1],h,m=0;m<d;m++)if(h=u[m],l.call(p,h,m,u))return h}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(n,r){var i=-1,s=1,a=0;function o(N,E,A){if(N==E)return N?[[a,N]]:[];(A<0||N.length<A)&&(A=null);var P=p(N,E),T=N.substring(0,P);N=N.substring(P),E=E.substring(P),P=h(N,E);var M=N.substring(N.length-P);N=N.substring(0,N.length-P),E=E.substring(0,E.length-P);var k=l(N,E);return T&&k.unshift([a,T]),M&&k.push([a,M]),y(k),A!=null&&(k=v(k,A)),k=w(k),k}function l(N,E){var A;if(!N)return[[s,E]];if(!E)return[[i,N]];var P=N.length>E.length?N:E,T=N.length>E.length?E:N,M=P.indexOf(T);if(M!=-1)return A=[[s,P.substring(0,M)],[a,T],[s,P.substring(M+T.length)]],N.length>E.length&&(A[0][0]=A[2][0]=i),A;if(T.length==1)return[[i,N],[s,E]];var k=m(N,E);if(k){var j=k[0],O=k[1],q=k[2],I=k[3],D=k[4],U=o(j,q),W=o(O,I);return U.concat([[a,D]],W)}return u(N,E)}function u(N,E){for(var A=N.length,P=E.length,T=Math.ceil((A+P)/2),M=T,k=2*T,j=new Array(k),O=new Array(k),q=0;q<k;q++)j[q]=-1,O[q]=-1;j[M+1]=0,O[M+1]=0;for(var I=A-P,D=I%2!=0,U=0,W=0,Y=0,H=0,B=0;B<T;B++){for(var L=-B+U;L<=B-W;L+=2){var z=M+L,K;L==-B||L!=B&&j[z-1]<j[z+1]?K=j[z+1]:K=j[z-1]+1;for(var J=K-L;K<A&&J<P&&N.charAt(K)==E.charAt(J);)K++,J++;if(j[z]=K,K>A)W+=2;else if(J>P)U+=2;else if(D){var ne=M+I-L;if(ne>=0&&ne<k&&O[ne]!=-1){var X=A-O[ne];if(K>=X)return d(N,E,K,J)}}}for(var G=-B+Y;G<=B-H;G+=2){var ne=M+G,X;G==-B||G!=B&&O[ne-1]<O[ne+1]?X=O[ne+1]:X=O[ne-1]+1;for(var te=X-G;X<A&&te<P&&N.charAt(A-X-1)==E.charAt(P-te-1);)X++,te++;if(O[ne]=X,X>A)H+=2;else if(te>P)Y+=2;else if(!D){var z=M+I-G;if(z>=0&&z<k&&j[z]!=-1){var K=j[z],J=M+K-z;if(X=A-X,K>=X)return d(N,E,K,J)}}}}return[[i,N],[s,E]]}function d(N,E,A,P){var T=N.substring(0,A),M=E.substring(0,P),k=N.substring(A),j=E.substring(P),O=o(T,M),q=o(k,j);return O.concat(q)}function p(N,E){if(!N||!E||N.charAt(0)!=E.charAt(0))return 0;for(var A=0,P=Math.min(N.length,E.length),T=P,M=0;A<T;)N.substring(M,T)==E.substring(M,T)?(A=T,M=A):P=T,T=Math.floor((P-A)/2+A);return T}function h(N,E){if(!N||!E||N.charAt(N.length-1)!=E.charAt(E.length-1))return 0;for(var A=0,P=Math.min(N.length,E.length),T=P,M=0;A<T;)N.substring(N.length-T,N.length-M)==E.substring(E.length-T,E.length-M)?(A=T,M=A):P=T,T=Math.floor((P-A)/2+A);return T}function m(N,E){var A=N.length>E.length?N:E,P=N.length>E.length?E:N;if(A.length<4||P.length*2<A.length)return null;function T(W,Y,H){for(var B=W.substring(H,H+Math.floor(W.length/4)),L=-1,z="",K,J,ne,X;(L=Y.indexOf(B,L+1))!=-1;){var G=p(W.substring(H),Y.substring(L)),te=h(W.substring(0,H),Y.substring(0,L));z.length<te+G&&(z=Y.substring(L-te,L)+Y.substring(L,L+G),K=W.substring(0,H-te),J=W.substring(H+G),ne=Y.substring(0,L-te),X=Y.substring(L+G))}return z.length*2>=W.length?[K,J,ne,X,z]:null}var M=T(A,P,Math.ceil(A.length/4)),k=T(A,P,Math.ceil(A.length/2)),j;if(!M&&!k)return null;k?M?j=M[4].length>k[4].length?M:k:j=k:j=M;var O,q,I,D;N.length>E.length?(O=j[0],q=j[1],I=j[2],D=j[3]):(I=j[0],D=j[1],O=j[2],q=j[3]);var U=j[4];return[O,q,I,D,U]}function y(N){N.push([a,""]);for(var E=0,A=0,P=0,T="",M="",k;E<N.length;)switch(N[E][0]){case s:P++,M+=N[E][1],E++;break;case i:A++,T+=N[E][1],E++;break;case a:A+P>1?(A!==0&&P!==0&&(k=p(M,T),k!==0&&(E-A-P>0&&N[E-A-P-1][0]==a?N[E-A-P-1][1]+=M.substring(0,k):(N.splice(0,0,[a,M.substring(0,k)]),E++),M=M.substring(k),T=T.substring(k)),k=h(M,T),k!==0&&(N[E][1]=M.substring(M.length-k)+N[E][1],M=M.substring(0,M.length-k),T=T.substring(0,T.length-k))),A===0?N.splice(E-P,A+P,[s,M]):P===0?N.splice(E-A,A+P,[i,T]):N.splice(E-A-P,A+P,[i,T],[s,M]),E=E-A-P+(A?1:0)+(P?1:0)+1):E!==0&&N[E-1][0]==a?(N[E-1][1]+=N[E][1],N.splice(E,1)):E++,P=0,A=0,T="",M="";break}N[N.length-1][1]===""&&N.pop();var j=!1;for(E=1;E<N.length-1;)N[E-1][0]==a&&N[E+1][0]==a&&(N[E][1].substring(N[E][1].length-N[E-1][1].length)==N[E-1][1]?(N[E][1]=N[E-1][1]+N[E][1].substring(0,N[E][1].length-N[E-1][1].length),N[E+1][1]=N[E-1][1]+N[E+1][1],N.splice(E-1,1),j=!0):N[E][1].substring(0,N[E+1][1].length)==N[E+1][1]&&(N[E-1][1]+=N[E+1][1],N[E][1]=N[E][1].substring(N[E+1][1].length)+N[E+1][1],N.splice(E+1,1),j=!0)),E++;j&&y(N)}var x=o;x.INSERT=s,x.DELETE=i,x.EQUAL=a,n.exports=x;function _(N,E){if(E===0)return[a,N];for(var A=0,P=0;P<N.length;P++){var T=N[P];if(T[0]===i||T[0]===a){var M=A+T[1].length;if(E===M)return[P+1,N];if(E<M){N=N.slice();var k=E-A,j=[T[0],T[1].slice(0,k)],O=[T[0],T[1].slice(k)];return N.splice(P,1,j,O),[P+1,N]}else A=M}}throw new Error("cursor_pos is out of bounds!")}function v(N,E){var A=_(N,E),P=A[1],T=A[0],M=P[T],k=P[T+1];if(M==null)return N;if(M[0]!==a)return N;if(k!=null&&M[1]+k[1]===k[1]+M[1])return P.splice(T,2,k,M),b(P,T,2);if(k!=null&&k[1].indexOf(M[1])===0){P.splice(T,2,[k[0],M[1]],[0,M[1]]);var j=k[1].slice(M[1].length);return j.length>0&&P.splice(T+2,0,[k[0],j]),b(P,T,3)}else return N}function w(N){for(var E=!1,A=function(k){return k.charCodeAt(0)>=56320&&k.charCodeAt(0)<=57343},P=function(k){return k.charCodeAt(k.length-1)>=55296&&k.charCodeAt(k.length-1)<=56319},T=2;T<N.length;T+=1)N[T-2][0]===a&&P(N[T-2][1])&&N[T-1][0]===i&&A(N[T-1][1])&&N[T][0]===s&&A(N[T][1])&&(E=!0,N[T-1][1]=N[T-2][1].slice(-1)+N[T-1][1],N[T][1]=N[T-2][1].slice(-1)+N[T][1],N[T-2][1]=N[T-2][1].slice(0,-1));if(!E)return N;for(var M=[],T=0;T<N.length;T+=1)N[T][1].length>0&&M.push(N[T]);return M}function b(N,E,A){for(var P=E+A-1;P>=0&&P>=E-1;P--)if(P+1<N.length){var T=N[P],M=N[P+1];T[0]===M[1]&&N.splice(P,2,[T[0],T[1]+M[1]])}return N}},function(n,r){r=n.exports=typeof Object.keys=="function"?Object.keys:i,r.shim=i;function i(s){var a=[];for(var o in s)a.push(o);return a}},function(n,r){var i=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";r=n.exports=i?s:a,r.supported=s;function s(o){return Object.prototype.toString.call(o)=="[object Arguments]"}r.unsupported=a;function a(o){return o&&typeof o=="object"&&typeof o.length=="number"&&Object.prototype.hasOwnProperty.call(o,"callee")&&!Object.prototype.propertyIsEnumerable.call(o,"callee")||!1}},function(n,r){var i=Object.prototype.hasOwnProperty,s="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(s=!1));function o(u,d,p){this.fn=u,this.context=d,this.once=p||!1}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],p,h;if(this._eventsCount===0)return d;for(h in p=this._events)i.call(p,h)&&d.push(s?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(p)):d},l.prototype.listeners=function(d,p){var h=s?s+d:d,m=this._events[h];if(p)return!!m;if(!m)return[];if(m.fn)return[m.fn];for(var y=0,x=m.length,_=new Array(x);y<x;y++)_[y]=m[y].fn;return _},l.prototype.emit=function(d,p,h,m,y,x){var _=s?s+d:d;if(!this._events[_])return!1;var v=this._events[_],w=arguments.length,b,N;if(v.fn){switch(v.once&&this.removeListener(d,v.fn,void 0,!0),w){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,p),!0;case 3:return v.fn.call(v.context,p,h),!0;case 4:return v.fn.call(v.context,p,h,m),!0;case 5:return v.fn.call(v.context,p,h,m,y),!0;case 6:return v.fn.call(v.context,p,h,m,y,x),!0}for(N=1,b=new Array(w-1);N<w;N++)b[N-1]=arguments[N];v.fn.apply(v.context,b)}else{var E=v.length,A;for(N=0;N<E;N++)switch(v[N].once&&this.removeListener(d,v[N].fn,void 0,!0),w){case 1:v[N].fn.call(v[N].context);break;case 2:v[N].fn.call(v[N].context,p);break;case 3:v[N].fn.call(v[N].context,p,h);break;case 4:v[N].fn.call(v[N].context,p,h,m);break;default:if(!b)for(A=1,b=new Array(w-1);A<w;A++)b[A-1]=arguments[A];v[N].fn.apply(v[N].context,b)}}return!0},l.prototype.on=function(d,p,h){var m=new o(p,h||this),y=s?s+d:d;return this._events[y]?this._events[y].fn?this._events[y]=[this._events[y],m]:this._events[y].push(m):(this._events[y]=m,this._eventsCount++),this},l.prototype.once=function(d,p,h){var m=new o(p,h||this,!0),y=s?s+d:d;return this._events[y]?this._events[y].fn?this._events[y]=[this._events[y],m]:this._events[y].push(m):(this._events[y]=m,this._eventsCount++),this},l.prototype.removeListener=function(d,p,h,m){var y=s?s+d:d;if(!this._events[y])return this;if(!p)return--this._eventsCount===0?this._events=new a:delete this._events[y],this;var x=this._events[y];if(x.fn)x.fn===p&&(!m||x.once)&&(!h||x.context===h)&&(--this._eventsCount===0?this._events=new a:delete this._events[y]);else{for(var _=0,v=[],w=x.length;_<w;_++)(x[_].fn!==p||m&&!x[_].once||h&&x[_].context!==h)&&v.push(x[_]);v.length?this._events[y]=v.length===1?v[0]:v:--this._eventsCount===0?this._events=new a:delete this._events[y]}return this},l.prototype.removeAllListeners=function(d){var p;return d?(p=s?s+d:d,this._events[p]&&(--this._eventsCount===0?this._events=new a:delete this._events[p])):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prototype.setMaxListeners=function(){return this},l.prefixed=s,l.EventEmitter=l,typeof n<"u"&&(n.exports=l)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.matchText=r.matchSpacing=r.matchNewline=r.matchBlot=r.matchAttributor=r.default=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ae){return typeof ae}:function(ae){return ae&&typeof Symbol=="function"&&ae.constructor===Symbol&&ae!==Symbol.prototype?"symbol":typeof ae},a=function(){function ae(me,_e){var Ee=[],xe=!0,Oe=!1,Te=void 0;try{for(var Be=me[Symbol.iterator](),Et;!(xe=(Et=Be.next()).done)&&(Ee.push(Et.value),!(_e&&Ee.length===_e));xe=!0);}catch(bt){Oe=!0,Te=bt}finally{try{!xe&&Be.return&&Be.return()}finally{if(Oe)throw Te}}return Ee}return function(me,_e){if(Array.isArray(me))return me;if(Symbol.iterator in Object(me))return ae(me,_e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function ae(me,_e){for(var Ee=0;Ee<_e.length;Ee++){var xe=_e[Ee];xe.enumerable=xe.enumerable||!1,xe.configurable=!0,"value"in xe&&(xe.writable=!0),Object.defineProperty(me,xe.key,xe)}}return function(me,_e,Ee){return _e&&ae(me.prototype,_e),Ee&&ae(me,Ee),me}}(),l=i(3),u=O(l),d=i(2),p=O(d),h=i(0),m=O(h),y=i(5),x=O(y),_=i(10),v=O(_),w=i(9),b=O(w),N=i(36),E=i(37),A=i(13),P=O(A),T=i(26),M=i(38),k=i(39),j=i(40);function O(ae){return ae&&ae.__esModule?ae:{default:ae}}function q(ae,me,_e){return me in ae?Object.defineProperty(ae,me,{value:_e,enumerable:!0,configurable:!0,writable:!0}):ae[me]=_e,ae}function I(ae,me){if(!(ae instanceof me))throw new TypeError("Cannot call a class as a function")}function D(ae,me){if(!ae)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return me&&(typeof me=="object"||typeof me=="function")?me:ae}function U(ae,me){if(typeof me!="function"&&me!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof me);ae.prototype=Object.create(me&&me.prototype,{constructor:{value:ae,enumerable:!1,writable:!0,configurable:!0}}),me&&(Object.setPrototypeOf?Object.setPrototypeOf(ae,me):ae.__proto__=me)}var W=(0,v.default)("quill:clipboard"),Y="__ql-matcher",H=[[Node.TEXT_NODE,we],[Node.TEXT_NODE,ue],["br",se],[Node.ELEMENT_NODE,ue],[Node.ELEMENT_NODE,Q],[Node.ELEMENT_NODE,he],[Node.ELEMENT_NODE,re],[Node.ELEMENT_NODE,qe],["li",le],["b",te.bind(te,"bold")],["i",te.bind(te,"italic")],["style",de]],B=[N.AlignAttribute,M.DirectionAttribute].reduce(function(ae,me){return ae[me.keyName]=me,ae},{}),L=[N.AlignStyle,E.BackgroundStyle,T.ColorStyle,M.DirectionStyle,k.FontStyle,j.SizeStyle].reduce(function(ae,me){return ae[me.keyName]=me,ae},{}),z=function(ae){U(me,ae);function me(_e,Ee){I(this,me);var xe=D(this,(me.__proto__||Object.getPrototypeOf(me)).call(this,_e,Ee));return xe.quill.root.addEventListener("paste",xe.onPaste.bind(xe)),xe.container=xe.quill.addContainer("ql-clipboard"),xe.container.setAttribute("contenteditable",!0),xe.container.setAttribute("tabindex",-1),xe.matchers=[],H.concat(xe.options.matchers).forEach(function(Oe){var Te=a(Oe,2),Be=Te[0],Et=Te[1];!Ee.matchVisual&&Et===he||xe.addMatcher(Be,Et)}),xe}return o(me,[{key:"addMatcher",value:function(Ee,xe){this.matchers.push([Ee,xe])}},{key:"convert",value:function(Ee){if(typeof Ee=="string")return this.container.innerHTML=Ee.replace(/\>\r?\n +\</g,"><"),this.convert();var xe=this.quill.getFormat(this.quill.selection.savedRange.index);if(xe[P.default.blotName]){var Oe=this.container.innerText;return this.container.innerHTML="",new p.default().insert(Oe,q({},P.default.blotName,xe[P.default.blotName]))}var Te=this.prepareMatching(),Be=a(Te,2),Et=Be[0],bt=Be[1],He=G(this.container,Et,bt);return ne(He,`
`)&&He.ops[He.ops.length-1].attributes==null&&(He=He.compose(new p.default().retain(He.length()-1).delete(1))),W.log("convert",this.container.innerHTML,He),this.container.innerHTML="",He}},{key:"dangerouslyPasteHTML",value:function(Ee,xe){var Oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:x.default.sources.API;if(typeof Ee=="string")this.quill.setContents(this.convert(Ee),xe),this.quill.setSelection(0,x.default.sources.SILENT);else{var Te=this.convert(xe);this.quill.updateContents(new p.default().retain(Ee).concat(Te),Oe),this.quill.setSelection(Ee+Te.length(),x.default.sources.SILENT)}}},{key:"onPaste",value:function(Ee){var xe=this;if(!(Ee.defaultPrevented||!this.quill.isEnabled())){var Oe=this.quill.getSelection(),Te=new p.default().retain(Oe.index),Be=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(x.default.sources.SILENT),setTimeout(function(){Te=Te.concat(xe.convert()).delete(Oe.length),xe.quill.updateContents(Te,x.default.sources.USER),xe.quill.setSelection(Te.length()-Oe.length,x.default.sources.SILENT),xe.quill.scrollingContainer.scrollTop=Be,xe.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var Ee=this,xe=[],Oe=[];return this.matchers.forEach(function(Te){var Be=a(Te,2),Et=Be[0],bt=Be[1];switch(Et){case Node.TEXT_NODE:Oe.push(bt);break;case Node.ELEMENT_NODE:xe.push(bt);break;default:[].forEach.call(Ee.container.querySelectorAll(Et),function(He){He[Y]=He[Y]||[],He[Y].push(bt)});break}}),[xe,Oe]}}]),me}(b.default);z.DEFAULTS={matchers:[],matchVisual:!0};function K(ae,me,_e){return(typeof me>"u"?"undefined":s(me))==="object"?Object.keys(me).reduce(function(Ee,xe){return K(Ee,xe,me[xe])},ae):ae.reduce(function(Ee,xe){return xe.attributes&&xe.attributes[me]?Ee.push(xe):Ee.insert(xe.insert,(0,u.default)({},q({},me,_e),xe.attributes))},new p.default)}function J(ae){if(ae.nodeType!==Node.ELEMENT_NODE)return{};var me="__ql-computed-style";return ae[me]||(ae[me]=window.getComputedStyle(ae))}function ne(ae,me){for(var _e="",Ee=ae.ops.length-1;Ee>=0&&_e.length<me.length;--Ee){var xe=ae.ops[Ee];if(typeof xe.insert!="string")break;_e=xe.insert+_e}return _e.slice(-1*me.length)===me}function X(ae){if(ae.childNodes.length===0)return!1;var me=J(ae);return["block","list-item"].indexOf(me.display)>-1}function G(ae,me,_e){return ae.nodeType===ae.TEXT_NODE?_e.reduce(function(Ee,xe){return xe(ae,Ee)},new p.default):ae.nodeType===ae.ELEMENT_NODE?[].reduce.call(ae.childNodes||[],function(Ee,xe){var Oe=G(xe,me,_e);return xe.nodeType===ae.ELEMENT_NODE&&(Oe=me.reduce(function(Te,Be){return Be(xe,Te)},Oe),Oe=(xe[Y]||[]).reduce(function(Te,Be){return Be(xe,Te)},Oe)),Ee.concat(Oe)},new p.default):new p.default}function te(ae,me,_e){return K(_e,ae,!0)}function re(ae,me){var _e=m.default.Attributor.Attribute.keys(ae),Ee=m.default.Attributor.Class.keys(ae),xe=m.default.Attributor.Style.keys(ae),Oe={};return _e.concat(Ee).concat(xe).forEach(function(Te){var Be=m.default.query(Te,m.default.Scope.ATTRIBUTE);Be!=null&&(Oe[Be.attrName]=Be.value(ae),Oe[Be.attrName])||(Be=B[Te],Be!=null&&(Be.attrName===Te||Be.keyName===Te)&&(Oe[Be.attrName]=Be.value(ae)||void 0),Be=L[Te],Be!=null&&(Be.attrName===Te||Be.keyName===Te)&&(Be=L[Te],Oe[Be.attrName]=Be.value(ae)||void 0))}),Object.keys(Oe).length>0&&(me=K(me,Oe)),me}function Q(ae,me){var _e=m.default.query(ae);if(_e==null)return me;if(_e.prototype instanceof m.default.Embed){var Ee={},xe=_e.value(ae);xe!=null&&(Ee[_e.blotName]=xe,me=new p.default().insert(Ee,_e.formats(ae)))}else typeof _e.formats=="function"&&(me=K(me,_e.blotName,_e.formats(ae)));return me}function se(ae,me){return ne(me,`
`)||me.insert(`
`),me}function de(){return new p.default}function le(ae,me){var _e=m.default.query(ae);if(_e==null||_e.blotName!=="list-item"||!ne(me,`
`))return me;for(var Ee=-1,xe=ae.parentNode;!xe.classList.contains("ql-clipboard");)(m.default.query(xe)||{}).blotName==="list"&&(Ee+=1),xe=xe.parentNode;return Ee<=0?me:me.compose(new p.default().retain(me.length()-1).retain(1,{indent:Ee}))}function ue(ae,me){return ne(me,`
`)||(X(ae)||me.length()>0&&ae.nextSibling&&X(ae.nextSibling))&&me.insert(`
`),me}function he(ae,me){if(X(ae)&&ae.nextElementSibling!=null&&!ne(me,`

`)){var _e=ae.offsetHeight+parseFloat(J(ae).marginTop)+parseFloat(J(ae).marginBottom);ae.nextElementSibling.offsetTop>ae.offsetTop+_e*1.5&&me.insert(`
`)}return me}function qe(ae,me){var _e={},Ee=ae.style||{};return Ee.fontStyle&&J(ae).fontStyle==="italic"&&(_e.italic=!0),Ee.fontWeight&&(J(ae).fontWeight.startsWith("bold")||parseInt(J(ae).fontWeight)>=700)&&(_e.bold=!0),Object.keys(_e).length>0&&(me=K(me,_e)),parseFloat(Ee.textIndent||0)>0&&(me=new p.default().insert("	").concat(me)),me}function we(ae,me){var _e=ae.data;if(ae.parentNode.tagName==="O:P")return me.insert(_e.trim());if(_e.trim().length===0&&ae.parentNode.classList.contains("ql-clipboard"))return me;if(!J(ae.parentNode).whiteSpace.startsWith("pre")){var Ee=function(Oe,Te){return Te=Te.replace(/[^\u00a0]/g,""),Te.length<1&&Oe?" ":Te};_e=_e.replace(/\r\n/g," ").replace(/\n/g," "),_e=_e.replace(/\s\s+/g,Ee.bind(Ee,!0)),(ae.previousSibling==null&&X(ae.parentNode)||ae.previousSibling!=null&&X(ae.previousSibling))&&(_e=_e.replace(/^\s+/,Ee.bind(Ee,!1))),(ae.nextSibling==null&&X(ae.parentNode)||ae.nextSibling!=null&&X(ae.nextSibling))&&(_e=_e.replace(/\s+$/,Ee.bind(Ee,!1)))}return me.insert(_e)}r.default=z,r.matchAttributor=re,r.matchBlot=Q,r.matchNewline=ue,r.matchSpacing=he,r.matchText=we},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function y(x,_){for(var v=0;v<_.length;v++){var w=_[v];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(x,w.key,w)}}return function(x,_,v){return _&&y(x.prototype,_),v&&y(x,v),x}}(),a=function y(x,_,v){x===null&&(x=Function.prototype);var w=Object.getOwnPropertyDescriptor(x,_);if(w===void 0){var b=Object.getPrototypeOf(x);return b===null?void 0:y(b,_,v)}else{if("value"in w)return w.value;var N=w.get;return N===void 0?void 0:N.call(v)}},o=i(6),l=u(o);function u(y){return y&&y.__esModule?y:{default:y}}function d(y,x){if(!(y instanceof x))throw new TypeError("Cannot call a class as a function")}function p(y,x){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:y}function h(y,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);y.prototype=Object.create(x&&x.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(y,x):y.__proto__=x)}var m=function(y){h(x,y);function x(){return d(this,x),p(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return s(x,[{key:"optimize",value:function(v){a(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"optimize",this).call(this,v),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return a(x.__proto__||Object.getPrototypeOf(x),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),x}(l.default);m.blotName="bold",m.tagName=["STRONG","B"],r.default=m},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.addControls=r.default=void 0;var s=function(){function j(O,q){var I=[],D=!0,U=!1,W=void 0;try{for(var Y=O[Symbol.iterator](),H;!(D=(H=Y.next()).done)&&(I.push(H.value),!(q&&I.length===q));D=!0);}catch(B){U=!0,W=B}finally{try{!D&&Y.return&&Y.return()}finally{if(U)throw W}}return I}return function(O,q){if(Array.isArray(O))return O;if(Symbol.iterator in Object(O))return j(O,q);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function j(O,q){for(var I=0;I<q.length;I++){var D=q[I];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(O,D.key,D)}}return function(O,q,I){return q&&j(O.prototype,q),I&&j(O,I),O}}(),o=i(2),l=v(o),u=i(0),d=v(u),p=i(5),h=v(p),m=i(10),y=v(m),x=i(9),_=v(x);function v(j){return j&&j.__esModule?j:{default:j}}function w(j,O,q){return O in j?Object.defineProperty(j,O,{value:q,enumerable:!0,configurable:!0,writable:!0}):j[O]=q,j}function b(j,O){if(!(j instanceof O))throw new TypeError("Cannot call a class as a function")}function N(j,O){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:j}function E(j,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);j.prototype=Object.create(O&&O.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(j,O):j.__proto__=O)}var A=(0,y.default)("quill:toolbar"),P=function(j){E(O,j);function O(q,I){b(this,O);var D=N(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,q,I));if(Array.isArray(D.options.container)){var U=document.createElement("div");M(U,D.options.container),q.container.parentNode.insertBefore(U,q.container),D.container=U}else typeof D.options.container=="string"?D.container=document.querySelector(D.options.container):D.container=D.options.container;if(!(D.container instanceof HTMLElement)){var W;return W=A.error("Container required for toolbar",D.options),N(D,W)}return D.container.classList.add("ql-toolbar"),D.controls=[],D.handlers={},Object.keys(D.options.handlers).forEach(function(Y){D.addHandler(Y,D.options.handlers[Y])}),[].forEach.call(D.container.querySelectorAll("button, select"),function(Y){D.attach(Y)}),D.quill.on(h.default.events.EDITOR_CHANGE,function(Y,H){Y===h.default.events.SELECTION_CHANGE&&D.update(H)}),D.quill.on(h.default.events.SCROLL_OPTIMIZE,function(){var Y=D.quill.selection.getRange(),H=s(Y,1),B=H[0];D.update(B)}),D}return a(O,[{key:"addHandler",value:function(I,D){this.handlers[I]=D}},{key:"attach",value:function(I){var D=this,U=[].find.call(I.classList,function(Y){return Y.indexOf("ql-")===0});if(U){if(U=U.slice(3),I.tagName==="BUTTON"&&I.setAttribute("type","button"),this.handlers[U]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[U]==null){A.warn("ignoring attaching to disabled format",U,I);return}if(d.default.query(U)==null){A.warn("ignoring attaching to nonexistent format",U,I);return}}var W=I.tagName==="SELECT"?"change":"click";I.addEventListener(W,function(Y){var H=void 0;if(I.tagName==="SELECT"){if(I.selectedIndex<0)return;var B=I.options[I.selectedIndex];B.hasAttribute("selected")?H=!1:H=B.value||!1}else I.classList.contains("ql-active")?H=!1:H=I.value||!I.hasAttribute("value"),Y.preventDefault();D.quill.focus();var L=D.quill.selection.getRange(),z=s(L,1),K=z[0];if(D.handlers[U]!=null)D.handlers[U].call(D,H);else if(d.default.query(U).prototype instanceof d.default.Embed){if(H=prompt("Enter "+U),!H)return;D.quill.updateContents(new l.default().retain(K.index).delete(K.length).insert(w({},U,H)),h.default.sources.USER)}else D.quill.format(U,H,h.default.sources.USER);D.update(K)}),this.controls.push([U,I])}}},{key:"update",value:function(I){var D=I==null?{}:this.quill.getFormat(I);this.controls.forEach(function(U){var W=s(U,2),Y=W[0],H=W[1];if(H.tagName==="SELECT"){var B=void 0;if(I==null)B=null;else if(D[Y]==null)B=H.querySelector("option[selected]");else if(!Array.isArray(D[Y])){var L=D[Y];typeof L=="string"&&(L=L.replace(/\"/g,'\\"')),B=H.querySelector('option[value="'+L+'"]')}B==null?(H.value="",H.selectedIndex=-1):B.selected=!0}else if(I==null)H.classList.remove("ql-active");else if(H.hasAttribute("value")){var z=D[Y]===H.getAttribute("value")||D[Y]!=null&&D[Y].toString()===H.getAttribute("value")||D[Y]==null&&!H.getAttribute("value");H.classList.toggle("ql-active",z)}else H.classList.toggle("ql-active",D[Y]!=null)})}}]),O}(_.default);P.DEFAULTS={};function T(j,O,q){var I=document.createElement("button");I.setAttribute("type","button"),I.classList.add("ql-"+O),q!=null&&(I.value=q),j.appendChild(I)}function M(j,O){Array.isArray(O[0])||(O=[O]),O.forEach(function(q){var I=document.createElement("span");I.classList.add("ql-formats"),q.forEach(function(D){if(typeof D=="string")T(I,D);else{var U=Object.keys(D)[0],W=D[U];Array.isArray(W)?k(I,U,W):T(I,U,W)}}),j.appendChild(I)})}function k(j,O,q){var I=document.createElement("select");I.classList.add("ql-"+O),q.forEach(function(D){var U=document.createElement("option");D!==!1?U.setAttribute("value",D):U.setAttribute("selected","selected"),I.appendChild(U)}),j.appendChild(I)}P.DEFAULTS={container:null,handlers:{clean:function(){var O=this,q=this.quill.getSelection();if(q!=null)if(q.length==0){var I=this.quill.getFormat();Object.keys(I).forEach(function(D){d.default.query(D,d.default.Scope.INLINE)!=null&&O.quill.format(D,!1)})}else this.quill.removeFormat(q,h.default.sources.USER)},direction:function(O){var q=this.quill.getFormat().align;O==="rtl"&&q==null?this.quill.format("align","right",h.default.sources.USER):!O&&q==="right"&&this.quill.format("align",!1,h.default.sources.USER),this.quill.format("direction",O,h.default.sources.USER)},indent:function(O){var q=this.quill.getSelection(),I=this.quill.getFormat(q),D=parseInt(I.indent||0);if(O==="+1"||O==="-1"){var U=O==="+1"?1:-1;I.direction==="rtl"&&(U*=-1),this.quill.format("indent",D+U,h.default.sources.USER)}},link:function(O){O===!0&&(O=prompt("Enter link URL:")),this.quill.format("link",O,h.default.sources.USER)},list:function(O){var q=this.quill.getSelection(),I=this.quill.getFormat(q);O==="check"?I.list==="checked"||I.list==="unchecked"?this.quill.format("list",!1,h.default.sources.USER):this.quill.format("list","unchecked",h.default.sources.USER):this.quill.format("list",O,h.default.sources.USER)}}},r.default=P,r.addControls=M},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function y(x,_){for(var v=0;v<_.length;v++){var w=_[v];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(x,w.key,w)}}return function(x,_,v){return _&&y(x.prototype,_),v&&y(x,v),x}}(),a=function y(x,_,v){x===null&&(x=Function.prototype);var w=Object.getOwnPropertyDescriptor(x,_);if(w===void 0){var b=Object.getPrototypeOf(x);return b===null?void 0:y(b,_,v)}else{if("value"in w)return w.value;var N=w.get;return N===void 0?void 0:N.call(v)}},o=i(28),l=u(o);function u(y){return y&&y.__esModule?y:{default:y}}function d(y,x){if(!(y instanceof x))throw new TypeError("Cannot call a class as a function")}function p(y,x){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:y}function h(y,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);y.prototype=Object.create(x&&x.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(y,x):y.__proto__=x)}var m=function(y){h(x,y);function x(_,v){d(this,x);var w=p(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,_));return w.label.innerHTML=v,w.container.classList.add("ql-color-picker"),[].slice.call(w.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(b){b.classList.add("ql-primary")}),w}return s(x,[{key:"buildItem",value:function(v){var w=a(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"buildItem",this).call(this,v);return w.style.backgroundColor=v.getAttribute("value")||"",w}},{key:"selectItem",value:function(v,w){a(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"selectItem",this).call(this,v,w);var b=this.label.querySelector(".ql-color-label"),N=v&&v.getAttribute("data-value")||"";b&&(b.tagName==="line"?b.style.stroke=N:b.style.fill=N)}}]),x}(l.default);r.default=m},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function y(x,_){for(var v=0;v<_.length;v++){var w=_[v];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(x,w.key,w)}}return function(x,_,v){return _&&y(x.prototype,_),v&&y(x,v),x}}(),a=function y(x,_,v){x===null&&(x=Function.prototype);var w=Object.getOwnPropertyDescriptor(x,_);if(w===void 0){var b=Object.getPrototypeOf(x);return b===null?void 0:y(b,_,v)}else{if("value"in w)return w.value;var N=w.get;return N===void 0?void 0:N.call(v)}},o=i(28),l=u(o);function u(y){return y&&y.__esModule?y:{default:y}}function d(y,x){if(!(y instanceof x))throw new TypeError("Cannot call a class as a function")}function p(y,x){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:y}function h(y,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);y.prototype=Object.create(x&&x.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(y,x):y.__proto__=x)}var m=function(y){h(x,y);function x(_,v){d(this,x);var w=p(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,_));return w.container.classList.add("ql-icon-picker"),[].forEach.call(w.container.querySelectorAll(".ql-picker-item"),function(b){b.innerHTML=v[b.getAttribute("data-value")||""]}),w.defaultItem=w.container.querySelector(".ql-selected"),w.selectItem(w.defaultItem),w}return s(x,[{key:"selectItem",value:function(v,w){a(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"selectItem",this).call(this,v,w),v=v||this.defaultItem,this.label.innerHTML=v.innerHTML}}]),x}(l.default);r.default=m},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function l(u,d){for(var p=0;p<d.length;p++){var h=d[p];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(u,h.key,h)}}return function(u,d,p){return d&&l(u.prototype,d),p&&l(u,p),u}}();function a(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}var o=function(){function l(u,d){var p=this;a(this,l),this.quill=u,this.boundsContainer=d||document.body,this.root=u.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){p.root.style.marginTop=-1*p.quill.root.scrollTop+"px"}),this.hide()}return s(l,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(d){var p=d.left+d.width/2-this.root.offsetWidth/2,h=d.bottom+this.quill.root.scrollTop;this.root.style.left=p+"px",this.root.style.top=h+"px",this.root.classList.remove("ql-flip");var m=this.boundsContainer.getBoundingClientRect(),y=this.root.getBoundingClientRect(),x=0;if(y.right>m.right&&(x=m.right-y.right,this.root.style.left=p+x+"px"),y.left<m.left&&(x=m.left-y.left,this.root.style.left=p+x+"px"),y.bottom>m.bottom){var _=y.bottom-y.top,v=d.bottom-d.top+_;this.root.style.top=h-v+"px",this.root.classList.add("ql-flip")}return x}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),l}();r.default=o},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function k(j,O){var q=[],I=!0,D=!1,U=void 0;try{for(var W=j[Symbol.iterator](),Y;!(I=(Y=W.next()).done)&&(q.push(Y.value),!(O&&q.length===O));I=!0);}catch(H){D=!0,U=H}finally{try{!I&&W.return&&W.return()}finally{if(D)throw U}}return q}return function(j,O){if(Array.isArray(j))return j;if(Symbol.iterator in Object(j))return k(j,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function k(j,O,q){j===null&&(j=Function.prototype);var I=Object.getOwnPropertyDescriptor(j,O);if(I===void 0){var D=Object.getPrototypeOf(j);return D===null?void 0:k(D,O,q)}else{if("value"in I)return I.value;var U=I.get;return U===void 0?void 0:U.call(q)}},o=function(){function k(j,O){for(var q=0;q<O.length;q++){var I=O[q];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(j,I.key,I)}}return function(j,O,q){return O&&k(j.prototype,O),q&&k(j,q),j}}(),l=i(3),u=b(l),d=i(8),p=b(d),h=i(43),m=b(h),y=i(27),x=b(y),_=i(15),v=i(41),w=b(v);function b(k){return k&&k.__esModule?k:{default:k}}function N(k,j){if(!(k instanceof j))throw new TypeError("Cannot call a class as a function")}function E(k,j){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:k}function A(k,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);k.prototype=Object.create(j&&j.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(k,j):k.__proto__=j)}var P=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],T=function(k){A(j,k);function j(O,q){N(this,j),q.modules.toolbar!=null&&q.modules.toolbar.container==null&&(q.modules.toolbar.container=P);var I=E(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,O,q));return I.quill.container.classList.add("ql-snow"),I}return o(j,[{key:"extendToolbar",value:function(q){q.container.classList.add("ql-snow"),this.buildButtons([].slice.call(q.container.querySelectorAll("button")),w.default),this.buildPickers([].slice.call(q.container.querySelectorAll("select")),w.default),this.tooltip=new M(this.quill,this.options.bounds),q.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(I,D){q.handlers.link.call(q,!D.format.link)})}}]),j}(m.default);T.DEFAULTS=(0,u.default)(!0,{},m.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(j){if(j){var O=this.quill.getSelection();if(O==null||O.length==0)return;var q=this.quill.getText(O);/^\S+@\S+\.\S+$/.test(q)&&q.indexOf("mailto:")!==0&&(q="mailto:"+q);var I=this.quill.theme.tooltip;I.edit("link",q)}else this.quill.format("link",!1)}}}}});var M=function(k){A(j,k);function j(O,q){N(this,j);var I=E(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,O,q));return I.preview=I.root.querySelector("a.ql-preview"),I}return o(j,[{key:"listen",value:function(){var q=this;a(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(I){q.root.classList.contains("ql-editing")?q.save():q.edit("link",q.preview.textContent),I.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(I){if(q.linkRange!=null){var D=q.linkRange;q.restoreFocus(),q.quill.formatText(D,"link",!1,p.default.sources.USER),delete q.linkRange}I.preventDefault(),q.hide()}),this.quill.on(p.default.events.SELECTION_CHANGE,function(I,D,U){if(I!=null){if(I.length===0&&U===p.default.sources.USER){var W=q.quill.scroll.descendant(x.default,I.index),Y=s(W,2),H=Y[0],B=Y[1];if(H!=null){q.linkRange=new _.Range(I.index-B,H.length());var L=x.default.formats(H.domNode);q.preview.textContent=L,q.preview.setAttribute("href",L),q.show(),q.position(q.quill.getBounds(q.linkRange));return}}else delete q.linkRange;q.hide()}})}},{key:"show",value:function(){a(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),j}(h.BaseTooltip);M.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),r.default=T},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(29),a=xe(s),o=i(36),l=i(38),u=i(64),d=i(65),p=xe(d),h=i(66),m=xe(h),y=i(67),x=xe(y),_=i(37),v=i(26),w=i(39),b=i(40),N=i(56),E=xe(N),A=i(68),P=xe(A),T=i(27),M=xe(T),k=i(69),j=xe(k),O=i(70),q=xe(O),I=i(71),D=xe(I),U=i(72),W=xe(U),Y=i(73),H=xe(Y),B=i(13),L=xe(B),z=i(74),K=xe(z),J=i(75),ne=xe(J),X=i(57),G=xe(X),te=i(41),re=xe(te),Q=i(28),se=xe(Q),de=i(59),le=xe(de),ue=i(60),he=xe(ue),qe=i(61),we=xe(qe),ae=i(108),me=xe(ae),_e=i(62),Ee=xe(_e);function xe(Oe){return Oe&&Oe.__esModule?Oe:{default:Oe}}a.default.register({"attributors/attribute/direction":l.DirectionAttribute,"attributors/class/align":o.AlignClass,"attributors/class/background":_.BackgroundClass,"attributors/class/color":v.ColorClass,"attributors/class/direction":l.DirectionClass,"attributors/class/font":w.FontClass,"attributors/class/size":b.SizeClass,"attributors/style/align":o.AlignStyle,"attributors/style/background":_.BackgroundStyle,"attributors/style/color":v.ColorStyle,"attributors/style/direction":l.DirectionStyle,"attributors/style/font":w.FontStyle,"attributors/style/size":b.SizeStyle},!0),a.default.register({"formats/align":o.AlignClass,"formats/direction":l.DirectionClass,"formats/indent":u.IndentClass,"formats/background":_.BackgroundStyle,"formats/color":v.ColorStyle,"formats/font":w.FontClass,"formats/size":b.SizeClass,"formats/blockquote":p.default,"formats/code-block":L.default,"formats/header":m.default,"formats/list":x.default,"formats/bold":E.default,"formats/code":B.Code,"formats/italic":P.default,"formats/link":M.default,"formats/script":j.default,"formats/strike":q.default,"formats/underline":D.default,"formats/image":W.default,"formats/video":H.default,"formats/list/item":y.ListItem,"modules/formula":K.default,"modules/syntax":ne.default,"modules/toolbar":G.default,"themes/bubble":me.default,"themes/snow":Ee.default,"ui/icons":re.default,"ui/picker":se.default,"ui/icon-picker":he.default,"ui/color-picker":le.default,"ui/tooltip":we.default},!0),r.default=a.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.IndentClass=void 0;var s=function(){function x(_,v){for(var w=0;w<v.length;w++){var b=v[w];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(_,b.key,b)}}return function(_,v,w){return v&&x(_.prototype,v),w&&x(_,w),_}}(),a=function x(_,v,w){_===null&&(_=Function.prototype);var b=Object.getOwnPropertyDescriptor(_,v);if(b===void 0){var N=Object.getPrototypeOf(_);return N===null?void 0:x(N,v,w)}else{if("value"in b)return b.value;var E=b.get;return E===void 0?void 0:E.call(w)}},o=i(0),l=u(o);function u(x){return x&&x.__esModule?x:{default:x}}function d(x,_){if(!(x instanceof _))throw new TypeError("Cannot call a class as a function")}function p(x,_){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:x}function h(x,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);x.prototype=Object.create(_&&_.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(x,_):x.__proto__=_)}var m=function(x){h(_,x);function _(){return d(this,_),p(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return s(_,[{key:"add",value:function(w,b){if(b==="+1"||b==="-1"){var N=this.value(w)||0;b=b==="+1"?N+1:N-1}return b===0?(this.remove(w),!0):a(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"add",this).call(this,w,b)}},{key:"canAdd",value:function(w,b){return a(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"canAdd",this).call(this,w,b)||a(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"canAdd",this).call(this,w,parseInt(b))}},{key:"value",value:function(w){return parseInt(a(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"value",this).call(this,w))||void 0}}]),_}(l.default.Attributor.Class),y=new m("indent","ql-indent",{scope:l.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});r.IndentClass=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(4),a=o(s);function o(h){return h&&h.__esModule?h:{default:h}}function l(h,m){if(!(h instanceof m))throw new TypeError("Cannot call a class as a function")}function u(h,m){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:h}function d(h,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);h.prototype=Object.create(m&&m.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(h,m):h.__proto__=m)}var p=function(h){d(m,h);function m(){return l(this,m),u(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m}(a.default);p.blotName="blockquote",p.tagName="blockquote",r.default=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function m(y,x){for(var _=0;_<x.length;_++){var v=x[_];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(y,v.key,v)}}return function(y,x,_){return x&&m(y.prototype,x),_&&m(y,_),y}}(),a=i(4),o=l(a);function l(m){return m&&m.__esModule?m:{default:m}}function u(m,y){if(!(m instanceof y))throw new TypeError("Cannot call a class as a function")}function d(m,y){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:m}function p(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);m.prototype=Object.create(y&&y.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(m,y):m.__proto__=y)}var h=function(m){p(y,m);function y(){return u(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return s(y,null,[{key:"formats",value:function(_){return this.tagName.indexOf(_.tagName)+1}}]),y}(o.default);h.blotName="header",h.tagName=["H1","H2","H3","H4","H5","H6"],r.default=h},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ListItem=void 0;var s=function(){function N(E,A){for(var P=0;P<A.length;P++){var T=A[P];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(E,T.key,T)}}return function(E,A,P){return A&&N(E.prototype,A),P&&N(E,P),E}}(),a=function N(E,A,P){E===null&&(E=Function.prototype);var T=Object.getOwnPropertyDescriptor(E,A);if(T===void 0){var M=Object.getPrototypeOf(E);return M===null?void 0:N(M,A,P)}else{if("value"in T)return T.value;var k=T.get;return k===void 0?void 0:k.call(P)}},o=i(0),l=m(o),u=i(4),d=m(u),p=i(25),h=m(p);function m(N){return N&&N.__esModule?N:{default:N}}function y(N,E,A){return E in N?Object.defineProperty(N,E,{value:A,enumerable:!0,configurable:!0,writable:!0}):N[E]=A,N}function x(N,E){if(!(N instanceof E))throw new TypeError("Cannot call a class as a function")}function _(N,E){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:N}function v(N,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);N.prototype=Object.create(E&&E.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(N,E):N.__proto__=E)}var w=function(N){v(E,N);function E(){return x(this,E),_(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return s(E,[{key:"format",value:function(P,T){P===b.blotName&&!T?this.replaceWith(l.default.create(this.statics.scope)):a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"format",this).call(this,P,T)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(P,T){return this.parent.isolate(this.offset(this.parent),this.length()),P===this.parent.statics.blotName?(this.parent.replaceWith(P,T),this):(this.parent.unwrap(),a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"replaceWith",this).call(this,P,T))}}],[{key:"formats",value:function(P){return P.tagName===this.tagName?void 0:a(E.__proto__||Object.getPrototypeOf(E),"formats",this).call(this,P)}}]),E}(d.default);w.blotName="list-item",w.tagName="LI";var b=function(N){v(E,N),s(E,null,[{key:"create",value:function(P){var T=P==="ordered"?"OL":"UL",M=a(E.__proto__||Object.getPrototypeOf(E),"create",this).call(this,T);return(P==="checked"||P==="unchecked")&&M.setAttribute("data-checked",P==="checked"),M}},{key:"formats",value:function(P){if(P.tagName==="OL")return"ordered";if(P.tagName==="UL")return P.hasAttribute("data-checked")?P.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function E(A){x(this,E);var P=_(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,A)),T=function(k){if(k.target.parentNode===A){var j=P.statics.formats(A),O=l.default.find(k.target);j==="checked"?O.format("list","unchecked"):j==="unchecked"&&O.format("list","checked")}};return A.addEventListener("touchstart",T),A.addEventListener("mousedown",T),P}return s(E,[{key:"format",value:function(P,T){this.children.length>0&&this.children.tail.format(P,T)}},{key:"formats",value:function(){return y({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(P,T){if(P instanceof w)a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertBefore",this).call(this,P,T);else{var M=T==null?this.length():T.offset(this),k=this.split(M);k.parent.insertBefore(P,k)}}},{key:"optimize",value:function(P){a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,P);var T=this.next;T!=null&&T.prev===this&&T.statics.blotName===this.statics.blotName&&T.domNode.tagName===this.domNode.tagName&&T.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(T.moveChildren(this),T.remove())}},{key:"replace",value:function(P){if(P.statics.blotName!==this.statics.blotName){var T=l.default.create(this.statics.defaultChild);P.moveChildren(T),this.appendChild(T)}a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"replace",this).call(this,P)}}]),E}(h.default);b.blotName="list",b.scope=l.default.Scope.BLOCK_BLOT,b.tagName=["OL","UL"],b.defaultChild="list-item",b.allowedChildren=[w],r.ListItem=w,r.default=b},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(56),a=o(s);function o(h){return h&&h.__esModule?h:{default:h}}function l(h,m){if(!(h instanceof m))throw new TypeError("Cannot call a class as a function")}function u(h,m){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:h}function d(h,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);h.prototype=Object.create(m&&m.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(h,m):h.__proto__=m)}var p=function(h){d(m,h);function m(){return l(this,m),u(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m}(a.default);p.blotName="italic",p.tagName=["EM","I"],r.default=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function y(x,_){for(var v=0;v<_.length;v++){var w=_[v];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(x,w.key,w)}}return function(x,_,v){return _&&y(x.prototype,_),v&&y(x,v),x}}(),a=function y(x,_,v){x===null&&(x=Function.prototype);var w=Object.getOwnPropertyDescriptor(x,_);if(w===void 0){var b=Object.getPrototypeOf(x);return b===null?void 0:y(b,_,v)}else{if("value"in w)return w.value;var N=w.get;return N===void 0?void 0:N.call(v)}},o=i(6),l=u(o);function u(y){return y&&y.__esModule?y:{default:y}}function d(y,x){if(!(y instanceof x))throw new TypeError("Cannot call a class as a function")}function p(y,x){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:y}function h(y,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);y.prototype=Object.create(x&&x.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(y,x):y.__proto__=x)}var m=function(y){h(x,y);function x(){return d(this,x),p(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return s(x,null,[{key:"create",value:function(v){return v==="super"?document.createElement("sup"):v==="sub"?document.createElement("sub"):a(x.__proto__||Object.getPrototypeOf(x),"create",this).call(this,v)}},{key:"formats",value:function(v){if(v.tagName==="SUB")return"sub";if(v.tagName==="SUP")return"super"}}]),x}(l.default);m.blotName="script",m.tagName=["SUB","SUP"],r.default=m},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(6),a=o(s);function o(h){return h&&h.__esModule?h:{default:h}}function l(h,m){if(!(h instanceof m))throw new TypeError("Cannot call a class as a function")}function u(h,m){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:h}function d(h,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);h.prototype=Object.create(m&&m.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(h,m):h.__proto__=m)}var p=function(h){d(m,h);function m(){return l(this,m),u(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m}(a.default);p.blotName="strike",p.tagName="S",r.default=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(6),a=o(s);function o(h){return h&&h.__esModule?h:{default:h}}function l(h,m){if(!(h instanceof m))throw new TypeError("Cannot call a class as a function")}function u(h,m){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:h}function d(h,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);h.prototype=Object.create(m&&m.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(h,m):h.__proto__=m)}var p=function(h){d(m,h);function m(){return l(this,m),u(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m}(a.default);p.blotName="underline",p.tagName="U",r.default=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function _(v,w){for(var b=0;b<w.length;b++){var N=w[b];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(v,N.key,N)}}return function(v,w,b){return w&&_(v.prototype,w),b&&_(v,b),v}}(),a=function _(v,w,b){v===null&&(v=Function.prototype);var N=Object.getOwnPropertyDescriptor(v,w);if(N===void 0){var E=Object.getPrototypeOf(v);return E===null?void 0:_(E,w,b)}else{if("value"in N)return N.value;var A=N.get;return A===void 0?void 0:A.call(b)}},o=i(0),l=d(o),u=i(27);function d(_){return _&&_.__esModule?_:{default:_}}function p(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function h(_,v){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:_}function m(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(_,v):_.__proto__=v)}var y=["alt","height","width"],x=function(_){m(v,_);function v(){return p(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return s(v,[{key:"format",value:function(b,N){y.indexOf(b)>-1?N?this.domNode.setAttribute(b,N):this.domNode.removeAttribute(b):a(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,b,N)}}],[{key:"create",value:function(b){var N=a(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,b);return typeof b=="string"&&N.setAttribute("src",this.sanitize(b)),N}},{key:"formats",value:function(b){return y.reduce(function(N,E){return b.hasAttribute(E)&&(N[E]=b.getAttribute(E)),N},{})}},{key:"match",value:function(b){return/\.(jpe?g|gif|png)$/.test(b)||/^data:image\/.+;base64/.test(b)}},{key:"sanitize",value:function(b){return(0,u.sanitize)(b,["http","https","data"])?b:"//:0"}},{key:"value",value:function(b){return b.getAttribute("src")}}]),v}(l.default.Embed);x.blotName="image",x.tagName="IMG",r.default=x},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function _(v,w){for(var b=0;b<w.length;b++){var N=w[b];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(v,N.key,N)}}return function(v,w,b){return w&&_(v.prototype,w),b&&_(v,b),v}}(),a=function _(v,w,b){v===null&&(v=Function.prototype);var N=Object.getOwnPropertyDescriptor(v,w);if(N===void 0){var E=Object.getPrototypeOf(v);return E===null?void 0:_(E,w,b)}else{if("value"in N)return N.value;var A=N.get;return A===void 0?void 0:A.call(b)}},o=i(4),l=i(27),u=d(l);function d(_){return _&&_.__esModule?_:{default:_}}function p(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function h(_,v){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:_}function m(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(_,v):_.__proto__=v)}var y=["height","width"],x=function(_){m(v,_);function v(){return p(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return s(v,[{key:"format",value:function(b,N){y.indexOf(b)>-1?N?this.domNode.setAttribute(b,N):this.domNode.removeAttribute(b):a(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,b,N)}}],[{key:"create",value:function(b){var N=a(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,b);return N.setAttribute("frameborder","0"),N.setAttribute("allowfullscreen",!0),N.setAttribute("src",this.sanitize(b)),N}},{key:"formats",value:function(b){return y.reduce(function(N,E){return b.hasAttribute(E)&&(N[E]=b.getAttribute(E)),N},{})}},{key:"sanitize",value:function(b){return u.default.sanitize(b)}},{key:"value",value:function(b){return b.getAttribute("src")}}]),v}(o.BlockEmbed);x.blotName="video",x.className="ql-video",x.tagName="IFRAME",r.default=x},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.FormulaBlot=void 0;var s=function(){function b(N,E){for(var A=0;A<E.length;A++){var P=E[A];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(N,P.key,P)}}return function(N,E,A){return E&&b(N.prototype,E),A&&b(N,A),N}}(),a=function b(N,E,A){N===null&&(N=Function.prototype);var P=Object.getOwnPropertyDescriptor(N,E);if(P===void 0){var T=Object.getPrototypeOf(N);return T===null?void 0:b(T,E,A)}else{if("value"in P)return P.value;var M=P.get;return M===void 0?void 0:M.call(A)}},o=i(35),l=m(o),u=i(5),d=m(u),p=i(9),h=m(p);function m(b){return b&&b.__esModule?b:{default:b}}function y(b,N){if(!(b instanceof N))throw new TypeError("Cannot call a class as a function")}function x(b,N){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:b}function _(b,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);b.prototype=Object.create(N&&N.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(b,N):b.__proto__=N)}var v=function(b){_(N,b);function N(){return y(this,N),x(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return s(N,null,[{key:"create",value:function(A){var P=a(N.__proto__||Object.getPrototypeOf(N),"create",this).call(this,A);return typeof A=="string"&&(window.katex.render(A,P,{throwOnError:!1,errorColor:"#f00"}),P.setAttribute("data-value",A)),P}},{key:"value",value:function(A){return A.getAttribute("data-value")}}]),N}(l.default);v.blotName="formula",v.className="ql-formula",v.tagName="SPAN";var w=function(b){_(N,b),s(N,null,[{key:"register",value:function(){d.default.register(v,!0)}}]);function N(){y(this,N);var E=x(this,(N.__proto__||Object.getPrototypeOf(N)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return E}return N}(h.default);r.FormulaBlot=v,r.default=w},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CodeToken=r.CodeBlock=void 0;var s=function(){function A(P,T){for(var M=0;M<T.length;M++){var k=T[M];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(P,k.key,k)}}return function(P,T,M){return T&&A(P.prototype,T),M&&A(P,M),P}}(),a=function A(P,T,M){P===null&&(P=Function.prototype);var k=Object.getOwnPropertyDescriptor(P,T);if(k===void 0){var j=Object.getPrototypeOf(P);return j===null?void 0:A(j,T,M)}else{if("value"in k)return k.value;var O=k.get;return O===void 0?void 0:O.call(M)}},o=i(0),l=x(o),u=i(5),d=x(u),p=i(9),h=x(p),m=i(13),y=x(m);function x(A){return A&&A.__esModule?A:{default:A}}function _(A,P){if(!(A instanceof P))throw new TypeError("Cannot call a class as a function")}function v(A,P){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:A}function w(A,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);A.prototype=Object.create(P&&P.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(A,P):A.__proto__=P)}var b=function(A){w(P,A);function P(){return _(this,P),v(this,(P.__proto__||Object.getPrototypeOf(P)).apply(this,arguments))}return s(P,[{key:"replaceWith",value:function(M){this.domNode.textContent=this.domNode.textContent,this.attach(),a(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"replaceWith",this).call(this,M)}},{key:"highlight",value:function(M){var k=this.domNode.textContent;this.cachedText!==k&&((k.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=M(k),this.domNode.normalize(),this.attach()),this.cachedText=k)}}]),P}(y.default);b.className="ql-syntax";var N=new l.default.Attributor.Class("token","hljs",{scope:l.default.Scope.INLINE}),E=function(A){w(P,A),s(P,null,[{key:"register",value:function(){d.default.register(N,!0),d.default.register(b,!0)}}]);function P(T,M){_(this,P);var k=v(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,T,M));if(typeof k.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var j=null;return k.quill.on(d.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(j),j=setTimeout(function(){k.highlight(),j=null},k.options.interval)}),k.highlight(),k}return s(P,[{key:"highlight",value:function(){var M=this;if(!this.quill.selection.composing){this.quill.update(d.default.sources.USER);var k=this.quill.getSelection();this.quill.scroll.descendants(b).forEach(function(j){j.highlight(M.options.highlight)}),this.quill.update(d.default.sources.SILENT),k!=null&&this.quill.setSelection(k,d.default.sources.SILENT)}}}]),P}(h.default);E.DEFAULTS={highlight:function(){return window.hljs==null?null:function(A){var P=window.hljs.highlightAuto(A);return P.value}}(),interval:1e3},r.CodeBlock=b,r.CodeToken=N,r.default=E},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BubbleTooltip=void 0;var s=function P(T,M,k){T===null&&(T=Function.prototype);var j=Object.getOwnPropertyDescriptor(T,M);if(j===void 0){var O=Object.getPrototypeOf(T);return O===null?void 0:P(O,M,k)}else{if("value"in j)return j.value;var q=j.get;return q===void 0?void 0:q.call(k)}},a=function(){function P(T,M){for(var k=0;k<M.length;k++){var j=M[k];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(T,j.key,j)}}return function(T,M,k){return M&&P(T.prototype,M),k&&P(T,k),T}}(),o=i(3),l=_(o),u=i(8),d=_(u),p=i(43),h=_(p),m=i(15),y=i(41),x=_(y);function _(P){return P&&P.__esModule?P:{default:P}}function v(P,T){if(!(P instanceof T))throw new TypeError("Cannot call a class as a function")}function w(P,T){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:P}function b(P,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);P.prototype=Object.create(T&&T.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(P,T):P.__proto__=T)}var N=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],E=function(P){b(T,P);function T(M,k){v(this,T),k.modules.toolbar!=null&&k.modules.toolbar.container==null&&(k.modules.toolbar.container=N);var j=w(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,M,k));return j.quill.container.classList.add("ql-bubble"),j}return a(T,[{key:"extendToolbar",value:function(k){this.tooltip=new A(this.quill,this.options.bounds),this.tooltip.root.appendChild(k.container),this.buildButtons([].slice.call(k.container.querySelectorAll("button")),x.default),this.buildPickers([].slice.call(k.container.querySelectorAll("select")),x.default)}}]),T}(h.default);E.DEFAULTS=(0,l.default)(!0,{},h.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(T){T?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var A=function(P){b(T,P);function T(M,k){v(this,T);var j=w(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,M,k));return j.quill.on(d.default.events.EDITOR_CHANGE,function(O,q,I,D){if(O===d.default.events.SELECTION_CHANGE)if(q!=null&&q.length>0&&D===d.default.sources.USER){j.show(),j.root.style.left="0px",j.root.style.width="",j.root.style.width=j.root.offsetWidth+"px";var U=j.quill.getLines(q.index,q.length);if(U.length===1)j.position(j.quill.getBounds(q));else{var W=U[U.length-1],Y=j.quill.getIndex(W),H=Math.min(W.length()-1,q.index+q.length-Y),B=j.quill.getBounds(new m.Range(Y,H));j.position(B)}}else document.activeElement!==j.textbox&&j.quill.hasFocus()&&j.hide()}),j}return a(T,[{key:"listen",value:function(){var k=this;s(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){k.root.classList.remove("ql-editing")}),this.quill.on(d.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!k.root.classList.contains("ql-hidden")){var j=k.quill.getSelection();j!=null&&k.position(k.quill.getBounds(j))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(k){var j=s(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"position",this).call(this,k),O=this.root.querySelector(".ql-tooltip-arrow");if(O.style.marginLeft="",j===0)return j;O.style.marginLeft=-1*j-O.offsetWidth/2+"px"}}]),T}(p.BaseTooltip);A.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),r.BubbleTooltip=A,r.default=E},function(n,r,i){n.exports=i(63)}]).default})})(UI);var xre=UI.exports,bre=Qt&&Qt.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),jg=Qt&&Qt.__assign||function(){return jg=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},jg.apply(this,arguments)},wre=Qt&&Qt.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)r[i]=s[a];return r},O0=Qt&&Qt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Ns=O0(V),_re=O0(qo),Qd=O0(yre),_j=O0(xre),Nre=function(t){bre(e,t);function e(n){var r=t.call(this,n)||this;r.dirtyProps=["modules","formats","bounds","theme","children"],r.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],r.state={generation:0},r.selection=null,r.onEditorChange=function(s,a,o,l){var u,d,p,h;s==="text-change"?(d=(u=r).onEditorChangeText)===null||d===void 0||d.call(u,r.editor.root.innerHTML,a,l,r.unprivilegedEditor):s==="selection-change"&&((h=(p=r).onEditorChangeSelection)===null||h===void 0||h.call(p,a,l,r.unprivilegedEditor))};var i=r.isControlled()?n.value:n.defaultValue;return r.value=i??"",r}return e.prototype.validateProps=function(n){var r;if(Ns.default.Children.count(n.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(Ns.default.Children.count(n.children)){var i=Ns.default.Children.only(n.children);if(((r=i)===null||r===void 0?void 0:r.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&n.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},e.prototype.shouldComponentUpdate=function(n,r){var i=this,s;if(this.validateProps(n),!this.editor||this.state.generation!==r.generation)return!0;if("value"in n){var a=this.getEditorContents(),o=(s=n.value,s??"");this.isEqualValue(o,a)||this.setEditorContents(this.editor,o)}return n.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,n.readOnly),wre(this.cleanProps,this.dirtyProps).some(function(l){return!Qd.default(n[l],i.props[l])})},e.prototype.shouldComponentRegenerate=function(n){var r=this;return this.dirtyProps.some(function(i){return!Qd.default(n[i],r.props[i])})},e.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},e.prototype.componentWillUnmount=function(){this.destroyEditor()},e.prototype.componentDidUpdate=function(n,r){var i=this;if(this.editor&&this.shouldComponentRegenerate(n)){var s=this.editor.getContents(),a=this.editor.getSelection();this.regenerationSnapshot={delta:s,selection:a},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==r.generation){var o=this.regenerationSnapshot,s=o.delta,l=o.selection;delete this.regenerationSnapshot,this.instantiateEditor();var u=this.editor;u.setContents(s),Nj(function(){return i.setEditorSelection(u,l)})}},e.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},e.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},e.prototype.isControlled=function(){return"value"in this.props},e.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},e.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},e.prototype.createEditor=function(n,r){var i=new _j.default(n,r);return r.tabIndex!=null&&this.setEditorTabIndex(i,r.tabIndex),this.hookEditor(i),i},e.prototype.hookEditor=function(n){this.unprivilegedEditor=this.makeUnprivilegedEditor(n),n.on("editor-change",this.onEditorChange)},e.prototype.unhookEditor=function(n){n.off("editor-change",this.onEditorChange)},e.prototype.getEditorContents=function(){return this.value},e.prototype.getEditorSelection=function(){return this.selection},e.prototype.isDelta=function(n){return n&&n.ops},e.prototype.isEqualValue=function(n,r){return this.isDelta(n)&&this.isDelta(r)?Qd.default(n.ops,r.ops):Qd.default(n,r)},e.prototype.setEditorContents=function(n,r){var i=this;this.value=r;var s=this.getEditorSelection();typeof r=="string"?n.setContents(n.clipboard.convert(r)):n.setContents(r),Nj(function(){return i.setEditorSelection(n,s)})},e.prototype.setEditorSelection=function(n,r){if(this.selection=r,r){var i=n.getLength();r.index=Math.max(0,Math.min(r.index,i-1)),r.length=Math.max(0,Math.min(r.length,i-1-r.index)),n.setSelection(r)}},e.prototype.setEditorTabIndex=function(n,r){var i,s;!((s=(i=n)===null||i===void 0?void 0:i.scroll)===null||s===void 0)&&s.domNode&&(n.scroll.domNode.tabIndex=r)},e.prototype.setEditorReadOnly=function(n,r){r?n.disable():n.enable()},e.prototype.makeUnprivilegedEditor=function(n){var r=n;return{getHTML:function(){return r.root.innerHTML},getLength:r.getLength.bind(r),getText:r.getText.bind(r),getContents:r.getContents.bind(r),getSelection:r.getSelection.bind(r),getBounds:r.getBounds.bind(r)}},e.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var n=_re.default.findDOMNode(this.editingArea);if(!n)throw new Error("Cannot find element for editing area");if(n.nodeType===3)throw new Error("Editing area cannot be a text node");return n},e.prototype.renderEditingArea=function(){var n=this,r=this.props,i=r.children,s=r.preserveWhitespace,a=this.state.generation,o={key:a,ref:function(l){n.editingArea=l}};return Ns.default.Children.count(i)?Ns.default.cloneElement(Ns.default.Children.only(i),o):s?Ns.default.createElement("pre",jg({},o)):Ns.default.createElement("div",jg({},o))},e.prototype.render=function(){var n;return Ns.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(n=this.props.className,n??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},e.prototype.onEditorChangeText=function(n,r,i,s){var a,o;if(this.editor){var l=this.isDelta(this.value)?s.getContents():s.getHTML();l!==this.getEditorContents()&&(this.lastDeltaChangeSet=r,this.value=l,(o=(a=this.props).onChange)===null||o===void 0||o.call(a,n,r,i,s))}},e.prototype.onEditorChangeSelection=function(n,r,i){var s,a,o,l,u,d;if(this.editor){var p=this.getEditorSelection(),h=!p&&n,m=p&&!n;Qd.default(n,p)||(this.selection=n,(a=(s=this.props).onChangeSelection)===null||a===void 0||a.call(s,n,r,i),h?(l=(o=this.props).onFocus)===null||l===void 0||l.call(o,n,r,i):m&&((d=(u=this.props).onBlur)===null||d===void 0||d.call(u,p,r,i)))}},e.prototype.focus=function(){this.editor&&this.editor.focus()},e.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},e.displayName="React Quill",e.Quill=_j.default,e.defaultProps={theme:"snow",modules:{},readOnly:!1},e}(Ns.default.Component);function Nj(t){Promise.resolve().then(t)}var Sre=Nre;const Ere=Uo(Sre);var kre=typeof global=="object"&&global&&global.Object===Object&&global;const GI=kre;var Cre=typeof self=="object"&&self&&self.Object===Object&&self,jre=GI||Cre||Function("return this")();const qs=jre;var Tre=qs.Symbol;const zo=Tre;var HI=Object.prototype,Are=HI.hasOwnProperty,Ore=HI.toString,Zd=zo?zo.toStringTag:void 0;function Pre(t){var e=Are.call(t,Zd),n=t[Zd];try{t[Zd]=void 0;var r=!0}catch{}var i=Ore.call(t);return r&&(e?t[Zd]=n:delete t[Zd]),i}var Rre=Object.prototype,Lre=Rre.toString;function Ire(t){return Lre.call(t)}var Mre="[object Null]",Dre="[object Undefined]",Sj=zo?zo.toStringTag:void 0;function ad(t){return t==null?t===void 0?Dre:Mre:Sj&&Sj in Object(t)?Pre(t):Ire(t)}function Ea(t){return t!=null&&typeof t=="object"}var Fre=Array.isArray;const Zl=Fre;function Xo(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function VI(t){return t}var qre="[object AsyncFunction]",Bre="[object Function]",zre="[object GeneratorFunction]",$re="[object Proxy]";function rN(t){if(!Xo(t))return!1;var e=ad(t);return e==Bre||e==zre||e==qre||e==$re}var Ure=qs["__core-js_shared__"];const Hw=Ure;var Ej=function(){var t=/[^.]+$/.exec(Hw&&Hw.keys&&Hw.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Gre(t){return!!Ej&&Ej in t}var Hre=Function.prototype,Vre=Hre.toString;function cc(t){if(t!=null){try{return Vre.call(t)}catch{}try{return t+""}catch{}}return""}var Wre=/[\\^$.*+?()[\]{}|]/g,Kre=/^\[object .+?Constructor\]$/,Yre=Function.prototype,Xre=Object.prototype,Qre=Yre.toString,Zre=Xre.hasOwnProperty,Jre=RegExp("^"+Qre.call(Zre).replace(Wre,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function eie(t){if(!Xo(t)||Gre(t))return!1;var e=rN(t)?Jre:Kre;return e.test(cc(t))}function tie(t,e){return t==null?void 0:t[e]}function uc(t,e){var n=tie(t,e);return eie(n)?n:void 0}var nie=uc(qs,"WeakMap");const L_=nie;var kj=Object.create,rie=function(){function t(){}return function(e){if(!Xo(e))return{};if(kj)return kj(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();const iie=rie;function sie(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function WI(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var aie=800,oie=16,lie=Date.now;function cie(t){var e=0,n=0;return function(){var r=lie(),i=oie-(r-n);if(n=r,i>0){if(++e>=aie)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function uie(t){return function(){return t}}var die=function(){try{var t=uc(Object,"defineProperty");return t({},"",{}),t}catch{}}();const Tg=die;var fie=Tg?function(t,e){return Tg(t,"toString",{configurable:!0,enumerable:!1,value:uie(e),writable:!0})}:VI;const hie=fie;var pie=cie(hie);const mie=pie;function gie(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}var vie=9007199254740991,yie=/^(?:0|[1-9]\d*)$/;function KI(t,e){var n=typeof t;return e=e??vie,!!e&&(n=="number"||n!="symbol"&&yie.test(t))&&t>-1&&t%1==0&&t<e}function iN(t,e,n){e=="__proto__"&&Tg?Tg(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Lh(t,e){return t===e||t!==t&&e!==e}var xie=Object.prototype,bie=xie.hasOwnProperty;function YI(t,e,n){var r=t[e];(!(bie.call(t,e)&&Lh(r,n))||n===void 0&&!(e in t))&&iN(t,e,n)}function Ih(t,e,n,r){var i=!n;n||(n={});for(var s=-1,a=e.length;++s<a;){var o=e[s],l=r?r(n[o],t[o],o,n,t):void 0;l===void 0&&(l=t[o]),i?iN(n,o,l):YI(n,o,l)}return n}var Cj=Math.max;function wie(t,e,n){return e=Cj(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=Cj(r.length-e,0),a=Array(s);++i<s;)a[i]=r[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=r[i];return o[e]=n(a),sie(t,this,o)}}function _ie(t,e){return mie(wie(t,e,VI),t+"")}var Nie=9007199254740991;function XI(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Nie}function P0(t){return t!=null&&XI(t.length)&&!rN(t)}function Sie(t,e,n){if(!Xo(n))return!1;var r=typeof e;return(r=="number"?P0(n)&&KI(e,n.length):r=="string"&&e in n)?Lh(n[e],t):!1}function Eie(t){return _ie(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,a&&Sie(n[0],n[1],a)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var o=n[r];o&&t(e,o,r,s)}return e})}var kie=Object.prototype;function sN(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||kie;return t===n}function Cie(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var jie="[object Arguments]";function jj(t){return Ea(t)&&ad(t)==jie}var QI=Object.prototype,Tie=QI.hasOwnProperty,Aie=QI.propertyIsEnumerable,Oie=jj(function(){return arguments}())?jj:function(t){return Ea(t)&&Tie.call(t,"callee")&&!Aie.call(t,"callee")};const I_=Oie;function Pie(){return!1}var ZI=typeof Yr=="object"&&Yr&&!Yr.nodeType&&Yr,Tj=ZI&&typeof Xr=="object"&&Xr&&!Xr.nodeType&&Xr,Rie=Tj&&Tj.exports===ZI,Aj=Rie?qs.Buffer:void 0,Lie=Aj?Aj.isBuffer:void 0,Iie=Lie||Pie;const oh=Iie;var Mie="[object Arguments]",Die="[object Array]",Fie="[object Boolean]",qie="[object Date]",Bie="[object Error]",zie="[object Function]",$ie="[object Map]",Uie="[object Number]",Gie="[object Object]",Hie="[object RegExp]",Vie="[object Set]",Wie="[object String]",Kie="[object WeakMap]",Yie="[object ArrayBuffer]",Xie="[object DataView]",Qie="[object Float32Array]",Zie="[object Float64Array]",Jie="[object Int8Array]",ese="[object Int16Array]",tse="[object Int32Array]",nse="[object Uint8Array]",rse="[object Uint8ClampedArray]",ise="[object Uint16Array]",sse="[object Uint32Array]",Mt={};Mt[Qie]=Mt[Zie]=Mt[Jie]=Mt[ese]=Mt[tse]=Mt[nse]=Mt[rse]=Mt[ise]=Mt[sse]=!0;Mt[Mie]=Mt[Die]=Mt[Yie]=Mt[Fie]=Mt[Xie]=Mt[qie]=Mt[Bie]=Mt[zie]=Mt[$ie]=Mt[Uie]=Mt[Gie]=Mt[Hie]=Mt[Vie]=Mt[Wie]=Mt[Kie]=!1;function ase(t){return Ea(t)&&XI(t.length)&&!!Mt[ad(t)]}function aN(t){return function(e){return t(e)}}var JI=typeof Yr=="object"&&Yr&&!Yr.nodeType&&Yr,Af=JI&&typeof Xr=="object"&&Xr&&!Xr.nodeType&&Xr,ose=Af&&Af.exports===JI,Vw=ose&&GI.process,lse=function(){try{var t=Af&&Af.require&&Af.require("util").types;return t||Vw&&Vw.binding&&Vw.binding("util")}catch{}}();const qu=lse;var Oj=qu&&qu.isTypedArray,cse=Oj?aN(Oj):ase;const oN=cse;var use=Object.prototype,dse=use.hasOwnProperty;function eM(t,e){var n=Zl(t),r=!n&&I_(t),i=!n&&!r&&oh(t),s=!n&&!r&&!i&&oN(t),a=n||r||i||s,o=a?Cie(t.length,String):[],l=o.length;for(var u in t)(e||dse.call(t,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||KI(u,l)))&&o.push(u);return o}function tM(t,e){return function(n){return t(e(n))}}var fse=tM(Object.keys,Object);const hse=fse;var pse=Object.prototype,mse=pse.hasOwnProperty;function gse(t){if(!sN(t))return hse(t);var e=[];for(var n in Object(t))mse.call(t,n)&&n!="constructor"&&e.push(n);return e}function lN(t){return P0(t)?eM(t):gse(t)}function vse(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var yse=Object.prototype,xse=yse.hasOwnProperty;function bse(t){if(!Xo(t))return vse(t);var e=sN(t),n=[];for(var r in t)r=="constructor"&&(e||!xse.call(t,r))||n.push(r);return n}function Mh(t){return P0(t)?eM(t,!0):bse(t)}var wse=uc(Object,"create");const lh=wse;function _se(){this.__data__=lh?lh(null):{},this.size=0}function Nse(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Sse="__lodash_hash_undefined__",Ese=Object.prototype,kse=Ese.hasOwnProperty;function Cse(t){var e=this.__data__;if(lh){var n=e[t];return n===Sse?void 0:n}return kse.call(e,t)?e[t]:void 0}var jse=Object.prototype,Tse=jse.hasOwnProperty;function Ase(t){var e=this.__data__;return lh?e[t]!==void 0:Tse.call(e,t)}var Ose="__lodash_hash_undefined__";function Pse(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=lh&&e===void 0?Ose:e,this}function Jl(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Jl.prototype.clear=_se;Jl.prototype.delete=Nse;Jl.prototype.get=Cse;Jl.prototype.has=Ase;Jl.prototype.set=Pse;function Rse(){this.__data__=[],this.size=0}function R0(t,e){for(var n=t.length;n--;)if(Lh(t[n][0],e))return n;return-1}var Lse=Array.prototype,Ise=Lse.splice;function Mse(t){var e=this.__data__,n=R0(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Ise.call(e,n,1),--this.size,!0}function Dse(t){var e=this.__data__,n=R0(e,t);return n<0?void 0:e[n][1]}function Fse(t){return R0(this.__data__,t)>-1}function qse(t,e){var n=this.__data__,r=R0(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function Pa(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Pa.prototype.clear=Rse;Pa.prototype.delete=Mse;Pa.prototype.get=Dse;Pa.prototype.has=Fse;Pa.prototype.set=qse;var Bse=uc(qs,"Map");const ch=Bse;function zse(){this.size=0,this.__data__={hash:new Jl,map:new(ch||Pa),string:new Jl}}function $se(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function L0(t,e){var n=t.__data__;return $se(e)?n[typeof e=="string"?"string":"hash"]:n.map}function Use(t){var e=L0(this,t).delete(t);return this.size-=e?1:0,e}function Gse(t){return L0(this,t).get(t)}function Hse(t){return L0(this,t).has(t)}function Vse(t,e){var n=L0(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function dc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}dc.prototype.clear=zse;dc.prototype.delete=Use;dc.prototype.get=Gse;dc.prototype.has=Hse;dc.prototype.set=Vse;function nM(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var Wse=tM(Object.getPrototypeOf,Object);const cN=Wse;var Kse="[object Object]",Yse=Function.prototype,Xse=Object.prototype,rM=Yse.toString,Qse=Xse.hasOwnProperty,Zse=rM.call(Object);function Jse(t){if(!Ea(t)||ad(t)!=Kse)return!1;var e=cN(t);if(e===null)return!0;var n=Qse.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&rM.call(n)==Zse}function eae(){this.__data__=new Pa,this.size=0}function tae(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function nae(t){return this.__data__.get(t)}function rae(t){return this.__data__.has(t)}var iae=200;function sae(t,e){var n=this.__data__;if(n instanceof Pa){var r=n.__data__;if(!ch||r.length<iae-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new dc(r)}return n.set(t,e),this.size=n.size,this}function Rs(t){var e=this.__data__=new Pa(t);this.size=e.size}Rs.prototype.clear=eae;Rs.prototype.delete=tae;Rs.prototype.get=nae;Rs.prototype.has=rae;Rs.prototype.set=sae;function aae(t,e){return t&&Ih(e,lN(e),t)}function oae(t,e){return t&&Ih(e,Mh(e),t)}var iM=typeof Yr=="object"&&Yr&&!Yr.nodeType&&Yr,Pj=iM&&typeof Xr=="object"&&Xr&&!Xr.nodeType&&Xr,lae=Pj&&Pj.exports===iM,Rj=lae?qs.Buffer:void 0,Lj=Rj?Rj.allocUnsafe:void 0;function sM(t,e){if(e)return t.slice();var n=t.length,r=Lj?Lj(n):new t.constructor(n);return t.copy(r),r}function cae(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var a=t[n];e(a,n,t)&&(s[i++]=a)}return s}function aM(){return[]}var uae=Object.prototype,dae=uae.propertyIsEnumerable,Ij=Object.getOwnPropertySymbols,fae=Ij?function(t){return t==null?[]:(t=Object(t),cae(Ij(t),function(e){return dae.call(t,e)}))}:aM;const uN=fae;function hae(t,e){return Ih(t,uN(t),e)}var pae=Object.getOwnPropertySymbols,mae=pae?function(t){for(var e=[];t;)nM(e,uN(t)),t=cN(t);return e}:aM;const oM=mae;function gae(t,e){return Ih(t,oM(t),e)}function lM(t,e,n){var r=e(t);return Zl(t)?r:nM(r,n(t))}function M_(t){return lM(t,lN,uN)}function vae(t){return lM(t,Mh,oM)}var yae=uc(qs,"DataView");const D_=yae;var xae=uc(qs,"Promise");const F_=xae;var bae=uc(qs,"Set");const q_=bae;var Mj="[object Map]",wae="[object Object]",Dj="[object Promise]",Fj="[object Set]",qj="[object WeakMap]",Bj="[object DataView]",_ae=cc(D_),Nae=cc(ch),Sae=cc(F_),Eae=cc(q_),kae=cc(L_),Rl=ad;(D_&&Rl(new D_(new ArrayBuffer(1)))!=Bj||ch&&Rl(new ch)!=Mj||F_&&Rl(F_.resolve())!=Dj||q_&&Rl(new q_)!=Fj||L_&&Rl(new L_)!=qj)&&(Rl=function(t){var e=ad(t),n=e==wae?t.constructor:void 0,r=n?cc(n):"";if(r)switch(r){case _ae:return Bj;case Nae:return Mj;case Sae:return Dj;case Eae:return Fj;case kae:return qj}return e});const uh=Rl;var Cae=Object.prototype,jae=Cae.hasOwnProperty;function Tae(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&jae.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var Aae=qs.Uint8Array;const Ag=Aae;function dN(t){var e=new t.constructor(t.byteLength);return new Ag(e).set(new Ag(t)),e}function Oae(t,e){var n=e?dN(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var Pae=/\w*$/;function Rae(t){var e=new t.constructor(t.source,Pae.exec(t));return e.lastIndex=t.lastIndex,e}var zj=zo?zo.prototype:void 0,$j=zj?zj.valueOf:void 0;function Lae(t){return $j?Object($j.call(t)):{}}function cM(t,e){var n=e?dN(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var Iae="[object Boolean]",Mae="[object Date]",Dae="[object Map]",Fae="[object Number]",qae="[object RegExp]",Bae="[object Set]",zae="[object String]",$ae="[object Symbol]",Uae="[object ArrayBuffer]",Gae="[object DataView]",Hae="[object Float32Array]",Vae="[object Float64Array]",Wae="[object Int8Array]",Kae="[object Int16Array]",Yae="[object Int32Array]",Xae="[object Uint8Array]",Qae="[object Uint8ClampedArray]",Zae="[object Uint16Array]",Jae="[object Uint32Array]";function eoe(t,e,n){var r=t.constructor;switch(e){case Uae:return dN(t);case Iae:case Mae:return new r(+t);case Gae:return Oae(t,n);case Hae:case Vae:case Wae:case Kae:case Yae:case Xae:case Qae:case Zae:case Jae:return cM(t,n);case Dae:return new r;case Fae:case zae:return new r(t);case qae:return Rae(t);case Bae:return new r;case $ae:return Lae(t)}}function uM(t){return typeof t.constructor=="function"&&!sN(t)?iie(cN(t)):{}}var toe="[object Map]";function noe(t){return Ea(t)&&uh(t)==toe}var Uj=qu&&qu.isMap,roe=Uj?aN(Uj):noe;const ioe=roe;var soe="[object Set]";function aoe(t){return Ea(t)&&uh(t)==soe}var Gj=qu&&qu.isSet,ooe=Gj?aN(Gj):aoe;const loe=ooe;var coe=1,uoe=2,doe=4,dM="[object Arguments]",foe="[object Array]",hoe="[object Boolean]",poe="[object Date]",moe="[object Error]",fM="[object Function]",goe="[object GeneratorFunction]",voe="[object Map]",yoe="[object Number]",hM="[object Object]",xoe="[object RegExp]",boe="[object Set]",woe="[object String]",_oe="[object Symbol]",Noe="[object WeakMap]",Soe="[object ArrayBuffer]",Eoe="[object DataView]",koe="[object Float32Array]",Coe="[object Float64Array]",joe="[object Int8Array]",Toe="[object Int16Array]",Aoe="[object Int32Array]",Ooe="[object Uint8Array]",Poe="[object Uint8ClampedArray]",Roe="[object Uint16Array]",Loe="[object Uint32Array]",At={};At[dM]=At[foe]=At[Soe]=At[Eoe]=At[hoe]=At[poe]=At[koe]=At[Coe]=At[joe]=At[Toe]=At[Aoe]=At[voe]=At[yoe]=At[hM]=At[xoe]=At[boe]=At[woe]=At[_oe]=At[Ooe]=At[Poe]=At[Roe]=At[Loe]=!0;At[moe]=At[fM]=At[Noe]=!1;function Lm(t,e,n,r,i,s){var a,o=e&coe,l=e&uoe,u=e&doe;if(n&&(a=i?n(t,r,i,s):n(t)),a!==void 0)return a;if(!Xo(t))return t;var d=Zl(t);if(d){if(a=Tae(t),!o)return WI(t,a)}else{var p=uh(t),h=p==fM||p==goe;if(oh(t))return sM(t,o);if(p==hM||p==dM||h&&!i){if(a=l||h?{}:uM(t),!o)return l?gae(t,oae(a,t)):hae(t,aae(a,t))}else{if(!At[p])return i?t:{};a=eoe(t,p,o)}}s||(s=new Rs);var m=s.get(t);if(m)return m;s.set(t,a),loe(t)?t.forEach(function(_){a.add(Lm(_,e,n,_,t,s))}):ioe(t)&&t.forEach(function(_,v){a.set(v,Lm(_,e,n,v,t,s))});var y=u?l?vae:M_:l?Mh:lN,x=d?void 0:y(t);return gie(x||t,function(_,v){x&&(v=_,_=t[v]),YI(a,v,Lm(_,e,n,v,t,s))}),a}var Ioe=1,Moe=4;function Nu(t){return Lm(t,Ioe|Moe)}var Doe="__lodash_hash_undefined__";function Foe(t){return this.__data__.set(t,Doe),this}function qoe(t){return this.__data__.has(t)}function Og(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new dc;++e<n;)this.add(t[e])}Og.prototype.add=Og.prototype.push=Foe;Og.prototype.has=qoe;function Boe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function zoe(t,e){return t.has(e)}var $oe=1,Uoe=2;function pM(t,e,n,r,i,s){var a=n&$oe,o=t.length,l=e.length;if(o!=l&&!(a&&l>o))return!1;var u=s.get(t),d=s.get(e);if(u&&d)return u==e&&d==t;var p=-1,h=!0,m=n&Uoe?new Og:void 0;for(s.set(t,e),s.set(e,t);++p<o;){var y=t[p],x=e[p];if(r)var _=a?r(x,y,p,e,t,s):r(y,x,p,t,e,s);if(_!==void 0){if(_)continue;h=!1;break}if(m){if(!Boe(e,function(v,w){if(!zoe(m,w)&&(y===v||i(y,v,n,r,s)))return m.push(w)})){h=!1;break}}else if(!(y===x||i(y,x,n,r,s))){h=!1;break}}return s.delete(t),s.delete(e),h}function Goe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}function Hoe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var Voe=1,Woe=2,Koe="[object Boolean]",Yoe="[object Date]",Xoe="[object Error]",Qoe="[object Map]",Zoe="[object Number]",Joe="[object RegExp]",ele="[object Set]",tle="[object String]",nle="[object Symbol]",rle="[object ArrayBuffer]",ile="[object DataView]",Hj=zo?zo.prototype:void 0,Ww=Hj?Hj.valueOf:void 0;function sle(t,e,n,r,i,s,a){switch(n){case ile:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case rle:return!(t.byteLength!=e.byteLength||!s(new Ag(t),new Ag(e)));case Koe:case Yoe:case Zoe:return Lh(+t,+e);case Xoe:return t.name==e.name&&t.message==e.message;case Joe:case tle:return t==e+"";case Qoe:var o=Goe;case ele:var l=r&Voe;if(o||(o=Hoe),t.size!=e.size&&!l)return!1;var u=a.get(t);if(u)return u==e;r|=Woe,a.set(t,e);var d=pM(o(t),o(e),r,i,s,a);return a.delete(t),d;case nle:if(Ww)return Ww.call(t)==Ww.call(e)}return!1}var ale=1,ole=Object.prototype,lle=ole.hasOwnProperty;function cle(t,e,n,r,i,s){var a=n&ale,o=M_(t),l=o.length,u=M_(e),d=u.length;if(l!=d&&!a)return!1;for(var p=l;p--;){var h=o[p];if(!(a?h in e:lle.call(e,h)))return!1}var m=s.get(t),y=s.get(e);if(m&&y)return m==e&&y==t;var x=!0;s.set(t,e),s.set(e,t);for(var _=a;++p<l;){h=o[p];var v=t[h],w=e[h];if(r)var b=a?r(w,v,h,e,t,s):r(v,w,h,t,e,s);if(!(b===void 0?v===w||i(v,w,n,r,s):b)){x=!1;break}_||(_=h=="constructor")}if(x&&!_){var N=t.constructor,E=e.constructor;N!=E&&"constructor"in t&&"constructor"in e&&!(typeof N=="function"&&N instanceof N&&typeof E=="function"&&E instanceof E)&&(x=!1)}return s.delete(t),s.delete(e),x}var ule=1,Vj="[object Arguments]",Wj="[object Array]",am="[object Object]",dle=Object.prototype,Kj=dle.hasOwnProperty;function fle(t,e,n,r,i,s){var a=Zl(t),o=Zl(e),l=a?Wj:uh(t),u=o?Wj:uh(e);l=l==Vj?am:l,u=u==Vj?am:u;var d=l==am,p=u==am,h=l==u;if(h&&oh(t)){if(!oh(e))return!1;a=!0,d=!1}if(h&&!d)return s||(s=new Rs),a||oN(t)?pM(t,e,n,r,i,s):sle(t,e,l,n,r,i,s);if(!(n&ule)){var m=d&&Kj.call(t,"__wrapped__"),y=p&&Kj.call(e,"__wrapped__");if(m||y){var x=m?t.value():t,_=y?e.value():e;return s||(s=new Rs),i(x,_,n,r,s)}}return h?(s||(s=new Rs),cle(t,e,n,r,i,s)):!1}function mM(t,e,n,r,i){return t===e?!0:t==null||e==null||!Ea(t)&&!Ea(e)?t!==t&&e!==e:fle(t,e,n,r,mM,i)}function hle(t){return function(e,n,r){for(var i=-1,s=Object(e),a=r(e),o=a.length;o--;){var l=a[t?o:++i];if(n(s[l],l,s)===!1)break}return e}}var ple=hle();const mle=ple;function B_(t,e,n){(n!==void 0&&!Lh(t[e],n)||n===void 0&&!(e in t))&&iN(t,e,n)}function gle(t){return Ea(t)&&P0(t)}function z_(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function vle(t){return Ih(t,Mh(t))}function yle(t,e,n,r,i,s,a){var o=z_(t,n),l=z_(e,n),u=a.get(l);if(u){B_(t,n,u);return}var d=s?s(o,l,n+"",t,e,a):void 0,p=d===void 0;if(p){var h=Zl(l),m=!h&&oh(l),y=!h&&!m&&oN(l);d=l,h||m||y?Zl(o)?d=o:gle(o)?d=WI(o):m?(p=!1,d=sM(l,!0)):y?(p=!1,d=cM(l,!0)):d=[]:Jse(l)||I_(l)?(d=o,I_(o)?d=vle(o):(!Xo(o)||rN(o))&&(d=uM(l))):p=!1}p&&(a.set(l,d),i(d,l,r,s,a),a.delete(l)),B_(t,n,d)}function gM(t,e,n,r,i){t!==e&&mle(e,function(s,a){if(i||(i=new Rs),Xo(s))yle(t,e,a,n,gM,r,i);else{var o=r?r(z_(t,a),s,a+"",t,e,i):void 0;o===void 0&&(o=s),B_(t,a,o)}},Mh)}function fN(t,e){return mM(t,e)}var xle=Eie(function(t,e,n){gM(t,e,n)});const Mo=xle;var Fe=(t=>(t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY",t))(Fe||{});class Is{constructor(e,n,r={}){this.attrName=e,this.keyName=n;const i=Fe.TYPE&Fe.ATTRIBUTE;this.scope=r.scope!=null?r.scope&Fe.LEVEL|i:Fe.ATTRIBUTE,r.whitelist!=null&&(this.whitelist=r.whitelist)}static keys(e){return Array.from(e.attributes).map(n=>n.name)}add(e,n){return this.canAdd(e,n)?(e.setAttribute(this.keyName,n),!0):!1}canAdd(e,n){return this.whitelist==null?!0:typeof n=="string"?this.whitelist.indexOf(n.replace(/["']/g,""))>-1:this.whitelist.indexOf(n)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){const n=e.getAttribute(this.keyName);return this.canAdd(e,n)&&n?n:""}}class Su extends Error{constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}}const vM=class $_{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,n=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(n){let r=null;try{r=e.parentNode}catch{return null}return this.find(r,n)}return null}create(e,n,r){const i=this.query(n);if(i==null)throw new Su(`Unable to create ${n} blot`);const s=i,a=n instanceof Node||n.nodeType===Node.TEXT_NODE?n:s.create(r),o=new s(e,a,r);return $_.blots.set(o.domNode,o),o}find(e,n=!1){return $_.find(e,n)}query(e,n=Fe.ANY){let r;return typeof e=="string"?r=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?r=this.types.text:typeof e=="number"?e&Fe.LEVEL&Fe.BLOCK?r=this.types.block:e&Fe.LEVEL&Fe.INLINE&&(r=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(i=>(r=this.classes[i],!!r)),r=r||this.tags[e.tagName]),r==null?null:"scope"in r&&n&Fe.LEVEL&r.scope&&n&Fe.TYPE&r.scope?r:null}register(...e){return e.map(n=>{const r="blotName"in n,i="attrName"in n;if(!r&&!i)throw new Su("Invalid definition");if(r&&n.blotName==="abstract")throw new Su("Cannot register abstract class");const s=r?n.blotName:i?n.attrName:void 0;return this.types[s]=n,i?typeof n.keyName=="string"&&(this.attributes[n.keyName]=n):r&&(n.className&&(this.classes[n.className]=n),n.tagName&&(Array.isArray(n.tagName)?n.tagName=n.tagName.map(a=>a.toUpperCase()):n.tagName=n.tagName.toUpperCase(),(Array.isArray(n.tagName)?n.tagName:[n.tagName]).forEach(a=>{(this.tags[a]==null||n.className==null)&&(this.tags[a]=n)}))),n})}};vM.blots=new WeakMap;let Bu=vM;function Yj(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter(n=>n.indexOf(`${e}-`)===0)}class ble extends Is{static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(n=>n.split("-").slice(0,-1).join("-"))}add(e,n){return this.canAdd(e,n)?(this.remove(e),e.classList.add(`${this.keyName}-${n}`),!0):!1}remove(e){Yj(e,this.keyName).forEach(n=>{e.classList.remove(n)}),e.classList.length===0&&e.removeAttribute("class")}value(e){const n=(Yj(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,n)?n:""}}const as=ble;function Kw(t){const e=t.split("-"),n=e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("");return e[0]+n}class wle extends Is{static keys(e){return(e.getAttribute("style")||"").split(";").map(n=>n.split(":")[0].trim())}add(e,n){return this.canAdd(e,n)?(e.style[Kw(this.keyName)]=n,!0):!1}remove(e){e.style[Kw(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){const n=e.style[Kw(this.keyName)];return this.canAdd(e,n)?n:""}}const Qo=wle;class _le{constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,n){n?e.add(this.domNode,n)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};const e=Bu.find(this.domNode);if(e==null)return;const n=Is.keys(this.domNode),r=as.keys(this.domNode),i=Qo.keys(this.domNode);n.concat(r).concat(i).forEach(s=>{const a=e.scroll.query(s,Fe.ATTRIBUTE);a instanceof Is&&(this.attributes[a.attrName]=a)})}copy(e){Object.keys(this.attributes).forEach(n=>{const r=this.attributes[n].value(this.domNode);e.format(n,r)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(n=>{this.attributes[n].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,n)=>(e[n]=this.attributes[n].value(this.domNode),e),{})}}const I0=_le,yM=class{constructor(e,n){this.scroll=e,this.domNode=n,Bu.blots.set(n,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new Su("Blot definition missing tagName");let n,r;return Array.isArray(this.tagName)?(typeof e=="string"?(r=e.toUpperCase(),parseInt(r,10).toString()===r&&(r=parseInt(r,10))):typeof e=="number"&&(r=e),typeof r=="number"?n=document.createElement(this.tagName[r-1]):r&&this.tagName.indexOf(r)>-1?n=document.createElement(r):n=document.createElement(this.tagName[0])):n=document.createElement(this.tagName),this.className&&n.classList.add(this.className),n}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),Bu.blots.delete(this.domNode)}deleteAt(e,n){this.isolate(e,n).remove()}formatAt(e,n,r,i){const s=this.isolate(e,n);if(this.scroll.query(r,Fe.BLOT)!=null&&i)s.wrap(r,i);else if(this.scroll.query(r,Fe.ATTRIBUTE)!=null){const a=this.scroll.create(this.statics.scope);s.wrap(a),a.format(r,i)}}insertAt(e,n,r){const i=r==null?this.scroll.create("text",n):this.scroll.create(n,r),s=this.split(e);this.parent.insertBefore(i,s||void 0)}isolate(e,n){const r=this.split(e);if(r==null)throw new Error("Attempt to isolate at end");return r.split(n),r}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,n){const r=typeof e=="string"?this.scroll.create(e,n):e;return this.parent!=null&&(this.parent.insertBefore(r,this.next||void 0),this.remove()),r}split(e,n){return e===0?this:this.next}update(e,n){}wrap(e,n){const r=typeof e=="string"?this.scroll.create(e,n):e;if(this.parent!=null&&this.parent.insertBefore(r,this.next||void 0),typeof r.appendChild!="function")throw new Su(`Cannot wrap ${e}`);return r.appendChild(this),r}};yM.blotName="abstract";let xM=yM;const bM=class extends xM{static value(e){return!0}index(e,n){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(n,1):-1}position(e,n){let r=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(r+=1),[this.parent.domNode,r]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};bM.scope=Fe.INLINE_BLOT;let Nle=bM;const lr=Nle;class Sle{constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){const n=e.slice(1);this.append(...n)}}at(e){const n=this.iterator();let r=n();for(;r&&e>0;)e-=1,r=n();return r}contains(e){const n=this.iterator();let r=n();for(;r;){if(r===e)return!0;r=n()}return!1}indexOf(e){const n=this.iterator();let r=n(),i=0;for(;r;){if(r===e)return i;i+=1,r=n()}return-1}insertBefore(e,n){e!=null&&(this.remove(e),e.next=n,n!=null?(e.prev=n.prev,n.prev!=null&&(n.prev.next=e),n.prev=e,n===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let n=0,r=this.head;for(;r!=null;){if(r===e)return n;n+=r.length(),r=r.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{const n=e;return e!=null&&(e=e.next),n}}find(e,n=!1){const r=this.iterator();let i=r();for(;i;){const s=i.length();if(e<s||n&&e===s&&(i.next==null||i.next.length()!==0))return[i,e];e-=s,i=r()}return[null,0]}forEach(e){const n=this.iterator();let r=n();for(;r;)e(r),r=n()}forEachAt(e,n,r){if(n<=0)return;const[i,s]=this.find(e);let a=e-s;const o=this.iterator(i);let l=o();for(;l&&a<e+n;){const u=l.length();e>a?r(l,e-a,Math.min(n,a+u-e)):r(l,0,Math.min(u,e+n-a)),a+=u,l=o()}}map(e){return this.reduce((n,r)=>(n.push(e(r)),n),[])}reduce(e,n){const r=this.iterator();let i=r();for(;i;)n=e(n,i),i=r();return n}}function Xj(t,e){const n=e.find(t);if(n)return n;try{return e.create(t)}catch{const r=e.create(Fe.INLINE);return Array.from(t.childNodes).forEach(i=>{r.domNode.appendChild(i)}),t.parentNode&&t.parentNode.replaceChild(r.domNode,t),r.attach(),r}}const wM=class lo extends xM{constructor(e,n){super(e,n),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,lo.uiClass&&this.uiNode.classList.add(lo.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new Sle,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{const n=Xj(e,this.scroll);this.insertBefore(n,this.children.head||void 0)}catch(n){if(n instanceof Su)return;throw n}})}deleteAt(e,n){if(e===0&&n===this.length())return this.remove();this.children.forEachAt(e,n,(r,i,s)=>{r.deleteAt(i,s)})}descendant(e,n=0){const[r,i]=this.children.find(n);return e.blotName==null&&e(r)||e.blotName!=null&&r instanceof e?[r,i]:r instanceof lo?r.descendant(e,i):[null,-1]}descendants(e,n=0,r=Number.MAX_VALUE){let i=[],s=r;return this.children.forEachAt(n,r,(a,o,l)=>{(e.blotName==null&&e(a)||e.blotName!=null&&a instanceof e)&&i.push(a),a instanceof lo&&(i=i.concat(a.descendants(e,o,s))),s-=l}),i}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(n=>{e||this.statics.allowedChildren.some(r=>n instanceof r)||(n.statics.scope===Fe.BLOCK_BLOT?(n.next!=null&&this.splitAfter(n),n.prev!=null&&this.splitAfter(n.prev),n.parent.unwrap(),e=!0):n instanceof lo?n.unwrap():n.remove())})}formatAt(e,n,r,i){this.children.forEachAt(e,n,(s,a,o)=>{s.formatAt(a,o,r,i)})}insertAt(e,n,r){const[i,s]=this.children.find(e);if(i)i.insertAt(s,n,r);else{const a=r==null?this.scroll.create("text",n):this.scroll.create(n,r);this.appendChild(a)}}insertBefore(e,n){e.parent!=null&&e.parent.children.remove(e);let r=null;this.children.insertBefore(e,n||null),e.parent=this,n!=null&&(r=n.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==r)&&this.domNode.insertBefore(e.domNode,r),e.attach()}length(){return this.children.reduce((e,n)=>e+n.length(),0)}moveChildren(e,n){this.children.forEach(r=>{e.insertBefore(r,n)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const n=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(n)}else this.remove()}path(e,n=!1){const[r,i]=this.children.find(e,n),s=[[this,e]];return r instanceof lo?s.concat(r.path(i,n)):(r!=null&&s.push([r,i]),s)}removeChild(e){this.children.remove(e)}replaceWith(e,n){const r=typeof e=="string"?this.scroll.create(e,n):e;return r instanceof lo&&this.moveChildren(r),super.replaceWith(r)}split(e,n=!1){if(!n){if(e===0)return this;if(e===this.length())return this.next}const r=this.clone();return this.parent&&this.parent.insertBefore(r,this.next||void 0),this.children.forEachAt(e,this.length(),(i,s,a)=>{const o=i.split(s,n);o!=null&&r.appendChild(o)}),r}splitAfter(e){const n=this.clone();for(;e.next!=null;)n.appendChild(e.next);return this.parent&&this.parent.insertBefore(n,this.next||void 0),n}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,n){const r=[],i=[];e.forEach(s=>{s.target===this.domNode&&s.type==="childList"&&(r.push(...s.addedNodes),i.push(...s.removedNodes))}),i.forEach(s=>{if(s.parentNode!=null&&s.tagName!=="IFRAME"&&document.body.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const a=this.scroll.find(s);a!=null&&(a.domNode.parentNode==null||a.domNode.parentNode===this.domNode)&&a.detach()}),r.filter(s=>s.parentNode===this.domNode&&s!==this.uiNode).sort((s,a)=>s===a?0:s.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(s=>{let a=null;s.nextSibling!=null&&(a=this.scroll.find(s.nextSibling));const o=Xj(s,this.scroll);(o.next!==a||o.next==null)&&(o.parent!=null&&o.parent.removeChild(this),this.insertBefore(o,a||void 0))}),this.enforceAllowedChildren()}};wM.uiClass="";let Ele=wM;const Ji=Ele;function kle(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}const Wc=class Kc extends Ji{static create(e){return super.create(e)}static formats(e,n){const r=n.query(Kc.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,n){super(e,n),this.attributes=new I0(this.domNode)}format(e,n){if(e===this.statics.blotName&&!n)this.children.forEach(r=>{r instanceof Kc||(r=r.wrap(Kc.blotName,!0)),this.attributes.copy(r)}),this.unwrap();else{const r=this.scroll.query(e,Fe.INLINE);if(r==null)return;r instanceof Is?this.attributes.attribute(r,n):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n)}}formats(){const e=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(e[this.statics.blotName]=n),e}formatAt(e,n,r,i){this.formats()[r]!=null||this.scroll.query(r,Fe.ATTRIBUTE)?this.isolate(e,n).format(r,i):super.formatAt(e,n,r,i)}optimize(e){super.optimize(e);const n=this.formats();if(Object.keys(n).length===0)return this.unwrap();const r=this.next;r instanceof Kc&&r.prev===this&&kle(n,r.formats())&&(r.moveChildren(this),r.remove())}replaceWith(e,n){const r=super.replaceWith(e,n);return this.attributes.copy(r),r}update(e,n){super.update(e,n),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}wrap(e,n){const r=super.wrap(e,n);return r instanceof Kc&&this.attributes.move(r),r}};Wc.allowedChildren=[Wc,lr],Wc.blotName="inline",Wc.scope=Fe.INLINE_BLOT,Wc.tagName="SPAN";let Cle=Wc;const hN=Cle,Yc=class U_ extends Ji{static create(e){return super.create(e)}static formats(e,n){const r=n.query(U_.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,n){super(e,n),this.attributes=new I0(this.domNode)}format(e,n){const r=this.scroll.query(e,Fe.BLOCK);r!=null&&(r instanceof Is?this.attributes.attribute(r,n):e===this.statics.blotName&&!n?this.replaceWith(U_.blotName):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n))}formats(){const e=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(e[this.statics.blotName]=n),e}formatAt(e,n,r,i){this.scroll.query(r,Fe.BLOCK)!=null?this.format(r,i):super.formatAt(e,n,r,i)}insertAt(e,n,r){if(r==null||this.scroll.query(n,Fe.INLINE)!=null)super.insertAt(e,n,r);else{const i=this.split(e);if(i!=null){const s=this.scroll.create(n,r);i.parent.insertBefore(s,i)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,n){const r=super.replaceWith(e,n);return this.attributes.copy(r),r}update(e,n){super.update(e,n),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}};Yc.blotName="block",Yc.scope=Fe.BLOCK_BLOT,Yc.tagName="P",Yc.allowedChildren=[hN,Yc,lr];let jle=Yc;const dh=jle,G_=class extends Ji{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,n){super.deleteAt(e,n),this.enforceAllowedChildren()}formatAt(e,n,r,i){super.formatAt(e,n,r,i),this.enforceAllowedChildren()}insertAt(e,n,r){super.insertAt(e,n,r),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};G_.blotName="container",G_.scope=Fe.BLOCK_BLOT;let Tle=G_;const M0=Tle;class Ale extends lr{static formats(e,n){}format(e,n){super.formatAt(0,this.length(),e,n)}formatAt(e,n,r,i){e===0&&n===this.length()?this.format(r,i):super.formatAt(e,n,r,i)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const ii=Ale,Ole={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},Ple=100,Xc=class extends Ji{constructor(e,n){super(null,n),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(r=>{this.update(r)}),this.observer.observe(this.domNode,Ole),this.attach()}create(e,n){return this.registry.create(this,e,n)}find(e,n=!1){const r=this.registry.find(e,n);return r?r.scroll===this?r:n?this.find(r.scroll.domNode.parentNode,!0):null:null}query(e,n=Fe.ANY){return this.registry.query(e,n)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,n){this.update(),e===0&&n===this.length()?this.children.forEach(r=>{r.remove()}):super.deleteAt(e,n)}formatAt(e,n,r,i){this.update(),super.formatAt(e,n,r,i)}insertAt(e,n,r){this.update(),super.insertAt(e,n,r)}optimize(e=[],n={}){super.optimize(n);const r=n.mutationsMap||new WeakMap;let i=Array.from(this.observer.takeRecords());for(;i.length>0;)e.push(i.pop());const s=(l,u=!0)=>{l==null||l===this||l.domNode.parentNode!=null&&(r.has(l.domNode)||r.set(l.domNode,[]),u&&s(l.parent))},a=l=>{r.has(l.domNode)&&(l instanceof Ji&&l.children.forEach(a),r.delete(l.domNode),l.optimize(n))};let o=e;for(let l=0;o.length>0;l+=1){if(l>=Ple)throw new Error("[Parchment] Maximum optimize iterations reached");for(o.forEach(u=>{const d=this.find(u.target,!0);d!=null&&(d.domNode===u.target&&(u.type==="childList"?(s(this.find(u.previousSibling,!1)),Array.from(u.addedNodes).forEach(p=>{const h=this.find(p,!1);s(h,!1),h instanceof Ji&&h.children.forEach(m=>{s(m,!1)})})):u.type==="attributes"&&s(d.prev)),s(d))}),this.children.forEach(a),o=Array.from(this.observer.takeRecords()),i=o.slice();i.length>0;)e.push(i.pop())}}update(e,n={}){e=e||this.observer.takeRecords();const r=new WeakMap;e.map(i=>{const s=this.find(i.target,!0);return s==null?null:r.has(s.domNode)?(r.get(s.domNode).push(i),null):(r.set(s.domNode,[i]),s)}).forEach(i=>{i!=null&&i!==this&&r.has(i.domNode)&&i.update(r.get(i.domNode)||[],n)}),n.mutationsMap=r,r.has(this.domNode)&&super.update(r.get(this.domNode),n),this.optimize(e,n)}};Xc.blotName="scroll",Xc.defaultChild=dh,Xc.allowedChildren=[dh,M0],Xc.scope=Fe.BLOCK_BLOT,Xc.tagName="DIV";let Rle=Xc;const pN=Rle,H_=class _M extends lr{static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,n){super(e,n),this.text=this.statics.value(this.domNode)}deleteAt(e,n){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+n)}index(e,n){return this.domNode===e?n:-1}insertAt(e,n,r){r==null?(this.text=this.text.slice(0,e)+n+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,n,r)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof _M&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,n=!1){return[this.domNode,e]}split(e,n=!1){if(!n){if(e===0)return this;if(e===this.length())return this.next}const r=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(r,this.next||void 0),this.text=this.statics.value(this.domNode),r}update(e,n){e.some(r=>r.type==="characterData"&&r.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};H_.blotName="text",H_.scope=Fe.INLINE_BLOT;let Lle=H_;const Pg=Lle,Ile=Object.freeze(Object.defineProperty({__proto__:null,Attributor:Is,AttributorStore:I0,BlockBlot:dh,ClassAttributor:as,ContainerBlot:M0,EmbedBlot:ii,InlineBlot:hN,LeafBlot:lr,ParentBlot:Ji,Registry:Bu,Scope:Fe,ScrollBlot:pN,StyleAttributor:Qo,TextBlot:Pg},Symbol.toStringTag,{value:"Module"}));var V_={exports:{}},Kr=-1,yr=1,Tn=0;function fh(t,e,n,r,i){if(t===e)return t?[[Tn,t]]:[];if(n!=null){var s=Gle(t,e,n);if(s)return s}var a=mN(t,e),o=t.substring(0,a);t=t.substring(a),e=e.substring(a),a=D0(t,e);var l=t.substring(t.length-a);t=t.substring(0,t.length-a),e=e.substring(0,e.length-a);var u=Mle(t,e);return o&&u.unshift([Tn,o]),l&&u.push([Tn,l]),gN(u,i),r&&qle(u),u}function Mle(t,e){var n;if(!t)return[[yr,e]];if(!e)return[[Kr,t]];var r=t.length>e.length?t:e,i=t.length>e.length?e:t,s=r.indexOf(i);if(s!==-1)return n=[[yr,r.substring(0,s)],[Tn,i],[yr,r.substring(s+i.length)]],t.length>e.length&&(n[0][0]=n[2][0]=Kr),n;if(i.length===1)return[[Kr,t],[yr,e]];var a=Fle(t,e);if(a){var o=a[0],l=a[1],u=a[2],d=a[3],p=a[4],h=fh(o,u),m=fh(l,d);return h.concat([[Tn,p]],m)}return Dle(t,e)}function Dle(t,e){for(var n=t.length,r=e.length,i=Math.ceil((n+r)/2),s=i,a=2*i,o=new Array(a),l=new Array(a),u=0;u<a;u++)o[u]=-1,l[u]=-1;o[s+1]=0,l[s+1]=0;for(var d=n-r,p=d%2!==0,h=0,m=0,y=0,x=0,_=0;_<i;_++){for(var v=-_+h;v<=_-m;v+=2){var w=s+v,b;v===-_||v!==_&&o[w-1]<o[w+1]?b=o[w+1]:b=o[w-1]+1;for(var N=b-v;b<n&&N<r&&t.charAt(b)===e.charAt(N);)b++,N++;if(o[w]=b,b>n)m+=2;else if(N>r)h+=2;else if(p){var E=s+d-v;if(E>=0&&E<a&&l[E]!==-1){var A=n-l[E];if(b>=A)return Qj(t,e,b,N)}}}for(var P=-_+y;P<=_-x;P+=2){var E=s+P,A;P===-_||P!==_&&l[E-1]<l[E+1]?A=l[E+1]:A=l[E-1]+1;for(var T=A-P;A<n&&T<r&&t.charAt(n-A-1)===e.charAt(r-T-1);)A++,T++;if(l[E]=A,A>n)x+=2;else if(T>r)y+=2;else if(!p){var w=s+d-P;if(w>=0&&w<a&&o[w]!==-1){var b=o[w],N=s+b-w;if(A=n-A,b>=A)return Qj(t,e,b,N)}}}}return[[Kr,t],[yr,e]]}function Qj(t,e,n,r){var i=t.substring(0,n),s=e.substring(0,r),a=t.substring(n),o=e.substring(r),l=fh(i,s),u=fh(a,o);return l.concat(u)}function mN(t,e){if(!t||!e||t.charAt(0)!==e.charAt(0))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,s=0;n<i;)t.substring(s,i)==e.substring(s,i)?(n=i,s=n):r=i,i=Math.floor((r-n)/2+n);return NM(t.charCodeAt(i-1))&&i--,i}function Zj(t,e){var n=t.length,r=e.length;if(n==0||r==0)return 0;n>r?t=t.substring(n-r):n<r&&(e=e.substring(0,n));var i=Math.min(n,r);if(t==e)return i;for(var s=0,a=1;;){var o=t.substring(i-a),l=e.indexOf(o);if(l==-1)return s;a+=l,(l==0||t.substring(i-a)==e.substring(0,a))&&(s=a,a++)}}function D0(t,e){if(!t||!e||t.slice(-1)!==e.slice(-1))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,s=0;n<i;)t.substring(t.length-i,t.length-s)==e.substring(e.length-i,e.length-s)?(n=i,s=n):r=i,i=Math.floor((r-n)/2+n);return SM(t.charCodeAt(t.length-i))&&i--,i}function Fle(t,e){var n=t.length>e.length?t:e,r=t.length>e.length?e:t;if(n.length<4||r.length*2<n.length)return null;function i(m,y,x){for(var _=m.substring(x,x+Math.floor(m.length/4)),v=-1,w="",b,N,E,A;(v=y.indexOf(_,v+1))!==-1;){var P=mN(m.substring(x),y.substring(v)),T=D0(m.substring(0,x),y.substring(0,v));w.length<T+P&&(w=y.substring(v-T,v)+y.substring(v,v+P),b=m.substring(0,x-T),N=m.substring(x+P),E=y.substring(0,v-T),A=y.substring(v+P))}return w.length*2>=m.length?[b,N,E,A,w]:null}var s=i(n,r,Math.ceil(n.length/4)),a=i(n,r,Math.ceil(n.length/2)),o;if(!s&&!a)return null;a?s?o=s[4].length>a[4].length?s:a:o=a:o=s;var l,u,d,p;t.length>e.length?(l=o[0],u=o[1],d=o[2],p=o[3]):(d=o[0],p=o[1],l=o[2],u=o[3]);var h=o[4];return[l,u,d,p,h]}function qle(t){for(var e=!1,n=[],r=0,i=null,s=0,a=0,o=0,l=0,u=0;s<t.length;)t[s][0]==Tn?(n[r++]=s,a=l,o=u,l=0,u=0,i=t[s][1]):(t[s][0]==yr?l+=t[s][1].length:u+=t[s][1].length,i&&i.length<=Math.max(a,o)&&i.length<=Math.max(l,u)&&(t.splice(n[r-1],0,[Kr,i]),t[n[r-1]+1][0]=yr,r--,r--,s=r>0?n[r-1]:-1,a=0,o=0,l=0,u=0,i=null,e=!0)),s++;for(e&&gN(t),$le(t),s=1;s<t.length;){if(t[s-1][0]==Kr&&t[s][0]==yr){var d=t[s-1][1],p=t[s][1],h=Zj(d,p),m=Zj(p,d);h>=m?(h>=d.length/2||h>=p.length/2)&&(t.splice(s,0,[Tn,p.substring(0,h)]),t[s-1][1]=d.substring(0,d.length-h),t[s+1][1]=p.substring(h),s++):(m>=d.length/2||m>=p.length/2)&&(t.splice(s,0,[Tn,d.substring(0,m)]),t[s-1][0]=yr,t[s-1][1]=p.substring(0,p.length-m),t[s+1][0]=Kr,t[s+1][1]=d.substring(m),s++),s++}s++}}var Jj=/[^a-zA-Z0-9]/,eT=/\s/,tT=/[\r\n]/,Ble=/\n\r?\n$/,zle=/^\r?\n\r?\n/;function $le(t){function e(m,y){if(!m||!y)return 6;var x=m.charAt(m.length-1),_=y.charAt(0),v=x.match(Jj),w=_.match(Jj),b=v&&x.match(eT),N=w&&_.match(eT),E=b&&x.match(tT),A=N&&_.match(tT),P=E&&m.match(Ble),T=A&&y.match(zle);return P||T?5:E||A?4:v&&!b&&N?3:b||N?2:v||w?1:0}for(var n=1;n<t.length-1;){if(t[n-1][0]==Tn&&t[n+1][0]==Tn){var r=t[n-1][1],i=t[n][1],s=t[n+1][1],a=D0(r,i);if(a){var o=i.substring(i.length-a);r=r.substring(0,r.length-a),i=o+i.substring(0,i.length-a),s=o+s}for(var l=r,u=i,d=s,p=e(r,i)+e(i,s);i.charAt(0)===s.charAt(0);){r+=i.charAt(0),i=i.substring(1)+s.charAt(0),s=s.substring(1);var h=e(r,i)+e(i,s);h>=p&&(p=h,l=r,u=i,d=s)}t[n-1][1]!=l&&(l?t[n-1][1]=l:(t.splice(n-1,1),n--),t[n][1]=u,d?t[n+1][1]=d:(t.splice(n+1,1),n--))}n++}}function gN(t,e){t.push([Tn,""]);for(var n=0,r=0,i=0,s="",a="",o;n<t.length;){if(n<t.length-1&&!t[n][1]){t.splice(n,1);continue}switch(t[n][0]){case yr:i++,a+=t[n][1],n++;break;case Kr:r++,s+=t[n][1],n++;break;case Tn:var l=n-i-r-1;if(e){if(l>=0&&kM(t[l][1])){var u=t[l][1].slice(-1);if(t[l][1]=t[l][1].slice(0,-1),s=u+s,a=u+a,!t[l][1]){t.splice(l,1),n--;var d=l-1;t[d]&&t[d][0]===yr&&(i++,a=t[d][1]+a,d--),t[d]&&t[d][0]===Kr&&(r++,s=t[d][1]+s,d--),l=d}}if(EM(t[n][1])){var u=t[n][1].charAt(0);t[n][1]=t[n][1].slice(1),s+=u,a+=u}}if(n<t.length-1&&!t[n][1]){t.splice(n,1);break}if(s.length>0||a.length>0){s.length>0&&a.length>0&&(o=mN(a,s),o!==0&&(l>=0?t[l][1]+=a.substring(0,o):(t.splice(0,0,[Tn,a.substring(0,o)]),n++),a=a.substring(o),s=s.substring(o)),o=D0(a,s),o!==0&&(t[n][1]=a.substring(a.length-o)+t[n][1],a=a.substring(0,a.length-o),s=s.substring(0,s.length-o)));var p=i+r;s.length===0&&a.length===0?(t.splice(n-p,p),n=n-p):s.length===0?(t.splice(n-p,p,[yr,a]),n=n-p+1):a.length===0?(t.splice(n-p,p,[Kr,s]),n=n-p+1):(t.splice(n-p,p,[Kr,s],[yr,a]),n=n-p+2)}n!==0&&t[n-1][0]===Tn?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,i=0,r=0,s="",a="";break}}t[t.length-1][1]===""&&t.pop();var h=!1;for(n=1;n<t.length-1;)t[n-1][0]===Tn&&t[n+1][0]===Tn&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)===t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),h=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),h=!0)),n++;h&&gN(t,e)}function NM(t){return t>=55296&&t<=56319}function SM(t){return t>=56320&&t<=57343}function EM(t){return SM(t.charCodeAt(0))}function kM(t){return NM(t.charCodeAt(t.length-1))}function Ule(t){for(var e=[],n=0;n<t.length;n++)t[n][1].length>0&&e.push(t[n]);return e}function Yw(t,e,n,r){return kM(t)||EM(r)?null:Ule([[Tn,t],[Kr,e],[yr,n],[Tn,r]])}function Gle(t,e,n){var r=typeof n=="number"?{index:n,length:0}:n.oldRange,i=typeof n=="number"?null:n.newRange,s=t.length,a=e.length;if(r.length===0&&(i===null||i.length===0)){var o=r.index,l=t.slice(0,o),u=t.slice(o),d=i?i.index:null;e:{var p=o+a-s;if(d!==null&&d!==p||p<0||p>a)break e;var h=e.slice(0,p),m=e.slice(p);if(m!==u)break e;var y=Math.min(o,p),x=l.slice(0,y),_=h.slice(0,y);if(x!==_)break e;var v=l.slice(y),w=h.slice(y);return Yw(x,v,w,u)}e:{if(d!==null&&d!==o)break e;var b=o,h=e.slice(0,b),m=e.slice(b);if(h!==l)break e;var N=Math.min(s-b,a-b),E=u.slice(u.length-N),A=m.slice(m.length-N);if(E!==A)break e;var v=u.slice(0,u.length-N),w=m.slice(0,m.length-N);return Yw(l,v,w,E)}}if(r.length>0&&i&&i.length===0)e:{var x=t.slice(0,r.index),E=t.slice(r.index+r.length),y=x.length,N=E.length;if(a<y+N)break e;var _=e.slice(0,y),A=e.slice(a-N);if(x!==_||E!==A)break e;var v=t.slice(y,s-N),w=e.slice(y,a-N);return Yw(x,v,w,E)}return null}function F0(t,e,n,r){return fh(t,e,n,r,!0)}F0.INSERT=yr;F0.DELETE=Kr;F0.EQUAL=Tn;var Hle=F0,Rg={exports:{}};Rg.exports;(function(t,e){var n=200,r="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",a="[object Array]",o="[object Boolean]",l="[object Date]",u="[object Error]",d="[object Function]",p="[object GeneratorFunction]",h="[object Map]",m="[object Number]",y="[object Object]",x="[object Promise]",_="[object RegExp]",v="[object Set]",w="[object String]",b="[object Symbol]",N="[object WeakMap]",E="[object ArrayBuffer]",A="[object DataView]",P="[object Float32Array]",T="[object Float64Array]",M="[object Int8Array]",k="[object Int16Array]",j="[object Int32Array]",O="[object Uint8Array]",q="[object Uint8ClampedArray]",I="[object Uint16Array]",D="[object Uint32Array]",U=/[\\^$.*+?()[\]{}|]/g,W=/\w*$/,Y=/^\[object .+?Constructor\]$/,H=/^(?:0|[1-9]\d*)$/,B={};B[s]=B[a]=B[E]=B[A]=B[o]=B[l]=B[P]=B[T]=B[M]=B[k]=B[j]=B[h]=B[m]=B[y]=B[_]=B[v]=B[w]=B[b]=B[O]=B[q]=B[I]=B[D]=!0,B[u]=B[d]=B[N]=!1;var L=typeof Qt=="object"&&Qt&&Qt.Object===Object&&Qt,z=typeof self=="object"&&self&&self.Object===Object&&self,K=L||z||Function("return this")(),J=e&&!e.nodeType&&e,ne=J&&!0&&t&&!t.nodeType&&t,X=ne&&ne.exports===J;function G(F,Z){return F.set(Z[0],Z[1]),F}function te(F,Z){return F.add(Z),F}function re(F,Z){for(var ie=-1,ve=F?F.length:0;++ie<ve&&Z(F[ie],ie,F)!==!1;);return F}function Q(F,Z){for(var ie=-1,ve=Z.length,Ue=F.length;++ie<ve;)F[Ue+ie]=Z[ie];return F}function se(F,Z,ie,ve){var Ue=-1,Me=F?F.length:0;for(ve&&Me&&(ie=F[++Ue]);++Ue<Me;)ie=Z(ie,F[Ue],Ue,F);return ie}function de(F,Z){for(var ie=-1,ve=Array(F);++ie<F;)ve[ie]=Z(ie);return ve}function le(F,Z){return F==null?void 0:F[Z]}function ue(F){var Z=!1;if(F!=null&&typeof F.toString!="function")try{Z=!!(F+"")}catch{}return Z}function he(F){var Z=-1,ie=Array(F.size);return F.forEach(function(ve,Ue){ie[++Z]=[Ue,ve]}),ie}function qe(F,Z){return function(ie){return F(Z(ie))}}function we(F){var Z=-1,ie=Array(F.size);return F.forEach(function(ve){ie[++Z]=ve}),ie}var ae=Array.prototype,me=Function.prototype,_e=Object.prototype,Ee=K["__core-js_shared__"],xe=function(){var F=/[^.]+$/.exec(Ee&&Ee.keys&&Ee.keys.IE_PROTO||"");return F?"Symbol(src)_1."+F:""}(),Oe=me.toString,Te=_e.hasOwnProperty,Be=_e.toString,Et=RegExp("^"+Oe.call(Te).replace(U,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),bt=X?K.Buffer:void 0,He=K.Symbol,wn=K.Uint8Array,Ve=qe(Object.getPrototypeOf,Object),dt=Object.create,cn=_e.propertyIsEnumerable,nn=ae.splice,Ht=Object.getOwnPropertySymbols,Xn=bt?bt.isBuffer:void 0,Qn=qe(Object.keys,Object),mn=Jn(K,"DataView"),hr=Jn(K,"Map"),Bn=Jn(K,"Promise"),Nr=Jn(K,"Set"),Pi=Jn(K,"WeakMap"),si=Jn(Object,"create"),pr=$n(mn),ai=$n(hr),cs=$n(Bn),Us=$n(Nr),Ri=$n(Pi),Br=He?He.prototype:void 0,Gs=Br?Br.valueOf:void 0;function zr(F){var Z=-1,ie=F?F.length:0;for(this.clear();++Z<ie;){var ve=F[Z];this.set(ve[0],ve[1])}}function sl(){this.__data__=si?si(null):{}}function al(F){return this.has(F)&&delete this.__data__[F]}function Fa(F){var Z=this.__data__;if(si){var ie=Z[F];return ie===r?void 0:ie}return Te.call(Z,F)?Z[F]:void 0}function us(F){var Z=this.__data__;return si?Z[F]!==void 0:Te.call(Z,F)}function Hs(F,Z){var ie=this.__data__;return ie[F]=si&&Z===void 0?r:Z,this}zr.prototype.clear=sl,zr.prototype.delete=al,zr.prototype.get=Fa,zr.prototype.has=us,zr.prototype.set=Hs;function un(F){var Z=-1,ie=F?F.length:0;for(this.clear();++Z<ie;){var ve=F[Z];this.set(ve[0],ve[1])}}function ds(){this.__data__=[]}function ol(F){var Z=this.__data__,ie=Ii(Z,F);if(ie<0)return!1;var ve=Z.length-1;return ie==ve?Z.pop():nn.call(Z,ie,1),!0}function ll(F){var Z=this.__data__,ie=Ii(Z,F);return ie<0?void 0:Z[ie][1]}function qa(F){return Ii(this.__data__,F)>-1}function cl(F,Z){var ie=this.__data__,ve=Ii(ie,F);return ve<0?ie.push([F,Z]):ie[ve][1]=Z,this}un.prototype.clear=ds,un.prototype.delete=ol,un.prototype.get=ll,un.prototype.has=qa,un.prototype.set=cl;function gn(F){var Z=-1,ie=F?F.length:0;for(this.clear();++Z<ie;){var ve=F[Z];this.set(ve[0],ve[1])}}function ul(){this.__data__={hash:new zr,map:new(hr||un),string:new zr}}function dl(F){return Ks(this,F).delete(F)}function fl(F){return Ks(this,F).get(F)}function hl(F){return Ks(this,F).has(F)}function pl(F,Z){return Ks(this,F).set(F,Z),this}gn.prototype.clear=ul,gn.prototype.delete=dl,gn.prototype.get=fl,gn.prototype.has=hl,gn.prototype.set=pl;function Rn(F){this.__data__=new un(F)}function Ba(){this.__data__=new un}function ml(F){return this.__data__.delete(F)}function gl(F){return this.__data__.get(F)}function Vs(F){return this.__data__.has(F)}function Li(F,Z){var ie=this.__data__;if(ie instanceof un){var ve=ie.__data__;if(!hr||ve.length<n-1)return ve.push([F,Z]),this;ie=this.__data__=new gn(ve)}return ie.set(F,Z),this}Rn.prototype.clear=Ba,Rn.prototype.delete=ml,Rn.prototype.get=gl,Rn.prototype.has=Vs,Rn.prototype.set=Li;function oi(F,Z){var ie=Xs(F)||Ys(F)?de(F.length,String):[],ve=ie.length,Ue=!!ve;for(var Me in F)(Z||Te.call(F,Me))&&!(Ue&&(Me=="length"||vl(Me,ve)))&&ie.push(Me);return ie}function fs(F,Z,ie){var ve=F[Z];(!(Te.call(F,Z)&&st(ve,ie))||ie===void 0&&!(Z in F))&&(F[Z]=ie)}function Ii(F,Z){for(var ie=F.length;ie--;)if(st(F[ie][0],Z))return ie;return-1}function Zn(F,Z){return F&&zn(Z,xl(Z),F)}function Sr(F,Z,ie,ve,Ue,Me,nt){var ct;if(ve&&(ct=Me?ve(F,Ue,Me,nt):ve(F)),ct!==void 0)return ct;if(!ui(F))return F;var vt=Xs(F);if(vt){if(ct=$a(F),!Z)return kc(F,ct)}else{var at=mr(F),Vt=at==d||at==p;if(jc(F))return dn(F,Z);if(at==y||at==s||Vt&&!Me){if(ue(F))return Me?F:{};if(ct=ci(Vt?{}:F),!Z)return pd(F,Zn(ct,F))}else{if(!B[at])return Me?F:{};ct=gd(F,at,Sr,Z)}}nt||(nt=new Rn);var Nn=nt.get(F);if(Nn)return Nn;if(nt.set(F,ct),!vt)var qt=ie?md(F):xl(F);return re(qt||F,function(Nt,_t){qt&&(_t=Nt,Nt=F[_t]),fs(ct,_t,Sr(Nt,Z,ie,ve,_t,F,nt))}),ct}function Er(F){return ui(F)?dt(F):{}}function ht(F,Z,ie){var ve=Z(F);return Xs(F)?ve:Q(ve,ie(F))}function wt(F){return Be.call(F)}function li(F){if(!ui(F)||yl(F))return!1;var Z=Ft(F)||ue(F)?Et:Y;return Z.test($n(F))}function vn(F){if(!hs(F))return Qn(F);var Z=[];for(var ie in Object(F))Te.call(F,ie)&&ie!="constructor"&&Z.push(ie);return Z}function dn(F,Z){if(Z)return F.slice();var ie=new F.constructor(F.length);return F.copy(ie),ie}function $r(F){var Z=new F.constructor(F.byteLength);return new wn(Z).set(new wn(F)),Z}function kr(F,Z){var ie=Z?$r(F.buffer):F.buffer;return new F.constructor(ie,F.byteOffset,F.byteLength)}function _n(F,Z,ie){var ve=Z?ie(he(F),!0):he(F);return se(ve,G,new F.constructor)}function Ws(F){var Z=new F.constructor(F.source,W.exec(F));return Z.lastIndex=F.lastIndex,Z}function Sc(F,Z,ie){var ve=Z?ie(we(F),!0):we(F);return se(ve,te,new F.constructor)}function Ec(F){return Gs?Object(Gs.call(F)):{}}function za(F,Z){var ie=Z?$r(F.buffer):F.buffer;return new F.constructor(ie,F.byteOffset,F.length)}function kc(F,Z){var ie=-1,ve=F.length;for(Z||(Z=Array(ve));++ie<ve;)Z[ie]=F[ie];return Z}function zn(F,Z,ie,ve){ie||(ie={});for(var Ue=-1,Me=Z.length;++Ue<Me;){var nt=Z[Ue],ct=ve?ve(ie[nt],F[nt],nt,ie,F):void 0;fs(ie,nt,ct===void 0?F[nt]:ct)}return ie}function pd(F,Z){return zn(F,Cr(F),Z)}function md(F){return ht(F,xl,Cr)}function Ks(F,Z){var ie=F.__data__;return Cc(Z)?ie[typeof Z=="string"?"string":"hash"]:ie.map}function Jn(F,Z){var ie=le(F,Z);return li(ie)?ie:void 0}var Cr=Ht?qe(Ht,Object):Va,mr=wt;(mn&&mr(new mn(new ArrayBuffer(1)))!=A||hr&&mr(new hr)!=h||Bn&&mr(Bn.resolve())!=x||Nr&&mr(new Nr)!=v||Pi&&mr(new Pi)!=N)&&(mr=function(F){var Z=Be.call(F),ie=Z==y?F.constructor:void 0,ve=ie?$n(ie):void 0;if(ve)switch(ve){case pr:return A;case ai:return h;case cs:return x;case Us:return v;case Ri:return N}return Z});function $a(F){var Z=F.length,ie=F.constructor(Z);return Z&&typeof F[0]=="string"&&Te.call(F,"index")&&(ie.index=F.index,ie.input=F.input),ie}function ci(F){return typeof F.constructor=="function"&&!hs(F)?Er(Ve(F)):{}}function gd(F,Z,ie,ve){var Ue=F.constructor;switch(Z){case E:return $r(F);case o:case l:return new Ue(+F);case A:return kr(F,ve);case P:case T:case M:case k:case j:case O:case q:case I:case D:return za(F,ve);case h:return _n(F,ve,ie);case m:case w:return new Ue(F);case _:return Ws(F);case v:return Sc(F,ve,ie);case b:return Ec(F)}}function vl(F,Z){return Z=Z??i,!!Z&&(typeof F=="number"||H.test(F))&&F>-1&&F%1==0&&F<Z}function Cc(F){var Z=typeof F;return Z=="string"||Z=="number"||Z=="symbol"||Z=="boolean"?F!=="__proto__":F===null}function yl(F){return!!xe&&xe in F}function hs(F){var Z=F&&F.constructor,ie=typeof Z=="function"&&Z.prototype||_e;return F===ie}function $n(F){if(F!=null){try{return Oe.call(F)}catch{}try{return F+""}catch{}}return""}function Ua(F){return Sr(F,!0,!0)}function st(F,Z){return F===Z||F!==F&&Z!==Z}function Ys(F){return vd(F)&&Te.call(F,"callee")&&(!cn.call(F,"callee")||Be.call(F)==s)}var Xs=Array.isArray;function Qs(F){return F!=null&&Ga(F.length)&&!Ft(F)}function vd(F){return Ha(F)&&Qs(F)}var jc=Xn||jr;function Ft(F){var Z=ui(F)?Be.call(F):"";return Z==d||Z==p}function Ga(F){return typeof F=="number"&&F>-1&&F%1==0&&F<=i}function ui(F){var Z=typeof F;return!!F&&(Z=="object"||Z=="function")}function Ha(F){return!!F&&typeof F=="object"}function xl(F){return Qs(F)?oi(F):vn(F)}function Va(){return[]}function jr(){return!1}t.exports=Ua})(Rg,Rg.exports);var CM=Rg.exports,Lg={exports:{}};Lg.exports;(function(t,e){var n=200,r="__lodash_hash_undefined__",i=1,s=2,a=9007199254740991,o="[object Arguments]",l="[object Array]",u="[object AsyncFunction]",d="[object Boolean]",p="[object Date]",h="[object Error]",m="[object Function]",y="[object GeneratorFunction]",x="[object Map]",_="[object Number]",v="[object Null]",w="[object Object]",b="[object Promise]",N="[object Proxy]",E="[object RegExp]",A="[object Set]",P="[object String]",T="[object Symbol]",M="[object Undefined]",k="[object WeakMap]",j="[object ArrayBuffer]",O="[object DataView]",q="[object Float32Array]",I="[object Float64Array]",D="[object Int8Array]",U="[object Int16Array]",W="[object Int32Array]",Y="[object Uint8Array]",H="[object Uint8ClampedArray]",B="[object Uint16Array]",L="[object Uint32Array]",z=/[\\^$.*+?()[\]{}|]/g,K=/^\[object .+?Constructor\]$/,J=/^(?:0|[1-9]\d*)$/,ne={};ne[q]=ne[I]=ne[D]=ne[U]=ne[W]=ne[Y]=ne[H]=ne[B]=ne[L]=!0,ne[o]=ne[l]=ne[j]=ne[d]=ne[O]=ne[p]=ne[h]=ne[m]=ne[x]=ne[_]=ne[w]=ne[E]=ne[A]=ne[P]=ne[k]=!1;var X=typeof Qt=="object"&&Qt&&Qt.Object===Object&&Qt,G=typeof self=="object"&&self&&self.Object===Object&&self,te=X||G||Function("return this")(),re=e&&!e.nodeType&&e,Q=re&&!0&&t&&!t.nodeType&&t,se=Q&&Q.exports===re,de=se&&X.process,le=function(){try{return de&&de.binding&&de.binding("util")}catch{}}(),ue=le&&le.isTypedArray;function he(F,Z){for(var ie=-1,ve=F==null?0:F.length,Ue=0,Me=[];++ie<ve;){var nt=F[ie];Z(nt,ie,F)&&(Me[Ue++]=nt)}return Me}function qe(F,Z){for(var ie=-1,ve=Z.length,Ue=F.length;++ie<ve;)F[Ue+ie]=Z[ie];return F}function we(F,Z){for(var ie=-1,ve=F==null?0:F.length;++ie<ve;)if(Z(F[ie],ie,F))return!0;return!1}function ae(F,Z){for(var ie=-1,ve=Array(F);++ie<F;)ve[ie]=Z(ie);return ve}function me(F){return function(Z){return F(Z)}}function _e(F,Z){return F.has(Z)}function Ee(F,Z){return F==null?void 0:F[Z]}function xe(F){var Z=-1,ie=Array(F.size);return F.forEach(function(ve,Ue){ie[++Z]=[Ue,ve]}),ie}function Oe(F,Z){return function(ie){return F(Z(ie))}}function Te(F){var Z=-1,ie=Array(F.size);return F.forEach(function(ve){ie[++Z]=ve}),ie}var Be=Array.prototype,Et=Function.prototype,bt=Object.prototype,He=te["__core-js_shared__"],wn=Et.toString,Ve=bt.hasOwnProperty,dt=function(){var F=/[^.]+$/.exec(He&&He.keys&&He.keys.IE_PROTO||"");return F?"Symbol(src)_1."+F:""}(),cn=bt.toString,nn=RegExp("^"+wn.call(Ve).replace(z,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ht=se?te.Buffer:void 0,Xn=te.Symbol,Qn=te.Uint8Array,mn=bt.propertyIsEnumerable,hr=Be.splice,Bn=Xn?Xn.toStringTag:void 0,Nr=Object.getOwnPropertySymbols,Pi=Ht?Ht.isBuffer:void 0,si=Oe(Object.keys,Object),pr=Cr(te,"DataView"),ai=Cr(te,"Map"),cs=Cr(te,"Promise"),Us=Cr(te,"Set"),Ri=Cr(te,"WeakMap"),Br=Cr(Object,"create"),Gs=$n(pr),zr=$n(ai),sl=$n(cs),al=$n(Us),Fa=$n(Ri),us=Xn?Xn.prototype:void 0,Hs=us?us.valueOf:void 0;function un(F){var Z=-1,ie=F==null?0:F.length;for(this.clear();++Z<ie;){var ve=F[Z];this.set(ve[0],ve[1])}}function ds(){this.__data__=Br?Br(null):{},this.size=0}function ol(F){var Z=this.has(F)&&delete this.__data__[F];return this.size-=Z?1:0,Z}function ll(F){var Z=this.__data__;if(Br){var ie=Z[F];return ie===r?void 0:ie}return Ve.call(Z,F)?Z[F]:void 0}function qa(F){var Z=this.__data__;return Br?Z[F]!==void 0:Ve.call(Z,F)}function cl(F,Z){var ie=this.__data__;return this.size+=this.has(F)?0:1,ie[F]=Br&&Z===void 0?r:Z,this}un.prototype.clear=ds,un.prototype.delete=ol,un.prototype.get=ll,un.prototype.has=qa,un.prototype.set=cl;function gn(F){var Z=-1,ie=F==null?0:F.length;for(this.clear();++Z<ie;){var ve=F[Z];this.set(ve[0],ve[1])}}function ul(){this.__data__=[],this.size=0}function dl(F){var Z=this.__data__,ie=dn(Z,F);if(ie<0)return!1;var ve=Z.length-1;return ie==ve?Z.pop():hr.call(Z,ie,1),--this.size,!0}function fl(F){var Z=this.__data__,ie=dn(Z,F);return ie<0?void 0:Z[ie][1]}function hl(F){return dn(this.__data__,F)>-1}function pl(F,Z){var ie=this.__data__,ve=dn(ie,F);return ve<0?(++this.size,ie.push([F,Z])):ie[ve][1]=Z,this}gn.prototype.clear=ul,gn.prototype.delete=dl,gn.prototype.get=fl,gn.prototype.has=hl,gn.prototype.set=pl;function Rn(F){var Z=-1,ie=F==null?0:F.length;for(this.clear();++Z<ie;){var ve=F[Z];this.set(ve[0],ve[1])}}function Ba(){this.size=0,this.__data__={hash:new un,map:new(ai||gn),string:new un}}function ml(F){var Z=Jn(this,F).delete(F);return this.size-=Z?1:0,Z}function gl(F){return Jn(this,F).get(F)}function Vs(F){return Jn(this,F).has(F)}function Li(F,Z){var ie=Jn(this,F),ve=ie.size;return ie.set(F,Z),this.size+=ie.size==ve?0:1,this}Rn.prototype.clear=Ba,Rn.prototype.delete=ml,Rn.prototype.get=gl,Rn.prototype.has=Vs,Rn.prototype.set=Li;function oi(F){var Z=-1,ie=F==null?0:F.length;for(this.__data__=new Rn;++Z<ie;)this.add(F[Z])}function fs(F){return this.__data__.set(F,r),this}function Ii(F){return this.__data__.has(F)}oi.prototype.add=oi.prototype.push=fs,oi.prototype.has=Ii;function Zn(F){var Z=this.__data__=new gn(F);this.size=Z.size}function Sr(){this.__data__=new gn,this.size=0}function Er(F){var Z=this.__data__,ie=Z.delete(F);return this.size=Z.size,ie}function ht(F){return this.__data__.get(F)}function wt(F){return this.__data__.has(F)}function li(F,Z){var ie=this.__data__;if(ie instanceof gn){var ve=ie.__data__;if(!ai||ve.length<n-1)return ve.push([F,Z]),this.size=++ie.size,this;ie=this.__data__=new Rn(ve)}return ie.set(F,Z),this.size=ie.size,this}Zn.prototype.clear=Sr,Zn.prototype.delete=Er,Zn.prototype.get=ht,Zn.prototype.has=wt,Zn.prototype.set=li;function vn(F,Z){var ie=Ys(F),ve=!ie&&st(F),Ue=!ie&&!ve&&Qs(F),Me=!ie&&!ve&&!Ue&&Ha(F),nt=ie||ve||Ue||Me,ct=nt?ae(F.length,String):[],vt=ct.length;for(var at in F)(Z||Ve.call(F,at))&&!(nt&&(at=="length"||Ue&&(at=="offset"||at=="parent")||Me&&(at=="buffer"||at=="byteLength"||at=="byteOffset")||gd(at,vt)))&&ct.push(at);return ct}function dn(F,Z){for(var ie=F.length;ie--;)if(Ua(F[ie][0],Z))return ie;return-1}function $r(F,Z,ie){var ve=Z(F);return Ys(F)?ve:qe(ve,ie(F))}function kr(F){return F==null?F===void 0?M:v:Bn&&Bn in Object(F)?mr(F):hs(F)}function _n(F){return ui(F)&&kr(F)==o}function Ws(F,Z,ie,ve,Ue){return F===Z?!0:F==null||Z==null||!ui(F)&&!ui(Z)?F!==F&&Z!==Z:Sc(F,Z,ie,ve,Ws,Ue)}function Sc(F,Z,ie,ve,Ue,Me){var nt=Ys(F),ct=Ys(Z),vt=nt?l:ci(F),at=ct?l:ci(Z);vt=vt==o?w:vt,at=at==o?w:at;var Vt=vt==w,Nn=at==w,qt=vt==at;if(qt&&Qs(F)){if(!Qs(Z))return!1;nt=!0,Vt=!1}if(qt&&!Vt)return Me||(Me=new Zn),nt||Ha(F)?zn(F,Z,ie,ve,Ue,Me):pd(F,Z,vt,ie,ve,Ue,Me);if(!(ie&i)){var Nt=Vt&&Ve.call(F,"__wrapped__"),_t=Nn&&Ve.call(Z,"__wrapped__");if(Nt||_t){var er=Nt?F.value():F,Sn=_t?Z.value():Z;return Me||(Me=new Zn),Ue(er,Sn,ie,ve,Me)}}return qt?(Me||(Me=new Zn),md(F,Z,ie,ve,Ue,Me)):!1}function Ec(F){if(!Ga(F)||Cc(F))return!1;var Z=jc(F)?nn:K;return Z.test($n(F))}function za(F){return ui(F)&&Ft(F.length)&&!!ne[kr(F)]}function kc(F){if(!yl(F))return si(F);var Z=[];for(var ie in Object(F))Ve.call(F,ie)&&ie!="constructor"&&Z.push(ie);return Z}function zn(F,Z,ie,ve,Ue,Me){var nt=ie&i,ct=F.length,vt=Z.length;if(ct!=vt&&!(nt&&vt>ct))return!1;var at=Me.get(F);if(at&&Me.get(Z))return at==Z;var Vt=-1,Nn=!0,qt=ie&s?new oi:void 0;for(Me.set(F,Z),Me.set(Z,F);++Vt<ct;){var Nt=F[Vt],_t=Z[Vt];if(ve)var er=nt?ve(_t,Nt,Vt,Z,F,Me):ve(Nt,_t,Vt,F,Z,Me);if(er!==void 0){if(er)continue;Nn=!1;break}if(qt){if(!we(Z,function(Sn,Un){if(!_e(qt,Un)&&(Nt===Sn||Ue(Nt,Sn,ie,ve,Me)))return qt.push(Un)})){Nn=!1;break}}else if(!(Nt===_t||Ue(Nt,_t,ie,ve,Me))){Nn=!1;break}}return Me.delete(F),Me.delete(Z),Nn}function pd(F,Z,ie,ve,Ue,Me,nt){switch(ie){case O:if(F.byteLength!=Z.byteLength||F.byteOffset!=Z.byteOffset)return!1;F=F.buffer,Z=Z.buffer;case j:return!(F.byteLength!=Z.byteLength||!Me(new Qn(F),new Qn(Z)));case d:case p:case _:return Ua(+F,+Z);case h:return F.name==Z.name&&F.message==Z.message;case E:case P:return F==Z+"";case x:var ct=xe;case A:var vt=ve&i;if(ct||(ct=Te),F.size!=Z.size&&!vt)return!1;var at=nt.get(F);if(at)return at==Z;ve|=s,nt.set(F,Z);var Vt=zn(ct(F),ct(Z),ve,Ue,Me,nt);return nt.delete(F),Vt;case T:if(Hs)return Hs.call(F)==Hs.call(Z)}return!1}function md(F,Z,ie,ve,Ue,Me){var nt=ie&i,ct=Ks(F),vt=ct.length,at=Ks(Z),Vt=at.length;if(vt!=Vt&&!nt)return!1;for(var Nn=vt;Nn--;){var qt=ct[Nn];if(!(nt?qt in Z:Ve.call(Z,qt)))return!1}var Nt=Me.get(F);if(Nt&&Me.get(Z))return Nt==Z;var _t=!0;Me.set(F,Z),Me.set(Z,F);for(var er=nt;++Nn<vt;){qt=ct[Nn];var Sn=F[qt],Un=Z[qt];if(ve)var ps=nt?ve(Un,Sn,qt,Z,F,Me):ve(Sn,Un,qt,F,Z,Me);if(!(ps===void 0?Sn===Un||Ue(Sn,Un,ie,ve,Me):ps)){_t=!1;break}er||(er=qt=="constructor")}if(_t&&!er){var bl=F.constructor,Wa=Z.constructor;bl!=Wa&&"constructor"in F&&"constructor"in Z&&!(typeof bl=="function"&&bl instanceof bl&&typeof Wa=="function"&&Wa instanceof Wa)&&(_t=!1)}return Me.delete(F),Me.delete(Z),_t}function Ks(F){return $r(F,xl,$a)}function Jn(F,Z){var ie=F.__data__;return vl(Z)?ie[typeof Z=="string"?"string":"hash"]:ie.map}function Cr(F,Z){var ie=Ee(F,Z);return Ec(ie)?ie:void 0}function mr(F){var Z=Ve.call(F,Bn),ie=F[Bn];try{F[Bn]=void 0;var ve=!0}catch{}var Ue=cn.call(F);return ve&&(Z?F[Bn]=ie:delete F[Bn]),Ue}var $a=Nr?function(F){return F==null?[]:(F=Object(F),he(Nr(F),function(Z){return mn.call(F,Z)}))}:Va,ci=kr;(pr&&ci(new pr(new ArrayBuffer(1)))!=O||ai&&ci(new ai)!=x||cs&&ci(cs.resolve())!=b||Us&&ci(new Us)!=A||Ri&&ci(new Ri)!=k)&&(ci=function(F){var Z=kr(F),ie=Z==w?F.constructor:void 0,ve=ie?$n(ie):"";if(ve)switch(ve){case Gs:return O;case zr:return x;case sl:return b;case al:return A;case Fa:return k}return Z});function gd(F,Z){return Z=Z??a,!!Z&&(typeof F=="number"||J.test(F))&&F>-1&&F%1==0&&F<Z}function vl(F){var Z=typeof F;return Z=="string"||Z=="number"||Z=="symbol"||Z=="boolean"?F!=="__proto__":F===null}function Cc(F){return!!dt&&dt in F}function yl(F){var Z=F&&F.constructor,ie=typeof Z=="function"&&Z.prototype||bt;return F===ie}function hs(F){return cn.call(F)}function $n(F){if(F!=null){try{return wn.call(F)}catch{}try{return F+""}catch{}}return""}function Ua(F,Z){return F===Z||F!==F&&Z!==Z}var st=_n(function(){return arguments}())?_n:function(F){return ui(F)&&Ve.call(F,"callee")&&!mn.call(F,"callee")},Ys=Array.isArray;function Xs(F){return F!=null&&Ft(F.length)&&!jc(F)}var Qs=Pi||jr;function vd(F,Z){return Ws(F,Z)}function jc(F){if(!Ga(F))return!1;var Z=kr(F);return Z==m||Z==y||Z==u||Z==N}function Ft(F){return typeof F=="number"&&F>-1&&F%1==0&&F<=a}function Ga(F){var Z=typeof F;return F!=null&&(Z=="object"||Z=="function")}function ui(F){return F!=null&&typeof F=="object"}var Ha=ue?me(ue):za;function xl(F){return Xs(F)?vn(F):kc(F)}function Va(){return[]}function jr(){return!1}t.exports=vd})(Lg,Lg.exports);var jM=Lg.exports,vN={};Object.defineProperty(vN,"__esModule",{value:!0});const Vle=CM,Wle=jM;var W_;(function(t){function e(s={},a={},o=!1){typeof s!="object"&&(s={}),typeof a!="object"&&(a={});let l=Vle(a);o||(l=Object.keys(l).reduce((u,d)=>(l[d]!=null&&(u[d]=l[d]),u),{}));for(const u in s)s[u]!==void 0&&a[u]===void 0&&(l[u]=s[u]);return Object.keys(l).length>0?l:void 0}t.compose=e;function n(s={},a={}){typeof s!="object"&&(s={}),typeof a!="object"&&(a={});const o=Object.keys(s).concat(Object.keys(a)).reduce((l,u)=>(Wle(s[u],a[u])||(l[u]=a[u]===void 0?null:a[u]),l),{});return Object.keys(o).length>0?o:void 0}t.diff=n;function r(s={},a={}){s=s||{};const o=Object.keys(a).reduce((l,u)=>(a[u]!==s[u]&&s[u]!==void 0&&(l[u]=a[u]),l),{});return Object.keys(s).reduce((l,u)=>(s[u]!==a[u]&&a[u]===void 0&&(l[u]=null),l),o)}t.invert=r;function i(s,a,o=!1){if(typeof s!="object")return a;if(typeof a!="object")return;if(!o)return a;const l=Object.keys(a).reduce((u,d)=>(s[d]===void 0&&(u[d]=a[d]),u),{});return Object.keys(l).length>0?l:void 0}t.transform=i})(W_||(W_={}));vN.default=W_;var q0={};Object.defineProperty(q0,"__esModule",{value:!0});var K_;(function(t){function e(n){return typeof n.delete=="number"?n.delete:typeof n.retain=="number"?n.retain:typeof n.retain=="object"&&n.retain!==null?1:typeof n.insert=="string"?n.insert.length:1}t.length=e})(K_||(K_={}));q0.default=K_;var yN={};Object.defineProperty(yN,"__esModule",{value:!0});const nT=q0;class Kle{constructor(e){this.ops=e,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(e){e||(e=1/0);const n=this.ops[this.index];if(n){const r=this.offset,i=nT.default.length(n);if(e>=i-r?(e=i-r,this.index+=1,this.offset=0):this.offset+=e,typeof n.delete=="number")return{delete:e};{const s={};return n.attributes&&(s.attributes=n.attributes),typeof n.retain=="number"?s.retain=e:typeof n.retain=="object"&&n.retain!==null?s.retain=n.retain:typeof n.insert=="string"?s.insert=n.insert.substr(r,e):s.insert=n.insert,s}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?nT.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const e=this.ops[this.index];return e?typeof e.delete=="number"?"delete":typeof e.retain=="number"||typeof e.retain=="object"&&e.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const e=this.offset,n=this.index,r=this.next(),i=this.ops.slice(this.index);return this.offset=e,this.index=n,[r].concat(i)}}else return[]}}yN.default=Kle;(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const n=Hle,r=CM,i=jM,s=vN;e.AttributeMap=s.default;const a=q0;e.Op=a.default;const o=yN;e.OpIterator=o.default;const l=String.fromCharCode(0),u=(p,h)=>{if(typeof p!="object"||p===null)throw new Error(`cannot retain a ${typeof p}`);if(typeof h!="object"||h===null)throw new Error(`cannot retain a ${typeof h}`);const m=Object.keys(p)[0];if(!m||m!==Object.keys(h)[0])throw new Error(`embed types not matched: ${m} != ${Object.keys(h)[0]}`);return[m,p[m],h[m]]};class d{constructor(h){Array.isArray(h)?this.ops=h:h!=null&&Array.isArray(h.ops)?this.ops=h.ops:this.ops=[]}static registerEmbed(h,m){this.handlers[h]=m}static unregisterEmbed(h){delete this.handlers[h]}static getHandler(h){const m=this.handlers[h];if(!m)throw new Error(`no handlers for embed type "${h}"`);return m}insert(h,m){const y={};return typeof h=="string"&&h.length===0?this:(y.insert=h,m!=null&&typeof m=="object"&&Object.keys(m).length>0&&(y.attributes=m),this.push(y))}delete(h){return h<=0?this:this.push({delete:h})}retain(h,m){if(typeof h=="number"&&h<=0)return this;const y={retain:h};return m!=null&&typeof m=="object"&&Object.keys(m).length>0&&(y.attributes=m),this.push(y)}push(h){let m=this.ops.length,y=this.ops[m-1];if(h=r(h),typeof y=="object"){if(typeof h.delete=="number"&&typeof y.delete=="number")return this.ops[m-1]={delete:y.delete+h.delete},this;if(typeof y.delete=="number"&&h.insert!=null&&(m-=1,y=this.ops[m-1],typeof y!="object"))return this.ops.unshift(h),this;if(i(h.attributes,y.attributes)){if(typeof h.insert=="string"&&typeof y.insert=="string")return this.ops[m-1]={insert:y.insert+h.insert},typeof h.attributes=="object"&&(this.ops[m-1].attributes=h.attributes),this;if(typeof h.retain=="number"&&typeof y.retain=="number")return this.ops[m-1]={retain:y.retain+h.retain},typeof h.attributes=="object"&&(this.ops[m-1].attributes=h.attributes),this}}return m===this.ops.length?this.ops.push(h):this.ops.splice(m,0,h),this}chop(){const h=this.ops[this.ops.length-1];return h&&typeof h.retain=="number"&&!h.attributes&&this.ops.pop(),this}filter(h){return this.ops.filter(h)}forEach(h){this.ops.forEach(h)}map(h){return this.ops.map(h)}partition(h){const m=[],y=[];return this.forEach(x=>{(h(x)?m:y).push(x)}),[m,y]}reduce(h,m){return this.ops.reduce(h,m)}changeLength(){return this.reduce((h,m)=>m.insert?h+a.default.length(m):m.delete?h-m.delete:h,0)}length(){return this.reduce((h,m)=>h+a.default.length(m),0)}slice(h=0,m=1/0){const y=[],x=new o.default(this.ops);let _=0;for(;_<m&&x.hasNext();){let v;_<h?v=x.next(h-_):(v=x.next(m-_),y.push(v)),_+=a.default.length(v)}return new d(y)}compose(h){const m=new o.default(this.ops),y=new o.default(h.ops),x=[],_=y.peek();if(_!=null&&typeof _.retain=="number"&&_.attributes==null){let w=_.retain;for(;m.peekType()==="insert"&&m.peekLength()<=w;)w-=m.peekLength(),x.push(m.next());_.retain-w>0&&y.next(_.retain-w)}const v=new d(x);for(;m.hasNext()||y.hasNext();)if(y.peekType()==="insert")v.push(y.next());else if(m.peekType()==="delete")v.push(m.next());else{const w=Math.min(m.peekLength(),y.peekLength()),b=m.next(w),N=y.next(w);if(N.retain){const E={};if(typeof b.retain=="number")E.retain=typeof N.retain=="number"?w:N.retain;else if(typeof N.retain=="number")b.retain==null?E.insert=b.insert:E.retain=b.retain;else{const P=b.retain==null?"insert":"retain",[T,M,k]=u(b[P],N.retain),j=d.getHandler(T);E[P]={[T]:j.compose(M,k,P==="retain")}}const A=s.default.compose(b.attributes,N.attributes,typeof b.retain=="number");if(A&&(E.attributes=A),v.push(E),!y.hasNext()&&i(v.ops[v.ops.length-1],E)){const P=new d(m.rest());return v.concat(P).chop()}}else typeof N.delete=="number"&&(typeof b.retain=="number"||typeof b.retain=="object"&&b.retain!==null)&&v.push(N)}return v.chop()}concat(h){const m=new d(this.ops.slice());return h.ops.length>0&&(m.push(h.ops[0]),m.ops=m.ops.concat(h.ops.slice(1))),m}diff(h,m){if(this.ops===h.ops)return new d;const y=[this,h].map(b=>b.map(N=>{if(N.insert!=null)return typeof N.insert=="string"?N.insert:l;const E=b===h?"on":"with";throw new Error("diff() called "+E+" non-document")}).join("")),x=new d,_=n(y[0],y[1],m,!0),v=new o.default(this.ops),w=new o.default(h.ops);return _.forEach(b=>{let N=b[1].length;for(;N>0;){let E=0;switch(b[0]){case n.INSERT:E=Math.min(w.peekLength(),N),x.push(w.next(E));break;case n.DELETE:E=Math.min(N,v.peekLength()),v.next(E),x.delete(E);break;case n.EQUAL:E=Math.min(v.peekLength(),w.peekLength(),N);const A=v.next(E),P=w.next(E);i(A.insert,P.insert)?x.retain(E,s.default.diff(A.attributes,P.attributes)):x.push(P).delete(E);break}N-=E}}),x.chop()}eachLine(h,m=`
`){const y=new o.default(this.ops);let x=new d,_=0;for(;y.hasNext();){if(y.peekType()!=="insert")return;const v=y.peek(),w=a.default.length(v)-y.peekLength(),b=typeof v.insert=="string"?v.insert.indexOf(m,w)-w:-1;if(b<0)x.push(y.next());else if(b>0)x.push(y.next(b));else{if(h(x,y.next(1).attributes||{},_)===!1)return;_+=1,x=new d}}x.length()>0&&h(x,{},_)}invert(h){const m=new d;return this.reduce((y,x)=>{if(x.insert)m.delete(a.default.length(x));else{if(typeof x.retain=="number"&&x.attributes==null)return m.retain(x.retain),y+x.retain;if(x.delete||typeof x.retain=="number"){const _=x.delete||x.retain;return h.slice(y,y+_).forEach(w=>{x.delete?m.push(w):x.retain&&x.attributes&&m.retain(a.default.length(w),s.default.invert(x.attributes,w.attributes))}),y+_}else if(typeof x.retain=="object"&&x.retain!==null){const _=h.slice(y,y+1),v=new o.default(_.ops).next(),[w,b,N]=u(x.retain,v.insert),E=d.getHandler(w);return m.retain({[w]:E.invert(b,N)},s.default.invert(x.attributes,v.attributes)),y+1}}return y},0),m.chop()}transform(h,m=!1){if(m=!!m,typeof h=="number")return this.transformPosition(h,m);const y=h,x=new o.default(this.ops),_=new o.default(y.ops),v=new d;for(;x.hasNext()||_.hasNext();)if(x.peekType()==="insert"&&(m||_.peekType()!=="insert"))v.retain(a.default.length(x.next()));else if(_.peekType()==="insert")v.push(_.next());else{const w=Math.min(x.peekLength(),_.peekLength()),b=x.next(w),N=_.next(w);if(b.delete)continue;if(N.delete)v.push(N);else{const E=b.retain,A=N.retain;let P=typeof A=="object"&&A!==null?A:w;if(typeof E=="object"&&E!==null&&typeof A=="object"&&A!==null){const T=Object.keys(E)[0];if(T===Object.keys(A)[0]){const M=d.getHandler(T);M&&(P={[T]:M.transform(E[T],A[T],m)})}}v.retain(P,s.default.transform(b.attributes,N.attributes,m))}}return v.chop()}transformPosition(h,m=!1){m=!!m;const y=new o.default(this.ops);let x=0;for(;y.hasNext()&&x<=h;){const _=y.peekLength(),v=y.peekType();if(y.next(),v==="delete"){h-=Math.min(_,h-x);continue}else v==="insert"&&(x<h||!m)&&(h+=_);x+=_}return h}}d.Op=a.default,d.OpIterator=o.default,d.AttributeMap=s.default,d.handlers={},e.default=d,t.exports=d,t.exports.default=d})(V_,V_.exports);var ki=V_.exports;const De=Uo(ki);class os extends ii{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}os.blotName="break";os.tagName="BR";let ns=class extends Pg{};const Yle={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function B0(t){return t.replace(/[&<>"']/g,e=>Yle[e])}const Es=class Es extends hN{static compare(e,n){const r=Es.order.indexOf(e),i=Es.order.indexOf(n);return r>=0||i>=0?r-i:e===n?0:e<n?-1:1}formatAt(e,n,r,i){if(Es.compare(this.statics.blotName,r)<0&&this.scroll.query(r,Fe.BLOT)){const s=this.isolate(e,n);i&&s.wrap(r,i)}else super.formatAt(e,n,r,i)}optimize(e){if(super.optimize(e),this.parent instanceof Es&&Es.compare(this.statics.blotName,this.parent.statics.blotName)>0){const n=this.parent.isolate(this.offset(),this.length());this.moveChildren(n),n.wrap(this)}}};je(Es,"allowedChildren",[Es,os,ii,ns]),je(Es,"order",["cursor","inline","link","underline","strike","italic","bold","script","code"]);let Ms=Es;const rT=1;class Kn extends dh{constructor(){super(...arguments);je(this,"cache",{})}delta(){return this.cache.delta==null&&(this.cache.delta=TM(this)),this.cache.delta}deleteAt(n,r){super.deleteAt(n,r),this.cache={}}formatAt(n,r,i,s){r<=0||(this.scroll.query(i,Fe.BLOCK)?n+r===this.length()&&this.format(i,s):super.formatAt(n,Math.min(r,this.length()-n-1),i,s),this.cache={})}insertAt(n,r,i){if(i!=null){super.insertAt(n,r,i),this.cache={};return}if(r.length===0)return;const s=r.split(`
`),a=s.shift();a.length>0&&(n<this.length()-1||this.children.tail==null?super.insertAt(Math.min(n,this.length()-1),a):this.children.tail.insertAt(this.children.tail.length(),a),this.cache={});let o=this;s.reduce((l,u)=>(o=o.split(l,!0),o.insertAt(0,u),u.length),n+a.length)}insertBefore(n,r){const{head:i}=this.children;super.insertBefore(n,r),i instanceof os&&i.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+rT),this.cache.length}moveChildren(n,r){super.moveChildren(n,r),this.cache={}}optimize(n){super.optimize(n),this.cache={}}path(n){return super.path(n,!0)}removeChild(n){super.removeChild(n),this.cache={}}split(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(r&&(n===0||n>=this.length()-rT)){const s=this.clone();return n===0?(this.parent.insertBefore(s,this),this):(this.parent.insertBefore(s,this.next),s)}const i=super.split(n,r);return this.cache={},i}}Kn.blotName="block";Kn.tagName="P";Kn.defaultChild=os;Kn.allowedChildren=[os,Ms,ii,ns];class Ni extends ii{attach(){super.attach(),this.attributes=new I0(this.domNode)}delta(){return new De().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,n){const r=this.scroll.query(e,Fe.BLOCK_ATTRIBUTE);r!=null&&this.attributes.attribute(r,n)}formatAt(e,n,r,i){this.format(r,i)}insertAt(e,n,r){if(r!=null){super.insertAt(e,n,r);return}const i=n.split(`
`),s=i.pop(),a=i.map(l=>{const u=this.scroll.create(Kn.blotName);return u.insertAt(0,l),u}),o=this.split(e);a.forEach(l=>{this.parent.insertBefore(l,o)}),s&&this.parent.insertBefore(this.scroll.create("text",s),o)}}Ni.scope=Fe.BLOCK_BLOT;function TM(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.descendants(lr).reduce((n,r)=>r.length()===0?n:n.insert(r.value(),wi(r,{},e)),new De).insert(`
`,wi(t))}function wi(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return t==null||("formats"in t&&typeof t.formats=="function"&&(e={...e,...t.formats()},n&&delete e["code-token"]),t.parent==null||t.parent.statics.blotName==="scroll"||t.parent.statics.scope!==t.statics.scope)?e:wi(t.parent,e,n)}const yi=class yi extends ii{static value(){}constructor(e,n,r){super(e,n),this.selection=r,this.textNode=document.createTextNode(yi.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,n){if(this.savedLength!==0){super.format(e,n);return}let r=this,i=0;for(;r!=null&&r.statics.scope!==Fe.BLOCK_BLOT;)i+=r.offset(r.parent),r=r.parent;r!=null&&(this.savedLength=yi.CONTENTS.length,r.optimize(),r.formatAt(i,yi.CONTENTS.length,e,n),this.savedLength=0)}index(e,n){return e===this.textNode?0:super.index(e,n)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const n=this.prev instanceof ns?this.prev:null,r=n?n.length():0,i=this.next instanceof ns?this.next:null,s=i?i.text:"",{textNode:a}=this,o=a.data.split(yi.CONTENTS).join("");a.data=yi.CONTENTS;let l;if(n)l=n,(o||i)&&(n.insertAt(n.length(),o+s),i&&i.remove());else if(i)l=i,i.insertAt(0,o);else{const u=document.createTextNode(o);l=this.scroll.create(u),this.parent.insertBefore(l,this)}if(this.remove(),e){const u=(h,m)=>n&&h===n.domNode?m:h===a?r+m-1:i&&h===i.domNode?r+o.length+m:null,d=u(e.start.node,e.start.offset),p=u(e.end.node,e.end.offset);if(d!==null&&p!==null)return{startNode:l.domNode,startOffset:d,endNode:l.domNode,endOffset:p}}return null}update(e,n){if(e.some(r=>r.type==="characterData"&&r.target===this.textNode)){const r=this.restore();r&&(n.range=r)}}optimize(e){super.optimize(e);let{parent:n}=this;for(;n;){if(n.domNode.tagName==="A"){this.savedLength=yi.CONTENTS.length,n.isolate(this.offset(n),this.length()).unwrap(),this.savedLength=0;break}n=n.parent}}value(){return""}};je(yi,"blotName","cursor"),je(yi,"className","ql-cursor"),je(yi,"tagName","span"),je(yi,"CONTENTS","\uFEFF");let zu=yi;var AM={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function s(l,u,d,p,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new i(d,p||l,h),y=n?n+u:u;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],m]:l._events[y].push(m):(l._events[y]=m,l._eventsCount++),l}function a(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,p;if(this._eventsCount===0)return u;for(p in d=this._events)e.call(d,p)&&u.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=n?n+u:u,p=this._events[d];if(!p)return[];if(p.fn)return[p.fn];for(var h=0,m=p.length,y=new Array(m);h<m;h++)y[h]=p[h].fn;return y},o.prototype.listenerCount=function(u){var d=n?n+u:u,p=this._events[d];return p?p.fn?1:p.length:0},o.prototype.emit=function(u,d,p,h,m,y){var x=n?n+u:u;if(!this._events[x])return!1;var _=this._events[x],v=arguments.length,w,b;if(_.fn){switch(_.once&&this.removeListener(u,_.fn,void 0,!0),v){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,d),!0;case 3:return _.fn.call(_.context,d,p),!0;case 4:return _.fn.call(_.context,d,p,h),!0;case 5:return _.fn.call(_.context,d,p,h,m),!0;case 6:return _.fn.call(_.context,d,p,h,m,y),!0}for(b=1,w=new Array(v-1);b<v;b++)w[b-1]=arguments[b];_.fn.apply(_.context,w)}else{var N=_.length,E;for(b=0;b<N;b++)switch(_[b].once&&this.removeListener(u,_[b].fn,void 0,!0),v){case 1:_[b].fn.call(_[b].context);break;case 2:_[b].fn.call(_[b].context,d);break;case 3:_[b].fn.call(_[b].context,d,p);break;case 4:_[b].fn.call(_[b].context,d,p,h);break;default:if(!w)for(E=1,w=new Array(v-1);E<v;E++)w[E-1]=arguments[E];_[b].fn.apply(_[b].context,w)}}return!0},o.prototype.on=function(u,d,p){return s(this,u,d,p,!1)},o.prototype.once=function(u,d,p){return s(this,u,d,p,!0)},o.prototype.removeListener=function(u,d,p,h){var m=n?n+u:u;if(!this._events[m])return this;if(!d)return a(this,m),this;var y=this._events[m];if(y.fn)y.fn===d&&(!h||y.once)&&(!p||y.context===p)&&a(this,m);else{for(var x=0,_=[],v=y.length;x<v;x++)(y[x].fn!==d||h&&!y[x].once||p&&y[x].context!==p)&&_.push(y[x]);_.length?this._events[m]=_.length===1?_[0]:_:a(this,m)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&a(this,d)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(AM);var Xle=AM.exports;const Qle=Uo(Xle),Y_=new WeakMap,X_=["error","warn","log","info"];let Q_="warn";function OM(t){if(Q_&&X_.indexOf(t)<=X_.indexOf(Q_)){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];console[t](...n)}}function Ra(t){return X_.reduce((e,n)=>(e[n]=OM.bind(console,n,t),e),{})}Ra.level=t=>{Q_=t};OM.level=Ra.level;const Xw=Ra("quill:events"),Zle=["selectionchange","mousedown","mouseup","click"];Zle.forEach(t=>{document.addEventListener(t,function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];Array.from(document.querySelectorAll(".ql-container")).forEach(i=>{const s=Y_.get(i);s&&s.emitter&&s.emitter.handleDOM(...n)})})});class Le extends Qle{constructor(){super(),this.domListeners={},this.on("error",Xw.error)}emit(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Xw.log.call(Xw,...n),super.emit(...n)}handleDOM(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(this.domListeners[e.type]||[]).forEach(s=>{let{node:a,handler:o}=s;(e.target===a||a.contains(e.target))&&o(e,...r)})}listenDOM(e,n,r){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:n,handler:r})}}je(Le,"events",{EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"}),je(Le,"sources",{API:"api",SILENT:"silent",USER:"user"});const Qw=Ra("quill:selection");class ec{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=n}}class Jle{constructor(e,n){this.emitter=n,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new ec(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,Le.sources.USER),1)}),this.emitter.on(Le.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const r=this.getNativeRange();r!=null&&r.start.node!==this.cursor.textNode&&this.emitter.once(Le.events.SCROLL_UPDATE,(i,s)=>{try{this.root.contains(r.start.node)&&this.root.contains(r.end.node)&&this.setNativeRange(r.start.node,r.start.offset,r.end.node,r.end.offset);const a=s.some(o=>o.type==="characterData"||o.type==="childList"||o.type==="attributes"&&o.target===this.root);this.update(a?Le.sources.SILENT:i)}catch{}})}),this.emitter.on(Le.events.SCROLL_OPTIMIZE,(r,i)=>{if(i.range){const{startNode:s,startOffset:a,endNode:o,endOffset:l}=i.range;this.setNativeRange(s,a,o,l),this.update(Le.sources.SILENT)}}),this.update(Le.sources.SILENT)}handleComposition(){this.emitter.on(Le.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(Le.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(Le.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,n){this.scroll.update();const r=this.getNativeRange();if(!(r==null||!r.native.collapsed||this.scroll.query(e,Fe.BLOCK))){if(r.start.node!==this.cursor.textNode){const i=this.scroll.find(r.start.node,!1);if(i==null)return;if(i instanceof lr){const s=i.split(r.start.offset);i.parent.insertBefore(this.cursor,s)}else i.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(e,n),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const r=this.scroll.length();e=Math.min(e,r-1),n=Math.min(e+n,r-1)-e;let i,[s,a]=this.scroll.leaf(e);if(s==null)return null;if(n>0&&a===s.length()){const[d]=this.scroll.leaf(e+1);if(d){const[p]=this.scroll.line(e),[h]=this.scroll.line(e+1);p===h&&(s=d,a=0)}}[i,a]=s.position(a,!0);const o=document.createRange();if(n>0)return o.setStart(i,a),[s,a]=this.scroll.leaf(e+n),s==null?null:([i,a]=s.position(a,!0),o.setEnd(i,a),o.getBoundingClientRect());let l="left",u;if(i instanceof Text){if(!i.data.length)return null;a<i.data.length?(o.setStart(i,a),o.setEnd(i,a+1)):(o.setStart(i,a-1),o.setEnd(i,a),l="right"),u=o.getBoundingClientRect()}else{if(!(s.domNode instanceof Element))return null;u=s.domNode.getBoundingClientRect(),a>0&&(l="right")}return{bottom:u.top+u.height,height:u.height,left:u[l],right:u[l],top:u.top,width:0}}getNativeRange(){const e=document.getSelection();if(e==null||e.rangeCount<=0)return null;const n=e.getRangeAt(0);if(n==null)return null;const r=this.normalizeNative(n);return Qw.info("getNativeRange",r),r}getRange(){const e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];const n=this.getNativeRange();return n==null?[null,null]:[this.normalizedToRange(n),n]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&Zw(this.root,document.activeElement)}normalizedToRange(e){const n=[[e.start.node,e.start.offset]];e.native.collapsed||n.push([e.end.node,e.end.offset]);const r=n.map(a=>{const[o,l]=a,u=this.scroll.find(o,!0),d=u.offset(this.scroll);return l===0?d:u instanceof lr?d+u.index(o,l):d+u.length()}),i=Math.min(Math.max(...r),this.scroll.length()-1),s=Math.min(i,...r);return new ec(s,i-s)}normalizeNative(e){if(!Zw(this.root,e.startContainer)||!e.collapsed&&!Zw(this.root,e.endContainer))return null;const n={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[n.start,n.end].forEach(r=>{let{node:i,offset:s}=r;for(;!(i instanceof Text)&&i.childNodes.length>0;)if(i.childNodes.length>s)i=i.childNodes[s],s=0;else if(i.childNodes.length===s)i=i.lastChild,i instanceof Text?s=i.data.length:i.childNodes.length>0?s=i.childNodes.length:s=i.childNodes.length+1;else break;r.node=i,r.offset=s}),n}rangeToNative(e){const n=this.scroll.length(),r=(i,s)=>{i=Math.min(n-1,i);const[a,o]=this.scroll.leaf(i);return a?a.position(o,s):[null,-1]};return[...r(e.index,!1),...r(e.index+e.length,!0)]}setNativeRange(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(Qw.info("setNativeRange",e,n,r,i),e!=null&&(this.root.parentNode==null||e.parentNode==null||r.parentNode==null))return;const a=document.getSelection();if(a!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:o}=this.getNativeRange()||{};if(o==null||s||e!==o.startContainer||n!==o.startOffset||r!==o.endContainer||i!==o.endOffset){e instanceof Element&&e.tagName==="BR"&&(n=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),r instanceof Element&&r.tagName==="BR"&&(i=Array.from(r.parentNode.childNodes).indexOf(r),r=r.parentNode);const l=document.createRange();l.setStart(e,n),l.setEnd(r,i),a.removeAllRanges(),a.addRange(l)}}else a.removeAllRanges(),this.root.blur()}setRange(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Le.sources.API;if(typeof n=="string"&&(r=n,n=!1),Qw.info("setRange",e),e!=null){const i=this.rangeToNative(e);this.setNativeRange(...i,n)}else this.setNativeRange(null);this.update(r)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Le.sources.USER;const n=this.lastRange,[r,i]=this.getRange();if(this.lastRange=r,this.lastNative=i,this.lastRange!=null&&(this.savedRange=this.lastRange),!fN(n,this.lastRange)){if(!this.composing&&i!=null&&i.native.collapsed&&i.start.node!==this.cursor.textNode){const a=this.cursor.restore();a&&this.setNativeRange(a.startNode,a.startOffset,a.endNode,a.endOffset)}const s=[Le.events.SELECTION_CHANGE,Nu(this.lastRange),Nu(n),e];this.emitter.emit(Le.events.EDITOR_CHANGE,...s),e!==Le.sources.SILENT&&this.emitter.emit(...s)}}}function Zw(t,e){try{e.parentNode}catch{return!1}return t.contains(e)}const ece=/^[ -~]*$/;class tce{constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let n=this.scroll.length();this.scroll.batchStart();const r=iT(e),i=new De;return rce(r.ops.slice()).reduce((a,o)=>{const l=ki.Op.length(o);let u=o.attributes||{},d=!1,p=!1;if(o.insert!=null){if(i.retain(l),typeof o.insert=="string"){const y=o.insert;p=!y.endsWith(`
`)&&(n<=a||!!this.scroll.descendant(Ni,a)[0]),this.scroll.insertAt(a,y);const[x,_]=this.scroll.line(a);let v=Mo({},wi(x));if(x instanceof Kn){const[w]=x.descendant(lr,_);w&&(v=Mo(v,wi(w)))}u=ki.AttributeMap.diff(v,u)||{}}else if(typeof o.insert=="object"){const y=Object.keys(o.insert)[0];if(y==null)return a;const x=this.scroll.query(y,Fe.INLINE)!=null;if(x)(n<=a||this.scroll.descendant(Ni,a)[0])&&(p=!0);else if(a>0){const[_,v]=this.scroll.descendant(lr,a-1);_ instanceof ns?_.value()[v]!==`
`&&(d=!0):_ instanceof ii&&_.statics.scope===Fe.INLINE_BLOT&&(d=!0)}if(this.scroll.insertAt(a,y,o.insert[y]),x){const[_]=this.scroll.descendant(lr,a);if(_){const v=Mo({},wi(_));u=ki.AttributeMap.diff(v,u)||{}}}}n+=l}else if(i.push(o),o.retain!==null&&typeof o.retain=="object"){const y=Object.keys(o.retain)[0];if(y==null)return a;this.scroll.updateEmbedAt(a,y,o.retain[y])}Object.keys(u).forEach(y=>{this.scroll.formatAt(a,l,y,u[y])});const h=d?1:0,m=p?1:0;return n+=h+m,i.retain(h),i.delete(m),a+l+h+m},0),i.reduce((a,o)=>typeof o.delete=="number"?(this.scroll.deleteAt(a,o.delete),a):a+ki.Op.length(o),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(r)}deleteText(e,n){return this.scroll.deleteAt(e,n),this.update(new De().retain(e).delete(n))}formatLine(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(r).forEach(s=>{this.scroll.lines(e,Math.max(n,1)).forEach(a=>{a.format(s,r[s])})}),this.scroll.optimize();const i=new De().retain(e).retain(n,Nu(r));return this.update(i)}formatText(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(r).forEach(s=>{this.scroll.formatAt(e,n,s,r[s])});const i=new De().retain(e).retain(n,Nu(r));return this.update(i)}getContents(e,n){return this.delta.slice(e,e+n)}getDelta(){return this.scroll.lines().reduce((e,n)=>e.concat(n.delta()),new De)}getFormat(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=[],i=[];n===0?this.scroll.path(e).forEach(o=>{const[l]=o;l instanceof Kn?r.push(l):l instanceof lr&&i.push(l)}):(r=this.scroll.lines(e,n),i=this.scroll.descendants(lr,e,n));const[s,a]=[r,i].map(o=>{const l=o.shift();if(l==null)return{};let u=wi(l);for(;Object.keys(u).length>0;){const d=o.shift();if(d==null)return u;u=nce(wi(d),u)}return u});return{...s,...a}}getHTML(e,n){const[r,i]=this.scroll.line(e);if(r){const s=r.length();return r.length()>=i+n&&!(i===0&&n===s)?hh(r,i,n,!0):hh(this.scroll,e,n,!0)}return""}getText(e,n){return this.getContents(e,n).filter(r=>typeof r.insert=="string").map(r=>r.insert).join("")}insertContents(e,n){const r=iT(n),i=new De().retain(e).concat(r);return this.scroll.insertContents(e,r),this.update(i)}insertEmbed(e,n,r){return this.scroll.insertAt(e,n,r),this.update(new De().retain(e).insert({[n]:r}))}insertText(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n=n.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,n),Object.keys(r).forEach(i=>{this.scroll.formatAt(e,n.length,i,r[i])}),this.update(new De().retain(e).insert(n,Nu(r)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const e=this.scroll.children.head;if((e==null?void 0:e.statics.blotName)!==Kn.blotName)return!1;const n=e;return n.children.length>1?!1:n.children.head instanceof os}removeFormat(e,n){const r=this.getText(e,n),[i,s]=this.scroll.line(e+n);let a=0,o=new De;i!=null&&(a=i.length()-s,o=i.delta().slice(s,s+a-1).insert(`
`));const u=this.getContents(e,n+a).diff(new De().insert(r).concat(o)),d=new De().retain(e).concat(u);return this.applyDelta(d)}update(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const i=this.delta;if(n.length===1&&n[0].type==="characterData"&&n[0].target.data.match(ece)&&this.scroll.find(n[0].target)){const s=this.scroll.find(n[0].target),a=wi(s),o=s.offset(this.scroll),l=n[0].oldValue.replace(zu.CONTENTS,""),u=new De().insert(l),d=new De().insert(s.value()),p=r&&{oldRange:sT(r.oldRange,-o),newRange:sT(r.newRange,-o)};e=new De().retain(o).concat(u.diff(d,p)).reduce((m,y)=>y.insert?m.insert(y.insert,a):m.push(y),new De),this.delta=i.compose(e)}else this.delta=this.getDelta(),(!e||!fN(i.compose(e),this.delta))&&(e=i.diff(this.delta,r));return e}}function Qc(t,e,n){if(t.length===0){const[m]=Jw(n.pop());return e<=0?`</li></${m}>`:`</li></${m}>${Qc([],e-1,n)}`}const[{child:r,offset:i,length:s,indent:a,type:o},...l]=t,[u,d]=Jw(o);if(a>e)return n.push(o),a===e+1?`<${u}><li${d}>${hh(r,i,s)}${Qc(l,a,n)}`:`<${u}><li>${Qc(t,e+1,n)}`;const p=n[n.length-1];if(a===e&&o===p)return`</li><li${d}>${hh(r,i,s)}${Qc(l,a,n)}`;const[h]=Jw(n.pop());return`</li></${h}>${Qc(t,e-1,n)}`}function hh(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in t&&typeof t.html=="function")return t.html(e,n);if(t instanceof ns)return B0(t.value().slice(e,e+n)).replaceAll(" ","&nbsp;");if(t instanceof Ji){if(t.statics.blotName==="list-container"){const u=[];return t.children.forEachAt(e,n,(d,p,h)=>{const m="formats"in d&&typeof d.formats=="function"?d.formats():{};u.push({child:d,offset:p,length:h,indent:m.indent||0,type:m.list})}),Qc(u,-1,[])}const i=[];if(t.children.forEachAt(e,n,(u,d,p)=>{i.push(hh(u,d,p))}),r||t.statics.blotName==="list")return i.join("");const{outerHTML:s,innerHTML:a}=t.domNode,[o,l]=s.split(`>${a}<`);return o==="<table"?`<table style="border: 1px solid #000;">${i.join("")}<${l}`:`${o}>${i.join("")}<${l}`}return t.domNode instanceof Element?t.domNode.outerHTML:""}function nce(t,e){return Object.keys(e).reduce((n,r)=>{if(t[r]==null)return n;const i=e[r];return i===t[r]?n[r]=i:Array.isArray(i)?i.indexOf(t[r])<0?n[r]=i.concat([t[r]]):n[r]=i:n[r]=[i,t[r]],n},{})}function Jw(t){const e=t==="ordered"?"ol":"ul";switch(t){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function iT(t){return t.reduce((e,n)=>{if(typeof n.insert=="string"){const r=n.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(r,n.attributes)}return e.push(n)},new De)}function sT(t,e){let{index:n,length:r}=t;return new ec(n+e,r)}function rce(t){const e=[];return t.forEach(n=>{typeof n.insert=="string"?n.insert.split(`
`).forEach((i,s)=>{s&&e.push({insert:`
`,attributes:n.attributes}),i&&e.push({insert:i,attributes:n.attributes})}):e.push(n)}),e}var v5;let Bs=(v5=class{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=n}},je(v5,"DEFAULTS",{}),v5);const om="\uFEFF";let xN=class extends ii{constructor(e,n){super(e,n),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(r=>{this.contentNode.appendChild(r)}),this.leftGuard=document.createTextNode(om),this.rightGuard=document.createTextNode(om),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,n){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,n)}restore(e){let n=null,r;const i=e.data.split(om).join("");if(e===this.leftGuard)if(this.prev instanceof ns){const s=this.prev.length();this.prev.insertAt(s,i),n={startNode:this.prev.domNode,startOffset:s+i.length}}else r=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(r),this),n={startNode:r,startOffset:i.length};else e===this.rightGuard&&(this.next instanceof ns?(this.next.insertAt(0,i),n={startNode:this.next.domNode,startOffset:i.length}):(r=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(r),this.next),n={startNode:r,startOffset:i.length}));return e.data=om,n}update(e,n){e.forEach(r=>{if(r.type==="characterData"&&(r.target===this.leftGuard||r.target===this.rightGuard)){const i=this.restore(r.target);i&&(n.range=i)}})}};class ice{constructor(e,n){je(this,"isComposing",!1);this.scroll=e,this.emitter=n,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){const n=e.target instanceof Node?this.scroll.find(e.target,!0):null;n&&!(n instanceof xN)&&(this.emitter.emit(Le.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(Le.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(Le.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(Le.events.COMPOSITION_END,e),this.isComposing=!1}}const Pf=class Pf{constructor(e,n){je(this,"modules",{});this.quill=e,this.options=n}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){const n=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new n(this.quill,this.options.modules[e]||{}),this.modules[e]}};je(Pf,"DEFAULTS",{modules:{}}),je(Pf,"themes",{default:Pf});let $u=Pf;const sce=t=>t.parentElement||t.getRootNode().host||null,ace=t=>{const e=t.getBoundingClientRect(),n="offsetWidth"in t&&Math.abs(e.width)/t.offsetWidth||1,r="offsetHeight"in t&&Math.abs(e.height)/t.offsetHeight||1;return{top:e.top,right:e.left+t.clientWidth*n,bottom:e.top+t.clientHeight*r,left:e.left}},lm=t=>{const e=parseInt(t,10);return Number.isNaN(e)?0:e},aT=(t,e,n,r,i,s)=>t<n&&e>r?0:t<n?-(n-t+i):e>r?e-t>r-n?t+i-n:e-r+s:0,oce=(t,e)=>{var s,a,o;const n=t.ownerDocument;let r=e,i=t;for(;i;){const l=i===n.body,u=l?{top:0,right:((s=window.visualViewport)==null?void 0:s.width)??n.documentElement.clientWidth,bottom:((a=window.visualViewport)==null?void 0:a.height)??n.documentElement.clientHeight,left:0}:ace(i),d=getComputedStyle(i),p=aT(r.left,r.right,u.left,u.right,lm(d.scrollPaddingLeft),lm(d.scrollPaddingRight)),h=aT(r.top,r.bottom,u.top,u.bottom,lm(d.scrollPaddingTop),lm(d.scrollPaddingBottom));if(p||h)if(l)(o=n.defaultView)==null||o.scrollBy(p,h);else{const{scrollLeft:m,scrollTop:y}=i;h&&(i.scrollTop+=h),p&&(i.scrollLeft+=p);const x=i.scrollLeft-m,_=i.scrollTop-y;r={left:r.left-x,top:r.top-_,right:r.right-x,bottom:r.bottom-_}}i=l||d.position==="fixed"?null:sce(i)}},lce=100,cce=["block","break","cursor","inline","scroll","text"],uce=(t,e,n)=>{const r=new Bu;return cce.forEach(i=>{const s=e.query(i);s&&r.register(s)}),t.forEach(i=>{let s=e.query(i);s||n.error(`Cannot register "${i}" specified in "formats" config. Are you sure it was registered?`);let a=0;for(;s;)if(r.register(s),s="blotName"in s?s.requiredContainer??null:null,a+=1,a>lce){n.error(`Cycle detected in registering blot requiredContainer: "${i}"`);break}}),r},Eu=Ra("quill"),cm=new Bu;Ji.uiClass="ql-ui";const Ui=class Ui{static debug(e){e===!0&&(e="log"),Ra.level(e)}static find(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Y_.get(e)||cm.find(e,n)}static import(e){return this.imports[e]==null&&Eu.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const e=arguments.length<=0?void 0:arguments[0],n=!!(!(arguments.length<=1)&&arguments[1]),r="attrName"in e?e.attrName:e.blotName;typeof r=="string"?this.register(`formats/${r}`,e,n):Object.keys(e).forEach(i=>{this.register(i,e[i],n)})}else{const e=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],r=!!(!(arguments.length<=2)&&arguments[2]);this.imports[e]!=null&&!r&&Eu.warn(`Overwriting ${e} with`,n),this.imports[e]=n,(e.startsWith("blots/")||e.startsWith("formats/"))&&n&&typeof n!="boolean"&&n.blotName!=="abstract"&&cm.register(n),typeof n.register=="function"&&n.register(cm)}}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=dce(e,n),this.container=this.options.container,this.container==null){Eu.error("Invalid Quill container",e);return}this.options.debug&&Ui.debug(this.options.debug);const r=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",Y_.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new Le;const i=pN.blotName,s=this.options.registry.query(i);if(!s||!("blotName"in s))throw new Error(`Cannot initialize Quill without "${i}" blot`);if(this.scroll=new s(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new tce(this.scroll),this.selection=new Jle(this.scroll,this.emitter),this.composition=new ice(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(Le.events.EDITOR_CHANGE,a=>{a===Le.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(Le.events.SCROLL_UPDATE,(a,o)=>{const l=this.selection.lastRange,[u]=this.selection.getRange(),d=l&&u?{oldRange:l,newRange:u}:void 0;zi.call(this,()=>this.editor.update(null,o,d),a)}),this.emitter.on(Le.events.SCROLL_EMBED_UPDATE,(a,o)=>{const l=this.selection.lastRange,[u]=this.selection.getRange(),d=l&&u?{oldRange:l,newRange:u}:void 0;zi.call(this,()=>{const p=new De().retain(a.offset(this)).retain({[a.statics.blotName]:o});return this.editor.update(p,[],d)},Ui.sources.USER)}),r){const a=this.clipboard.convert({html:`${r}<p><br></p>`,text:`
`});this.setContents(a)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){const r=e;e=document.createElement("div"),e.classList.add(r)}return this.container.insertBefore(e,n),e}blur(){this.selection.setRange(null)}deleteText(e,n,r){return[e,n,,r]=sa(e,n,r),zi.call(this,()=>this.editor.deleteText(e,n),r,e,-1*n)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;const n=e();return this.allowReadOnlyEdits=!1,n}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Le.sources.API;return zi.call(this,()=>{const i=this.getSelection(!0);let s=new De;if(i==null)return s;if(this.scroll.query(e,Fe.BLOCK))s=this.editor.formatLine(i.index,i.length,{[e]:n});else{if(i.length===0)return this.selection.format(e,n),s;s=this.editor.formatText(i.index,i.length,{[e]:n})}return this.setSelection(i,Le.sources.SILENT),s},r)}formatLine(e,n,r,i,s){let a;return[e,n,a,s]=sa(e,n,r,i,s),zi.call(this,()=>this.editor.formatLine(e,n,a),s,e,0)}formatText(e,n,r,i,s){let a;return[e,n,a,s]=sa(e,n,r,i,s),zi.call(this,()=>this.editor.formatText(e,n,a),s,e,0)}getBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=null;if(typeof e=="number"?r=this.selection.getBounds(e,n):r=this.selection.getBounds(e.index,e.length),!r)return null;const i=this.container.getBoundingClientRect();return{bottom:r.bottom-i.top,height:r.height,left:r.left-i.left,right:r.right-i.left,top:r.top-i.top,width:r.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,n]=sa(e,n),this.editor.getContents(e,n)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,n):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,n)}getModule(e){return this.theme.modules[e]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(n=n??this.getLength()-e),[e,n]=sa(e,n),this.editor.getHTML(e,n)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(n=n??this.getLength()-e),[e,n]=sa(e,n),this.editor.getText(e,n)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Ui.sources.API;return zi.call(this,()=>this.editor.insertEmbed(e,n,r),i,e)}insertText(e,n,r,i,s){let a;return[e,,a,s]=sa(e,0,r,i,s),zi.call(this,()=>this.editor.insertText(e,n,a),s,e,n.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,n,r){return[e,n,,r]=sa(e,n,r),zi.call(this,()=>this.editor.removeFormat(e,n),r,e)}scrollRectIntoView(e){oce(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const e=this.selection.lastRange,n=e&&this.selection.getBounds(e.index,e.length);n&&this.scrollRectIntoView(n)}setContents(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Le.sources.API;return zi.call(this,()=>{e=new De(e);const r=this.getLength(),i=this.editor.deleteText(0,r),s=this.editor.insertContents(0,e),a=this.editor.deleteText(this.getLength()-1,1);return i.compose(s).compose(a)},n)}setSelection(e,n,r){e==null?this.selection.setRange(null,n||Ui.sources.API):([e,n,,r]=sa(e,n,r),this.selection.setRange(new ec(Math.max(0,e),n),r),r!==Le.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Le.sources.API;const r=new De().insert(e);return this.setContents(r,n)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Le.sources.USER;const n=this.scroll.update(e);return this.selection.update(e),n}updateContents(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Le.sources.API;return zi.call(this,()=>(e=new De(e),this.editor.applyDelta(e)),n,!0)}};je(Ui,"DEFAULTS",{bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:cm,theme:"default"}),je(Ui,"events",Le.events),je(Ui,"sources",Le.sources),je(Ui,"version","2.0.3"),je(Ui,"imports",{delta:De,parchment:Ile,"core/module":Bs,"core/theme":$u});let be=Ui;function oT(t){return typeof t=="string"?document.querySelector(t):t}function e5(t){return Object.entries(t??{}).reduce((e,n)=>{let[r,i]=n;return{...e,[r]:i===!0?{}:i}},{})}function lT(t){return Object.fromEntries(Object.entries(t).filter(e=>e[1]!==void 0))}function dce(t,e){const n=oT(t);if(!n)throw new Error("Invalid Quill container");const i=!e.theme||e.theme===be.DEFAULTS.theme?$u:be.import(`themes/${e.theme}`);if(!i)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:s,...a}=be.DEFAULTS,{modules:o,...l}=i.DEFAULTS;let u=e5(e.modules);u!=null&&u.toolbar&&u.toolbar.constructor!==Object&&(u={...u,toolbar:{container:u.toolbar}});const d=Mo({},e5(s),e5(o),u),p={...a,...lT(l),...lT(e)};let h=e.registry;return h?e.formats&&Eu.warn('Ignoring "formats" option because "registry" is specified'):h=e.formats?uce(e.formats,p.registry,Eu):p.registry,{...p,registry:h,container:n,theme:i,modules:Object.entries(d).reduce((m,y)=>{let[x,_]=y;if(!_)return m;const v=be.import(`modules/${x}`);return v==null?(Eu.error(`Cannot load ${x} module. Are you sure you registered it?`),m):{...m,[x]:Mo({},v.DEFAULTS||{},_)}},{}),bounds:oT(p.bounds)}}function zi(t,e,n,r){if(!this.isEnabled()&&e===Le.sources.USER&&!this.allowReadOnlyEdits)return new De;let i=n==null?null:this.getSelection();const s=this.editor.delta,a=t();if(i!=null&&(n===!0&&(n=i.index),r==null?i=cT(i,a,e):r!==0&&(i=cT(i,n,r,e)),this.setSelection(i,Le.sources.SILENT)),a.length()>0){const o=[Le.events.TEXT_CHANGE,a,s,e];this.emitter.emit(Le.events.EDITOR_CHANGE,...o),e!==Le.sources.SILENT&&this.emitter.emit(...o)}return a}function sa(t,e,n,r,i){let s={};return typeof t.index=="number"&&typeof t.length=="number"?typeof e!="number"?(i=r,r=n,n=e,e=t.length,t=t.index):(e=t.length,t=t.index):typeof e!="number"&&(i=r,r=n,n=e,e=0),typeof n=="object"?(s=n,i=r):typeof n=="string"&&(r!=null?s[n]=r:i=n),i=i||Le.sources.API,[t,e,s,i]}function cT(t,e,n,r){const i=typeof n=="number"?n:0;if(t==null)return null;let s,a;return e&&typeof e.transformPosition=="function"?[s,a]=[t.index,t.index+t.length].map(o=>e.transformPosition(o,r!==Le.sources.USER)):[s,a]=[t.index,t.index+t.length].map(o=>o<e||o===e&&r===Le.sources.USER?o:i>=0?o+i:Math.max(e,o+i)),new ec(s,a-s)}let fc=class extends M0{};function uT(t){return t instanceof Kn||t instanceof Ni}function dT(t){return typeof t.updateContent=="function"}class Zc extends pN{constructor(e,n,r){let{emitter:i}=r;super(e,n),this.emitter=i,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",s=>this.handleDragStart(s))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(Le.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(Le.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,n){this.emitter.emit(Le.events.SCROLL_EMBED_UPDATE,e,n)}deleteAt(e,n){const[r,i]=this.line(e),[s]=this.line(e+n);if(super.deleteAt(e,n),s!=null&&r!==s&&i>0){if(r instanceof Ni||s instanceof Ni){this.optimize();return}const a=s.children.head instanceof os?null:s.children.head;r.moveChildren(s,a),r.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,n,r,i){super.formatAt(e,n,r,i),this.optimize()}insertAt(e,n,r){if(e>=this.length())if(r==null||this.scroll.query(n,Fe.BLOCK)==null){const i=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(i),r==null&&n.endsWith(`
`)?i.insertAt(0,n.slice(0,-1),r):i.insertAt(0,n,r)}else{const i=this.scroll.create(n,r);this.appendChild(i)}else super.insertAt(e,n,r);this.optimize()}insertBefore(e,n){if(e.statics.scope===Fe.INLINE_BLOT){const r=this.scroll.create(this.statics.defaultChild.blotName);r.appendChild(e),super.insertBefore(r,n)}else super.insertBefore(e,n)}insertContents(e,n){const r=this.deltaToRenderBlocks(n.concat(new De().insert(`
`))),i=r.pop();if(i==null)return;this.batchStart();const s=r.shift();if(s){const l=s.type==="block"&&(s.delta.length()===0||!this.descendant(Ni,e)[0]&&e<this.length()),u=s.type==="block"?s.delta:new De().insert({[s.key]:s.value});t5(this,e,u);const d=s.type==="block"?1:0,p=e+u.length()+d;l&&this.insertAt(p-1,`
`);const h=wi(this.line(e)[0]),m=ki.AttributeMap.diff(h,s.attributes)||{};Object.keys(m).forEach(y=>{this.formatAt(p-1,1,y,m[y])}),e=p}let[a,o]=this.children.find(e);if(r.length&&(a&&(a=a.split(o),o=0),r.forEach(l=>{if(l.type==="block"){const u=this.createBlock(l.attributes,a||void 0);t5(u,0,l.delta)}else{const u=this.create(l.key,l.value);this.insertBefore(u,a||void 0),Object.keys(l.attributes).forEach(d=>{u.format(d,l.attributes[d])})}})),i.type==="block"&&i.delta.length()){const l=a?a.offset(a.scroll)+o:this.length();t5(this,l,i.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){const n=this.path(e).pop();if(!n)return[null,-1];const[r,i]=n;return r instanceof lr?[r,i]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(uT,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const r=(i,s,a)=>{let o=[],l=a;return i.children.forEachAt(s,a,(u,d,p)=>{uT(u)?o.push(u):u instanceof M0&&(o=o.concat(r(u,d,l))),l-=p}),o};return r(this,e,n)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,n),e.length>0&&this.emitter.emit(Le.events.SCROLL_OPTIMIZE,e,n))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let n=Le.sources.USER;typeof e=="string"&&(n=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(r=>{let{target:i}=r;const s=this.find(i,!0);return s&&!dT(s)}),e.length>0&&this.emitter.emit(Le.events.SCROLL_BEFORE_UPDATE,n,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(Le.events.SCROLL_UPDATE,n,e)}updateEmbedAt(e,n,r){const[i]=this.descendant(s=>s instanceof Ni,e);i&&i.statics.blotName===n&&dT(i)&&i.updateContent(r)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){const n=[];let r=new De;return e.forEach(i=>{const s=i==null?void 0:i.insert;if(s)if(typeof s=="string"){const a=s.split(`
`);a.slice(0,-1).forEach(l=>{r.insert(l,i.attributes),n.push({type:"block",delta:r,attributes:i.attributes??{}}),r=new De});const o=a[a.length-1];o&&r.insert(o,i.attributes)}else{const a=Object.keys(s)[0];if(!a)return;this.query(a,Fe.INLINE)?r.push(i):(r.length()&&n.push({type:"block",delta:r,attributes:{}}),r=new De,n.push({type:"blockEmbed",key:a,value:s[a],attributes:i.attributes??{}}))}}),r.length()&&n.push({type:"block",delta:r,attributes:{}}),n}createBlock(e,n){let r;const i={};Object.entries(e).forEach(o=>{let[l,u]=o;this.query(l,Fe.BLOCK&Fe.BLOT)!=null?r=l:i[l]=u});const s=this.create(r||this.statics.defaultChild.blotName,r?e[r]:void 0);this.insertBefore(s,n||void 0);const a=s.length();return Object.entries(i).forEach(o=>{let[l,u]=o;s.formatAt(0,a,l,u)}),s}}je(Zc,"blotName","scroll"),je(Zc,"className","ql-editor"),je(Zc,"tagName","DIV"),je(Zc,"defaultChild",Kn),je(Zc,"allowedChildren",[Kn,Ni,fc]);function t5(t,e,n){n.reduce((r,i)=>{const s=ki.Op.length(i);let a=i.attributes||{};if(i.insert!=null){if(typeof i.insert=="string"){const o=i.insert;t.insertAt(r,o);const[l]=t.descendant(lr,r),u=wi(l);a=ki.AttributeMap.diff(u,a)||{}}else if(typeof i.insert=="object"){const o=Object.keys(i.insert)[0];if(o==null)return r;if(t.insertAt(r,o,i.insert[o]),t.scroll.query(o,Fe.INLINE)!=null){const[u]=t.descendant(lr,r),d=wi(u);a=ki.AttributeMap.diff(d,a)||{}}}}return Object.keys(a).forEach(o=>{t.formatAt(r,s,o,a[o])}),r+s},e)}const bN={scope:Fe.BLOCK,whitelist:["right","center","justify"]},fce=new Is("align","align",bN),PM=new as("align","ql-align",bN),RM=new Qo("align","text-align",bN);class LM extends Qo{value(e){let n=super.value(e);return n.startsWith("rgb(")?(n=n.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${n.split(",").map(i=>`00${parseInt(i,10).toString(16)}`.slice(-2)).join("")}`):n}}const hce=new as("color","ql-color",{scope:Fe.INLINE}),wN=new LM("color","color",{scope:Fe.INLINE}),pce=new as("background","ql-bg",{scope:Fe.INLINE}),_N=new LM("background","background-color",{scope:Fe.INLINE});class hc extends fc{static create(e){const n=super.create(e);return n.setAttribute("spellcheck","false"),n}code(e,n){return this.children.map(r=>r.length()<=1?"":r.domNode.innerText).join(`
`).slice(e,e+n)}html(e,n){return`<pre>
${B0(this.code(e,n))}
</pre>`}}class cr extends Kn{static register(){be.register(hc)}}je(cr,"TAB","  ");class NN extends Ms{}NN.blotName="code";NN.tagName="CODE";cr.blotName="code-block";cr.className="ql-code-block";cr.tagName="DIV";hc.blotName="code-block-container";hc.className="ql-code-block-container";hc.tagName="DIV";hc.allowedChildren=[cr];cr.allowedChildren=[ns,os,zu];cr.requiredContainer=hc;const SN={scope:Fe.BLOCK,whitelist:["rtl"]},IM=new Is("direction","dir",SN),MM=new as("direction","ql-direction",SN),DM=new Qo("direction","direction",SN),FM={scope:Fe.INLINE,whitelist:["serif","monospace"]},qM=new as("font","ql-font",FM);class mce extends Qo{value(e){return super.value(e).replace(/["']/g,"")}}const BM=new mce("font","font-family",FM),zM=new as("size","ql-size",{scope:Fe.INLINE,whitelist:["small","large","huge"]}),$M=new Qo("size","font-size",{scope:Fe.INLINE,whitelist:["10px","18px","32px"]}),gce=Ra("quill:keyboard"),vce=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class z0 extends Bs{static match(e,n){return["altKey","ctrlKey","metaKey","shiftKey"].some(r=>!!n[r]!==e[r]&&n[r]!==null)?!1:n.key===e.key||n.key===e.which}constructor(e,n){super(e,n),this.bindings={},Object.keys(this.options.bindings).forEach(r=>{this.options.bindings[r]&&this.addBinding(this.options.bindings[r])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=xce(e);if(i==null){gce.warn("Attempted to add invalid keyboard binding",i);return}typeof n=="function"&&(n={handler:n}),typeof r=="function"&&(r={handler:r}),(Array.isArray(i.key)?i.key:[i.key]).forEach(a=>{const o={...i,key:a,...n,...r};this.bindings[o.key]=this.bindings[o.key]||[],this.bindings[o.key].push(o)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing||e.keyCode===229&&(e.key==="Enter"||e.key==="Backspace"))return;const i=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(v=>z0.match(e,v));if(i.length===0)return;const s=be.find(e.target,!0);if(s&&s.scroll!==this.quill.scroll)return;const a=this.quill.getSelection();if(a==null||!this.quill.hasFocus())return;const[o,l]=this.quill.getLine(a.index),[u,d]=this.quill.getLeaf(a.index),[p,h]=a.length===0?[u,d]:this.quill.getLeaf(a.index+a.length),m=u instanceof Pg?u.value().slice(0,d):"",y=p instanceof Pg?p.value().slice(h):"",x={collapsed:a.length===0,empty:a.length===0&&o.length()<=1,format:this.quill.getFormat(a),line:o,offset:l,prefix:m,suffix:y,event:e};i.some(v=>{if(v.collapsed!=null&&v.collapsed!==x.collapsed||v.empty!=null&&v.empty!==x.empty||v.offset!=null&&v.offset!==x.offset)return!1;if(Array.isArray(v.format)){if(v.format.every(w=>x.format[w]==null))return!1}else if(typeof v.format=="object"&&!Object.keys(v.format).every(w=>v.format[w]===!0?x.format[w]!=null:v.format[w]===!1?x.format[w]==null:fN(v.format[w],x.format[w])))return!1;return v.prefix!=null&&!v.prefix.test(x.prefix)||v.suffix!=null&&!v.suffix.test(x.suffix)?!1:v.handler.call(this,a,x,v)!==!0})&&e.preventDefault()})}handleBackspace(e,n){const r=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(n.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let i={};const[s]=this.quill.getLine(e.index);let a=new De().retain(e.index-r).delete(r);if(n.offset===0){const[o]=this.quill.getLine(e.index-1);if(o&&!(o.statics.blotName==="block"&&o.length()<=1)){const u=s.formats(),d=this.quill.getFormat(e.index-1,1);if(i=ki.AttributeMap.diff(u,d)||{},Object.keys(i).length>0){const p=new De().retain(e.index+s.length()-2).retain(1,i);a=a.compose(p)}}}this.quill.updateContents(a,be.sources.USER),this.quill.focus()}handleDelete(e,n){const r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(n.suffix)?2:1;if(e.index>=this.quill.getLength()-r)return;let i={};const[s]=this.quill.getLine(e.index);let a=new De().retain(e.index).delete(r);if(n.offset>=s.length()-1){const[o]=this.quill.getLine(e.index+1);if(o){const l=s.formats(),u=this.quill.getFormat(e.index,1);i=ki.AttributeMap.diff(l,u)||{},Object.keys(i).length>0&&(a=a.retain(o.length()-1).retain(1,i))}}this.quill.updateContents(a,be.sources.USER),this.quill.focus()}handleDeleteRange(e){EN({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,n){const r=Object.keys(n.format).reduce((s,a)=>(this.quill.scroll.query(a,Fe.BLOCK)&&!Array.isArray(n.format[a])&&(s[a]=n.format[a]),s),{}),i=new De().retain(e.index).delete(e.length).insert(`
`,r);this.quill.updateContents(i,be.sources.USER),this.quill.setSelection(e.index+1,be.sources.SILENT),this.quill.focus()}}const yce={bindings:{bold:n5("bold"),italic:n5("italic"),underline:n5("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",be.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",be.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(t,e){e.format.indent!=null?this.quill.format("indent","-1",be.sources.USER):e.format.list!=null&&this.quill.format("list",!1,be.sources.USER)}},"indent code-block":fT(!0),"outdent code-block":fT(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(t){this.quill.deleteText(t.index-1,1,be.sources.USER)}},tab:{key:"Tab",handler(t,e){if(e.format.table)return!0;this.quill.history.cutoff();const n=new De().retain(t.index).delete(t.length).insert("	");return this.quill.updateContents(n,be.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,be.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,be.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(t,e){const n={list:!1};e.format.indent&&(n.indent=!1),this.quill.formatLine(t.index,t.length,n,be.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(t){const[e,n]=this.quill.getLine(t.index),r={...e.formats(),list:"checked"},i=new De().retain(t.index).insert(`
`,r).retain(e.length()-n-1).retain(1,{list:"unchecked"});this.quill.updateContents(i,be.sources.USER),this.quill.setSelection(t.index+1,be.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(t,e){const[n,r]=this.quill.getLine(t.index),i=new De().retain(t.index).insert(`
`,e.format).retain(n.length()-r-1).retain(1,{header:null});this.quill.updateContents(i,be.sources.USER),this.quill.setSelection(t.index+1,be.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(t){const e=this.quill.getModule("table");if(e){const[n,r,i,s]=e.getTable(t),a=bce(n,r,i,s);if(a==null)return;let o=n.offset();if(a<0){const l=new De().retain(o).insert(`
`);this.quill.updateContents(l,be.sources.USER),this.quill.setSelection(t.index+1,t.length,be.sources.SILENT)}else if(a>0){o+=n.length();const l=new De().retain(o).insert(`
`);this.quill.updateContents(l,be.sources.USER),this.quill.setSelection(o,be.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(t,e){const{event:n,line:r}=e,i=r.offset(this.quill.scroll);n.shiftKey?this.quill.setSelection(i-1,be.sources.USER):this.quill.setSelection(i+r.length(),be.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(t,e){if(this.quill.scroll.query("list")==null)return!0;const{length:n}=e.prefix,[r,i]=this.quill.getLine(t.index);if(i>n)return!0;let s;switch(e.prefix.trim()){case"[]":case"[ ]":s="unchecked";break;case"[x]":s="checked";break;case"-":case"*":s="bullet";break;default:s="ordered"}this.quill.insertText(t.index," ",be.sources.USER),this.quill.history.cutoff();const a=new De().retain(t.index-i).delete(n+1).retain(r.length()-2-i).retain(1,{list:s});return this.quill.updateContents(a,be.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-n,be.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(t){const[e,n]=this.quill.getLine(t.index);let r=2,i=e;for(;i!=null&&i.length()<=1&&i.formats()["code-block"];)if(i=i.prev,r-=1,r<=0){const s=new De().retain(t.index+e.length()-n-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(s,be.sources.USER),this.quill.setSelection(t.index-1,be.sources.SILENT),!1}return!0}},"embed left":um("ArrowLeft",!1),"embed left shift":um("ArrowLeft",!0),"embed right":um("ArrowRight",!1),"embed right shift":um("ArrowRight",!0),"table down":hT(!1),"table up":hT(!0)}};z0.DEFAULTS=yce;function fT(t){return{key:"Tab",shiftKey:!t,format:{"code-block":!0},handler(e,n){let{event:r}=n;const i=this.quill.scroll.query("code-block"),{TAB:s}=i;if(e.length===0&&!r.shiftKey){this.quill.insertText(e.index,s,be.sources.USER),this.quill.setSelection(e.index+s.length,be.sources.SILENT);return}const a=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:o,length:l}=e;a.forEach((u,d)=>{t?(u.insertAt(0,s),d===0?o+=s.length:l+=s.length):u.domNode.textContent.startsWith(s)&&(u.deleteAt(0,s.length),d===0?o-=s.length:l-=s.length)}),this.quill.update(be.sources.USER),this.quill.setSelection(o,l,be.sources.SILENT)}}}function um(t,e){return{key:t,shiftKey:e,altKey:null,[t==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(r){let{index:i}=r;t==="ArrowRight"&&(i+=r.length+1);const[s]=this.quill.getLeaf(i);return s instanceof ii?(t==="ArrowLeft"?e?this.quill.setSelection(r.index-1,r.length+1,be.sources.USER):this.quill.setSelection(r.index-1,be.sources.USER):e?this.quill.setSelection(r.index,r.length+1,be.sources.USER):this.quill.setSelection(r.index+r.length+1,be.sources.USER),!1):!0}}}function n5(t){return{key:t[0],shortKey:!0,handler(e,n){this.quill.format(t,!n.format[t],be.sources.USER)}}}function hT(t){return{key:t?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,n){const r=t?"prev":"next",i=n.line,s=i.parent[r];if(s!=null){if(s.statics.blotName==="table-row"){let a=s.children.head,o=i;for(;o.prev!=null;)o=o.prev,a=a.next;const l=a.offset(this.quill.scroll)+Math.min(n.offset,a.length()-1);this.quill.setSelection(l,0,be.sources.USER)}}else{const a=i.table()[r];a!=null&&(t?this.quill.setSelection(a.offset(this.quill.scroll)+a.length()-1,0,be.sources.USER):this.quill.setSelection(a.offset(this.quill.scroll),0,be.sources.USER))}return!1}}}function xce(t){if(typeof t=="string"||typeof t=="number")t={key:t};else if(typeof t=="object")t=Nu(t);else return null;return t.shortKey&&(t[vce]=t.shortKey,delete t.shortKey),t}function EN(t){let{quill:e,range:n}=t;const r=e.getLines(n);let i={};if(r.length>1){const s=r[0].formats(),a=r[r.length-1].formats();i=ki.AttributeMap.diff(a,s)||{}}e.deleteText(n,be.sources.USER),Object.keys(i).length>0&&e.formatLine(n.index,1,i,be.sources.USER),e.setSelection(n.index,be.sources.SILENT)}function bce(t,e,n,r){return e.prev==null&&e.next==null?n.prev==null&&n.next==null?r===0?-1:1:n.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}const wce=/font-weight:\s*normal/,_ce=["P","OL","UL"],pT=t=>t&&_ce.includes(t.tagName),Nce=t=>{Array.from(t.querySelectorAll("br")).filter(e=>pT(e.previousElementSibling)&&pT(e.nextElementSibling)).forEach(e=>{var n;(n=e.parentNode)==null||n.removeChild(e)})},Sce=t=>{Array.from(t.querySelectorAll('b[style*="font-weight"]')).filter(e=>{var n;return(n=e.getAttribute("style"))==null?void 0:n.match(wce)}).forEach(e=>{var r;const n=t.createDocumentFragment();n.append(...e.childNodes),(r=e.parentNode)==null||r.replaceChild(n,e)})};function Ece(t){t.querySelector('[id^="docs-internal-guid-"]')&&(Sce(t),Nce(t))}const kce=/\bmso-list:[^;]*ignore/i,Cce=/\bmso-list:[^;]*\bl(\d+)/i,jce=/\bmso-list:[^;]*\blevel(\d+)/i,Tce=(t,e)=>{const n=t.getAttribute("style"),r=n==null?void 0:n.match(Cce);if(!r)return null;const i=Number(r[1]),s=n==null?void 0:n.match(jce),a=s?Number(s[1]):1,o=new RegExp(`@list l${i}:level${a}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),l=e.match(o),u=l&&l[1]==="bullet"?"bullet":"ordered";return{id:i,indent:a,type:u,element:t}},Ace=t=>{var a,o;const e=Array.from(t.querySelectorAll("[style*=mso-list]")),n=[],r=[];e.forEach(l=>{(l.getAttribute("style")||"").match(kce)?n.push(l):r.push(l)}),n.forEach(l=>{var u;return(u=l.parentNode)==null?void 0:u.removeChild(l)});const i=t.documentElement.innerHTML,s=r.map(l=>Tce(l,i)).filter(l=>l);for(;s.length;){const l=[];let u=s.shift();for(;u;)l.push(u),u=s.length&&((a=s[0])==null?void 0:a.element)===u.element.nextElementSibling&&s[0].id===u.id?s.shift():null;const d=document.createElement("ul");l.forEach(m=>{const y=document.createElement("li");y.setAttribute("data-list",m.type),m.indent>1&&y.setAttribute("class",`ql-indent-${m.indent-1}`),y.innerHTML=m.element.innerHTML,d.appendChild(y)});const p=(o=l[0])==null?void 0:o.element,{parentNode:h}=p??{};p&&(h==null||h.replaceChild(d,p)),l.slice(1).forEach(m=>{let{element:y}=m;h==null||h.removeChild(y)})}};function Oce(t){t.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&Ace(t)}const Pce=[Oce,Ece],Rce=t=>{t.documentElement&&Pce.forEach(e=>{e(t)})},Lce=Ra("quill:clipboard"),Ice=[[Node.TEXT_NODE,Wce],[Node.TEXT_NODE,gT],["br",Bce],[Node.ELEMENT_NODE,gT],[Node.ELEMENT_NODE,qce],[Node.ELEMENT_NODE,Fce],[Node.ELEMENT_NODE,Hce],["li",Uce],["ol, ul",Gce],["pre",zce],["tr",Vce],["b",r5("bold")],["i",r5("italic")],["strike",r5("strike")],["style",$ce]],Mce=[fce,IM].reduce((t,e)=>(t[e.keyName]=e,t),{}),mT=[RM,_N,wN,DM,BM,$M].reduce((t,e)=>(t[e.keyName]=e,t),{});class UM extends Bs{constructor(e,n){super(e,n),this.quill.root.addEventListener("copy",r=>this.onCaptureCopy(r,!1)),this.quill.root.addEventListener("cut",r=>this.onCaptureCopy(r,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],Ice.concat(this.options.matchers??[]).forEach(r=>{let[i,s]=r;this.addMatcher(i,s)})}addMatcher(e,n){this.matchers.push([e,n])}convert(e){let{html:n,text:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i[cr.blotName])return new De().insert(r||"",{[cr.blotName]:i[cr.blotName]});if(!n)return new De().insert(r||"",i);const s=this.convertHTML(n);return Dh(s,`
`)&&(s.ops[s.ops.length-1].attributes==null||i.table)?s.compose(new De().retain(s.length()-1).delete(1)):s}normalizeHTML(e){Rce(e)}convertHTML(e){const n=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(n);const r=n.body,i=new WeakMap,[s,a]=this.prepareMatching(r,i);return kN(this.quill.scroll,r,s,a,i)}dangerouslyPasteHTML(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:be.sources.API;if(typeof e=="string"){const i=this.convert({html:e,text:""});this.quill.setContents(i,n),this.quill.setSelection(0,be.sources.SILENT)}else{const i=this.convert({html:n,text:""});this.quill.updateContents(new De().retain(e).concat(i),r),this.quill.setSelection(e+i.length(),be.sources.SILENT)}}onCaptureCopy(e){var a,o;let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();const[r]=this.quill.selection.getRange();if(r==null)return;const{html:i,text:s}=this.onCopy(r,n);(a=e.clipboardData)==null||a.setData("text/plain",s),(o=e.clipboardData)==null||o.setData("text/html",i),n&&EN({range:r,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(n=>n[0]!=="#").join(`
`)}onCapturePaste(e){var a,o,l,u,d;if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const n=this.quill.getSelection(!0);if(n==null)return;const r=(a=e.clipboardData)==null?void 0:a.getData("text/html");let i=(o=e.clipboardData)==null?void 0:o.getData("text/plain");if(!r&&!i){const p=(l=e.clipboardData)==null?void 0:l.getData("text/uri-list");p&&(i=this.normalizeURIList(p))}const s=Array.from(((u=e.clipboardData)==null?void 0:u.files)||[]);if(!r&&s.length>0){this.quill.uploader.upload(n,s);return}if(r&&s.length>0){const p=new DOMParser().parseFromString(r,"text/html");if(p.body.childElementCount===1&&((d=p.body.firstElementChild)==null?void 0:d.tagName)==="IMG"){this.quill.uploader.upload(n,s);return}}this.onPaste(n,{html:r,text:i})}onCopy(e){const n=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:n}}onPaste(e,n){let{text:r,html:i}=n;const s=this.quill.getFormat(e.index),a=this.convert({text:r,html:i},s);Lce.log("onPaste",a,{text:r,html:i});const o=new De().retain(e.index).delete(e.length).concat(a);this.quill.updateContents(o,be.sources.USER),this.quill.setSelection(o.length()-e.length,be.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,n){const r=[],i=[];return this.matchers.forEach(s=>{const[a,o]=s;switch(a){case Node.TEXT_NODE:i.push(o);break;case Node.ELEMENT_NODE:r.push(o);break;default:Array.from(e.querySelectorAll(a)).forEach(l=>{if(n.has(l)){const u=n.get(l);u==null||u.push(o)}else n.set(l,[o])});break}}),[r,i]}}je(UM,"DEFAULTS",{matchers:[]});function pc(t,e,n,r){return r.query(e)?t.reduce((i,s)=>{if(!s.insert)return i;if(s.attributes&&s.attributes[e])return i.push(s);const a=n?{[e]:n}:{};return i.insert(s.insert,{...a,...s.attributes})},new De):t}function Dh(t,e){let n="";for(let r=t.ops.length-1;r>=0&&n.length<e.length;--r){const i=t.ops[r];if(typeof i.insert!="string")break;n=i.insert+n}return n.slice(-1*e.length)===e}function _o(t,e){if(!(t instanceof Element))return!1;const n=e.query(t);return n&&n.prototype instanceof ii?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(t.tagName.toLowerCase())}function Dce(t,e){return t.previousElementSibling&&t.nextElementSibling&&!_o(t.previousElementSibling,e)&&!_o(t.nextElementSibling,e)}const dm=new WeakMap;function GM(t){return t==null?!1:(dm.has(t)||(t.tagName==="PRE"?dm.set(t,!0):dm.set(t,GM(t.parentNode))),dm.get(t))}function kN(t,e,n,r,i){return e.nodeType===e.TEXT_NODE?r.reduce((s,a)=>a(e,s,t),new De):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((s,a)=>{let o=kN(t,a,n,r,i);return a.nodeType===e.ELEMENT_NODE&&(o=n.reduce((l,u)=>u(a,l,t),o),o=(i.get(a)||[]).reduce((l,u)=>u(a,l,t),o)),s.concat(o)},new De):new De}function r5(t){return(e,n,r)=>pc(n,t,!0,r)}function Fce(t,e,n){const r=Is.keys(t),i=as.keys(t),s=Qo.keys(t),a={};return r.concat(i).concat(s).forEach(o=>{let l=n.query(o,Fe.ATTRIBUTE);l!=null&&(a[l.attrName]=l.value(t),a[l.attrName])||(l=Mce[o],l!=null&&(l.attrName===o||l.keyName===o)&&(a[l.attrName]=l.value(t)||void 0),l=mT[o],l!=null&&(l.attrName===o||l.keyName===o)&&(l=mT[o],a[l.attrName]=l.value(t)||void 0))}),Object.entries(a).reduce((o,l)=>{let[u,d]=l;return pc(o,u,d,n)},e)}function qce(t,e,n){const r=n.query(t);if(r==null)return e;if(r.prototype instanceof ii){const i={},s=r.value(t);if(s!=null)return i[r.blotName]=s,new De().insert(i,r.formats(t,n))}else if(r.prototype instanceof dh&&!Dh(e,`
`)&&e.insert(`
`),"blotName"in r&&"formats"in r&&typeof r.formats=="function")return pc(e,r.blotName,r.formats(t,n),n);return e}function Bce(t,e){return Dh(e,`
`)||e.insert(`
`),e}function zce(t,e,n){const r=n.query("code-block"),i=r&&"formats"in r&&typeof r.formats=="function"?r.formats(t,n):!0;return pc(e,"code-block",i,n)}function $ce(){return new De}function Uce(t,e,n){const r=n.query(t);if(r==null||r.blotName!=="list"||!Dh(e,`
`))return e;let i=-1,s=t.parentNode;for(;s!=null;)["OL","UL"].includes(s.tagName)&&(i+=1),s=s.parentNode;return i<=0?e:e.reduce((a,o)=>o.insert?o.attributes&&typeof o.attributes.indent=="number"?a.push(o):a.insert(o.insert,{indent:i,...o.attributes||{}}):a,new De)}function Gce(t,e,n){const r=t;let i=r.tagName==="OL"?"ordered":"bullet";const s=r.getAttribute("data-checked");return s&&(i=s==="true"?"checked":"unchecked"),pc(e,"list",i,n)}function gT(t,e,n){if(!Dh(e,`
`)){if(_o(t,n)&&(t.childNodes.length>0||t instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&t.nextSibling){let r=t.nextSibling;for(;r!=null;){if(_o(r,n))return e.insert(`
`);const i=n.query(r);if(i&&i.prototype instanceof Ni)return e.insert(`
`);r=r.firstChild}}}return e}function Hce(t,e,n){var s;const r={},i=t.style||{};return i.fontStyle==="italic"&&(r.italic=!0),i.textDecoration==="underline"&&(r.underline=!0),i.textDecoration==="line-through"&&(r.strike=!0),((s=i.fontWeight)!=null&&s.startsWith("bold")||parseInt(i.fontWeight,10)>=700)&&(r.bold=!0),e=Object.entries(r).reduce((a,o)=>{let[l,u]=o;return pc(a,l,u,n)},e),parseFloat(i.textIndent||0)>0?new De().insert("	").concat(e):e}function Vce(t,e,n){var i,s;const r=((i=t.parentElement)==null?void 0:i.tagName)==="TABLE"?t.parentElement:(s=t.parentElement)==null?void 0:s.parentElement;if(r!=null){const o=Array.from(r.querySelectorAll("tr")).indexOf(t)+1;return pc(e,"table",o,n)}return e}function Wce(t,e,n){var i;let r=t.data;if(((i=t.parentElement)==null?void 0:i.tagName)==="O:P")return e.insert(r.trim());if(!GM(t)){if(r.trim().length===0&&r.includes(`
`)&&!Dce(t,n))return e;r=r.replace(/[^\S\u00a0]/g," "),r=r.replace(/ {2,}/g," "),(t.previousSibling==null&&t.parentElement!=null&&_o(t.parentElement,n)||t.previousSibling instanceof Element&&_o(t.previousSibling,n))&&(r=r.replace(/^ /,"")),(t.nextSibling==null&&t.parentElement!=null&&_o(t.parentElement,n)||t.nextSibling instanceof Element&&_o(t.nextSibling,n))&&(r=r.replace(/ $/,"")),r=r.replaceAll(""," ")}return e.insert(r)}class HM extends Bs{constructor(n,r){super(n,r);je(this,"lastRecorded",0);je(this,"ignoreChange",!1);je(this,"stack",{undo:[],redo:[]});je(this,"currentRange",null);this.quill.on(be.events.EDITOR_CHANGE,(i,s,a,o)=>{i===be.events.SELECTION_CHANGE?s&&o!==be.sources.SILENT&&(this.currentRange=s):i===be.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||o===be.sources.USER?this.record(s,a):this.transform(s)),this.currentRange=Z_(this.currentRange,s))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",i=>{i.inputType==="historyUndo"?(this.undo(),i.preventDefault()):i.inputType==="historyRedo"&&(this.redo(),i.preventDefault())})}change(n,r){if(this.stack[n].length===0)return;const i=this.stack[n].pop();if(!i)return;const s=this.quill.getContents(),a=i.delta.invert(s);this.stack[r].push({delta:a,range:Z_(i.range,a)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(i.delta,be.sources.USER),this.ignoreChange=!1,this.restoreSelection(i)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(n,r){if(n.ops.length===0)return;this.stack.redo=[];let i=n.invert(r),s=this.currentRange;const a=Date.now();if(this.lastRecorded+this.options.delay>a&&this.stack.undo.length>0){const o=this.stack.undo.pop();o&&(i=i.compose(o.delta),s=o.range)}else this.lastRecorded=a;i.length()!==0&&(this.stack.undo.push({delta:i,range:s}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(n){vT(this.stack.undo,n),vT(this.stack.redo,n)}undo(){this.change("undo","redo")}restoreSelection(n){if(n.range)this.quill.setSelection(n.range,be.sources.USER);else{const r=Yce(this.quill.scroll,n.delta);this.quill.setSelection(r,be.sources.USER)}}}je(HM,"DEFAULTS",{delay:1e3,maxStack:100,userOnly:!1});function vT(t,e){let n=e;for(let r=t.length-1;r>=0;r-=1){const i=t[r];t[r]={delta:n.transform(i.delta,!0),range:i.range&&Z_(i.range,n)},n=i.delta.transform(n),t[r].delta.length()===0&&t.splice(r,1)}}function Kce(t,e){const n=e.ops[e.ops.length-1];return n==null?!1:n.insert!=null?typeof n.insert=="string"&&n.insert.endsWith(`
`):n.attributes!=null?Object.keys(n.attributes).some(r=>t.query(r,Fe.BLOCK)!=null):!1}function Yce(t,e){const n=e.reduce((i,s)=>i+(s.delete||0),0);let r=e.length()-n;return Kce(t,e)&&(r-=1),r}function Z_(t,e){if(!t)return t;const n=e.transformPosition(t.index),r=e.transformPosition(t.index+t.length);return{index:n,length:r-n}}class VM extends Bs{constructor(e,n){super(e,n),e.root.addEventListener("drop",r=>{var a;r.preventDefault();let i=null;if(document.caretRangeFromPoint)i=document.caretRangeFromPoint(r.clientX,r.clientY);else if(document.caretPositionFromPoint){const o=document.caretPositionFromPoint(r.clientX,r.clientY);i=document.createRange(),i.setStart(o.offsetNode,o.offset),i.setEnd(o.offsetNode,o.offset)}const s=i&&e.selection.normalizeNative(i);if(s){const o=e.selection.normalizedToRange(s);(a=r.dataTransfer)!=null&&a.files&&this.upload(o,r.dataTransfer.files)}})}upload(e,n){const r=[];Array.from(n).forEach(i=>{var s;i&&((s=this.options.mimetypes)!=null&&s.includes(i.type))&&r.push(i)}),r.length>0&&this.options.handler.call(this,e,r)}}VM.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(t,e){if(!this.quill.scroll.query("image"))return;const n=e.map(r=>new Promise(i=>{const s=new FileReader;s.onload=()=>{i(s.result)},s.readAsDataURL(r)}));Promise.all(n).then(r=>{const i=r.reduce((s,a)=>s.insert({image:a}),new De().retain(t.index).delete(t.length));this.quill.updateContents(i,Le.sources.USER),this.quill.setSelection(t.index+r.length,Le.sources.SILENT)})}};const Xce=["insertText","insertReplacementText"];class Qce extends Bs{constructor(e,n){super(e,n),e.root.addEventListener("beforeinput",r=>{this.handleBeforeInput(r)}),/Android/i.test(navigator.userAgent)||e.on(be.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){EN({range:e,quill:this.quill})}replaceText(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(n){const r=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new De().retain(e.index).insert(n,r),be.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+n.length,0,be.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!Xce.includes(e.inputType))return;const n=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!n||n.collapsed===!0)return;const r=Zce(e);if(r==null)return;const i=this.quill.selection.normalizeNative(n),s=i?this.quill.selection.normalizedToRange(i):null;s&&this.replaceText(s,r)&&e.preventDefault()}handleCompositionStart(){const e=this.quill.getSelection();e&&this.replaceText(e)}}function Zce(t){var e;return typeof t.data=="string"?t.data:(e=t.dataTransfer)!=null&&e.types.includes("text/plain")?t.dataTransfer.getData("text/plain"):null}const Jce=/Mac/i.test(navigator.platform),eue=100,tue=t=>!!(t.key==="ArrowLeft"||t.key==="ArrowRight"||t.key==="ArrowUp"||t.key==="ArrowDown"||t.key==="Home"||Jce&&t.key==="a"&&t.ctrlKey===!0);class nue extends Bs{constructor(n,r){super(n,r);je(this,"isListening",!1);je(this,"selectionChangeDeadline",0);this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(n,r){let{line:i,event:s}=r;if(!(i instanceof Ji)||!i.uiNode)return!0;const a=getComputedStyle(i.domNode).direction==="rtl";return a&&s.key!=="ArrowRight"||!a&&s.key!=="ArrowLeft"?!0:(this.quill.setSelection(n.index-1,n.length+(s.shiftKey?1:0),be.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",n=>{!n.defaultPrevented&&tue(n)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+eue,this.isListening)return;this.isListening=!0;const n=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",n,{once:!0})}handleSelectionChange(){const n=document.getSelection();if(!n)return;const r=n.getRangeAt(0);if(r.collapsed!==!0||r.startOffset!==0)return;const i=this.quill.scroll.find(r.startContainer);if(!(i instanceof Ji)||!i.uiNode)return;const s=document.createRange();s.setStartAfter(i.uiNode),s.setEndAfter(i.uiNode),n.removeAllRanges(),n.addRange(s)}}be.register({"blots/block":Kn,"blots/block/embed":Ni,"blots/break":os,"blots/container":fc,"blots/cursor":zu,"blots/embed":xN,"blots/inline":Ms,"blots/scroll":Zc,"blots/text":ns,"modules/clipboard":UM,"modules/history":HM,"modules/keyboard":z0,"modules/uploader":VM,"modules/input":Qce,"modules/uiNode":nue});class rue extends as{add(e,n){let r=0;if(n==="+1"||n==="-1"){const i=this.value(e)||0;r=n==="+1"?i+1:i-1}else typeof n=="number"&&(r=n);return r===0?(this.remove(e),!0):super.add(e,r.toString())}canAdd(e,n){return super.canAdd(e,n)||super.canAdd(e,parseInt(n,10))}value(e){return parseInt(super.value(e),10)||void 0}}const iue=new rue("indent","ql-indent",{scope:Fe.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class J_ extends Kn{}je(J_,"blotName","blockquote"),je(J_,"tagName","blockquote");class e3 extends Kn{static formats(e){return this.tagName.indexOf(e.tagName)+1}}je(e3,"blotName","header"),je(e3,"tagName",["H1","H2","H3","H4","H5","H6"]);class Fh extends fc{}Fh.blotName="list-container";Fh.tagName="OL";class qh extends Kn{static create(e){const n=super.create();return n.setAttribute("data-list",e),n}static formats(e){return e.getAttribute("data-list")||void 0}static register(){be.register(Fh)}constructor(e,n){super(e,n);const r=n.ownerDocument.createElement("span"),i=s=>{if(!e.isEnabled())return;const a=this.statics.formats(n,e);a==="checked"?(this.format("list","unchecked"),s.preventDefault()):a==="unchecked"&&(this.format("list","checked"),s.preventDefault())};r.addEventListener("mousedown",i),r.addEventListener("touchstart",i),this.attachUI(r)}format(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("data-list",n):super.format(e,n)}}qh.blotName="list";qh.tagName="LI";Fh.allowedChildren=[qh];qh.requiredContainer=Fh;class ph extends Ms{static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}je(ph,"blotName","bold"),je(ph,"tagName",["STRONG","B"]);class t3 extends ph{}je(t3,"blotName","italic"),je(t3,"tagName",["EM","I"]);class No extends Ms{static create(e){const n=super.create(e);return n.setAttribute("href",this.sanitize(e)),n.setAttribute("rel","noopener noreferrer"),n.setAttribute("target","_blank"),n}static formats(e){return e.getAttribute("href")}static sanitize(e){return WM(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,n){e!==this.statics.blotName||!n?super.format(e,n):this.domNode.setAttribute("href",this.constructor.sanitize(n))}}je(No,"blotName","link"),je(No,"tagName","A"),je(No,"SANITIZED_URL","about:blank"),je(No,"PROTOCOL_WHITELIST",["http","https","mailto","tel","sms"]);function WM(t,e){const n=document.createElement("a");n.href=t;const r=n.href.slice(0,n.href.indexOf(":"));return e.indexOf(r)>-1}class n3 extends Ms{static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}}je(n3,"blotName","script"),je(n3,"tagName",["SUB","SUP"]);class r3 extends ph{}je(r3,"blotName","strike"),je(r3,"tagName",["S","STRIKE"]);class i3 extends Ms{}je(i3,"blotName","underline"),je(i3,"tagName","U");class Im extends xN{static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const n=super.create(e);return typeof e=="string"&&(window.katex.render(e,n,{throwOnError:!1,errorColor:"#f00"}),n.setAttribute("data-value",e)),n}static value(e){return e.getAttribute("data-value")}html(){const{formula:e}=this.value();return`<span>${e}</span>`}}je(Im,"blotName","formula"),je(Im,"className","ql-formula"),je(Im,"tagName","SPAN");const yT=["alt","height","width"];var vm;let sue=(vm=class extends ii{static create(e){const n=super.create(e);return typeof e=="string"&&n.setAttribute("src",this.sanitize(e)),n}static formats(e){return yT.reduce((n,r)=>(e.hasAttribute(r)&&(n[r]=e.getAttribute(r)),n),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return WM(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,n){yT.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):super.format(e,n)}},je(vm,"blotName","image"),je(vm,"tagName","IMG"),vm);const xT=["height","width"];class Mm extends Ni{static create(e){const n=super.create(e);return n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen","true"),n.setAttribute("src",this.sanitize(e)),n}static formats(e){return xT.reduce((n,r)=>(e.hasAttribute(r)&&(n[r]=e.getAttribute(r)),n),{})}static sanitize(e){return No.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,n){xT.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):super.format(e,n)}html(){const{video:e}=this.value();return`<a href="${e}">${e}</a>`}}je(Mm,"blotName","video"),je(Mm,"className","ql-video"),je(Mm,"tagName","IFRAME");const yf=new as("code-token","hljs",{scope:Fe.INLINE});class ka extends Ms{static formats(e,n){for(;e!=null&&e!==n.domNode;){if(e.classList&&e.classList.contains(cr.className))return super.formats(e,n);e=e.parentNode}}constructor(e,n,r){super(e,n,r),yf.add(this.domNode,r)}format(e,n){e!==ka.blotName?super.format(e,n):n?yf.add(this.domNode,n):(yf.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),yf.value(this.domNode)||this.unwrap()}}ka.blotName="code-token";ka.className="ql-token";class _i extends cr{static create(e){const n=super.create(e);return typeof e=="string"&&n.setAttribute("data-language",e),n}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("data-language",n):super.format(e,n)}replaceWith(e,n){return this.formatAt(0,this.length(),ka.blotName,!1),super.replaceWith(e,n)}}class Of extends hc{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,n){e===_i.blotName&&(this.forceNext=!0,this.children.forEach(r=>{r.format(e,n)}))}formatAt(e,n,r,i){r===_i.blotName&&(this.forceNext=!0),super.formatAt(e,n,r,i)}highlight(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const i=`${Array.from(this.domNode.childNodes).filter(a=>a!==this.uiNode).map(a=>a.textContent).join(`
`)}
`,s=_i.formats(this.children.head.domNode);if(n||this.forceNext||this.cachedText!==i){if(i.trim().length>0||this.cachedText==null){const a=this.children.reduce((l,u)=>l.concat(TM(u,!1)),new De),o=e(i,s);a.diff(o).reduce((l,u)=>{let{retain:d,attributes:p}=u;return d?(p&&Object.keys(p).forEach(h=>{[_i.blotName,ka.blotName].includes(h)&&this.formatAt(l,d,h,p[h])}),l+d):l},0)}this.cachedText=i,this.forceNext=!1}}html(e,n){const[r]=this.children.find(e);return`<pre data-language="${r?_i.formats(r.domNode):"plain"}">
${B0(this.code(e,n))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const n=_i.formats(this.children.head.domNode);n!==this.uiNode.value&&(this.uiNode.value=n)}}}Of.allowedChildren=[_i];_i.requiredContainer=Of;_i.allowedChildren=[ka,zu,ns,os];const aue=(t,e,n)=>{if(typeof t.versionString=="string"){const r=t.versionString.split(".")[0];if(parseInt(r,10)>=11)return t.highlight(n,{language:e}).value}return t.highlight(e,n).value};class KM extends Bs{static register(){be.register(ka,!0),be.register(_i,!0),be.register(Of,!0)}constructor(e,n){if(super(e,n),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((r,i)=>{let{key:s}=i;return r[s]=!0,r},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(be.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof Of))return;const n=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(r=>{let{key:i,label:s}=r;const a=n.ownerDocument.createElement("option");a.textContent=s,a.setAttribute("value",i),n.appendChild(a)}),n.addEventListener("change",()=>{e.format(_i.blotName,n.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(n),e.children.head&&(n.value=_i.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(be.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(be.sources.USER);const r=this.quill.getSelection();(e==null?this.quill.scroll.descendants(Of):[e]).forEach(s=>{s.highlight(this.highlightBlot,n)}),this.quill.update(be.sources.SILENT),r!=null&&this.quill.setSelection(r,be.sources.SILENT)}highlightBlot(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(n=this.languages[n]?n:"plain",n==="plain")return B0(e).split(`
`).reduce((i,s,a)=>(a!==0&&i.insert(`
`,{[cr.blotName]:n}),i.insert(s)),new De);const r=this.quill.root.ownerDocument.createElement("div");return r.classList.add(cr.className),r.innerHTML=aue(this.options.hljs,n,e),kN(this.quill.scroll,r,[(i,s)=>{const a=yf.value(i);return a?s.compose(new De().retain(s.length(),{[ka.blotName]:a})):s}],[(i,s)=>i.data.split(`
`).reduce((a,o,l)=>(l!==0&&a.insert(`
`,{[cr.blotName]:n}),a.insert(o)),s)],new WeakMap)}}KM.DEFAULTS={hljs:(()=>window.hljs)(),interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};const Rf=class Rf extends Kn{static create(e){const n=super.create();return e?n.setAttribute("data-row",e):n.setAttribute("data-row",CN()),n}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,n){e===Rf.blotName&&n?this.domNode.setAttribute("data-row",n):super.format(e,n)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}};je(Rf,"blotName","table"),je(Rf,"tagName","TD");let Yi=Rf;class Ca extends fc{checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const e=this.children.head.formats(),n=this.children.tail.formats(),r=this.next.children.head.formats(),i=this.next.children.tail.formats();return e.table===n.table&&e.table===r.table&&e.table===i.table}return!1}optimize(e){super.optimize(e),this.children.forEach(n=>{if(n.next==null)return;const r=n.formats(),i=n.next.formats();if(r.table!==i.table){const s=this.splitAfter(n);s&&s.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}je(Ca,"blotName","table-row"),je(Ca,"tagName","TR");class Ls extends fc{}je(Ls,"blotName","table-body"),je(Ls,"tagName","TBODY");class Uu extends fc{balanceCells(){const e=this.descendants(Ca),n=e.reduce((r,i)=>Math.max(i.children.length,r),0);e.forEach(r=>{new Array(n-r.children.length).fill(0).forEach(()=>{let i;r.children.head!=null&&(i=Yi.formats(r.children.head.domNode));const s=this.scroll.create(Yi.blotName,i);r.appendChild(s),s.optimize()})})}cells(e){return this.rows().map(n=>n.children.at(e))}deleteColumn(e){const[n]=this.descendant(Ls);n==null||n.children.head==null||n.children.forEach(r=>{const i=r.children.at(e);i!=null&&i.remove()})}insertColumn(e){const[n]=this.descendant(Ls);n==null||n.children.head==null||n.children.forEach(r=>{const i=r.children.at(e),s=Yi.formats(r.children.head.domNode),a=this.scroll.create(Yi.blotName,s);r.insertBefore(a,i)})}insertRow(e){const[n]=this.descendant(Ls);if(n==null||n.children.head==null)return;const r=CN(),i=this.scroll.create(Ca.blotName);n.children.head.children.forEach(()=>{const a=this.scroll.create(Yi.blotName,r);i.appendChild(a)});const s=n.children.at(e);n.insertBefore(i,s)}rows(){const e=this.children.head;return e==null?[]:e.children.map(n=>n)}}je(Uu,"blotName","table-container"),je(Uu,"tagName","TABLE");Uu.allowedChildren=[Ls];Ls.requiredContainer=Uu;Ls.allowedChildren=[Ca];Ca.requiredContainer=Ls;Ca.allowedChildren=[Yi];Yi.requiredContainer=Ca;function CN(){return`row-${Math.random().toString(36).slice(2,6)}`}class oue extends Bs{static register(){be.register(Yi),be.register(Ca),be.register(Ls),be.register(Uu)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(Uu).forEach(e=>{e.balanceCells()})}deleteColumn(){const[e,,n]=this.getTable();n!=null&&(e.deleteColumn(n.cellOffset()),this.quill.update(be.sources.USER))}deleteRow(){const[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(be.sources.USER))}deleteTable(){const[e]=this.getTable();if(e==null)return;const n=e.offset();e.remove(),this.quill.update(be.sources.USER),this.quill.setSelection(n,be.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];const[n,r]=this.quill.getLine(e.index);if(n==null||n.statics.blotName!==Yi.blotName)return[null,null,null,-1];const i=n.parent;return[i.parent.parent,i,n,r]}insertColumn(e){const n=this.quill.getSelection();if(!n)return;const[r,i,s]=this.getTable(n);if(s==null)return;const a=s.cellOffset();r.insertColumn(a+e),this.quill.update(be.sources.USER);let o=i.rowOffset();e===0&&(o+=1),this.quill.setSelection(n.index+o,n.length,be.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){const n=this.quill.getSelection();if(!n)return;const[r,i,s]=this.getTable(n);if(s==null)return;const a=i.rowOffset();r.insertRow(a+e),this.quill.update(be.sources.USER),e>0?this.quill.setSelection(n,be.sources.SILENT):this.quill.setSelection(n.index+i.children.length,n.length,be.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,n){const r=this.quill.getSelection();if(r==null)return;const i=new Array(e).fill(0).reduce(s=>{const a=new Array(n).fill(`
`).join("");return s.insert(a,{table:CN()})},new De().retain(r.index));this.quill.updateContents(i,be.sources.USER),this.quill.setSelection(r.index,be.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(be.events.SCROLL_OPTIMIZE,e=>{e.some(n=>["TD","TR","TBODY","TABLE"].includes(n.target.tagName)?(this.quill.once(be.events.TEXT_CHANGE,(r,i,s)=>{s===be.sources.USER&&this.balanceTables()}),!0):!1)})}}const bT=Ra("quill:toolbar");class jN extends Bs{constructor(e,n){var r,i;if(super(e,n),Array.isArray(this.options.container)){const s=document.createElement("div");s.setAttribute("role","toolbar"),lue(s,this.options.container),(i=(r=e.container)==null?void 0:r.parentNode)==null||i.insertBefore(s,e.container),this.container=s}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){bT.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(s=>{var o;const a=(o=this.options.handlers)==null?void 0:o[s];a&&this.addHandler(s,a)}),Array.from(this.container.querySelectorAll("button, select")).forEach(s=>{this.attach(s)}),this.quill.on(be.events.EDITOR_CHANGE,()=>{const[s]=this.quill.selection.getRange();this.update(s)})}addHandler(e,n){this.handlers[e]=n}attach(e){let n=Array.from(e.classList).find(i=>i.indexOf("ql-")===0);if(!n)return;if(n=n.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[n]==null&&this.quill.scroll.query(n)==null){bT.warn("ignoring attaching to nonexistent format",n,e);return}const r=e.tagName==="SELECT"?"change":"click";e.addEventListener(r,i=>{let s;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;const o=e.options[e.selectedIndex];o.hasAttribute("selected")?s=!1:s=o.value||!1}else e.classList.contains("ql-active")?s=!1:s=e.value||!e.hasAttribute("value"),i.preventDefault();this.quill.focus();const[a]=this.quill.selection.getRange();if(this.handlers[n]!=null)this.handlers[n].call(this,s);else if(this.quill.scroll.query(n).prototype instanceof ii){if(s=prompt(`Enter ${n}`),!s)return;this.quill.updateContents(new De().retain(a.index).delete(a.length).insert({[n]:s}),be.sources.USER)}else this.quill.format(n,s,be.sources.USER);this.update(a)}),this.controls.push([n,e])}update(e){const n=e==null?{}:this.quill.getFormat(e);this.controls.forEach(r=>{const[i,s]=r;if(s.tagName==="SELECT"){let a=null;if(e==null)a=null;else if(n[i]==null)a=s.querySelector("option[selected]");else if(!Array.isArray(n[i])){let o=n[i];typeof o=="string"&&(o=o.replace(/"/g,'\\"')),a=s.querySelector(`option[value="${o}"]`)}a==null?(s.value="",s.selectedIndex=-1):a.selected=!0}else if(e==null)s.classList.remove("ql-active"),s.setAttribute("aria-pressed","false");else if(s.hasAttribute("value")){const a=n[i],o=a===s.getAttribute("value")||a!=null&&a.toString()===s.getAttribute("value")||a==null&&!s.getAttribute("value");s.classList.toggle("ql-active",o),s.setAttribute("aria-pressed",o.toString())}else{const a=n[i]!=null;s.classList.toggle("ql-active",a),s.setAttribute("aria-pressed",a.toString())}})}}jN.DEFAULTS={};function wT(t,e,n){const r=document.createElement("button");r.setAttribute("type","button"),r.classList.add(`ql-${e}`),r.setAttribute("aria-pressed","false"),n!=null?(r.value=n,r.setAttribute("aria-label",`${e}: ${n}`)):r.setAttribute("aria-label",e),t.appendChild(r)}function lue(t,e){Array.isArray(e[0])||(e=[e]),e.forEach(n=>{const r=document.createElement("span");r.classList.add("ql-formats"),n.forEach(i=>{if(typeof i=="string")wT(r,i);else{const s=Object.keys(i)[0],a=i[s];Array.isArray(a)?cue(r,s,a):wT(r,s,a)}}),t.appendChild(r)})}function cue(t,e,n){const r=document.createElement("select");r.classList.add(`ql-${e}`),n.forEach(i=>{const s=document.createElement("option");i!==!1?s.setAttribute("value",String(i)):s.setAttribute("selected","selected"),r.appendChild(s)}),t.appendChild(r)}jN.DEFAULTS={container:null,handlers:{clean(){const t=this.quill.getSelection();if(t!=null)if(t.length===0){const e=this.quill.getFormat();Object.keys(e).forEach(n=>{this.quill.scroll.query(n,Fe.INLINE)!=null&&this.quill.format(n,!1,be.sources.USER)})}else this.quill.removeFormat(t.index,t.length,be.sources.USER)},direction(t){const{align:e}=this.quill.getFormat();t==="rtl"&&e==null?this.quill.format("align","right",be.sources.USER):!t&&e==="right"&&this.quill.format("align",!1,be.sources.USER),this.quill.format("direction",t,be.sources.USER)},indent(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e),r=parseInt(n.indent||0,10);if(t==="+1"||t==="-1"){let i=t==="+1"?1:-1;n.direction==="rtl"&&(i*=-1),this.quill.format("indent",r+i,be.sources.USER)}},link(t){t===!0&&(t=prompt("Enter link URL:")),this.quill.format("link",t,be.sources.USER)},list(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e);t==="check"?n.list==="checked"||n.list==="unchecked"?this.quill.format("list",!1,be.sources.USER):this.quill.format("list","unchecked",be.sources.USER):this.quill.format("list",t,be.sources.USER)}}};const uue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',due='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',fue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',hue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',pue='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',mue='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',gue='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',vue='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',_T='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',yue='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',xue='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',bue='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',wue='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',_ue='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',Nue='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',Sue='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',Eue='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',kue='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',Cue='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',jue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',Tue='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',Aue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',Oue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',Pue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',Rue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',Lue='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',Iue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',Mue='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',Due='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',Fue='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',que='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',Bue='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',zue='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',mh={align:{"":uue,center:due,right:fue,justify:hue},background:pue,blockquote:mue,bold:gue,clean:vue,code:_T,"code-block":_T,color:yue,direction:{"":xue,rtl:bue},formula:wue,header:{1:_ue,2:Nue,3:Sue,4:Eue,5:kue,6:Cue},italic:jue,image:Tue,indent:{"+1":Aue,"-1":Oue},link:Pue,list:{bullet:Rue,check:Lue,ordered:Iue},script:{sub:Mue,super:Due},strike:Fue,table:que,underline:Bue,video:zue},$ue='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let NT=0;function ST(t,e){t.setAttribute(e,`${t.getAttribute(e)!=="true"}`)}class $0{constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",n=>{switch(n.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),n.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),ST(this.label,"aria-expanded"),ST(this.options,"aria-hidden")}buildItem(e){const n=document.createElement("span");n.tabIndex="0",n.setAttribute("role","button"),n.classList.add("ql-picker-item");const r=e.getAttribute("value");return r&&n.setAttribute("data-value",r),e.textContent&&n.setAttribute("data-label",e.textContent),n.addEventListener("click",()=>{this.selectItem(n,!0)}),n.addEventListener("keydown",i=>{switch(i.key){case"Enter":this.selectItem(n,!0),i.preventDefault();break;case"Escape":this.escape(),i.preventDefault();break}}),n}buildLabel(){const e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=$ue,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){const e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${NT}`,NT+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(n=>{const r=this.buildItem(n);e.appendChild(r),n.selected===!0&&this.selectItem(r)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=this.container.querySelector(".ql-selected");e!==r&&(r!=null&&r.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),n&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){const r=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(r)}else this.selectItem(null);const n=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",n)}}class YM extends $0{constructor(e,n){super(e),this.label.innerHTML=n,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(r=>{r.classList.add("ql-primary")})}buildItem(e){const n=super.buildItem(e);return n.style.backgroundColor=e.getAttribute("value")||"",n}selectItem(e,n){super.selectItem(e,n);const r=this.label.querySelector(".ql-color-label"),i=e&&e.getAttribute("data-value")||"";r&&(r.tagName==="line"?r.style.stroke=i:r.style.fill=i)}}class XM extends $0{constructor(e,n){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(r=>{r.innerHTML=n[r.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,n){super.selectItem(e,n);const r=e||this.defaultItem;if(r!=null){if(this.label.innerHTML===r.innerHTML)return;this.label.innerHTML=r.innerHTML}}}const Uue=t=>{const{overflowY:e}=getComputedStyle(t,null);return e!=="visible"&&e!=="clip"};class QM{constructor(e,n){this.quill=e,this.boundsContainer=n||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,Uue(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){const n=e.left+e.width/2-this.root.offsetWidth/2,r=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${n}px`,this.root.style.top=`${r}px`,this.root.classList.remove("ql-flip");const i=this.boundsContainer.getBoundingClientRect(),s=this.root.getBoundingClientRect();let a=0;if(s.right>i.right&&(a=i.right-s.right,this.root.style.left=`${n+a}px`),s.left<i.left&&(a=i.left-s.left,this.root.style.left=`${n+a}px`),s.bottom>i.bottom){const o=s.bottom-s.top,l=e.bottom-e.top+o;this.root.style.top=`${r-l}px`,this.root.classList.add("ql-flip")}return a}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const Gue=[!1,"center","right","justify"],Hue=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Vue=[!1,"serif","monospace"],Wue=["1","2","3",!1],Kue=["small",!1,"large","huge"];class Bh extends $u{constructor(e,n){super(e,n);const r=i=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",r);return}this.tooltip!=null&&!this.tooltip.root.contains(i.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(s=>{s.container.contains(i.target)||s.close()})};e.emitter.listenDOM("click",document.body,r)}addModule(e){const n=super.addModule(e);return e==="toolbar"&&this.extendToolbar(n),n}buildButtons(e,n){Array.from(e).forEach(r=>{(r.getAttribute("class")||"").split(/\s+/).forEach(s=>{if(s.startsWith("ql-")&&(s=s.slice(3),n[s]!=null))if(s==="direction")r.innerHTML=n[s][""]+n[s].rtl;else if(typeof n[s]=="string")r.innerHTML=n[s];else{const a=r.value||"";a!=null&&n[s][a]&&(r.innerHTML=n[s][a])}})})}buildPickers(e,n){this.pickers=Array.from(e).map(i=>{if(i.classList.contains("ql-align")&&(i.querySelector("option")==null&&Jd(i,Gue),typeof n.align=="object"))return new XM(i,n.align);if(i.classList.contains("ql-background")||i.classList.contains("ql-color")){const s=i.classList.contains("ql-background")?"background":"color";return i.querySelector("option")==null&&Jd(i,Hue,s==="background"?"#ffffff":"#000000"),new YM(i,n[s])}return i.querySelector("option")==null&&(i.classList.contains("ql-font")?Jd(i,Vue):i.classList.contains("ql-header")?Jd(i,Wue):i.classList.contains("ql-size")&&Jd(i,Kue)),new $0(i)});const r=()=>{this.pickers.forEach(i=>{i.update()})};this.quill.on(Le.events.EDITOR_CHANGE,r)}}Bh.DEFAULTS=Mo({},$u.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let t=this.container.querySelector("input.ql-image[type=file]");t==null&&(t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),t.classList.add("ql-image"),t.addEventListener("change",()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,t.files),t.value=""}),this.container.appendChild(t)),t.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class ZM extends QM{constructor(e,n){super(e,n),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;n!=null?this.textbox.value=n:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const r=this.quill.getBounds(this.quill.selection.savedRange);r!=null&&this.position(r),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:n}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,Le.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,Le.sources.USER)),this.quill.root.scrollTop=n;break}case"video":e=Yue(e);case"formula":{if(!e)break;const n=this.quill.getSelection(!0);if(n!=null){const r=n.index+n.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),e,Le.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(r+1," ",Le.sources.USER),this.quill.setSelection(r+2,Le.sources.USER)}break}}this.textbox.value="",this.hide()}}function Yue(t){let e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:t}function Jd(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(r=>{const i=document.createElement("option");r===n?i.setAttribute("selected","selected"):i.setAttribute("value",String(r)),t.appendChild(i)})}const Xue=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class JM extends ZM{constructor(e,n){super(e,n),this.quill.on(Le.events.EDITOR_CHANGE,(r,i,s,a)=>{if(r===Le.events.SELECTION_CHANGE)if(i!=null&&i.length>0&&a===Le.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const o=this.quill.getLines(i.index,i.length);if(o.length===1){const l=this.quill.getBounds(i);l!=null&&this.position(l)}else{const l=o[o.length-1],u=this.quill.getIndex(l),d=Math.min(l.length()-1,i.index+i.length-u),p=this.quill.getBounds(new ec(u,d));p!=null&&this.position(p)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(Le.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const e=this.quill.getSelection();if(e!=null){const n=this.quill.getBounds(e);n!=null&&this.position(n)}},1)})}cancel(){this.show()}position(e){const n=super.position(e),r=this.root.querySelector(".ql-tooltip-arrow");return r.style.marginLeft="",n!==0&&(r.style.marginLeft=`${-1*n-r.offsetWidth/2}px`),n}}je(JM,"TEMPLATE",['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""));class eD extends Bh{constructor(e,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=Xue),super(e,n),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new JM(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),mh),this.buildPickers(e.container.querySelectorAll("select"),mh))}}eD.DEFAULTS=Mo({},Bh.DEFAULTS,{modules:{toolbar:{handlers:{link(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1,be.sources.USER)}}}}});const Que=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class tD extends ZM{constructor(){super(...arguments);je(this,"preview",this.root.querySelector("a.ql-preview"))}listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",n=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),n.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",n=>{if(this.linkRange!=null){const r=this.linkRange;this.restoreFocus(),this.quill.formatText(r,"link",!1,Le.sources.USER),delete this.linkRange}n.preventDefault(),this.hide()}),this.quill.on(Le.events.SELECTION_CHANGE,(n,r,i)=>{if(n!=null){if(n.length===0&&i===Le.sources.USER){const[s,a]=this.quill.scroll.descendant(No,n.index);if(s!=null){this.linkRange=new ec(n.index-a,s.length());const o=No.formats(s.domNode);this.preview.textContent=o,this.preview.setAttribute("href",o),this.show();const l=this.quill.getBounds(this.linkRange);l!=null&&this.position(l);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}je(tD,"TEMPLATE",['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""));class nD extends Bh{constructor(e,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=Que),super(e,n),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),mh),this.buildPickers(e.container.querySelectorAll("select"),mh),this.tooltip=new tD(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(n,r)=>{e.handlers.link.call(e,!r.format.link)}))}}nD.DEFAULTS=Mo({},Bh.DEFAULTS,{modules:{toolbar:{handlers:{link(t){if(t){const e=this.quill.getSelection();if(e==null||e.length===0)return;let n=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(n)&&n.indexOf("mailto:")!==0&&(n=`mailto:${n}`);const{tooltip:r}=this.quill.theme;r.edit("link",n)}else this.quill.format("link",!1,be.sources.USER)}}}}});be.register({"attributors/attribute/direction":IM,"attributors/class/align":PM,"attributors/class/background":pce,"attributors/class/color":hce,"attributors/class/direction":MM,"attributors/class/font":qM,"attributors/class/size":zM,"attributors/style/align":RM,"attributors/style/background":_N,"attributors/style/color":wN,"attributors/style/direction":DM,"attributors/style/font":BM,"attributors/style/size":$M},!0);be.register({"formats/align":PM,"formats/direction":MM,"formats/indent":iue,"formats/background":_N,"formats/color":wN,"formats/font":qM,"formats/size":zM,"formats/blockquote":J_,"formats/code-block":cr,"formats/header":e3,"formats/list":qh,"formats/bold":ph,"formats/code":NN,"formats/italic":t3,"formats/link":No,"formats/script":n3,"formats/strike":r3,"formats/underline":i3,"formats/formula":Im,"formats/image":sue,"formats/video":Mm,"modules/syntax":KM,"modules/table":oue,"modules/toolbar":jN,"themes/bubble":eD,"themes/snow":nD,"ui/icons":mh,"ui/picker":$0,"ui/icon-picker":XM,"ui/color-picker":YM,"ui/tooltip":QM},!0);const Zue=be.import("blots/embed");class Jue extends Event{constructor(e,n){super(e,n),this.value={},this.event=new Event(e)}}function ede(t){return typeof t=="object"&&t!==null&&"value"in t&&typeof t.value=="string"&&"denotationChar"in t&&typeof t.denotationChar=="string"}class zh extends Zue{constructor(e,n){super(e,n),this.mounted=!1}static create(e){const n=super.create();if(!ede(e)||!(n instanceof HTMLElement))return n;const r=document.createElement("span");if(r.className="ql-mention-denotation-char",r.innerText=e.denotationChar,n.appendChild(r),typeof this.render=="function")n.appendChild(this.render(e));else{const i=document.createElement("span");i.className="ql-mention-value",i.innerText=e.value,n.appendChild(i)}return zh.setDataValues(n,e)}static setDataValues(e,n){const r=e;return Object.keys(n).forEach(i=>{r.dataset[i]=n[i]}),r}static value(e){return e.dataset}attach(){super.attach(),this.mounted||(this.mounted=!0,this.clickHandler=this.getClickHandler(),this.hoverHandler=this.getHoverHandler(),this.domNode.addEventListener("click",this.clickHandler,!1),this.domNode.addEventListener("mouseenter",this.hoverHandler,!1))}detach(){super.detach(),this.mounted=!1,this.clickHandler&&(this.domNode.removeEventListener("click",this.clickHandler),this.clickHandler=void 0)}getClickHandler(){return e=>{const n=this.buildEvent("mention-clicked",e);window.dispatchEvent(n),e.preventDefault()}}getHoverHandler(){return e=>{const n=this.buildEvent("mention-hovered",e);window.dispatchEvent(n),e.preventDefault()}}buildEvent(e,n){const r=new Jue(e,{bubbles:!0,cancelable:!0});return r.value=Object.assign({},this.domNode.dataset),r.event=n,r}}zh.blotName="mention";zh.tagName="span";zh.className="mention";const oa={TAB:"Tab",ENTER:"Enter",ESCAPE:"Escape",UP:"ArrowUp",DOWN:"ArrowDown"};function tde(t,e,n){const r=t;return Object.keys(e).forEach(i=>{n.indexOf(i)>-1?r.dataset[i]=e[i]:delete r.dataset[i]}),r}function ET(t,e){e!==null&&(typeof e=="object"?t.appendChild(e):t.innerText=e)}function nde(t,e,n,r){return e.reduce((i,s)=>{let a;if(n&&r){const o=new RegExp(`^${s}|\\s${s}`,"g"),l=(t.match(o)||[]).pop();if(!l)return{mentionChar:i.mentionChar,mentionCharIndex:i.mentionCharIndex};a=l!==s?t.lastIndexOf(l)+l.length-s.length:0}else a=t.lastIndexOf(s);return a>i.mentionCharIndex?{mentionChar:s,mentionCharIndex:a}:{mentionChar:i.mentionChar,mentionCharIndex:i.mentionCharIndex}},{mentionChar:null,mentionCharIndex:-1})}function rde(t,e){return e.test(t)}function ide(t,e,n,r){if(t===-1)return!1;if(!n)return!0;const i=t?e[t-1]:r;return!i||!!i.match(/\s/)}const sde=be.import("core/module");class TN extends sde{constructor(e,n){super(e,n),this.isOpen=!1,this.itemIndex=0,this.values=[],this.suspendMouseEnter=!1,Array.isArray(n==null?void 0:n.dataAttributes)&&(this.options.dataAttributes=this.options.dataAttributes?this.options.dataAttributes.concat(n.dataAttributes):n.dataAttributes);for(let r in this.options){const i=r,s=this.options[i];typeof s=="function"&&(this.options[i]=s.bind(this))}this.mentionContainer=document.createElement("div"),this.mentionContainer.className=this.options.mentionContainerClass?this.options.mentionContainerClass:"",this.mentionContainer.style.cssText="display: none; position: absolute;",this.mentionContainer.onmousemove=this.onContainerMouseMove.bind(this),this.options.fixMentionsToQuill&&(this.mentionContainer.style.width="auto"),this.mentionList=document.createElement("ul"),this.mentionList.id="quill-mention-list",e.root.setAttribute("aria-owns","quill-mention-list"),this.mentionList.className=this.options.mentionListClass?this.options.mentionListClass:"",this.mentionContainer.appendChild(this.mentionList),e.on("text-change",this.onTextChange.bind(this)),e.on("selection-change",this.onSelectionChange.bind(this)),e.container.addEventListener("paste",()=>{setTimeout(()=>{const r=e.getSelection();this.onSelectionChange(r)})}),e.keyboard.addBinding({key:oa.TAB},this.selectHandler.bind(this)),e.keyboard.bindings[oa.TAB].unshift(e.keyboard.bindings[oa.TAB].pop());for(let r of this.options.selectKeys??[])e.keyboard.addBinding({key:r},this.selectHandler.bind(this));e.keyboard.bindings[oa.ENTER].unshift(e.keyboard.bindings[oa.ENTER].pop()),e.keyboard.addBinding({key:oa.ESCAPE},this.escapeHandler.bind(this)),e.keyboard.addBinding({key:oa.UP},this.upHandler.bind(this)),e.keyboard.addBinding({key:oa.DOWN},this.downHandler.bind(this))}selectHandler(){return this.isOpen&&!this.existingSourceExecutionToken?(this.selectItem(),!1):!0}escapeHandler(){return this.isOpen?(this.existingSourceExecutionToken&&(this.existingSourceExecutionToken.abandoned=!0),this.hideMentionList(),!1):!0}upHandler(){return this.isOpen&&!this.existingSourceExecutionToken?(this.prevItem(),!1):!0}downHandler(){return this.isOpen&&!this.existingSourceExecutionToken?(this.nextItem(),!1):!0}showMentionList(){this.options.positioningStrategy==="fixed"?document.body.appendChild(this.mentionContainer):this.quill.container.appendChild(this.mentionContainer),this.mentionContainer.style.visibility="hidden",this.mentionContainer.style.display="",this.mentionContainer.scrollTop=0,this.setMentionContainerPosition(),this.setIsOpen(!0)}hideMentionList(){this.options.onBeforeClose&&this.options.onBeforeClose(),this.mentionContainer.style.display="none",this.mentionContainer.remove(),this.setIsOpen(!1),this.quill.root.removeAttribute("aria-activedescendant")}highlightItem(e=!0){for(let r=0;r<this.mentionList.childNodes.length;r+=1){const i=this.mentionList.childNodes[r];i instanceof HTMLElement&&i.classList.remove("selected")}const n=this.mentionList.childNodes[this.itemIndex];if(!(this.itemIndex===-1||n.dataset.disabled==="true")&&(n.classList.add("selected"),this.quill.root.setAttribute("aria-activedescendant",n.id),e)){const r=n.offsetHeight,i=n.offsetTop,s=this.mentionContainer.scrollTop,a=s+this.mentionContainer.offsetHeight;i<s?this.mentionContainer.scrollTop=i:i>a-r&&(this.mentionContainer.scrollTop+=i-a+r)}}onContainerMouseMove(){this.suspendMouseEnter=!1}selectItem(){var r,i;if(this.itemIndex===-1)return;const n=this.mentionList.childNodes[this.itemIndex].dataset;n.disabled||((i=(r=this.options).onSelect)==null||i.call(r,n,(s,a=!1,o={})=>this.insertItem(s,a,o)),this.hideMentionList())}insertItem(e,n,r={}){const i=e;if(i===null||this.mentionCharPos===void 0||this.cursorPos===void 0)return;const s={...this.options,...r};s.showDenotationChar||(i.denotationChar="");let a;n?a=this.cursorPos:(a=this.mentionCharPos,this.quill.deleteText(this.mentionCharPos,this.cursorPos-this.mentionCharPos,be.sources.USER));const o=this.quill.insertEmbed(a,s.blotName??TN.DEFAULTS.blotName,i,be.sources.USER);return s.spaceAfterInsert?(this.quill.insertText(a+1," ",be.sources.USER),this.quill.setSelection(a+2,be.sources.USER)):this.quill.setSelection(a+1,be.sources.USER),this.hideMentionList(),o}onItemMouseEnter(e){var r;if(this.suspendMouseEnter||!(e.target instanceof HTMLElement))return;const n=Number((r=e.target)==null?void 0:r.dataset.index);!Number.isNaN(n)&&n!==this.itemIndex&&(this.itemIndex=n,this.highlightItem(!1))}onDisabledItemMouseEnter(){this.suspendMouseEnter||(this.itemIndex=-1,this.highlightItem(!1))}onItemClick(e){var n;e.preventDefault(),e.stopImmediatePropagation(),e.currentTarget instanceof HTMLElement&&(this.itemIndex=(n=e.currentTarget)!=null&&n.dataset.index?Number.parseInt(e.currentTarget.dataset.index):-1,this.highlightItem(),this.selectItem())}onItemMouseDown(e){e.preventDefault(),e.stopImmediatePropagation()}renderLoading(){var r,i;const e=((i=(r=this.options).renderLoading)==null?void 0:i.call(r))??void 0;if(e===void 0)return;if(this.mentionContainer.getElementsByClassName("ql-mention-loading").length>0){this.showMentionList();return}this.mentionList.innerHTML="";const n=document.createElement("div");n.className="ql-mention-loading",ET(n,e),this.mentionContainer.append(n),this.showMentionList()}removeLoading(){const e=this.mentionContainer.getElementsByClassName("ql-mention-loading");e.length>0&&e[0].remove()}renderList(e,n,r){if(n&&n.length>0){this.removeLoading(),this.values=n,this.mentionList.innerText="";let i=-1;for(let s=0;s<n.length;s+=1){const a=document.createElement("li");a.id="quill-mention-item-"+s,a.className=this.options.listItemClass?this.options.listItemClass:"",n[s].disabled?(a.className+=" disabled",a.setAttribute("aria-hidden","true")):i===-1&&(i=s),a.dataset.index=s.toString();const o=this.options.renderItem(n[s],r);ET(a,o),n[s].disabled?a.onmouseenter=this.onDisabledItemMouseEnter.bind(this):(a.onmouseenter=this.onItemMouseEnter.bind(this),a.onmouseup=this.onItemClick.bind(this),a.onmousedown=this.onItemMouseDown.bind(this)),a.dataset.denotationChar=e,this.mentionList.appendChild(tde(a,n[s],this.options.dataAttributes))}this.itemIndex=i,this.highlightItem(),this.showMentionList()}else this.hideMentionList()}nextItem(){let e=0,n,r;do if(e++,n=(this.itemIndex+e)%this.values.length,r=this.mentionList.childNodes[n].dataset.disabled==="true",e===this.values.length+1){n=-1;break}while(r);this.itemIndex=n,this.suspendMouseEnter=!0,this.highlightItem()}prevItem(){let e=0,n,r;do if(e++,n=(this.itemIndex+this.values.length-e)%this.values.length,r=this.mentionList.childNodes[n].dataset.disabled==="true",e===this.values.length+1){n=-1;break}while(r);this.itemIndex=n,this.suspendMouseEnter=!0,this.highlightItem()}containerBottomIsNotVisible(e,n){return e+this.mentionContainer.offsetHeight+n.top>window.scrollY+window.innerHeight}containerRightIsNotVisible(e,n){if(this.options.fixMentionsToQuill)return!1;const r=e+this.mentionContainer.offsetWidth+n.left,i=window.scrollX+document.documentElement.clientWidth;return r>i}setIsOpen(e){var n,r,i,s;this.isOpen!==e&&(e?(r=(n=this.options).onOpen)==null||r.call(n):(s=(i=this.options).onClose)==null||s.call(i),this.isOpen=e)}setMentionContainerPosition(){this.options.positioningStrategy==="fixed"?this.setMentionContainerPosition_Fixed():this.setMentionContainerPosition_Normal()}setMentionContainerPosition_Normal(){var a,o;if(this.mentionCharPos===void 0)return;const e=this.quill.container.getBoundingClientRect(),n=this.quill.getBounds(this.mentionCharPos);if(n===null)return;const r=this.mentionContainer.offsetHeight;let i=this.options.offsetTop,s=this.options.offsetLeft;if(this.options.fixMentionsToQuill?this.mentionContainer.style.right="0px":s+=n.left,this.containerRightIsNotVisible(s,e)){const l=this.mentionContainer.offsetWidth+this.options.offsetLeft;s=e.width-l}if(this.options.defaultMenuOrientation==="top"){if(this.options.fixMentionsToQuill?i=-1*(r+this.options.offsetTop):i=n.top-(r+this.options.offsetTop),i+e.top<=0){let l=this.options.offsetTop;this.options.fixMentionsToQuill?l+=e.height:l+=n.bottom,i=l}}else if(this.options.fixMentionsToQuill?i+=e.height:i+=n.bottom,this.containerBottomIsNotVisible(i,e)){let l=this.options.offsetTop*-1;this.options.fixMentionsToQuill||(l+=n.top),i=l-r}i>=0?(a=this.options.mentionContainerClass)==null||a.split(" ").forEach(l=>{this.mentionContainer.classList.add(`${l}-bottom`),this.mentionContainer.classList.remove(`${l}-top`)}):(o=this.options.mentionContainerClass)==null||o.split(" ").forEach(l=>{this.mentionContainer.classList.add(`${l}-top`),this.mentionContainer.classList.remove(`${l}-bottom`)}),this.mentionContainer.style.top=`${i}px`,this.mentionContainer.style.left=`${s}px`,this.mentionContainer.style.visibility="visible"}setMentionContainerPosition_Fixed(){var h,m;if(this.mentionCharPos===void 0)return;this.mentionContainer.style.position="fixed",this.mentionContainer.style.height="";const e=this.quill.container.getBoundingClientRect(),n=this.quill.getBounds(this.mentionCharPos);if(n===null)return;const r={right:e.right-n.right,left:e.left+n.left,top:e.top+n.top,width:0,height:n.height},i=this.options.fixMentionsToQuill?e:r;let s=this.options.offsetTop,a=this.options.offsetLeft;if(this.options.fixMentionsToQuill){const y=i.right;this.mentionContainer.style.right=`${y}px`}else a+=i.left,a+this.mentionContainer.offsetWidth>document.documentElement.clientWidth&&(a-=a+this.mentionContainer.offsetWidth-document.documentElement.clientWidth);const o=i.top,l=document.documentElement.clientHeight-(i.top+i.height),u=this.mentionContainer.offsetHeight<=l,d=this.mentionContainer.offsetHeight<=o;let p;this.options.defaultMenuOrientation==="top"&&d?p="top":this.options.defaultMenuOrientation==="bottom"&&u?p="bottom":p=l>o?"bottom":"top",p==="bottom"?(s=i.top+i.height,u||(this.mentionContainer.style.height=l-3+"px"),(h=this.options.mentionContainerClass)==null||h.split(" ").forEach(y=>{this.mentionContainer.classList.add(`${y}-bottom`),this.mentionContainer.classList.remove(`${y}-top`)})):(s=i.top-this.mentionContainer.offsetHeight,d||(this.mentionContainer.style.height=o-3+"px",s=3),(m=this.options.mentionContainerClass)==null||m.split(" ").forEach(y=>{this.mentionContainer.classList.add(`${y}-top`),this.mentionContainer.classList.remove(`${y}-bottom`)})),this.mentionContainer.style.top=`${s}px`,this.mentionContainer.style.left=`${a}px`,this.mentionContainer.style.visibility="visible"}getTextBeforeCursor(){const e=Math.max(0,(this.cursorPos??0)-this.options.maxChars);return this.quill.getText(e,(this.cursorPos??0)-e)}onSomethingChange(){var o,l;const e=this.quill.getSelection();if(e==null)return;this.cursorPos=e.index;const n=this.getTextBeforeCursor(),r=Math.max(0,this.cursorPos-this.options.maxChars),i=r?this.quill.getText(r-1,r):"",{mentionChar:s,mentionCharIndex:a}=nde(n,this.options.mentionDenotationChars,this.options.isolateCharacter,this.options.allowInlineMentionChar);if(s!==null&&ide(a,n,this.options.isolateCharacter,i)){const u=this.cursorPos-(n.length-a);this.mentionCharPos=u;const d=n.substring(a+s.length);if(d.length>=this.options.minChars&&rde(d,this.getAllowedCharsRegex(s))){this.existingSourceExecutionToken&&(this.existingSourceExecutionToken.abandoned=!0),this.renderLoading();const p={abandoned:!1};this.existingSourceExecutionToken=p,(l=(o=this.options).source)==null||l.call(o,d,(h,m)=>{p.abandoned||(this.existingSourceExecutionToken=void 0,this.renderList(s,h,m))},s)}else this.existingSourceExecutionToken&&(this.existingSourceExecutionToken.abandoned=!0),this.hideMentionList()}else this.existingSourceExecutionToken&&(this.existingSourceExecutionToken.abandoned=!0),this.hideMentionList()}getAllowedCharsRegex(e){var n,r;return this.options.allowedChars instanceof RegExp?this.options.allowedChars:((r=(n=this.options).allowedChars)==null?void 0:r.call(n,e))??/^[a-zA-Z0-9_]*$/}onTextChange(e,n,r){r==="user"&&setTimeout(this.onSomethingChange.bind(this),50)}onSelectionChange(e){e!==null&&e.length===0?this.onSomethingChange():this.hideMentionList()}openMenu(e){const n=this.quill.getSelection(!0);this.quill.insertText(n.index,e),this.quill.blur(),this.quill.focus()}}TN.DEFAULTS={mentionDenotationChars:["@"],showDenotationChar:!0,allowedChars:/^[a-zA-Z0-9_]*$/,minChars:0,maxChars:31,offsetTop:2,offsetLeft:0,isolateCharacter:!1,allowInlineMentionChar:!1,fixMentionsToQuill:!1,positioningStrategy:"normal",defaultMenuOrientation:"bottom",blotName:"mention",dataAttributes:["id","value","denotationChar","link","target","disabled"],linkTarget:"_blank",listItemClass:"ql-mention-list-item",mentionContainerClass:"ql-mention-list-container",mentionListClass:"ql-mention-list",spaceAfterInsert:!0,selectKeys:[oa.ENTER],source:(t,e,n)=>{e([],t)},renderItem:({value:t})=>`${t}`,onSelect:(t,e)=>e(t),onOpen:()=>!0,onBeforeClose:()=>!0,onClose:()=>!0,renderLoading:()=>null};const ade=({content:t,onUpdate:e})=>{const[n,r]=V.useState([]);V.useEffect(()=>{(async()=>{try{const l=(await ke.get("/world-bible/entities")).map(u=>{var d;return{id:u.id,value:u.nombre,link:`/${((d=u.proyecto)==null?void 0:d.id)||"p"}/bible/entity/${u.slug||u.id}`}});r(l)}catch(o){console.error("Error loading mentions:",o)}})()},[]);const i=V.useMemo(()=>({toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["blockquote","code-block"],[{color:[]},{background:[]}],["clean"]],mention:{allowedChars:/^[A-Za-z\s]*$/,mentionDenotationChars:["@"],source:function(a,o,l){let u;a.length===0?u=n:u=n.filter(d=>d.value.toLowerCase().includes(a.toLowerCase())),o(u.slice(0,20),a)},renderItem:(a,o)=>`<div class="ql-mention-list-item-content">
                    <span class="l-name">${a.value}</span>
                </div>`}}),[n]),s=a=>{e&&e(a)};return c.jsxs("div",{className:"zen-editor-container h-full flex flex-col",children:[c.jsx("style",{children:`
                /* Dark Mode Overrides for Quill */
                .ql-toolbar.ql-snow {
                    border: none;
                    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                    background: rgba(255, 255, 255, 0.02);
                }
                .ql-container.ql-snow {
                    border: none;
                    flex: 1;
                    display: flex;
                    flex-direction: column;
                }
                .ql-editor {
                    flex: 1;
                    font-family: 'Outfit', sans-serif;
                    font-size: 1.1rem;
                    color: #e2e8f0;
                    line-height: 1.8;
                    padding: 2rem;
                }
                .ql-editor.ql-blank::before {
                    color: rgba(255,255,255,0.2);
                    font-style: italic;
                }
                
                /* Toolbar Icons */
                .ql-snow .ql-stroke {
                    stroke: #94a3b8;
                }
                .ql-snow .ql-fill {
                    fill: #94a3b8;
                }
                .ql-snow .ql-picker {
                    color: #94a3b8;
                }

                /* --- Mention List Dark Mode Styles --- */
                .ql-mention-list-container {
                    background-color: #1e1e24 !important;
                    border: 1px solid rgba(255, 255, 255, 0.1) !important;
                    border-radius: 8px !important;
                    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5) !important;
                    width: 250px !important;
                    overflow: hidden !important;
                    z-index: 9999 !important;
                }

                .ql-mention-list-item {
                    padding: 8px 12px !important;
                    cursor: pointer !important;
                    transition: all 0.2s !important;
                    color: #e2e8f0 !important; /* Text color */
                    background: transparent !important;
                }

                .ql-mention-list-item.selected {
                    background-color: rgba(99, 102, 241, 0.2) !important; /* Indigo accent */
                    color: #ffffff !important;
                }

                .ql-mention-list-item:hover {
                    background-color: rgba(255, 255, 255, 0.05) !important;
                }

                /* The inserted mention chip in the editor */
                .mention {
                    background-color: rgba(99, 102, 241, 0.2);
                    color: #a5b4fc;
                    padding: 2px 6px;
                    border-radius: 4px;
                    user-select: all;
                    cursor: pointer;
                    transition: all 0.2s;
                }
                .mention:hover {
                    background-color: rgba(99, 102, 241, 0.4);
                    color: white;
                }
            `}),c.jsx(Ere,{theme:"snow",value:t||"",onChange:s,modules:i,className:"h-full flex flex-col"})]})},ode=({isOpen:t,onClose:e,onConfirm:n,title:r,message:i,confirmText:s="Confirm",cancelText:a="Cancel",isDestructive:o=!0})=>t?c.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[c.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm animate-in fade-in duration-300",onClick:e}),c.jsx("div",{className:"relative z-10 w-full max-w-md animate-in zoom-in-95 duration-300",children:c.jsxs(ft,{className:"p-6 border-red-500/20 shadow-2xl shadow-black/50",children:[c.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[c.jsx("div",{className:`
                            size-12 rounded-xl flex items-center justify-center shrink-0
                            ${o?"bg-red-500/10 text-red-500":"bg-primary/10 text-primary"}
                        `,children:c.jsx("span",{className:"material-symbols-outlined text-2xl",children:o?"warning":"help"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-black text-white mb-2 leading-tight",children:r}),c.jsx("p",{className:"text-sm text-slate-400 leading-relaxed",children:i})]})]}),c.jsxs("div",{className:"flex items-center justify-end gap-3",children:[c.jsx(Ct,{variant:"ghost",onClick:e,children:a}),c.jsx(Ct,{variant:o?"danger":"primary",onClick:()=>{n(),e()},icon:o?"delete":"check",children:s})]})]})})]}):null,rD=({isOpen:t,onClose:e,onConfirm:n,title:r,message:i,initialValue:s="",placeholder:a="",confirmText:o="Confirmar",cancelText:l="Cancelar"})=>{const[u,d]=V.useState(s),p=V.useRef(null);if(V.useEffect(()=>{d(s)},[s,t]),V.useEffect(()=>{t&&p.current&&setTimeout(()=>p.current.focus(),50)},[t]),!t)return null;const h=m=>{m.preventDefault(),n(u),e()};return qo.createPortal(c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:c.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl p-6 shadow-2xl w-full max-w-md space-y-4 animate-in zoom-in-95 duration-200 relative overflow-hidden",onClick:m=>m.stopPropagation(),children:[c.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-primary to-transparent opacity-50"}),c.jsx("h3",{className:"text-xl font-bold text-white",children:r}),i&&c.jsx("p",{className:"text-sm text-slate-400 leading-relaxed",children:i}),c.jsxs("form",{onSubmit:h,className:"space-y-4",children:[c.jsx("input",{ref:p,type:"text",value:u,onChange:m=>d(m.target.value),placeholder:a,className:"w-full bg-black/20 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:border-primary/50 focus:ring-1 focus:ring-primary/50 outline-none transition-all font-mono text-sm"}),c.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[c.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm text-slate-400 hover:text-white transition-colors",children:l}),c.jsx(Ct,{type:"submit",variant:"primary",disabled:!u.trim(),children:o})]})]})]})}),document.body)},lde=({notebooks:t,loading:e,onSelectNotebook:n,onCreateNotebook:r,onDeleteNotebook:i})=>{const[s,a]=V.useState(!1),[o,l]=V.useState(null),u=p=>{r(p)},d=()=>{o&&(i(o.id),l(null))};return c.jsxs("div",{className:"p-8 w-full h-full overflow-y-auto",children:[c.jsxs("div",{className:"max-w-7xl mx-auto",children:[c.jsxs("header",{className:"flex justify-between items-center mb-12",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-4xl font-serif text-slate-200 mb-2",children:"Your Notebooks"}),c.jsx("p",{className:"text-slate-500 font-mono text-sm",children:"Select a chronicle to begin writing"})]}),c.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl transition-all shadow-lg shadow-indigo-500/20",children:[c.jsx("span",{className:"material-symbols-outlined",children:"add"}),c.jsx("span",{className:"font-bold tracking-wide text-sm",children:"NEW NOTEBOOK"})]})]}),e?c.jsx("div",{className:"text-slate-500",children:"Loading chronicles..."}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.map(p=>c.jsxs("div",{onClick:()=>n(p),className:"group relative bg-[#050508] border border-white/10 rounded-2xl p-6 cursor-pointer hover:border-indigo-500/50 hover:shadow-2xl hover:shadow-indigo-900/10 transition-all duration-300 h-64 flex flex-col",children:[c.jsxs("div",{className:"flex-1 relative",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("div",{className:"w-12 h-12 rounded-lg bg-white/5 flex items-center justify-center text-slate-400 group-hover:bg-indigo-500/10 group-hover:text-indigo-400 transition-colors mb-6",children:c.jsx("span",{className:"material-symbols-outlined text-2xl",children:"menu_book"})}),c.jsx("button",{onClick:h=>{h.stopPropagation(),l(p)},className:"opacity-0 group-hover:opacity-100 p-2 text-slate-500 hover:text-red-500 hover:bg-red-500/10 rounded-lg transition-all",title:"Delete Notebook",children:c.jsx("span",{className:"material-symbols-outlined text-xl",children:"delete"})})]}),c.jsx("h3",{className:"text-xl font-serif text-slate-200 group-hover:text-white mb-2 line-clamp-2",children:p.titulo}),c.jsx("p",{className:"text-slate-500 text-sm line-clamp-3",children:p.descripcion||"No description"})]}),c.jsxs("div",{className:"mt-4 pt-4 border-t border-white/5 flex justify-between items-center opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("span",{className:"text-xs font-mono text-slate-500",children:"OPEN CHRONICLE"}),c.jsx("span",{className:"material-symbols-outlined text-slate-400 text-sm",children:"arrow_forward"})]})]},p.id)),c.jsxs("button",{onClick:()=>a(!0),className:"border-2 border-dashed border-white/5 rounded-2xl p-6 h-64 flex flex-col items-center justify-center gap-4 text-slate-600 hover:text-slate-400 hover:border-white/10 transition-all",children:[c.jsx("span",{className:"material-symbols-outlined text-4xl",children:"add"}),c.jsx("span",{className:"font-mono text-xs uppercase tracking-widest",children:"Create New"})]})]})]}),c.jsx(rD,{isOpen:s,onClose:()=>a(!1),onConfirm:u,title:"New Notebook",message:"Give a title to your new chronicle.",placeholder:"Ex: The Lost Kingdom",confirmText:"Create Notebook"}),c.jsx(ode,{isOpen:!!o,onClose:()=>l(null),onConfirm:d,title:"Delete Notebook?",message:`Are you sure you want to delete "${o==null?void 0:o.titulo}"? This action cannot be undone and will delete all pages inside.`,confirmText:"Delete Forever",isDestructive:!0})]})},cde=()=>{const{setRightPanelMode:t,setRightOpen:e,setRightPanelTitle:n}=Ko(),[r,i]=V.useState("dashboard"),[s,a]=V.useState(null),[o,l]=V.useState([]),[u,d]=V.useState(0),[p,h]=V.useState(!1),m=V.useRef(null),[y,x]=V.useState([]),[_,v]=V.useState(!0),[w,b]=V.useState(null);V.useEffect(()=>{t("NOTES"),N()},[]),V.useEffect(()=>{const W=setInterval(()=>{const Y=document.getElementById("architect-right-panel-portal");Y&&(b(Y),clearInterval(W))},100);return()=>clearInterval(W)},[r]);const N=async()=>{try{v(!0);const W=await ke.get("/escritura/cuadernos");x(W)}catch(W){console.error("Error loading notebooks:",W)}finally{v(!1)}},E=async W=>{try{const Y=await ke.post("/escritura/cuaderno",{titulo:W});x([...y,Y])}catch(Y){console.error(Y),alert("Error creating notebook")}},A=async W=>{try{await ke.delete(`/escritura/cuaderno/${W}`),x(y.filter(Y=>Y.id!==W))}catch(Y){console.error(Y),alert("Error deleting notebook")}},P=async W=>{a(W),await M(W.id),i("editor")},T=()=>{i("dashboard"),a(null),l([])},M=async W=>{try{const Y=await ke.get(`/escritura/cuaderno/${W}/hojas`);if(Y&&Y.length>0)l(Y),d(0);else{const H=await ke.post(`/escritura/cuaderno/${W}/hoja`,{});l([H]),d(0)}}catch(Y){console.error("Error loading pages:",Y),l([])}},k=W=>{if(!o[u])return;const Y=[...o];Y[u].contenido=W,l(Y),m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{j(Y[u])},1500)},j=async W=>{h(!0);try{await ke.put(`/escritura/hoja/${W.id}`,{contenido:W.contenido})}catch(Y){console.error("Error saving page:",Y)}finally{h(!1)}},O=async()=>{if(s)try{const W=await ke.post(`/escritura/cuaderno/${s.id}/hoja`,{});l([...o,W]),d(o.length)}catch(W){console.error("Error creating page:",W)}},q=W=>{d(W)},I=()=>c.jsxs("div",{className:"flex flex-col h-full bg-[#08080A]",children:[c.jsxs("div",{className:"h-12 border-b border-white/5 flex items-center px-4 font-mono text-[10px] uppercase tracking-widest text-slate-500 whitespace-nowrap overflow-hidden text-ellipsis",children:["Library  ",y.length," Notebooks"]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1 custom-scrollbar",children:y.map(W=>c.jsx("button",{onClick:()=>P(W),className:"w-full text-left p-3 rounded-lg border-b border-white/5 hover:bg-white/5 transition-all group",children:c.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[c.jsx("div",{className:"text-slate-500 group-hover:text-indigo-400 transition-colors",children:c.jsx("span",{className:"material-symbols-outlined text-lg",children:"book"})}),c.jsx("span",{className:"font-serif font-bold text-sm text-slate-300 group-hover:text-white truncate",children:W.titulo})]})},W.id))})]}),D=()=>c.jsxs("div",{className:"flex flex-col h-full bg-[#08080A]",children:[c.jsxs("div",{className:"h-12 border-b border-white/5 flex items-center px-4 font-mono text-[10px] uppercase tracking-widest text-slate-500 whitespace-nowrap overflow-hidden text-ellipsis",children:["Index  ",o.length," Pages"]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1 custom-scrollbar",children:o.map((W,Y)=>{var H;return c.jsxs("button",{onClick:()=>q(Y),className:`w-full text-left p-3 rounded-lg border transition-all group ${Y===u?"bg-indigo-500/10 border-indigo-500/30 text-indigo-200":"bg-transparent border-transparent hover:bg-white/5 text-slate-400"}`,children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsxs("span",{className:"font-serif font-bold text-sm truncate",children:["Page ",W.numeroPagina]}),Y===u&&c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 shrink-0 ml-2"})]}),c.jsx("p",{className:"text-[10px] line-clamp-2 opacity-50 font-mono break-words",children:((H=W.contenido)==null?void 0:H.replace(/<[^>]+>/g,"").substring(0,50))||"Empty page..."})]},W.id)})}),c.jsx("div",{className:"p-4 border-t border-white/5",children:c.jsxs("button",{onClick:O,className:"w-full py-2 bg-white/5 hover:bg-white/10 border border-white/5 rounded-lg text-[10px] font-black uppercase tracking-widest text-slate-300 flex items-center justify-center gap-2 transition-all",children:[c.jsx("span",{className:"material-symbols-outlined text-base",children:"add"}),c.jsx("span",{children:"New Page"})]})})]}),U=o[u];return r==="dashboard"?c.jsxs(c.Fragment,{children:[w&&qo.createPortal(I(),w),c.jsx(lde,{notebooks:y,loading:_,onSelectNotebook:P,onCreateNotebook:E,onDeleteNotebook:A})]}):c.jsxs("div",{className:"flex-1 flex w-full h-full bg-[#050508] relative overflow-hidden",children:[w&&qo.createPortal(D(),w),c.jsxs("div",{className:"flex-1 flex flex-col relative z-10 transition-all duration-300",children:[c.jsxs("header",{className:"h-12 border-b border-white/5 bg-surface-dark/40 backdrop-blur-md flex items-center justify-between px-6 select-none",children:[c.jsxs("div",{className:"flex items-center gap-4 text-xs font-serif text-slate-400",children:[c.jsxs("button",{onClick:T,className:"hover:text-white transition-colors flex items-center gap-1",children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"arrow_back"}),"Dashboard"]}),c.jsx("span",{className:"opacity-20",children:"|"}),c.jsx("span",{className:"text-slate-300 font-bold tracking-wide",children:s==null?void 0:s.titulo}),c.jsx("span",{className:"opacity-20",children:"|"}),c.jsx("span",{children:new Date().toLocaleDateString()})]}),c.jsxs("div",{className:"flex items-center gap-3 text-[10px] font-black uppercase tracking-widest text-slate-500",children:[c.jsx("span",{children:(s==null?void 0:s.nombreProyecto)||"Workspace"}),c.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${p?"bg-amber-500 animate-pulse":"bg-emerald-500/50"}`})]})]}),c.jsx("main",{className:"flex-1 overflow-y-auto custom-scrollbar flex justify-center bg-[#101012] relative",children:U&&c.jsxs("div",{className:"w-full max-w-3xl py-12 px-8 min-h-full flex flex-col",children:[c.jsx("input",{type:"text",placeholder:"Untitled Page",className:"w-full bg-transparent text-4xl font-serif font-bold text-slate-200 placeholder:text-slate-700 border-none outline-none mb-8 text-center",defaultValue:`Page ${U.numeroPagina}`,readOnly:!0}),c.jsx("div",{className:"flex-1 bg-white/5 border border-white/5 rounded-sm shadow-2xl shadow-black/50 overflow-hidden relative",children:c.jsx(ade,{content:U.contenido,onUpdate:k})})]})})]})]})};function ude(){const{id:t}=ri();ni();const[e,n]=V.useState([]),[r,i]=V.useState(!0),[s,a]=V.useState(null);V.useEffect(()=>{o()},[t]);const o=async()=>{try{i(!0);const d=await ke.get("/api/papelera/items");n(d),a(null)}catch(d){console.error("Error loading trash:",d),a("Failed to load trash items.")}finally{i(!1)}},l=async(d,p)=>{try{await ke.post(`/api/papelera/restaurar/${d}/${p}`),o()}catch(h){console.error("Restoration failed",h)}},u=async(d,p)=>{if(window.confirm("Are you sure you want to PERMANENTLY delete this item? This cannot be undone."))try{await ke.delete(`/api/papelera/eliminar/${d}/${p}`),o()}catch(h){console.error("Deletion failed",h)}};return r?c.jsx("div",{className:"text-white p-8",children:"Loading Trash Bin..."}):c.jsxs("div",{className:"flex flex-col h-full bg-[#09090b] text-white p-8 overflow-y-auto",children:[c.jsx("h1",{className:"text-3xl font-light mb-2 text-white/90",children:"Trash Bin"}),c.jsx("p",{className:"text-white/50 mb-8 font-light text-sm",children:"Items are automatically deleted after 30 days."}),s&&c.jsx("div",{className:"bg-red-500/10 border border-red-500/20 text-red-400 p-4 rounded mb-6",children:s}),e.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center py-20 opacity-50 border border-dashed border-white/10 rounded-xl",children:[c.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"delete_outline"}),c.jsx("p",{children:"Trash is empty"})]}):c.jsx("div",{className:"bg-zinc-900/50 rounded-xl border border-white/5 overflow-hidden",children:c.jsxs("table",{className:"w-full text-left border-collapse",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b border-white/5 text-xs text-white/40 uppercase tracking-wider",children:[c.jsx("th",{className:"p-4 font-normal",children:"Name"}),c.jsx("th",{className:"p-4 font-normal",children:"Type"}),c.jsx("th",{className:"p-4 font-normal",children:"Deleted Date"}),c.jsx("th",{className:"p-4 font-normal text-right",children:"Actions"})]})}),c.jsx("tbody",{className:"divide-y divide-white/5",children:e.map(d=>c.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[c.jsx("td",{className:"p-4 text-white/80 font-medium",children:d.nombre||"Untitled"}),c.jsx("td",{className:"p-4 text-white/50 text-sm",children:d.tipo}),c.jsx("td",{className:"p-4 text-white/50 text-sm font-mono",children:d.deleted_date?new Date(d.deleted_date).toLocaleDateString():"-"}),c.jsxs("td",{className:"p-4 text-right space-x-2",children:[c.jsx("button",{onClick:()=>l(d.tipo,d.id),className:"px-3 py-1.5 text-xs bg-emerald-500/10 text-emerald-400 hover:bg-emerald-500/20 rounded-md transition-colors border border-emerald-500/20",children:"RESTORE"}),c.jsx("button",{onClick:()=>u(d.tipo,d.id),className:"px-3 py-1.5 text-xs bg-red-500/10 text-red-400 hover:bg-red-500/20 rounded-md transition-colors border border-red-500/20",children:"DELETE"})]})]},`${d.tipo}-${d.id}`))})]})})]})}const dde=({attribute:t,value:e,onChange:n,onRemove:r,linkableEntities:i=[]})=>{const s=t.plantilla||t,a=()=>{switch(s.tipo){case"text":return c.jsx("textarea",{className:"w-full bg-transparent text-white text-sm font-medium focus:outline-none resize-none no-scrollbar h-auto min-h-[100px]",value:e||"",onChange:h=>n(h.target.value),placeholder:"..."});case"short_text":return c.jsx("input",{type:"text",className:"w-full bg-transparent text-white text-sm font-medium focus:outline-none",value:e||"",onChange:h=>n(h.target.value),placeholder:"..."});case"number":return c.jsx("input",{type:"number",className:"w-full bg-transparent text-white text-sm font-medium focus:outline-none",value:e||"",onChange:h=>n(h.target.value)});case"boolean":return c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>n(e==="true"?"false":"true"),className:`size-6 rounded-lg border flex items-center justify-center transition-all ${e==="true"?"bg-primary border-primary text-white":"border-glass-border text-transparent hover:border-primary/50"}`,children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:"check"})}),c.jsx("span",{className:"text-xs text-text-muted",children:e==="true"?"Enabled":"Disabled"})]});case"select":let o=[];try{o=(typeof s.metadata=="string"?JSON.parse(s.metadata||"{}"):s.metadata||{}).options||[]}catch{}return c.jsxs("div",{className:"relative",children:[c.jsxs("select",{className:"w-full bg-black/30 border border-white/5 rounded-xl px-4 py-2.5 text-sm text-white focus:outline-none focus:border-primary/50 appearance-none cursor-pointer",value:e||"",onChange:h=>n(h.target.value),children:[c.jsx("option",{value:"",children:"Select an option..."}),o.map((h,m)=>c.jsx("option",{value:h,className:"bg-surface-dark text-white p-2",children:h},m))]}),c.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-white/50",children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:"unfold_more"})})]});case"multi_select":let l=[];try{l=(typeof s.metadata=="string"?JSON.parse(s.metadata||"{}"):s.metadata||{}).options||[]}catch{}let u=[];try{u=e?JSON.parse(e):[],Array.isArray(u)||(u=[])}catch(h){console.error("Error parsing select values",h)}const d=h=>{const m=u.includes(h)?u.filter(y=>y!==h):[...u,h];n(JSON.stringify(m))};return c.jsxs("div",{className:"bg-black/20 border border-white/5 rounded-xl p-2 space-y-1 max-h-40 overflow-y-auto custom-scrollbar",children:[l.map((h,m)=>c.jsxs("label",{onClick:y=>{y.preventDefault(),d(h)},className:"flex items-center gap-3 p-2 hover:bg-white/5 rounded-lg cursor-pointer group transition-colors",children:[c.jsx("div",{className:`size-4 rounded border flex items-center justify-center transition-all ${u.includes(h)?"bg-primary border-primary":"border-white/10 group-hover:border-white/30"}`,children:u.includes(h)&&c.jsx("span",{className:"material-symbols-outlined text-[10px] text-white",children:"check"})}),c.jsx("span",{className:`text-xs font-medium ${u.includes(h)?"text-white":"text-slate-400 group-hover:text-slate-200"}`,children:h})]},m)),l.length===0&&c.jsx("div",{className:"text-xs text-slate-500 p-2 italic",children:"No options defined."})]});case"date":return c.jsx("input",{type:"date",className:"w-full bg-transparent text-white text-sm font-medium focus:outline-none [color-scheme:dark]",value:e||"",onChange:h=>n(h.target.value)});case"entity_link":return c.jsxs("div",{className:"relative",children:[c.jsxs("select",{className:"w-full bg-black/30 border border-white/5 rounded-xl px-4 py-2.5 text-sm text-white focus:outline-none focus:border-primary/50 appearance-none cursor-pointer",value:e||"",onChange:h=>n(h.target.value),children:[c.jsx("option",{value:"",children:"Select an Entity Link..."}),i.map(h=>c.jsx("option",{value:h.id,className:"bg-surface-dark text-white p-2",children:h.nombre},h.id))]}),c.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-white/50",children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:"link"})})]});case"image":return c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"flex gap-2",children:c.jsx("input",{type:"text",className:"flex-1 bg-black/30 border border-white/5 rounded-xl px-4 py-2 text-xs text-text-muted focus:text-white focus:outline-none",placeholder:"Image URL...",value:e||"",onChange:h=>n(h.target.value)})}),e&&c.jsx("div",{className:"w-full aspect-video rounded-xl bg-black/40 border border-white/5 overflow-hidden relative group",children:c.jsx("img",{src:e,alt:"Preview",className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity"})}),!e&&c.jsx("div",{className:"w-full h-20 rounded-xl bg-white/5 border border-dashed border-white/10 flex items-center justify-center text-text-muted/30",children:c.jsx("span",{className:"material-symbols-outlined",children:"image"})})]});case"table":const p=e||"[]";return c.jsxs("div",{className:"space-y-2",children:[c.jsx("textarea",{className:"w-full h-32 bg-black/30 border border-white/5 rounded-xl p-3 text-xs font-mono text-white/70 focus:outline-none focus:border-primary/50",value:p,onChange:h=>n(h.target.value),placeholder:'[{"Item": "Sword", "Qty": 1}, ...]'}),c.jsxs("div",{className:"text-[10px] text-text-muted flex justify-between",children:[c.jsx("span",{children:"JSON Format supported"}),c.jsx("span",{className:"material-symbols-outlined text-xs",children:"data_array"})]})]});default:return c.jsxs("div",{className:"text-sm font-medium text-white/70 italic p-2 rounded-lg bg-white/5 border border-white/5",children:[c.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-500 mr-2",children:s.tipo}),e]})}};return c.jsxs("div",{className:"p-4 border border-white/5 rounded-2xl bg-surface-dark/50 backdrop-blur-sm relative overflow-hidden h-full flex flex-col group hover:border-primary/20 transition-all",children:[c.jsxs("label",{className:"text-[10px] font-black uppercase tracking-widest text-text-muted mb-3 flex items-center justify-between gap-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"material-symbols-outlined text-xs opacity-50",children:"label"}),s.nombre]}),r&&c.jsx("button",{onClick:o=>{o.preventDefault(),r()},className:"text-white/20 hover:text-red-400 transition-colors",title:"Remove Attribute",children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:"close"})})]}),c.jsx("div",{className:"flex-1 nodrag",children:a()}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"})]})},fde=[{value:"entidadIndividual",label:"Character"},{value:"entidadColectiva",label:"Group"},{value:"zona",label:"Location"},{value:"construccion",label:"Building"},{value:"efectos",label:"Effect"},{value:"interaccion",label:"Interaction"},{value:"lineatiempo",label:"Timeline"},{value:"eventotiempo",label:"Event"},{value:"mapa",label:"Map"}],hde=({entityId:t,entityType:e})=>{const[n,r]=V.useState([]),[i,s]=V.useState(!1),[a,o]=V.useState(!1),[l,u]=V.useState("entidadIndividual"),[d,p]=V.useState([]),[h,m]=V.useState(""),[y,x]=V.useState(""),[_,v]=V.useState(""),[w,b]=V.useState(!1);V.useEffect(()=>{t&&N()},[t,e]),V.useEffect(()=>{a&&l&&E(l)},[a,l]);const N=async()=>{s(!0);try{const k=(await ke.get("/bd/relacion")).filter(O=>O.nodoOrigenId===parseInt(t)&&O.tipoOrigen===e||O.nodoDestinoId===parseInt(t)&&O.tipoDestino===e),j=await Promise.all(k.map(async O=>{const q=O.nodoOrigenId===parseInt(t),I=q?O.nodoDestinoId:O.nodoOrigenId,D=q?O.tipoDestino:O.tipoOrigen;try{const U=await ke.get(`/bd/${D}/${I}`);return{...O,otherName:U.nombre,otherType:D,isOutgoing:q}}catch{return{...O,otherName:"Unknown/Deleted",otherType:D,isOutgoing:q}}}));r(j)}catch(M){console.error("Failed to load relationships",M)}finally{s(!1)}},E=async M=>{b(!0);try{const k=await ke.get(`/bd/${M}`);p(k||[])}catch(k){console.error("Failed to fetch targets",k),p([])}finally{b(!1)}},A=async()=>{if(!(!h||!y))try{const M={nodoOrigenId:parseInt(t),tipoOrigen:e,nodoDestinoId:parseInt(h),tipoDestino:l,tipoRelacion:y,descripcion:_,tipoEntidad:"relacion"};await ke.put("/bd/insertar",M),o(!1),T(),N()}catch(M){console.error("Failed to save relationship",M),alert("Error saving relationship")}},P=async M=>{if(confirm("Are you sure?"))try{await ke.delete(`/bd/relacion/${M}`),N()}catch(k){console.error("Failed to delete",k)}},T=()=>{u("entidadIndividual"),m(""),x(""),v("")};return c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsxs("header",{className:"flex justify-between items-center",children:[c.jsx("h3",{className:"text-lg font-bold text-white uppercase tracking-widest",children:"Relationships"}),c.jsx(Ct,{variant:"secondary",icon:"add_link",onClick:()=>o(!a),children:a?"Cancel":"Connect"})]}),a&&c.jsxs("div",{className:"p-4 rounded-2xl bg-white/5 border border-white/10 space-y-4 animate-in fade-in slide-in-from-top-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-500",children:"Target Type"}),c.jsx("select",{className:"w-full bg-black/40 border border-white/10 rounded-xl p-2 text-sm text-white outline-none focus:border-primary",value:l,onChange:M=>u(M.target.value),children:fde.map(M=>c.jsx("option",{value:M.value,children:M.label},M.value))})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-500",children:"Target Entity"}),c.jsxs("select",{className:"w-full bg-black/40 border border-white/10 rounded-xl p-2 text-sm text-white outline-none focus:border-primary",value:h,onChange:M=>m(M.target.value),disabled:w,children:[c.jsx("option",{value:"",children:"Select Target..."}),d.map(M=>c.jsx("option",{value:M.id,children:M.nombre},M.id))]})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-500",children:"Relationship Type"}),c.jsx("input",{type:"text",placeholder:"e.g. Father of, Located in, Enemy of...",className:"w-full bg-black/40 border border-white/10 rounded-xl p-2 text-sm text-white outline-none focus:border-primary",value:y,onChange:M=>x(M.target.value)})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-500",children:"Description (The Why)"}),c.jsx("textarea",{placeholder:"Explain the nature of this connection...",className:"w-full bg-black/40 border border-white/10 rounded-xl p-2 text-sm text-white outline-none focus:border-primary h-20 resize-none",value:_,onChange:M=>v(M.target.value)})]}),c.jsx("div",{className:"flex justify-end pt-2",children:c.jsx(Ct,{variant:"primary",icon:"save",onClick:A,disabled:!h||!y,children:"Save Connection"})})]}),c.jsx("div",{className:"space-y-3",children:i?c.jsx("div",{className:"text-center text-slate-500 py-8",children:"Scanning connections..."}):n.length===0?c.jsx("div",{className:"text-center text-slate-500 py-8 italic border border-dashed border-white/10 rounded-2xl",children:"No connections established"}):n.map((M,k)=>c.jsxs("div",{className:"group relative p-4 rounded-2xl bg-surface-dark border border-white/5 hover:border-primary/50 transition-all flex items-start gap-4",children:[c.jsx("div",{className:"mt-1",children:c.jsx("span",{className:"material-symbols-outlined text-slate-500",children:M.isOutgoing?"arrow_outward":"arrow_inward"})}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:M.isOutgoing?"To:":"From:"}),c.jsx("span",{className:"text-sm font-bold text-white",children:M.otherName}),c.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded bg-white/10 text-slate-400 font-bold uppercase tracking-wider",children:M.otherType})]}),c.jsx("div",{className:"text-primary text-xs font-black uppercase tracking-widest mb-2",children:M.tipoRelacion}),M.descripcion&&c.jsxs("p",{className:"text-xs text-slate-400 leading-relaxed bg-black/20 p-2 rounded-lg border border-white/5",children:['"',M.descripcion,'"']})]}),c.jsx("button",{onClick:()=>P(M.id),className:"opacity-0 group-hover:opacity-100 p-2 text-slate-600 hover:text-red-400 transition-all",children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]},M.id||k))})]})},ef=({mode:t})=>{const{username:e,projectName:n,entitySlug:r,folderSlug:i,type:s}=ri(),a=ni(),o=t==="creation",{setRightOpen:l,setAvailableTemplates:u,setRightPanelMode:d,setAddAttributeHandler:p,setEntityTabs:h,activeEntityTab:m,setActiveEntityTab:y}=Ko(),[x,_]=V.useState({nombre:"",tipo:"entidadindividual",descripcion:"",color:"#6366f1",apariencia:"",notas:"",iconUrl:null,tipoEspecial:s||null,carpeta:null,categoria:"Individual"}),[v,w]=V.useState([]),[b,N]=V.useState(!0),[E,A]=V.useState(!1),[P,T]=V.useState([]),[M,k]=V.useState([]),[j,O]=V.useState(!1);V.useEffect(()=>(l(!0),d("ENTITY"),h(["identity","narrative","attributes"]),y("identity"),()=>{d("NOTES"),h([])}),[]),V.useEffect(()=>{o?I():D()},[r,i,o]);const q=L=>{u(L),k(L),p(z=>{const K=L.find(J=>J.id===z);K&&w(J=>[...J,{id:`temp-${K.id}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,attribute:K,value:K.valorDefecto||"",isTemp:!0}])})},I=async()=>{N(!0);try{const L=await ke.get(`/world-bible/folders/${i}`),z=await ke.get(`/world-bible/folders/${i}/templates`);q(z),_(J=>({...J,nombre:`Nuevo ${s==="map"?"Mapa":s==="timeline"?"Cronograma":"Ente"}`,carpeta:L,tipoEspecial:s||"entidadindividual",tipo:s||"entidadindividual"}));const K=z.filter(J=>J.esObligatorio).map(J=>({id:`temp-${J.id}-${Math.random().toString(36).substr(2,9)}`,attribute:J,value:J.valorDefecto||"",isTemp:!0}));w(K)}catch(L){console.error("Error creating draft:",L)}finally{N(!1)}},D=async()=>{var L;N(!0);try{const z=await ke.get(`/world-bible/entities/${r}`);if(_({...z,apariencia:z.apariencia||"",notas:z.notas||"",iconUrl:z.iconUrl||null,tags:z.tags||"",tipo:z.tipoEspecial||getHierarchyType(z.tipo).id,color:z.color||"#6366f1",categoria:z.categoria||"Individual"}),(L=z.carpeta)!=null&&L.id){const J=await ke.get(`/world-bible/folders/${z.carpeta.id}/templates`);q(J)}const K=(z.valores||[]).filter(J=>J.plantilla).map(J=>({id:J.id.toString(),attribute:J.plantilla,value:J.valor,isTemp:!1}));w(K)}catch(z){console.error("Error loading entity:",z)}finally{N(!1)}},U=(L,z)=>{_(K=>({...K,[L]:z}))},W=L=>{const z=L.target.files[0];if(z){const K=new FileReader;K.onloadend=()=>{U("iconUrl",K.result)},K.readAsDataURL(z)}},Y=(L,z)=>{w(K=>K.map(J=>J.id===L?{...J,value:z}:J))},H=L=>{L.toString().startsWith("temp-")||T(z=>[...z,L]),w(z=>z.filter(K=>K.id!==L))},B=async(L=!0)=>{A(!0);try{const z={nombre:x.nombre,descripcion:x.descripcion,tags:x.tags,apariencia:x.apariencia,notas:x.notas,iconUrl:x.iconUrl,tipoEspecial:x.tipoEspecial||"entidadindividual",color:x.color,categoria:x.categoria};let K=x.id;if(o){if(!x.carpeta||!x.carpeta.id){alert("Error: No folder selected or folder not found."),A(!1);return}z.carpetaId=x.carpeta.id;const G=await ke.post("/world-bible/entities",z);K=G.id;const te=[...v];for(let re=0;re<te.length;re++){const Q=te[re];if(Q.isTemp){const se=await ke.post(`/world-bible/entities/${G.id}/attributes`,{plantillaId:Q.attribute.id});await ke.patch(`/world-bible/entities/${G.id}/values`,[{valorId:se.id,nuevoValor:Q.value}]),te[re]={...Q,id:se.id.toString(),isTemp:!1}}}w(te),A(!1),L?a(`/${e}/${n}/bible/folder/${i}`):a(`/${e}/${n}/bible/folder/${i}/entity/${G.slug||G.id}`,{replace:!0});return}await ke.put(`/world-bible/entities/${K}`,{nombre:z.nombre,color:z.color,iconUrl:z.iconUrl}),await ke.patch(`/world-bible/entities/${K}/details`,{descripcion:z.descripcion,tags:z.tags,apariencia:z.apariencia,notas:z.notas,iconUrl:z.iconUrl}),P.length>0&&(await Promise.all(P.map(G=>ke.delete(`/world-bible/values/${G}`))),T([]));const J=v.filter(G=>!G.isTemp).map(G=>({valorId:parseInt(G.id),nuevoValor:G.value}));J.length>0&&await ke.patch(`/world-bible/entities/${K}/values`,J);let ne=!1;const X=[...v];console.log("Saving fields...",v);for(let G=0;G<X.length;G++){const te=X[G];if(te.isTemp){console.log("Processing temp field:",te);try{const re=await ke.post(`/world-bible/entities/${K}/attributes`,{plantillaId:te.attribute.id});console.log("Created attribute value:",re),await ke.patch(`/world-bible/entities/${K}/values`,[{valorId:re.id,nuevoValor:te.value}]),X[G]={...te,id:re.id.toString(),isTemp:!1},ne=!0}catch(re){console.error("Error saving field:",te,re)}}}ne&&w(X),A(!1)}catch(z){console.error("Save error",z),A(!1)}};return b?c.jsx("div",{className:"p-20 text-center animate-pulse",children:"Loading Builder..."}):c.jsx("div",{className:"flex h-full w-full bg-background-dark overflow-hidden",children:c.jsxs("div",{className:"flex-1 flex flex-col min-w-0 overflow-y-auto custom-scrollbar relative",children:[c.jsxs("div",{className:"border-b border-white/5 p-4 flex justify-between items-center bg-background-dark/80 backdrop-blur sticky top-0 z-30",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(Jf,{url:x.iconUrl,name:x.nombre,className:"size-10 rounded-lg border border-white/10"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-lg font-bold text-white leading-tight",children:x.nombre||"Sin Nombre"}),c.jsx("span",{className:"text-[10px] uppercase font-black tracking-widest text-slate-500",children:o?"Creando Nueva Entidad":"Editando Entidad"})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>a(`/${e}/${n}/bible/folder/${i}`),className:"px-4 py-2 rounded-xl text-slate-400 hover:text-white hover:bg-white/5 text-xs font-bold uppercase tracking-widest transition-all",children:"Cancelar"}),c.jsxs("div",{className:"flex bg-white/5 rounded-xl p-1 gap-1 border border-white/10",children:[c.jsxs("button",{onClick:()=>B(!0),disabled:E,className:"h-9 px-4 rounded-lg bg-primary hover:bg-primary-light text-white text-[10px] font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[E?c.jsx("span",{className:"material-symbols-outlined animate-spin text-sm",children:"refresh"}):c.jsx("span",{className:"material-symbols-outlined text-sm",children:"save"}),"Guardar"]}),c.jsx("div",{className:"w-px bg-white/10 my-1"}),c.jsx("button",{onClick:()=>B(!1),disabled:E,className:"h-9 px-3 rounded-lg bg-transparent hover:bg-white/10 text-white transition-all flex items-center justify-center disabled:opacity-50",title:"Guardar y Seguir Editando",children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit_document"})})]})]})]}),c.jsxs("div",{className:"p-8 pb-32 max-w-5xl mx-auto w-full",children:[m==="identity"&&c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[c.jsxs(ft,{className:`p-6 space-y-6 ${x.tipoEspecial==="map"?"lg:col-span-2":""}`,children:[c.jsxs("h3",{className:"text-xs font-black uppercase tracking-widest text-primary flex items-center gap-2 mb-6",children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"badge"})," Identity"]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500 mb-1 block",children:"Full Name"}),c.jsx("input",{value:x.nombre,onChange:L=>U("nombre",L.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl p-3 text-sm text-white focus:border-primary/50 outline-none transition-colors",placeholder:"E.g. King Alaric"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500 mb-1 block",children:"Entity Type / Category"}),c.jsxs("select",{value:x.categoria||"Individual",onChange:L=>U("categoria",L.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl p-3 text-sm text-white focus:border-primary/50 outline-none transition-colors appearance-none",children:[c.jsx("option",{value:"Individual",children:"Individual (Character/Person)"}),c.jsx("option",{value:"Group",children:"Group / Faction"}),c.jsx("option",{value:"Location",children:"Location"}),c.jsx("option",{value:"Event",children:"Event"}),c.jsx("option",{value:"Object",children:"Object / Item"}),c.jsx("option",{value:"Concept",children:"Concept / Magic"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500 mb-1 block",children:"Tags (comma separated)"}),c.jsx("input",{value:x.tags,onChange:L=>U("tags",L.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl p-3 text-sm text-slate-300 focus:border-primary/50 outline-none transition-colors",placeholder:"Warrior, Leader, Human..."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500 mb-1 block",children:"Icon / Portrait"}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(Jf,{url:x.iconUrl,name:x.nombre,size:"lg",className:"rounded-xl"}),c.jsxs("label",{className:"cursor-pointer px-4 py-2 bg-white/5 hover:bg-white/10 rounded-lg border border-white/10 text-xs font-bold text-slate-300 transition-colors",children:["Upload Image",c.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:W})]}),x.iconUrl&&c.jsx("button",{onClick:()=>U("iconUrl",""),className:"p-2 hover:text-red-400 transition-colors",children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]})]})]})]}),x.tipoEspecial!=="map"&&c.jsxs(ft,{className:"p-6 space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("h3",{className:"text-xs font-black uppercase tracking-widest text-primary flex items-center gap-2",children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"palette"})," Appearance"]}),c.jsx("div",{className:"flex gap-2",children:c.jsxs("label",{className:"cursor-pointer text-[10px] font-bold uppercase tracking-wider text-slate-500 hover:text-white transition-colors flex items-center gap-1",children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"add_photo_alternate"}),"Insert Image",c.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:L=>{const z=L.target.files[0];if(z){const K=new FileReader;K.onloadend=()=>{const J=`

![${z.name}](${K.result})
`;U("apariencia",(x.apariencia||"")+J)},K.readAsDataURL(z)}}})]})})]}),c.jsx("textarea",{value:x.apariencia,onChange:L=>U("apariencia",L.target.value),className:"w-full h-80 bg-black/30 border border-white/10 rounded-xl p-4 text-sm text-slate-300 leading-relaxed focus:border-primary/50 outline-none transition-colors custom-scrollbar font-mono",placeholder:"Describe their physical appearance, clothing, distinct marks... (Markdown Supported)"})]}),x.tipoEspecial==="map"?c.jsxs(ft,{className:"p-6 lg:col-span-2 space-y-6",children:[c.jsxs("h3",{className:"text-xs font-black uppercase tracking-widest text-primary flex items-center gap-2 mb-6",children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"map"})," Cartography"]}),c.jsx("div",{onClick:()=>{let L=x.iconUrl;try{const z=JSON.parse(x.descripcion||"{}");z.snapshotUrl&&(L=z.snapshotUrl)}catch{}O(!0)},className:"w-full aspect-[21/9] bg-black/30 border border-white/10 rounded-xl overflow-hidden cursor-pointer group relative",children:(()=>{let L=x.iconUrl;try{const z=JSON.parse(x.descripcion||"{}");z.snapshotUrl&&(L=z.snapshotUrl)}catch{}return L?c.jsxs(c.Fragment,{children:[c.jsx("img",{src:L,alt:"Map Preview",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}),c.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:c.jsx("span",{className:"material-symbols-outlined text-white text-3xl",children:"zoom_in"})})]}):c.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-500 text-xs italic",children:"No map preview available"})})()}),c.jsx("div",{className:"flex justify-end",children:c.jsx(Ct,{variant:"secondary",size:"sm",icon:"edit",onClick:()=>window.open(`/${e}/${n}/map-editor/edit/${x.id}`,"_self"),children:"Open Editor"})})]}):c.jsxs(ft,{className:"p-6 lg:col-span-2",children:[c.jsxs("h3",{className:"text-xs font-black uppercase tracking-widest text-primary flex items-center gap-2 mb-6",children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"sticky_note_2"})," Quick Notes"]}),c.jsx("textarea",{className:"w-full h-40 bg-black/30 border border-white/10 rounded-xl p-4 text-sm text-slate-300 leading-relaxed resize-none focus:border-primary/50 outline-none transition-colors custom-scrollbar font-mono placeholder:text-slate-600",placeholder:"Quick notes about this entity...",value:x.notas||"",onChange:L=>U("notas",L.target.value)})]})]}),m==="narrative"&&c.jsxs("div",{className:"animate-in fade-in duration-500 space-y-8",children:[c.jsxs(ft,{className:"min-h-[40vh] flex flex-col p-8",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("h3",{className:"text-xs font-black uppercase tracking-widest text-primary flex items-center gap-2",children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"history_edu"})," Biography"]}),c.jsx("span",{className:"text-[10px] text-slate-500 bg-white/5 px-2 py-1 rounded",children:"Markdown Supported"})]}),c.jsx("textarea",{className:"flex-1 w-full bg-transparent border-none outline-none text-slate-300 leading-relaxed resize-none focus:ring-0 placeholder:text-slate-600 custom-scrollbar text-base min-h-[300px]",placeholder:"Write the origin story...",value:x.descripcion||"",onChange:L=>U("descripcion",L.target.value)})]}),c.jsxs(ft,{className:"min-h-[40vh]",children:[c.jsxs("h3",{className:"text-xs font-black uppercase tracking-widest text-primary p-6 pb-0 flex items-center gap-2",children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"hub"})," Relationships"]}),o?c.jsxs("div",{className:"p-12 text-center text-slate-500",children:[c.jsx("span",{className:"material-symbols-outlined text-4xl mb-4",children:"save_as"}),c.jsx("p",{className:"text-sm font-bold",children:"Please save the entity first to manage relationships."})]}):c.jsx(hde,{entityId:x.id,entityType:x.tipo||"entidadindividual"})]})]}),m==="attributes"&&c.jsxs("div",{className:`animate-in fade-in duration-500 space-y-6 min-h-[50vh] transition-colors rounded-2xl p-4 ${window.isDraggingOver?"bg-primary/10 border-2 border-dashed border-primary":""}`,onDragOver:L=>{L.preventDefault(),L.dataTransfer.dropEffect="copy",L.currentTarget.classList.add("bg-primary/10","border-primary","border-dashed","border-2")},onDragLeave:L=>{L.preventDefault(),L.currentTarget.classList.remove("bg-primary/10","border-primary","border-dashed","border-2")},onDrop:L=>{if(L.preventDefault(),L.currentTarget.classList.remove("bg-primary/10","border-primary","border-dashed","border-2"),L.dataTransfer.getData("application/reactflow/type")!=="attribute")return;let K=null;try{const J=L.dataTransfer.getData("templateData");if(J)K=JSON.parse(J);else{const ne=parseInt(L.dataTransfer.getData("templateId"));K=M.find(X=>X.id===ne)}}catch(J){console.error("Drop error",J)}K&&w(J=>[...J,{id:`temp-${K.id}-${Date.now()}`,attribute:K,value:K.valorDefecto||"",isTemp:!0}])},children:[c.jsxs("h3",{className:"text-xs font-black uppercase tracking-widest text-primary border-b border-white/5 pb-4 flex items-center justify-between",children:[c.jsx("span",{children:"Atributos especiales"}),c.jsx("span",{className:"text-[10px] text-slate-500 font-normal normal-case opacity-50 hidden md:block",children:"Arraste atributos desde el panel derecho"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border-2 border-dashed border-white/5 rounded-2xl hover:border-primary/20 transition-colors bg-white/[0.01]",children:[v.length===0&&c.jsxs("div",{className:"col-span-full py-12 text-center text-slate-500 text-sm pointer-events-none",children:[c.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 opacity-50",children:"drag_indicator"}),c.jsx("p",{children:"Arrastra plantillas aqu para aadir atributos"})]}),v.filter(L=>L.attribute).map(L=>c.jsx(dde,{attribute:L.attribute,value:L.value,onChange:z=>Y(L.id,z),onRemove:()=>H(L.id)},L.id))]})]})]}),j&&x.iconUrl&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>O(!1),children:c.jsxs("div",{className:"relative max-w-[90vw] max-h-[90vh] p-2",children:[c.jsx("button",{onClick:()=>O(!1),className:"absolute -top-12 right-0 p-2 text-white hover:text-primary transition-colors",children:c.jsx("span",{className:"material-symbols-outlined text-3xl",children:"close"})}),c.jsx("img",{src:x.iconUrl,alt:x.nombre,className:"max-w-full max-h-[85vh] object-contain rounded-lg shadow-2xl border border-white/10",onClick:L=>L.stopPropagation()})]})})]})})},pde=t=>{switch(t==null?void 0:t.toLowerCase()){case"text":return"notes";case"short_text":return"short_text";case"number":return"pin";case"date":return"calendar_today";case"select":return"list";case"boolean":return"check_box";case"map":return"map";case"timeline":return"timeline";case"character":case"entidadindividual":return"person";case"location":case"zona":case"construccion":return"location_on";case"culture":case"entidadcolectiva":return"groups";case"universe":case"galaxy":case"system":case"planet":return"public";case"entity_link":return"link";default:return"description"}},s3=({item:t,type:e,linkTo:n,onContextMenu:r,onDelete:i})=>{const s=e==="folder";return c.jsxs(Yl,{to:n,onContextMenu:r,className:"group relative flex flex-col p-4 rounded-3xl bg-surface-dark border border-glass-border hover:border-primary/50 hover:bg-white/5 transition-all duration-300 backdrop-blur-sm overflow-hidden",children:[t.iconUrl&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"absolute inset-0 z-0",children:c.jsx("img",{src:t.iconUrl,alt:"",className:"w-full h-full object-cover opacity-60 group-hover:scale-105 transition-transform duration-700"})}),c.jsx("div",{className:"absolute inset-0 z-0 bg-gradient-to-t from-[#0a0a0c] via-[#0a0a0c]/80 to-transparent"})]}),c.jsxs("div",{className:"relative z-10 flex items-start justify-between mb-4",children:[c.jsx("div",{className:`
                    size-12 rounded-2xl flex items-center justify-center text-xl transition-transform group-hover:scale-110 
                    ${s?"bg-primary/20 text-primary":"bg-white/5 text-text-muted group-hover:text-white backdrop-blur-md border border-white/5"}
                `,children:c.jsx("span",{className:"material-symbols-outlined",children:s?"folder":pde(t.tipoEspecial)})}),s&&c.jsx("div",{className:"px-2 py-1 rounded-lg bg-surface-light/50 border border-glass-border text-[10px] font-black text-white shadow-sm backdrop-blur-md",children:t.itemCount||0})]}),c.jsxs("div",{className:"relative z-10 mt-auto",children:[c.jsx("h3",{className:"text-sm font-bold text-white truncate group-hover:text-primary transition-colors drop-shadow-md",children:t.nombre}),c.jsx("p",{className:"text-[10px] font-bold uppercase tracking-widest text-text-muted mt-1 opacity-70 group-hover:opacity-100 transition-opacity",children:s?"Folder":t.tipoEspecial||"Entity"})]}),c.jsxs("div",{className:"absolute top-4 right-4 z-20 flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[i&&c.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),i(t)},className:"p-1.5 rounded-lg bg-red-500/10 hover:bg-red-500 text-red-500 hover:text-white transition-all border border-red-500/20 shadow-lg shadow-red-500/5 group/del backdrop-blur-md",children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})}),c.jsx("span",{className:"material-symbols-outlined text-primary text-sm transform group-hover:translate-x-1 transition-transform drop-shadow-md",children:"arrow_forward"})]})]})},mde=({path:t,currentFolder:e})=>{const{username:n,projectName:r}=ri(),i=`/${n}/${r}/bible`;return!t&&!e?null:c.jsxs("nav",{className:"flex items-center gap-2 text-[10px] uppercase font-bold tracking-wider text-slate-500 mb-4 overflow-x-auto no-scrollbar whitespace-nowrap",children:[c.jsxs(Yl,{to:i,className:"hover:text-primary transition-colors flex items-center gap-1",children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"home"}),"Bible"]}),t&&t.map((s,a)=>c.jsxs(fe.Fragment,{children:[c.jsx("span",{className:"text-slate-700",children:"/"}),c.jsx(Yl,{to:`${i}/folder/${s.slug||s.id}`,className:"hover:text-primary transition-colors",children:s.nombre})]},s.id)),e&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"text-slate-700",children:"/"}),c.jsx("span",{className:"text-white bg-white/5 px-2 py-0.5 rounded",children:e.nombre})]})]})},Bl={UNIVERSE:{id:"UNIVERSE",label:"Universo / Multiverso",description:"Contenedor supremo de realidades.",icon:"public",color:"text-purple-400",bgColor:"bg-purple-900/20"},GALAXY:{id:"GALAXY",label:"Galaxia",description:"Agrupacin masiva de sistemas estelares.",icon:"auto_awesome",color:"text-indigo-400",bgColor:"bg-indigo-900/20"},SYSTEM:{id:"SYSTEM",label:"Sistema Solar",description:"Estrella central y sus cuerpos orbitales.",icon:"wb_sunny",color:"text-yellow-400",bgColor:"bg-yellow-900/20"},PLANET:{id:"PLANET",label:"Planeta / Mundo",description:"Cuerpo celeste o plano de existencia principal.",icon:"public",color:"text-emerald-400",bgColor:"bg-emerald-900/20"},GEOGRAPHY:{id:"GEOGRAPHY",label:"Geografa",icon:"map",color:"text-green-300"},ENTITIES:{id:"ENTITIES",label:"Entidades",icon:"groups",color:"text-blue-300"},MAGIC:{id:"MAGIC",label:"Magia",icon:"auto_fix_high",color:"text-pink-300"},TIMELINE:{id:"TIMELINE",label:"Cronologa",icon:"history",color:"text-orange-300"},FACTIONS:{id:"FACTIONS",label:"Facciones",icon:"security",color:"text-red-300"},ITEMS:{id:"ITEMS",label:"Objetos",icon:"inventory_2",color:"text-gray-300"},FOLDER:{id:"FOLDER",label:"Carpeta",icon:"folder",color:"text-gray-400"}},a3=t=>Bl[t]||Bl.FOLDER,gde=()=>{const{username:t,projectName:e,folderSlug:n}=ri(),r=ni(),{handleCreateEntity:i,handleDeleteEntity:s,handleCreateSimpleFolder:a,folderSearchTerm:o,folderFilterType:l}=Ko(),[u,d]=V.useState([]),[p,h]=V.useState(null),[m,y]=V.useState([]),[x,_]=V.useState(!0),v=u.filter(E=>{const A=E.nombre.toLowerCase().includes(o.toLowerCase()),P=l==="ALL"||l==="MAP"&&E.tipoEspecial==="map"||l==="TIMELINE"&&E.tipoEspecial==="timeline"||l==="ENTITY"&&(!E.tipoEspecial||E.tipoEspecial==="entidadindividual");return A&&P});V.useEffect(()=>{const E=A=>{const{folderId:P,removeId:T,type:M,item:k,expand:j}=A.detail||{};P===((p==null?void 0:p.id)||n)&&(T?d(O=>O.filter(q=>q.id!==T)):k&&k.slug&&k.slug!==n?r(`/${t}/${e}/bible/folder/${k.slug}`,{replace:!0}):w())};return window.addEventListener("folder-update",E),()=>window.removeEventListener("folder-update",E)},[n,p==null?void 0:p.id]),V.useEffect(()=>{w()},[n]);const w=async()=>{_(!0);try{const[E,A]=await Promise.all([ke.get(`/world-bible/folders/${n}/entities`),ke.get(`/world-bible/folders/${n}`)]);d(E),A.folder?(h(A.folder),y(A.path||[])):(h(A||{name:"Folder"}),y([]))}catch(E){console.error("Error loading folder content:",E),h(null),y([])}finally{_(!1)}};if(x)return c.jsx("div",{className:"p-20 text-center animate-pulse text-text-muted",children:"Loading sector..."});if(!p)return c.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-20 text-text-muted",children:[c.jsx("span",{className:"material-symbols-outlined text-6xl mb-4 opacity-20",children:"folder_off"}),c.jsx("h2",{className:"text-xl font-bold opacity-50",children:"Folder Not Found"}),c.jsx("p",{className:"text-sm opacity-30 mt-2",children:"The sector you are looking for does not exist or has been moved."}),c.jsx(Yl,{to:`/${t}/${e}/bible`,className:"mt-6 px-6 py-2 bg-white/5 hover:bg-white/10 rounded-full text-xs font-bold transition-colors",children:"Return to Root"})]});const b=p&&p.tipo&&(["UNIVERSE","GALAXY","SYSTEM","PLANET"].includes(p.tipo)||p.tipo==="MAGIC"),N=p?a3(p.tipo):Bl.FOLDER;return b?c.jsxs("div",{className:"flex-1 overflow-y-auto bg-[#0a0a0c] text-white w-full h-full relative",children:[c.jsxs("div",{className:`w-full min-h-[300px] ${N.bgColor} relative flex items-end p-10 border-b border-white/5`,children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0a0a0c] to-transparent opacity-80 pointer-events-none"}),c.jsx("div",{className:"absolute top-6 left-10 z-20",children:c.jsx(mde,{path:m,currentFolder:p})}),c.jsxs("div",{className:"relative z-10 flex gap-8 items-end w-full max-w-7xl mx-auto",children:[c.jsx("div",{className:`w-32 h-32 rounded-3xl ${N.bgColor} border border-white/10 flex items-center justify-center shadow-2xl`,children:c.jsx("span",{className:`material-symbols-outlined text-6xl ${N.color}`,children:N.icon})}),c.jsxs("div",{className:"flex-1 mb-2",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[c.jsx("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border border-white/10 ${N.bgColor} ${N.color}`,children:N.label}),c.jsxs("span",{className:"text-white/30 text-xs font-mono tracking-widest uppercase",children:["ID: ",p.id]})]}),c.jsx("h1",{className:"text-6xl font-black tracking-tighter text-white mb-2",children:p.nombre}),c.jsx("p",{className:"text-lg text-white/50 max-w-2xl font-light leading-relaxed",children:p.descripcion||"Sin descripcin definida para este sector cosmolgico."})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{onClick:()=>r(`/${t}/${e}/bible/folder/${n}/entity/new/entidadindividual`),className:"px-4 py-2 bg-primary/20 hover:bg-primary/30 text-primary rounded-xl text-[10px] font-black uppercase tracking-widest flex items-center gap-2 transition-all",children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"person_add"})," Nueva Entidad"]}),c.jsxs("button",{onClick:()=>r(`/${t}/${e}/map-editor/create/${n}`,{state:{folderId:p==null?void 0:p.id}}),className:"px-4 py-2 bg-white/5 hover:bg-white/10 text-white rounded-xl text-[10px] font-black uppercase tracking-widest flex items-center gap-2 transition-all border border-glass-border",children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"map"})," Mapa"]})]})]})]}),c.jsxs("div",{className:"max-w-7xl mx-auto p-10 grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-[#13141f] border border-white/5 rounded-2xl p-6",children:[c.jsx("h3",{className:"text-xs font-bold text-white/40 uppercase tracking-widest mb-4",children:"Estadsticas"}),c.jsx("div",{className:"grid grid-cols-2 gap-4",children:c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-black text-white",children:u.length}),c.jsx("div",{className:"text-[10px] text-white/40 uppercase",children:"Entidades"})]})})]}),c.jsxs("div",{className:"bg-[#13141f] border border-white/5 rounded-2xl p-6 h-64 flex flex-col",children:[c.jsx("h3",{className:"text-xs font-bold text-white/40 uppercase tracking-widest mb-4",children:"Notas Rpidas"}),c.jsx("textarea",{className:"flex-1 bg-transparent resize-none outline-none text-sm text-white/70 placeholder-white/20",placeholder:"Escribir notas de la zona..."})]})]}),c.jsxs("div",{className:"lg:col-span-2",children:[c.jsx("h3",{className:"text-xs font-bold text-white/40 uppercase tracking-widest mb-4",children:"Contenido Interno"}),u.length===0&&c.jsxs("div",{className:"p-12 border border-dashed border-white/10 rounded-2xl text-center",children:[c.jsx("span",{className:"material-symbols-outlined text-4xl text-white/20 mb-2",children:"folder_open"}),c.jsx("p",{className:"text-white/30 text-sm",children:"Este sector est vaco."})]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:u.map(E=>c.jsx(s3,{item:E,type:"entity",linkTo:`/${t}/${e}/bible/folder/${p.slug||n}/entity/${E.slug||E.id}`,onDelete:()=>s(E.id,(p==null?void 0:p.id)||n)},E.id))})]})]})]}):c.jsxs("div",{className:"flex-1 p-8 max-w-[1600px] mx-auto w-full h-full overflow-y-auto",children:[c.jsxs("header",{className:"mb-8 flex items-end justify-between",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsxs(Yl,{to:`/${t}/${e}/bible`,className:"text-xs font-bold text-text-muted hover:text-primary transition-colors flex items-center gap-1",children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"arrow_back"})," Root"]}),p&&c.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] bg-white/5 border border-white/10 ${N.color}`,children:N.label})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:`material-symbols-outlined text-3xl ${N.color}`,children:N.icon}),c.jsx("h1",{className:"text-4xl font-black text-white tracking-tighter",children:(p==null?void 0:p.nombre)||"Unnamed Folder"})]}),c.jsx("p",{className:"text-white/50 text-sm mt-2 max-w-xl",children:p==null?void 0:p.descripcion})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{onClick:()=>r(`/${t}/${e}/bible/folder/${n}/entity/new/entidadindividual`),className:"h-10 px-4 rounded-xl bg-primary hover:bg-primary-light transition flex items-center gap-2 text-xs font-bold text-white shadow-lg shadow-primary/20",children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"person"}),c.jsx("span",{children:"Nueva Entidad"})]}),c.jsxs("button",{onClick:()=>r(`/${t}/${e}/map-editor/create/${n}`,{state:{folderId:p==null?void 0:p.id}}),className:"h-10 px-4 rounded-xl bg-surface-light border border-white/5 hover:bg-white/10 transition flex items-center gap-2 text-xs font-bold text-white shadow-lg",children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"map"}),c.jsx("span",{children:"Mapa"})]}),c.jsxs("button",{onClick:()=>a(p,"TIMELINE"),className:"h-10 px-4 rounded-xl bg-surface-light border border-white/5 hover:bg-white/10 transition flex items-center gap-2 text-xs font-bold text-white",children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"timeline"}),c.jsx("span",{children:"Timeline"})]})]})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:v.map(E=>c.jsx(s3,{item:E,type:"entity",linkTo:`/${t}/${e}/bible/folder/${(p==null?void 0:p.slug)||n}/entity/${E.slug||E.id}`,onDelete:()=>s(E.id,(p==null?void 0:p.id)||n)},E.id))}),u.length===0&&c.jsx("div",{className:"p-20 text-center border-2 border-dashed border-glass-border rounded-[3rem] opacity-30 mt-8",children:c.jsx("p",{className:"text-text-muted font-bold uppercase tracking-widest",children:"Empty Folder"})})]})},vde=t=>{switch(t==null?void 0:t.toLowerCase()){case"text":return"notes";case"short_text":return"short_text";case"number":return"pin";case"date":return"calendar_today";case"select":return"list";case"boolean":return"check_box";case"map":return"map";case"timeline":return"timeline";case"character":case"entidadindividual":return"person";case"location":case"zona":case"construccion":return"location_on";case"culture":case"entidadcolectiva":return"groups";case"universe":case"galaxy":case"system":case"planet":return"public";case"entity_link":return"link";default:return"description"}},yde=(t,e,n,r)=>{const i=n.slug||n.id;return`/${t}/${e}/bible/folder/${r||"root"}/entity/${i}`},iD=({folder:t,onCreateSubfolder:e,onRename:n,onDeleteFolder:r,onDeleteEntity:i,onCreateTemplate:s,onMoveEntity:a,onCreateEntity:o,onConfirmCreate:l,className:u})=>{const{username:d,projectName:p}=ri(),h=ni(),[m,y]=V.useState(!1),[x,_]=V.useState({folders:[],entities:[]}),[v,w]=V.useState(!1),[b,N]=V.useState(null),[E,A]=V.useState(t.nombre),[P,T]=V.useState(!1),[M,k]=V.useState(null);V.useEffect(()=>{A(t.nombre)},[t.nombre]),V.useEffect(()=>{const L=z=>{var se,de,le,ue;const{folderId:K,optimisticType:J,confirmedType:ne,removeId:X,item:G,oldId:te,expand:re,type:Q}=z.detail||{};if(K===t.id){if(re&&(y(!0),v||j()),v)if(J){const he=J==="folder"?"folders":"entities";_(qe=>({...qe,[he]:[...qe[he].filter(we=>we.id!==G.id),G]}))}else if(ne){const he=ne==="folder"?"folders":"entities";_(qe=>({...qe,[he]:qe[he].map(we=>we.id===te?G:we)}))}else if(X){const he=Q==="folder"?"folders":"entities";_(qe=>({...qe,[he]:qe[he].filter(we=>we.id!==X)}))}else!J&&!ne&&!X&&j()}else((se=z.detail)==null?void 0:se.targetFolderId)===t.id&&((de=z.detail)==null?void 0:de.type)==="move-in"?v&&j():((le=z.detail)==null?void 0:le.sourceFolderId)===t.id&&((ue=z.detail)==null?void 0:ue.type)==="move-out"&&v&&_(he=>({...he,entities:he.entities.filter(qe=>qe.id!==qe.detail.entityId)}))};return window.addEventListener("folder-update",L),()=>window.removeEventListener("folder-update",L)},[t.id,v]);const j=async()=>{try{console.log("Loading content for folder:",t.id,"Slug:",t.slug);const[L,z]=await Promise.all([ke.get(`/world-bible/folders/${t.id}/subfolders`),ke.get(`/world-bible/folders/${t.id}/entities`)]);_({folders:L,entities:z}),w(!0)}catch(L){console.error("Error reloading folder content:",L),L.message&&L.message.includes("404")&&console.error(`404 for folder ${t.id} (${t.nombre})`)}},O=L=>{L.stopPropagation(),y(!m),!v&&!m&&j()},q=()=>h(`/${d}/${p}/bible/folder/${t.slug||t.id}`),I=(L,z,K,J)=>{L.preventDefault(),L.stopPropagation(),N({x:L.clientX,y:L.clientY,type:z,id:K,name:J})},D=()=>N(null);V.useEffect(()=>{if(b)return window.addEventListener("click",D),()=>window.removeEventListener("click",D)},[b]);const U=L=>{if(L.key==="Enter"){L.preventDefault();const z=L.target.value.trim();z?l(t.id,z,"folder",t.parentId,t.tipoEspecial):t.isNew&&i(t.id,t.parentId)}};if(t.isNew)return c.jsx("div",{className:"px-3 py-1 animate-in fade-in zoom-in-95 duration-200",children:c.jsx("input",{autoFocus:!0,type:"text",className:"w-full bg-surface-light border border-primary/50 rounded px-2 py-1 text-xs text-white outline-none",placeholder:"Folder Name...",onKeyDown:U,onBlur:L=>{const z=L.target.value.trim();z?l(t.id,z,"folder",t.parentId):i(t.id,t.parentId)}})});const W=({item:L,type:z})=>c.jsx("div",{className:"px-3 py-1 animate-in fade-in zoom-in-95 duration-200",children:c.jsx("input",{autoFocus:!0,type:"text",defaultValue:L.nombre||"",className:"w-full bg-surface-light border border-primary/50 rounded px-2 py-1 text-xs text-white outline-none",placeholder:"Name...",onKeyDown:K=>{if(K.key==="Enter"){K.preventDefault();const J=K.target.value.trim();J?l(L.id,J,z,t.id,L.tipoEspecial):L.isNew&&i(L.id,t.id),k(null)}else K.key==="Escape"&&(k(null),L.isNew&&i(L.id,t.id))},onBlur:K=>{const J=K.target.value.trim();J?l(L.id,J,z,t.id,L.tipoEspecial):L.isNew&&i(L.id,t.id),k(null)}})}),Y=L=>{L.preventDefault(),L.stopPropagation(),L.currentTarget.classList.add("bg-primary/20")},H=L=>{L.preventDefault(),L.stopPropagation(),L.currentTarget.classList.remove("bg-primary/20")},B=L=>{L.preventDefault(),L.stopPropagation(),L.currentTarget.classList.remove("bg-primary/20");const z=L.dataTransfer.getData("entityId"),K=L.dataTransfer.getData("sourceFolderId");z&&K&&K!==String(t.id)&&a(z,t.id,K)};return c.jsxs("div",{className:`space-y-1 select-none ${u||""}`,children:[c.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 rounded-xl text-xs font-bold text-text-muted hover:text-white hover:bg-white/5 cursor-pointer transition-all group relative",onClick:q,onContextMenu:L=>I(L,"folder",t.id,t.nombre),onDragOver:Y,onDragLeave:H,onDrop:B,children:[c.jsx("span",{onClick:O,className:`material-symbols-outlined text-lg transition-transform hover:text-primary ${m?"rotate-90 text-primary":"opacity-50"}`,children:"chevron_right"}),c.jsx("span",{className:`material-symbols-outlined text-lg ${a3(t.tipo).color}`,children:a3(t.tipo).icon}),P?c.jsx("input",{autoFocus:!0,className:"bg-surface-light border border-primary/50 rounded px-2 py-0.5 text-xs text-white outline-none flex-1 min-w-0",defaultValue:E,onKeyDown:async L=>{if(L.key==="Enter"){const z=L.target.value.trim();if(z&&z!==E)try{await n(t.id,z),A(z)}catch(K){console.error(K)}T(!1)}else L.key==="Escape"&&T(!1)},onBlur:()=>T(!1),onClick:L=>L.stopPropagation()}):c.jsx("span",{className:"truncate flex-1",children:E})]}),b&&c.jsxs("div",{className:"fixed bg-surface-dark border border-glass-border shadow-2xl rounded-xl py-2 z-50 w-48 text-xs font-medium flex flex-col",style:{top:b.y,left:b.x},onClick:L=>L.stopPropagation(),children:[c.jsx("div",{className:"px-4 py-2 border-b border-white/5 font-bold text-text-muted truncate",children:b.name}),b.type==="folder"?c.jsxs(c.Fragment,{children:[c.jsxs("button",{className:"px-4 py-2 hover:bg-white/5 text-left flex items-center gap-2",onClick:()=>{o(t.id,"entidadindividual"),D()},children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"person"})," New Character"]}),c.jsxs("button",{className:"px-4 py-2 hover:bg-white/5 text-left flex items-center gap-2",onClick:()=>{h(`/${d}/${p}/map-editor/create/${t.id}`),D()},children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"map"})," New Map"]}),c.jsx("div",{className:"h-px bg-white/5 my-1"}),c.jsxs("button",{className:"px-4 py-2 hover:bg-white/5 text-left flex items-center gap-2",onClick:()=>{T(!0),D()},children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"})," Rename Folder"]}),c.jsxs("button",{className:"px-4 py-2 hover:bg-red-500/10 text-red-400 text-left flex items-center gap-2",onClick:()=>{r(t.id,t.parentId),D()},children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})," Delete Folder"]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("button",{className:"px-4 py-2 hover:bg-white/5 text-left flex items-center gap-2 cursor-pointer",onClick:()=>{k(b.id),D()},children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"})," Rename"]}),c.jsxs("button",{className:"px-4 py-2 hover:bg-white/5 text-left flex items-center gap-2 cursor-pointer",onClick:async()=>{try{await ke.entityService.toggleFavorite(b.id),window.dispatchEvent(new CustomEvent("favorites-update")),window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:t.id}}))}catch(L){console.error(L)}D()},children:[c.jsx("span",{className:"material-symbols-outlined text-sm text-yellow-500",children:"star"})," Toggle Favorite"]}),c.jsxs("button",{className:"px-4 py-2 hover:bg-red-500/10 text-red-400 text-left flex items-center gap-2",onClick:()=>{i(b.id,t.id),D()},children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})," Delete Entity"]})]})]}),m&&c.jsxs("div",{className:"ml-6 pl-4 border-l border-glass-border space-y-1 animate-slide-in",children:[x.folders.map(L=>c.jsx(iD,{folder:L,onCreateSubfolder:e,onRename:n,onDeleteFolder:r,onDeleteEntity:i,onCreateTemplate:s,onMoveEntity:a,onCreateEntity:o,onConfirmCreate:l},L.id)),x.entities.map(L=>L.isNew||L.id===M?c.jsx(W,{item:L,type:"entity"},L.id):c.jsxs(Yl,{to:yde(d,p,L,t.slug||t.id),onContextMenu:z=>I(z,"entity",L.id,L.nombre),className:`flex items-center gap-3 px-3 py-2 rounded-xl text-[11px] font-medium text-text-muted hover:text-white hover:bg-primary/10 transition-all group cursor-grab active:cursor-grabbing ${L.pending?"opacity-50 pointer-events-none":""}`,draggable:!L.pending,onDragStart:z=>{z.dataTransfer.setData("entityId",L.id),z.dataTransfer.setData("sourceFolderId",t.id)},children:[c.jsx("span",{className:"material-symbols-outlined text-sm opacity-70 group-hover:text-primary transition-colors",children:vde(L.tipoEspecial)}),c.jsx("span",{className:"truncate flex-1",children:L.nombre}),L.favorite&&c.jsx("span",{className:"material-symbols-outlined text-[10px] text-yellow-500",title:"Favorito",children:"star"})]},L.id)),v&&x.folders.length===0&&x.entities.length===0&&c.jsx("div",{className:"px-3 py-2 text-[10px] text-text-muted/30 uppercase font-black italic tracking-tighter",children:"Empty Sector"})]})]})},xde=({isOpen:t,onClose:e,onCreate:n,parentFolder:r})=>{const[i,s]=V.useState({nombre:"",descripcion:"",tipo:"FOLDER",canvasType:"BLANK"});if(!t)return null;const a=()=>{n(i),e(),s({nombre:"",descripcion:"",tipo:"FOLDER",canvasType:"BLANK"})},o=[Bl.UNIVERSE,Bl.GALAXY,Bl.SYSTEM,Bl.PLANET];return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-[#1a1b26] w-full max-w-4xl rounded-2xl shadow-2xl border border-white/10 overflow-hidden flex flex-col max-h-[90vh]",children:[c.jsxs("div",{className:"p-6 border-b border-white/5 flex justify-between items-center bg-[#1f202e]",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-500/20 flex items-center justify-center text-indigo-400",children:c.jsx("span",{className:"material-icons text-sm",children:"add"})}),c.jsx("h2",{className:"text-xl font-semibold text-white",children:r?"Crear Nuevo Espacio":"Crear Nuevo Mapa"})]}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white transition",children:c.jsx("span",{className:"material-icons",children:"close"})})]}),c.jsx("div",{className:"p-8 overflow-y-auto flex-1",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-6",children:[c.jsx("h3",{className:"text-sm font-black uppercase tracking-widest text-indigo-400",children:"Identidad"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-[10px] font-black text-white/30 uppercase mb-2",children:"Nombre del Espacio"}),c.jsx("input",{autoFocus:!0,type:"text",value:i.nombre,onChange:l=>s({...i,nombre:l.target.value}),className:"w-full bg-black/40 border border-white/5 rounded-2xl px-5 py-4 text-white focus:outline-none focus:border-indigo-500/50 transition-all shadow-inner",placeholder:"ej. Sistema Solar"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-[10px] font-black text-white/30 uppercase mb-2",children:"Descripcin"}),c.jsx("textarea",{value:i.descripcion,onChange:l=>s({...i,descripcion:l.target.value}),className:"w-full h-32 bg-black/40 border border-white/5 rounded-2xl px-5 py-4 text-white focus:outline-none focus:border-indigo-500/50 resize-none transition-all",placeholder:"Detalles sobre este nivel jerrquico..."})]})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsx("h3",{className:"text-sm font-black uppercase tracking-widest text-indigo-400",children:"Configuracin"}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("label",{className:"block text-[10px] font-black text-white/30 uppercase mb-1",children:"Tipo de Jerarqua"}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:o.concat([{id:"FOLDER",label:"Carpeta",icon:"folder",color:"text-white/50"}]).map(l=>c.jsxs("div",{onClick:()=>s({...i,tipo:l.id}),className:`flex items-center gap-3 p-3 rounded-xl border cursor-pointer transition-all ${i.tipo===l.id?"bg-indigo-500/10 border-indigo-500/50":"bg-white/5 border-white/5 hover:bg-white/10"}`,children:[c.jsx("span",{className:`material-icons text-lg ${l.color||""}`,children:l.icon}),c.jsx("span",{className:"text-xs font-bold text-white/80",children:l.label})]},l.id||"FOLDER"))})]}),c.jsx("div",{className:"p-4 rounded-2xl bg-indigo-500/5 border border-indigo-500/10",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-500/20 flex items-center justify-center text-indigo-400",children:c.jsx("span",{className:"material-icons",children:"info"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-[10px] uppercase font-black text-indigo-300",children:"Ubicacin Actual"}),c.jsx("p",{className:"text-xs text-indigo-100/50",children:r?r.nombre:"Raz del Mundo"})]})]})})]})]})}),c.jsxs("div",{className:"p-6 border-t border-white/5 flex justify-end gap-3 bg-[#1f202e]",children:[c.jsx("button",{onClick:e,className:"px-6 py-3 rounded-xl text-xs font-black uppercase tracking-widest text-text-muted hover:text-white transition",children:"Cancelar"}),c.jsx("button",{onClick:a,disabled:!i.nombre,className:"px-8 py-3 rounded-xl bg-indigo-600 hover:bg-indigo-500 text-white text-xs font-black uppercase tracking-widest shadow-lg shadow-indigo-500/20 transition-all disabled:opacity-30 disabled:pointer-events-none",children:"Confirmar y Crear"})]})]})})},bde=()=>{const{username:t,projectName:e}=ri(),n=ni(),{handleCreateEntity:r,...i}=Ko()||{},[s,a]=V.useState([]),[o,l]=V.useState([]),[u,d]=V.useState(!1),[p,h]=V.useState(!1),[m,y]=V.useState(null),[x,_]=V.useState(!1),[v,w]=V.useState(null),b=`/${t}/${e}/bible`;V.useEffect(()=>{N(),E();const D=()=>E();return window.addEventListener("favorites-update",D),()=>window.removeEventListener("favorites-update",D)},[e]);const N=async()=>{try{const D=await ke.get("/world-bible/folders");a(D)}catch(D){console.error("Error loading folders:",D)}},E=async()=>{try{const D=await ke.get("/world-bible/favorites");l(D)}catch(D){console.error("Error loading favorites:",D)}},A=(D=null)=>{y(D),h(!0),d(!1)},P=async(D=null,U="FOLDER")=>{try{const W=D?typeof D=="object"?D.id:D:null,Y=await ke.post("/world-bible/folders",{nombre:U==="TIMELINE"?"Nueva Lnea de Tiempo":"Nueva Carpeta",padreId:W,tipo:U});if(W===null){const H=await ke.get("/world-bible/folders");a(H),window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:null}}))}else window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:W,optimisticType:"folder",item:Y,expand:!0}}))}catch(W){console.error("Error creating simple folder:",W)}},T=async D=>{try{const U=m?m.id:null,W=await ke.post("/world-bible/folders",{nombre:D.nombre,descripcion:D.descripcion,padreId:U,tipo:D.tipo});if(U===null){const Y=await ke.get("/world-bible/folders");a(Y),window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:null}}))}else W.id||console.error("CRITICAL: Created folder has no ID!",W),window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:U,optimisticType:"folder",item:W,expand:!0}}))}catch(U){console.error(U),alert("Error creating folder/zone.")}},M=async(D,U="entidadindividual")=>{const W=typeof D=="object"?D.slug||D.id:D;n(`${b}/folder/${W}/entity/new/${U}`)},k=async(D,U)=>{try{await ke.put(`/world-bible/folders/${D}`,{nombre:U}),a(W=>W.map(Y=>Y.id===D?{...Y,nombre:U}:Y))}catch(W){throw W}},j=(D,U=null)=>{w({id:D,parentId:U,type:"folder"}),_(!0)},O=async()=>{if(!v)return;const{id:D,parentId:U,type:W,folderId:Y}=v;try{W==="folder"?(await ke.delete(`/world-bible/folders/${D}`),U===null&&a(H=>H.filter(B=>B.id!==D)),window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:U,removeId:D,type:"folder"}}))):W==="entity"&&(await ke.delete(`/world-bible/entities/${D}`),window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:Y,removeId:D,type:"entity"}})))}catch(H){console.error("Deletion failed:",H),alert("Error trying to delete item.")}finally{w(null)}},q=(D,U)=>{w({id:D,folderId:U,type:"entity"}),_(!0)},I=async(D,U,W,Y,H)=>{try{if(W==="folder")typeof D=="number"&&!D.toString().startsWith("temp")&&(await ke.put(`/world-bible/folders/${D}`,{nombre:U}),window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:Y,confirmedType:"folder",oldId:D,item:{id:D,nombre:U,parentId:Y,tipo:H,uiKey:Date.now()}}})),Y||a(B=>B.map(L=>L.id===D?{...L,nombre:U}:L)));else if(W==="entity")if(typeof D=="string"&&D.startsWith("new-")){const B=await ke.post("/world-bible/entities",{nombre:U,carpetaId:Y,tipoEspecial:H||"entidadindividual"});window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:Y,confirmedType:"entity",oldId:D,item:B}}))}else await ke.put(`/world-bible/entities/${D}`,{nombre:U}),window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:Y,confirmedType:"entity",oldId:D,item:{id:D,nombre:U,carpeta:{id:Y},tipoEspecial:H,slug:D}}})),window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:Y}}))}catch(B){console.error("Creation/Rename failed",B),W==="folder"&&j(D,Y)}};return c.jsxs("div",{className:"flex h-full w-full bg-background-dark max-w-[1920px] mx-auto",children:[c.jsxs("aside",{className:"w-80 flex-none flex flex-col border-r border-glass-border bg-surface-dark/50 z-10",children:[c.jsx("div",{className:"p-4 border-b border-glass-border",children:c.jsxs("div",{className:"relative group mb-3",children:[c.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-text-muted text-sm group-focus-within:text-primary transition-colors",children:"search"}),c.jsx("input",{type:"text",placeholder:"Buscar en Biblia...",className:"w-full bg-surface-light/50 border border-glass-border rounded-xl py-2 pl-9 pr-3 text-xs focus:border-primary/50 outline-none transition-all text-white placeholder:text-text-muted/50"})]})}),c.jsxs("div",{className:"px-2 pt-2",children:[c.jsx("div",{className:"flex items-center justify-between px-2 mb-1",children:c.jsx("h2",{className:"text-[10px] font-black uppercase tracking-widest text-text-muted",children:"Favoritos"})}),o.length>0?c.jsx("div",{className:"space-y-0.5",children:o.map(D=>c.jsxs("div",{onClick:()=>n(`${b}/folder/${D.carpeta.slug||D.carpeta.id}/entity/${D.slug||D.id}`),className:"flex items-center gap-3 px-3 py-1.5 rounded-lg text-[11px] font-medium text-text-muted hover:text-white hover:bg-white/5 cursor-pointer transition-all group",children:[c.jsx("span",{className:"material-symbols-outlined text-sm text-yellow-500/70 group-hover:text-yellow-400",children:"star"}),c.jsx("span",{className:"truncate",children:D.nombre})]},D.id))}):c.jsx("div",{className:"px-4 py-2 text-[10px] text-text-muted/30 italic",children:"Sin favoritos"}),c.jsx("div",{className:"h-px bg-glass-border my-2 opacity-50"})]}),c.jsx("div",{className:"p-4 border-b border-glass-border pt-0",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-[10px] font-black uppercase tracking-widest text-text-muted",children:"Explorador"}),c.jsx("div",{className:"relative",children:c.jsx("button",{className:"transition-colors hover:text-white text-primary",onClick:()=>P(null),title:"Crear Carpeta",children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:"create_new_folder"})})})]})}),c.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar p-2 space-y-0.5",children:s.length===0?c.jsxs("div",{className:"p-8 text-center opacity-30",children:[c.jsx("span",{className:"material-symbols-outlined text-3xl mb-2",children:"folder_off"}),c.jsx("p",{className:"text-[10px] uppercase font-bold",children:"Biblia Vaca"})]}):s.map(D=>c.jsx(iD,{folder:D,onCreateSubfolder:P,onRename:k,onDeleteFolder:j,onDeleteEntity:j,onCreateTemplate:()=>{},onMoveEntity:(U,W,Y)=>console.log("move",U,W,Y),onCreateEntity:M,onConfirmCreate:I},D.uiKey||D.id))})]}),c.jsx("main",{className:"flex-1 overflow-hidden relative bg-gradient-to-br from-background-dark to-surface-dark/20",children:c.jsx(h4,{context:{...i,folders:s,handleCreateEntity:M,handleOpenCreateModal:A,handleDeleteFolder:j,handleDeleteEntity:q,handleCreateSimpleFolder:P}})}),c.jsx(xde,{isOpen:p,onClose:()=>h(!1),onCreate:T,parentFolder:m}),c.jsx(Eh,{isOpen:x,onClose:()=>_(!1),onConfirm:O,title:(v==null?void 0:v.type)==="folder"?"Borrar Carpeta":"Borrar Entidad",message:(v==null?void 0:v.type)==="folder"?"Esta accin eliminar la carpeta y todo su contenido. Ests seguro?":"Ests seguro de querer eliminar esta entidad de tu mundo?",confirmText:"S, borrar"})]})},wde=()=>{const{username:t,projectName:e}=ri();ni();const{handleOpenCreateModal:n,handleDeleteFolder:r,handleCreateSimpleFolder:i,handleRenameFolder:s,folders:a=[]}=Ko(),[o,l]=V.useState(null),[u,d]=V.useState(null),[p,h]=V.useState(""),m=(_,v)=>{_.preventDefault(),_.stopPropagation(),l({x:_.clientX,y:_.clientY,folder:v})},y=()=>l(null);V.useEffect(()=>{if(o){const _=()=>y();return window.addEventListener("click",_),()=>window.removeEventListener("click",_)}},[o]);const x=async(_,v)=>{v.trim()&&s&&await s(_,v.trim()),d(null),h("")};return a===void 0?c.jsx("div",{className:"p-20 text-center animate-pulse text-text-muted",children:"Loading World Bible..."}):c.jsxs("div",{className:"flex-1 p-8 max-w-[1600px] mx-auto w-full h-full overflow-y-auto",children:[c.jsxs("header",{className:"mb-8 flex items-end justify-between",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-3 text-xs font-black uppercase tracking-widest text-primary italic mb-2",children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"auto_stories"}),"World Bible"]}),c.jsx("h1",{className:"text-4xl font-black text-white tracking-tighter",children:"Root Index"}),c.jsx("p",{className:"text-text-muted mt-2 max-w-lg text-sm",children:"The central archive of your world. Organize characters, locations, timelines, and maps."})]}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsxs("button",{onClick:()=>i(null,"FOLDER"),className:"px-6 py-2 bg-primary hover:bg-primary-light text-white rounded-xl text-xs font-bold flex items-center gap-2 transition-all shadow-lg shadow-primary/20",children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"create_new_folder"})," Nueva Carpeta"]})})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:a.map(_=>u===_.id?c.jsx("div",{className:"p-4 rounded-3xl bg-surface-dark border border-primary/50",children:c.jsx("input",{autoFocus:!0,type:"text",value:p,onChange:v=>h(v.target.value),onKeyDown:v=>{v.key==="Enter"&&x(_.id,p),v.key==="Escape"&&(d(null),h(""))},onBlur:()=>x(_.id,p),className:"w-full bg-black/30 border border-white/10 rounded-xl p-3 text-sm text-white focus:border-primary/50 outline-none",placeholder:"Folder name..."})},_.id):c.jsx(s3,{item:_,type:"folder",linkTo:`/${t}/${e}/bible/folder/${_.slug||_.id}`,onDelete:()=>r(_.id),onContextMenu:v=>m(v,_)},_.id))}),a.length===0&&c.jsxs("div",{className:"p-20 text-center border-2 border-dashed border-glass-border rounded-[3rem] opacity-30 mt-8",children:[c.jsx("span",{className:"material-symbols-outlined text-6xl mb-4 text-text-muted",children:"library_books"}),c.jsx("h3",{className:"text-xl font-bold text-white uppercase tracking-widest",children:"Archivo Vaco"}),c.jsx("p",{className:"text-text-muted mt-2",children:"Comienza creando espacios para organizar tu mundo."})]}),o&&c.jsxs("div",{className:"fixed bg-surface-dark border border-glass-border shadow-2xl rounded-xl py-2 z-50 w-52 text-xs font-medium flex flex-col animate-in fade-in zoom-in-95 duration-150",style:{top:o.y,left:o.x},onClick:_=>_.stopPropagation(),children:[c.jsxs("div",{className:"px-4 py-2 border-b border-white/5 font-bold text-text-muted truncate flex items-center gap-2",children:[c.jsx("span",{className:"material-symbols-outlined text-sm text-primary",children:"folder"}),o.folder.nombre]}),c.jsxs("button",{className:"px-4 py-2.5 hover:bg-white/5 text-left flex items-center gap-3 text-white/80 hover:text-white transition-colors",onClick:()=>{d(o.folder.id),h(o.folder.nombre),y()},children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"})," Renombrar"]}),c.jsxs("button",{className:"px-4 py-2.5 hover:bg-red-500/10 text-red-400 text-left flex items-center gap-3 transition-colors",onClick:()=>{r(o.folder.id),y()},children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})," Eliminar Carpeta"]})]})]})};var sD={exports:{}},U0={},Ig={},Je={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t._registerNode=t.Konva=t.glob=void 0;const e=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}t.glob=typeof Qt<"u"?Qt:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},t.Konva={_global:t.glob,version:"9.3.16",isBrowser:n(),isUnminified:/param/.test((function(i){}).toString()),dblClickWindow:400,getAngle(i){return t.Konva.angleDeg?i*e:i},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return t.Konva.DD.isDragging},isTransforming(){var i;return(i=t.Konva.Transformer)===null||i===void 0?void 0:i.isTransforming()},isDragReady(){return!!t.Konva.DD.node},releaseCanvasOnDestroy:!0,document:t.glob.document,_injectGlobal(i){t.glob.Konva=i}};const r=i=>{t.Konva[i.prototype.getClassName()]=i};t._registerNode=r,t.Konva._injectGlobal(t.Konva)})(Je);var tn={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.Transform=void 0;const e=Je;class n{constructor(N=[1,0,0,1,0,0]){this.dirty=!1,this.m=N&&N.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(N){N.m[0]=this.m[0],N.m[1]=this.m[1],N.m[2]=this.m[2],N.m[3]=this.m[3],N.m[4]=this.m[4],N.m[5]=this.m[5]}point(N){const E=this.m;return{x:E[0]*N.x+E[2]*N.y+E[4],y:E[1]*N.x+E[3]*N.y+E[5]}}translate(N,E){return this.m[4]+=this.m[0]*N+this.m[2]*E,this.m[5]+=this.m[1]*N+this.m[3]*E,this}scale(N,E){return this.m[0]*=N,this.m[1]*=N,this.m[2]*=E,this.m[3]*=E,this}rotate(N){const E=Math.cos(N),A=Math.sin(N),P=this.m[0]*E+this.m[2]*A,T=this.m[1]*E+this.m[3]*A,M=this.m[0]*-A+this.m[2]*E,k=this.m[1]*-A+this.m[3]*E;return this.m[0]=P,this.m[1]=T,this.m[2]=M,this.m[3]=k,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(N,E){const A=this.m[0]+this.m[2]*E,P=this.m[1]+this.m[3]*E,T=this.m[2]+this.m[0]*N,M=this.m[3]+this.m[1]*N;return this.m[0]=A,this.m[1]=P,this.m[2]=T,this.m[3]=M,this}multiply(N){const E=this.m[0]*N.m[0]+this.m[2]*N.m[1],A=this.m[1]*N.m[0]+this.m[3]*N.m[1],P=this.m[0]*N.m[2]+this.m[2]*N.m[3],T=this.m[1]*N.m[2]+this.m[3]*N.m[3],M=this.m[0]*N.m[4]+this.m[2]*N.m[5]+this.m[4],k=this.m[1]*N.m[4]+this.m[3]*N.m[5]+this.m[5];return this.m[0]=E,this.m[1]=A,this.m[2]=P,this.m[3]=T,this.m[4]=M,this.m[5]=k,this}invert(){const N=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),E=this.m[3]*N,A=-this.m[1]*N,P=-this.m[2]*N,T=this.m[0]*N,M=N*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),k=N*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=E,this.m[1]=A,this.m[2]=P,this.m[3]=T,this.m[4]=M,this.m[5]=k,this}getMatrix(){return this.m}decompose(){const N=this.m[0],E=this.m[1],A=this.m[2],P=this.m[3],T=this.m[4],M=this.m[5],k=N*P-E*A,j={x:T,y:M,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(N!=0||E!=0){const O=Math.sqrt(N*N+E*E);j.rotation=E>0?Math.acos(N/O):-Math.acos(N/O),j.scaleX=O,j.scaleY=k/O,j.skewX=(N*A+E*P)/k,j.skewY=0}else if(A!=0||P!=0){const O=Math.sqrt(A*A+P*P);j.rotation=Math.PI/2-(P>0?Math.acos(-A/O):-Math.acos(A/O)),j.scaleX=k/O,j.scaleY=O,j.skewX=0,j.skewY=(N*A+E*P)/k}return j.rotation=t.Util._getRotation(j.rotation),j}}t.Transform=n;let r="[object Array]",i="[object Number]",s="[object String]",a="[object Boolean]",o=Math.PI/180,l=180/Math.PI,u="#",d="",p="0",h="Konva warning: ",m="Konva error: ",y="rgb(",x={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},_=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,v=[];const w=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(b){setTimeout(b,60)};t.Util={_isElement(b){return!!(b&&b.nodeType==1)},_isFunction(b){return!!(b&&b.constructor&&b.call&&b.apply)},_isPlainObject(b){return!!b&&b.constructor===Object},_isArray(b){return Object.prototype.toString.call(b)===r},_isNumber(b){return Object.prototype.toString.call(b)===i&&!isNaN(b)&&isFinite(b)},_isString(b){return Object.prototype.toString.call(b)===s},_isBoolean(b){return Object.prototype.toString.call(b)===a},isObject(b){return b instanceof Object},isValidSelector(b){if(typeof b!="string")return!1;const N=b[0];return N==="#"||N==="."||N===N.toUpperCase()},_sign(b){return b===0||b>0?1:-1},requestAnimFrame(b){v.push(b),v.length===1&&w(function(){const N=v;v=[],N.forEach(function(E){E()})})},createCanvasElement(){const b=document.createElement("canvas");try{b.style=b.style||{}}catch{}return b},createImageElement(){return document.createElement("img")},_isInDocument(b){for(;b=b.parentNode;)if(b==document)return!0;return!1},_urlToImage(b,N){const E=t.Util.createImageElement();E.onload=function(){N(E)},E.src=b},_rgbToHex(b,N,E){return((1<<24)+(b<<16)+(N<<8)+E).toString(16).slice(1)},_hexToRgb(b){b=b.replace(u,d);const N=parseInt(b,16);return{r:N>>16&255,g:N>>8&255,b:N&255}},getRandomColor(){let b=(Math.random()*16777215<<0).toString(16);for(;b.length<6;)b=p+b;return u+b},getRGB(b){let N;return b in x?(N=x[b],{r:N[0],g:N[1],b:N[2]}):b[0]===u?this._hexToRgb(b.substring(1)):b.substr(0,4)===y?(N=_.exec(b.replace(/ /g,"")),{r:parseInt(N[1],10),g:parseInt(N[2],10),b:parseInt(N[3],10)}):{r:0,g:0,b:0}},colorToRGBA(b){return b=b||"black",t.Util._namedColorToRBA(b)||t.Util._hex3ColorToRGBA(b)||t.Util._hex4ColorToRGBA(b)||t.Util._hex6ColorToRGBA(b)||t.Util._hex8ColorToRGBA(b)||t.Util._rgbColorToRGBA(b)||t.Util._rgbaColorToRGBA(b)||t.Util._hslColorToRGBA(b)},_namedColorToRBA(b){const N=x[b.toLowerCase()];return N?{r:N[0],g:N[1],b:N[2],a:1}:null},_rgbColorToRGBA(b){if(b.indexOf("rgb(")===0){b=b.match(/rgb\(([^)]+)\)/)[1];const N=b.split(/ *, */).map(Number);return{r:N[0],g:N[1],b:N[2],a:1}}},_rgbaColorToRGBA(b){if(b.indexOf("rgba(")===0){b=b.match(/rgba\(([^)]+)\)/)[1];const N=b.split(/ *, */).map((E,A)=>E.slice(-1)==="%"?A===3?parseInt(E)/100:parseInt(E)/100*255:Number(E));return{r:N[0],g:N[1],b:N[2],a:N[3]}}},_hex8ColorToRGBA(b){if(b[0]==="#"&&b.length===9)return{r:parseInt(b.slice(1,3),16),g:parseInt(b.slice(3,5),16),b:parseInt(b.slice(5,7),16),a:parseInt(b.slice(7,9),16)/255}},_hex6ColorToRGBA(b){if(b[0]==="#"&&b.length===7)return{r:parseInt(b.slice(1,3),16),g:parseInt(b.slice(3,5),16),b:parseInt(b.slice(5,7),16),a:1}},_hex4ColorToRGBA(b){if(b[0]==="#"&&b.length===5)return{r:parseInt(b[1]+b[1],16),g:parseInt(b[2]+b[2],16),b:parseInt(b[3]+b[3],16),a:parseInt(b[4]+b[4],16)/255}},_hex3ColorToRGBA(b){if(b[0]==="#"&&b.length===4)return{r:parseInt(b[1]+b[1],16),g:parseInt(b[2]+b[2],16),b:parseInt(b[3]+b[3],16),a:1}},_hslColorToRGBA(b){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(b)){const[N,...E]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(b),A=Number(E[0])/360,P=Number(E[1])/100,T=Number(E[2])/100;let M,k,j;if(P===0)return j=T*255,{r:Math.round(j),g:Math.round(j),b:Math.round(j),a:1};T<.5?M=T*(1+P):M=T+P-T*P;const O=2*T-M,q=[0,0,0];for(let I=0;I<3;I++)k=A+1/3*-(I-1),k<0&&k++,k>1&&k--,6*k<1?j=O+(M-O)*6*k:2*k<1?j=M:3*k<2?j=O+(M-O)*(2/3-k)*6:j=O,q[I]=j*255;return{r:Math.round(q[0]),g:Math.round(q[1]),b:Math.round(q[2]),a:1}}},haveIntersection(b,N){return!(N.x>b.x+b.width||N.x+N.width<b.x||N.y>b.y+b.height||N.y+N.height<b.y)},cloneObject(b){const N={};for(const E in b)this._isPlainObject(b[E])?N[E]=this.cloneObject(b[E]):this._isArray(b[E])?N[E]=this.cloneArray(b[E]):N[E]=b[E];return N},cloneArray(b){return b.slice(0)},degToRad(b){return b*o},radToDeg(b){return b*l},_degToRad(b){return t.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),t.Util.degToRad(b)},_radToDeg(b){return t.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),t.Util.radToDeg(b)},_getRotation(b){return e.Konva.angleDeg?t.Util.radToDeg(b):b},_capitalize(b){return b.charAt(0).toUpperCase()+b.slice(1)},throw(b){throw new Error(m+b)},error(b){console.error(m+b)},warn(b){e.Konva.showWarnings&&console.warn(h+b)},each(b,N){for(const E in b)N(E,b[E])},_inRange(b,N,E){return N<=b&&b<E},_getProjectionToSegment(b,N,E,A,P,T){let M,k,j;const O=(b-E)*(b-E)+(N-A)*(N-A);if(O==0)M=b,k=N,j=(P-E)*(P-E)+(T-A)*(T-A);else{const q=((P-b)*(E-b)+(T-N)*(A-N))/O;q<0?(M=b,k=N,j=(b-P)*(b-P)+(N-T)*(N-T)):q>1?(M=E,k=A,j=(E-P)*(E-P)+(A-T)*(A-T)):(M=b+q*(E-b),k=N+q*(A-N),j=(M-P)*(M-P)+(k-T)*(k-T))}return[M,k,j]},_getProjectionToLine(b,N,E){const A=t.Util.cloneObject(b);let P=Number.MAX_VALUE;return N.forEach(function(T,M){if(!E&&M===N.length-1)return;const k=N[(M+1)%N.length],j=t.Util._getProjectionToSegment(T.x,T.y,k.x,k.y,b.x,b.y),O=j[0],q=j[1],I=j[2];I<P&&(A.x=O,A.y=q,P=I)}),A},_prepareArrayForTween(b,N,E){let A,P=[],T=[];if(b.length>N.length){const k=N;N=b,b=k}for(A=0;A<b.length;A+=2)P.push({x:b[A],y:b[A+1]});for(A=0;A<N.length;A+=2)T.push({x:N[A],y:N[A+1]});const M=[];return T.forEach(function(k){const j=t.Util._getProjectionToLine(k,P,E);M.push(j.x),M.push(j.y)}),M},_prepareToStringify(b){let N;b.visitedByCircularReferenceRemoval=!0;for(const E in b)if(b.hasOwnProperty(E)&&b[E]&&typeof b[E]=="object"){if(N=Object.getOwnPropertyDescriptor(b,E),b[E].visitedByCircularReferenceRemoval||t.Util._isElement(b[E]))if(N.configurable)delete b[E];else return null;else if(t.Util._prepareToStringify(b[E])===null)if(N.configurable)delete b[E];else return null}return delete b.visitedByCircularReferenceRemoval,b},_assign(b,N){for(const E in N)b[E]=N[E];return b},_getFirstPointerId(b){return b.touches?b.changedTouches[0].identifier:b.pointerId||999},releaseCanvas(...b){e.Konva.releaseCanvasOnDestroy&&b.forEach(N=>{N.width=0,N.height=0})},drawRoundedRectPath(b,N,E,A){let P=0,T=0,M=0,k=0;typeof A=="number"?P=T=M=k=Math.min(A,N/2,E/2):(P=Math.min(A[0]||0,N/2,E/2),T=Math.min(A[1]||0,N/2,E/2),k=Math.min(A[2]||0,N/2,E/2),M=Math.min(A[3]||0,N/2,E/2)),b.moveTo(P,0),b.lineTo(N-T,0),b.arc(N-T,T,T,Math.PI*3/2,0,!1),b.lineTo(N,E-k),b.arc(N-k,E-k,k,0,Math.PI/2,!1),b.lineTo(M,E),b.arc(M,E-M,M,Math.PI/2,Math.PI,!1),b.lineTo(0,P),b.arc(P,P,P,Math.PI,Math.PI*3/2,!1)}}})(tn);var Gt={},tt={},Ge={};Object.defineProperty(Ge,"__esModule",{value:!0});Ge.RGBComponent=_de;Ge.alphaComponent=Nde;Ge.getNumberValidator=Sde;Ge.getNumberOrArrayOfNumbersValidator=Ede;Ge.getNumberOrAutoValidator=kde;Ge.getStringValidator=Cde;Ge.getStringOrGradientValidator=jde;Ge.getFunctionValidator=Tde;Ge.getNumberArrayValidator=Ade;Ge.getBooleanValidator=Ode;Ge.getComponentValidator=Pde;const La=Je,an=tn;function Ia(t){return an.Util._isString(t)?'"'+t+'"':Object.prototype.toString.call(t)==="[object Number]"||an.Util._isBoolean(t)?t:Object.prototype.toString.call(t)}function _de(t){return t>255?255:t<0?0:Math.round(t)}function Nde(t){return t>1?1:t<1e-4?1e-4:t}function Sde(){if(La.Konva.isUnminified)return function(t,e){return an.Util._isNumber(t)||an.Util.warn(Ia(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}}function Ede(t){if(La.Konva.isUnminified)return function(e,n){const r=an.Util._isNumber(e),i=an.Util._isArray(e)&&e.length==t;return!r&&!i&&an.Util.warn(Ia(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+t+")"),e}}function kde(){if(La.Konva.isUnminified)return function(t,e){return an.Util._isNumber(t)||t==="auto"||an.Util.warn(Ia(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}}function Cde(){if(La.Konva.isUnminified)return function(t,e){return an.Util._isString(t)||an.Util.warn(Ia(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}}function jde(){if(La.Konva.isUnminified)return function(t,e){const n=an.Util._isString(t),r=Object.prototype.toString.call(t)==="[object CanvasGradient]"||t&&t.addColorStop;return n||r||an.Util.warn(Ia(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}}function Tde(){if(La.Konva.isUnminified)return function(t,e){return an.Util._isFunction(t)||an.Util.warn(Ia(t)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),t}}function Ade(){if(La.Konva.isUnminified)return function(t,e){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&t instanceof n||(an.Util._isArray(t)?t.forEach(function(r){an.Util._isNumber(r)||an.Util.warn('"'+e+'" attribute has non numeric element '+r+". Make sure that all elements are numbers.")}):an.Util.warn(Ia(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),t}}function Ode(){if(La.Konva.isUnminified)return function(t,e){return t===!0||t===!1||an.Util.warn(Ia(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}}function Pde(t){if(La.Konva.isUnminified)return function(e,n){return e==null||an.Util.isObject(e)||an.Util.warn(Ia(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+t),e}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Factory=void 0;const e=tn,n=Ge,r="get",i="set";t.Factory={addGetterSetter(s,a,o,l,u){t.Factory.addGetter(s,a,o),t.Factory.addSetter(s,a,l,u),t.Factory.addOverloadedGetterSetter(s,a)},addGetter(s,a,o){const l=r+e.Util._capitalize(a);s.prototype[l]=s.prototype[l]||function(){const u=this.attrs[a];return u===void 0?o:u}},addSetter(s,a,o,l){const u=i+e.Util._capitalize(a);s.prototype[u]||t.Factory.overWriteSetter(s,a,o,l)},overWriteSetter(s,a,o,l){const u=i+e.Util._capitalize(a);s.prototype[u]=function(d){return o&&d!==void 0&&d!==null&&(d=o.call(this,d,a)),this._setAttr(a,d),l&&l.call(this),this}},addComponentsGetterSetter(s,a,o,l,u){let d=o.length,p=e.Util._capitalize,h=r+p(a),m=i+p(a),y,x;s.prototype[h]=function(){const v={};for(y=0;y<d;y++)x=o[y],v[x]=this.getAttr(a+p(x));return v};const _=(0,n.getComponentValidator)(o);s.prototype[m]=function(v){let w=this.attrs[a],b;l&&(v=l.call(this,v)),_&&_.call(this,v,a);for(b in v)v.hasOwnProperty(b)&&this._setAttr(a+p(b),v[b]);return v||o.forEach(N=>{this._setAttr(a+p(N),void 0)}),this._fireChangeEvent(a,w,v),u&&u.call(this),this},t.Factory.addOverloadedGetterSetter(s,a)},addOverloadedGetterSetter(s,a){const o=e.Util._capitalize(a),l=i+o,u=r+o;s.prototype[a]=function(){return arguments.length?(this[l](arguments[0]),this):this[u]()}},addDeprecatedGetterSetter(s,a,o,l){e.Util.error("Adding deprecated "+a);const u=r+e.Util._capitalize(a),d=a+" property is deprecated and will be removed soon. Look at Konva change log for more information.";s.prototype[u]=function(){e.Util.error(d);const p=this.attrs[a];return p===void 0?o:p},t.Factory.addSetter(s,a,l,function(){e.Util.error(d)}),t.Factory.addOverloadedGetterSetter(s,a)},backCompat(s,a){e.Util.each(a,function(o,l){const u=s.prototype[l],d=r+e.Util._capitalize(o),p=i+e.Util._capitalize(o);function h(){u.apply(this,arguments),e.Util.error('"'+o+'" method is deprecated and will be removed soon. Use ""'+l+'" instead.')}s.prototype[o]=h,s.prototype[d]=h,s.prototype[p]=h})},afterSetFilter(){this._filterUpToDate=!1}}})(tt);var es={},va={};Object.defineProperty(va,"__esModule",{value:!0});va.HitContext=va.SceneContext=va.Context=void 0;const aD=tn,Rde=Je;function Lde(t){let e=[],n=t.length,r=aD.Util,i,s;for(i=0;i<n;i++)s=t[i],r._isNumber(s)?s=Math.round(s*1e3)/1e3:r._isString(s)||(s=s+""),e.push(s);return e}const kT=",",Ide="(",Mde=")",Dde="([",Fde="])",qde=";",Bde="()",zde="=",CT=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],$de=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],Ude=100;class G0{constructor(e){this.canvas=e,Rde.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,n){let r=this.traceArr,i=r.length,s="",a,o,l,u;for(a=0;a<i;a++)o=r[a],l=o.method,l?(u=o.args,s+=l,e?s+=Bde:aD.Util._isArray(u[0])?s+=Dde+u.join(kT)+Fde:(n&&(u=u.map(d=>typeof d=="number"?Math.floor(d):d)),s+=Ide+u.join(kT)+Mde)):(s+=o.property,e||(s+=zde+o.val)),s+=qde;return s}clearTrace(){this.traceArr=[]}_trace(e){let n=this.traceArr,r;n.push(e),r=n.length,r>=Ude&&n.shift()}reset(){const e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){const n=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(e){const n=e.attrs.lineCap;n&&this.setAttr("lineCap",n)}_applyOpacity(e){const n=e.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(e){const n=e.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}setAttr(e,n){this._context[e]=n}arc(e,n,r,i,s,a){this._context.arc(e,n,r,i,s,a)}arcTo(e,n,r,i,s){this._context.arcTo(e,n,r,i,s)}beginPath(){this._context.beginPath()}bezierCurveTo(e,n,r,i,s,a){this._context.bezierCurveTo(e,n,r,i,s,a)}clearRect(e,n,r,i){this._context.clearRect(e,n,r,i)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,n){const r=arguments;if(r.length===2)return this._context.createImageData(e,n);if(r.length===1)return this._context.createImageData(e)}createLinearGradient(e,n,r,i){return this._context.createLinearGradient(e,n,r,i)}createPattern(e,n){return this._context.createPattern(e,n)}createRadialGradient(e,n,r,i,s,a){return this._context.createRadialGradient(e,n,r,i,s,a)}drawImage(e,n,r,i,s,a,o,l,u){const d=arguments,p=this._context;d.length===3?p.drawImage(e,n,r):d.length===5?p.drawImage(e,n,r,i,s):d.length===9&&p.drawImage(e,n,r,i,s,a,o,l,u)}ellipse(e,n,r,i,s,a,o,l){this._context.ellipse(e,n,r,i,s,a,o,l)}isPointInPath(e,n,r,i){return r?this._context.isPointInPath(r,e,n,i):this._context.isPointInPath(e,n,i)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,n,r,i){this._context.fillRect(e,n,r,i)}strokeRect(e,n,r,i){this._context.strokeRect(e,n,r,i)}fillText(e,n,r,i){i?this._context.fillText(e,n,r,i):this._context.fillText(e,n,r)}measureText(e){return this._context.measureText(e)}getImageData(e,n,r,i){return this._context.getImageData(e,n,r,i)}lineTo(e,n){this._context.lineTo(e,n)}moveTo(e,n){this._context.moveTo(e,n)}rect(e,n,r,i){this._context.rect(e,n,r,i)}roundRect(e,n,r,i,s){this._context.roundRect(e,n,r,i,s)}putImageData(e,n,r){this._context.putImageData(e,n,r)}quadraticCurveTo(e,n,r,i){this._context.quadraticCurveTo(e,n,r,i)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,n){this._context.scale(e,n)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,n,r,i,s,a){this._context.setTransform(e,n,r,i,s,a)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,n,r,i){this._context.strokeText(e,n,r,i)}transform(e,n,r,i,s,a){this._context.transform(e,n,r,i,s,a)}translate(e,n){this._context.translate(e,n)}_enableTrace(){let e=this,n=CT.length,r=this.setAttr,i,s;const a=function(o){let l=e[o],u;e[o]=function(){return s=Lde(Array.prototype.slice.call(arguments,0)),u=l.apply(e,arguments),e._trace({method:o,args:s}),u}};for(i=0;i<n;i++)a(CT[i]);e.setAttr=function(){r.apply(e,arguments);const o=arguments[0];let l=arguments[1];(o==="shadowOffsetX"||o==="shadowOffsetY"||o==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),e._trace({property:o,val:l})}}_applyGlobalCompositeOperation(e){const n=e.attrs.globalCompositeOperation;!n||n==="source-over"||this.setAttr("globalCompositeOperation",n)}}va.Context=G0;$de.forEach(function(t){Object.defineProperty(G0.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})});class Gde extends G0{constructor(e,{willReadFrequently:n=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:n})}_fillColor(e){const n=e.fill();this.setAttr("fillStyle",n),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){const n=e._getLinearGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fillRadialGradient(e){const n=e._getRadialGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fill(e){const n=e.fill(),r=e.getFillPriority();if(n&&r==="color"){this._fillColor(e);return}const i=e.getFillPatternImage();if(i&&r==="pattern"){this._fillPattern(e);return}const s=e.getFillLinearGradientColorStops();if(s&&r==="linear-gradient"){this._fillLinearGradient(e);return}const a=e.getFillRadialGradientColorStops();if(a&&r==="radial-gradient"){this._fillRadialGradient(e);return}n?this._fillColor(e):i?this._fillPattern(e):s?this._fillLinearGradient(e):a&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const n=e.getStrokeLinearGradientStartPoint(),r=e.getStrokeLinearGradientEndPoint(),i=e.getStrokeLinearGradientColorStops(),s=this.createLinearGradient(n.x,n.y,r.x,r.y);if(i){for(let a=0;a<i.length;a+=2)s.addColorStop(i[a],i[a+1]);this.setAttr("strokeStyle",s)}}_stroke(e){const n=e.dash(),r=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!r){this.save();const s=this.getCanvas().getPixelRatio();this.setTransform(s,0,0,s,0,0)}this._applyLineCap(e),n&&e.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),e.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),r||this.restore()}}_applyShadow(e){var n,r,i;const s=(n=e.getShadowRGBA())!==null&&n!==void 0?n:"black",a=(r=e.getShadowBlur())!==null&&r!==void 0?r:5,o=(i=e.getShadowOffset())!==null&&i!==void 0?i:{x:0,y:0},l=e.getAbsoluteScale(),u=this.canvas.getPixelRatio(),d=l.x*u,p=l.y*u;this.setAttr("shadowColor",s),this.setAttr("shadowBlur",a*Math.min(Math.abs(d),Math.abs(p))),this.setAttr("shadowOffsetX",o.x*d),this.setAttr("shadowOffsetY",o.y*p)}}va.SceneContext=Gde;class Hde extends G0{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const n=e.getStrokeScaleEnabled();if(!n){this.save();const s=this.getCanvas().getPixelRatio();this.setTransform(s,0,0,s,0,0)}this._applyLineCap(e);const r=e.hitStrokeWidth(),i=r==="auto"?e.strokeWidth():r;this.setAttr("lineWidth",i),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),n||this.restore()}}}va.HitContext=Hde;Object.defineProperty(es,"__esModule",{value:!0});es.HitCanvas=es.SceneCanvas=es.Canvas=void 0;const Mg=tn,oD=va,lD=Je,Vde=tt,Wde=Ge;let fm;function Kde(){if(fm)return fm;const t=Mg.Util.createCanvasElement(),e=t.getContext("2d");return fm=function(){const n=lD.Konva._global.devicePixelRatio||1,r=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return n/r}(),Mg.Util.releaseCanvas(t),fm}class H0{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const r=(e||{}).pixelRatio||lD.Konva.pixelRatio||Kde();this.pixelRatio=r,this._canvas=Mg.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){const n=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";const n=this.pixelRatio;this.getContext()._context.scale(n,n)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";const n=this.pixelRatio;this.getContext()._context.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,n){this.setWidth(e||0),this.setHeight(n||0)}toDataURL(e,n){try{return this._canvas.toDataURL(e,n)}catch{try{return this._canvas.toDataURL()}catch(i){return Mg.Util.error("Unable to get data URL. "+i.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}es.Canvas=H0;Vde.Factory.addGetterSetter(H0,"pixelRatio",void 0,(0,Wde.getNumberValidator)());class Yde extends H0{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new oD.SceneContext(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}}es.SceneCanvas=Yde;class Xde extends H0{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new oD.HitContext(this),this.setSize(e.width,e.height)}}es.HitCanvas=Xde;var V0={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DD=void 0;const e=Je,n=tn;t.DD={get isDragging(){let r=!1;return t.DD._dragElements.forEach(i=>{i.dragStatus==="dragging"&&(r=!0)}),r},justDragged:!1,get node(){let r;return t.DD._dragElements.forEach(i=>{r=i.node}),r},_dragElements:new Map,_drag(r){const i=[];t.DD._dragElements.forEach((s,a)=>{const{node:o}=s,l=o.getStage();l.setPointersPositions(r),s.pointerId===void 0&&(s.pointerId=n.Util._getFirstPointerId(r));const u=l._changedPointerPositions.find(d=>d.id===s.pointerId);if(u){if(s.dragStatus!=="dragging"){const d=o.dragDistance();if(Math.max(Math.abs(u.x-s.startPointerPos.x),Math.abs(u.y-s.startPointerPos.y))<d||(o.startDrag({evt:r}),!o.isDragging()))return}o._setDragPosition(r,s),i.push(o)}}),i.forEach(s=>{s.fire("dragmove",{type:"dragmove",target:s,evt:r},!0)})},_endDragBefore(r){const i=[];t.DD._dragElements.forEach(s=>{const{node:a}=s,o=a.getStage();if(r&&o.setPointersPositions(r),!o._changedPointerPositions.find(d=>d.id===s.pointerId))return;(s.dragStatus==="dragging"||s.dragStatus==="stopped")&&(t.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,s.dragStatus="stopped");const u=s.node.getLayer()||s.node instanceof e.Konva.Stage&&s.node;u&&i.indexOf(u)===-1&&i.push(u)}),i.forEach(s=>{s.draw()})},_endDragAfter(r){t.DD._dragElements.forEach((i,s)=>{i.dragStatus==="stopped"&&i.node.fire("dragend",{type:"dragend",target:i.node,evt:r},!0),i.dragStatus!=="dragging"&&t.DD._dragElements.delete(s)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",t.DD._endDragBefore,!0),window.addEventListener("touchend",t.DD._endDragBefore,!0),window.addEventListener("touchcancel",t.DD._endDragBefore,!0),window.addEventListener("mousemove",t.DD._drag),window.addEventListener("touchmove",t.DD._drag),window.addEventListener("mouseup",t.DD._endDragAfter,!1),window.addEventListener("touchend",t.DD._endDragAfter,!1),window.addEventListener("touchcancel",t.DD._endDragAfter,!1))})(V0);Object.defineProperty(Gt,"__esModule",{value:!0});Gt.Node=void 0;const lt=tn,$h=tt,tf=es,oo=Je,vi=V0,pn=Ge,Dm="absoluteOpacity",hm="allEventListeners",la="absoluteTransform",jT="absoluteScale",Tl="canvas",Qde="Change",Zde="children",Jde="konva",o3="listening",TT="mouseenter",AT="mouseleave",OT="set",PT="Shape",Fm=" ",RT="stage",co="transform",efe="Stage",l3="visible",tfe=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(Fm);let nfe=1,Xe=class c3{constructor(e){this._id=nfe++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===co||e===la)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,n){let r=this._cache.get(e);return(r===void 0||(e===co||e===la)&&r.dirty===!0)&&(r=n.call(this),this._cache.set(e,r)),r}_calculate(e,n,r){if(!this._attachedDepsListeners.get(e)){const i=n.map(s=>s+"Change.konva").join(Fm);this.on(i,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,r)}_getCanvasCache(){return this._cache.get(Tl)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===la&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(Tl)){const{scene:e,filter:n,hit:r}=this._cache.get(Tl);lt.Util.releaseCanvas(e,n,r),this._cache.delete(Tl)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){const n=e||{};let r={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let i=Math.ceil(n.width||r.width),s=Math.ceil(n.height||r.height),a=n.pixelRatio,o=n.x===void 0?Math.floor(r.x):n.x,l=n.y===void 0?Math.floor(r.y):n.y,u=n.offset||0,d=n.drawBorder||!1,p=n.hitCanvasPixelRatio||1;if(!i||!s){lt.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const h=Math.abs(Math.round(r.x)-o)>.5?1:0,m=Math.abs(Math.round(r.y)-l)>.5?1:0;i+=u*2+h,s+=u*2+m,o-=u,l-=u;const y=new tf.SceneCanvas({pixelRatio:a,width:i,height:s}),x=new tf.SceneCanvas({pixelRatio:a,width:0,height:0,willReadFrequently:!0}),_=new tf.HitCanvas({pixelRatio:p,width:i,height:s}),v=y.getContext(),w=_.getContext();return _.isCache=!0,y.isCache=!0,this._cache.delete(Tl),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(y.getContext()._context.imageSmoothingEnabled=!1,x.getContext()._context.imageSmoothingEnabled=!1),v.save(),w.save(),v.translate(-o,-l),w.translate(-o,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(Dm),this._clearSelfAndDescendantCache(jT),this.drawScene(y,this),this.drawHit(_,this),this._isUnderCache=!1,v.restore(),w.restore(),d&&(v.save(),v.beginPath(),v.rect(0,0,i,s),v.closePath(),v.setAttr("strokeStyle","red"),v.setAttr("lineWidth",5),v.stroke(),v.restore()),this._cache.set(Tl,{scene:y,filter:x,hit:_,x:o,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(Tl)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,n){const r=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}];let i=1/0,s=1/0,a=-1/0,o=-1/0;const l=this.getAbsoluteTransform(n);return r.forEach(function(u){const d=l.point(u);i===void 0&&(i=a=d.x,s=o=d.y),i=Math.min(i,d.x),s=Math.min(s,d.y),a=Math.max(a,d.x),o=Math.max(o,d.y)}),{x:i,y:s,width:a-i,height:o-s}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();e.translate(n.x,n.y);const r=this._getCachedSceneCanvas(),i=r.pixelRatio;e.drawImage(r._canvas,0,0,r.width/i,r.height/i),e.restore()}_drawCachedHitCanvas(e){const n=this._getCanvasCache(),r=n.hit;e.save(),e.translate(n.x,n.y),e.drawImage(r._canvas,0,0,r.width/r.pixelRatio,r.height/r.pixelRatio),e.restore()}_getCachedSceneCanvas(){let e=this.filters(),n=this._getCanvasCache(),r=n.scene,i=n.filter,s=i.getContext(),a,o,l,u;if(e){if(!this._filterUpToDate){const d=r.pixelRatio;i.setSize(r.width/r.pixelRatio,r.height/r.pixelRatio);try{for(a=e.length,s.clear(),s.drawImage(r._canvas,0,0,r.getWidth()/d,r.getHeight()/d),o=s.getImageData(0,0,i.getWidth(),i.getHeight()),l=0;l<a;l++){if(u=e[l],typeof u!="function"){lt.Util.error("Filter should be type of function, but got "+typeof u+" instead. Please check correct filters");continue}u.call(this,o),s.putImageData(o,0,0)}}catch(p){lt.Util.error("Unable to apply filter. "+p.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return i}return r}on(e,n){if(this._cache&&this._cache.delete(hm),arguments.length===3)return this._delegate.apply(this,arguments);let r=e.split(Fm),i=r.length,s,a,o,l,u;for(s=0;s<i;s++)a=r[s],o=a.split("."),l=o[0],u=o[1]||"",this.eventListeners[l]||(this.eventListeners[l]=[]),this.eventListeners[l].push({name:u,handler:n});return this}off(e,n){let r=(e||"").split(Fm),i=r.length,s,a,o,l,u,d;if(this._cache&&this._cache.delete(hm),!e)for(a in this.eventListeners)this._off(a);for(s=0;s<i;s++)if(o=r[s],l=o.split("."),u=l[0],d=l[1],u)this.eventListeners[u]&&this._off(u,d,n);else for(a in this.eventListeners)this._off(a,d,n);return this}dispatchEvent(e){const n={target:this,type:e.type,evt:e};return this.fire(e.type,n),this}addEventListener(e,n){return this.on(e,function(r){n.call(this,r.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,n,r){const i=this;this.on(e,function(s){const a=s.target.findAncestors(n,!0,i);for(let o=0;o<a.length;o++)s=lt.Util.cloneObject(s),s.currentTarget=a[o],r.call(a[o],s)})}remove(){return this.isDragging()&&this.stopDrag(),vi.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(la),this._clearSelfAndDescendantCache(Dm),this._clearSelfAndDescendantCache(jT),this._clearSelfAndDescendantCache(RT),this._clearSelfAndDescendantCache(l3),this._clearSelfAndDescendantCache(o3)}_remove(){this._clearCaches();const e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){const n="get"+lt.Util._capitalize(e);return lt.Util._isFunction(this[n])?this[n]():this.attrs[e]}getAncestors(){let e=this.getParent(),n=[];for(;e;)n.push(e),e=e.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{let n,r;if(!e)return this;for(n in e)n!==Zde&&(r=OT+lt.Util._capitalize(n),lt.Util._isFunction(this[r])?this[r](e[n]):this._setAttr(n,e[n]))}),this}isListening(){return this._getCache(o3,this._isListening)}_isListening(e){if(!this.listening())return!1;const r=this.getParent();return r&&r!==e&&this!==e?r._isListening(e):!0}isVisible(){return this._getCache(l3,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const r=this.getParent();return r&&r!==e&&this!==e?r._isVisible(e):!0}shouldDrawHit(e,n=!1){if(e)return this._isVisible(e)&&this._isListening(e);const r=this.getLayer();let i=!1;vi.DD._dragElements.forEach(a=>{a.dragStatus==="dragging"&&(a.node.nodeType==="Stage"||a.node.getLayer()===r)&&(i=!0)});const s=!n&&!oo.Konva.hitOnDragEnabled&&(i||oo.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!s}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let e=this.getDepth(),n=this,r=0,i,s,a,o;function l(d){for(i=[],s=d.length,a=0;a<s;a++)o=d[a],r++,o.nodeType!==PT&&(i=i.concat(o.getChildren().slice())),o._id===n._id&&(a=s);i.length>0&&i[0].getDepth()<=e&&l(i)}const u=this.getStage();return n.nodeType!==efe&&u&&l(u.getChildren()),r}getDepth(){let e=0,n=this.parent;for(;n;)e++,n=n.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(co),this._clearSelfAndDescendantCache(la)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;const n=e.getPointerPosition();if(!n)return null;const r=this.getAbsoluteTransform().copy();return r.invert(),r.point(n)}getAbsolutePosition(e){let n=!1,r=this.parent;for(;r;){if(r.isCached()){n=!0;break}r=r.parent}n&&!e&&(e=!0);const i=this.getAbsoluteTransform(e).getMatrix(),s=new lt.Transform,a=this.offset();return s.m=i.slice(),s.translate(a.x,a.y),s.getTranslation()}setAbsolutePosition(e){const{x:n,y:r,...i}=this._clearTransform();this.attrs.x=n,this.attrs.y=r,this._clearCache(co);const s=this._getAbsoluteTransform().copy();return s.invert(),s.translate(e.x,e.y),e={x:this.attrs.x+s.getTranslation().x,y:this.attrs.y+s.getTranslation().y},this._setTransform(i),this.setPosition({x:e.x,y:e.y}),this._clearCache(co),this._clearSelfAndDescendantCache(la),this}_setTransform(e){let n;for(n in e)this.attrs[n]=e[n]}_clearTransform(){const e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){let n=e.x,r=e.y,i=this.x(),s=this.y();return n!==void 0&&(i+=n),r!==void 0&&(s+=r),this.setPosition({x:i,y:s}),this}_eachAncestorReverse(e,n){let r=[],i=this.getParent(),s,a;if(!(n&&n._id===this._id)){for(r.unshift(this);i&&(!n||i._id!==n._id);)r.unshift(i),i=i.parent;for(s=r.length,a=0;a<s;a++)e(r[a])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return lt.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return lt.Util.warn("Node has no parent. moveUp function is ignored."),!1;const e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return lt.Util.warn("Node has no parent. moveDown function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return lt.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return lt.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&lt.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Dm,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let e=this.opacity();const n=this.getParent();return n&&!n._isUnderCache&&(e*=n.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){let e=this.getAttrs(),n,r,i,s,a;const o={attrs:{},className:this.getClassName()};for(n in e)r=e[n],a=lt.Util.isObject(r)&&!lt.Util._isPlainObject(r)&&!lt.Util._isArray(r),!a&&(i=typeof this[n]=="function"&&this[n],delete e[n],s=i?i.call(this):null,e[n]=r,s!==r&&(o.attrs[n]=r));return lt.Util._prepareToStringify(o)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,n,r){const i=[];n&&this._isMatch(e)&&i.push(this);let s=this.parent;for(;s;){if(s===r)return i;s._isMatch(e)&&i.push(s),s=s.parent}return i}isAncestorOf(e){return!1}findAncestor(e,n,r){return this.findAncestors(e,n,r)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);let n=e.replace(/ /g,"").split(","),r=n.length,i,s;for(i=0;i<r;i++)if(s=n[i],lt.Util.isValidSelector(s)||(lt.Util.warn('Selector "'+s+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),lt.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),lt.Util.warn("Konva is awesome, right?")),s.charAt(0)==="#"){if(this.id()===s.slice(1))return!0}else if(s.charAt(0)==="."){if(this.hasName(s.slice(1)))return!0}else if(this.className===s||this.nodeType===s)return!0;return!1}getLayer(){const e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(RT,this._getStage)}_getStage(){const e=this.getParent();return e?e.getStage():null}fire(e,n={},r){return n.target=n.target||this,r?this._fireAndBubble(e,n):this._fire(e,n),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(la,this._getAbsoluteTransform)}_getAbsoluteTransform(e){let n;if(e)return n=new lt.Transform,this._eachAncestorReverse(function(r){const i=r.transformsEnabled();i==="all"?n.multiply(r.getTransform()):i==="position"&&n.translate(r.x()-r.offsetX(),r.y()-r.offsetY())},e),n;{n=this._cache.get(la)||new lt.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();const r=this.transformsEnabled();if(r==="all")n.multiply(this.getTransform());else if(r==="position"){const i=this.attrs.x||0,s=this.attrs.y||0,a=this.attrs.offsetX||0,o=this.attrs.offsetY||0;n.translate(i-a,s-o)}return n.dirty=!1,n}}getAbsoluteScale(e){let n=this;for(;n;)n._isUnderCache&&(e=n),n=n.getParent();const i=this.getAbsoluteTransform(e).decompose();return{x:i.scaleX,y:i.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(co,this._getTransform)}_getTransform(){var e,n;const r=this._cache.get(co)||new lt.Transform;r.reset();const i=this.x(),s=this.y(),a=oo.Konva.getAngle(this.rotation()),o=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,l=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,u=this.attrs.skewX||0,d=this.attrs.skewY||0,p=this.attrs.offsetX||0,h=this.attrs.offsetY||0;return(i!==0||s!==0)&&r.translate(i,s),a!==0&&r.rotate(a),(u!==0||d!==0)&&r.skew(u,d),(o!==1||l!==1)&&r.scale(o,l),(p!==0||h!==0)&&r.translate(-1*p,-1*h),r.dirty=!1,r}clone(e){let n=lt.Util.cloneObject(this.attrs),r,i,s,a,o;for(r in e)n[r]=e[r];const l=new this.constructor(n);for(r in this.eventListeners)for(i=this.eventListeners[r],s=i.length,a=0;a<s;a++)o=i[a],o.name.indexOf(Jde)<0&&(l.eventListeners[r]||(l.eventListeners[r]=[]),l.eventListeners[r].push(o));return l}_toKonvaCanvas(e){e=e||{};const n=this.getClientRect(),r=this.getStage(),i=e.x!==void 0?e.x:Math.floor(n.x),s=e.y!==void 0?e.y:Math.floor(n.y),a=e.pixelRatio||1,o=new tf.SceneCanvas({width:e.width||Math.ceil(n.width)||(r?r.width():0),height:e.height||Math.ceil(n.height)||(r?r.height():0),pixelRatio:a}),l=o.getContext(),u=new tf.SceneCanvas({width:o.width/o.pixelRatio+Math.abs(i),height:o.height/o.pixelRatio+Math.abs(s),pixelRatio:o.pixelRatio});return e.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(i||s)&&l.translate(-1*i,-1*s),this.drawScene(o,void 0,u),l.restore(),o}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};const n=e.mimeType||null,r=e.quality||null,i=this._toKonvaCanvas(e).toDataURL(n,r);return e.callback&&e.callback(i),i}toImage(e){return new Promise((n,r)=>{try{const i=e==null?void 0:e.callback;i&&delete e.callback,lt.Util._urlToImage(this.toDataURL(e),function(s){n(s),i==null||i(s)})}catch(i){r(i)}})}toBlob(e){return new Promise((n,r)=>{try{const i=e==null?void 0:e.callback;i&&delete e.callback,this.toCanvas(e).toBlob(s=>{n(s),i==null||i(s)},e==null?void 0:e.mimeType,e==null?void 0:e.quality)}catch(i){r(i)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():oo.Konva.dragDistance}_off(e,n,r){let i=this.eventListeners[e],s,a,o;for(s=0;s<i.length;s++)if(a=i[s].name,o=i[s].handler,(a!=="konva"||n==="konva")&&(!n||a===n)&&(!r||r===o)){if(i.splice(s,1),i.length===0){delete this.eventListeners[e];break}s--}}_fireChangeEvent(e,n,r){this._fire(e+Qde,{oldVal:n,newVal:r})}addName(e){if(!this.hasName(e)){const n=this.name(),r=n?n+" "+e:e;this.name(r)}return this}hasName(e){if(!e)return!1;const n=this.name();return n?(n||"").split(/\s/g).indexOf(e)!==-1:!1}removeName(e){const n=(this.name()||"").split(/\s/g),r=n.indexOf(e);return r!==-1&&(n.splice(r,1),this.name(n.join(" "))),this}setAttr(e,n){const r=this[OT+lt.Util._capitalize(e)];return lt.Util._isFunction(r)?r.call(this,n):this._setAttr(e,n),this}_requestDraw(){if(oo.Konva.autoDrawEnabled){const e=this.getLayer()||this.getStage();e==null||e.batchDraw()}}_setAttr(e,n){const r=this.attrs[e];r===n&&!lt.Util.isObject(n)||(n==null?delete this.attrs[e]:this.attrs[e]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(e,r,n),this._requestDraw())}_setComponentAttr(e,n,r){let i;r!==void 0&&(i=this.attrs[e],i||(this.attrs[e]=this.getAttr(e)),this.attrs[e][n]=r,this._fireChangeEvent(e,i,r))}_fireAndBubble(e,n,r){if(n&&this.nodeType===PT&&(n.target=this),!((e===TT||e===AT)&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||this.nodeType==="Stage"&&!r))){this._fire(e,n);const s=(e===TT||e===AT)&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!s&&(r&&r.parent?this._fireAndBubble.call(this.parent,e,n,r):this._fireAndBubble.call(this.parent,e,n))}}_getProtoListeners(e){var n,r,i;const s=(n=this._cache.get(hm))!==null&&n!==void 0?n:{};let a=s==null?void 0:s[e];if(a===void 0){a=[];let o=Object.getPrototypeOf(this);for(;o;){const l=(i=(r=o.eventListeners)===null||r===void 0?void 0:r[e])!==null&&i!==void 0?i:[];a.push(...l),o=Object.getPrototypeOf(o)}s[e]=a,this._cache.set(hm,s)}return a}_fire(e,n){n=n||{},n.currentTarget=this,n.type=e;const r=this._getProtoListeners(e);if(r)for(var i=0;i<r.length;i++)r[i].handler.call(this,n);const s=this.eventListeners[e];if(s)for(var i=0;i<s.length;i++)s[i].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){const n=e?e.pointerId:void 0,r=this.getStage(),i=this.getAbsolutePosition();if(!r)return;const s=r._getPointerById(n)||r._changedPointerPositions[0]||i;vi.DD._dragElements.set(this._id,{node:this,startPointerPos:s,offset:{x:s.x-i.x,y:s.y-i.y},dragStatus:"ready",pointerId:n})}startDrag(e,n=!0){vi.DD._dragElements.has(this._id)||this._createDragElement(e);const r=vi.DD._dragElements.get(this._id);r.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},n)}_setDragPosition(e,n){const r=this.getStage()._getPointerById(n.pointerId);if(!r)return;let i={x:r.x-n.offset.x,y:r.y-n.offset.y};const s=this.dragBoundFunc();if(s!==void 0){const a=s.call(this,i,e);a?i=a:lt.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==i.x||this._lastPos.y!==i.y)&&(this.setAbsolutePosition(i),this._requestDraw()),this._lastPos=i}stopDrag(e){const n=vi.DD._dragElements.get(this._id);n&&(n.dragStatus="stopped"),vi.DD._endDragBefore(e),vi.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=vi.DD._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){if(!(!(e.evt.button!==void 0)||oo.Konva.dragButtons.indexOf(e.evt.button)>=0)||this.isDragging())return;let i=!1;vi.DD._dragElements.forEach(s=>{this.isAncestorOf(s.node)&&(i=!0)}),i||this._createDragElement(e)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const n=vi.DD._dragElements.get(this._id),r=n&&n.dragStatus==="dragging",i=n&&n.dragStatus==="ready";r?this.stopDrag():i&&vi.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const n=this.getStage();if(!n)return!1;const r={x:-e.x,y:-e.y,width:n.width()+2*e.x,height:n.height()+2*e.y};return lt.Util.haveIntersection(r,this.getClientRect())}static create(e,n){return lt.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,n)}static _createNode(e,n){let r=c3.prototype.getClassName.call(e),i=e.children,s,a,o;n&&(e.attrs.container=n),oo.Konva[r]||(lt.Util.warn('Can not find a node with class name "'+r+'". Fallback to "Shape".'),r="Shape");const l=oo.Konva[r];if(s=new l(e.attrs),i)for(a=i.length,o=0;o<a;o++)s.add(c3._createNode(i[o]));return s}};Gt.Node=Xe;Xe.prototype.nodeType="Node";Xe.prototype._attrsAffectingSize=[];Xe.prototype.eventListeners={};Xe.prototype.on.call(Xe.prototype,tfe,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(co),this._clearSelfAndDescendantCache(la)});Xe.prototype.on.call(Xe.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(l3)});Xe.prototype.on.call(Xe.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(o3)});Xe.prototype.on.call(Xe.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Dm)});const Tt=$h.Factory.addGetterSetter;Tt(Xe,"zIndex");Tt(Xe,"absolutePosition");Tt(Xe,"position");Tt(Xe,"x",0,(0,pn.getNumberValidator)());Tt(Xe,"y",0,(0,pn.getNumberValidator)());Tt(Xe,"globalCompositeOperation","source-over",(0,pn.getStringValidator)());Tt(Xe,"opacity",1,(0,pn.getNumberValidator)());Tt(Xe,"name","",(0,pn.getStringValidator)());Tt(Xe,"id","",(0,pn.getStringValidator)());Tt(Xe,"rotation",0,(0,pn.getNumberValidator)());$h.Factory.addComponentsGetterSetter(Xe,"scale",["x","y"]);Tt(Xe,"scaleX",1,(0,pn.getNumberValidator)());Tt(Xe,"scaleY",1,(0,pn.getNumberValidator)());$h.Factory.addComponentsGetterSetter(Xe,"skew",["x","y"]);Tt(Xe,"skewX",0,(0,pn.getNumberValidator)());Tt(Xe,"skewY",0,(0,pn.getNumberValidator)());$h.Factory.addComponentsGetterSetter(Xe,"offset",["x","y"]);Tt(Xe,"offsetX",0,(0,pn.getNumberValidator)());Tt(Xe,"offsetY",0,(0,pn.getNumberValidator)());Tt(Xe,"dragDistance",null,(0,pn.getNumberValidator)());Tt(Xe,"width",0,(0,pn.getNumberValidator)());Tt(Xe,"height",0,(0,pn.getNumberValidator)());Tt(Xe,"listening",!0,(0,pn.getBooleanValidator)());Tt(Xe,"preventDefault",!0,(0,pn.getBooleanValidator)());Tt(Xe,"filters",null,function(t){return this._filterUpToDate=!1,t});Tt(Xe,"visible",!0,(0,pn.getBooleanValidator)());Tt(Xe,"transformsEnabled","all",(0,pn.getStringValidator)());Tt(Xe,"size");Tt(Xe,"dragBoundFunc");Tt(Xe,"draggable",!1,(0,pn.getBooleanValidator)());$h.Factory.backCompat(Xe,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var mc={};Object.defineProperty(mc,"__esModule",{value:!0});mc.Container=void 0;const od=tt,i5=Gt,W0=Ge;class gc extends i5.Node{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];const n=this.children||[],r=[];return n.forEach(function(i){e(i)&&r.push(i)}),r}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(let r=0;r<e.length;r++)this.add(e[r]);return this}const n=e[0];return n.getParent()?(n.moveTo(this),this):(this._validateAdd(n),n.index=this.getChildren().length,n.parent=this,n._clearCaches(),this.getChildren().push(n),this._fire("add",{child:n}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){const n=this._generalFind(e,!0);return n.length>0?n[0]:void 0}_generalFind(e,n){const r=[];return this._descendants(i=>{const s=i._isMatch(e);return s&&r.push(i),!!(s&&n)}),r}_descendants(e){let n=!1;const r=this.getChildren();for(const i of r){if(n=e(i),n)return!0;if(i.hasChildren()&&(n=i._descendants(e),n))return!0}return!1}toObject(){const e=i5.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(n=>{e.children.push(n.toObject())}),e}isAncestorOf(e){let n=e.getParent();for(;n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(e){const n=i5.Node.prototype.clone.call(this,e);return this.getChildren().forEach(function(r){n.add(r.clone())}),n}getAllIntersections(e){const n=[];return this.find("Shape").forEach(r=>{r.isVisible()&&r.intersects(e)&&n.push(r)}),n}_clearSelfAndDescendantCache(e){var n;super._clearSelfAndDescendantCache(e),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(r){r._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(n,r){n.index=r}),this._requestDraw()}drawScene(e,n,r){const i=this.getLayer(),s=e||i&&i.getCanvas(),a=s&&s.getContext(),o=this._getCanvasCache(),l=o&&o.scene,u=s&&s.isCache;if(!this.isVisible()&&!u)return this;if(l){a.save();const d=this.getAbsoluteTransform(n).getMatrix();a.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this._drawCachedSceneCanvas(a),a.restore()}else this._drawChildren("drawScene",s,n,r);return this}drawHit(e,n){if(!this.shouldDrawHit(n))return this;const r=this.getLayer(),i=e||r&&r.hitCanvas,s=i&&i.getContext(),a=this._getCanvasCache();if(a&&a.hit){s.save();const l=this.getAbsoluteTransform(n).getMatrix();s.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(s),s.restore()}else this._drawChildren("drawHit",i,n);return this}_drawChildren(e,n,r,i){var s;const a=n&&n.getContext(),o=this.clipWidth(),l=this.clipHeight(),u=this.clipFunc(),d=typeof o=="number"&&typeof l=="number"||u,p=r===this;if(d){a.save();const m=this.getAbsoluteTransform(r);let y=m.getMatrix();a.transform(y[0],y[1],y[2],y[3],y[4],y[5]),a.beginPath();let x;if(u)x=u.call(this,a,this);else{const _=this.clipX(),v=this.clipY();a.rect(_||0,v||0,o,l)}a.clip.apply(a,x),y=m.copy().invert().getMatrix(),a.transform(y[0],y[1],y[2],y[3],y[4],y[5])}const h=!p&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";h&&(a.save(),a._applyGlobalCompositeOperation(this)),(s=this.children)===null||s===void 0||s.forEach(function(m){m[e](n,r,i)}),h&&a.restore(),d&&a.restore()}getClientRect(e={}){var n;const r=e.skipTransform,i=e.relativeTo;let s,a,o,l,u={x:1/0,y:1/0,width:0,height:0};const d=this;(n=this.children)===null||n===void 0||n.forEach(function(m){if(!m.visible())return;const y=m.getClientRect({relativeTo:d,skipShadow:e.skipShadow,skipStroke:e.skipStroke});y.width===0&&y.height===0||(s===void 0?(s=y.x,a=y.y,o=y.x+y.width,l=y.y+y.height):(s=Math.min(s,y.x),a=Math.min(a,y.y),o=Math.max(o,y.x+y.width),l=Math.max(l,y.y+y.height)))});const p=this.find("Shape");let h=!1;for(let m=0;m<p.length;m++)if(p[m]._isVisible(this)){h=!0;break}return h&&s!==void 0?u={x:s,y:a,width:o-s,height:l-a}:u={x:0,y:0,width:0,height:0},r?u:this._transformedRect(u,i)}}mc.Container=gc;od.Factory.addComponentsGetterSetter(gc,"clip",["x","y","width","height"]);od.Factory.addGetterSetter(gc,"clipX",void 0,(0,W0.getNumberValidator)());od.Factory.addGetterSetter(gc,"clipY",void 0,(0,W0.getNumberValidator)());od.Factory.addGetterSetter(gc,"clipWidth",void 0,(0,W0.getNumberValidator)());od.Factory.addGetterSetter(gc,"clipHeight",void 0,(0,W0.getNumberValidator)());od.Factory.addGetterSetter(gc,"clipFunc");var cD={},Zo={};Object.defineProperty(Zo,"__esModule",{value:!0});Zo.getCapturedShape=ife;Zo.createEvent=AN;Zo.hasPointerCapture=sfe;Zo.setPointerCapture=afe;Zo.releaseCapture=dD;const rfe=Je,gh=new Map,uD=rfe.Konva._global.PointerEvent!==void 0;function ife(t){return gh.get(t)}function AN(t){return{evt:t,pointerId:t.pointerId}}function sfe(t,e){return gh.get(t)===e}function afe(t,e){dD(t),e.getStage()&&(gh.set(t,e),uD&&e._fire("gotpointercapture",AN(new PointerEvent("gotpointercapture"))))}function dD(t,e){const n=gh.get(t);if(!n)return;const r=n.getStage();r&&r.content,gh.delete(t),uD&&n._fire("lostpointercapture",AN(new PointerEvent("lostpointercapture")))}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Stage=t.stages=void 0;const e=tn,n=tt,r=mc,i=Je,s=es,a=V0,o=Je,l=Zo,u="Stage",d="string",p="px",h="mouseout",m="mouseleave",y="mouseover",x="mouseenter",_="mousemove",v="mousedown",w="mouseup",b="pointermove",N="pointerdown",E="pointerup",A="pointercancel",P="lostpointercapture",T="pointerout",M="pointerleave",k="pointerover",j="pointerenter",O="contextmenu",q="touchstart",I="touchend",D="touchmove",U="touchcancel",W="wheel",Y=5,H=[[x,"_pointerenter"],[v,"_pointerdown"],[_,"_pointermove"],[w,"_pointerup"],[m,"_pointerleave"],[q,"_pointerdown"],[D,"_pointermove"],[I,"_pointerup"],[U,"_pointercancel"],[y,"_pointerover"],[W,"_wheel"],[O,"_contextmenu"],[N,"_pointerdown"],[b,"_pointermove"],[E,"_pointerup"],[A,"_pointercancel"],[P,"_lostpointercapture"]],B={mouse:{[T]:h,[M]:m,[k]:y,[j]:x,[b]:_,[N]:v,[E]:w,[A]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[T]:"touchout",[M]:"touchleave",[k]:"touchover",[j]:"touchenter",[b]:D,[N]:q,[E]:I,[A]:U,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[T]:T,[M]:M,[k]:k,[j]:j,[b]:b,[N]:N,[E]:E,[A]:A,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},L=X=>X.indexOf("pointer")>=0?"pointer":X.indexOf("touch")>=0?"touch":"mouse",z=X=>{const G=L(X);if(G==="pointer")return i.Konva.pointerEventsEnabled&&B.pointer;if(G==="touch")return B.touch;if(G==="mouse")return B.mouse};function K(X={}){return(X.clipFunc||X.clipWidth||X.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),X}const J="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";t.stages=[];class ne extends r.Container{constructor(G){super(K(G)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),t.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{K(this.attrs)}),this._checkVisibility()}_validateAdd(G){const te=G.getType()==="Layer",re=G.getType()==="FastLayer";te||re||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const G=this.visible()?"":"none";this.content.style.display=G}setContainer(G){if(typeof G===d){if(G.charAt(0)==="."){const re=G.slice(1);G=document.getElementsByClassName(re)[0]}else{var te;G.charAt(0)!=="#"?te=G:te=G.slice(1),G=document.getElementById(te)}if(!G)throw"Can not find container in document with id "+te}return this._setAttr("container",G),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),G.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){let G=this.children,te=G.length,re;for(re=0;re<te;re++)G[re].clear();return this}clone(G){return G||(G={}),G.container=typeof document<"u"&&document.createElement("div"),r.Container.prototype.clone.call(this,G)}destroy(){super.destroy();const G=this.content;G&&e.Util._isInDocument(G)&&this.container().removeChild(G);const te=t.stages.indexOf(this);return te>-1&&t.stages.splice(te,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const G=this._pointerPositions[0]||this._changedPointerPositions[0];return G?{x:G.x,y:G.y}:(e.Util.warn(J),null)}_getPointerById(G){return this._pointerPositions.find(te=>te.id===G)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(G){G=G||{},G.x=G.x||0,G.y=G.y||0,G.width=G.width||this.width(),G.height=G.height||this.height();const te=new s.SceneCanvas({width:G.width,height:G.height,pixelRatio:G.pixelRatio||1}),re=te.getContext()._context,Q=this.children;return(G.x||G.y)&&re.translate(-1*G.x,-1*G.y),Q.forEach(function(se){if(!se.isVisible())return;const de=se._toKonvaCanvas(G);re.drawImage(de._canvas,G.x,G.y,de.getWidth()/de.getPixelRatio(),de.getHeight()/de.getPixelRatio())}),te}getIntersection(G){if(!G)return null;let te=this.children,re=te.length,Q=re-1,se;for(se=Q;se>=0;se--){const de=te[se].getIntersection(G);if(de)return de}return null}_resizeDOM(){const G=this.width(),te=this.height();this.content&&(this.content.style.width=G+p,this.content.style.height=te+p),this.bufferCanvas.setSize(G,te),this.bufferHitCanvas.setSize(G,te),this.children.forEach(re=>{re.setSize({width:G,height:te}),re.draw()})}add(G,...te){if(arguments.length>1){for(let Q=0;Q<arguments.length;Q++)this.add(arguments[Q]);return this}super.add(G);const re=this.children.length;return re>Y&&e.Util.warn("The stage has "+re+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),G.setSize({width:this.width(),height:this.height()}),G.draw(),i.Konva.isBrowser&&this.content.appendChild(G.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(G){return l.hasPointerCapture(G,this)}setPointerCapture(G){l.setPointerCapture(G,this)}releaseCapture(G){l.releaseCapture(G,this)}getLayers(){return this.children}_bindContentEvents(){i.Konva.isBrowser&&H.forEach(([G,te])=>{this.content.addEventListener(G,re=>{this[te](re)},{passive:!1})})}_pointerenter(G){this.setPointersPositions(G);const te=z(G.type);te&&this._fire(te.pointerenter,{evt:G,target:this,currentTarget:this})}_pointerover(G){this.setPointersPositions(G);const te=z(G.type);te&&this._fire(te.pointerover,{evt:G,target:this,currentTarget:this})}_getTargetShape(G){let te=this[G+"targetShape"];return te&&!te.getStage()&&(te=null),te}_pointerleave(G){const te=z(G.type),re=L(G.type);if(!te)return;this.setPointersPositions(G);const Q=this._getTargetShape(re),se=!(i.Konva.isDragging()||i.Konva.isTransforming())||i.Konva.hitOnDragEnabled;Q&&se?(Q._fireAndBubble(te.pointerout,{evt:G}),Q._fireAndBubble(te.pointerleave,{evt:G}),this._fire(te.pointerleave,{evt:G,target:this,currentTarget:this}),this[re+"targetShape"]=null):se&&(this._fire(te.pointerleave,{evt:G,target:this,currentTarget:this}),this._fire(te.pointerout,{evt:G,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(G){const te=z(G.type),re=L(G.type);if(!te)return;this.setPointersPositions(G);let Q=!1;this._changedPointerPositions.forEach(se=>{const de=this.getIntersection(se);if(a.DD.justDragged=!1,i.Konva["_"+re+"ListenClick"]=!0,!de||!de.isListening()){this[re+"ClickStartShape"]=void 0;return}i.Konva.capturePointerEventsEnabled&&de.setPointerCapture(se.id),this[re+"ClickStartShape"]=de,de._fireAndBubble(te.pointerdown,{evt:G,pointerId:se.id}),Q=!0;const le=G.type.indexOf("touch")>=0;de.preventDefault()&&G.cancelable&&le&&G.preventDefault()}),Q||this._fire(te.pointerdown,{evt:G,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(G){const te=z(G.type),re=L(G.type);if(!te||(i.Konva.isDragging()&&a.DD.node.preventDefault()&&G.cancelable&&G.preventDefault(),this.setPointersPositions(G),!(!(i.Konva.isDragging()||i.Konva.isTransforming())||i.Konva.hitOnDragEnabled)))return;const se={};let de=!1;const le=this._getTargetShape(re);this._changedPointerPositions.forEach(ue=>{const he=l.getCapturedShape(ue.id)||this.getIntersection(ue),qe=ue.id,we={evt:G,pointerId:qe},ae=le!==he;if(ae&&le&&(le._fireAndBubble(te.pointerout,{...we},he),le._fireAndBubble(te.pointerleave,{...we},he)),he){if(se[he._id])return;se[he._id]=!0}he&&he.isListening()?(de=!0,ae&&(he._fireAndBubble(te.pointerover,{...we},le),he._fireAndBubble(te.pointerenter,{...we},le),this[re+"targetShape"]=he),he._fireAndBubble(te.pointermove,{...we})):le&&(this._fire(te.pointerover,{evt:G,target:this,currentTarget:this,pointerId:qe}),this[re+"targetShape"]=null)}),de||this._fire(te.pointermove,{evt:G,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(G){const te=z(G.type),re=L(G.type);if(!te)return;this.setPointersPositions(G);const Q=this[re+"ClickStartShape"],se=this[re+"ClickEndShape"],de={};let le=!1;this._changedPointerPositions.forEach(ue=>{const he=l.getCapturedShape(ue.id)||this.getIntersection(ue);if(he){if(he.releaseCapture(ue.id),de[he._id])return;de[he._id]=!0}const qe=ue.id,we={evt:G,pointerId:qe};let ae=!1;i.Konva["_"+re+"InDblClickWindow"]?(ae=!0,clearTimeout(this[re+"DblTimeout"])):a.DD.justDragged||(i.Konva["_"+re+"InDblClickWindow"]=!0,clearTimeout(this[re+"DblTimeout"])),this[re+"DblTimeout"]=setTimeout(function(){i.Konva["_"+re+"InDblClickWindow"]=!1},i.Konva.dblClickWindow),he&&he.isListening()?(le=!0,this[re+"ClickEndShape"]=he,he._fireAndBubble(te.pointerup,{...we}),i.Konva["_"+re+"ListenClick"]&&Q&&Q===he&&(he._fireAndBubble(te.pointerclick,{...we}),ae&&se&&se===he&&he._fireAndBubble(te.pointerdblclick,{...we}))):(this[re+"ClickEndShape"]=null,i.Konva["_"+re+"ListenClick"]&&this._fire(te.pointerclick,{evt:G,target:this,currentTarget:this,pointerId:qe}),ae&&this._fire(te.pointerdblclick,{evt:G,target:this,currentTarget:this,pointerId:qe}))}),le||this._fire(te.pointerup,{evt:G,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),i.Konva["_"+re+"ListenClick"]=!1,G.cancelable&&re!=="touch"&&G.preventDefault()}_contextmenu(G){this.setPointersPositions(G);const te=this.getIntersection(this.getPointerPosition());te&&te.isListening()?te._fireAndBubble(O,{evt:G}):this._fire(O,{evt:G,target:this,currentTarget:this})}_wheel(G){this.setPointersPositions(G);const te=this.getIntersection(this.getPointerPosition());te&&te.isListening()?te._fireAndBubble(W,{evt:G}):this._fire(W,{evt:G,target:this,currentTarget:this})}_pointercancel(G){this.setPointersPositions(G);const te=l.getCapturedShape(G.pointerId)||this.getIntersection(this.getPointerPosition());te&&te._fireAndBubble(E,l.createEvent(G)),l.releaseCapture(G.pointerId)}_lostpointercapture(G){l.releaseCapture(G.pointerId)}setPointersPositions(G){let te=this._getContentPosition(),re=null,Q=null;G=G||window.event,G.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(G.touches,se=>{this._pointerPositions.push({id:se.identifier,x:(se.clientX-te.left)/te.scaleX,y:(se.clientY-te.top)/te.scaleY})}),Array.prototype.forEach.call(G.changedTouches||G.touches,se=>{this._changedPointerPositions.push({id:se.identifier,x:(se.clientX-te.left)/te.scaleX,y:(se.clientY-te.top)/te.scaleY})})):(re=(G.clientX-te.left)/te.scaleX,Q=(G.clientY-te.top)/te.scaleY,this.pointerPos={x:re,y:Q},this._pointerPositions=[{x:re,y:Q,id:e.Util._getFirstPointerId(G)}],this._changedPointerPositions=[{x:re,y:Q,id:e.Util._getFirstPointerId(G)}])}_setPointerPosition(G){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(G)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const G=this.content.getBoundingClientRect();return{top:G.top,left:G.left,scaleX:G.width/this.content.clientWidth||1,scaleY:G.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new s.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new s.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!i.Konva.isBrowser)return;const G=this.container();if(!G)throw"Stage has no container. A container is required.";G.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),G.appendChild(this.content),this._resizeDOM()}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(G){G.batchDraw()}),this}}t.Stage=ne,ne.prototype.nodeType=u,(0,o._registerNode)(ne),n.Factory.addGetterSetter(ne,"container"),i.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{t.stages.forEach(X=>{X.batchDraw()})})})(cD);var Uh={},On={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=t.shapes=void 0;const e=Je,n=tn,r=tt,i=Gt,s=Ge,a=Je,o=Zo,l="hasShadow",u="shadowRGBA",d="patternImage",p="linearGradient",h="radialGradient";let m;function y(){return m||(m=n.Util.createCanvasElement().getContext("2d"),m)}t.shapes={};function x(M){const k=this.attrs.fillRule;k?M.fill(k):M.fill()}function _(M){M.stroke()}function v(M){const k=this.attrs.fillRule;k?M.fill(k):M.fill()}function w(M){M.stroke()}function b(){this._clearCache(l)}function N(){this._clearCache(u)}function E(){this._clearCache(d)}function A(){this._clearCache(p)}function P(){this._clearCache(h)}class T extends i.Node{constructor(k){super(k);let j;for(;j=n.Util.getRandomColor(),!(j&&!(j in t.shapes)););this.colorKey=j,t.shapes[j]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(l,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(d,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const j=y().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(j&&j.setTransform){const O=new n.Transform;O.translate(this.fillPatternX(),this.fillPatternY()),O.rotate(e.Konva.getAngle(this.fillPatternRotation())),O.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),O.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const q=O.getMatrix(),I=typeof DOMMatrix>"u"?{a:q[0],b:q[1],c:q[2],d:q[3],e:q[4],f:q[5]}:new DOMMatrix(q);j.setTransform(I)}return j}}_getLinearGradient(){return this._getCache(p,this.__getLinearGradient)}__getLinearGradient(){const k=this.fillLinearGradientColorStops();if(k){const j=y(),O=this.fillLinearGradientStartPoint(),q=this.fillLinearGradientEndPoint(),I=j.createLinearGradient(O.x,O.y,q.x,q.y);for(let D=0;D<k.length;D+=2)I.addColorStop(k[D],k[D+1]);return I}}_getRadialGradient(){return this._getCache(h,this.__getRadialGradient)}__getRadialGradient(){const k=this.fillRadialGradientColorStops();if(k){const j=y(),O=this.fillRadialGradientStartPoint(),q=this.fillRadialGradientEndPoint(),I=j.createRadialGradient(O.x,O.y,this.fillRadialGradientStartRadius(),q.x,q.y,this.fillRadialGradientEndRadius());for(let D=0;D<k.length;D+=2)I.addColorStop(k[D],k[D+1]);return I}}getShadowRGBA(){return this._getCache(u,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const k=n.Util.colorToRGBA(this.shadowColor());if(k)return"rgba("+k.r+","+k.g+","+k.b+","+k.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const k=this.hitStrokeWidth();return k==="auto"?this.hasStroke():this.strokeEnabled()&&!!k}intersects(k){const j=this.getStage();if(!j)return!1;const O=j.bufferHitCanvas;return O.getContext().clear(),this.drawHit(O,void 0,!0),O.context.getImageData(Math.round(k.x),Math.round(k.y),1,1).data[3]>0}destroy(){return i.Node.prototype.destroy.call(this),delete t.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(k){var j;if(!((j=this.attrs.perfectDrawEnabled)!==null&&j!==void 0?j:!0))return!1;const q=k||this.hasFill(),I=this.hasStroke(),D=this.getAbsoluteOpacity()!==1;if(q&&I&&D)return!0;const U=this.hasShadow(),W=this.shadowForStrokeEnabled();return!!(q&&I&&U&&W)}setStrokeHitEnabled(k){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),k?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const k=this.size();return{x:this._centroid?-k.width/2:0,y:this._centroid?-k.height/2:0,width:k.width,height:k.height}}getClientRect(k={}){let j=!1,O=this.getParent();for(;O;){if(O.isCached()){j=!0;break}O=O.getParent()}const q=k.skipTransform,I=k.relativeTo||j&&this.getStage()||void 0,D=this.getSelfRect(),W=!k.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,Y=D.width+W,H=D.height+W,B=!k.skipShadow&&this.hasShadow(),L=B?this.shadowOffsetX():0,z=B?this.shadowOffsetY():0,K=Y+Math.abs(L),J=H+Math.abs(z),ne=B&&this.shadowBlur()||0,X=K+ne*2,G=J+ne*2,te={width:X,height:G,x:-(W/2+ne)+Math.min(L,0)+D.x,y:-(W/2+ne)+Math.min(z,0)+D.y};return q?te:this._transformedRect(te,I)}drawScene(k,j,O){const q=this.getLayer();let I=k||q.getCanvas(),D=I.getContext(),U=this._getCanvasCache(),W=this.getSceneFunc(),Y=this.hasShadow(),H,B;const L=I.isCache,z=j===this;if(!this.isVisible()&&!z)return this;if(U){D.save();const J=this.getAbsoluteTransform(j).getMatrix();return D.transform(J[0],J[1],J[2],J[3],J[4],J[5]),this._drawCachedSceneCanvas(D),D.restore(),this}if(!W)return this;if(D.save(),this._useBufferCanvas()&&!L){H=this.getStage();const J=O||H.bufferCanvas;B=J.getContext(),B.clear(),B.save(),B._applyLineJoin(this);var K=this.getAbsoluteTransform(j).getMatrix();B.transform(K[0],K[1],K[2],K[3],K[4],K[5]),W.call(this,B,this),B.restore();const ne=J.pixelRatio;Y&&D._applyShadow(this),D._applyOpacity(this),D._applyGlobalCompositeOperation(this),D.drawImage(J._canvas,0,0,J.width/ne,J.height/ne)}else{if(D._applyLineJoin(this),!z){var K=this.getAbsoluteTransform(j).getMatrix();D.transform(K[0],K[1],K[2],K[3],K[4],K[5]),D._applyOpacity(this),D._applyGlobalCompositeOperation(this)}Y&&D._applyShadow(this),W.call(this,D,this)}return D.restore(),this}drawHit(k,j,O=!1){if(!this.shouldDrawHit(j,O))return this;const q=this.getLayer(),I=k||q.hitCanvas,D=I&&I.getContext(),U=this.hitFunc()||this.sceneFunc(),W=this._getCanvasCache(),Y=W&&W.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),Y){D.save();const B=this.getAbsoluteTransform(j).getMatrix();return D.transform(B[0],B[1],B[2],B[3],B[4],B[5]),this._drawCachedHitCanvas(D),D.restore(),this}if(!U)return this;if(D.save(),D._applyLineJoin(this),!(this===j)){const B=this.getAbsoluteTransform(j).getMatrix();D.transform(B[0],B[1],B[2],B[3],B[4],B[5])}return U.call(this,D,this),D.restore(),this}drawHitFromCache(k=0){let j=this._getCanvasCache(),O=this._getCachedSceneCanvas(),q=j.hit,I=q.getContext(),D=q.getWidth(),U=q.getHeight(),W,Y,H,B,L,z;I.clear(),I.drawImage(O._canvas,0,0,D,U);try{for(W=I.getImageData(0,0,D,U),Y=W.data,H=Y.length,B=n.Util._hexToRgb(this.colorKey),L=0;L<H;L+=4)z=Y[L+3],z>k?(Y[L]=B.r,Y[L+1]=B.g,Y[L+2]=B.b,Y[L+3]=255):Y[L+3]=0;I.putImageData(W,0,0)}catch(K){n.Util.error("Unable to draw hit graph from cached scene canvas. "+K.message)}return this}hasPointerCapture(k){return o.hasPointerCapture(k,this)}setPointerCapture(k){o.setPointerCapture(k,this)}releaseCapture(k){o.releaseCapture(k,this)}}t.Shape=T,T.prototype._fillFunc=x,T.prototype._strokeFunc=_,T.prototype._fillFuncHit=v,T.prototype._strokeFuncHit=w,T.prototype._centroid=!1,T.prototype.nodeType="Shape",(0,a._registerNode)(T),T.prototype.eventListeners={},T.prototype.on.call(T.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",b),T.prototype.on.call(T.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",N),T.prototype.on.call(T.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",E),T.prototype.on.call(T.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",A),T.prototype.on.call(T.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",P),r.Factory.addGetterSetter(T,"stroke",void 0,(0,s.getStringOrGradientValidator)()),r.Factory.addGetterSetter(T,"strokeWidth",2,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(T,"fillAfterStrokeEnabled",!1),r.Factory.addGetterSetter(T,"hitStrokeWidth","auto",(0,s.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(T,"strokeHitEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(T,"perfectDrawEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(T,"shadowForStrokeEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(T,"lineJoin"),r.Factory.addGetterSetter(T,"lineCap"),r.Factory.addGetterSetter(T,"sceneFunc"),r.Factory.addGetterSetter(T,"hitFunc"),r.Factory.addGetterSetter(T,"dash"),r.Factory.addGetterSetter(T,"dashOffset",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(T,"shadowColor",void 0,(0,s.getStringValidator)()),r.Factory.addGetterSetter(T,"shadowBlur",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(T,"shadowOpacity",1,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(T,"shadowOffset",["x","y"]),r.Factory.addGetterSetter(T,"shadowOffsetX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(T,"shadowOffsetY",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(T,"fillPatternImage"),r.Factory.addGetterSetter(T,"fill",void 0,(0,s.getStringOrGradientValidator)()),r.Factory.addGetterSetter(T,"fillPatternX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(T,"fillPatternY",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(T,"fillLinearGradientColorStops"),r.Factory.addGetterSetter(T,"strokeLinearGradientColorStops"),r.Factory.addGetterSetter(T,"fillRadialGradientStartRadius",0),r.Factory.addGetterSetter(T,"fillRadialGradientEndRadius",0),r.Factory.addGetterSetter(T,"fillRadialGradientColorStops"),r.Factory.addGetterSetter(T,"fillPatternRepeat","repeat"),r.Factory.addGetterSetter(T,"fillEnabled",!0),r.Factory.addGetterSetter(T,"strokeEnabled",!0),r.Factory.addGetterSetter(T,"shadowEnabled",!0),r.Factory.addGetterSetter(T,"dashEnabled",!0),r.Factory.addGetterSetter(T,"strokeScaleEnabled",!0),r.Factory.addGetterSetter(T,"fillPriority","color"),r.Factory.addComponentsGetterSetter(T,"fillPatternOffset",["x","y"]),r.Factory.addGetterSetter(T,"fillPatternOffsetX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(T,"fillPatternOffsetY",0,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(T,"fillPatternScale",["x","y"]),r.Factory.addGetterSetter(T,"fillPatternScaleX",1,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(T,"fillPatternScaleY",1,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(T,"fillLinearGradientStartPoint",["x","y"]),r.Factory.addComponentsGetterSetter(T,"strokeLinearGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(T,"fillLinearGradientStartPointX",0),r.Factory.addGetterSetter(T,"strokeLinearGradientStartPointX",0),r.Factory.addGetterSetter(T,"fillLinearGradientStartPointY",0),r.Factory.addGetterSetter(T,"strokeLinearGradientStartPointY",0),r.Factory.addComponentsGetterSetter(T,"fillLinearGradientEndPoint",["x","y"]),r.Factory.addComponentsGetterSetter(T,"strokeLinearGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(T,"fillLinearGradientEndPointX",0),r.Factory.addGetterSetter(T,"strokeLinearGradientEndPointX",0),r.Factory.addGetterSetter(T,"fillLinearGradientEndPointY",0),r.Factory.addGetterSetter(T,"strokeLinearGradientEndPointY",0),r.Factory.addComponentsGetterSetter(T,"fillRadialGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(T,"fillRadialGradientStartPointX",0),r.Factory.addGetterSetter(T,"fillRadialGradientStartPointY",0),r.Factory.addComponentsGetterSetter(T,"fillRadialGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(T,"fillRadialGradientEndPointX",0),r.Factory.addGetterSetter(T,"fillRadialGradientEndPointY",0),r.Factory.addGetterSetter(T,"fillPatternRotation",0),r.Factory.addGetterSetter(T,"fillRule",void 0,(0,s.getStringValidator)()),r.Factory.backCompat(T,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(On);Object.defineProperty(Uh,"__esModule",{value:!0});Uh.Layer=void 0;const aa=tn,s5=mc,Gc=Gt,ON=tt,LT=es,ofe=Ge,lfe=On,cfe=Je,ufe="#",dfe="beforeDraw",ffe="draw",fD=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],hfe=fD.length;let ld=class extends s5.Container{constructor(e){super(e),this.canvas=new LT.SceneCanvas,this.hitCanvas=new LT.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);const n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),e<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[e+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Gc.Node.prototype.moveToTop.call(this);const e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!Gc.Node.prototype.moveUp.call(this))return!1;const n=this.getStage();return!n||!n.content?!1:(n.content.removeChild(this.getNativeCanvasElement()),this.index<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Gc.Node.prototype.moveDown.call(this)){const e=this.getStage();if(e){const n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Gc.Node.prototype.moveToBottom.call(this)){const e=this.getStage();if(e){const n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const e=this.getNativeCanvasElement();return Gc.Node.prototype.remove.call(this),e&&e.parentNode&&aa.Util._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:n}){return this.canvas.setSize(e,n),this.hitCanvas.setSize(e,n),this._setSmoothEnabled(),this}_validateAdd(e){const n=e.getType();n!=="Group"&&n!=="Shape"&&aa.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e=e||{},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),Gc.Node.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){aa.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){aa.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,aa.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;let n=1,r=!1;for(;;){for(let i=0;i<hfe;i++){const s=fD[i],a=this._getIntersection({x:e.x+s.x*n,y:e.y+s.y*n}),o=a.shape;if(o)return o;if(r=!!a.antialiased,!a.antialiased)break}if(r)n+=1;else return null}}_getIntersection(e){const n=this.hitCanvas.pixelRatio,r=this.hitCanvas.context.getImageData(Math.round(e.x*n),Math.round(e.y*n),1,1).data,i=r[3];if(i===255){const s=aa.Util._rgbToHex(r[0],r[1],r[2]),a=lfe.shapes[ufe+s];return a?{shape:a}:{antialiased:!0}}else if(i>0)return{antialiased:!0};return{}}drawScene(e,n){const r=this.getLayer(),i=e||r&&r.getCanvas();return this._fire(dfe,{node:this}),this.clearBeforeDraw()&&i.getContext().clear(),s5.Container.prototype.drawScene.call(this,i,n),this._fire(ffe,{node:this}),this}drawHit(e,n){const r=this.getLayer(),i=e||r&&r.hitCanvas;return r&&r.clearBeforeDraw()&&r.getHitCanvas().getContext().clear(),s5.Container.prototype.drawHit.call(this,i,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){aa.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return aa.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const e=this.parent;!!this.hitCanvas._canvas.parentNode?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}destroy(){return aa.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};Uh.Layer=ld;ld.prototype.nodeType="Layer";(0,cfe._registerNode)(ld);ON.Factory.addGetterSetter(ld,"imageSmoothingEnabled",!0);ON.Factory.addGetterSetter(ld,"clearBeforeDraw",!0);ON.Factory.addGetterSetter(ld,"hitGraphEnabled",!0,(0,ofe.getBooleanValidator)());var K0={};Object.defineProperty(K0,"__esModule",{value:!0});K0.FastLayer=void 0;const pfe=tn,mfe=Uh,gfe=Je;class PN extends mfe.Layer{constructor(e){super(e),this.listening(!1),pfe.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}K0.FastLayer=PN;PN.prototype.nodeType="FastLayer";(0,gfe._registerNode)(PN);var cd={};Object.defineProperty(cd,"__esModule",{value:!0});cd.Group=void 0;const vfe=tn,yfe=mc,xfe=Je;class RN extends yfe.Container{_validateAdd(e){const n=e.getType();n!=="Group"&&n!=="Shape"&&vfe.Util.throw("You may only add groups and shapes to groups.")}}cd.Group=RN;RN.prototype.nodeType="Group";(0,xfe._registerNode)(RN);var ud={};Object.defineProperty(ud,"__esModule",{value:!0});ud.Animation=void 0;const a5=Je,IT=tn,o5=function(){return a5.glob.performance&&a5.glob.performance.now?function(){return a5.glob.performance.now()}:function(){return new Date().getTime()}}();class js{constructor(e,n){this.id=js.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:o5(),frameRate:0},this.func=e,this.setLayers(n)}setLayers(e){let n=[];return e&&(n=Array.isArray(e)?e:[e]),this.layers=n,this}getLayers(){return this.layers}addLayer(e){const n=this.layers,r=n.length;for(let i=0;i<r;i++)if(n[i]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const n=js.animations,r=n.length;for(let i=0;i<r;i++)if(n[i].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=o5(),js._addAnimation(this),this}stop(){return js._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const n=e.id,r=this.animations,i=r.length;for(let s=0;s<i;s++)if(r[s].id===n){this.animations.splice(s,1);break}}static _runFrames(){const e={},n=this.animations;for(let r=0;r<n.length;r++){const i=n[r],s=i.layers,a=i.func;i._updateFrameObject(o5());const o=s.length;let l;if(a?l=a.call(i,i.frame)!==!1:l=!0,!!l)for(let u=0;u<o;u++){const d=s[u];d._id!==void 0&&(e[d._id]=d)}}for(const r in e)e.hasOwnProperty(r)&&e[r].batchDraw()}static _animationLoop(){const e=js;e.animations.length?(e._runFrames(),IT.Util.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,IT.Util.requestAnimFrame(this._animationLoop))}}ud.Animation=js;js.animations=[];js.animIdCounter=0;js.animRunning=!1;var hD={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Easings=t.Tween=void 0;const e=tn,n=ud,r=Gt,i=Je;let s={node:1,duration:1,easing:1,onFinish:1,yoyo:1},a=1,o=2,l=3,u=0,d=["fill","stroke","shadowColor"];class p{constructor(y,x,_,v,w,b,N){this.prop=y,this.propFunc=x,this.begin=v,this._pos=v,this.duration=b,this._change=0,this.prevPos=0,this.yoyo=N,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=_,this._change=w-this.begin,this.pause()}fire(y){const x=this[y];x&&x()}setTime(y){y>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():y<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=y,this.update())}getTime(){return this._time}setPosition(y){this.prevPos=this._pos,this.propFunc(y),this._pos=y}getPosition(y){return y===void 0&&(y=this._time),this.func(y,this.begin,this._change,this.duration)}play(){this.state=o,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=l,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(y){this.pause(),this._time=y,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const y=this.getTimer()-this._startTime;this.state===o?this.setTime(y):this.state===l&&this.setTime(this.duration-y)}pause(){this.state=a,this.fire("onPause")}getTimer(){return new Date().getTime()}}class h{constructor(y){let x=this,_=y.node,v=_._id,w,b=y.easing||t.Easings.Linear,N=!!y.yoyo,E;typeof y.duration>"u"?w=.3:y.duration===0?w=.001:w=y.duration,this.node=_,this._id=u++;const A=_.getLayer()||(_ instanceof i.Konva.Stage?_.getLayers():null);A||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){x.tween.onEnterFrame()},A),this.tween=new p(E,function(P){x._tweenFunc(P)},b,0,1,w*1e3,N),this._addListeners(),h.attrs[v]||(h.attrs[v]={}),h.attrs[v][this._id]||(h.attrs[v][this._id]={}),h.tweens[v]||(h.tweens[v]={});for(E in y)s[E]===void 0&&this._addAttr(E,y[E]);this.reset(),this.onFinish=y.onFinish,this.onReset=y.onReset,this.onUpdate=y.onUpdate}_addAttr(y,x){let _=this.node,v=_._id,w,b,N,E,A,P,T,M;if(N=h.tweens[v][y],N&&delete h.attrs[v][N][y],w=_.getAttr(y),e.Util._isArray(x))if(b=[],A=Math.max(x.length,w.length),y==="points"&&x.length!==w.length&&(x.length>w.length?(T=w,w=e.Util._prepareArrayForTween(w,x,_.closed())):(P=x,x=e.Util._prepareArrayForTween(x,w,_.closed()))),y.indexOf("fill")===0)for(E=0;E<A;E++)if(E%2===0)b.push(x[E]-w[E]);else{const k=e.Util.colorToRGBA(w[E]);M=e.Util.colorToRGBA(x[E]),w[E]=k,b.push({r:M.r-k.r,g:M.g-k.g,b:M.b-k.b,a:M.a-k.a})}else for(E=0;E<A;E++)b.push(x[E]-w[E]);else d.indexOf(y)!==-1?(w=e.Util.colorToRGBA(w),M=e.Util.colorToRGBA(x),b={r:M.r-w.r,g:M.g-w.g,b:M.b-w.b,a:M.a-w.a}):b=x-w;h.attrs[v][this._id][y]={start:w,diff:b,end:x,trueEnd:P,trueStart:T},h.tweens[v][y]=this._id}_tweenFunc(y){let x=this.node,_=h.attrs[x._id][this._id],v,w,b,N,E,A,P,T;for(v in _){if(w=_[v],b=w.start,N=w.diff,T=w.end,e.Util._isArray(b))if(E=[],P=Math.max(b.length,T.length),v.indexOf("fill")===0)for(A=0;A<P;A++)A%2===0?E.push((b[A]||0)+N[A]*y):E.push("rgba("+Math.round(b[A].r+N[A].r*y)+","+Math.round(b[A].g+N[A].g*y)+","+Math.round(b[A].b+N[A].b*y)+","+(b[A].a+N[A].a*y)+")");else for(A=0;A<P;A++)E.push((b[A]||0)+N[A]*y);else d.indexOf(v)!==-1?E="rgba("+Math.round(b.r+N.r*y)+","+Math.round(b.g+N.g*y)+","+Math.round(b.b+N.b*y)+","+(b.a+N.a*y)+")":E=b+N*y;x.setAttr(v,E)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const y=this.node,x=h.attrs[y._id][this._id];x.points&&x.points.trueEnd&&y.setAttr("points",x.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const y=this.node,x=h.attrs[y._id][this._id];x.points&&x.points.trueStart&&y.points(x.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(y){return this.tween.seek(y*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){let y=this.node._id,x=this._id,_=h.tweens[y],v;this.pause();for(v in _)delete h.tweens[y][v];delete h.attrs[y][x]}}t.Tween=h,h.attrs={},h.tweens={},r.Node.prototype.to=function(m){const y=m.onFinish;m.node=this,m.onFinish=function(){this.destroy(),y&&y()},new h(m).play()},t.Easings={BackEaseIn(m,y,x,_){return x*(m/=_)*m*((1.70158+1)*m-1.70158)+y},BackEaseOut(m,y,x,_){return x*((m=m/_-1)*m*((1.70158+1)*m+1.70158)+1)+y},BackEaseInOut(m,y,x,_){let v=1.70158;return(m/=_/2)<1?x/2*(m*m*(((v*=1.525)+1)*m-v))+y:x/2*((m-=2)*m*(((v*=1.525)+1)*m+v)+2)+y},ElasticEaseIn(m,y,x,_,v,w){let b=0;return m===0?y:(m/=_)===1?y+x:(w||(w=_*.3),!v||v<Math.abs(x)?(v=x,b=w/4):b=w/(2*Math.PI)*Math.asin(x/v),-(v*Math.pow(2,10*(m-=1))*Math.sin((m*_-b)*(2*Math.PI)/w))+y)},ElasticEaseOut(m,y,x,_,v,w){let b=0;return m===0?y:(m/=_)===1?y+x:(w||(w=_*.3),!v||v<Math.abs(x)?(v=x,b=w/4):b=w/(2*Math.PI)*Math.asin(x/v),v*Math.pow(2,-10*m)*Math.sin((m*_-b)*(2*Math.PI)/w)+x+y)},ElasticEaseInOut(m,y,x,_,v,w){let b=0;return m===0?y:(m/=_/2)===2?y+x:(w||(w=_*(.3*1.5)),!v||v<Math.abs(x)?(v=x,b=w/4):b=w/(2*Math.PI)*Math.asin(x/v),m<1?-.5*(v*Math.pow(2,10*(m-=1))*Math.sin((m*_-b)*(2*Math.PI)/w))+y:v*Math.pow(2,-10*(m-=1))*Math.sin((m*_-b)*(2*Math.PI)/w)*.5+x+y)},BounceEaseOut(m,y,x,_){return(m/=_)<1/2.75?x*(7.5625*m*m)+y:m<2/2.75?x*(7.5625*(m-=1.5/2.75)*m+.75)+y:m<2.5/2.75?x*(7.5625*(m-=2.25/2.75)*m+.9375)+y:x*(7.5625*(m-=2.625/2.75)*m+.984375)+y},BounceEaseIn(m,y,x,_){return x-t.Easings.BounceEaseOut(_-m,0,x,_)+y},BounceEaseInOut(m,y,x,_){return m<_/2?t.Easings.BounceEaseIn(m*2,0,x,_)*.5+y:t.Easings.BounceEaseOut(m*2-_,0,x,_)*.5+x*.5+y},EaseIn(m,y,x,_){return x*(m/=_)*m+y},EaseOut(m,y,x,_){return-x*(m/=_)*(m-2)+y},EaseInOut(m,y,x,_){return(m/=_/2)<1?x/2*m*m+y:-x/2*(--m*(m-2)-1)+y},StrongEaseIn(m,y,x,_){return x*(m/=_)*m*m*m*m+y},StrongEaseOut(m,y,x,_){return x*((m=m/_-1)*m*m*m*m+1)+y},StrongEaseInOut(m,y,x,_){return(m/=_/2)<1?x/2*m*m*m*m*m+y:x/2*((m-=2)*m*m*m*m+2)+y},Linear(m,y,x,_){return x*m/_+y}}})(hD);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;const e=Je,n=tn,r=Gt,i=mc,s=cD,a=Uh,o=K0,l=cd,u=V0,d=On,p=ud,h=hD,m=va,y=es;t.Konva=n.Util._assign(e.Konva,{Util:n.Util,Transform:n.Transform,Node:r.Node,Container:i.Container,Stage:s.Stage,stages:s.stages,Layer:a.Layer,FastLayer:o.FastLayer,Group:l.Group,DD:u.DD,Shape:d.Shape,shapes:d.shapes,Animation:p.Animation,Tween:h.Tween,Easings:h.Easings,Context:m.Context,Canvas:y.Canvas}),t.default=t.Konva})(Ig);var Y0={};Object.defineProperty(Y0,"__esModule",{value:!0});Y0.Arc=void 0;const X0=tt,bfe=On,MT=Je,Q0=Ge,wfe=Je;class Ma extends bfe.Shape{_sceneFunc(e){const n=MT.Konva.getAngle(this.angle()),r=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,n,r),e.arc(0,0,this.innerRadius(),n,0,!r),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),n=this.outerRadius(),r=this.clockwise(),i=MT.Konva.getAngle(r?360-this.angle():this.angle()),s=Math.cos(Math.min(i,Math.PI)),a=1,o=Math.sin(Math.min(Math.max(Math.PI,i),3*Math.PI/2)),l=Math.sin(Math.min(i,Math.PI/2)),u=s*(s>0?e:n),d=a*n,p=o*(o>0?e:n),h=l*(l>0?n:e);return{x:u,y:r?-1*h:p,width:d-u,height:h-p}}}Y0.Arc=Ma;Ma.prototype._centroid=!0;Ma.prototype.className="Arc";Ma.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,wfe._registerNode)(Ma);X0.Factory.addGetterSetter(Ma,"innerRadius",0,(0,Q0.getNumberValidator)());X0.Factory.addGetterSetter(Ma,"outerRadius",0,(0,Q0.getNumberValidator)());X0.Factory.addGetterSetter(Ma,"angle",0,(0,Q0.getNumberValidator)());X0.Factory.addGetterSetter(Ma,"clockwise",!1,(0,Q0.getBooleanValidator)());var Z0={},Gh={};Object.defineProperty(Gh,"__esModule",{value:!0});Gh.Line=void 0;const J0=tt,_fe=Je,Nfe=On,pD=Ge;function u3(t,e,n,r,i,s,a){const o=Math.sqrt(Math.pow(n-t,2)+Math.pow(r-e,2)),l=Math.sqrt(Math.pow(i-n,2)+Math.pow(s-r,2)),u=a*o/(o+l),d=a*l/(o+l),p=n-u*(i-t),h=r-u*(s-e),m=n+d*(i-t),y=r+d*(s-e);return[p,h,m,y]}function DT(t,e){const n=t.length,r=[];for(let i=2;i<n-2;i+=2){const s=u3(t[i-2],t[i-1],t[i],t[i+1],t[i+2],t[i+3],e);isNaN(s[0])||(r.push(s[0]),r.push(s[1]),r.push(t[i]),r.push(t[i+1]),r.push(s[2]),r.push(s[3]))}return r}let Jo=class extends Nfe.Shape{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){let n=this.points(),r=n.length,i=this.tension(),s=this.closed(),a=this.bezier(),o,l,u;if(r){if(e.beginPath(),e.moveTo(n[0],n[1]),i!==0&&r>4){for(o=this.getTensionPoints(),l=o.length,u=s?0:4,s||e.quadraticCurveTo(o[0],o[1],o[2],o[3]);u<l-2;)e.bezierCurveTo(o[u++],o[u++],o[u++],o[u++],o[u++],o[u++]);s||e.quadraticCurveTo(o[l-2],o[l-1],n[r-2],n[r-1])}else if(a)for(u=2;u<r;)e.bezierCurveTo(n[u++],n[u++],n[u++],n[u++],n[u++],n[u++]);else for(u=2;u<r;u+=2)e.lineTo(n[u],n[u+1]);s?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():DT(this.points(),this.tension())}_getTensionPointsClosed(){const e=this.points(),n=e.length,r=this.tension(),i=u3(e[n-2],e[n-1],e[0],e[1],e[2],e[3],r),s=u3(e[n-4],e[n-3],e[n-2],e[n-1],e[0],e[1],r),a=DT(e,r);return[i[2],i[3]].concat(a).concat([s[0],s[1],e[n-2],e[n-1],s[2],s[3],i[0],i[1],e[0],e[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();let n=e[0],r=e[0],i=e[1],s=e[1],a,o;for(let l=0;l<e.length/2;l++)a=e[l*2],o=e[l*2+1],n=Math.min(n,a),r=Math.max(r,a),i=Math.min(i,o),s=Math.max(s,o);return{x:n,y:i,width:r-n,height:s-i}}};Gh.Line=Jo;Jo.prototype.className="Line";Jo.prototype._attrsAffectingSize=["points","bezier","tension"];(0,_fe._registerNode)(Jo);J0.Factory.addGetterSetter(Jo,"closed",!1);J0.Factory.addGetterSetter(Jo,"bezier",!1);J0.Factory.addGetterSetter(Jo,"tension",0,(0,pD.getNumberValidator)());J0.Factory.addGetterSetter(Jo,"points",[],(0,pD.getNumberArrayValidator)());var dd={},mD={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.t2length=t.getQuadraticArcLength=t.getCubicArcLength=t.binomialCoefficients=t.cValues=t.tValues=void 0,t.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],t.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],t.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(a,o,l)=>{let u,d;const h=l/2;u=0;for(let m=0;m<20;m++)d=h*t.tValues[20][m]+h,u+=t.cValues[20][m]*r(a,o,d);return h*u};t.getCubicArcLength=e;const n=(a,o,l)=>{l===void 0&&(l=1);const u=a[0]-2*a[1]+a[2],d=o[0]-2*o[1]+o[2],p=2*a[1]-2*a[0],h=2*o[1]-2*o[0],m=4*(u*u+d*d),y=4*(u*p+d*h),x=p*p+h*h;if(m===0)return l*Math.sqrt(Math.pow(a[2]-a[0],2)+Math.pow(o[2]-o[0],2));const _=y/(2*m),v=x/m,w=l+_,b=v-_*_,N=w*w+b>0?Math.sqrt(w*w+b):0,E=_*_+b>0?Math.sqrt(_*_+b):0,A=_+Math.sqrt(_*_+b)!==0?b*Math.log(Math.abs((w+N)/(_+E))):0;return Math.sqrt(m)/2*(w*N-_*E+A)};t.getQuadraticArcLength=n;function r(a,o,l){const u=i(1,l,a),d=i(1,l,o),p=u*u+d*d;return Math.sqrt(p)}const i=(a,o,l)=>{const u=l.length-1;let d,p;if(u===0)return 0;if(a===0){p=0;for(let h=0;h<=u;h++)p+=t.binomialCoefficients[u][h]*Math.pow(1-o,u-h)*Math.pow(o,h)*l[h];return p}else{d=new Array(u);for(let h=0;h<u;h++)d[h]=u*(l[h+1]-l[h]);return i(a-1,o,d)}},s=(a,o,l)=>{let u=1,d=a/o,p=(a-l(d))/o,h=0;for(;u>.001;){const m=l(d+p),y=Math.abs(a-m)/o;if(y<u)u=y,d+=p;else{const x=l(d-p),_=Math.abs(a-x)/o;_<u?(u=_,d-=p):p/=2}if(h++,h>500)break}return d};t.t2length=s})(mD);Object.defineProperty(dd,"__esModule",{value:!0});dd.Path=void 0;const Sfe=tt,Efe=On,kfe=Je,Hc=mD;class Cn extends Efe.Shape{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Cn.parsePathData(this.data()),this.pathLength=Cn.getPathLength(this.dataArray)}_sceneFunc(e){const n=this.dataArray;e.beginPath();let r=!1;for(let x=0;x<n.length;x++){const _=n[x].command,v=n[x].points;switch(_){case"L":e.lineTo(v[0],v[1]);break;case"M":e.moveTo(v[0],v[1]);break;case"C":e.bezierCurveTo(v[0],v[1],v[2],v[3],v[4],v[5]);break;case"Q":e.quadraticCurveTo(v[0],v[1],v[2],v[3]);break;case"A":var i=v[0],s=v[1],a=v[2],o=v[3],l=v[4],u=v[5],d=v[6],p=v[7],h=a>o?a:o,m=a>o?1:a/o,y=a>o?o/a:1;e.translate(i,s),e.rotate(d),e.scale(m,y),e.arc(0,0,h,l,l+u,1-p),e.scale(1/m,1/y),e.rotate(-d),e.translate(-i,-s);break;case"z":r=!0,e.closePath();break}}!r&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){let e=[];this.dataArray.forEach(function(l){if(l.command==="A"){const u=l.points[4],d=l.points[5],p=l.points[4]+d;let h=Math.PI/180;if(Math.abs(u-p)<h&&(h=Math.abs(u-p)),d<0)for(let m=u-h;m>p;m-=h){const y=Cn.getPointOnEllipticalArc(l.points[0],l.points[1],l.points[2],l.points[3],m,0);e.push(y.x,y.y)}else for(let m=u+h;m<p;m+=h){const y=Cn.getPointOnEllipticalArc(l.points[0],l.points[1],l.points[2],l.points[3],m,0);e.push(y.x,y.y)}}else if(l.command==="C")for(let u=0;u<=1;u+=.01){const d=Cn.getPointOnCubicBezier(u,l.start.x,l.start.y,l.points[0],l.points[1],l.points[2],l.points[3],l.points[4],l.points[5]);e.push(d.x,d.y)}else e=e.concat(l.points)});let n=e[0],r=e[0],i=e[1],s=e[1],a,o;for(let l=0;l<e.length/2;l++)a=e[l*2],o=e[l*2+1],isNaN(a)||(n=Math.min(n,a),r=Math.max(r,a)),isNaN(o)||(i=Math.min(i,o),s=Math.max(s,o));return{x:n,y:i,width:r-n,height:s-i}}getLength(){return this.pathLength}getPointAtLength(e){return Cn.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,n,r,i){return Math.sqrt((r-e)*(r-e)+(i-n)*(i-n))}static getPathLength(e){let n=0;for(let r=0;r<e.length;++r)n+=e[r].pathLength;return n}static getPointAtLengthOfDataArray(e,n){let r,i=0,s=n.length;if(!s)return null;for(;i<s&&e>n[i].pathLength;)e-=n[i].pathLength,++i;if(i===s)return r=n[i-1].points.slice(-2),{x:r[0],y:r[1]};if(e<.01)return r=n[i].points.slice(0,2),{x:r[0],y:r[1]};const a=n[i],o=a.points;switch(a.command){case"L":return Cn.getPointOnLine(e,a.start.x,a.start.y,o[0],o[1]);case"C":return Cn.getPointOnCubicBezier((0,Hc.t2length)(e,Cn.getPathLength(n),x=>(0,Hc.getCubicArcLength)([a.start.x,o[0],o[2],o[4]],[a.start.y,o[1],o[3],o[5]],x)),a.start.x,a.start.y,o[0],o[1],o[2],o[3],o[4],o[5]);case"Q":return Cn.getPointOnQuadraticBezier((0,Hc.t2length)(e,Cn.getPathLength(n),x=>(0,Hc.getQuadraticArcLength)([a.start.x,o[0],o[2]],[a.start.y,o[1],o[3]],x)),a.start.x,a.start.y,o[0],o[1],o[2],o[3]);case"A":var l=o[0],u=o[1],d=o[2],p=o[3],h=o[4],m=o[5],y=o[6];return h+=m*e/a.pathLength,Cn.getPointOnEllipticalArc(l,u,d,p,h,y)}return null}static getPointOnLine(e,n,r,i,s,a,o){a=a??n,o=o??r;const l=this.getLineLength(n,r,i,s);if(l<1e-10)return{x:n,y:r};if(i===n)return{x:a,y:o+(s>r?e:-e)};const u=(s-r)/(i-n),d=Math.sqrt(e*e/(1+u*u))*(i<n?-1:1),p=u*d;if(Math.abs(o-r-u*(a-n))<1e-10)return{x:a+d,y:o+p};const h=((a-n)*(i-n)+(o-r)*(s-r))/(l*l),m=n+h*(i-n),y=r+h*(s-r),x=this.getLineLength(a,o,m,y),_=Math.sqrt(e*e-x*x),v=Math.sqrt(_*_/(1+u*u))*(i<n?-1:1),w=u*v;return{x:m+v,y:y+w}}static getPointOnCubicBezier(e,n,r,i,s,a,o,l,u){function d(_){return _*_*_}function p(_){return 3*_*_*(1-_)}function h(_){return 3*_*(1-_)*(1-_)}function m(_){return(1-_)*(1-_)*(1-_)}const y=l*d(e)+a*p(e)+i*h(e)+n*m(e),x=u*d(e)+o*p(e)+s*h(e)+r*m(e);return{x:y,y:x}}static getPointOnQuadraticBezier(e,n,r,i,s,a,o){function l(m){return m*m}function u(m){return 2*m*(1-m)}function d(m){return(1-m)*(1-m)}const p=a*l(e)+i*u(e)+n*d(e),h=o*l(e)+s*u(e)+r*d(e);return{x:p,y:h}}static getPointOnEllipticalArc(e,n,r,i,s,a){const o=Math.cos(a),l=Math.sin(a),u={x:r*Math.cos(s),y:i*Math.sin(s)};return{x:e+(u.x*o-u.y*l),y:n+(u.x*l+u.y*o)}}static parsePathData(e){if(!e)return[];let n=e;const r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(var i=0;i<r.length;i++)n=n.replace(new RegExp(r[i],"g"),"|"+r[i]);const s=n.split("|"),a=[],o=[];let l=0,u=0;const d=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let p;for(i=1;i<s.length;i++){let T=s[i],M=T.charAt(0);for(T=T.slice(1),o.length=0;p=d.exec(T);)o.push(p[0]);const k=[];for(let j=0,O=o.length;j<O;j++){if(o[j]==="00"){k.push(0,0);continue}const q=parseFloat(o[j]);isNaN(q)?k.push(0):k.push(q)}for(;k.length>0&&!isNaN(k[0]);){let j="",O=[];const q=l,I=u;var h,m,y,x,_,v,w,b,N,E;switch(M){case"l":l+=k.shift(),u+=k.shift(),j="L",O.push(l,u);break;case"L":l=k.shift(),u=k.shift(),O.push(l,u);break;case"m":var A=k.shift(),P=k.shift();if(l+=A,u+=P,j="M",a.length>2&&a[a.length-1].command==="z"){for(let D=a.length-2;D>=0;D--)if(a[D].command==="M"){l=a[D].points[0]+A,u=a[D].points[1]+P;break}}O.push(l,u),M="l";break;case"M":l=k.shift(),u=k.shift(),j="M",O.push(l,u),M="L";break;case"h":l+=k.shift(),j="L",O.push(l,u);break;case"H":l=k.shift(),j="L",O.push(l,u);break;case"v":u+=k.shift(),j="L",O.push(l,u);break;case"V":u=k.shift(),j="L",O.push(l,u);break;case"C":O.push(k.shift(),k.shift(),k.shift(),k.shift()),l=k.shift(),u=k.shift(),O.push(l,u);break;case"c":O.push(l+k.shift(),u+k.shift(),l+k.shift(),u+k.shift()),l+=k.shift(),u+=k.shift(),j="C",O.push(l,u);break;case"S":m=l,y=u,h=a[a.length-1],h.command==="C"&&(m=l+(l-h.points[2]),y=u+(u-h.points[3])),O.push(m,y,k.shift(),k.shift()),l=k.shift(),u=k.shift(),j="C",O.push(l,u);break;case"s":m=l,y=u,h=a[a.length-1],h.command==="C"&&(m=l+(l-h.points[2]),y=u+(u-h.points[3])),O.push(m,y,l+k.shift(),u+k.shift()),l+=k.shift(),u+=k.shift(),j="C",O.push(l,u);break;case"Q":O.push(k.shift(),k.shift()),l=k.shift(),u=k.shift(),O.push(l,u);break;case"q":O.push(l+k.shift(),u+k.shift()),l+=k.shift(),u+=k.shift(),j="Q",O.push(l,u);break;case"T":m=l,y=u,h=a[a.length-1],h.command==="Q"&&(m=l+(l-h.points[0]),y=u+(u-h.points[1])),l=k.shift(),u=k.shift(),j="Q",O.push(m,y,l,u);break;case"t":m=l,y=u,h=a[a.length-1],h.command==="Q"&&(m=l+(l-h.points[0]),y=u+(u-h.points[1])),l+=k.shift(),u+=k.shift(),j="Q",O.push(m,y,l,u);break;case"A":x=k.shift(),_=k.shift(),v=k.shift(),w=k.shift(),b=k.shift(),N=l,E=u,l=k.shift(),u=k.shift(),j="A",O=this.convertEndpointToCenterParameterization(N,E,l,u,w,b,x,_,v);break;case"a":x=k.shift(),_=k.shift(),v=k.shift(),w=k.shift(),b=k.shift(),N=l,E=u,l+=k.shift(),u+=k.shift(),j="A",O=this.convertEndpointToCenterParameterization(N,E,l,u,w,b,x,_,v);break}a.push({command:j||M,points:O,start:{x:q,y:I},pathLength:this.calcLength(q,I,j||M,O)})}(M==="z"||M==="Z")&&a.push({command:"z",points:[],start:void 0,pathLength:0})}return a}static calcLength(e,n,r,i){let s,a,o,l;const u=Cn;switch(r){case"L":return u.getLineLength(e,n,i[0],i[1]);case"C":return(0,Hc.getCubicArcLength)([e,i[0],i[2],i[4]],[n,i[1],i[3],i[5]],1);case"Q":return(0,Hc.getQuadraticArcLength)([e,i[0],i[2]],[n,i[1],i[3]],1);case"A":s=0;var d=i[4],p=i[5],h=i[4]+p,m=Math.PI/180;if(Math.abs(d-h)<m&&(m=Math.abs(d-h)),a=u.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],d,0),p<0)for(l=d-m;l>h;l-=m)o=u.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),s+=u.getLineLength(a.x,a.y,o.x,o.y),a=o;else for(l=d+m;l<h;l+=m)o=u.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),s+=u.getLineLength(a.x,a.y,o.x,o.y),a=o;return o=u.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],h,0),s+=u.getLineLength(a.x,a.y,o.x,o.y),s}return 0}static convertEndpointToCenterParameterization(e,n,r,i,s,a,o,l,u){const d=u*(Math.PI/180),p=Math.cos(d)*(e-r)/2+Math.sin(d)*(n-i)/2,h=-1*Math.sin(d)*(e-r)/2+Math.cos(d)*(n-i)/2,m=p*p/(o*o)+h*h/(l*l);m>1&&(o*=Math.sqrt(m),l*=Math.sqrt(m));let y=Math.sqrt((o*o*(l*l)-o*o*(h*h)-l*l*(p*p))/(o*o*(h*h)+l*l*(p*p)));s===a&&(y*=-1),isNaN(y)&&(y=0);const x=y*o*h/l,_=y*-l*p/o,v=(e+r)/2+Math.cos(d)*x-Math.sin(d)*_,w=(n+i)/2+Math.sin(d)*x+Math.cos(d)*_,b=function(k){return Math.sqrt(k[0]*k[0]+k[1]*k[1])},N=function(k,j){return(k[0]*j[0]+k[1]*j[1])/(b(k)*b(j))},E=function(k,j){return(k[0]*j[1]<k[1]*j[0]?-1:1)*Math.acos(N(k,j))},A=E([1,0],[(p-x)/o,(h-_)/l]),P=[(p-x)/o,(h-_)/l],T=[(-1*p-x)/o,(-1*h-_)/l];let M=E(P,T);return N(P,T)<=-1&&(M=Math.PI),N(P,T)>=1&&(M=0),a===0&&M>0&&(M=M-2*Math.PI),a===1&&M<0&&(M=M+2*Math.PI),[v,w,o,l,A,M,d,a]}}dd.Path=Cn;Cn.prototype.className="Path";Cn.prototype._attrsAffectingSize=["data"];(0,kfe._registerNode)(Cn);Sfe.Factory.addGetterSetter(Cn,"data");Object.defineProperty(Z0,"__esModule",{value:!0});Z0.Arrow=void 0;const e1=tt,Cfe=Gh,gD=Ge,jfe=Je,FT=dd;class vc extends Cfe.Line{_sceneFunc(e){super._sceneFunc(e);const n=Math.PI*2,r=this.points();let i=r;const s=this.tension()!==0&&r.length>4;s&&(i=this.getTensionPoints());const a=this.pointerLength(),o=r.length;let l,u;if(s){const h=[i[i.length-4],i[i.length-3],i[i.length-2],i[i.length-1],r[o-2],r[o-1]],m=FT.Path.calcLength(i[i.length-4],i[i.length-3],"C",h),y=FT.Path.getPointOnQuadraticBezier(Math.min(1,1-a/m),h[0],h[1],h[2],h[3],h[4],h[5]);l=r[o-2]-y.x,u=r[o-1]-y.y}else l=r[o-2]-r[o-4],u=r[o-1]-r[o-3];const d=(Math.atan2(u,l)+n)%n,p=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(r[o-2],r[o-1]),e.rotate(d),e.moveTo(0,0),e.lineTo(-a,p/2),e.lineTo(-a,-p/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(r[0],r[1]),s?(l=(i[0]+i[2])/2-r[0],u=(i[1]+i[3])/2-r[1]):(l=r[2]-r[0],u=r[3]-r[1]),e.rotate((Math.atan2(-u,-l)+n)%n),e.moveTo(0,0),e.lineTo(-a,p/2),e.lineTo(-a,-p/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){const n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),n=this.pointerWidth()/2;return{x:e.x-n,y:e.y-n,width:e.width+n*2,height:e.height+n*2}}}Z0.Arrow=vc;vc.prototype.className="Arrow";(0,jfe._registerNode)(vc);e1.Factory.addGetterSetter(vc,"pointerLength",10,(0,gD.getNumberValidator)());e1.Factory.addGetterSetter(vc,"pointerWidth",10,(0,gD.getNumberValidator)());e1.Factory.addGetterSetter(vc,"pointerAtBeginning",!1);e1.Factory.addGetterSetter(vc,"pointerAtEnding",!0);var t1={};Object.defineProperty(t1,"__esModule",{value:!0});t1.Circle=void 0;const Tfe=tt,Afe=On,Ofe=Ge,Pfe=Je;class fd extends Afe.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}t1.Circle=fd;fd.prototype._centroid=!0;fd.prototype.className="Circle";fd.prototype._attrsAffectingSize=["radius"];(0,Pfe._registerNode)(fd);Tfe.Factory.addGetterSetter(fd,"radius",0,(0,Ofe.getNumberValidator)());var n1={};Object.defineProperty(n1,"__esModule",{value:!0});n1.Ellipse=void 0;const LN=tt,Rfe=On,vD=Ge,Lfe=Je;class el extends Rfe.Shape{_sceneFunc(e){const n=this.radiusX(),r=this.radiusY();e.beginPath(),e.save(),n!==r&&e.scale(1,r/n),e.arc(0,0,n,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}n1.Ellipse=el;el.prototype.className="Ellipse";el.prototype._centroid=!0;el.prototype._attrsAffectingSize=["radiusX","radiusY"];(0,Lfe._registerNode)(el);LN.Factory.addComponentsGetterSetter(el,"radius",["x","y"]);LN.Factory.addGetterSetter(el,"radiusX",0,(0,vD.getNumberValidator)());LN.Factory.addGetterSetter(el,"radiusY",0,(0,vD.getNumberValidator)());var r1={};Object.defineProperty(r1,"__esModule",{value:!0});r1.Image=void 0;const l5=tn,yc=tt,Ife=On,Mfe=Je,Hh=Ge;let zs=class yD extends Ife.Shape{constructor(e){super(e),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){const e=!!this.cornerRadius(),n=this.hasShadow();return e&&n?!0:super._useBufferCanvas(!0)}_sceneFunc(e){const n=this.getWidth(),r=this.getHeight(),i=this.cornerRadius(),s=this.attrs.image;let a;if(s){const o=this.attrs.cropWidth,l=this.attrs.cropHeight;o&&l?a=[s,this.cropX(),this.cropY(),o,l,0,0,n,r]:a=[s,0,0,n,r]}(this.hasFill()||this.hasStroke()||i)&&(e.beginPath(),i?l5.Util.drawRoundedRectPath(e,n,r,i):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)),s&&(i&&e.clip(),e.drawImage.apply(e,a))}_hitFunc(e){const n=this.width(),r=this.height(),i=this.cornerRadius();e.beginPath(),i?l5.Util.drawRoundedRectPath(e,n,r,i):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,n;return(e=this.attrs.width)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.width}getHeight(){var e,n;return(e=this.attrs.height)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.height}static fromURL(e,n,r=null){const i=l5.Util.createImageElement();i.onload=function(){const s=new yD({image:i});n(s)},i.onerror=r,i.crossOrigin="Anonymous",i.src=e}};r1.Image=zs;zs.prototype.className="Image";(0,Mfe._registerNode)(zs);yc.Factory.addGetterSetter(zs,"cornerRadius",0,(0,Hh.getNumberOrArrayOfNumbersValidator)(4));yc.Factory.addGetterSetter(zs,"image");yc.Factory.addComponentsGetterSetter(zs,"crop",["x","y","width","height"]);yc.Factory.addGetterSetter(zs,"cropX",0,(0,Hh.getNumberValidator)());yc.Factory.addGetterSetter(zs,"cropY",0,(0,Hh.getNumberValidator)());yc.Factory.addGetterSetter(zs,"cropWidth",0,(0,Hh.getNumberValidator)());yc.Factory.addGetterSetter(zs,"cropHeight",0,(0,Hh.getNumberValidator)());var Gu={};Object.defineProperty(Gu,"__esModule",{value:!0});Gu.Tag=Gu.Label=void 0;const i1=tt,Dfe=On,Ffe=cd,IN=Ge,xD=Je,bD=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],qfe="Change.konva",Bfe="none",d3="up",f3="right",h3="down",p3="left",zfe=bD.length;class MN extends Ffe.Group{constructor(e){super(e),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){let n=this,r;const i=function(){n._sync()};for(r=0;r<zfe;r++)e.on(bD[r]+qfe,i)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let e=this.getText(),n=this.getTag(),r,i,s,a,o,l,u;if(e&&n){switch(r=e.width(),i=e.height(),s=n.pointerDirection(),a=n.pointerWidth(),u=n.pointerHeight(),o=0,l=0,s){case d3:o=r/2,l=-1*u;break;case f3:o=r+a,l=i/2;break;case h3:o=r/2,l=i+u;break;case p3:o=-1*a,l=i/2;break}n.setAttrs({x:-1*o,y:-1*l,width:r,height:i}),e.setAttrs({x:-1*o,y:-1*l})}}}Gu.Label=MN;MN.prototype.className="Label";(0,xD._registerNode)(MN);class xc extends Dfe.Shape{_sceneFunc(e){const n=this.width(),r=this.height(),i=this.pointerDirection(),s=this.pointerWidth(),a=this.pointerHeight(),o=this.cornerRadius();let l=0,u=0,d=0,p=0;typeof o=="number"?l=u=d=p=Math.min(o,n/2,r/2):(l=Math.min(o[0]||0,n/2,r/2),u=Math.min(o[1]||0,n/2,r/2),p=Math.min(o[2]||0,n/2,r/2),d=Math.min(o[3]||0,n/2,r/2)),e.beginPath(),e.moveTo(l,0),i===d3&&(e.lineTo((n-s)/2,0),e.lineTo(n/2,-1*a),e.lineTo((n+s)/2,0)),e.lineTo(n-u,0),e.arc(n-u,u,u,Math.PI*3/2,0,!1),i===f3&&(e.lineTo(n,(r-a)/2),e.lineTo(n+s,r/2),e.lineTo(n,(r+a)/2)),e.lineTo(n,r-p),e.arc(n-p,r-p,p,0,Math.PI/2,!1),i===h3&&(e.lineTo((n+s)/2,r),e.lineTo(n/2,r+a),e.lineTo((n-s)/2,r)),e.lineTo(d,r),e.arc(d,r-d,d,Math.PI/2,Math.PI,!1),i===p3&&(e.lineTo(0,(r+a)/2),e.lineTo(-1*s,r/2),e.lineTo(0,(r-a)/2)),e.lineTo(0,l),e.arc(l,l,l,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){let e=0,n=0,r=this.pointerWidth(),i=this.pointerHeight(),s=this.pointerDirection(),a=this.width(),o=this.height();return s===d3?(n-=i,o+=i):s===h3?o+=i:s===p3?(e-=r*1.5,a+=r):s===f3&&(a+=r*1.5),{x:e,y:n,width:a,height:o}}}Gu.Tag=xc;xc.prototype.className="Tag";(0,xD._registerNode)(xc);i1.Factory.addGetterSetter(xc,"pointerDirection",Bfe);i1.Factory.addGetterSetter(xc,"pointerWidth",0,(0,IN.getNumberValidator)());i1.Factory.addGetterSetter(xc,"pointerHeight",0,(0,IN.getNumberValidator)());i1.Factory.addGetterSetter(xc,"cornerRadius",0,(0,IN.getNumberOrArrayOfNumbersValidator)(4));var Vh={};Object.defineProperty(Vh,"__esModule",{value:!0});Vh.Rect=void 0;const $fe=tt,Ufe=On,Gfe=Je,Hfe=tn,Vfe=Ge;let s1=class extends Ufe.Shape{_sceneFunc(e){const n=this.cornerRadius(),r=this.width(),i=this.height();e.beginPath(),n?Hfe.Util.drawRoundedRectPath(e,r,i,n):e.rect(0,0,r,i),e.closePath(),e.fillStrokeShape(this)}};Vh.Rect=s1;s1.prototype.className="Rect";(0,Gfe._registerNode)(s1);$fe.Factory.addGetterSetter(s1,"cornerRadius",0,(0,Vfe.getNumberOrArrayOfNumbersValidator)(4));var a1={};Object.defineProperty(a1,"__esModule",{value:!0});a1.RegularPolygon=void 0;const wD=tt,Wfe=On,_D=Ge,Kfe=Je;class bc extends Wfe.Shape{_sceneFunc(e){const n=this._getPoints();e.beginPath(),e.moveTo(n[0].x,n[0].y);for(let r=1;r<n.length;r++)e.lineTo(n[r].x,n[r].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,n=this.attrs.radius||0,r=[];for(let i=0;i<e;i++)r.push({x:n*Math.sin(i*2*Math.PI/e),y:-1*n*Math.cos(i*2*Math.PI/e)});return r}getSelfRect(){const e=this._getPoints();let n=e[0].x,r=e[0].y,i=e[0].x,s=e[0].y;return e.forEach(a=>{n=Math.min(n,a.x),r=Math.max(r,a.x),i=Math.min(i,a.y),s=Math.max(s,a.y)}),{x:n,y:i,width:r-n,height:s-i}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}a1.RegularPolygon=bc;bc.prototype.className="RegularPolygon";bc.prototype._centroid=!0;bc.prototype._attrsAffectingSize=["radius"];(0,Kfe._registerNode)(bc);wD.Factory.addGetterSetter(bc,"radius",0,(0,_D.getNumberValidator)());wD.Factory.addGetterSetter(bc,"sides",0,(0,_D.getNumberValidator)());var o1={};Object.defineProperty(o1,"__esModule",{value:!0});o1.Ring=void 0;const ND=tt,Yfe=On,SD=Ge,Xfe=Je,qT=Math.PI*2;class wc extends Yfe.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,qT,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),qT,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}o1.Ring=wc;wc.prototype.className="Ring";wc.prototype._centroid=!0;wc.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,Xfe._registerNode)(wc);ND.Factory.addGetterSetter(wc,"innerRadius",0,(0,SD.getNumberValidator)());ND.Factory.addGetterSetter(wc,"outerRadius",0,(0,SD.getNumberValidator)());var l1={};Object.defineProperty(l1,"__esModule",{value:!0});l1.Sprite=void 0;const _c=tt,Qfe=On,Zfe=ud,ED=Ge,Jfe=Je;class $s extends Qfe.Shape{constructor(e){super(e),this._updated=!0,this.anim=new Zfe.Animation(()=>{const n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){const n=this.animation(),r=this.frameIndex(),i=r*4,s=this.animations()[n],a=this.frameOffsets(),o=s[i+0],l=s[i+1],u=s[i+2],d=s[i+3],p=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,u,d),e.closePath(),e.fillStrokeShape(this)),p)if(a){const h=a[n],m=r*2;e.drawImage(p,o,l,u,d,h[m+0],h[m+1],u,d)}else e.drawImage(p,o,l,u,d,0,0,u,d)}_hitFunc(e){const n=this.animation(),r=this.frameIndex(),i=r*4,s=this.animations()[n],a=this.frameOffsets(),o=s[i+2],l=s[i+3];if(e.beginPath(),a){const u=a[n],d=r*2;e.rect(u[d+0],u[d+1],o,l)}else e.rect(0,0,o,l);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const e=this.frameIndex(),n=this.animation(),r=this.animations(),i=r[n],s=i.length/4;e<s-1?this.frameIndex(e+1):this.frameIndex(0)}}l1.Sprite=$s;$s.prototype.className="Sprite";(0,Jfe._registerNode)($s);_c.Factory.addGetterSetter($s,"animation");_c.Factory.addGetterSetter($s,"animations");_c.Factory.addGetterSetter($s,"frameOffsets");_c.Factory.addGetterSetter($s,"image");_c.Factory.addGetterSetter($s,"frameIndex",0,(0,ED.getNumberValidator)());_c.Factory.addGetterSetter($s,"frameRate",17,(0,ED.getNumberValidator)());_c.Factory.backCompat($s,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var c1={};Object.defineProperty(c1,"__esModule",{value:!0});c1.Star=void 0;const DN=tt,ehe=On,FN=Ge,the=Je;class tl extends ehe.Shape{_sceneFunc(e){const n=this.innerRadius(),r=this.outerRadius(),i=this.numPoints();e.beginPath(),e.moveTo(0,0-r);for(let s=1;s<i*2;s++){const a=s%2===0?r:n,o=a*Math.sin(s*Math.PI/i),l=-1*a*Math.cos(s*Math.PI/i);e.lineTo(o,l)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}c1.Star=tl;tl.prototype.className="Star";tl.prototype._centroid=!0;tl.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,the._registerNode)(tl);DN.Factory.addGetterSetter(tl,"numPoints",5,(0,FN.getNumberValidator)());DN.Factory.addGetterSetter(tl,"innerRadius",0,(0,FN.getNumberValidator)());DN.Factory.addGetterSetter(tl,"outerRadius",0,(0,FN.getNumberValidator)());var hd={};Object.defineProperty(hd,"__esModule",{value:!0});hd.Text=void 0;hd.stringToArray=kD;const m3=tn,fr=tt,nhe=On,c5=Je,nl=Ge,rhe=Je;function kD(t){return[...t].reduce((e,n,r,i)=>(/\p{Emoji_Modifier_Base}\p{Emoji_Modifier}?(?:\u200D\p{Emoji_Presentation})+/u.test(n)?e.push(n):/\p{Regional_Indicator}{2}/u.test(n+(i[r+1]||""))?e.push(n+i[r+1]):r>0&&/\p{Mn}|\p{Me}|\p{Mc}/u.test(n)?e[e.length-1]+=n:e.push(n),e),[])}const Vc="auto",ihe="center",CD="inherit",nf="justify",she="Change.konva",ahe="2d",BT="-",jD="left",ohe="text",lhe="Text",che="top",uhe="bottom",zT="middle",TD="normal",dhe="px ",pm=" ",fhe="right",$T="rtl",hhe="word",phe="char",UT="none",u5="",AD=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],mhe=AD.length;function ghe(t){return t.split(",").map(e=>{e=e.trim();const n=e.indexOf(" ")>=0,r=e.indexOf('"')>=0||e.indexOf("'")>=0;return n&&!r&&(e=`"${e}"`),e}).join(", ")}let mm;function d5(){return mm||(mm=m3.Util.createCanvasElement().getContext(ahe),mm)}function vhe(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)}function yhe(t){t.setAttr("miterLimit",2),t.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function xhe(t){return t=t||{},!t.fillLinearGradientColorStops&&!t.fillRadialGradientColorStops&&!t.fillPatternImage&&(t.fill=t.fill||"black"),t}let ln=class extends nhe.Shape{constructor(e){super(xhe(e)),this._partialTextX=0,this._partialTextY=0;for(let n=0;n<mhe;n++)this.on(AD[n]+she,this._setTextData);this._setTextData()}_sceneFunc(e){const n=this.textArr,r=n.length;if(!this.text())return;let i=this.padding(),s=this.fontSize(),a=this.lineHeight()*s,o=this.verticalAlign(),l=this.direction(),u=0,d=this.align(),p=this.getWidth(),h=this.letterSpacing(),m=this.fill(),y=this.textDecoration(),x=y.indexOf("underline")!==-1,_=y.indexOf("line-through")!==-1,v;l=l===CD?e.direction:l;let w=a/2,b=zT;if(c5.Konva._fixTextRendering){const q=this.measureSize("M");b="alphabetic",w=(q.fontBoundingBoxAscent-q.fontBoundingBoxDescent)/2+a/2}var N=0,E=0;for(l===$T&&e.setAttr("direction",l),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",b),e.setAttr("textAlign",jD),o===zT?u=(this.getHeight()-r*a-i*2)/2:o===uhe&&(u=this.getHeight()-r*a-i*2),e.translate(i,u+i),v=0;v<r;v++){var N=0,E=0,A=n[v],P=A.text,T=A.width,M=A.lastInParagraph,k,j,O;if(e.save(),d===fhe?N+=p-T-i*2:d===ihe&&(N+=(p-T-i*2)/2),x){e.save(),e.beginPath();const D=c5.Konva._fixTextRendering?Math.round(s/4):Math.round(s/2),U=N,W=w+E+D;e.moveTo(U,W),k=P.split(" ").length-1,j=k===0,O=d===nf&&!M?p-i*2:T,e.lineTo(U+Math.round(O),W),e.lineWidth=s/15;const Y=this._getLinearGradient();e.strokeStyle=Y||m,e.stroke(),e.restore()}if(_){e.save(),e.beginPath();const D=c5.Konva._fixTextRendering?-Math.round(s/4):0;e.moveTo(N,w+E+D),k=P.split(" ").length-1,j=k===0,O=d===nf&&M&&!j?p-i*2:T,e.lineTo(N+Math.round(O),w+E+D),e.lineWidth=s/15;const U=this._getLinearGradient();e.strokeStyle=U||m,e.stroke(),e.restore()}if(l!==$T&&(h!==0||d===nf)){k=P.split(" ").length-1;const D=kD(P);for(let U=0;U<D.length;U++){const W=D[U];W===" "&&!M&&d===nf&&(N+=(p-i*2-T)/k),this._partialTextX=N,this._partialTextY=w+E,this._partialText=W,e.fillStrokeShape(this),N+=this.measureSize(W).width+h}}else h!==0&&e.setAttr("letterSpacing",`${h}px`),this._partialTextX=N,this._partialTextY=w+E,this._partialText=P,e.fillStrokeShape(this);e.restore(),r>1&&(w+=a)}}_hitFunc(e){const n=this.getWidth(),r=this.getHeight();e.beginPath(),e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}setText(e){const n=m3.Util._isString(e)?e:e==null?"":e+"";return this._setAttr(ohe,n),this}getWidth(){return this.attrs.width===Vc||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===Vc||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return m3.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var n,r,i,s,a,o,l,u,d,p,h;let m=d5(),y=this.fontSize(),x;m.save(),m.font=this._getContextFont(),x=m.measureText(e),m.restore();const _=y/100;return{actualBoundingBoxAscent:(n=x.actualBoundingBoxAscent)!==null&&n!==void 0?n:71.58203125*_,actualBoundingBoxDescent:(r=x.actualBoundingBoxDescent)!==null&&r!==void 0?r:0,actualBoundingBoxLeft:(i=x.actualBoundingBoxLeft)!==null&&i!==void 0?i:-7.421875*_,actualBoundingBoxRight:(s=x.actualBoundingBoxRight)!==null&&s!==void 0?s:75.732421875*_,alphabeticBaseline:(a=x.alphabeticBaseline)!==null&&a!==void 0?a:0,emHeightAscent:(o=x.emHeightAscent)!==null&&o!==void 0?o:100*_,emHeightDescent:(l=x.emHeightDescent)!==null&&l!==void 0?l:-20*_,fontBoundingBoxAscent:(u=x.fontBoundingBoxAscent)!==null&&u!==void 0?u:91*_,fontBoundingBoxDescent:(d=x.fontBoundingBoxDescent)!==null&&d!==void 0?d:21*_,hangingBaseline:(p=x.hangingBaseline)!==null&&p!==void 0?p:72.80000305175781*_,ideographicBaseline:(h=x.ideographicBaseline)!==null&&h!==void 0?h:-21*_,width:x.width,height:y}}_getContextFont(){return this.fontStyle()+pm+this.fontVariant()+pm+(this.fontSize()+dhe)+ghe(this.fontFamily())}_addTextLine(e){this.align()===nf&&(e=e.trim());const r=this._getTextWidth(e);return this.textArr.push({text:e,width:r,lastInParagraph:!1})}_getTextWidth(e){const n=this.letterSpacing(),r=e.length;return d5().measureText(e).width+(r?n*(r-1):0)}_setTextData(){let e=this.text().split(`
`),n=+this.fontSize(),r=0,i=this.lineHeight()*n,s=this.attrs.width,a=this.attrs.height,o=s!==Vc&&s!==void 0,l=a!==Vc&&a!==void 0,u=this.padding(),d=s-u*2,p=a-u*2,h=0,m=this.wrap(),y=m!==UT,x=m!==phe&&y,_=this.ellipsis();this.textArr=[],d5().font=this._getContextFont();const v=_?this._getTextWidth(u5):0;for(let b=0,N=e.length;b<N;++b){let E=e[b],A=this._getTextWidth(E);if(o&&A>d)for(;E.length>0;){let P=0,T=E.length,M="",k=0;for(;P<T;){const j=P+T>>>1,O=E.slice(0,j+1),q=this._getTextWidth(O)+v;q<=d?(P=j+1,M=O,k=q):T=j}if(M){if(x){var w;const O=E[M.length];(O===pm||O===BT)&&k<=d?w=M.length:w=Math.max(M.lastIndexOf(pm),M.lastIndexOf(BT))+1,w>0&&(P=w,M=M.slice(0,P),k=this._getTextWidth(M))}if(M=M.trimRight(),this._addTextLine(M),r=Math.max(r,k),h+=i,this._shouldHandleEllipsis(h)){this._tryToAddEllipsisToLastLine();break}if(E=E.slice(P),E=E.trimLeft(),E.length>0&&(A=this._getTextWidth(E),A<=d)){this._addTextLine(E),h+=i,r=Math.max(r,A);break}}else break}else this._addTextLine(E),h+=i,r=Math.max(r,A),this._shouldHandleEllipsis(h)&&b<N-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),l&&h+i>p)break}this.textHeight=n,this.textWidth=r}_shouldHandleEllipsis(e){const n=+this.fontSize(),r=this.lineHeight()*n,i=this.attrs.height,s=i!==Vc&&i!==void 0,a=this.padding(),o=i-a*2;return!(this.wrap()!==UT)||s&&e+r>o}_tryToAddEllipsisToLastLine(){const e=this.attrs.width,n=e!==Vc&&e!==void 0,r=this.padding(),i=e-r*2,s=this.ellipsis(),a=this.textArr[this.textArr.length-1];!a||!s||(n&&(this._getTextWidth(a.text+u5)<i||(a.text=a.text.slice(0,a.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(a.text+u5))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,n=this.hasShadow();return e&&n?!0:super._useBufferCanvas()}};hd.Text=ln;ln.prototype._fillFunc=vhe;ln.prototype._strokeFunc=yhe;ln.prototype.className=lhe;ln.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];(0,rhe._registerNode)(ln);fr.Factory.overWriteSetter(ln,"width",(0,nl.getNumberOrAutoValidator)());fr.Factory.overWriteSetter(ln,"height",(0,nl.getNumberOrAutoValidator)());fr.Factory.addGetterSetter(ln,"direction",CD);fr.Factory.addGetterSetter(ln,"fontFamily","Arial");fr.Factory.addGetterSetter(ln,"fontSize",12,(0,nl.getNumberValidator)());fr.Factory.addGetterSetter(ln,"fontStyle",TD);fr.Factory.addGetterSetter(ln,"fontVariant",TD);fr.Factory.addGetterSetter(ln,"padding",0,(0,nl.getNumberValidator)());fr.Factory.addGetterSetter(ln,"align",jD);fr.Factory.addGetterSetter(ln,"verticalAlign",che);fr.Factory.addGetterSetter(ln,"lineHeight",1,(0,nl.getNumberValidator)());fr.Factory.addGetterSetter(ln,"wrap",hhe);fr.Factory.addGetterSetter(ln,"ellipsis",!1,(0,nl.getBooleanValidator)());fr.Factory.addGetterSetter(ln,"letterSpacing",0,(0,nl.getNumberValidator)());fr.Factory.addGetterSetter(ln,"text","",(0,nl.getStringValidator)());fr.Factory.addGetterSetter(ln,"textDecoration","");var u1={};Object.defineProperty(u1,"__esModule",{value:!0});u1.TextPath=void 0;const f5=tn,ls=tt,bhe=On,rf=dd,h5=hd,OD=Ge,whe=Je,_he="",PD="normal";function RD(t){t.fillText(this.partialText,0,0)}function LD(t){t.strokeText(this.partialText,0,0)}class Pn extends bhe.Shape{constructor(e){super(e),this.dummyCanvas=f5.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return rf.Path.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;const n=this.pathLength;return e-1>n?null:rf.Path.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=rf.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();const n=this.textDecoration(),r=this.fill(),i=this.fontSize(),s=this.glyphInfo;n==="underline"&&e.beginPath();for(let a=0;a<s.length;a++){e.save();const o=s[a].p0;e.translate(o.x,o.y),e.rotate(s[a].rotation),this.partialText=s[a].text,e.fillStrokeShape(this),n==="underline"&&(a===0&&e.moveTo(0,i/2+1),e.lineTo(i,i/2+1)),e.restore()}n==="underline"&&(e.strokeStyle=r,e.lineWidth=i/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();const n=this.glyphInfo;if(n.length>=1){const r=n[0].p0;e.moveTo(r.x,r.y)}for(let r=0;r<n.length;r++){const i=n[r].p1;e.lineTo(i.x,i.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return f5.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return h5.Text.prototype.setText.call(this,e)}_getContextFont(){return h5.Text.prototype._getContextFont.call(this)}_getTextSize(e){const r=this.dummyCanvas.getContext("2d");r.save(),r.font=this._getContextFont();const i=r.measureText(e);return r.restore(),{width:i.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:e,height:n}=this._getTextSize(this.attrs.text);if(this.textWidth=e,this.textHeight=n,this.glyphInfo=[],!this.attrs.data)return null;const r=this.letterSpacing(),i=this.align(),s=this.kerningFunc(),a=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0);let o=0;i==="center"&&(o=Math.max(0,this.pathLength/2-a/2)),i==="right"&&(o=Math.max(0,this.pathLength-a));const l=(0,h5.stringToArray)(this.text());let u=o;for(let d=0;d<l.length;d++){const p=this._getPointAtLength(u);if(!p)return;let h=this._getTextSize(l[d]).width+r;if(l[d]===" "&&i==="justify"){const w=this.text().split(" ").length-1;h+=(this.pathLength-a)/w}const m=this._getPointAtLength(u+h);if(!m)return;const y=rf.Path.getLineLength(p.x,p.y,m.x,m.y);let x=0;if(s)try{x=s(l[d-1],l[d])*this.fontSize()}catch{x=0}p.x+=x,m.x+=x,this.textWidth+=x;const _=rf.Path.getPointOnLine(x+y/2,p.x,p.y,m.x,m.y),v=Math.atan2(m.y-p.y,m.x-p.x);this.glyphInfo.push({transposeX:_.x,transposeY:_.y,text:l[d],rotation:v,p0:p,p1:m}),u+=h}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const e=[];this.glyphInfo.forEach(function(u){e.push(u.p0.x),e.push(u.p0.y),e.push(u.p1.x),e.push(u.p1.y)});let n=e[0]||0,r=e[0]||0,i=e[1]||0,s=e[1]||0,a,o;for(let u=0;u<e.length/2;u++)a=e[u*2],o=e[u*2+1],n=Math.min(n,a),r=Math.max(r,a),i=Math.min(i,o),s=Math.max(s,o);const l=this.fontSize();return{x:n-l/2,y:i-l/2,width:r-n+l,height:s-i+l}}destroy(){return f5.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}u1.TextPath=Pn;Pn.prototype._fillFunc=RD;Pn.prototype._strokeFunc=LD;Pn.prototype._fillFuncHit=RD;Pn.prototype._strokeFuncHit=LD;Pn.prototype.className="TextPath";Pn.prototype._attrsAffectingSize=["text","fontSize","data"];(0,whe._registerNode)(Pn);ls.Factory.addGetterSetter(Pn,"data");ls.Factory.addGetterSetter(Pn,"fontFamily","Arial");ls.Factory.addGetterSetter(Pn,"fontSize",12,(0,OD.getNumberValidator)());ls.Factory.addGetterSetter(Pn,"fontStyle",PD);ls.Factory.addGetterSetter(Pn,"align","left");ls.Factory.addGetterSetter(Pn,"letterSpacing",0,(0,OD.getNumberValidator)());ls.Factory.addGetterSetter(Pn,"textBaseline","middle");ls.Factory.addGetterSetter(Pn,"fontVariant",PD);ls.Factory.addGetterSetter(Pn,"text",_he);ls.Factory.addGetterSetter(Pn,"textDecoration",null);ls.Factory.addGetterSetter(Pn,"kerningFunc",null);var d1={};Object.defineProperty(d1,"__esModule",{value:!0});d1.Transformer=void 0;const kt=tn,xt=tt,GT=Gt,Nhe=On,She=Vh,HT=cd,$i=Je,rl=Ge,Ehe=Je,ID="tr-konva",khe=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(t=>t+`.${ID}`).join(" "),VT="nodesRect",Che=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],jhe={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},The="ontouchstart"in $i.Konva._global;function Ahe(t,e,n){if(t==="rotater")return n;e+=kt.Util.degToRad(jhe[t]||0);const r=(kt.Util.radToDeg(e)%360+360)%360;return kt.Util._inRange(r,315+22.5,360)||kt.Util._inRange(r,0,22.5)?"ns-resize":kt.Util._inRange(r,45-22.5,45+22.5)?"nesw-resize":kt.Util._inRange(r,90-22.5,90+22.5)?"ew-resize":kt.Util._inRange(r,135-22.5,135+22.5)?"nwse-resize":kt.Util._inRange(r,180-22.5,180+22.5)?"ns-resize":kt.Util._inRange(r,225-22.5,225+22.5)?"nesw-resize":kt.Util._inRange(r,270-22.5,270+22.5)?"ew-resize":kt.Util._inRange(r,315-22.5,315+22.5)?"nwse-resize":(kt.Util.error("Transformer has unknown angle for cursor detection: "+r),"pointer")}const Dg=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],WT=1e8;function Ohe(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}function MD(t,e,n){const r=n.x+(t.x-n.x)*Math.cos(e)-(t.y-n.y)*Math.sin(e),i=n.y+(t.x-n.x)*Math.sin(e)+(t.y-n.y)*Math.cos(e);return{...t,rotation:t.rotation+e,x:r,y:i}}function Phe(t,e){const n=Ohe(t);return MD(t,e,n)}function Rhe(t,e,n){let r=e;for(let i=0;i<t.length;i++){const s=$i.Konva.getAngle(t[i]),a=Math.abs(s-e)%(Math.PI*2);Math.min(a,Math.PI*2-a)<n&&(r=s)}return r}let g3=0,ut=class extends HT.Group{constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(khe,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return kt.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return ID+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();const n=e.filter(i=>i.isAncestorOf(this)?(kt.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=e=n,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(i=>{const s=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},a=i._attrsAffectingSize.map(o=>o+"Change."+this._getEventNamespace()).join(" ");i.on(a,s),i.on(Che.map(o=>o+`.${this._getEventNamespace()}`).join(" "),s),i.on(`absoluteTransformChange.${this._getEventNamespace()}`,s),this._proxyDrag(i)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(e){let n;e.on(`dragstart.${this._getEventNamespace()}`,r=>{n=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(r,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,r=>{if(!n)return;const i=e.getAbsolutePosition(),s=i.x-n.x,a=i.y-n.y;this.nodes().forEach(o=>{if(o===e||o.isDragging())return;const l=o.getAbsolutePosition();o.setAbsolutePosition({x:l.x+s,y:l.y+a}),o.startDrag(r)}),n=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(VT),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(VT,this.__getNodeRect)}__getNodeShape(e,n=this.rotation(),r){const i=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),s=e.getAbsoluteScale(r),a=e.getAbsolutePosition(r),o=i.x*s.x-e.offsetX()*s.x,l=i.y*s.y-e.offsetY()*s.y,u=($i.Konva.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),d={x:a.x+o*Math.cos(u)+l*Math.sin(-u),y:a.y+l*Math.cos(u)+o*Math.sin(u),width:i.width*s.x,height:i.height*s.y,rotation:u};return MD(d,-$i.Konva.getAngle(n),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-WT,y:-WT,width:0,height:0,rotation:0};const n=[];this.nodes().map(u=>{const d=u.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),p=[{x:d.x,y:d.y},{x:d.x+d.width,y:d.y},{x:d.x+d.width,y:d.y+d.height},{x:d.x,y:d.y+d.height}],h=u.getAbsoluteTransform();p.forEach(function(m){const y=h.point(m);n.push(y)})});const r=new kt.Transform;r.rotate(-$i.Konva.getAngle(this.rotation()));let i=1/0,s=1/0,a=-1/0,o=-1/0;n.forEach(function(u){const d=r.point(u);i===void 0&&(i=a=d.x,s=o=d.y),i=Math.min(i,d.x),s=Math.min(s,d.y),a=Math.max(a,d.x),o=Math.max(o,d.y)}),r.invert();const l=r.point({x:i,y:s});return{x:l.x,y:l.y,width:a-i,height:o-s,rotation:$i.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Dg.forEach(e=>{this._createAnchor(e)}),this._createAnchor("rotater")}_createAnchor(e){const n=new She.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:The?10:"auto"}),r=this;n.on("mousedown touchstart",function(i){r._handleMouseDown(i)}),n.on("dragstart",i=>{n.stopDrag(),i.cancelBubble=!0}),n.on("dragend",i=>{i.cancelBubble=!0}),n.on("mouseenter",()=>{const i=$i.Konva.getAngle(this.rotation()),s=this.rotateAnchorCursor(),a=Ahe(e,i,s);n.getStage().content&&(n.getStage().content.style.cursor=a),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){const e=new Nhe.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(n,r){const i=r.getParent(),s=i.padding();n.beginPath(),n.rect(-s,-s,r.width()+s*2,r.height()+s*2),n.moveTo(r.width()/2,-s),i.rotateEnabled()&&i.rotateLineVisible()&&n.lineTo(r.width()/2,-i.rotateAnchorOffset()*kt.Util._sign(r.height())-s),n.fillStrokeShape(r)},hitFunc:(n,r)=>{if(!this.shouldOverdrawWholeArea())return;const i=this.padding();n.beginPath(),n.rect(-i,-i,r.width()+i*2,r.height()+i*2),n.fillStrokeShape(r)}});this.add(e),this._proxyDrag(e),e.on("dragstart",n=>{n.cancelBubble=!0}),e.on("dragmove",n=>{n.cancelBubble=!0}),e.on("dragend",n=>{n.cancelBubble=!0}),this.on("dragmove",n=>{this.update()})}_handleMouseDown(e){if(this._transforming)return;this._movingAnchorName=e.target.name().split(" ")[0];const n=this._getNodeRect(),r=n.width,i=n.height,s=Math.sqrt(Math.pow(r,2)+Math.pow(i,2));this.sin=Math.abs(i/s),this.cos=Math.abs(r/s),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const a=e.target.getAbsolutePosition(),o=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:o.x-a.x,y:o.y-a.y},g3++,this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(l=>{l._fire("transformstart",{evt:e.evt,target:l})})}_handleMouseMove(e){let n,r,i;const s=this.findOne("."+this._movingAnchorName),a=s.getStage();a.setPointersPositions(e);const o=a.getPointerPosition();let l={x:o.x-this._anchorDragOffset.x,y:o.y-this._anchorDragOffset.y};const u=s.getAbsolutePosition();this.anchorDragBoundFunc()&&(l=this.anchorDragBoundFunc()(u,l,e)),s.setAbsolutePosition(l);const d=s.getAbsolutePosition();if(u.x===d.x&&u.y===d.y)return;if(this._movingAnchorName==="rotater"){const E=this._getNodeRect();n=s.x()-E.width/2,r=-s.y()+E.height/2;let A=Math.atan2(-r,n)+Math.PI/2;E.height<0&&(A-=Math.PI);const T=$i.Konva.getAngle(this.rotation())+A,M=$i.Konva.getAngle(this.rotationSnapTolerance()),j=Rhe(this.rotationSnaps(),T,M)-E.rotation,O=Phe(E,j);this._fitNodesInto(O,e);return}const p=this.shiftBehavior();let h;p==="inverted"?h=this.keepRatio()&&!e.shiftKey:p==="none"?h=this.keepRatio():h=this.keepRatio()||e.shiftKey;var v=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(h){var m=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};i=Math.sqrt(Math.pow(m.x-s.x(),2)+Math.pow(m.y-s.y(),2));var y=this.findOne(".top-left").x()>m.x?-1:1,x=this.findOne(".top-left").y()>m.y?-1:1;n=i*this.cos*y,r=i*this.sin*x,this.findOne(".top-left").x(m.x-n),this.findOne(".top-left").y(m.y-r)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(s.y());else if(this._movingAnchorName==="top-right"){if(h){var m=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};i=Math.sqrt(Math.pow(s.x()-m.x,2)+Math.pow(m.y-s.y(),2));var y=this.findOne(".top-right").x()<m.x?-1:1,x=this.findOne(".top-right").y()>m.y?-1:1;n=i*this.cos*y,r=i*this.sin*x,this.findOne(".top-right").x(m.x+n),this.findOne(".top-right").y(m.y-r)}var _=s.position();this.findOne(".top-left").y(_.y),this.findOne(".bottom-right").x(_.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(s.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(s.x());else if(this._movingAnchorName==="bottom-left"){if(h){var m=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};i=Math.sqrt(Math.pow(m.x-s.x(),2)+Math.pow(s.y()-m.y,2));var y=m.x<s.x()?-1:1,x=s.y()<m.y?-1:1;n=i*this.cos*y,r=i*this.sin*x,s.x(m.x-n),s.y(m.y+r)}_=s.position(),this.findOne(".top-left").x(_.x),this.findOne(".bottom-right").y(_.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(s.y());else if(this._movingAnchorName==="bottom-right"){if(h){var m=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};i=Math.sqrt(Math.pow(s.x()-m.x,2)+Math.pow(s.y()-m.y,2));var y=this.findOne(".bottom-right").x()<m.x?-1:1,x=this.findOne(".bottom-right").y()<m.y?-1:1;n=i*this.cos*y,r=i*this.sin*x,this.findOne(".bottom-right").x(m.x+n),this.findOne(".bottom-right").y(m.y+r)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var v=this.centeredScaling()||e.altKey;if(v){const E=this.findOne(".top-left"),A=this.findOne(".bottom-right"),P=E.x(),T=E.y(),M=this.getWidth()-A.x(),k=this.getHeight()-A.y();A.move({x:-P,y:-T}),E.move({x:M,y:k})}const w=this.findOne(".top-left").getAbsolutePosition();n=w.x,r=w.y;const b=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),N=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:r,width:b,height:N,rotation:$i.Konva.getAngle(this.rotation())},e)}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){var n;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const r=this.getNode();g3--,this._fire("transformend",{evt:e,target:r}),(n=this.getLayer())===null||n===void 0||n.batchDraw(),r&&this._nodes.forEach(i=>{var s;i._fire("transformend",{evt:e,target:i}),(s=i.getLayer())===null||s===void 0||s.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(e,n){const r=this._getNodeRect(),i=1;if(kt.Util._inRange(e.width,-this.padding()*2-i,i)){this.update();return}if(kt.Util._inRange(e.height,-this.padding()*2-i,i)){this.update();return}const s=new kt.Transform;if(s.rotate($i.Konva.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const h=s.point({x:-this.padding()*2,y:0});e.x+=h.x,e.y+=h.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=h.x,this._anchorDragOffset.y-=h.y}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const h=s.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=h.x,this._anchorDragOffset.y-=h.y,e.width+=this.padding()*2}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const h=s.point({x:0,y:-this.padding()*2});e.x+=h.x,e.y+=h.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=h.x,this._anchorDragOffset.y-=h.y,e.height+=this.padding()*2}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const h=s.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=h.x,this._anchorDragOffset.y-=h.y,e.height+=this.padding()*2}if(this.boundBoxFunc()){const h=this.boundBoxFunc()(r,e);h?e=h:kt.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const a=1e7,o=new kt.Transform;o.translate(r.x,r.y),o.rotate(r.rotation),o.scale(r.width/a,r.height/a);const l=new kt.Transform,u=e.width/a,d=e.height/a;this.flipEnabled()===!1?(l.translate(e.x,e.y),l.rotate(e.rotation),l.translate(e.width<0?e.width:0,e.height<0?e.height:0),l.scale(Math.abs(u),Math.abs(d))):(l.translate(e.x,e.y),l.rotate(e.rotation),l.scale(u,d));const p=l.multiply(o.invert());this._nodes.forEach(h=>{var m;const y=h.getParent().getAbsoluteTransform(),x=h.getTransform().copy();x.translate(h.offsetX(),h.offsetY());const _=new kt.Transform;_.multiply(y.copy().invert()).multiply(p).multiply(y).multiply(x);const v=_.decompose();h.setAttrs(v),(m=h.getLayer())===null||m===void 0||m.batchDraw()}),this.rotation(kt.Util._getRotation(e.rotation)),this._nodes.forEach(h=>{this._fire("transform",{evt:n,target:h}),h._fire("transform",{evt:n,target:h})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,n){this.findOne(e).setAttrs(n)}update(){var e;const n=this._getNodeRect();this.rotation(kt.Util._getRotation(n.rotation));const r=n.width,i=n.height,s=this.enabledAnchors(),a=this.resizeEnabled(),o=this.padding(),l=this.anchorSize(),u=this.find("._anchor");u.forEach(p=>{p.setAttrs({width:l,height:l,offsetX:l/2,offsetY:l/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:l/2+o,offsetY:l/2+o,visible:a&&s.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:r/2,y:0,offsetY:l/2+o,visible:a&&s.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:r,y:0,offsetX:l/2-o,offsetY:l/2+o,visible:a&&s.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:i/2,offsetX:l/2+o,visible:a&&s.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:r,y:i/2,offsetX:l/2-o,visible:a&&s.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:i,offsetX:l/2+o,offsetY:l/2-o,visible:a&&s.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:r/2,y:i,offsetY:l/2-o,visible:a&&s.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:r,y:i,offsetX:l/2-o,offsetY:l/2-o,visible:a&&s.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:r/2,y:-this.rotateAnchorOffset()*kt.Util._sign(i)-o,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:r,height:i,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const d=this.anchorStyleFunc();d&&u.forEach(p=>{d(p)}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),HT.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return GT.Node.prototype.toObject.call(this)}clone(e){return GT.Node.prototype.clone.call(this,e)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};d1.Transformer=ut;ut.isTransforming=()=>g3>0;function Lhe(t){return t instanceof Array||kt.Util.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach(function(e){Dg.indexOf(e)===-1&&kt.Util.warn("Unknown anchor name: "+e+". Available names are: "+Dg.join(", "))}),t||[]}ut.prototype.className="Transformer";(0,Ehe._registerNode)(ut);xt.Factory.addGetterSetter(ut,"enabledAnchors",Dg,Lhe);xt.Factory.addGetterSetter(ut,"flipEnabled",!0,(0,rl.getBooleanValidator)());xt.Factory.addGetterSetter(ut,"resizeEnabled",!0);xt.Factory.addGetterSetter(ut,"anchorSize",10,(0,rl.getNumberValidator)());xt.Factory.addGetterSetter(ut,"rotateEnabled",!0);xt.Factory.addGetterSetter(ut,"rotateLineVisible",!0);xt.Factory.addGetterSetter(ut,"rotationSnaps",[]);xt.Factory.addGetterSetter(ut,"rotateAnchorOffset",50,(0,rl.getNumberValidator)());xt.Factory.addGetterSetter(ut,"rotateAnchorCursor","crosshair");xt.Factory.addGetterSetter(ut,"rotationSnapTolerance",5,(0,rl.getNumberValidator)());xt.Factory.addGetterSetter(ut,"borderEnabled",!0);xt.Factory.addGetterSetter(ut,"anchorStroke","rgb(0, 161, 255)");xt.Factory.addGetterSetter(ut,"anchorStrokeWidth",1,(0,rl.getNumberValidator)());xt.Factory.addGetterSetter(ut,"anchorFill","white");xt.Factory.addGetterSetter(ut,"anchorCornerRadius",0,(0,rl.getNumberValidator)());xt.Factory.addGetterSetter(ut,"borderStroke","rgb(0, 161, 255)");xt.Factory.addGetterSetter(ut,"borderStrokeWidth",1,(0,rl.getNumberValidator)());xt.Factory.addGetterSetter(ut,"borderDash");xt.Factory.addGetterSetter(ut,"keepRatio",!0);xt.Factory.addGetterSetter(ut,"shiftBehavior","default");xt.Factory.addGetterSetter(ut,"centeredScaling",!1);xt.Factory.addGetterSetter(ut,"ignoreStroke",!1);xt.Factory.addGetterSetter(ut,"padding",0,(0,rl.getNumberValidator)());xt.Factory.addGetterSetter(ut,"node");xt.Factory.addGetterSetter(ut,"nodes");xt.Factory.addGetterSetter(ut,"boundBoxFunc");xt.Factory.addGetterSetter(ut,"anchorDragBoundFunc");xt.Factory.addGetterSetter(ut,"anchorStyleFunc");xt.Factory.addGetterSetter(ut,"shouldOverdrawWholeArea",!1);xt.Factory.addGetterSetter(ut,"useSingleNodeRotation",!0);xt.Factory.backCompat(ut,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var f1={};Object.defineProperty(f1,"__esModule",{value:!0});f1.Wedge=void 0;const h1=tt,Ihe=On,Mhe=Je,DD=Ge,Dhe=Je;class Da extends Ihe.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,Mhe.Konva.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}f1.Wedge=Da;Da.prototype.className="Wedge";Da.prototype._centroid=!0;Da.prototype._attrsAffectingSize=["radius"];(0,Dhe._registerNode)(Da);h1.Factory.addGetterSetter(Da,"radius",0,(0,DD.getNumberValidator)());h1.Factory.addGetterSetter(Da,"angle",0,(0,DD.getNumberValidator)());h1.Factory.addGetterSetter(Da,"clockwise",!1);h1.Factory.backCompat(Da,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var p1={};Object.defineProperty(p1,"__esModule",{value:!0});p1.Blur=void 0;const KT=tt,Fhe=Gt,qhe=Ge;function YT(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const Bhe=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],zhe=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function $he(t,e){const n=t.data,r=t.width,i=t.height;let s,a,o,l,u,d,p,h,m,y,x,_,v,w,b,N,E,A,P,T,M,k,j,O,q=e+e+1,I=r-1,D=i-1,U=e+1,W=U*(U+1)/2,Y=new YT,H=null,B=Y,L=null,z=null,K=Bhe[e],J=zhe[e];for(o=1;o<q;o++)B=B.next=new YT,o===U&&(H=B);for(B.next=Y,p=d=0,a=0;a<i;a++){for(N=E=A=P=h=m=y=x=0,_=U*(T=n[d]),v=U*(M=n[d+1]),w=U*(k=n[d+2]),b=U*(j=n[d+3]),h+=W*T,m+=W*M,y+=W*k,x+=W*j,B=Y,o=0;o<U;o++)B.r=T,B.g=M,B.b=k,B.a=j,B=B.next;for(o=1;o<U;o++)l=d+((I<o?I:o)<<2),h+=(B.r=T=n[l])*(O=U-o),m+=(B.g=M=n[l+1])*O,y+=(B.b=k=n[l+2])*O,x+=(B.a=j=n[l+3])*O,N+=T,E+=M,A+=k,P+=j,B=B.next;for(L=Y,z=H,s=0;s<r;s++)n[d+3]=j=x*K>>J,j!==0?(j=255/j,n[d]=(h*K>>J)*j,n[d+1]=(m*K>>J)*j,n[d+2]=(y*K>>J)*j):n[d]=n[d+1]=n[d+2]=0,h-=_,m-=v,y-=w,x-=b,_-=L.r,v-=L.g,w-=L.b,b-=L.a,l=p+((l=s+e+1)<I?l:I)<<2,N+=L.r=n[l],E+=L.g=n[l+1],A+=L.b=n[l+2],P+=L.a=n[l+3],h+=N,m+=E,y+=A,x+=P,L=L.next,_+=T=z.r,v+=M=z.g,w+=k=z.b,b+=j=z.a,N-=T,E-=M,A-=k,P-=j,z=z.next,d+=4;p+=r}for(s=0;s<r;s++){for(E=A=P=N=m=y=x=h=0,d=s<<2,_=U*(T=n[d]),v=U*(M=n[d+1]),w=U*(k=n[d+2]),b=U*(j=n[d+3]),h+=W*T,m+=W*M,y+=W*k,x+=W*j,B=Y,o=0;o<U;o++)B.r=T,B.g=M,B.b=k,B.a=j,B=B.next;for(u=r,o=1;o<=e;o++)d=u+s<<2,h+=(B.r=T=n[d])*(O=U-o),m+=(B.g=M=n[d+1])*O,y+=(B.b=k=n[d+2])*O,x+=(B.a=j=n[d+3])*O,N+=T,E+=M,A+=k,P+=j,B=B.next,o<D&&(u+=r);for(d=s,L=Y,z=H,a=0;a<i;a++)l=d<<2,n[l+3]=j=x*K>>J,j>0?(j=255/j,n[l]=(h*K>>J)*j,n[l+1]=(m*K>>J)*j,n[l+2]=(y*K>>J)*j):n[l]=n[l+1]=n[l+2]=0,h-=_,m-=v,y-=w,x-=b,_-=L.r,v-=L.g,w-=L.b,b-=L.a,l=s+((l=a+U)<D?l:D)*r<<2,h+=N+=L.r=n[l],m+=E+=L.g=n[l+1],y+=A+=L.b=n[l+2],x+=P+=L.a=n[l+3],L=L.next,_+=T=z.r,v+=M=z.g,w+=k=z.b,b+=j=z.a,N-=T,E-=M,A-=k,P-=j,z=z.next,d+=r}}const Uhe=function(e){const n=Math.round(this.blurRadius());n>0&&$he(e,n)};p1.Blur=Uhe;KT.Factory.addGetterSetter(Fhe.Node,"blurRadius",0,(0,qhe.getNumberValidator)(),KT.Factory.afterSetFilter);var m1={};Object.defineProperty(m1,"__esModule",{value:!0});m1.Brighten=void 0;const XT=tt,Ghe=Gt,Hhe=Ge,Vhe=function(t){let e=this.brightness()*255,n=t.data,r=n.length,i;for(i=0;i<r;i+=4)n[i]+=e,n[i+1]+=e,n[i+2]+=e};m1.Brighten=Vhe;XT.Factory.addGetterSetter(Ghe.Node,"brightness",0,(0,Hhe.getNumberValidator)(),XT.Factory.afterSetFilter);var g1={};Object.defineProperty(g1,"__esModule",{value:!0});g1.Contrast=void 0;const QT=tt,Whe=Gt,Khe=Ge,Yhe=function(t){const e=Math.pow((this.contrast()+100)/100,2);let n=t.data,r=n.length,i=150,s=150,a=150,o;for(o=0;o<r;o+=4)i=n[o],s=n[o+1],a=n[o+2],i/=255,i-=.5,i*=e,i+=.5,i*=255,s/=255,s-=.5,s*=e,s+=.5,s*=255,a/=255,a-=.5,a*=e,a+=.5,a*=255,i=i<0?0:i>255?255:i,s=s<0?0:s>255?255:s,a=a<0?0:a>255?255:a,n[o]=i,n[o+1]=s,n[o+2]=a};g1.Contrast=Yhe;QT.Factory.addGetterSetter(Whe.Node,"contrast",0,(0,Khe.getNumberValidator)(),QT.Factory.afterSetFilter);var v1={};Object.defineProperty(v1,"__esModule",{value:!0});v1.Emboss=void 0;const $o=tt,y1=Gt,Xhe=tn,FD=Ge,Qhe=function(t){let e=this.embossStrength()*10,n=this.embossWhiteLevel()*255,r=this.embossDirection(),i=this.embossBlend(),s=0,a=0,o=t.data,l=t.width,u=t.height,d=l*4,p=u;switch(r){case"top-left":s=-1,a=-1;break;case"top":s=-1,a=0;break;case"top-right":s=-1,a=1;break;case"right":s=0,a=1;break;case"bottom-right":s=1,a=1;break;case"bottom":s=1,a=0;break;case"bottom-left":s=1,a=-1;break;case"left":s=0,a=-1;break;default:Xhe.Util.error("Unknown emboss direction: "+r)}do{const h=(p-1)*d;let m=s;p+m<1&&(m=0),p+m>u&&(m=0);const y=(p-1+m)*l*4;let x=l;do{const _=h+(x-1)*4;let v=a;x+v<1&&(v=0),x+v>l&&(v=0);const w=y+(x-1+v)*4,b=o[_]-o[w],N=o[_+1]-o[w+1],E=o[_+2]-o[w+2];let A=b;const P=A>0?A:-A,T=N>0?N:-N,M=E>0?E:-E;if(T>P&&(A=N),M>P&&(A=E),A*=e,i){const k=o[_]+A,j=o[_+1]+A,O=o[_+2]+A;o[_]=k>255?255:k<0?0:k,o[_+1]=j>255?255:j<0?0:j,o[_+2]=O>255?255:O<0?0:O}else{let k=n-A;k<0?k=0:k>255&&(k=255),o[_]=o[_+1]=o[_+2]=k}}while(--x)}while(--p)};v1.Emboss=Qhe;$o.Factory.addGetterSetter(y1.Node,"embossStrength",.5,(0,FD.getNumberValidator)(),$o.Factory.afterSetFilter);$o.Factory.addGetterSetter(y1.Node,"embossWhiteLevel",.5,(0,FD.getNumberValidator)(),$o.Factory.afterSetFilter);$o.Factory.addGetterSetter(y1.Node,"embossDirection","top-left",null,$o.Factory.afterSetFilter);$o.Factory.addGetterSetter(y1.Node,"embossBlend",!1,null,$o.Factory.afterSetFilter);var x1={};Object.defineProperty(x1,"__esModule",{value:!0});x1.Enhance=void 0;const ZT=tt,Zhe=Gt,Jhe=Ge;function p5(t,e,n,r,i){let s=n-e,a=i-r,o;return s===0?r+a/2:a===0?r:(o=(t-e)/s,o=a*o+r,o)}const epe=function(t){let e=t.data,n=e.length,r=e[0],i=r,s,a=e[1],o=a,l,u=e[2],d=u,p,h;const m=this.enhance();if(m===0)return;for(h=0;h<n;h+=4)s=e[h+0],s<r?r=s:s>i&&(i=s),l=e[h+1],l<a?a=l:l>o&&(o=l),p=e[h+2],p<u?u=p:p>d&&(d=p);i===r&&(i=255,r=0),o===a&&(o=255,a=0),d===u&&(d=255,u=0);let y,x,_,v,w,b,N,E,A;for(m>0?(x=i+m*(255-i),_=r-m*(r-0),w=o+m*(255-o),b=a-m*(a-0),E=d+m*(255-d),A=u-m*(u-0)):(y=(i+r)*.5,x=i+m*(i-y),_=r+m*(r-y),v=(o+a)*.5,w=o+m*(o-v),b=a+m*(a-v),N=(d+u)*.5,E=d+m*(d-N),A=u+m*(u-N)),h=0;h<n;h+=4)e[h+0]=p5(e[h+0],r,i,_,x),e[h+1]=p5(e[h+1],a,o,b,w),e[h+2]=p5(e[h+2],u,d,A,E)};x1.Enhance=epe;ZT.Factory.addGetterSetter(Zhe.Node,"enhance",0,(0,Jhe.getNumberValidator)(),ZT.Factory.afterSetFilter);var b1={};Object.defineProperty(b1,"__esModule",{value:!0});b1.Grayscale=void 0;const tpe=function(t){let e=t.data,n=e.length,r,i;for(r=0;r<n;r+=4)i=.34*e[r]+.5*e[r+1]+.16*e[r+2],e[r]=i,e[r+1]=i,e[r+2]=i};b1.Grayscale=tpe;var w1={};Object.defineProperty(w1,"__esModule",{value:!0});w1.HSL=void 0;const Hu=tt,qN=Gt,BN=Ge;Hu.Factory.addGetterSetter(qN.Node,"hue",0,(0,BN.getNumberValidator)(),Hu.Factory.afterSetFilter);Hu.Factory.addGetterSetter(qN.Node,"saturation",0,(0,BN.getNumberValidator)(),Hu.Factory.afterSetFilter);Hu.Factory.addGetterSetter(qN.Node,"luminance",0,(0,BN.getNumberValidator)(),Hu.Factory.afterSetFilter);const npe=function(t){let e=t.data,n=e.length,r=1,i=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,a=this.luminance()*127,o;const l=r*i*Math.cos(s*Math.PI/180),u=r*i*Math.sin(s*Math.PI/180),d=.299*r+.701*l+.167*u,p=.587*r-.587*l+.33*u,h=.114*r-.114*l-.497*u,m=.299*r-.299*l-.328*u,y=.587*r+.413*l+.035*u,x=.114*r-.114*l+.293*u,_=.299*r-.3*l+1.25*u,v=.587*r-.586*l-1.05*u,w=.114*r+.886*l-.2*u;let b,N,E,A;for(o=0;o<n;o+=4)b=e[o+0],N=e[o+1],E=e[o+2],A=e[o+3],e[o+0]=d*b+p*N+h*E+a,e[o+1]=m*b+y*N+x*E+a,e[o+2]=_*b+v*N+w*E+a,e[o+3]=A};w1.HSL=npe;var _1={};Object.defineProperty(_1,"__esModule",{value:!0});_1.HSV=void 0;const Vu=tt,zN=Gt,$N=Ge,rpe=function(t){const e=t.data,n=e.length,r=Math.pow(2,this.value()),i=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,a=r*i*Math.cos(s*Math.PI/180),o=r*i*Math.sin(s*Math.PI/180),l=.299*r+.701*a+.167*o,u=.587*r-.587*a+.33*o,d=.114*r-.114*a-.497*o,p=.299*r-.299*a-.328*o,h=.587*r+.413*a+.035*o,m=.114*r-.114*a+.293*o,y=.299*r-.3*a+1.25*o,x=.587*r-.586*a-1.05*o,_=.114*r+.886*a-.2*o;let v,w,b,N;for(let E=0;E<n;E+=4)v=e[E+0],w=e[E+1],b=e[E+2],N=e[E+3],e[E+0]=l*v+u*w+d*b,e[E+1]=p*v+h*w+m*b,e[E+2]=y*v+x*w+_*b,e[E+3]=N};_1.HSV=rpe;Vu.Factory.addGetterSetter(zN.Node,"hue",0,(0,$N.getNumberValidator)(),Vu.Factory.afterSetFilter);Vu.Factory.addGetterSetter(zN.Node,"saturation",0,(0,$N.getNumberValidator)(),Vu.Factory.afterSetFilter);Vu.Factory.addGetterSetter(zN.Node,"value",0,(0,$N.getNumberValidator)(),Vu.Factory.afterSetFilter);var N1={};Object.defineProperty(N1,"__esModule",{value:!0});N1.Invert=void 0;const ipe=function(t){let e=t.data,n=e.length,r;for(r=0;r<n;r+=4)e[r]=255-e[r],e[r+1]=255-e[r+1],e[r+2]=255-e[r+2]};N1.Invert=ipe;var S1={};Object.defineProperty(S1,"__esModule",{value:!0});S1.Kaleidoscope=void 0;const Fg=tt,qD=Gt,JT=tn,BD=Ge,spe=function(t,e,n){let r=t.data,i=e.data,s=t.width,a=t.height,o=n.polarCenterX||s/2,l=n.polarCenterY||a/2,u,d,p,h=0,m=0,y=0,x=0,_,v=Math.sqrt(o*o+l*l);d=s-o,p=a-l,_=Math.sqrt(d*d+p*p),v=_>v?_:v;let w=a,b=s,N,E,A=360/b*Math.PI/180,P,T;for(E=0;E<b;E+=1)for(P=Math.sin(E*A),T=Math.cos(E*A),N=0;N<w;N+=1)d=Math.floor(o+v*N/w*T),p=Math.floor(l+v*N/w*P),u=(p*s+d)*4,h=r[u+0],m=r[u+1],y=r[u+2],x=r[u+3],u=(E+N*s)*4,i[u+0]=h,i[u+1]=m,i[u+2]=y,i[u+3]=x},ape=function(t,e,n){let r=t.data,i=e.data,s=t.width,a=t.height,o=n.polarCenterX||s/2,l=n.polarCenterY||a/2,u,d,p,h,m,y=0,x=0,_=0,v=0,w,b=Math.sqrt(o*o+l*l);d=s-o,p=a-l,w=Math.sqrt(d*d+p*p),b=w>b?w:b;let N=a,E=s,A,P,T=n.polarRotation||0,M,k;for(d=0;d<s;d+=1)for(p=0;p<a;p+=1)h=d-o,m=p-l,A=Math.sqrt(h*h+m*m)*N/b,P=(Math.atan2(m,h)*180/Math.PI+360+T)%360,P=P*E/360,M=Math.floor(P),k=Math.floor(A),u=(k*s+M)*4,y=r[u+0],x=r[u+1],_=r[u+2],v=r[u+3],u=(p*s+d)*4,i[u+0]=y,i[u+1]=x,i[u+2]=_,i[u+3]=v},ope=function(t){const e=t.width,n=t.height;let r,i,s,a,o,l,u,d,p,h,m=Math.round(this.kaleidoscopePower());const y=Math.round(this.kaleidoscopeAngle()),x=Math.floor(e*(y%360)/360);if(m<1)return;const _=JT.Util.createCanvasElement();_.width=e,_.height=n;const v=_.getContext("2d").getImageData(0,0,e,n);JT.Util.releaseCanvas(_),spe(t,v,{polarCenterX:e/2,polarCenterY:n/2});let w=e/Math.pow(2,m);for(;w<=8;)w=w*2,m-=1;w=Math.ceil(w);let b=w,N=0,E=b,A=1;for(x+w>e&&(N=b,E=0,A=-1),i=0;i<n;i+=1)for(r=N;r!==E;r+=A)s=Math.round(r+x)%e,p=(e*i+s)*4,o=v.data[p+0],l=v.data[p+1],u=v.data[p+2],d=v.data[p+3],h=(e*i+r)*4,v.data[h+0]=o,v.data[h+1]=l,v.data[h+2]=u,v.data[h+3]=d;for(i=0;i<n;i+=1)for(b=Math.floor(w),a=0;a<m;a+=1){for(r=0;r<b+1;r+=1)p=(e*i+r)*4,o=v.data[p+0],l=v.data[p+1],u=v.data[p+2],d=v.data[p+3],h=(e*i+b*2-r-1)*4,v.data[h+0]=o,v.data[h+1]=l,v.data[h+2]=u,v.data[h+3]=d;b*=2}ape(v,t,{polarRotation:0})};S1.Kaleidoscope=ope;Fg.Factory.addGetterSetter(qD.Node,"kaleidoscopePower",2,(0,BD.getNumberValidator)(),Fg.Factory.afterSetFilter);Fg.Factory.addGetterSetter(qD.Node,"kaleidoscopeAngle",0,(0,BD.getNumberValidator)(),Fg.Factory.afterSetFilter);var E1={};Object.defineProperty(E1,"__esModule",{value:!0});E1.Mask=void 0;const eA=tt,lpe=Gt,cpe=Ge;function gm(t,e,n){let r=(n*t.width+e)*4;const i=[];return i.push(t.data[r++],t.data[r++],t.data[r++],t.data[r++]),i}function sf(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}function upe(t){const e=[0,0,0];for(let n=0;n<t.length;n++)e[0]+=t[n][0],e[1]+=t[n][1],e[2]+=t[n][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}function dpe(t,e){const n=gm(t,0,0),r=gm(t,t.width-1,0),i=gm(t,0,t.height-1),s=gm(t,t.width-1,t.height-1),a=e||10;if(sf(n,r)<a&&sf(r,s)<a&&sf(s,i)<a&&sf(i,n)<a){const o=upe([r,n,s,i]),l=[];for(let u=0;u<t.width*t.height;u++){const d=sf(o,[t.data[u*4],t.data[u*4+1],t.data[u*4+2]]);l[u]=d<a?0:255}return l}}function fpe(t,e){for(let n=0;n<t.width*t.height;n++)t.data[4*n+3]=e[n]}function hpe(t,e,n){const r=[1,1,1,1,0,1,1,1,1],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),a=[];for(let o=0;o<n;o++)for(let l=0;l<e;l++){const u=o*e+l;let d=0;for(let p=0;p<i;p++)for(let h=0;h<i;h++){const m=o+p-s,y=l+h-s;if(m>=0&&m<n&&y>=0&&y<e){const x=m*e+y,_=r[p*i+h];d+=t[x]*_}}a[u]=d===255*8?255:0}return a}function ppe(t,e,n){const r=[1,1,1,1,1,1,1,1,1],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),a=[];for(let o=0;o<n;o++)for(let l=0;l<e;l++){const u=o*e+l;let d=0;for(let p=0;p<i;p++)for(let h=0;h<i;h++){const m=o+p-s,y=l+h-s;if(m>=0&&m<n&&y>=0&&y<e){const x=m*e+y,_=r[p*i+h];d+=t[x]*_}}a[u]=d>=255*4?255:0}return a}function mpe(t,e,n){const r=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),a=[];for(let o=0;o<n;o++)for(let l=0;l<e;l++){const u=o*e+l;let d=0;for(let p=0;p<i;p++)for(let h=0;h<i;h++){const m=o+p-s,y=l+h-s;if(m>=0&&m<n&&y>=0&&y<e){const x=m*e+y,_=r[p*i+h];d+=t[x]*_}}a[u]=d}return a}const gpe=function(t){let e=this.threshold(),n=dpe(t,e);return n&&(n=hpe(n,t.width,t.height),n=ppe(n,t.width,t.height),n=mpe(n,t.width,t.height),fpe(t,n)),t};E1.Mask=gpe;eA.Factory.addGetterSetter(lpe.Node,"threshold",0,(0,cpe.getNumberValidator)(),eA.Factory.afterSetFilter);var k1={};Object.defineProperty(k1,"__esModule",{value:!0});k1.Noise=void 0;const tA=tt,vpe=Gt,ype=Ge,xpe=function(t){const e=this.noise()*255,n=t.data,r=n.length,i=e/2;for(let s=0;s<r;s+=4)n[s+0]+=i-2*i*Math.random(),n[s+1]+=i-2*i*Math.random(),n[s+2]+=i-2*i*Math.random()};k1.Noise=xpe;tA.Factory.addGetterSetter(vpe.Node,"noise",.2,(0,ype.getNumberValidator)(),tA.Factory.afterSetFilter);var C1={};Object.defineProperty(C1,"__esModule",{value:!0});C1.Pixelate=void 0;const nA=tt,bpe=tn,wpe=Gt,_pe=Ge,Npe=function(t){let e=Math.ceil(this.pixelSize()),n=t.width,r=t.height,i,s,a,o,l,u,d,p=Math.ceil(n/e),h=Math.ceil(r/e),m,y,x,_,v,w,b,N=t.data;if(e<=0){bpe.Util.error("pixelSize value can not be <= 0");return}for(v=0;v<p;v+=1)for(w=0;w<h;w+=1){for(o=0,l=0,u=0,d=0,m=v*e,y=m+e,x=w*e,_=x+e,b=0,i=m;i<y;i+=1)if(!(i>=n))for(s=x;s<_;s+=1)s>=r||(a=(n*s+i)*4,o+=N[a+0],l+=N[a+1],u+=N[a+2],d+=N[a+3],b+=1);for(o=o/b,l=l/b,u=u/b,d=d/b,i=m;i<y;i+=1)if(!(i>=n))for(s=x;s<_;s+=1)s>=r||(a=(n*s+i)*4,N[a+0]=o,N[a+1]=l,N[a+2]=u,N[a+3]=d)}};C1.Pixelate=Npe;nA.Factory.addGetterSetter(wpe.Node,"pixelSize",8,(0,_pe.getNumberValidator)(),nA.Factory.afterSetFilter);var j1={};Object.defineProperty(j1,"__esModule",{value:!0});j1.Posterize=void 0;const rA=tt,Spe=Gt,Epe=Ge,kpe=function(t){let e=Math.round(this.levels()*254)+1,n=t.data,r=n.length,i=255/e,s;for(s=0;s<r;s+=1)n[s]=Math.floor(n[s]/i)*i};j1.Posterize=kpe;rA.Factory.addGetterSetter(Spe.Node,"levels",.5,(0,Epe.getNumberValidator)(),rA.Factory.afterSetFilter);var T1={};Object.defineProperty(T1,"__esModule",{value:!0});T1.RGB=void 0;const qg=tt,UN=Gt,Cpe=Ge,jpe=function(t){let e=t.data,n=e.length,r=this.red(),i=this.green(),s=this.blue(),a,o;for(a=0;a<n;a+=4)o=(.34*e[a]+.5*e[a+1]+.16*e[a+2])/255,e[a]=o*r,e[a+1]=o*i,e[a+2]=o*s,e[a+3]=e[a+3]};T1.RGB=jpe;qg.Factory.addGetterSetter(UN.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});qg.Factory.addGetterSetter(UN.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});qg.Factory.addGetterSetter(UN.Node,"blue",0,Cpe.RGBComponent,qg.Factory.afterSetFilter);var A1={};Object.defineProperty(A1,"__esModule",{value:!0});A1.RGBA=void 0;const vh=tt,O1=Gt,Tpe=Ge,Ape=function(t){const e=t.data,n=e.length,r=this.red(),i=this.green(),s=this.blue(),a=this.alpha();for(let o=0;o<n;o+=4){const l=1-a;e[o]=r*a+e[o]*l,e[o+1]=i*a+e[o+1]*l,e[o+2]=s*a+e[o+2]*l}};A1.RGBA=Ape;vh.Factory.addGetterSetter(O1.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});vh.Factory.addGetterSetter(O1.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});vh.Factory.addGetterSetter(O1.Node,"blue",0,Tpe.RGBComponent,vh.Factory.afterSetFilter);vh.Factory.addGetterSetter(O1.Node,"alpha",1,function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t});var P1={};Object.defineProperty(P1,"__esModule",{value:!0});P1.Sepia=void 0;const Ope=function(t){let e=t.data,n=e.length,r,i,s,a;for(r=0;r<n;r+=4)i=e[r+0],s=e[r+1],a=e[r+2],e[r+0]=Math.min(255,i*.393+s*.769+a*.189),e[r+1]=Math.min(255,i*.349+s*.686+a*.168),e[r+2]=Math.min(255,i*.272+s*.534+a*.131)};P1.Sepia=Ope;var R1={};Object.defineProperty(R1,"__esModule",{value:!0});R1.Solarize=void 0;const Ppe=function(t){const e=t.data,n=t.width,r=t.height,i=n*4;let s=r;do{const a=(s-1)*i;let o=n;do{const l=a+(o-1)*4;let u=e[l],d=e[l+1],p=e[l+2];u>127&&(u=255-u),d>127&&(d=255-d),p>127&&(p=255-p),e[l]=u,e[l+1]=d,e[l+2]=p}while(--o)}while(--s)};R1.Solarize=Ppe;var L1={};Object.defineProperty(L1,"__esModule",{value:!0});L1.Threshold=void 0;const iA=tt,Rpe=Gt,Lpe=Ge,Ipe=function(t){const e=this.threshold()*255,n=t.data,r=n.length;for(let i=0;i<r;i+=1)n[i]=n[i]<e?0:255};L1.Threshold=Ipe;iA.Factory.addGetterSetter(Rpe.Node,"threshold",.5,(0,Lpe.getNumberValidator)(),iA.Factory.afterSetFilter);Object.defineProperty(U0,"__esModule",{value:!0});U0.Konva=void 0;const sA=Ig,Mpe=Y0,Dpe=Z0,Fpe=t1,qpe=n1,Bpe=r1,aA=Gu,zpe=Gh,$pe=dd,Upe=Vh,Gpe=a1,Hpe=o1,Vpe=l1,Wpe=c1,Kpe=hd,Ype=u1,Xpe=d1,Qpe=f1,Zpe=p1,Jpe=m1,eme=g1,tme=v1,nme=x1,rme=b1,ime=w1,sme=_1,ame=N1,ome=S1,lme=E1,cme=k1,ume=C1,dme=j1,fme=T1,hme=A1,pme=P1,mme=R1,gme=L1;U0.Konva=sA.Konva.Util._assign(sA.Konva,{Arc:Mpe.Arc,Arrow:Dpe.Arrow,Circle:Fpe.Circle,Ellipse:qpe.Ellipse,Image:Bpe.Image,Label:aA.Label,Tag:aA.Tag,Line:zpe.Line,Path:$pe.Path,Rect:Upe.Rect,RegularPolygon:Gpe.RegularPolygon,Ring:Hpe.Ring,Sprite:Vpe.Sprite,Star:Wpe.Star,Text:Kpe.Text,TextPath:Ype.TextPath,Transformer:Xpe.Transformer,Wedge:Qpe.Wedge,Filters:{Blur:Zpe.Blur,Brighten:Jpe.Brighten,Contrast:eme.Contrast,Emboss:tme.Emboss,Enhance:nme.Enhance,Grayscale:rme.Grayscale,HSL:ime.HSL,HSV:sme.HSV,Invert:ame.Invert,Kaleidoscope:ome.Kaleidoscope,Mask:lme.Mask,Noise:cme.Noise,Pixelate:ume.Pixelate,Posterize:dme.Posterize,RGB:fme.RGB,RGBA:hme.RGBA,Sepia:pme.Sepia,Solarize:mme.Solarize,Threshold:gme.Threshold}});var vme=sD.exports;Object.defineProperty(vme,"__esModule",{value:!0});const yme=U0;sD.exports=yme.Konva;var v3={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;var n=Ig;Object.defineProperty(e,"Konva",{enumerable:!0,get:function(){return n.Konva}});const r=Ig;t.exports=r.Konva})(v3,v3.exports);var xme=v3.exports;const yh=Uo(xme);var zD={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bme=function(e){var n={},r=V,i=bf,s=Object.assign;function a(f){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+f,S=1;S<arguments.length;S++)g+="&args[]="+encodeURIComponent(arguments[S]);return"Minified React error #"+f+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),y=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),N=Symbol.for("react.offscreen"),E=Symbol.iterator;function A(f){return f===null||typeof f!="object"?null:(f=E&&f[E]||f["@@iterator"],typeof f=="function"?f:null)}function P(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case d:return"Fragment";case u:return"Portal";case h:return"Profiler";case p:return"StrictMode";case _:return"Suspense";case v:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case y:return(f.displayName||"Context")+".Consumer";case m:return(f._context.displayName||"Context")+".Provider";case x:var g=f.render;return f=f.displayName,f||(f=g.displayName||g.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case w:return g=f.displayName||null,g!==null?g:P(f.type)||"Memo";case b:g=f._payload,f=f._init;try{return P(f(g))}catch{}}return null}function T(f){var g=f.type;switch(f.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=g.render,f=f.displayName||f.name||"",g.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P(g);case 8:return g===p?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g}return null}function M(f){var g=f,S=f;if(f.alternate)for(;g.return;)g=g.return;else{f=g;do g=f,g.flags&4098&&(S=g.return),f=g.return;while(f)}return g.tag===3?S:null}function k(f){if(M(f)!==f)throw Error(a(188))}function j(f){var g=f.alternate;if(!g){if(g=M(f),g===null)throw Error(a(188));return g!==f?null:f}for(var S=f,C=g;;){var R=S.return;if(R===null)break;var $=R.alternate;if($===null){if(C=R.return,C!==null){S=C;continue}break}if(R.child===$.child){for($=R.child;$;){if($===S)return k(R),f;if($===C)return k(R),g;$=$.sibling}throw Error(a(188))}if(S.return!==C.return)S=R,C=$;else{for(var ee=!1,oe=R.child;oe;){if(oe===S){ee=!0,S=R,C=$;break}if(oe===C){ee=!0,C=R,S=$;break}oe=oe.sibling}if(!ee){for(oe=$.child;oe;){if(oe===S){ee=!0,S=$,C=R;break}if(oe===C){ee=!0,C=$,S=R;break}oe=oe.sibling}if(!ee)throw Error(a(189))}}if(S.alternate!==C)throw Error(a(190))}if(S.tag!==3)throw Error(a(188));return S.stateNode.current===S?f:g}function O(f){return f=j(f),f!==null?q(f):null}function q(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var g=q(f);if(g!==null)return g;f=f.sibling}return null}function I(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){if(f.tag!==4){var g=I(f);if(g!==null)return g}f=f.sibling}return null}var D=Array.isArray,U=e.getPublicInstance,W=e.getRootHostContext,Y=e.getChildHostContext,H=e.prepareForCommit,B=e.resetAfterCommit,L=e.createInstance,z=e.appendInitialChild,K=e.finalizeInitialChildren,J=e.prepareUpdate,ne=e.shouldSetTextContent,X=e.createTextInstance,G=e.scheduleTimeout,te=e.cancelTimeout,re=e.noTimeout,Q=e.isPrimaryRenderer,se=e.supportsMutation,de=e.supportsPersistence,le=e.supportsHydration,ue=e.getInstanceFromNode,he=e.preparePortalMount,qe=e.getCurrentEventPriority,we=e.detachDeletedInstance,ae=e.supportsMicrotasks,me=e.scheduleMicrotask,_e=e.supportsTestSelectors,Ee=e.findFiberRoot,xe=e.getBoundingRect,Oe=e.getTextContent,Te=e.isHiddenSubtree,Be=e.matchAccessibilityRole,Et=e.setFocusIfFocusable,bt=e.setupIntersectionObserver,He=e.appendChild,wn=e.appendChildToContainer,Ve=e.commitTextUpdate,dt=e.commitMount,cn=e.commitUpdate,nn=e.insertBefore,Ht=e.insertInContainerBefore,Xn=e.removeChild,Qn=e.removeChildFromContainer,mn=e.resetTextContent,hr=e.hideInstance,Bn=e.hideTextInstance,Nr=e.unhideInstance,Pi=e.unhideTextInstance,si=e.clearContainer,pr=e.cloneInstance,ai=e.createContainerChildSet,cs=e.appendChildToContainerChildSet,Us=e.finalizeContainerChildren,Ri=e.replaceContainerChildren,Br=e.cloneHiddenInstance,Gs=e.cloneHiddenTextInstance,zr=e.canHydrateInstance,sl=e.canHydrateTextInstance,al=e.canHydrateSuspenseInstance,Fa=e.isSuspenseInstancePending,us=e.isSuspenseInstanceFallback,Hs=e.getSuspenseInstanceFallbackErrorDetails,un=e.registerSuspenseInstanceRetry,ds=e.getNextHydratableSibling,ol=e.getFirstHydratableChild,ll=e.getFirstHydratableChildWithinContainer,qa=e.getFirstHydratableChildWithinSuspenseInstance,cl=e.hydrateInstance,gn=e.hydrateTextInstance,ul=e.hydrateSuspenseInstance,dl=e.getNextHydratableInstanceAfterSuspenseInstance,fl=e.commitHydratedContainer,hl=e.commitHydratedSuspenseInstance,pl=e.clearSuspenseBoundary,Rn=e.clearSuspenseBoundaryFromContainer,Ba=e.shouldDeleteUnhydratedTailInstances,ml=e.didNotMatchHydratedContainerTextInstance,gl=e.didNotMatchHydratedTextInstance,Vs;function Li(f){if(Vs===void 0)try{throw Error()}catch(S){var g=S.stack.trim().match(/\n( *(at )?)/);Vs=g&&g[1]||""}return`
`+Vs+f}var oi=!1;function fs(f,g){if(!f||oi)return"";oi=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(Se){var C=Se}Reflect.construct(f,[],g)}else{try{g.call()}catch(Se){C=Se}f.call(g.prototype)}else{try{throw Error()}catch(Se){C=Se}f()}}catch(Se){if(Se&&C&&typeof Se.stack=="string"){for(var R=Se.stack.split(`
`),$=C.stack.split(`
`),ee=R.length-1,oe=$.length-1;1<=ee&&0<=oe&&R[ee]!==$[oe];)oe--;for(;1<=ee&&0<=oe;ee--,oe--)if(R[ee]!==$[oe]){if(ee!==1||oe!==1)do if(ee--,oe--,0>oe||R[ee]!==$[oe]){var ge=`
`+R[ee].replace(" at new "," at ");return f.displayName&&ge.includes("<anonymous>")&&(ge=ge.replace("<anonymous>",f.displayName)),ge}while(1<=ee&&0<=oe);break}}}finally{oi=!1,Error.prepareStackTrace=S}return(f=f?f.displayName||f.name:"")?Li(f):""}var Ii=Object.prototype.hasOwnProperty,Zn=[],Sr=-1;function Er(f){return{current:f}}function ht(f){0>Sr||(f.current=Zn[Sr],Zn[Sr]=null,Sr--)}function wt(f,g){Sr++,Zn[Sr]=f.current,f.current=g}var li={},vn=Er(li),dn=Er(!1),$r=li;function kr(f,g){var S=f.type.contextTypes;if(!S)return li;var C=f.stateNode;if(C&&C.__reactInternalMemoizedUnmaskedChildContext===g)return C.__reactInternalMemoizedMaskedChildContext;var R={},$;for($ in S)R[$]=g[$];return C&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=g,f.__reactInternalMemoizedMaskedChildContext=R),R}function _n(f){return f=f.childContextTypes,f!=null}function Ws(){ht(dn),ht(vn)}function Sc(f,g,S){if(vn.current!==li)throw Error(a(168));wt(vn,g),wt(dn,S)}function Ec(f,g,S){var C=f.stateNode;if(g=g.childContextTypes,typeof C.getChildContext!="function")return S;C=C.getChildContext();for(var R in C)if(!(R in g))throw Error(a(108,T(f)||"Unknown",R));return s({},S,C)}function za(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||li,$r=vn.current,wt(vn,f),wt(dn,dn.current),!0}function kc(f,g,S){var C=f.stateNode;if(!C)throw Error(a(169));S?(f=Ec(f,g,$r),C.__reactInternalMemoizedMergedChildContext=f,ht(dn),ht(vn),wt(vn,f)):ht(dn),wt(dn,S)}var zn=Math.clz32?Math.clz32:Ks,pd=Math.log,md=Math.LN2;function Ks(f){return f>>>=0,f===0?32:31-(pd(f)/md|0)|0}var Jn=64,Cr=4194304;function mr(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function $a(f,g){var S=f.pendingLanes;if(S===0)return 0;var C=0,R=f.suspendedLanes,$=f.pingedLanes,ee=S&268435455;if(ee!==0){var oe=ee&~R;oe!==0?C=mr(oe):($&=ee,$!==0&&(C=mr($)))}else ee=S&~R,ee!==0?C=mr(ee):$!==0&&(C=mr($));if(C===0)return 0;if(g!==0&&g!==C&&!(g&R)&&(R=C&-C,$=g&-g,R>=$||R===16&&($&4194240)!==0))return g;if(C&4&&(C|=S&16),g=f.entangledLanes,g!==0)for(f=f.entanglements,g&=C;0<g;)S=31-zn(g),R=1<<S,C|=f[S],g&=~R;return C}function ci(f,g){switch(f){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gd(f,g){for(var S=f.suspendedLanes,C=f.pingedLanes,R=f.expirationTimes,$=f.pendingLanes;0<$;){var ee=31-zn($),oe=1<<ee,ge=R[ee];ge===-1?(!(oe&S)||oe&C)&&(R[ee]=ci(oe,g)):ge<=g&&(f.expiredLanes|=oe),$&=~oe}}function vl(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function Cc(){var f=Jn;return Jn<<=1,!(Jn&4194240)&&(Jn=64),f}function yl(f){for(var g=[],S=0;31>S;S++)g.push(f);return g}function hs(f,g,S){f.pendingLanes|=g,g!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,g=31-zn(g),f[g]=S}function $n(f,g){var S=f.pendingLanes&~g;f.pendingLanes=g,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=g,f.mutableReadLanes&=g,f.entangledLanes&=g,g=f.entanglements;var C=f.eventTimes;for(f=f.expirationTimes;0<S;){var R=31-zn(S),$=1<<R;g[R]=0,C[R]=-1,f[R]=-1,S&=~$}}function Ua(f,g){var S=f.entangledLanes|=g;for(f=f.entanglements;S;){var C=31-zn(S),R=1<<C;R&g|f[C]&g&&(f[C]|=g),S&=~R}}var st=0;function Ys(f){return f&=-f,1<f?4<f?f&268435455?16:536870912:4:1}var Xs=i.unstable_scheduleCallback,Qs=i.unstable_cancelCallback,vd=i.unstable_shouldYield,jc=i.unstable_requestPaint,Ft=i.unstable_now,Ga=i.unstable_ImmediatePriority,ui=i.unstable_UserBlockingPriority,Ha=i.unstable_NormalPriority,xl=i.unstable_IdlePriority,Va=null,jr=null;function F(f){if(jr&&typeof jr.onCommitFiberRoot=="function")try{jr.onCommitFiberRoot(Va,f,void 0,(f.current.flags&128)===128)}catch{}}function Z(f,g){return f===g&&(f!==0||1/f===1/g)||f!==f&&g!==g}var ie=typeof Object.is=="function"?Object.is:Z,ve=null,Ue=!1,Me=!1;function nt(f){ve===null?ve=[f]:ve.push(f)}function ct(f){Ue=!0,nt(f)}function vt(){if(!Me&&ve!==null){Me=!0;var f=0,g=st;try{var S=ve;for(st=1;f<S.length;f++){var C=S[f];do C=C(!0);while(C!==null)}ve=null,Ue=!1}catch(R){throw ve!==null&&(ve=ve.slice(f+1)),Xs(Ga,vt),R}finally{st=g,Me=!1}}return null}var at=[],Vt=0,Nn=null,qt=0,Nt=[],_t=0,er=null,Sn=1,Un="";function ps(f,g){at[Vt++]=qt,at[Vt++]=Nn,Nn=f,qt=g}function bl(f,g,S){Nt[_t++]=Sn,Nt[_t++]=Un,Nt[_t++]=er,er=f;var C=Sn;f=Un;var R=32-zn(C)-1;C&=~(1<<R),S+=1;var $=32-zn(g)+R;if(30<$){var ee=R-R%5;$=(C&(1<<ee)-1).toString(32),C>>=ee,R-=ee,Sn=1<<32-zn(g)+R|S<<R|C,Un=$+f}else Sn=1<<$|S<<R|C,Un=f}function Wa(f){f.return!==null&&(ps(f,1),bl(f,1,0))}function M1(f){for(;f===Nn;)Nn=at[--Vt],at[Vt]=null,qt=at[--Vt],at[Vt]=null;for(;f===er;)er=Nt[--_t],Nt[_t]=null,Un=Nt[--_t],Nt[_t]=null,Sn=Nt[--_t],Nt[_t]=null}var Ur=null,di=null,Bt=!1,yd=!1,Mi=null;function VN(f,g){var S=gi(5,null,null,0);S.elementType="DELETED",S.stateNode=g,S.return=f,g=f.deletions,g===null?(f.deletions=[S],f.flags|=16):g.push(S)}function WN(f,g){switch(f.tag){case 5:return g=zr(g,f.type,f.pendingProps),g!==null?(f.stateNode=g,Ur=f,di=ol(g),!0):!1;case 6:return g=sl(g,f.pendingProps),g!==null?(f.stateNode=g,Ur=f,di=null,!0):!1;case 13:if(g=al(g),g!==null){var S=er!==null?{id:Sn,overflow:Un}:null;return f.memoizedState={dehydrated:g,treeContext:S,retryLane:1073741824},S=gi(18,null,null,0),S.stateNode=g,S.return=f,f.child=S,Ur=f,di=null,!0}return!1;default:return!1}}function D1(f){return(f.mode&1)!==0&&(f.flags&128)===0}function F1(f){if(Bt){var g=di;if(g){var S=g;if(!WN(f,g)){if(D1(f))throw Error(a(418));g=ds(S);var C=Ur;g&&WN(f,g)?VN(C,S):(f.flags=f.flags&-4097|2,Bt=!1,Ur=f)}}else{if(D1(f))throw Error(a(418));f.flags=f.flags&-4097|2,Bt=!1,Ur=f}}}function KN(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;Ur=f}function Wh(f){if(!le||f!==Ur)return!1;if(!Bt)return KN(f),Bt=!0,!1;if(f.tag!==3&&(f.tag!==5||Ba(f.type)&&!ne(f.type,f.memoizedProps))){var g=di;if(g){if(D1(f))throw YN(),Error(a(418));for(;g;)VN(f,g),g=ds(g)}}if(KN(f),f.tag===13){if(!le)throw Error(a(316));if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));di=dl(f)}else di=Ur?ds(f.stateNode):null;return!0}function YN(){for(var f=di;f;)f=ds(f)}function Tc(){le&&(di=Ur=null,yd=Bt=!1)}function q1(f){Mi===null?Mi=[f]:Mi.push(f)}var YD=o.ReactCurrentBatchConfig;function Kh(f,g){if(ie(f,g))return!0;if(typeof f!="object"||f===null||typeof g!="object"||g===null)return!1;var S=Object.keys(f),C=Object.keys(g);if(S.length!==C.length)return!1;for(C=0;C<S.length;C++){var R=S[C];if(!Ii.call(g,R)||!ie(f[R],g[R]))return!1}return!0}function XD(f){switch(f.tag){case 5:return Li(f.type);case 16:return Li("Lazy");case 13:return Li("Suspense");case 19:return Li("SuspenseList");case 0:case 2:case 15:return f=fs(f.type,!1),f;case 11:return f=fs(f.type.render,!1),f;case 1:return f=fs(f.type,!0),f;default:return""}}function xd(f,g,S){if(f=S.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(S._owner){if(S=S._owner,S){if(S.tag!==1)throw Error(a(309));var C=S.stateNode}if(!C)throw Error(a(147,f));var R=C,$=""+f;return g!==null&&g.ref!==null&&typeof g.ref=="function"&&g.ref._stringRef===$?g.ref:(g=function(ee){var oe=R.refs;ee===null?delete oe[$]:oe[$]=ee},g._stringRef=$,g)}if(typeof f!="string")throw Error(a(284));if(!S._owner)throw Error(a(290,f))}return f}function Yh(f,g){throw f=Object.prototype.toString.call(g),Error(a(31,f==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":f))}function XN(f){var g=f._init;return g(f._payload)}function QN(f){function g(pe,ce){if(f){var ye=pe.deletions;ye===null?(pe.deletions=[ce],pe.flags|=16):ye.push(ce)}}function S(pe,ce){if(!f)return null;for(;ce!==null;)g(pe,ce),ce=ce.sibling;return null}function C(pe,ce){for(pe=new Map;ce!==null;)ce.key!==null?pe.set(ce.key,ce):pe.set(ce.index,ce),ce=ce.sibling;return pe}function R(pe,ce){return pe=eo(pe,ce),pe.index=0,pe.sibling=null,pe}function $(pe,ce,ye){return pe.index=ye,f?(ye=pe.alternate,ye!==null?(ye=ye.index,ye<ce?(pe.flags|=2,ce):ye):(pe.flags|=2,ce)):(pe.flags|=1048576,ce)}function ee(pe){return f&&pe.alternate===null&&(pe.flags|=2),pe}function oe(pe,ce,ye,Ae){return ce===null||ce.tag!==6?(ce=Lv(ye,pe.mode,Ae),ce.return=pe,ce):(ce=R(ce,ye),ce.return=pe,ce)}function ge(pe,ce,ye,Ae){var $e=ye.type;return $e===d?Ie(pe,ce,ye.props.children,Ae,ye.key):ce!==null&&(ce.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===b&&XN($e)===ce.type)?(Ae=R(ce,ye.props),Ae.ref=xd(pe,ce,ye),Ae.return=pe,Ae):(Ae=kp(ye.type,ye.key,ye.props,null,pe.mode,Ae),Ae.ref=xd(pe,ce,ye),Ae.return=pe,Ae)}function Se(pe,ce,ye,Ae){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==ye.containerInfo||ce.stateNode.implementation!==ye.implementation?(ce=Iv(ye,pe.mode,Ae),ce.return=pe,ce):(ce=R(ce,ye.children||[]),ce.return=pe,ce)}function Ie(pe,ce,ye,Ae,$e){return ce===null||ce.tag!==7?(ce=Cl(ye,pe.mode,Ae,$e),ce.return=pe,ce):(ce=R(ce,ye),ce.return=pe,ce)}function Ke(pe,ce,ye){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return ce=Lv(""+ce,pe.mode,ye),ce.return=pe,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case l:return ye=kp(ce.type,ce.key,ce.props,null,pe.mode,ye),ye.ref=xd(pe,null,ce),ye.return=pe,ye;case u:return ce=Iv(ce,pe.mode,ye),ce.return=pe,ce;case b:var Ae=ce._init;return Ke(pe,Ae(ce._payload),ye)}if(D(ce)||A(ce))return ce=Cl(ce,pe.mode,ye,null),ce.return=pe,ce;Yh(pe,ce)}return null}function Ce(pe,ce,ye,Ae){var $e=ce!==null?ce.key:null;if(typeof ye=="string"&&ye!==""||typeof ye=="number")return $e!==null?null:oe(pe,ce,""+ye,Ae);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case l:return ye.key===$e?ge(pe,ce,ye,Ae):null;case u:return ye.key===$e?Se(pe,ce,ye,Ae):null;case b:return $e=ye._init,Ce(pe,ce,$e(ye._payload),Ae)}if(D(ye)||A(ye))return $e!==null?null:Ie(pe,ce,ye,Ae,null);Yh(pe,ye)}return null}function Pt(pe,ce,ye,Ae,$e){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number")return pe=pe.get(ye)||null,oe(ce,pe,""+Ae,$e);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case l:return pe=pe.get(Ae.key===null?ye:Ae.key)||null,ge(ce,pe,Ae,$e);case u:return pe=pe.get(Ae.key===null?ye:Ae.key)||null,Se(ce,pe,Ae,$e);case b:var Ze=Ae._init;return Pt(pe,ce,ye,Ze(Ae._payload),$e)}if(D(Ae)||A(Ae))return pe=pe.get(ye)||null,Ie(ce,pe,Ae,$e,null);Yh(ce,Ae)}return null}function jt(pe,ce,ye,Ae){for(var $e=null,Ze=null,Ye=ce,mt=ce=0,Mn=null;Ye!==null&&mt<ye.length;mt++){Ye.index>mt?(Mn=Ye,Ye=null):Mn=Ye.sibling;var gt=Ce(pe,Ye,ye[mt],Ae);if(gt===null){Ye===null&&(Ye=Mn);break}f&&Ye&&gt.alternate===null&&g(pe,Ye),ce=$(gt,ce,mt),Ze===null?$e=gt:Ze.sibling=gt,Ze=gt,Ye=Mn}if(mt===ye.length)return S(pe,Ye),Bt&&ps(pe,mt),$e;if(Ye===null){for(;mt<ye.length;mt++)Ye=Ke(pe,ye[mt],Ae),Ye!==null&&(ce=$(Ye,ce,mt),Ze===null?$e=Ye:Ze.sibling=Ye,Ze=Ye);return Bt&&ps(pe,mt),$e}for(Ye=C(pe,Ye);mt<ye.length;mt++)Mn=Pt(Ye,pe,mt,ye[mt],Ae),Mn!==null&&(f&&Mn.alternate!==null&&Ye.delete(Mn.key===null?mt:Mn.key),ce=$(Mn,ce,mt),Ze===null?$e=Mn:Ze.sibling=Mn,Ze=Mn);return f&&Ye.forEach(function(to){return g(pe,to)}),Bt&&ps(pe,mt),$e}function Pr(pe,ce,ye,Ae){var $e=A(ye);if(typeof $e!="function")throw Error(a(150));if(ye=$e.call(ye),ye==null)throw Error(a(151));for(var Ze=$e=null,Ye=ce,mt=ce=0,Mn=null,gt=ye.next();Ye!==null&&!gt.done;mt++,gt=ye.next()){Ye.index>mt?(Mn=Ye,Ye=null):Mn=Ye.sibling;var to=Ce(pe,Ye,gt.value,Ae);if(to===null){Ye===null&&(Ye=Mn);break}f&&Ye&&to.alternate===null&&g(pe,Ye),ce=$(to,ce,mt),Ze===null?$e=to:Ze.sibling=to,Ze=to,Ye=Mn}if(gt.done)return S(pe,Ye),Bt&&ps(pe,mt),$e;if(Ye===null){for(;!gt.done;mt++,gt=ye.next())gt=Ke(pe,gt.value,Ae),gt!==null&&(ce=$(gt,ce,mt),Ze===null?$e=gt:Ze.sibling=gt,Ze=gt);return Bt&&ps(pe,mt),$e}for(Ye=C(pe,Ye);!gt.done;mt++,gt=ye.next())gt=Pt(Ye,pe,mt,gt.value,Ae),gt!==null&&(f&&gt.alternate!==null&&Ye.delete(gt.key===null?mt:gt.key),ce=$(gt,ce,mt),Ze===null?$e=gt:Ze.sibling=gt,Ze=gt);return f&&Ye.forEach(function(kF){return g(pe,kF)}),Bt&&ps(pe,mt),$e}function ta(pe,ce,ye,Ae){if(typeof ye=="object"&&ye!==null&&ye.type===d&&ye.key===null&&(ye=ye.props.children),typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case l:e:{for(var $e=ye.key,Ze=ce;Ze!==null;){if(Ze.key===$e){if($e=ye.type,$e===d){if(Ze.tag===7){S(pe,Ze.sibling),ce=R(Ze,ye.props.children),ce.return=pe,pe=ce;break e}}else if(Ze.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===b&&XN($e)===Ze.type){S(pe,Ze.sibling),ce=R(Ze,ye.props),ce.ref=xd(pe,Ze,ye),ce.return=pe,pe=ce;break e}S(pe,Ze);break}else g(pe,Ze);Ze=Ze.sibling}ye.type===d?(ce=Cl(ye.props.children,pe.mode,Ae,ye.key),ce.return=pe,pe=ce):(Ae=kp(ye.type,ye.key,ye.props,null,pe.mode,Ae),Ae.ref=xd(pe,ce,ye),Ae.return=pe,pe=Ae)}return ee(pe);case u:e:{for(Ze=ye.key;ce!==null;){if(ce.key===Ze)if(ce.tag===4&&ce.stateNode.containerInfo===ye.containerInfo&&ce.stateNode.implementation===ye.implementation){S(pe,ce.sibling),ce=R(ce,ye.children||[]),ce.return=pe,pe=ce;break e}else{S(pe,ce);break}else g(pe,ce);ce=ce.sibling}ce=Iv(ye,pe.mode,Ae),ce.return=pe,pe=ce}return ee(pe);case b:return Ze=ye._init,ta(pe,ce,Ze(ye._payload),Ae)}if(D(ye))return jt(pe,ce,ye,Ae);if(A(ye))return Pr(pe,ce,ye,Ae);Yh(pe,ye)}return typeof ye=="string"&&ye!==""||typeof ye=="number"?(ye=""+ye,ce!==null&&ce.tag===6?(S(pe,ce.sibling),ce=R(ce,ye),ce.return=pe,pe=ce):(S(pe,ce),ce=Lv(ye,pe.mode,Ae),ce.return=pe,pe=ce),ee(pe)):S(pe,ce)}return ta}var Ac=QN(!0),ZN=QN(!1),Xh=Er(null),Qh=null,Oc=null,B1=null;function z1(){B1=Oc=Qh=null}function JN(f,g,S){Q?(wt(Xh,g._currentValue),g._currentValue=S):(wt(Xh,g._currentValue2),g._currentValue2=S)}function $1(f){var g=Xh.current;ht(Xh),Q?f._currentValue=g:f._currentValue2=g}function U1(f,g,S){for(;f!==null;){var C=f.alternate;if((f.childLanes&g)!==g?(f.childLanes|=g,C!==null&&(C.childLanes|=g)):C!==null&&(C.childLanes&g)!==g&&(C.childLanes|=g),f===S)break;f=f.return}}function Pc(f,g){Qh=f,B1=Oc=null,f=f.dependencies,f!==null&&f.firstContext!==null&&(f.lanes&g&&(Tr=!0),f.firstContext=null)}function fi(f){var g=Q?f._currentValue:f._currentValue2;if(B1!==f)if(f={context:f,memoizedValue:g,next:null},Oc===null){if(Qh===null)throw Error(a(308));Oc=f,Qh.dependencies={lanes:0,firstContext:f}}else Oc=Oc.next=f;return g}var wl=null;function G1(f){wl===null?wl=[f]:wl.push(f)}function e6(f,g,S,C){var R=g.interleaved;return R===null?(S.next=S,G1(g)):(S.next=R.next,R.next=S),g.interleaved=S,ms(f,C)}function ms(f,g){f.lanes|=g;var S=f.alternate;for(S!==null&&(S.lanes|=g),S=f,f=f.return;f!==null;)f.childLanes|=g,S=f.alternate,S!==null&&(S.childLanes|=g),S=f,f=f.return;return S.tag===3?S.stateNode:null}var Ka=!1;function H1(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function t6(f,g){f=f.updateQueue,g.updateQueue===f&&(g.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function Zs(f,g){return{eventTime:f,lane:g,tag:0,payload:null,callback:null,next:null}}function Ya(f,g,S){var C=f.updateQueue;if(C===null)return null;if(C=C.shared,rt&2){var R=C.pending;return R===null?g.next=g:(g.next=R.next,R.next=g),C.pending=g,ms(f,S)}return R=C.interleaved,R===null?(g.next=g,G1(C)):(g.next=R.next,R.next=g),C.interleaved=g,ms(f,S)}function Zh(f,g,S){if(g=g.updateQueue,g!==null&&(g=g.shared,(S&4194240)!==0)){var C=g.lanes;C&=f.pendingLanes,S|=C,g.lanes=S,Ua(f,S)}}function n6(f,g){var S=f.updateQueue,C=f.alternate;if(C!==null&&(C=C.updateQueue,S===C)){var R=null,$=null;if(S=S.firstBaseUpdate,S!==null){do{var ee={eventTime:S.eventTime,lane:S.lane,tag:S.tag,payload:S.payload,callback:S.callback,next:null};$===null?R=$=ee:$=$.next=ee,S=S.next}while(S!==null);$===null?R=$=g:$=$.next=g}else R=$=g;S={baseState:C.baseState,firstBaseUpdate:R,lastBaseUpdate:$,shared:C.shared,effects:C.effects},f.updateQueue=S;return}f=S.lastBaseUpdate,f===null?S.firstBaseUpdate=g:f.next=g,S.lastBaseUpdate=g}function Jh(f,g,S,C){var R=f.updateQueue;Ka=!1;var $=R.firstBaseUpdate,ee=R.lastBaseUpdate,oe=R.shared.pending;if(oe!==null){R.shared.pending=null;var ge=oe,Se=ge.next;ge.next=null,ee===null?$=Se:ee.next=Se,ee=ge;var Ie=f.alternate;Ie!==null&&(Ie=Ie.updateQueue,oe=Ie.lastBaseUpdate,oe!==ee&&(oe===null?Ie.firstBaseUpdate=Se:oe.next=Se,Ie.lastBaseUpdate=ge))}if($!==null){var Ke=R.baseState;ee=0,Ie=Se=ge=null,oe=$;do{var Ce=oe.lane,Pt=oe.eventTime;if((C&Ce)===Ce){Ie!==null&&(Ie=Ie.next={eventTime:Pt,lane:0,tag:oe.tag,payload:oe.payload,callback:oe.callback,next:null});e:{var jt=f,Pr=oe;switch(Ce=g,Pt=S,Pr.tag){case 1:if(jt=Pr.payload,typeof jt=="function"){Ke=jt.call(Pt,Ke,Ce);break e}Ke=jt;break e;case 3:jt.flags=jt.flags&-65537|128;case 0:if(jt=Pr.payload,Ce=typeof jt=="function"?jt.call(Pt,Ke,Ce):jt,Ce==null)break e;Ke=s({},Ke,Ce);break e;case 2:Ka=!0}}oe.callback!==null&&oe.lane!==0&&(f.flags|=64,Ce=R.effects,Ce===null?R.effects=[oe]:Ce.push(oe))}else Pt={eventTime:Pt,lane:Ce,tag:oe.tag,payload:oe.payload,callback:oe.callback,next:null},Ie===null?(Se=Ie=Pt,ge=Ke):Ie=Ie.next=Pt,ee|=Ce;if(oe=oe.next,oe===null){if(oe=R.shared.pending,oe===null)break;Ce=oe,oe=Ce.next,Ce.next=null,R.lastBaseUpdate=Ce,R.shared.pending=null}}while(1);if(Ie===null&&(ge=Ke),R.baseState=ge,R.firstBaseUpdate=Se,R.lastBaseUpdate=Ie,g=R.shared.interleaved,g!==null){R=g;do ee|=R.lane,R=R.next;while(R!==g)}else $===null&&(R.shared.lanes=0);Nl|=ee,f.lanes=ee,f.memoizedState=Ke}}function r6(f,g,S){if(f=g.effects,g.effects=null,f!==null)for(g=0;g<f.length;g++){var C=f[g],R=C.callback;if(R!==null){if(C.callback=null,C=S,typeof R!="function")throw Error(a(191,R));R.call(C)}}}var bd={},hi=Er(bd),wd=Er(bd),Rc=Er(bd);function gs(f){if(f===bd)throw Error(a(174));return f}function V1(f,g){wt(Rc,g),wt(wd,f),wt(hi,bd),f=W(g),ht(hi),wt(hi,f)}function Lc(){ht(hi),ht(wd),ht(Rc)}function i6(f){var g=gs(Rc.current),S=gs(hi.current);g=Y(S,f.type,g),S!==g&&(wt(wd,f),wt(hi,g))}function W1(f){wd.current===f&&(ht(hi),ht(wd))}var Wt=Er(0);function ep(f){for(var g=f;g!==null;){if(g.tag===13){var S=g.memoizedState;if(S!==null&&(S=S.dehydrated,S===null||Fa(S)||us(S)))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if(g.flags&128)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===f)break;for(;g.sibling===null;){if(g.return===null||g.return===f)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var K1=[];function Y1(){for(var f=0;f<K1.length;f++){var g=K1[f];Q?g._workInProgressVersionPrimary=null:g._workInProgressVersionSecondary=null}K1.length=0}var tp=o.ReactCurrentDispatcher,X1=o.ReactCurrentBatchConfig,_l=0,Kt=null,En=null,Ln=null,np=!1,_d=!1,Nd=0,QD=0;function tr(){throw Error(a(321))}function Q1(f,g){if(g===null)return!1;for(var S=0;S<g.length&&S<f.length;S++)if(!ie(f[S],g[S]))return!1;return!0}function Z1(f,g,S,C,R,$){if(_l=$,Kt=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,tp.current=f===null||f.memoizedState===null?tF:nF,f=S(C,R),_d){$=0;do{if(_d=!1,Nd=0,25<=$)throw Error(a(301));$+=1,Ln=En=null,g.updateQueue=null,tp.current=rF,f=S(C,R)}while(_d)}if(tp.current=sp,g=En!==null&&En.next!==null,_l=0,Ln=En=Kt=null,np=!1,g)throw Error(a(300));return f}function J1(){var f=Nd!==0;return Nd=0,f}function vs(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ln===null?Kt.memoizedState=Ln=f:Ln=Ln.next=f,Ln}function pi(){if(En===null){var f=Kt.alternate;f=f!==null?f.memoizedState:null}else f=En.next;var g=Ln===null?Kt.memoizedState:Ln.next;if(g!==null)Ln=g,En=f;else{if(f===null)throw Error(a(310));En=f,f={memoizedState:En.memoizedState,baseState:En.baseState,baseQueue:En.baseQueue,queue:En.queue,next:null},Ln===null?Kt.memoizedState=Ln=f:Ln=Ln.next=f}return Ln}function Sd(f,g){return typeof g=="function"?g(f):g}function ev(f){var g=pi(),S=g.queue;if(S===null)throw Error(a(311));S.lastRenderedReducer=f;var C=En,R=C.baseQueue,$=S.pending;if($!==null){if(R!==null){var ee=R.next;R.next=$.next,$.next=ee}C.baseQueue=R=$,S.pending=null}if(R!==null){$=R.next,C=C.baseState;var oe=ee=null,ge=null,Se=$;do{var Ie=Se.lane;if((_l&Ie)===Ie)ge!==null&&(ge=ge.next={lane:0,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null}),C=Se.hasEagerState?Se.eagerState:f(C,Se.action);else{var Ke={lane:Ie,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null};ge===null?(oe=ge=Ke,ee=C):ge=ge.next=Ke,Kt.lanes|=Ie,Nl|=Ie}Se=Se.next}while(Se!==null&&Se!==$);ge===null?ee=C:ge.next=oe,ie(C,g.memoizedState)||(Tr=!0),g.memoizedState=C,g.baseState=ee,g.baseQueue=ge,S.lastRenderedState=C}if(f=S.interleaved,f!==null){R=f;do $=R.lane,Kt.lanes|=$,Nl|=$,R=R.next;while(R!==f)}else R===null&&(S.lanes=0);return[g.memoizedState,S.dispatch]}function tv(f){var g=pi(),S=g.queue;if(S===null)throw Error(a(311));S.lastRenderedReducer=f;var C=S.dispatch,R=S.pending,$=g.memoizedState;if(R!==null){S.pending=null;var ee=R=R.next;do $=f($,ee.action),ee=ee.next;while(ee!==R);ie($,g.memoizedState)||(Tr=!0),g.memoizedState=$,g.baseQueue===null&&(g.baseState=$),S.lastRenderedState=$}return[$,C]}function s6(){}function a6(f,g){var S=Kt,C=pi(),R=g(),$=!ie(C.memoizedState,R);if($&&(C.memoizedState=R,Tr=!0),C=C.queue,nv(c6.bind(null,S,C,f),[f]),C.getSnapshot!==g||$||Ln!==null&&Ln.memoizedState.tag&1){if(S.flags|=2048,Ed(9,l6.bind(null,S,C,R,g),void 0,null),In===null)throw Error(a(349));_l&30||o6(S,g,R)}return R}function o6(f,g,S){f.flags|=16384,f={getSnapshot:g,value:S},g=Kt.updateQueue,g===null?(g={lastEffect:null,stores:null},Kt.updateQueue=g,g.stores=[f]):(S=g.stores,S===null?g.stores=[f]:S.push(f))}function l6(f,g,S,C){g.value=S,g.getSnapshot=C,u6(g)&&d6(f)}function c6(f,g,S){return S(function(){u6(g)&&d6(f)})}function u6(f){var g=f.getSnapshot;f=f.value;try{var S=g();return!ie(f,S)}catch{return!0}}function d6(f){var g=ms(f,1);g!==null&&mi(g,f,1,-1)}function f6(f){var g=vs();return typeof f=="function"&&(f=f()),g.memoizedState=g.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sd,lastRenderedState:f},g.queue=f,f=f.dispatch=eF.bind(null,Kt,f),[g.memoizedState,f]}function Ed(f,g,S,C){return f={tag:f,create:g,destroy:S,deps:C,next:null},g=Kt.updateQueue,g===null?(g={lastEffect:null,stores:null},Kt.updateQueue=g,g.lastEffect=f.next=f):(S=g.lastEffect,S===null?g.lastEffect=f.next=f:(C=S.next,S.next=f,f.next=C,g.lastEffect=f)),f}function h6(){return pi().memoizedState}function rp(f,g,S,C){var R=vs();Kt.flags|=f,R.memoizedState=Ed(1|g,S,void 0,C===void 0?null:C)}function ip(f,g,S,C){var R=pi();C=C===void 0?null:C;var $=void 0;if(En!==null){var ee=En.memoizedState;if($=ee.destroy,C!==null&&Q1(C,ee.deps)){R.memoizedState=Ed(g,S,$,C);return}}Kt.flags|=f,R.memoizedState=Ed(1|g,S,$,C)}function p6(f,g){return rp(8390656,8,f,g)}function nv(f,g){return ip(2048,8,f,g)}function m6(f,g){return ip(4,2,f,g)}function g6(f,g){return ip(4,4,f,g)}function v6(f,g){if(typeof g=="function")return f=f(),g(f),function(){g(null)};if(g!=null)return f=f(),g.current=f,function(){g.current=null}}function y6(f,g,S){return S=S!=null?S.concat([f]):null,ip(4,4,v6.bind(null,g,f),S)}function rv(){}function x6(f,g){var S=pi();g=g===void 0?null:g;var C=S.memoizedState;return C!==null&&g!==null&&Q1(g,C[1])?C[0]:(S.memoizedState=[f,g],f)}function b6(f,g){var S=pi();g=g===void 0?null:g;var C=S.memoizedState;return C!==null&&g!==null&&Q1(g,C[1])?C[0]:(f=f(),S.memoizedState=[f,g],f)}function w6(f,g,S){return _l&21?(ie(S,g)||(S=Cc(),Kt.lanes|=S,Nl|=S,f.baseState=!0),g):(f.baseState&&(f.baseState=!1,Tr=!0),f.memoizedState=S)}function ZD(f,g){var S=st;st=S!==0&&4>S?S:4,f(!0);var C=X1.transition;X1.transition={};try{f(!1),g()}finally{st=S,X1.transition=C}}function _6(){return pi().memoizedState}function JD(f,g,S){var C=Za(f);if(S={lane:C,action:S,hasEagerState:!1,eagerState:null,next:null},N6(f))S6(g,S);else if(S=e6(f,g,S,C),S!==null){var R=ir();mi(S,f,C,R),E6(S,g,C)}}function eF(f,g,S){var C=Za(f),R={lane:C,action:S,hasEagerState:!1,eagerState:null,next:null};if(N6(f))S6(g,R);else{var $=f.alternate;if(f.lanes===0&&($===null||$.lanes===0)&&($=g.lastRenderedReducer,$!==null))try{var ee=g.lastRenderedState,oe=$(ee,S);if(R.hasEagerState=!0,R.eagerState=oe,ie(oe,ee)){var ge=g.interleaved;ge===null?(R.next=R,G1(g)):(R.next=ge.next,ge.next=R),g.interleaved=R;return}}catch{}finally{}S=e6(f,g,R,C),S!==null&&(R=ir(),mi(S,f,C,R),E6(S,g,C))}}function N6(f){var g=f.alternate;return f===Kt||g!==null&&g===Kt}function S6(f,g){_d=np=!0;var S=f.pending;S===null?g.next=g:(g.next=S.next,S.next=g),f.pending=g}function E6(f,g,S){if(S&4194240){var C=g.lanes;C&=f.pendingLanes,S|=C,g.lanes=S,Ua(f,S)}}var sp={readContext:fi,useCallback:tr,useContext:tr,useEffect:tr,useImperativeHandle:tr,useInsertionEffect:tr,useLayoutEffect:tr,useMemo:tr,useReducer:tr,useRef:tr,useState:tr,useDebugValue:tr,useDeferredValue:tr,useTransition:tr,useMutableSource:tr,useSyncExternalStore:tr,useId:tr,unstable_isNewReconciler:!1},tF={readContext:fi,useCallback:function(f,g){return vs().memoizedState=[f,g===void 0?null:g],f},useContext:fi,useEffect:p6,useImperativeHandle:function(f,g,S){return S=S!=null?S.concat([f]):null,rp(4194308,4,v6.bind(null,g,f),S)},useLayoutEffect:function(f,g){return rp(4194308,4,f,g)},useInsertionEffect:function(f,g){return rp(4,2,f,g)},useMemo:function(f,g){var S=vs();return g=g===void 0?null:g,f=f(),S.memoizedState=[f,g],f},useReducer:function(f,g,S){var C=vs();return g=S!==void 0?S(g):g,C.memoizedState=C.baseState=g,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:g},C.queue=f,f=f.dispatch=JD.bind(null,Kt,f),[C.memoizedState,f]},useRef:function(f){var g=vs();return f={current:f},g.memoizedState=f},useState:f6,useDebugValue:rv,useDeferredValue:function(f){return vs().memoizedState=f},useTransition:function(){var f=f6(!1),g=f[0];return f=ZD.bind(null,f[1]),vs().memoizedState=f,[g,f]},useMutableSource:function(){},useSyncExternalStore:function(f,g,S){var C=Kt,R=vs();if(Bt){if(S===void 0)throw Error(a(407));S=S()}else{if(S=g(),In===null)throw Error(a(349));_l&30||o6(C,g,S)}R.memoizedState=S;var $={value:S,getSnapshot:g};return R.queue=$,p6(c6.bind(null,C,$,f),[f]),C.flags|=2048,Ed(9,l6.bind(null,C,$,S,g),void 0,null),S},useId:function(){var f=vs(),g=In.identifierPrefix;if(Bt){var S=Un,C=Sn;S=(C&~(1<<32-zn(C)-1)).toString(32)+S,g=":"+g+"R"+S,S=Nd++,0<S&&(g+="H"+S.toString(32)),g+=":"}else S=QD++,g=":"+g+"r"+S.toString(32)+":";return f.memoizedState=g},unstable_isNewReconciler:!1},nF={readContext:fi,useCallback:x6,useContext:fi,useEffect:nv,useImperativeHandle:y6,useInsertionEffect:m6,useLayoutEffect:g6,useMemo:b6,useReducer:ev,useRef:h6,useState:function(){return ev(Sd)},useDebugValue:rv,useDeferredValue:function(f){var g=pi();return w6(g,En.memoizedState,f)},useTransition:function(){var f=ev(Sd)[0],g=pi().memoizedState;return[f,g]},useMutableSource:s6,useSyncExternalStore:a6,useId:_6,unstable_isNewReconciler:!1},rF={readContext:fi,useCallback:x6,useContext:fi,useEffect:nv,useImperativeHandle:y6,useInsertionEffect:m6,useLayoutEffect:g6,useMemo:b6,useReducer:tv,useRef:h6,useState:function(){return tv(Sd)},useDebugValue:rv,useDeferredValue:function(f){var g=pi();return En===null?g.memoizedState=f:w6(g,En.memoizedState,f)},useTransition:function(){var f=tv(Sd)[0],g=pi().memoizedState;return[f,g]},useMutableSource:s6,useSyncExternalStore:a6,useId:_6,unstable_isNewReconciler:!1};function Di(f,g){if(f&&f.defaultProps){g=s({},g),f=f.defaultProps;for(var S in f)g[S]===void 0&&(g[S]=f[S]);return g}return g}function iv(f,g,S,C){g=f.memoizedState,S=S(C,g),S=S==null?g:s({},g,S),f.memoizedState=S,f.lanes===0&&(f.updateQueue.baseState=S)}var ap={isMounted:function(f){return(f=f._reactInternals)?M(f)===f:!1},enqueueSetState:function(f,g,S){f=f._reactInternals;var C=ir(),R=Za(f),$=Zs(C,R);$.payload=g,S!=null&&($.callback=S),g=Ya(f,$,R),g!==null&&(mi(g,f,R,C),Zh(g,f,R))},enqueueReplaceState:function(f,g,S){f=f._reactInternals;var C=ir(),R=Za(f),$=Zs(C,R);$.tag=1,$.payload=g,S!=null&&($.callback=S),g=Ya(f,$,R),g!==null&&(mi(g,f,R,C),Zh(g,f,R))},enqueueForceUpdate:function(f,g){f=f._reactInternals;var S=ir(),C=Za(f),R=Zs(S,C);R.tag=2,g!=null&&(R.callback=g),g=Ya(f,R,C),g!==null&&(mi(g,f,C,S),Zh(g,f,C))}};function k6(f,g,S,C,R,$,ee){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(C,$,ee):g.prototype&&g.prototype.isPureReactComponent?!Kh(S,C)||!Kh(R,$):!0}function C6(f,g,S){var C=!1,R=li,$=g.contextType;return typeof $=="object"&&$!==null?$=fi($):(R=_n(g)?$r:vn.current,C=g.contextTypes,$=(C=C!=null)?kr(f,R):li),g=new g(S,$),f.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=ap,f.stateNode=g,g._reactInternals=f,C&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=R,f.__reactInternalMemoizedMaskedChildContext=$),g}function j6(f,g,S,C){f=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(S,C),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(S,C),g.state!==f&&ap.enqueueReplaceState(g,g.state,null)}function sv(f,g,S,C){var R=f.stateNode;R.props=S,R.state=f.memoizedState,R.refs={},H1(f);var $=g.contextType;typeof $=="object"&&$!==null?R.context=fi($):($=_n(g)?$r:vn.current,R.context=kr(f,$)),R.state=f.memoizedState,$=g.getDerivedStateFromProps,typeof $=="function"&&(iv(f,g,$,S),R.state=f.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(g=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),g!==R.state&&ap.enqueueReplaceState(R,R.state,null),Jh(f,S,R,C),R.state=f.memoizedState),typeof R.componentDidMount=="function"&&(f.flags|=4194308)}function Ic(f,g){try{var S="",C=g;do S+=XD(C),C=C.return;while(C);var R=S}catch($){R=`
Error generating stack: `+$.message+`
`+$.stack}return{value:f,source:g,stack:R,digest:null}}function av(f,g,S){return{value:f,source:null,stack:S??null,digest:g??null}}function ov(f,g){try{console.error(g.value)}catch(S){setTimeout(function(){throw S})}}var iF=typeof WeakMap=="function"?WeakMap:Map;function T6(f,g,S){S=Zs(-1,S),S.tag=3,S.payload={element:null};var C=g.value;return S.callback=function(){bp||(bp=!0,Cv=C),ov(f,g)},S}function A6(f,g,S){S=Zs(-1,S),S.tag=3;var C=f.type.getDerivedStateFromError;if(typeof C=="function"){var R=g.value;S.payload=function(){return C(R)},S.callback=function(){ov(f,g)}}var $=f.stateNode;return $!==null&&typeof $.componentDidCatch=="function"&&(S.callback=function(){ov(f,g),typeof C!="function"&&(Xa===null?Xa=new Set([this]):Xa.add(this));var ee=g.stack;this.componentDidCatch(g.value,{componentStack:ee!==null?ee:""})}),S}function O6(f,g,S){var C=f.pingCache;if(C===null){C=f.pingCache=new iF;var R=new Set;C.set(g,R)}else R=C.get(g),R===void 0&&(R=new Set,C.set(g,R));R.has(S)||(R.add(S),f=yF.bind(null,f,g,S),g.then(f,f))}function P6(f){do{var g;if((g=f.tag===13)&&(g=f.memoizedState,g=g!==null?g.dehydrated!==null:!0),g)return f;f=f.return}while(f!==null);return null}function R6(f,g,S,C,R){return f.mode&1?(f.flags|=65536,f.lanes=R,f):(f===g?f.flags|=65536:(f.flags|=128,S.flags|=131072,S.flags&=-52805,S.tag===1&&(S.alternate===null?S.tag=17:(g=Zs(-1,1),g.tag=2,Ya(S,g,1))),S.lanes|=1),f)}var sF=o.ReactCurrentOwner,Tr=!1;function gr(f,g,S,C){g.child=f===null?ZN(g,null,S,C):Ac(g,f.child,S,C)}function L6(f,g,S,C,R){S=S.render;var $=g.ref;return Pc(g,R),C=Z1(f,g,S,C,$,R),S=J1(),f!==null&&!Tr?(g.updateQueue=f.updateQueue,g.flags&=-2053,f.lanes&=~R,Js(f,g,R)):(Bt&&S&&Wa(g),g.flags|=1,gr(f,g,C,R),g.child)}function I6(f,g,S,C,R){if(f===null){var $=S.type;return typeof $=="function"&&!Rv($)&&$.defaultProps===void 0&&S.compare===null&&S.defaultProps===void 0?(g.tag=15,g.type=$,M6(f,g,$,C,R)):(f=kp(S.type,null,C,g,g.mode,R),f.ref=g.ref,f.return=g,g.child=f)}if($=f.child,!(f.lanes&R)){var ee=$.memoizedProps;if(S=S.compare,S=S!==null?S:Kh,S(ee,C)&&f.ref===g.ref)return Js(f,g,R)}return g.flags|=1,f=eo($,C),f.ref=g.ref,f.return=g,g.child=f}function M6(f,g,S,C,R){if(f!==null){var $=f.memoizedProps;if(Kh($,C)&&f.ref===g.ref)if(Tr=!1,g.pendingProps=C=$,(f.lanes&R)!==0)f.flags&131072&&(Tr=!0);else return g.lanes=f.lanes,Js(f,g,R)}return lv(f,g,S,C,R)}function D6(f,g,S){var C=g.pendingProps,R=C.children,$=f!==null?f.memoizedState:null;if(C.mode==="hidden")if(!(g.mode&1))g.memoizedState={baseLanes:0,cachePool:null,transitions:null},wt(Dc,Gr),Gr|=S;else{if(!(S&1073741824))return f=$!==null?$.baseLanes|S:S,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:f,cachePool:null,transitions:null},g.updateQueue=null,wt(Dc,Gr),Gr|=f,null;g.memoizedState={baseLanes:0,cachePool:null,transitions:null},C=$!==null?$.baseLanes:S,wt(Dc,Gr),Gr|=C}else $!==null?(C=$.baseLanes|S,g.memoizedState=null):C=S,wt(Dc,Gr),Gr|=C;return gr(f,g,R,S),g.child}function F6(f,g){var S=g.ref;(f===null&&S!==null||f!==null&&f.ref!==S)&&(g.flags|=512,g.flags|=2097152)}function lv(f,g,S,C,R){var $=_n(S)?$r:vn.current;return $=kr(g,$),Pc(g,R),S=Z1(f,g,S,C,$,R),C=J1(),f!==null&&!Tr?(g.updateQueue=f.updateQueue,g.flags&=-2053,f.lanes&=~R,Js(f,g,R)):(Bt&&C&&Wa(g),g.flags|=1,gr(f,g,S,R),g.child)}function q6(f,g,S,C,R){if(_n(S)){var $=!0;za(g)}else $=!1;if(Pc(g,R),g.stateNode===null)lp(f,g),C6(g,S,C),sv(g,S,C,R),C=!0;else if(f===null){var ee=g.stateNode,oe=g.memoizedProps;ee.props=oe;var ge=ee.context,Se=S.contextType;typeof Se=="object"&&Se!==null?Se=fi(Se):(Se=_n(S)?$r:vn.current,Se=kr(g,Se));var Ie=S.getDerivedStateFromProps,Ke=typeof Ie=="function"||typeof ee.getSnapshotBeforeUpdate=="function";Ke||typeof ee.UNSAFE_componentWillReceiveProps!="function"&&typeof ee.componentWillReceiveProps!="function"||(oe!==C||ge!==Se)&&j6(g,ee,C,Se),Ka=!1;var Ce=g.memoizedState;ee.state=Ce,Jh(g,C,ee,R),ge=g.memoizedState,oe!==C||Ce!==ge||dn.current||Ka?(typeof Ie=="function"&&(iv(g,S,Ie,C),ge=g.memoizedState),(oe=Ka||k6(g,S,oe,C,Ce,ge,Se))?(Ke||typeof ee.UNSAFE_componentWillMount!="function"&&typeof ee.componentWillMount!="function"||(typeof ee.componentWillMount=="function"&&ee.componentWillMount(),typeof ee.UNSAFE_componentWillMount=="function"&&ee.UNSAFE_componentWillMount()),typeof ee.componentDidMount=="function"&&(g.flags|=4194308)):(typeof ee.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=C,g.memoizedState=ge),ee.props=C,ee.state=ge,ee.context=Se,C=oe):(typeof ee.componentDidMount=="function"&&(g.flags|=4194308),C=!1)}else{ee=g.stateNode,t6(f,g),oe=g.memoizedProps,Se=g.type===g.elementType?oe:Di(g.type,oe),ee.props=Se,Ke=g.pendingProps,Ce=ee.context,ge=S.contextType,typeof ge=="object"&&ge!==null?ge=fi(ge):(ge=_n(S)?$r:vn.current,ge=kr(g,ge));var Pt=S.getDerivedStateFromProps;(Ie=typeof Pt=="function"||typeof ee.getSnapshotBeforeUpdate=="function")||typeof ee.UNSAFE_componentWillReceiveProps!="function"&&typeof ee.componentWillReceiveProps!="function"||(oe!==Ke||Ce!==ge)&&j6(g,ee,C,ge),Ka=!1,Ce=g.memoizedState,ee.state=Ce,Jh(g,C,ee,R);var jt=g.memoizedState;oe!==Ke||Ce!==jt||dn.current||Ka?(typeof Pt=="function"&&(iv(g,S,Pt,C),jt=g.memoizedState),(Se=Ka||k6(g,S,Se,C,Ce,jt,ge)||!1)?(Ie||typeof ee.UNSAFE_componentWillUpdate!="function"&&typeof ee.componentWillUpdate!="function"||(typeof ee.componentWillUpdate=="function"&&ee.componentWillUpdate(C,jt,ge),typeof ee.UNSAFE_componentWillUpdate=="function"&&ee.UNSAFE_componentWillUpdate(C,jt,ge)),typeof ee.componentDidUpdate=="function"&&(g.flags|=4),typeof ee.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof ee.componentDidUpdate!="function"||oe===f.memoizedProps&&Ce===f.memoizedState||(g.flags|=4),typeof ee.getSnapshotBeforeUpdate!="function"||oe===f.memoizedProps&&Ce===f.memoizedState||(g.flags|=1024),g.memoizedProps=C,g.memoizedState=jt),ee.props=C,ee.state=jt,ee.context=ge,C=Se):(typeof ee.componentDidUpdate!="function"||oe===f.memoizedProps&&Ce===f.memoizedState||(g.flags|=4),typeof ee.getSnapshotBeforeUpdate!="function"||oe===f.memoizedProps&&Ce===f.memoizedState||(g.flags|=1024),C=!1)}return cv(f,g,S,C,$,R)}function cv(f,g,S,C,R,$){F6(f,g);var ee=(g.flags&128)!==0;if(!C&&!ee)return R&&kc(g,S,!1),Js(f,g,$);C=g.stateNode,sF.current=g;var oe=ee&&typeof S.getDerivedStateFromError!="function"?null:C.render();return g.flags|=1,f!==null&&ee?(g.child=Ac(g,f.child,null,$),g.child=Ac(g,null,oe,$)):gr(f,g,oe,$),g.memoizedState=C.state,R&&kc(g,S,!0),g.child}function B6(f){var g=f.stateNode;g.pendingContext?Sc(f,g.pendingContext,g.pendingContext!==g.context):g.context&&Sc(f,g.context,!1),V1(f,g.containerInfo)}function z6(f,g,S,C,R){return Tc(),q1(R),g.flags|=256,gr(f,g,S,C),g.child}var uv={dehydrated:null,treeContext:null,retryLane:0};function dv(f){return{baseLanes:f,cachePool:null,transitions:null}}function $6(f,g,S){var C=g.pendingProps,R=Wt.current,$=!1,ee=(g.flags&128)!==0,oe;if((oe=ee)||(oe=f!==null&&f.memoizedState===null?!1:(R&2)!==0),oe?($=!0,g.flags&=-129):(f===null||f.memoizedState!==null)&&(R|=1),wt(Wt,R&1),f===null)return F1(g),f=g.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?(g.mode&1?us(f)?g.lanes=8:g.lanes=1073741824:g.lanes=1,null):(ee=C.children,f=C.fallback,$?(C=g.mode,$=g.child,ee={mode:"hidden",children:ee},!(C&1)&&$!==null?($.childLanes=0,$.pendingProps=ee):$=Cp(ee,C,0,null),f=Cl(f,C,S,null),$.return=g,f.return=g,$.sibling=f,g.child=$,g.child.memoizedState=dv(S),g.memoizedState=uv,f):fv(g,ee));if(R=f.memoizedState,R!==null&&(oe=R.dehydrated,oe!==null))return aF(f,g,ee,C,oe,R,S);if($){$=C.fallback,ee=g.mode,R=f.child,oe=R.sibling;var ge={mode:"hidden",children:C.children};return!(ee&1)&&g.child!==R?(C=g.child,C.childLanes=0,C.pendingProps=ge,g.deletions=null):(C=eo(R,ge),C.subtreeFlags=R.subtreeFlags&14680064),oe!==null?$=eo(oe,$):($=Cl($,ee,S,null),$.flags|=2),$.return=g,C.return=g,C.sibling=$,g.child=C,C=$,$=g.child,ee=f.child.memoizedState,ee=ee===null?dv(S):{baseLanes:ee.baseLanes|S,cachePool:null,transitions:ee.transitions},$.memoizedState=ee,$.childLanes=f.childLanes&~S,g.memoizedState=uv,C}return $=f.child,f=$.sibling,C=eo($,{mode:"visible",children:C.children}),!(g.mode&1)&&(C.lanes=S),C.return=g,C.sibling=null,f!==null&&(S=g.deletions,S===null?(g.deletions=[f],g.flags|=16):S.push(f)),g.child=C,g.memoizedState=null,C}function fv(f,g){return g=Cp({mode:"visible",children:g},f.mode,0,null),g.return=f,f.child=g}function op(f,g,S,C){return C!==null&&q1(C),Ac(g,f.child,null,S),f=fv(g,g.pendingProps.children),f.flags|=2,g.memoizedState=null,f}function aF(f,g,S,C,R,$,ee){if(S)return g.flags&256?(g.flags&=-257,C=av(Error(a(422))),op(f,g,ee,C)):g.memoizedState!==null?(g.child=f.child,g.flags|=128,null):($=C.fallback,R=g.mode,C=Cp({mode:"visible",children:C.children},R,0,null),$=Cl($,R,ee,null),$.flags|=2,C.return=g,$.return=g,C.sibling=$,g.child=C,g.mode&1&&Ac(g,f.child,null,ee),g.child.memoizedState=dv(ee),g.memoizedState=uv,$);if(!(g.mode&1))return op(f,g,ee,null);if(us(R))return C=Hs(R).digest,$=Error(a(419)),C=av($,C,void 0),op(f,g,ee,C);if(S=(ee&f.childLanes)!==0,Tr||S){if(C=In,C!==null){switch(ee&-ee){case 4:R=2;break;case 16:R=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:R=32;break;case 536870912:R=268435456;break;default:R=0}R=R&(C.suspendedLanes|ee)?0:R,R!==0&&R!==$.retryLane&&($.retryLane=R,ms(f,R),mi(C,f,R,-1))}return Pv(),C=av(Error(a(421))),op(f,g,ee,C)}return Fa(R)?(g.flags|=128,g.child=f.child,g=xF.bind(null,f),un(R,g),null):(f=$.treeContext,le&&(di=qa(R),Ur=g,Bt=!0,Mi=null,yd=!1,f!==null&&(Nt[_t++]=Sn,Nt[_t++]=Un,Nt[_t++]=er,Sn=f.id,Un=f.overflow,er=g)),g=fv(g,C.children),g.flags|=4096,g)}function U6(f,g,S){f.lanes|=g;var C=f.alternate;C!==null&&(C.lanes|=g),U1(f.return,g,S)}function hv(f,g,S,C,R){var $=f.memoizedState;$===null?f.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:C,tail:S,tailMode:R}:($.isBackwards=g,$.rendering=null,$.renderingStartTime=0,$.last=C,$.tail=S,$.tailMode=R)}function G6(f,g,S){var C=g.pendingProps,R=C.revealOrder,$=C.tail;if(gr(f,g,C.children,S),C=Wt.current,C&2)C=C&1|2,g.flags|=128;else{if(f!==null&&f.flags&128)e:for(f=g.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&U6(f,S,g);else if(f.tag===19)U6(f,S,g);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===g)break e;for(;f.sibling===null;){if(f.return===null||f.return===g)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}C&=1}if(wt(Wt,C),!(g.mode&1))g.memoizedState=null;else switch(R){case"forwards":for(S=g.child,R=null;S!==null;)f=S.alternate,f!==null&&ep(f)===null&&(R=S),S=S.sibling;S=R,S===null?(R=g.child,g.child=null):(R=S.sibling,S.sibling=null),hv(g,!1,R,S,$);break;case"backwards":for(S=null,R=g.child,g.child=null;R!==null;){if(f=R.alternate,f!==null&&ep(f)===null){g.child=R;break}f=R.sibling,R.sibling=S,S=R,R=f}hv(g,!0,S,null,$);break;case"together":hv(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function lp(f,g){!(g.mode&1)&&f!==null&&(f.alternate=null,g.alternate=null,g.flags|=2)}function Js(f,g,S){if(f!==null&&(g.dependencies=f.dependencies),Nl|=g.lanes,!(S&g.childLanes))return null;if(f!==null&&g.child!==f.child)throw Error(a(153));if(g.child!==null){for(f=g.child,S=eo(f,f.pendingProps),g.child=S,S.return=g;f.sibling!==null;)f=f.sibling,S=S.sibling=eo(f,f.pendingProps),S.return=g;S.sibling=null}return g.child}function oF(f,g,S){switch(g.tag){case 3:B6(g),Tc();break;case 5:i6(g);break;case 1:_n(g.type)&&za(g);break;case 4:V1(g,g.stateNode.containerInfo);break;case 10:JN(g,g.type._context,g.memoizedProps.value);break;case 13:var C=g.memoizedState;if(C!==null)return C.dehydrated!==null?(wt(Wt,Wt.current&1),g.flags|=128,null):S&g.child.childLanes?$6(f,g,S):(wt(Wt,Wt.current&1),f=Js(f,g,S),f!==null?f.sibling:null);wt(Wt,Wt.current&1);break;case 19:if(C=(S&g.childLanes)!==0,f.flags&128){if(C)return G6(f,g,S);g.flags|=128}var R=g.memoizedState;if(R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),wt(Wt,Wt.current),C)break;return null;case 22:case 23:return g.lanes=0,D6(f,g,S)}return Js(f,g,S)}function ys(f){f.flags|=4}function H6(f,g){if(f!==null&&f.child===g.child)return!0;if(g.flags&16)return!1;for(f=g.child;f!==null;){if(f.flags&12854||f.subtreeFlags&12854)return!1;f=f.sibling}return!0}var kd,Cd,cp,up;if(se)kd=function(f,g){for(var S=g.child;S!==null;){if(S.tag===5||S.tag===6)z(f,S.stateNode);else if(S.tag!==4&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===g)break;for(;S.sibling===null;){if(S.return===null||S.return===g)return;S=S.return}S.sibling.return=S.return,S=S.sibling}},Cd=function(){},cp=function(f,g,S,C,R){if(f=f.memoizedProps,f!==C){var $=g.stateNode,ee=gs(hi.current);S=J($,S,f,C,R,ee),(g.updateQueue=S)&&ys(g)}},up=function(f,g,S,C){S!==C&&ys(g)};else if(de){kd=function(f,g,S,C){for(var R=g.child;R!==null;){if(R.tag===5){var $=R.stateNode;S&&C&&($=Br($,R.type,R.memoizedProps,R)),z(f,$)}else if(R.tag===6)$=R.stateNode,S&&C&&($=Gs($,R.memoizedProps,R)),z(f,$);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)$=R.child,$!==null&&($.return=R),kd(f,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===g)break;for(;R.sibling===null;){if(R.return===null||R.return===g)return;R=R.return}R.sibling.return=R.return,R=R.sibling}};var V6=function(f,g,S,C){for(var R=g.child;R!==null;){if(R.tag===5){var $=R.stateNode;S&&C&&($=Br($,R.type,R.memoizedProps,R)),cs(f,$)}else if(R.tag===6)$=R.stateNode,S&&C&&($=Gs($,R.memoizedProps,R)),cs(f,$);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)$=R.child,$!==null&&($.return=R),V6(f,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===g)break;for(;R.sibling===null;){if(R.return===null||R.return===g)return;R=R.return}R.sibling.return=R.return,R=R.sibling}};Cd=function(f,g){var S=g.stateNode;if(!H6(f,g)){f=S.containerInfo;var C=ai(f);V6(C,g,!1,!1),S.pendingChildren=C,ys(g),Us(f,C)}},cp=function(f,g,S,C,R){var $=f.stateNode,ee=f.memoizedProps;if((f=H6(f,g))&&ee===C)g.stateNode=$;else{var oe=g.stateNode,ge=gs(hi.current),Se=null;ee!==C&&(Se=J(oe,S,ee,C,R,ge)),f&&Se===null?g.stateNode=$:($=pr($,Se,S,ee,C,g,f,oe),K($,S,C,R,ge)&&ys(g),g.stateNode=$,f?ys(g):kd($,g,!1,!1))}},up=function(f,g,S,C){S!==C?(f=gs(Rc.current),S=gs(hi.current),g.stateNode=X(C,f,S,g),ys(g)):g.stateNode=f.stateNode}}else Cd=function(){},cp=function(){},up=function(){};function jd(f,g){if(!Bt)switch(f.tailMode){case"hidden":g=f.tail;for(var S=null;g!==null;)g.alternate!==null&&(S=g),g=g.sibling;S===null?f.tail=null:S.sibling=null;break;case"collapsed":S=f.tail;for(var C=null;S!==null;)S.alternate!==null&&(C=S),S=S.sibling;C===null?g||f.tail===null?f.tail=null:f.tail.sibling=null:C.sibling=null}}function nr(f){var g=f.alternate!==null&&f.alternate.child===f.child,S=0,C=0;if(g)for(var R=f.child;R!==null;)S|=R.lanes|R.childLanes,C|=R.subtreeFlags&14680064,C|=R.flags&14680064,R.return=f,R=R.sibling;else for(R=f.child;R!==null;)S|=R.lanes|R.childLanes,C|=R.subtreeFlags,C|=R.flags,R.return=f,R=R.sibling;return f.subtreeFlags|=C,f.childLanes=S,g}function lF(f,g,S){var C=g.pendingProps;switch(M1(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nr(g),null;case 1:return _n(g.type)&&Ws(),nr(g),null;case 3:return S=g.stateNode,Lc(),ht(dn),ht(vn),Y1(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(f===null||f.child===null)&&(Wh(g)?ys(g):f===null||f.memoizedState.isDehydrated&&!(g.flags&256)||(g.flags|=1024,Mi!==null&&(Av(Mi),Mi=null))),Cd(f,g),nr(g),null;case 5:W1(g),S=gs(Rc.current);var R=g.type;if(f!==null&&g.stateNode!=null)cp(f,g,R,C,S),f.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!C){if(g.stateNode===null)throw Error(a(166));return nr(g),null}if(f=gs(hi.current),Wh(g)){if(!le)throw Error(a(175));f=cl(g.stateNode,g.type,g.memoizedProps,S,f,g,!yd),g.updateQueue=f,f!==null&&ys(g)}else{var $=L(R,C,S,f,g);kd($,g,!1,!1),g.stateNode=$,K($,R,C,S,f)&&ys(g)}g.ref!==null&&(g.flags|=512,g.flags|=2097152)}return nr(g),null;case 6:if(f&&g.stateNode!=null)up(f,g,f.memoizedProps,C);else{if(typeof C!="string"&&g.stateNode===null)throw Error(a(166));if(f=gs(Rc.current),S=gs(hi.current),Wh(g)){if(!le)throw Error(a(176));if(f=g.stateNode,S=g.memoizedProps,(C=gn(f,S,g,!yd))&&(R=Ur,R!==null))switch(R.tag){case 3:ml(R.stateNode.containerInfo,f,S,(R.mode&1)!==0);break;case 5:gl(R.type,R.memoizedProps,R.stateNode,f,S,(R.mode&1)!==0)}C&&ys(g)}else g.stateNode=X(C,f,S,g)}return nr(g),null;case 13:if(ht(Wt),C=g.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(Bt&&di!==null&&g.mode&1&&!(g.flags&128))YN(),Tc(),g.flags|=98560,R=!1;else if(R=Wh(g),C!==null&&C.dehydrated!==null){if(f===null){if(!R)throw Error(a(318));if(!le)throw Error(a(344));if(R=g.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(a(317));ul(R,g)}else Tc(),!(g.flags&128)&&(g.memoizedState=null),g.flags|=4;nr(g),R=!1}else Mi!==null&&(Av(Mi),Mi=null),R=!0;if(!R)return g.flags&65536?g:null}return g.flags&128?(g.lanes=S,g):(S=C!==null,S!==(f!==null&&f.memoizedState!==null)&&S&&(g.child.flags|=8192,g.mode&1&&(f===null||Wt.current&1?kn===0&&(kn=3):Pv())),g.updateQueue!==null&&(g.flags|=4),nr(g),null);case 4:return Lc(),Cd(f,g),f===null&&he(g.stateNode.containerInfo),nr(g),null;case 10:return $1(g.type._context),nr(g),null;case 17:return _n(g.type)&&Ws(),nr(g),null;case 19:if(ht(Wt),R=g.memoizedState,R===null)return nr(g),null;if(C=(g.flags&128)!==0,$=R.rendering,$===null)if(C)jd(R,!1);else{if(kn!==0||f!==null&&f.flags&128)for(f=g.child;f!==null;){if($=ep(f),$!==null){for(g.flags|=128,jd(R,!1),f=$.updateQueue,f!==null&&(g.updateQueue=f,g.flags|=4),g.subtreeFlags=0,f=S,S=g.child;S!==null;)C=S,R=f,C.flags&=14680066,$=C.alternate,$===null?(C.childLanes=0,C.lanes=R,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=$.childLanes,C.lanes=$.lanes,C.child=$.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=$.memoizedProps,C.memoizedState=$.memoizedState,C.updateQueue=$.updateQueue,C.type=$.type,R=$.dependencies,C.dependencies=R===null?null:{lanes:R.lanes,firstContext:R.firstContext}),S=S.sibling;return wt(Wt,Wt.current&1|2),g.child}f=f.sibling}R.tail!==null&&Ft()>kv&&(g.flags|=128,C=!0,jd(R,!1),g.lanes=4194304)}else{if(!C)if(f=ep($),f!==null){if(g.flags|=128,C=!0,f=f.updateQueue,f!==null&&(g.updateQueue=f,g.flags|=4),jd(R,!0),R.tail===null&&R.tailMode==="hidden"&&!$.alternate&&!Bt)return nr(g),null}else 2*Ft()-R.renderingStartTime>kv&&S!==1073741824&&(g.flags|=128,C=!0,jd(R,!1),g.lanes=4194304);R.isBackwards?($.sibling=g.child,g.child=$):(f=R.last,f!==null?f.sibling=$:g.child=$,R.last=$)}return R.tail!==null?(g=R.tail,R.rendering=g,R.tail=g.sibling,R.renderingStartTime=Ft(),g.sibling=null,f=Wt.current,wt(Wt,C?f&1|2:f&1),g):(nr(g),null);case 22:case 23:return Ov(),S=g.memoizedState!==null,f!==null&&f.memoizedState!==null!==S&&(g.flags|=8192),S&&g.mode&1?Gr&1073741824&&(nr(g),se&&g.subtreeFlags&6&&(g.flags|=8192)):nr(g),null;case 24:return null;case 25:return null}throw Error(a(156,g.tag))}function cF(f,g){switch(M1(g),g.tag){case 1:return _n(g.type)&&Ws(),f=g.flags,f&65536?(g.flags=f&-65537|128,g):null;case 3:return Lc(),ht(dn),ht(vn),Y1(),f=g.flags,f&65536&&!(f&128)?(g.flags=f&-65537|128,g):null;case 5:return W1(g),null;case 13:if(ht(Wt),f=g.memoizedState,f!==null&&f.dehydrated!==null){if(g.alternate===null)throw Error(a(340));Tc()}return f=g.flags,f&65536?(g.flags=f&-65537|128,g):null;case 19:return ht(Wt),null;case 4:return Lc(),null;case 10:return $1(g.type._context),null;case 22:case 23:return Ov(),null;case 24:return null;default:return null}}var dp=!1,rr=!1,uF=typeof WeakSet=="function"?WeakSet:Set,Pe=null;function Mc(f,g){var S=f.ref;if(S!==null)if(typeof S=="function")try{S(null)}catch(C){zt(f,g,C)}else S.current=null}function pv(f,g,S){try{S()}catch(C){zt(f,g,C)}}var W6=!1;function dF(f,g){for(H(f.containerInfo),Pe=g;Pe!==null;)if(f=Pe,g=f.child,(f.subtreeFlags&1028)!==0&&g!==null)g.return=f,Pe=g;else for(;Pe!==null;){f=Pe;try{var S=f.alternate;if(f.flags&1024)switch(f.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var C=S.memoizedProps,R=S.memoizedState,$=f.stateNode,ee=$.getSnapshotBeforeUpdate(f.elementType===f.type?C:Di(f.type,C),R);$.__reactInternalSnapshotBeforeUpdate=ee}break;case 3:se&&si(f.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(oe){zt(f,f.return,oe)}if(g=f.sibling,g!==null){g.return=f.return,Pe=g;break}Pe=f.return}return S=W6,W6=!1,S}function Td(f,g,S){var C=g.updateQueue;if(C=C!==null?C.lastEffect:null,C!==null){var R=C=C.next;do{if((R.tag&f)===f){var $=R.destroy;R.destroy=void 0,$!==void 0&&pv(g,S,$)}R=R.next}while(R!==C)}}function fp(f,g){if(g=g.updateQueue,g=g!==null?g.lastEffect:null,g!==null){var S=g=g.next;do{if((S.tag&f)===f){var C=S.create;S.destroy=C()}S=S.next}while(S!==g)}}function mv(f){var g=f.ref;if(g!==null){var S=f.stateNode;switch(f.tag){case 5:f=U(S);break;default:f=S}typeof g=="function"?g(f):g.current=f}}function K6(f){var g=f.alternate;g!==null&&(f.alternate=null,K6(g)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(g=f.stateNode,g!==null&&we(g)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function Y6(f){return f.tag===5||f.tag===3||f.tag===4}function X6(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||Y6(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function gv(f,g,S){var C=f.tag;if(C===5||C===6)f=f.stateNode,g?Ht(S,f,g):wn(S,f);else if(C!==4&&(f=f.child,f!==null))for(gv(f,g,S),f=f.sibling;f!==null;)gv(f,g,S),f=f.sibling}function vv(f,g,S){var C=f.tag;if(C===5||C===6)f=f.stateNode,g?nn(S,f,g):He(S,f);else if(C!==4&&(f=f.child,f!==null))for(vv(f,g,S),f=f.sibling;f!==null;)vv(f,g,S),f=f.sibling}var Gn=null,Fi=!1;function xs(f,g,S){for(S=S.child;S!==null;)yv(f,g,S),S=S.sibling}function yv(f,g,S){if(jr&&typeof jr.onCommitFiberUnmount=="function")try{jr.onCommitFiberUnmount(Va,S)}catch{}switch(S.tag){case 5:rr||Mc(S,g);case 6:if(se){var C=Gn,R=Fi;Gn=null,xs(f,g,S),Gn=C,Fi=R,Gn!==null&&(Fi?Qn(Gn,S.stateNode):Xn(Gn,S.stateNode))}else xs(f,g,S);break;case 18:se&&Gn!==null&&(Fi?Rn(Gn,S.stateNode):pl(Gn,S.stateNode));break;case 4:se?(C=Gn,R=Fi,Gn=S.stateNode.containerInfo,Fi=!0,xs(f,g,S),Gn=C,Fi=R):(de&&(C=S.stateNode.containerInfo,R=ai(C),Ri(C,R)),xs(f,g,S));break;case 0:case 11:case 14:case 15:if(!rr&&(C=S.updateQueue,C!==null&&(C=C.lastEffect,C!==null))){R=C=C.next;do{var $=R,ee=$.destroy;$=$.tag,ee!==void 0&&($&2||$&4)&&pv(S,g,ee),R=R.next}while(R!==C)}xs(f,g,S);break;case 1:if(!rr&&(Mc(S,g),C=S.stateNode,typeof C.componentWillUnmount=="function"))try{C.props=S.memoizedProps,C.state=S.memoizedState,C.componentWillUnmount()}catch(oe){zt(S,g,oe)}xs(f,g,S);break;case 21:xs(f,g,S);break;case 22:S.mode&1?(rr=(C=rr)||S.memoizedState!==null,xs(f,g,S),rr=C):xs(f,g,S);break;default:xs(f,g,S)}}function Q6(f){var g=f.updateQueue;if(g!==null){f.updateQueue=null;var S=f.stateNode;S===null&&(S=f.stateNode=new uF),g.forEach(function(C){var R=bF.bind(null,f,C);S.has(C)||(S.add(C),C.then(R,R))})}}function qi(f,g){var S=g.deletions;if(S!==null)for(var C=0;C<S.length;C++){var R=S[C];try{var $=f,ee=g;if(se){var oe=ee;e:for(;oe!==null;){switch(oe.tag){case 5:Gn=oe.stateNode,Fi=!1;break e;case 3:Gn=oe.stateNode.containerInfo,Fi=!0;break e;case 4:Gn=oe.stateNode.containerInfo,Fi=!0;break e}oe=oe.return}if(Gn===null)throw Error(a(160));yv($,ee,R),Gn=null,Fi=!1}else yv($,ee,R);var ge=R.alternate;ge!==null&&(ge.return=null),R.return=null}catch(Se){zt(R,g,Se)}}if(g.subtreeFlags&12854)for(g=g.child;g!==null;)Z6(g,f),g=g.sibling}function Z6(f,g){var S=f.alternate,C=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:if(qi(g,f),bs(f),C&4){try{Td(3,f,f.return),fp(3,f)}catch(Ce){zt(f,f.return,Ce)}try{Td(5,f,f.return)}catch(Ce){zt(f,f.return,Ce)}}break;case 1:qi(g,f),bs(f),C&512&&S!==null&&Mc(S,S.return);break;case 5:if(qi(g,f),bs(f),C&512&&S!==null&&Mc(S,S.return),se){if(f.flags&32){var R=f.stateNode;try{mn(R)}catch(Ce){zt(f,f.return,Ce)}}if(C&4&&(R=f.stateNode,R!=null)){var $=f.memoizedProps;if(S=S!==null?S.memoizedProps:$,C=f.type,g=f.updateQueue,f.updateQueue=null,g!==null)try{cn(R,g,C,S,$,f)}catch(Ce){zt(f,f.return,Ce)}}}break;case 6:if(qi(g,f),bs(f),C&4&&se){if(f.stateNode===null)throw Error(a(162));R=f.stateNode,$=f.memoizedProps,S=S!==null?S.memoizedProps:$;try{Ve(R,S,$)}catch(Ce){zt(f,f.return,Ce)}}break;case 3:if(qi(g,f),bs(f),C&4){if(se&&le&&S!==null&&S.memoizedState.isDehydrated)try{fl(g.containerInfo)}catch(Ce){zt(f,f.return,Ce)}if(de){R=g.containerInfo,$=g.pendingChildren;try{Ri(R,$)}catch(Ce){zt(f,f.return,Ce)}}}break;case 4:if(qi(g,f),bs(f),C&4&&de){$=f.stateNode,R=$.containerInfo,$=$.pendingChildren;try{Ri(R,$)}catch(Ce){zt(f,f.return,Ce)}}break;case 13:qi(g,f),bs(f),R=f.child,R.flags&8192&&($=R.memoizedState!==null,R.stateNode.isHidden=$,!$||R.alternate!==null&&R.alternate.memoizedState!==null||(Ev=Ft())),C&4&&Q6(f);break;case 22:var ee=S!==null&&S.memoizedState!==null;if(f.mode&1?(rr=(S=rr)||ee,qi(g,f),rr=S):qi(g,f),bs(f),C&8192){if(S=f.memoizedState!==null,(f.stateNode.isHidden=S)&&!ee&&f.mode&1)for(Pe=f,C=f.child;C!==null;){for(g=Pe=C;Pe!==null;){ee=Pe;var oe=ee.child;switch(ee.tag){case 0:case 11:case 14:case 15:Td(4,ee,ee.return);break;case 1:Mc(ee,ee.return);var ge=ee.stateNode;if(typeof ge.componentWillUnmount=="function"){var Se=ee,Ie=ee.return;try{var Ke=Se;ge.props=Ke.memoizedProps,ge.state=Ke.memoizedState,ge.componentWillUnmount()}catch(Ce){zt(Se,Ie,Ce)}}break;case 5:Mc(ee,ee.return);break;case 22:if(ee.memoizedState!==null){tS(g);continue}}oe!==null?(oe.return=ee,Pe=oe):tS(g)}C=C.sibling}if(se){e:if(C=null,se)for(g=f;;){if(g.tag===5){if(C===null){C=g;try{R=g.stateNode,S?hr(R):Nr(g.stateNode,g.memoizedProps)}catch(Ce){zt(f,f.return,Ce)}}}else if(g.tag===6){if(C===null)try{$=g.stateNode,S?Bn($):Pi($,g.memoizedProps)}catch(Ce){zt(f,f.return,Ce)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===f)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===f)break e;for(;g.sibling===null;){if(g.return===null||g.return===f)break e;C===g&&(C=null),g=g.return}C===g&&(C=null),g.sibling.return=g.return,g=g.sibling}}}break;case 19:qi(g,f),bs(f),C&4&&Q6(f);break;case 21:break;default:qi(g,f),bs(f)}}function bs(f){var g=f.flags;if(g&2){try{if(se){e:{for(var S=f.return;S!==null;){if(Y6(S)){var C=S;break e}S=S.return}throw Error(a(160))}switch(C.tag){case 5:var R=C.stateNode;C.flags&32&&(mn(R),C.flags&=-33);var $=X6(f);vv(f,$,R);break;case 3:case 4:var ee=C.stateNode.containerInfo,oe=X6(f);gv(f,oe,ee);break;default:throw Error(a(161))}}}catch(ge){zt(f,f.return,ge)}f.flags&=-3}g&4096&&(f.flags&=-4097)}function fF(f,g,S){Pe=f,J6(f)}function J6(f,g,S){for(var C=(f.mode&1)!==0;Pe!==null;){var R=Pe,$=R.child;if(R.tag===22&&C){var ee=R.memoizedState!==null||dp;if(!ee){var oe=R.alternate,ge=oe!==null&&oe.memoizedState!==null||rr;oe=dp;var Se=rr;if(dp=ee,(rr=ge)&&!Se)for(Pe=R;Pe!==null;)ee=Pe,ge=ee.child,ee.tag===22&&ee.memoizedState!==null?nS(R):ge!==null?(ge.return=ee,Pe=ge):nS(R);for(;$!==null;)Pe=$,J6($),$=$.sibling;Pe=R,dp=oe,rr=Se}eS(f)}else R.subtreeFlags&8772&&$!==null?($.return=R,Pe=$):eS(f)}}function eS(f){for(;Pe!==null;){var g=Pe;if(g.flags&8772){var S=g.alternate;try{if(g.flags&8772)switch(g.tag){case 0:case 11:case 15:rr||fp(5,g);break;case 1:var C=g.stateNode;if(g.flags&4&&!rr)if(S===null)C.componentDidMount();else{var R=g.elementType===g.type?S.memoizedProps:Di(g.type,S.memoizedProps);C.componentDidUpdate(R,S.memoizedState,C.__reactInternalSnapshotBeforeUpdate)}var $=g.updateQueue;$!==null&&r6(g,$,C);break;case 3:var ee=g.updateQueue;if(ee!==null){if(S=null,g.child!==null)switch(g.child.tag){case 5:S=U(g.child.stateNode);break;case 1:S=g.child.stateNode}r6(g,ee,S)}break;case 5:var oe=g.stateNode;S===null&&g.flags&4&&dt(oe,g.type,g.memoizedProps,g);break;case 6:break;case 4:break;case 12:break;case 13:if(le&&g.memoizedState===null){var ge=g.alternate;if(ge!==null){var Se=ge.memoizedState;if(Se!==null){var Ie=Se.dehydrated;Ie!==null&&hl(Ie)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}rr||g.flags&512&&mv(g)}catch(Ke){zt(g,g.return,Ke)}}if(g===f){Pe=null;break}if(S=g.sibling,S!==null){S.return=g.return,Pe=S;break}Pe=g.return}}function tS(f){for(;Pe!==null;){var g=Pe;if(g===f){Pe=null;break}var S=g.sibling;if(S!==null){S.return=g.return,Pe=S;break}Pe=g.return}}function nS(f){for(;Pe!==null;){var g=Pe;try{switch(g.tag){case 0:case 11:case 15:var S=g.return;try{fp(4,g)}catch(ge){zt(g,S,ge)}break;case 1:var C=g.stateNode;if(typeof C.componentDidMount=="function"){var R=g.return;try{C.componentDidMount()}catch(ge){zt(g,R,ge)}}var $=g.return;try{mv(g)}catch(ge){zt(g,$,ge)}break;case 5:var ee=g.return;try{mv(g)}catch(ge){zt(g,ee,ge)}}}catch(ge){zt(g,g.return,ge)}if(g===f){Pe=null;break}var oe=g.sibling;if(oe!==null){oe.return=g.return,Pe=oe;break}Pe=g.return}}var hp=0,pp=1,mp=2,gp=3,vp=4;if(typeof Symbol=="function"&&Symbol.for){var Ad=Symbol.for;hp=Ad("selector.component"),pp=Ad("selector.has_pseudo_class"),mp=Ad("selector.role"),gp=Ad("selector.test_id"),vp=Ad("selector.text")}function xv(f){var g=ue(f);if(g!=null){if(typeof g.memoizedProps["data-testname"]!="string")throw Error(a(364));return g}if(f=Ee(f),f===null)throw Error(a(362));return f.stateNode.current}function bv(f,g){switch(g.$$typeof){case hp:if(f.type===g.value)return!0;break;case pp:e:{g=g.value,f=[f,0];for(var S=0;S<f.length;){var C=f[S++],R=f[S++],$=g[R];if(C.tag!==5||!Te(C)){for(;$!=null&&bv(C,$);)R++,$=g[R];if(R===g.length){g=!0;break e}else for(C=C.child;C!==null;)f.push(C,R),C=C.sibling}}g=!1}return g;case mp:if(f.tag===5&&Be(f.stateNode,g.value))return!0;break;case vp:if((f.tag===5||f.tag===6)&&(f=Oe(f),f!==null&&0<=f.indexOf(g.value)))return!0;break;case gp:if(f.tag===5&&(f=f.memoizedProps["data-testname"],typeof f=="string"&&f.toLowerCase()===g.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function wv(f){switch(f.$$typeof){case hp:return"<"+(P(f.value)||"Unknown")+">";case pp:return":has("+(wv(f)||"")+")";case mp:return'[role="'+f.value+'"]';case vp:return'"'+f.value+'"';case gp:return'[data-testname="'+f.value+'"]';default:throw Error(a(365))}}function rS(f,g){var S=[];f=[f,0];for(var C=0;C<f.length;){var R=f[C++],$=f[C++],ee=g[$];if(R.tag!==5||!Te(R)){for(;ee!=null&&bv(R,ee);)$++,ee=g[$];if($===g.length)S.push(R);else for(R=R.child;R!==null;)f.push(R,$),R=R.sibling}}return S}function _v(f,g){if(!_e)throw Error(a(363));f=xv(f),f=rS(f,g),g=[],f=Array.from(f);for(var S=0;S<f.length;){var C=f[S++];if(C.tag===5)Te(C)||g.push(C.stateNode);else for(C=C.child;C!==null;)f.push(C),C=C.sibling}return g}var hF=Math.ceil,yp=o.ReactCurrentDispatcher,Nv=o.ReactCurrentOwner,fn=o.ReactCurrentBatchConfig,rt=0,In=null,yn=null,Hn=0,Gr=0,Dc=Er(0),kn=0,Od=null,Nl=0,xp=0,Sv=0,Pd=null,Ar=null,Ev=0,kv=1/0,ea=null;function Fc(){kv=Ft()+500}var bp=!1,Cv=null,Xa=null,wp=!1,Qa=null,_p=0,Rd=0,jv=null,Np=-1,Sp=0;function ir(){return rt&6?Ft():Np!==-1?Np:Np=Ft()}function Za(f){return f.mode&1?rt&2&&Hn!==0?Hn&-Hn:YD.transition!==null?(Sp===0&&(Sp=Cc()),Sp):(f=st,f!==0?f:qe()):1}function mi(f,g,S,C){if(50<Rd)throw Rd=0,jv=null,Error(a(185));hs(f,S,C),(!(rt&2)||f!==In)&&(f===In&&(!(rt&2)&&(xp|=S),kn===4&&Ja(f,Hn)),Or(f,C),S===1&&rt===0&&!(g.mode&1)&&(Fc(),Ue&&vt()))}function Or(f,g){var S=f.callbackNode;gd(f,g);var C=$a(f,f===In?Hn:0);if(C===0)S!==null&&Qs(S),f.callbackNode=null,f.callbackPriority=0;else if(g=C&-C,f.callbackPriority!==g){if(S!=null&&Qs(S),g===1)f.tag===0?ct(sS.bind(null,f)):nt(sS.bind(null,f)),ae?me(function(){!(rt&6)&&vt()}):Xs(Ga,vt),S=null;else{switch(Ys(C)){case 1:S=Ga;break;case 4:S=ui;break;case 16:S=Ha;break;case 536870912:S=xl;break;default:S=Ha}S=pS(S,iS.bind(null,f))}f.callbackPriority=g,f.callbackNode=S}}function iS(f,g){if(Np=-1,Sp=0,rt&6)throw Error(a(327));var S=f.callbackNode;if(kl()&&f.callbackNode!==S)return null;var C=$a(f,f===In?Hn:0);if(C===0)return null;if(C&30||C&f.expiredLanes||g)g=Ep(f,C);else{g=C;var R=rt;rt|=2;var $=lS();(In!==f||Hn!==g)&&(ea=null,Fc(),Sl(f,g));do try{gF();break}catch(oe){oS(f,oe)}while(1);z1(),yp.current=$,rt=R,yn!==null?g=0:(In=null,Hn=0,g=kn)}if(g!==0){if(g===2&&(R=vl(f),R!==0&&(C=R,g=Tv(f,R))),g===1)throw S=Od,Sl(f,0),Ja(f,C),Or(f,Ft()),S;if(g===6)Ja(f,C);else{if(R=f.current.alternate,!(C&30)&&!pF(R)&&(g=Ep(f,C),g===2&&($=vl(f),$!==0&&(C=$,g=Tv(f,$))),g===1))throw S=Od,Sl(f,0),Ja(f,C),Or(f,Ft()),S;switch(f.finishedWork=R,f.finishedLanes=C,g){case 0:case 1:throw Error(a(345));case 2:El(f,Ar,ea);break;case 3:if(Ja(f,C),(C&130023424)===C&&(g=Ev+500-Ft(),10<g)){if($a(f,0)!==0)break;if(R=f.suspendedLanes,(R&C)!==C){ir(),f.pingedLanes|=f.suspendedLanes&R;break}f.timeoutHandle=G(El.bind(null,f,Ar,ea),g);break}El(f,Ar,ea);break;case 4:if(Ja(f,C),(C&4194240)===C)break;for(g=f.eventTimes,R=-1;0<C;){var ee=31-zn(C);$=1<<ee,ee=g[ee],ee>R&&(R=ee),C&=~$}if(C=R,C=Ft()-C,C=(120>C?120:480>C?480:1080>C?1080:1920>C?1920:3e3>C?3e3:4320>C?4320:1960*hF(C/1960))-C,10<C){f.timeoutHandle=G(El.bind(null,f,Ar,ea),C);break}El(f,Ar,ea);break;case 5:El(f,Ar,ea);break;default:throw Error(a(329))}}}return Or(f,Ft()),f.callbackNode===S?iS.bind(null,f):null}function Tv(f,g){var S=Pd;return f.current.memoizedState.isDehydrated&&(Sl(f,g).flags|=256),f=Ep(f,g),f!==2&&(g=Ar,Ar=S,g!==null&&Av(g)),f}function Av(f){Ar===null?Ar=f:Ar.push.apply(Ar,f)}function pF(f){for(var g=f;;){if(g.flags&16384){var S=g.updateQueue;if(S!==null&&(S=S.stores,S!==null))for(var C=0;C<S.length;C++){var R=S[C],$=R.getSnapshot;R=R.value;try{if(!ie($(),R))return!1}catch{return!1}}}if(S=g.child,g.subtreeFlags&16384&&S!==null)S.return=g,g=S;else{if(g===f)break;for(;g.sibling===null;){if(g.return===null||g.return===f)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Ja(f,g){for(g&=~Sv,g&=~xp,f.suspendedLanes|=g,f.pingedLanes&=~g,f=f.expirationTimes;0<g;){var S=31-zn(g),C=1<<S;f[S]=-1,g&=~C}}function sS(f){if(rt&6)throw Error(a(327));kl();var g=$a(f,0);if(!(g&1))return Or(f,Ft()),null;var S=Ep(f,g);if(f.tag!==0&&S===2){var C=vl(f);C!==0&&(g=C,S=Tv(f,C))}if(S===1)throw S=Od,Sl(f,0),Ja(f,g),Or(f,Ft()),S;if(S===6)throw Error(a(345));return f.finishedWork=f.current.alternate,f.finishedLanes=g,El(f,Ar,ea),Or(f,Ft()),null}function aS(f){Qa!==null&&Qa.tag===0&&!(rt&6)&&kl();var g=rt;rt|=1;var S=fn.transition,C=st;try{if(fn.transition=null,st=1,f)return f()}finally{st=C,fn.transition=S,rt=g,!(rt&6)&&vt()}}function Ov(){Gr=Dc.current,ht(Dc)}function Sl(f,g){f.finishedWork=null,f.finishedLanes=0;var S=f.timeoutHandle;if(S!==re&&(f.timeoutHandle=re,te(S)),yn!==null)for(S=yn.return;S!==null;){var C=S;switch(M1(C),C.tag){case 1:C=C.type.childContextTypes,C!=null&&Ws();break;case 3:Lc(),ht(dn),ht(vn),Y1();break;case 5:W1(C);break;case 4:Lc();break;case 13:ht(Wt);break;case 19:ht(Wt);break;case 10:$1(C.type._context);break;case 22:case 23:Ov()}S=S.return}if(In=f,yn=f=eo(f.current,null),Hn=Gr=g,kn=0,Od=null,Sv=xp=Nl=0,Ar=Pd=null,wl!==null){for(g=0;g<wl.length;g++)if(S=wl[g],C=S.interleaved,C!==null){S.interleaved=null;var R=C.next,$=S.pending;if($!==null){var ee=$.next;$.next=R,C.next=ee}S.pending=C}wl=null}return f}function oS(f,g){do{var S=yn;try{if(z1(),tp.current=sp,np){for(var C=Kt.memoizedState;C!==null;){var R=C.queue;R!==null&&(R.pending=null),C=C.next}np=!1}if(_l=0,Ln=En=Kt=null,_d=!1,Nd=0,Nv.current=null,S===null||S.return===null){kn=1,Od=g,yn=null;break}e:{var $=f,ee=S.return,oe=S,ge=g;if(g=Hn,oe.flags|=32768,ge!==null&&typeof ge=="object"&&typeof ge.then=="function"){var Se=ge,Ie=oe,Ke=Ie.tag;if(!(Ie.mode&1)&&(Ke===0||Ke===11||Ke===15)){var Ce=Ie.alternate;Ce?(Ie.updateQueue=Ce.updateQueue,Ie.memoizedState=Ce.memoizedState,Ie.lanes=Ce.lanes):(Ie.updateQueue=null,Ie.memoizedState=null)}var Pt=P6(ee);if(Pt!==null){Pt.flags&=-257,R6(Pt,ee,oe,$,g),Pt.mode&1&&O6($,Se,g),g=Pt,ge=Se;var jt=g.updateQueue;if(jt===null){var Pr=new Set;Pr.add(ge),g.updateQueue=Pr}else jt.add(ge);break e}else{if(!(g&1)){O6($,Se,g),Pv();break e}ge=Error(a(426))}}else if(Bt&&oe.mode&1){var ta=P6(ee);if(ta!==null){!(ta.flags&65536)&&(ta.flags|=256),R6(ta,ee,oe,$,g),q1(Ic(ge,oe));break e}}$=ge=Ic(ge,oe),kn!==4&&(kn=2),Pd===null?Pd=[$]:Pd.push($),$=ee;do{switch($.tag){case 3:$.flags|=65536,g&=-g,$.lanes|=g;var pe=T6($,ge,g);n6($,pe);break e;case 1:oe=ge;var ce=$.type,ye=$.stateNode;if(!($.flags&128)&&(typeof ce.getDerivedStateFromError=="function"||ye!==null&&typeof ye.componentDidCatch=="function"&&(Xa===null||!Xa.has(ye)))){$.flags|=65536,g&=-g,$.lanes|=g;var Ae=A6($,oe,g);n6($,Ae);break e}}$=$.return}while($!==null)}uS(S)}catch($e){g=$e,yn===S&&S!==null&&(yn=S=S.return);continue}break}while(1)}function lS(){var f=yp.current;return yp.current=sp,f===null?sp:f}function Pv(){(kn===0||kn===3||kn===2)&&(kn=4),In===null||!(Nl&268435455)&&!(xp&268435455)||Ja(In,Hn)}function Ep(f,g){var S=rt;rt|=2;var C=lS();(In!==f||Hn!==g)&&(ea=null,Sl(f,g));do try{mF();break}catch(R){oS(f,R)}while(1);if(z1(),rt=S,yp.current=C,yn!==null)throw Error(a(261));return In=null,Hn=0,kn}function mF(){for(;yn!==null;)cS(yn)}function gF(){for(;yn!==null&&!vd();)cS(yn)}function cS(f){var g=hS(f.alternate,f,Gr);f.memoizedProps=f.pendingProps,g===null?uS(f):yn=g,Nv.current=null}function uS(f){var g=f;do{var S=g.alternate;if(f=g.return,g.flags&32768){if(S=cF(S,g),S!==null){S.flags&=32767,yn=S;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{kn=6,yn=null;return}}else if(S=lF(S,g,Gr),S!==null){yn=S;return}if(g=g.sibling,g!==null){yn=g;return}yn=g=f}while(g!==null);kn===0&&(kn=5)}function El(f,g,S){var C=st,R=fn.transition;try{fn.transition=null,st=1,vF(f,g,S,C)}finally{fn.transition=R,st=C}return null}function vF(f,g,S,C){do kl();while(Qa!==null);if(rt&6)throw Error(a(327));S=f.finishedWork;var R=f.finishedLanes;if(S===null)return null;if(f.finishedWork=null,f.finishedLanes=0,S===f.current)throw Error(a(177));f.callbackNode=null,f.callbackPriority=0;var $=S.lanes|S.childLanes;if($n(f,$),f===In&&(yn=In=null,Hn=0),!(S.subtreeFlags&2064)&&!(S.flags&2064)||wp||(wp=!0,pS(Ha,function(){return kl(),null})),$=(S.flags&15990)!==0,S.subtreeFlags&15990||$){$=fn.transition,fn.transition=null;var ee=st;st=1;var oe=rt;rt|=4,Nv.current=null,dF(f,S),Z6(S,f),B(f.containerInfo),f.current=S,fF(S),jc(),rt=oe,st=ee,fn.transition=$}else f.current=S;if(wp&&(wp=!1,Qa=f,_p=R),$=f.pendingLanes,$===0&&(Xa=null),F(S.stateNode),Or(f,Ft()),g!==null)for(C=f.onRecoverableError,S=0;S<g.length;S++)R=g[S],C(R.value,{componentStack:R.stack,digest:R.digest});if(bp)throw bp=!1,f=Cv,Cv=null,f;return _p&1&&f.tag!==0&&kl(),$=f.pendingLanes,$&1?f===jv?Rd++:(Rd=0,jv=f):Rd=0,vt(),null}function kl(){if(Qa!==null){var f=Ys(_p),g=fn.transition,S=st;try{if(fn.transition=null,st=16>f?16:f,Qa===null)var C=!1;else{if(f=Qa,Qa=null,_p=0,rt&6)throw Error(a(331));var R=rt;for(rt|=4,Pe=f.current;Pe!==null;){var $=Pe,ee=$.child;if(Pe.flags&16){var oe=$.deletions;if(oe!==null){for(var ge=0;ge<oe.length;ge++){var Se=oe[ge];for(Pe=Se;Pe!==null;){var Ie=Pe;switch(Ie.tag){case 0:case 11:case 15:Td(8,Ie,$)}var Ke=Ie.child;if(Ke!==null)Ke.return=Ie,Pe=Ke;else for(;Pe!==null;){Ie=Pe;var Ce=Ie.sibling,Pt=Ie.return;if(K6(Ie),Ie===Se){Pe=null;break}if(Ce!==null){Ce.return=Pt,Pe=Ce;break}Pe=Pt}}}var jt=$.alternate;if(jt!==null){var Pr=jt.child;if(Pr!==null){jt.child=null;do{var ta=Pr.sibling;Pr.sibling=null,Pr=ta}while(Pr!==null)}}Pe=$}}if($.subtreeFlags&2064&&ee!==null)ee.return=$,Pe=ee;else e:for(;Pe!==null;){if($=Pe,$.flags&2048)switch($.tag){case 0:case 11:case 15:Td(9,$,$.return)}var pe=$.sibling;if(pe!==null){pe.return=$.return,Pe=pe;break e}Pe=$.return}}var ce=f.current;for(Pe=ce;Pe!==null;){ee=Pe;var ye=ee.child;if(ee.subtreeFlags&2064&&ye!==null)ye.return=ee,Pe=ye;else e:for(ee=ce;Pe!==null;){if(oe=Pe,oe.flags&2048)try{switch(oe.tag){case 0:case 11:case 15:fp(9,oe)}}catch($e){zt(oe,oe.return,$e)}if(oe===ee){Pe=null;break e}var Ae=oe.sibling;if(Ae!==null){Ae.return=oe.return,Pe=Ae;break e}Pe=oe.return}}if(rt=R,vt(),jr&&typeof jr.onPostCommitFiberRoot=="function")try{jr.onPostCommitFiberRoot(Va,f)}catch{}C=!0}return C}finally{st=S,fn.transition=g}}return!1}function dS(f,g,S){g=Ic(S,g),g=T6(f,g,1),f=Ya(f,g,1),g=ir(),f!==null&&(hs(f,1,g),Or(f,g))}function zt(f,g,S){if(f.tag===3)dS(f,f,S);else for(;g!==null;){if(g.tag===3){dS(g,f,S);break}else if(g.tag===1){var C=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(Xa===null||!Xa.has(C))){f=Ic(S,f),f=A6(g,f,1),g=Ya(g,f,1),f=ir(),g!==null&&(hs(g,1,f),Or(g,f));break}}g=g.return}}function yF(f,g,S){var C=f.pingCache;C!==null&&C.delete(g),g=ir(),f.pingedLanes|=f.suspendedLanes&S,In===f&&(Hn&S)===S&&(kn===4||kn===3&&(Hn&130023424)===Hn&&500>Ft()-Ev?Sl(f,0):Sv|=S),Or(f,g)}function fS(f,g){g===0&&(f.mode&1?(g=Cr,Cr<<=1,!(Cr&130023424)&&(Cr=4194304)):g=1);var S=ir();f=ms(f,g),f!==null&&(hs(f,g,S),Or(f,S))}function xF(f){var g=f.memoizedState,S=0;g!==null&&(S=g.retryLane),fS(f,S)}function bF(f,g){var S=0;switch(f.tag){case 13:var C=f.stateNode,R=f.memoizedState;R!==null&&(S=R.retryLane);break;case 19:C=f.stateNode;break;default:throw Error(a(314))}C!==null&&C.delete(g),fS(f,S)}var hS;hS=function(f,g,S){if(f!==null)if(f.memoizedProps!==g.pendingProps||dn.current)Tr=!0;else{if(!(f.lanes&S)&&!(g.flags&128))return Tr=!1,oF(f,g,S);Tr=!!(f.flags&131072)}else Tr=!1,Bt&&g.flags&1048576&&bl(g,qt,g.index);switch(g.lanes=0,g.tag){case 2:var C=g.type;lp(f,g),f=g.pendingProps;var R=kr(g,vn.current);Pc(g,S),R=Z1(null,g,C,f,R,S);var $=J1();return g.flags|=1,typeof R=="object"&&R!==null&&typeof R.render=="function"&&R.$$typeof===void 0?(g.tag=1,g.memoizedState=null,g.updateQueue=null,_n(C)?($=!0,za(g)):$=!1,g.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,H1(g),R.updater=ap,g.stateNode=R,R._reactInternals=g,sv(g,C,f,S),g=cv(null,g,C,!0,$,S)):(g.tag=0,Bt&&$&&Wa(g),gr(null,g,R,S),g=g.child),g;case 16:C=g.elementType;e:{switch(lp(f,g),f=g.pendingProps,R=C._init,C=R(C._payload),g.type=C,R=g.tag=_F(C),f=Di(C,f),R){case 0:g=lv(null,g,C,f,S);break e;case 1:g=q6(null,g,C,f,S);break e;case 11:g=L6(null,g,C,f,S);break e;case 14:g=I6(null,g,C,Di(C.type,f),S);break e}throw Error(a(306,C,""))}return g;case 0:return C=g.type,R=g.pendingProps,R=g.elementType===C?R:Di(C,R),lv(f,g,C,R,S);case 1:return C=g.type,R=g.pendingProps,R=g.elementType===C?R:Di(C,R),q6(f,g,C,R,S);case 3:e:{if(B6(g),f===null)throw Error(a(387));C=g.pendingProps,$=g.memoizedState,R=$.element,t6(f,g),Jh(g,C,null,S);var ee=g.memoizedState;if(C=ee.element,le&&$.isDehydrated)if($={element:C,isDehydrated:!1,cache:ee.cache,pendingSuspenseBoundaries:ee.pendingSuspenseBoundaries,transitions:ee.transitions},g.updateQueue.baseState=$,g.memoizedState=$,g.flags&256){R=Ic(Error(a(423)),g),g=z6(f,g,C,S,R);break e}else if(C!==R){R=Ic(Error(a(424)),g),g=z6(f,g,C,S,R);break e}else for(le&&(di=ll(g.stateNode.containerInfo),Ur=g,Bt=!0,Mi=null,yd=!1),S=ZN(g,null,C,S),g.child=S;S;)S.flags=S.flags&-3|4096,S=S.sibling;else{if(Tc(),C===R){g=Js(f,g,S);break e}gr(f,g,C,S)}g=g.child}return g;case 5:return i6(g),f===null&&F1(g),C=g.type,R=g.pendingProps,$=f!==null?f.memoizedProps:null,ee=R.children,ne(C,R)?ee=null:$!==null&&ne(C,$)&&(g.flags|=32),F6(f,g),gr(f,g,ee,S),g.child;case 6:return f===null&&F1(g),null;case 13:return $6(f,g,S);case 4:return V1(g,g.stateNode.containerInfo),C=g.pendingProps,f===null?g.child=Ac(g,null,C,S):gr(f,g,C,S),g.child;case 11:return C=g.type,R=g.pendingProps,R=g.elementType===C?R:Di(C,R),L6(f,g,C,R,S);case 7:return gr(f,g,g.pendingProps,S),g.child;case 8:return gr(f,g,g.pendingProps.children,S),g.child;case 12:return gr(f,g,g.pendingProps.children,S),g.child;case 10:e:{if(C=g.type._context,R=g.pendingProps,$=g.memoizedProps,ee=R.value,JN(g,C,ee),$!==null)if(ie($.value,ee)){if($.children===R.children&&!dn.current){g=Js(f,g,S);break e}}else for($=g.child,$!==null&&($.return=g);$!==null;){var oe=$.dependencies;if(oe!==null){ee=$.child;for(var ge=oe.firstContext;ge!==null;){if(ge.context===C){if($.tag===1){ge=Zs(-1,S&-S),ge.tag=2;var Se=$.updateQueue;if(Se!==null){Se=Se.shared;var Ie=Se.pending;Ie===null?ge.next=ge:(ge.next=Ie.next,Ie.next=ge),Se.pending=ge}}$.lanes|=S,ge=$.alternate,ge!==null&&(ge.lanes|=S),U1($.return,S,g),oe.lanes|=S;break}ge=ge.next}}else if($.tag===10)ee=$.type===g.type?null:$.child;else if($.tag===18){if(ee=$.return,ee===null)throw Error(a(341));ee.lanes|=S,oe=ee.alternate,oe!==null&&(oe.lanes|=S),U1(ee,S,g),ee=$.sibling}else ee=$.child;if(ee!==null)ee.return=$;else for(ee=$;ee!==null;){if(ee===g){ee=null;break}if($=ee.sibling,$!==null){$.return=ee.return,ee=$;break}ee=ee.return}$=ee}gr(f,g,R.children,S),g=g.child}return g;case 9:return R=g.type,C=g.pendingProps.children,Pc(g,S),R=fi(R),C=C(R),g.flags|=1,gr(f,g,C,S),g.child;case 14:return C=g.type,R=Di(C,g.pendingProps),R=Di(C.type,R),I6(f,g,C,R,S);case 15:return M6(f,g,g.type,g.pendingProps,S);case 17:return C=g.type,R=g.pendingProps,R=g.elementType===C?R:Di(C,R),lp(f,g),g.tag=1,_n(C)?(f=!0,za(g)):f=!1,Pc(g,S),C6(g,C,R),sv(g,C,R,S),cv(null,g,C,!0,f,S);case 19:return G6(f,g,S);case 22:return D6(f,g,S)}throw Error(a(156,g.tag))};function pS(f,g){return Xs(f,g)}function wF(f,g,S,C){this.tag=f,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gi(f,g,S,C){return new wF(f,g,S,C)}function Rv(f){return f=f.prototype,!(!f||!f.isReactComponent)}function _F(f){if(typeof f=="function")return Rv(f)?1:0;if(f!=null){if(f=f.$$typeof,f===x)return 11;if(f===w)return 14}return 2}function eo(f,g){var S=f.alternate;return S===null?(S=gi(f.tag,g,f.key,f.mode),S.elementType=f.elementType,S.type=f.type,S.stateNode=f.stateNode,S.alternate=f,f.alternate=S):(S.pendingProps=g,S.type=f.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=f.flags&14680064,S.childLanes=f.childLanes,S.lanes=f.lanes,S.child=f.child,S.memoizedProps=f.memoizedProps,S.memoizedState=f.memoizedState,S.updateQueue=f.updateQueue,g=f.dependencies,S.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},S.sibling=f.sibling,S.index=f.index,S.ref=f.ref,S}function kp(f,g,S,C,R,$){var ee=2;if(C=f,typeof f=="function")Rv(f)&&(ee=1);else if(typeof f=="string")ee=5;else e:switch(f){case d:return Cl(S.children,R,$,g);case p:ee=8,R|=8;break;case h:return f=gi(12,S,g,R|2),f.elementType=h,f.lanes=$,f;case _:return f=gi(13,S,g,R),f.elementType=_,f.lanes=$,f;case v:return f=gi(19,S,g,R),f.elementType=v,f.lanes=$,f;case N:return Cp(S,R,$,g);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case m:ee=10;break e;case y:ee=9;break e;case x:ee=11;break e;case w:ee=14;break e;case b:ee=16,C=null;break e}throw Error(a(130,f==null?f:typeof f,""))}return g=gi(ee,S,g,R),g.elementType=f,g.type=C,g.lanes=$,g}function Cl(f,g,S,C){return f=gi(7,f,C,g),f.lanes=S,f}function Cp(f,g,S,C){return f=gi(22,f,C,g),f.elementType=N,f.lanes=S,f.stateNode={isHidden:!1},f}function Lv(f,g,S){return f=gi(6,f,null,g),f.lanes=S,f}function Iv(f,g,S){return g=gi(4,f.children!==null?f.children:[],f.key,g),g.lanes=S,g.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},g}function NF(f,g,S,C,R){this.tag=g,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=re,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yl(0),this.expirationTimes=yl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yl(0),this.identifierPrefix=C,this.onRecoverableError=R,le&&(this.mutableSourceEagerHydrationData=null)}function mS(f,g,S,C,R,$,ee,oe,ge){return f=new NF(f,g,S,oe,ge),g===1?(g=1,$===!0&&(g|=8)):g=0,$=gi(3,null,null,g),f.current=$,$.stateNode=f,$.memoizedState={element:C,isDehydrated:S,cache:null,transitions:null,pendingSuspenseBoundaries:null},H1($),f}function gS(f){if(!f)return li;f=f._reactInternals;e:{if(M(f)!==f||f.tag!==1)throw Error(a(170));var g=f;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(_n(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(g!==null);throw Error(a(171))}if(f.tag===1){var S=f.type;if(_n(S))return Ec(f,S,g)}return g}function vS(f){var g=f._reactInternals;if(g===void 0)throw typeof f.render=="function"?Error(a(188)):(f=Object.keys(f).join(","),Error(a(268,f)));return f=O(g),f===null?null:f.stateNode}function yS(f,g){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var S=f.retryLane;f.retryLane=S!==0&&S<g?S:g}}function jp(f,g){yS(f,g),(f=f.alternate)&&yS(f,g)}function SF(f){return f=O(f),f===null?null:f.stateNode}function EF(){return null}return n.attemptContinuousHydration=function(f){if(f.tag===13){var g=ms(f,134217728);if(g!==null){var S=ir();mi(g,f,134217728,S)}jp(f,134217728)}},n.attemptDiscreteHydration=function(f){if(f.tag===13){var g=ms(f,1);if(g!==null){var S=ir();mi(g,f,1,S)}jp(f,1)}},n.attemptHydrationAtCurrentPriority=function(f){if(f.tag===13){var g=Za(f),S=ms(f,g);if(S!==null){var C=ir();mi(S,f,g,C)}jp(f,g)}},n.attemptSynchronousHydration=function(f){switch(f.tag){case 3:var g=f.stateNode;if(g.current.memoizedState.isDehydrated){var S=mr(g.pendingLanes);S!==0&&(Ua(g,S|1),Or(g,Ft()),!(rt&6)&&(Fc(),vt()))}break;case 13:aS(function(){var C=ms(f,1);if(C!==null){var R=ir();mi(C,f,1,R)}}),jp(f,1)}},n.batchedUpdates=function(f,g){var S=rt;rt|=1;try{return f(g)}finally{rt=S,rt===0&&(Fc(),Ue&&vt())}},n.createComponentSelector=function(f){return{$$typeof:hp,value:f}},n.createContainer=function(f,g,S,C,R,$,ee){return mS(f,g,!1,null,S,C,R,$,ee)},n.createHasPseudoClassSelector=function(f){return{$$typeof:pp,value:f}},n.createHydrationContainer=function(f,g,S,C,R,$,ee,oe,ge){return f=mS(S,C,!0,f,R,$,ee,oe,ge),f.context=gS(null),S=f.current,C=ir(),R=Za(S),$=Zs(C,R),$.callback=g??null,Ya(S,$,R),f.current.lanes=R,hs(f,R,C),Or(f,C),f},n.createPortal=function(f,g,S){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:C==null?null:""+C,children:f,containerInfo:g,implementation:S}},n.createRoleSelector=function(f){return{$$typeof:mp,value:f}},n.createTestNameSelector=function(f){return{$$typeof:gp,value:f}},n.createTextSelector=function(f){return{$$typeof:vp,value:f}},n.deferredUpdates=function(f){var g=st,S=fn.transition;try{return fn.transition=null,st=16,f()}finally{st=g,fn.transition=S}},n.discreteUpdates=function(f,g,S,C,R){var $=st,ee=fn.transition;try{return fn.transition=null,st=1,f(g,S,C,R)}finally{st=$,fn.transition=ee,rt===0&&Fc()}},n.findAllNodes=_v,n.findBoundingRects=function(f,g){if(!_e)throw Error(a(363));g=_v(f,g),f=[];for(var S=0;S<g.length;S++)f.push(xe(g[S]));for(g=f.length-1;0<g;g--){S=f[g];for(var C=S.x,R=C+S.width,$=S.y,ee=$+S.height,oe=g-1;0<=oe;oe--)if(g!==oe){var ge=f[oe],Se=ge.x,Ie=Se+ge.width,Ke=ge.y,Ce=Ke+ge.height;if(C>=Se&&$>=Ke&&R<=Ie&&ee<=Ce){f.splice(g,1);break}else if(C!==Se||S.width!==ge.width||Ce<$||Ke>ee){if(!($!==Ke||S.height!==ge.height||Ie<C||Se>R)){Se>C&&(ge.width+=Se-C,ge.x=C),Ie<R&&(ge.width=R-Se),f.splice(g,1);break}}else{Ke>$&&(ge.height+=Ke-$,ge.y=$),Ce<ee&&(ge.height=ee-Ke),f.splice(g,1);break}}}return f},n.findHostInstance=vS,n.findHostInstanceWithNoPortals=function(f){return f=j(f),f=f!==null?I(f):null,f===null?null:f.stateNode},n.findHostInstanceWithWarning=function(f){return vS(f)},n.flushControlled=function(f){var g=rt;rt|=1;var S=fn.transition,C=st;try{fn.transition=null,st=1,f()}finally{st=C,fn.transition=S,rt=g,rt===0&&(Fc(),vt())}},n.flushPassiveEffects=kl,n.flushSync=aS,n.focusWithin=function(f,g){if(!_e)throw Error(a(363));for(f=xv(f),g=rS(f,g),g=Array.from(g),f=0;f<g.length;){var S=g[f++];if(!Te(S)){if(S.tag===5&&Et(S.stateNode))return!0;for(S=S.child;S!==null;)g.push(S),S=S.sibling}}return!1},n.getCurrentUpdatePriority=function(){return st},n.getFindAllNodesFailureDescription=function(f,g){if(!_e)throw Error(a(363));var S=0,C=[];f=[xv(f),0];for(var R=0;R<f.length;){var $=f[R++],ee=f[R++],oe=g[ee];if(($.tag!==5||!Te($))&&(bv($,oe)&&(C.push(wv(oe)),ee++,ee>S&&(S=ee)),ee<g.length))for($=$.child;$!==null;)f.push($,ee),$=$.sibling}if(S<g.length){for(f=[];S<g.length;S++)f.push(wv(g[S]));return`findAllNodes was able to match part of the selector:
  `+(C.join(" > ")+`

No matching component was found for:
  `)+f.join(" > ")}return null},n.getPublicRootInstance=function(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return U(f.child.stateNode);default:return f.child.stateNode}},n.injectIntoDevTools=function(f){if(f={bundleType:f.bundleType,version:f.version,rendererPackageName:f.rendererPackageName,rendererConfig:f.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:SF,findFiberByHostInstance:f.findFiberByHostInstance||EF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")f=!1;else{var g=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(g.isDisabled||!g.supportsFiber)f=!0;else{try{Va=g.inject(f),jr=g}catch{}f=!!g.checkDCE}}return f},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(f,g,S,C){if(!_e)throw Error(a(363));f=_v(f,g);var R=bt(f,S,C).disconnect;return{disconnect:function(){R()}}},n.registerMutableSourceForHydration=function(f,g){var S=g._getVersion;S=S(g._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[g,S]:f.mutableSourceEagerHydrationData.push(g,S)},n.runWithPriority=function(f,g){var S=st;try{return st=f,g()}finally{st=S}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(f,g,S,C){var R=g.current,$=ir(),ee=Za(R);return S=gS(S),g.context===null?g.context=S:g.pendingContext=S,g=Zs($,ee),g.payload={element:f},C=C===void 0?null:C,C!==null&&(g.callback=C),f=Ya(R,g,ee),f!==null&&(mi(f,R,ee,$),Zh(f,R,ee)),ee},n};zD.exports=bme;var wme=zD.exports;const _me=Uo(wme);var $D={exports:{}},Nc={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Nc.ConcurrentRoot=1;Nc.ContinuousEventPriority=4;Nc.DefaultEventPriority=16;Nc.DiscreteEventPriority=1;Nc.IdleEventPriority=536870912;Nc.LegacyRoot=0;$D.exports=Nc;var UD=$D.exports;const oA={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let lA=!1,cA=!1;const GN=".react-konva-event",Nme=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,Sme=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,Eme={};function I1(t,e,n=Eme){if(!lA&&"zIndex"in e&&(console.warn(Sme),lA=!0),!cA&&e.draggable){var r=e.x!==void 0||e.y!==void 0,i=e.onDragEnd||e.onDragMove;r&&!i&&(console.warn(Nme),cA=!0)}for(var s in n)if(!oA[s]){var a=s.slice(0,2)==="on",o=n[s]!==e[s];if(a&&o){var l=s.substr(2).toLowerCase();l.substr(0,7)==="content"&&(l="content"+l.substr(7,1).toUpperCase()+l.substr(8)),t.off(l,n[s])}var u=!e.hasOwnProperty(s);u&&t.setAttr(s,void 0)}var d=e._useStrictMode,p={},h=!1;const m={};for(var s in e)if(!oA[s]){var a=s.slice(0,2)==="on",y=n[s]!==e[s];if(a&&y){var l=s.substr(2).toLowerCase();l.substr(0,7)==="content"&&(l="content"+l.substr(7,1).toUpperCase()+l.substr(8)),e[s]&&(m[l]=e[s])}!a&&(e[s]!==n[s]||d&&e[s]!==t.getAttr(s))&&(h=!0,p[s]=e[s])}h&&(t.setAttrs(p),il(t));for(var l in m)t.on(l+GN,m[l])}function il(t){if(!Je.Konva.autoDrawEnabled){var e=t.getLayer()||t.getStage();e&&e.batchDraw()}}const GD={},kme={};yh.Node.prototype._applyProps=I1;function Cme(t,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}t.add(e),il(t)}function jme(t,e,n){let r=yh[t];r||(console.error(`Konva has no node with the type ${t}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${t}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),r=yh.Group);const i={},s={};for(var a in e){var o=a.slice(0,2)==="on";o?s[a]=e[a]:i[a]=e[a]}const l=new r(i);return I1(l,s),l}function Tme(t,e,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${t}"`)}function Ame(t,e,n){return!1}function Ome(t){return t}function Pme(){return null}function Rme(){return null}function Lme(t,e,n,r){return kme}function Ime(){}function Mme(t){}function Dme(t,e){return!1}function Fme(){return GD}function qme(){return GD}const Bme=setTimeout,zme=clearTimeout,$me=-1;function Ume(t,e){return!1}const Gme=!1,Hme=!0,Vme=!0;function Wme(t,e){e.parent===t?e.moveToTop():t.add(e),il(t)}function Kme(t,e){e.parent===t?e.moveToTop():t.add(e),il(t)}function HD(t,e,n){e._remove(),t.add(e),e.setZIndex(n.getZIndex()),il(t)}function Yme(t,e,n){HD(t,e,n)}function Xme(t,e){e.destroy(),e.off(GN),il(t)}function Qme(t,e){e.destroy(),e.off(GN),il(t)}function Zme(t,e,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function Jme(t,e,n){}function ege(t,e,n,r,i){I1(t,i,r)}function tge(t){t.hide(),il(t)}function nge(t){}function rge(t,e){(e.visible==null||e.visible)&&t.show()}function ige(t,e){}function sge(t){}function age(){}const oge=()=>UD.DefaultEventPriority,lge=Object.freeze(Object.defineProperty({__proto__:null,appendChild:Wme,appendChildToContainer:Kme,appendInitialChild:Cme,cancelTimeout:zme,clearContainer:sge,commitMount:Jme,commitTextUpdate:Zme,commitUpdate:ege,createInstance:jme,createTextInstance:Tme,detachDeletedInstance:age,finalizeInitialChildren:Ame,getChildHostContext:qme,getCurrentEventPriority:oge,getPublicInstance:Ome,getRootHostContext:Fme,hideInstance:tge,hideTextInstance:nge,idlePriority:bf.unstable_IdlePriority,insertBefore:HD,insertInContainerBefore:Yme,isPrimaryRenderer:Gme,noTimeout:$me,now:bf.unstable_now,prepareForCommit:Pme,preparePortalMount:Rme,prepareUpdate:Lme,removeChild:Xme,removeChildFromContainer:Qme,resetAfterCommit:Ime,resetTextContent:Mme,run:bf.unstable_runWithPriority,scheduleTimeout:Bme,shouldDeprioritizeSubtree:Dme,shouldSetTextContent:Ume,supportsMutation:Vme,unhideInstance:rge,unhideTextInstance:ige,warnsIfNotActing:Hme},Symbol.toStringTag,{value:"Module"}));var cge=Object.defineProperty,uge=Object.defineProperties,dge=Object.getOwnPropertyDescriptors,uA=Object.getOwnPropertySymbols,fge=Object.prototype.hasOwnProperty,hge=Object.prototype.propertyIsEnumerable,dA=(t,e,n)=>e in t?cge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,fA=(t,e)=>{for(var n in e||(e={}))fge.call(e,n)&&dA(t,n,e[n]);if(uA)for(var n of uA(e))hge.call(e,n)&&dA(t,n,e[n]);return t},pge=(t,e)=>uge(t,dge(e)),hA,pA;typeof window<"u"&&((hA=window.document)!=null&&hA.createElement||((pA=window.navigator)==null?void 0:pA.product)==="ReactNative")?V.useLayoutEffect:V.useEffect;function VD(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=e?t.return:t.child;for(;r;){const i=VD(r,e,n);if(i)return i;r=e?null:r.sibling}}function WD(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const mA=console.error;console.error=function(){const t=[...arguments].join("");if(t!=null&&t.startsWith("Warning:")&&t.includes("useContext")){console.error=mA;return}return mA.apply(this,arguments)};const HN=WD(V.createContext(null));class KD extends V.Component{render(){return V.createElement(HN.Provider,{value:this._reactInternals},this.props.children)}}function mge(){const t=V.useContext(HN);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=V.useId();return V.useMemo(()=>{for(const r of[t,t==null?void 0:t.alternate]){if(!r)continue;const i=VD(r,!1,s=>{let a=s.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(i)return i}},[t,e])}function gge(){const t=mge(),[e]=V.useState(()=>new Map);e.clear();let n=t;for(;n;){if(n.type&&typeof n.type=="object"){const i=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;i&&i!==HN&&!e.has(i)&&e.set(i,V.useContext(WD(i)))}n=n.return}return e}function vge(){const t=gge();return V.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>V.createElement(e,null,V.createElement(n.Provider,pge(fA({},r),{value:t.get(n)}))),e=>V.createElement(KD,fA({},e))),[t])}function yge(t){const e=fe.useRef({});return fe.useLayoutEffect(()=>{e.current=t}),fe.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const xge=t=>{const e=fe.useRef(),n=fe.useRef(),r=fe.useRef(),i=yge(t),s=vge(),a=o=>{const{forwardedRef:l}=t;l&&(typeof l=="function"?l(o):l.current=o)};return fe.useLayoutEffect(()=>(n.current=new yh.Stage({width:t.width,height:t.height,container:e.current}),a(n.current),r.current=xf.createContainer(n.current,UD.LegacyRoot,!1,null),xf.updateContainer(fe.createElement(s,{},t.children),r.current),()=>{yh.isBrowser&&(a(null),xf.updateContainer(null,r.current,null),n.current.destroy())}),[]),fe.useLayoutEffect(()=>{a(n.current),I1(n.current,t,i),xf.updateContainer(fe.createElement(s,{},t.children),r.current,null)}),fe.createElement("div",{ref:e,id:t.id,accessKey:t.accessKey,className:t.className,role:t.role,style:t.style,tabIndex:t.tabIndex,title:t.title})},gA="Layer",vA="Rect",bge="Line",wge="Image",_ge="Text",Nge="Transformer",xf=_me(lge);xf.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:fe.version,rendererPackageName:"react-konva"});const Sge=fe.forwardRef((t,e)=>fe.createElement(KD,{},fe.createElement(xge,{...t,forwardedRef:e}))),m5=({stepNumber:t,title:e,isOpen:n,onClick:r,children:i})=>c.jsxs("div",{className:`border border-white/10 rounded-2xl bg-[#13141f] overflow-hidden transition-all duration-300 ${n?"ring-1 ring-primary/50":"opacity-80"}`,children:[c.jsxs("button",{onClick:r,className:"w-full flex items-center justify-between p-6 hover:bg-white/5 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:`size-8 rounded-full flex items-center justify-center font-black text-sm ${n?"bg-primary text-white":"bg-white/10 text-slate-400"}`,children:t}),c.jsx("h3",{className:`text-lg font-bold ${n?"text-white":"text-slate-400"}`,children:e})]}),c.jsx("span",{className:`material-symbols-outlined transition-transform duration-300 ${n?"rotate-180 text-primary":"text-slate-500"}`,children:"expand_more"})]}),n&&c.jsx("div",{className:"p-6 pt-0 border-t border-white/5 animate-in fade-in slide-in-from-top-2",children:i})]}),g5=({icon:t,title:e,desc:n,selected:r,onClick:i})=>c.jsxs("div",{onClick:i,className:`p-6 rounded-xl border cursor-pointer transition-all relative group h-full flex flex-col justify-between ${r?"bg-primary/20 border-primary shadow-[0_0_30px_rgba(var(--color-primary),0.3)]":"bg-[#0a0a0c] border-white/10 hover:border-white/30"}`,children:[c.jsxs("div",{className:"mb-4",children:[c.jsx("div",{className:`size-12 rounded-lg flex items-center justify-center mb-4 ${r?"bg-primary text-white":"bg-white/10 text-slate-400 group-hover:text-white group-hover:bg-white/20"}`,children:c.jsx("span",{className:"material-symbols-outlined text-2xl",children:t})}),c.jsx("h4",{className:"font-bold text-white mb-1",children:e}),c.jsx("p",{className:"text-xs text-slate-500 leading-relaxed",children:n})]}),r&&c.jsx("div",{className:"absolute top-4 right-4 size-3 bg-primary rounded-full shadow-glow"})]}),Ege=({src:t,x:e,y:n,width:r,height:i})=>{const[s,a]=V.useState(null);return V.useEffect(()=>{if(!t)return;const o=new window.Image;o.src=t,o.crossOrigin="Anonymous",o.onload=()=>{a(o)}},[t]),c.jsx(wge,{image:s,x:e,y:n,width:r,height:i})},kge=({selectedId:t})=>{const e=fe.useRef();return fe.useEffect(()=>{if(t){const n=e.current.getStage().findOne("#"+t);n&&(e.current.nodes([n]),e.current.getLayer().batchDraw())}else e.current.nodes([])},[t]),c.jsx(Nge,{ref:e})},yA=({mode:t})=>{var re;const{username:e,projectName:n,folderId:r,entityId:i}=ri(),s=ni(),a=rc(),{setRightOpen:o,setRightPanelMode:l,setAvailableTemplates:u,mapSettings:d,setMapSettings:p,setOnMapSettingsChange:h}=Ko(),[m,y]=V.useState(t==="create"?"setup":"editor");V.useEffect(()=>{y(t==="create"?"setup":"editor")},[t]);const[x,_]=V.useState(((re=a.state)==null?void 0:re.folderId)||null),[v,w]=V.useState(1),[b,N]=V.useState({name:"New Map",description:"",parentZone:null,type:"regional",sourceType:"blank",dims:{width:800,height:600},bgImage:null}),[E,A]=V.useState(!1),[P,T]=V.useState("brush"),[M,k]=V.useState([]),[j,O]=V.useState([]),[q,I]=V.useState([]),[D,U]=V.useState(null),W=fe.useRef(!1),[Y,H]=V.useState({isOpen:!1,id:null,text:""}),B=Q=>{Q.target===Q.target.getStage()&&U(null)},L=Q=>{B(Q);const de=Q.target.getStage().getPointerPosition();P!=="select"&&(W.current=!0,P==="brush"||P==="eraser"?k([...M,{id:`line-${Date.now()}`,tool:P,points:[de.x,de.y],color:P==="eraser"?"#ffffff":"#df4b26",size:P==="eraser"?20:5}]):P==="rect"?O([...j,{id:`rect-${Date.now()}`,x:de.x,y:de.y,width:0,height:0,color:"#df4b26"}]):P==="text"&&(I([...q,{id:`text-${Date.now()}`,x:de.x,y:de.y,text:"Double click to edit",fontSize:20,color:"#ffffff"}]),W.current=!1))},z=Q=>{if(!W.current)return;const de=Q.target.getStage().getPointerPosition();P==="brush"||P==="eraser"?k(le=>{const ue=[...le],he={...ue[ue.length-1]};return he.points=he.points.concat([de.x,de.y]),ue[ue.length-1]=he,ue}):P==="rect"&&O(le=>{const ue=[...le],he={...ue[ue.length-1]};return he.width=de.x-he.x,he.height=de.y-he.y,ue[ue.length-1]=he,ue})},K=()=>{W.current=!1};V.useEffect(()=>{if(o(m==="editor"),m==="editor"){l("MAP");const Q={showGrid:!0,gridSize:50,width:b.dims.width,height:b.dims.height};p(Q),h(se=>{se&&N(de=>({...de,dims:{width:se.width,height:se.height}}))})}},[m]),V.useEffect(()=>{t==="create"&&!x&&r&&(console.log("Resolving folder ID for slug:",r),ke.get(`/world-bible/folders/${r}`).then(Q=>_(Q.id)).catch(Q=>console.error("Could not resolve folder ID",Q)))},[t,r,x]);const J=Q=>{const se=Q.target.files[0];if(se){const de=new FileReader;de.onload=le=>{const ue=new Image;ue.onload=()=>{N(he=>({...he,bgImage:le.target.result,dims:{width:ue.width,height:ue.height},sourceType:"upload"}))},ue.src=le.target.result},de.readAsDataURL(se)}},ne=fe.useRef(null),X=async()=>{if(!x){alert("Folder context missing. Please start from the folder view again.");return}A(!0);try{let Q=b.bgImage;if(ne.current){const le=ne.current.findOne("Transformer");if(le&&le.nodes([]),Q=ne.current.toDataURL({pixelRatio:.5}),le&&D){const ue=ne.current.findOne("#"+D);ue&&le.nodes([ue])}}const se={nombre:b.name,tipoEspecial:"map",carpetaId:x,descripcion:JSON.stringify({description:b.description,type:b.type,width:b.dims.width,height:b.dims.height,bgImage:b.bgImage?"BINARY_DATA":null,layers:{lines:M,rectangles:j,texts:q},snapshotUrl:Q}),iconUrl:Q},de=await ke.post("/world-bible/entities",se);window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:x}})),s(`/${e}/${n}/map-editor/edit/${de.id}`,{replace:!0})}catch(Q){console.error(Q),alert("Error creating map. Check console.")}finally{A(!1)}},G=fe.useRef(null);V.useEffect(()=>{(!t||t==="edit")&&i&&ke.get(`/world-bible/entities/${i}`).then(Q=>{_(Q.carpetaId),G.current=Q.iconUrl,y("editor");let se={};try{se=Q.descripcion?JSON.parse(Q.descripcion):{}}catch(de){console.error("Error parsing map data",de)}N({name:Q.nombre,description:se.description||"",parentZone:null,type:se.type||"regional",sourceType:se.bgImage?"upload":"blank",dims:{width:se.width||800,height:se.height||600},bgImage:se.bgImage}),se.layers&&(k(se.layers.lines||[]),O(se.layers.rectangles||[]),I(se.layers.texts||[])),p({name:Q.nombre,description:se.description||"",type:se.type||"regional",showGrid:!0,gridSize:50,width:se.width||800,height:se.height||600,bgImage:se.bgImage})}).catch(Q=>console.error("Error loading entity",Q))},[t,i]);const te=async()=>{A(!0);try{let Q=b.bgImage;if(ne.current){U(null);const de=ne.current.findOne("Transformer");de&&de.nodes([]),Q=ne.current.toDataURL({pixelRatio:.5})}const se={id:i,nombre:b.name,tipoEspecial:"map",carpetaId:x,descripcion:JSON.stringify({description:b.description,type:b.type,width:b.dims.width,height:b.dims.height,bgImage:b.bgImage?"BINARY_DATA":null,layers:{lines:M,rectangles:j,texts:q},snapshotUrl:Q}),iconUrl:G.current};await ke.put(`/world-bible/entities/${i}`,se),s(x?`/${e}/${n}/bible/folder/${x}`:`/${e}/${n}/bible`)}catch(Q){console.error("Save failed",Q),alert("Error saving map")}finally{A(!1)}};return m==="setup"?c.jsxs("div",{className:"flex-1 flex flex-col h-screen bg-[#060608] text-white",children:[c.jsxs("div",{className:"h-16 border-b border-white/5 flex items-center justify-between px-8 bg-[#0a0a0c]",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2 bg-primary/20 rounded-lg text-primary",children:c.jsx("span",{className:"material-symbols-outlined",children:"add_circle"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-lg font-bold leading-tight",children:"Create New Map / Zone"}),c.jsx("p",{className:"text-[10px] text-slate-500 uppercase font-bold tracking-wider",children:"Configure details for your new cartography entry"})]})]}),c.jsx("button",{onClick:()=>s(-1),className:"p-2 hover:bg-white/5 rounded-full text-slate-500 hover:text-white transition-colors",children:c.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-8",children:c.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[c.jsx(m5,{stepNumber:"1",title:"Identity & Hierarchy",isOpen:v===1,onClick:()=>w(1),children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500 mb-2 block",children:"Map Name"}),c.jsx("input",{autoFocus:!0,value:b.name,onChange:Q=>N({...b,name:Q.target.value}),className:"w-full bg-[#0a0a0c] border border-white/10 rounded-xl p-4 text-white focus:border-primary outline-none transition-colors",placeholder:"e.g. The Sapphire Coast"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500 mb-2 block",children:"Parent Zone (Optional)"}),c.jsxs("div",{className:"w-full bg-[#0a0a0c] border border-white/10 rounded-xl p-4 text-slate-400 flex items-center justify-between cursor-pointer hover:border-white/20",children:[c.jsx("span",{children:"Current Folder (Default)"}),c.jsx("span",{className:"material-symbols-outlined text-sm",children:"expand_more"})]}),c.jsx("p",{className:"text-[10px] text-slate-600 mt-2",children:"Selecting a parent makes this a sub-zone."})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500 mb-2 block",children:"Description"}),c.jsx("textarea",{value:b.description,onChange:Q=>N({...b,description:Q.target.value}),className:"w-full h-40 bg-[#0a0a0c] border border-white/10 rounded-xl p-4 text-white resize-none focus:border-primary outline-none transition-colors leading-relaxed",placeholder:"Brief description of geography, climate, or importance..."})]})]})}),c.jsx(m5,{stepNumber:"2",title:"Map Type",isOpen:v===2,onClick:()=>w(2),children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsx(g5,{icon:"public",title:"World Map",desc:"Continents, oceans, global scale.",selected:b.type==="world",onClick:()=>N({...b,type:"world"})}),c.jsx(g5,{icon:"map",title:"Regional Map",desc:"Kingdoms, provinces, biomes.",selected:b.type==="regional",onClick:()=>N({...b,type:"regional"})}),c.jsx(g5,{icon:"location_city",title:"City / Local",desc:"Cities, dungeons, battlemaps.",selected:b.type==="local",onClick:()=>N({...b,type:"local"})})]})}),c.jsx(m5,{stepNumber:"3",title:"Canvas Source",isOpen:v===3,onClick:()=>w(3),children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{onClick:()=>document.getElementById("map-upload-input").click(),className:`relative p-8 rounded-xl border-2 border-dashed flex flex-col items-center justify-center text-center cursor-pointer transition-all group min-h-[200px] ${b.sourceType==="upload"?"border-primary bg-primary/5":"border-white/10 hover:border-white/30 bg-[#0a0a0c]"}`,children:[c.jsx("input",{id:"map-upload-input",type:"file",accept:"image/*",className:"hidden",onChange:J}),b.bgImage?c.jsx("img",{src:b.bgImage,alt:"Preview",className:"absolute inset-0 w-full h-full object-cover rounded-xl opacity-50 group-hover:opacity-70"}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"size-16 bg-white/5 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:c.jsx("span",{className:"material-symbols-outlined text-3xl text-slate-400",children:"cloud_upload"})}),c.jsx("h4",{className:"font-bold text-white",children:"Upload Image File"}),c.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Drag & drop or click to browse"}),c.jsx("p",{className:"text-[10px] text-slate-600 mt-1 uppercase font-bold",children:"JPG, PNG, WEBP  Max 20MB"})]}),b.sourceType==="upload"&&c.jsx("div",{className:"absolute top-4 right-4 size-3 bg-primary rounded-full shadow-glow z-10"})]}),c.jsxs("div",{onClick:()=>N({...b,sourceType:"blank",bgImage:null}),className:`p-8 rounded-xl border flex flex-col items-center justify-center text-center cursor-pointer transition-all min-h-[200px] ${b.sourceType==="blank"?"border-primary bg-primary/5":"border-white/10 hover:border-white/30 bg-[#0a0a0c]"}`,children:[c.jsx("div",{className:"size-16 bg-white/5 rounded-full flex items-center justify-center mb-4",children:c.jsx("span",{className:"material-symbols-outlined text-3xl text-slate-400",children:"check_box_outline_blank"})}),c.jsx("h4",{className:"font-bold text-white",children:"Blank Canvas"}),c.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Start a new drawing from scratch"}),b.sourceType==="blank"&&c.jsxs("div",{className:"mt-6 flex items-center gap-2 bg-black/50 p-1 rounded-lg border border-white/10",children:[c.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-500 px-2",children:"Size"}),c.jsx("span",{className:"text-xs font-mono text-white",children:"4096 px"}),c.jsx("span",{className:"text-xs text-slate-500",children:"x"}),c.jsx("span",{className:"text-xs font-mono text-white",children:"4096 px"})]})]})]})})]})}),c.jsxs("div",{className:"h-20 border-t border-white/5 bg-[#0a0a0c] flex items-center justify-between px-8 z-20",children:[c.jsx("button",{onClick:()=>s(-1),className:"text-sm font-bold text-slate-500 hover:text-white transition-colors",children:"Cancel"}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-xs text-slate-600 italic",children:"Changes saved locally"}),c.jsx(Ct,{variant:"primary",size:"lg",icon:"check",onClick:X,disabled:!b.name||E,className:"bg-primary hover:bg-primary-light text-white shadow-lg shadow-primary/25 px-8",children:E?"Creating...":"Create Map"})]})]})]}):c.jsxs("div",{className:"flex flex-col h-screen w-full bg-[#0f0f13] text-white overflow-hidden",children:[c.jsxs("header",{className:"h-14 border-b border-white/5 flex items-center justify-between px-4 bg-[#1a1a20] shrink-0",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:()=>s(-1),className:"p-2 hover:bg-white/5 rounded-full",title:"Back to Collection",children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:"arrow_back"})}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("input",{value:b.name,onChange:Q=>N({...b,name:Q.target.value}),className:"bg-transparent font-bold text-sm outline-none focus:bg-white/5 rounded px-2 -ml-2"}),c.jsxs("span",{className:"text-[10px] text-text-muted px-2",children:[b.dims.width," x ",b.dims.height,"  ",(d==null?void 0:d.gridSize)||50,"px Grid"]})]})]}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx(Ct,{variant:"primary",size:"sm",icon:"save",onClick:te,disabled:E,children:E?"Saving...":"Save Changes"})})]}),c.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[c.jsx("div",{className:"w-14 bg-[#1a1a20] border-r border-white/5 flex flex-col items-center py-4 gap-4 z-10",children:[{id:"select",icon:"near_me"},{id:"brush",icon:"brush"},{id:"eraser",icon:"ink_eraser"},{id:"rect",icon:"check_box_outline_blank"},{id:"text",icon:"title"}].map(Q=>c.jsx("button",{onClick:()=>T(Q.id),className:`p-2 rounded-lg transition-colors ${P===Q.id?"bg-primary text-white shadow-lg shadow-primary/30":"hover:bg-white/5 text-slate-400 hover:text-white"}`,children:c.jsx("span",{className:"material-symbols-outlined",children:Q.icon})},Q.id))}),c.jsx("div",{className:"flex-1 overflow-auto bg-[#0f0f13] relative flex items-center justify-center p-8 custom-scrollbar",children:c.jsx("div",{className:"bg-[#1a1a20] shadow-[0_0_50px_rgba(0,0,0,0.5)] flex-none",children:c.jsxs(Sge,{ref:ne,width:b.dims.width,height:b.dims.height,onMouseDown:L,onMouseMove:z,onMouseUp:K,className:"bg-white",children:[c.jsxs(gA,{children:[b.bgImage&&c.jsx(Ege,{src:b.bgImage,x:0,y:0,width:b.dims.width,height:b.dims.height}),(d==null?void 0:d.showGrid)&&c.jsx(vA,{width:b.dims.width,height:b.dims.height,fillPatternImage:(()=>{const Q=document.createElement("canvas");Q.width=d.gridSize||50,Q.height=d.gridSize||50;const se=Q.getContext("2d");return se.strokeStyle="rgba(0,0,0,0.2)",se.lineWidth=1,se.strokeRect(0,0,Q.width,Q.height),Q})(),listening:!1})]}),c.jsxs(gA,{children:[M.map((Q,se)=>c.jsx(bge,{points:Q.points,stroke:Q.color,strokeWidth:Q.size,tension:.5,lineCap:"round",lineJoin:"round",globalCompositeOperation:Q.tool==="eraser"?"destination-out":"source-over"},se)),j.map((Q,se)=>c.jsx(vA,{id:Q.id,x:Q.x,y:Q.y,width:Q.width,height:Q.height,stroke:Q.color,strokeWidth:2,draggable:P==="select",onClick:()=>P==="select"&&U(Q.id),onTap:()=>P==="select"&&U(Q.id)},Q.id)),q.map((Q,se)=>c.jsx(_ge,{id:Q.id,x:Q.x,y:Q.y,text:Q.text,fontSize:Q.fontSize,fill:Q.color,draggable:P==="select",onClick:()=>P==="select"&&U(Q.id),onTap:()=>P==="select"&&U(Q.id),onDblClick:de=>{H({isOpen:!0,id:Q.id,text:Q.text})}},Q.id)),c.jsx(kge,{selectedId:D})]})]})})})]}),c.jsx(rD,{isOpen:Y.isOpen,onClose:()=>H(Q=>({...Q,isOpen:!1})),title:"Edit Map Text",initialValue:Y.text,onConfirm:Q=>{I(se=>se.map(de=>de.id===Y.id?{...de,text:Q}:de))},confirmText:"Save Text"})]})};function Cge(){return c.jsx(e$,{children:c.jsxs(Vz,{children:[c.jsx(Yt,{path:"/",element:c.jsx($$,{})}),c.jsx(Yt,{element:c.jsx(F$,{}),children:c.jsxs(Yt,{path:"/:username/:projectName",element:c.jsx(V$,{}),children:[c.jsx(Yt,{index:!0,element:c.jsx(U$,{})}),c.jsx(Yt,{path:"writing",element:c.jsx(cde,{})}),c.jsx(Yt,{path:"entities/:type/:entityId",element:c.jsx(ire,{})}),c.jsx(Yt,{path:"settings",element:c.jsx(G$,{})}),c.jsx(Yt,{path:"map-editor/create/:folderId",element:c.jsx(yA,{mode:"create"})}),c.jsx(Yt,{path:"map-editor/edit/:entityId",element:c.jsx(yA,{mode:"edit"})}),c.jsxs(Yt,{path:"bible",element:c.jsx(bde,{}),children:[c.jsx(Yt,{index:!0,element:c.jsx(wde,{})}),c.jsx(Yt,{path:"folder/:folderSlug/entity/new/:type",element:c.jsx(ef,{mode:"creation"})}),c.jsx(Yt,{path:"folder/:folderSlug",element:c.jsx(gde,{})}),c.jsx(Yt,{path:"entity/:entitySlug",element:c.jsx(ef,{})}),c.jsx(Yt,{path:"folder/:folderSlug/entity/:entitySlug",element:c.jsx(ef,{})}),c.jsx(Yt,{path:"folder/:folderSlug/map/:entitySlug",element:c.jsx(ef,{})}),c.jsx(Yt,{path:"folder/:folderSlug/timeline/:entitySlug",element:c.jsx(ef,{})})]}),c.jsx(Yt,{path:"map",element:c.jsx(dre,{})}),c.jsx(Yt,{path:"timeline",element:c.jsx(sre,{})}),c.jsx(Yt,{path:"languages",element:c.jsx(mre,{})}),c.jsx(Yt,{path:"trash",element:c.jsx(ude,{})}),c.jsx(Yt,{path:"graph",element:c.jsx(Jne,{})})]})})]})})}class jge extends fe.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,n){this.setState({error:e,errorInfo:n}),console.error("Uncaught Error:",e,n)}render(){return this.state.hasError?c.jsxs("div",{style:{padding:20,background:"#222",color:"red",height:"100vh"},children:[c.jsx("h1",{children:"Something went wrong."}),c.jsxs("details",{style:{whiteSpace:"pre-wrap"},children:[this.state.error&&this.state.error.toString(),c.jsx("br",{}),this.state.errorInfo&&this.state.errorInfo.componentStack]})]}):this.props.children}}const xA=document.getElementById("root");xA?y5.createRoot(xA).render(c.jsx(fe.StrictMode,{children:c.jsx(jge,{children:c.jsx(Cge,{})})})):console.error("React root element not found (looked for #root)")});export default Tge();
