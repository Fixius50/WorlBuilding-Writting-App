function oN(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var pv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _w={exports:{}},Ah={},jw={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tc=Symbol.for("react.element"),lN=Symbol.for("react.portal"),cN=Symbol.for("react.fragment"),dN=Symbol.for("react.strict_mode"),uN=Symbol.for("react.profiler"),hN=Symbol.for("react.provider"),fN=Symbol.for("react.context"),pN=Symbol.for("react.forward_ref"),mN=Symbol.for("react.suspense"),gN=Symbol.for("react.memo"),xN=Symbol.for("react.lazy"),mv=Symbol.iterator;function yN(e){return e===null||typeof e!="object"?null:(e=mv&&e[mv]||e["@@iterator"],typeof e=="function"?e:null)}var kw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Cw=Object.assign,Ew={};function Po(e,t,n){this.props=e,this.context=t,this.refs=Ew,this.updater=n||kw}Po.prototype.isReactComponent={};Po.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Po.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Pw(){}Pw.prototype=Po.prototype;function ex(e,t,n){this.props=e,this.context=t,this.refs=Ew,this.updater=n||kw}var tx=ex.prototype=new Pw;tx.constructor=ex;Cw(tx,Po.prototype);tx.isPureReactComponent=!0;var gv=Array.isArray,Tw=Object.prototype.hasOwnProperty,nx={current:null},Mw={key:!0,ref:!0,__self:!0,__source:!0};function Rw(e,t,n){var r,i={},s=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(s=""+t.key),t)Tw.call(t,r)&&!Mw.hasOwnProperty(r)&&(i[r]=t[r]);var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){for(var u=Array(d),h=0;h<d;h++)u[h]=arguments[h+2];i.children=u}if(e&&e.defaultProps)for(r in d=e.defaultProps,d)i[r]===void 0&&(i[r]=d[r]);return{$$typeof:Tc,type:e,key:s,ref:l,props:i,_owner:nx.current}}function vN(e,t){return{$$typeof:Tc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function rx(e){return typeof e=="object"&&e!==null&&e.$$typeof===Tc}function bN(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var xv=/\/+/g;function j0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?bN(""+e.key):t.toString(36)}function ku(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Tc:case lN:l=!0}}if(l)return l=e,i=i(l),e=r===""?"."+j0(l,0):r,gv(i)?(n="",e!=null&&(n=e.replace(xv,"$&/")+"/"),ku(i,t,n,"",function(h){return h})):i!=null&&(rx(i)&&(i=vN(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(xv,"$&/")+"/")+e)),t.push(i)),1;if(l=0,r=r===""?".":r+":",gv(e))for(var d=0;d<e.length;d++){s=e[d];var u=r+j0(s,d);l+=ku(s,t,n,u,i)}else if(u=yN(e),typeof u=="function")for(e=u.call(e),d=0;!(s=e.next()).done;)s=s.value,u=r+j0(s,d++),l+=ku(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Yd(e,t,n){if(e==null)return e;var r=[],i=0;return ku(e,r,"","",function(s){return t.call(n,s,i++)}),r}function wN(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ln={current:null},Cu={transition:null},NN={ReactCurrentDispatcher:ln,ReactCurrentBatchConfig:Cu,ReactCurrentOwner:nx};function Aw(){throw Error("act(...) is not supported in production builds of React.")}ze.Children={map:Yd,forEach:function(e,t,n){Yd(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Yd(e,function(){t++}),t},toArray:function(e){return Yd(e,function(t){return t})||[]},only:function(e){if(!rx(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ze.Component=Po;ze.Fragment=cN;ze.Profiler=uN;ze.PureComponent=ex;ze.StrictMode=dN;ze.Suspense=mN;ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NN;ze.act=Aw;ze.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Cw({},e.props),i=e.key,s=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,l=nx.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var d=e.type.defaultProps;for(u in t)Tw.call(t,u)&&!Mw.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&d!==void 0?d[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){d=Array(u);for(var h=0;h<u;h++)d[h]=arguments[h+2];r.children=d}return{$$typeof:Tc,type:e.type,key:i,ref:s,props:r,_owner:l}};ze.createContext=function(e){return e={$$typeof:fN,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:hN,_context:e},e.Consumer=e};ze.createElement=Rw;ze.createFactory=function(e){var t=Rw.bind(null,e);return t.type=e,t};ze.createRef=function(){return{current:null}};ze.forwardRef=function(e){return{$$typeof:pN,render:e}};ze.isValidElement=rx;ze.lazy=function(e){return{$$typeof:xN,_payload:{_status:-1,_result:e},_init:wN}};ze.memo=function(e,t){return{$$typeof:gN,type:e,compare:t===void 0?null:t}};ze.startTransition=function(e){var t=Cu.transition;Cu.transition={};try{e()}finally{Cu.transition=t}};ze.unstable_act=Aw;ze.useCallback=function(e,t){return ln.current.useCallback(e,t)};ze.useContext=function(e){return ln.current.useContext(e)};ze.useDebugValue=function(){};ze.useDeferredValue=function(e){return ln.current.useDeferredValue(e)};ze.useEffect=function(e,t){return ln.current.useEffect(e,t)};ze.useId=function(){return ln.current.useId()};ze.useImperativeHandle=function(e,t,n){return ln.current.useImperativeHandle(e,t,n)};ze.useInsertionEffect=function(e,t){return ln.current.useInsertionEffect(e,t)};ze.useLayoutEffect=function(e,t){return ln.current.useLayoutEffect(e,t)};ze.useMemo=function(e,t){return ln.current.useMemo(e,t)};ze.useReducer=function(e,t,n){return ln.current.useReducer(e,t,n)};ze.useRef=function(e){return ln.current.useRef(e)};ze.useState=function(e){return ln.current.useState(e)};ze.useSyncExternalStore=function(e,t,n){return ln.current.useSyncExternalStore(e,t,n)};ze.useTransition=function(){return ln.current.useTransition()};ze.version="18.3.1";jw.exports=ze;var T=jw.exports;const te=Rh(T),SN=oN({__proto__:null,default:te},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _N=T,jN=Symbol.for("react.element"),kN=Symbol.for("react.fragment"),CN=Object.prototype.hasOwnProperty,EN=_N.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,PN={key:!0,ref:!0,__self:!0,__source:!0};function Iw(e,t,n){var r,i={},s=null,l=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)CN.call(t,r)&&!PN.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:jN,type:e,key:s,ref:l,props:i,_owner:EN.current}}Ah.Fragment=kN;Ah.jsx=Iw;Ah.jsxs=Iw;_w.exports=Ah;var a=_w.exports,Pm={},Fw={exports:{}},An={},zw={exports:{}},Lw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(K,H){var W=K.length;K.push(H);e:for(;0<W;){var z=W-1>>>1,V=K[z];if(0<i(V,H))K[z]=H,K[W]=V,W=z;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var H=K[0],W=K.pop();if(W!==H){K[0]=W;e:for(var z=0,V=K.length,J=V>>>1;z<J;){var ee=2*(z+1)-1,ae=K[ee],fe=ee+1,Y=K[fe];if(0>i(ae,W))fe<V&&0>i(Y,ae)?(K[z]=Y,K[fe]=W,z=fe):(K[z]=ae,K[ee]=W,z=ee);else if(fe<V&&0>i(Y,W))K[z]=Y,K[fe]=W,z=fe;else break e}}return H}function i(K,H){var W=K.sortIndex-H.sortIndex;return W!==0?W:K.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var l=Date,d=l.now();e.unstable_now=function(){return l.now()-d}}var u=[],h=[],p=1,m=null,x=3,y=!1,S=!1,N=!1,k=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(K){for(var H=n(h);H!==null;){if(H.callback===null)r(h);else if(H.startTime<=K)r(h),H.sortIndex=H.expirationTime,t(u,H);else break;H=n(h)}}function _(K){if(N=!1,v(K),!S)if(n(u)!==null)S=!0,B(E);else{var H=n(h);H!==null&&Q(_,H.startTime-K)}}function E(K,H){S=!1,N&&(N=!1,w(M),M=-1),y=!0;var W=x;try{for(v(H),m=n(u);m!==null&&(!(m.expirationTime>H)||K&&!L());){var z=m.callback;if(typeof z=="function"){m.callback=null,x=m.priorityLevel;var V=z(m.expirationTime<=H);H=e.unstable_now(),typeof V=="function"?m.callback=V:m===n(u)&&r(u),v(H)}else r(u);m=n(u)}if(m!==null)var J=!0;else{var ee=n(h);ee!==null&&Q(_,ee.startTime-H),J=!1}return J}finally{m=null,x=W,y=!1}}var A=!1,D=null,M=-1,I=5,P=-1;function L(){return!(e.unstable_now()-P<I)}function F(){if(D!==null){var K=e.unstable_now();P=K;var H=!0;try{H=D(!0,K)}finally{H?G():(A=!1,D=null)}}else A=!1}var G;if(typeof j=="function")G=function(){j(F)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,$=R.port2;R.port1.onmessage=F,G=function(){$.postMessage(null)}}else G=function(){k(F,0)};function B(K){D=K,A||(A=!0,G())}function Q(K,H){M=k(function(){K(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){S||y||(S=!0,B(E))},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(K){switch(x){case 1:case 2:case 3:var H=3;break;default:H=x}var W=x;x=H;try{return K()}finally{x=W}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,H){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var W=x;x=K;try{return H()}finally{x=W}},e.unstable_scheduleCallback=function(K,H,W){var z=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?z+W:z):W=z,K){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=W+V,K={id:p++,callback:H,priorityLevel:K,startTime:W,expirationTime:V,sortIndex:-1},W>z?(K.sortIndex=W,t(h,K),n(u)===null&&K===n(h)&&(N?(w(M),M=-1):N=!0,Q(_,W-z))):(K.sortIndex=V,t(u,K),S||y||(S=!0,B(E))),K},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(K){var H=x;return function(){var W=x;x=H;try{return K.apply(this,arguments)}finally{x=W}}}})(Lw);zw.exports=Lw;var Bl=zw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TN=T,Mn=Bl;function le(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Dw=new Set,Jl={};function oa(e,t){po(e,t),po(e+"Capture",t)}function po(e,t){for(Jl[e]=t,e=0;e<t.length;e++)Dw.add(t[e])}var ui=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tm=Object.prototype.hasOwnProperty,MN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yv={},vv={};function RN(e){return Tm.call(vv,e)?!0:Tm.call(yv,e)?!1:MN.test(e)?vv[e]=!0:(yv[e]=!0,!1)}function AN(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function IN(e,t,n,r){if(t===null||typeof t>"u"||AN(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function cn(e,t,n,r,i,s,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=l}var Vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Vt[e]=new cn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Vt[t]=new cn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Vt[e]=new cn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Vt[e]=new cn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Vt[e]=new cn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Vt[e]=new cn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Vt[e]=new cn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Vt[e]=new cn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Vt[e]=new cn(e,5,!1,e.toLowerCase(),null,!1,!1)});var ix=/[\-:]([a-z])/g;function sx(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ix,sx);Vt[t]=new cn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ix,sx);Vt[t]=new cn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ix,sx);Vt[t]=new cn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Vt[e]=new cn(e,1,!1,e.toLowerCase(),null,!1,!1)});Vt.xlinkHref=new cn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Vt[e]=new cn(e,1,!1,e.toLowerCase(),null,!0,!0)});function ax(e,t,n,r){var i=Vt.hasOwnProperty(t)?Vt[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(IN(t,n,i,r)&&(n=null),r||i===null?RN(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var xi=TN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Kd=Symbol.for("react.element"),Ba=Symbol.for("react.portal"),Va=Symbol.for("react.fragment"),ox=Symbol.for("react.strict_mode"),Mm=Symbol.for("react.profiler"),Ow=Symbol.for("react.provider"),Uw=Symbol.for("react.context"),lx=Symbol.for("react.forward_ref"),Rm=Symbol.for("react.suspense"),Am=Symbol.for("react.suspense_list"),cx=Symbol.for("react.memo"),Vi=Symbol.for("react.lazy"),$w=Symbol.for("react.offscreen"),bv=Symbol.iterator;function fl(e){return e===null||typeof e!="object"?null:(e=bv&&e[bv]||e["@@iterator"],typeof e=="function"?e:null)}var ht=Object.assign,k0;function Fl(e){if(k0===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);k0=t&&t[1]||""}return`
`+k0+e}var C0=!1;function E0(e,t){if(!e||C0)return"";C0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var r=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){r=h}e.call(t.prototype)}else{try{throw Error()}catch(h){r=h}e()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),l=i.length-1,d=s.length-1;1<=l&&0<=d&&i[l]!==s[d];)d--;for(;1<=l&&0<=d;l--,d--)if(i[l]!==s[d]){if(l!==1||d!==1)do if(l--,d--,0>d||i[l]!==s[d]){var u=`
`+i[l].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=l&&0<=d);break}}}finally{C0=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Fl(e):""}function FN(e){switch(e.tag){case 5:return Fl(e.type);case 16:return Fl("Lazy");case 13:return Fl("Suspense");case 19:return Fl("SuspenseList");case 0:case 2:case 15:return e=E0(e.type,!1),e;case 11:return e=E0(e.type.render,!1),e;case 1:return e=E0(e.type,!0),e;default:return""}}function Im(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Va:return"Fragment";case Ba:return"Portal";case Mm:return"Profiler";case ox:return"StrictMode";case Rm:return"Suspense";case Am:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Uw:return(e.displayName||"Context")+".Consumer";case Ow:return(e._context.displayName||"Context")+".Provider";case lx:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case cx:return t=e.displayName||null,t!==null?t:Im(e.type)||"Memo";case Vi:t=e._payload,e=e._init;try{return Im(e(t))}catch{}}return null}function zN(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Im(t);case 8:return t===ox?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function us(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Gw(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function LN(e){var t=Gw(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,s.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Xd(e){e._valueTracker||(e._valueTracker=LN(e))}function Bw(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Gw(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Vu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Fm(e,t){var n=t.checked;return ht({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function wv(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=us(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Vw(e,t){t=t.checked,t!=null&&ax(e,"checked",t,!1)}function zm(e,t){Vw(e,t);var n=us(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Lm(e,t.type,n):t.hasOwnProperty("defaultValue")&&Lm(e,t.type,us(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Nv(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Lm(e,t,n){(t!=="number"||Vu(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var zl=Array.isArray;function no(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+us(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Dm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(le(91));return ht({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Sv(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(le(92));if(zl(n)){if(1<n.length)throw Error(le(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:us(n)}}function Hw(e,t){var n=us(t.value),r=us(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function _v(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ww(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Om(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ww(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Qd,Yw=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Qd=Qd||document.createElement("div"),Qd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Qd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ec(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Vl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},DN=["Webkit","ms","Moz","O"];Object.keys(Vl).forEach(function(e){DN.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Vl[t]=Vl[e]})});function Kw(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Vl.hasOwnProperty(e)&&Vl[e]?(""+t).trim():t+"px"}function Xw(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Kw(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var ON=ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Um(e,t){if(t){if(ON[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(le(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(le(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(le(61))}if(t.style!=null&&typeof t.style!="object")throw Error(le(62))}}function $m(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gm=null;function dx(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Bm=null,ro=null,io=null;function jv(e){if(e=Ac(e)){if(typeof Bm!="function")throw Error(le(280));var t=e.stateNode;t&&(t=Dh(t),Bm(e.stateNode,e.type,t))}}function Qw(e){ro?io?io.push(e):io=[e]:ro=e}function qw(){if(ro){var e=ro,t=io;if(io=ro=null,jv(e),t)for(e=0;e<t.length;e++)jv(t[e])}}function Zw(e,t){return e(t)}function Jw(){}var P0=!1;function e5(e,t,n){if(P0)return e(t,n);P0=!0;try{return Zw(e,t,n)}finally{P0=!1,(ro!==null||io!==null)&&(Jw(),qw())}}function tc(e,t){var n=e.stateNode;if(n===null)return null;var r=Dh(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(le(231,t,typeof n));return n}var Vm=!1;if(ui)try{var pl={};Object.defineProperty(pl,"passive",{get:function(){Vm=!0}}),window.addEventListener("test",pl,pl),window.removeEventListener("test",pl,pl)}catch{Vm=!1}function UN(e,t,n,r,i,s,l,d,u){var h=Array.prototype.slice.call(arguments,3);try{t.apply(n,h)}catch(p){this.onError(p)}}var Hl=!1,Hu=null,Wu=!1,Hm=null,$N={onError:function(e){Hl=!0,Hu=e}};function GN(e,t,n,r,i,s,l,d,u){Hl=!1,Hu=null,UN.apply($N,arguments)}function BN(e,t,n,r,i,s,l,d,u){if(GN.apply(this,arguments),Hl){if(Hl){var h=Hu;Hl=!1,Hu=null}else throw Error(le(198));Wu||(Wu=!0,Hm=h)}}function la(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function t5(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function kv(e){if(la(e)!==e)throw Error(le(188))}function VN(e){var t=e.alternate;if(!t){if(t=la(e),t===null)throw Error(le(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return kv(i),e;if(s===r)return kv(i),t;s=s.sibling}throw Error(le(188))}if(n.return!==r.return)n=i,r=s;else{for(var l=!1,d=i.child;d;){if(d===n){l=!0,n=i,r=s;break}if(d===r){l=!0,r=i,n=s;break}d=d.sibling}if(!l){for(d=s.child;d;){if(d===n){l=!0,n=s,r=i;break}if(d===r){l=!0,r=s,n=i;break}d=d.sibling}if(!l)throw Error(le(189))}}if(n.alternate!==r)throw Error(le(190))}if(n.tag!==3)throw Error(le(188));return n.stateNode.current===n?e:t}function n5(e){return e=VN(e),e!==null?r5(e):null}function r5(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=r5(e);if(t!==null)return t;e=e.sibling}return null}var i5=Mn.unstable_scheduleCallback,Cv=Mn.unstable_cancelCallback,HN=Mn.unstable_shouldYield,WN=Mn.unstable_requestPaint,wt=Mn.unstable_now,YN=Mn.unstable_getCurrentPriorityLevel,ux=Mn.unstable_ImmediatePriority,s5=Mn.unstable_UserBlockingPriority,Yu=Mn.unstable_NormalPriority,KN=Mn.unstable_LowPriority,a5=Mn.unstable_IdlePriority,Ih=null,Fr=null;function XN(e){if(Fr&&typeof Fr.onCommitFiberRoot=="function")try{Fr.onCommitFiberRoot(Ih,e,void 0,(e.current.flags&128)===128)}catch{}}var fr=Math.clz32?Math.clz32:ZN,QN=Math.log,qN=Math.LN2;function ZN(e){return e>>>=0,e===0?32:31-(QN(e)/qN|0)|0}var qd=64,Zd=4194304;function Ll(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ku(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,l=n&268435455;if(l!==0){var d=l&~i;d!==0?r=Ll(d):(s&=l,s!==0&&(r=Ll(s)))}else l=n&~i,l!==0?r=Ll(l):s!==0&&(r=Ll(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-fr(t),i=1<<n,r|=e[n],t&=~i;return r}function JN(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eS(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var l=31-fr(s),d=1<<l,u=i[l];u===-1?(!(d&n)||d&r)&&(i[l]=JN(d,t)):u<=t&&(e.expiredLanes|=d),s&=~d}}function Wm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function o5(){var e=qd;return qd<<=1,!(qd&4194240)&&(qd=64),e}function T0(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Mc(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-fr(t),e[t]=n}function tS(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-fr(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function hx(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-fr(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var We=0;function l5(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var c5,fx,d5,u5,h5,Ym=!1,Jd=[],es=null,ts=null,ns=null,nc=new Map,rc=new Map,Ki=[],nS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ev(e,t){switch(e){case"focusin":case"focusout":es=null;break;case"dragenter":case"dragleave":ts=null;break;case"mouseover":case"mouseout":ns=null;break;case"pointerover":case"pointerout":nc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":rc.delete(t.pointerId)}}function ml(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Ac(t),t!==null&&fx(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function rS(e,t,n,r,i){switch(t){case"focusin":return es=ml(es,e,t,n,r,i),!0;case"dragenter":return ts=ml(ts,e,t,n,r,i),!0;case"mouseover":return ns=ml(ns,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return nc.set(s,ml(nc.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,rc.set(s,ml(rc.get(s)||null,e,t,n,r,i)),!0}return!1}function f5(e){var t=Vs(e.target);if(t!==null){var n=la(t);if(n!==null){if(t=n.tag,t===13){if(t=t5(n),t!==null){e.blockedOn=t,h5(e.priority,function(){d5(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Eu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Km(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Gm=r,n.target.dispatchEvent(r),Gm=null}else return t=Ac(n),t!==null&&fx(t),e.blockedOn=n,!1;t.shift()}return!0}function Pv(e,t,n){Eu(e)&&n.delete(t)}function iS(){Ym=!1,es!==null&&Eu(es)&&(es=null),ts!==null&&Eu(ts)&&(ts=null),ns!==null&&Eu(ns)&&(ns=null),nc.forEach(Pv),rc.forEach(Pv)}function gl(e,t){e.blockedOn===t&&(e.blockedOn=null,Ym||(Ym=!0,Mn.unstable_scheduleCallback(Mn.unstable_NormalPriority,iS)))}function ic(e){function t(i){return gl(i,e)}if(0<Jd.length){gl(Jd[0],e);for(var n=1;n<Jd.length;n++){var r=Jd[n];r.blockedOn===e&&(r.blockedOn=null)}}for(es!==null&&gl(es,e),ts!==null&&gl(ts,e),ns!==null&&gl(ns,e),nc.forEach(t),rc.forEach(t),n=0;n<Ki.length;n++)r=Ki[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ki.length&&(n=Ki[0],n.blockedOn===null);)f5(n),n.blockedOn===null&&Ki.shift()}var so=xi.ReactCurrentBatchConfig,Xu=!0;function sS(e,t,n,r){var i=We,s=so.transition;so.transition=null;try{We=1,px(e,t,n,r)}finally{We=i,so.transition=s}}function aS(e,t,n,r){var i=We,s=so.transition;so.transition=null;try{We=4,px(e,t,n,r)}finally{We=i,so.transition=s}}function px(e,t,n,r){if(Xu){var i=Km(e,t,n,r);if(i===null)U0(e,t,r,Qu,n),Ev(e,r);else if(rS(i,e,t,n,r))r.stopPropagation();else if(Ev(e,r),t&4&&-1<nS.indexOf(e)){for(;i!==null;){var s=Ac(i);if(s!==null&&c5(s),s=Km(e,t,n,r),s===null&&U0(e,t,r,Qu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else U0(e,t,r,null,n)}}var Qu=null;function Km(e,t,n,r){if(Qu=null,e=dx(r),e=Vs(e),e!==null)if(t=la(e),t===null)e=null;else if(n=t.tag,n===13){if(e=t5(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qu=e,null}function p5(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(YN()){case ux:return 1;case s5:return 4;case Yu:case KN:return 16;case a5:return 536870912;default:return 16}default:return 16}}var qi=null,mx=null,Pu=null;function m5(){if(Pu)return Pu;var e,t=mx,n=t.length,r,i="value"in qi?qi.value:qi.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===i[s-r];r++);return Pu=i.slice(e,1<r?1-r:void 0)}function Tu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function eu(){return!0}function Tv(){return!1}function In(e){function t(n,r,i,s,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=l,this.currentTarget=null;for(var d in e)e.hasOwnProperty(d)&&(n=e[d],this[d]=n?n(s):s[d]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?eu:Tv,this.isPropagationStopped=Tv,this}return ht(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=eu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=eu)},persist:function(){},isPersistent:eu}),t}var To={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gx=In(To),Rc=ht({},To,{view:0,detail:0}),oS=In(Rc),M0,R0,xl,Fh=ht({},Rc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xx,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xl&&(xl&&e.type==="mousemove"?(M0=e.screenX-xl.screenX,R0=e.screenY-xl.screenY):R0=M0=0,xl=e),M0)},movementY:function(e){return"movementY"in e?e.movementY:R0}}),Mv=In(Fh),lS=ht({},Fh,{dataTransfer:0}),cS=In(lS),dS=ht({},Rc,{relatedTarget:0}),A0=In(dS),uS=ht({},To,{animationName:0,elapsedTime:0,pseudoElement:0}),hS=In(uS),fS=ht({},To,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),pS=In(fS),mS=ht({},To,{data:0}),Rv=In(mS),gS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vS(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=yS[e])?!!t[e]:!1}function xx(){return vS}var bS=ht({},Rc,{key:function(e){if(e.key){var t=gS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Tu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?xS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xx,charCode:function(e){return e.type==="keypress"?Tu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Tu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),wS=In(bS),NS=ht({},Fh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Av=In(NS),SS=ht({},Rc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xx}),_S=In(SS),jS=ht({},To,{propertyName:0,elapsedTime:0,pseudoElement:0}),kS=In(jS),CS=ht({},Fh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ES=In(CS),PS=[9,13,27,32],yx=ui&&"CompositionEvent"in window,Wl=null;ui&&"documentMode"in document&&(Wl=document.documentMode);var TS=ui&&"TextEvent"in window&&!Wl,g5=ui&&(!yx||Wl&&8<Wl&&11>=Wl),Iv=String.fromCharCode(32),Fv=!1;function x5(e,t){switch(e){case"keyup":return PS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function y5(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ha=!1;function MS(e,t){switch(e){case"compositionend":return y5(t);case"keypress":return t.which!==32?null:(Fv=!0,Iv);case"textInput":return e=t.data,e===Iv&&Fv?null:e;default:return null}}function RS(e,t){if(Ha)return e==="compositionend"||!yx&&x5(e,t)?(e=m5(),Pu=mx=qi=null,Ha=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return g5&&t.locale!=="ko"?null:t.data;default:return null}}var AS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!AS[e.type]:t==="textarea"}function v5(e,t,n,r){Qw(r),t=qu(t,"onChange"),0<t.length&&(n=new gx("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yl=null,sc=null;function IS(e){T5(e,0)}function zh(e){var t=Ka(e);if(Bw(t))return e}function FS(e,t){if(e==="change")return t}var b5=!1;if(ui){var I0;if(ui){var F0="oninput"in document;if(!F0){var Lv=document.createElement("div");Lv.setAttribute("oninput","return;"),F0=typeof Lv.oninput=="function"}I0=F0}else I0=!1;b5=I0&&(!document.documentMode||9<document.documentMode)}function Dv(){Yl&&(Yl.detachEvent("onpropertychange",w5),sc=Yl=null)}function w5(e){if(e.propertyName==="value"&&zh(sc)){var t=[];v5(t,sc,e,dx(e)),e5(IS,t)}}function zS(e,t,n){e==="focusin"?(Dv(),Yl=t,sc=n,Yl.attachEvent("onpropertychange",w5)):e==="focusout"&&Dv()}function LS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return zh(sc)}function DS(e,t){if(e==="click")return zh(t)}function OS(e,t){if(e==="input"||e==="change")return zh(t)}function US(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xr=typeof Object.is=="function"?Object.is:US;function ac(e,t){if(xr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Tm.call(t,i)||!xr(e[i],t[i]))return!1}return!0}function Ov(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Uv(e,t){var n=Ov(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ov(n)}}function N5(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?N5(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function S5(){for(var e=window,t=Vu();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Vu(e.document)}return t}function vx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function $S(e){var t=S5(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&N5(n.ownerDocument.documentElement,n)){if(r!==null&&vx(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Uv(n,s);var l=Uv(n,r);i&&l&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var GS=ui&&"documentMode"in document&&11>=document.documentMode,Wa=null,Xm=null,Kl=null,Qm=!1;function $v(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qm||Wa==null||Wa!==Vu(r)||(r=Wa,"selectionStart"in r&&vx(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Kl&&ac(Kl,r)||(Kl=r,r=qu(Xm,"onSelect"),0<r.length&&(t=new gx("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Wa)))}function tu(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ya={animationend:tu("Animation","AnimationEnd"),animationiteration:tu("Animation","AnimationIteration"),animationstart:tu("Animation","AnimationStart"),transitionend:tu("Transition","TransitionEnd")},z0={},_5={};ui&&(_5=document.createElement("div").style,"AnimationEvent"in window||(delete Ya.animationend.animation,delete Ya.animationiteration.animation,delete Ya.animationstart.animation),"TransitionEvent"in window||delete Ya.transitionend.transition);function Lh(e){if(z0[e])return z0[e];if(!Ya[e])return e;var t=Ya[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in _5)return z0[e]=t[n];return e}var j5=Lh("animationend"),k5=Lh("animationiteration"),C5=Lh("animationstart"),E5=Lh("transitionend"),P5=new Map,Gv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ps(e,t){P5.set(e,t),oa(t,[e])}for(var L0=0;L0<Gv.length;L0++){var D0=Gv[L0],BS=D0.toLowerCase(),VS=D0[0].toUpperCase()+D0.slice(1);ps(BS,"on"+VS)}ps(j5,"onAnimationEnd");ps(k5,"onAnimationIteration");ps(C5,"onAnimationStart");ps("dblclick","onDoubleClick");ps("focusin","onFocus");ps("focusout","onBlur");ps(E5,"onTransitionEnd");po("onMouseEnter",["mouseout","mouseover"]);po("onMouseLeave",["mouseout","mouseover"]);po("onPointerEnter",["pointerout","pointerover"]);po("onPointerLeave",["pointerout","pointerover"]);oa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));oa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));oa("onBeforeInput",["compositionend","keypress","textInput","paste"]);oa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));oa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));oa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dl));function Bv(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,BN(r,t,void 0,e),e.currentTarget=null}function T5(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var l=r.length-1;0<=l;l--){var d=r[l],u=d.instance,h=d.currentTarget;if(d=d.listener,u!==s&&i.isPropagationStopped())break e;Bv(i,d,h),s=u}else for(l=0;l<r.length;l++){if(d=r[l],u=d.instance,h=d.currentTarget,d=d.listener,u!==s&&i.isPropagationStopped())break e;Bv(i,d,h),s=u}}}if(Wu)throw e=Hm,Wu=!1,Hm=null,e}function tt(e,t){var n=t[tg];n===void 0&&(n=t[tg]=new Set);var r=e+"__bubble";n.has(r)||(M5(t,e,2,!1),n.add(r))}function O0(e,t,n){var r=0;t&&(r|=4),M5(n,e,r,t)}var nu="_reactListening"+Math.random().toString(36).slice(2);function oc(e){if(!e[nu]){e[nu]=!0,Dw.forEach(function(n){n!=="selectionchange"&&(HS.has(n)||O0(n,!1,e),O0(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[nu]||(t[nu]=!0,O0("selectionchange",!1,t))}}function M5(e,t,n,r){switch(p5(t)){case 1:var i=sS;break;case 4:i=aS;break;default:i=px}n=i.bind(null,t,n,e),i=void 0,!Vm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function U0(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var d=r.stateNode.containerInfo;if(d===i||d.nodeType===8&&d.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var u=l.tag;if((u===3||u===4)&&(u=l.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;l=l.return}for(;d!==null;){if(l=Vs(d),l===null)return;if(u=l.tag,u===5||u===6){r=s=l;continue e}d=d.parentNode}}r=r.return}e5(function(){var h=s,p=dx(n),m=[];e:{var x=P5.get(e);if(x!==void 0){var y=gx,S=e;switch(e){case"keypress":if(Tu(n)===0)break e;case"keydown":case"keyup":y=wS;break;case"focusin":S="focus",y=A0;break;case"focusout":S="blur",y=A0;break;case"beforeblur":case"afterblur":y=A0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Mv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=cS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=_S;break;case j5:case k5:case C5:y=hS;break;case E5:y=kS;break;case"scroll":y=oS;break;case"wheel":y=ES;break;case"copy":case"cut":case"paste":y=pS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Av}var N=(t&4)!==0,k=!N&&e==="scroll",w=N?x!==null?x+"Capture":null:x;N=[];for(var j=h,v;j!==null;){v=j;var _=v.stateNode;if(v.tag===5&&_!==null&&(v=_,w!==null&&(_=tc(j,w),_!=null&&N.push(lc(j,_,v)))),k)break;j=j.return}0<N.length&&(x=new y(x,S,null,n,p),m.push({event:x,listeners:N}))}}if(!(t&7)){e:{if(x=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",x&&n!==Gm&&(S=n.relatedTarget||n.fromElement)&&(Vs(S)||S[hi]))break e;if((y||x)&&(x=p.window===p?p:(x=p.ownerDocument)?x.defaultView||x.parentWindow:window,y?(S=n.relatedTarget||n.toElement,y=h,S=S?Vs(S):null,S!==null&&(k=la(S),S!==k||S.tag!==5&&S.tag!==6)&&(S=null)):(y=null,S=h),y!==S)){if(N=Mv,_="onMouseLeave",w="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(N=Av,_="onPointerLeave",w="onPointerEnter",j="pointer"),k=y==null?x:Ka(y),v=S==null?x:Ka(S),x=new N(_,j+"leave",y,n,p),x.target=k,x.relatedTarget=v,_=null,Vs(p)===h&&(N=new N(w,j+"enter",S,n,p),N.target=v,N.relatedTarget=k,_=N),k=_,y&&S)t:{for(N=y,w=S,j=0,v=N;v;v=Ia(v))j++;for(v=0,_=w;_;_=Ia(_))v++;for(;0<j-v;)N=Ia(N),j--;for(;0<v-j;)w=Ia(w),v--;for(;j--;){if(N===w||w!==null&&N===w.alternate)break t;N=Ia(N),w=Ia(w)}N=null}else N=null;y!==null&&Vv(m,x,y,N,!1),S!==null&&k!==null&&Vv(m,k,S,N,!0)}}e:{if(x=h?Ka(h):window,y=x.nodeName&&x.nodeName.toLowerCase(),y==="select"||y==="input"&&x.type==="file")var E=FS;else if(zv(x))if(b5)E=OS;else{E=LS;var A=zS}else(y=x.nodeName)&&y.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(E=DS);if(E&&(E=E(e,h))){v5(m,E,n,p);break e}A&&A(e,x,h),e==="focusout"&&(A=x._wrapperState)&&A.controlled&&x.type==="number"&&Lm(x,"number",x.value)}switch(A=h?Ka(h):window,e){case"focusin":(zv(A)||A.contentEditable==="true")&&(Wa=A,Xm=h,Kl=null);break;case"focusout":Kl=Xm=Wa=null;break;case"mousedown":Qm=!0;break;case"contextmenu":case"mouseup":case"dragend":Qm=!1,$v(m,n,p);break;case"selectionchange":if(GS)break;case"keydown":case"keyup":$v(m,n,p)}var D;if(yx)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else Ha?x5(e,n)&&(M="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(g5&&n.locale!=="ko"&&(Ha||M!=="onCompositionStart"?M==="onCompositionEnd"&&Ha&&(D=m5()):(qi=p,mx="value"in qi?qi.value:qi.textContent,Ha=!0)),A=qu(h,M),0<A.length&&(M=new Rv(M,e,null,n,p),m.push({event:M,listeners:A}),D?M.data=D:(D=y5(n),D!==null&&(M.data=D)))),(D=TS?MS(e,n):RS(e,n))&&(h=qu(h,"onBeforeInput"),0<h.length&&(p=new Rv("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:h}),p.data=D))}T5(m,t)})}function lc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qu(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=tc(e,n),s!=null&&r.unshift(lc(e,s,i)),s=tc(e,t),s!=null&&r.push(lc(e,s,i))),e=e.return}return r}function Ia(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Vv(e,t,n,r,i){for(var s=t._reactName,l=[];n!==null&&n!==r;){var d=n,u=d.alternate,h=d.stateNode;if(u!==null&&u===r)break;d.tag===5&&h!==null&&(d=h,i?(u=tc(n,s),u!=null&&l.unshift(lc(n,u,d))):i||(u=tc(n,s),u!=null&&l.push(lc(n,u,d)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var WS=/\r\n?/g,YS=/\u0000|\uFFFD/g;function Hv(e){return(typeof e=="string"?e:""+e).replace(WS,`
`).replace(YS,"")}function ru(e,t,n){if(t=Hv(t),Hv(e)!==t&&n)throw Error(le(425))}function Zu(){}var qm=null,Zm=null;function Jm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var eg=typeof setTimeout=="function"?setTimeout:void 0,KS=typeof clearTimeout=="function"?clearTimeout:void 0,Wv=typeof Promise=="function"?Promise:void 0,XS=typeof queueMicrotask=="function"?queueMicrotask:typeof Wv<"u"?function(e){return Wv.resolve(null).then(e).catch(QS)}:eg;function QS(e){setTimeout(function(){throw e})}function $0(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),ic(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ic(t)}function rs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Yv(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Mo=Math.random().toString(36).slice(2),Ar="__reactFiber$"+Mo,cc="__reactProps$"+Mo,hi="__reactContainer$"+Mo,tg="__reactEvents$"+Mo,qS="__reactListeners$"+Mo,ZS="__reactHandles$"+Mo;function Vs(e){var t=e[Ar];if(t)return t;for(var n=e.parentNode;n;){if(t=n[hi]||n[Ar]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Yv(e);e!==null;){if(n=e[Ar])return n;e=Yv(e)}return t}e=n,n=e.parentNode}return null}function Ac(e){return e=e[Ar]||e[hi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ka(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(le(33))}function Dh(e){return e[cc]||null}var ng=[],Xa=-1;function ms(e){return{current:e}}function nt(e){0>Xa||(e.current=ng[Xa],ng[Xa]=null,Xa--)}function Ze(e,t){Xa++,ng[Xa]=e.current,e.current=t}var hs={},Jt=ms(hs),bn=ms(!1),Js=hs;function mo(e,t){var n=e.type.contextTypes;if(!n)return hs;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function wn(e){return e=e.childContextTypes,e!=null}function Ju(){nt(bn),nt(Jt)}function Kv(e,t,n){if(Jt.current!==hs)throw Error(le(168));Ze(Jt,t),Ze(bn,n)}function R5(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(le(108,zN(e)||"Unknown",i));return ht({},n,r)}function eh(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hs,Js=Jt.current,Ze(Jt,e),Ze(bn,bn.current),!0}function Xv(e,t,n){var r=e.stateNode;if(!r)throw Error(le(169));n?(e=R5(e,t,Js),r.__reactInternalMemoizedMergedChildContext=e,nt(bn),nt(Jt),Ze(Jt,e)):nt(bn),Ze(bn,n)}var si=null,Oh=!1,G0=!1;function A5(e){si===null?si=[e]:si.push(e)}function JS(e){Oh=!0,A5(e)}function gs(){if(!G0&&si!==null){G0=!0;var e=0,t=We;try{var n=si;for(We=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}si=null,Oh=!1}catch(i){throw si!==null&&(si=si.slice(e+1)),i5(ux,gs),i}finally{We=t,G0=!1}}return null}var Qa=[],qa=0,th=null,nh=0,Wn=[],Yn=0,ea=null,ai=1,oi="";function $s(e,t){Qa[qa++]=nh,Qa[qa++]=th,th=e,nh=t}function I5(e,t,n){Wn[Yn++]=ai,Wn[Yn++]=oi,Wn[Yn++]=ea,ea=e;var r=ai;e=oi;var i=32-fr(r)-1;r&=~(1<<i),n+=1;var s=32-fr(t)+i;if(30<s){var l=i-i%5;s=(r&(1<<l)-1).toString(32),r>>=l,i-=l,ai=1<<32-fr(t)+i|n<<i|r,oi=s+e}else ai=1<<s|n<<i|r,oi=e}function bx(e){e.return!==null&&($s(e,1),I5(e,1,0))}function wx(e){for(;e===th;)th=Qa[--qa],Qa[qa]=null,nh=Qa[--qa],Qa[qa]=null;for(;e===ea;)ea=Wn[--Yn],Wn[Yn]=null,oi=Wn[--Yn],Wn[Yn]=null,ai=Wn[--Yn],Wn[Yn]=null}var Tn=null,Pn=null,at=!1,dr=null;function F5(e,t){var n=Kn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Qv(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Tn=e,Pn=rs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Tn=e,Pn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ea!==null?{id:ai,overflow:oi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Kn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Tn=e,Pn=null,!0):!1;default:return!1}}function rg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ig(e){if(at){var t=Pn;if(t){var n=t;if(!Qv(e,t)){if(rg(e))throw Error(le(418));t=rs(n.nextSibling);var r=Tn;t&&Qv(e,t)?F5(r,n):(e.flags=e.flags&-4097|2,at=!1,Tn=e)}}else{if(rg(e))throw Error(le(418));e.flags=e.flags&-4097|2,at=!1,Tn=e}}}function qv(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Tn=e}function iu(e){if(e!==Tn)return!1;if(!at)return qv(e),at=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Jm(e.type,e.memoizedProps)),t&&(t=Pn)){if(rg(e))throw z5(),Error(le(418));for(;t;)F5(e,t),t=rs(t.nextSibling)}if(qv(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(le(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Pn=rs(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Pn=null}}else Pn=Tn?rs(e.stateNode.nextSibling):null;return!0}function z5(){for(var e=Pn;e;)e=rs(e.nextSibling)}function go(){Pn=Tn=null,at=!1}function Nx(e){dr===null?dr=[e]:dr.push(e)}var e9=xi.ReactCurrentBatchConfig;function yl(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(le(309));var r=n.stateNode}if(!r)throw Error(le(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(l){var d=i.refs;l===null?delete d[s]:d[s]=l},t._stringRef=s,t)}if(typeof e!="string")throw Error(le(284));if(!n._owner)throw Error(le(290,e))}return e}function su(e,t){throw e=Object.prototype.toString.call(t),Error(le(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Zv(e){var t=e._init;return t(e._payload)}function L5(e){function t(w,j){if(e){var v=w.deletions;v===null?(w.deletions=[j],w.flags|=16):v.push(j)}}function n(w,j){if(!e)return null;for(;j!==null;)t(w,j),j=j.sibling;return null}function r(w,j){for(w=new Map;j!==null;)j.key!==null?w.set(j.key,j):w.set(j.index,j),j=j.sibling;return w}function i(w,j){return w=os(w,j),w.index=0,w.sibling=null,w}function s(w,j,v){return w.index=v,e?(v=w.alternate,v!==null?(v=v.index,v<j?(w.flags|=2,j):v):(w.flags|=2,j)):(w.flags|=1048576,j)}function l(w){return e&&w.alternate===null&&(w.flags|=2),w}function d(w,j,v,_){return j===null||j.tag!==6?(j=X0(v,w.mode,_),j.return=w,j):(j=i(j,v),j.return=w,j)}function u(w,j,v,_){var E=v.type;return E===Va?p(w,j,v.props.children,_,v.key):j!==null&&(j.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Vi&&Zv(E)===j.type)?(_=i(j,v.props),_.ref=yl(w,j,v),_.return=w,_):(_=Lu(v.type,v.key,v.props,null,w.mode,_),_.ref=yl(w,j,v),_.return=w,_)}function h(w,j,v,_){return j===null||j.tag!==4||j.stateNode.containerInfo!==v.containerInfo||j.stateNode.implementation!==v.implementation?(j=Q0(v,w.mode,_),j.return=w,j):(j=i(j,v.children||[]),j.return=w,j)}function p(w,j,v,_,E){return j===null||j.tag!==7?(j=qs(v,w.mode,_,E),j.return=w,j):(j=i(j,v),j.return=w,j)}function m(w,j,v){if(typeof j=="string"&&j!==""||typeof j=="number")return j=X0(""+j,w.mode,v),j.return=w,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Kd:return v=Lu(j.type,j.key,j.props,null,w.mode,v),v.ref=yl(w,null,j),v.return=w,v;case Ba:return j=Q0(j,w.mode,v),j.return=w,j;case Vi:var _=j._init;return m(w,_(j._payload),v)}if(zl(j)||fl(j))return j=qs(j,w.mode,v,null),j.return=w,j;su(w,j)}return null}function x(w,j,v,_){var E=j!==null?j.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return E!==null?null:d(w,j,""+v,_);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Kd:return v.key===E?u(w,j,v,_):null;case Ba:return v.key===E?h(w,j,v,_):null;case Vi:return E=v._init,x(w,j,E(v._payload),_)}if(zl(v)||fl(v))return E!==null?null:p(w,j,v,_,null);su(w,v)}return null}function y(w,j,v,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return w=w.get(v)||null,d(j,w,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Kd:return w=w.get(_.key===null?v:_.key)||null,u(j,w,_,E);case Ba:return w=w.get(_.key===null?v:_.key)||null,h(j,w,_,E);case Vi:var A=_._init;return y(w,j,v,A(_._payload),E)}if(zl(_)||fl(_))return w=w.get(v)||null,p(j,w,_,E,null);su(j,_)}return null}function S(w,j,v,_){for(var E=null,A=null,D=j,M=j=0,I=null;D!==null&&M<v.length;M++){D.index>M?(I=D,D=null):I=D.sibling;var P=x(w,D,v[M],_);if(P===null){D===null&&(D=I);break}e&&D&&P.alternate===null&&t(w,D),j=s(P,j,M),A===null?E=P:A.sibling=P,A=P,D=I}if(M===v.length)return n(w,D),at&&$s(w,M),E;if(D===null){for(;M<v.length;M++)D=m(w,v[M],_),D!==null&&(j=s(D,j,M),A===null?E=D:A.sibling=D,A=D);return at&&$s(w,M),E}for(D=r(w,D);M<v.length;M++)I=y(D,w,M,v[M],_),I!==null&&(e&&I.alternate!==null&&D.delete(I.key===null?M:I.key),j=s(I,j,M),A===null?E=I:A.sibling=I,A=I);return e&&D.forEach(function(L){return t(w,L)}),at&&$s(w,M),E}function N(w,j,v,_){var E=fl(v);if(typeof E!="function")throw Error(le(150));if(v=E.call(v),v==null)throw Error(le(151));for(var A=E=null,D=j,M=j=0,I=null,P=v.next();D!==null&&!P.done;M++,P=v.next()){D.index>M?(I=D,D=null):I=D.sibling;var L=x(w,D,P.value,_);if(L===null){D===null&&(D=I);break}e&&D&&L.alternate===null&&t(w,D),j=s(L,j,M),A===null?E=L:A.sibling=L,A=L,D=I}if(P.done)return n(w,D),at&&$s(w,M),E;if(D===null){for(;!P.done;M++,P=v.next())P=m(w,P.value,_),P!==null&&(j=s(P,j,M),A===null?E=P:A.sibling=P,A=P);return at&&$s(w,M),E}for(D=r(w,D);!P.done;M++,P=v.next())P=y(D,w,M,P.value,_),P!==null&&(e&&P.alternate!==null&&D.delete(P.key===null?M:P.key),j=s(P,j,M),A===null?E=P:A.sibling=P,A=P);return e&&D.forEach(function(F){return t(w,F)}),at&&$s(w,M),E}function k(w,j,v,_){if(typeof v=="object"&&v!==null&&v.type===Va&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Kd:e:{for(var E=v.key,A=j;A!==null;){if(A.key===E){if(E=v.type,E===Va){if(A.tag===7){n(w,A.sibling),j=i(A,v.props.children),j.return=w,w=j;break e}}else if(A.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Vi&&Zv(E)===A.type){n(w,A.sibling),j=i(A,v.props),j.ref=yl(w,A,v),j.return=w,w=j;break e}n(w,A);break}else t(w,A);A=A.sibling}v.type===Va?(j=qs(v.props.children,w.mode,_,v.key),j.return=w,w=j):(_=Lu(v.type,v.key,v.props,null,w.mode,_),_.ref=yl(w,j,v),_.return=w,w=_)}return l(w);case Ba:e:{for(A=v.key;j!==null;){if(j.key===A)if(j.tag===4&&j.stateNode.containerInfo===v.containerInfo&&j.stateNode.implementation===v.implementation){n(w,j.sibling),j=i(j,v.children||[]),j.return=w,w=j;break e}else{n(w,j);break}else t(w,j);j=j.sibling}j=Q0(v,w.mode,_),j.return=w,w=j}return l(w);case Vi:return A=v._init,k(w,j,A(v._payload),_)}if(zl(v))return S(w,j,v,_);if(fl(v))return N(w,j,v,_);su(w,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,j!==null&&j.tag===6?(n(w,j.sibling),j=i(j,v),j.return=w,w=j):(n(w,j),j=X0(v,w.mode,_),j.return=w,w=j),l(w)):n(w,j)}return k}var xo=L5(!0),D5=L5(!1),rh=ms(null),ih=null,Za=null,Sx=null;function _x(){Sx=Za=ih=null}function jx(e){var t=rh.current;nt(rh),e._currentValue=t}function sg(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ao(e,t){ih=e,Sx=Za=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(yn=!0),e.firstContext=null)}function qn(e){var t=e._currentValue;if(Sx!==e)if(e={context:e,memoizedValue:t,next:null},Za===null){if(ih===null)throw Error(le(308));Za=e,ih.dependencies={lanes:0,firstContext:e}}else Za=Za.next=e;return t}var Hs=null;function kx(e){Hs===null?Hs=[e]:Hs.push(e)}function O5(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,kx(t)):(n.next=i.next,i.next=n),t.interleaved=n,fi(e,r)}function fi(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Hi=!1;function Cx(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function U5(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ci(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function is(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ue&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,fi(e,n)}return i=r.interleaved,i===null?(t.next=t,kx(r)):(t.next=i.next,i.next=t),r.interleaved=t,fi(e,n)}function Mu(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,hx(e,n)}}function Jv(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=l:s=s.next=l,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function sh(e,t,n,r){var i=e.updateQueue;Hi=!1;var s=i.firstBaseUpdate,l=i.lastBaseUpdate,d=i.shared.pending;if(d!==null){i.shared.pending=null;var u=d,h=u.next;u.next=null,l===null?s=h:l.next=h,l=u;var p=e.alternate;p!==null&&(p=p.updateQueue,d=p.lastBaseUpdate,d!==l&&(d===null?p.firstBaseUpdate=h:d.next=h,p.lastBaseUpdate=u))}if(s!==null){var m=i.baseState;l=0,p=h=u=null,d=s;do{var x=d.lane,y=d.eventTime;if((r&x)===x){p!==null&&(p=p.next={eventTime:y,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var S=e,N=d;switch(x=t,y=n,N.tag){case 1:if(S=N.payload,typeof S=="function"){m=S.call(y,m,x);break e}m=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=N.payload,x=typeof S=="function"?S.call(y,m,x):S,x==null)break e;m=ht({},m,x);break e;case 2:Hi=!0}}d.callback!==null&&d.lane!==0&&(e.flags|=64,x=i.effects,x===null?i.effects=[d]:x.push(d))}else y={eventTime:y,lane:x,tag:d.tag,payload:d.payload,callback:d.callback,next:null},p===null?(h=p=y,u=m):p=p.next=y,l|=x;if(d=d.next,d===null){if(d=i.shared.pending,d===null)break;x=d,d=x.next,x.next=null,i.lastBaseUpdate=x,i.shared.pending=null}}while(1);if(p===null&&(u=m),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=p,t=i.shared.interleaved,t!==null){i=t;do l|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);na|=l,e.lanes=l,e.memoizedState=m}}function e2(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(le(191,i));i.call(r)}}}var Ic={},zr=ms(Ic),dc=ms(Ic),uc=ms(Ic);function Ws(e){if(e===Ic)throw Error(le(174));return e}function Ex(e,t){switch(Ze(uc,t),Ze(dc,e),Ze(zr,Ic),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Om(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Om(t,e)}nt(zr),Ze(zr,t)}function yo(){nt(zr),nt(dc),nt(uc)}function $5(e){Ws(uc.current);var t=Ws(zr.current),n=Om(t,e.type);t!==n&&(Ze(dc,e),Ze(zr,n))}function Px(e){dc.current===e&&(nt(zr),nt(dc))}var dt=ms(0);function ah(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var B0=[];function Tx(){for(var e=0;e<B0.length;e++)B0[e]._workInProgressVersionPrimary=null;B0.length=0}var Ru=xi.ReactCurrentDispatcher,V0=xi.ReactCurrentBatchConfig,ta=0,ut=null,Et=null,Lt=null,oh=!1,Xl=!1,hc=0,t9=0;function Qt(){throw Error(le(321))}function Mx(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!xr(e[n],t[n]))return!1;return!0}function Rx(e,t,n,r,i,s){if(ta=s,ut=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ru.current=e===null||e.memoizedState===null?s9:a9,e=n(r,i),Xl){s=0;do{if(Xl=!1,hc=0,25<=s)throw Error(le(301));s+=1,Lt=Et=null,t.updateQueue=null,Ru.current=o9,e=n(r,i)}while(Xl)}if(Ru.current=lh,t=Et!==null&&Et.next!==null,ta=0,Lt=Et=ut=null,oh=!1,t)throw Error(le(300));return e}function Ax(){var e=hc!==0;return hc=0,e}function Mr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?ut.memoizedState=Lt=e:Lt=Lt.next=e,Lt}function Zn(){if(Et===null){var e=ut.alternate;e=e!==null?e.memoizedState:null}else e=Et.next;var t=Lt===null?ut.memoizedState:Lt.next;if(t!==null)Lt=t,Et=e;else{if(e===null)throw Error(le(310));Et=e,e={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},Lt===null?ut.memoizedState=Lt=e:Lt=Lt.next=e}return Lt}function fc(e,t){return typeof t=="function"?t(e):t}function H0(e){var t=Zn(),n=t.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=e;var r=Et,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var l=i.next;i.next=s.next,s.next=l}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var d=l=null,u=null,h=s;do{var p=h.lane;if((ta&p)===p)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:e(r,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(d=u=m,l=r):u=u.next=m,ut.lanes|=p,na|=p}h=h.next}while(h!==null&&h!==s);u===null?l=r:u.next=d,xr(r,t.memoizedState)||(yn=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,ut.lanes|=s,na|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function W0(e){var t=Zn(),n=t.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do s=e(s,l.action),l=l.next;while(l!==i);xr(s,t.memoizedState)||(yn=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function G5(){}function B5(e,t){var n=ut,r=Zn(),i=t(),s=!xr(r.memoizedState,i);if(s&&(r.memoizedState=i,yn=!0),r=r.queue,Ix(W5.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Lt!==null&&Lt.memoizedState.tag&1){if(n.flags|=2048,pc(9,H5.bind(null,n,r,i,t),void 0,null),Dt===null)throw Error(le(349));ta&30||V5(n,t,i)}return i}function V5(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ut.updateQueue,t===null?(t={lastEffect:null,stores:null},ut.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function H5(e,t,n,r){t.value=n,t.getSnapshot=r,Y5(t)&&K5(e)}function W5(e,t,n){return n(function(){Y5(t)&&K5(e)})}function Y5(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!xr(e,n)}catch{return!0}}function K5(e){var t=fi(e,1);t!==null&&pr(t,e,1,-1)}function t2(e){var t=Mr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fc,lastRenderedState:e},t.queue=e,e=e.dispatch=i9.bind(null,ut,e),[t.memoizedState,e]}function pc(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ut.updateQueue,t===null?(t={lastEffect:null,stores:null},ut.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function X5(){return Zn().memoizedState}function Au(e,t,n,r){var i=Mr();ut.flags|=e,i.memoizedState=pc(1|t,n,void 0,r===void 0?null:r)}function Uh(e,t,n,r){var i=Zn();r=r===void 0?null:r;var s=void 0;if(Et!==null){var l=Et.memoizedState;if(s=l.destroy,r!==null&&Mx(r,l.deps)){i.memoizedState=pc(t,n,s,r);return}}ut.flags|=e,i.memoizedState=pc(1|t,n,s,r)}function n2(e,t){return Au(8390656,8,e,t)}function Ix(e,t){return Uh(2048,8,e,t)}function Q5(e,t){return Uh(4,2,e,t)}function q5(e,t){return Uh(4,4,e,t)}function Z5(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function J5(e,t,n){return n=n!=null?n.concat([e]):null,Uh(4,4,Z5.bind(null,t,e),n)}function Fx(){}function e4(e,t){var n=Zn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Mx(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function t4(e,t){var n=Zn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Mx(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function n4(e,t,n){return ta&21?(xr(n,t)||(n=o5(),ut.lanes|=n,na|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,yn=!0),e.memoizedState=n)}function n9(e,t){var n=We;We=n!==0&&4>n?n:4,e(!0);var r=V0.transition;V0.transition={};try{e(!1),t()}finally{We=n,V0.transition=r}}function r4(){return Zn().memoizedState}function r9(e,t,n){var r=as(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},i4(e))s4(t,n);else if(n=O5(e,t,n,r),n!==null){var i=on();pr(n,e,r,i),a4(n,t,r)}}function i9(e,t,n){var r=as(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(i4(e))s4(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var l=t.lastRenderedState,d=s(l,n);if(i.hasEagerState=!0,i.eagerState=d,xr(d,l)){var u=t.interleaved;u===null?(i.next=i,kx(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=O5(e,t,i,r),n!==null&&(i=on(),pr(n,e,r,i),a4(n,t,r))}}function i4(e){var t=e.alternate;return e===ut||t!==null&&t===ut}function s4(e,t){Xl=oh=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function a4(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,hx(e,n)}}var lh={readContext:qn,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},s9={readContext:qn,useCallback:function(e,t){return Mr().memoizedState=[e,t===void 0?null:t],e},useContext:qn,useEffect:n2,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Au(4194308,4,Z5.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Au(4194308,4,e,t)},useInsertionEffect:function(e,t){return Au(4,2,e,t)},useMemo:function(e,t){var n=Mr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Mr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=r9.bind(null,ut,e),[r.memoizedState,e]},useRef:function(e){var t=Mr();return e={current:e},t.memoizedState=e},useState:t2,useDebugValue:Fx,useDeferredValue:function(e){return Mr().memoizedState=e},useTransition:function(){var e=t2(!1),t=e[0];return e=n9.bind(null,e[1]),Mr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ut,i=Mr();if(at){if(n===void 0)throw Error(le(407));n=n()}else{if(n=t(),Dt===null)throw Error(le(349));ta&30||V5(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,n2(W5.bind(null,r,s,e),[e]),r.flags|=2048,pc(9,H5.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Mr(),t=Dt.identifierPrefix;if(at){var n=oi,r=ai;n=(r&~(1<<32-fr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=hc++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=t9++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},a9={readContext:qn,useCallback:e4,useContext:qn,useEffect:Ix,useImperativeHandle:J5,useInsertionEffect:Q5,useLayoutEffect:q5,useMemo:t4,useReducer:H0,useRef:X5,useState:function(){return H0(fc)},useDebugValue:Fx,useDeferredValue:function(e){var t=Zn();return n4(t,Et.memoizedState,e)},useTransition:function(){var e=H0(fc)[0],t=Zn().memoizedState;return[e,t]},useMutableSource:G5,useSyncExternalStore:B5,useId:r4,unstable_isNewReconciler:!1},o9={readContext:qn,useCallback:e4,useContext:qn,useEffect:Ix,useImperativeHandle:J5,useInsertionEffect:Q5,useLayoutEffect:q5,useMemo:t4,useReducer:W0,useRef:X5,useState:function(){return W0(fc)},useDebugValue:Fx,useDeferredValue:function(e){var t=Zn();return Et===null?t.memoizedState=e:n4(t,Et.memoizedState,e)},useTransition:function(){var e=W0(fc)[0],t=Zn().memoizedState;return[e,t]},useMutableSource:G5,useSyncExternalStore:B5,useId:r4,unstable_isNewReconciler:!1};function lr(e,t){if(e&&e.defaultProps){t=ht({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ag(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ht({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var $h={isMounted:function(e){return(e=e._reactInternals)?la(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=on(),i=as(e),s=ci(r,i);s.payload=t,n!=null&&(s.callback=n),t=is(e,s,i),t!==null&&(pr(t,e,i,r),Mu(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=on(),i=as(e),s=ci(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=is(e,s,i),t!==null&&(pr(t,e,i,r),Mu(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=on(),r=as(e),i=ci(n,r);i.tag=2,t!=null&&(i.callback=t),t=is(e,i,r),t!==null&&(pr(t,e,r,n),Mu(t,e,r))}};function r2(e,t,n,r,i,s,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,l):t.prototype&&t.prototype.isPureReactComponent?!ac(n,r)||!ac(i,s):!0}function o4(e,t,n){var r=!1,i=hs,s=t.contextType;return typeof s=="object"&&s!==null?s=qn(s):(i=wn(t)?Js:Jt.current,r=t.contextTypes,s=(r=r!=null)?mo(e,i):hs),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=$h,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function i2(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&$h.enqueueReplaceState(t,t.state,null)}function og(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Cx(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=qn(s):(s=wn(t)?Js:Jt.current,i.context=mo(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(ag(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&$h.enqueueReplaceState(i,i.state,null),sh(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function vo(e,t){try{var n="",r=t;do n+=FN(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Y0(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function lg(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var l9=typeof WeakMap=="function"?WeakMap:Map;function l4(e,t,n){n=ci(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){dh||(dh=!0,yg=r),lg(e,t)},n}function c4(e,t,n){n=ci(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){lg(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){lg(e,t),typeof r!="function"&&(ss===null?ss=new Set([this]):ss.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function s2(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new l9;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=N9.bind(null,e,t,n),t.then(e,e))}function a2(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function o2(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ci(-1,1),t.tag=2,is(n,t,1))),n.lanes|=1),e)}var c9=xi.ReactCurrentOwner,yn=!1;function an(e,t,n,r){t.child=e===null?D5(t,null,n,r):xo(t,e.child,n,r)}function l2(e,t,n,r,i){n=n.render;var s=t.ref;return ao(t,i),r=Rx(e,t,n,r,s,i),n=Ax(),e!==null&&!yn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,pi(e,t,i)):(at&&n&&bx(t),t.flags|=1,an(e,t,r,i),t.child)}function c2(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!Bx(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,d4(e,t,s,r,i)):(e=Lu(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var l=s.memoizedProps;if(n=n.compare,n=n!==null?n:ac,n(l,r)&&e.ref===t.ref)return pi(e,t,i)}return t.flags|=1,e=os(s,r),e.ref=t.ref,e.return=t,t.child=e}function d4(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(ac(s,r)&&e.ref===t.ref)if(yn=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(yn=!0);else return t.lanes=e.lanes,pi(e,t,i)}return cg(e,t,n,r,i)}function u4(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(eo,En),En|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ze(eo,En),En|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ze(eo,En),En|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ze(eo,En),En|=r;return an(e,t,i,n),t.child}function h4(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function cg(e,t,n,r,i){var s=wn(n)?Js:Jt.current;return s=mo(t,s),ao(t,i),n=Rx(e,t,n,r,s,i),r=Ax(),e!==null&&!yn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,pi(e,t,i)):(at&&r&&bx(t),t.flags|=1,an(e,t,n,i),t.child)}function d2(e,t,n,r,i){if(wn(n)){var s=!0;eh(t)}else s=!1;if(ao(t,i),t.stateNode===null)Iu(e,t),o4(t,n,r),og(t,n,r,i),r=!0;else if(e===null){var l=t.stateNode,d=t.memoizedProps;l.props=d;var u=l.context,h=n.contextType;typeof h=="object"&&h!==null?h=qn(h):(h=wn(n)?Js:Jt.current,h=mo(t,h));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(d!==r||u!==h)&&i2(t,l,r,h),Hi=!1;var x=t.memoizedState;l.state=x,sh(t,r,l,i),u=t.memoizedState,d!==r||x!==u||bn.current||Hi?(typeof p=="function"&&(ag(t,n,p,r),u=t.memoizedState),(d=Hi||r2(t,n,d,r,x,u,h))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),l.props=r,l.state=u,l.context=h,r=d):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,U5(e,t),d=t.memoizedProps,h=t.type===t.elementType?d:lr(t.type,d),l.props=h,m=t.pendingProps,x=l.context,u=n.contextType,typeof u=="object"&&u!==null?u=qn(u):(u=wn(n)?Js:Jt.current,u=mo(t,u));var y=n.getDerivedStateFromProps;(p=typeof y=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(d!==m||x!==u)&&i2(t,l,r,u),Hi=!1,x=t.memoizedState,l.state=x,sh(t,r,l,i);var S=t.memoizedState;d!==m||x!==S||bn.current||Hi?(typeof y=="function"&&(ag(t,n,y,r),S=t.memoizedState),(h=Hi||r2(t,n,h,r,x,S,u)||!1)?(p||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,S,u),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,S,u)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||d===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=S),l.props=r,l.state=S,l.context=u,r=h):(typeof l.componentDidUpdate!="function"||d===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),r=!1)}return dg(e,t,n,r,s,i)}function dg(e,t,n,r,i,s){h4(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return i&&Xv(t,n,!1),pi(e,t,s);r=t.stateNode,c9.current=t;var d=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=xo(t,e.child,null,s),t.child=xo(t,null,d,s)):an(e,t,d,s),t.memoizedState=r.state,i&&Xv(t,n,!0),t.child}function f4(e){var t=e.stateNode;t.pendingContext?Kv(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Kv(e,t.context,!1),Ex(e,t.containerInfo)}function u2(e,t,n,r,i){return go(),Nx(i),t.flags|=256,an(e,t,n,r),t.child}var ug={dehydrated:null,treeContext:null,retryLane:0};function hg(e){return{baseLanes:e,cachePool:null,transitions:null}}function p4(e,t,n){var r=t.pendingProps,i=dt.current,s=!1,l=(t.flags&128)!==0,d;if((d=l)||(d=e!==null&&e.memoizedState===null?!1:(i&2)!==0),d?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Ze(dt,i&1),e===null)return ig(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,s?(r=t.mode,s=t.child,l={mode:"hidden",children:l},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=l):s=Vh(l,r,0,null),e=qs(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=hg(n),t.memoizedState=ug,e):zx(t,l));if(i=e.memoizedState,i!==null&&(d=i.dehydrated,d!==null))return d9(e,t,l,r,d,i,n);if(s){s=r.fallback,l=t.mode,i=e.child,d=i.sibling;var u={mode:"hidden",children:r.children};return!(l&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=os(i,u),r.subtreeFlags=i.subtreeFlags&14680064),d!==null?s=os(d,s):(s=qs(s,l,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,l=e.child.memoizedState,l=l===null?hg(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=ug,r}return s=e.child,e=s.sibling,r=os(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function zx(e,t){return t=Vh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function au(e,t,n,r){return r!==null&&Nx(r),xo(t,e.child,null,n),e=zx(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function d9(e,t,n,r,i,s,l){if(n)return t.flags&256?(t.flags&=-257,r=Y0(Error(le(422))),au(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Vh({mode:"visible",children:r.children},i,0,null),s=qs(s,i,l,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&xo(t,e.child,null,l),t.child.memoizedState=hg(l),t.memoizedState=ug,s);if(!(t.mode&1))return au(e,t,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var d=r.dgst;return r=d,s=Error(le(419)),r=Y0(s,r,void 0),au(e,t,l,r)}if(d=(l&e.childLanes)!==0,yn||d){if(r=Dt,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,fi(e,i),pr(r,e,i,-1))}return Gx(),r=Y0(Error(le(421))),au(e,t,l,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=S9.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Pn=rs(i.nextSibling),Tn=t,at=!0,dr=null,e!==null&&(Wn[Yn++]=ai,Wn[Yn++]=oi,Wn[Yn++]=ea,ai=e.id,oi=e.overflow,ea=t),t=zx(t,r.children),t.flags|=4096,t)}function h2(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),sg(e.return,t,n)}function K0(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function m4(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(an(e,t,r.children,n),r=dt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&h2(e,n,t);else if(e.tag===19)h2(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ze(dt,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&ah(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),K0(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&ah(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}K0(t,!0,n,null,s);break;case"together":K0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Iu(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function pi(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),na|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(le(153));if(t.child!==null){for(e=t.child,n=os(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=os(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function u9(e,t,n){switch(t.tag){case 3:f4(t),go();break;case 5:$5(t);break;case 1:wn(t.type)&&eh(t);break;case 4:Ex(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ze(rh,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ze(dt,dt.current&1),t.flags|=128,null):n&t.child.childLanes?p4(e,t,n):(Ze(dt,dt.current&1),e=pi(e,t,n),e!==null?e.sibling:null);Ze(dt,dt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return m4(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ze(dt,dt.current),r)break;return null;case 22:case 23:return t.lanes=0,u4(e,t,n)}return pi(e,t,n)}var g4,fg,x4,y4;g4=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fg=function(){};x4=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ws(zr.current);var s=null;switch(n){case"input":i=Fm(e,i),r=Fm(e,r),s=[];break;case"select":i=ht({},i,{value:void 0}),r=ht({},r,{value:void 0}),s=[];break;case"textarea":i=Dm(e,i),r=Dm(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Zu)}Um(n,r);var l;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var d=i[h];for(l in d)d.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Jl.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(d=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==d&&(u!=null||d!=null))if(h==="style")if(d){for(l in d)!d.hasOwnProperty(l)||u&&u.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in u)u.hasOwnProperty(l)&&d[l]!==u[l]&&(n||(n={}),n[l]=u[l])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,d=d?d.__html:void 0,u!=null&&d!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Jl.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&tt("scroll",e),s||d===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(t.updateQueue=h)&&(t.flags|=4)}};y4=function(e,t,n,r){n!==r&&(t.flags|=4)};function vl(e,t){if(!at)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function h9(e,t,n){var r=t.pendingProps;switch(wx(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(t),null;case 1:return wn(t.type)&&Ju(),qt(t),null;case 3:return r=t.stateNode,yo(),nt(bn),nt(Jt),Tx(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(iu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,dr!==null&&(wg(dr),dr=null))),fg(e,t),qt(t),null;case 5:Px(t);var i=Ws(uc.current);if(n=t.type,e!==null&&t.stateNode!=null)x4(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(le(166));return qt(t),null}if(e=Ws(zr.current),iu(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Ar]=t,r[cc]=s,e=(t.mode&1)!==0,n){case"dialog":tt("cancel",r),tt("close",r);break;case"iframe":case"object":case"embed":tt("load",r);break;case"video":case"audio":for(i=0;i<Dl.length;i++)tt(Dl[i],r);break;case"source":tt("error",r);break;case"img":case"image":case"link":tt("error",r),tt("load",r);break;case"details":tt("toggle",r);break;case"input":wv(r,s),tt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},tt("invalid",r);break;case"textarea":Sv(r,s),tt("invalid",r)}Um(n,s),i=null;for(var l in s)if(s.hasOwnProperty(l)){var d=s[l];l==="children"?typeof d=="string"?r.textContent!==d&&(s.suppressHydrationWarning!==!0&&ru(r.textContent,d,e),i=["children",d]):typeof d=="number"&&r.textContent!==""+d&&(s.suppressHydrationWarning!==!0&&ru(r.textContent,d,e),i=["children",""+d]):Jl.hasOwnProperty(l)&&d!=null&&l==="onScroll"&&tt("scroll",r)}switch(n){case"input":Xd(r),Nv(r,s,!0);break;case"textarea":Xd(r),_v(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Zu)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ww(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Ar]=t,e[cc]=r,g4(e,t,!1,!1),t.stateNode=e;e:{switch(l=$m(n,r),n){case"dialog":tt("cancel",e),tt("close",e),i=r;break;case"iframe":case"object":case"embed":tt("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dl.length;i++)tt(Dl[i],e);i=r;break;case"source":tt("error",e),i=r;break;case"img":case"image":case"link":tt("error",e),tt("load",e),i=r;break;case"details":tt("toggle",e),i=r;break;case"input":wv(e,r),i=Fm(e,r),tt("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=ht({},r,{value:void 0}),tt("invalid",e);break;case"textarea":Sv(e,r),i=Dm(e,r),tt("invalid",e);break;default:i=r}Um(n,i),d=i;for(s in d)if(d.hasOwnProperty(s)){var u=d[s];s==="style"?Xw(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Yw(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ec(e,u):typeof u=="number"&&ec(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Jl.hasOwnProperty(s)?u!=null&&s==="onScroll"&&tt("scroll",e):u!=null&&ax(e,s,u,l))}switch(n){case"input":Xd(e),Nv(e,r,!1);break;case"textarea":Xd(e),_v(e);break;case"option":r.value!=null&&e.setAttribute("value",""+us(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?no(e,!!r.multiple,s,!1):r.defaultValue!=null&&no(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Zu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return qt(t),null;case 6:if(e&&t.stateNode!=null)y4(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(le(166));if(n=Ws(uc.current),Ws(zr.current),iu(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ar]=t,(s=r.nodeValue!==n)&&(e=Tn,e!==null))switch(e.tag){case 3:ru(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ru(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ar]=t,t.stateNode=r}return qt(t),null;case 13:if(nt(dt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(at&&Pn!==null&&t.mode&1&&!(t.flags&128))z5(),go(),t.flags|=98560,s=!1;else if(s=iu(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(le(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(le(317));s[Ar]=t}else go(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;qt(t),s=!1}else dr!==null&&(wg(dr),dr=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||dt.current&1?Pt===0&&(Pt=3):Gx())),t.updateQueue!==null&&(t.flags|=4),qt(t),null);case 4:return yo(),fg(e,t),e===null&&oc(t.stateNode.containerInfo),qt(t),null;case 10:return jx(t.type._context),qt(t),null;case 17:return wn(t.type)&&Ju(),qt(t),null;case 19:if(nt(dt),s=t.memoizedState,s===null)return qt(t),null;if(r=(t.flags&128)!==0,l=s.rendering,l===null)if(r)vl(s,!1);else{if(Pt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=ah(e),l!==null){for(t.flags|=128,vl(s,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,l=s.alternate,l===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ze(dt,dt.current&1|2),t.child}e=e.sibling}s.tail!==null&&wt()>bo&&(t.flags|=128,r=!0,vl(s,!1),t.lanes=4194304)}else{if(!r)if(e=ah(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),vl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!l.alternate&&!at)return qt(t),null}else 2*wt()-s.renderingStartTime>bo&&n!==1073741824&&(t.flags|=128,r=!0,vl(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(n=s.last,n!==null?n.sibling=l:t.child=l,s.last=l)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=wt(),t.sibling=null,n=dt.current,Ze(dt,r?n&1|2:n&1),t):(qt(t),null);case 22:case 23:return $x(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?En&1073741824&&(qt(t),t.subtreeFlags&6&&(t.flags|=8192)):qt(t),null;case 24:return null;case 25:return null}throw Error(le(156,t.tag))}function f9(e,t){switch(wx(t),t.tag){case 1:return wn(t.type)&&Ju(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return yo(),nt(bn),nt(Jt),Tx(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Px(t),null;case 13:if(nt(dt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(le(340));go()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return nt(dt),null;case 4:return yo(),null;case 10:return jx(t.type._context),null;case 22:case 23:return $x(),null;case 24:return null;default:return null}}var ou=!1,Zt=!1,p9=typeof WeakSet=="function"?WeakSet:Set,ve=null;function Ja(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){mt(e,t,r)}else n.current=null}function pg(e,t,n){try{n()}catch(r){mt(e,t,r)}}var f2=!1;function m9(e,t){if(qm=Xu,e=S5(),vx(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var l=0,d=-1,u=-1,h=0,p=0,m=e,x=null;t:for(;;){for(var y;m!==n||i!==0&&m.nodeType!==3||(d=l+i),m!==s||r!==0&&m.nodeType!==3||(u=l+r),m.nodeType===3&&(l+=m.nodeValue.length),(y=m.firstChild)!==null;)x=m,m=y;for(;;){if(m===e)break t;if(x===n&&++h===i&&(d=l),x===s&&++p===r&&(u=l),(y=m.nextSibling)!==null)break;m=x,x=m.parentNode}m=y}n=d===-1||u===-1?null:{start:d,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zm={focusedElem:e,selectionRange:n},Xu=!1,ve=t;ve!==null;)if(t=ve,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ve=e;else for(;ve!==null;){t=ve;try{var S=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var N=S.memoizedProps,k=S.memoizedState,w=t.stateNode,j=w.getSnapshotBeforeUpdate(t.elementType===t.type?N:lr(t.type,N),k);w.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(_){mt(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,ve=e;break}ve=t.return}return S=f2,f2=!1,S}function Ql(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&pg(t,n,s)}i=i.next}while(i!==r)}}function Gh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function mg(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function v4(e){var t=e.alternate;t!==null&&(e.alternate=null,v4(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ar],delete t[cc],delete t[tg],delete t[qS],delete t[ZS])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function b4(e){return e.tag===5||e.tag===3||e.tag===4}function p2(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||b4(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function gg(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Zu));else if(r!==4&&(e=e.child,e!==null))for(gg(e,t,n),e=e.sibling;e!==null;)gg(e,t,n),e=e.sibling}function xg(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(xg(e,t,n),e=e.sibling;e!==null;)xg(e,t,n),e=e.sibling}var Gt=null,cr=!1;function Di(e,t,n){for(n=n.child;n!==null;)w4(e,t,n),n=n.sibling}function w4(e,t,n){if(Fr&&typeof Fr.onCommitFiberUnmount=="function")try{Fr.onCommitFiberUnmount(Ih,n)}catch{}switch(n.tag){case 5:Zt||Ja(n,t);case 6:var r=Gt,i=cr;Gt=null,Di(e,t,n),Gt=r,cr=i,Gt!==null&&(cr?(e=Gt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Gt.removeChild(n.stateNode));break;case 18:Gt!==null&&(cr?(e=Gt,n=n.stateNode,e.nodeType===8?$0(e.parentNode,n):e.nodeType===1&&$0(e,n),ic(e)):$0(Gt,n.stateNode));break;case 4:r=Gt,i=cr,Gt=n.stateNode.containerInfo,cr=!0,Di(e,t,n),Gt=r,cr=i;break;case 0:case 11:case 14:case 15:if(!Zt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,l=s.destroy;s=s.tag,l!==void 0&&(s&2||s&4)&&pg(n,t,l),i=i.next}while(i!==r)}Di(e,t,n);break;case 1:if(!Zt&&(Ja(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(d){mt(n,t,d)}Di(e,t,n);break;case 21:Di(e,t,n);break;case 22:n.mode&1?(Zt=(r=Zt)||n.memoizedState!==null,Di(e,t,n),Zt=r):Di(e,t,n);break;default:Di(e,t,n)}}function m2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new p9),t.forEach(function(r){var i=_9.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ar(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,l=t,d=l;e:for(;d!==null;){switch(d.tag){case 5:Gt=d.stateNode,cr=!1;break e;case 3:Gt=d.stateNode.containerInfo,cr=!0;break e;case 4:Gt=d.stateNode.containerInfo,cr=!0;break e}d=d.return}if(Gt===null)throw Error(le(160));w4(s,l,i),Gt=null,cr=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){mt(i,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)N4(t,e),t=t.sibling}function N4(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ar(t,e),Pr(e),r&4){try{Ql(3,e,e.return),Gh(3,e)}catch(N){mt(e,e.return,N)}try{Ql(5,e,e.return)}catch(N){mt(e,e.return,N)}}break;case 1:ar(t,e),Pr(e),r&512&&n!==null&&Ja(n,n.return);break;case 5:if(ar(t,e),Pr(e),r&512&&n!==null&&Ja(n,n.return),e.flags&32){var i=e.stateNode;try{ec(i,"")}catch(N){mt(e,e.return,N)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,l=n!==null?n.memoizedProps:s,d=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{d==="input"&&s.type==="radio"&&s.name!=null&&Vw(i,s),$m(d,l);var h=$m(d,s);for(l=0;l<u.length;l+=2){var p=u[l],m=u[l+1];p==="style"?Xw(i,m):p==="dangerouslySetInnerHTML"?Yw(i,m):p==="children"?ec(i,m):ax(i,p,m,h)}switch(d){case"input":zm(i,s);break;case"textarea":Hw(i,s);break;case"select":var x=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?no(i,!!s.multiple,y,!1):x!==!!s.multiple&&(s.defaultValue!=null?no(i,!!s.multiple,s.defaultValue,!0):no(i,!!s.multiple,s.multiple?[]:"",!1))}i[cc]=s}catch(N){mt(e,e.return,N)}}break;case 6:if(ar(t,e),Pr(e),r&4){if(e.stateNode===null)throw Error(le(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(N){mt(e,e.return,N)}}break;case 3:if(ar(t,e),Pr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ic(t.containerInfo)}catch(N){mt(e,e.return,N)}break;case 4:ar(t,e),Pr(e);break;case 13:ar(t,e),Pr(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Ox=wt())),r&4&&m2(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(Zt=(h=Zt)||p,ar(t,e),Zt=h):ar(t,e),Pr(e),r&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!p&&e.mode&1)for(ve=e,p=e.child;p!==null;){for(m=ve=p;ve!==null;){switch(x=ve,y=x.child,x.tag){case 0:case 11:case 14:case 15:Ql(4,x,x.return);break;case 1:Ja(x,x.return);var S=x.stateNode;if(typeof S.componentWillUnmount=="function"){r=x,n=x.return;try{t=r,S.props=t.memoizedProps,S.state=t.memoizedState,S.componentWillUnmount()}catch(N){mt(r,n,N)}}break;case 5:Ja(x,x.return);break;case 22:if(x.memoizedState!==null){x2(m);continue}}y!==null?(y.return=x,ve=y):x2(m)}p=p.sibling}e:for(p=null,m=e;;){if(m.tag===5){if(p===null){p=m;try{i=m.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(d=m.stateNode,u=m.memoizedProps.style,l=u!=null&&u.hasOwnProperty("display")?u.display:null,d.style.display=Kw("display",l))}catch(N){mt(e,e.return,N)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(N){mt(e,e.return,N)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:ar(t,e),Pr(e),r&4&&m2(e);break;case 21:break;default:ar(t,e),Pr(e)}}function Pr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(b4(n)){var r=n;break e}n=n.return}throw Error(le(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ec(i,""),r.flags&=-33);var s=p2(e);xg(e,s,i);break;case 3:case 4:var l=r.stateNode.containerInfo,d=p2(e);gg(e,d,l);break;default:throw Error(le(161))}}catch(u){mt(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function g9(e,t,n){ve=e,S4(e)}function S4(e,t,n){for(var r=(e.mode&1)!==0;ve!==null;){var i=ve,s=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||ou;if(!l){var d=i.alternate,u=d!==null&&d.memoizedState!==null||Zt;d=ou;var h=Zt;if(ou=l,(Zt=u)&&!h)for(ve=i;ve!==null;)l=ve,u=l.child,l.tag===22&&l.memoizedState!==null?y2(i):u!==null?(u.return=l,ve=u):y2(i);for(;s!==null;)ve=s,S4(s),s=s.sibling;ve=i,ou=d,Zt=h}g2(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ve=s):g2(e)}}function g2(e){for(;ve!==null;){var t=ve;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Zt||Gh(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Zt)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:lr(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&e2(t,s,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}e2(t,l,n)}break;case 5:var d=t.stateNode;if(n===null&&t.flags&4){n=d;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&ic(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(le(163))}Zt||t.flags&512&&mg(t)}catch(x){mt(t,t.return,x)}}if(t===e){ve=null;break}if(n=t.sibling,n!==null){n.return=t.return,ve=n;break}ve=t.return}}function x2(e){for(;ve!==null;){var t=ve;if(t===e){ve=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ve=n;break}ve=t.return}}function y2(e){for(;ve!==null;){var t=ve;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Gh(4,t)}catch(u){mt(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){mt(t,i,u)}}var s=t.return;try{mg(t)}catch(u){mt(t,s,u)}break;case 5:var l=t.return;try{mg(t)}catch(u){mt(t,l,u)}}}catch(u){mt(t,t.return,u)}if(t===e){ve=null;break}var d=t.sibling;if(d!==null){d.return=t.return,ve=d;break}ve=t.return}}var x9=Math.ceil,ch=xi.ReactCurrentDispatcher,Lx=xi.ReactCurrentOwner,Qn=xi.ReactCurrentBatchConfig,Ue=0,Dt=null,_t=null,Bt=0,En=0,eo=ms(0),Pt=0,mc=null,na=0,Bh=0,Dx=0,ql=null,xn=null,Ox=0,bo=1/0,ii=null,dh=!1,yg=null,ss=null,lu=!1,Zi=null,uh=0,Zl=0,vg=null,Fu=-1,zu=0;function on(){return Ue&6?wt():Fu!==-1?Fu:Fu=wt()}function as(e){return e.mode&1?Ue&2&&Bt!==0?Bt&-Bt:e9.transition!==null?(zu===0&&(zu=o5()),zu):(e=We,e!==0||(e=window.event,e=e===void 0?16:p5(e.type)),e):1}function pr(e,t,n,r){if(50<Zl)throw Zl=0,vg=null,Error(le(185));Mc(e,n,r),(!(Ue&2)||e!==Dt)&&(e===Dt&&(!(Ue&2)&&(Bh|=n),Pt===4&&Xi(e,Bt)),Nn(e,r),n===1&&Ue===0&&!(t.mode&1)&&(bo=wt()+500,Oh&&gs()))}function Nn(e,t){var n=e.callbackNode;eS(e,t);var r=Ku(e,e===Dt?Bt:0);if(r===0)n!==null&&Cv(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Cv(n),t===1)e.tag===0?JS(v2.bind(null,e)):A5(v2.bind(null,e)),XS(function(){!(Ue&6)&&gs()}),n=null;else{switch(l5(r)){case 1:n=ux;break;case 4:n=s5;break;case 16:n=Yu;break;case 536870912:n=a5;break;default:n=Yu}n=M4(n,_4.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function _4(e,t){if(Fu=-1,zu=0,Ue&6)throw Error(le(327));var n=e.callbackNode;if(oo()&&e.callbackNode!==n)return null;var r=Ku(e,e===Dt?Bt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=hh(e,r);else{t=r;var i=Ue;Ue|=2;var s=k4();(Dt!==e||Bt!==t)&&(ii=null,bo=wt()+500,Qs(e,t));do try{b9();break}catch(d){j4(e,d)}while(1);_x(),ch.current=s,Ue=i,_t!==null?t=0:(Dt=null,Bt=0,t=Pt)}if(t!==0){if(t===2&&(i=Wm(e),i!==0&&(r=i,t=bg(e,i))),t===1)throw n=mc,Qs(e,0),Xi(e,r),Nn(e,wt()),n;if(t===6)Xi(e,r);else{if(i=e.current.alternate,!(r&30)&&!y9(i)&&(t=hh(e,r),t===2&&(s=Wm(e),s!==0&&(r=s,t=bg(e,s))),t===1))throw n=mc,Qs(e,0),Xi(e,r),Nn(e,wt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(le(345));case 2:Gs(e,xn,ii);break;case 3:if(Xi(e,r),(r&130023424)===r&&(t=Ox+500-wt(),10<t)){if(Ku(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){on(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=eg(Gs.bind(null,e,xn,ii),t);break}Gs(e,xn,ii);break;case 4:if(Xi(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var l=31-fr(r);s=1<<l,l=t[l],l>i&&(i=l),r&=~s}if(r=i,r=wt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*x9(r/1960))-r,10<r){e.timeoutHandle=eg(Gs.bind(null,e,xn,ii),r);break}Gs(e,xn,ii);break;case 5:Gs(e,xn,ii);break;default:throw Error(le(329))}}}return Nn(e,wt()),e.callbackNode===n?_4.bind(null,e):null}function bg(e,t){var n=ql;return e.current.memoizedState.isDehydrated&&(Qs(e,t).flags|=256),e=hh(e,t),e!==2&&(t=xn,xn=n,t!==null&&wg(t)),e}function wg(e){xn===null?xn=e:xn.push.apply(xn,e)}function y9(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!xr(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Xi(e,t){for(t&=~Dx,t&=~Bh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-fr(t),r=1<<n;e[n]=-1,t&=~r}}function v2(e){if(Ue&6)throw Error(le(327));oo();var t=Ku(e,0);if(!(t&1))return Nn(e,wt()),null;var n=hh(e,t);if(e.tag!==0&&n===2){var r=Wm(e);r!==0&&(t=r,n=bg(e,r))}if(n===1)throw n=mc,Qs(e,0),Xi(e,t),Nn(e,wt()),n;if(n===6)throw Error(le(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Gs(e,xn,ii),Nn(e,wt()),null}function Ux(e,t){var n=Ue;Ue|=1;try{return e(t)}finally{Ue=n,Ue===0&&(bo=wt()+500,Oh&&gs())}}function ra(e){Zi!==null&&Zi.tag===0&&!(Ue&6)&&oo();var t=Ue;Ue|=1;var n=Qn.transition,r=We;try{if(Qn.transition=null,We=1,e)return e()}finally{We=r,Qn.transition=n,Ue=t,!(Ue&6)&&gs()}}function $x(){En=eo.current,nt(eo)}function Qs(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,KS(n)),_t!==null)for(n=_t.return;n!==null;){var r=n;switch(wx(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ju();break;case 3:yo(),nt(bn),nt(Jt),Tx();break;case 5:Px(r);break;case 4:yo();break;case 13:nt(dt);break;case 19:nt(dt);break;case 10:jx(r.type._context);break;case 22:case 23:$x()}n=n.return}if(Dt=e,_t=e=os(e.current,null),Bt=En=t,Pt=0,mc=null,Dx=Bh=na=0,xn=ql=null,Hs!==null){for(t=0;t<Hs.length;t++)if(n=Hs[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var l=s.next;s.next=i,r.next=l}n.pending=r}Hs=null}return e}function j4(e,t){do{var n=_t;try{if(_x(),Ru.current=lh,oh){for(var r=ut.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}oh=!1}if(ta=0,Lt=Et=ut=null,Xl=!1,hc=0,Lx.current=null,n===null||n.return===null){Pt=1,mc=t,_t=null;break}e:{var s=e,l=n.return,d=n,u=t;if(t=Bt,d.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,p=d,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var x=p.alternate;x?(p.updateQueue=x.updateQueue,p.memoizedState=x.memoizedState,p.lanes=x.lanes):(p.updateQueue=null,p.memoizedState=null)}var y=a2(l);if(y!==null){y.flags&=-257,o2(y,l,d,s,t),y.mode&1&&s2(s,h,t),t=y,u=h;var S=t.updateQueue;if(S===null){var N=new Set;N.add(u),t.updateQueue=N}else S.add(u);break e}else{if(!(t&1)){s2(s,h,t),Gx();break e}u=Error(le(426))}}else if(at&&d.mode&1){var k=a2(l);if(k!==null){!(k.flags&65536)&&(k.flags|=256),o2(k,l,d,s,t),Nx(vo(u,d));break e}}s=u=vo(u,d),Pt!==4&&(Pt=2),ql===null?ql=[s]:ql.push(s),s=l;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var w=l4(s,u,t);Jv(s,w);break e;case 1:d=u;var j=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof j.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ss===null||!ss.has(v)))){s.flags|=65536,t&=-t,s.lanes|=t;var _=c4(s,d,t);Jv(s,_);break e}}s=s.return}while(s!==null)}E4(n)}catch(E){t=E,_t===n&&n!==null&&(_t=n=n.return);continue}break}while(1)}function k4(){var e=ch.current;return ch.current=lh,e===null?lh:e}function Gx(){(Pt===0||Pt===3||Pt===2)&&(Pt=4),Dt===null||!(na&268435455)&&!(Bh&268435455)||Xi(Dt,Bt)}function hh(e,t){var n=Ue;Ue|=2;var r=k4();(Dt!==e||Bt!==t)&&(ii=null,Qs(e,t));do try{v9();break}catch(i){j4(e,i)}while(1);if(_x(),Ue=n,ch.current=r,_t!==null)throw Error(le(261));return Dt=null,Bt=0,Pt}function v9(){for(;_t!==null;)C4(_t)}function b9(){for(;_t!==null&&!HN();)C4(_t)}function C4(e){var t=T4(e.alternate,e,En);e.memoizedProps=e.pendingProps,t===null?E4(e):_t=t,Lx.current=null}function E4(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=f9(n,t),n!==null){n.flags&=32767,_t=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Pt=6,_t=null;return}}else if(n=h9(n,t,En),n!==null){_t=n;return}if(t=t.sibling,t!==null){_t=t;return}_t=t=e}while(t!==null);Pt===0&&(Pt=5)}function Gs(e,t,n){var r=We,i=Qn.transition;try{Qn.transition=null,We=1,w9(e,t,n,r)}finally{Qn.transition=i,We=r}return null}function w9(e,t,n,r){do oo();while(Zi!==null);if(Ue&6)throw Error(le(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(le(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(tS(e,s),e===Dt&&(_t=Dt=null,Bt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||lu||(lu=!0,M4(Yu,function(){return oo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Qn.transition,Qn.transition=null;var l=We;We=1;var d=Ue;Ue|=4,Lx.current=null,m9(e,n),N4(n,e),$S(Zm),Xu=!!qm,Zm=qm=null,e.current=n,g9(n),WN(),Ue=d,We=l,Qn.transition=s}else e.current=n;if(lu&&(lu=!1,Zi=e,uh=i),s=e.pendingLanes,s===0&&(ss=null),XN(n.stateNode),Nn(e,wt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(dh)throw dh=!1,e=yg,yg=null,e;return uh&1&&e.tag!==0&&oo(),s=e.pendingLanes,s&1?e===vg?Zl++:(Zl=0,vg=e):Zl=0,gs(),null}function oo(){if(Zi!==null){var e=l5(uh),t=Qn.transition,n=We;try{if(Qn.transition=null,We=16>e?16:e,Zi===null)var r=!1;else{if(e=Zi,Zi=null,uh=0,Ue&6)throw Error(le(331));var i=Ue;for(Ue|=4,ve=e.current;ve!==null;){var s=ve,l=s.child;if(ve.flags&16){var d=s.deletions;if(d!==null){for(var u=0;u<d.length;u++){var h=d[u];for(ve=h;ve!==null;){var p=ve;switch(p.tag){case 0:case 11:case 15:Ql(8,p,s)}var m=p.child;if(m!==null)m.return=p,ve=m;else for(;ve!==null;){p=ve;var x=p.sibling,y=p.return;if(v4(p),p===h){ve=null;break}if(x!==null){x.return=y,ve=x;break}ve=y}}}var S=s.alternate;if(S!==null){var N=S.child;if(N!==null){S.child=null;do{var k=N.sibling;N.sibling=null,N=k}while(N!==null)}}ve=s}}if(s.subtreeFlags&2064&&l!==null)l.return=s,ve=l;else e:for(;ve!==null;){if(s=ve,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ql(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,ve=w;break e}ve=s.return}}var j=e.current;for(ve=j;ve!==null;){l=ve;var v=l.child;if(l.subtreeFlags&2064&&v!==null)v.return=l,ve=v;else e:for(l=j;ve!==null;){if(d=ve,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:Gh(9,d)}}catch(E){mt(d,d.return,E)}if(d===l){ve=null;break e}var _=d.sibling;if(_!==null){_.return=d.return,ve=_;break e}ve=d.return}}if(Ue=i,gs(),Fr&&typeof Fr.onPostCommitFiberRoot=="function")try{Fr.onPostCommitFiberRoot(Ih,e)}catch{}r=!0}return r}finally{We=n,Qn.transition=t}}return!1}function b2(e,t,n){t=vo(n,t),t=l4(e,t,1),e=is(e,t,1),t=on(),e!==null&&(Mc(e,1,t),Nn(e,t))}function mt(e,t,n){if(e.tag===3)b2(e,e,n);else for(;t!==null;){if(t.tag===3){b2(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ss===null||!ss.has(r))){e=vo(n,e),e=c4(t,e,1),t=is(t,e,1),e=on(),t!==null&&(Mc(t,1,e),Nn(t,e));break}}t=t.return}}function N9(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=on(),e.pingedLanes|=e.suspendedLanes&n,Dt===e&&(Bt&n)===n&&(Pt===4||Pt===3&&(Bt&130023424)===Bt&&500>wt()-Ox?Qs(e,0):Dx|=n),Nn(e,t)}function P4(e,t){t===0&&(e.mode&1?(t=Zd,Zd<<=1,!(Zd&130023424)&&(Zd=4194304)):t=1);var n=on();e=fi(e,t),e!==null&&(Mc(e,t,n),Nn(e,n))}function S9(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),P4(e,n)}function _9(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(le(314))}r!==null&&r.delete(t),P4(e,n)}var T4;T4=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||bn.current)yn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return yn=!1,u9(e,t,n);yn=!!(e.flags&131072)}else yn=!1,at&&t.flags&1048576&&I5(t,nh,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Iu(e,t),e=t.pendingProps;var i=mo(t,Jt.current);ao(t,n),i=Rx(null,t,r,e,i,n);var s=Ax();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,wn(r)?(s=!0,eh(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Cx(t),i.updater=$h,t.stateNode=i,i._reactInternals=t,og(t,r,e,n),t=dg(null,t,r,!0,s,n)):(t.tag=0,at&&s&&bx(t),an(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Iu(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=k9(r),e=lr(r,e),i){case 0:t=cg(null,t,r,e,n);break e;case 1:t=d2(null,t,r,e,n);break e;case 11:t=l2(null,t,r,e,n);break e;case 14:t=c2(null,t,r,lr(r.type,e),n);break e}throw Error(le(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:lr(r,i),cg(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:lr(r,i),d2(e,t,r,i,n);case 3:e:{if(f4(t),e===null)throw Error(le(387));r=t.pendingProps,s=t.memoizedState,i=s.element,U5(e,t),sh(t,r,null,n);var l=t.memoizedState;if(r=l.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=vo(Error(le(423)),t),t=u2(e,t,r,n,i);break e}else if(r!==i){i=vo(Error(le(424)),t),t=u2(e,t,r,n,i);break e}else for(Pn=rs(t.stateNode.containerInfo.firstChild),Tn=t,at=!0,dr=null,n=D5(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(go(),r===i){t=pi(e,t,n);break e}an(e,t,r,n)}t=t.child}return t;case 5:return $5(t),e===null&&ig(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,l=i.children,Jm(r,i)?l=null:s!==null&&Jm(r,s)&&(t.flags|=32),h4(e,t),an(e,t,l,n),t.child;case 6:return e===null&&ig(t),null;case 13:return p4(e,t,n);case 4:return Ex(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=xo(t,null,r,n):an(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:lr(r,i),l2(e,t,r,i,n);case 7:return an(e,t,t.pendingProps,n),t.child;case 8:return an(e,t,t.pendingProps.children,n),t.child;case 12:return an(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,l=i.value,Ze(rh,r._currentValue),r._currentValue=l,s!==null)if(xr(s.value,l)){if(s.children===i.children&&!bn.current){t=pi(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var d=s.dependencies;if(d!==null){l=s.child;for(var u=d.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=ci(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?u.next=u:(u.next=p.next,p.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),sg(s.return,n,t),d.lanes|=n;break}u=u.next}}else if(s.tag===10)l=s.type===t.type?null:s.child;else if(s.tag===18){if(l=s.return,l===null)throw Error(le(341));l.lanes|=n,d=l.alternate,d!==null&&(d.lanes|=n),sg(l,n,t),l=s.sibling}else l=s.child;if(l!==null)l.return=s;else for(l=s;l!==null;){if(l===t){l=null;break}if(s=l.sibling,s!==null){s.return=l.return,l=s;break}l=l.return}s=l}an(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ao(t,n),i=qn(i),r=r(i),t.flags|=1,an(e,t,r,n),t.child;case 14:return r=t.type,i=lr(r,t.pendingProps),i=lr(r.type,i),c2(e,t,r,i,n);case 15:return d4(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:lr(r,i),Iu(e,t),t.tag=1,wn(r)?(e=!0,eh(t)):e=!1,ao(t,n),o4(t,r,i),og(t,r,i,n),dg(null,t,r,!0,e,n);case 19:return m4(e,t,n);case 22:return u4(e,t,n)}throw Error(le(156,t.tag))};function M4(e,t){return i5(e,t)}function j9(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(e,t,n,r){return new j9(e,t,n,r)}function Bx(e){return e=e.prototype,!(!e||!e.isReactComponent)}function k9(e){if(typeof e=="function")return Bx(e)?1:0;if(e!=null){if(e=e.$$typeof,e===lx)return 11;if(e===cx)return 14}return 2}function os(e,t){var n=e.alternate;return n===null?(n=Kn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lu(e,t,n,r,i,s){var l=2;if(r=e,typeof e=="function")Bx(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Va:return qs(n.children,i,s,t);case ox:l=8,i|=8;break;case Mm:return e=Kn(12,n,t,i|2),e.elementType=Mm,e.lanes=s,e;case Rm:return e=Kn(13,n,t,i),e.elementType=Rm,e.lanes=s,e;case Am:return e=Kn(19,n,t,i),e.elementType=Am,e.lanes=s,e;case $w:return Vh(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ow:l=10;break e;case Uw:l=9;break e;case lx:l=11;break e;case cx:l=14;break e;case Vi:l=16,r=null;break e}throw Error(le(130,e==null?e:typeof e,""))}return t=Kn(l,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function qs(e,t,n,r){return e=Kn(7,e,r,t),e.lanes=n,e}function Vh(e,t,n,r){return e=Kn(22,e,r,t),e.elementType=$w,e.lanes=n,e.stateNode={isHidden:!1},e}function X0(e,t,n){return e=Kn(6,e,null,t),e.lanes=n,e}function Q0(e,t,n){return t=Kn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function C9(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=T0(0),this.expirationTimes=T0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=T0(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vx(e,t,n,r,i,s,l,d,u){return e=new C9(e,t,n,d,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Kn(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cx(s),e}function E9(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ba,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function R4(e){if(!e)return hs;e=e._reactInternals;e:{if(la(e)!==e||e.tag!==1)throw Error(le(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(wn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(le(171))}if(e.tag===1){var n=e.type;if(wn(n))return R5(e,n,t)}return t}function A4(e,t,n,r,i,s,l,d,u){return e=Vx(n,r,!0,e,i,s,l,d,u),e.context=R4(null),n=e.current,r=on(),i=as(n),s=ci(r,i),s.callback=t??null,is(n,s,i),e.current.lanes=i,Mc(e,i,r),Nn(e,r),e}function Hh(e,t,n,r){var i=t.current,s=on(),l=as(i);return n=R4(n),t.context===null?t.context=n:t.pendingContext=n,t=ci(s,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=is(i,t,l),e!==null&&(pr(e,i,l,s),Mu(e,i,l)),l}function fh(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function w2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Hx(e,t){w2(e,t),(e=e.alternate)&&w2(e,t)}function P9(){return null}var I4=typeof reportError=="function"?reportError:function(e){console.error(e)};function Wx(e){this._internalRoot=e}Wh.prototype.render=Wx.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(le(409));Hh(e,t,null,null)};Wh.prototype.unmount=Wx.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ra(function(){Hh(null,e,null,null)}),t[hi]=null}};function Wh(e){this._internalRoot=e}Wh.prototype.unstable_scheduleHydration=function(e){if(e){var t=u5();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ki.length&&t!==0&&t<Ki[n].priority;n++);Ki.splice(n,0,e),n===0&&f5(e)}};function Yx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Yh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function N2(){}function T9(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=fh(l);s.call(h)}}var l=A4(t,r,e,0,null,!1,!1,"",N2);return e._reactRootContainer=l,e[hi]=l.current,oc(e.nodeType===8?e.parentNode:e),ra(),l}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var d=r;r=function(){var h=fh(u);d.call(h)}}var u=Vx(e,0,!1,null,null,!1,!1,"",N2);return e._reactRootContainer=u,e[hi]=u.current,oc(e.nodeType===8?e.parentNode:e),ra(function(){Hh(t,u,n,r)}),u}function Kh(e,t,n,r,i){var s=n._reactRootContainer;if(s){var l=s;if(typeof i=="function"){var d=i;i=function(){var u=fh(l);d.call(u)}}Hh(t,l,e,i)}else l=T9(n,t,e,i,r);return fh(l)}c5=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ll(t.pendingLanes);n!==0&&(hx(t,n|1),Nn(t,wt()),!(Ue&6)&&(bo=wt()+500,gs()))}break;case 13:ra(function(){var r=fi(e,1);if(r!==null){var i=on();pr(r,e,1,i)}}),Hx(e,1)}};fx=function(e){if(e.tag===13){var t=fi(e,134217728);if(t!==null){var n=on();pr(t,e,134217728,n)}Hx(e,134217728)}};d5=function(e){if(e.tag===13){var t=as(e),n=fi(e,t);if(n!==null){var r=on();pr(n,e,t,r)}Hx(e,t)}};u5=function(){return We};h5=function(e,t){var n=We;try{return We=e,t()}finally{We=n}};Bm=function(e,t,n){switch(t){case"input":if(zm(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Dh(r);if(!i)throw Error(le(90));Bw(r),zm(r,i)}}}break;case"textarea":Hw(e,n);break;case"select":t=n.value,t!=null&&no(e,!!n.multiple,t,!1)}};Zw=Ux;Jw=ra;var M9={usingClientEntryPoint:!1,Events:[Ac,Ka,Dh,Qw,qw,Ux]},bl={findFiberByHostInstance:Vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},R9={bundleType:bl.bundleType,version:bl.version,rendererPackageName:bl.rendererPackageName,rendererConfig:bl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=n5(e),e===null?null:e.stateNode},findFiberByHostInstance:bl.findFiberByHostInstance||P9,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cu.isDisabled&&cu.supportsFiber)try{Ih=cu.inject(R9),Fr=cu}catch{}}An.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M9;An.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yx(t))throw Error(le(200));return E9(e,t,null,n)};An.createRoot=function(e,t){if(!Yx(e))throw Error(le(299));var n=!1,r="",i=I4;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Vx(e,1,!1,null,null,n,!1,r,i),e[hi]=t.current,oc(e.nodeType===8?e.parentNode:e),new Wx(t)};An.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(le(188)):(e=Object.keys(e).join(","),Error(le(268,e)));return e=n5(t),e=e===null?null:e.stateNode,e};An.flushSync=function(e){return ra(e)};An.hydrate=function(e,t,n){if(!Yh(t))throw Error(le(200));return Kh(null,e,t,!0,n)};An.hydrateRoot=function(e,t,n){if(!Yx(e))throw Error(le(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",l=I4;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=A4(t,null,e,1,n??null,i,!1,s,l),e[hi]=t.current,oc(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Wh(t)};An.render=function(e,t,n){if(!Yh(t))throw Error(le(200));return Kh(null,e,t,!1,n)};An.unmountComponentAtNode=function(e){if(!Yh(e))throw Error(le(40));return e._reactRootContainer?(ra(function(){Kh(null,null,e,!1,function(){e._reactRootContainer=null,e[hi]=null})}),!0):!1};An.unstable_batchedUpdates=Ux;An.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Yh(n))throw Error(le(200));if(e==null||e._reactInternals===void 0)throw Error(le(38));return Kh(e,t,n,!1,r)};An.version="18.3.1-next-f1338f8080-20240426";function F4(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(F4)}catch(e){console.error(e)}}F4(),Fw.exports=An;var Fc=Fw.exports,S2=Fc;Pm.createRoot=S2.createRoot,Pm.hydrateRoot=S2.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gc(){return gc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gc.apply(this,arguments)}var Ji;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ji||(Ji={}));const _2="popstate";function A9(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:l,hash:d}=r.location;return Ng("",{pathname:s,search:l,hash:d},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:ph(i)}return F9(t,n,null,e)}function yt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Kx(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function I9(){return Math.random().toString(36).substr(2,8)}function j2(e,t){return{usr:e.state,key:e.key,idx:t}}function Ng(e,t,n,r){return n===void 0&&(n=null),gc({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ro(t):t,{state:n,key:t&&t.key||r||I9()})}function ph(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Ro(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function F9(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,l=i.history,d=Ji.Pop,u=null,h=p();h==null&&(h=0,l.replaceState(gc({},l.state,{idx:h}),""));function p(){return(l.state||{idx:null}).idx}function m(){d=Ji.Pop;let k=p(),w=k==null?null:k-h;h=k,u&&u({action:d,location:N.location,delta:w})}function x(k,w){d=Ji.Push;let j=Ng(N.location,k,w);n&&n(j,k),h=p()+1;let v=j2(j,h),_=N.createHref(j);try{l.pushState(v,"",_)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(_)}s&&u&&u({action:d,location:N.location,delta:1})}function y(k,w){d=Ji.Replace;let j=Ng(N.location,k,w);n&&n(j,k),h=p();let v=j2(j,h),_=N.createHref(j);l.replaceState(v,"",_),s&&u&&u({action:d,location:N.location,delta:0})}function S(k){let w=i.location.origin!=="null"?i.location.origin:i.location.href,j=typeof k=="string"?k:ph(k);return j=j.replace(/ $/,"%20"),yt(w,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,w)}let N={get action(){return d},get location(){return e(i,l)},listen(k){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(_2,m),u=k,()=>{i.removeEventListener(_2,m),u=null}},createHref(k){return t(i,k)},createURL:S,encodeLocation(k){let w=S(k);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:x,replace:y,go(k){return l.go(k)}};return N}var k2;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(k2||(k2={}));function z9(e,t,n){return n===void 0&&(n="/"),L9(e,t,n,!1)}function L9(e,t,n,r){let i=typeof t=="string"?Ro(t):t,s=wo(i.pathname||"/",n);if(s==null)return null;let l=z4(e);D9(l);let d=null;for(let u=0;d==null&&u<l.length;++u){let h=X9(s);d=Y9(l[u],h,r)}return d}function z4(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,l,d)=>{let u={relativePath:d===void 0?s.path||"":d,caseSensitive:s.caseSensitive===!0,childrenIndex:l,route:s};u.relativePath.startsWith("/")&&(yt(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let h=ls([r,u.relativePath]),p=n.concat(u);s.children&&s.children.length>0&&(yt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),z4(s.children,t,p,h)),!(s.path==null&&!s.index)&&t.push({path:h,score:H9(h,s.index),routesMeta:p})};return e.forEach((s,l)=>{var d;if(s.path===""||!((d=s.path)!=null&&d.includes("?")))i(s,l);else for(let u of L4(s.path))i(s,l,u)}),t}function L4(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let l=L4(r.join("/")),d=[];return d.push(...l.map(u=>u===""?s:[s,u].join("/"))),i&&d.push(...l),d.map(u=>e.startsWith("/")&&u===""?"/":u)}function D9(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:W9(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const O9=/^:[\w-]+$/,U9=3,$9=2,G9=1,B9=10,V9=-2,C2=e=>e==="*";function H9(e,t){let n=e.split("/"),r=n.length;return n.some(C2)&&(r+=V9),t&&(r+=$9),n.filter(i=>!C2(i)).reduce((i,s)=>i+(O9.test(s)?U9:s===""?G9:B9),r)}function W9(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function Y9(e,t,n){n===void 0&&(n=!1);let{routesMeta:r}=e,i={},s="/",l=[];for(let d=0;d<r.length;++d){let u=r[d],h=d===r.length-1,p=s==="/"?t:t.slice(s.length)||"/",m=mh({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},p),x=u.route;if(!m&&h&&n&&!r[r.length-1].route.index&&(m=mh({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},p)),!m)return null;Object.assign(i,m.params),l.push({params:i,pathname:ls([s,m.pathname]),pathnameBase:e_(ls([s,m.pathnameBase])),route:x}),m.pathnameBase!=="/"&&(s=ls([s,m.pathnameBase]))}return l}function mh(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=K9(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],l=s.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:r.reduce((h,p,m)=>{let{paramName:x,isOptional:y}=p;if(x==="*"){let N=d[m]||"";l=s.slice(0,s.length-N.length).replace(/(.)\/+$/,"$1")}const S=d[m];return y&&!S?h[x]=void 0:h[x]=(S||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:l,pattern:e}}function K9(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Kx(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,u)=>(r.push({paramName:d,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function X9(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Kx(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function wo(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const Q9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,q9=e=>Q9.test(e);function Z9(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Ro(e):e,s;if(n)if(q9(n))s=n;else{if(n.includes("//")){let l=n;n=n.replace(/\/\/+/g,"/"),Kx(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+n))}n.startsWith("/")?s=E2(n.substring(1),"/"):s=E2(n,t)}else s=t;return{pathname:s,search:t_(r),hash:n_(i)}}function E2(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function q0(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function J9(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function D4(e,t){let n=J9(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function O4(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Ro(e):(i=gc({},e),yt(!i.pathname||!i.pathname.includes("?"),q0("?","pathname","search",i)),yt(!i.pathname||!i.pathname.includes("#"),q0("#","pathname","hash",i)),yt(!i.search||!i.search.includes("#"),q0("#","search","hash",i)));let s=e===""||i.pathname==="",l=s?"/":i.pathname,d;if(l==null)d=n;else{let m=t.length-1;if(!r&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),m-=1;i.pathname=x.join("/")}d=m>=0?t[m]:"/"}let u=Z9(i,d),h=l&&l!=="/"&&l.endsWith("/"),p=(s||l===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||p)&&(u.pathname+="/"),u}const ls=e=>e.join("/").replace(/\/\/+/g,"/"),e_=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),t_=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,n_=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function r_(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const U4=["post","put","patch","delete"];new Set(U4);const i_=["get",...U4];new Set(i_);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xc(){return xc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xc.apply(this,arguments)}const Xh=T.createContext(null),$4=T.createContext(null),xs=T.createContext(null),Qh=T.createContext(null),yi=T.createContext({outlet:null,matches:[],isDataRoute:!1}),G4=T.createContext(null);function s_(e,t){let{relative:n}=t===void 0?{}:t;zc()||yt(!1);let{basename:r,navigator:i}=T.useContext(xs),{hash:s,pathname:l,search:d}=qh(e,{relative:n}),u=l;return r!=="/"&&(u=l==="/"?r:ls([r,l])),i.createHref({pathname:u,search:d,hash:s})}function zc(){return T.useContext(Qh)!=null}function ca(){return zc()||yt(!1),T.useContext(Qh).location}function B4(e){T.useContext(xs).static||T.useLayoutEffect(e)}function Fn(){let{isDataRoute:e}=T.useContext(yi);return e?v_():a_()}function a_(){zc()||yt(!1);let e=T.useContext(Xh),{basename:t,future:n,navigator:r}=T.useContext(xs),{matches:i}=T.useContext(yi),{pathname:s}=ca(),l=JSON.stringify(D4(i,n.v7_relativeSplatPath)),d=T.useRef(!1);return B4(()=>{d.current=!0}),T.useCallback(function(h,p){if(p===void 0&&(p={}),!d.current)return;if(typeof h=="number"){r.go(h);return}let m=O4(h,JSON.parse(l),s,p.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:ls([t,m.pathname])),(p.replace?r.replace:r.push)(m,p.state,p)},[t,r,l,s,e])}const V4=T.createContext(null);function da(){return T.useContext(V4)}function o_(e){let t=T.useContext(yi).outlet;return t&&T.createElement(V4.Provider,{value:e},t)}function zn(){let{matches:e}=T.useContext(yi),t=e[e.length-1];return t?t.params:{}}function qh(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=T.useContext(xs),{matches:i}=T.useContext(yi),{pathname:s}=ca(),l=JSON.stringify(D4(i,r.v7_relativeSplatPath));return T.useMemo(()=>O4(e,JSON.parse(l),s,n==="path"),[e,l,s,n])}function l_(e,t){return c_(e,t)}function c_(e,t,n,r){zc()||yt(!1);let{navigator:i}=T.useContext(xs),{matches:s}=T.useContext(yi),l=s[s.length-1],d=l?l.params:{};l&&l.pathname;let u=l?l.pathnameBase:"/";l&&l.route;let h=ca(),p;if(t){var m;let k=typeof t=="string"?Ro(t):t;u==="/"||(m=k.pathname)!=null&&m.startsWith(u)||yt(!1),p=k}else p=h;let x=p.pathname||"/",y=x;if(u!=="/"){let k=u.replace(/^\//,"").split("/");y="/"+x.replace(/^\//,"").split("/").slice(k.length).join("/")}let S=z9(e,{pathname:y}),N=p_(S&&S.map(k=>Object.assign({},k,{params:Object.assign({},d,k.params),pathname:ls([u,i.encodeLocation?i.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?u:ls([u,i.encodeLocation?i.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),s,n,r);return t&&N?T.createElement(Qh.Provider,{value:{location:xc({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Ji.Pop}},N):N}function d_(){let e=y_(),t=r_(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},t),n?T.createElement("pre",{style:i},n):null,s)}const u_=T.createElement(d_,null);class h_ extends T.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?T.createElement(yi.Provider,{value:this.props.routeContext},T.createElement(G4.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function f_(e){let{routeContext:t,match:n,children:r}=e,i=T.useContext(Xh);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),T.createElement(yi.Provider,{value:t},r)}function p_(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let l=e,d=(i=n)==null?void 0:i.errors;if(d!=null){let p=l.findIndex(m=>m.route.id&&(d==null?void 0:d[m.route.id])!==void 0);p>=0||yt(!1),l=l.slice(0,Math.min(l.length,p+1))}let u=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<l.length;p++){let m=l[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=p),m.route.id){let{loaderData:x,errors:y}=n,S=m.route.loader&&x[m.route.id]===void 0&&(!y||y[m.route.id]===void 0);if(m.route.lazy||S){u=!0,h>=0?l=l.slice(0,h+1):l=[l[0]];break}}}return l.reduceRight((p,m,x)=>{let y,S=!1,N=null,k=null;n&&(y=d&&m.route.id?d[m.route.id]:void 0,N=m.route.errorElement||u_,u&&(h<0&&x===0?(b_("route-fallback",!1),S=!0,k=null):h===x&&(S=!0,k=m.route.hydrateFallbackElement||null)));let w=t.concat(l.slice(0,x+1)),j=()=>{let v;return y?v=N:S?v=k:m.route.Component?v=T.createElement(m.route.Component,null):m.route.element?v=m.route.element:v=p,T.createElement(f_,{match:m,routeContext:{outlet:p,matches:w,isDataRoute:n!=null},children:v})};return n&&(m.route.ErrorBoundary||m.route.errorElement||x===0)?T.createElement(h_,{location:n.location,revalidation:n.revalidation,component:N,error:y,children:j(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):j()},null)}var H4=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(H4||{}),gh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(gh||{});function m_(e){let t=T.useContext(Xh);return t||yt(!1),t}function g_(e){let t=T.useContext($4);return t||yt(!1),t}function x_(e){let t=T.useContext(yi);return t||yt(!1),t}function W4(e){let t=x_(),n=t.matches[t.matches.length-1];return n.route.id||yt(!1),n.route.id}function y_(){var e;let t=T.useContext(G4),n=g_(gh.UseRouteError),r=W4(gh.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function v_(){let{router:e}=m_(H4.UseNavigateStable),t=W4(gh.UseNavigateStable),n=T.useRef(!1);return B4(()=>{n.current=!0}),T.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,xc({fromRouteId:t},s)))},[e,t])}const P2={};function b_(e,t,n){!t&&!P2[e]&&(P2[e]=!0)}function w_(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function Xx(e){return o_(e.context)}function st(e){yt(!1)}function N_(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Ji.Pop,navigator:s,static:l=!1,future:d}=e;zc()&&yt(!1);let u=t.replace(/^\/*/,"/"),h=T.useMemo(()=>({basename:u,navigator:s,static:l,future:xc({v7_relativeSplatPath:!1},d)}),[u,d,s,l]);typeof r=="string"&&(r=Ro(r));let{pathname:p="/",search:m="",hash:x="",state:y=null,key:S="default"}=r,N=T.useMemo(()=>{let k=wo(p,u);return k==null?null:{location:{pathname:k,search:m,hash:x,state:y,key:S},navigationType:i}},[u,p,m,x,y,S,i]);return N==null?null:T.createElement(xs.Provider,{value:h},T.createElement(Qh.Provider,{children:n,value:N}))}function S_(e){let{children:t,location:n}=e;return l_(Sg(t),n)}new Promise(()=>{});function Sg(e,t){t===void 0&&(t=[]);let n=[];return T.Children.forEach(e,(r,i)=>{if(!T.isValidElement(r))return;let s=[...t,i];if(r.type===T.Fragment){n.push.apply(n,Sg(r.props.children,s));return}r.type!==st&&yt(!1),!r.props.index||!r.props.children||yt(!1);let l={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Sg(r.props.children,s)),n.push(l)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xh(){return xh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xh.apply(this,arguments)}function Y4(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function __(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function j_(e,t){return e.button===0&&(!t||t==="_self")&&!__(e)}const k_=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],C_=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],E_="6";try{window.__reactRouterVersion=E_}catch{}const P_=T.createContext({isTransitioning:!1}),T_="startTransition",T2=SN[T_];function M_(e){let{basename:t,children:n,future:r,window:i}=e,s=T.useRef();s.current==null&&(s.current=A9({window:i,v5Compat:!0}));let l=s.current,[d,u]=T.useState({action:l.action,location:l.location}),{v7_startTransition:h}=r||{},p=T.useCallback(m=>{h&&T2?T2(()=>u(m)):u(m)},[u,h]);return T.useLayoutEffect(()=>l.listen(p),[l,p]),T.useEffect(()=>w_(r),[r]),T.createElement(N_,{basename:t,children:n,location:d.location,navigationType:d.action,navigator:l,future:r})}const R_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",A_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ia=T.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:s,replace:l,state:d,target:u,to:h,preventScrollReset:p,viewTransition:m}=t,x=Y4(t,k_),{basename:y}=T.useContext(xs),S,N=!1;if(typeof h=="string"&&A_.test(h)&&(S=h,R_))try{let v=new URL(window.location.href),_=h.startsWith("//")?new URL(v.protocol+h):new URL(h),E=wo(_.pathname,y);_.origin===v.origin&&E!=null?h=E+_.search+_.hash:N=!0}catch{}let k=s_(h,{relative:i}),w=z_(h,{replace:l,state:d,target:u,preventScrollReset:p,relative:i,viewTransition:m});function j(v){r&&r(v),v.defaultPrevented||w(v)}return T.createElement("a",xh({},x,{href:S||k,onClick:N||s?r:j,ref:n,target:u}))}),I_=T.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:l=!1,style:d,to:u,viewTransition:h,children:p}=t,m=Y4(t,C_),x=qh(u,{relative:m.relative}),y=ca(),S=T.useContext($4),{navigator:N,basename:k}=T.useContext(xs),w=S!=null&&L_(x)&&h===!0,j=N.encodeLocation?N.encodeLocation(x).pathname:x.pathname,v=y.pathname,_=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;i||(v=v.toLowerCase(),_=_?_.toLowerCase():null,j=j.toLowerCase()),_&&k&&(_=wo(_,k)||_);const E=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let A=v===j||!l&&v.startsWith(j)&&v.charAt(E)==="/",D=_!=null&&(_===j||!l&&_.startsWith(j)&&_.charAt(j.length)==="/"),M={isActive:A,isPending:D,isTransitioning:w},I=A?r:void 0,P;typeof s=="function"?P=s(M):P=[s,A?"active":null,D?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let L=typeof d=="function"?d(M):d;return T.createElement(ia,xh({},m,{"aria-current":I,className:P,ref:n,style:L,to:u,viewTransition:h}),typeof p=="function"?p(M):p)});var _g;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(_g||(_g={}));var M2;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(M2||(M2={}));function F_(e){let t=T.useContext(Xh);return t||yt(!1),t}function z_(e,t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:l,viewTransition:d}=t===void 0?{}:t,u=Fn(),h=ca(),p=qh(e,{relative:l});return T.useCallback(m=>{if(j_(m,n)){m.preventDefault();let x=r!==void 0?r:ph(h)===ph(p);u(e,{replace:x,state:i,preventScrollReset:s,relative:l,viewTransition:d})}},[h,u,p,r,i,n,e,s,l,d])}function L_(e,t){t===void 0&&(t={});let n=T.useContext(P_);n==null&&yt(!1);let{basename:r}=F_(_g.useViewTransitionState),i=qh(e,{relative:t.relative});if(!n.isTransitioning)return!1;let s=wo(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=wo(n.nextLocation.pathname,r)||n.nextLocation.pathname;return mh(i.pathname,l)!=null||mh(i.pathname,s)!=null}const Qx="-",D_=e=>{const t=U_(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:l=>{const d=l.split(Qx);return d[0]===""&&d.length!==1&&d.shift(),K4(d,t)||O_(l)},getConflictingClassGroupIds:(l,d)=>{const u=n[l]||[];return d&&r[l]?[...u,...r[l]]:u}}},K4=(e,t)=>{var l;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),i=r?K4(e.slice(1),r):void 0;if(i)return i;if(t.validators.length===0)return;const s=e.join(Qx);return(l=t.validators.find(({validator:d})=>d(s)))==null?void 0:l.classGroupId},R2=/^\[(.+)\]$/,O_=e=>{if(R2.test(e)){const t=R2.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},U_=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return G_(Object.entries(e.classGroups),n).forEach(([s,l])=>{jg(l,r,s,t)}),r},jg=(e,t,n,r)=>{e.forEach(i=>{if(typeof i=="string"){const s=i===""?t:A2(t,i);s.classGroupId=n;return}if(typeof i=="function"){if($_(i)){jg(i(r),t,n,r);return}t.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,l])=>{jg(l,A2(t,s),n,r)})})},A2=(e,t)=>{let n=e;return t.split(Qx).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},$_=e=>e.isThemeGetter,G_=(e,t)=>t?e.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?t+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([l,d])=>[t+l,d])):s);return[n,i]}):e,B_=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const i=(s,l)=>{n.set(s,l),t++,t>e&&(t=0,r=n,n=new Map)};return{get(s){let l=n.get(s);if(l!==void 0)return l;if((l=r.get(s))!==void 0)return i(s,l),l},set(s,l){n.has(s)?n.set(s,l):i(s,l)}}},X4="!",V_=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,i=t[0],s=t.length,l=d=>{const u=[];let h=0,p=0,m;for(let k=0;k<d.length;k++){let w=d[k];if(h===0){if(w===i&&(r||d.slice(k,k+s)===t)){u.push(d.slice(p,k)),p=k+s;continue}if(w==="/"){m=k;continue}}w==="["?h++:w==="]"&&h--}const x=u.length===0?d:d.substring(p),y=x.startsWith(X4),S=y?x.substring(1):x,N=m&&m>p?m-p:void 0;return{modifiers:u,hasImportantModifier:y,baseClassName:S,maybePostfixModifierPosition:N}};return n?d=>n({className:d,parseClassName:l}):l},H_=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},W_=e=>({cache:B_(e.cacheSize),parseClassName:V_(e),...D_(e)}),Y_=/\s+/,K_=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=t,s=[],l=e.trim().split(Y_);let d="";for(let u=l.length-1;u>=0;u-=1){const h=l[u],{modifiers:p,hasImportantModifier:m,baseClassName:x,maybePostfixModifierPosition:y}=n(h);let S=!!y,N=r(S?x.substring(0,y):x);if(!N){if(!S){d=h+(d.length>0?" "+d:d);continue}if(N=r(x),!N){d=h+(d.length>0?" "+d:d);continue}S=!1}const k=H_(p).join(":"),w=m?k+X4:k,j=w+N;if(s.includes(j))continue;s.push(j);const v=i(N,S);for(let _=0;_<v.length;++_){const E=v[_];s.push(w+E)}d=h+(d.length>0?" "+d:d)}return d};function X_(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=Q4(t))&&(r&&(r+=" "),r+=n);return r}const Q4=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=Q4(e[r]))&&(n&&(n+=" "),n+=t);return n};function Q_(e,...t){let n,r,i,s=l;function l(u){const h=t.reduce((p,m)=>m(p),e());return n=W_(h),r=n.cache.get,i=n.cache.set,s=d,d(u)}function d(u){const h=r(u);if(h)return h;const p=K_(u,n);return i(u,p),p}return function(){return s(X_.apply(null,arguments))}}const et=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},q4=/^\[(?:([a-z-]+):)?(.+)\]$/i,q_=/^\d+\/\d+$/,Z_=new Set(["px","full","screen"]),J_=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,e7=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,t7=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,n7=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,r7=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ei=e=>lo(e)||Z_.has(e)||q_.test(e),Oi=e=>Ao(e,"length",u7),lo=e=>!!e&&!Number.isNaN(Number(e)),Z0=e=>Ao(e,"number",lo),wl=e=>!!e&&Number.isInteger(Number(e)),i7=e=>e.endsWith("%")&&lo(e.slice(0,-1)),Pe=e=>q4.test(e),Ui=e=>J_.test(e),s7=new Set(["length","size","percentage"]),a7=e=>Ao(e,s7,Z4),o7=e=>Ao(e,"position",Z4),l7=new Set(["image","url"]),c7=e=>Ao(e,l7,f7),d7=e=>Ao(e,"",h7),Nl=()=>!0,Ao=(e,t,n)=>{const r=q4.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},u7=e=>e7.test(e)&&!t7.test(e),Z4=()=>!1,h7=e=>n7.test(e),f7=e=>r7.test(e),p7=()=>{const e=et("colors"),t=et("spacing"),n=et("blur"),r=et("brightness"),i=et("borderColor"),s=et("borderRadius"),l=et("borderSpacing"),d=et("borderWidth"),u=et("contrast"),h=et("grayscale"),p=et("hueRotate"),m=et("invert"),x=et("gap"),y=et("gradientColorStops"),S=et("gradientColorStopPositions"),N=et("inset"),k=et("margin"),w=et("opacity"),j=et("padding"),v=et("saturate"),_=et("scale"),E=et("sepia"),A=et("skew"),D=et("space"),M=et("translate"),I=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],L=()=>["auto",Pe,t],F=()=>[Pe,t],G=()=>["",ei,Oi],R=()=>["auto",lo,Pe],$=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],B=()=>["solid","dashed","dotted","double","none"],Q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],K=()=>["start","end","center","between","around","evenly","stretch"],H=()=>["","0",Pe],W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],z=()=>[lo,Pe];return{cacheSize:500,separator:":",theme:{colors:[Nl],spacing:[ei,Oi],blur:["none","",Ui,Pe],brightness:z(),borderColor:[e],borderRadius:["none","","full",Ui,Pe],borderSpacing:F(),borderWidth:G(),contrast:z(),grayscale:H(),hueRotate:z(),invert:H(),gap:F(),gradientColorStops:[e],gradientColorStopPositions:[i7,Oi],inset:L(),margin:L(),opacity:z(),padding:F(),saturate:z(),scale:z(),sepia:H(),skew:z(),space:F(),translate:F()},classGroups:{aspect:[{aspect:["auto","square","video",Pe]}],container:["container"],columns:[{columns:[Ui]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...$(),Pe]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[N]}],"inset-x":[{"inset-x":[N]}],"inset-y":[{"inset-y":[N]}],start:[{start:[N]}],end:[{end:[N]}],top:[{top:[N]}],right:[{right:[N]}],bottom:[{bottom:[N]}],left:[{left:[N]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",wl,Pe]}],basis:[{basis:L()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Pe]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",wl,Pe]}],"grid-cols":[{"grid-cols":[Nl]}],"col-start-end":[{col:["auto",{span:["full",wl,Pe]},Pe]}],"col-start":[{"col-start":R()}],"col-end":[{"col-end":R()}],"grid-rows":[{"grid-rows":[Nl]}],"row-start-end":[{row:["auto",{span:[wl,Pe]},Pe]}],"row-start":[{"row-start":R()}],"row-end":[{"row-end":R()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Pe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Pe]}],gap:[{gap:[x]}],"gap-x":[{"gap-x":[x]}],"gap-y":[{"gap-y":[x]}],"justify-content":[{justify:["normal",...K()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...K(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...K(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[j]}],px:[{px:[j]}],py:[{py:[j]}],ps:[{ps:[j]}],pe:[{pe:[j]}],pt:[{pt:[j]}],pr:[{pr:[j]}],pb:[{pb:[j]}],pl:[{pl:[j]}],m:[{m:[k]}],mx:[{mx:[k]}],my:[{my:[k]}],ms:[{ms:[k]}],me:[{me:[k]}],mt:[{mt:[k]}],mr:[{mr:[k]}],mb:[{mb:[k]}],ml:[{ml:[k]}],"space-x":[{"space-x":[D]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[D]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Pe,t]}],"min-w":[{"min-w":[Pe,t,"min","max","fit"]}],"max-w":[{"max-w":[Pe,t,"none","full","min","max","fit","prose",{screen:[Ui]},Ui]}],h:[{h:[Pe,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Pe,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Pe,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Pe,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Ui,Oi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Z0]}],"font-family":[{font:[Nl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Pe]}],"line-clamp":[{"line-clamp":["none",lo,Z0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ei,Pe]}],"list-image":[{"list-image":["none",Pe]}],"list-style-type":[{list:["none","disc","decimal",Pe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...B(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ei,Oi]}],"underline-offset":[{"underline-offset":["auto",ei,Pe]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...$(),o7]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",a7]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},c7]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[S]}],"gradient-via-pos":[{via:[S]}],"gradient-to-pos":[{to:[S]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[d]}],"border-w-x":[{"border-x":[d]}],"border-w-y":[{"border-y":[d]}],"border-w-s":[{"border-s":[d]}],"border-w-e":[{"border-e":[d]}],"border-w-t":[{"border-t":[d]}],"border-w-r":[{"border-r":[d]}],"border-w-b":[{"border-b":[d]}],"border-w-l":[{"border-l":[d]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...B(),"hidden"]}],"divide-x":[{"divide-x":[d]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[d]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:B()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...B()]}],"outline-offset":[{"outline-offset":[ei,Pe]}],"outline-w":[{outline:[ei,Oi]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:G()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[ei,Oi]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Ui,d7]}],"shadow-color":[{shadow:[Nl]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...Q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Q()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",Ui,Pe]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[m]}],saturate:[{saturate:[v]}],sepia:[{sepia:[E]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[E]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Pe]}],duration:[{duration:z()}],ease:[{ease:["linear","in","out","in-out",Pe]}],delay:[{delay:z()}],animate:[{animate:["none","spin","ping","pulse","bounce",Pe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[wl,Pe]}],"translate-x":[{"translate-x":[M]}],"translate-y":[{"translate-y":[M]}],"skew-x":[{"skew-x":[A]}],"skew-y":[{"skew-y":[A]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Pe]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Pe]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Pe]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[ei,Oi,Z0]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},qx=Q_(p7),Fe=({children:e,className:t,...n})=>a.jsx("div",{className:qx("bg-glass backdrop-blur-xl border border-glass-border rounded-xl",t),...n,children:e}),yc=({url:e,name:t,alt:n="User",size:r="md",className:i})=>{const s={sm:"size-8 text-xs",md:"size-10 text-sm",lg:"size-16 text-lg",xl:"size-32 text-2xl"},l=t?t.charAt(0).toUpperCase():n?n.charAt(0).toUpperCase():"?";return a.jsx("div",{className:qx("rounded-full bg-surface-light border border-white/10 flex items-center justify-center overflow-hidden shrink-0 text-slate-400 font-bold select-none",s[r],i),children:e?a.jsx("img",{src:e,alt:t||n,className:"w-full h-full object-cover"}):a.jsx("span",{children:l})})},m7=()=>a.jsx("div",{className:"flex h-screen w-full overflow-hidden bg-background-dark relative",children:a.jsx("main",{className:"flex-1 min-w-0 relative overflow-hidden flex flex-col",children:a.jsx(Xx,{})})}),Ye=T.forwardRef(({children:e,variant:t="primary",size:n="md",className:r,icon:i,isLoading:s,...l},d)=>{const u="inline-flex items-center justify-center rounded-lg font-medium transition-all focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed",h={primary:"bg-primary hover:bg-primary-hover text-white shadow-lg shadow-primary/25 border border-transparent",secondary:"bg-surface-light hover:bg-surface-lighter text-slate-200 border border-glass-border",ghost:"bg-transparent hover:bg-white/5 text-slate-400 hover:text-white",danger:"bg-red-500/10 hover:bg-red-500/20 text-red-500 border border-red-500/20"},p={sm:"px-3 py-1.5 text-xs gap-1.5",md:"px-4 py-2 text-sm gap-2",lg:"px-6 py-3 text-base gap-3"};return a.jsxs("button",{ref:d,className:qx(u,h[t],p[n],r),disabled:s,...l,children:[s?a.jsx("span",{className:"material-symbols-outlined animate-spin text-[18px]",children:"progress_activity"}):i?a.jsx("span",{className:"material-symbols-outlined text-[18px]",children:i}):null,e]})});Ye.displayName="Button";const g7=({isOpen:e,onClose:t,onCreate:n})=>{const[r,i]=T.useState(""),[s,l]=T.useState("Fantasy");if(!e)return null;const d=u=>{u.preventDefault(),n({title:r,genre:s}),i(""),t()};return a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t}),a.jsx("div",{className:"relative w-full max-w-md animate-in fade-in zoom-in duration-200",children:a.jsxs(Fe,{className:"p-8 border-primary/30 shadow-2xl shadow-primary/10",children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Create New World"}),a.jsxs("form",{onSubmit:d,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-400 mb-1 uppercase tracking-wider",children:"Project Title"}),a.jsx("input",{type:"text",value:r,onChange:u=>i(u.target.value),placeholder:"e.g., The Realms of Aethelgard",className:"w-full bg-background-dark/50 border border-glass-border rounded-lg px-4 py-3 text-white focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-all",autoFocus:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-400 mb-1 uppercase tracking-wider",children:"Genre"}),a.jsxs("select",{value:s,onChange:u=>l(u.target.value),className:"w-full bg-background-dark/50 border border-glass-border rounded-lg px-4 py-3 text-white focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-all appearance-none",children:[a.jsx("option",{value:"Fantasy",children:"Fantasy"}),a.jsx("option",{value:"Sci-Fi",children:"Sci-Fi"}),a.jsx("option",{value:"Horror",children:"Horror"}),a.jsx("option",{value:"Steampunk",children:"Steampunk"}),a.jsx("option",{value:"Modern",children:"Modern"}),a.jsx("option",{value:"Historical",children:"Historical"})]})]}),a.jsxs("div",{className:"pt-4 flex justify-end gap-3",children:[a.jsx(Ye,{variant:"ghost",onClick:t,type:"button",children:"Cancel"}),a.jsx(Ye,{variant:"primary",type:"submit",icon:"add",children:"Create World"})]})]})]})})]})},x7="/api",ue={async request(e,t={}){const n=`${x7}${e}`,r={"Content-Type":"application/json",...t.headers},i=await fetch(n,{...t,headers:r,credentials:"include"});if(!i.ok){const s=await i.json().catch(()=>({}));throw new Error(s.error||`HTTP error! status: ${i.status}`)}return i.status===204||i.headers.get("content-length")==="0"?null:i.json()},get(e,t={}){return this.request(e,{method:"GET",headers:t})},post(e,t,n={}){return this.request(e,{method:"POST",body:JSON.stringify(t),headers:n})},put(e,t,n={}){return this.request(e,{method:"PUT",body:JSON.stringify(t),headers:n})},patch(e,t,n={}){return this.request(e,{method:"PATCH",body:JSON.stringify(t),headers:n})},delete(e,t={}){return this.request(e,{method:"DELETE",headers:t})}},J0={list:()=>ue.get("/workspaces"),create:(e,t,n,r)=>ue.post("/workspaces",{name:e,title:t,genre:n,imageUrl:r}),delete:e=>ue.delete("/workspaces/"+e),select:e=>ue.post("/workspaces/select",{projectName:e})},y7=({title:e,desc:t,type:n,updated:r,image:i,id:s,name:l,username:d,onDelete:u})=>a.jsx(ia,{to:`/${d}/${l}`,className:"block group",children:a.jsxs(Fe,{className:"h-64 flex flex-col p-6 hover:shadow-2xl hover:shadow-primary/20 hover:border-primary/50 transition-all relative",children:[a.jsx("div",{className:"absolute top-6 right-6 z-20 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx("button",{onClick:h=>{h.preventDefault(),h.stopPropagation(),u(l)},className:"p-2 rounded-lg bg-red-500/10 hover:bg-red-500/20 text-red-500 transition-colors",children:a.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"})})}),a.jsxs("div",{className:"mb-auto",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("div",{className:"h-10 w-10 rounded-xl bg-primary/20 flex items-center justify-center text-primary border border-primary/20 group-hover:scale-105 transition-transform",children:a.jsx("span",{className:"material-symbols-outlined text-xl",children:n==="Fantasy"?"auto_awesome":n==="Sci-Fi"?"rocket_launch":"public"})}),a.jsxs("div",{children:[a.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-primary",children:n}),a.jsx("h3",{className:"text-xl font-bold text-white leading-tight group-hover:text-primary transition-colors",children:e})]})]}),a.jsx("p",{className:"text-sm text-slate-400 line-clamp-3 leading-relaxed",children:t})]}),a.jsxs("div",{className:"pt-4 border-t border-white/5 flex justify-between items-center text-xs text-slate-500",children:[a.jsxs("span",{children:["Updated ",r]}),a.jsx("span",{className:"group-hover:translate-x-1 transition-transform material-symbols-outlined text-base",children:"arrow_forward"})]})]})}),v7=()=>{const[e,t]=T.useState([]),[n,r]=T.useState(!1),[i,s]=T.useState(!0);Fn(),T.useEffect(()=>{l()},[]);const l=async()=>{try{const h=await ue.get("/proyectos");t(h)}catch(h){console.error("Error fetching projects:",h)}finally{s(!1)}},d=async h=>{if(window.confirm(`Are you sure you want to delete "${h}"?`))try{await ue.delete(`/proyectos/${h}`),l()}catch(p){console.error("Failed to delete project:",p)}},u=async h=>{try{(await ue.post("/proyectos/crear",{nombreProyecto:h.title,tipo:h.genre,descripcion:`A new ${h.genre} world.`})).success&&(r(!1),l())}catch(p){console.error("Error creating project:",p)}};return a.jsxs("div",{className:"flex-1 flex flex-col items-center p-12 pt-28 overflow-y-auto custom-scrollbar relative",children:[a.jsxs("div",{className:"w-full max-w-6xl space-y-12",children:[a.jsxs("header",{className:"flex flex-col gap-2",children:[a.jsx("h1",{className:"text-5xl font-manrope font-black text-white tracking-tight",children:"Chronos Atlas"}),a.jsx("p",{className:"text-slate-500 text-lg font-medium",children:"Select a world to begin building."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[e.map(h=>a.jsx(y7,{id:h.id,name:h.nombreProyecto,username:h.usuario||"Roberto",title:h.nombreProyecto,desc:h.descripcion,type:h.tipo,updated:"Recently",image:h.imagenUrl,onDelete:d},h.id)),i&&e.length===0&&a.jsxs("div",{className:"col-span-full py-20 flex flex-col items-center gap-4 opacity-30",children:[a.jsx("span",{className:"material-symbols-outlined text-6xl animate-spin",children:"refresh"}),a.jsx("span",{className:"text-sm font-bold uppercase tracking-widest",children:"Scanning Vaults..."})]}),!i&&e.length===0&&a.jsxs("div",{className:"col-span-full py-20 flex flex-col items-center gap-4 border-2 border-dashed border-white/5 rounded-[3rem] bg-white/[0.02]",children:[a.jsx("span",{className:"material-symbols-outlined text-6xl text-slate-700",children:"folder_open"}),a.jsx("span",{className:"text-sm font-medium text-slate-500",children:"No worlds found. Time to create one."})]}),a.jsxs("div",{onClick:()=>r(!0),className:"group relative h-64 rounded-2xl border-2 border-dashed border-slate-700 hover:border-primary hover:bg-primary/5 flex flex-col items-center justify-center cursor-pointer transition-all",children:[a.jsx("div",{className:"size-16 rounded-full bg-surface-light flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:a.jsx("span",{className:"material-symbols-outlined text-3xl text-slate-400 group-hover:text-primary",children:"add"})}),a.jsx("span",{className:"text-sm font-bold text-slate-400 group-hover:text-primary",children:"Create New Project"})]})]})]}),a.jsx(g7,{isOpen:n,onClose:()=>r(!1),onCreate:u})]})},b7=["FANTASA","SCI-FI","HORROR","LORE","MISTERIO","HISTRICO","CYBERPUNK","STEAMPUNK"],w7=({isOpen:e,onClose:t,onCreate:n})=>{if(!e)return null;const[r,i]=T.useState(!1),[s,l]=T.useState({name:"",title:"",genre:"FANTASA",imageUrl:"https://images.unsplash.com/photo-1518709268805-4e9042af9f23?auto=format&fit=crop&q=80&w=800"}),d=h=>{const{name:p,value:m}=h.target;l(x=>({...x,[p]:m}))},u=h=>{h.preventDefault();let p=s.name;if(!p&&s.title&&(p=s.title.toLowerCase().replace(/[^a-z0-9]/g,"-")),!p){alert("Project ID/Name is required");return}n({...s,name:p}),t(),l({name:"",title:"",genre:"FANTASA",imageUrl:"https://images.unsplash.com/photo-1518709268805-4e9042af9f23?auto=format&fit=crop&q=80&w=800"})};return Fc.createPortal(a.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",onClick:t}),a.jsxs("div",{className:"relative w-full max-w-2xl bg-[#0a0a0c] border border-white/10 rounded-3xl shadow-2xl overflow-hidden flex animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"w-1/3 bg-black relative hidden sm:block",children:[a.jsx("img",{src:s.imageUrl,onError:()=>i(!0),className:`absolute inset-0 w-full h-full object-cover opacity-60 transition-opacity duration-500 ${r?"hidden":""}`,alt:"Preview"}),a.jsxs("div",{className:"absolute inset-x-0 bottom-0 p-6 bg-gradient-to-t from-black to-transparent",children:[a.jsx("h4",{className:"text-white font-black text-xl leading-none",children:s.title||"Untitled"}),a.jsx("span",{className:"text-[10px] font-bold text-primary uppercase tracking-widest mt-2 block",children:s.genre})]})]}),a.jsxs("div",{className:"flex-1 p-8",children:[a.jsx("h2",{className:"text-2xl font-black text-white mb-6",children:"Nuevo Cuaderno"}),a.jsxs("form",{onSubmit:u,className:"space-y-5",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-text-muted",children:"Ttulo del Proyecto"}),a.jsx("input",{type:"text",name:"title",value:s.title,onChange:d,placeholder:"e.g. Las Crnicas de Etheria",className:"w-full bg-surface-dark border border-glass-border rounded-xl px-4 py-3 text-white text-sm focus:border-primary/50 focus:ring-1 focus:ring-primary/50 outline-none transition-all",autoFocus:!0})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-text-muted",children:"ID de Archivo (Slug)"}),a.jsx("input",{type:"text",name:"name",value:s.name,onChange:d,placeholder:"e.g. etheria-v1",className:"w-full bg-surface-dark border border-glass-border rounded-xl px-4 py-3 text-white font-mono text-xs focus:border-primary/50 focus:ring-1 focus:ring-primary/50 outline-none transition-all placeholder:text-white/10"}),a.jsx("p",{className:"text-[10px] text-white/20",children:"Se usar como nombre del archivo .db"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-text-muted",children:"Gnero"}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:b7.slice(0,4).map(h=>a.jsx("button",{type:"button",onClick:()=>l(p=>({...p,genre:h})),className:`px-3 py-2 rounded-lg text-[10px] font-bold border transition-all ${s.genre===h?"bg-primary text-white border-primary":"bg-surface-dark border-glass-border text-text-muted hover:border-white/20"}`,children:h},h))})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-text-muted",children:"Imagen de Portada (URL)"}),a.jsx("input",{type:"text",name:"imageUrl",value:s.imageUrl,onChange:h=>{l(p=>({...p,imageUrl:h.target.value})),i(!1)},className:"w-full bg-surface-dark border border-glass-border rounded-xl px-4 py-3 text-white text-xs focus:border-primary/50 focus:ring-1 focus:ring-primary/50 outline-none transition-all truncate"})]}),a.jsxs("div",{className:"pt-4 flex gap-3",children:[a.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-3 bg-surface-dark hover:bg-white/5 border border-glass-border rounded-xl text-xs font-bold text-text-muted transition-all",children:"Cancelar"}),a.jsxs("button",{type:"submit",className:"flex-1 px-4 py-3 bg-primary hover:bg-primary-light text-white rounded-xl text-xs font-bold transition-all shadow-lg shadow-primary/20 flex items-center justify-center gap-2",children:[a.jsx("span",{className:"material-symbols-outlined text-sm",children:"rocket_launch"}),"Crear Universo"]})]})]})]})]})]}),document.body)},N7=()=>{const e=Fn(),[t,n]=T.useState([]),[r,i]=T.useState(!0),[s,l]=T.useState(null),[d,u]=T.useState(""),[h,p]=T.useState(!1);T.useEffect(()=>{m()},[]);const m=async()=>{try{i(!0);const k=await J0.list();n(k)}catch(k){console.error("Failed to load workspaces",k),l("Error al cargar cuadernos. Est el servidor encendido?")}finally{i(!1)}},x=async k=>{try{i(!0);const w=await J0.select(k);w.success&&w.redirect&&(localStorage.setItem("user",JSON.stringify({username:"local",success:!0})),e(w.redirect))}catch(w){l(w.message||"Fallo al entrar al cuaderno"),i(!1)}},y=async k=>{try{i(!0),(await J0.create(k.name,k.title,k.genre,k.imageUrl)).success&&await x(k.name)}catch{l("Error al crear cuaderno"),i(!1)}},S=k=>{const w=k.split("").reduce((_,E)=>_+E.charCodeAt(0),0),j=["FANTASA","SCI-FI","HORROR","LORE","MISTERIO"],v=["https://images.unsplash.com/photo-1518709268805-4e9042af9f23?auto=format&fit=crop&q=80&w=800","https://images.unsplash.com/photo-1451187580459-43490279c0fa?auto=format&fit=crop&q=80&w=800","https://images.unsplash.com/photo-1505634467193-785724601157?auto=format&fit=crop&q=80&w=800","https://images.unsplash.com/photo-1478720568477-152d9b164e26?auto=format&fit=crop&q=80&w=800"];return{tag:j[w%j.length],img:v[w%v.length],desc:"Una tierra dividida por la magia y la tecnologa antigua...",initials:k.substring(0,2).toUpperCase(),time:"hace 2h"}},N=t.filter(k=>k.toLowerCase().includes(d.toLowerCase()));return a.jsxs("div",{className:"min-h-screen w-full bg-[#0a0b14] text-white flex flex-col items-center p-8 font-sans selection:bg-indigo-500/30 overflow-y-auto custom-scrollbar",children:[a.jsxs("header",{className:"w-full max-w-6xl mt-24 mb-12 flex flex-col lg:flex-row lg:items-end justify-between gap-8",children:[a.jsx("div",{className:"space-y-4",children:a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("h1",{className:"text-6xl font-black tracking-tighter leading-none",children:[a.jsx("span",{className:"block text-indigo-400",children:"Mis"}),a.jsx("span",{className:"block text-white",children:"Cuadernos"})]})})}),a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"relative group min-w-[300px]",children:[a.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-white/20 text-xl group-focus-within:text-indigo-400 transition-colors pointer-events-none",children:"search"}),a.jsx("input",{type:"text",placeholder:"Buscar...",value:d,onChange:k=>u(k.target.value),className:"w-full bg-[#13141f] border border-white/5 rounded-2xl py-3 pl-12 pr-4 text-sm text-white focus:outline-none focus:border-indigo-500/50 transition-all placeholder:text-white/10"})]})})]}),a.jsx("section",{className:"w-full max-w-6xl",children:r?a.jsxs("div",{className:"flex flex-col items-center gap-6 py-20 opacity-20",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.3em]",children:"Accediendo al Sector Local..."})]}):a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 pb-20",children:[a.jsxs("div",{onClick:()=>p(!0),className:"group relative h-[380px] rounded-[2.5rem] border-2 border-dashed border-white/5 flex flex-col items-center justify-center gap-6 hover:bg-white/5 hover:border-indigo-500/30 transition-all cursor-pointer overflow-hidden animate-in fade-in duration-700",children:[a.jsx("div",{className:"w-20 h-20 rounded-full bg-[#13141f] border border-white/5 flex items-center justify-center text-4xl text-white/20 group-hover:scale-110 group-hover:text-indigo-400 transition-all",children:a.jsx("span",{className:"material-symbols-outlined text-4xl",children:"add"})}),a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-xl font-black tracking-tight text-white/50 group-hover:text-white transition-colors",children:"Nuevo Cuaderno"}),a.jsx("p",{className:"text-[10px] font-bold text-white/20 uppercase tracking-widest mt-2 group-hover:text-white/40",children:"Inicia un nuevo universo"})]})]}),N.map(k=>{const w=S(k);return a.jsxs("div",{onClick:()=>x(k),className:"group relative h-[380px] rounded-[2.5rem] bg-[#13141f] border border-white/5 overflow-hidden transition-all hover:-translate-y-2 hover:shadow-2xl hover:shadow-indigo-500/10 cursor-pointer animate-in fade-in slide-in-from-bottom-4",children:[a.jsxs("div",{className:"absolute inset-x-0 top-0 h-2/3",children:[a.jsx("img",{src:w.img,className:"w-full h-full object-cover opacity-40 group-hover:opacity-60 transition-opacity",alt:""}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#13141f] via-transparent to-transparent"})]}),a.jsx("div",{className:"absolute inset-0 flex flex-col justify-end p-8",children:a.jsxs("div",{className:"mt-auto space-y-3",children:[a.jsx("span",{className:"inline-block px-3 py-1 bg-red-500/20 border border-red-500/30 text-[9px] font-black text-red-100 rounded-lg tracking-widest uppercase",children:w.tag}),a.jsx("h3",{className:"text-3xl font-black text-white tracking-tighter leading-tight group-hover:text-indigo-400 transition-colors",children:k}),a.jsx("p",{className:"text-xs text-white/40 line-clamp-2 leading-relaxed",children:w.desc}),a.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-white/5 mt-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]"}),a.jsxs("span",{className:"text-[9px] font-black uppercase tracking-widest text-white/20",children:["ltima edicin: ",a.jsx("span",{className:"text-white/40",children:w.time})]})]}),a.jsx("div",{className:"w-8 h-8 rounded-full bg-white/5 border border-white/10 flex items-center justify-center text-[10px] font-black text-indigo-300",children:w.initials})]})]})})]},k)})]})}),s&&a.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 px-6 py-3 bg-red-500/20 border border-red-500/30 text-red-200 rounded-2xl text-xs font-bold shadow-2xl animate-bounce",children:s}),a.jsx(w7,{isOpen:h,onClose:()=>p(!1),onCreate:y})]})},du=({icon:e,title:t,desc:n,color:r})=>a.jsxs("div",{className:"group relative p-8 rounded-[32px] bg-surface-dark border border-white/5 hover:border-white/10 transition-all cursor-pointer flex flex-col h-full gap-6 hover:shadow-2xl hover:shadow-black/40",children:[a.jsx("div",{className:`size-14 rounded-2xl ${r} flex items-center justify-center text-white shadow-lg group-hover:scale-110 transition-all duration-500`,children:a.jsx("span",{className:"material-symbols-outlined text-3xl",children:e})}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-2xl font-bold text-white tracking-tight",children:t}),a.jsx("p",{className:"text-slate-500 text-sm leading-relaxed",children:n})]}),a.jsxs("div",{className:"mt-auto pt-4 border-t border-white/5 flex items-center justify-between text-slate-500 group-hover:text-white transition-colors",children:[a.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Architect Tool"}),a.jsx("span",{className:"material-symbols-outlined text-xl group-hover:translate-x-1 transition-transform",children:"arrow_forward"})]})]}),S7=()=>{const{projectName:e,handleCreateEntity:t}=da(),n=Fn();return zn(),a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-12 gap-16 max-w-6xl mx-auto w-full",children:[a.jsxs("div",{className:"flex flex-col items-center text-center gap-8 max-w-2xl animate-in fade-in slide-in-from-bottom-8 duration-700",children:[a.jsx("div",{className:"size-20 rounded-full bg-white text-background-dark flex items-center justify-center shadow-2xl shadow-white/20",children:a.jsx("span",{className:"material-symbols-outlined text-4xl font-bold",children:"explore"})}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h1",{className:"text-6xl font-manrope font-black text-white tracking-tighter leading-tight",children:"Bienvenido de nuevo, Viajero."}),a.jsxs("p",{className:"text-xl text-slate-400 font-medium leading-relaxed",children:["Tu mundo ",a.jsx("span",{className:"text-primary font-bold",children:e||"Cargando..."})," espera ser descubierto. El lienzo est vaco, pero tu imaginacin no tiene lmites. Cmo empezamos hoy?"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 w-full items-stretch animate-in fade-in slide-in-from-bottom-12 duration-1000 delay-300",children:[a.jsx("div",{onClick:()=>t(null,"default"),children:a.jsx(du,{icon:"person_add",title:"Aadir Entidad",desc:"Agrega un personaje, lugar o item importante a tu base de datos.",color:"bg-indigo-600"})}),a.jsx("div",{onClick:()=>t(null,"map"),children:a.jsx(du,{icon:"map",title:"Crear Mapa",desc:"Dibuja una representacin cartogrfica de una regin.",color:"bg-purple-600"})}),a.jsx("div",{onClick:()=>n("writing"),children:a.jsx(du,{icon:"edit_note",title:"Empezar a Escribir",desc:"Abre el editor de texto y comienza un nuevo captulo.",color:"bg-emerald-600"})}),a.jsx("div",{onClick:()=>alert("WIP: Notas Rpidas"),children:a.jsx(du,{icon:"lightbulb",title:"Ver Ideas Rpidas",desc:"Revisa tus notas y fragmentos de inspiracin guardados.",color:"bg-amber-600"})})]})]})},_7=()=>{var p,m;const e=Fn(),[t,n]=T.useState(null),[r,i]=T.useState("appearance"),[s,l]=T.useState({theme:"deep_space",font:"Manrope",fontSize:16,focusMode:!1,transparencyEffects:!0,vaultPath:"C:/Users/Author/Documents/ChronosAtlas/MyFirstWorld"});T.useEffect(()=>{console.log("Settings Page Mounted");try{const x=localStorage.getItem("user");x&&x!=="undefined"&&n(JSON.parse(x))}catch(x){console.error("Failed to parse user settings",x)}},[]);const d=async()=>{try{await ue.post("/auth/logout",{})}catch(x){console.error("Logout error",x)}finally{localStorage.removeItem("user"),sessionStorage.clear(),e("/")}},u=[{id:"general",label:"General",icon:"settings"},{id:"appearance",label:"Apariencia",icon:"palette"},{id:"editor",label:"Editor",icon:"edit_note"},{id:"sync",label:"Sincronizacin",icon:"sync_lock"},{id:"notifications",label:"Notificaciones",icon:"notifications"}],h=[{id:"deep_space",label:"Deep Space",color:"#0f172a"},{id:"nebula",label:"Nebula",color:"#312e81"},{id:"high_contrast",label:"High Contrast",color:"#000000"}];return a.jsxs("div",{className:"flex w-full h-full bg-[#050508] text-white font-sans overflow-hidden",children:[a.jsxs("aside",{className:"w-64 flex-none flex flex-col border-r border-white/5 bg-[#0a0a0e]",children:[a.jsxs("div",{className:"p-8 pb-4",children:[a.jsx("div",{className:"size-10 rounded-full bg-white flex items-center justify-center text-black mb-4",children:a.jsx("span",{className:"material-symbols-outlined text-2xl",children:"settings"})}),a.jsx("h1",{className:"text-xl font-bold tracking-tight",children:"Ajustes"}),a.jsx("p",{className:"text-xs text-slate-500 font-mono mt-1",children:"v2.4.0 Local-Build"})]}),a.jsx("nav",{className:"flex-1 px-4 py-4 space-y-1",children:u.map(x=>a.jsxs("button",{onClick:()=>i(x.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold transition-all ${r===x.id?"bg-indigo-500/10 text-indigo-400":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:[a.jsx("span",{className:"material-symbols-outlined text-lg",children:x.icon}),x.label]},x.id))}),a.jsx("div",{className:"p-4 border-t border-white/5",children:a.jsxs("button",{onClick:d,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold text-red-400 hover:bg-red-500/10 transition-colors",children:[a.jsx("span",{className:"material-symbols-outlined text-lg",children:"logout"}),"Cerrar Sesin"]})})]}),a.jsx("main",{className:"flex-1 overflow-y-auto p-12 custom-scrollbar",children:a.jsxs("div",{className:"max-w-3xl mx-auto space-y-12",children:[a.jsxs("header",{children:[a.jsx("h2",{className:"text-3xl font-bold mb-2",children:(p=u.find(x=>x.id===r))==null?void 0:p.label}),a.jsx("p",{className:"text-slate-500",children:"Personaliza la interfaz visual y tu entorno de escritura para maximizar tu creatividad y concentracin."})]}),r==="appearance"&&a.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4",children:[a.jsxs("section",{className:"bg-[#0f0f13] border border-white/5 rounded-3xl p-8",children:[a.jsx("h3",{className:"text-lg font-bold mb-1",children:"Tema de la Interfaz"}),a.jsx("p",{className:"text-xs text-slate-500 mb-6",children:"Selecciona el esquema de colores que prefieras."}),a.jsx("div",{className:"grid grid-cols-3 gap-6",children:h.map(x=>a.jsxs("button",{onClick:()=>l({...s,theme:x.id}),className:`relative group text-left transition-all ${s.theme===x.id?"ring-2 ring-indigo-500":"hover:ring-1 hover:ring-white/20"} rounded-2xl overflow-hidden`,children:[a.jsx("div",{className:"h-32 bg-black/20 relative p-4 flex items-center justify-center",children:a.jsx("div",{className:"w-full h-full rounded-xl flex items-center justify-center",style:{backgroundColor:x.color},children:a.jsx("div",{className:"size-8 rounded-full bg-white/10 backdrop-blur-md"})})}),a.jsx("div",{className:"p-4 bg-[#18181b]",children:a.jsx("span",{className:"text-xs font-bold text-slate-300 group-hover:text-white",children:x.label})})]},x.id))})]}),a.jsxs("section",{className:"bg-[#0f0f13] border border-white/5 rounded-3xl p-8 space-y-8",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("span",{className:"material-symbols-outlined text-indigo-400",children:"text_fields"}),a.jsx("h3",{className:"text-lg font-bold",children:"Configuracin del Editor"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-12 border-b border-white/5 pb-8",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-xs font-bold text-slate-500",children:"Tipografa"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:s.font,onChange:x=>l({...s,font:x.target.value}),className:"w-full bg-[#18181b] border border-white/10 rounded-xl px-4 py-3 text-sm text-white appearance-none outline-none focus:border-indigo-500 transition-colors",children:[a.jsx("option",{value:"Manrope",children:"Manrope (Sans-serif)"}),a.jsx("option",{value:"Inter",children:"Inter"}),a.jsx("option",{value:"Merriweather",children:"Merriweather (Serif)"})]}),a.jsx("span",{className:"material-symbols-outlined absolute right-4 top-1/2 -translate-y-1/2 text-slate-500 pointer-events-none text-sm",children:"expand_more"})]}),a.jsx("p",{className:"text-[10px] text-slate-600",children:"La fuente utilizada en el lienzo de escritura."})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("label",{className:"text-xs font-bold text-slate-500",children:"Tamao de Fuente"}),a.jsxs("span",{className:"text-xs font-bold text-indigo-400",children:[s.fontSize,"px"]})]}),a.jsx("input",{type:"range",min:"12",max:"24",value:s.fontSize,onChange:x=>l({...s,fontSize:parseInt(x.target.value)}),className:"w-full accent-indigo-500 h-1 bg-white/10 rounded-lg appearance-none cursor-pointer"}),a.jsxs("div",{className:"flex justify-between text-[10px] text-slate-600 font-bold uppercase",children:[a.jsx("span",{children:"Aa"}),a.jsx("span",{children:"Aa"})]})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex gap-4",children:[a.jsx("div",{className:"size-10 rounded-full bg-white/5 flex items-center justify-center text-slate-400",children:a.jsx("span",{className:"material-symbols-outlined",children:"center_focus_strong"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-bold text-white",children:"Modo Enfoque"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Oculta todos los paneles laterales al escribir."})]})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:s.focusMode,onChange:x=>l({...s,focusMode:x.target.checked}),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-white/10 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-slate-400 after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-500 peer-checked:after:bg-white"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex gap-4",children:[a.jsx("div",{className:"size-10 rounded-full bg-white/5 flex items-center justify-center text-slate-400",children:a.jsx("span",{className:"material-symbols-outlined",children:"blur_on"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-bold text-white",children:"Efectos de Transparencia"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Desactivar para mejorar el rendimiento."})]})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:s.transparencyEffects,onChange:x=>l({...s,transparencyEffects:x.target.checked}),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-white/10 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-slate-400 after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-500 peer-checked:after:bg-white"})]})]})]})]}),a.jsxs("section",{className:"bg-[#0f0f13] border border-white/5 rounded-3xl p-1 relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-indigo-500 rounded-l-3xl"}),a.jsxs("div",{className:"p-8",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("div",{className:"flex gap-4",children:[a.jsx("span",{className:"material-symbols-outlined text-indigo-400 text-2xl",children:"folder_special"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-white",children:"Almacenamiento Local"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Tus datos viven en tu dispositivo. Gestiona tus copias de seguridad."})]})]}),a.jsxs("span",{className:"px-3 py-1 bg-green-500/10 text-green-400 rounded-full text-[10px] font-bold uppercase border border-green-500/20 flex items-center gap-2",children:[a.jsx("span",{className:"size-1.5 rounded-full bg-green-500 animate-pulse"})," Sincronizado"]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-bold text-slate-500 block mb-2",children:"Ruta de la Bveda"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("div",{className:"flex-1 bg-[#18181b] border border-white/10 rounded-xl px-4 py-3 text-xs font-mono text-slate-300 truncate",children:s.vaultPath}),a.jsx("button",{className:"px-4 py-2 bg-white/5 hover:bg-white/10 text-white rounded-xl text-xs font-bold transition-colors",children:"Cambiar"})]})]}),a.jsxs("div",{className:"bg-[#18181b] rounded-xl p-4 flex items-center justify-between border border-white/5",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"size-10 rounded-full bg-indigo-500/20 flex items-center justify-center text-indigo-400",children:a.jsx("span",{className:"material-symbols-outlined",children:"history"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-bold text-white",children:"Copia de Seguridad Automtica"}),a.jsx("p",{className:"text-[10px] text-slate-500",children:"Ultima copia: Hace 12 minutos"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{className:"px-4 py-2 bg-white/5 hover:bg-white/10 text-white rounded-lg text-xs font-bold transition-colors",children:"Restaurar"}),a.jsx("button",{className:"px-4 py-2 bg-indigo-500 hover:bg-indigo-600 text-white rounded-lg text-xs font-bold transition-colors shadow-lg shadow-indigo-500/20",children:"Respaldar Ahora"})]})]})]})]})]}),a.jsx("div",{className:"flex justify-end pt-8 pb-20",children:a.jsx("button",{className:"px-8 py-3 bg-white text-black font-bold rounded-full hover:scale-105 transition-transform shadow-xl",children:"Guardar Cambios"})})]}),r!=="appearance"&&a.jsxs("div",{className:"flex flex-col items-center justify-center h-[50vh] text-slate-600",children:[a.jsx("span",{className:"material-symbols-outlined text-6xl mb-4 opacity-20",children:"construction"}),a.jsx("h3",{className:"text-xl font-bold text-slate-500",children:"En Construccin"}),a.jsxs("p",{className:"text-sm",children:["El mdulo ",(m=u.find(x=>x.id===r))==null?void 0:m.label," estar disponible pronto."]})]})]})})]})},Lc=({isOpen:e,onClose:t,onConfirm:n,title:r,message:i,confirmText:s="Confirmar",cancelText:l="Cancelar",type:d="danger"})=>e?Fc.createPortal(a.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",onClick:t}),a.jsxs("div",{className:"relative w-full max-w-md bg-[#0a0a0c] border border-white/10 rounded-3xl shadow-2xl p-6 animate-in zoom-in-95 duration-200 overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 h-32 bg-gradient-to-b from-white/5 to-transparent pointer-events-none"}),a.jsxs("div",{className:"relative z-10 text-center",children:[a.jsx("div",{className:`mx-auto mb-4 size-16 rounded-2xl flex items-center justify-center ${d==="danger"?"bg-red-500/10 text-red-500":"bg-yellow-500/10 text-yellow-500"}`,children:a.jsx("span",{className:"material-symbols-outlined text-3xl",children:d==="danger"?"delete_forever":"warning"})}),a.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:r}),a.jsx("p",{className:"text-text-muted text-sm mb-8 leading-relaxed",children:i}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:t,className:"flex-1 px-4 py-3 rounded-xl bg-surface-light hover:bg-white/10 text-text-muted hover:text-white text-xs font-bold transition-all border border-white/5",children:l}),a.jsx("button",{onClick:()=>{n(),t()},className:`flex-1 px-4 py-3 rounded-xl text-white text-xs font-bold transition-all shadow-lg flex items-center justify-center gap-2
                                ${d==="danger"?"bg-red-500 hover:bg-red-600 shadow-red-500/20":"bg-primary hover:bg-primary-light shadow-primary/20"}`,children:a.jsx("span",{children:s})})]})]})]})]}),document.body):null,I2=({compact:e=!1})=>{const[t,n]=T.useState(null),[r,i]=T.useState([]),[s,l]=T.useState(!1),[d,u]=T.useState(null);T.useEffect(()=>{h()},[]);const h=async()=>{try{const y=await ue.get("/world-bible/folders");y.length>0&&n(y[0].id),p()}catch(y){console.error("Init error:",y)}},p=async()=>{l(!0);try{const y=await ue.get("/world-bible/templates/global");i(y)}catch(y){console.error("Error loading templates:",y)}finally{l(!1)}},m=async y=>{if(t)try{await ue.post(`/world-bible/folders/${t}/templates`,{nombre:y.label,tipo:y.type,required:y.required,metadata:y.metadata?JSON.stringify(y.metadata):null,global:!0}),p()}catch(S){console.error("Error creating template:",S)}},x=async()=>{if(d)try{await ue.delete(`/world-bible/templates/${d}`),i(y=>y.filter(S=>S.id!==d))}catch(y){console.error("Error deleting template:",y)}finally{u(null)}};return a.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4 duration-500",children:[a.jsxs(Fe,{className:`${e?"p-4 bg-transparent border-none shadow-none":"p-8 space-y-8"}`,children:[a.jsx("header",{className:`flex ${e?"flex-col gap-4":"justify-between items-center"}`,children:a.jsxs("div",{children:[a.jsx("h3",{className:`${e?"text-sm":"text-xl"} font-bold text-white`,children:"Atributos Globales"}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Define atributos disponibles para todas las entidades."})]})}),a.jsxs("div",{className:"space-y-4",children:[s?a.jsx("div",{className:"text-center p-4 text-slate-500",children:"Cargando plantillas..."}):r.map((y,S)=>a.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-2xl bg-white/[0.02] border border-white/5 hover:border-primary/50 hover:bg-white/5 transition-all cursor-grab active:cursor-grabbing group select-none",draggable:!0,onDragStart:N=>{N.dataTransfer.setData("application/reactflow/type","attribute"),N.dataTransfer.setData("templateId",y.id),N.dataTransfer.effectAllowed="copy"},children:[a.jsxs("span",{className:"text-[10px] font-black text-slate-700 w-6 group-hover:text-primary transition-colors",children:["0",S+1]}),a.jsxs("div",{className:"flex-1 pointer-events-none",children:[a.jsx("div",{className:"text-sm font-bold text-white",children:y.nombre}),a.jsxs("div",{className:"text-[10px] text-slate-500 uppercase tracking-widest",children:[y.tipo," ",y.esObligatorio&&" Required"]}),y.metadata&&a.jsx("div",{className:"text-[10px] text-slate-600 font-mono mt-1 truncate",children:y.metadata})]}),a.jsx("button",{onClick:()=>u(y.id),className:"p-1.5 text-slate-500 hover:text-red-500 hover:bg-red-500/10 rounded-lg transition-colors",title:"Eliminar Plantilla Global",children:a.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]},y.id)),a.jsx(j7,{onAdd:m})]})]}),a.jsx(Lc,{isOpen:!!d,onClose:()=>u(null),onConfirm:x,title:"Eliminar Plantilla",message:"Ests seguro de que quieres eliminar esta plantilla? Esta accin es irreversible.",confirmText:"Eliminar",type:"danger"})]})},j7=({onAdd:e})=>{const[t,n]=T.useState(""),[r,i]=T.useState("text"),[s,l]=T.useState(!1),[d,u]=T.useState([""]),h=()=>u([...d,""]),p=y=>u(d.filter((S,N)=>N!==y)),m=(y,S)=>{const N=[...d];N[y]=S,u(N)},x=()=>{if(!t)return;let y=null;["select","multi_select"].includes(r)&&(y={options:d.filter(S=>S.trim())}),e({label:t,type:r,required:s,metadata:y}),n(""),u([""])};return a.jsxs("div",{className:"p-4 rounded-2xl border-2 border-dashed border-white/10 bg-white/[0.01] space-y-4",children:[a.jsx("h4",{className:"text-xs font-black uppercase tracking-widest text-primary",children:"Add New Attribute"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx("input",{placeholder:"Field Name",value:t,onChange:y=>n(y.target.value),className:"bg-black/20 border border-white/5 rounded-xl px-4 py-2 text-xs text-white outline-none focus:border-primary/30 min-w-0"}),a.jsxs("select",{value:r,onChange:y=>i(y.target.value),className:"bg-black/20 border border-white/5 rounded-xl px-4 py-2 text-xs text-white outline-none",children:[a.jsx("option",{value:"text",children:"Text (Long)"}),a.jsx("option",{value:"short_text",children:"Text (Short)"}),a.jsx("option",{value:"number",children:"Number"}),a.jsx("option",{value:"date",children:"Date"}),a.jsx("option",{value:"select",children:"Single Selection (Dropdown)"}),a.jsx("option",{value:"multi_select",children:"Multiple Selection"}),a.jsx("option",{value:"boolean",children:"Switch (True/False)"})]})]}),["select","multi_select"].includes(r)&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Options"}),a.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto pr-2 custom-scrollbar",children:d.map((y,S)=>a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{placeholder:`Option ${S+1}`,value:y,onChange:N=>m(S,N.target.value),className:"flex-1 bg-black/20 border border-white/5 rounded-lg px-3 py-1.5 text-xs text-white outline-none focus:border-primary/30"}),a.jsx("button",{onClick:()=>p(S),className:"p-1.5 hover:bg-red-500/20 text-slate-500 hover:text-red-400 rounded-lg transition-colors",children:a.jsx("span",{className:"material-symbols-outlined text-sm",children:"close"})})]},S))}),a.jsx("button",{onClick:h,className:"w-full py-1.5 text-[10px] font-bold uppercase tracking-widest text-primary hover:bg-primary/5 rounded-lg border border-dashed border-primary/20 transition-all",children:"+ Add Custom Option"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:s,onChange:y=>l(y.target.checked),className:"size-4 rounded border-white/10 bg-white/5 accent-primary"}),a.jsx("span",{className:"text-[10px] font-bold text-slate-500",children:"Required Field"})]}),a.jsx("button",{onClick:x,className:"px-4 py-2 bg-primary/20 text-primary rounded-lg text-xs font-bold hover:bg-primary/30 transition-all",children:"+ Add Field"})]})]})},k7=({projectName:e})=>{const[t,n]=T.useState([]),[r,i]=T.useState(!1),[s,l]=T.useState(null);T.useEffect(()=>{const k=localStorage.getItem(`notes_v2_${e}`);if(k)n(JSON.parse(k));else{const w=localStorage.getItem(`notes_${e}`);if(w){const j={id:Date.now(),title:"Nota General",content:w};n([j]),localStorage.setItem(`notes_v2_${e}`,JSON.stringify([j]))}}},[e]);const d=k=>{n(k),localStorage.setItem(`notes_v2_${e}`,JSON.stringify(k))},u=()=>{const k={id:Date.now(),title:"Nueva Nota",content:""};d([...t,k]),l(k.id)},[h,p]=T.useState(null),m=k=>{p(k)},x=()=>{h&&(d(t.filter(k=>k.id!==h)),p(null))},y=(k,w,j)=>{d(t.map(v=>v.id===k?{...v,[w]:j}:v))},S=()=>i(!r),N=()=>a.jsxs("div",{className:`flex flex-col h-full bg-surface-dark/40 ${r?"":"max-h-[25vh]"}`,children:[a.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-glass-border bg-white/5",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"material-symbols-outlined text-sm text-primary",children:"edit_note"}),a.jsxs("h3",{className:"text-[10px] font-black uppercase tracking-widest text-white",children:["Notas (",t.length,")"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:u,className:"p-1 hover:text-primary text-text-muted transition-colors",title:"Aadir Nota",children:a.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"})}),a.jsx("button",{onClick:S,className:"p-1 hover:text-white text-text-muted transition-colors",title:"Pantalla Completa",children:a.jsx("span",{className:"material-symbols-outlined text-sm",children:r?"fullscreen_exit":"fullscreen"})})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2 space-y-2",children:t.length===0?a.jsx("div",{className:"py-8 text-center opacity-30 italic text-[10px] uppercase font-bold",children:"Sin notas"}):t.map(k=>a.jsxs("div",{className:"group bg-white/5 border border-glass-border rounded-xl overflow-hidden hover:border-primary/30 transition-all",children:[a.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-white/5",children:[a.jsx("input",{className:"bg-transparent border-none text-[11px] font-bold text-white outline-none w-full",value:k.title,onChange:w=>y(k.id,"title",w.target.value),placeholder:"Ttulo..."}),a.jsx("button",{onClick:()=>m(k.id),className:"opacity-0 group-hover:opacity-100 p-1 text-text-muted hover:text-red-400 transition-all",children:a.jsx("span",{className:"material-symbols-outlined text-xs",children:"delete"})})]}),a.jsx("textarea",{className:"w-full bg-transparent p-3 text-xs text-white/70 outline-none resize-none min-h-[80px] custom-scrollbar",value:k.content,onChange:w=>y(k.id,"content",w.target.value),placeholder:"Escribe el contenido aqu..."})]},k.id))}),a.jsx(Lc,{isOpen:!!h,onClose:()=>p(null),onConfirm:x,title:"Eliminar Nota",message:"Ests seguro de que quieres eliminar esta nota? No se podr recuperar.",confirmText:"Eliminar",type:"danger"})]});return r?a.jsx("div",{className:"fixed inset-0 z-[100] bg-background-dark/95 backdrop-blur-md p-8 flex flex-col items-center",children:a.jsx("div",{className:"w-full max-w-4xl h-full flex flex-col border border-glass-border rounded-3xl overflow-hidden shadow-2xl bg-surface-dark",children:a.jsx(N,{})})}):a.jsx("div",{className:"h-full border border-glass-border rounded-2xl overflow-hidden",children:a.jsx(N,{})})},Fa=({to:e,icon:t,label:n,collapsed:r,end:i})=>a.jsxs(I_,{to:e,end:i,className:({isActive:s})=>`
            flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all group
            ${s?"bg-primary text-white shadow-lg shadow-primary/20":"text-text-muted hover:text-white hover:bg-white/5"}
            ${r?"justify-center":""}
        `,title:r?n:"",children:[a.jsx("span",{className:"material-symbols-outlined text-xl",children:t}),!r&&a.jsx("span",{className:"text-sm font-bold tracking-wide",children:n})]}),F2=e=>{switch(e==null?void 0:e.toLowerCase()){case"text":return"notes";case"short_text":return"short_text";case"number":return"pin";case"date":return"calendar_today";case"select":return"list";case"boolean":return"check_box";case"map":return"map";case"timeline":return"timeline";case"character":case"entidadindividual":return"person";case"location":case"zona":case"construccion":return"location_on";case"culture":case"entidadcolectiva":return"groups";case"universe":case"galaxy":case"system":case"planet":return"public";case"entity_link":return"link";default:return"description"}},C7=()=>{console.log("ArchitectLayout Mounting");const{username:e,projectName:t,folderSlug:n}=zn();Fn();const r=ca(),[i,s]=T.useState(!0),[l,d]=T.useState(!1),[u,h]=T.useState("Loading..."),[p,m]=T.useState(null),[x,y]=T.useState("NOTES"),[S,N]=T.useState(""),[k,w]=T.useState([]),[j,v]=T.useState(null),[_,E]=T.useState(null),[A,D]=T.useState({name:"",description:"",type:"regional",showGrid:!0,gridSize:50,width:800,height:600,bgImage:null}),[M,I]=T.useState(null);T.useState("identity");const[P,L]=T.useState("notes"),[F,G]=T.useState(""),[R,$]=T.useState("ALL"),B=r.pathname.includes("/bible"),[Q,K]=T.useState(null),[H,W]=T.useState([]),[z,V]=T.useState("identity"),[J,ee]=T.useState(null),ae=(U,X)=>{U.stopPropagation(),ee(X)},fe=async()=>{if(J){try{await ue.delete(`/world-bible/templates/${J}`),w(U=>U.filter(X=>X.id!==J))}catch(U){console.error("Delete failed",U)}ee(null)}},Y=async U=>{U.preventDefault();try{await ue.put(`/world-bible/templates/${Q.id}`,Q),w(X=>X.map(oe=>oe.id===Q.id?Q:oe)),K(null)}catch(X){console.error("Update failed",X)}},ie=`/${e}/${t}`;T.useEffect(()=>{t&&ce(t);const U=()=>{t&&ce(t)};return window.addEventListener("focus",U),()=>window.removeEventListener("focus",U)},[t]);const ce=async U=>{try{const X=await ue.get(`/proyectos/${U}`);X&&(h(X.nombreProyecto),m(X.id))}catch(X){console.error("Error loading project:",X)}};return a.jsxs("div",{className:"flex h-screen w-full overflow-hidden bg-background-dark text-text-main font-sans selection:bg-primary/30",children:[a.jsxs("aside",{className:`
                    flex-none bg-surface-dark border-r border-glass-border transition-all duration-500 relative flex flex-col z-30
                    ${i?"w-80":"w-20"}
                `,children:[a.jsxs("div",{className:"h-16 flex items-center justify-center border-b border-glass-border relative",children:[i?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"size-8 rounded-lg bg-surface-light flex items-center justify-center text-primary shadow-inner",children:a.jsx("span",{className:"material-symbols-outlined text-xl",children:"auto_stories"})}),a.jsx("h2",{className:"text-sm font-black uppercase tracking-widest text-white truncate max-w-[150px]",children:u})]}):a.jsx("button",{onClick:()=>s(!0),className:"size-10 rounded-xl hover:bg-white/5 flex items-center justify-center text-text-muted hover:text-white transition-all",children:a.jsx("span",{className:"material-symbols-outlined",children:"menu"})}),i&&a.jsx("button",{onClick:()=>s(!1),className:"absolute right-4 text-text-muted hover:text-white transition-colors",children:a.jsx("span",{className:"material-symbols-outlined text-lg",children:"dock_to_left"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar flex flex-col",children:a.jsxs("div",{className:"p-3 space-y-1",children:[a.jsx(Fa,{to:ie,icon:"home",label:"Dashboard",collapsed:!i,end:!0}),a.jsx(Fa,{to:`${ie}/bible`,icon:"menu_book",label:"World Bible",collapsed:!i}),a.jsx(Fa,{to:`${ie}/map`,icon:"map",label:"Atlas",collapsed:!i}),a.jsx(Fa,{to:`${ie}/timeline`,icon:"calendar_month",label:"Chronology",collapsed:!i}),a.jsx("div",{className:"h-px bg-glass-border my-2 mx-2 opacity-50"}),a.jsx(Fa,{to:`${ie}/writing`,icon:"edit_note",label:"Writing",collapsed:!i}),a.jsx(Fa,{to:`${ie}/settings`,icon:"settings",label:"Settings",collapsed:!i})]})}),a.jsx("footer",{className:"p-4 border-t border-glass-border",children:a.jsxs("div",{className:`flex items-center gap-3 ${!i&&"justify-center"}`,children:[a.jsx("div",{className:"size-10 rounded-full border border-glass-border p-1 bg-surface-light relative",children:a.jsx("div",{className:"w-full h-full rounded-full bg-gradient-to-br from-primary to-purple-500 flex items-center justify-center text-white font-black text-xs",children:e?e.substring(0,2).toUpperCase():"US"})}),i&&a.jsxs("div",{className:"overflow-hidden",children:[a.jsx("h4",{className:"text-xs font-bold text-white truncate",children:e||"User"}),a.jsx("p",{className:"text-[10px] text-text-muted uppercase font-black tracking-tighter",children:"Architect"})]})]})})]}),a.jsxs("main",{className:"flex-1 flex flex-col min-w-0 bg-background-dark relative",children:[a.jsx("div",{className:"h-16 w-full absolute top-0 left-0 bg-gradient-to-b from-background-dark to-transparent pointer-events-none"}),a.jsx("div",{className:"flex-1 flex overflow-hidden relative",children:a.jsx(Xx,{context:{setRightPanelMode:y,setRightOpen:d,setRightPanelTitle:N,projectName:u,projectId:p,availableTemplates:k,setAvailableTemplates:w,setAddAttributeHandler:v,setCreateTemplateHandler:E,mapSettings:A,setMapSettings:D,setOnMapSettingsChange:I,entityTabs:H,setEntityTabs:W,activeEntityTab:z,setActiveEntityTab:V,folderSearchTerm:F,setFolderSearchTerm:G,folderFilterType:R,setFolderFilterType:$}})})]}),a.jsxs("aside",{className:`
                    flex-none bg-surface-dark border-l border-glass-border transition-all duration-500 relative flex flex-col z-30
                    ${l?"w-80":"w-20"}
                `,children:[a.jsx("header",{className:"h-16 flex items-center px-6 border-b border-glass-border justify-between shrink-0",children:l?a.jsxs(a.Fragment,{children:[x==="CUSTOM"?a.jsx("h2",{className:"text-xs font-black uppercase tracking-widest text-primary",children:S||"Panel"}):B&&x==="NOTES"?a.jsxs("div",{className:"flex bg-white/5 rounded-lg p-1 gap-1",children:[a.jsx("button",{onClick:()=>L("notes"),className:`px-3 py-1 rounded-md text-[10px] uppercase font-bold transition-all ${P==="notes"?"bg-primary text-white shadow":"text-slate-500 hover:text-white"}`,children:"Notas"}),a.jsx("button",{onClick:()=>L("templates"),className:`px-3 py-1 rounded-md text-[10px] uppercase font-bold transition-all ${P==="templates"?"bg-primary text-white shadow":"text-slate-500 hover:text-white"}`,children:"Plantillas"}),a.jsx("button",{onClick:()=>L("filters"),className:`px-3 py-1 rounded-md text-[10px] uppercase font-bold transition-all ${P==="filters"?"bg-primary text-white shadow":"text-slate-500 hover:text-white"}`,children:"Explorar"})]}):a.jsx("h2",{className:"text-xs font-black uppercase tracking-widest text-white",children:S||(x==="NOTES"?"Notas Globales":"Constructor")}),a.jsx("button",{onClick:()=>d(!1),className:"text-text-muted hover:text-white transition-colors",children:a.jsx("span",{className:"material-symbols-outlined text-lg",children:"dock_to_right"})})]}):a.jsx("button",{onClick:()=>d(!0),className:"w-full h-full flex items-center justify-center text-text-muted hover:text-white transition-colors",children:a.jsx("span",{className:"material-symbols-outlined",children:x==="NOTES"?"edit_note":x==="MAP"?"map":x==="CUSTOM"?"build":"handyman"})})}),a.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar p-0",children:l?x==="CUSTOM"?a.jsx("div",{id:"architect-right-panel-portal",className:"h-full relative flex flex-col"}):x==="NOTES"?P==="templates"&&B?a.jsx("div",{className:"h-full overflow-y-auto no-scrollbar",children:a.jsx(I2,{compact:!0})}):P==="filters"&&B?a.jsxs("div",{className:"h-full p-6 space-y-6 animate-in fade-in slide-in-from-right-4",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-text-muted",children:"Bsqueda"}),a.jsxs("div",{className:"bg-black/20 border border-white/10 rounded-xl p-3 flex items-center gap-2 focus-within:border-primary transition-colors",children:[a.jsx("span",{className:"material-symbols-outlined text-slate-500",children:"search"}),a.jsx("input",{value:F,onChange:U=>G(U.target.value),placeholder:"Buscar entidad...",className:"bg-transparent border-none outline-none text-sm text-white w-full placeholder-slate-600"}),F&&a.jsx("button",{onClick:()=>G(""),className:"text-slate-500 hover:text-white",children:a.jsx("span",{className:"material-symbols-outlined text-sm",children:"close"})})]})]}),a.jsx("div",{className:"h-px bg-glass-border"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-text-muted",children:"Filtrar por Tipo"}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{id:"ALL",label:"Todos",icon:"grid_view"},{id:"ENTITY",label:"Entidades",icon:"person"},{id:"MAP",label:"Mapas",icon:"map"},{id:"TIMELINE",label:"Timelines",icon:"timeline"}].map(U=>a.jsxs("button",{onClick:()=>$(U.id),className:`
                                                        p-3 rounded-xl border flex flex-col items-center gap-2 transition-all
                                                        ${R===U.id?"bg-primary text-white border-primary shadow-lg shadow-primary/20":"bg-white/5 border-transparent text-slate-500 hover:bg-white/10 hover:text-white"}
                                                    `,children:[a.jsx("span",{className:"material-symbols-outlined",children:U.icon}),a.jsx("span",{className:"text-[10px] font-bold uppercase",children:U.label})]},U.id))})]})]}):a.jsx("div",{className:"h-full p-4 overflow-hidden",children:a.jsx(k7,{projectName:t})}):x==="MAP"?a.jsxs("div",{className:"p-6 space-y-8 animate-in fade-in slide-in-from-right-4",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-text-muted",children:"Grid System"}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:A.showGrid,onChange:U=>{const X={...A,showGrid:U.target.checked};D(X),M&&M(X)},className:"sr-only peer"}),a.jsx("div",{className:"w-9 h-5 bg-white/10 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-primary"})]})]}),a.jsxs("div",{className:`space-y-2 transition-opacity ${A.showGrid?"opacity-100":"opacity-30 pointer-events-none"}`,children:[a.jsxs("div",{className:"flex justify-between text-xs font-bold text-white",children:[a.jsx("span",{children:"Size"}),a.jsxs("span",{className:"font-mono text-primary",children:[A.gridSize,"px"]})]}),a.jsx("input",{type:"range",min:"10",max:"200",step:"10",value:A.gridSize,onChange:U=>{const X={...A,gridSize:parseInt(U.target.value)};D(X),M&&M(X)},className:"w-full h-1 bg-white/10 rounded-lg appearance-none cursor-pointer accent-primary"})]})]}),a.jsx("div",{className:"h-px bg-glass-border"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-text-muted",children:"Canvas Data"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500",children:"Width (px)"}),a.jsx("input",{type:"number",value:A.width,onChange:U=>{const X={...A,width:parseInt(U.target.value)};D(X),M&&M(X)},className:"w-full bg-black/20 border border-white/10 rounded-lg p-2 text-white text-right font-mono text-sm focus:border-primary outline-none"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500",children:"Height (px)"}),a.jsx("input",{type:"number",value:A.height,onChange:U=>{const X={...A,height:parseInt(U.target.value)};D(X),M&&M(X)},className:"w-full bg-black/20 border border-white/10 rounded-lg p-2 text-white text-right font-mono text-sm focus:border-primary outline-none"})]})]})]})]}):x==="ENTITY"?a.jsxs("div",{className:"flex flex-col h-full animate-in fade-in slide-in-from-right-4",children:[a.jsx("div",{className:"p-4 border-b border-glass-border",children:a.jsx("div",{className:"bg-black/40 p-1 rounded-xl flex",children:H.map(U=>{const X=oe=>{switch(oe.toLowerCase()){case"identity":return"badge";case"backstory":return"auto_stories";case"attributes":return"tune";case"relationships":return"hub";case"notes":return"edit_note";default:return"circle"}};return a.jsxs("button",{onClick:()=>V(U),className:`
                                                        flex-1 py-2 rounded-lg transition-all group relative flex items-center justify-center
                                                        ${z===U?"bg-primary text-white shadow-lg":"text-text-muted hover:text-white hover:bg-white/5"}
                                                    `,title:U,children:[a.jsx("span",{className:"material-symbols-outlined text-lg",children:X(U)}),a.jsx("span",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 bg-black/90 text-white text-[10px] uppercase font-bold px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-50",children:U})]},U)})})}),z==="attributes"&&a.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col bg-black/20",children:[a.jsxs("div",{className:"px-6 py-4 text-[10px] font-black uppercase text-slate-500 tracking-widest flex items-center gap-2",children:[a.jsx("span",{className:"material-symbols-outlined text-sm",children:"drag_indicator"})," Drag Attributes"]}),a.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar px-2",children:a.jsx(I2,{compact:!0,initialFolderSlug:n})})]})]}):x==="TOOLBOX"?a.jsx("div",{className:"p-4 space-y-6",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h3",{className:"text-[10px] font-black uppercase tracking-widest text-text-muted px-2 flex justify-between items-center",children:[a.jsx("span",{children:"Plantillas Disponibles"}),a.jsx("button",{className:"text-primary hover:text-white transition-colors",title:"Crear Nueva Plantilla",onClick:()=>_&&_(),children:a.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"})})]}),k.length===0?a.jsx("div",{className:"p-6 text-center border border-dashed border-glass-border rounded-2xl opacity-30",children:a.jsx("p",{className:"text-[10px] uppercase font-bold",children:"Sin Plantillas"})}):k.map(U=>a.jsxs("button",{className:"w-full flex items-center gap-3 p-3 rounded-2xl bg-white/5 border border-glass-border hover:border-primary/50 hover:bg-primary/5 transition-all text-left group relative",draggable:!0,onDragStart:X=>{X.dataTransfer.setData("application/reactflow/type","attribute"),X.dataTransfer.setData("templateId",U.id),X.dataTransfer.effectAllowed="move"},onClick:()=>j&&j(U.id),children:[U.global&&a.jsx("span",{className:"absolute top-2 right-2 flex size-2 bg-blue-500 rounded-full shadow-lg shadow-blue-500/50",title:"Global"}),a.jsx("div",{className:"size-8 rounded-lg bg-surface-light flex items-center justify-center text-primary group-hover:scale-110 transition-transform",children:a.jsx("span",{className:"material-symbols-outlined text-sm",children:F2(U.tipo)})}),a.jsxs("div",{className:"overflow-hidden",children:[a.jsx("p",{className:"text-xs font-bold text-white truncate",children:U.nombre}),a.jsx("p",{className:"text-[10px] text-text-muted uppercase font-black tracking-tighter",children:U.tipo})]}),a.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("div",{onClick:X=>{X.stopPropagation(),K(U)},className:"p-1 hover:text-white text-text-muted hover:bg-white/10 rounded cursor-pointer",title:"Edit",children:a.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"})}),a.jsx("div",{onClick:X=>ae(X,U.id),className:"p-1 hover:text-red-400 text-text-muted hover:bg-white/10 rounded cursor-pointer",title:"Delete",children:a.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]})]},U.id))]})}):a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-text-muted opacity-50",children:[a.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"dashboard"}),a.jsx("p",{className:"text-xs uppercase font-bold tracking-widest",children:"Select an item"})]}):a.jsx("div",{className:"flex flex-col items-center gap-4 py-4",children:x==="NOTES"?a.jsx("button",{className:"size-10 rounded-xl bg-white/5 flex items-center justify-center text-text-muted",title:"Notes",children:a.jsx("span",{className:"material-symbols-outlined text-lg",children:"edit_note"})}):k.slice(0,5).map(U=>a.jsxs("button",{className:"size-10 rounded-xl bg-white/5 flex items-center justify-center text-text-muted hover:text-white hover:bg-primary/20 transition-all relative",draggable:!0,onDragStart:X=>{X.dataTransfer.setData("application/reactflow/type","attribute"),X.dataTransfer.setData("templateId",U.id)},children:[U.global&&a.jsx("span",{className:"absolute top-0 right-0 size-2 bg-blue-500 rounded-full border border-surface-dark"}),a.jsx("span",{className:"material-symbols-outlined text-lg",children:F2(U.tipo)})]},U.id))})})]}),Q&&a.jsx("div",{className:"fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-surface-dark border border-glass-border rounded-2xl p-6 w-full max-w-md shadow-2xl animate-scale-in",children:[a.jsx("h3",{className:"text-xl font-black text-white mb-4",children:"Editar Plantilla"}),a.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs uppercase font-bold text-text-muted block mb-1",children:"Nombre"}),a.jsx("input",{autoFocus:!0,className:"w-full bg-black/30 border border-white/10 rounded-xl p-3 text-white focus:border-primary outline-none",value:Q.nombre,onChange:U=>K({...Q,nombre:U.target.value}),required:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs uppercase font-bold text-text-muted block mb-1",children:"Tipo"}),a.jsxs("select",{className:"w-full bg-black/30 border border-white/10 rounded-xl p-3 text-white focus:border-primary outline-none",value:Q.tipo,onChange:U=>K({...Q,tipo:U.target.value}),children:[a.jsx("option",{value:"text",children:"Texto Largo"}),a.jsx("option",{value:"short_text",children:"Texto Corto"}),a.jsx("option",{value:"number",children:"Nmero"}),a.jsx("option",{value:"boolean",children:"Si/No"}),a.jsx("option",{value:"date",children:"Fecha"}),a.jsx("option",{value:"entity_link",children:"Vnculo Entidad"}),a.jsx("option",{value:"image",children:"Imagen URL"})]})]}),a.jsx("div",{className:"flex items-center",children:a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-3 bg-white/5 rounded-xl w-full hover:bg-white/10 transition-colors",children:[a.jsx("input",{type:"checkbox",checked:Q.global,onChange:U=>K({...Q,global:U.target.checked}),className:"accent-primary size-4"}),a.jsx("span",{className:"text-sm font-bold text-white",children:"Es Global?"})]})})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>K(null),className:"px-4 py-2 text-text-muted hover:text-white font-bold transition-colors",children:"Cancelar"}),a.jsx("button",{type:"submit",className:"px-6 py-2 bg-primary text-white rounded-xl font-bold shadow-lg shadow-primary/20 hover:scale-105 transition-transform",children:"Guardar"})]})]})]})}),a.jsx(Lc,{isOpen:!!J,onClose:()=>ee(null),onConfirm:fe,title:"Eliminar Plantilla",message:"Ests seguro de que quieres eliminar esta plantilla? Esta accin no se puede deshacer.",confirmText:"Eliminar",type:"danger"})]})};function dn(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=dn(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var J4={exports:{}},e3={},t3={exports:{}},n3={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var No=T;function E7(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var P7=typeof Object.is=="function"?Object.is:E7,T7=No.useState,M7=No.useEffect,R7=No.useLayoutEffect,A7=No.useDebugValue;function I7(e,t){var n=t(),r=T7({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return R7(function(){i.value=n,i.getSnapshot=t,em(i)&&s({inst:i})},[e,n,t]),M7(function(){return em(i)&&s({inst:i}),e(function(){em(i)&&s({inst:i})})},[e]),A7(n),n}function em(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!P7(e,n)}catch{return!0}}function F7(e,t){return t()}var z7=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?F7:I7;n3.useSyncExternalStore=No.useSyncExternalStore!==void 0?No.useSyncExternalStore:z7;t3.exports=n3;var L7=t3.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zh=T,D7=L7;function O7(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var U7=typeof Object.is=="function"?Object.is:O7,$7=D7.useSyncExternalStore,G7=Zh.useRef,B7=Zh.useEffect,V7=Zh.useMemo,H7=Zh.useDebugValue;e3.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=G7(null);if(s.current===null){var l={hasValue:!1,value:null};s.current=l}else l=s.current;s=V7(function(){function u(y){if(!h){if(h=!0,p=y,y=r(y),i!==void 0&&l.hasValue){var S=l.value;if(i(S,y))return m=S}return m=y}if(S=m,U7(p,y))return S;var N=r(y);return i!==void 0&&i(S,N)?(p=y,S):(p=y,m=N)}var h=!1,p,m,x=n===void 0?null:n;return[function(){return u(t())},x===null?void 0:function(){return u(x())}]},[t,n,r,i]);var d=$7(e,s[0],s[1]);return B7(function(){l.hasValue=!0,l.value=d},[d]),H7(d),d};J4.exports=e3;var W7=J4.exports;const Y7=Rh(W7),z2=e=>{let t;const n=new Set,r=(p,m)=>{const x=typeof p=="function"?p(t):p;if(!Object.is(x,t)){const y=t;t=m??(typeof x!="object"||x===null)?x:Object.assign({},t,x),n.forEach(S=>S(t,y))}},i=()=>t,u={setState:r,getState:i,getInitialState:()=>h,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{n.clear()}},h=t=e(r,i,u);return u},K7=e=>e?z2(e):z2,{useDebugValue:X7}=te,{useSyncExternalStoreWithSelector:Q7}=Y7,q7=e=>e;function r3(e,t=q7,n){const r=Q7(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return X7(r),r}const L2=(e,t)=>{const n=K7(e),r=(i,s=t)=>r3(n,i,s);return Object.assign(r,n),r},Z7=(e,t)=>e?L2(e,t):L2;function en(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var J7={value:()=>{}};function Jh(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Du(n)}function Du(e){this._=e}function ej(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Du.prototype=Jh.prototype={constructor:Du,on:function(e,t){var n=this._,r=ej(e+"",n),i,s=-1,l=r.length;if(arguments.length<2){for(;++s<l;)if((i=(e=r[s]).type)&&(i=tj(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<l;)if(i=(e=r[s]).type)n[i]=D2(n[i],e.name,t);else if(t==null)for(i in n)n[i]=D2(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Du(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function tj(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function D2(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=J7,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var kg="http://www.w3.org/1999/xhtml";const O2={svg:"http://www.w3.org/2000/svg",xhtml:kg,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ef(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),O2.hasOwnProperty(t)?{space:O2[t],local:e}:e}function nj(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===kg&&t.documentElement.namespaceURI===kg?t.createElement(e):t.createElementNS(n,e)}}function rj(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function i3(e){var t=ef(e);return(t.local?rj:nj)(t)}function ij(){}function Zx(e){return e==null?ij:function(){return this.querySelector(e)}}function sj(e){typeof e!="function"&&(e=Zx(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],l=s.length,d=r[i]=new Array(l),u,h,p=0;p<l;++p)(u=s[p])&&(h=e.call(u,u.__data__,p,s))&&("__data__"in u&&(h.__data__=u.__data__),d[p]=h);return new Rn(r,this._parents)}function aj(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function oj(){return[]}function s3(e){return e==null?oj:function(){return this.querySelectorAll(e)}}function lj(e){return function(){return aj(e.apply(this,arguments))}}function cj(e){typeof e=="function"?e=lj(e):e=s3(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var l=t[s],d=l.length,u,h=0;h<d;++h)(u=l[h])&&(r.push(e.call(u,u.__data__,h,l)),i.push(u));return new Rn(r,i)}function a3(e){return function(){return this.matches(e)}}function o3(e){return function(t){return t.matches(e)}}var dj=Array.prototype.find;function uj(e){return function(){return dj.call(this.children,e)}}function hj(){return this.firstElementChild}function fj(e){return this.select(e==null?hj:uj(typeof e=="function"?e:o3(e)))}var pj=Array.prototype.filter;function mj(){return Array.from(this.children)}function gj(e){return function(){return pj.call(this.children,e)}}function xj(e){return this.selectAll(e==null?mj:gj(typeof e=="function"?e:o3(e)))}function yj(e){typeof e!="function"&&(e=a3(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],l=s.length,d=r[i]=[],u,h=0;h<l;++h)(u=s[h])&&e.call(u,u.__data__,h,s)&&d.push(u);return new Rn(r,this._parents)}function l3(e){return new Array(e.length)}function vj(){return new Rn(this._enter||this._groups.map(l3),this._parents)}function yh(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}yh.prototype={constructor:yh,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function bj(e){return function(){return e}}function wj(e,t,n,r,i,s){for(var l=0,d,u=t.length,h=s.length;l<h;++l)(d=t[l])?(d.__data__=s[l],r[l]=d):n[l]=new yh(e,s[l]);for(;l<u;++l)(d=t[l])&&(i[l]=d)}function Nj(e,t,n,r,i,s,l){var d,u,h=new Map,p=t.length,m=s.length,x=new Array(p),y;for(d=0;d<p;++d)(u=t[d])&&(x[d]=y=l.call(u,u.__data__,d,t)+"",h.has(y)?i[d]=u:h.set(y,u));for(d=0;d<m;++d)y=l.call(e,s[d],d,s)+"",(u=h.get(y))?(r[d]=u,u.__data__=s[d],h.delete(y)):n[d]=new yh(e,s[d]);for(d=0;d<p;++d)(u=t[d])&&h.get(x[d])===u&&(i[d]=u)}function Sj(e){return e.__data__}function _j(e,t){if(!arguments.length)return Array.from(this,Sj);var n=t?Nj:wj,r=this._parents,i=this._groups;typeof e!="function"&&(e=bj(e));for(var s=i.length,l=new Array(s),d=new Array(s),u=new Array(s),h=0;h<s;++h){var p=r[h],m=i[h],x=m.length,y=jj(e.call(p,p&&p.__data__,h,r)),S=y.length,N=d[h]=new Array(S),k=l[h]=new Array(S),w=u[h]=new Array(x);n(p,m,N,k,w,y,t);for(var j=0,v=0,_,E;j<S;++j)if(_=N[j]){for(j>=v&&(v=j+1);!(E=k[v])&&++v<S;);_._next=E||null}}return l=new Rn(l,r),l._enter=d,l._exit=u,l}function jj(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function kj(){return new Rn(this._exit||this._groups.map(l3),this._parents)}function Cj(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Ej(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,l=Math.min(i,s),d=new Array(i),u=0;u<l;++u)for(var h=n[u],p=r[u],m=h.length,x=d[u]=new Array(m),y,S=0;S<m;++S)(y=h[S]||p[S])&&(x[S]=y);for(;u<i;++u)d[u]=n[u];return new Rn(d,this._parents)}function Pj(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],l;--i>=0;)(l=r[i])&&(s&&l.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(l,s),s=l);return this}function Tj(e){e||(e=Mj);function t(m,x){return m&&x?e(m.__data__,x.__data__):!m-!x}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var l=n[s],d=l.length,u=i[s]=new Array(d),h,p=0;p<d;++p)(h=l[p])&&(u[p]=h);u.sort(t)}return new Rn(i,this._parents).order()}function Mj(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Rj(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Aj(){return Array.from(this)}function Ij(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var l=r[i];if(l)return l}return null}function Fj(){let e=0;for(const t of this)++e;return e}function zj(){return!this.node()}function Lj(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,l=i.length,d;s<l;++s)(d=i[s])&&e.call(d,d.__data__,s,i);return this}function Dj(e){return function(){this.removeAttribute(e)}}function Oj(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Uj(e,t){return function(){this.setAttribute(e,t)}}function $j(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Gj(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Bj(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Vj(e,t){var n=ef(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Oj:Dj:typeof t=="function"?n.local?Bj:Gj:n.local?$j:Uj)(n,t))}function c3(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Hj(e){return function(){this.style.removeProperty(e)}}function Wj(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Yj(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Kj(e,t,n){return arguments.length>1?this.each((t==null?Hj:typeof t=="function"?Yj:Wj)(e,t,n??"")):So(this.node(),e)}function So(e,t){return e.style.getPropertyValue(t)||c3(e).getComputedStyle(e,null).getPropertyValue(t)}function Xj(e){return function(){delete this[e]}}function Qj(e,t){return function(){this[e]=t}}function qj(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Zj(e,t){return arguments.length>1?this.each((t==null?Xj:typeof t=="function"?qj:Qj)(e,t)):this.node()[e]}function d3(e){return e.trim().split(/^|\s+/)}function Jx(e){return e.classList||new u3(e)}function u3(e){this._node=e,this._names=d3(e.getAttribute("class")||"")}u3.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function h3(e,t){for(var n=Jx(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function f3(e,t){for(var n=Jx(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Jj(e){return function(){h3(this,e)}}function ek(e){return function(){f3(this,e)}}function tk(e,t){return function(){(t.apply(this,arguments)?h3:f3)(this,e)}}function nk(e,t){var n=d3(e+"");if(arguments.length<2){for(var r=Jx(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?tk:t?Jj:ek)(n,t))}function rk(){this.textContent=""}function ik(e){return function(){this.textContent=e}}function sk(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function ak(e){return arguments.length?this.each(e==null?rk:(typeof e=="function"?sk:ik)(e)):this.node().textContent}function ok(){this.innerHTML=""}function lk(e){return function(){this.innerHTML=e}}function ck(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function dk(e){return arguments.length?this.each(e==null?ok:(typeof e=="function"?ck:lk)(e)):this.node().innerHTML}function uk(){this.nextSibling&&this.parentNode.appendChild(this)}function hk(){return this.each(uk)}function fk(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function pk(){return this.each(fk)}function mk(e){var t=typeof e=="function"?e:i3(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function gk(){return null}function xk(e,t){var n=typeof e=="function"?e:i3(e),r=t==null?gk:typeof t=="function"?t:Zx(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function yk(){var e=this.parentNode;e&&e.removeChild(this)}function vk(){return this.each(yk)}function bk(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function wk(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Nk(e){return this.select(e?wk:bk)}function Sk(e){return arguments.length?this.property("__data__",e):this.node().__data__}function _k(e){return function(t){e.call(this,t,this.__data__)}}function jk(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function kk(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Ck(e,t,n){return function(){var r=this.__on,i,s=_k(t);if(r){for(var l=0,d=r.length;l<d;++l)if((i=r[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Ek(e,t,n){var r=jk(e+""),i,s=r.length,l;if(arguments.length<2){var d=this.node().__on;if(d){for(var u=0,h=d.length,p;u<h;++u)for(i=0,p=d[u];i<s;++i)if((l=r[i]).type===p.type&&l.name===p.name)return p.value}return}for(d=t?Ck:kk,i=0;i<s;++i)this.each(d(r[i],t,n));return this}function p3(e,t,n){var r=c3(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Pk(e,t){return function(){return p3(this,e,t)}}function Tk(e,t){return function(){return p3(this,e,t.apply(this,arguments))}}function Mk(e,t){return this.each((typeof t=="function"?Tk:Pk)(e,t))}function*Rk(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,l;i<s;++i)(l=r[i])&&(yield l)}var m3=[null];function Rn(e,t){this._groups=e,this._parents=t}function Dc(){return new Rn([[document.documentElement]],m3)}function Ak(){return this}Rn.prototype=Dc.prototype={constructor:Rn,select:sj,selectAll:cj,selectChild:fj,selectChildren:xj,filter:yj,data:_j,enter:vj,exit:kj,join:Cj,merge:Ej,selection:Ak,order:Pj,sort:Tj,call:Rj,nodes:Aj,node:Ij,size:Fj,empty:zj,each:Lj,attr:Vj,style:Kj,property:Zj,classed:nk,text:ak,html:dk,raise:hk,lower:pk,append:mk,insert:xk,remove:vk,clone:Nk,datum:Sk,on:Ek,dispatch:Mk,[Symbol.iterator]:Rk};function ur(e){return typeof e=="string"?new Rn([[document.querySelector(e)]],[document.documentElement]):new Rn([[e]],m3)}function Ik(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Rr(e,t){if(e=Ik(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Fk={passive:!1},vc={capture:!0,passive:!1};function tm(e){e.stopImmediatePropagation()}function co(e){e.preventDefault(),e.stopImmediatePropagation()}function g3(e){var t=e.document.documentElement,n=ur(e).on("dragstart.drag",co,vc);"onselectstart"in t?n.on("selectstart.drag",co,vc):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function x3(e,t){var n=e.document.documentElement,r=ur(e).on("dragstart.drag",null);t&&(r.on("click.drag",co,vc),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const uu=e=>()=>e;function Cg(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:s,x:l,y:d,dx:u,dy:h,dispatch:p}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:p}})}Cg.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function zk(e){return!e.ctrlKey&&!e.button}function Lk(){return this.parentNode}function Dk(e,t){return t??{x:e.x,y:e.y}}function Ok(){return navigator.maxTouchPoints||"ontouchstart"in this}function Uk(){var e=zk,t=Lk,n=Dk,r=Ok,i={},s=Jh("start","drag","end"),l=0,d,u,h,p,m=0;function x(_){_.on("mousedown.drag",y).filter(r).on("touchstart.drag",k).on("touchmove.drag",w,Fk).on("touchend.drag touchcancel.drag",j).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(_,E){if(!(p||!e.call(this,_,E))){var A=v(this,t.call(this,_,E),_,E,"mouse");A&&(ur(_.view).on("mousemove.drag",S,vc).on("mouseup.drag",N,vc),g3(_.view),tm(_),h=!1,d=_.clientX,u=_.clientY,A("start",_))}}function S(_){if(co(_),!h){var E=_.clientX-d,A=_.clientY-u;h=E*E+A*A>m}i.mouse("drag",_)}function N(_){ur(_.view).on("mousemove.drag mouseup.drag",null),x3(_.view,h),co(_),i.mouse("end",_)}function k(_,E){if(e.call(this,_,E)){var A=_.changedTouches,D=t.call(this,_,E),M=A.length,I,P;for(I=0;I<M;++I)(P=v(this,D,_,E,A[I].identifier,A[I]))&&(tm(_),P("start",_,A[I]))}}function w(_){var E=_.changedTouches,A=E.length,D,M;for(D=0;D<A;++D)(M=i[E[D].identifier])&&(co(_),M("drag",_,E[D]))}function j(_){var E=_.changedTouches,A=E.length,D,M;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),D=0;D<A;++D)(M=i[E[D].identifier])&&(tm(_),M("end",_,E[D]))}function v(_,E,A,D,M,I){var P=s.copy(),L=Rr(I||A,E),F,G,R;if((R=n.call(_,new Cg("beforestart",{sourceEvent:A,target:x,identifier:M,active:l,x:L[0],y:L[1],dx:0,dy:0,dispatch:P}),D))!=null)return F=R.x-L[0]||0,G=R.y-L[1]||0,function $(B,Q,K){var H=L,W;switch(B){case"start":i[M]=$,W=l++;break;case"end":delete i[M],--l;case"drag":L=Rr(K||Q,E),W=l;break}P.call(B,_,new Cg(B,{sourceEvent:Q,subject:R,target:x,identifier:M,active:W,x:L[0]+F,y:L[1]+G,dx:L[0]-H[0],dy:L[1]-H[1],dispatch:P}),D)}}return x.filter=function(_){return arguments.length?(e=typeof _=="function"?_:uu(!!_),x):e},x.container=function(_){return arguments.length?(t=typeof _=="function"?_:uu(_),x):t},x.subject=function(_){return arguments.length?(n=typeof _=="function"?_:uu(_),x):n},x.touchable=function(_){return arguments.length?(r=typeof _=="function"?_:uu(!!_),x):r},x.on=function(){var _=s.on.apply(s,arguments);return _===s?x:_},x.clickDistance=function(_){return arguments.length?(m=(_=+_)*_,x):Math.sqrt(m)},x}function e1(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function y3(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Oc(){}var bc=.7,vh=1/bc,uo="\\s*([+-]?\\d+)\\s*",wc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Lr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$k=/^#([0-9a-f]{3,8})$/,Gk=new RegExp(`^rgb\\(${uo},${uo},${uo}\\)$`),Bk=new RegExp(`^rgb\\(${Lr},${Lr},${Lr}\\)$`),Vk=new RegExp(`^rgba\\(${uo},${uo},${uo},${wc}\\)$`),Hk=new RegExp(`^rgba\\(${Lr},${Lr},${Lr},${wc}\\)$`),Wk=new RegExp(`^hsl\\(${wc},${Lr},${Lr}\\)$`),Yk=new RegExp(`^hsla\\(${wc},${Lr},${Lr},${wc}\\)$`),U2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};e1(Oc,Nc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:$2,formatHex:$2,formatHex8:Kk,formatHsl:Xk,formatRgb:G2,toString:G2});function $2(){return this.rgb().formatHex()}function Kk(){return this.rgb().formatHex8()}function Xk(){return v3(this).formatHsl()}function G2(){return this.rgb().formatRgb()}function Nc(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=$k.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?B2(t):n===3?new vn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?hu(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?hu(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Gk.exec(e))?new vn(t[1],t[2],t[3],1):(t=Bk.exec(e))?new vn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Vk.exec(e))?hu(t[1],t[2],t[3],t[4]):(t=Hk.exec(e))?hu(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Wk.exec(e))?W2(t[1],t[2]/100,t[3]/100,1):(t=Yk.exec(e))?W2(t[1],t[2]/100,t[3]/100,t[4]):U2.hasOwnProperty(e)?B2(U2[e]):e==="transparent"?new vn(NaN,NaN,NaN,0):null}function B2(e){return new vn(e>>16&255,e>>8&255,e&255,1)}function hu(e,t,n,r){return r<=0&&(e=t=n=NaN),new vn(e,t,n,r)}function Qk(e){return e instanceof Oc||(e=Nc(e)),e?(e=e.rgb(),new vn(e.r,e.g,e.b,e.opacity)):new vn}function Eg(e,t,n,r){return arguments.length===1?Qk(e):new vn(e,t,n,r??1)}function vn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}e1(vn,Eg,y3(Oc,{brighter(e){return e=e==null?vh:Math.pow(vh,e),new vn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?bc:Math.pow(bc,e),new vn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new vn(Zs(this.r),Zs(this.g),Zs(this.b),bh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:V2,formatHex:V2,formatHex8:qk,formatRgb:H2,toString:H2}));function V2(){return`#${Ys(this.r)}${Ys(this.g)}${Ys(this.b)}`}function qk(){return`#${Ys(this.r)}${Ys(this.g)}${Ys(this.b)}${Ys((isNaN(this.opacity)?1:this.opacity)*255)}`}function H2(){const e=bh(this.opacity);return`${e===1?"rgb(":"rgba("}${Zs(this.r)}, ${Zs(this.g)}, ${Zs(this.b)}${e===1?")":`, ${e})`}`}function bh(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Zs(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ys(e){return e=Zs(e),(e<16?"0":"")+e.toString(16)}function W2(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new hr(e,t,n,r)}function v3(e){if(e instanceof hr)return new hr(e.h,e.s,e.l,e.opacity);if(e instanceof Oc||(e=Nc(e)),!e)return new hr;if(e instanceof hr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),l=NaN,d=s-i,u=(s+i)/2;return d?(t===s?l=(n-r)/d+(n<r)*6:n===s?l=(r-t)/d+2:l=(t-n)/d+4,d/=u<.5?s+i:2-s-i,l*=60):d=u>0&&u<1?0:l,new hr(l,d,u,e.opacity)}function Zk(e,t,n,r){return arguments.length===1?v3(e):new hr(e,t,n,r??1)}function hr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}e1(hr,Zk,y3(Oc,{brighter(e){return e=e==null?vh:Math.pow(vh,e),new hr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?bc:Math.pow(bc,e),new hr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new vn(nm(e>=240?e-240:e+120,i,r),nm(e,i,r),nm(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new hr(Y2(this.h),fu(this.s),fu(this.l),bh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=bh(this.opacity);return`${e===1?"hsl(":"hsla("}${Y2(this.h)}, ${fu(this.s)*100}%, ${fu(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Y2(e){return e=(e||0)%360,e<0?e+360:e}function fu(e){return Math.max(0,Math.min(1,e||0))}function nm(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const b3=e=>()=>e;function Jk(e,t){return function(n){return e+n*t}}function eC(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function tC(e){return(e=+e)==1?w3:function(t,n){return n-t?eC(t,n,e):b3(isNaN(t)?n:t)}}function w3(e,t){var n=t-e;return n?Jk(e,n):b3(isNaN(e)?t:e)}const K2=function e(t){var n=tC(t);function r(i,s){var l=n((i=Eg(i)).r,(s=Eg(s)).r),d=n(i.g,s.g),u=n(i.b,s.b),h=w3(i.opacity,s.opacity);return function(p){return i.r=l(p),i.g=d(p),i.b=u(p),i.opacity=h(p),i+""}}return r.gamma=e,r}(1);function Wi(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Pg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,rm=new RegExp(Pg.source,"g");function nC(e){return function(){return e}}function rC(e){return function(t){return e(t)+""}}function iC(e,t){var n=Pg.lastIndex=rm.lastIndex=0,r,i,s,l=-1,d=[],u=[];for(e=e+"",t=t+"";(r=Pg.exec(e))&&(i=rm.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),d[l]?d[l]+=s:d[++l]=s),(r=r[0])===(i=i[0])?d[l]?d[l]+=i:d[++l]=i:(d[++l]=null,u.push({i:l,x:Wi(r,i)})),n=rm.lastIndex;return n<t.length&&(s=t.slice(n),d[l]?d[l]+=s:d[++l]=s),d.length<2?u[0]?rC(u[0].x):nC(t):(t=u.length,function(h){for(var p=0,m;p<t;++p)d[(m=u[p]).i]=m.x(h);return d.join("")})}var X2=180/Math.PI,Tg={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function N3(e,t,n,r,i,s){var l,d,u;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(d=Math.sqrt(n*n+r*r))&&(n/=d,r/=d,u/=d),e*r<t*n&&(e=-e,t=-t,u=-u,l=-l),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*X2,skewX:Math.atan(u)*X2,scaleX:l,scaleY:d}}var pu;function sC(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Tg:N3(t.a,t.b,t.c,t.d,t.e,t.f)}function aC(e){return e==null||(pu||(pu=document.createElementNS("http://www.w3.org/2000/svg","g")),pu.setAttribute("transform",e),!(e=pu.transform.baseVal.consolidate()))?Tg:(e=e.matrix,N3(e.a,e.b,e.c,e.d,e.e,e.f))}function S3(e,t,n,r){function i(h){return h.length?h.pop()+" ":""}function s(h,p,m,x,y,S){if(h!==m||p!==x){var N=y.push("translate(",null,t,null,n);S.push({i:N-4,x:Wi(h,m)},{i:N-2,x:Wi(p,x)})}else(m||x)&&y.push("translate("+m+t+x+n)}function l(h,p,m,x){h!==p?(h-p>180?p+=360:p-h>180&&(h+=360),x.push({i:m.push(i(m)+"rotate(",null,r)-2,x:Wi(h,p)})):p&&m.push(i(m)+"rotate("+p+r)}function d(h,p,m,x){h!==p?x.push({i:m.push(i(m)+"skewX(",null,r)-2,x:Wi(h,p)}):p&&m.push(i(m)+"skewX("+p+r)}function u(h,p,m,x,y,S){if(h!==m||p!==x){var N=y.push(i(y)+"scale(",null,",",null,")");S.push({i:N-4,x:Wi(h,m)},{i:N-2,x:Wi(p,x)})}else(m!==1||x!==1)&&y.push(i(y)+"scale("+m+","+x+")")}return function(h,p){var m=[],x=[];return h=e(h),p=e(p),s(h.translateX,h.translateY,p.translateX,p.translateY,m,x),l(h.rotate,p.rotate,m,x),d(h.skewX,p.skewX,m,x),u(h.scaleX,h.scaleY,p.scaleX,p.scaleY,m,x),h=p=null,function(y){for(var S=-1,N=x.length,k;++S<N;)m[(k=x[S]).i]=k.x(y);return m.join("")}}}var oC=S3(sC,"px, ","px)","deg)"),lC=S3(aC,", ",")",")"),cC=1e-12;function Q2(e){return((e=Math.exp(e))+1/e)/2}function dC(e){return((e=Math.exp(e))-1/e)/2}function uC(e){return((e=Math.exp(2*e))-1)/(e+1)}const hC=function e(t,n,r){function i(s,l){var d=s[0],u=s[1],h=s[2],p=l[0],m=l[1],x=l[2],y=p-d,S=m-u,N=y*y+S*S,k,w;if(N<cC)w=Math.log(x/h)/t,k=function(D){return[d+D*y,u+D*S,h*Math.exp(t*D*w)]};else{var j=Math.sqrt(N),v=(x*x-h*h+r*N)/(2*h*n*j),_=(x*x-h*h-r*N)/(2*x*n*j),E=Math.log(Math.sqrt(v*v+1)-v),A=Math.log(Math.sqrt(_*_+1)-_);w=(A-E)/t,k=function(D){var M=D*w,I=Q2(E),P=h/(n*j)*(I*uC(t*M+E)-dC(E));return[d+P*y,u+P*S,h*I/Q2(t*M+E)]}}return k.duration=w*1e3*t/Math.SQRT2,k}return i.rho=function(s){var l=Math.max(.001,+s),d=l*l,u=d*d;return e(l,d,u)},i}(Math.SQRT2,2,4);var _o=0,Ol=0,Sl=0,_3=1e3,wh,Ul,Nh=0,sa=0,tf=0,Sc=typeof performance=="object"&&performance.now?performance:Date,j3=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function t1(){return sa||(j3(fC),sa=Sc.now()+tf)}function fC(){sa=0}function Sh(){this._call=this._time=this._next=null}Sh.prototype=k3.prototype={constructor:Sh,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?t1():+n)+(t==null?0:+t),!this._next&&Ul!==this&&(Ul?Ul._next=this:wh=this,Ul=this),this._call=e,this._time=n,Mg()},stop:function(){this._call&&(this._call=null,this._time=1/0,Mg())}};function k3(e,t,n){var r=new Sh;return r.restart(e,t,n),r}function pC(){t1(),++_o;for(var e=wh,t;e;)(t=sa-e._time)>=0&&e._call.call(void 0,t),e=e._next;--_o}function q2(){sa=(Nh=Sc.now())+tf,_o=Ol=0;try{pC()}finally{_o=0,gC(),sa=0}}function mC(){var e=Sc.now(),t=e-Nh;t>_3&&(tf-=t,Nh=e)}function gC(){for(var e,t=wh,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:wh=n);Ul=e,Mg(r)}function Mg(e){if(!_o){Ol&&(Ol=clearTimeout(Ol));var t=e-sa;t>24?(e<1/0&&(Ol=setTimeout(q2,e-Sc.now()-tf)),Sl&&(Sl=clearInterval(Sl))):(Sl||(Nh=Sc.now(),Sl=setInterval(mC,_3)),_o=1,j3(q2))}}function Z2(e,t,n){var r=new Sh;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var xC=Jh("start","end","cancel","interrupt"),yC=[],C3=0,J2=1,Rg=2,Ou=3,eb=4,Ag=5,Uu=6;function nf(e,t,n,r,i,s){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;vC(e,n,{name:t,index:r,group:i,on:xC,tween:yC,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:C3})}function n1(e,t){var n=yr(e,t);if(n.state>C3)throw new Error("too late; already scheduled");return n}function Dr(e,t){var n=yr(e,t);if(n.state>Ou)throw new Error("too late; already running");return n}function yr(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function vC(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=k3(s,0,n.time);function s(h){n.state=J2,n.timer.restart(l,n.delay,n.time),n.delay<=h&&l(h-n.delay)}function l(h){var p,m,x,y;if(n.state!==J2)return u();for(p in r)if(y=r[p],y.name===n.name){if(y.state===Ou)return Z2(l);y.state===eb?(y.state=Uu,y.timer.stop(),y.on.call("interrupt",e,e.__data__,y.index,y.group),delete r[p]):+p<t&&(y.state=Uu,y.timer.stop(),y.on.call("cancel",e,e.__data__,y.index,y.group),delete r[p])}if(Z2(function(){n.state===Ou&&(n.state=eb,n.timer.restart(d,n.delay,n.time),d(h))}),n.state=Rg,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Rg){for(n.state=Ou,i=new Array(x=n.tween.length),p=0,m=-1;p<x;++p)(y=n.tween[p].value.call(e,e.__data__,n.index,n.group))&&(i[++m]=y);i.length=m+1}}function d(h){for(var p=h<n.duration?n.ease.call(null,h/n.duration):(n.timer.restart(u),n.state=Ag,1),m=-1,x=i.length;++m<x;)i[m].call(e,p);n.state===Ag&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Uu,n.timer.stop(),delete r[t];for(var h in r)return;delete e.__transition}}function $u(e,t){var n=e.__transition,r,i,s=!0,l;if(n){t=t==null?null:t+"";for(l in n){if((r=n[l]).name!==t){s=!1;continue}i=r.state>Rg&&r.state<Ag,r.state=Uu,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[l]}s&&delete e.__transition}}function bC(e){return this.each(function(){$u(this,e)})}function wC(e,t){var n,r;return function(){var i=Dr(this,e),s=i.tween;if(s!==n){r=n=s;for(var l=0,d=r.length;l<d;++l)if(r[l].name===t){r=r.slice(),r.splice(l,1);break}}i.tween=r}}function NC(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Dr(this,e),l=s.tween;if(l!==r){i=(r=l).slice();for(var d={name:t,value:n},u=0,h=i.length;u<h;++u)if(i[u].name===t){i[u]=d;break}u===h&&i.push(d)}s.tween=i}}function SC(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=yr(this.node(),n).tween,i=0,s=r.length,l;i<s;++i)if((l=r[i]).name===e)return l.value;return null}return this.each((t==null?wC:NC)(n,e,t))}function r1(e,t,n){var r=e._id;return e.each(function(){var i=Dr(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return yr(i,r).value[t]}}function E3(e,t){var n;return(typeof t=="number"?Wi:t instanceof Nc?K2:(n=Nc(t))?(t=n,K2):iC)(e,t)}function _C(e){return function(){this.removeAttribute(e)}}function jC(e){return function(){this.removeAttributeNS(e.space,e.local)}}function kC(e,t,n){var r,i=n+"",s;return function(){var l=this.getAttribute(e);return l===i?null:l===r?s:s=t(r=l,n)}}function CC(e,t,n){var r,i=n+"",s;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===r?s:s=t(r=l,n)}}function EC(e,t,n){var r,i,s;return function(){var l,d=n(this),u;return d==null?void this.removeAttribute(e):(l=this.getAttribute(e),u=d+"",l===u?null:l===r&&u===i?s:(i=u,s=t(r=l,d)))}}function PC(e,t,n){var r,i,s;return function(){var l,d=n(this),u;return d==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),u=d+"",l===u?null:l===r&&u===i?s:(i=u,s=t(r=l,d)))}}function TC(e,t){var n=ef(e),r=n==="transform"?lC:E3;return this.attrTween(e,typeof t=="function"?(n.local?PC:EC)(n,r,r1(this,"attr."+e,t)):t==null?(n.local?jC:_C)(n):(n.local?CC:kC)(n,r,t))}function MC(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function RC(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function AC(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&RC(e,s)),n}return i._value=t,i}function IC(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&MC(e,s)),n}return i._value=t,i}function FC(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=ef(e);return this.tween(n,(r.local?AC:IC)(r,t))}function zC(e,t){return function(){n1(this,e).delay=+t.apply(this,arguments)}}function LC(e,t){return t=+t,function(){n1(this,e).delay=t}}function DC(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?zC:LC)(t,e)):yr(this.node(),t).delay}function OC(e,t){return function(){Dr(this,e).duration=+t.apply(this,arguments)}}function UC(e,t){return t=+t,function(){Dr(this,e).duration=t}}function $C(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?OC:UC)(t,e)):yr(this.node(),t).duration}function GC(e,t){if(typeof t!="function")throw new Error;return function(){Dr(this,e).ease=t}}function BC(e){var t=this._id;return arguments.length?this.each(GC(t,e)):yr(this.node(),t).ease}function VC(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Dr(this,e).ease=n}}function HC(e){if(typeof e!="function")throw new Error;return this.each(VC(this._id,e))}function WC(e){typeof e!="function"&&(e=a3(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],l=s.length,d=r[i]=[],u,h=0;h<l;++h)(u=s[h])&&e.call(u,u.__data__,h,s)&&d.push(u);return new mi(r,this._parents,this._name,this._id)}function YC(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),l=new Array(r),d=0;d<s;++d)for(var u=t[d],h=n[d],p=u.length,m=l[d]=new Array(p),x,y=0;y<p;++y)(x=u[y]||h[y])&&(m[y]=x);for(;d<r;++d)l[d]=t[d];return new mi(l,this._parents,this._name,this._id)}function KC(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function XC(e,t,n){var r,i,s=KC(t)?n1:Dr;return function(){var l=s(this,e),d=l.on;d!==r&&(i=(r=d).copy()).on(t,n),l.on=i}}function QC(e,t){var n=this._id;return arguments.length<2?yr(this.node(),n).on.on(e):this.each(XC(n,e,t))}function qC(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function ZC(){return this.on("end.remove",qC(this._id))}function JC(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Zx(e));for(var r=this._groups,i=r.length,s=new Array(i),l=0;l<i;++l)for(var d=r[l],u=d.length,h=s[l]=new Array(u),p,m,x=0;x<u;++x)(p=d[x])&&(m=e.call(p,p.__data__,x,d))&&("__data__"in p&&(m.__data__=p.__data__),h[x]=m,nf(h[x],t,n,x,h,yr(p,n)));return new mi(s,this._parents,t,n)}function eE(e){var t=this._name,n=this._id;typeof e!="function"&&(e=s3(e));for(var r=this._groups,i=r.length,s=[],l=[],d=0;d<i;++d)for(var u=r[d],h=u.length,p,m=0;m<h;++m)if(p=u[m]){for(var x=e.call(p,p.__data__,m,u),y,S=yr(p,n),N=0,k=x.length;N<k;++N)(y=x[N])&&nf(y,t,n,N,x,S);s.push(x),l.push(p)}return new mi(s,l,t,n)}var tE=Dc.prototype.constructor;function nE(){return new tE(this._groups,this._parents)}function rE(e,t){var n,r,i;return function(){var s=So(this,e),l=(this.style.removeProperty(e),So(this,e));return s===l?null:s===n&&l===r?i:i=t(n=s,r=l)}}function P3(e){return function(){this.style.removeProperty(e)}}function iE(e,t,n){var r,i=n+"",s;return function(){var l=So(this,e);return l===i?null:l===r?s:s=t(r=l,n)}}function sE(e,t,n){var r,i,s;return function(){var l=So(this,e),d=n(this),u=d+"";return d==null&&(u=d=(this.style.removeProperty(e),So(this,e))),l===u?null:l===r&&u===i?s:(i=u,s=t(r=l,d))}}function aE(e,t){var n,r,i,s="style."+t,l="end."+s,d;return function(){var u=Dr(this,e),h=u.on,p=u.value[s]==null?d||(d=P3(t)):void 0;(h!==n||i!==p)&&(r=(n=h).copy()).on(l,i=p),u.on=r}}function oE(e,t,n){var r=(e+="")=="transform"?oC:E3;return t==null?this.styleTween(e,rE(e,r)).on("end.style."+e,P3(e)):typeof t=="function"?this.styleTween(e,sE(e,r,r1(this,"style."+e,t))).each(aE(this._id,e)):this.styleTween(e,iE(e,r,t),n).on("end.style."+e,null)}function lE(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function cE(e,t,n){var r,i;function s(){var l=t.apply(this,arguments);return l!==i&&(r=(i=l)&&lE(e,l,n)),r}return s._value=t,s}function dE(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,cE(e,t,n??""))}function uE(e){return function(){this.textContent=e}}function hE(e){return function(){var t=e(this);this.textContent=t??""}}function fE(e){return this.tween("text",typeof e=="function"?hE(r1(this,"text",e)):uE(e==null?"":e+""))}function pE(e){return function(t){this.textContent=e.call(this,t)}}function mE(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&pE(i)),t}return r._value=e,r}function gE(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,mE(e))}function xE(){for(var e=this._name,t=this._id,n=T3(),r=this._groups,i=r.length,s=0;s<i;++s)for(var l=r[s],d=l.length,u,h=0;h<d;++h)if(u=l[h]){var p=yr(u,t);nf(u,e,n,h,l,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new mi(r,this._parents,e,n)}function yE(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,l){var d={value:l},u={value:function(){--i===0&&s()}};n.each(function(){var h=Dr(this,r),p=h.on;p!==e&&(t=(e=p).copy(),t._.cancel.push(d),t._.interrupt.push(d),t._.end.push(u)),h.on=t}),i===0&&s()})}var vE=0;function mi(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function T3(){return++vE}var ti=Dc.prototype;mi.prototype={constructor:mi,select:JC,selectAll:eE,selectChild:ti.selectChild,selectChildren:ti.selectChildren,filter:WC,merge:YC,selection:nE,transition:xE,call:ti.call,nodes:ti.nodes,node:ti.node,size:ti.size,empty:ti.empty,each:ti.each,on:QC,attr:TC,attrTween:FC,style:oE,styleTween:dE,text:fE,textTween:gE,remove:ZC,tween:SC,delay:DC,duration:$C,ease:BC,easeVarying:HC,end:yE,[Symbol.iterator]:ti[Symbol.iterator]};function bE(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var wE={time:null,delay:0,duration:250,ease:bE};function NE(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function SE(e){var t,n;e instanceof mi?(t=e._id,e=e._name):(t=T3(),(n=wE).time=t1(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var l=r[s],d=l.length,u,h=0;h<d;++h)(u=l[h])&&nf(u,e,t,h,l,n||NE(u,t));return new mi(r,this._parents,e,t)}Dc.prototype.interrupt=bC;Dc.prototype.transition=SE;const mu=e=>()=>e;function _E(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function li(e,t,n){this.k=e,this.x=t,this.y=n}li.prototype={constructor:li,scale:function(e){return e===1?this:new li(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new li(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var cs=new li(1,0,0);li.prototype;function im(e){e.stopImmediatePropagation()}function _l(e){e.preventDefault(),e.stopImmediatePropagation()}function jE(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function kE(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function tb(){return this.__zoom||cs}function CE(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function EE(){return navigator.maxTouchPoints||"ontouchstart"in this}function PE(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],l=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),l>s?(s+l)/2:Math.min(0,s)||Math.max(0,l))}function TE(){var e=jE,t=kE,n=PE,r=CE,i=EE,s=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],d=250,u=hC,h=Jh("start","zoom","end"),p,m,x,y=500,S=150,N=0,k=10;function w(R){R.property("__zoom",tb).on("wheel.zoom",M,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",P).filter(i).on("touchstart.zoom",L).on("touchmove.zoom",F).on("touchend.zoom touchcancel.zoom",G).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}w.transform=function(R,$,B,Q){var K=R.selection?R.selection():R;K.property("__zoom",tb),R!==K?E(R,$,B,Q):K.interrupt().each(function(){A(this,arguments).event(Q).start().zoom(null,typeof $=="function"?$.apply(this,arguments):$).end()})},w.scaleBy=function(R,$,B,Q){w.scaleTo(R,function(){var K=this.__zoom.k,H=typeof $=="function"?$.apply(this,arguments):$;return K*H},B,Q)},w.scaleTo=function(R,$,B,Q){w.transform(R,function(){var K=t.apply(this,arguments),H=this.__zoom,W=B==null?_(K):typeof B=="function"?B.apply(this,arguments):B,z=H.invert(W),V=typeof $=="function"?$.apply(this,arguments):$;return n(v(j(H,V),W,z),K,l)},B,Q)},w.translateBy=function(R,$,B,Q){w.transform(R,function(){return n(this.__zoom.translate(typeof $=="function"?$.apply(this,arguments):$,typeof B=="function"?B.apply(this,arguments):B),t.apply(this,arguments),l)},null,Q)},w.translateTo=function(R,$,B,Q,K){w.transform(R,function(){var H=t.apply(this,arguments),W=this.__zoom,z=Q==null?_(H):typeof Q=="function"?Q.apply(this,arguments):Q;return n(cs.translate(z[0],z[1]).scale(W.k).translate(typeof $=="function"?-$.apply(this,arguments):-$,typeof B=="function"?-B.apply(this,arguments):-B),H,l)},Q,K)};function j(R,$){return $=Math.max(s[0],Math.min(s[1],$)),$===R.k?R:new li($,R.x,R.y)}function v(R,$,B){var Q=$[0]-B[0]*R.k,K=$[1]-B[1]*R.k;return Q===R.x&&K===R.y?R:new li(R.k,Q,K)}function _(R){return[(+R[0][0]+ +R[1][0])/2,(+R[0][1]+ +R[1][1])/2]}function E(R,$,B,Q){R.on("start.zoom",function(){A(this,arguments).event(Q).start()}).on("interrupt.zoom end.zoom",function(){A(this,arguments).event(Q).end()}).tween("zoom",function(){var K=this,H=arguments,W=A(K,H).event(Q),z=t.apply(K,H),V=B==null?_(z):typeof B=="function"?B.apply(K,H):B,J=Math.max(z[1][0]-z[0][0],z[1][1]-z[0][1]),ee=K.__zoom,ae=typeof $=="function"?$.apply(K,H):$,fe=u(ee.invert(V).concat(J/ee.k),ae.invert(V).concat(J/ae.k));return function(Y){if(Y===1)Y=ae;else{var ie=fe(Y),ce=J/ie[2];Y=new li(ce,V[0]-ie[0]*ce,V[1]-ie[1]*ce)}W.zoom(null,Y)}})}function A(R,$,B){return!B&&R.__zooming||new D(R,$)}function D(R,$){this.that=R,this.args=$,this.active=0,this.sourceEvent=null,this.extent=t.apply(R,$),this.taps=0}D.prototype={event:function(R){return R&&(this.sourceEvent=R),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(R,$){return this.mouse&&R!=="mouse"&&(this.mouse[1]=$.invert(this.mouse[0])),this.touch0&&R!=="touch"&&(this.touch0[1]=$.invert(this.touch0[0])),this.touch1&&R!=="touch"&&(this.touch1[1]=$.invert(this.touch1[0])),this.that.__zoom=$,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(R){var $=ur(this.that).datum();h.call(R,this.that,new _E(R,{sourceEvent:this.sourceEvent,target:w,type:R,transform:this.that.__zoom,dispatch:h}),$)}};function M(R,...$){if(!e.apply(this,arguments))return;var B=A(this,$).event(R),Q=this.__zoom,K=Math.max(s[0],Math.min(s[1],Q.k*Math.pow(2,r.apply(this,arguments)))),H=Rr(R);if(B.wheel)(B.mouse[0][0]!==H[0]||B.mouse[0][1]!==H[1])&&(B.mouse[1]=Q.invert(B.mouse[0]=H)),clearTimeout(B.wheel);else{if(Q.k===K)return;B.mouse=[H,Q.invert(H)],$u(this),B.start()}_l(R),B.wheel=setTimeout(W,S),B.zoom("mouse",n(v(j(Q,K),B.mouse[0],B.mouse[1]),B.extent,l));function W(){B.wheel=null,B.end()}}function I(R,...$){if(x||!e.apply(this,arguments))return;var B=R.currentTarget,Q=A(this,$,!0).event(R),K=ur(R.view).on("mousemove.zoom",V,!0).on("mouseup.zoom",J,!0),H=Rr(R,B),W=R.clientX,z=R.clientY;g3(R.view),im(R),Q.mouse=[H,this.__zoom.invert(H)],$u(this),Q.start();function V(ee){if(_l(ee),!Q.moved){var ae=ee.clientX-W,fe=ee.clientY-z;Q.moved=ae*ae+fe*fe>N}Q.event(ee).zoom("mouse",n(v(Q.that.__zoom,Q.mouse[0]=Rr(ee,B),Q.mouse[1]),Q.extent,l))}function J(ee){K.on("mousemove.zoom mouseup.zoom",null),x3(ee.view,Q.moved),_l(ee),Q.event(ee).end()}}function P(R,...$){if(e.apply(this,arguments)){var B=this.__zoom,Q=Rr(R.changedTouches?R.changedTouches[0]:R,this),K=B.invert(Q),H=B.k*(R.shiftKey?.5:2),W=n(v(j(B,H),Q,K),t.apply(this,$),l);_l(R),d>0?ur(this).transition().duration(d).call(E,W,Q,R):ur(this).call(w.transform,W,Q,R)}}function L(R,...$){if(e.apply(this,arguments)){var B=R.touches,Q=B.length,K=A(this,$,R.changedTouches.length===Q).event(R),H,W,z,V;for(im(R),W=0;W<Q;++W)z=B[W],V=Rr(z,this),V=[V,this.__zoom.invert(V),z.identifier],K.touch0?!K.touch1&&K.touch0[2]!==V[2]&&(K.touch1=V,K.taps=0):(K.touch0=V,H=!0,K.taps=1+!!p);p&&(p=clearTimeout(p)),H&&(K.taps<2&&(m=V[0],p=setTimeout(function(){p=null},y)),$u(this),K.start())}}function F(R,...$){if(this.__zooming){var B=A(this,$).event(R),Q=R.changedTouches,K=Q.length,H,W,z,V;for(_l(R),H=0;H<K;++H)W=Q[H],z=Rr(W,this),B.touch0&&B.touch0[2]===W.identifier?B.touch0[0]=z:B.touch1&&B.touch1[2]===W.identifier&&(B.touch1[0]=z);if(W=B.that.__zoom,B.touch1){var J=B.touch0[0],ee=B.touch0[1],ae=B.touch1[0],fe=B.touch1[1],Y=(Y=ae[0]-J[0])*Y+(Y=ae[1]-J[1])*Y,ie=(ie=fe[0]-ee[0])*ie+(ie=fe[1]-ee[1])*ie;W=j(W,Math.sqrt(Y/ie)),z=[(J[0]+ae[0])/2,(J[1]+ae[1])/2],V=[(ee[0]+fe[0])/2,(ee[1]+fe[1])/2]}else if(B.touch0)z=B.touch0[0],V=B.touch0[1];else return;B.zoom("touch",n(v(W,z,V),B.extent,l))}}function G(R,...$){if(this.__zooming){var B=A(this,$).event(R),Q=R.changedTouches,K=Q.length,H,W;for(im(R),x&&clearTimeout(x),x=setTimeout(function(){x=null},y),H=0;H<K;++H)W=Q[H],B.touch0&&B.touch0[2]===W.identifier?delete B.touch0:B.touch1&&B.touch1[2]===W.identifier&&delete B.touch1;if(B.touch1&&!B.touch0&&(B.touch0=B.touch1,delete B.touch1),B.touch0)B.touch0[1]=this.__zoom.invert(B.touch0[0]);else if(B.end(),B.taps===2&&(W=Rr(W,this),Math.hypot(m[0]-W[0],m[1]-W[1])<k)){var z=ur(this).on("dblclick.zoom");z&&z.apply(this,arguments)}}}return w.wheelDelta=function(R){return arguments.length?(r=typeof R=="function"?R:mu(+R),w):r},w.filter=function(R){return arguments.length?(e=typeof R=="function"?R:mu(!!R),w):e},w.touchable=function(R){return arguments.length?(i=typeof R=="function"?R:mu(!!R),w):i},w.extent=function(R){return arguments.length?(t=typeof R=="function"?R:mu([[+R[0][0],+R[0][1]],[+R[1][0],+R[1][1]]]),w):t},w.scaleExtent=function(R){return arguments.length?(s[0]=+R[0],s[1]=+R[1],w):[s[0],s[1]]},w.translateExtent=function(R){return arguments.length?(l[0][0]=+R[0][0],l[1][0]=+R[1][0],l[0][1]=+R[0][1],l[1][1]=+R[1][1],w):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},w.constrain=function(R){return arguments.length?(n=R,w):n},w.duration=function(R){return arguments.length?(d=+R,w):d},w.interpolate=function(R){return arguments.length?(u=R,w):u},w.on=function(){var R=h.on.apply(h,arguments);return R===h?w:R},w.clickDistance=function(R){return arguments.length?(N=(R=+R)*R,w):Math.sqrt(N)},w.tapDistance=function(R){return arguments.length?(k=+R,w):k},w}const rf=T.createContext(null),ME=rf.Provider,gi={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},M3=gi.error001();function ft(e,t){const n=T.useContext(rf);if(n===null)throw new Error(M3);return r3(n,e,t)}const Ot=()=>{const e=T.useContext(rf);if(e===null)throw new Error(M3);return T.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},RE=e=>e.userSelectionActive?"none":"all";function R3({position:e,children:t,className:n,style:r,...i}){const s=ft(RE),l=`${e}`.split("-");return te.createElement("div",{className:dn(["react-flow__panel",n,...l]),style:{...r,pointerEvents:s},...i},t)}function AE({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:te.createElement(R3,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},te.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const IE=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:s={},labelBgPadding:l=[2,4],labelBgBorderRadius:d=2,children:u,className:h,...p})=>{const m=T.useRef(null),[x,y]=T.useState({x:0,y:0,width:0,height:0}),S=dn(["react-flow__edge-textwrapper",h]);return T.useEffect(()=>{if(m.current){const N=m.current.getBBox();y({x:N.x,y:N.y,width:N.width,height:N.height})}},[n]),typeof n>"u"||!n?null:te.createElement("g",{transform:`translate(${e-x.width/2} ${t-x.height/2})`,className:S,visibility:x.width?"visible":"hidden",...p},i&&te.createElement("rect",{width:x.width+2*l[0],x:-l[0],y:-l[1],height:x.height+2*l[1],className:"react-flow__edge-textbg",style:s,rx:d,ry:d}),te.createElement("text",{className:"react-flow__edge-text",y:x.height/2,dy:"0.3em",ref:m,style:r},n),u)};var FE=T.memo(IE);const i1=e=>({width:e.offsetWidth,height:e.offsetHeight}),jo=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),s1=(e={x:0,y:0},t)=>({x:jo(e.x,t[0][0],t[1][0]),y:jo(e.y,t[0][1],t[1][1])}),nb=(e,t,n)=>e<t?jo(Math.abs(e-t),1,50)/50:e>n?-jo(Math.abs(e-n),1,50)/50:0,A3=(e,t)=>{const n=nb(e.x,35,t.width-35)*20,r=nb(e.y,35,t.height-35)*20;return[n,r]},I3=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},zE=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),a1=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),LE=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),rb=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Ig=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},DE=e=>Xn(e.width)&&Xn(e.height)&&Xn(e.x)&&Xn(e.y),Xn=e=>!isNaN(e)&&isFinite(e),gt=Symbol.for("internals"),F3=["Enter"," ","Escape"],OE=(e,t)=>{},UE=e=>"nativeEvent"in e;function Fg(e){var i,s;const t=UE(e)?e.nativeEvent:e,n=((s=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const z3=e=>"clientX"in e,ds=(e,t)=>{var s,l;const n=z3(e),r=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,i=n?e.clientY:(l=e.touches)==null?void 0:l[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},_h=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},Uc=({id:e,path:t,labelX:n,labelY:r,label:i,labelStyle:s,labelShowBg:l,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:p,markerEnd:m,markerStart:x,interactionWidth:y=20})=>te.createElement(te.Fragment,null,te.createElement("path",{id:e,style:p,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:m,markerStart:x}),y&&te.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:y,className:"react-flow__edge-interaction"}),i&&Xn(n)&&Xn(r)?te.createElement(FE,{x:n,y:r,label:i,labelStyle:s,labelShowBg:l,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h}):null);Uc.displayName="BaseEdge";function jl(e,t,n){return n===void 0?n:r=>{const i=t().edges.find(s=>s.id===e);i&&n(r,{...i})}}function L3({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,s=n<e?n+i:n-i,l=Math.abs(r-t)/2,d=r<t?r+l:r-l;return[s,d,i,l]}function D3({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:l,targetControlY:d}){const u=e*.125+i*.375+l*.375+n*.125,h=t*.125+s*.375+d*.375+r*.125,p=Math.abs(u-e),m=Math.abs(h-t);return[u,h,p,m]}var aa;(function(e){e.Strict="strict",e.Loose="loose"})(aa||(aa={}));var Ks;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Ks||(Ks={}));var _c;(function(e){e.Partial="partial",e.Full="full"})(_c||(_c={}));var Qi;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Qi||(Qi={}));var jc;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(jc||(jc={}));var Ne;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Ne||(Ne={}));function ib({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===Ne.Left||e===Ne.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function O3({sourceX:e,sourceY:t,sourcePosition:n=Ne.Bottom,targetX:r,targetY:i,targetPosition:s=Ne.Top}){const[l,d]=ib({pos:n,x1:e,y1:t,x2:r,y2:i}),[u,h]=ib({pos:s,x1:r,y1:i,x2:e,y2:t}),[p,m,x,y]=D3({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:l,sourceControlY:d,targetControlX:u,targetControlY:h});return[`M${e},${t} C${l},${d} ${u},${h} ${r},${i}`,p,m,x,y]}const o1=T.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=Ne.Bottom,targetPosition:s=Ne.Top,label:l,labelStyle:d,labelShowBg:u,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:m,style:x,markerEnd:y,markerStart:S,interactionWidth:N})=>{const[k,w,j]=O3({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:s});return te.createElement(Uc,{path:k,labelX:w,labelY:j,label:l,labelStyle:d,labelShowBg:u,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:m,style:x,markerEnd:y,markerStart:S,interactionWidth:N})});o1.displayName="SimpleBezierEdge";const sb={[Ne.Left]:{x:-1,y:0},[Ne.Right]:{x:1,y:0},[Ne.Top]:{x:0,y:-1},[Ne.Bottom]:{x:0,y:1}},$E=({source:e,sourcePosition:t=Ne.Bottom,target:n})=>t===Ne.Left||t===Ne.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},ab=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function GE({source:e,sourcePosition:t=Ne.Bottom,target:n,targetPosition:r=Ne.Top,center:i,offset:s}){const l=sb[t],d=sb[r],u={x:e.x+l.x*s,y:e.y+l.y*s},h={x:n.x+d.x*s,y:n.y+d.y*s},p=$E({source:u,sourcePosition:t,target:h}),m=p.x!==0?"x":"y",x=p[m];let y=[],S,N;const k={x:0,y:0},w={x:0,y:0},[j,v,_,E]=L3({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(l[m]*d[m]===-1){S=i.x??j,N=i.y??v;const D=[{x:S,y:u.y},{x:S,y:h.y}],M=[{x:u.x,y:N},{x:h.x,y:N}];l[m]===x?y=m==="x"?D:M:y=m==="x"?M:D}else{const D=[{x:u.x,y:h.y}],M=[{x:h.x,y:u.y}];if(m==="x"?y=l.x===x?M:D:y=l.y===x?D:M,t===r){const G=Math.abs(e[m]-n[m]);if(G<=s){const R=Math.min(s-1,s-G);l[m]===x?k[m]=(u[m]>e[m]?-1:1)*R:w[m]=(h[m]>n[m]?-1:1)*R}}if(t!==r){const G=m==="x"?"y":"x",R=l[m]===d[G],$=u[G]>h[G],B=u[G]<h[G];(l[m]===1&&(!R&&$||R&&B)||l[m]!==1&&(!R&&B||R&&$))&&(y=m==="x"?D:M)}const I={x:u.x+k.x,y:u.y+k.y},P={x:h.x+w.x,y:h.y+w.y},L=Math.max(Math.abs(I.x-y[0].x),Math.abs(P.x-y[0].x)),F=Math.max(Math.abs(I.y-y[0].y),Math.abs(P.y-y[0].y));L>=F?(S=(I.x+P.x)/2,N=y[0].y):(S=y[0].x,N=(I.y+P.y)/2)}return[[e,{x:u.x+k.x,y:u.y+k.y},...y,{x:h.x+w.x,y:h.y+w.y},n],S,N,_,E]}function BE(e,t,n,r){const i=Math.min(ab(e,t)/2,ab(t,n)/2,r),{x:s,y:l}=t;if(e.x===s&&s===n.x||e.y===l&&l===n.y)return`L${s} ${l}`;if(e.y===l){const h=e.x<n.x?-1:1,p=e.y<n.y?1:-1;return`L ${s+i*h},${l}Q ${s},${l} ${s},${l+i*p}`}const d=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${s},${l+i*u}Q ${s},${l} ${s+i*d},${l}`}function zg({sourceX:e,sourceY:t,sourcePosition:n=Ne.Bottom,targetX:r,targetY:i,targetPosition:s=Ne.Top,borderRadius:l=5,centerX:d,centerY:u,offset:h=20}){const[p,m,x,y,S]=GE({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:d,y:u},offset:h});return[p.reduce((k,w,j)=>{let v="";return j>0&&j<p.length-1?v=BE(p[j-1],w,p[j+1],l):v=`${j===0?"M":"L"}${w.x} ${w.y}`,k+=v,k},""),m,x,y,S]}const sf=T.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:s,labelShowBg:l,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:p,sourcePosition:m=Ne.Bottom,targetPosition:x=Ne.Top,markerEnd:y,markerStart:S,pathOptions:N,interactionWidth:k})=>{const[w,j,v]=zg({sourceX:e,sourceY:t,sourcePosition:m,targetX:n,targetY:r,targetPosition:x,borderRadius:N==null?void 0:N.borderRadius,offset:N==null?void 0:N.offset});return te.createElement(Uc,{path:w,labelX:j,labelY:v,label:i,labelStyle:s,labelShowBg:l,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:p,markerEnd:y,markerStart:S,interactionWidth:k})});sf.displayName="SmoothStepEdge";const l1=T.memo(e=>{var t;return te.createElement(sf,{...e,pathOptions:T.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});l1.displayName="StepEdge";function VE({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,s,l,d]=L3({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,s,l,d]}const c1=T.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:s,labelShowBg:l,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:p,markerEnd:m,markerStart:x,interactionWidth:y})=>{const[S,N,k]=VE({sourceX:e,sourceY:t,targetX:n,targetY:r});return te.createElement(Uc,{path:S,labelX:N,labelY:k,label:i,labelStyle:s,labelShowBg:l,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:p,markerEnd:m,markerStart:x,interactionWidth:y})});c1.displayName="StraightEdge";function gu(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function ob({pos:e,x1:t,y1:n,x2:r,y2:i,c:s}){switch(e){case Ne.Left:return[t-gu(t-r,s),n];case Ne.Right:return[t+gu(r-t,s),n];case Ne.Top:return[t,n-gu(n-i,s)];case Ne.Bottom:return[t,n+gu(i-n,s)]}}function U3({sourceX:e,sourceY:t,sourcePosition:n=Ne.Bottom,targetX:r,targetY:i,targetPosition:s=Ne.Top,curvature:l=.25}){const[d,u]=ob({pos:n,x1:e,y1:t,x2:r,y2:i,c:l}),[h,p]=ob({pos:s,x1:r,y1:i,x2:e,y2:t,c:l}),[m,x,y,S]=D3({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:d,sourceControlY:u,targetControlX:h,targetControlY:p});return[`M${e},${t} C${d},${u} ${h},${p} ${r},${i}`,m,x,y,S]}const jh=T.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=Ne.Bottom,targetPosition:s=Ne.Top,label:l,labelStyle:d,labelShowBg:u,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:m,style:x,markerEnd:y,markerStart:S,pathOptions:N,interactionWidth:k})=>{const[w,j,v]=U3({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:s,curvature:N==null?void 0:N.curvature});return te.createElement(Uc,{path:w,labelX:j,labelY:v,label:l,labelStyle:d,labelShowBg:u,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:m,style:x,markerEnd:y,markerStart:S,interactionWidth:k})});jh.displayName="BezierEdge";const d1=T.createContext(null),HE=d1.Provider;d1.Consumer;const WE=()=>T.useContext(d1),YE=e=>"id"in e&&"source"in e&&"target"in e,KE=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,Lg=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,XE=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),$3=(e,t)=>{if(!e.source||!e.target)return t;let n;return YE(e)?n={...e}:n={...e,id:KE(e)},XE(n,t)?t:t.concat(n)},Dg=({x:e,y:t},[n,r,i],s,[l,d])=>{const u={x:(e-n)/i,y:(t-r)/i};return s?{x:l*Math.round(u.x/l),y:d*Math.round(u.y/d)}:u},G3=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r}),ho=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],i={x:e.position.x-n,y:e.position.y-r};return{...i,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:i}},u1=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const{x:s,y:l}=ho(i,t).positionAbsolute;return zE(r,a1({x:s,y:l,width:i.width||0,height:i.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return LE(n)},B3=(e,t,[n,r,i]=[0,0,1],s=!1,l=!1,d=[0,0])=>{const u={x:(t.x-n)/i,y:(t.y-r)/i,width:t.width/i,height:t.height/i},h=[];return e.forEach(p=>{const{width:m,height:x,selectable:y=!0,hidden:S=!1}=p;if(l&&!y||S)return!1;const{positionAbsolute:N}=ho(p,d),k={x:N.x,y:N.y,width:m||0,height:x||0},w=Ig(u,k),j=typeof m>"u"||typeof x>"u"||m===null||x===null,v=s&&w>0,_=(m||0)*(x||0);(j||v||w>=_||p.dragging)&&h.push(p)}),h},V3=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},H3=(e,t,n,r,i,s=.1)=>{const l=t/(e.width*(1+s)),d=n/(e.height*(1+s)),u=Math.min(l,d),h=jo(u,r,i),p=e.x+e.width/2,m=e.y+e.height/2,x=t/2-p*h,y=n/2-m*h;return{x,y,zoom:h}},Bs=(e,t=0)=>e.transition().duration(t);function lb(e,t,n,r){return(t[n]||[]).reduce((i,s)=>{var l,d;return`${e.id}-${s.id}-${n}`!==r&&i.push({id:s.id||null,type:n,nodeId:e.id,x:(((l=e.positionAbsolute)==null?void 0:l.x)??0)+s.x+s.width/2,y:(((d=e.positionAbsolute)==null?void 0:d.y)??0)+s.y+s.height/2}),i},[])}function QE(e,t,n,r,i,s){const{x:l,y:d}=ds(e),h=t.elementsFromPoint(l,d).find(S=>S.classList.contains("react-flow__handle"));if(h){const S=h.getAttribute("data-nodeid");if(S){const N=h1(void 0,h),k=h.getAttribute("data-handleid"),w=s({nodeId:S,id:k,type:N});if(w){const j=i.find(v=>v.nodeId===S&&v.type===N&&v.id===k);return{handle:{id:k,type:N,nodeId:S,x:(j==null?void 0:j.x)||n.x,y:(j==null?void 0:j.y)||n.y},validHandleResult:w}}}}let p=[],m=1/0;if(i.forEach(S=>{const N=Math.sqrt((S.x-n.x)**2+(S.y-n.y)**2);if(N<=r){const k=s(S);N<=m&&(N<m?p=[{handle:S,validHandleResult:k}]:N===m&&p.push({handle:S,validHandleResult:k}),m=N)}}),!p.length)return{handle:null,validHandleResult:W3()};if(p.length===1)return p[0];const x=p.some(({validHandleResult:S})=>S.isValid),y=p.some(({handle:S})=>S.type==="target");return p.find(({handle:S,validHandleResult:N})=>y?S.type==="target":x?N.isValid:!0)||p[0]}const qE={source:null,target:null,sourceHandle:null,targetHandle:null},W3=()=>({handleDomNode:null,isValid:!1,connection:qE,endHandle:null});function Y3(e,t,n,r,i,s,l){const d=i==="target",u=l.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),h={...W3(),handleDomNode:u};if(u){const p=h1(void 0,u),m=u.getAttribute("data-nodeid"),x=u.getAttribute("data-handleid"),y=u.classList.contains("connectable"),S=u.classList.contains("connectableend"),N={source:d?m:n,sourceHandle:d?x:r,target:d?n:m,targetHandle:d?r:x};h.connection=N,y&&S&&(t===aa.Strict?d&&p==="source"||!d&&p==="target":m!==n||x!==r)&&(h.endHandle={nodeId:m,handleId:x,type:p},h.isValid=s(N))}return h}function ZE({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((i,s)=>{if(s[gt]){const{handleBounds:l}=s[gt];let d=[],u=[];l&&(d=lb(s,l,"source",`${t}-${n}-${r}`),u=lb(s,l,"target",`${t}-${n}-${r}`)),i.push(...d,...u)}return i},[])}function h1(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function sm(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function JE(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function K3({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:i,getState:s,setState:l,isValidConnection:d,edgeUpdaterType:u,onReconnectEnd:h}){const p=I3(e.target),{connectionMode:m,domNode:x,autoPanOnConnect:y,connectionRadius:S,onConnectStart:N,panBy:k,getNodes:w,cancelConnection:j}=s();let v=0,_;const{x:E,y:A}=ds(e),D=p==null?void 0:p.elementFromPoint(E,A),M=h1(u,D),I=x==null?void 0:x.getBoundingClientRect();if(!I||!M)return;let P,L=ds(e,I),F=!1,G=null,R=!1,$=null;const B=ZE({nodes:w(),nodeId:n,handleId:t,handleType:M}),Q=()=>{if(!y)return;const[W,z]=A3(L,I);k({x:W,y:z}),v=requestAnimationFrame(Q)};l({connectionPosition:L,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:M,connectionStartHandle:{nodeId:n,handleId:t,type:M},connectionEndHandle:null}),N==null||N(e,{nodeId:n,handleId:t,handleType:M});function K(W){const{transform:z}=s();L=ds(W,I);const{handle:V,validHandleResult:J}=QE(W,p,Dg(L,z,!1,[1,1]),S,B,ee=>Y3(ee,m,n,t,i?"target":"source",d,p));if(_=V,F||(Q(),F=!0),$=J.handleDomNode,G=J.connection,R=J.isValid,l({connectionPosition:_&&R?G3({x:_.x,y:_.y},z):L,connectionStatus:JE(!!_,R),connectionEndHandle:J.endHandle}),!_&&!R&&!$)return sm(P);G.source!==G.target&&$&&(sm(P),P=$,$.classList.add("connecting","react-flow__handle-connecting"),$.classList.toggle("valid",R),$.classList.toggle("react-flow__handle-valid",R))}function H(W){var z,V;(_||$)&&G&&R&&(r==null||r(G)),(V=(z=s()).onConnectEnd)==null||V.call(z,W),u&&(h==null||h(W)),sm(P),j(),cancelAnimationFrame(v),F=!1,R=!1,G=null,$=null,p.removeEventListener("mousemove",K),p.removeEventListener("mouseup",H),p.removeEventListener("touchmove",K),p.removeEventListener("touchend",H)}p.addEventListener("mousemove",K),p.addEventListener("mouseup",H),p.addEventListener("touchmove",K),p.addEventListener("touchend",H)}const cb=()=>!0,eP=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),tP=(e,t,n)=>r=>{const{connectionStartHandle:i,connectionEndHandle:s,connectionClickStartHandle:l}=r;return{connecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n,clickConnecting:(l==null?void 0:l.nodeId)===e&&(l==null?void 0:l.handleId)===t&&(l==null?void 0:l.type)===n}},X3=T.forwardRef(({type:e="source",position:t=Ne.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:l,onConnect:d,children:u,className:h,onMouseDown:p,onTouchStart:m,...x},y)=>{var I,P;const S=l||null,N=e==="target",k=Ot(),w=WE(),{connectOnClick:j,noPanClassName:v}=ft(eP,en),{connecting:_,clickConnecting:E}=ft(tP(w,S,e),en);w||(P=(I=k.getState()).onError)==null||P.call(I,"010",gi.error010());const A=L=>{const{defaultEdgeOptions:F,onConnect:G,hasDefaultEdges:R}=k.getState(),$={...F,...L};if(R){const{edges:B,setEdges:Q}=k.getState();Q($3($,B))}G==null||G($),d==null||d($)},D=L=>{if(!w)return;const F=z3(L);i&&(F&&L.button===0||!F)&&K3({event:L,handleId:S,nodeId:w,onConnect:A,isTarget:N,getState:k.getState,setState:k.setState,isValidConnection:n||k.getState().isValidConnection||cb}),F?p==null||p(L):m==null||m(L)},M=L=>{const{onClickConnectStart:F,onClickConnectEnd:G,connectionClickStartHandle:R,connectionMode:$,isValidConnection:B}=k.getState();if(!w||!R&&!i)return;if(!R){F==null||F(L,{nodeId:w,handleId:S,handleType:e}),k.setState({connectionClickStartHandle:{nodeId:w,type:e,handleId:S}});return}const Q=I3(L.target),K=n||B||cb,{connection:H,isValid:W}=Y3({nodeId:w,id:S,type:e},$,R.nodeId,R.handleId||null,R.type,K,Q);W&&A(H),G==null||G(L),k.setState({connectionClickStartHandle:null})};return te.createElement("div",{"data-handleid":S,"data-nodeid":w,"data-handlepos":t,"data-id":`${w}-${S}-${e}`,className:dn(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",v,h,{source:!N,target:N,connectable:r,connectablestart:i,connectableend:s,connecting:E,connectionindicator:r&&(i&&!_||s&&_)}]),onMouseDown:D,onTouchStart:D,onClick:j?M:void 0,ref:y,...x},u)});X3.displayName="Handle";var kh=T.memo(X3);const Q3=({data:e,isConnectable:t,targetPosition:n=Ne.Top,sourcePosition:r=Ne.Bottom})=>te.createElement(te.Fragment,null,te.createElement(kh,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,te.createElement(kh,{type:"source",position:r,isConnectable:t}));Q3.displayName="DefaultNode";var Og=T.memo(Q3);const q3=({data:e,isConnectable:t,sourcePosition:n=Ne.Bottom})=>te.createElement(te.Fragment,null,e==null?void 0:e.label,te.createElement(kh,{type:"source",position:n,isConnectable:t}));q3.displayName="InputNode";var Z3=T.memo(q3);const J3=({data:e,isConnectable:t,targetPosition:n=Ne.Top})=>te.createElement(te.Fragment,null,te.createElement(kh,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);J3.displayName="OutputNode";var e6=T.memo(J3);const f1=()=>null;f1.displayName="GroupNode";const nP=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),xu=e=>e.id;function rP(e,t){return en(e.selectedNodes.map(xu),t.selectedNodes.map(xu))&&en(e.selectedEdges.map(xu),t.selectedEdges.map(xu))}const t6=T.memo(({onSelectionChange:e})=>{const t=Ot(),{selectedNodes:n,selectedEdges:r}=ft(nP,rP);return T.useEffect(()=>{const i={nodes:n,edges:r};e==null||e(i),t.getState().onSelectionChange.forEach(s=>s(i))},[n,r,e]),null});t6.displayName="SelectionListener";const iP=e=>!!e.onSelectionChange;function sP({onSelectionChange:e}){const t=ft(iP);return e||t?te.createElement(t6,{onSelectionChange:e}):null}const aP=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function za(e,t){T.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function Ie(e,t,n){T.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const oP=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:i,onConnectStart:s,onConnectEnd:l,onClickConnectStart:d,onClickConnectEnd:u,nodesDraggable:h,nodesConnectable:p,nodesFocusable:m,edgesFocusable:x,edgesUpdatable:y,elevateNodesOnSelect:S,minZoom:N,maxZoom:k,nodeExtent:w,onNodesChange:j,onEdgesChange:v,elementsSelectable:_,connectionMode:E,snapGrid:A,snapToGrid:D,translateExtent:M,connectOnClick:I,defaultEdgeOptions:P,fitView:L,fitViewOptions:F,onNodesDelete:G,onEdgesDelete:R,onNodeDrag:$,onNodeDragStart:B,onNodeDragStop:Q,onSelectionDrag:K,onSelectionDragStart:H,onSelectionDragStop:W,noPanClassName:z,nodeOrigin:V,rfId:J,autoPanOnConnect:ee,autoPanOnNodeDrag:ae,onError:fe,connectionRadius:Y,isValidConnection:ie,nodeDragThreshold:ce})=>{const{setNodes:U,setEdges:X,setDefaultNodesAndEdges:oe,setMinZoom:pe,setMaxZoom:xe,setTranslateExtent:he,setNodeExtent:Oe,reset:_e}=ft(aP,en),be=Ot();return T.useEffect(()=>{const nn=r==null?void 0:r.map(Sn=>({...Sn,...P}));return oe(n,nn),()=>{_e()}},[]),Ie("defaultEdgeOptions",P,be.setState),Ie("connectionMode",E,be.setState),Ie("onConnect",i,be.setState),Ie("onConnectStart",s,be.setState),Ie("onConnectEnd",l,be.setState),Ie("onClickConnectStart",d,be.setState),Ie("onClickConnectEnd",u,be.setState),Ie("nodesDraggable",h,be.setState),Ie("nodesConnectable",p,be.setState),Ie("nodesFocusable",m,be.setState),Ie("edgesFocusable",x,be.setState),Ie("edgesUpdatable",y,be.setState),Ie("elementsSelectable",_,be.setState),Ie("elevateNodesOnSelect",S,be.setState),Ie("snapToGrid",D,be.setState),Ie("snapGrid",A,be.setState),Ie("onNodesChange",j,be.setState),Ie("onEdgesChange",v,be.setState),Ie("connectOnClick",I,be.setState),Ie("fitViewOnInit",L,be.setState),Ie("fitViewOnInitOptions",F,be.setState),Ie("onNodesDelete",G,be.setState),Ie("onEdgesDelete",R,be.setState),Ie("onNodeDrag",$,be.setState),Ie("onNodeDragStart",B,be.setState),Ie("onNodeDragStop",Q,be.setState),Ie("onSelectionDrag",K,be.setState),Ie("onSelectionDragStart",H,be.setState),Ie("onSelectionDragStop",W,be.setState),Ie("noPanClassName",z,be.setState),Ie("nodeOrigin",V,be.setState),Ie("rfId",J,be.setState),Ie("autoPanOnConnect",ee,be.setState),Ie("autoPanOnNodeDrag",ae,be.setState),Ie("onError",fe,be.setState),Ie("connectionRadius",Y,be.setState),Ie("isValidConnection",ie,be.setState),Ie("nodeDragThreshold",ce,be.setState),za(e,U),za(t,X),za(N,pe),za(k,xe),za(M,he),za(w,Oe),null},db={display:"none"},lP={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},n6="react-flow__node-desc",r6="react-flow__edge-desc",cP="react-flow__aria-live",dP=e=>e.ariaLiveMessage;function uP({rfId:e}){const t=ft(dP);return te.createElement("div",{id:`${cP}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:lP},t)}function hP({rfId:e,disableKeyboardA11y:t}){return te.createElement(te.Fragment,null,te.createElement("div",{id:`${n6}-${e}`,style:db},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),te.createElement("div",{id:`${r6}-${e}`,style:db},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&te.createElement(uP,{rfId:e}))}var kc=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=T.useState(!1),i=T.useRef(!1),s=T.useRef(new Set([])),[l,d]=T.useMemo(()=>{if(e!==null){const h=(Array.isArray(e)?e:[e]).filter(m=>typeof m=="string").map(m=>m.split("+")),p=h.reduce((m,x)=>m.concat(...x),[]);return[h,p]}return[[],[]]},[e]);return T.useEffect(()=>{const u=typeof document<"u"?document:null,h=(t==null?void 0:t.target)||u;if(e!==null){const p=y=>{if(i.current=y.ctrlKey||y.metaKey||y.shiftKey,(!i.current||i.current&&!t.actInsideInputWithModifier)&&Fg(y))return!1;const N=hb(y.code,d);s.current.add(y[N]),ub(l,s.current,!1)&&(y.preventDefault(),r(!0))},m=y=>{if((!i.current||i.current&&!t.actInsideInputWithModifier)&&Fg(y))return!1;const N=hb(y.code,d);ub(l,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(y[N]),y.key==="Meta"&&s.current.clear(),i.current=!1},x=()=>{s.current.clear(),r(!1)};return h==null||h.addEventListener("keydown",p),h==null||h.addEventListener("keyup",m),window.addEventListener("blur",x),()=>{h==null||h.removeEventListener("keydown",p),h==null||h.removeEventListener("keyup",m),window.removeEventListener("blur",x)}}},[e,r]),n};function ub(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function hb(e,t){return t.includes(e)?"code":"key"}function i6(e,t,n,r){var d,u;const i=e.parentNode||e.parentId;if(!i)return n;const s=t.get(i),l=ho(s,r);return i6(s,t,{x:(n.x??0)+l.x,y:(n.y??0)+l.y,z:(((d=s[gt])==null?void 0:d.z)??0)>(n.z??0)?((u=s[gt])==null?void 0:u.z)??0:n.z??0},r)}function s6(e,t,n){e.forEach(r=>{var s;const i=r.parentNode||r.parentId;if(i&&!e.has(i))throw new Error(`Parent node ${i} not found`);if(i||n!=null&&n[r.id]){const{x:l,y:d,z:u}=i6(r,e,{...r.position,z:((s=r[gt])==null?void 0:s.z)??0},t);r.positionAbsolute={x:l,y:d},r[gt].z=u,n!=null&&n[r.id]&&(r[gt].isParent=!0)}})}function am(e,t,n,r){const i=new Map,s={},l=r?1e3:0;return e.forEach(d=>{var y;const u=(Xn(d.zIndex)?d.zIndex:0)+(d.selected?l:0),h=t.get(d.id),p={...d,positionAbsolute:{x:d.position.x,y:d.position.y}},m=d.parentNode||d.parentId;m&&(s[m]=!0);const x=(h==null?void 0:h.type)&&(h==null?void 0:h.type)!==d.type;Object.defineProperty(p,gt,{enumerable:!1,value:{handleBounds:x||(y=h==null?void 0:h[gt])==null?void 0:y.handleBounds,z:u}}),i.set(d.id,p)}),s6(i,n,s),i}function a6(e,t={}){const{getNodes:n,width:r,height:i,minZoom:s,maxZoom:l,d3Zoom:d,d3Selection:u,fitViewOnInitDone:h,fitViewOnInit:p,nodeOrigin:m}=e(),x=t.initial&&!h&&p;if(d&&u&&(x||!t.initial)){const S=n().filter(k=>{var j;const w=t.includeHiddenNodes?k.width&&k.height:!k.hidden;return(j=t.nodes)!=null&&j.length?w&&t.nodes.some(v=>v.id===k.id):w}),N=S.every(k=>k.width&&k.height);if(S.length>0&&N){const k=u1(S,m),{x:w,y:j,zoom:v}=H3(k,r,i,t.minZoom??s,t.maxZoom??l,t.padding??.1),_=cs.translate(w,j).scale(v);return typeof t.duration=="number"&&t.duration>0?d.transform(Bs(u,t.duration),_):d.transform(u,_),!0}}return!1}function fP(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[gt]:r[gt],selected:n.selected})}),new Map(t)}function pP(e,t){return t.map(n=>{const r=e.find(i=>i.id===n.id);return r&&(n.selected=r.selected),n})}function yu({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:i,edges:s,onNodesChange:l,onEdgesChange:d,hasDefaultNodes:u,hasDefaultEdges:h}=n();e!=null&&e.length&&(u&&r({nodeInternals:fP(e,i)}),l==null||l(e)),t!=null&&t.length&&(h&&r({edges:pP(t,s)}),d==null||d(t))}const La=()=>{},mP={zoomIn:La,zoomOut:La,zoomTo:La,getZoom:()=>1,setViewport:La,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:La,fitBounds:La,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},gP=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),xP=()=>{const e=Ot(),{d3Zoom:t,d3Selection:n}=ft(gP,en);return T.useMemo(()=>n&&t?{zoomIn:i=>t.scaleBy(Bs(n,i==null?void 0:i.duration),1.2),zoomOut:i=>t.scaleBy(Bs(n,i==null?void 0:i.duration),1/1.2),zoomTo:(i,s)=>t.scaleTo(Bs(n,s==null?void 0:s.duration),i),getZoom:()=>e.getState().transform[2],setViewport:(i,s)=>{const[l,d,u]=e.getState().transform,h=cs.translate(i.x??l,i.y??d).scale(i.zoom??u);t.transform(Bs(n,s==null?void 0:s.duration),h)},getViewport:()=>{const[i,s,l]=e.getState().transform;return{x:i,y:s,zoom:l}},fitView:i=>a6(e.getState,i),setCenter:(i,s,l)=>{const{width:d,height:u,maxZoom:h}=e.getState(),p=typeof(l==null?void 0:l.zoom)<"u"?l.zoom:h,m=d/2-i*p,x=u/2-s*p,y=cs.translate(m,x).scale(p);t.transform(Bs(n,l==null?void 0:l.duration),y)},fitBounds:(i,s)=>{const{width:l,height:d,minZoom:u,maxZoom:h}=e.getState(),{x:p,y:m,zoom:x}=H3(i,l,d,u,h,(s==null?void 0:s.padding)??.1),y=cs.translate(p,m).scale(x);t.transform(Bs(n,s==null?void 0:s.duration),y)},project:i=>{const{transform:s,snapToGrid:l,snapGrid:d}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Dg(i,s,l,d)},screenToFlowPosition:i=>{const{transform:s,snapToGrid:l,snapGrid:d,domNode:u}=e.getState();if(!u)return i;const{x:h,y:p}=u.getBoundingClientRect(),m={x:i.x-h,y:i.y-p};return Dg(m,s,l,d)},flowToScreenPosition:i=>{const{transform:s,domNode:l}=e.getState();if(!l)return i;const{x:d,y:u}=l.getBoundingClientRect(),h=G3(i,s);return{x:h.x+d,y:h.y+u}},viewportInitialized:!0}:mP,[t,n])};function p1(){const e=xP(),t=Ot(),n=T.useCallback(()=>t.getState().getNodes().map(N=>({...N})),[]),r=T.useCallback(N=>t.getState().nodeInternals.get(N),[]),i=T.useCallback(()=>{const{edges:N=[]}=t.getState();return N.map(k=>({...k}))},[]),s=T.useCallback(N=>{const{edges:k=[]}=t.getState();return k.find(w=>w.id===N)},[]),l=T.useCallback(N=>{const{getNodes:k,setNodes:w,hasDefaultNodes:j,onNodesChange:v}=t.getState(),_=k(),E=typeof N=="function"?N(_):N;if(j)w(E);else if(v){const A=E.length===0?_.map(D=>({type:"remove",id:D.id})):E.map(D=>({item:D,type:"reset"}));v(A)}},[]),d=T.useCallback(N=>{const{edges:k=[],setEdges:w,hasDefaultEdges:j,onEdgesChange:v}=t.getState(),_=typeof N=="function"?N(k):N;if(j)w(_);else if(v){const E=_.length===0?k.map(A=>({type:"remove",id:A.id})):_.map(A=>({item:A,type:"reset"}));v(E)}},[]),u=T.useCallback(N=>{const k=Array.isArray(N)?N:[N],{getNodes:w,setNodes:j,hasDefaultNodes:v,onNodesChange:_}=t.getState();if(v){const A=[...w(),...k];j(A)}else if(_){const E=k.map(A=>({item:A,type:"add"}));_(E)}},[]),h=T.useCallback(N=>{const k=Array.isArray(N)?N:[N],{edges:w=[],setEdges:j,hasDefaultEdges:v,onEdgesChange:_}=t.getState();if(v)j([...w,...k]);else if(_){const E=k.map(A=>({item:A,type:"add"}));_(E)}},[]),p=T.useCallback(()=>{const{getNodes:N,edges:k=[],transform:w}=t.getState(),[j,v,_]=w;return{nodes:N().map(E=>({...E})),edges:k.map(E=>({...E})),viewport:{x:j,y:v,zoom:_}}},[]),m=T.useCallback(({nodes:N,edges:k})=>{const{nodeInternals:w,getNodes:j,edges:v,hasDefaultNodes:_,hasDefaultEdges:E,onNodesDelete:A,onEdgesDelete:D,onNodesChange:M,onEdgesChange:I}=t.getState(),P=(N||[]).map($=>$.id),L=(k||[]).map($=>$.id),F=j().reduce(($,B)=>{const Q=B.parentNode||B.parentId,K=!P.includes(B.id)&&Q&&$.find(W=>W.id===Q);return(typeof B.deletable=="boolean"?B.deletable:!0)&&(P.includes(B.id)||K)&&$.push(B),$},[]),G=v.filter($=>typeof $.deletable=="boolean"?$.deletable:!0),R=G.filter($=>L.includes($.id));if(F||R){const $=V3(F,G),B=[...R,...$],Q=B.reduce((K,H)=>(K.includes(H.id)||K.push(H.id),K),[]);if((E||_)&&(E&&t.setState({edges:v.filter(K=>!Q.includes(K.id))}),_&&(F.forEach(K=>{w.delete(K.id)}),t.setState({nodeInternals:new Map(w)}))),Q.length>0&&(D==null||D(B),I&&I(Q.map(K=>({id:K,type:"remove"})))),F.length>0&&(A==null||A(F),M)){const K=F.map(H=>({id:H.id,type:"remove"}));M(K)}}},[]),x=T.useCallback(N=>{const k=DE(N),w=k?null:t.getState().nodeInternals.get(N.id);return!k&&!w?[null,null,k]:[k?N:rb(w),w,k]},[]),y=T.useCallback((N,k=!0,w)=>{const[j,v,_]=x(N);return j?(w||t.getState().getNodes()).filter(E=>{if(!_&&(E.id===v.id||!E.positionAbsolute))return!1;const A=rb(E),D=Ig(A,j);return k&&D>0||D>=j.width*j.height}):[]},[]),S=T.useCallback((N,k,w=!0)=>{const[j]=x(N);if(!j)return!1;const v=Ig(j,k);return w&&v>0||v>=j.width*j.height},[]);return T.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:i,getEdge:s,setNodes:l,setEdges:d,addNodes:u,addEdges:h,toObject:p,deleteElements:m,getIntersectingNodes:y,isNodeIntersecting:S}),[e,n,r,i,s,l,d,u,h,p,m,y,S])}const yP={actInsideInputWithModifier:!1};var vP=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=Ot(),{deleteElements:r}=p1(),i=kc(e,yP),s=kc(t);T.useEffect(()=>{if(i){const{edges:l,getNodes:d}=n.getState(),u=d().filter(p=>p.selected),h=l.filter(p=>p.selected);r({nodes:u,edges:h}),n.setState({nodesSelectionActive:!1})}},[i]),T.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])};function bP(e){const t=Ot();T.useEffect(()=>{let n;const r=()=>{var s,l;if(!e.current)return;const i=i1(e.current);(i.height===0||i.width===0)&&((l=(s=t.getState()).onError)==null||l.call(s,"004",gi.error004())),t.setState({width:i.width||500,height:i.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const m1={position:"absolute",width:"100%",height:"100%",top:0,left:0},wP=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,vu=e=>({x:e.x,y:e.y,zoom:e.k}),Da=(e,t)=>e.target.closest(`.${t}`),fb=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),pb=e=>{const t=e.ctrlKey&&_h()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},NP=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),SP=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:i=!0,zoomOnPinch:s=!0,panOnScroll:l=!1,panOnScrollSpeed:d=.5,panOnScrollMode:u=Ks.Free,zoomOnDoubleClick:h=!0,elementsSelectable:p,panOnDrag:m=!0,defaultViewport:x,translateExtent:y,minZoom:S,maxZoom:N,zoomActivationKeyCode:k,preventScrolling:w=!0,children:j,noWheelClassName:v,noPanClassName:_})=>{const E=T.useRef(),A=Ot(),D=T.useRef(!1),M=T.useRef(!1),I=T.useRef(null),P=T.useRef({x:0,y:0,zoom:0}),{d3Zoom:L,d3Selection:F,d3ZoomHandler:G,userSelectionActive:R}=ft(NP,en),$=kc(k),B=T.useRef(0),Q=T.useRef(!1),K=T.useRef();return bP(I),T.useEffect(()=>{if(I.current){const H=I.current.getBoundingClientRect(),W=TE().scaleExtent([S,N]).translateExtent(y),z=ur(I.current).call(W),V=cs.translate(x.x,x.y).scale(jo(x.zoom,S,N)),J=[[0,0],[H.width,H.height]],ee=W.constrain()(V,J,y);W.transform(z,ee),W.wheelDelta(pb),A.setState({d3Zoom:W,d3Selection:z,d3ZoomHandler:z.on("wheel.zoom"),transform:[ee.x,ee.y,ee.k],domNode:I.current.closest(".react-flow")})}},[]),T.useEffect(()=>{F&&L&&(l&&!$&&!R?F.on("wheel.zoom",H=>{if(Da(H,v))return!1;H.preventDefault(),H.stopImmediatePropagation();const W=F.property("__zoom").k||1;if(H.ctrlKey&&s){const ie=Rr(H),ce=pb(H),U=W*Math.pow(2,ce);L.scaleTo(F,U,ie,H);return}const z=H.deltaMode===1?20:1;let V=u===Ks.Vertical?0:H.deltaX*z,J=u===Ks.Horizontal?0:H.deltaY*z;!_h()&&H.shiftKey&&u!==Ks.Vertical&&(V=H.deltaY*z,J=0),L.translateBy(F,-(V/W)*d,-(J/W)*d,{internal:!0});const ee=vu(F.property("__zoom")),{onViewportChangeStart:ae,onViewportChange:fe,onViewportChangeEnd:Y}=A.getState();clearTimeout(K.current),Q.current||(Q.current=!0,t==null||t(H,ee),ae==null||ae(ee)),Q.current&&(e==null||e(H,ee),fe==null||fe(ee),K.current=setTimeout(()=>{n==null||n(H,ee),Y==null||Y(ee),Q.current=!1},150))},{passive:!1}):typeof G<"u"&&F.on("wheel.zoom",function(H,W){if(!w&&H.type==="wheel"&&!H.ctrlKey||Da(H,v))return null;H.preventDefault(),G.call(this,H,W)},{passive:!1}))},[R,l,u,F,L,G,$,s,w,v,t,e,n]),T.useEffect(()=>{L&&L.on("start",H=>{var V,J;if(!H.sourceEvent||H.sourceEvent.internal)return null;B.current=(V=H.sourceEvent)==null?void 0:V.button;const{onViewportChangeStart:W}=A.getState(),z=vu(H.transform);D.current=!0,P.current=z,((J=H.sourceEvent)==null?void 0:J.type)==="mousedown"&&A.setState({paneDragging:!0}),W==null||W(z),t==null||t(H.sourceEvent,z)})},[L,t]),T.useEffect(()=>{L&&(R&&!D.current?L.on("zoom",null):R||L.on("zoom",H=>{var z;const{onViewportChange:W}=A.getState();if(A.setState({transform:[H.transform.x,H.transform.y,H.transform.k]}),M.current=!!(r&&fb(m,B.current??0)),(e||W)&&!((z=H.sourceEvent)!=null&&z.internal)){const V=vu(H.transform);W==null||W(V),e==null||e(H.sourceEvent,V)}}))},[R,L,e,m,r]),T.useEffect(()=>{L&&L.on("end",H=>{if(!H.sourceEvent||H.sourceEvent.internal)return null;const{onViewportChangeEnd:W}=A.getState();if(D.current=!1,A.setState({paneDragging:!1}),r&&fb(m,B.current??0)&&!M.current&&r(H.sourceEvent),M.current=!1,(n||W)&&wP(P.current,H.transform)){const z=vu(H.transform);P.current=z,clearTimeout(E.current),E.current=setTimeout(()=>{W==null||W(z),n==null||n(H.sourceEvent,z)},l?150:0)}})},[L,l,m,n,r]),T.useEffect(()=>{L&&L.filter(H=>{const W=$||i,z=s&&H.ctrlKey;if((m===!0||Array.isArray(m)&&m.includes(1))&&H.button===1&&H.type==="mousedown"&&(Da(H,"react-flow__node")||Da(H,"react-flow__edge")))return!0;if(!m&&!W&&!l&&!h&&!s||R||!h&&H.type==="dblclick"||Da(H,v)&&H.type==="wheel"||Da(H,_)&&(H.type!=="wheel"||l&&H.type==="wheel"&&!$)||!s&&H.ctrlKey&&H.type==="wheel"||!W&&!l&&!z&&H.type==="wheel"||!m&&(H.type==="mousedown"||H.type==="touchstart")||Array.isArray(m)&&!m.includes(H.button)&&H.type==="mousedown")return!1;const V=Array.isArray(m)&&m.includes(H.button)||!H.button||H.button<=1;return(!H.ctrlKey||H.type==="wheel")&&V})},[R,L,i,s,l,h,m,p,$]),te.createElement("div",{className:"react-flow__renderer",ref:I,style:m1},j)},_P=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function jP(){const{userSelectionActive:e,userSelectionRect:t}=ft(_P,en);return e&&t?te.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function mb(e,t){const n=t.parentNode||t.parentId,r=e.find(i=>i.id===n);if(r){const i=t.position.x+t.width-r.width,s=t.position.y+t.height-r.height;if(i>0||s>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,i>0&&(r.style.width+=i),s>0&&(r.style.height+=s),t.position.x<0){const l=Math.abs(t.position.x);r.position.x=r.position.x-l,r.style.width+=l,t.position.x=0}if(t.position.y<0){const l=Math.abs(t.position.y);r.position.y=r.position.y-l,r.style.height+=l,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function o6(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,i)=>{const s=e.filter(d=>d.id===i.id);if(s.length===0)return r.push(i),r;const l={...i};for(const d of s)if(d)switch(d.type){case"select":{l.selected=d.selected;break}case"position":{typeof d.position<"u"&&(l.position=d.position),typeof d.positionAbsolute<"u"&&(l.positionAbsolute=d.positionAbsolute),typeof d.dragging<"u"&&(l.dragging=d.dragging),l.expandParent&&mb(r,l);break}case"dimensions":{typeof d.dimensions<"u"&&(l.width=d.dimensions.width,l.height=d.dimensions.height),typeof d.updateStyle<"u"&&(l.style={...l.style||{},...d.dimensions}),typeof d.resizing=="boolean"&&(l.resizing=d.resizing),l.expandParent&&mb(r,l);break}case"remove":return r}return r.push(l),r},n)}function l6(e,t){return o6(e,t)}function kP(e,t){return o6(e,t)}const Yi=(e,t)=>({id:e,type:"select",selected:t});function to(e,t){return e.reduce((n,r)=>{const i=t.includes(r.id);return!r.selected&&i?(r.selected=!0,n.push(Yi(r.id,!0))):r.selected&&!i&&(r.selected=!1,n.push(Yi(r.id,!1))),n},[])}const om=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},CP=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),c6=T.memo(({isSelecting:e,selectionMode:t=_c.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:i,onPaneClick:s,onPaneContextMenu:l,onPaneScroll:d,onPaneMouseEnter:u,onPaneMouseMove:h,onPaneMouseLeave:p,children:m})=>{const x=T.useRef(null),y=Ot(),S=T.useRef(0),N=T.useRef(0),k=T.useRef(),{userSelectionActive:w,elementsSelectable:j,dragging:v}=ft(CP,en),_=()=>{y.setState({userSelectionActive:!1,userSelectionRect:null}),S.current=0,N.current=0},E=G=>{s==null||s(G),y.getState().resetSelectedElements(),y.setState({nodesSelectionActive:!1})},A=G=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){G.preventDefault();return}l==null||l(G)},D=d?G=>d(G):void 0,M=G=>{const{resetSelectedElements:R,domNode:$}=y.getState();if(k.current=$==null?void 0:$.getBoundingClientRect(),!j||!e||G.button!==0||G.target!==x.current||!k.current)return;const{x:B,y:Q}=ds(G,k.current);R(),y.setState({userSelectionRect:{width:0,height:0,startX:B,startY:Q,x:B,y:Q}}),r==null||r(G)},I=G=>{const{userSelectionRect:R,nodeInternals:$,edges:B,transform:Q,onNodesChange:K,onEdgesChange:H,nodeOrigin:W,getNodes:z}=y.getState();if(!e||!k.current||!R)return;y.setState({userSelectionActive:!0,nodesSelectionActive:!1});const V=ds(G,k.current),J=R.startX??0,ee=R.startY??0,ae={...R,x:V.x<J?V.x:J,y:V.y<ee?V.y:ee,width:Math.abs(V.x-J),height:Math.abs(V.y-ee)},fe=z(),Y=B3($,ae,Q,t===_c.Partial,!0,W),ie=V3(Y,B).map(U=>U.id),ce=Y.map(U=>U.id);if(S.current!==ce.length){S.current=ce.length;const U=to(fe,ce);U.length&&(K==null||K(U))}if(N.current!==ie.length){N.current=ie.length;const U=to(B,ie);U.length&&(H==null||H(U))}y.setState({userSelectionRect:ae})},P=G=>{if(G.button!==0)return;const{userSelectionRect:R}=y.getState();!w&&R&&G.target===x.current&&(E==null||E(G)),y.setState({nodesSelectionActive:S.current>0}),_(),i==null||i(G)},L=G=>{w&&(y.setState({nodesSelectionActive:S.current>0}),i==null||i(G)),_()},F=j&&(e||w);return te.createElement("div",{className:dn(["react-flow__pane",{dragging:v,selection:e}]),onClick:F?void 0:om(E,x),onContextMenu:om(A,x),onWheel:om(D,x),onMouseEnter:F?void 0:u,onMouseDown:F?M:void 0,onMouseMove:F?I:h,onMouseUp:F?P:void 0,onMouseLeave:F?L:p,ref:x,style:m1},m,te.createElement(jP,null))});c6.displayName="Pane";function d6(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:d6(r,t):!1}function gb(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function EP(e,t,n,r){return Array.from(e.values()).filter(i=>(i.selected||i.id===r)&&(!i.parentNode||i.parentId||!d6(i,e))&&(i.draggable||t&&typeof i.draggable>"u")).map(i=>{var s,l;return{id:i.id,position:i.position||{x:0,y:0},positionAbsolute:i.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((s=i.positionAbsolute)==null?void 0:s.x)??0),y:n.y-(((l=i.positionAbsolute)==null?void 0:l.y)??0)},delta:{x:0,y:0},extent:i.extent,parentNode:i.parentNode||i.parentId,parentId:i.parentNode||i.parentId,width:i.width,height:i.height,expandParent:i.expandParent}})}function PP(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function u6(e,t,n,r,i=[0,0],s){const l=PP(e,e.extent||r);let d=l;const u=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(u&&e.width&&e.height){const m=n.get(u),{x,y}=ho(m,i).positionAbsolute;d=m&&Xn(x)&&Xn(y)&&Xn(m.width)&&Xn(m.height)?[[x+e.width*i[0],y+e.height*i[1]],[x+m.width-e.width+e.width*i[0],y+m.height-e.height+e.height*i[1]]]:d}else s==null||s("005",gi.error005()),d=l;else if(e.extent&&u&&e.extent!=="parent"){const m=n.get(u),{x,y}=ho(m,i).positionAbsolute;d=[[e.extent[0][0]+x,e.extent[0][1]+y],[e.extent[1][0]+x,e.extent[1][1]+y]]}let h={x:0,y:0};if(u){const m=n.get(u);h=ho(m,i).positionAbsolute}const p=d&&d!=="parent"?s1(t,d):t;return{position:{x:p.x-h.x,y:p.y-h.y},positionAbsolute:p}}function lm({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(i=>({...n.get(i.id),position:i.position,positionAbsolute:i.positionAbsolute}));return[e?r.find(i=>i.id===e):r[0],r]}const xb=(e,t,n,r)=>{const i=t.querySelectorAll(e);if(!i||!i.length)return null;const s=Array.from(i),l=t.getBoundingClientRect(),d={x:l.width*r[0],y:l.height*r[1]};return s.map(u=>{const h=u.getBoundingClientRect();return{id:u.getAttribute("data-handleid"),position:u.getAttribute("data-handlepos"),x:(h.left-l.left-d.x)/n,y:(h.top-l.top-d.y)/n,...i1(u)}})};function kl(e,t,n){return n===void 0?n:r=>{const i=t().nodeInternals.get(e);i&&n(r,{...i})}}function Ug({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:l,nodeInternals:d,onError:u}=t.getState(),h=d.get(e);if(!h){u==null||u("012",gi.error012(e));return}t.setState({nodesSelectionActive:!1}),h.selected?(n||h.selected&&l)&&(s({nodes:[h],edges:[]}),requestAnimationFrame(()=>{var p;return(p=r==null?void 0:r.current)==null?void 0:p.blur()})):i([e])}function TP(){const e=Ot();return T.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:i,snapToGrid:s}=e.getState(),l=n.touches?n.touches[0].clientX:n.clientX,d=n.touches?n.touches[0].clientY:n.clientY,u={x:(l-r[0])/r[2],y:(d-r[1])/r[2]};return{xSnapped:s?i[0]*Math.round(u.x/i[0]):u.x,ySnapped:s?i[1]*Math.round(u.y/i[1]):u.y,...u}},[])}function cm(e){return(t,n,r)=>e==null?void 0:e(t,r)}function h6({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,selectNodesOnDrag:l}){const d=Ot(),[u,h]=T.useState(!1),p=T.useRef([]),m=T.useRef({x:null,y:null}),x=T.useRef(0),y=T.useRef(null),S=T.useRef({x:0,y:0}),N=T.useRef(null),k=T.useRef(!1),w=T.useRef(!1),j=T.useRef(!1),v=TP();return T.useEffect(()=>{if(e!=null&&e.current){const _=ur(e.current),E=({x:M,y:I})=>{const{nodeInternals:P,onNodeDrag:L,onSelectionDrag:F,updateNodePositions:G,nodeExtent:R,snapGrid:$,snapToGrid:B,nodeOrigin:Q,onError:K}=d.getState();m.current={x:M,y:I};let H=!1,W={x:0,y:0,x2:0,y2:0};if(p.current.length>1&&R){const V=u1(p.current,Q);W=a1(V)}if(p.current=p.current.map(V=>{const J={x:M-V.distance.x,y:I-V.distance.y};B&&(J.x=$[0]*Math.round(J.x/$[0]),J.y=$[1]*Math.round(J.y/$[1]));const ee=[[R[0][0],R[0][1]],[R[1][0],R[1][1]]];p.current.length>1&&R&&!V.extent&&(ee[0][0]=V.positionAbsolute.x-W.x+R[0][0],ee[1][0]=V.positionAbsolute.x+(V.width??0)-W.x2+R[1][0],ee[0][1]=V.positionAbsolute.y-W.y+R[0][1],ee[1][1]=V.positionAbsolute.y+(V.height??0)-W.y2+R[1][1]);const ae=u6(V,J,P,ee,Q,K);return H=H||V.position.x!==ae.position.x||V.position.y!==ae.position.y,V.position=ae.position,V.positionAbsolute=ae.positionAbsolute,V}),!H)return;G(p.current,!0,!0),h(!0);const z=i?L:cm(F);if(z&&N.current){const[V,J]=lm({nodeId:i,dragItems:p.current,nodeInternals:P});z(N.current,V,J)}},A=()=>{if(!y.current)return;const[M,I]=A3(S.current,y.current);if(M!==0||I!==0){const{transform:P,panBy:L}=d.getState();m.current.x=(m.current.x??0)-M/P[2],m.current.y=(m.current.y??0)-I/P[2],L({x:M,y:I})&&E(m.current)}x.current=requestAnimationFrame(A)},D=M=>{var Q;const{nodeInternals:I,multiSelectionActive:P,nodesDraggable:L,unselectNodesAndEdges:F,onNodeDragStart:G,onSelectionDragStart:R}=d.getState();w.current=!0;const $=i?G:cm(R);(!l||!s)&&!P&&i&&((Q=I.get(i))!=null&&Q.selected||F()),i&&s&&l&&Ug({id:i,store:d,nodeRef:e});const B=v(M);if(m.current=B,p.current=EP(I,L,B,i),$&&p.current){const[K,H]=lm({nodeId:i,dragItems:p.current,nodeInternals:I});$(M.sourceEvent,K,H)}};if(t)_.on(".drag",null);else{const M=Uk().on("start",I=>{const{domNode:P,nodeDragThreshold:L}=d.getState();L===0&&D(I),j.current=!1;const F=v(I);m.current=F,y.current=(P==null?void 0:P.getBoundingClientRect())||null,S.current=ds(I.sourceEvent,y.current)}).on("drag",I=>{var G,R;const P=v(I),{autoPanOnNodeDrag:L,nodeDragThreshold:F}=d.getState();if(I.sourceEvent.type==="touchmove"&&I.sourceEvent.touches.length>1&&(j.current=!0),!j.current){if(!k.current&&w.current&&L&&(k.current=!0,A()),!w.current){const $=P.xSnapped-(((G=m==null?void 0:m.current)==null?void 0:G.x)??0),B=P.ySnapped-(((R=m==null?void 0:m.current)==null?void 0:R.y)??0);Math.sqrt($*$+B*B)>F&&D(I)}(m.current.x!==P.xSnapped||m.current.y!==P.ySnapped)&&p.current&&w.current&&(N.current=I.sourceEvent,S.current=ds(I.sourceEvent,y.current),E(P))}}).on("end",I=>{if(!(!w.current||j.current)&&(h(!1),k.current=!1,w.current=!1,cancelAnimationFrame(x.current),p.current)){const{updateNodePositions:P,nodeInternals:L,onNodeDragStop:F,onSelectionDragStop:G}=d.getState(),R=i?F:cm(G);if(P(p.current,!1,!1),R){const[$,B]=lm({nodeId:i,dragItems:p.current,nodeInternals:L});R(I.sourceEvent,$,B)}}}).filter(I=>{const P=I.target;return!I.button&&(!n||!gb(P,`.${n}`,e))&&(!r||gb(P,r,e))});return _.call(M),()=>{_.on(".drag",null)}}}},[e,t,n,r,s,d,i,l,v]),u}function f6(){const e=Ot();return T.useCallback(n=>{const{nodeInternals:r,nodeExtent:i,updateNodePositions:s,getNodes:l,snapToGrid:d,snapGrid:u,onError:h,nodesDraggable:p}=e.getState(),m=l().filter(j=>j.selected&&(j.draggable||p&&typeof j.draggable>"u")),x=d?u[0]:5,y=d?u[1]:5,S=n.isShiftPressed?4:1,N=n.x*x*S,k=n.y*y*S,w=m.map(j=>{if(j.positionAbsolute){const v={x:j.positionAbsolute.x+N,y:j.positionAbsolute.y+k};d&&(v.x=u[0]*Math.round(v.x/u[0]),v.y=u[1]*Math.round(v.y/u[1]));const{positionAbsolute:_,position:E}=u6(j,v,r,i,void 0,h);j.position=E,j.positionAbsolute=_}return j});s(w,!0,!1)},[])}const fo={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Cl=e=>{const t=({id:n,type:r,data:i,xPos:s,yPos:l,xPosOrigin:d,yPosOrigin:u,selected:h,onClick:p,onMouseEnter:m,onMouseMove:x,onMouseLeave:y,onContextMenu:S,onDoubleClick:N,style:k,className:w,isDraggable:j,isSelectable:v,isConnectable:_,isFocusable:E,selectNodesOnDrag:A,sourcePosition:D,targetPosition:M,hidden:I,resizeObserver:P,dragHandle:L,zIndex:F,isParent:G,noDragClassName:R,noPanClassName:$,initialized:B,disableKeyboardA11y:Q,ariaLabel:K,rfId:H,hasHandleBounds:W})=>{const z=Ot(),V=T.useRef(null),J=T.useRef(null),ee=T.useRef(D),ae=T.useRef(M),fe=T.useRef(r),Y=v||j||p||m||x||y,ie=f6(),ce=kl(n,z.getState,m),U=kl(n,z.getState,x),X=kl(n,z.getState,y),oe=kl(n,z.getState,S),pe=kl(n,z.getState,N),xe=_e=>{const{nodeDragThreshold:be}=z.getState();if(v&&(!A||!j||be>0)&&Ug({id:n,store:z,nodeRef:V}),p){const nn=z.getState().nodeInternals.get(n);nn&&p(_e,{...nn})}},he=_e=>{if(!Fg(_e)&&!Q)if(F3.includes(_e.key)&&v){const be=_e.key==="Escape";Ug({id:n,store:z,unselect:be,nodeRef:V})}else j&&h&&Object.prototype.hasOwnProperty.call(fo,_e.key)&&(z.setState({ariaLiveMessage:`Moved selected node ${_e.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~l}`}),ie({x:fo[_e.key].x,y:fo[_e.key].y,isShiftPressed:_e.shiftKey}))};T.useEffect(()=>()=>{J.current&&(P==null||P.unobserve(J.current),J.current=null)},[]),T.useEffect(()=>{if(V.current&&!I){const _e=V.current;(!B||!W||J.current!==_e)&&(J.current&&(P==null||P.unobserve(J.current)),P==null||P.observe(_e),J.current=_e)}},[I,B,W]),T.useEffect(()=>{const _e=fe.current!==r,be=ee.current!==D,nn=ae.current!==M;V.current&&(_e||be||nn)&&(_e&&(fe.current=r),be&&(ee.current=D),nn&&(ae.current=M),z.getState().updateNodeDimensions([{id:n,nodeElement:V.current,forceUpdate:!0}]))},[n,r,D,M]);const Oe=h6({nodeRef:V,disabled:I||!j,noDragClassName:R,handleSelector:L,nodeId:n,isSelectable:v,selectNodesOnDrag:A});return I?null:te.createElement("div",{className:dn(["react-flow__node",`react-flow__node-${r}`,{[$]:j},w,{selected:h,selectable:v,parent:G,dragging:Oe}]),ref:V,style:{zIndex:F,transform:`translate(${d}px,${u}px)`,pointerEvents:Y?"all":"none",visibility:B?"visible":"hidden",...k},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:ce,onMouseMove:U,onMouseLeave:X,onContextMenu:oe,onClick:xe,onDoubleClick:pe,onKeyDown:E?he:void 0,tabIndex:E?0:void 0,role:E?"button":void 0,"aria-describedby":Q?void 0:`${n6}-${H}`,"aria-label":K},te.createElement(HE,{value:n},te.createElement(e,{id:n,data:i,type:r,xPos:s,yPos:l,selected:h,isConnectable:_,sourcePosition:D,targetPosition:M,dragging:Oe,dragHandle:L,zIndex:F})))};return t.displayName="NodeWrapper",T.memo(t)};const MP=e=>{const t=e.getNodes().filter(n=>n.selected);return{...u1(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function RP({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=Ot(),{width:i,height:s,x:l,y:d,transformString:u,userSelectionActive:h}=ft(MP,en),p=f6(),m=T.useRef(null);if(T.useEffect(()=>{var S;n||(S=m.current)==null||S.focus({preventScroll:!0})},[n]),h6({nodeRef:m}),h||!i||!s)return null;const x=e?S=>{const N=r.getState().getNodes().filter(k=>k.selected);e(S,N)}:void 0,y=S=>{Object.prototype.hasOwnProperty.call(fo,S.key)&&p({x:fo[S.key].x,y:fo[S.key].y,isShiftPressed:S.shiftKey})};return te.createElement("div",{className:dn(["react-flow__nodesselection","react-flow__container",t]),style:{transform:u}},te.createElement("div",{ref:m,className:"react-flow__nodesselection-rect",onContextMenu:x,tabIndex:n?void 0:-1,onKeyDown:n?void 0:y,style:{width:i,height:s,top:d,left:l}}))}var AP=T.memo(RP);const IP=e=>e.nodesSelectionActive,p6=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:l,deleteKeyCode:d,onMove:u,onMoveStart:h,onMoveEnd:p,selectionKeyCode:m,selectionOnDrag:x,selectionMode:y,onSelectionStart:S,onSelectionEnd:N,multiSelectionKeyCode:k,panActivationKeyCode:w,zoomActivationKeyCode:j,elementsSelectable:v,zoomOnScroll:_,zoomOnPinch:E,panOnScroll:A,panOnScrollSpeed:D,panOnScrollMode:M,zoomOnDoubleClick:I,panOnDrag:P,defaultViewport:L,translateExtent:F,minZoom:G,maxZoom:R,preventScrolling:$,onSelectionContextMenu:B,noWheelClassName:Q,noPanClassName:K,disableKeyboardA11y:H})=>{const W=ft(IP),z=kc(m),V=kc(w),J=V||P,ee=V||A,ae=z||x&&J!==!0;return vP({deleteKeyCode:d,multiSelectionKeyCode:k}),te.createElement(SP,{onMove:u,onMoveStart:h,onMoveEnd:p,onPaneContextMenu:s,elementsSelectable:v,zoomOnScroll:_,zoomOnPinch:E,panOnScroll:ee,panOnScrollSpeed:D,panOnScrollMode:M,zoomOnDoubleClick:I,panOnDrag:!z&&J,defaultViewport:L,translateExtent:F,minZoom:G,maxZoom:R,zoomActivationKeyCode:j,preventScrolling:$,noWheelClassName:Q,noPanClassName:K},te.createElement(c6,{onSelectionStart:S,onSelectionEnd:N,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:l,panOnDrag:J,isSelecting:!!ae,selectionMode:y},e,W&&te.createElement(AP,{onSelectionContextMenu:B,noPanClassName:K,disableKeyboardA11y:H})))};p6.displayName="FlowRenderer";var FP=T.memo(p6);function zP(e){return ft(T.useCallback(n=>e?B3(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function LP(e){const t={input:Cl(e.input||Z3),default:Cl(e.default||Og),output:Cl(e.output||e6),group:Cl(e.group||f1)},n={},r=Object.keys(e).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,s)=>(i[s]=Cl(e[s]||Og),i),n);return{...t,...r}}const DP=({x:e,y:t,width:n,height:r,origin:i})=>!n||!r?{x:e,y:t}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:e,y:t}:{x:e-n*i[0],y:t-r*i[1]},OP=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),m6=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:s,onError:l}=ft(OP,en),d=zP(e.onlyRenderVisibleElements),u=T.useRef(),h=T.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const p=new ResizeObserver(m=>{const x=m.map(y=>({id:y.target.getAttribute("data-id"),nodeElement:y.target,forceUpdate:!0}));s(x)});return u.current=p,p},[]);return T.useEffect(()=>()=>{var p;(p=u==null?void 0:u.current)==null||p.disconnect()},[]),te.createElement("div",{className:"react-flow__nodes",style:m1},d.map(p=>{var E,A,D;let m=p.type||"default";e.nodeTypes[m]||(l==null||l("003",gi.error003(m)),m="default");const x=e.nodeTypes[m]||e.nodeTypes.default,y=!!(p.draggable||t&&typeof p.draggable>"u"),S=!!(p.selectable||i&&typeof p.selectable>"u"),N=!!(p.connectable||n&&typeof p.connectable>"u"),k=!!(p.focusable||r&&typeof p.focusable>"u"),w=e.nodeExtent?s1(p.positionAbsolute,e.nodeExtent):p.positionAbsolute,j=(w==null?void 0:w.x)??0,v=(w==null?void 0:w.y)??0,_=DP({x:j,y:v,width:p.width??0,height:p.height??0,origin:e.nodeOrigin});return te.createElement(x,{key:p.id,id:p.id,className:p.className,style:p.style,type:m,data:p.data,sourcePosition:p.sourcePosition||Ne.Bottom,targetPosition:p.targetPosition||Ne.Top,hidden:p.hidden,xPos:j,yPos:v,xPosOrigin:_.x,yPosOrigin:_.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!p.selected,isDraggable:y,isSelectable:S,isConnectable:N,isFocusable:k,resizeObserver:h,dragHandle:p.dragHandle,zIndex:((E=p[gt])==null?void 0:E.z)??0,isParent:!!((A=p[gt])!=null&&A.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!p.width&&!!p.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:p.ariaLabel,hasHandleBounds:!!((D=p[gt])!=null&&D.handleBounds)})}))};m6.displayName="NodeRenderer";var UP=T.memo(m6);const $P=(e,t,n)=>n===Ne.Left?e-t:n===Ne.Right?e+t:e,GP=(e,t,n)=>n===Ne.Top?e-t:n===Ne.Bottom?e+t:e,yb="react-flow__edgeupdater",vb=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:l,type:d})=>te.createElement("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:l,className:dn([yb,`${yb}-${d}`]),cx:$P(t,r,e),cy:GP(n,r,e),r,stroke:"transparent",fill:"transparent"}),BP=()=>!0;var Oa=e=>{const t=({id:n,className:r,type:i,data:s,onClick:l,onEdgeDoubleClick:d,selected:u,animated:h,label:p,labelStyle:m,labelShowBg:x,labelBgStyle:y,labelBgPadding:S,labelBgBorderRadius:N,style:k,source:w,target:j,sourceX:v,sourceY:_,targetX:E,targetY:A,sourcePosition:D,targetPosition:M,elementsSelectable:I,hidden:P,sourceHandleId:L,targetHandleId:F,onContextMenu:G,onMouseEnter:R,onMouseMove:$,onMouseLeave:B,reconnectRadius:Q,onReconnect:K,onReconnectStart:H,onReconnectEnd:W,markerEnd:z,markerStart:V,rfId:J,ariaLabel:ee,isFocusable:ae,isReconnectable:fe,pathOptions:Y,interactionWidth:ie,disableKeyboardA11y:ce})=>{const U=T.useRef(null),[X,oe]=T.useState(!1),[pe,xe]=T.useState(!1),he=Ot(),Oe=T.useMemo(()=>`url('#${Lg(V,J)}')`,[V,J]),_e=T.useMemo(()=>`url('#${Lg(z,J)}')`,[z,J]);if(P)return null;const be=Rt=>{var jn;const{edges:_n,addSelectedEdges:Br,unselectNodesAndEdges:Vr,multiSelectionActive:Hr}=he.getState(),Jn=_n.find(Cs=>Cs.id===n);Jn&&(I&&(he.setState({nodesSelectionActive:!1}),Jn.selected&&Hr?(Vr({nodes:[],edges:[Jn]}),(jn=U.current)==null||jn.blur()):Br([n])),l&&l(Rt,Jn))},nn=jl(n,he.getState,d),Sn=jl(n,he.getState,G),js=jl(n,he.getState,R),Si=jl(n,he.getState,$),_i=jl(n,he.getState,B),rn=(Rt,_n)=>{if(Rt.button!==0)return;const{edges:Br,isValidConnection:Vr}=he.getState(),Hr=_n?j:w,Jn=(_n?F:L)||null,jn=_n?"target":"source",Cs=Vr||BP,$o=_n,Es=Br.find(Wr=>Wr.id===n);xe(!0),H==null||H(Rt,Es,jn);const Go=Wr=>{xe(!1),W==null||W(Wr,Es,jn)};K3({event:Rt,handleId:Jn,nodeId:Hr,onConnect:Wr=>K==null?void 0:K(Es,Wr),isTarget:$o,getState:he.getState,setState:he.setState,isValidConnection:Cs,edgeUpdaterType:jn,onReconnectEnd:Go})},ji=Rt=>rn(Rt,!0),$r=Rt=>rn(Rt,!1),Gr=()=>oe(!0),ki=()=>oe(!1),Ci=!I&&!l,ks=Rt=>{var _n;if(!ce&&F3.includes(Rt.key)&&I){const{unselectNodesAndEdges:Br,addSelectedEdges:Vr,edges:Hr}=he.getState();Rt.key==="Escape"?((_n=U.current)==null||_n.blur(),Br({edges:[Hr.find(jn=>jn.id===n)]})):Vr([n])}};return te.createElement("g",{className:dn(["react-flow__edge",`react-flow__edge-${i}`,r,{selected:u,animated:h,inactive:Ci,updating:X}]),onClick:be,onDoubleClick:nn,onContextMenu:Sn,onMouseEnter:js,onMouseMove:Si,onMouseLeave:_i,onKeyDown:ae?ks:void 0,tabIndex:ae?0:void 0,role:ae?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":ee===null?void 0:ee||`Edge from ${w} to ${j}`,"aria-describedby":ae?`${r6}-${J}`:void 0,ref:U},!pe&&te.createElement(e,{id:n,source:w,target:j,selected:u,animated:h,label:p,labelStyle:m,labelShowBg:x,labelBgStyle:y,labelBgPadding:S,labelBgBorderRadius:N,data:s,style:k,sourceX:v,sourceY:_,targetX:E,targetY:A,sourcePosition:D,targetPosition:M,sourceHandleId:L,targetHandleId:F,markerStart:Oe,markerEnd:_e,pathOptions:Y,interactionWidth:ie}),fe&&te.createElement(te.Fragment,null,(fe==="source"||fe===!0)&&te.createElement(vb,{position:D,centerX:v,centerY:_,radius:Q,onMouseDown:ji,onMouseEnter:Gr,onMouseOut:ki,type:"source"}),(fe==="target"||fe===!0)&&te.createElement(vb,{position:M,centerX:E,centerY:A,radius:Q,onMouseDown:$r,onMouseEnter:Gr,onMouseOut:ki,type:"target"})))};return t.displayName="EdgeWrapper",T.memo(t)};function VP(e){const t={default:Oa(e.default||jh),straight:Oa(e.bezier||c1),step:Oa(e.step||l1),smoothstep:Oa(e.step||sf),simplebezier:Oa(e.simplebezier||o1)},n={},r=Object.keys(e).filter(i=>!["default","bezier"].includes(i)).reduce((i,s)=>(i[s]=Oa(e[s]||jh),i),n);return{...t,...r}}function bb(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,i=((n==null?void 0:n.y)||0)+t.y,s=(n==null?void 0:n.width)||t.width,l=(n==null?void 0:n.height)||t.height;switch(e){case Ne.Top:return{x:r+s/2,y:i};case Ne.Right:return{x:r+s,y:i+l/2};case Ne.Bottom:return{x:r+s/2,y:i+l};case Ne.Left:return{x:r,y:i+l/2}}}function wb(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const HP=(e,t,n,r,i,s)=>{const l=bb(n,e,t),d=bb(s,r,i);return{sourceX:l.x,sourceY:l.y,targetX:d.x,targetY:d.y}};function WP({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:s,width:l,height:d,transform:u}){const h={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+r,t.y+s)};h.x===h.x2&&(h.x2+=1),h.y===h.y2&&(h.y2+=1);const p=a1({x:(0-u[0])/u[2],y:(0-u[1])/u[2],width:l/u[2],height:d/u[2]}),m=Math.max(0,Math.min(p.x2,h.x2)-Math.max(p.x,h.x)),x=Math.max(0,Math.min(p.y2,h.y2)-Math.max(p.y,h.y));return Math.ceil(m*x)>0}function Nb(e){var r,i,s,l,d;const t=((r=e==null?void 0:e[gt])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((l=e==null?void 0:e.positionAbsolute)==null?void 0:l.x)||0,y:((d=e==null?void 0:e.positionAbsolute)==null?void 0:d.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const YP=[{level:0,isMaxLevel:!0,edges:[]}];function KP(e,t,n=!1){let r=-1;const i=e.reduce((l,d)=>{var p,m;const u=Xn(d.zIndex);let h=u?d.zIndex:0;if(n){const x=t.get(d.target),y=t.get(d.source),S=d.selected||(x==null?void 0:x.selected)||(y==null?void 0:y.selected),N=Math.max(((p=y==null?void 0:y[gt])==null?void 0:p.z)||0,((m=x==null?void 0:x[gt])==null?void 0:m.z)||0,1e3);h=(u?d.zIndex:0)+(S?N:0)}return l[h]?l[h].push(d):l[h]=[d],r=h>r?h:r,l},{}),s=Object.entries(i).map(([l,d])=>{const u=+l;return{edges:d,level:u,isMaxLevel:u===r}});return s.length===0?YP:s}function XP(e,t,n){const r=ft(T.useCallback(i=>e?i.edges.filter(s=>{const l=t.get(s.source),d=t.get(s.target);return(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&(d==null?void 0:d.width)&&(d==null?void 0:d.height)&&WP({sourcePos:l.positionAbsolute||{x:0,y:0},targetPos:d.positionAbsolute||{x:0,y:0},sourceWidth:l.width,sourceHeight:l.height,targetWidth:d.width,targetHeight:d.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[e,t]));return KP(r,t,n)}const QP=({color:e="none",strokeWidth:t=1})=>te.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),qP=({color:e="none",strokeWidth:t=1})=>te.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Sb={[jc.Arrow]:QP,[jc.ArrowClosed]:qP};function ZP(e){const t=Ot();return T.useMemo(()=>{var i,s;return Object.prototype.hasOwnProperty.call(Sb,e)?Sb[e]:((s=(i=t.getState()).onError)==null||s.call(i,"009",gi.error009(e)),null)},[e])}const JP=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:l,orient:d="auto-start-reverse"})=>{const u=ZP(t);return u?te.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:d,refX:"0",refY:"0"},te.createElement(u,{color:n,strokeWidth:l})):null},eT=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((i,s)=>([s.markerStart,s.markerEnd].forEach(l=>{if(l&&typeof l=="object"){const d=Lg(l,t);r.includes(d)||(i.push({id:d,color:l.color||e,...l}),r.push(d))}}),i),[]).sort((i,s)=>i.id.localeCompare(s.id))},g6=({defaultColor:e,rfId:t})=>{const n=ft(T.useCallback(eT({defaultColor:e,rfId:t}),[e,t]),(r,i)=>!(r.length!==i.length||r.some((s,l)=>s.id!==i[l].id)));return te.createElement("defs",null,n.map(r=>te.createElement(JP,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};g6.displayName="MarkerDefinitions";var tT=T.memo(g6);const nT=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),x6=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:i,noPanClassName:s,onEdgeContextMenu:l,onEdgeMouseEnter:d,onEdgeMouseMove:u,onEdgeMouseLeave:h,onEdgeClick:p,onEdgeDoubleClick:m,onReconnect:x,onReconnectStart:y,onReconnectEnd:S,reconnectRadius:N,children:k,disableKeyboardA11y:w})=>{const{edgesFocusable:j,edgesUpdatable:v,elementsSelectable:_,width:E,height:A,connectionMode:D,nodeInternals:M,onError:I}=ft(nT,en),P=XP(t,M,n);return E?te.createElement(te.Fragment,null,P.map(({level:L,edges:F,isMaxLevel:G})=>te.createElement("svg",{key:L,style:{zIndex:L},width:E,height:A,className:"react-flow__edges react-flow__container"},G&&te.createElement(tT,{defaultColor:e,rfId:r}),te.createElement("g",null,F.map(R=>{const[$,B,Q]=Nb(M.get(R.source)),[K,H,W]=Nb(M.get(R.target));if(!Q||!W)return null;let z=R.type||"default";i[z]||(I==null||I("011",gi.error011(z)),z="default");const V=i[z]||i.default,J=D===aa.Strict?H.target:(H.target??[]).concat(H.source??[]),ee=wb(B.source,R.sourceHandle),ae=wb(J,R.targetHandle),fe=(ee==null?void 0:ee.position)||Ne.Bottom,Y=(ae==null?void 0:ae.position)||Ne.Top,ie=!!(R.focusable||j&&typeof R.focusable>"u"),ce=R.reconnectable||R.updatable,U=typeof x<"u"&&(ce||v&&typeof ce>"u");if(!ee||!ae)return I==null||I("008",gi.error008(ee,R)),null;const{sourceX:X,sourceY:oe,targetX:pe,targetY:xe}=HP($,ee,fe,K,ae,Y);return te.createElement(V,{key:R.id,id:R.id,className:dn([R.className,s]),type:z,data:R.data,selected:!!R.selected,animated:!!R.animated,hidden:!!R.hidden,label:R.label,labelStyle:R.labelStyle,labelShowBg:R.labelShowBg,labelBgStyle:R.labelBgStyle,labelBgPadding:R.labelBgPadding,labelBgBorderRadius:R.labelBgBorderRadius,style:R.style,source:R.source,target:R.target,sourceHandleId:R.sourceHandle,targetHandleId:R.targetHandle,markerEnd:R.markerEnd,markerStart:R.markerStart,sourceX:X,sourceY:oe,targetX:pe,targetY:xe,sourcePosition:fe,targetPosition:Y,elementsSelectable:_,onContextMenu:l,onMouseEnter:d,onMouseMove:u,onMouseLeave:h,onClick:p,onEdgeDoubleClick:m,onReconnect:x,onReconnectStart:y,onReconnectEnd:S,reconnectRadius:N,rfId:r,ariaLabel:R.ariaLabel,isFocusable:ie,isReconnectable:U,pathOptions:"pathOptions"in R?R.pathOptions:void 0,interactionWidth:R.interactionWidth,disableKeyboardA11y:w})})))),k):null};x6.displayName="EdgeRenderer";var rT=T.memo(x6);const iT=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function sT({children:e}){const t=ft(iT);return te.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function aT(e){const t=p1(),n=T.useRef(!1);T.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const oT={[Ne.Left]:Ne.Right,[Ne.Right]:Ne.Left,[Ne.Top]:Ne.Bottom,[Ne.Bottom]:Ne.Top},y6=({nodeId:e,handleType:t,style:n,type:r=Qi.Bezier,CustomComponent:i,connectionStatus:s})=>{var A,D,M;const{fromNode:l,handleId:d,toX:u,toY:h,connectionMode:p}=ft(T.useCallback(I=>({fromNode:I.nodeInternals.get(e),handleId:I.connectionHandleId,toX:(I.connectionPosition.x-I.transform[0])/I.transform[2],toY:(I.connectionPosition.y-I.transform[1])/I.transform[2],connectionMode:I.connectionMode}),[e]),en),m=(A=l==null?void 0:l[gt])==null?void 0:A.handleBounds;let x=m==null?void 0:m[t];if(p===aa.Loose&&(x=x||(m==null?void 0:m[t==="source"?"target":"source"])),!l||!x)return null;const y=d?x.find(I=>I.id===d):x[0],S=y?y.x+y.width/2:(l.width??0)/2,N=y?y.y+y.height/2:l.height??0,k=(((D=l.positionAbsolute)==null?void 0:D.x)??0)+S,w=(((M=l.positionAbsolute)==null?void 0:M.y)??0)+N,j=y==null?void 0:y.position,v=j?oT[j]:null;if(!j||!v)return null;if(i)return te.createElement(i,{connectionLineType:r,connectionLineStyle:n,fromNode:l,fromHandle:y,fromX:k,fromY:w,toX:u,toY:h,fromPosition:j,toPosition:v,connectionStatus:s});let _="";const E={sourceX:k,sourceY:w,sourcePosition:j,targetX:u,targetY:h,targetPosition:v};return r===Qi.Bezier?[_]=U3(E):r===Qi.Step?[_]=zg({...E,borderRadius:0}):r===Qi.SmoothStep?[_]=zg(E):r===Qi.SimpleBezier?[_]=O3(E):_=`M${k},${w} ${u},${h}`,te.createElement("path",{d:_,fill:"none",className:"react-flow__connection-path",style:n})};y6.displayName="ConnectionLine";const lT=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function cT({containerStyle:e,style:t,type:n,component:r}){const{nodeId:i,handleType:s,nodesConnectable:l,width:d,height:u,connectionStatus:h}=ft(lT,en);return!(i&&s&&d&&l)?null:te.createElement("svg",{style:e,width:d,height:u,className:"react-flow__edges react-flow__connectionline react-flow__container"},te.createElement("g",{className:dn(["react-flow__connection",h])},te.createElement(y6,{nodeId:i,handleType:s,style:t,type:n,CustomComponent:r,connectionStatus:h})))}function _b(e,t){return T.useRef(null),Ot(),T.useMemo(()=>t(e),[e])}const v6=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:i,onInit:s,onNodeClick:l,onEdgeClick:d,onNodeDoubleClick:u,onEdgeDoubleClick:h,onNodeMouseEnter:p,onNodeMouseMove:m,onNodeMouseLeave:x,onNodeContextMenu:y,onSelectionContextMenu:S,onSelectionStart:N,onSelectionEnd:k,connectionLineType:w,connectionLineStyle:j,connectionLineComponent:v,connectionLineContainerStyle:_,selectionKeyCode:E,selectionOnDrag:A,selectionMode:D,multiSelectionKeyCode:M,panActivationKeyCode:I,zoomActivationKeyCode:P,deleteKeyCode:L,onlyRenderVisibleElements:F,elementsSelectable:G,selectNodesOnDrag:R,defaultViewport:$,translateExtent:B,minZoom:Q,maxZoom:K,preventScrolling:H,defaultMarkerColor:W,zoomOnScroll:z,zoomOnPinch:V,panOnScroll:J,panOnScrollSpeed:ee,panOnScrollMode:ae,zoomOnDoubleClick:fe,panOnDrag:Y,onPaneClick:ie,onPaneMouseEnter:ce,onPaneMouseMove:U,onPaneMouseLeave:X,onPaneScroll:oe,onPaneContextMenu:pe,onEdgeContextMenu:xe,onEdgeMouseEnter:he,onEdgeMouseMove:Oe,onEdgeMouseLeave:_e,onReconnect:be,onReconnectStart:nn,onReconnectEnd:Sn,reconnectRadius:js,noDragClassName:Si,noWheelClassName:_i,noPanClassName:rn,elevateEdgesOnSelect:ji,disableKeyboardA11y:$r,nodeOrigin:Gr,nodeExtent:ki,rfId:Ci})=>{const ks=_b(e,LP),Rt=_b(t,VP);return aT(s),te.createElement(FP,{onPaneClick:ie,onPaneMouseEnter:ce,onPaneMouseMove:U,onPaneMouseLeave:X,onPaneContextMenu:pe,onPaneScroll:oe,deleteKeyCode:L,selectionKeyCode:E,selectionOnDrag:A,selectionMode:D,onSelectionStart:N,onSelectionEnd:k,multiSelectionKeyCode:M,panActivationKeyCode:I,zoomActivationKeyCode:P,elementsSelectable:G,onMove:n,onMoveStart:r,onMoveEnd:i,zoomOnScroll:z,zoomOnPinch:V,zoomOnDoubleClick:fe,panOnScroll:J,panOnScrollSpeed:ee,panOnScrollMode:ae,panOnDrag:Y,defaultViewport:$,translateExtent:B,minZoom:Q,maxZoom:K,onSelectionContextMenu:S,preventScrolling:H,noDragClassName:Si,noWheelClassName:_i,noPanClassName:rn,disableKeyboardA11y:$r},te.createElement(sT,null,te.createElement(rT,{edgeTypes:Rt,onEdgeClick:d,onEdgeDoubleClick:h,onlyRenderVisibleElements:F,onEdgeContextMenu:xe,onEdgeMouseEnter:he,onEdgeMouseMove:Oe,onEdgeMouseLeave:_e,onReconnect:be,onReconnectStart:nn,onReconnectEnd:Sn,reconnectRadius:js,defaultMarkerColor:W,noPanClassName:rn,elevateEdgesOnSelect:!!ji,disableKeyboardA11y:$r,rfId:Ci},te.createElement(cT,{style:j,type:w,component:v,containerStyle:_})),te.createElement("div",{className:"react-flow__edgelabel-renderer"}),te.createElement(UP,{nodeTypes:ks,onNodeClick:l,onNodeDoubleClick:u,onNodeMouseEnter:p,onNodeMouseMove:m,onNodeMouseLeave:x,onNodeContextMenu:y,selectNodesOnDrag:R,onlyRenderVisibleElements:F,noPanClassName:rn,noDragClassName:Si,disableKeyboardA11y:$r,nodeOrigin:Gr,nodeExtent:ki,rfId:Ci})))};v6.displayName="GraphView";var dT=T.memo(v6);const $g=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],$i={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:$g,nodeExtent:$g,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:aa.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:OE,isValidConnection:void 0},uT=()=>Z7((e,t)=>({...$i,setNodes:n=>{const{nodeInternals:r,nodeOrigin:i,elevateNodesOnSelect:s}=t();e({nodeInternals:am(n,r,i,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(i=>({...r,...i}))})},setDefaultNodesAndEdges:(n,r)=>{const i=typeof n<"u",s=typeof r<"u",l=i?am(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:l,edges:s?r:[],hasDefaultNodes:i,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:i,fitViewOnInit:s,fitViewOnInitDone:l,fitViewOnInitOptions:d,domNode:u,nodeOrigin:h}=t(),p=u==null?void 0:u.querySelector(".react-flow__viewport");if(!p)return;const m=window.getComputedStyle(p),{m22:x}=new window.DOMMatrixReadOnly(m.transform),y=n.reduce((N,k)=>{const w=i.get(k.id);if(w!=null&&w.hidden)i.set(w.id,{...w,[gt]:{...w[gt],handleBounds:void 0}});else if(w){const j=i1(k.nodeElement);!!(j.width&&j.height&&(w.width!==j.width||w.height!==j.height||k.forceUpdate))&&(i.set(w.id,{...w,[gt]:{...w[gt],handleBounds:{source:xb(".source",k.nodeElement,x,h),target:xb(".target",k.nodeElement,x,h)}},...j}),N.push({id:w.id,type:"dimensions",dimensions:j}))}return N},[]);s6(i,h);const S=l||s&&!l&&a6(t,{initial:!0,...d});e({nodeInternals:new Map(i),fitViewOnInitDone:S}),(y==null?void 0:y.length)>0&&(r==null||r(y))},updateNodePositions:(n,r=!0,i=!1)=>{const{triggerNodeChanges:s}=t(),l=n.map(d=>{const u={id:d.id,type:"position",dragging:i};return r&&(u.positionAbsolute=d.positionAbsolute,u.position=d.position),u});s(l)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:i,hasDefaultNodes:s,nodeOrigin:l,getNodes:d,elevateNodesOnSelect:u}=t();if(n!=null&&n.length){if(s){const h=l6(n,d()),p=am(h,i,l,u);e({nodeInternals:p})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:i,getNodes:s}=t();let l,d=null;r?l=n.map(u=>Yi(u,!0)):(l=to(s(),n),d=to(i,[])),yu({changedNodes:l,changedEdges:d,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:i,getNodes:s}=t();let l,d=null;r?l=n.map(u=>Yi(u,!0)):(l=to(i,n),d=to(s(),[])),yu({changedNodes:d,changedEdges:l,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:i,getNodes:s}=t(),l=n||s(),d=r||i,u=l.map(p=>(p.selected=!1,Yi(p.id,!1))),h=d.map(p=>Yi(p.id,!1));yu({changedNodes:u,changedEdges:h,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:i}=t();r==null||r.scaleExtent([n,i]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:i}=t();r==null||r.scaleExtent([i,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),s=r().filter(d=>d.selected).map(d=>Yi(d.id,!1)),l=n.filter(d=>d.selected).map(d=>Yi(d.id,!1));yu({changedNodes:s,changedEdges:l,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(i=>{i.positionAbsolute=s1(i.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:i,height:s,d3Zoom:l,d3Selection:d,translateExtent:u}=t();if(!l||!d||!n.x&&!n.y)return!1;const h=cs.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),p=[[0,0],[i,s]],m=l==null?void 0:l.constrain()(h,p,u);return l.transform(d,m),r[0]!==m.x||r[1]!==m.y||r[2]!==m.k},cancelConnection:()=>e({connectionNodeId:$i.connectionNodeId,connectionHandleId:$i.connectionHandleId,connectionHandleType:$i.connectionHandleType,connectionStatus:$i.connectionStatus,connectionStartHandle:$i.connectionStartHandle,connectionEndHandle:$i.connectionEndHandle}),reset:()=>e({...$i})}),Object.is),g1=({children:e})=>{const t=T.useRef(null);return t.current||(t.current=uT()),te.createElement(ME,{value:t.current},e)};g1.displayName="ReactFlowProvider";const b6=({children:e})=>T.useContext(rf)?te.createElement(te.Fragment,null,e):te.createElement(g1,null,e);b6.displayName="ReactFlowWrapper";const hT={input:Z3,default:Og,output:e6,group:f1},fT={default:jh,straight:c1,step:l1,smoothstep:sf,simplebezier:o1},pT=[0,0],mT=[15,15],gT={x:0,y:0,zoom:1},xT={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},w6=T.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s=hT,edgeTypes:l=fT,onNodeClick:d,onEdgeClick:u,onInit:h,onMove:p,onMoveStart:m,onMoveEnd:x,onConnect:y,onConnectStart:S,onConnectEnd:N,onClickConnectStart:k,onClickConnectEnd:w,onNodeMouseEnter:j,onNodeMouseMove:v,onNodeMouseLeave:_,onNodeContextMenu:E,onNodeDoubleClick:A,onNodeDragStart:D,onNodeDrag:M,onNodeDragStop:I,onNodesDelete:P,onEdgesDelete:L,onSelectionChange:F,onSelectionDragStart:G,onSelectionDrag:R,onSelectionDragStop:$,onSelectionContextMenu:B,onSelectionStart:Q,onSelectionEnd:K,connectionMode:H=aa.Strict,connectionLineType:W=Qi.Bezier,connectionLineStyle:z,connectionLineComponent:V,connectionLineContainerStyle:J,deleteKeyCode:ee="Backspace",selectionKeyCode:ae="Shift",selectionOnDrag:fe=!1,selectionMode:Y=_c.Full,panActivationKeyCode:ie="Space",multiSelectionKeyCode:ce=_h()?"Meta":"Control",zoomActivationKeyCode:U=_h()?"Meta":"Control",snapToGrid:X=!1,snapGrid:oe=mT,onlyRenderVisibleElements:pe=!1,selectNodesOnDrag:xe=!0,nodesDraggable:he,nodesConnectable:Oe,nodesFocusable:_e,nodeOrigin:be=pT,edgesFocusable:nn,edgesUpdatable:Sn,elementsSelectable:js,defaultViewport:Si=gT,minZoom:_i=.5,maxZoom:rn=2,translateExtent:ji=$g,preventScrolling:$r=!0,nodeExtent:Gr,defaultMarkerColor:ki="#b1b1b7",zoomOnScroll:Ci=!0,zoomOnPinch:ks=!0,panOnScroll:Rt=!1,panOnScrollSpeed:_n=.5,panOnScrollMode:Br=Ks.Free,zoomOnDoubleClick:Vr=!0,panOnDrag:Hr=!0,onPaneClick:Jn,onPaneMouseEnter:jn,onPaneMouseMove:Cs,onPaneMouseLeave:$o,onPaneScroll:Es,onPaneContextMenu:Go,children:Wc,onEdgeContextMenu:Wr,onEdgeDoubleClick:Yc,onEdgeMouseEnter:Kc,onEdgeMouseMove:Jf,onEdgeMouseLeave:Bo,onEdgeUpdate:Xc,onEdgeUpdateStart:Qc,onEdgeUpdateEnd:ep,onReconnect:tp,onReconnectStart:np,onReconnectEnd:qc,reconnectRadius:Vo=10,edgeUpdaterRadius:rp=10,onNodesChange:ip,onEdgesChange:ba,noDragClassName:sp="nodrag",noWheelClassName:ap="nowheel",noPanClassName:Zc="nopan",fitView:op=!1,fitViewOptions:lp,connectOnClick:cp=!0,attributionPosition:dp,proOptions:up,defaultEdgeOptions:hp,elevateNodesOnSelect:fp=!0,elevateEdgesOnSelect:pp=!1,disableKeyboardA11y:Jc=!1,autoPanOnConnect:mp=!0,autoPanOnNodeDrag:gp=!0,connectionRadius:Ho=20,isValidConnection:Ps,onError:Wo,style:Yo,id:ed,nodeDragThreshold:Ko,...Ei},br)=>{const He=ed||"1";return te.createElement("div",{...Ei,style:{...Yo,...xT},ref:br,className:dn(["react-flow",i]),"data-testid":"rf__wrapper",id:ed},te.createElement(b6,null,te.createElement(dT,{onInit:h,onMove:p,onMoveStart:m,onMoveEnd:x,onNodeClick:d,onEdgeClick:u,onNodeMouseEnter:j,onNodeMouseMove:v,onNodeMouseLeave:_,onNodeContextMenu:E,onNodeDoubleClick:A,nodeTypes:s,edgeTypes:l,connectionLineType:W,connectionLineStyle:z,connectionLineComponent:V,connectionLineContainerStyle:J,selectionKeyCode:ae,selectionOnDrag:fe,selectionMode:Y,deleteKeyCode:ee,multiSelectionKeyCode:ce,panActivationKeyCode:ie,zoomActivationKeyCode:U,onlyRenderVisibleElements:pe,selectNodesOnDrag:xe,defaultViewport:Si,translateExtent:ji,minZoom:_i,maxZoom:rn,preventScrolling:$r,zoomOnScroll:Ci,zoomOnPinch:ks,zoomOnDoubleClick:Vr,panOnScroll:Rt,panOnScrollSpeed:_n,panOnScrollMode:Br,panOnDrag:Hr,onPaneClick:Jn,onPaneMouseEnter:jn,onPaneMouseMove:Cs,onPaneMouseLeave:$o,onPaneScroll:Es,onPaneContextMenu:Go,onSelectionContextMenu:B,onSelectionStart:Q,onSelectionEnd:K,onEdgeContextMenu:Wr,onEdgeDoubleClick:Yc,onEdgeMouseEnter:Kc,onEdgeMouseMove:Jf,onEdgeMouseLeave:Bo,onReconnect:tp??Xc,onReconnectStart:np??Qc,onReconnectEnd:qc??ep,reconnectRadius:Vo??rp,defaultMarkerColor:ki,noDragClassName:sp,noWheelClassName:ap,noPanClassName:Zc,elevateEdgesOnSelect:pp,rfId:He,disableKeyboardA11y:Jc,nodeOrigin:be,nodeExtent:Gr}),te.createElement(oP,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:y,onConnectStart:S,onConnectEnd:N,onClickConnectStart:k,onClickConnectEnd:w,nodesDraggable:he,nodesConnectable:Oe,nodesFocusable:_e,edgesFocusable:nn,edgesUpdatable:Sn,elementsSelectable:js,elevateNodesOnSelect:fp,minZoom:_i,maxZoom:rn,nodeExtent:Gr,onNodesChange:ip,onEdgesChange:ba,snapToGrid:X,snapGrid:oe,connectionMode:H,translateExtent:ji,connectOnClick:cp,defaultEdgeOptions:hp,fitView:op,fitViewOptions:lp,onNodesDelete:P,onEdgesDelete:L,onNodeDragStart:D,onNodeDrag:M,onNodeDragStop:I,onSelectionDrag:R,onSelectionDragStart:G,onSelectionDragStop:$,noPanClassName:Zc,nodeOrigin:be,rfId:He,autoPanOnConnect:mp,autoPanOnNodeDrag:gp,onError:Wo,connectionRadius:Ho,isValidConnection:Ps,nodeDragThreshold:Ko}),te.createElement(sP,{onSelectionChange:F}),Wc,te.createElement(AE,{proOptions:up,position:dp}),te.createElement(hP,{rfId:He,disableKeyboardA11y:Jc})))});w6.displayName="ReactFlow";function N6(e){return t=>{const[n,r]=T.useState(t),i=T.useCallback(s=>r(l=>e(s,l)),[]);return[n,r,i]}}const yT=N6(l6),vT=N6(kP);function bT(){return te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},te.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function wT(){return te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},te.createElement("path",{d:"M0 0h32v4.2H0z"}))}function NT(){return te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},te.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function ST(){return te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},te.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function _T(){return te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},te.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const $l=({children:e,className:t,...n})=>te.createElement("button",{type:"button",className:dn(["react-flow__controls-button",t]),...n},e);$l.displayName="ControlButton";const jT=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),S6=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:l,onFitView:d,onInteractiveChange:u,className:h,children:p,position:m="bottom-left"})=>{const x=Ot(),[y,S]=T.useState(!1),{isInteractive:N,minZoomReached:k,maxZoomReached:w}=ft(jT,en),{zoomIn:j,zoomOut:v,fitView:_}=p1();if(T.useEffect(()=>{S(!0)},[]),!y)return null;const E=()=>{j(),s==null||s()},A=()=>{v(),l==null||l()},D=()=>{_(i),d==null||d()},M=()=>{x.setState({nodesDraggable:!N,nodesConnectable:!N,elementsSelectable:!N}),u==null||u(!N)};return te.createElement(R3,{className:dn(["react-flow__controls",h]),position:m,style:e,"data-testid":"rf__controls"},t&&te.createElement(te.Fragment,null,te.createElement($l,{onClick:E,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:w},te.createElement(bT,null)),te.createElement($l,{onClick:A,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:k},te.createElement(wT,null))),n&&te.createElement($l,{className:"react-flow__controls-fitview",onClick:D,title:"fit view","aria-label":"fit view"},te.createElement(NT,null)),r&&te.createElement($l,{className:"react-flow__controls-interactive",onClick:M,title:"toggle interactivity","aria-label":"toggle interactivity"},N?te.createElement(_T,null):te.createElement(ST,null)),p)};S6.displayName="Controls";var kT=T.memo(S6),mr;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(mr||(mr={}));function CT({color:e,dimensions:t,lineWidth:n}){return te.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function ET({color:e,radius:t}){return te.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const PT={[mr.Dots]:"#91919a",[mr.Lines]:"#eee",[mr.Cross]:"#e2e2e2"},TT={[mr.Dots]:1,[mr.Lines]:1,[mr.Cross]:6},MT=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function _6({id:e,variant:t=mr.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=2,color:l,style:d,className:u}){const h=T.useRef(null),{transform:p,patternId:m}=ft(MT,en),x=l||PT[t],y=r||TT[t],S=t===mr.Dots,N=t===mr.Cross,k=Array.isArray(n)?n:[n,n],w=[k[0]*p[2]||1,k[1]*p[2]||1],j=y*p[2],v=N?[j,j]:w,_=S?[j/s,j/s]:[v[0]/s,v[1]/s];return te.createElement("svg",{className:dn(["react-flow__background",u]),style:{...d,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:h,"data-testid":"rf__background"},te.createElement("pattern",{id:m+e,x:p[0]%w[0],y:p[1]%w[1],width:w[0],height:w[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${_[0]},-${_[1]})`},S?te.createElement(ET,{color:x,radius:j/s}):te.createElement(CT,{dimensions:v,color:x,lineWidth:i})),te.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${m+e})`}))}_6.displayName="Background";var RT=T.memo(_6);const AT=()=>{zn();const e=T.useRef(null),[t,n,r]=yT([]),[i,s,l]=vT([]),[d,u]=T.useState([]),[h,p]=T.useState([]),[m,x]=T.useState("All"),[y,S]=T.useState(""),[N,k]=T.useState(!0),[w,j]=T.useState(null);T.useEffect(()=>{v()},[]),T.useEffect(()=>{_()},[d,m,y,t]);const v=async()=>{k(!0);try{const I=await ue.get("/world-bible/entities");u(I),n([]),s([])}catch(I){console.error("Failed to load data",I)}finally{k(!1)}},_=()=>{let I=d;if(m!=="All"&&(I=I.filter(P=>m==="Individual"?P.categoria==="Individual"||!P.categoria&&(P.tipoEspecial==="entidadindividual"||!P.tipoEspecial):P.categoria===m)),y){const P=y.toLowerCase();I=I.filter(L=>L.nombre.toLowerCase().includes(P))}p(I)},E=T.useCallback(I=>s(P=>$3({...I,type:"smoothstep",animated:!0,style:{stroke:"#6366f1"},markerEnd:{type:jc.ArrowClosed,color:"#6366f1"}},P)),[]),A=T.useCallback(I=>{I.preventDefault(),I.dataTransfer.dropEffect="move"},[]),D=T.useCallback(I=>{I.preventDefault();const P=I.dataTransfer.getData("application/reactflow/id"),L=JSON.parse(I.dataTransfer.getData("application/reactflow/data"));typeof type>"u"||type;const F=w.screenToFlowPosition({x:I.clientX,y:I.clientY});let G="#475569";L.categoria==="Individual"?G="#6366f1":L.categoria==="Location"?G="#10b981":L.categoria==="Group"&&(G="#a855f7");const R={id:`node-${P}`,type:"default",position:F,data:{label:L.nombre,entityId:P,...L},style:{background:"rgba(20, 20, 25, 0.9)",color:"#fff",border:`1px solid ${G}`,borderRadius:"12px",padding:"10px",minWidth:"150px",backdropFilter:"blur(10px)",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}};n($=>$.concat(R))},[w]),M=(I,P)=>{I.dataTransfer.setData("application/reactflow/id",P.id),I.dataTransfer.setData("application/reactflow/data",JSON.stringify(P)),I.dataTransfer.effectAllowed="move"};return a.jsxs("div",{className:"flex h-full bg-[#050508] relative overflow-hidden",children:[a.jsxs("aside",{className:"w-80 border-r border-white/5 bg-surface-dark/50 backdrop-blur-xl flex flex-col z-20",children:[a.jsxs("div",{className:"p-6 border-b border-white/5 space-y-4",children:[a.jsxs("h2",{className:"text-sm font-black uppercase tracking-widest text-white flex items-center gap-2",children:[a.jsx("span",{className:"material-symbols-outlined text-primary",children:"hub"})," Graph Composer"]}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-500 text-sm",children:"search"}),a.jsx("input",{type:"text",placeholder:"Search entities...",className:"w-full bg-black/30 border border-white/10 rounded-xl pl-9 pr-3 py-2 text-xs text-white focus:border-primary/50 outline-none",value:y,onChange:I=>S(I.target.value)})]}),a.jsx("div",{className:"flex gap-2 p-1 bg-black/30 rounded-lg overflow-x-auto no-scrollbar",children:["All","Individual","Location","Group","Event"].map(I=>a.jsx("button",{onClick:()=>x(I),className:`px-3 py-1.5 rounded-md text-[10px] font-bold uppercase tracking-wider whitespace-nowrap transition-all ${m===I?"bg-primary text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:I},I))})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-2",children:[a.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-600 mb-2 pl-2",children:"Drag to Canvas"}),h.map(I=>a.jsxs("div",{draggable:!0,onDragStart:P=>M(P,I),className:"group flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-transparent hover:border-white/10 hover:bg-white/10 cursor-grab active:cursor-grabbing transition-all",children:[a.jsx(yc,{name:I.nombre,url:I.iconUrl,size:"sm",className:"rounded-lg opacity-80 group-hover:opacity-100"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-xs font-bold text-slate-300 group-hover:text-white truncate",children:I.nombre}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[9px] text-slate-500 uppercase tracking-wider",children:I.categoria||"Entity"}),I.carpeta&&a.jsx("span",{className:"text-[9px] text-primary/70",children:I.carpeta.nombre})]})]}),a.jsx("span",{className:"material-symbols-outlined text-slate-600 group-hover:text-white text-sm",children:"drag_indicator"})]},I.id)),h.length===0&&a.jsx("div",{className:"p-8 text-center text-slate-600 text-xs italic",children:"No entities found."})]})]}),a.jsxs("div",{className:"flex-1 h-full relative",ref:e,children:[a.jsxs(w6,{nodes:t,edges:i,onNodesChange:r,onEdgesChange:l,onConnect:E,onInit:j,onDrop:D,onDragOver:A,fitView:!0,className:"bg-[#050508]",children:[a.jsx(RT,{color:"#333",gap:20,size:1}),a.jsx(kT,{className:"bg-surface-dark border border-white/10 text-white fill-white"})]}),a.jsxs("div",{className:"absolute top-6 right-6 z-10 flex gap-2",children:[a.jsx(Ye,{variant:"secondary",size:"sm",icon:"save",children:"Save View"}),a.jsx(Ye,{variant:"primary",size:"sm",icon:"auto_fix_high",children:"Auto Layout"})]})]})]})},IT=()=>a.jsx(g1,{children:a.jsx(AT,{})}),FT=({id:e})=>{const{id:t}=zn(),n=Fn(),[r,i]=T.useState("overview"),[s,l]=T.useState(null),[d,u]=T.useState(!0),[h,p]=T.useState(!1);T.useEffect(()=>{m()},[e]);const m=async()=>{u(!0);try{const N=await ue.get(`/bd/entidadindividual/${e}`);l(N)}catch(N){console.error("Error loading character:",N)}finally{u(!1)}},x=async()=>{try{await ue.patch("/bd/modificar",{...s,tipoEntidad:"entidadindividual"}),p(!1)}catch(N){console.error("Error saving:",N)}},y=async()=>{if(window.confirm("Move this character to the Trash Bin?"))try{await ue.delete(`/bd/entidadindividual/${e}`),n(`/project/${t}`)}catch(N){console.error(N)}},S=(N,k)=>{l(w=>({...w,[N]:k}))};return d?a.jsx("div",{className:"p-20 text-center text-slate-500 animate-pulse",children:"Summoning entity..."}):s?a.jsxs("div",{className:"flex h-full",children:[a.jsxs("div",{className:"flex-1 flex flex-col overflow-y-auto custom-scrollbar p-8 gap-6",children:[a.jsxs("div",{className:"flex items-start gap-6",children:[a.jsx("div",{className:"relative",children:a.jsx(yc,{url:s.imagenUrl||"https://images.unsplash.com/photo-1544005313-94ddf0286df2?q=80&w=1976&auto=format&fit=crop",size:"xl",className:"rounded-2xl border-2 border-primary shadow-[0_0_30px_rgba(99,102,242,0.3)]"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("span",{className:"text-xs font-bold text-primary bg-primary/10 px-2 py-0.5 rounded border border-primary/20",children:s.estado||"ACTIVE"}),a.jsx("span",{className:"text-xs font-bold text-slate-400 bg-surface-light px-2 py-0.5 rounded border border-white/5",children:s.tipo||"Unknown"})]}),a.jsxs("h1",{className:"text-4xl font-bold text-white mb-2",children:[s.nombre," ",s.apellidos]}),a.jsx("p",{className:"text-lg text-slate-300",children:s.origen||"Traveling the void"})]}),a.jsxs("div",{className:"flex gap-2",children:[!h&&a.jsx(Ye,{className:"border-red-500/30 text-red-400 hover:bg-red-500/10",icon:"delete",onClick:y,children:"Delete"}),a.jsx(Ye,{variant:"secondary",icon:h?"close":"edit",onClick:()=>p(!h),children:h?"Cancel":"Edit Profile"}),h&&a.jsx(Ye,{variant:"primary",icon:"save",onClick:x,children:"Save Changes"})]})]}),a.jsx("div",{className:"border-b border-glass-border flex gap-6",children:["Overview","Biography","Attributes & Stats","Relationships"].map(N=>a.jsx("button",{onClick:()=>i(N.toLowerCase()),className:`pb-4 px-2 text-sm font-bold border-b-2 transition-colors ${r===N.toLowerCase()?"text-primary border-primary":"text-slate-500 border-transparent hover:text-white"}`,children:N},N))}),a.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[a.jsx("div",{className:"col-span-1 space-y-6",children:a.jsxs(Fe,{className:"p-4",children:[a.jsxs("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-4 flex items-center gap-2",children:[a.jsx("span",{className:"material-symbols-outlined text-sm",children:"fingerprint"})," Identity"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Name"}),a.jsx("input",{type:"text",value:s.nombre,onChange:N=>S("nombre",N.target.value),className:"w-full bg-surface-light border border-white/10 rounded px-3 py-2 text-white text-sm",readOnly:!h})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Surnames"}),a.jsx("input",{type:"text",value:s.apellidos||"",onChange:N=>S("apellidos",N.target.value),className:"w-full bg-surface-light border border-white/10 rounded px-3 py-2 text-white text-sm",readOnly:!h})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Type / Species"}),a.jsx("input",{type:"text",value:s.tipo||"",onChange:N=>S("tipo",N.target.value),className:"w-full bg-surface-light border border-white/10 rounded px-3 py-2 text-white text-sm",readOnly:!h})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Origin"}),a.jsx("input",{type:"text",value:s.origen||"",onChange:N=>S("origen",N.target.value),className:"w-full bg-surface-light border border-white/10 rounded px-3 py-2 text-white text-sm",readOnly:!h})]})]})]})}),a.jsx("div",{className:"col-span-2 space-y-6",children:a.jsxs(Fe,{className:"p-6 relative overflow-hidden group",children:[a.jsxs("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-4 flex items-center gap-2",children:[a.jsx("span",{className:"material-symbols-outlined text-sm",children:"history_edu"})," Description & Lore"]}),a.jsx("textarea",{value:s.descripcion||"",onChange:N=>S("descripcion",N.target.value),readOnly:!h,className:"w-full bg-transparent border-none outline-none text-slate-300 text-sm leading-relaxed mb-4 min-h-[150px] resize-none",placeholder:"Write the history of this person..."}),a.jsxs("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-4 flex items-center gap-2",children:[a.jsx("span",{className:"material-symbols-outlined text-sm",children:"psychology"})," Behavior"]}),a.jsx("textarea",{value:s.comportamiento||"",onChange:N=>S("comportamiento",N.target.value),readOnly:!h,className:"w-full bg-transparent border-none outline-none text-slate-300 text-sm leading-relaxed min-h-[100px] resize-none",placeholder:"How does this person act?"})]})})]})]}),a.jsxs("div",{className:"w-80 border-l border-glass-border bg-surface-dark/50 hidden xl:flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b border-glass-border flex justify-between items-center",children:[a.jsx("span",{className:"text-xs font-bold text-slate-500",children:"QUICK NOTES"}),a.jsx("button",{className:"text-slate-400 hover:text-white",children:a.jsx("span",{className:"material-symbols-outlined text-sm",children:"open_in_new"})})]}),a.jsx("div",{className:"p-4 flex-1",children:a.jsx("textarea",{className:"w-full h-full bg-transparent border-none outline-none text-sm text-slate-300 placeholder-slate-600 resize-none",placeholder:"Draft a quick scene or jot down notes for Elara here..."})}),a.jsx("div",{className:"p-2 border-t border-glass-border text-right text-[10px] text-slate-600",children:"0 words"})]})]}):a.jsx("div",{className:"p-20 text-center text-red-500",children:"Character not found in the archives."})},jb=({id:e})=>{const[t,n]=T.useState(null),[r,i]=T.useState(!0),[s,l]=T.useState(!1);T.useEffect(()=>{d()},[e]);const d=async()=>{i(!0);try{const p=await ue.get(`/bd/zona/${e}`);n(p)}catch(p){console.error("Error loading location:",p)}finally{i(!1)}},u=async()=>{try{await ue.patch("/bd/modificar",{...t,tipoEntidad:"zona"}),l(!1)}catch(p){console.error("Error saving:",p)}},h=(p,m)=>{n(x=>({...x,[p]:m}))};return r?a.jsx("div",{className:"p-20 text-center text-slate-500 animate-pulse",children:"Scanning terrain..."}):t?a.jsxs("div",{className:"flex h-full overflow-y-auto custom-scrollbar p-8 flex-col gap-8",children:[a.jsxs("header",{className:"flex justify-between items-end",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("span",{className:"text-xs font-bold text-emerald-400 bg-emerald-400/10 px-2 py-0.5 rounded border border-emerald-400/20",children:"LOCATION"}),a.jsx("span",{className:"text-xs font-bold text-slate-400 bg-surface-light px-2 py-0.5 rounded border border-white/5",children:t.tipo||"Wilderness"})]}),a.jsx("h1",{className:"text-5xl font-manrope font-black text-white tracking-tight",children:t.nombre}),a.jsx("p",{className:"text-slate-400 mt-2",children:t.apellidos||"Uncharted territory"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Ye,{variant:"secondary",icon:s?"close":"edit",onClick:()=>l(!s),children:s?"Cancel":"Edit Location"}),s&&a.jsx(Ye,{variant:"primary",icon:"save",onClick:u,children:"Update Records"})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-8",children:[a.jsxs("div",{className:"col-span-1 space-y-6",children:[a.jsxs(Fe,{className:"p-6",children:[a.jsxs("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-4 flex items-center gap-2",children:[a.jsx("span",{className:"material-symbols-outlined text-sm",children:"straighten"})," Geography & Scale"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Size / Scale"}),a.jsx("input",{type:"text",value:t.tamanno||"",onChange:p=>h("tamanno",p.target.value),className:"w-full bg-surface-light border border-white/10 rounded px-3 py-2 text-white text-sm",readOnly:!s})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Development Level"}),a.jsx("input",{type:"text",value:t.desarrollo||"",onChange:p=>h("desarrollo",p.target.value),className:"w-full bg-surface-light border border-white/10 rounded px-3 py-2 text-white text-sm",readOnly:!s})]})]})]}),a.jsxs(Fe,{className:"p-6",children:[a.jsx("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-4",children:"Quick Stats"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-white/5 p-3 rounded-xl border border-white/5",children:[a.jsx("span",{className:"text-[10px] text-slate-500 block",children:"Density"}),a.jsx("span",{className:"text-white font-bold",children:"Medium"})]}),a.jsxs("div",{className:"bg-white/5 p-3 rounded-xl border border-white/5",children:[a.jsx("span",{className:"text-[10px] text-slate-500 block",children:"Security"}),a.jsx("span",{className:"text-emerald-400 font-bold",children:"Stable"})]})]})]})]}),a.jsx("div",{className:"col-span-2 space-y-6",children:a.jsxs(Fe,{className:"p-8",children:[a.jsxs("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-4 flex items-center gap-2",children:[a.jsx("span",{className:"material-symbols-outlined text-sm",children:"description"})," Topographic Records & Lore"]}),a.jsx("textarea",{value:t.descripcion||"",onChange:p=>h("descripcion",p.target.value),readOnly:!s,className:"w-full bg-transparent border-none outline-none text-slate-300 text-lg leading-relaxed min-h-[400px] resize-none",placeholder:"Describe the vistas, the smells, and the secrets of this place..."})]})})]})]}):a.jsx("div",{className:"p-20 text-center text-red-500",children:"Location not found in the maps."})},zT=({id:e})=>{const[t,n]=T.useState(null),[r,i]=T.useState(!0),[s,l]=T.useState(!1);T.useEffect(()=>{d()},[e]);const d=async()=>{i(!0);try{const p=await ue.get(`/bd/entidadcolectiva/${e}`);n(p)}catch(p){console.error("Error loading collective:",p)}finally{i(!1)}},u=async()=>{try{await ue.patch("/bd/modificar",{...t,tipoEntidad:"entidadcolectiva"}),l(!1)}catch(p){console.error("Error saving:",p)}},h=(p,m)=>{n(x=>({...x,[p]:m}))};return r?a.jsx("div",{className:"p-20 text-center text-slate-500 animate-pulse",children:"Gathering intelligence..."}):t?a.jsxs("div",{className:"flex h-full overflow-y-auto custom-scrollbar p-8 flex-col gap-8",children:[a.jsxs("header",{className:"flex justify-between items-end",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("span",{className:"text-xs font-bold text-indigo-400 bg-indigo-400/10 px-2 py-0.5 rounded border border-indigo-400/20",children:"COLLECTIVE"}),a.jsx("span",{className:"text-xs font-bold text-slate-400 bg-surface-light px-2 py-0.5 rounded border border-white/5",children:t.tipo||"Organization"})]}),a.jsx("h1",{className:"text-5xl font-manrope font-black text-white tracking-tight",children:t.nombre}),a.jsxs("p",{className:"text-slate-400 mt-2",children:[t.cantidadMiembros||"Unknown"," members"]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Ye,{variant:"secondary",icon:s?"close":"edit",onClick:()=>l(!s),children:s?"Cancel":"Edit Collective"}),s&&a.jsx(Ye,{variant:"primary",icon:"save",onClick:u,children:"Update Dossier"})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-8",children:[a.jsx("div",{className:"col-span-1 space-y-6",children:a.jsxs(Fe,{className:"p-6",children:[a.jsxs("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-4 flex items-center gap-2",children:[a.jsx("span",{className:"material-symbols-outlined text-sm",children:"group_work"})," Group Dynamics"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Scale / Members"}),a.jsx("input",{type:"text",value:t.cantidadMiembros||"",onChange:p=>h("cantidadMiembros",p.target.value),className:"w-full bg-surface-light border border-white/10 rounded px-3 py-2 text-white text-sm",readOnly:!s})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Behavior / Alignment"}),a.jsx("input",{type:"text",value:t.comportamiento||"",onChange:p=>h("comportamiento",p.target.value),className:"w-full bg-surface-light border border-white/10 rounded px-3 py-2 text-white text-sm",readOnly:!s})]})]})]})}),a.jsx("div",{className:"col-span-2 space-y-6",children:a.jsxs(Fe,{className:"p-8",children:[a.jsxs("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-4 flex items-center gap-2",children:[a.jsx("span",{className:"material-symbols-outlined text-sm",children:"history_edu"})," Mandate & History"]}),a.jsx("textarea",{value:t.descripcion||"",onChange:p=>h("descripcion",p.target.value),readOnly:!s,className:"w-full bg-transparent border-none outline-none text-slate-300 text-lg leading-relaxed min-h-[400px] resize-none",placeholder:"Detail the motives, the structure, and the legacy of this group..."})]})})]})]}):a.jsx("div",{className:"p-20 text-center text-red-500",children:"Collective not found in the records."})},LT=()=>a.jsx("div",{className:"flex-1 flex overflow-hidden bg-background-dark font-sans text-slate-300",children:a.jsxs("main",{className:"flex-1 flex flex-col p-12 overflow-y-auto custom-scrollbar relative",children:[a.jsxs("header",{className:"mb-12 space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-slate-500 font-bold text-[10px] tracking-widest uppercase",children:[a.jsx("span",{className:"material-symbols-outlined text-sm",children:"grid_view"}),a.jsx("span",{children:"Universo Alpha"}),a.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_right"}),a.jsx("span",{children:"Galaxia Andrmeda"}),a.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_right"}),a.jsx("span",{className:"text-white",children:"Sistema Solar"})]}),a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"space-y-4 max-w-3xl",children:[a.jsxs("div",{className:"flex items-center gap-3 px-3 py-1 rounded bg-orange-500/10 text-orange-400 border border-orange-500/20 inline-block",children:[a.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"sunny"}),a.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"Sistema Planetario"}),a.jsx("span",{className:"text-[9px] font-bold text-slate-600 tracking-widest ml-2",children:"ID: SYS-SOL-001"})]}),a.jsx("h1",{className:"text-6xl font-manrope font-black text-white tracking-tight",children:"Sistema Solar"}),a.jsx("p",{className:"text-slate-400 text-lg leading-relaxed",children:"Sistema planetario principal ubicado en el Brazo de Orin, hogar de la nica vida biolgica compleja confirmada en el sector galctico Alpha-9."})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{className:"p-3 rounded-2xl bg-white/5 hover:bg-red-500/10 text-slate-500 hover:text-red-400 border border-white/5 transition-all outline-none",children:a.jsx("span",{className:"material-symbols-outlined",children:"delete"})}),a.jsx(Ye,{variant:"primary",icon:"save",children:"Guardar"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[a.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[a.jsxs("section",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"sell"}),a.jsx("h4",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Etiquetas"}),a.jsx("span",{className:"ml-auto text-[9px] font-bold text-slate-600 px-1.5 py-0.5 rounded bg-white/5",children:"3 ACTIVAS"})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx(dm,{label:"Estrella Tipo G",color:"amber",icon:"star"}),a.jsx(dm,{label:"Vida Confirmada",color:"emerald",icon:"tempest"}),a.jsx(dm,{label:"Rico en Agua",color:"cyan",icon:"water_drop"}),a.jsx("button",{className:"size-8 rounded-full border border-dashed border-white/10 flex items-center justify-center text-slate-600 hover:text-white hover:border-white/30 transition-all",children:"+"})]})]}),a.jsxs("section",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"analytics"}),a.jsx("h4",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Atributos Principales"}),a.jsx("button",{className:"ml-auto text-slate-600 hover:text-white transition-colors",children:a.jsx("span",{className:"material-symbols-outlined text-lg",children:"settings"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(bu,{label:"Forma / Estructura",value:"Heliosfrica Estndar",icon:"hive"}),a.jsx(bu,{label:"Composicin",value:"Hidrgeno (74%), Helio (24%)",icon:"experiment"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(bu,{label:"Edad (Aos)",value:"4.6 MM",unit:"Aos"}),a.jsx(bu,{label:"Ciclo Orbital",value:"230 MM",unit:"Aos"})]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"menu_book"}),a.jsx("h4",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Notas de Lore"})]}),a.jsx("textarea",{className:"w-full h-48 bg-white/5 border border-white/5 rounded-[2rem] p-6 text-sm text-slate-400 placeholder:text-slate-700 focus:border-primary/50 outline-none transition-all resize-none leading-relaxed italic shadow-inner",defaultValue:"El sistema contiene un cinturn de asteroides inusualmente denso entre el 4 y 5 planeta. Se teoriza que es el remanente de una colisin planetaria antigua conocida como 'El Gran Impacto' en las escrituras sagradas de los habitantes de Terra."})]})]}),a.jsx("div",{className:"lg:col-span-2",children:a.jsxs(Fe,{className:"h-full border-white/5 bg-surface-dark/40 overflow-hidden flex flex-col shadow-2xl",children:[a.jsxs("header",{className:"p-8 border-b border-white/5 flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"size-10 rounded-xl bg-primary/20 text-primary flex items-center justify-center",children:a.jsx("span",{className:"material-symbols-outlined",children:"hub"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-white text-lg tracking-tight",children:"Contenido Interno (Planetas)"}),a.jsx("p",{className:"text-[10px] font-medium text-slate-500 mt-0.5",children:"Arrastra para reordenar la jerarqua orbital"})]})]}),a.jsxs("div",{className:"px-3 py-1 rounded-full bg-emerald-500/10 text-emerald-400 border border-emerald-500/20 text-[10px] font-black uppercase tracking-widest flex items-center gap-2",children:[a.jsx("div",{className:"size-1.5 rounded-full bg-emerald-500 animate-pulse"}),"8 Entidades"]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-3",children:[a.jsx(El,{name:"Mercurio",type:"Rocoso",stats:"430C | 88 Das",icon:"public"}),a.jsx(El,{name:"Venus",type:"Atmsfera",stats:"462C | 225 Das",icon:"public"}),a.jsx(El,{name:"Tierra",type:"Habitable",stats:"8B Hab | 1 Luna",icon:"public",active:!0}),a.jsx(El,{name:"Marte",type:"Desierto",stats:"-60C | 2 Lunas",icon:"public"}),a.jsx(El,{name:"Cinturn Asteroides",type:"Anillo",stats:">1M Obj",icon:"grain"})]}),a.jsx("div",{className:"p-8 bg-black/20 border-t border-white/5",children:a.jsxs("button",{className:"w-full py-4 rounded-[1.5rem] border-2 border-dashed border-white/10 text-slate-500 hover:text-white hover:border-primary/50 hover:bg-primary/5 transition-all flex items-center justify-center gap-3 font-black uppercase text-[10px] tracking-[0.2em]",children:[a.jsx("span",{className:"material-symbols-outlined",children:"add"}),"Aadir Nueva Entidad"]})})]})})]})]})}),dm=({label:e,color:t,icon:n})=>a.jsxs("div",{className:`px-4 py-1.5 rounded-xl bg-${t}-500/10 text-${t}-400 border border-${t}-500/20 flex items-center gap-2 text-[10px] font-black uppercase tracking-widest shadow-lg`,children:[a.jsx("span",{className:"material-symbols-outlined text-[14px]",children:n}),e]}),bu=({label:e,value:t,unit:n,icon:r})=>a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest text-slate-600 ml-1",children:e}),a.jsxs("div",{className:"w-full bg-white/5 border border-white/5 rounded-2xl px-5 py-3.5 flex items-center justify-between group hover:border-white/10 transition-all",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[r&&a.jsx("span",{className:"material-symbols-outlined text-slate-500 text-lg group-hover:text-primary transition-colors",children:r}),a.jsx("span",{className:"text-sm font-bold text-slate-300",children:t})]}),n&&a.jsx("span",{className:"text-[10px] font-black text-slate-600 uppercase tracking-widest",children:n})]})]}),El=({name:e,type:t,stats:n,icon:r,active:i})=>a.jsxs("div",{className:`group flex items-center gap-6 p-4 rounded-2xl transition-all cursor-pointer ${i?"bg-primary/10 border border-primary/20 shadow-xl":"hover:bg-white/5 border border-transparent"}`,children:[a.jsx("span",{className:"material-symbols-outlined text-slate-700 group-hover:text-slate-500",children:"drag_indicator"}),a.jsx("div",{className:`size-12 rounded-xl flex items-center justify-center ${i?"bg-primary text-white shadow-lg shadow-primary/30":"bg-surface-dark border border-white/5 text-slate-500"}`,children:a.jsx("span",{className:"material-symbols-outlined text-3xl",children:r})}),a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h4",{className:"text-sm font-bold text-white group-hover:text-primary transition-colors",children:e}),a.jsx("span",{className:`text-[8px] font-black px-1.5 py-0.5 rounded uppercase tracking-widest ${i?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-white/5 text-slate-600"}`,children:t})]})}),a.jsx("div",{className:"flex flex-col items-end gap-1",children:a.jsxs("div",{className:"flex items-center gap-1.5 text-slate-500",children:[a.jsx("span",{className:"material-symbols-outlined text-[12px]",children:"analytics"}),a.jsx("span",{className:"text-[10px] font-mono tracking-tight group-hover:text-slate-300",children:n})]})}),a.jsxs("div",{className:"flex gap-2 ml-4",children:[a.jsx("button",{className:"p-2 rounded-lg text-slate-700 hover:text-white hover:bg-white/5 transition-all",children:a.jsx("span",{className:"material-symbols-outlined text-xl",children:"edit_note"})}),i?a.jsx("button",{className:"size-8 rounded-full bg-primary text-white flex items-center justify-center shadow-lg",children:a.jsx("span",{className:"material-symbols-outlined text-lg",children:"arrow_forward"})}):a.jsx("button",{className:"p-2 rounded-lg text-slate-700 hover:text-white hover:bg-white/5 transition-all",children:a.jsx("span",{className:"material-symbols-outlined text-xl",children:"open_in_new"})})]})]}),DT=()=>a.jsx("div",{className:"flex-1 flex overflow-hidden bg-background-dark font-sans text-slate-300",children:a.jsxs("main",{className:"flex-1 flex flex-col p-12 overflow-y-auto custom-scrollbar relative",children:[a.jsxs("header",{className:"mb-12 space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-slate-500 font-bold text-[10px] tracking-widest uppercase",children:[a.jsx("span",{children:"Sistema Solar"}),a.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_right"}),a.jsx("span",{children:"Kepler-186f"}),a.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_right"}),a.jsx("span",{className:"text-white",children:"Territorios"})]}),a.jsxs("div",{className:"flex justify-between items-end",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[a.jsx("h1",{className:"text-6xl font-manrope font-black text-white tracking-tight",children:"Kepler-186f"}),a.jsx("span",{className:"material-symbols-outlined text-4xl text-primary",children:"public"})]}),a.jsx("p",{className:"text-slate-400 text-lg max-w-2xl leading-relaxed",children:"Gestin geopoltica y geogrfica de la superficie planetaria. Administra biomas, asentamientos y recursos estratgicos."})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Ye,{variant:"secondary",icon:"map",children:"Ver Atlas"}),a.jsx(Ye,{variant:"primary",icon:"add",children:"Nuevo Territorio"})]})]})]}),a.jsxs("section",{className:"space-y-8",children:[a.jsxs(Fe,{className:"p-2 flex items-center justify-between border-white/5",children:[a.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[a.jsxs("div",{className:"relative flex-1 max-w-sm",children:[a.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-500 text-sm",children:"search"}),a.jsx("input",{type:"text",placeholder:"Buscar por nombre...",className:"w-full bg-transparent border-none rounded-xl py-2 pl-9 pr-4 text-xs focus:ring-1 focus:ring-primary/30 outline-none transition-all"})]}),a.jsx("div",{className:"w-px h-6 bg-white/5 mx-2"}),a.jsx(um,{label:"Bioma: Todos"}),a.jsx(um,{label:"Poblacin"}),a.jsx(um,{label:"Estado"})]}),a.jsxs("div",{className:"flex items-center gap-1 p-1 bg-white/5 rounded-lg",children:[a.jsx("button",{className:"p-1.5 rounded-md text-slate-500 hover:text-white transition-colors",children:a.jsx("span",{className:"material-symbols-outlined text-lg",children:"format_list_bulleted"})}),a.jsx("button",{className:"p-1.5 rounded-md bg-white/10 text-white shadow-sm",children:a.jsx("span",{className:"material-symbols-outlined text-lg",children:"grid_view"})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[a.jsx(hm,{title:"Nueva Neo-Tokyo",desc:"Metrpolis vertical construida sobre las...",image:"https://lh3.googleusercontent.com/aida-public/AB6AXuAYF5Q6W3o1w1f1",badges:["Capital"],stats:["15M","Templado","Costero"],color:"cyan"}),a.jsx(hm,{title:"Mar de Dunas",desc:"Extensin rida rica en especia slica...",image:"https://lh3.googleusercontent.com/aida-public/AB6AXuBYG6R7X4p2x2g2",stats:["Hostil","rido"],color:"amber"}),a.jsx(hm,{title:"Sanctum Bio-Domo",desc:"Instalacin de investigacin...",image:"https://lh3.googleusercontent.com/aida-public/AB6AXuCZ H7S8Y5q3z3h3",badges:["Ciencia"],stats:["5K","Jungla"],color:"purple"}),a.jsxs("div",{className:"group border-2 border-dashed border-white/5 rounded-[2.5rem] flex flex-col items-center justify-center p-12 gap-4 hover:border-primary/30 hover:bg-primary/5 transition-all cursor-pointer",children:[a.jsx("div",{className:"size-16 rounded-3xl bg-white/5 flex items-center justify-center group-hover:scale-110 transition-transform",children:a.jsx("span",{className:"material-symbols-outlined text-3xl text-slate-600 group-hover:text-primary",children:"add_location_alt"})}),a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-600 group-hover:text-white",children:"Aadir Territorio"})]})]})]})]})}),um=({label:e})=>a.jsxs("button",{className:"flex items-center gap-2 px-3 py-1.5 rounded-xl hover:bg-white/5 transition-all group",children:[a.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 group-hover:text-white",children:e}),a.jsx("span",{className:"material-symbols-outlined text-slate-600 text-[14px]",children:"expand_more"})]}),hm=({title:e,desc:t,image:n,badges:r=[],stats:i=[],color:s})=>a.jsxs("div",{className:"group relative rounded-[2.5rem] overflow-hidden border border-white/5 bg-surface-dark/50 hover:border-white/10 transition-all shadow-2xl",children:[a.jsxs("div",{className:"h-48 overflow-hidden relative",children:[a.jsx("img",{src:n,alt:e,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110 opacity-60 group-hover:opacity-100"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-surface-dark via-transparent to-transparent"}),a.jsx("div",{className:"absolute top-4 right-4 flex gap-2",children:r.map(l=>a.jsxs("span",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest bg-${s==="cyan"?"primary":s==="amber"?"amber-500":"purple-500"}/20 text-${s==="cyan"?"primary":s==="amber"?"amber-400":"purple-400"} border border-white/10 backdrop-blur-md flex items-center gap-1.5`,children:[a.jsx("span",{className:"material-symbols-outlined text-[12px]",children:l==="Capital"?"star":"science"}),l]},l))})]}),a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsxs("header",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-manrope font-black text-white mb-2 group-hover:text-primary transition-colors",children:e}),a.jsx("p",{className:"text-xs text-slate-500 leading-relaxed line-clamp-2",children:t})]}),a.jsx("button",{className:"p-2 text-slate-700 hover:text-white",children:a.jsx("span",{className:"material-symbols-outlined",children:"more_vert"})})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(l=>a.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1 rounded-full bg-white/5 border border-white/5 text-[9px] font-black text-slate-400 uppercase tracking-widest",children:[a.jsx("div",{className:`size-1.5 rounded-full bg-${s==="cyan"?"primary":s==="amber"?"amber-500":"purple-500"}/50`}),l]},l))}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[a.jsxs("button",{className:"flex-1 py-2.5 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 text-[10px] font-black uppercase tracking-widest text-slate-300 flex items-center justify-center gap-2 transition-all",children:[a.jsx("span",{className:"material-symbols-outlined text-sm opacity-50",children:"edit"})," Editar"]}),a.jsxs("button",{className:"flex-1 py-2.5 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 text-[10px] font-black uppercase tracking-widest text-slate-300 flex items-center justify-center gap-2 transition-all",children:[a.jsx("span",{className:"material-symbols-outlined text-sm opacity-50",children:"map"})," Ubicacin"]})]})]})]}),OT=()=>{const{type:e,entityId:t}=zn(),n=()=>{const r=e==null?void 0:e.toLowerCase();switch(r){case"character":case"entidadindividual":return a.jsx(FT,{id:t});case"location":case"zona":return a.jsx(jb,{id:t});case"culture":case"entidadcolectiva":return a.jsx(zT,{id:t});case"universe":case"galaxy":case"system":return a.jsx(LT,{id:t,type:r});case"planet":return a.jsx(DT,{id:t});case"construccion":return a.jsx(jb,{id:t});case"efectos":return a.jsxs("div",{className:"p-8 text-white",children:["Effect/Spell View for ID: ",id]});case"interaccion":return a.jsxs("div",{className:"p-8 text-white",children:["Interaction/Event View for ID: ",id]});case"magic":return a.jsxs("div",{className:"p-8 text-white",children:["Magic System View for ID: ",id]});default:return a.jsxs("div",{className:"p-8 text-white",children:["Unknown Entity Type: ",e]})}};return a.jsx("div",{className:"flex-1 bg-background-dark overflow-hidden",children:n()})},UT=()=>{var Y,ie,ce;const{setRightPanelMode:e,setRightOpen:t,setRightPanelTitle:n}=da(),[r,i]=T.useState([]),[s,l]=T.useState(null),[d,u]=T.useState([]),[h,p]=T.useState(!0);T.useState(!1);const[m,x]=T.useState(!1),[y,S]=T.useState({nombre:"",descripcion:"",fechaTexto:"",ordenAbsoluto:0}),[N,k]=T.useState({nombre:"",descripcion:""}),[w,j]=T.useState(null);T.useState(null);const[v,_]=T.useState("eventos"),[E,A]=T.useState([]),[D,M]=T.useState([]),[I,P]=T.useState(null),L=te.useRef(!1),F=async U=>{try{return(await ue.get("/bd/relacion")).filter(xe=>xe.tipoOrigen==="lineatiempo"&&xe.idOrigen===U||xe.tipoDestino==="lineatiempo"&&xe.idDestino===U).map(xe=>xe.idOrigen===U?xe.idDestino:xe.idOrigen)}catch(X){return console.error(X),[]}},G=async(U,X)=>{const oe=await F(U),pe=X.filter(he=>oe.includes(he.id));A(pe);const xe=X.filter(he=>he.id!==U&&!oe.includes(he.id));M(xe)},R=async U=>{if(!(!s||!U))try{await ue.put("/bd/insertar",{tipoEntidad:"relacion",tipoOrigen:"lineatiempo",idOrigen:s,tipoDestino:"lineatiempo",idDestino:U,descripcion:"Anexo de lnea de tiempo"}),G(s,r)}catch(X){console.error(X)}},$=async U=>{const oe=(await ue.get("/bd/relacion")).find(pe=>pe.tipoOrigen==="lineatiempo"&&pe.idOrigen===s&&pe.idDestino===U||pe.tipoDestino==="lineatiempo"&&pe.idDestino===s&&pe.idOrigen===U);oe&&(await ue.delete(`/bd/relacion/${oe.id}`),G(s,r))};T.useEffect(()=>{e("CUSTOM"),n("Lnea de Tiempo"),t(!0);const U=setInterval(()=>{const X=document.getElementById("architect-right-panel-portal");X&&(P(X),clearInterval(U))},50);return()=>{clearInterval(U),e("NOTES"),n("")}},[]),T.useEffect(()=>{L.current||(L.current=!0,B())},[]),T.useEffect(()=>{s?(Q(s),G(s,r),j(null),S({nombre:"",descripcion:"",fechaTexto:"",ordenAbsoluto:0})):u([])},[s]),T.useEffect(()=>{if(v==="eventos"&&!w){const U=d.length>0?Math.max(...d.map(X=>X.ordenAbsoluto||0)):0;S(X=>({...X,ordenAbsoluto:U+1}))}},[v,d,w]);const B=async()=>{p(!0);try{const U=await ue.get("/bd/lineatiempo"),X=[...new Map(U.map(xe=>[xe.id,xe])).values()],oe=X.find(xe=>xe.esRaiz);X.length===0?(i([]),l(null)):(i(X),s||l(oe?oe.id:X[0].id));const pe=X.filter(xe=>xe.esRaiz);if(pe.length>1){pe.sort((_e,be)=>_e.id-be.id);const xe=pe[0],he=pe.slice(1);he.forEach(_e=>ue.delete(`/bd/lineatiempo/${_e.id}`).catch(console.error));const Oe=X.filter(_e=>_e.id===xe.id||!he.find(be=>be.id===_e.id));i(Oe),s||l(xe.id)}}catch(U){console.error("Failed to load timelines",U)}finally{p(!1)}},Q=async U=>{try{const X=await ue.get(`/timeline/linea/${U}/eventos`);X.sort((oe,pe)=>(oe.ordenAbsoluto||0)-(pe.ordenAbsoluto||0)),u(X)}catch(X){console.error("Failed to load events",X)}},K=async()=>{if(!s||!y.nombre)return;const U={...y,ordenAbsoluto:parseInt(y.ordenAbsoluto)||0};try{w?await ue.put(`/timeline/evento/${w.id}`,{...U,lineaTiempo:{id:s}}):await ue.post("/timeline/evento",{...U,lineaTiempo:{id:s}}),S({nombre:"",descripcion:"",fechaTexto:"",ordenAbsoluto:0}),j(null),Q(s)}catch(X){console.error(X)}},H=U=>{j(U),S({nombre:U.nombre,descripcion:U.descripcion,fechaTexto:U.fechaTexto,ordenAbsoluto:U.ordenAbsoluto||0}),_("eventos"),t(!0)},W=async()=>{if(N.nombre)try{const U=await ue.post("/timeline/linea",{...N,esRaiz:!1});x(!1),k({nombre:"",descripcion:""}),B(),U&&U.id&&l(U.id)}catch(U){console.error(U)}},[z,V]=T.useState({open:!1,type:null,id:null,title:"",message:""}),J=(U,X)=>{X.stopPropagation(),V({open:!0,type:"TIMELINE",id:U,title:"Delete Timeline",message:"Are you sure you want to delete this timeline? All events will be lost."})},ee=(U,X)=>{X.stopPropagation(),V({open:!0,type:"EVENT",id:U,title:"Delete Event",message:"Are you sure you want to delete this event?"})},ae=async()=>{const{type:U,id:X}=z;if(!(!U||!X))try{if(U==="TIMELINE"){if(await ue.delete(`/timeline/linea/${X}`),s===X){const oe=r.filter(pe=>pe.id!==X);l(oe.length>0?oe[0].id:null)}B()}else U==="EVENT"&&(await ue.delete(`/timeline/evento/${X}`),Q(s),w&&w.id===X&&j(null))}catch(oe){console.error(oe),alert("Error deleting item")}},fe=a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"p-4 border-b border-white/5",children:a.jsxs("div",{className:"flex bg-black/40 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>_("eventos"),className:`flex-1 py-2 text-xs font-bold uppercase tracking-wider rounded-md transition-all ${v==="eventos"?"bg-primary text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Eventos"}),a.jsx("button",{onClick:()=>_("anexos"),className:`flex-1 py-2 text-xs font-bold uppercase tracking-wider rounded-md transition-all ${v==="anexos"?"bg-primary text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Anexos"})]})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:[v==="eventos"&&a.jsx("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4",children:a.jsxs("div",{className:"bg-black/20 rounded-xl p-4 border border-white/5",children:[a.jsxs("h3",{className:"text-xs font-black uppercase text-primary mb-4 flex items-center justify-between",children:[w?"Edit Event":"New Event",w&&a.jsx("button",{onClick:()=>{j(null),S({nombre:"",descripcion:"",fechaTexto:"",ordenAbsoluto:d.length+1})},className:"text-[10px] text-slate-500 hover:text-white underline",children:"CANCEL"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-1 block",children:"Title"}),a.jsx("input",{className:"w-full bg-background-dark border border-white/10 rounded-lg p-2 text-sm text-white outline-none focus:border-primary",value:y.nombre,onChange:U=>S({...y,nombre:U.target.value}),placeholder:"Event Name"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-1 block",children:"Date Label"}),a.jsx("input",{className:"w-full bg-background-dark border border-white/10 rounded-lg p-2 text-sm text-white outline-none focus:border-primary",value:y.fechaTexto,onChange:U=>S({...y,fechaTexto:U.target.value}),placeholder:"e.g. Year 500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-1 block",children:"Order (Sort)"}),a.jsx("input",{type:"text",className:"w-full bg-background-dark border border-white/10 rounded-lg p-2 text-sm text-white outline-none focus:border-primary",value:y.ordenAbsoluto,onChange:U=>{const X=U.target.value;/^[-+]?\d*$/.test(X)&&S({...y,ordenAbsoluto:X})},placeholder:"+/- Num"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-1 block",children:"Description"}),a.jsx("textarea",{className:"w-full bg-background-dark border border-white/10 rounded-lg p-2 text-sm text-white outline-none focus:border-primary h-24 resize-none",value:y.descripcion,onChange:U=>S({...y,descripcion:U.target.value}),placeholder:"Describe what happened..."})]}),a.jsx("div",{className:"pt-2",children:a.jsx(Ye,{variant:"primary",onClick:K,className:"w-full justify-center",children:w?"Save Changes":"Create Event"})}),w&&a.jsx("button",{onClick:U=>ee(w.id,U),className:"w-full text-center text-xs text-red-500 hover:text-red-400 py-2 border border-red-500/20 rounded-lg hover:bg-red-500/10 transition-colors",children:"Delete Event"})]})]})}),v==="anexos"&&a.jsx("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4",children:a.jsxs("div",{className:"bg-black/20 rounded-xl p-4 border border-white/5",children:[a.jsx("h3",{className:"text-xs font-black uppercase text-primary mb-4",children:"Annexed Timelines"}),a.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Link other localized timelines to this one to verify chronological consistency."}),a.jsxs("div",{className:"space-y-2 mb-6",children:[E.map(U=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/5 rounded-lg border border-white/5",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"material-symbols-outlined text-xs text-slate-400",children:"timeline"}),a.jsx("span",{className:"text-xs font-bold text-slate-300",children:U.nombre})]}),a.jsx("button",{onClick:()=>$(U.id),className:"text-slate-500 hover:text-red-500",children:a.jsx("span",{className:"material-symbols-outlined text-sm",children:"link_off"})})]},U.id)),E.length===0&&a.jsx("span",{className:"text-xs text-slate-600 italic",children:"No linked timelines."})]}),a.jsx("h4",{className:"text-[10px] font-bold uppercase text-slate-400 mb-2",children:"Available to Link"}),a.jsxs("div",{className:"space-y-1",children:[D.map(U=>a.jsxs("button",{onClick:()=>R(U.id),className:"w-full flex items-center gap-2 p-2 hover:bg-white/5 rounded-lg text-left transition-colors group",children:[a.jsx("span",{className:"material-symbols-outlined text-xs text-green-500/50 group-hover:text-green-500",children:"add_link"}),a.jsx("span",{className:"text-xs text-slate-400 group-hover:text-white",children:U.nombre})]},U.id)),D.length===0&&a.jsx("span",{className:"text-xs text-slate-600 italic",children:"No other timelines available."})]})]})})]})]});return a.jsxs("div",{className:"flex h-screen bg-background-dark text-white overflow-hidden",children:[I&&Fc.createPortal(fe,I),a.jsxs("aside",{className:"w-64 bg-surface-dark border-r border-white/5 flex flex-col p-4 z-20 shrink-0",children:[a.jsxs("header",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xs font-black uppercase tracking-widest text-primary",children:"Timelines"}),a.jsx("button",{onClick:()=>x(!m),className:"text-slate-400 hover:text-white",children:a.jsx("span",{className:"material-symbols-outlined",children:"add"})})]}),m&&a.jsxs("div",{className:"mb-4 p-3 bg-black/20 rounded-xl space-y-2 border border-white/10 animate-in fade-in slide-in-from-left-2",children:[a.jsx("input",{className:"w-full bg-transparent border-b border-white/20 text-sm p-1 outline-none focus:border-primary",placeholder:"Name",value:N.nombre,onChange:U=>k({...N,nombre:U.target.value})}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:W,className:"text-xs font-bold text-primary",children:"CREATE"})})]}),a.jsx("div",{className:"space-y-2 overflow-y-auto flex-1 custom-scrollbar",children:r.map(U=>a.jsxs("div",{onClick:()=>l(U.id),className:`group flex items-center justify-between p-3 rounded-xl cursor-pointer transition-all border ${s===U.id?"bg-primary/10 border-primary text-white shadow-[0_0_15px_rgba(var(--primary-rgb),0.1)]":"bg-transparent border-transparent hover:bg-white/5 text-slate-400"}`,children:[a.jsxs("div",{className:"flex items-center gap-2 truncate",children:[a.jsx("span",{className:`material-symbols-outlined text-sm shrink-0 ${U.esRaiz?"text-amber-400":""}`,children:U.esRaiz?"public":"timeline"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wide truncate",children:U.nombre})]}),a.jsx("button",{onClick:X=>J(U.id,X),className:"opacity-0 group-hover:opacity-100 text-slate-500 hover:text-red-500 transition-opacity",children:a.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]},U.id))})]}),a.jsxs("main",{className:"flex-1 relative flex flex-col h-full overflow-hidden bg-background-dark",children:[a.jsx("div",{className:"h-16 border-b border-white/5 bg-background-dark/80 backdrop-blur flex items-center px-8 z-10 shrink-0",children:a.jsxs("div",{children:[a.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[((Y=r.find(U=>U.id===s))==null?void 0:Y.esRaiz)&&a.jsx("span",{className:"text-amber-400 material-symbols-outlined",children:"star"}),((ie=r.find(U=>U.id===s))==null?void 0:ie.nombre)||"Select Timeline"]}),a.jsx("p",{className:"text-xs text-slate-500",children:(ce=r.find(U=>U.id===s))==null?void 0:ce.descripcion})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-8 relative custom-scrollbar z-10",children:a.jsxs("div",{className:"max-w-2xl mx-auto relative pl-8 border-l-2 border-white/10 space-y-8 pb-32",children:[d.length===0&&a.jsx("div",{className:"text-center text-slate-600 italic py-20",children:"No events yet. Use the right panel to add one."}),d.map((U,X)=>a.jsxs("div",{className:"relative group animate-in fade-in slide-in-from-bottom-4",style:{animationDelay:`${X*50}ms`},children:[a.jsx("div",{className:"absolute top-6 -left-[41px] size-4 rounded-full bg-white/20 border-4 border-background-dark group-hover:bg-primary transition-colors cursor-pointer",onClick:()=>H(U)}),a.jsxs("div",{className:"ml-4 bg-surface-dark/50 border border-white/5 p-5 rounded-2xl hover:border-primary/30 transition-all hover:bg-surface-dark group-hover:translate-x-1 duration-300 relative group/card",children:[a.jsxs("div",{className:"absolute top-3 right-3 opacity-0 group-hover/card:opacity-100 transition-opacity flex gap-1 bg-black/50 rounded-lg backdrop-blur-sm border border-white/5 p-1",children:[a.jsx("button",{onClick:()=>H(U),className:"p-1.5 text-slate-400 hover:text-white hover:bg-white/10 rounded transition-colors",title:"Edit",children:a.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"})}),a.jsx("button",{onClick:oe=>ee(U.id,oe),className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-500/10 rounded transition-colors",title:"Delete",children:a.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]}),a.jsx("div",{className:"flex justify-between items-start",children:a.jsxs("div",{children:[a.jsxs("div",{className:"flex flex-col mb-1",children:[a.jsx("h3",{className:"text-lg font-bold text-white",children:U.nombre}),a.jsx("span",{className:"text-xs font-mono font-bold text-primary opacity-80",children:U.fechaTexto})]}),a.jsx("p",{className:"text-sm text-slate-400 leading-relaxed",children:U.descripcion})]})})]})]},U.id))]})})]}),a.jsx(Lc,{isOpen:z.open,onClose:()=>V({...z,open:!1}),onConfirm:ae,title:z.title,message:z.message,confirmText:"Delete",type:"danger"})]})},$T=({onCancel:e,onCreate:t})=>{const[n,r]=T.useState(1),[i,s]=T.useState("regional"),[l,d]=T.useState("upload");return a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-background-dark/80 backdrop-blur-xl animate-in fade-in duration-300",children:a.jsx("div",{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto no-scrollbar relative animate-in zoom-in-95 duration-500",children:a.jsxs(Fe,{className:"p-0 border-white/10 shadow-[0_0_100px_rgba(0,0,0,0.5)] overflow-hidden",children:[a.jsxs("header",{className:"p-8 border-b border-white/5 flex justify-between items-center bg-white/[0.02]",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"size-12 rounded-2xl bg-primary/20 text-primary flex items-center justify-center",children:a.jsx("span",{className:"material-symbols-outlined text-2xl",children:"add_location_alt"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-manrope font-black text-white tracking-tight",children:"Crear Nuevo Mapa / Zona"}),a.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"Configura los detalles para tu nueva entrada cartogrfica."})]})]}),a.jsx("button",{onClick:e,className:"text-slate-500 hover:text-white transition-colors",children:a.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),a.jsxs("div",{className:"p-12 space-y-12",children:[a.jsxs("section",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:`size-8 rounded-full flex items-center justify-center text-[10px] font-black ${n===1?"bg-primary text-white shadow-lg shadow-primary/30":"bg-white/10 text-slate-500"}`,children:"1"}),a.jsx("h2",{className:"text-sm font-black uppercase tracking-[0.2em] text-white",children:"Identidad y Jerarqua"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 pl-12",children:[a.jsx(GT,{label:"Nombre del Mapa",placeholder:"ej. La Costa de Zafiro"}),a.jsxs("div",{className:"space-y-1.5 row-span-2",children:[a.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-600 ml-1",children:"Descripcin"}),a.jsx("textarea",{placeholder:"Breve descripcin de la geografa, clima o importancia...",className:"w-full h-[120px] bg-white/5 border border-white/5 rounded-2xl p-4 text-sm text-white focus:border-primary/50 outline-none transition-all resize-none"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-600 ml-1",children:"Zona Padre (Opcional)"}),a.jsxs("select",{className:"w-full bg-white/5 border border-white/5 rounded-2xl px-4 py-3 text-sm text-white focus:border-primary/50 outline-none appearance-none",children:[a.jsx("option",{children:"Ninguna (Nivel Superior)"}),a.jsx("option",{children:"Reino de Aethelgard"}),a.jsx("option",{children:"Continente de Aurum"})]}),a.jsx("p",{className:"text-[9px] text-slate-500 italic mt-1 ml-1 text-primary/70",children:"Seleccionar un padre convierte esto en sub-zona."})]})]})]}),a.jsx("div",{className:"h-px w-full bg-white/5"}),a.jsxs("section",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:`size-8 rounded-full flex items-center justify-center text-[10px] font-black ${n===2?"bg-primary text-white shadow-lg shadow-primary/30":"bg-white/10 text-slate-500"}`,children:"2"}),a.jsx("h2",{className:"text-sm font-black uppercase tracking-[0.2em] text-white",children:"Tipo de Mapa"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 pl-12",children:[a.jsx(fm,{active:i==="world",onClick:()=>s("world"),icon:"public",label:"Mapa Mundial",desc:"Continentes, ocanos, escala global."}),a.jsx(fm,{active:i==="regional",onClick:()=>s("regional"),icon:"map",label:"Mapa Regional",desc:"Reinos, provincias, biomas."}),a.jsx(fm,{active:i==="local",onClick:()=>s("local"),icon:"location_city",label:"Ciudad / Local",desc:"Ciudades, mazmorras, mapas de batalla."})]})]}),a.jsx("div",{className:"h-px w-full bg-white/5"}),a.jsxs("section",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:`size-8 rounded-full flex items-center justify-center text-[10px] font-black ${n===3?"bg-primary text-white shadow-lg shadow-primary/30":"bg-white/10 text-slate-500"}`,children:"3"}),a.jsx("h2",{className:"text-sm font-black uppercase tracking-[0.2em] text-white",children:"Fuente del Lienzo"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pl-12",children:[a.jsx(kb,{active:l==="upload",onClick:()=>d("upload"),icon:"cloud_upload",label:"Cargar Archivo de Imagen",desc:"Arrastra y suelta o haz clic para buscar",subdesc:"JPG, PNG, WEBP  MAX 25MB"}),a.jsx(kb,{active:l==="blank",onClick:()=>d("blank"),icon:"brush",label:"Lienzo en Blanco",desc:"Crear un nuevo dibujo desde cero",subdesc:"4096 px x 4096 px"})]})]})]}),a.jsxs("footer",{className:"p-8 bg-white/[0.02] border-t border-white/5 flex justify-between items-center",children:[a.jsx("button",{onClick:e,className:"text-sm font-bold text-slate-500 hover:text-white transition-colors",children:"Cancelar"}),a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-slate-600",children:"Cambios guardados localmente"}),a.jsx(Ye,{variant:"primary",className:"px-10 py-3 shadow-xl",onClick:()=>t(l),children:"Crear Mapa"})]})]})]})})})},GT=({label:e,placeholder:t})=>a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-600 ml-1",children:e}),a.jsx("input",{type:"text",placeholder:t,className:"w-full bg-white/5 border border-white/5 rounded-2xl px-4 py-3 text-sm text-white focus:border-primary/50 transition-all outline-none"})]}),fm=({active:e,onClick:t,icon:n,label:r,desc:i})=>a.jsxs("div",{onClick:t,className:`p-6 rounded-3xl border transition-all cursor-pointer group ${e?"bg-primary/10 border-primary shadow-lg shadow-primary/10":"bg-white/5 border-white/5 hover:border-white/10"}`,children:[a.jsx("div",{className:`size-10 rounded-xl mb-4 flex items-center justify-center transition-all ${e?"bg-primary text-white":"bg-white/5 text-slate-500 group-hover:text-slate-300"}`,children:a.jsx("span",{className:"material-symbols-outlined",children:n})}),a.jsx("h3",{className:`text-sm font-bold mb-1 transition-colors ${e?"text-white":"text-slate-400 group-hover:text-slate-200"}`,children:r}),a.jsx("p",{className:"text-[10px] text-slate-500 leading-relaxed font-medium",children:i})]}),kb=({active:e,onClick:t,icon:n,label:r,desc:i,subdesc:s})=>a.jsxs("div",{onClick:t,className:`p-10 rounded-[2.5rem] border transition-all cursor-pointer group flex flex-col items-center text-center gap-4 ${e?"bg-primary/5 border-primary shadow-lg":"bg-white/[0.02] border-white/5 hover:border-white/10 hover:bg-white/[0.04]"}`,children:[a.jsx("div",{className:`size-16 rounded-[2rem] flex items-center justify-center transition-all ${e?"bg-primary text-white shadow-xl shadow-primary/20":"bg-white/5 text-slate-600 group-hover:text-slate-400"}`,children:a.jsx("span",{className:"material-symbols-outlined text-3xl",children:n})}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("h3",{className:`font-bold transition-colors ${e?"text-white":"text-slate-400"}`,children:r}),a.jsx("p",{className:"text-xs text-slate-500 font-medium",children:i})]}),a.jsx("div",{className:"flex gap-2 mt-2",children:s.split("").map((l,d)=>a.jsx("span",{className:"px-2 py-1 rounded bg-black/20 text-[8px] font-black text-slate-600 tracking-tighter uppercase whitespace-nowrap",children:l.trim()},d))})]}),BT=({mapTitle:e="Reino de Aethelgard",onSave:t,onBack:n})=>{const[r,i]=T.useState(100),[s,l]=T.useState(24),[d,u]=T.useState("#000000"),[h,p]=T.useState("brush"),[m,x]=T.useState(1),[y,S]=T.useState([{id:1,name:"Terreno Base",visible:!0,locked:!1,type:"raster"},{id:2,name:"Ros y Lagos",visible:!0,locked:!1,type:"vector"}]),N=te.useRef(null),[k,w]=T.useState(!1),j=[{id:"select",icon:"near_me"},{id:"brush",icon:"brush"},{id:"eraser",icon:"ink_eraser"},{id:"fill",icon:"format_color_fill"},{id:"measure",icon:"straighten"},{id:"text",icon:"title"}],v=()=>{var F;return(F=N.current)==null?void 0:F.getContext("2d")},_=F=>{const G=y.find($=>$.id===m);if(!G||!G.visible||G.locked)return;const R=v();R&&(w(!0),R.beginPath(),R.moveTo(F.nativeEvent.offsetX,F.nativeEvent.offsetY),R.lineWidth=s,R.lineCap="round",R.lineJoin="round",R.globalAlpha=r/100,h==="eraser"?R.globalCompositeOperation="destination-out":(R.globalCompositeOperation="source-over",R.strokeStyle=d))},E=F=>{if(!k)return;const G=v();G&&(G.lineTo(F.nativeEvent.offsetX,F.nativeEvent.offsetY),G.stroke())},A=()=>{var F;k&&(w(!1),(F=v())==null||F.closePath())},D=F=>{S(G=>G.map(R=>R.id===F?{...R,visible:!R.visible}:R))},M=F=>{S(G=>G.map(R=>R.id===F?{...R,locked:!R.locked}:R))},I=()=>{const F={id:Date.now(),name:`Capa ${y.length+1}`,visible:!0,locked:!1,type:"raster"};S([F,...y]),x(F.id)},P=F=>{y.length<=1||(S(G=>G.filter(R=>R.id!==F)),m===F&&x(y[0].id))},L=()=>{var G;const F=(G=N.current)==null?void 0:G.toDataURL();console.log("Saving Map Data:",F?"Data present":"Empty"),alert("Mapa guardado localmente (Simulado)")};return a.jsxs("div",{className:"flex-1 flex flex-col bg-[#050508] text-slate-300 font-sans h-full overflow-hidden relative",children:[a.jsxs("header",{className:"h-20 flex-none border-b border-white/5 flex items-center justify-between px-8 bg-surface-dark/80 backdrop-blur-md z-30",children:[a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsx("button",{onClick:n,className:"p-2 rounded-xl bg-white/5 hover:bg-white/10 transition-colors",children:a.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),a.jsx("div",{className:"w-px h-8 bg-white/10"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-white tracking-tight",children:e}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"size-1.5 rounded-full bg-primary"}),a.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Guardado localmente"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("button",{onClick:L,className:"flex items-center gap-2 px-5 py-2.5 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 transition-all text-sm font-bold",children:[a.jsx("span",{className:"material-symbols-outlined text-xl",children:"cloud_upload"}),"Guardar"]}),a.jsx(Ye,{variant:"primary",icon:"ios_share",className:"px-6 py-2.5 shadow-lg shadow-primary/20",children:"Exportar"}),a.jsx("div",{className:"size-10 rounded-full bg-gradient-to-br from-primary to-cyan-400 border-2 border-white/10 shadow-lg"})]})]}),a.jsxs("div",{className:"flex-1 flex relative overflow-hidden",children:[a.jsx("aside",{className:"absolute left-8 top-1/2 -translate-y-1/2 z-40",children:a.jsxs(Fe,{className:"p-2 flex flex-col gap-2 rounded-2xl border-white/10 bg-surface-dark/40 backdrop-blur-2xl shadow-2xl",children:[j.map(F=>a.jsx("button",{onClick:()=>p(F.id),className:`size-12 rounded-xl flex items-center justify-center transition-all ${h===F.id?"bg-primary text-white shadow-lg shadow-primary/30":"text-slate-500 hover:text-white hover:bg-white/5"}`,children:a.jsx("span",{className:"material-symbols-outlined text-xl",children:F.icon})},F.id)),a.jsx("div",{className:"w-8 h-px bg-white/10 mx-auto my-1"}),a.jsxs("div",{className:"relative group",children:[a.jsx("input",{type:"color",value:d,onChange:F=>u(F.target.value),className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full"}),a.jsx("div",{className:"size-12 rounded-xl flex items-center justify-center cursor-pointer",children:a.jsx("div",{className:"size-7 rounded-full border-2 border-white/20 shadow-inner group-hover:scale-110 transition-transform",style:{backgroundColor:d}})})]})]})}),a.jsxs("main",{className:"flex-1 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] bg-repeat relative overflow-hidden flex items-center justify-center p-20 no-scrollbar",children:[a.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"radial-gradient(circle, white 1px, transparent 1px)",backgroundSize:"30px 30px"}}),a.jsxs("div",{className:"relative group animate-in zoom-in-95 duration-700",children:[a.jsx("p",{className:"absolute -top-10 left-0 text-[10px] font-black uppercase tracking-[0.2em] text-slate-600",children:"Lienzo: 800x600px  RGB"}),a.jsx("div",{className:"relative bg-white rounded shadow-[0_0_100px_rgba(0,0,0,0.5)] overflow-hidden border border-white/10 cursor-crosshair",children:a.jsx("canvas",{ref:N,width:800,height:600,onMouseDown:_,onMouseMove:E,onMouseUp:A,onMouseLeave:A})})]})]}),a.jsxs("aside",{className:"absolute right-8 top-1/2 -translate-y-1/2 z-40 flex flex-col gap-6 w-80",children:[a.jsxs(Fe,{className:"p-6 space-y-6 rounded-3xl border-white/10 bg-surface-dark/40 backdrop-blur-2xl shadow-2xl",children:[a.jsxs("header",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Propiedades"}),a.jsx("button",{className:"text-slate-600 hover:text-white transition-colors",children:a.jsx("span",{className:"material-symbols-outlined text-sm",children:"settings_input_component"})})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs font-bold text-slate-400",children:"Tamao del Pincel"}),a.jsxs("span",{className:"text-xs font-black text-white",children:[s,"px"]})]}),a.jsx("input",{type:"range",min:"1",max:"100",value:s,onChange:F=>l(F.target.value),className:"w-full accent-primary h-1 bg-white/5 rounded-full appearance-none cursor-pointer"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs font-bold text-slate-400",children:"Opacidad"}),a.jsxs("span",{className:"text-xs font-black text-white",children:[r,"%"]})]}),a.jsx("input",{type:"range",min:"0",max:"100",value:r,onChange:F=>i(F.target.value),className:"w-full accent-primary h-1 bg-white/5 rounded-full appearance-none cursor-pointer"})]})]})]}),a.jsxs(Fe,{className:"p-6 space-y-6 rounded-3xl border-white/10 bg-surface-dark/40 backdrop-blur-2xl shadow-2xl flex-1 max-h-[400px] overflow-hidden flex flex-col",children:[a.jsxs("header",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Capas"}),a.jsx("div",{className:"flex gap-2 text-slate-600",children:a.jsx("button",{onClick:I,className:"hover:text-white transition-colors",children:a.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"})})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar space-y-2",children:y.map(F=>a.jsxs("div",{onClick:()=>x(F.id),className:`flex items-center gap-3 p-3 rounded-2xl transition-all cursor-pointer group select-none ${m===F.id?"bg-primary/10 border border-primary/20":"bg-transparent border border-transparent hover:bg-white/5"}`,children:[a.jsx("button",{onClick:G=>{G.stopPropagation(),D(F.id)},className:`material-symbols-outlined text-lg ${F.visible?"text-slate-500 hover:text-white":"text-slate-700"}`,children:F.locked?"lock":F.visible?"visibility":"visibility_off"}),a.jsx("div",{className:"size-10 rounded-lg bg-surface-light border border-white/5 flex items-center justify-center overflow-hidden",children:a.jsx("span",{className:"material-symbols-outlined opacity-30 text-xl",children:F.type==="raster"?"texture":"water_drop"})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx("p",{className:`text-xs font-bold truncate ${m===F.id?"text-white":"text-slate-400 group-hover:text-slate-200"}`,children:F.name})}),a.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:G=>{G.stopPropagation(),M(F.id)},className:"material-symbols-outlined text-sm text-slate-700 hover:text-white transition-colors",children:F.locked?"lock_open":"lock"}),a.jsx("button",{onClick:G=>{G.stopPropagation(),P(F.id)},className:"material-symbols-outlined text-sm text-red-900/50 hover:text-red-400 transition-colors",children:"delete"})]})]},F.id))})]})]}),a.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 z-40",children:a.jsxs(Fe,{className:"px-6 py-3 flex items-center gap-8 rounded-2xl border-white/10 bg-surface-dark/40 backdrop-blur-2xl shadow-2xl",children:[a.jsxs("div",{className:"flex items-center gap-4 text-slate-500 border-r border-white/10 pr-6",children:[a.jsx("button",{className:"hover:text-white transition-colors",children:a.jsx("span",{className:"material-symbols-outlined",children:"undo"})}),a.jsx("button",{className:"hover:text-white transition-colors opacity-30 cursor-not-allowed",children:a.jsx("span",{className:"material-symbols-outlined",children:"redo"})})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{className:"text-slate-500 hover:text-white transition-colors",children:a.jsx("span",{className:"material-symbols-outlined",children:"remove"})}),a.jsx("span",{className:"text-[10px] font-black text-white w-10 text-center",children:"100%"}),a.jsx("button",{className:"text-slate-500 hover:text-white transition-colors",children:a.jsx("span",{className:"material-symbols-outlined",children:"add"})})]})]})})]})]})},VT=({map:e})=>{const[t,n]=T.useState(null);e!=null&&e.nombre;const r=[{id:1,name:"Torre Carmes",type:"location",x:"45%",y:"42%",color:"bg-primary"},{id:2,name:"Costa de Zafiro",type:"region",x:"55%",y:"35%",color:"bg-cyan-500"},{id:3,name:"Pramos de Hierro",type:"danger",x:"62%",y:"58%",color:"bg-amber-500"}];return a.jsxs("div",{className:"flex-1 flex overflow-hidden bg-background-dark font-sans text-slate-300 relative",children:[a.jsxs("main",{className:"flex-1 overflow-hidden relative group",children:[a.jsxs("div",{className:"absolute inset-4 rounded-[2.5rem] overflow-hidden border border-white/5 shadow-2xl bg-surface-dark",children:[a.jsx("img",{src:"https://images.unsplash.com/photo-1521295121783-8a321d551ad2?auto=format&fit=crop&w=2000&q=80",alt:"Background Map",className:"w-full h-full object-cover opacity-60 mix-blend-luminosity grayscale-[0.2]"}),a.jsx("div",{className:"absolute inset-0",children:r.map(i=>a.jsx("div",{onClick:()=>n(i),className:`absolute size-10 -translate-x-1/2 -translate-y-1/2 cursor-pointer transition-all hover:scale-125 z-10 ${(t==null?void 0:t.id)===i.id?"scale-125":""}`,style:{left:i.x,top:i.y},children:a.jsxs("div",{className:`size-full rounded-2xl ${i.color} border-4 border-background-dark shadow-[0_0_20px_rgba(0,0,0,0.5)] flex items-center justify-center text-white relative group/marker`,children:[a.jsx("span",{className:"material-symbols-outlined text-lg",children:i.type==="location"?"fort":i.type==="region"?"terrain":"skull"}),a.jsx("div",{className:"absolute top-12 left-1/2 -translate-x-1/2 px-3 py-1.5 rounded-lg bg-surface-dark border border-white/10 text-[9px] font-black uppercase tracking-widest text-white whitespace-nowrap opacity-0 group-hover/marker:opacity-100 transition-opacity",children:i.name}),a.jsx("div",{className:`absolute -inset-2 rounded-[1.5rem] opacity-20 animate-ping -z-10 ${i.color}`})]})},i.id))})]}),a.jsx("aside",{className:"absolute left-12 top-1/2 -translate-y-1/2 z-20 flex flex-col gap-4",children:a.jsxs(Fe,{className:"p-2 flex flex-col gap-2 rounded-2xl border-white/10 bg-surface-dark/40 backdrop-blur-2xl shadow-2xl",children:[a.jsx(Pl,{icon:"near_me",active:!0}),a.jsx(Pl,{icon:"location_on"}),a.jsx(Pl,{icon:"brush"}),a.jsx(Pl,{icon:"layers"}),a.jsx("div",{className:"w-8 h-px bg-white/10 mx-auto my-1"}),a.jsx(Pl,{icon:"tune"})]})}),a.jsx("div",{className:"absolute bottom-12 left-12 z-20 px-4 py-2 rounded-xl bg-black/40 border border-white/10 backdrop-blur-md text-[10px] font-black tracking-widest text-slate-400",children:"125%"})]}),a.jsx("aside",{className:`flex-none bg-surface-dark border-l border-white/5 transition-all duration-700 relative z-30 ${t?"w-96 p-8 opacity-100":"w-0 p-0 opacity-0 overflow-hidden"}`,children:t&&a.jsxs("div",{className:"flex flex-col h-full gap-8 animate-in slide-in-from-right-8 duration-500",children:[a.jsxs("header",{className:"space-y-6",children:[a.jsxs("div",{className:"relative aspect-[4/3] rounded-3xl overflow-hidden border border-white/10 shadow-xl group",children:[a.jsx("img",{src:"https://images.unsplash.com/photo-1533154683836-84ea7a0bc310?auto=format&fit=crop&w=500&q=80",alt:"Detail",className:"w-full h-full object-cover grayscale-[0.4] group-hover:grayscale-0 transition-all duration-700"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background-dark via-transparent to-transparent"}),a.jsx("div",{className:"absolute top-4 right-4 flex gap-2",children:a.jsx("button",{onClick:()=>n(null),className:"size-8 rounded-lg bg-black/40 border border-white/10 backdrop-blur-md text-white flex items-center justify-center hover:bg-black/60 transition-colors",children:a.jsx("span",{className:"material-symbols-outlined text-sm",children:"close"})})}),a.jsxs("div",{className:"absolute bottom-4 left-4 flex gap-2",children:[a.jsx("span",{className:"px-3 py-1 rounded bg-primary/20 text-primary border border-primary/20 text-[8px] font-black uppercase tracking-widest backdrop-blur-md",children:"Lugar"}),a.jsx("span",{className:"px-3 py-1 rounded bg-emerald-500/20 text-emerald-400 border border-emerald-500/20 text-[8px] font-black uppercase tracking-widest backdrop-blur-md",children:"Capital"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx("h2",{className:"text-3xl font-manrope font-black text-white tracking-tight leading-none",children:t.name}),a.jsx("button",{className:"text-slate-500 hover:text-white transition-colors p-2 rounded-xl hover:bg-white/5",children:a.jsx("span",{className:"material-symbols-outlined",children:"edit"})})]}),a.jsx("p",{className:"text-sm text-slate-400 leading-relaxed font-manrope",children:"La antigua sede de los Magos de Fuego, erigida sobre la caldera inactiva del Monte Ignis. Sus muros estn imbuidos de magia protectora."})]})]}),a.jsxs("div",{className:"space-y-8 flex-1 overflow-y-auto no-scrollbar",children:[a.jsxs("section",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center px-1",children:[a.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Habitantes Clave"}),a.jsx("button",{className:"text-[10px] font-bold text-primary hover:underline transition-all",children:"Ver todos"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(Cb,{name:"Lyra Ignis",role:"Gran Maga"}),a.jsx(Cb,{name:"Kaelen",role:"Capitn de la Guardia"})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500 px-1",children:"Eventos Relacionados"}),a.jsx(Fe,{className:"p-4 border-white/5 hover:border-white/10 transition-all cursor-pointer group",children:a.jsxs("div",{className:"flex gap-4 items-center",children:[a.jsx("div",{className:"size-10 rounded-xl bg-amber-500/10 text-amber-500 border border-amber-500/20 flex items-center justify-center",children:a.jsx("span",{className:"material-symbols-outlined text-xl",children:"history_edu"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-xs font-bold text-white group-hover:text-primary transition-colors",children:"El Asedio de Ceniza"}),a.jsx("p",{className:"text-[10px] text-slate-500 font-medium",children:"Hace 300 aos"})]})]})})]})]}),a.jsx("footer",{className:"pt-6 border-t border-white/5",children:a.jsx(Ye,{variant:"primary",icon:"auto_stories",className:"w-full py-4 rounded-2xl shadow-xl shadow-primary/20",children:"Abrir en la Biblia"})})]})})]})},Pl=({icon:e,active:t})=>a.jsx("button",{className:`size-12 rounded-xl flex items-center justify-center transition-all ${t?"bg-primary text-white shadow-lg shadow-primary/30":"text-slate-500 hover:text-white hover:bg-white/5"}`,children:a.jsx("span",{className:"material-symbols-outlined text-xl",children:e})}),Cb=({name:e,role:t})=>a.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-2xl bg-white/[0.02] border border-white/5 hover:border-white/10 transition-all cursor-pointer group",children:[a.jsx(yc,{name:e,size:"sm",className:"border-white/10 group-hover:border-primary/50 transition-all"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"text-xs font-bold text-white truncate",children:e}),a.jsx("p",{className:"text-[10px] text-slate-500 font-medium truncate",children:t})]}),a.jsx("span",{className:"material-symbols-outlined text-slate-700 text-sm group-hover:text-white transition-colors",children:"chevron_right"})]}),HT=({maps:e,onSelect:t,onCreateNew:n,onClose:r})=>a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-background-dark/80 backdrop-blur-xl animate-in fade-in duration-300",children:a.jsx("div",{className:"w-full max-w-3xl animate-in zoom-in-95 duration-500",children:a.jsxs(Fe,{className:"overflow-hidden border-white/10 shadow-2xl",children:[a.jsxs("header",{className:"p-6 border-b border-white/5 flex justify-between items-center bg-white/[0.02]",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"material-symbols-outlined text-primary",children:"map"}),a.jsx("h2",{className:"text-xl font-manrope font-black text-white",children:"Cartografa del Proyecto"})]}),a.jsx("button",{onClick:r,className:"text-slate-500 hover:text-white transition-colors",children:a.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),a.jsxs("div",{className:"p-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-[60vh] overflow-y-auto custom-scrollbar",children:[a.jsxs("div",{onClick:n,className:"group p-6 rounded-2xl border-2 border-dashed border-white/5 hover:border-primary/50 hover:bg-primary/5 transition-all cursor-pointer flex flex-col items-center justify-center text-center gap-3",children:[a.jsx("div",{className:"size-12 rounded-full bg-primary/10 text-primary flex items-center justify-center group-hover:scale-110 transition-transform",children:a.jsx("span",{className:"material-symbols-outlined",children:"add"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-bold text-white",children:"Nuevo Mapa"}),a.jsx("p",{className:"text-[10px] text-slate-500 uppercase font-black tracking-tighter",children:"Crear desde cero"})]})]}),e.map(i=>a.jsxs("div",{onClick:()=>t(i),className:"group p-4 rounded-2xl bg-white/5 border border-white/5 hover:border-primary/50 hover:bg-white/10 transition-all cursor-pointer space-y-3",children:[a.jsx("div",{className:"aspect-video rounded-xl bg-surface-light border border-white/5 flex items-center justify-center overflow-hidden",children:a.jsx("span",{className:"material-symbols-outlined text-4xl opacity-20 group-hover:opacity-40 transition-opacity",children:"image"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-bold text-white truncate",children:i.nombre}),a.jsx("p",{className:"text-[10px] text-slate-500 uppercase font-black tracking-tighter",children:"ltima edicin: Reciente"})]})]},i.id))]}),a.jsx("footer",{className:"p-6 bg-white/[0.02] border-t border-white/5 flex justify-end",children:a.jsx("p",{className:"text-[10px] text-slate-600 font-bold uppercase tracking-widest",children:"Selecciona un mapa para cargar el visor"})})]})})}),WT=()=>{const[e,t]=T.useState("viewer"),[n,r]=T.useState([]),[i,s]=T.useState(null),[l,d]=T.useState(!1);T.useEffect(()=>{u()},[]);const u=async()=>{try{const m=(await ue.get("/world-bible/entities")).filter(x=>x.tipoEspecial==="map");r(m),m.length>0&&!i&&s(m[0])}catch(p){console.error("Error loading maps",p)}},h=p=>{p==="blank"?t("editor"):(u(),t("viewer"))};return a.jsxs("div",{className:"flex-1 flex flex-col h-full bg-background-dark overflow-hidden",children:[e==="viewer"&&a.jsxs("div",{className:"flex-1 flex flex-col h-full relative",children:[a.jsx("button",{onClick:()=>d(!0),className:"absolute right-12 bottom-12 z-50 size-16 rounded-3xl bg-primary text-white flex items-center justify-center shadow-2xl shadow-primary/40 hover:scale-110 active:scale-95 transition-all group",children:a.jsx("span",{className:"material-symbols-outlined text-3xl group-hover:rotate-90 transition-transform duration-300",children:"add"})}),a.jsx(VT,{map:i}),l&&a.jsx(HT,{maps:n,onSelect:p=>{s(p),d(!1)},onCreateNew:()=>{d(!1),t("wizard")},onClose:()=>d(!1)})]}),e==="wizard"&&a.jsx($T,{onCancel:()=>t("viewer"),onCreate:h}),e==="editor"&&a.jsx(BT,{onBack:()=>t("viewer"),onSave:()=>t("viewer")})]})},YT=()=>{const[e,t]=T.useState("Loading..."),[n,r]=T.useState({words:0,rules:0,glyphs:0}),[i,s]=T.useState("Standard Tongue");T.useEffect(()=>{l()},[]);const l=async()=>{try{const d=await ue.get("/bd/proyecto-activo");t(d.nombreProyecto);const u=await ue.get("/conlang/stats");r(u);const h=await ue.get("/conlang/lenguas");h&&h.length>0&&s(h[0].nombre)}catch(d){console.error("Error loading conlang data:",d),t("Default Project")}};return a.jsxs("div",{className:"flex-1 flex flex-col h-full bg-[#0a0a0f] text-slate-300 font-sans overflow-y-auto no-scrollbar p-12 lg:p-16 gap-16",children:[a.jsxs("header",{className:"space-y-6",children:[a.jsxs("nav",{className:"flex items-center gap-3 text-[10px] font-black uppercase tracking-widest text-slate-500",children:[a.jsx("span",{children:e}),a.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_right"}),a.jsxs("span",{className:"text-white",children:["Conlang: ",i]})]}),a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"space-y-4 max-w-2xl",children:[a.jsx("h1",{className:"text-6xl font-manrope font-black text-white tracking-tight",children:i}),a.jsxs("p",{className:"text-lg text-slate-400 leading-relaxed",children:["A conlang belonging to ",e,". Manage its lexicon, grammar rules, and writing systems here."]}),a.jsxs("div",{className:"flex gap-4 pt-2",children:[a.jsx("span",{className:"px-3 py-1 rounded bg-emerald-500/10 text-emerald-400 border border-emerald-500/20 text-[9px] font-black uppercase tracking-widest",children:"Complete: 45%"}),a.jsx("span",{className:"px-3 py-1 rounded bg-primary/10 text-primary border border-primary/20 text-[9px] font-black uppercase tracking-widest",children:"Type: Agglutinative"})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3 text-slate-500 border-r border-white/5 pr-6 mr-2",children:[a.jsx("span",{className:"material-symbols-outlined text-sm animate-pulse text-emerald-500",children:"save"}),a.jsx("span",{className:"text-[10px] font-bold",children:"Auto-Saved"}),a.jsx("span",{className:"material-symbols-outlined hover:text-white transition-colors cursor-pointer",children:"dark_mode"})]}),a.jsx(Ye,{variant:"primary",icon:"add",size:"md",children:"Create Element"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-12",children:[a.jsxs("section",{className:"xl:col-span-2 space-y-8",children:[a.jsxs("div",{className:"flex justify-between items-center px-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"material-symbols-outlined text-primary text-2xl",children:"menu_book"}),a.jsx("h3",{className:"text-xl font-bold text-white tracking-tight",children:"Lexicon"})]}),a.jsxs("span",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-widest hover:text-primary transition-all cursor-pointer",children:["View All (",n.words,")"]})]}),a.jsxs(Fe,{className:"p-0 border-white/5 bg-surface-dark/40 overflow-hidden shadow-2xl",children:[a.jsxs("div",{className:"p-4 border-b border-white/5 flex items-center gap-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-slate-600 text-lg",children:"search"}),a.jsx("input",{type:"text",placeholder:"Search word or meaning...",className:"w-full bg-white/5 border border-white/5 rounded-2xl py-3 pl-12 pr-4 text-xs focus:ring-1 focus:ring-primary/30 outline-none transition-all"})]}),a.jsx("button",{className:"size-10 rounded-xl bg-white/5 border border-white/5 flex items-center justify-center text-slate-500 hover:text-white transition-all",children:a.jsx("span",{className:"material-symbols-outlined text-xl",children:"tune"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx(pm,{word:"Ael'or",type:"noun",gender:"neutral",def:"Starlight; specifically the light from the twin moons."}),a.jsx(pm,{word:"Vexi",type:"verb",gender:"transitive",def:"To weave magic; to create something from nothing."}),a.jsx(pm,{word:"Dra'kan",type:"adj",gender:"",def:"Ancient; belonging to the era of dragons."})]}),a.jsx("div",{className:"p-6 bg-black/20 border-t border-white/5",children:a.jsxs("button",{className:"w-full py-4 rounded-3xl border-2 border-dashed border-white/5 text-slate-600 hover:text-white hover:border-primary/50 hover:bg-primary/5 transition-all text-[10px] font-black uppercase tracking-[0.2em] flex items-center justify-center gap-3",children:[a.jsx("span",{className:"material-symbols-outlined",children:"add"}),"Add New Word"]})})]})]}),a.jsxs("section",{className:"space-y-8",children:[a.jsxs("div",{className:"flex justify-between items-center px-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"material-symbols-outlined text-primary text-2xl",children:"architecture"}),a.jsx("h3",{className:"text-xl font-bold text-white tracking-tight",children:"Grammar Rules"})]}),a.jsx("span",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-widest hover:text-primary transition-all cursor-pointer",children:"Manage"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(Eb,{title:"Sentence Structure",status:"active",statusColor:"emerald",desc:"Standard order is SOV (Subject-Object-Verb), but poetry uses VSO for emphasis on action.",tags:["Syntax","Basic"]}),a.jsx(Eb,{title:"Noun Declensions",status:"pending",statusColor:"amber",desc:"Seven cases marked by suffixes. Pluralization shifts the stress to the final syllable.",tags:["Morphology"]}),a.jsxs("button",{className:"w-full h-32 rounded-[2.5rem] border-2 border-dashed border-white/5 flex flex-col items-center justify-center gap-2 text-slate-600 hover:text-white hover:border-primary/30 hover:bg-primary/5 transition-all",children:[a.jsx("span",{className:"material-symbols-outlined",children:"add_circle"}),a.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Define New Rule"})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-12",children:[a.jsxs("section",{className:"space-y-8",children:[a.jsxs("div",{className:"flex justify-between items-center px-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"material-symbols-outlined text-primary text-2xl",children:"draw"}),a.jsx("h3",{className:"text-xl font-bold text-white tracking-tight",children:"Writing System"})]}),a.jsxs("div",{className:"flex gap-2 text-slate-600",children:[a.jsx("button",{className:"p-1 rounded hover:bg-white/5 hover:text-white",children:a.jsx("span",{className:"material-symbols-outlined text-lg",children:"grid_view"})}),a.jsx("button",{className:"p-1 rounded hover:bg-white/5 hover:text-white",children:a.jsx("span",{className:"material-symbols-outlined text-lg",children:"title"})})]})]}),a.jsxs(Fe,{className:"p-8 border-white/5 bg-surface-dark/40 rounded-[3rem] space-y-8 shadow-2xl",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-2xl font-black text-white tracking-tight mb-1",children:"Moon Script"}),a.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Abugida  Left-to-Right"})]}),a.jsx(Ye,{variant:"secondary",size:"sm",className:"bg-primary/10 border-primary/20 text-primary",children:"Open Editor"})]}),a.jsxs("div",{className:"grid grid-cols-6 gap-3",children:[["","","","",""].map(d=>a.jsx("div",{className:"aspect-square rounded-2xl bg-white/5 border border-white/5 flex items-center justify-center text-3xl font-serif text-white hover:bg-white/10 transition-all cursor-pointer",children:d},d)),a.jsx("div",{className:"aspect-square rounded-2xl border-2 border-dashed border-white/5 flex items-center justify-center text-slate-600 hover:border-primary/50 hover:text-white transition-all cursor-pointer",children:a.jsx("span",{className:"material-symbols-outlined",children:"add"})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-[8px] font-black uppercase tracking-widest text-slate-600",children:[a.jsx("span",{children:"Glyph Set"}),a.jsx("span",{children:"24/32 Completed"})]}),a.jsx("div",{className:"h-1.5 w-full bg-white/5 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-primary w-[75%] rounded-full shadow-[0_0_10px_rgba(99,102,242,0.5)]"})})]})]})]}),a.jsxs("section",{className:"space-y-8",children:[a.jsxs("div",{className:"flex items-center gap-3 px-2",children:[a.jsx("span",{className:"material-symbols-outlined text-primary text-2xl",children:"graphic_eq"}),a.jsx("h3",{className:"text-xl font-bold text-white tracking-tight",children:"Translator & Phonology"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[a.jsxs(Fe,{className:"p-8 border-primary/20 bg-primary/5 rounded-[3rem] space-y-6 shadow-2xl shadow-primary/10",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-primary",children:"Live Logographic Stream"}),a.jsx("span",{className:"material-symbols-outlined text-primary animate-pulse",children:"sync_alt"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("input",{type:"text",placeholder:"Source text here...",className:"w-full bg-black/40 border border-white/10 rounded-2xl p-4 text-xs font-bold text-white focus:border-primary/50 outline-none transition-all"}),a.jsxs("div",{className:"h-24 rounded-2xl bg-black/60 border border-white/5 flex items-center justify-center relative overflow-hidden group",children:[a.jsx("span",{className:"text-5xl font-serif text-white opacity-40 group-hover:opacity-100 transition-opacity",children:"   "}),a.jsx("div",{className:"absolute top-2 right-4 text-[7px] font-black uppercase tracking-widest text-slate-700",children:"Rendered Output"})]})]})]}),a.jsxs(Fe,{className:"p-8 border-white/5 bg-surface-dark/40 rounded-[3rem] space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Vowel Inventory"}),a.jsx("button",{className:"text-primary text-lg",children:a.jsx("span",{className:"material-symbols-outlined",children:"add"})})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:["/a/","/e/","/i/","/o/","/u/","/y/"].map(d=>a.jsx("div",{className:"px-3 py-1.5 rounded-xl bg-white/5 border border-white/5 text-[11px] font-mono font-bold text-slate-300 hover:text-white transition-colors cursor-pointer",children:d},d))})]}),a.jsxs(Fe,{className:"p-8 border-white/5 bg-surface-dark/40 rounded-[3rem] space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Vector Symbols"}),a.jsx("button",{className:"text-[8px] font-bold text-primary hover:underline transition-all",children:"Upload SVG"})]}),a.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[[{id:1,icon:"filter_vintage"},{id:2,icon:"auto_awesome"},{id:3,icon:"infinite"}].map(d=>a.jsx("div",{className:"aspect-square rounded-2xl bg-white/5 border border-white/5 flex items-center justify-center text-slate-400 hover:text-white transition-all cursor-pointer",children:a.jsx("span",{className:"material-symbols-outlined text-2xl",children:d.icon})},d.id)),a.jsxs("div",{className:"aspect-square rounded-2xl border-2 border-dashed border-white/5 flex flex-col items-center justify-center text-slate-700 hover:border-primary/50 hover:text-white transition-all cursor-pointer",children:[a.jsx("span",{className:"material-symbols-outlined text-lg",children:"cloud_upload"}),a.jsx("span",{className:"text-[7px] font-bold uppercase mt-1",children:"Add"})]})]})]})]})]})]})]})},pm=({word:e,type:t,gender:n,def:r})=>a.jsxs("div",{className:"p-4 rounded-2xl border border-transparent hover:bg-white/5 hover:border-white/5 transition-all group cursor-pointer relative",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("h4",{className:"text-xl font-manrope font-black text-white group-hover:text-primary transition-colors",children:e}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("span",{className:"text-[9px] font-bold text-slate-600 italic",children:t}),n&&a.jsxs("span",{className:"text-[9px] font-bold text-slate-700 uppercase",children:["(",n,")"]})]})]}),a.jsx("p",{className:"text-sm text-slate-400 leading-relaxed font-manrope",children:r}),a.jsx("button",{className:"absolute right-4 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity p-2 text-slate-600 hover:text-white",children:a.jsx("span",{className:"material-symbols-outlined",children:"edit_note"})})]}),Eb=({title:e,status:t,statusColor:n,desc:r,tags:i})=>a.jsxs(Fe,{className:"p-8 border-white/5 hover:border-white/10 transition-all cursor-pointer group space-y-4",children:[a.jsxs("header",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`size-2 rounded-full bg-${n}-500 shadow-[0_0_10px_rgba(var(--${n}-rgb),0.5)]`}),a.jsx("h4",{className:"font-bold text-white group-hover:text-primary transition-colors",children:e})]}),a.jsx("button",{className:"text-slate-700 hover:text-white transition-colors",children:a.jsx("span",{className:"material-symbols-outlined",children:"more_vert"})})]}),a.jsx("p",{className:"text-[11px] text-slate-500 leading-relaxed font-manrope",children:r}),a.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(s=>a.jsx("span",{className:"px-2 py-0.5 rounded bg-white/5 border border-white/5 text-[8px] font-black uppercase tracking-widest text-slate-600",children:s},s))})]}),KT=()=>a.jsxs("div",{className:"flex-1 flex flex-col h-full bg-[#050B0D] text-[#00E5FF] font-mono overflow-hidden",children:[a.jsxs("header",{className:"h-20 border-b border-[#00E5FF]/20 flex items-center justify-between px-10 bg-black/40 backdrop-blur-xl",children:[a.jsxs("div",{className:"flex items-center gap-10",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[10px] opacity-40 uppercase tracking-[0.4em] font-bold",children:"Datastream_Nav"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"material-symbols-outlined text-2xl",children:"language"}),a.jsx("span",{className:"text-2xl font-black italic tracking-tighter",children:"Chronos Atlas"})]})]}),a.jsxs("div",{className:"flex items-center gap-4 border-l border-[#00E5FF]/20 pl-10",children:[a.jsx("span",{className:"text-3xl font-black tracking-[0.2em] italic opacity-80",children:"DIGITAL RUNE COMPILER"}),a.jsx("div",{className:"px-3 py-1 rounded-sm bg-[#00E5FF]/10 border border-[#00E5FF]/30 text-[10px] font-black uppercase tracking-widest animate-pulse",children:"Data Ready"})]})]}),a.jsxs("div",{className:"flex items-center gap-8",children:[a.jsxs("div",{className:"flex items-center gap-2 opacity-60 hover:opacity-100 transition-opacity cursor-pointer",children:[a.jsx("span",{className:"material-symbols-outlined text-lg",children:"help"}),a.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Protocol"})]}),a.jsxs("button",{className:"flex items-center gap-3 px-6 py-2.5 bg-[#00E5FF] text-black font-black uppercase text-xs tracking-widest rounded-sm hover:shadow-[0_0_20px_rgba(0,229,255,0.4)] transition-all",children:[a.jsx("span",{className:"material-symbols-outlined",children:"save"}),"Commit Data"]}),a.jsx("div",{className:"size-10 rounded-full bg-gradient-to-tr from-[#00E5FF] to-blue-600 border border-white/20 shadow-lg"})]})]}),a.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[a.jsxs("main",{className:"flex-1 flex flex-col p-12 gap-12 overflow-y-auto no-scrollbar relative",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-white/5 overflow-hidden",children:a.jsx("div",{className:"h-full bg-[#00E5FF] w-[64%] shadow-[0_0_10px_#00E5FF]"})}),a.jsxs("section",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"size-2 bg-[#00E5FF] rounded-full shadow-[0_0_10px_#00E5FF]"}),a.jsx("h3",{className:"text-sm font-black uppercase tracking-[0.4em]",children:"Glyph Set (Scan)"})]}),a.jsxs("div",{className:"flex gap-4 opacity-40",children:[a.jsx("span",{className:"material-symbols-outlined text-xl",children:"grid_view"}),a.jsx("span",{className:"material-symbols-outlined text-xl",children:"view_list"})]})]}),a.jsxs("div",{className:"p-10 rounded-sm border border-[#00E5FF]/10 bg-[#00E5FF]/[0.02] grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-6",children:[a.jsx(Tr,{symbol:"",keyLabel:"A"}),a.jsx(Tr,{symbol:"",keyLabel:"B"}),a.jsx(Tr,{symbol:"",keyLabel:"C"}),a.jsx(Tr,{symbol:"",keyLabel:"D",active:!0}),a.jsx(Tr,{}),a.jsx(Tr,{}),a.jsx(Tr,{}),a.jsx(Tr,{}),a.jsx(Tr,{}),a.jsx(Tr,{}),a.jsx("div",{className:"aspect-square rounded shadow-inner border border-dashed border-[#00E5FF]/20 flex items-center justify-center hover:bg-[#00E5FF]/5 transition-colors cursor-pointer group",children:a.jsx("span",{className:"material-symbols-outlined opacity-20 group-hover:opacity-100 transition-opacity",children:"add"})})]}),a.jsxs("div",{className:"flex justify-between items-center text-[10px] font-black uppercase tracking-[0.2em] opacity-40",children:[a.jsx("span",{children:"26 Glyphs Mapped"}),a.jsxs("div",{className:"flex gap-10",children:[a.jsxs("button",{className:"hover:text-[#00E5FF] flex items-center gap-2",children:[a.jsx("span",{className:"material-symbols-outlined text-sm",children:"tune"})," Manage"]}),a.jsxs("button",{className:"hover:text-[#00E5FF] flex items-center gap-2",children:[a.jsx("span",{className:"material-symbols-outlined text-sm",children:"settings_input_component"})," Ranges"]})]})]})]}),a.jsxs("section",{className:"flex-1 flex flex-col gap-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"size-2 bg-[#00E5FF] rounded-full shadow-[0_0_10px_#00E5FF] opacity-40"}),a.jsx("h3",{className:"text-sm font-black uppercase tracking-[0.4em] opacity-40",children:"Live Preview Stream"})]}),a.jsxs("div",{className:"flex-1 rounded-sm border border-[#00E5FF]/10 bg-black/40 flex flex-col p-12 items-center justify-center relative group min-h-[300px]",children:[a.jsx("div",{className:"absolute top-4 left-4 text-[8px] opacity-20 uppercase tracking-widest font-black",children:"Buffer Status: Active"}),a.jsx("textarea",{className:"w-full h-full bg-transparent border-none outline-none text-center text-7xl font-bold tracking-widest text-[#00E5FF]/10 group-hover:text-[#00E5FF]/40 transition-all placeholder:text-[#00E5FF]/5 resize-none italic",placeholder:"Input your data stream here..."}),a.jsxs("div",{className:"absolute bottom-6 right-8 flex gap-6 text-[8px] font-black uppercase tracking-widest opacity-20",children:[a.jsx("span",{children:"48px"}),a.jsx("span",{children:"Regular"}),a.jsx("span",{children:"UTF-8"})]}),a.jsx("div",{className:"absolute inset-x-12 top-1/2 h-px bg-[#00E5FF]/10 -translate-y-1/2 pointer-events-none"})]})]})]}),a.jsxs("aside",{className:"w-[450px] border-l border-[#00E5FF]/10 p-10 flex flex-col gap-10 bg-black/40 backdrop-blur-xl relative z-20",children:[a.jsx("h3",{className:"text-xs font-black uppercase tracking-[0.4em] opacity-60 mb-2",children:"Configuration Matrix"}),a.jsxs(Fe,{className:"p-8 border-[#00E5FF]/20 bg-[#00E5FF]/[0.02] space-y-8 rounded-sm",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("label",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-[#00E5FF]/60 block ml-1",children:"Font Name"}),a.jsx("input",{type:"text",defaultValue:"NEURALINK CIPHER",className:"w-full bg-black/60 border border-[#00E5FF]/30 px-6 py-4 text-xs font-black text-[#00E5FF] focus:border-[#00E5FF] outline-none transition-all tracking-widest uppercase italic"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("label",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-[#00E5FF]/60 block ml-1",children:"Author / Metadata"}),a.jsx("input",{type:"text",placeholder:"YOUR SYNTHETIC ID",className:"w-full bg-black/60 border border-[#00E5FF]/30 px-6 py-4 text-xs font-black text-[#00E5FF] focus:border-[#00E5FF] outline-none transition-all tracking-widest uppercase italic"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("label",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-[#00E5FF]/60 block ml-1",children:"Format"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx("button",{className:"py-4 border border-[#00E5FF] bg-[#00E5FF]/10 text-[#00E5FF] text-xs font-black tracking-widest shadow-[0_0_15px_rgba(0,229,255,0.2)]",children:".TTF"}),a.jsx("button",{className:"py-4 border border-[#00E5FF]/20 text-[#00E5FF]/40 text-xs font-black tracking-widest hover:border-[#00E5FF]/40 transition-all",children:".OTF"})]})]}),a.jsxs("div",{className:"pt-4 space-y-6",children:[a.jsx(Pb,{label:"Ligatures",active:!0}),a.jsx(Pb,{label:"Kerning",active:!0})]}),a.jsxs("button",{className:"w-full py-6 mt-6 bg-gradient-to-r from-blue-600 to-fuchsia-500 text-white font-black uppercase text-xs tracking-[0.3em] flex items-center justify-center gap-4 hover:shadow-[0_0_30px_rgba(255,0,255,0.3)] transition-all animate-pulse",children:[a.jsx("span",{className:"material-symbols-outlined text-lg",children:"download"}),"Compile & Download"]})]}),a.jsxs("div",{className:"flex-1 flex flex-col gap-6 opacity-30 pointer-events-none",children:[a.jsxs("div",{className:"flex justify-between text-[10px] uppercase font-black",children:[a.jsx("span",{children:"Compiler Logs"}),a.jsx("span",{children:"V2.0.4"})]}),a.jsxs("div",{className:"flex-1 border border-[#00E5FF]/10 bg-black/20 p-6 flex flex-col font-mono text-[9px] gap-2 overflow-hidden",children:[a.jsx("p",{children:"[SCN] Initializing Glyph Buffer..."}),a.jsx("p",{children:"[MAP] Vector data detected for U+0394"}),a.jsx("p",{children:"[SYS] Memory allocation optimized"}),a.jsx("p",{className:"animate-pulse",children:"_"})]})]})]})]})]}),Tr=({symbol:e,keyLabel:t,active:n})=>a.jsxs("div",{className:`aspect-square rounded border transition-all cursor-pointer flex items-center justify-center relative group ${n?"bg-[#00E5FF]/20 border-[#00E5FF] shadow-[0_0_20px_rgba(0,229,255,0.3)]":"bg-black/40 border-[#00E5FF]/10 hover:border-[#00E5FF]/40"}`,children:[a.jsx("span",{className:`text-3xl font-serif ${n?"text-white":"opacity-20 group-hover:opacity-60"}`,children:e||"..."}),t&&a.jsx("span",{className:`absolute top-1 right-1 text-[8px] font-black uppercase ${n?"text-[#00E5FF]/80":"opacity-20"}`,children:t})]}),Pb=({label:e,active:t})=>a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest opacity-60",children:e}),a.jsx("button",{className:`w-12 h-6 rounded-full p-1 transition-colors relative ${t?"bg-[#00E5FF]/40":"bg-white/5"}`,children:a.jsx("div",{className:`size-4 rounded-full bg-[#00E5FF] shadow-[0_0_10px_#00E5FF] transition-transform ${t?"translate-x-6":"translate-x-0"}`})})]}),XT=({onBack:e,onSave:t})=>{const[n,r]=T.useState(4),[i,s]=T.useState("curve"),[l,d]=T.useState(1),u=[{id:"select",icon:"near_me"},{id:"curve",icon:"gesture"},{id:"eraser",icon:"ink_eraser"},{id:"line",icon:"horizontal_rule"},{id:"shape",icon:"pentagon"},{id:"text",icon:"title"}],h=[{id:1,name:"Trazo Principal",type:"Vector",locked:!0,visible:!0},{id:2,name:"Detalles Secundarios",type:"Vector",locked:!0,visible:!0},{id:3,name:"Boceto Ref.",type:"Imagen (Raster)",locked:!0,visible:!1}];return a.jsxs("div",{className:"flex-1 flex flex-col bg-[#0a0a0f] text-slate-300 font-sans h-full overflow-hidden relative",children:[a.jsxs("header",{className:"h-20 flex-none border-b border-white/5 flex items-center justify-between px-8 bg-surface-dark/80 backdrop-blur-md z-30",children:[a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsx("button",{onClick:e,className:"p-2 rounded-xl bg-white/5 hover:bg-white/10 transition-colors",children:a.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),a.jsx("div",{className:"w-px h-8 bg-white/10"}),a.jsxs("div",{children:[a.jsxs("nav",{className:"flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-slate-500 mb-0.5",children:[a.jsx("span",{children:"Idiomas"}),a.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_right"}),a.jsx("span",{className:"text-white",children:"Editor Grfico"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex items-center gap-4 text-slate-500",children:[a.jsx("button",{className:"hover:text-white transition-colors",children:a.jsx("span",{className:"material-symbols-outlined text-xl",children:"undo"})}),a.jsx("button",{className:"hover:text-white transition-colors",children:a.jsx("span",{className:"material-symbols-outlined text-xl",children:"redo"})})]}),a.jsx("div",{className:"w-px h-4 bg-white/10 mx-2"}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{className:"p-1 rounded hover:bg-white/5 text-slate-500 hover:text-white",children:a.jsx("span",{className:"material-symbols-outlined text-lg",children:"grid_on"})}),a.jsx("button",{className:"p-1 rounded bg-white/10 text-primary",children:a.jsx("span",{className:"material-symbols-outlined text-sm",children:"hub"})})]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("button",{className:"flex items-center gap-2 px-6 py-2.5 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 transition-all text-xs font-black uppercase tracking-widest text-slate-400",children:[a.jsx("span",{className:"material-symbols-outlined text-lg",children:"download"}),"Exportar SVG"]}),a.jsx(Ye,{variant:"primary",icon:"save",className:"px-8 py-3 shadow-xl shadow-primary/30",onClick:t,children:"Guardar Glifo"}),a.jsx("div",{className:"size-10 rounded-full bg-gradient-to-br from-primary to-orange-400 border-2 border-white/10 shadow-lg ml-2"})]})]}),a.jsxs("div",{className:"flex-1 flex relative overflow-hidden",children:[a.jsxs("aside",{className:"h-full w-20 flex-none border-r border-white/5 bg-surface-dark/40 backdrop-blur-xl flex flex-col items-center py-6 gap-2 z-40",children:[u.map(p=>a.jsx("button",{onClick:()=>s(p.id),className:`size-12 rounded-2xl flex items-center justify-center transition-all ${i===p.id?"bg-primary text-white shadow-lg shadow-primary/30":"text-slate-600 hover:text-white hover:bg-white/5"}`,children:a.jsx("span",{className:"material-symbols-outlined text-2xl",children:p.icon})},p.id)),a.jsx("div",{className:"flex-1"}),a.jsx("button",{className:"size-12 rounded-2xl flex items-center justify-center text-slate-600 hover:text-white transition-all",children:a.jsx("span",{className:"material-symbols-outlined text-2xl",children:"add_photo_alternate"})}),a.jsx("button",{className:"size-12 rounded-2xl flex items-center justify-center text-slate-600 hover:text-white transition-all",children:a.jsx("span",{className:"material-symbols-outlined text-2xl",children:"settings"})})]}),a.jsxs("main",{className:"flex-1 bg-[#050508] relative overflow-hidden flex items-center justify-center no-scrollbar",children:[a.jsx("div",{className:"absolute inset-x-20 top-1/2 h-px bg-red-500/20 pointer-events-none"}),a.jsxs("div",{className:"relative group animate-in zoom-in-95 duration-700",children:[a.jsx("div",{className:"absolute inset-x-0 top-10 h-px bg-white/10"}),a.jsx("div",{className:"absolute inset-x-0 bottom-10 h-px bg-white/10"}),a.jsxs("div",{className:"w-[600px] h-[600px] border border-white/5 rounded-3xl bg-black/40 flex items-center justify-center relative overflow-hidden",children:[a.jsxs("svg",{width:"400",height:"400",className:"drop-shadow-[0_0_20px_rgba(99,102,242,0.5)] scale-125",children:[a.jsx("circle",{cx:"200",cy:"230",r:"100",fill:"none",stroke:"#6366f1",strokeWidth:"6",strokeLinecap:"round"}),a.jsx("line",{x1:"200",y1:"230",x2:"200",y2:"380",stroke:"#6366f1",strokeWidth:"6",strokeLinecap:"round"}),a.jsx("circle",{cx:"200",cy:"230",r:"4",fill:"white"}),a.jsx("rect",{x:"196",y:"376",width:"8",height:"8",fill:"white"}),a.jsx("rect",{x:"96",y:"226",width:"8",height:"8",fill:"#6366f1"}),a.jsx("rect",{x:"296",y:"226",width:"8",height:"8",fill:"#6366f1"}),a.jsx("rect",{x:"136",y:"160",width:"6",height:"6",fill:"#6366f1",className:"opacity-40"}),a.jsx("rect",{x:"256",y:"160",width:"6",height:"6",fill:"#6366f1",className:"opacity-40"})]}),a.jsx("div",{className:"absolute top-[160px] left-[136px] size-1 border border-primary/40 border-dashed w-[20px] h-[100px] pointer-events-none"}),a.jsx("div",{className:"absolute top-[160px] right-[136px] size-1 border border-primary/40 border-dashed w-[20px] h-[100px] pointer-events-none"})]})]}),a.jsx("div",{className:"absolute bottom-10 left-1/2 -translate-x-1/2",children:a.jsxs(Fe,{className:"px-6 py-2.5 flex items-center gap-6 rounded-2xl border-white/10 bg-surface-dark/40 backdrop-blur-2xl shadow-2xl",children:[a.jsx("button",{className:"text-slate-500 hover:text-white transition-colors",children:a.jsx("span",{className:"material-symbols-outlined text-lg",children:"remove"})}),a.jsx("span",{className:"text-[10px] font-black text-white w-12 text-center uppercase tracking-widest",children:"120%"}),a.jsx("button",{className:"text-slate-500 hover:text-white transition-colors",children:a.jsx("span",{className:"material-symbols-outlined text-lg",children:"add"})})]})})]}),a.jsxs("aside",{className:"w-96 flex-none flex flex-col p-10 gap-10 bg-surface-dark/20 backdrop-blur-xl border-l border-white/5 z-40 overflow-y-auto no-scrollbar",children:[a.jsxs("section",{className:"space-y-6",children:[a.jsxs("header",{className:"flex justify-between items-center group cursor-pointer",children:[a.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Propiedades"}),a.jsx("span",{className:"material-symbols-outlined text-slate-700 text-sm",children:"more_horiz"})]}),a.jsxs(Fe,{className:"p-8 border-white/5 bg-surface-dark/40 rounded-[2rem] space-y-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs font-bold text-slate-400",children:"Grosor de Trazo"}),a.jsxs("span",{className:"px-2 py-0.5 rounded bg-white/5 text-[10px] font-black text-white",children:[n,"px"]})]}),a.jsx("input",{type:"range",min:"1",max:"20",value:n,onChange:p=>r(p.target.value),className:"w-full accent-primary h-1 bg-white/5 rounded-full appearance-none cursor-pointer"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-600 block ml-1",children:"Color / Relleno"}),a.jsxs("div",{className:"flex items-center gap-4 bg-black/40 rounded-2xl p-4 border border-white/5",children:[a.jsx("div",{className:"size-10 rounded-full bg-primary shadow-[0_0_15px_rgba(99,102,242,0.4)] border-2 border-white/20"}),a.jsx("input",{type:"text",defaultValue:"#2F2CED",className:"bg-transparent border-none outline-none text-xs font-mono text-slate-300 w-full"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-600 block ml-1",children:"Terminacin (Cap)"}),a.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[a.jsx(mm,{icon:"square"}),a.jsx(mm,{icon:"circle",active:!0}),a.jsx(mm,{icon:"rectangle"})]})]}),a.jsxs("button",{className:"w-full py-4 rounded-2xl bg-white/5 border border-white/5 text-[10px] font-black uppercase tracking-widest text-slate-300 flex items-center justify-center gap-3 hover:bg-white/10 transition-all",children:[a.jsx("span",{className:"material-symbols-outlined text-lg",children:"gesture"}),"Suavizar Trazo"]})]})]}),a.jsxs("section",{className:"flex-1 flex flex-col gap-6",children:[a.jsxs("header",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Capas"}),a.jsx("button",{className:"p-1 rounded bg-white/5 text-slate-500 hover:text-white transition-all",children:a.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"})})]}),a.jsx("div",{className:"space-y-3 overflow-y-auto no-scrollbar flex-1",children:h.map(p=>a.jsxs("div",{onClick:()=>d(p.id),className:`flex items-center gap-4 p-4 rounded-2xl transition-all cursor-pointer group ${l===p.id?"bg-primary/10 border border-primary/20":"bg-white/[0.02] border border-white/5 opacity-60 hover:opacity-100 hover:border-white/10"}`,children:[a.jsx("button",{className:"material-symbols-outlined text-sm text-slate-500 hover:text-white",children:p.visible?"visibility":"visibility_off"}),a.jsx("div",{className:"size-10 rounded-xl bg-black border border-white/10 flex items-center justify-center",children:a.jsx("span",{className:"material-symbols-outlined text-slate-600 group-hover:text-primary transition-colors text-xl",children:p.type.includes("Vector")?"timeline":"image"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"text-xs font-bold text-white truncate",children:p.name}),a.jsx("p",{className:"text-[9px] text-slate-600 font-bold uppercase tracking-widest",children:p.type})]}),a.jsx("button",{className:"material-symbols-outlined text-slate-700 text-sm",children:"lock"})]},p.id))}),a.jsxs("div",{className:"flex gap-4 p-3 rounded-2xl bg-black/20 border border-white/5",children:[a.jsx("button",{className:"flex-1 p-2 rounded-xl hover:bg-white/5 text-slate-700 hover:text-white transition-all",children:a.jsx("span",{className:"material-symbols-outlined text-xl",children:"delete"})}),a.jsx("button",{className:"flex-1 p-2 rounded-xl hover:bg-white/5 text-slate-700 hover:text-white transition-all",children:a.jsx("span",{className:"material-symbols-outlined text-xl",children:"content_copy"})}),a.jsx("button",{className:"flex-1 p-2 rounded-xl hover:bg-white/5 text-slate-700 hover:text-white transition-all",children:a.jsx("span",{className:"material-symbols-outlined text-xl",children:"folder"})})]})]}),a.jsxs("div",{className:"p-6 rounded-[2rem] bg-gradient-to-br from-primary/20 to-orange-500/20 border border-white/10 space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"material-symbols-outlined text-primary",children:"auto_fix_high"}),a.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-white",children:"Vectorizacin Inteligente"})]}),a.jsx("p",{className:"text-[10px] text-slate-500 leading-relaxed font-manrope",children:"Arrastra una imagen para convertirla automticamente en nodos editables."}),a.jsx(Ye,{variant:"primary",size:"sm",className:"w-full text-[9px] py-3 rounded-xl shadow-lg",children:"Importar y Procesar"})]})]})]})]})},mm=({icon:e,active:t})=>a.jsx("button",{className:`py-4 rounded-xl border transition-all flex items-center justify-center ${t?"bg-primary/20 border-primary shadow-lg shadow-primary/20":"bg-white/5 border-white/5 hover:border-white/10"}`,children:a.jsx("span",{className:`material-symbols-outlined text-lg ${t?"text-white":"text-slate-600"}`,children:e})}),QT=()=>{const[e,t]=T.useState("hub");return a.jsxs("div",{className:"flex-1 flex flex-col h-full bg-[#050508] overflow-hidden",children:[e==="hub"&&a.jsxs("div",{className:"flex-1 flex flex-col h-full relative",children:[a.jsx("button",{onClick:()=>t("foundry"),className:"absolute right-12 bottom-12 z-50 size-16 rounded-3xl bg-primary text-white flex items-center justify-center shadow-2xl shadow-primary/40 hover:scale-110 active:scale-95 transition-all group",title:"Glyph Foundry",children:a.jsx("span",{className:"material-symbols-outlined text-3xl group-hover:rotate-12 transition-transform duration-300",children:"font_download"})}),a.jsx(YT,{onOpenEditor:()=>t("editor")})]}),e==="foundry"&&a.jsx(KT,{onBack:()=>t("hub")}),e==="editor"&&a.jsx(XT,{onBack:()=>t("hub"),onSave:()=>t("hub")})]})},qT=()=>{const[e,t]=T.useState(null),[n,r]=T.useState([]),[i,s]=T.useState(0),[l,d]=T.useState(!1),[u,h]=T.useState({top:0,left:0}),[p,m]=T.useState([]),[x,y]=T.useState(!1),S=T.useRef(null);T.useEffect(()=>{N(),w()},[]);const N=async()=>{try{let L=(await ue.get("/escritura/cuadernos"))[0];L||(L=await ue.post("/escritura/cuaderno",{titulo:"Chronicle"})),t(L),k(L.id)}catch(P){console.error("Error loading notebook:",P)}},k=async P=>{try{const L=await ue.get(`/escritura/cuaderno/${P}/hojas`);r(L)}catch(L){console.error("Error loading pages:",L)}},w=async()=>{try{const P=await ue.get("/bd/entidadindividual"),L=await ue.get("/bd/zona"),F=await ue.get("/bd/entidadcolectiva");m([...P.map(G=>({id:G.id,name:G.nombre,type:"Character"})),...L.map(G=>({id:G.id,name:G.nombre,type:"Location"})),...F.map(G=>({id:G.id,name:G.nombre,type:"Item"}))])}catch(P){console.error("Error loading entities:",P)}},j=P=>{const L=[...n];L[i].contenido=P,r(L),S.current&&clearTimeout(S.current),S.current=setTimeout(()=>{v(L[i])},1500)},v=async P=>{y(!0);try{await ue.put(`/escritura/hoja/${P.id}`,{contenido:P.contenido})}catch(L){console.error("Error saving page:",L)}finally{y(!1)}},_=P=>{if(P.key==="@"){const L=P.target.getBoundingClientRect();h({top:L.top+20,left:Math.min(L.left+50,window.innerWidth-300)}),d(!0)}else P.key==="Escape"&&d(!1)},E=P=>{const L=n[i].contenido;j(L+P+" "),d(!1)},A=()=>{i<n.length-1?s(P=>P+1):D()},D=async()=>{try{const P=await ue.post(`/escritura/cuaderno/${e.id}/hoja`,{});r([...n,P]),s(n.length)}catch(P){console.error("Error creating page:",P)}},M=n[i]||{contenido:"",numeroPagina:1},I=n[i+1];return a.jsxs("div",{className:"flex-1 flex flex-col h-full bg-[#050508] relative overflow-hidden",children:[a.jsxs("header",{className:"h-14 border-b border-white/5 bg-surface-dark/40 backdrop-blur-md flex items-center justify-between px-8 py-2",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{className:"p-2 rounded-lg hover:bg-white/5 text-slate-400 hover:text-white transition-colors",children:a.jsx("span",{className:"material-symbols-outlined text-xl",children:"format_bold"})}),a.jsx("button",{className:"p-2 rounded-lg hover:bg-white/5 text-slate-400 hover:text-white transition-colors",children:a.jsx("span",{className:"material-symbols-outlined text-xl",children:"format_italic"})}),a.jsx("button",{className:"p-2 rounded-lg hover:bg-white/5 text-slate-400 hover:text-white transition-colors",children:a.jsx("span",{className:"material-symbols-outlined text-xl",children:"link"})}),a.jsx("div",{className:"w-px h-6 bg-white/10 mx-2"}),a.jsxs("button",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-white/5 text-[10px] font-black uppercase tracking-widest text-slate-300 hover:bg-white/10 transition-all",children:[a.jsx("span",{className:"material-symbols-outlined text-sm",children:"auto_stories"}),"Book View"]})]}),a.jsx("div",{className:"flex items-center gap-6 text-[10px] font-black uppercase tracking-[0.2em] text-slate-600",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`size-1.5 rounded-full ${x?"bg-amber-500 animate-pulse":"bg-emerald-500"}`}),x?"SAVING...":"SYNCED"]})})]}),a.jsx("main",{className:"flex-1 overflow-y-auto no-scrollbar py-12 px-8 flex justify-center bg-[url('https://grainy-gradients.vercel.app/noise.svg')] bg-repeat",children:a.jsxs("div",{className:"w-full max-w-4xl flex items-stretch gap-1 bg-surface-dark/40 rounded-[2.5rem] border border-white/5 shadow-[0_50px_100px_-20px_rgba(0,0,0,0.5)] overflow-hidden relative group",children:[a.jsx("div",{className:"absolute left-1/2 top-0 bottom-0 w-8 -translate-x-1/2 bg-gradient-to-r from-transparent via-black/40 to-transparent z-10 pointer-events-none"}),a.jsxs("article",{className:"flex-1 bg-white/[0.02] p-16 relative border-r border-white/5 flex flex-col gap-8",children:[a.jsxs("header",{className:"flex justify-between items-center opacity-30",children:[a.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:(e==null?void 0:e.titulo)||"Untitled"}),a.jsxs("span",{className:"text-[10px] font-black uppercase tracking-widest",children:["Sheet ",M.numeroPagina]})]}),a.jsxs("div",{className:"flex-1 flex flex-col",children:[M.numeroPagina===1?a.jsx("h1",{className:"text-4xl font-manrope font-black text-white mb-12 tracking-tight",children:(e==null?void 0:e.titulo)||"The Stars We Inherit"}):null,a.jsx("textarea",{className:"flex-1 bg-transparent border-none outline-none resize-none text-slate-300 font-serif leading-loose text-lg placeholder:text-slate-700 custom-scrollbar",placeholder:"Once upon a time in the Nebula clusters...",value:M.contenido,onChange:P=>j(P.target.value),onKeyDown:_})]})]}),a.jsxs("article",{className:"flex-1 bg-white/[0.01] p-16 relative flex flex-col gap-8",children:[a.jsxs("header",{className:"flex justify-between items-center opacity-30",children:[a.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Workspace"}),a.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Viewer"})]}),a.jsx("div",{className:"flex-1 flex flex-col opacity-60",children:I?a.jsx("p",{className:"font-serif leading-loose text-lg select-none text-slate-500 whitespace-pre-wrap line-clamp-[20]",children:I.contenido||"This page is currently empty."}):a.jsx("p",{className:"font-serif leading-loose text-lg select-none pointer-events-none italic text-slate-500",children:"This is the end of the current manuscript. Navigating forward will create a new sheet."})})]}),a.jsx("div",{className:"absolute inset-y-0 left-0 w-20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx("button",{onClick:()=>s(P=>Math.max(0,P-1)),className:"size-12 rounded-full bg-black/40 border border-white/10 backdrop-blur-md text-white flex items-center justify-center hover:bg-black/60 transition-all -ml-4 shadow-xl",children:a.jsx("span",{className:"material-symbols-outlined",children:"chevron_left"})})}),a.jsx("div",{className:"absolute inset-y-0 right-0 w-20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx("button",{onClick:A,className:"size-12 rounded-full bg-black/40 border border-white/10 backdrop-blur-md text-white flex items-center justify-center hover:bg-black/60 transition-all -mr-4 shadow-xl",children:a.jsx("span",{className:"material-symbols-outlined",children:"chevron_right"})})})]})}),l&&a.jsxs(Fe,{className:"absolute z-50 w-64 p-2 rounded-2xl border-primary/30 shadow-2xl shadow-primary/20 bg-surface-dark/90 backdrop-blur-xl animate-in fade-in zoom-in-95 duration-200",style:{top:u.top,left:u.left},children:[a.jsx("header",{className:"px-3 py-2 border-b border-white/5 mb-1",children:a.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-slate-500",children:"Reference Entity"})}),a.jsx("div",{className:"space-y-1",children:p.map(P=>a.jsxs("button",{onClick:()=>E(P.name),className:"w-full flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-primary/20 text-xs transition-all text-left",children:[a.jsx("span",{className:"material-symbols-outlined text-primary text-sm",children:P.type==="Character"?"person":P.type==="Location"?"location_on":"diamond"}),a.jsx("span",{className:"flex-1 font-bold text-slate-200",children:P.name}),a.jsx("span",{className:"text-[8px] font-black text-slate-600 uppercase tracking-widest",children:P.type})]},P.id))})]}),a.jsxs("footer",{className:"h-10 border-t border-white/5 bg-background-dark/80 px-8 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-6 text-[9px] font-black uppercase tracking-widest text-slate-600",children:[a.jsxs("span",{children:["Words: ",M.contenido.split(/\s+/).filter(Boolean).length]}),a.jsxs("span",{children:["Characters: ",M.contenido.length]})]}),a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("span",{className:"text-[9px] font-black uppercase tracking-widest text-primary",children:["Sheet ",M.numeroPagina," of ",n.length]})})]})]})};function ZT(){const{id:e}=zn();Fn();const[t,n]=T.useState([]),[r,i]=T.useState(!0),[s,l]=T.useState(null);T.useEffect(()=>{d()},[e]);const d=async()=>{try{i(!0);const p=await ue.get("/api/papelera/items");n(p),l(null)}catch(p){console.error("Error loading trash:",p),l("Failed to load trash items.")}finally{i(!1)}},u=async(p,m)=>{try{await ue.post(`/api/papelera/restaurar/${p}/${m}`),d()}catch(x){console.error("Restoration failed",x)}},h=async(p,m)=>{if(window.confirm("Are you sure you want to PERMANENTLY delete this item? This cannot be undone."))try{await ue.delete(`/api/papelera/eliminar/${p}/${m}`),d()}catch(x){console.error("Deletion failed",x)}};return r?a.jsx("div",{className:"text-white p-8",children:"Loading Trash Bin..."}):a.jsxs("div",{className:"flex flex-col h-full bg-[#09090b] text-white p-8 overflow-y-auto",children:[a.jsx("h1",{className:"text-3xl font-light mb-2 text-white/90",children:"Trash Bin"}),a.jsx("p",{className:"text-white/50 mb-8 font-light text-sm",children:"Items are automatically deleted after 30 days."}),s&&a.jsx("div",{className:"bg-red-500/10 border border-red-500/20 text-red-400 p-4 rounded mb-6",children:s}),t.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-20 opacity-50 border border-dashed border-white/10 rounded-xl",children:[a.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"delete_outline"}),a.jsx("p",{children:"Trash is empty"})]}):a.jsx("div",{className:"bg-zinc-900/50 rounded-xl border border-white/5 overflow-hidden",children:a.jsxs("table",{className:"w-full text-left border-collapse",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-white/5 text-xs text-white/40 uppercase tracking-wider",children:[a.jsx("th",{className:"p-4 font-normal",children:"Name"}),a.jsx("th",{className:"p-4 font-normal",children:"Type"}),a.jsx("th",{className:"p-4 font-normal",children:"Deleted Date"}),a.jsx("th",{className:"p-4 font-normal text-right",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-white/5",children:t.map(p=>a.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[a.jsx("td",{className:"p-4 text-white/80 font-medium",children:p.nombre||"Untitled"}),a.jsx("td",{className:"p-4 text-white/50 text-sm",children:p.tipo}),a.jsx("td",{className:"p-4 text-white/50 text-sm font-mono",children:p.deleted_date?new Date(p.deleted_date).toLocaleDateString():"-"}),a.jsxs("td",{className:"p-4 text-right space-x-2",children:[a.jsx("button",{onClick:()=>u(p.tipo,p.id),className:"px-3 py-1.5 text-xs bg-emerald-500/10 text-emerald-400 hover:bg-emerald-500/20 rounded-md transition-colors border border-emerald-500/20",children:"RESTORE"}),a.jsx("button",{onClick:()=>h(p.tipo,p.id),className:"px-3 py-1.5 text-xs bg-red-500/10 text-red-400 hover:bg-red-500/20 rounded-md transition-colors border border-red-500/20",children:"DELETE"})]})]},`${p.tipo}-${p.id}`))})]})})]})}const JT=({attribute:e,value:t,onChange:n,onRemove:r,linkableEntities:i=[]})=>{const s=e.plantilla||e,l=()=>{switch(s.tipo){case"text":return a.jsx("textarea",{className:"w-full bg-transparent text-white text-sm font-medium focus:outline-none resize-none no-scrollbar h-auto min-h-[100px]",value:t||"",onChange:m=>n(m.target.value),placeholder:"..."});case"short_text":return a.jsx("input",{type:"text",className:"w-full bg-transparent text-white text-sm font-medium focus:outline-none",value:t||"",onChange:m=>n(m.target.value),placeholder:"..."});case"number":return a.jsx("input",{type:"number",className:"w-full bg-transparent text-white text-sm font-medium focus:outline-none",value:t||"",onChange:m=>n(m.target.value)});case"boolean":return a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:()=>n(t==="true"?"false":"true"),className:`size-6 rounded-lg border flex items-center justify-center transition-all ${t==="true"?"bg-primary border-primary text-white":"border-glass-border text-transparent hover:border-primary/50"}`,children:a.jsx("span",{className:"material-symbols-outlined text-sm",children:"check"})}),a.jsx("span",{className:"text-xs text-text-muted",children:t==="true"?"Enabled":"Disabled"})]});case"select":let d=[];try{d=JSON.parse(s.metadata||"{}").options||[]}catch{}return a.jsxs("div",{className:"relative",children:[a.jsxs("select",{className:"w-full bg-black/30 border border-white/5 rounded-xl px-4 py-2.5 text-sm text-white focus:outline-none focus:border-primary/50 appearance-none cursor-pointer",value:t||"",onChange:m=>n(m.target.value),children:[a.jsx("option",{value:"",children:"Select an option..."}),d.map((m,x)=>a.jsx("option",{value:m,className:"bg-surface-dark text-white p-2",children:m},x))]}),a.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-white/50",children:a.jsx("span",{className:"material-symbols-outlined text-sm",children:"unfold_more"})})]});case"multi_select":let u=[];try{u=JSON.parse(s.metadata||"{}").options||[]}catch{}let h=[];try{h=t?JSON.parse(t):[],Array.isArray(h)||(h=[])}catch(m){console.error("Error parsing select values",m)}return a.jsxs("div",{className:"bg-black/20 border border-white/5 rounded-xl p-2 space-y-1 max-h-40 overflow-y-auto custom-scrollbar",children:[u.map((m,x)=>a.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-white/5 rounded-lg cursor-pointer group transition-colors",children:[a.jsx("div",{className:`size-4 rounded border flex items-center justify-center transition-all ${h.includes(m)?"bg-primary border-primary":"border-white/10 group-hover:border-white/30"}`,children:h.includes(m)&&a.jsx("span",{className:"material-symbols-outlined text-[10px] text-white",children:"check"})}),a.jsx("span",{className:`text-xs font-medium ${h.includes(m)?"text-white":"text-slate-400 group-hover:text-slate-200"}`,children:m})]},x)),u.length===0&&a.jsx("div",{className:"text-xs text-slate-500 p-2 italic",children:"No options defined."})]});case"date":return a.jsx("input",{type:"date",className:"w-full bg-transparent text-white text-sm font-medium focus:outline-none [color-scheme:dark]",value:t||"",onChange:m=>n(m.target.value)});case"entity_link":return a.jsxs("div",{className:"relative",children:[a.jsxs("select",{className:"w-full bg-black/30 border border-white/5 rounded-xl px-4 py-2.5 text-sm text-white focus:outline-none focus:border-primary/50 appearance-none cursor-pointer",value:t||"",onChange:m=>n(m.target.value),children:[a.jsx("option",{value:"",children:"Select an Entity Link..."}),i.map(m=>a.jsx("option",{value:m.id,className:"bg-surface-dark text-white p-2",children:m.nombre},m.id))]}),a.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-white/50",children:a.jsx("span",{className:"material-symbols-outlined text-sm",children:"link"})})]});case"image":return a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex gap-2",children:a.jsx("input",{type:"text",className:"flex-1 bg-black/30 border border-white/5 rounded-xl px-4 py-2 text-xs text-text-muted focus:text-white focus:outline-none",placeholder:"Image URL...",value:t||"",onChange:m=>n(m.target.value)})}),t&&a.jsx("div",{className:"w-full aspect-video rounded-xl bg-black/40 border border-white/5 overflow-hidden relative group",children:a.jsx("img",{src:t,alt:"Preview",className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity"})}),!t&&a.jsx("div",{className:"w-full h-20 rounded-xl bg-white/5 border border-dashed border-white/10 flex items-center justify-center text-text-muted/30",children:a.jsx("span",{className:"material-symbols-outlined",children:"image"})})]});case"table":const p=t||"[]";return a.jsxs("div",{className:"space-y-2",children:[a.jsx("textarea",{className:"w-full h-32 bg-black/30 border border-white/5 rounded-xl p-3 text-xs font-mono text-white/70 focus:outline-none focus:border-primary/50",value:p,onChange:m=>n(m.target.value),placeholder:'[{"Item": "Sword", "Qty": 1}, ...]'}),a.jsxs("div",{className:"text-[10px] text-text-muted flex justify-between",children:[a.jsx("span",{children:"JSON Format supported"}),a.jsx("span",{className:"material-symbols-outlined text-xs",children:"data_array"})]})]});default:return a.jsxs("div",{className:"text-sm font-medium text-white/70 italic p-2 rounded-lg bg-white/5 border border-white/5",children:[a.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-500 mr-2",children:s.tipo}),t]})}};return a.jsxs("div",{className:"p-4 border border-white/5 rounded-2xl bg-surface-dark/50 backdrop-blur-sm relative overflow-hidden h-full flex flex-col group hover:border-primary/20 transition-all",children:[a.jsxs("label",{className:"text-[10px] font-black uppercase tracking-widest text-text-muted mb-3 flex items-center justify-between gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"material-symbols-outlined text-xs opacity-50",children:"label"}),s.nombre]}),r&&a.jsx("button",{onClick:d=>{d.preventDefault(),r()},className:"text-white/20 hover:text-red-400 transition-colors",title:"Remove Attribute",children:a.jsx("span",{className:"material-symbols-outlined text-sm",children:"close"})})]}),a.jsx("div",{className:"flex-1 nodrag",children:l()}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"})]})},eM=[{value:"entidadIndividual",label:"Character"},{value:"entidadColectiva",label:"Group"},{value:"zona",label:"Location"},{value:"construccion",label:"Building"},{value:"efectos",label:"Effect"},{value:"interaccion",label:"Interaction"},{value:"lineatiempo",label:"Timeline"},{value:"eventotiempo",label:"Event"},{value:"mapa",label:"Map"}],tM=({entityId:e,entityType:t})=>{const[n,r]=T.useState([]),[i,s]=T.useState(!1),[l,d]=T.useState(!1),[u,h]=T.useState("entidadIndividual"),[p,m]=T.useState([]),[x,y]=T.useState(""),[S,N]=T.useState(""),[k,w]=T.useState(""),[j,v]=T.useState(!1);T.useEffect(()=>{e&&_()},[e,t]),T.useEffect(()=>{l&&u&&E(u)},[l,u]);const _=async()=>{s(!0);try{const P=(await ue.get("/bd/relacion")).filter(F=>F.nodoOrigenId===parseInt(e)&&F.tipoOrigen===t||F.nodoDestinoId===parseInt(e)&&F.tipoDestino===t),L=await Promise.all(P.map(async F=>{const G=F.nodoOrigenId===parseInt(e),R=G?F.nodoDestinoId:F.nodoOrigenId,$=G?F.tipoDestino:F.tipoOrigen;try{const B=await ue.get(`/bd/${$}/${R}`);return{...F,otherName:B.nombre,otherType:$,isOutgoing:G}}catch{return{...F,otherName:"Unknown/Deleted",otherType:$,isOutgoing:G}}}));r(L)}catch(I){console.error("Failed to load relationships",I)}finally{s(!1)}},E=async I=>{v(!0);try{const P=await ue.get(`/bd/${I}`);m(P||[])}catch(P){console.error("Failed to fetch targets",P),m([])}finally{v(!1)}},A=async()=>{if(!(!x||!S))try{const I={nodoOrigenId:parseInt(e),tipoOrigen:t,nodoDestinoId:parseInt(x),tipoDestino:u,tipoRelacion:S,descripcion:k,tipoEntidad:"relacion"};await ue.put("/bd/insertar",I),d(!1),M(),_()}catch(I){console.error("Failed to save relationship",I),alert("Error saving relationship")}},D=async I=>{if(confirm("Are you sure?"))try{await ue.delete(`/bd/relacion/${I}`),_()}catch(P){console.error("Failed to delete",P)}},M=()=>{h("entidadIndividual"),y(""),N(""),w("")};return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("header",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-bold text-white uppercase tracking-widest",children:"Relationships"}),a.jsx(Ye,{variant:"secondary",icon:"add_link",onClick:()=>d(!l),children:l?"Cancel":"Connect"})]}),l&&a.jsxs("div",{className:"p-4 rounded-2xl bg-white/5 border border-white/10 space-y-4 animate-in fade-in slide-in-from-top-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-500",children:"Target Type"}),a.jsx("select",{className:"w-full bg-black/40 border border-white/10 rounded-xl p-2 text-sm text-white outline-none focus:border-primary",value:u,onChange:I=>h(I.target.value),children:eM.map(I=>a.jsx("option",{value:I.value,children:I.label},I.value))})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-500",children:"Target Entity"}),a.jsxs("select",{className:"w-full bg-black/40 border border-white/10 rounded-xl p-2 text-sm text-white outline-none focus:border-primary",value:x,onChange:I=>y(I.target.value),disabled:j,children:[a.jsx("option",{value:"",children:"Select Target..."}),p.map(I=>a.jsx("option",{value:I.id,children:I.nombre},I.id))]})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-500",children:"Relationship Type"}),a.jsx("input",{type:"text",placeholder:"e.g. Father of, Located in, Enemy of...",className:"w-full bg-black/40 border border-white/10 rounded-xl p-2 text-sm text-white outline-none focus:border-primary",value:S,onChange:I=>N(I.target.value)})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-500",children:"Description (The Why)"}),a.jsx("textarea",{placeholder:"Explain the nature of this connection...",className:"w-full bg-black/40 border border-white/10 rounded-xl p-2 text-sm text-white outline-none focus:border-primary h-20 resize-none",value:k,onChange:I=>w(I.target.value)})]}),a.jsx("div",{className:"flex justify-end pt-2",children:a.jsx(Ye,{variant:"primary",icon:"save",onClick:A,disabled:!x||!S,children:"Save Connection"})})]}),a.jsx("div",{className:"space-y-3",children:i?a.jsx("div",{className:"text-center text-slate-500 py-8",children:"Scanning connections..."}):n.length===0?a.jsx("div",{className:"text-center text-slate-500 py-8 italic border border-dashed border-white/10 rounded-2xl",children:"No connections established"}):n.map((I,P)=>a.jsxs("div",{className:"group relative p-4 rounded-2xl bg-surface-dark border border-white/5 hover:border-primary/50 transition-all flex items-start gap-4",children:[a.jsx("div",{className:"mt-1",children:a.jsx("span",{className:"material-symbols-outlined text-slate-500",children:I.isOutgoing?"arrow_outward":"arrow_inward"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:I.isOutgoing?"To:":"From:"}),a.jsx("span",{className:"text-sm font-bold text-white",children:I.otherName}),a.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded bg-white/10 text-slate-400 font-bold uppercase tracking-wider",children:I.otherType})]}),a.jsx("div",{className:"text-primary text-xs font-black uppercase tracking-widest mb-2",children:I.tipoRelacion}),I.descripcion&&a.jsxs("p",{className:"text-xs text-slate-400 leading-relaxed bg-black/20 p-2 rounded-lg border border-white/5",children:['"',I.descripcion,'"']})]}),a.jsx("button",{onClick:()=>D(I.id),className:"opacity-0 group-hover:opacity-100 p-2 text-slate-600 hover:text-red-400 transition-all",children:a.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]},I.id||P))})]})},Tl=({mode:e})=>{const{username:t,projectName:n,entitySlug:r,folderSlug:i,type:s}=zn(),l=Fn(),d=e==="creation",{setRightOpen:u,setAvailableTemplates:h,setRightPanelMode:p,setAddAttributeHandler:m,setEntityTabs:x,activeEntityTab:y,setActiveEntityTab:S}=da(),[N,k]=T.useState({nombre:"",tipo:"entidadindividual",descripcion:"",color:"#6366f1",apariencia:"",notas:"",iconUrl:null,tipoEspecial:s||null,carpeta:null,categoria:"Individual"}),[w,j]=T.useState([]),[v,_]=T.useState(!0),[E,A]=T.useState(!1),[D,M]=T.useState([]),[I,P]=T.useState([]),[L,F]=T.useState(!1);T.useEffect(()=>(u(!0),p("ENTITY"),x(["identity","backstory","attributes","relationships","notes"]),S("identity"),()=>{p("NOTES"),x([])}),[]),T.useEffect(()=>{d?R():$()},[r,i,d]);const G=z=>{h(z),P(z),m(V=>{const J=z.find(ee=>ee.id===V);J&&j(ee=>[...ee,{id:`temp-${J.id}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,attribute:J,value:J.valorDefecto||"",isTemp:!0}])})},R=async()=>{_(!0);try{const z=await ue.get(`/world-bible/folders/${i}`),V=await ue.get(`/world-bible/folders/${i}/templates`);G(V),k(ee=>({...ee,nombre:`Nuevo ${s==="map"?"Mapa":s==="timeline"?"Cronograma":"Ente"}`,carpeta:z,tipoEspecial:s||"entidadindividual",tipo:s||"entidadindividual"}));const J=V.map(ee=>({id:`temp-${ee.id}-${Math.random().toString(36).substr(2,9)}`,attribute:ee,value:ee.valorDefecto||"",isTemp:!0}));j(J)}catch(z){console.error("Error creating draft:",z)}finally{_(!1)}},$=async()=>{var z;_(!0);try{const V=await ue.get(`/world-bible/entities/${r}`);if(k({...V,apariencia:V.apariencia||"",notas:V.notas||"",iconUrl:V.iconUrl||null,tags:V.tags||"",tipo:V.tipoEspecial||getHierarchyType(V.tipo).id,color:V.color||"#6366f1",categoria:V.categoria||"Individual"}),(z=V.carpeta)!=null&&z.id){const ee=await ue.get(`/world-bible/folders/${V.carpeta.id}/templates`);G(ee)}const J=(V.valores||[]).map(ee=>({id:ee.id.toString(),attribute:ee.plantilla,value:ee.valor,isTemp:!1}));j(J)}catch(V){console.error("Error loading entity:",V)}finally{_(!1)}},B=(z,V)=>{k(J=>({...J,[z]:V}))},Q=z=>{const V=z.target.files[0];if(V){const J=new FileReader;J.onloadend=()=>{B("iconUrl",J.result)},J.readAsDataURL(V)}},K=(z,V)=>{j(J=>J.map(ee=>ee.id===z?{...ee,value:V}:ee))},H=z=>{z.toString().startsWith("temp-")||M(V=>[...V,z]),j(V=>V.filter(J=>J.id!==z))},W=async(z=!0)=>{A(!0);try{const V={nombre:N.nombre,descripcion:N.descripcion,tags:N.tags,apariencia:N.apariencia,notas:N.notas,iconUrl:N.iconUrl,tipoEspecial:N.tipoEspecial||"entidadindividual",color:N.color,categoria:N.categoria};let J=N.id;if(d){V.carpetaId=N.carpeta.id;const ae=await ue.post("/world-bible/entities",V);J=ae.id;for(const fe of w)if(fe.isTemp){const Y=await ue.post(`/world-bible/entities/${ae.id}/attributes`,{plantillaId:fe.attribute.id});await ue.patch(`/world-bible/entities/${ae.id}/values`,[{valorId:Y.id,nuevoValor:fe.value}])}A(!1),z?l(`/${t}/${n}/bible/folder/${i}`):l(`/${t}/${n}/bible/folder/${i}/entity/${ae.slug||ae.id}/edit`,{replace:!0});return}await ue.put(`/world-bible/entities/${J}`,{nombre:V.nombre,color:V.color,iconUrl:V.iconUrl}),await ue.patch(`/world-bible/entities/${J}/details`,{descripcion:V.descripcion,tags:V.tags,apariencia:V.apariencia,notas:V.notas,iconUrl:V.iconUrl}),D.length>0&&(await Promise.all(D.map(ae=>ue.delete(`/world-bible/values/${ae}`))),M([]));const ee=w.filter(ae=>!ae.isTemp).map(ae=>({valorId:parseInt(ae.id),nuevoValor:ae.value}));ee.length>0&&await ue.patch(`/world-bible/entities/${J}/values`,ee);for(const ae of w)if(ae.isTemp){const fe=await ue.post(`/world-bible/entities/${J}/attributes`,{plantillaId:ae.attribute.id});await ue.patch(`/world-bible/entities/${J}/values`,[{valorId:fe.id,nuevoValor:ae.value}]),ae.id=fe.id.toString(),ae.isTemp=!1}A(!1)}catch(V){console.error("Save error",V),A(!1)}};return v?a.jsx("div",{className:"p-20 text-center animate-pulse",children:"Loading Builder..."}):a.jsx("div",{className:"flex h-full w-full bg-background-dark overflow-hidden",children:a.jsxs("div",{className:"flex-1 flex flex-col min-w-0 overflow-y-auto custom-scrollbar relative",children:[a.jsxs("div",{className:"border-b border-white/5 p-4 flex justify-between items-center bg-background-dark/80 backdrop-blur sticky top-0 z-30",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(yc,{url:N.iconUrl,name:N.nombre,className:"size-10 rounded-lg border border-white/10"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-lg font-bold text-white leading-tight",children:N.nombre||"Sin Nombre"}),a.jsx("span",{className:"text-[10px] uppercase font-black tracking-widest text-slate-500",children:d?"Creando Nueva Entidad":"Editando Entidad"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:()=>l(`/${t}/${n}/bible/folder/${i}`),className:"px-4 py-2 rounded-xl text-slate-400 hover:text-white hover:bg-white/5 text-xs font-bold uppercase tracking-widest transition-all",children:"Cancelar"}),a.jsxs("div",{className:"flex bg-white/5 rounded-xl p-1 gap-1 border border-white/10",children:[a.jsxs("button",{onClick:()=>W(!0),disabled:E,className:"h-9 px-4 rounded-lg bg-primary hover:bg-primary-light text-white text-[10px] font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[E?a.jsx("span",{className:"material-symbols-outlined animate-spin text-sm",children:"refresh"}):a.jsx("span",{className:"material-symbols-outlined text-sm",children:"save"}),"Guardar"]}),a.jsx("div",{className:"w-px bg-white/10 my-1"}),a.jsx("button",{onClick:()=>W(!1),disabled:E,className:"h-9 px-3 rounded-lg bg-transparent hover:bg-white/10 text-white transition-all flex items-center justify-center disabled:opacity-50",title:"Guardar y Seguir Editando",children:a.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit_document"})})]})]})]}),a.jsxs("div",{className:"p-8 pb-32 max-w-5xl mx-auto w-full",children:[y==="identity"&&a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[a.jsxs(Fe,{className:`p-6 space-y-6 ${N.tipoEspecial==="map"?"lg:col-span-2":""}`,children:[a.jsxs("h3",{className:"text-xs font-black uppercase tracking-widest text-primary flex items-center gap-2 mb-6",children:[a.jsx("span",{className:"material-symbols-outlined text-sm",children:"badge"})," Identity"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500 mb-1 block",children:"Full Name"}),a.jsx("input",{value:N.nombre,onChange:z=>B("nombre",z.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl p-3 text-sm text-white focus:border-primary/50 outline-none transition-colors",placeholder:"E.g. King Alaric"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500 mb-1 block",children:"Entity Type"}),a.jsx("div",{className:"w-full bg-black/30 border border-white/10 rounded-xl p-3 text-sm text-slate-400 capitalize cursor-not-allowed",children:N.tipoEspecial||"Standard"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500 mb-1 block",children:"Category (Graph Type)"}),a.jsxs("select",{value:N.categoria||"Individual",onChange:z=>B("categoria",z.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl p-3 text-sm text-white focus:border-primary/50 outline-none transition-colors appearance-none",children:[a.jsx("option",{value:"Individual",children:"Individual (Character/Person)"}),a.jsx("option",{value:"Group",children:"Group / Faction"}),a.jsx("option",{value:"Location",children:"Location"}),a.jsx("option",{value:"Event",children:"Event"}),a.jsx("option",{value:"Object",children:"Object / Item"}),a.jsx("option",{value:"Concept",children:"Concept / Magic"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500 mb-1 block",children:"Tags (comma separated)"}),a.jsx("input",{value:N.tags,onChange:z=>B("tags",z.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl p-3 text-sm text-slate-300 focus:border-primary/50 outline-none transition-colors",placeholder:"Warrior, Leader, Human..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500 mb-1 block",children:"Icon / Portrait"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(yc,{url:N.iconUrl,name:N.nombre,size:"lg",className:"rounded-xl"}),a.jsxs("label",{className:"cursor-pointer px-4 py-2 bg-white/5 hover:bg-white/10 rounded-lg border border-white/10 text-xs font-bold text-slate-300 transition-colors",children:["Upload Image",a.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Q})]}),N.iconUrl&&a.jsx("button",{onClick:()=>B("iconUrl",""),className:"p-2 hover:text-red-400 transition-colors",children:a.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]})]})]})]}),N.tipoEspecial!=="map"&&a.jsxs(Fe,{className:"p-6 space-y-6",children:[a.jsxs("h3",{className:"text-xs font-black uppercase tracking-widest text-primary flex items-center gap-2 mb-6",children:[a.jsx("span",{className:"material-symbols-outlined text-sm",children:"palette"})," Appearance"]}),a.jsx("textarea",{value:N.apariencia,onChange:z=>B("apariencia",z.target.value),className:"w-full h-40 bg-black/30 border border-white/10 rounded-xl p-4 text-sm text-slate-300 leading-relaxed resize-none focus:border-primary/50 outline-none transition-colors custom-scrollbar",placeholder:"Describe their physical appearance, clothing, distinct marks..."})]}),N.tipoEspecial==="map"?a.jsxs(Fe,{className:"p-6 lg:col-span-2 space-y-6",children:[a.jsxs("h3",{className:"text-xs font-black uppercase tracking-widest text-primary flex items-center gap-2 mb-6",children:[a.jsx("span",{className:"material-symbols-outlined text-sm",children:"map"})," Cartography"]}),a.jsx("div",{onClick:()=>{let z=N.iconUrl;try{const V=JSON.parse(N.descripcion||"{}");V.snapshotUrl&&(z=V.snapshotUrl)}catch{}F(!0)},className:"w-full aspect-[21/9] bg-black/30 border border-white/10 rounded-xl overflow-hidden cursor-pointer group relative",children:(()=>{let z=N.iconUrl;try{const V=JSON.parse(N.descripcion||"{}");V.snapshotUrl&&(z=V.snapshotUrl)}catch{}return z?a.jsxs(a.Fragment,{children:[a.jsx("img",{src:z,alt:"Map Preview",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}),a.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:a.jsx("span",{className:"material-symbols-outlined text-white text-3xl",children:"zoom_in"})})]}):a.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-500 text-xs italic",children:"No map preview available"})})()}),a.jsx("div",{className:"flex justify-end",children:a.jsx(Ye,{variant:"secondary",size:"sm",icon:"edit",onClick:()=>window.open(`/${t}/${n}/map-editor/edit/${N.id}`,"_self"),children:"Open Editor"})})]}):a.jsxs(Fe,{className:"p-6 lg:col-span-2",children:[a.jsxs("h3",{className:"text-xs font-black uppercase tracking-widest text-primary flex items-center gap-2 mb-6",children:[a.jsx("span",{className:"material-symbols-outlined text-sm",children:"psychology"})," Personality / Stats"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[w.filter(z=>z.attribute.tipo==="number").map(z=>a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-xs font-bold text-white",children:z.attribute.nombre}),a.jsx("span",{className:"text-xs text-primary font-mono",children:z.value||0})]}),a.jsx("input",{type:"range",min:"0",max:"100",value:z.value||0,onChange:V=>K(z.id,V.target.value),className:"w-full h-1 bg-white/10 rounded-lg appearance-none cursor-pointer accent-primary"})]},z.id)),w.filter(z=>z.attribute.tipo==="number").length===0&&a.jsx("div",{className:"col-span-2 text-center text-xs text-slate-500 italic py-4",children:"No numeric attributes defined. Add them from the Templates tab."})]})]})]}),y==="backstory"&&a.jsx("div",{className:"animate-in fade-in duration-500",children:a.jsxs(Fe,{className:"min-h-[60vh] flex flex-col p-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-primary",children:"Biography"}),a.jsx("span",{className:"text-[10px] text-slate-500 bg-white/5 px-2 py-1 rounded",children:"Markdown Supported"})]}),a.jsx("textarea",{className:"flex-1 w-full bg-transparent border-none outline-none text-slate-300 leading-relaxed resize-none focus:ring-0 placeholder:text-slate-600 custom-scrollbar text-base",placeholder:"Write the origin story...",value:N.descripcion||"",onChange:z=>B("descripcion",z.target.value)})]})}),y==="attributes"&&a.jsxs("div",{className:`animate-in fade-in duration-500 space-y-6 min-h-[50vh] transition-colors rounded-2xl p-4 ${window.isDraggingOver?"bg-primary/10 border-2 border-dashed border-primary":""}`,onDragOver:z=>{z.preventDefault(),z.dataTransfer.dropEffect="copy",z.currentTarget.classList.add("bg-primary/10","border-primary","border-dashed","border-2")},onDragLeave:z=>{z.preventDefault(),z.currentTarget.classList.remove("bg-primary/10","border-primary","border-dashed","border-2")},onDrop:z=>{if(z.preventDefault(),z.currentTarget.classList.remove("bg-primary/10","border-primary","border-dashed","border-2"),z.dataTransfer.getData("application/reactflow/type")!=="attribute")return;const J=parseInt(z.dataTransfer.getData("templateId")),ee=I.find(ae=>ae.id===J);ee&&j(ae=>[...ae,{id:`temp-${ee.id}-${Date.now()}`,attribute:ee,value:ee.valorDefecto||"",isTemp:!0}])},children:[a.jsxs("h3",{className:"text-xs font-black uppercase tracking-widest text-primary border-b border-white/5 pb-4 flex items-center justify-between",children:[a.jsx("span",{children:"Atributos especiales"}),a.jsx("span",{className:"text-[10px] text-slate-500 font-normal normal-case opacity-50 hidden md:block",children:"Arraste atributos desde el panel derecho"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border-2 border-dashed border-white/5 rounded-2xl hover:border-primary/20 transition-colors bg-white/[0.01]",children:[w.length===0&&a.jsxs("div",{className:"col-span-full py-12 text-center text-slate-500 text-sm pointer-events-none",children:[a.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 opacity-50",children:"drag_indicator"}),a.jsx("p",{children:"Arrastra plantillas aqu para aadir atributos"})]}),w.filter(z=>z.attribute.tipo!=="number").map(z=>a.jsx(JT,{attribute:z.attribute,value:z.value,onChange:V=>K(z.id,V),onRemove:()=>H(z.id)},z.id))]})]}),y==="relationships"&&a.jsx("div",{className:"animate-in fade-in duration-500",children:a.jsx(Fe,{className:"min-h-[50vh]",children:d?a.jsxs("div",{className:"p-20 text-center text-slate-500",children:[a.jsx("span",{className:"material-symbols-outlined text-4xl mb-4",children:"save_as"}),a.jsx("p",{className:"text-sm font-bold",children:"Please save the entity first to manage relationships."})]}):a.jsx(tM,{entityId:N.id,entityType:N.tipo||"entidadindividual"})})}),y==="notes"&&a.jsx("div",{className:"animate-in fade-in duration-500",children:a.jsxs(Fe,{className:"min-h-[60vh] flex flex-col p-8 bg-yellow-900/5 border-yellow-500/10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"text-xs font-black uppercase tracking-widest text-yellow-500 flex items-center gap-2",children:[a.jsx("span",{className:"material-symbols-outlined text-sm",children:"sticky_note_2"})," GM Notes (Private)"]}),a.jsx("span",{className:"text-[10px] text-yellow-500/50 uppercase font-bold",children:"Not visible to players"})]}),a.jsx("textarea",{className:"flex-1 w-full bg-transparent border-none outline-none text-yellow-100/80 leading-relaxed resize-none focus:ring-0 placeholder:text-yellow-500/20 custom-scrollbar text-sm font-mono",placeholder:"Secret notes, plot hooks, or truth...",value:N.notas||"",onChange:z=>B("notas",z.target.value)})]})})]}),L&&N.iconUrl&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>F(!1),children:a.jsxs("div",{className:"relative max-w-[90vw] max-h-[90vh] p-2",children:[a.jsx("button",{onClick:()=>F(!1),className:"absolute -top-12 right-0 p-2 text-white hover:text-primary transition-colors",children:a.jsx("span",{className:"material-symbols-outlined text-3xl",children:"close"})}),a.jsx("img",{src:N.iconUrl,alt:N.nombre,className:"max-w-full max-h-[85vh] object-contain rounded-lg shadow-2xl border border-white/10",onClick:z=>z.stopPropagation()})]})})]})})},nM=e=>{switch(e==null?void 0:e.toLowerCase()){case"text":return"notes";case"short_text":return"short_text";case"number":return"pin";case"date":return"calendar_today";case"select":return"list";case"boolean":return"check_box";case"map":return"map";case"timeline":return"timeline";case"character":case"entidadindividual":return"person";case"location":case"zona":case"construccion":return"location_on";case"culture":case"entidadcolectiva":return"groups";case"universe":case"galaxy":case"system":case"planet":return"public";case"entity_link":return"link";default:return"description"}},Gg=({item:e,type:t,linkTo:n,onContextMenu:r,onDelete:i})=>{const s=t==="folder";return a.jsxs(ia,{to:n,onContextMenu:r,className:"group relative flex flex-col p-4 rounded-3xl bg-surface-dark border border-glass-border hover:border-primary/50 hover:bg-white/5 transition-all duration-300 backdrop-blur-sm overflow-hidden",children:[e.iconUrl&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"absolute inset-0 z-0",children:a.jsx("img",{src:e.iconUrl,alt:"",className:"w-full h-full object-cover opacity-60 group-hover:scale-105 transition-transform duration-700"})}),a.jsx("div",{className:"absolute inset-0 z-0 bg-gradient-to-t from-[#0a0a0c] via-[#0a0a0c]/80 to-transparent"})]}),a.jsxs("div",{className:"relative z-10 flex items-start justify-between mb-4",children:[a.jsx("div",{className:`
                    size-12 rounded-2xl flex items-center justify-center text-xl transition-transform group-hover:scale-110 
                    ${s?"bg-primary/20 text-primary":"bg-white/5 text-text-muted group-hover:text-white backdrop-blur-md border border-white/5"}
                `,children:a.jsx("span",{className:"material-symbols-outlined",children:s?"folder":nM(e.tipoEspecial)})}),s&&a.jsx("div",{className:"px-2 py-1 rounded-lg bg-surface-light/50 border border-glass-border text-[10px] font-black text-white shadow-sm backdrop-blur-md",children:e.itemCount||0})]}),a.jsxs("div",{className:"relative z-10 mt-auto",children:[a.jsx("h3",{className:"text-sm font-bold text-white truncate group-hover:text-primary transition-colors drop-shadow-md",children:e.nombre}),a.jsx("p",{className:"text-[10px] font-bold uppercase tracking-widest text-text-muted mt-1 opacity-70 group-hover:opacity-100 transition-opacity",children:s?"Folder":e.tipoEspecial||"Entity"})]}),a.jsxs("div",{className:"absolute top-4 right-4 z-20 flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[i&&a.jsx("button",{onClick:l=>{l.preventDefault(),l.stopPropagation(),i(e)},className:"p-1.5 rounded-lg bg-red-500/10 hover:bg-red-500 text-red-500 hover:text-white transition-all border border-red-500/20 shadow-lg shadow-red-500/5 group/del backdrop-blur-md",children:a.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})}),a.jsx("span",{className:"material-symbols-outlined text-primary text-sm transform group-hover:translate-x-1 transition-transform drop-shadow-md",children:"arrow_forward"})]})]})},rM=({path:e,currentFolder:t})=>{const{username:n,projectName:r}=zn(),i=`/${n}/${r}/bible`;return!e&&!t?null:a.jsxs("nav",{className:"flex items-center gap-2 text-[10px] uppercase font-bold tracking-wider text-slate-500 mb-4 overflow-x-auto no-scrollbar whitespace-nowrap",children:[a.jsxs(ia,{to:i,className:"hover:text-primary transition-colors flex items-center gap-1",children:[a.jsx("span",{className:"material-symbols-outlined text-sm",children:"home"}),"Bible"]}),e&&e.map((s,l)=>a.jsxs(te.Fragment,{children:[a.jsx("span",{className:"text-slate-700",children:"/"}),a.jsx(ia,{to:`${i}/folder/${s.slug||s.id}`,className:"hover:text-primary transition-colors",children:s.nombre})]},s.id)),t&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-slate-700",children:"/"}),a.jsx("span",{className:"text-white bg-white/5 px-2 py-0.5 rounded",children:t.nombre})]})]})},Xs={UNIVERSE:{id:"UNIVERSE",label:"Universo / Multiverso",description:"Contenedor supremo de realidades.",icon:"public",color:"text-purple-400",bgColor:"bg-purple-900/20"},GALAXY:{id:"GALAXY",label:"Galaxia",description:"Agrupacin masiva de sistemas estelares.",icon:"auto_awesome",color:"text-indigo-400",bgColor:"bg-indigo-900/20"},SYSTEM:{id:"SYSTEM",label:"Sistema Solar",description:"Estrella central y sus cuerpos orbitales.",icon:"wb_sunny",color:"text-yellow-400",bgColor:"bg-yellow-900/20"},PLANET:{id:"PLANET",label:"Planeta / Mundo",description:"Cuerpo celeste o plano de existencia principal.",icon:"public",color:"text-emerald-400",bgColor:"bg-emerald-900/20"},GEOGRAPHY:{id:"GEOGRAPHY",label:"Geografa",icon:"map",color:"text-green-300"},ENTITIES:{id:"ENTITIES",label:"Entidades",icon:"groups",color:"text-blue-300"},MAGIC:{id:"MAGIC",label:"Magia",icon:"auto_fix_high",color:"text-pink-300"},TIMELINE:{id:"TIMELINE",label:"Cronologa",icon:"history",color:"text-orange-300"},FACTIONS:{id:"FACTIONS",label:"Facciones",icon:"security",color:"text-red-300"},ITEMS:{id:"ITEMS",label:"Objetos",icon:"inventory_2",color:"text-gray-300"},FOLDER:{id:"FOLDER",label:"Carpeta",icon:"folder",color:"text-gray-400"}},Bg=e=>Xs[e]||Xs.FOLDER,iM=()=>{const{username:e,projectName:t,folderSlug:n}=zn(),r=Fn(),{handleCreateEntity:i,handleDeleteEntity:s,handleCreateSimpleFolder:l,folderSearchTerm:d,folderFilterType:u}=da(),[h,p]=T.useState([]),[m,x]=T.useState(null),[y,S]=T.useState([]),[N,k]=T.useState(!0),w=h.filter(E=>{const A=E.nombre.toLowerCase().includes(d.toLowerCase()),D=u==="ALL"||u==="MAP"&&E.tipoEspecial==="map"||u==="TIMELINE"&&E.tipoEspecial==="timeline"||u==="ENTITY"&&(!E.tipoEspecial||E.tipoEspecial==="entidadindividual");return A&&D});T.useEffect(()=>{const E=A=>{const{folderId:D,removeId:M,type:I,item:P,expand:L}=A.detail||{};D===((m==null?void 0:m.id)||n)&&(M?p(F=>F.filter(G=>G.id!==M)):j())};return window.addEventListener("folder-update",E),()=>window.removeEventListener("folder-update",E)},[n,m==null?void 0:m.id]),T.useEffect(()=>{j()},[n]);const j=async()=>{k(!0);try{const[E,A]=await Promise.all([ue.get(`/world-bible/folders/${n}/entities`),ue.get(`/world-bible/folders/${n}`)]);p(E),A.folder?(x(A.folder),S(A.path||[])):(x(A||{name:"Folder"}),S([]))}catch(E){console.error("Error loading folder content:",E)}finally{k(!1)}};if(N)return a.jsx("div",{className:"p-20 text-center animate-pulse text-text-muted",children:"Loading sector..."});const v=m&&m.tipo&&(["UNIVERSE","GALAXY","SYSTEM","PLANET"].includes(m.tipo)||m.tipo==="MAGIC"),_=m?Bg(m.tipo):Xs.FOLDER;return v?a.jsxs("div",{className:"flex-1 overflow-y-auto bg-[#0a0a0c] text-white w-full h-full relative",children:[a.jsxs("div",{className:`w-full min-h-[300px] ${_.bgColor} relative flex items-end p-10 border-b border-white/5`,children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0a0a0c] to-transparent opacity-80 pointer-events-none"}),a.jsx("div",{className:"absolute top-6 left-10 z-20",children:a.jsx(rM,{path:y,currentFolder:m})}),a.jsxs("div",{className:"relative z-10 flex gap-8 items-end w-full max-w-7xl mx-auto",children:[a.jsx("div",{className:`w-32 h-32 rounded-3xl ${_.bgColor} border border-white/10 flex items-center justify-center shadow-2xl`,children:a.jsx("span",{className:`material-symbols-outlined text-6xl ${_.color}`,children:_.icon})}),a.jsxs("div",{className:"flex-1 mb-2",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border border-white/10 ${_.bgColor} ${_.color}`,children:_.label}),a.jsxs("span",{className:"text-white/30 text-xs font-mono tracking-widest uppercase",children:["ID: ",m.id]})]}),a.jsx("h1",{className:"text-6xl font-black tracking-tighter text-white mb-2",children:m.nombre}),a.jsx("p",{className:"text-lg text-white/50 max-w-2xl font-light leading-relaxed",children:m.descripcion||"Sin descripcin definida para este sector cosmolgico."})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>r(`/${e}/${t}/bible/folder/${n}/entity/new/entidadindividual`),className:"px-4 py-2 bg-primary/20 hover:bg-primary/30 text-primary rounded-xl text-[10px] font-black uppercase tracking-widest flex items-center gap-2 transition-all",children:[a.jsx("span",{className:"material-symbols-outlined text-sm",children:"person_add"})," Nueva Entidad"]}),a.jsxs("button",{onClick:()=>r(`/${e}/${t}/map-editor/create/${n}`,{state:{folderId:m==null?void 0:m.id}}),className:"px-4 py-2 bg-white/5 hover:bg-white/10 text-white rounded-xl text-[10px] font-black uppercase tracking-widest flex items-center gap-2 transition-all border border-glass-border",children:[a.jsx("span",{className:"material-symbols-outlined text-sm",children:"map"})," Mapa"]})]})]})]}),a.jsxs("div",{className:"max-w-7xl mx-auto p-10 grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-[#13141f] border border-white/5 rounded-2xl p-6",children:[a.jsx("h3",{className:"text-xs font-bold text-white/40 uppercase tracking-widest mb-4",children:"Estadsticas"}),a.jsx("div",{className:"grid grid-cols-2 gap-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-black text-white",children:h.length}),a.jsx("div",{className:"text-[10px] text-white/40 uppercase",children:"Entidades"})]})})]}),a.jsxs("div",{className:"bg-[#13141f] border border-white/5 rounded-2xl p-6 h-64 flex flex-col",children:[a.jsx("h3",{className:"text-xs font-bold text-white/40 uppercase tracking-widest mb-4",children:"Notas Rpidas"}),a.jsx("textarea",{className:"flex-1 bg-transparent resize-none outline-none text-sm text-white/70 placeholder-white/20",placeholder:"Escribir notas de la zona..."})]})]}),a.jsxs("div",{className:"lg:col-span-2",children:[a.jsx("h3",{className:"text-xs font-bold text-white/40 uppercase tracking-widest mb-4",children:"Contenido Interno"}),h.length===0&&a.jsxs("div",{className:"p-12 border border-dashed border-white/10 rounded-2xl text-center",children:[a.jsx("span",{className:"material-symbols-outlined text-4xl text-white/20 mb-2",children:"folder_open"}),a.jsx("p",{className:"text-white/30 text-sm",children:"Este sector est vaco."})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:h.map(E=>a.jsx(Gg,{item:E,type:"entity",linkTo:`/${e}/${t}/bible/folder/${m.slug||n}/entity/${E.slug||E.id}`,onDelete:()=>s(E.id,(m==null?void 0:m.id)||n)},E.id))})]})]})]}):a.jsxs("div",{className:"flex-1 p-8 max-w-[1600px] mx-auto w-full h-full overflow-y-auto",children:[a.jsxs("header",{className:"mb-8 flex items-end justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsxs(ia,{to:`/${e}/${t}/bible`,className:"text-xs font-bold text-text-muted hover:text-primary transition-colors flex items-center gap-1",children:[a.jsx("span",{className:"material-symbols-outlined text-sm",children:"arrow_back"})," Root"]}),m&&a.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] bg-white/5 border border-white/10 ${_.color}`,children:_.label})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:`material-symbols-outlined text-3xl ${_.color}`,children:_.icon}),a.jsx("h1",{className:"text-4xl font-black text-white tracking-tighter",children:(m==null?void 0:m.nombre)||"Unnamed Folder"})]}),a.jsx("p",{className:"text-white/50 text-sm mt-2 max-w-xl",children:m==null?void 0:m.descripcion})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>r(`/${e}/${t}/bible/folder/${n}/entity/new/entidadindividual`),className:"h-10 px-4 rounded-xl bg-primary hover:bg-primary-light transition flex items-center gap-2 text-xs font-bold text-white shadow-lg shadow-primary/20",children:[a.jsx("span",{className:"material-symbols-outlined text-sm",children:"person"}),a.jsx("span",{children:"Nueva Entidad"})]}),a.jsxs("button",{onClick:()=>r(`/${e}/${t}/map-editor/create/${n}`,{state:{folderId:m==null?void 0:m.id}}),className:"h-10 px-4 rounded-xl bg-surface-light border border-white/5 hover:bg-white/10 transition flex items-center gap-2 text-xs font-bold text-white shadow-lg",children:[a.jsx("span",{className:"material-symbols-outlined text-sm",children:"map"}),a.jsx("span",{children:"Mapa"})]}),a.jsxs("button",{onClick:()=>l(m,"TIMELINE"),className:"h-10 px-4 rounded-xl bg-surface-light border border-white/5 hover:bg-white/10 transition flex items-center gap-2 text-xs font-bold text-white",children:[a.jsx("span",{className:"material-symbols-outlined text-sm",children:"timeline"}),a.jsx("span",{children:"Timeline"})]})]})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:w.map(E=>a.jsx(Gg,{item:E,type:"entity",linkTo:`/${e}/${t}/bible/folder/${(m==null?void 0:m.slug)||n}/entity/${E.slug||E.id}`,onDelete:()=>s(E.id,(m==null?void 0:m.id)||n)},E.id))}),h.length===0&&a.jsx("div",{className:"p-20 text-center border-2 border-dashed border-glass-border rounded-[3rem] opacity-30 mt-8",children:a.jsx("p",{className:"text-text-muted font-bold uppercase tracking-widest",children:"Empty Folder"})})]})},sM=e=>{switch(e==null?void 0:e.toLowerCase()){case"text":return"notes";case"short_text":return"short_text";case"number":return"pin";case"date":return"calendar_today";case"select":return"list";case"boolean":return"check_box";case"map":return"map";case"timeline":return"timeline";case"character":case"entidadindividual":return"person";case"location":case"zona":case"construccion":return"location_on";case"culture":case"entidadcolectiva":return"groups";case"universe":case"galaxy":case"system":case"planet":return"public";case"entity_link":return"link";default:return"description"}},aM=(e,t,n,r)=>{const i=n.slug||n.id;return`/${e}/${t}/bible/folder/${r||"root"}/entity/${i}`},j6=({folder:e,onCreateSubfolder:t,onRename:n,onDeleteFolder:r,onDeleteEntity:i,onCreateTemplate:s,onMoveEntity:l,onCreateEntity:d,onConfirmCreate:u,className:h})=>{const{username:p,projectName:m}=zn(),x=Fn(),[y,S]=T.useState(!1),[N,k]=T.useState({folders:[],entities:[]}),[w,j]=T.useState(!1),[v,_]=T.useState(null),[E,A]=T.useState(e.nombre),[D,M]=T.useState(!1),[I,P]=T.useState(null);T.useEffect(()=>{A(e.nombre)},[e.nombre]),T.useEffect(()=>{const z=V=>{var X,oe,pe,xe;const{folderId:J,optimisticType:ee,confirmedType:ae,removeId:fe,item:Y,oldId:ie,expand:ce,type:U}=V.detail||{};if(J===e.id){if(ce&&(S(!0),w||L()),w)if(ee){const he=ee==="folder"?"folders":"entities";k(Oe=>({...Oe,[he]:[...Oe[he].filter(_e=>_e.id!==Y.id),Y]}))}else if(ae){const he=ae==="folder"?"folders":"entities";k(Oe=>({...Oe,[he]:Oe[he].map(_e=>_e.id===ie?Y:_e)}))}else if(fe){const he=U==="folder"?"folders":"entities";k(Oe=>({...Oe,[he]:Oe[he].filter(_e=>_e.id!==fe)}))}else!ee&&!ae&&!fe&&L()}else((X=V.detail)==null?void 0:X.targetFolderId)===e.id&&((oe=V.detail)==null?void 0:oe.type)==="move-in"?w&&L():((pe=V.detail)==null?void 0:pe.sourceFolderId)===e.id&&((xe=V.detail)==null?void 0:xe.type)==="move-out"&&w&&k(he=>({...he,entities:he.entities.filter(Oe=>Oe.id!==Oe.detail.entityId)}))};return window.addEventListener("folder-update",z),()=>window.removeEventListener("folder-update",z)},[e.id,w]);const L=async()=>{try{console.log("Loading content for folder:",e.id,"Slug:",e.slug);const[z,V]=await Promise.all([ue.get(`/world-bible/folders/${e.id}/subfolders`),ue.get(`/world-bible/folders/${e.id}/entities`)]);k({folders:z,entities:V}),j(!0)}catch(z){console.error("Error reloading folder content:",z),z.message&&z.message.includes("404")&&console.error(`404 for folder ${e.id} (${e.nombre})`)}},F=z=>{z.stopPropagation(),S(!y),!w&&!y&&L()},G=()=>x(`/${p}/${m}/bible/folder/${e.slug||e.id}`),R=(z,V,J,ee)=>{z.preventDefault(),z.stopPropagation(),_({x:z.clientX,y:z.clientY,type:V,id:J,name:ee})},$=()=>_(null);T.useEffect(()=>{if(v)return window.addEventListener("click",$),()=>window.removeEventListener("click",$)},[v]);const B=z=>{if(z.key==="Enter"){z.preventDefault();const V=z.target.value.trim();V?u(e.id,V,"folder",e.parentId,e.tipoEspecial):e.isNew&&i(e.id,e.parentId)}};if(e.isNew)return a.jsx("div",{className:"px-3 py-1 animate-in fade-in zoom-in-95 duration-200",children:a.jsx("input",{autoFocus:!0,type:"text",className:"w-full bg-surface-light border border-primary/50 rounded px-2 py-1 text-xs text-white outline-none",placeholder:"Folder Name...",onKeyDown:B,onBlur:z=>{const V=z.target.value.trim();V?u(e.id,V,"folder",e.parentId):i(e.id,e.parentId)}})});const Q=({item:z,type:V})=>a.jsx("div",{className:"px-3 py-1 animate-in fade-in zoom-in-95 duration-200",children:a.jsx("input",{autoFocus:!0,type:"text",defaultValue:z.nombre||"",className:"w-full bg-surface-light border border-primary/50 rounded px-2 py-1 text-xs text-white outline-none",placeholder:"Name...",onKeyDown:J=>{if(J.key==="Enter"){J.preventDefault();const ee=J.target.value.trim();ee?u(z.id,ee,V,e.id,z.tipoEspecial):z.isNew&&i(z.id,e.id),P(null)}else J.key==="Escape"&&(P(null),z.isNew&&i(z.id,e.id))},onBlur:J=>{const ee=J.target.value.trim();ee?u(z.id,ee,V,e.id,z.tipoEspecial):z.isNew&&i(z.id,e.id),P(null)}})}),K=z=>{z.preventDefault(),z.stopPropagation(),z.currentTarget.classList.add("bg-primary/20")},H=z=>{z.preventDefault(),z.stopPropagation(),z.currentTarget.classList.remove("bg-primary/20")},W=z=>{z.preventDefault(),z.stopPropagation(),z.currentTarget.classList.remove("bg-primary/20");const V=z.dataTransfer.getData("entityId"),J=z.dataTransfer.getData("sourceFolderId");V&&J&&J!==String(e.id)&&l(V,e.id,J)};return a.jsxs("div",{className:`space-y-1 select-none ${h||""}`,children:[a.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 rounded-xl text-xs font-bold text-text-muted hover:text-white hover:bg-white/5 cursor-pointer transition-all group relative",onClick:G,onContextMenu:z=>R(z,"folder",e.id,e.nombre),onDragOver:K,onDragLeave:H,onDrop:W,children:[a.jsx("span",{onClick:F,className:`material-symbols-outlined text-lg transition-transform hover:text-primary ${y?"rotate-90 text-primary":"opacity-50"}`,children:"chevron_right"}),a.jsx("span",{className:`material-symbols-outlined text-lg ${Bg(e.tipo).color}`,children:Bg(e.tipo).icon}),D?a.jsx("input",{autoFocus:!0,className:"bg-surface-light border border-primary/50 rounded px-2 py-0.5 text-xs text-white outline-none flex-1 min-w-0",defaultValue:E,onKeyDown:async z=>{if(z.key==="Enter"){const V=z.target.value.trim();if(V&&V!==E)try{await n(e.id,V),A(V)}catch(J){console.error(J)}M(!1)}else z.key==="Escape"&&M(!1)},onBlur:()=>M(!1),onClick:z=>z.stopPropagation()}):a.jsx("span",{className:"truncate flex-1",children:E})]}),v&&a.jsxs("div",{className:"fixed bg-surface-dark border border-glass-border shadow-2xl rounded-xl py-2 z-50 w-48 text-xs font-medium flex flex-col",style:{top:v.y,left:v.x},onClick:z=>z.stopPropagation(),children:[a.jsx("div",{className:"px-4 py-2 border-b border-white/5 font-bold text-text-muted truncate",children:v.name}),v.type==="folder"?a.jsxs(a.Fragment,{children:[a.jsxs("button",{className:"px-4 py-2 hover:bg-white/5 text-left flex items-center gap-2",onClick:()=>{d(e.id,"entidadindividual"),$()},children:[a.jsx("span",{className:"material-symbols-outlined text-sm",children:"person"})," New Character"]}),a.jsxs("button",{className:"px-4 py-2 hover:bg-white/5 text-left flex items-center gap-2",onClick:()=>{x(`/${p}/${m}/map-editor/create/${e.id}`),$()},children:[a.jsx("span",{className:"material-symbols-outlined text-sm",children:"map"})," New Map"]}),a.jsx("div",{className:"h-px bg-white/5 my-1"}),a.jsxs("button",{className:"px-4 py-2 hover:bg-white/5 text-left flex items-center gap-2",onClick:()=>{M(!0),$()},children:[a.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"})," Rename Folder"]}),a.jsxs("button",{className:"px-4 py-2 hover:bg-red-500/10 text-red-400 text-left flex items-center gap-2",onClick:()=>{r(e.id,e.parentId),$()},children:[a.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})," Delete Folder"]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("button",{className:"px-4 py-2 hover:bg-white/5 text-left flex items-center gap-2 cursor-pointer",onClick:()=>{P(v.id),$()},children:[a.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"})," Rename"]}),a.jsxs("button",{className:"px-4 py-2 hover:bg-red-500/10 text-red-400 text-left flex items-center gap-2",onClick:()=>{i(v.id,e.id),$()},children:[a.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})," Delete Entity"]})]})]}),y&&a.jsxs("div",{className:"ml-6 pl-4 border-l border-glass-border space-y-1 animate-slide-in",children:[N.folders.map(z=>a.jsx(j6,{folder:z,onCreateSubfolder:t,onRename:n,onDeleteFolder:r,onDeleteEntity:i,onCreateTemplate:s,onMoveEntity:l,onCreateEntity:d,onConfirmCreate:u},z.id)),N.entities.map(z=>z.isNew||z.id===I?a.jsx(Q,{item:z,type:"entity"},z.id):a.jsxs(ia,{to:aM(p,m,z,e.slug||e.id),onContextMenu:V=>R(V,"entity",z.id,z.nombre),className:`flex items-center gap-3 px-3 py-2 rounded-xl text-[11px] font-medium text-text-muted hover:text-white hover:bg-primary/10 transition-all group cursor-grab active:cursor-grabbing ${z.pending?"opacity-50 pointer-events-none":""}`,draggable:!z.pending,onDragStart:V=>{V.dataTransfer.setData("entityId",z.id),V.dataTransfer.setData("sourceFolderId",e.id)},children:[a.jsx("span",{className:"material-symbols-outlined text-sm opacity-70 group-hover:text-primary transition-colors",children:sM(z.tipoEspecial)}),a.jsx("span",{className:"truncate",children:z.nombre})]},z.id)),w&&N.folders.length===0&&N.entities.length===0&&a.jsx("div",{className:"px-3 py-2 text-[10px] text-text-muted/30 uppercase font-black italic tracking-tighter",children:"Empty Sector"})]})]})},oM=({isOpen:e,onClose:t,onCreate:n,parentFolder:r})=>{const[i,s]=T.useState({nombre:"",descripcion:"",tipo:"FOLDER",canvasType:"BLANK"});if(!e)return null;const l=()=>{n(i),t(),s({nombre:"",descripcion:"",tipo:"FOLDER",canvasType:"BLANK"})},d=[Xs.UNIVERSE,Xs.GALAXY,Xs.SYSTEM,Xs.PLANET];return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-[#1a1b26] w-full max-w-4xl rounded-2xl shadow-2xl border border-white/10 overflow-hidden flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"p-6 border-b border-white/5 flex justify-between items-center bg-[#1f202e]",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-500/20 flex items-center justify-center text-indigo-400",children:a.jsx("span",{className:"material-icons text-sm",children:"add"})}),a.jsx("h2",{className:"text-xl font-semibold text-white",children:r?"Crear Nuevo Espacio":"Crear Nuevo Mapa"})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition",children:a.jsx("span",{className:"material-icons",children:"close"})})]}),a.jsx("div",{className:"p-8 overflow-y-auto flex-1",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-sm font-black uppercase tracking-widest text-indigo-400",children:"Identidad"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-[10px] font-black text-white/30 uppercase mb-2",children:"Nombre del Espacio"}),a.jsx("input",{autoFocus:!0,type:"text",value:i.nombre,onChange:u=>s({...i,nombre:u.target.value}),className:"w-full bg-black/40 border border-white/5 rounded-2xl px-5 py-4 text-white focus:outline-none focus:border-indigo-500/50 transition-all shadow-inner",placeholder:"ej. Sistema Solar"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-[10px] font-black text-white/30 uppercase mb-2",children:"Descripcin"}),a.jsx("textarea",{value:i.descripcion,onChange:u=>s({...i,descripcion:u.target.value}),className:"w-full h-32 bg-black/40 border border-white/5 rounded-2xl px-5 py-4 text-white focus:outline-none focus:border-indigo-500/50 resize-none transition-all",placeholder:"Detalles sobre este nivel jerrquico..."})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-sm font-black uppercase tracking-widest text-indigo-400",children:"Configuracin"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"block text-[10px] font-black text-white/30 uppercase mb-1",children:"Tipo de Jerarqua"}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:d.concat([{id:"FOLDER",label:"Carpeta",icon:"folder",color:"text-white/50"}]).map(u=>a.jsxs("div",{onClick:()=>s({...i,tipo:u.id}),className:`flex items-center gap-3 p-3 rounded-xl border cursor-pointer transition-all ${i.tipo===u.id?"bg-indigo-500/10 border-indigo-500/50":"bg-white/5 border-white/5 hover:bg-white/10"}`,children:[a.jsx("span",{className:`material-icons text-lg ${u.color||""}`,children:u.icon}),a.jsx("span",{className:"text-xs font-bold text-white/80",children:u.label})]},u.id||"FOLDER"))})]}),a.jsx("div",{className:"p-4 rounded-2xl bg-indigo-500/5 border border-indigo-500/10",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-500/20 flex items-center justify-center text-indigo-400",children:a.jsx("span",{className:"material-icons",children:"info"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] uppercase font-black text-indigo-300",children:"Ubicacin Actual"}),a.jsx("p",{className:"text-xs text-indigo-100/50",children:r?r.nombre:"Raz del Mundo"})]})]})})]})]})}),a.jsxs("div",{className:"p-6 border-t border-white/5 flex justify-end gap-3 bg-[#1f202e]",children:[a.jsx("button",{onClick:t,className:"px-6 py-3 rounded-xl text-xs font-black uppercase tracking-widest text-text-muted hover:text-white transition",children:"Cancelar"}),a.jsx("button",{onClick:l,disabled:!i.nombre,className:"px-8 py-3 rounded-xl bg-indigo-600 hover:bg-indigo-500 text-white text-xs font-black uppercase tracking-widest shadow-lg shadow-indigo-500/20 transition-all disabled:opacity-30 disabled:pointer-events-none",children:"Confirmar y Crear"})]})]})})},lM=()=>{const{username:e,projectName:t}=zn(),n=Fn(),{handleCreateEntity:r,...i}=da()||{},[s,l]=T.useState([]),[d,u]=T.useState(!1),[h,p]=T.useState(!1),[m,x]=T.useState(null),[y,S]=T.useState(!1),[N,k]=T.useState(null),w=`/${e}/${t}/bible`;T.useEffect(()=>{j()},[t]);const j=async()=>{try{const F=await ue.get("/world-bible/folders");l(F)}catch(F){console.error("Error loading folders:",F)}},v=(F=null)=>{x(F),p(!0),u(!1)},_=async(F=null,G="FOLDER")=>{try{const R=F?typeof F=="object"?F.id:F:null,$=await ue.post("/world-bible/folders",{nombre:G==="TIMELINE"?"Nueva Lnea de Tiempo":"Nueva Carpeta",padreId:R,tipo:G});if(R===null){const B=await ue.get("/world-bible/folders");l(B),window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:null}}))}else window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:R,optimisticType:"folder",item:$,expand:!0}}))}catch(R){console.error("Error creating simple folder:",R)}},E=async F=>{try{const G=m?m.id:null,R=await ue.post("/world-bible/folders",{nombre:F.nombre,descripcion:F.descripcion,padreId:G,tipo:F.tipo});if(G===null){const $=await ue.get("/world-bible/folders");l($),window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:null}}))}else R.id||console.error("CRITICAL: Created folder has no ID!",R),window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:G,optimisticType:"folder",item:R,expand:!0}}))}catch(G){console.error(G),alert("Error creating folder/zone.")}},A=async(F,G="entidadindividual")=>{const R=typeof F=="object"?F.slug||F.id:F;n(`${w}/folder/${R}/entity/new/${G}`)},D=async(F,G)=>{try{await ue.put(`/world-bible/folders/${F}`,{nombre:G}),l(R=>R.map($=>$.id===F?{...$,nombre:G}:$))}catch(R){throw R}},M=(F,G=null)=>{k({id:F,parentId:G,type:"folder"}),S(!0)},I=async()=>{if(!N)return;const{id:F,parentId:G,type:R,folderId:$}=N;try{R==="folder"?(await ue.delete(`/world-bible/folders/${F}`),G===null&&l(B=>B.filter(Q=>Q.id!==F)),window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:G,removeId:F,type:"folder"}}))):R==="entity"&&(await ue.delete(`/world-bible/entities/${F}`),window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:$,removeId:F,type:"entity"}})))}catch(B){console.error("Deletion failed:",B),alert("Error trying to delete item.")}finally{k(null)}},P=(F,G)=>{k({id:F,folderId:G,type:"entity"}),S(!0)},L=async(F,G,R,$,B)=>{try{if(R==="folder")typeof F=="number"&&!F.toString().startsWith("temp")&&(await ue.put(`/world-bible/folders/${F}`,{nombre:G}),window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:$,confirmedType:"folder",oldId:F,item:{id:F,nombre:G,parentId:$,tipo:B,uiKey:Date.now()}}})),$||l(Q=>Q.map(K=>K.id===F?{...K,nombre:G}:K)));else if(R==="entity")if(typeof F=="string"&&F.startsWith("new-")){const Q=await ue.post("/world-bible/entities",{nombre:G,carpetaId:$,tipoEspecial:B||"entidadindividual"});window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:$,confirmedType:"entity",oldId:F,item:Q}}))}else await ue.put(`/world-bible/entities/${F}`,{nombre:G}),window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:$,confirmedType:"entity",oldId:F,item:{id:F,nombre:G,carpeta:{id:$},tipoEspecial:B,slug:F}}})),window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:$}}))}catch(Q){console.error("Creation/Rename failed",Q),R==="folder"&&M(F,$)}};return a.jsxs("div",{className:"flex h-full w-full bg-background-dark max-w-[1920px] mx-auto",children:[a.jsxs("aside",{className:"w-80 flex-none flex flex-col border-r border-glass-border bg-surface-dark/50 z-10",children:[a.jsxs("div",{className:"p-4 border-b border-glass-border",children:[a.jsxs("div",{className:"relative group mb-3",children:[a.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-text-muted text-sm group-focus-within:text-primary transition-colors",children:"search"}),a.jsx("input",{type:"text",placeholder:"Buscar en Biblia...",className:"w-full bg-surface-light/50 border border-glass-border rounded-xl py-2 pl-9 pr-3 text-xs focus:border-primary/50 outline-none transition-all text-white placeholder:text-text-muted/50"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-[10px] font-black uppercase tracking-widest text-text-muted",children:"Explorador"}),a.jsx("div",{className:"relative",children:a.jsx("button",{className:"transition-colors hover:text-white text-primary",onClick:()=>_(null),title:"Crear Carpeta",children:a.jsx("span",{className:"material-symbols-outlined text-sm",children:"create_new_folder"})})})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar p-2 space-y-0.5",children:s.length===0?a.jsxs("div",{className:"p-8 text-center opacity-30",children:[a.jsx("span",{className:"material-symbols-outlined text-3xl mb-2",children:"folder_off"}),a.jsx("p",{className:"text-[10px] uppercase font-bold",children:"Biblia Vaca"})]}):s.map(F=>a.jsx(j6,{folder:F,onCreateSubfolder:_,onRename:D,onDeleteFolder:M,onDeleteEntity:M,onCreateTemplate:()=>{},onMoveEntity:(G,R,$)=>console.log("move",G,R,$),onCreateEntity:A,onConfirmCreate:L},F.uiKey||F.id))})]}),a.jsx("main",{className:"flex-1 overflow-hidden relative bg-gradient-to-br from-background-dark to-surface-dark/20",children:a.jsx(Xx,{context:{...i,folders:s,handleCreateEntity:A,handleOpenCreateModal:v,handleDeleteFolder:M,handleDeleteEntity:P,handleCreateSimpleFolder:_}})}),a.jsx(oM,{isOpen:h,onClose:()=>p(!1),onCreate:E,parentFolder:m}),a.jsx(Lc,{isOpen:y,onClose:()=>S(!1),onConfirm:I,title:(N==null?void 0:N.type)==="folder"?"Borrar Carpeta":"Borrar Entidad",message:(N==null?void 0:N.type)==="folder"?"Esta accin eliminar la carpeta y todo su contenido. Ests seguro?":"Ests seguro de querer eliminar esta entidad de tu mundo?",confirmText:"S, borrar"})]})},cM=()=>{const{username:e,projectName:t}=zn(),{handleOpenCreateModal:n,handleDeleteFolder:r,handleCreateSimpleFolder:i,folders:s=[]}=da();return s===void 0?a.jsx("div",{className:"p-20 text-center animate-pulse text-text-muted",children:"Loading World Bible..."}):a.jsxs("div",{className:"flex-1 p-8 max-w-[1600px] mx-auto w-full h-full overflow-y-auto",children:[a.jsxs("header",{className:"mb-8 flex items-end justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 text-xs font-black uppercase tracking-widest text-primary italic mb-2",children:[a.jsx("span",{className:"material-symbols-outlined text-sm",children:"auto_stories"}),"World Bible"]}),a.jsx("h1",{className:"text-4xl font-black text-white tracking-tighter",children:"Root Index"}),a.jsx("p",{className:"text-text-muted mt-2 max-w-lg text-sm",children:"The central archive of your world. Organize characters, locations, timelines, and maps."})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("button",{onClick:()=>i(null,"FOLDER"),className:"px-6 py-2 bg-primary hover:bg-primary-light text-white rounded-xl text-xs font-bold flex items-center gap-2 transition-all shadow-lg shadow-primary/20",children:[a.jsx("span",{className:"material-symbols-outlined text-sm",children:"create_new_folder"})," Nueva Carpeta"]})})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:s.map(l=>a.jsx(Gg,{item:l,type:"folder",linkTo:`/${e}/${t}/bible/folder/${l.slug||l.id}`,onDelete:()=>r(l.id)},l.id))}),s.length===0&&a.jsxs("div",{className:"p-20 text-center border-2 border-dashed border-glass-border rounded-[3rem] opacity-30 mt-8",children:[a.jsx("span",{className:"material-symbols-outlined text-6xl mb-4 text-text-muted",children:"library_books"}),a.jsx("h3",{className:"text-xl font-bold text-white uppercase tracking-widest",children:"Archivo Vaco"}),a.jsx("p",{className:"text-text-muted mt-2",children:"Comienza creando espacios para organizar tu mundo."})]})]})};var k6={exports:{}},af={},Ch={},Me={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._registerNode=e.Konva=e.glob=void 0;const t=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}e.glob=typeof pv<"u"?pv:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},e.Konva={_global:e.glob,version:"9.3.16",isBrowser:n(),isUnminified:/param/.test((function(i){}).toString()),dblClickWindow:400,getAngle(i){return e.Konva.angleDeg?i*t:i},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return e.Konva.DD.isDragging},isTransforming(){var i;return(i=e.Konva.Transformer)===null||i===void 0?void 0:i.isTransforming()},isDragReady(){return!!e.Konva.DD.node},releaseCanvasOnDestroy:!0,document:e.glob.document,_injectGlobal(i){e.glob.Konva=i}};const r=i=>{e.Konva[i.prototype.getClassName()]=i};e._registerNode=r,e.Konva._injectGlobal(e.Konva)})(Me);var pt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Util=e.Transform=void 0;const t=Me;class n{constructor(_=[1,0,0,1,0,0]){this.dirty=!1,this.m=_&&_.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(_){_.m[0]=this.m[0],_.m[1]=this.m[1],_.m[2]=this.m[2],_.m[3]=this.m[3],_.m[4]=this.m[4],_.m[5]=this.m[5]}point(_){const E=this.m;return{x:E[0]*_.x+E[2]*_.y+E[4],y:E[1]*_.x+E[3]*_.y+E[5]}}translate(_,E){return this.m[4]+=this.m[0]*_+this.m[2]*E,this.m[5]+=this.m[1]*_+this.m[3]*E,this}scale(_,E){return this.m[0]*=_,this.m[1]*=_,this.m[2]*=E,this.m[3]*=E,this}rotate(_){const E=Math.cos(_),A=Math.sin(_),D=this.m[0]*E+this.m[2]*A,M=this.m[1]*E+this.m[3]*A,I=this.m[0]*-A+this.m[2]*E,P=this.m[1]*-A+this.m[3]*E;return this.m[0]=D,this.m[1]=M,this.m[2]=I,this.m[3]=P,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(_,E){const A=this.m[0]+this.m[2]*E,D=this.m[1]+this.m[3]*E,M=this.m[2]+this.m[0]*_,I=this.m[3]+this.m[1]*_;return this.m[0]=A,this.m[1]=D,this.m[2]=M,this.m[3]=I,this}multiply(_){const E=this.m[0]*_.m[0]+this.m[2]*_.m[1],A=this.m[1]*_.m[0]+this.m[3]*_.m[1],D=this.m[0]*_.m[2]+this.m[2]*_.m[3],M=this.m[1]*_.m[2]+this.m[3]*_.m[3],I=this.m[0]*_.m[4]+this.m[2]*_.m[5]+this.m[4],P=this.m[1]*_.m[4]+this.m[3]*_.m[5]+this.m[5];return this.m[0]=E,this.m[1]=A,this.m[2]=D,this.m[3]=M,this.m[4]=I,this.m[5]=P,this}invert(){const _=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),E=this.m[3]*_,A=-this.m[1]*_,D=-this.m[2]*_,M=this.m[0]*_,I=_*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),P=_*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=E,this.m[1]=A,this.m[2]=D,this.m[3]=M,this.m[4]=I,this.m[5]=P,this}getMatrix(){return this.m}decompose(){const _=this.m[0],E=this.m[1],A=this.m[2],D=this.m[3],M=this.m[4],I=this.m[5],P=_*D-E*A,L={x:M,y:I,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(_!=0||E!=0){const F=Math.sqrt(_*_+E*E);L.rotation=E>0?Math.acos(_/F):-Math.acos(_/F),L.scaleX=F,L.scaleY=P/F,L.skewX=(_*A+E*D)/P,L.skewY=0}else if(A!=0||D!=0){const F=Math.sqrt(A*A+D*D);L.rotation=Math.PI/2-(D>0?Math.acos(-A/F):-Math.acos(A/F)),L.scaleX=P/F,L.scaleY=F,L.skewX=0,L.skewY=(_*A+E*D)/P}return L.rotation=e.Util._getRotation(L.rotation),L}}e.Transform=n;let r="[object Array]",i="[object Number]",s="[object String]",l="[object Boolean]",d=Math.PI/180,u=180/Math.PI,h="#",p="",m="0",x="Konva warning: ",y="Konva error: ",S="rgb(",N={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},k=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,w=[];const j=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(v){setTimeout(v,60)};e.Util={_isElement(v){return!!(v&&v.nodeType==1)},_isFunction(v){return!!(v&&v.constructor&&v.call&&v.apply)},_isPlainObject(v){return!!v&&v.constructor===Object},_isArray(v){return Object.prototype.toString.call(v)===r},_isNumber(v){return Object.prototype.toString.call(v)===i&&!isNaN(v)&&isFinite(v)},_isString(v){return Object.prototype.toString.call(v)===s},_isBoolean(v){return Object.prototype.toString.call(v)===l},isObject(v){return v instanceof Object},isValidSelector(v){if(typeof v!="string")return!1;const _=v[0];return _==="#"||_==="."||_===_.toUpperCase()},_sign(v){return v===0||v>0?1:-1},requestAnimFrame(v){w.push(v),w.length===1&&j(function(){const _=w;w=[],_.forEach(function(E){E()})})},createCanvasElement(){const v=document.createElement("canvas");try{v.style=v.style||{}}catch{}return v},createImageElement(){return document.createElement("img")},_isInDocument(v){for(;v=v.parentNode;)if(v==document)return!0;return!1},_urlToImage(v,_){const E=e.Util.createImageElement();E.onload=function(){_(E)},E.src=v},_rgbToHex(v,_,E){return((1<<24)+(v<<16)+(_<<8)+E).toString(16).slice(1)},_hexToRgb(v){v=v.replace(h,p);const _=parseInt(v,16);return{r:_>>16&255,g:_>>8&255,b:_&255}},getRandomColor(){let v=(Math.random()*16777215<<0).toString(16);for(;v.length<6;)v=m+v;return h+v},getRGB(v){let _;return v in N?(_=N[v],{r:_[0],g:_[1],b:_[2]}):v[0]===h?this._hexToRgb(v.substring(1)):v.substr(0,4)===S?(_=k.exec(v.replace(/ /g,"")),{r:parseInt(_[1],10),g:parseInt(_[2],10),b:parseInt(_[3],10)}):{r:0,g:0,b:0}},colorToRGBA(v){return v=v||"black",e.Util._namedColorToRBA(v)||e.Util._hex3ColorToRGBA(v)||e.Util._hex4ColorToRGBA(v)||e.Util._hex6ColorToRGBA(v)||e.Util._hex8ColorToRGBA(v)||e.Util._rgbColorToRGBA(v)||e.Util._rgbaColorToRGBA(v)||e.Util._hslColorToRGBA(v)},_namedColorToRBA(v){const _=N[v.toLowerCase()];return _?{r:_[0],g:_[1],b:_[2],a:1}:null},_rgbColorToRGBA(v){if(v.indexOf("rgb(")===0){v=v.match(/rgb\(([^)]+)\)/)[1];const _=v.split(/ *, */).map(Number);return{r:_[0],g:_[1],b:_[2],a:1}}},_rgbaColorToRGBA(v){if(v.indexOf("rgba(")===0){v=v.match(/rgba\(([^)]+)\)/)[1];const _=v.split(/ *, */).map((E,A)=>E.slice(-1)==="%"?A===3?parseInt(E)/100:parseInt(E)/100*255:Number(E));return{r:_[0],g:_[1],b:_[2],a:_[3]}}},_hex8ColorToRGBA(v){if(v[0]==="#"&&v.length===9)return{r:parseInt(v.slice(1,3),16),g:parseInt(v.slice(3,5),16),b:parseInt(v.slice(5,7),16),a:parseInt(v.slice(7,9),16)/255}},_hex6ColorToRGBA(v){if(v[0]==="#"&&v.length===7)return{r:parseInt(v.slice(1,3),16),g:parseInt(v.slice(3,5),16),b:parseInt(v.slice(5,7),16),a:1}},_hex4ColorToRGBA(v){if(v[0]==="#"&&v.length===5)return{r:parseInt(v[1]+v[1],16),g:parseInt(v[2]+v[2],16),b:parseInt(v[3]+v[3],16),a:parseInt(v[4]+v[4],16)/255}},_hex3ColorToRGBA(v){if(v[0]==="#"&&v.length===4)return{r:parseInt(v[1]+v[1],16),g:parseInt(v[2]+v[2],16),b:parseInt(v[3]+v[3],16),a:1}},_hslColorToRGBA(v){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(v)){const[_,...E]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(v),A=Number(E[0])/360,D=Number(E[1])/100,M=Number(E[2])/100;let I,P,L;if(D===0)return L=M*255,{r:Math.round(L),g:Math.round(L),b:Math.round(L),a:1};M<.5?I=M*(1+D):I=M+D-M*D;const F=2*M-I,G=[0,0,0];for(let R=0;R<3;R++)P=A+1/3*-(R-1),P<0&&P++,P>1&&P--,6*P<1?L=F+(I-F)*6*P:2*P<1?L=I:3*P<2?L=F+(I-F)*(2/3-P)*6:L=F,G[R]=L*255;return{r:Math.round(G[0]),g:Math.round(G[1]),b:Math.round(G[2]),a:1}}},haveIntersection(v,_){return!(_.x>v.x+v.width||_.x+_.width<v.x||_.y>v.y+v.height||_.y+_.height<v.y)},cloneObject(v){const _={};for(const E in v)this._isPlainObject(v[E])?_[E]=this.cloneObject(v[E]):this._isArray(v[E])?_[E]=this.cloneArray(v[E]):_[E]=v[E];return _},cloneArray(v){return v.slice(0)},degToRad(v){return v*d},radToDeg(v){return v*u},_degToRad(v){return e.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),e.Util.degToRad(v)},_radToDeg(v){return e.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),e.Util.radToDeg(v)},_getRotation(v){return t.Konva.angleDeg?e.Util.radToDeg(v):v},_capitalize(v){return v.charAt(0).toUpperCase()+v.slice(1)},throw(v){throw new Error(y+v)},error(v){console.error(y+v)},warn(v){t.Konva.showWarnings&&console.warn(x+v)},each(v,_){for(const E in v)_(E,v[E])},_inRange(v,_,E){return _<=v&&v<E},_getProjectionToSegment(v,_,E,A,D,M){let I,P,L;const F=(v-E)*(v-E)+(_-A)*(_-A);if(F==0)I=v,P=_,L=(D-E)*(D-E)+(M-A)*(M-A);else{const G=((D-v)*(E-v)+(M-_)*(A-_))/F;G<0?(I=v,P=_,L=(v-D)*(v-D)+(_-M)*(_-M)):G>1?(I=E,P=A,L=(E-D)*(E-D)+(A-M)*(A-M)):(I=v+G*(E-v),P=_+G*(A-_),L=(I-D)*(I-D)+(P-M)*(P-M))}return[I,P,L]},_getProjectionToLine(v,_,E){const A=e.Util.cloneObject(v);let D=Number.MAX_VALUE;return _.forEach(function(M,I){if(!E&&I===_.length-1)return;const P=_[(I+1)%_.length],L=e.Util._getProjectionToSegment(M.x,M.y,P.x,P.y,v.x,v.y),F=L[0],G=L[1],R=L[2];R<D&&(A.x=F,A.y=G,D=R)}),A},_prepareArrayForTween(v,_,E){let A,D=[],M=[];if(v.length>_.length){const P=_;_=v,v=P}for(A=0;A<v.length;A+=2)D.push({x:v[A],y:v[A+1]});for(A=0;A<_.length;A+=2)M.push({x:_[A],y:_[A+1]});const I=[];return M.forEach(function(P){const L=e.Util._getProjectionToLine(P,D,E);I.push(L.x),I.push(L.y)}),I},_prepareToStringify(v){let _;v.visitedByCircularReferenceRemoval=!0;for(const E in v)if(v.hasOwnProperty(E)&&v[E]&&typeof v[E]=="object"){if(_=Object.getOwnPropertyDescriptor(v,E),v[E].visitedByCircularReferenceRemoval||e.Util._isElement(v[E]))if(_.configurable)delete v[E];else return null;else if(e.Util._prepareToStringify(v[E])===null)if(_.configurable)delete v[E];else return null}return delete v.visitedByCircularReferenceRemoval,v},_assign(v,_){for(const E in _)v[E]=_[E];return v},_getFirstPointerId(v){return v.touches?v.changedTouches[0].identifier:v.pointerId||999},releaseCanvas(...v){t.Konva.releaseCanvasOnDestroy&&v.forEach(_=>{_.width=0,_.height=0})},drawRoundedRectPath(v,_,E,A){let D=0,M=0,I=0,P=0;typeof A=="number"?D=M=I=P=Math.min(A,_/2,E/2):(D=Math.min(A[0]||0,_/2,E/2),M=Math.min(A[1]||0,_/2,E/2),P=Math.min(A[2]||0,_/2,E/2),I=Math.min(A[3]||0,_/2,E/2)),v.moveTo(D,0),v.lineTo(_-M,0),v.arc(_-M,M,M,Math.PI*3/2,0,!1),v.lineTo(_,E-P),v.arc(_-P,E-P,P,0,Math.PI/2,!1),v.lineTo(I,E),v.arc(I,E-I,I,Math.PI/2,Math.PI,!1),v.lineTo(0,D),v.arc(D,D,D,Math.PI,Math.PI*3/2,!1)}}})(pt);var ot={},Re={},je={};Object.defineProperty(je,"__esModule",{value:!0});je.RGBComponent=dM;je.alphaComponent=uM;je.getNumberValidator=hM;je.getNumberOrArrayOfNumbersValidator=fM;je.getNumberOrAutoValidator=pM;je.getStringValidator=mM;je.getStringOrGradientValidator=gM;je.getFunctionValidator=xM;je.getNumberArrayValidator=yM;je.getBooleanValidator=vM;je.getComponentValidator=bM;const vi=Me,xt=pt;function bi(e){return xt.Util._isString(e)?'"'+e+'"':Object.prototype.toString.call(e)==="[object Number]"||xt.Util._isBoolean(e)?e:Object.prototype.toString.call(e)}function dM(e){return e>255?255:e<0?0:Math.round(e)}function uM(e){return e>1?1:e<1e-4?1e-4:e}function hM(){if(vi.Konva.isUnminified)return function(e,t){return xt.Util._isNumber(e)||xt.Util.warn(bi(e)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),e}}function fM(e){if(vi.Konva.isUnminified)return function(t,n){const r=xt.Util._isNumber(t),i=xt.Util._isArray(t)&&t.length==e;return!r&&!i&&xt.Util.warn(bi(t)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+e+")"),t}}function pM(){if(vi.Konva.isUnminified)return function(e,t){return xt.Util._isNumber(e)||e==="auto"||xt.Util.warn(bi(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),e}}function mM(){if(vi.Konva.isUnminified)return function(e,t){return xt.Util._isString(e)||xt.Util.warn(bi(e)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),e}}function gM(){if(vi.Konva.isUnminified)return function(e,t){const n=xt.Util._isString(e),r=Object.prototype.toString.call(e)==="[object CanvasGradient]"||e&&e.addColorStop;return n||r||xt.Util.warn(bi(e)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),e}}function xM(){if(vi.Konva.isUnminified)return function(e,t){return xt.Util._isFunction(e)||xt.Util.warn(bi(e)+' is a not valid value for "'+t+'" attribute. The value should be a function.'),e}}function yM(){if(vi.Konva.isUnminified)return function(e,t){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&e instanceof n||(xt.Util._isArray(e)?e.forEach(function(r){xt.Util._isNumber(r)||xt.Util.warn('"'+t+'" attribute has non numeric element '+r+". Make sure that all elements are numbers.")}):xt.Util.warn(bi(e)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),e}}function vM(){if(vi.Konva.isUnminified)return function(e,t){return e===!0||e===!1||xt.Util.warn(bi(e)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),e}}function bM(e){if(vi.Konva.isUnminified)return function(t,n){return t==null||xt.Util.isObject(t)||xt.Util.warn(bi(t)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+e),t}}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Factory=void 0;const t=pt,n=je,r="get",i="set";e.Factory={addGetterSetter(s,l,d,u,h){e.Factory.addGetter(s,l,d),e.Factory.addSetter(s,l,u,h),e.Factory.addOverloadedGetterSetter(s,l)},addGetter(s,l,d){const u=r+t.Util._capitalize(l);s.prototype[u]=s.prototype[u]||function(){const h=this.attrs[l];return h===void 0?d:h}},addSetter(s,l,d,u){const h=i+t.Util._capitalize(l);s.prototype[h]||e.Factory.overWriteSetter(s,l,d,u)},overWriteSetter(s,l,d,u){const h=i+t.Util._capitalize(l);s.prototype[h]=function(p){return d&&p!==void 0&&p!==null&&(p=d.call(this,p,l)),this._setAttr(l,p),u&&u.call(this),this}},addComponentsGetterSetter(s,l,d,u,h){let p=d.length,m=t.Util._capitalize,x=r+m(l),y=i+m(l),S,N;s.prototype[x]=function(){const w={};for(S=0;S<p;S++)N=d[S],w[N]=this.getAttr(l+m(N));return w};const k=(0,n.getComponentValidator)(d);s.prototype[y]=function(w){let j=this.attrs[l],v;u&&(w=u.call(this,w)),k&&k.call(this,w,l);for(v in w)w.hasOwnProperty(v)&&this._setAttr(l+m(v),w[v]);return w||d.forEach(_=>{this._setAttr(l+m(_),void 0)}),this._fireChangeEvent(l,j,w),h&&h.call(this),this},e.Factory.addOverloadedGetterSetter(s,l)},addOverloadedGetterSetter(s,l){const d=t.Util._capitalize(l),u=i+d,h=r+d;s.prototype[l]=function(){return arguments.length?(this[u](arguments[0]),this):this[h]()}},addDeprecatedGetterSetter(s,l,d,u){t.Util.error("Adding deprecated "+l);const h=r+t.Util._capitalize(l),p=l+" property is deprecated and will be removed soon. Look at Konva change log for more information.";s.prototype[h]=function(){t.Util.error(p);const m=this.attrs[l];return m===void 0?d:m},e.Factory.addSetter(s,l,u,function(){t.Util.error(p)}),e.Factory.addOverloadedGetterSetter(s,l)},backCompat(s,l){t.Util.each(l,function(d,u){const h=s.prototype[u],p=r+t.Util._capitalize(d),m=i+t.Util._capitalize(d);function x(){h.apply(this,arguments),t.Util.error('"'+d+'" method is deprecated and will be removed soon. Use ""'+u+'" instead.')}s.prototype[d]=x,s.prototype[p]=x,s.prototype[m]=x})},afterSetFilter(){this._filterUpToDate=!1}}})(Re);var gr={},di={};Object.defineProperty(di,"__esModule",{value:!0});di.HitContext=di.SceneContext=di.Context=void 0;const C6=pt,wM=Me;function NM(e){let t=[],n=e.length,r=C6.Util,i,s;for(i=0;i<n;i++)s=e[i],r._isNumber(s)?s=Math.round(s*1e3)/1e3:r._isString(s)||(s=s+""),t.push(s);return t}const Tb=",",SM="(",_M=")",jM="([",kM="])",CM=";",EM="()",PM="=",Mb=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],TM=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],MM=100;class of{constructor(t){this.canvas=t,wM.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,n){let r=this.traceArr,i=r.length,s="",l,d,u,h;for(l=0;l<i;l++)d=r[l],u=d.method,u?(h=d.args,s+=u,t?s+=EM:C6.Util._isArray(h[0])?s+=jM+h.join(Tb)+kM:(n&&(h=h.map(p=>typeof p=="number"?Math.floor(p):p)),s+=SM+h.join(Tb)+_M)):(s+=d.property,t||(s+=PM+d.val)),s+=CM;return s}clearTrace(){this.traceArr=[]}_trace(t){let n=this.traceArr,r;n.push(t),r=n.length,r>=MM&&n.shift()}reset(){const t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){const n=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(t){const n=t.attrs.lineCap;n&&this.setAttr("lineCap",n)}_applyOpacity(t){const n=t.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(t){const n=t.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}setAttr(t,n){this._context[t]=n}arc(t,n,r,i,s,l){this._context.arc(t,n,r,i,s,l)}arcTo(t,n,r,i,s){this._context.arcTo(t,n,r,i,s)}beginPath(){this._context.beginPath()}bezierCurveTo(t,n,r,i,s,l){this._context.bezierCurveTo(t,n,r,i,s,l)}clearRect(t,n,r,i){this._context.clearRect(t,n,r,i)}clip(...t){this._context.clip.apply(this._context,t)}closePath(){this._context.closePath()}createImageData(t,n){const r=arguments;if(r.length===2)return this._context.createImageData(t,n);if(r.length===1)return this._context.createImageData(t)}createLinearGradient(t,n,r,i){return this._context.createLinearGradient(t,n,r,i)}createPattern(t,n){return this._context.createPattern(t,n)}createRadialGradient(t,n,r,i,s,l){return this._context.createRadialGradient(t,n,r,i,s,l)}drawImage(t,n,r,i,s,l,d,u,h){const p=arguments,m=this._context;p.length===3?m.drawImage(t,n,r):p.length===5?m.drawImage(t,n,r,i,s):p.length===9&&m.drawImage(t,n,r,i,s,l,d,u,h)}ellipse(t,n,r,i,s,l,d,u){this._context.ellipse(t,n,r,i,s,l,d,u)}isPointInPath(t,n,r,i){return r?this._context.isPointInPath(r,t,n,i):this._context.isPointInPath(t,n,i)}fill(...t){this._context.fill.apply(this._context,t)}fillRect(t,n,r,i){this._context.fillRect(t,n,r,i)}strokeRect(t,n,r,i){this._context.strokeRect(t,n,r,i)}fillText(t,n,r,i){i?this._context.fillText(t,n,r,i):this._context.fillText(t,n,r)}measureText(t){return this._context.measureText(t)}getImageData(t,n,r,i){return this._context.getImageData(t,n,r,i)}lineTo(t,n){this._context.lineTo(t,n)}moveTo(t,n){this._context.moveTo(t,n)}rect(t,n,r,i){this._context.rect(t,n,r,i)}roundRect(t,n,r,i,s){this._context.roundRect(t,n,r,i,s)}putImageData(t,n,r){this._context.putImageData(t,n,r)}quadraticCurveTo(t,n,r,i){this._context.quadraticCurveTo(t,n,r,i)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,n){this._context.scale(t,n)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,n,r,i,s,l){this._context.setTransform(t,n,r,i,s,l)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,n,r,i){this._context.strokeText(t,n,r,i)}transform(t,n,r,i,s,l){this._context.transform(t,n,r,i,s,l)}translate(t,n){this._context.translate(t,n)}_enableTrace(){let t=this,n=Mb.length,r=this.setAttr,i,s;const l=function(d){let u=t[d],h;t[d]=function(){return s=NM(Array.prototype.slice.call(arguments,0)),h=u.apply(t,arguments),t._trace({method:d,args:s}),h}};for(i=0;i<n;i++)l(Mb[i]);t.setAttr=function(){r.apply(t,arguments);const d=arguments[0];let u=arguments[1];(d==="shadowOffsetX"||d==="shadowOffsetY"||d==="shadowBlur")&&(u=u/this.canvas.getPixelRatio()),t._trace({property:d,val:u})}}_applyGlobalCompositeOperation(t){const n=t.attrs.globalCompositeOperation;!n||n==="source-over"||this.setAttr("globalCompositeOperation",n)}}di.Context=of;TM.forEach(function(e){Object.defineProperty(of.prototype,e,{get(){return this._context[e]},set(t){this._context[e]=t}})});class RM extends of{constructor(t,{willReadFrequently:n=!1}={}){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:n})}_fillColor(t){const n=t.fill();this.setAttr("fillStyle",n),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){const n=t._getLinearGradient();n&&(this.setAttr("fillStyle",n),t._fillFunc(this))}_fillRadialGradient(t){const n=t._getRadialGradient();n&&(this.setAttr("fillStyle",n),t._fillFunc(this))}_fill(t){const n=t.fill(),r=t.getFillPriority();if(n&&r==="color"){this._fillColor(t);return}const i=t.getFillPatternImage();if(i&&r==="pattern"){this._fillPattern(t);return}const s=t.getFillLinearGradientColorStops();if(s&&r==="linear-gradient"){this._fillLinearGradient(t);return}const l=t.getFillRadialGradientColorStops();if(l&&r==="radial-gradient"){this._fillRadialGradient(t);return}n?this._fillColor(t):i?this._fillPattern(t):s?this._fillLinearGradient(t):l&&this._fillRadialGradient(t)}_strokeLinearGradient(t){const n=t.getStrokeLinearGradientStartPoint(),r=t.getStrokeLinearGradientEndPoint(),i=t.getStrokeLinearGradientColorStops(),s=this.createLinearGradient(n.x,n.y,r.x,r.y);if(i){for(let l=0;l<i.length;l+=2)s.addColorStop(i[l],i[l+1]);this.setAttr("strokeStyle",s)}}_stroke(t){const n=t.dash(),r=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!r){this.save();const s=this.getCanvas().getPixelRatio();this.setTransform(s,0,0,s,0,0)}this._applyLineCap(t),n&&t.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),r||this.restore()}}_applyShadow(t){var n,r,i;const s=(n=t.getShadowRGBA())!==null&&n!==void 0?n:"black",l=(r=t.getShadowBlur())!==null&&r!==void 0?r:5,d=(i=t.getShadowOffset())!==null&&i!==void 0?i:{x:0,y:0},u=t.getAbsoluteScale(),h=this.canvas.getPixelRatio(),p=u.x*h,m=u.y*h;this.setAttr("shadowColor",s),this.setAttr("shadowBlur",l*Math.min(Math.abs(p),Math.abs(m))),this.setAttr("shadowOffsetX",d.x*p),this.setAttr("shadowOffsetY",d.y*m)}}di.SceneContext=RM;class AM extends of{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){const n=t.getStrokeScaleEnabled();if(!n){this.save();const s=this.getCanvas().getPixelRatio();this.setTransform(s,0,0,s,0,0)}this._applyLineCap(t);const r=t.hitStrokeWidth(),i=r==="auto"?t.strokeWidth():r;this.setAttr("lineWidth",i),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),n||this.restore()}}}di.HitContext=AM;Object.defineProperty(gr,"__esModule",{value:!0});gr.HitCanvas=gr.SceneCanvas=gr.Canvas=void 0;const Eh=pt,E6=di,P6=Me,IM=Re,FM=je;let wu;function zM(){if(wu)return wu;const e=Eh.Util.createCanvasElement(),t=e.getContext("2d");return wu=function(){const n=P6.Konva._global.devicePixelRatio||1,r=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return n/r}(),Eh.Util.releaseCanvas(e),wu}class lf{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const r=(t||{}).pixelRatio||P6.Konva.pixelRatio||zM();this.pixelRatio=r,this._canvas=Eh.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){const n=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";const n=this.pixelRatio;this.getContext()._context.scale(n,n)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";const n=this.pixelRatio;this.getContext()._context.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,n){this.setWidth(t||0),this.setHeight(n||0)}toDataURL(t,n){try{return this._canvas.toDataURL(t,n)}catch{try{return this._canvas.toDataURL()}catch(i){return Eh.Util.error("Unable to get data URL. "+i.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}gr.Canvas=lf;IM.Factory.addGetterSetter(lf,"pixelRatio",void 0,(0,FM.getNumberValidator)());class LM extends lf{constructor(t={width:0,height:0,willReadFrequently:!1}){super(t),this.context=new E6.SceneContext(this,{willReadFrequently:t.willReadFrequently}),this.setSize(t.width,t.height)}}gr.SceneCanvas=LM;class DM extends lf{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new E6.HitContext(this),this.setSize(t.width,t.height)}}gr.HitCanvas=DM;var cf={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DD=void 0;const t=Me,n=pt;e.DD={get isDragging(){let r=!1;return e.DD._dragElements.forEach(i=>{i.dragStatus==="dragging"&&(r=!0)}),r},justDragged:!1,get node(){let r;return e.DD._dragElements.forEach(i=>{r=i.node}),r},_dragElements:new Map,_drag(r){const i=[];e.DD._dragElements.forEach((s,l)=>{const{node:d}=s,u=d.getStage();u.setPointersPositions(r),s.pointerId===void 0&&(s.pointerId=n.Util._getFirstPointerId(r));const h=u._changedPointerPositions.find(p=>p.id===s.pointerId);if(h){if(s.dragStatus!=="dragging"){const p=d.dragDistance();if(Math.max(Math.abs(h.x-s.startPointerPos.x),Math.abs(h.y-s.startPointerPos.y))<p||(d.startDrag({evt:r}),!d.isDragging()))return}d._setDragPosition(r,s),i.push(d)}}),i.forEach(s=>{s.fire("dragmove",{type:"dragmove",target:s,evt:r},!0)})},_endDragBefore(r){const i=[];e.DD._dragElements.forEach(s=>{const{node:l}=s,d=l.getStage();if(r&&d.setPointersPositions(r),!d._changedPointerPositions.find(p=>p.id===s.pointerId))return;(s.dragStatus==="dragging"||s.dragStatus==="stopped")&&(e.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,s.dragStatus="stopped");const h=s.node.getLayer()||s.node instanceof t.Konva.Stage&&s.node;h&&i.indexOf(h)===-1&&i.push(h)}),i.forEach(s=>{s.draw()})},_endDragAfter(r){e.DD._dragElements.forEach((i,s)=>{i.dragStatus==="stopped"&&i.node.fire("dragend",{type:"dragend",target:i.node,evt:r},!0),i.dragStatus!=="dragging"&&e.DD._dragElements.delete(s)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("touchcancel",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1),window.addEventListener("touchcancel",e.DD._endDragAfter,!1))})(cf);Object.defineProperty(ot,"__esModule",{value:!0});ot.Node=void 0;const Le=pt,$c=Re,Ml=gr,Gi=Me,Hn=cf,Nt=je,Gu="absoluteOpacity",Nu="allEventListeners",ri="absoluteTransform",Rb="absoluteScale",Us="canvas",OM="Change",UM="children",$M="konva",Vg="listening",Ab="mouseenter",Ib="mouseleave",Fb="set",zb="Shape",Bu=" ",Lb="stage",Bi="transform",GM="Stage",Hg="visible",BM=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(Bu);let VM=1;class ke{constructor(t){this._id=VM++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===Bi||t===ri)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,n){let r=this._cache.get(t);return(r===void 0||(t===Bi||t===ri)&&r.dirty===!0)&&(r=n.call(this),this._cache.set(t,r)),r}_calculate(t,n,r){if(!this._attachedDepsListeners.get(t)){const i=n.map(s=>s+"Change.konva").join(Bu);this.on(i,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,r)}_getCanvasCache(){return this._cache.get(Us)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===ri&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(Us)){const{scene:t,filter:n,hit:r}=this._cache.get(Us);Le.Util.releaseCanvas(t,n,r),this._cache.delete(Us)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){const n=t||{};let r={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let i=Math.ceil(n.width||r.width),s=Math.ceil(n.height||r.height),l=n.pixelRatio,d=n.x===void 0?Math.floor(r.x):n.x,u=n.y===void 0?Math.floor(r.y):n.y,h=n.offset||0,p=n.drawBorder||!1,m=n.hitCanvasPixelRatio||1;if(!i||!s){Le.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const x=Math.abs(Math.round(r.x)-d)>.5?1:0,y=Math.abs(Math.round(r.y)-u)>.5?1:0;i+=h*2+x,s+=h*2+y,d-=h,u-=h;const S=new Ml.SceneCanvas({pixelRatio:l,width:i,height:s}),N=new Ml.SceneCanvas({pixelRatio:l,width:0,height:0,willReadFrequently:!0}),k=new Ml.HitCanvas({pixelRatio:m,width:i,height:s}),w=S.getContext(),j=k.getContext();return k.isCache=!0,S.isCache=!0,this._cache.delete(Us),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(S.getContext()._context.imageSmoothingEnabled=!1,N.getContext()._context.imageSmoothingEnabled=!1),w.save(),j.save(),w.translate(-d,-u),j.translate(-d,-u),this._isUnderCache=!0,this._clearSelfAndDescendantCache(Gu),this._clearSelfAndDescendantCache(Rb),this.drawScene(S,this),this.drawHit(k,this),this._isUnderCache=!1,w.restore(),j.restore(),p&&(w.save(),w.beginPath(),w.rect(0,0,i,s),w.closePath(),w.setAttr("strokeStyle","red"),w.setAttr("lineWidth",5),w.stroke(),w.restore()),this._cache.set(Us,{scene:S,filter:N,hit:k,x:d,y:u}),this._requestDraw(),this}isCached(){return this._cache.has(Us)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,n){const r=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}];let i=1/0,s=1/0,l=-1/0,d=-1/0;const u=this.getAbsoluteTransform(n);return r.forEach(function(h){const p=u.point(h);i===void 0&&(i=l=p.x,s=d=p.y),i=Math.min(i,p.x),s=Math.min(s,p.y),l=Math.max(l,p.x),d=Math.max(d,p.y)}),{x:i,y:s,width:l-i,height:d-s}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();t.translate(n.x,n.y);const r=this._getCachedSceneCanvas(),i=r.pixelRatio;t.drawImage(r._canvas,0,0,r.width/i,r.height/i),t.restore()}_drawCachedHitCanvas(t){const n=this._getCanvasCache(),r=n.hit;t.save(),t.translate(n.x,n.y),t.drawImage(r._canvas,0,0,r.width/r.pixelRatio,r.height/r.pixelRatio),t.restore()}_getCachedSceneCanvas(){let t=this.filters(),n=this._getCanvasCache(),r=n.scene,i=n.filter,s=i.getContext(),l,d,u,h;if(t){if(!this._filterUpToDate){const p=r.pixelRatio;i.setSize(r.width/r.pixelRatio,r.height/r.pixelRatio);try{for(l=t.length,s.clear(),s.drawImage(r._canvas,0,0,r.getWidth()/p,r.getHeight()/p),d=s.getImageData(0,0,i.getWidth(),i.getHeight()),u=0;u<l;u++){if(h=t[u],typeof h!="function"){Le.Util.error("Filter should be type of function, but got "+typeof h+" instead. Please check correct filters");continue}h.call(this,d),s.putImageData(d,0,0)}}catch(m){Le.Util.error("Unable to apply filter. "+m.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return i}return r}on(t,n){if(this._cache&&this._cache.delete(Nu),arguments.length===3)return this._delegate.apply(this,arguments);let r=t.split(Bu),i=r.length,s,l,d,u,h;for(s=0;s<i;s++)l=r[s],d=l.split("."),u=d[0],h=d[1]||"",this.eventListeners[u]||(this.eventListeners[u]=[]),this.eventListeners[u].push({name:h,handler:n});return this}off(t,n){let r=(t||"").split(Bu),i=r.length,s,l,d,u,h,p;if(this._cache&&this._cache.delete(Nu),!t)for(l in this.eventListeners)this._off(l);for(s=0;s<i;s++)if(d=r[s],u=d.split("."),h=u[0],p=u[1],h)this.eventListeners[h]&&this._off(h,p,n);else for(l in this.eventListeners)this._off(l,p,n);return this}dispatchEvent(t){const n={target:this,type:t.type,evt:t};return this.fire(t.type,n),this}addEventListener(t,n){return this.on(t,function(r){n.call(this,r.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,n,r){const i=this;this.on(t,function(s){const l=s.target.findAncestors(n,!0,i);for(let d=0;d<l.length;d++)s=Le.Util.cloneObject(s),s.currentTarget=l[d],r.call(l[d],s)})}remove(){return this.isDragging()&&this.stopDrag(),Hn.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(ri),this._clearSelfAndDescendantCache(Gu),this._clearSelfAndDescendantCache(Rb),this._clearSelfAndDescendantCache(Lb),this._clearSelfAndDescendantCache(Hg),this._clearSelfAndDescendantCache(Vg)}_remove(){this._clearCaches();const t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){const n="get"+Le.Util._capitalize(t);return Le.Util._isFunction(this[n])?this[n]():this.attrs[t]}getAncestors(){let t=this.getParent(),n=[];for(;t;)n.push(t),t=t.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{let n,r;if(!t)return this;for(n in t)n!==UM&&(r=Fb+Le.Util._capitalize(n),Le.Util._isFunction(this[r])?this[r](t[n]):this._setAttr(n,t[n]))}),this}isListening(){return this._getCache(Vg,this._isListening)}_isListening(t){if(!this.listening())return!1;const r=this.getParent();return r&&r!==t&&this!==t?r._isListening(t):!0}isVisible(){return this._getCache(Hg,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const r=this.getParent();return r&&r!==t&&this!==t?r._isVisible(t):!0}shouldDrawHit(t,n=!1){if(t)return this._isVisible(t)&&this._isListening(t);const r=this.getLayer();let i=!1;Hn.DD._dragElements.forEach(l=>{l.dragStatus==="dragging"&&(l.node.nodeType==="Stage"||l.node.getLayer()===r)&&(i=!0)});const s=!n&&!Gi.Konva.hitOnDragEnabled&&(i||Gi.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!s}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let t=this.getDepth(),n=this,r=0,i,s,l,d;function u(p){for(i=[],s=p.length,l=0;l<s;l++)d=p[l],r++,d.nodeType!==zb&&(i=i.concat(d.getChildren().slice())),d._id===n._id&&(l=s);i.length>0&&i[0].getDepth()<=t&&u(i)}const h=this.getStage();return n.nodeType!==GM&&h&&u(h.getChildren()),r}getDepth(){let t=0,n=this.parent;for(;n;)t++,n=n.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Bi),this._clearSelfAndDescendantCache(ri)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const t=this.getStage();if(!t)return null;const n=t.getPointerPosition();if(!n)return null;const r=this.getAbsoluteTransform().copy();return r.invert(),r.point(n)}getAbsolutePosition(t){let n=!1,r=this.parent;for(;r;){if(r.isCached()){n=!0;break}r=r.parent}n&&!t&&(t=!0);const i=this.getAbsoluteTransform(t).getMatrix(),s=new Le.Transform,l=this.offset();return s.m=i.slice(),s.translate(l.x,l.y),s.getTranslation()}setAbsolutePosition(t){const{x:n,y:r,...i}=this._clearTransform();this.attrs.x=n,this.attrs.y=r,this._clearCache(Bi);const s=this._getAbsoluteTransform().copy();return s.invert(),s.translate(t.x,t.y),t={x:this.attrs.x+s.getTranslation().x,y:this.attrs.y+s.getTranslation().y},this._setTransform(i),this.setPosition({x:t.x,y:t.y}),this._clearCache(Bi),this._clearSelfAndDescendantCache(ri),this}_setTransform(t){let n;for(n in t)this.attrs[n]=t[n]}_clearTransform(){const t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){let n=t.x,r=t.y,i=this.x(),s=this.y();return n!==void 0&&(i+=n),r!==void 0&&(s+=r),this.setPosition({x:i,y:s}),this}_eachAncestorReverse(t,n){let r=[],i=this.getParent(),s,l;if(!(n&&n._id===this._id)){for(r.unshift(this);i&&(!n||i._id!==n._id);)r.unshift(i),i=i.parent;for(s=r.length,l=0;l<s;l++)t(r[l])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return Le.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const t=this.index,n=this.parent.getChildren().length;return t<n-1?(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return Le.Util.warn("Node has no parent. moveUp function is ignored."),!1;const t=this.index,n=this.parent.getChildren().length;return t<n-1?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return Le.Util.warn("Node has no parent. moveDown function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return Le.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(t){if(!this.parent)return Le.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&Le.Util.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Gu,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let t=this.opacity();const n=this.getParent();return n&&!n._isUnderCache&&(t*=n.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){let t=this.getAttrs(),n,r,i,s,l;const d={attrs:{},className:this.getClassName()};for(n in t)r=t[n],l=Le.Util.isObject(r)&&!Le.Util._isPlainObject(r)&&!Le.Util._isArray(r),!l&&(i=typeof this[n]=="function"&&this[n],delete t[n],s=i?i.call(this):null,t[n]=r,s!==r&&(d.attrs[n]=r));return Le.Util._prepareToStringify(d)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,n,r){const i=[];n&&this._isMatch(t)&&i.push(this);let s=this.parent;for(;s;){if(s===r)return i;s._isMatch(t)&&i.push(s),s=s.parent}return i}isAncestorOf(t){return!1}findAncestor(t,n,r){return this.findAncestors(t,n,r)[0]}_isMatch(t){if(!t)return!1;if(typeof t=="function")return t(this);let n=t.replace(/ /g,"").split(","),r=n.length,i,s;for(i=0;i<r;i++)if(s=n[i],Le.Util.isValidSelector(s)||(Le.Util.warn('Selector "'+s+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),Le.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),Le.Util.warn("Konva is awesome, right?")),s.charAt(0)==="#"){if(this.id()===s.slice(1))return!0}else if(s.charAt(0)==="."){if(this.hasName(s.slice(1)))return!0}else if(this.className===s||this.nodeType===s)return!0;return!1}getLayer(){const t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(Lb,this._getStage)}_getStage(){const t=this.getParent();return t?t.getStage():null}fire(t,n={},r){return n.target=n.target||this,r?this._fireAndBubble(t,n):this._fire(t,n),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(ri,this._getAbsoluteTransform)}_getAbsoluteTransform(t){let n;if(t)return n=new Le.Transform,this._eachAncestorReverse(function(r){const i=r.transformsEnabled();i==="all"?n.multiply(r.getTransform()):i==="position"&&n.translate(r.x()-r.offsetX(),r.y()-r.offsetY())},t),n;{n=this._cache.get(ri)||new Le.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();const r=this.transformsEnabled();if(r==="all")n.multiply(this.getTransform());else if(r==="position"){const i=this.attrs.x||0,s=this.attrs.y||0,l=this.attrs.offsetX||0,d=this.attrs.offsetY||0;n.translate(i-l,s-d)}return n.dirty=!1,n}}getAbsoluteScale(t){let n=this;for(;n;)n._isUnderCache&&(t=n),n=n.getParent();const i=this.getAbsoluteTransform(t).decompose();return{x:i.scaleX,y:i.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Bi,this._getTransform)}_getTransform(){var t,n;const r=this._cache.get(Bi)||new Le.Transform;r.reset();const i=this.x(),s=this.y(),l=Gi.Konva.getAngle(this.rotation()),d=(t=this.attrs.scaleX)!==null&&t!==void 0?t:1,u=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,h=this.attrs.skewX||0,p=this.attrs.skewY||0,m=this.attrs.offsetX||0,x=this.attrs.offsetY||0;return(i!==0||s!==0)&&r.translate(i,s),l!==0&&r.rotate(l),(h!==0||p!==0)&&r.skew(h,p),(d!==1||u!==1)&&r.scale(d,u),(m!==0||x!==0)&&r.translate(-1*m,-1*x),r.dirty=!1,r}clone(t){let n=Le.Util.cloneObject(this.attrs),r,i,s,l,d;for(r in t)n[r]=t[r];const u=new this.constructor(n);for(r in this.eventListeners)for(i=this.eventListeners[r],s=i.length,l=0;l<s;l++)d=i[l],d.name.indexOf($M)<0&&(u.eventListeners[r]||(u.eventListeners[r]=[]),u.eventListeners[r].push(d));return u}_toKonvaCanvas(t){t=t||{};const n=this.getClientRect(),r=this.getStage(),i=t.x!==void 0?t.x:Math.floor(n.x),s=t.y!==void 0?t.y:Math.floor(n.y),l=t.pixelRatio||1,d=new Ml.SceneCanvas({width:t.width||Math.ceil(n.width)||(r?r.width():0),height:t.height||Math.ceil(n.height)||(r?r.height():0),pixelRatio:l}),u=d.getContext(),h=new Ml.SceneCanvas({width:d.width/d.pixelRatio+Math.abs(i),height:d.height/d.pixelRatio+Math.abs(s),pixelRatio:d.pixelRatio});return t.imageSmoothingEnabled===!1&&(u._context.imageSmoothingEnabled=!1),u.save(),(i||s)&&u.translate(-1*i,-1*s),this.drawScene(d,void 0,h),u.restore(),d}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){t=t||{};const n=t.mimeType||null,r=t.quality||null,i=this._toKonvaCanvas(t).toDataURL(n,r);return t.callback&&t.callback(i),i}toImage(t){return new Promise((n,r)=>{try{const i=t==null?void 0:t.callback;i&&delete t.callback,Le.Util._urlToImage(this.toDataURL(t),function(s){n(s),i==null||i(s)})}catch(i){r(i)}})}toBlob(t){return new Promise((n,r)=>{try{const i=t==null?void 0:t.callback;i&&delete t.callback,this.toCanvas(t).toBlob(s=>{n(s),i==null||i(s)},t==null?void 0:t.mimeType,t==null?void 0:t.quality)}catch(i){r(i)}})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Gi.Konva.dragDistance}_off(t,n,r){let i=this.eventListeners[t],s,l,d;for(s=0;s<i.length;s++)if(l=i[s].name,d=i[s].handler,(l!=="konva"||n==="konva")&&(!n||l===n)&&(!r||r===d)){if(i.splice(s,1),i.length===0){delete this.eventListeners[t];break}s--}}_fireChangeEvent(t,n,r){this._fire(t+OM,{oldVal:n,newVal:r})}addName(t){if(!this.hasName(t)){const n=this.name(),r=n?n+" "+t:t;this.name(r)}return this}hasName(t){if(!t)return!1;const n=this.name();return n?(n||"").split(/\s/g).indexOf(t)!==-1:!1}removeName(t){const n=(this.name()||"").split(/\s/g),r=n.indexOf(t);return r!==-1&&(n.splice(r,1),this.name(n.join(" "))),this}setAttr(t,n){const r=this[Fb+Le.Util._capitalize(t)];return Le.Util._isFunction(r)?r.call(this,n):this._setAttr(t,n),this}_requestDraw(){if(Gi.Konva.autoDrawEnabled){const t=this.getLayer()||this.getStage();t==null||t.batchDraw()}}_setAttr(t,n){const r=this.attrs[t];r===n&&!Le.Util.isObject(n)||(n==null?delete this.attrs[t]:this.attrs[t]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(t,r,n),this._requestDraw())}_setComponentAttr(t,n,r){let i;r!==void 0&&(i=this.attrs[t],i||(this.attrs[t]=this.getAttr(t)),this.attrs[t][n]=r,this._fireChangeEvent(t,i,r))}_fireAndBubble(t,n,r){if(n&&this.nodeType===zb&&(n.target=this),!((t===Ab||t===Ib)&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||this.nodeType==="Stage"&&!r))){this._fire(t,n);const s=(t===Ab||t===Ib)&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!s&&(r&&r.parent?this._fireAndBubble.call(this.parent,t,n,r):this._fireAndBubble.call(this.parent,t,n))}}_getProtoListeners(t){var n,r,i;const s=(n=this._cache.get(Nu))!==null&&n!==void 0?n:{};let l=s==null?void 0:s[t];if(l===void 0){l=[];let d=Object.getPrototypeOf(this);for(;d;){const u=(i=(r=d.eventListeners)===null||r===void 0?void 0:r[t])!==null&&i!==void 0?i:[];l.push(...u),d=Object.getPrototypeOf(d)}s[t]=l,this._cache.set(Nu,s)}return l}_fire(t,n){n=n||{},n.currentTarget=this,n.type=t;const r=this._getProtoListeners(t);if(r)for(var i=0;i<r.length;i++)r[i].handler.call(this,n);const s=this.eventListeners[t];if(s)for(var i=0;i<s.length;i++)s[i].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){const n=t?t.pointerId:void 0,r=this.getStage(),i=this.getAbsolutePosition();if(!r)return;const s=r._getPointerById(n)||r._changedPointerPositions[0]||i;Hn.DD._dragElements.set(this._id,{node:this,startPointerPos:s,offset:{x:s.x-i.x,y:s.y-i.y},dragStatus:"ready",pointerId:n})}startDrag(t,n=!0){Hn.DD._dragElements.has(this._id)||this._createDragElement(t);const r=Hn.DD._dragElements.get(this._id);r.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},n)}_setDragPosition(t,n){const r=this.getStage()._getPointerById(n.pointerId);if(!r)return;let i={x:r.x-n.offset.x,y:r.y-n.offset.y};const s=this.dragBoundFunc();if(s!==void 0){const l=s.call(this,i,t);l?i=l:Le.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==i.x||this._lastPos.y!==i.y)&&(this.setAbsolutePosition(i),this._requestDraw()),this._lastPos=i}stopDrag(t){const n=Hn.DD._dragElements.get(this._id);n&&(n.dragStatus="stopped"),Hn.DD._endDragBefore(t),Hn.DD._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=Hn.DD._dragElements.get(this._id);return t?t.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){if(!(!(t.evt.button!==void 0)||Gi.Konva.dragButtons.indexOf(t.evt.button)>=0)||this.isDragging())return;let i=!1;Hn.DD._dragElements.forEach(s=>{this.isAncestorOf(s.node)&&(i=!0)}),i||this._createDragElement(t)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const n=Hn.DD._dragElements.get(this._id),r=n&&n.dragStatus==="dragging",i=n&&n.dragStatus==="ready";r?this.stopDrag():i&&Hn.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const n=this.getStage();if(!n)return!1;const r={x:-t.x,y:-t.y,width:n.width()+2*t.x,height:n.height()+2*t.y};return Le.Util.haveIntersection(r,this.getClientRect())}static create(t,n){return Le.Util._isString(t)&&(t=JSON.parse(t)),this._createNode(t,n)}static _createNode(t,n){let r=ke.prototype.getClassName.call(t),i=t.children,s,l,d;n&&(t.attrs.container=n),Gi.Konva[r]||(Le.Util.warn('Can not find a node with class name "'+r+'". Fallback to "Shape".'),r="Shape");const u=Gi.Konva[r];if(s=new u(t.attrs),i)for(l=i.length,d=0;d<l;d++)s.add(ke._createNode(i[d]));return s}}ot.Node=ke;ke.prototype.nodeType="Node";ke.prototype._attrsAffectingSize=[];ke.prototype.eventListeners={};ke.prototype.on.call(ke.prototype,BM,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Bi),this._clearSelfAndDescendantCache(ri)});ke.prototype.on.call(ke.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(Hg)});ke.prototype.on.call(ke.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(Vg)});ke.prototype.on.call(ke.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Gu)});const Qe=$c.Factory.addGetterSetter;Qe(ke,"zIndex");Qe(ke,"absolutePosition");Qe(ke,"position");Qe(ke,"x",0,(0,Nt.getNumberValidator)());Qe(ke,"y",0,(0,Nt.getNumberValidator)());Qe(ke,"globalCompositeOperation","source-over",(0,Nt.getStringValidator)());Qe(ke,"opacity",1,(0,Nt.getNumberValidator)());Qe(ke,"name","",(0,Nt.getStringValidator)());Qe(ke,"id","",(0,Nt.getStringValidator)());Qe(ke,"rotation",0,(0,Nt.getNumberValidator)());$c.Factory.addComponentsGetterSetter(ke,"scale",["x","y"]);Qe(ke,"scaleX",1,(0,Nt.getNumberValidator)());Qe(ke,"scaleY",1,(0,Nt.getNumberValidator)());$c.Factory.addComponentsGetterSetter(ke,"skew",["x","y"]);Qe(ke,"skewX",0,(0,Nt.getNumberValidator)());Qe(ke,"skewY",0,(0,Nt.getNumberValidator)());$c.Factory.addComponentsGetterSetter(ke,"offset",["x","y"]);Qe(ke,"offsetX",0,(0,Nt.getNumberValidator)());Qe(ke,"offsetY",0,(0,Nt.getNumberValidator)());Qe(ke,"dragDistance",null,(0,Nt.getNumberValidator)());Qe(ke,"width",0,(0,Nt.getNumberValidator)());Qe(ke,"height",0,(0,Nt.getNumberValidator)());Qe(ke,"listening",!0,(0,Nt.getBooleanValidator)());Qe(ke,"preventDefault",!0,(0,Nt.getBooleanValidator)());Qe(ke,"filters",null,function(e){return this._filterUpToDate=!1,e});Qe(ke,"visible",!0,(0,Nt.getBooleanValidator)());Qe(ke,"transformsEnabled","all",(0,Nt.getStringValidator)());Qe(ke,"size");Qe(ke,"dragBoundFunc");Qe(ke,"draggable",!1,(0,Nt.getBooleanValidator)());$c.Factory.backCompat(ke,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var ua={};Object.defineProperty(ua,"__esModule",{value:!0});ua.Container=void 0;const Io=Re,gm=ot,df=je;class ha extends gm.Node{constructor(){super(...arguments),this.children=[]}getChildren(t){if(!t)return this.children||[];const n=this.children||[],r=[];return n.forEach(function(i){t(i)&&r.push(i)}),r}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(t.length===0)return this;if(t.length>1){for(let r=0;r<t.length;r++)this.add(t[r]);return this}const n=t[0];return n.getParent()?(n.moveTo(this),this):(this._validateAdd(n),n.index=this.getChildren().length,n.parent=this,n._clearCaches(),this.getChildren().push(n),this._fire("add",{child:n}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){const n=this._generalFind(t,!0);return n.length>0?n[0]:void 0}_generalFind(t,n){const r=[];return this._descendants(i=>{const s=i._isMatch(t);return s&&r.push(i),!!(s&&n)}),r}_descendants(t){let n=!1;const r=this.getChildren();for(const i of r){if(n=t(i),n)return!0;if(i.hasChildren()&&(n=i._descendants(t),n))return!0}return!1}toObject(){const t=gm.Node.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(n=>{t.children.push(n.toObject())}),t}isAncestorOf(t){let n=t.getParent();for(;n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(t){const n=gm.Node.prototype.clone.call(this,t);return this.getChildren().forEach(function(r){n.add(r.clone())}),n}getAllIntersections(t){const n=[];return this.find("Shape").forEach(r=>{r.isVisible()&&r.intersects(t)&&n.push(r)}),n}_clearSelfAndDescendantCache(t){var n;super._clearSelfAndDescendantCache(t),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(r){r._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;(t=this.children)===null||t===void 0||t.forEach(function(n,r){n.index=r}),this._requestDraw()}drawScene(t,n,r){const i=this.getLayer(),s=t||i&&i.getCanvas(),l=s&&s.getContext(),d=this._getCanvasCache(),u=d&&d.scene,h=s&&s.isCache;if(!this.isVisible()&&!h)return this;if(u){l.save();const p=this.getAbsoluteTransform(n).getMatrix();l.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this._drawCachedSceneCanvas(l),l.restore()}else this._drawChildren("drawScene",s,n,r);return this}drawHit(t,n){if(!this.shouldDrawHit(n))return this;const r=this.getLayer(),i=t||r&&r.hitCanvas,s=i&&i.getContext(),l=this._getCanvasCache();if(l&&l.hit){s.save();const u=this.getAbsoluteTransform(n).getMatrix();s.transform(u[0],u[1],u[2],u[3],u[4],u[5]),this._drawCachedHitCanvas(s),s.restore()}else this._drawChildren("drawHit",i,n);return this}_drawChildren(t,n,r,i){var s;const l=n&&n.getContext(),d=this.clipWidth(),u=this.clipHeight(),h=this.clipFunc(),p=typeof d=="number"&&typeof u=="number"||h,m=r===this;if(p){l.save();const y=this.getAbsoluteTransform(r);let S=y.getMatrix();l.transform(S[0],S[1],S[2],S[3],S[4],S[5]),l.beginPath();let N;if(h)N=h.call(this,l,this);else{const k=this.clipX(),w=this.clipY();l.rect(k||0,w||0,d,u)}l.clip.apply(l,N),S=y.copy().invert().getMatrix(),l.transform(S[0],S[1],S[2],S[3],S[4],S[5])}const x=!m&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";x&&(l.save(),l._applyGlobalCompositeOperation(this)),(s=this.children)===null||s===void 0||s.forEach(function(y){y[t](n,r,i)}),x&&l.restore(),p&&l.restore()}getClientRect(t={}){var n;const r=t.skipTransform,i=t.relativeTo;let s,l,d,u,h={x:1/0,y:1/0,width:0,height:0};const p=this;(n=this.children)===null||n===void 0||n.forEach(function(y){if(!y.visible())return;const S=y.getClientRect({relativeTo:p,skipShadow:t.skipShadow,skipStroke:t.skipStroke});S.width===0&&S.height===0||(s===void 0?(s=S.x,l=S.y,d=S.x+S.width,u=S.y+S.height):(s=Math.min(s,S.x),l=Math.min(l,S.y),d=Math.max(d,S.x+S.width),u=Math.max(u,S.y+S.height)))});const m=this.find("Shape");let x=!1;for(let y=0;y<m.length;y++)if(m[y]._isVisible(this)){x=!0;break}return x&&s!==void 0?h={x:s,y:l,width:d-s,height:u-l}:h={x:0,y:0,width:0,height:0},r?h:this._transformedRect(h,i)}}ua.Container=ha;Io.Factory.addComponentsGetterSetter(ha,"clip",["x","y","width","height"]);Io.Factory.addGetterSetter(ha,"clipX",void 0,(0,df.getNumberValidator)());Io.Factory.addGetterSetter(ha,"clipY",void 0,(0,df.getNumberValidator)());Io.Factory.addGetterSetter(ha,"clipWidth",void 0,(0,df.getNumberValidator)());Io.Factory.addGetterSetter(ha,"clipHeight",void 0,(0,df.getNumberValidator)());Io.Factory.addGetterSetter(ha,"clipFunc");var T6={},ys={};Object.defineProperty(ys,"__esModule",{value:!0});ys.getCapturedShape=WM;ys.createEvent=x1;ys.hasPointerCapture=YM;ys.setPointerCapture=KM;ys.releaseCapture=R6;const HM=Me,Cc=new Map,M6=HM.Konva._global.PointerEvent!==void 0;function WM(e){return Cc.get(e)}function x1(e){return{evt:e,pointerId:e.pointerId}}function YM(e,t){return Cc.get(e)===t}function KM(e,t){R6(e),t.getStage()&&(Cc.set(e,t),M6&&t._fire("gotpointercapture",x1(new PointerEvent("gotpointercapture"))))}function R6(e,t){const n=Cc.get(e);if(!n)return;const r=n.getStage();r&&r.content,Cc.delete(e),M6&&n._fire("lostpointercapture",x1(new PointerEvent("lostpointercapture")))}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.stages=void 0;const t=pt,n=Re,r=ua,i=Me,s=gr,l=cf,d=Me,u=ys,h="Stage",p="string",m="px",x="mouseout",y="mouseleave",S="mouseover",N="mouseenter",k="mousemove",w="mousedown",j="mouseup",v="pointermove",_="pointerdown",E="pointerup",A="pointercancel",D="lostpointercapture",M="pointerout",I="pointerleave",P="pointerover",L="pointerenter",F="contextmenu",G="touchstart",R="touchend",$="touchmove",B="touchcancel",Q="wheel",K=5,H=[[N,"_pointerenter"],[w,"_pointerdown"],[k,"_pointermove"],[j,"_pointerup"],[y,"_pointerleave"],[G,"_pointerdown"],[$,"_pointermove"],[R,"_pointerup"],[B,"_pointercancel"],[S,"_pointerover"],[Q,"_wheel"],[F,"_contextmenu"],[_,"_pointerdown"],[v,"_pointermove"],[E,"_pointerup"],[A,"_pointercancel"],[D,"_lostpointercapture"]],W={mouse:{[M]:x,[I]:y,[P]:S,[L]:N,[v]:k,[_]:w,[E]:j,[A]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[M]:"touchout",[I]:"touchleave",[P]:"touchover",[L]:"touchenter",[v]:$,[_]:G,[E]:R,[A]:B,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[M]:M,[I]:I,[P]:P,[L]:L,[v]:v,[_]:_,[E]:E,[A]:A,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},z=fe=>fe.indexOf("pointer")>=0?"pointer":fe.indexOf("touch")>=0?"touch":"mouse",V=fe=>{const Y=z(fe);if(Y==="pointer")return i.Konva.pointerEventsEnabled&&W.pointer;if(Y==="touch")return W.touch;if(Y==="mouse")return W.mouse};function J(fe={}){return(fe.clipFunc||fe.clipWidth||fe.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),fe}const ee="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";e.stages=[];class ae extends r.Container{constructor(Y){super(J(Y)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),e.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{J(this.attrs)}),this._checkVisibility()}_validateAdd(Y){const ie=Y.getType()==="Layer",ce=Y.getType()==="FastLayer";ie||ce||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const Y=this.visible()?"":"none";this.content.style.display=Y}setContainer(Y){if(typeof Y===p){if(Y.charAt(0)==="."){const ce=Y.slice(1);Y=document.getElementsByClassName(ce)[0]}else{var ie;Y.charAt(0)!=="#"?ie=Y:ie=Y.slice(1),Y=document.getElementById(ie)}if(!Y)throw"Can not find container in document with id "+ie}return this._setAttr("container",Y),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),Y.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){let Y=this.children,ie=Y.length,ce;for(ce=0;ce<ie;ce++)Y[ce].clear();return this}clone(Y){return Y||(Y={}),Y.container=typeof document<"u"&&document.createElement("div"),r.Container.prototype.clone.call(this,Y)}destroy(){super.destroy();const Y=this.content;Y&&t.Util._isInDocument(Y)&&this.container().removeChild(Y);const ie=e.stages.indexOf(this);return ie>-1&&e.stages.splice(ie,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const Y=this._pointerPositions[0]||this._changedPointerPositions[0];return Y?{x:Y.x,y:Y.y}:(t.Util.warn(ee),null)}_getPointerById(Y){return this._pointerPositions.find(ie=>ie.id===Y)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(Y){Y=Y||{},Y.x=Y.x||0,Y.y=Y.y||0,Y.width=Y.width||this.width(),Y.height=Y.height||this.height();const ie=new s.SceneCanvas({width:Y.width,height:Y.height,pixelRatio:Y.pixelRatio||1}),ce=ie.getContext()._context,U=this.children;return(Y.x||Y.y)&&ce.translate(-1*Y.x,-1*Y.y),U.forEach(function(X){if(!X.isVisible())return;const oe=X._toKonvaCanvas(Y);ce.drawImage(oe._canvas,Y.x,Y.y,oe.getWidth()/oe.getPixelRatio(),oe.getHeight()/oe.getPixelRatio())}),ie}getIntersection(Y){if(!Y)return null;let ie=this.children,ce=ie.length,U=ce-1,X;for(X=U;X>=0;X--){const oe=ie[X].getIntersection(Y);if(oe)return oe}return null}_resizeDOM(){const Y=this.width(),ie=this.height();this.content&&(this.content.style.width=Y+m,this.content.style.height=ie+m),this.bufferCanvas.setSize(Y,ie),this.bufferHitCanvas.setSize(Y,ie),this.children.forEach(ce=>{ce.setSize({width:Y,height:ie}),ce.draw()})}add(Y,...ie){if(arguments.length>1){for(let U=0;U<arguments.length;U++)this.add(arguments[U]);return this}super.add(Y);const ce=this.children.length;return ce>K&&t.Util.warn("The stage has "+ce+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),Y.setSize({width:this.width(),height:this.height()}),Y.draw(),i.Konva.isBrowser&&this.content.appendChild(Y.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(Y){return u.hasPointerCapture(Y,this)}setPointerCapture(Y){u.setPointerCapture(Y,this)}releaseCapture(Y){u.releaseCapture(Y,this)}getLayers(){return this.children}_bindContentEvents(){i.Konva.isBrowser&&H.forEach(([Y,ie])=>{this.content.addEventListener(Y,ce=>{this[ie](ce)},{passive:!1})})}_pointerenter(Y){this.setPointersPositions(Y);const ie=V(Y.type);ie&&this._fire(ie.pointerenter,{evt:Y,target:this,currentTarget:this})}_pointerover(Y){this.setPointersPositions(Y);const ie=V(Y.type);ie&&this._fire(ie.pointerover,{evt:Y,target:this,currentTarget:this})}_getTargetShape(Y){let ie=this[Y+"targetShape"];return ie&&!ie.getStage()&&(ie=null),ie}_pointerleave(Y){const ie=V(Y.type),ce=z(Y.type);if(!ie)return;this.setPointersPositions(Y);const U=this._getTargetShape(ce),X=!(i.Konva.isDragging()||i.Konva.isTransforming())||i.Konva.hitOnDragEnabled;U&&X?(U._fireAndBubble(ie.pointerout,{evt:Y}),U._fireAndBubble(ie.pointerleave,{evt:Y}),this._fire(ie.pointerleave,{evt:Y,target:this,currentTarget:this}),this[ce+"targetShape"]=null):X&&(this._fire(ie.pointerleave,{evt:Y,target:this,currentTarget:this}),this._fire(ie.pointerout,{evt:Y,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(Y){const ie=V(Y.type),ce=z(Y.type);if(!ie)return;this.setPointersPositions(Y);let U=!1;this._changedPointerPositions.forEach(X=>{const oe=this.getIntersection(X);if(l.DD.justDragged=!1,i.Konva["_"+ce+"ListenClick"]=!0,!oe||!oe.isListening()){this[ce+"ClickStartShape"]=void 0;return}i.Konva.capturePointerEventsEnabled&&oe.setPointerCapture(X.id),this[ce+"ClickStartShape"]=oe,oe._fireAndBubble(ie.pointerdown,{evt:Y,pointerId:X.id}),U=!0;const pe=Y.type.indexOf("touch")>=0;oe.preventDefault()&&Y.cancelable&&pe&&Y.preventDefault()}),U||this._fire(ie.pointerdown,{evt:Y,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(Y){const ie=V(Y.type),ce=z(Y.type);if(!ie||(i.Konva.isDragging()&&l.DD.node.preventDefault()&&Y.cancelable&&Y.preventDefault(),this.setPointersPositions(Y),!(!(i.Konva.isDragging()||i.Konva.isTransforming())||i.Konva.hitOnDragEnabled)))return;const X={};let oe=!1;const pe=this._getTargetShape(ce);this._changedPointerPositions.forEach(xe=>{const he=u.getCapturedShape(xe.id)||this.getIntersection(xe),Oe=xe.id,_e={evt:Y,pointerId:Oe},be=pe!==he;if(be&&pe&&(pe._fireAndBubble(ie.pointerout,{..._e},he),pe._fireAndBubble(ie.pointerleave,{..._e},he)),he){if(X[he._id])return;X[he._id]=!0}he&&he.isListening()?(oe=!0,be&&(he._fireAndBubble(ie.pointerover,{..._e},pe),he._fireAndBubble(ie.pointerenter,{..._e},pe),this[ce+"targetShape"]=he),he._fireAndBubble(ie.pointermove,{..._e})):pe&&(this._fire(ie.pointerover,{evt:Y,target:this,currentTarget:this,pointerId:Oe}),this[ce+"targetShape"]=null)}),oe||this._fire(ie.pointermove,{evt:Y,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(Y){const ie=V(Y.type),ce=z(Y.type);if(!ie)return;this.setPointersPositions(Y);const U=this[ce+"ClickStartShape"],X=this[ce+"ClickEndShape"],oe={};let pe=!1;this._changedPointerPositions.forEach(xe=>{const he=u.getCapturedShape(xe.id)||this.getIntersection(xe);if(he){if(he.releaseCapture(xe.id),oe[he._id])return;oe[he._id]=!0}const Oe=xe.id,_e={evt:Y,pointerId:Oe};let be=!1;i.Konva["_"+ce+"InDblClickWindow"]?(be=!0,clearTimeout(this[ce+"DblTimeout"])):l.DD.justDragged||(i.Konva["_"+ce+"InDblClickWindow"]=!0,clearTimeout(this[ce+"DblTimeout"])),this[ce+"DblTimeout"]=setTimeout(function(){i.Konva["_"+ce+"InDblClickWindow"]=!1},i.Konva.dblClickWindow),he&&he.isListening()?(pe=!0,this[ce+"ClickEndShape"]=he,he._fireAndBubble(ie.pointerup,{..._e}),i.Konva["_"+ce+"ListenClick"]&&U&&U===he&&(he._fireAndBubble(ie.pointerclick,{..._e}),be&&X&&X===he&&he._fireAndBubble(ie.pointerdblclick,{..._e}))):(this[ce+"ClickEndShape"]=null,i.Konva["_"+ce+"ListenClick"]&&this._fire(ie.pointerclick,{evt:Y,target:this,currentTarget:this,pointerId:Oe}),be&&this._fire(ie.pointerdblclick,{evt:Y,target:this,currentTarget:this,pointerId:Oe}))}),pe||this._fire(ie.pointerup,{evt:Y,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),i.Konva["_"+ce+"ListenClick"]=!1,Y.cancelable&&ce!=="touch"&&Y.preventDefault()}_contextmenu(Y){this.setPointersPositions(Y);const ie=this.getIntersection(this.getPointerPosition());ie&&ie.isListening()?ie._fireAndBubble(F,{evt:Y}):this._fire(F,{evt:Y,target:this,currentTarget:this})}_wheel(Y){this.setPointersPositions(Y);const ie=this.getIntersection(this.getPointerPosition());ie&&ie.isListening()?ie._fireAndBubble(Q,{evt:Y}):this._fire(Q,{evt:Y,target:this,currentTarget:this})}_pointercancel(Y){this.setPointersPositions(Y);const ie=u.getCapturedShape(Y.pointerId)||this.getIntersection(this.getPointerPosition());ie&&ie._fireAndBubble(E,u.createEvent(Y)),u.releaseCapture(Y.pointerId)}_lostpointercapture(Y){u.releaseCapture(Y.pointerId)}setPointersPositions(Y){let ie=this._getContentPosition(),ce=null,U=null;Y=Y||window.event,Y.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(Y.touches,X=>{this._pointerPositions.push({id:X.identifier,x:(X.clientX-ie.left)/ie.scaleX,y:(X.clientY-ie.top)/ie.scaleY})}),Array.prototype.forEach.call(Y.changedTouches||Y.touches,X=>{this._changedPointerPositions.push({id:X.identifier,x:(X.clientX-ie.left)/ie.scaleX,y:(X.clientY-ie.top)/ie.scaleY})})):(ce=(Y.clientX-ie.left)/ie.scaleX,U=(Y.clientY-ie.top)/ie.scaleY,this.pointerPos={x:ce,y:U},this._pointerPositions=[{x:ce,y:U,id:t.Util._getFirstPointerId(Y)}],this._changedPointerPositions=[{x:ce,y:U,id:t.Util._getFirstPointerId(Y)}])}_setPointerPosition(Y){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(Y)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const Y=this.content.getBoundingClientRect();return{top:Y.top,left:Y.left,scaleX:Y.width/this.content.clientWidth||1,scaleY:Y.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new s.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new s.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!i.Konva.isBrowser)return;const Y=this.container();if(!Y)throw"Stage has no container. A container is required.";Y.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),Y.appendChild(this.content),this._resizeDOM()}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(Y){Y.batchDraw()}),this}}e.Stage=ae,ae.prototype.nodeType=h,(0,d._registerNode)(ae),n.Factory.addGetterSetter(ae,"container"),i.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{e.stages.forEach(fe=>{fe.batchDraw()})})})(T6);var Gc={},Tt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.shapes=void 0;const t=Me,n=pt,r=Re,i=ot,s=je,l=Me,d=ys,u="hasShadow",h="shadowRGBA",p="patternImage",m="linearGradient",x="radialGradient";let y;function S(){return y||(y=n.Util.createCanvasElement().getContext("2d"),y)}e.shapes={};function N(I){const P=this.attrs.fillRule;P?I.fill(P):I.fill()}function k(I){I.stroke()}function w(I){const P=this.attrs.fillRule;P?I.fill(P):I.fill()}function j(I){I.stroke()}function v(){this._clearCache(u)}function _(){this._clearCache(h)}function E(){this._clearCache(p)}function A(){this._clearCache(m)}function D(){this._clearCache(x)}class M extends i.Node{constructor(P){super(P);let L;for(;L=n.Util.getRandomColor(),!(L&&!(L in e.shapes)););this.colorKey=L,e.shapes[L]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(u,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(p,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const L=S().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(L&&L.setTransform){const F=new n.Transform;F.translate(this.fillPatternX(),this.fillPatternY()),F.rotate(t.Konva.getAngle(this.fillPatternRotation())),F.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),F.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const G=F.getMatrix(),R=typeof DOMMatrix>"u"?{a:G[0],b:G[1],c:G[2],d:G[3],e:G[4],f:G[5]}:new DOMMatrix(G);L.setTransform(R)}return L}}_getLinearGradient(){return this._getCache(m,this.__getLinearGradient)}__getLinearGradient(){const P=this.fillLinearGradientColorStops();if(P){const L=S(),F=this.fillLinearGradientStartPoint(),G=this.fillLinearGradientEndPoint(),R=L.createLinearGradient(F.x,F.y,G.x,G.y);for(let $=0;$<P.length;$+=2)R.addColorStop(P[$],P[$+1]);return R}}_getRadialGradient(){return this._getCache(x,this.__getRadialGradient)}__getRadialGradient(){const P=this.fillRadialGradientColorStops();if(P){const L=S(),F=this.fillRadialGradientStartPoint(),G=this.fillRadialGradientEndPoint(),R=L.createRadialGradient(F.x,F.y,this.fillRadialGradientStartRadius(),G.x,G.y,this.fillRadialGradientEndRadius());for(let $=0;$<P.length;$+=2)R.addColorStop(P[$],P[$+1]);return R}}getShadowRGBA(){return this._getCache(h,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const P=n.Util.colorToRGBA(this.shadowColor());if(P)return"rgba("+P.r+","+P.g+","+P.b+","+P.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const P=this.hitStrokeWidth();return P==="auto"?this.hasStroke():this.strokeEnabled()&&!!P}intersects(P){const L=this.getStage();if(!L)return!1;const F=L.bufferHitCanvas;return F.getContext().clear(),this.drawHit(F,void 0,!0),F.context.getImageData(Math.round(P.x),Math.round(P.y),1,1).data[3]>0}destroy(){return i.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(P){var L;if(!((L=this.attrs.perfectDrawEnabled)!==null&&L!==void 0?L:!0))return!1;const G=P||this.hasFill(),R=this.hasStroke(),$=this.getAbsoluteOpacity()!==1;if(G&&R&&$)return!0;const B=this.hasShadow(),Q=this.shadowForStrokeEnabled();return!!(G&&R&&B&&Q)}setStrokeHitEnabled(P){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),P?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const P=this.size();return{x:this._centroid?-P.width/2:0,y:this._centroid?-P.height/2:0,width:P.width,height:P.height}}getClientRect(P={}){let L=!1,F=this.getParent();for(;F;){if(F.isCached()){L=!0;break}F=F.getParent()}const G=P.skipTransform,R=P.relativeTo||L&&this.getStage()||void 0,$=this.getSelfRect(),Q=!P.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,K=$.width+Q,H=$.height+Q,W=!P.skipShadow&&this.hasShadow(),z=W?this.shadowOffsetX():0,V=W?this.shadowOffsetY():0,J=K+Math.abs(z),ee=H+Math.abs(V),ae=W&&this.shadowBlur()||0,fe=J+ae*2,Y=ee+ae*2,ie={width:fe,height:Y,x:-(Q/2+ae)+Math.min(z,0)+$.x,y:-(Q/2+ae)+Math.min(V,0)+$.y};return G?ie:this._transformedRect(ie,R)}drawScene(P,L,F){const G=this.getLayer();let R=P||G.getCanvas(),$=R.getContext(),B=this._getCanvasCache(),Q=this.getSceneFunc(),K=this.hasShadow(),H,W;const z=R.isCache,V=L===this;if(!this.isVisible()&&!V)return this;if(B){$.save();const ee=this.getAbsoluteTransform(L).getMatrix();return $.transform(ee[0],ee[1],ee[2],ee[3],ee[4],ee[5]),this._drawCachedSceneCanvas($),$.restore(),this}if(!Q)return this;if($.save(),this._useBufferCanvas()&&!z){H=this.getStage();const ee=F||H.bufferCanvas;W=ee.getContext(),W.clear(),W.save(),W._applyLineJoin(this);var J=this.getAbsoluteTransform(L).getMatrix();W.transform(J[0],J[1],J[2],J[3],J[4],J[5]),Q.call(this,W,this),W.restore();const ae=ee.pixelRatio;K&&$._applyShadow(this),$._applyOpacity(this),$._applyGlobalCompositeOperation(this),$.drawImage(ee._canvas,0,0,ee.width/ae,ee.height/ae)}else{if($._applyLineJoin(this),!V){var J=this.getAbsoluteTransform(L).getMatrix();$.transform(J[0],J[1],J[2],J[3],J[4],J[5]),$._applyOpacity(this),$._applyGlobalCompositeOperation(this)}K&&$._applyShadow(this),Q.call(this,$,this)}return $.restore(),this}drawHit(P,L,F=!1){if(!this.shouldDrawHit(L,F))return this;const G=this.getLayer(),R=P||G.hitCanvas,$=R&&R.getContext(),B=this.hitFunc()||this.sceneFunc(),Q=this._getCanvasCache(),K=Q&&Q.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),K){$.save();const W=this.getAbsoluteTransform(L).getMatrix();return $.transform(W[0],W[1],W[2],W[3],W[4],W[5]),this._drawCachedHitCanvas($),$.restore(),this}if(!B)return this;if($.save(),$._applyLineJoin(this),!(this===L)){const W=this.getAbsoluteTransform(L).getMatrix();$.transform(W[0],W[1],W[2],W[3],W[4],W[5])}return B.call(this,$,this),$.restore(),this}drawHitFromCache(P=0){let L=this._getCanvasCache(),F=this._getCachedSceneCanvas(),G=L.hit,R=G.getContext(),$=G.getWidth(),B=G.getHeight(),Q,K,H,W,z,V;R.clear(),R.drawImage(F._canvas,0,0,$,B);try{for(Q=R.getImageData(0,0,$,B),K=Q.data,H=K.length,W=n.Util._hexToRgb(this.colorKey),z=0;z<H;z+=4)V=K[z+3],V>P?(K[z]=W.r,K[z+1]=W.g,K[z+2]=W.b,K[z+3]=255):K[z+3]=0;R.putImageData(Q,0,0)}catch(J){n.Util.error("Unable to draw hit graph from cached scene canvas. "+J.message)}return this}hasPointerCapture(P){return d.hasPointerCapture(P,this)}setPointerCapture(P){d.setPointerCapture(P,this)}releaseCapture(P){d.releaseCapture(P,this)}}e.Shape=M,M.prototype._fillFunc=N,M.prototype._strokeFunc=k,M.prototype._fillFuncHit=w,M.prototype._strokeFuncHit=j,M.prototype._centroid=!1,M.prototype.nodeType="Shape",(0,l._registerNode)(M),M.prototype.eventListeners={},M.prototype.on.call(M.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",v),M.prototype.on.call(M.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",_),M.prototype.on.call(M.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",E),M.prototype.on.call(M.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",A),M.prototype.on.call(M.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",D),r.Factory.addGetterSetter(M,"stroke",void 0,(0,s.getStringOrGradientValidator)()),r.Factory.addGetterSetter(M,"strokeWidth",2,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(M,"fillAfterStrokeEnabled",!1),r.Factory.addGetterSetter(M,"hitStrokeWidth","auto",(0,s.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(M,"strokeHitEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(M,"perfectDrawEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(M,"shadowForStrokeEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(M,"lineJoin"),r.Factory.addGetterSetter(M,"lineCap"),r.Factory.addGetterSetter(M,"sceneFunc"),r.Factory.addGetterSetter(M,"hitFunc"),r.Factory.addGetterSetter(M,"dash"),r.Factory.addGetterSetter(M,"dashOffset",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(M,"shadowColor",void 0,(0,s.getStringValidator)()),r.Factory.addGetterSetter(M,"shadowBlur",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(M,"shadowOpacity",1,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(M,"shadowOffset",["x","y"]),r.Factory.addGetterSetter(M,"shadowOffsetX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(M,"shadowOffsetY",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(M,"fillPatternImage"),r.Factory.addGetterSetter(M,"fill",void 0,(0,s.getStringOrGradientValidator)()),r.Factory.addGetterSetter(M,"fillPatternX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(M,"fillPatternY",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(M,"fillLinearGradientColorStops"),r.Factory.addGetterSetter(M,"strokeLinearGradientColorStops"),r.Factory.addGetterSetter(M,"fillRadialGradientStartRadius",0),r.Factory.addGetterSetter(M,"fillRadialGradientEndRadius",0),r.Factory.addGetterSetter(M,"fillRadialGradientColorStops"),r.Factory.addGetterSetter(M,"fillPatternRepeat","repeat"),r.Factory.addGetterSetter(M,"fillEnabled",!0),r.Factory.addGetterSetter(M,"strokeEnabled",!0),r.Factory.addGetterSetter(M,"shadowEnabled",!0),r.Factory.addGetterSetter(M,"dashEnabled",!0),r.Factory.addGetterSetter(M,"strokeScaleEnabled",!0),r.Factory.addGetterSetter(M,"fillPriority","color"),r.Factory.addComponentsGetterSetter(M,"fillPatternOffset",["x","y"]),r.Factory.addGetterSetter(M,"fillPatternOffsetX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(M,"fillPatternOffsetY",0,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(M,"fillPatternScale",["x","y"]),r.Factory.addGetterSetter(M,"fillPatternScaleX",1,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(M,"fillPatternScaleY",1,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(M,"fillLinearGradientStartPoint",["x","y"]),r.Factory.addComponentsGetterSetter(M,"strokeLinearGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(M,"fillLinearGradientStartPointX",0),r.Factory.addGetterSetter(M,"strokeLinearGradientStartPointX",0),r.Factory.addGetterSetter(M,"fillLinearGradientStartPointY",0),r.Factory.addGetterSetter(M,"strokeLinearGradientStartPointY",0),r.Factory.addComponentsGetterSetter(M,"fillLinearGradientEndPoint",["x","y"]),r.Factory.addComponentsGetterSetter(M,"strokeLinearGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(M,"fillLinearGradientEndPointX",0),r.Factory.addGetterSetter(M,"strokeLinearGradientEndPointX",0),r.Factory.addGetterSetter(M,"fillLinearGradientEndPointY",0),r.Factory.addGetterSetter(M,"strokeLinearGradientEndPointY",0),r.Factory.addComponentsGetterSetter(M,"fillRadialGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(M,"fillRadialGradientStartPointX",0),r.Factory.addGetterSetter(M,"fillRadialGradientStartPointY",0),r.Factory.addComponentsGetterSetter(M,"fillRadialGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(M,"fillRadialGradientEndPointX",0),r.Factory.addGetterSetter(M,"fillRadialGradientEndPointY",0),r.Factory.addGetterSetter(M,"fillPatternRotation",0),r.Factory.addGetterSetter(M,"fillRule",void 0,(0,s.getStringValidator)()),r.Factory.backCompat(M,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(Tt);Object.defineProperty(Gc,"__esModule",{value:!0});Gc.Layer=void 0;const ni=pt,xm=ua,Ua=ot,y1=Re,Db=gr,XM=je,QM=Tt,qM=Me,ZM="#",JM="beforeDraw",eR="draw",A6=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],tR=A6.length;let Fo=class extends xm.Container{constructor(t){super(t),this.canvas=new Db.SceneCanvas,this.hitCanvas=new Db.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);const n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),t<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[t+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Ua.Node.prototype.moveToTop.call(this);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!Ua.Node.prototype.moveUp.call(this))return!1;const n=this.getStage();return!n||!n.content?!1:(n.content.removeChild(this.getNativeCanvasElement()),this.index<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Ua.Node.prototype.moveDown.call(this)){const t=this.getStage();if(t){const n=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),n[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Ua.Node.prototype.moveToBottom.call(this)){const t=this.getStage();if(t){const n=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),n[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const t=this.getNativeCanvasElement();return Ua.Node.prototype.remove.call(this),t&&t.parentNode&&ni.Util._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:n}){return this.canvas.setSize(t,n),this.hitCanvas.setSize(t,n),this._setSmoothEnabled(),this}_validateAdd(t){const n=t.getType();n!=="Group"&&n!=="Shape"&&ni.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t=t||{},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),Ua.Node.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){ni.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){ni.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,ni.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;let n=1,r=!1;for(;;){for(let i=0;i<tR;i++){const s=A6[i],l=this._getIntersection({x:t.x+s.x*n,y:t.y+s.y*n}),d=l.shape;if(d)return d;if(r=!!l.antialiased,!l.antialiased)break}if(r)n+=1;else return null}}_getIntersection(t){const n=this.hitCanvas.pixelRatio,r=this.hitCanvas.context.getImageData(Math.round(t.x*n),Math.round(t.y*n),1,1).data,i=r[3];if(i===255){const s=ni.Util._rgbToHex(r[0],r[1],r[2]),l=QM.shapes[ZM+s];return l?{shape:l}:{antialiased:!0}}else if(i>0)return{antialiased:!0};return{}}drawScene(t,n){const r=this.getLayer(),i=t||r&&r.getCanvas();return this._fire(JM,{node:this}),this.clearBeforeDraw()&&i.getContext().clear(),xm.Container.prototype.drawScene.call(this,i,n),this._fire(eR,{node:this}),this}drawHit(t,n){const r=this.getLayer(),i=t||r&&r.hitCanvas;return r&&r.clearBeforeDraw()&&r.getHitCanvas().getContext().clear(),xm.Container.prototype.drawHit.call(this,i,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){ni.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return ni.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const t=this.parent;!!this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}destroy(){return ni.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};Gc.Layer=Fo;Fo.prototype.nodeType="Layer";(0,qM._registerNode)(Fo);y1.Factory.addGetterSetter(Fo,"imageSmoothingEnabled",!0);y1.Factory.addGetterSetter(Fo,"clearBeforeDraw",!0);y1.Factory.addGetterSetter(Fo,"hitGraphEnabled",!0,(0,XM.getBooleanValidator)());var uf={};Object.defineProperty(uf,"__esModule",{value:!0});uf.FastLayer=void 0;const nR=pt,rR=Gc,iR=Me;class v1 extends rR.Layer{constructor(t){super(t),this.listening(!1),nR.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}uf.FastLayer=v1;v1.prototype.nodeType="FastLayer";(0,iR._registerNode)(v1);var zo={};Object.defineProperty(zo,"__esModule",{value:!0});zo.Group=void 0;const sR=pt,aR=ua,oR=Me;class b1 extends aR.Container{_validateAdd(t){const n=t.getType();n!=="Group"&&n!=="Shape"&&sR.Util.throw("You may only add groups and shapes to groups.")}}zo.Group=b1;b1.prototype.nodeType="Group";(0,oR._registerNode)(b1);var Lo={};Object.defineProperty(Lo,"__esModule",{value:!0});Lo.Animation=void 0;const ym=Me,Ob=pt,vm=function(){return ym.glob.performance&&ym.glob.performance.now?function(){return ym.glob.performance.now()}:function(){return new Date().getTime()}}();class Ir{constructor(t,n){this.id=Ir.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:vm(),frameRate:0},this.func=t,this.setLayers(n)}setLayers(t){let n=[];return t&&(n=Array.isArray(t)?t:[t]),this.layers=n,this}getLayers(){return this.layers}addLayer(t){const n=this.layers,r=n.length;for(let i=0;i<r;i++)if(n[i]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){const n=Ir.animations,r=n.length;for(let i=0;i<r;i++)if(n[i].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=vm(),Ir._addAnimation(this),this}stop(){return Ir._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){const n=t.id,r=this.animations,i=r.length;for(let s=0;s<i;s++)if(r[s].id===n){this.animations.splice(s,1);break}}static _runFrames(){const t={},n=this.animations;for(let r=0;r<n.length;r++){const i=n[r],s=i.layers,l=i.func;i._updateFrameObject(vm());const d=s.length;let u;if(l?u=l.call(i,i.frame)!==!1:u=!0,!!u)for(let h=0;h<d;h++){const p=s[h];p._id!==void 0&&(t[p._id]=p)}}for(const r in t)t.hasOwnProperty(r)&&t[r].batchDraw()}static _animationLoop(){const t=Ir;t.animations.length?(t._runFrames(),Ob.Util.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,Ob.Util.requestAnimFrame(this._animationLoop))}}Lo.Animation=Ir;Ir.animations=[];Ir.animIdCounter=0;Ir.animRunning=!1;var I6={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Easings=e.Tween=void 0;const t=pt,n=Lo,r=ot,i=Me;let s={node:1,duration:1,easing:1,onFinish:1,yoyo:1},l=1,d=2,u=3,h=0,p=["fill","stroke","shadowColor"];class m{constructor(S,N,k,w,j,v,_){this.prop=S,this.propFunc=N,this.begin=w,this._pos=w,this.duration=v,this._change=0,this.prevPos=0,this.yoyo=_,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=k,this._change=j-this.begin,this.pause()}fire(S){const N=this[S];N&&N()}setTime(S){S>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():S<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=S,this.update())}getTime(){return this._time}setPosition(S){this.prevPos=this._pos,this.propFunc(S),this._pos=S}getPosition(S){return S===void 0&&(S=this._time),this.func(S,this.begin,this._change,this.duration)}play(){this.state=d,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=u,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(S){this.pause(),this._time=S,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const S=this.getTimer()-this._startTime;this.state===d?this.setTime(S):this.state===u&&this.setTime(this.duration-S)}pause(){this.state=l,this.fire("onPause")}getTimer(){return new Date().getTime()}}class x{constructor(S){let N=this,k=S.node,w=k._id,j,v=S.easing||e.Easings.Linear,_=!!S.yoyo,E;typeof S.duration>"u"?j=.3:S.duration===0?j=.001:j=S.duration,this.node=k,this._id=h++;const A=k.getLayer()||(k instanceof i.Konva.Stage?k.getLayers():null);A||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){N.tween.onEnterFrame()},A),this.tween=new m(E,function(D){N._tweenFunc(D)},v,0,1,j*1e3,_),this._addListeners(),x.attrs[w]||(x.attrs[w]={}),x.attrs[w][this._id]||(x.attrs[w][this._id]={}),x.tweens[w]||(x.tweens[w]={});for(E in S)s[E]===void 0&&this._addAttr(E,S[E]);this.reset(),this.onFinish=S.onFinish,this.onReset=S.onReset,this.onUpdate=S.onUpdate}_addAttr(S,N){let k=this.node,w=k._id,j,v,_,E,A,D,M,I;if(_=x.tweens[w][S],_&&delete x.attrs[w][_][S],j=k.getAttr(S),t.Util._isArray(N))if(v=[],A=Math.max(N.length,j.length),S==="points"&&N.length!==j.length&&(N.length>j.length?(M=j,j=t.Util._prepareArrayForTween(j,N,k.closed())):(D=N,N=t.Util._prepareArrayForTween(N,j,k.closed()))),S.indexOf("fill")===0)for(E=0;E<A;E++)if(E%2===0)v.push(N[E]-j[E]);else{const P=t.Util.colorToRGBA(j[E]);I=t.Util.colorToRGBA(N[E]),j[E]=P,v.push({r:I.r-P.r,g:I.g-P.g,b:I.b-P.b,a:I.a-P.a})}else for(E=0;E<A;E++)v.push(N[E]-j[E]);else p.indexOf(S)!==-1?(j=t.Util.colorToRGBA(j),I=t.Util.colorToRGBA(N),v={r:I.r-j.r,g:I.g-j.g,b:I.b-j.b,a:I.a-j.a}):v=N-j;x.attrs[w][this._id][S]={start:j,diff:v,end:N,trueEnd:D,trueStart:M},x.tweens[w][S]=this._id}_tweenFunc(S){let N=this.node,k=x.attrs[N._id][this._id],w,j,v,_,E,A,D,M;for(w in k){if(j=k[w],v=j.start,_=j.diff,M=j.end,t.Util._isArray(v))if(E=[],D=Math.max(v.length,M.length),w.indexOf("fill")===0)for(A=0;A<D;A++)A%2===0?E.push((v[A]||0)+_[A]*S):E.push("rgba("+Math.round(v[A].r+_[A].r*S)+","+Math.round(v[A].g+_[A].g*S)+","+Math.round(v[A].b+_[A].b*S)+","+(v[A].a+_[A].a*S)+")");else for(A=0;A<D;A++)E.push((v[A]||0)+_[A]*S);else p.indexOf(w)!==-1?E="rgba("+Math.round(v.r+_.r*S)+","+Math.round(v.g+_.g*S)+","+Math.round(v.b+_.b*S)+","+(v.a+_.a*S)+")":E=v+_*S;N.setAttr(w,E)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const S=this.node,N=x.attrs[S._id][this._id];N.points&&N.points.trueEnd&&S.setAttr("points",N.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const S=this.node,N=x.attrs[S._id][this._id];N.points&&N.points.trueStart&&S.points(N.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(S){return this.tween.seek(S*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){let S=this.node._id,N=this._id,k=x.tweens[S],w;this.pause();for(w in k)delete x.tweens[S][w];delete x.attrs[S][N]}}e.Tween=x,x.attrs={},x.tweens={},r.Node.prototype.to=function(y){const S=y.onFinish;y.node=this,y.onFinish=function(){this.destroy(),S&&S()},new x(y).play()},e.Easings={BackEaseIn(y,S,N,k){return N*(y/=k)*y*((1.70158+1)*y-1.70158)+S},BackEaseOut(y,S,N,k){return N*((y=y/k-1)*y*((1.70158+1)*y+1.70158)+1)+S},BackEaseInOut(y,S,N,k){let w=1.70158;return(y/=k/2)<1?N/2*(y*y*(((w*=1.525)+1)*y-w))+S:N/2*((y-=2)*y*(((w*=1.525)+1)*y+w)+2)+S},ElasticEaseIn(y,S,N,k,w,j){let v=0;return y===0?S:(y/=k)===1?S+N:(j||(j=k*.3),!w||w<Math.abs(N)?(w=N,v=j/4):v=j/(2*Math.PI)*Math.asin(N/w),-(w*Math.pow(2,10*(y-=1))*Math.sin((y*k-v)*(2*Math.PI)/j))+S)},ElasticEaseOut(y,S,N,k,w,j){let v=0;return y===0?S:(y/=k)===1?S+N:(j||(j=k*.3),!w||w<Math.abs(N)?(w=N,v=j/4):v=j/(2*Math.PI)*Math.asin(N/w),w*Math.pow(2,-10*y)*Math.sin((y*k-v)*(2*Math.PI)/j)+N+S)},ElasticEaseInOut(y,S,N,k,w,j){let v=0;return y===0?S:(y/=k/2)===2?S+N:(j||(j=k*(.3*1.5)),!w||w<Math.abs(N)?(w=N,v=j/4):v=j/(2*Math.PI)*Math.asin(N/w),y<1?-.5*(w*Math.pow(2,10*(y-=1))*Math.sin((y*k-v)*(2*Math.PI)/j))+S:w*Math.pow(2,-10*(y-=1))*Math.sin((y*k-v)*(2*Math.PI)/j)*.5+N+S)},BounceEaseOut(y,S,N,k){return(y/=k)<1/2.75?N*(7.5625*y*y)+S:y<2/2.75?N*(7.5625*(y-=1.5/2.75)*y+.75)+S:y<2.5/2.75?N*(7.5625*(y-=2.25/2.75)*y+.9375)+S:N*(7.5625*(y-=2.625/2.75)*y+.984375)+S},BounceEaseIn(y,S,N,k){return N-e.Easings.BounceEaseOut(k-y,0,N,k)+S},BounceEaseInOut(y,S,N,k){return y<k/2?e.Easings.BounceEaseIn(y*2,0,N,k)*.5+S:e.Easings.BounceEaseOut(y*2-k,0,N,k)*.5+N*.5+S},EaseIn(y,S,N,k){return N*(y/=k)*y+S},EaseOut(y,S,N,k){return-N*(y/=k)*(y-2)+S},EaseInOut(y,S,N,k){return(y/=k/2)<1?N/2*y*y+S:-N/2*(--y*(y-2)-1)+S},StrongEaseIn(y,S,N,k){return N*(y/=k)*y*y*y*y+S},StrongEaseOut(y,S,N,k){return N*((y=y/k-1)*y*y*y*y+1)+S},StrongEaseInOut(y,S,N,k){return(y/=k/2)<1?N/2*y*y*y*y*y+S:N/2*((y-=2)*y*y*y*y+2)+S},Linear(y,S,N,k){return N*y/k+S}}})(I6);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;const t=Me,n=pt,r=ot,i=ua,s=T6,l=Gc,d=uf,u=zo,h=cf,p=Tt,m=Lo,x=I6,y=di,S=gr;e.Konva=n.Util._assign(t.Konva,{Util:n.Util,Transform:n.Transform,Node:r.Node,Container:i.Container,Stage:s.Stage,stages:s.stages,Layer:l.Layer,FastLayer:d.FastLayer,Group:u.Group,DD:h.DD,Shape:p.Shape,shapes:p.shapes,Animation:m.Animation,Tween:x.Tween,Easings:x.Easings,Context:y.Context,Canvas:S.Canvas}),e.default=e.Konva})(Ch);var hf={};Object.defineProperty(hf,"__esModule",{value:!0});hf.Arc=void 0;const ff=Re,lR=Tt,Ub=Me,pf=je,cR=Me;class wi extends lR.Shape{_sceneFunc(t){const n=Ub.Konva.getAngle(this.angle()),r=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,n,r),t.arc(0,0,this.innerRadius(),n,0,!r),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),n=this.outerRadius(),r=this.clockwise(),i=Ub.Konva.getAngle(r?360-this.angle():this.angle()),s=Math.cos(Math.min(i,Math.PI)),l=1,d=Math.sin(Math.min(Math.max(Math.PI,i),3*Math.PI/2)),u=Math.sin(Math.min(i,Math.PI/2)),h=s*(s>0?t:n),p=l*n,m=d*(d>0?t:n),x=u*(u>0?n:t);return{x:h,y:r?-1*x:m,width:p-h,height:x-m}}}hf.Arc=wi;wi.prototype._centroid=!0;wi.prototype.className="Arc";wi.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,cR._registerNode)(wi);ff.Factory.addGetterSetter(wi,"innerRadius",0,(0,pf.getNumberValidator)());ff.Factory.addGetterSetter(wi,"outerRadius",0,(0,pf.getNumberValidator)());ff.Factory.addGetterSetter(wi,"angle",0,(0,pf.getNumberValidator)());ff.Factory.addGetterSetter(wi,"clockwise",!1,(0,pf.getBooleanValidator)());var mf={},Bc={};Object.defineProperty(Bc,"__esModule",{value:!0});Bc.Line=void 0;const gf=Re,dR=Me,uR=Tt,F6=je;function Wg(e,t,n,r,i,s,l){const d=Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2)),u=Math.sqrt(Math.pow(i-n,2)+Math.pow(s-r,2)),h=l*d/(d+u),p=l*u/(d+u),m=n-h*(i-e),x=r-h*(s-t),y=n+p*(i-e),S=r+p*(s-t);return[m,x,y,S]}function $b(e,t){const n=e.length,r=[];for(let i=2;i<n-2;i+=2){const s=Wg(e[i-2],e[i-1],e[i],e[i+1],e[i+2],e[i+3],t);isNaN(s[0])||(r.push(s[0]),r.push(s[1]),r.push(e[i]),r.push(e[i+1]),r.push(s[2]),r.push(s[3]))}return r}let vs=class extends uR.Shape{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){let n=this.points(),r=n.length,i=this.tension(),s=this.closed(),l=this.bezier(),d,u,h;if(r){if(t.beginPath(),t.moveTo(n[0],n[1]),i!==0&&r>4){for(d=this.getTensionPoints(),u=d.length,h=s?0:4,s||t.quadraticCurveTo(d[0],d[1],d[2],d[3]);h<u-2;)t.bezierCurveTo(d[h++],d[h++],d[h++],d[h++],d[h++],d[h++]);s||t.quadraticCurveTo(d[u-2],d[u-1],n[r-2],n[r-1])}else if(l)for(h=2;h<r;)t.bezierCurveTo(n[h++],n[h++],n[h++],n[h++],n[h++],n[h++]);else for(h=2;h<r;h+=2)t.lineTo(n[h],n[h+1]);s?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():$b(this.points(),this.tension())}_getTensionPointsClosed(){const t=this.points(),n=t.length,r=this.tension(),i=Wg(t[n-2],t[n-1],t[0],t[1],t[2],t[3],r),s=Wg(t[n-4],t[n-3],t[n-2],t[n-1],t[0],t[1],r),l=$b(t,r);return[i[2],i[3]].concat(l).concat([s[0],s[1],t[n-2],t[n-1],s[2],s[3],i[0],i[1],t[0],t[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:t=this.points();let n=t[0],r=t[0],i=t[1],s=t[1],l,d;for(let u=0;u<t.length/2;u++)l=t[u*2],d=t[u*2+1],n=Math.min(n,l),r=Math.max(r,l),i=Math.min(i,d),s=Math.max(s,d);return{x:n,y:i,width:r-n,height:s-i}}};Bc.Line=vs;vs.prototype.className="Line";vs.prototype._attrsAffectingSize=["points","bezier","tension"];(0,dR._registerNode)(vs);gf.Factory.addGetterSetter(vs,"closed",!1);gf.Factory.addGetterSetter(vs,"bezier",!1);gf.Factory.addGetterSetter(vs,"tension",0,(0,F6.getNumberValidator)());gf.Factory.addGetterSetter(vs,"points",[],(0,F6.getNumberArrayValidator)());var Do={},z6={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.t2length=e.getQuadraticArcLength=e.getCubicArcLength=e.binomialCoefficients=e.cValues=e.tValues=void 0,e.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],e.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],e.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const t=(l,d,u)=>{let h,p;const x=u/2;h=0;for(let y=0;y<20;y++)p=x*e.tValues[20][y]+x,h+=e.cValues[20][y]*r(l,d,p);return x*h};e.getCubicArcLength=t;const n=(l,d,u)=>{u===void 0&&(u=1);const h=l[0]-2*l[1]+l[2],p=d[0]-2*d[1]+d[2],m=2*l[1]-2*l[0],x=2*d[1]-2*d[0],y=4*(h*h+p*p),S=4*(h*m+p*x),N=m*m+x*x;if(y===0)return u*Math.sqrt(Math.pow(l[2]-l[0],2)+Math.pow(d[2]-d[0],2));const k=S/(2*y),w=N/y,j=u+k,v=w-k*k,_=j*j+v>0?Math.sqrt(j*j+v):0,E=k*k+v>0?Math.sqrt(k*k+v):0,A=k+Math.sqrt(k*k+v)!==0?v*Math.log(Math.abs((j+_)/(k+E))):0;return Math.sqrt(y)/2*(j*_-k*E+A)};e.getQuadraticArcLength=n;function r(l,d,u){const h=i(1,u,l),p=i(1,u,d),m=h*h+p*p;return Math.sqrt(m)}const i=(l,d,u)=>{const h=u.length-1;let p,m;if(h===0)return 0;if(l===0){m=0;for(let x=0;x<=h;x++)m+=e.binomialCoefficients[h][x]*Math.pow(1-d,h-x)*Math.pow(d,x)*u[x];return m}else{p=new Array(h);for(let x=0;x<h;x++)p[x]=h*(u[x+1]-u[x]);return i(l-1,d,p)}},s=(l,d,u)=>{let h=1,p=l/d,m=(l-u(p))/d,x=0;for(;h>.001;){const y=u(p+m),S=Math.abs(l-y)/d;if(S<h)h=S,p+=m;else{const N=u(p-m),k=Math.abs(l-N)/d;k<h?(h=k,p-=m):m/=2}if(x++,x>500)break}return p};e.t2length=s})(z6);Object.defineProperty(Do,"__esModule",{value:!0});Do.Path=void 0;const hR=Re,fR=Tt,pR=Me,$a=z6;class Ct extends fR.Shape{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Ct.parsePathData(this.data()),this.pathLength=Ct.getPathLength(this.dataArray)}_sceneFunc(t){const n=this.dataArray;t.beginPath();let r=!1;for(let N=0;N<n.length;N++){const k=n[N].command,w=n[N].points;switch(k){case"L":t.lineTo(w[0],w[1]);break;case"M":t.moveTo(w[0],w[1]);break;case"C":t.bezierCurveTo(w[0],w[1],w[2],w[3],w[4],w[5]);break;case"Q":t.quadraticCurveTo(w[0],w[1],w[2],w[3]);break;case"A":var i=w[0],s=w[1],l=w[2],d=w[3],u=w[4],h=w[5],p=w[6],m=w[7],x=l>d?l:d,y=l>d?1:l/d,S=l>d?d/l:1;t.translate(i,s),t.rotate(p),t.scale(y,S),t.arc(0,0,x,u,u+h,1-m),t.scale(1/y,1/S),t.rotate(-p),t.translate(-i,-s);break;case"z":r=!0,t.closePath();break}}!r&&!this.hasFill()?t.strokeShape(this):t.fillStrokeShape(this)}getSelfRect(){let t=[];this.dataArray.forEach(function(u){if(u.command==="A"){const h=u.points[4],p=u.points[5],m=u.points[4]+p;let x=Math.PI/180;if(Math.abs(h-m)<x&&(x=Math.abs(h-m)),p<0)for(let y=h-x;y>m;y-=x){const S=Ct.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],y,0);t.push(S.x,S.y)}else for(let y=h+x;y<m;y+=x){const S=Ct.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],y,0);t.push(S.x,S.y)}}else if(u.command==="C")for(let h=0;h<=1;h+=.01){const p=Ct.getPointOnCubicBezier(h,u.start.x,u.start.y,u.points[0],u.points[1],u.points[2],u.points[3],u.points[4],u.points[5]);t.push(p.x,p.y)}else t=t.concat(u.points)});let n=t[0],r=t[0],i=t[1],s=t[1],l,d;for(let u=0;u<t.length/2;u++)l=t[u*2],d=t[u*2+1],isNaN(l)||(n=Math.min(n,l),r=Math.max(r,l)),isNaN(d)||(i=Math.min(i,d),s=Math.max(s,d));return{x:n,y:i,width:r-n,height:s-i}}getLength(){return this.pathLength}getPointAtLength(t){return Ct.getPointAtLengthOfDataArray(t,this.dataArray)}static getLineLength(t,n,r,i){return Math.sqrt((r-t)*(r-t)+(i-n)*(i-n))}static getPathLength(t){let n=0;for(let r=0;r<t.length;++r)n+=t[r].pathLength;return n}static getPointAtLengthOfDataArray(t,n){let r,i=0,s=n.length;if(!s)return null;for(;i<s&&t>n[i].pathLength;)t-=n[i].pathLength,++i;if(i===s)return r=n[i-1].points.slice(-2),{x:r[0],y:r[1]};if(t<.01)return r=n[i].points.slice(0,2),{x:r[0],y:r[1]};const l=n[i],d=l.points;switch(l.command){case"L":return Ct.getPointOnLine(t,l.start.x,l.start.y,d[0],d[1]);case"C":return Ct.getPointOnCubicBezier((0,$a.t2length)(t,Ct.getPathLength(n),N=>(0,$a.getCubicArcLength)([l.start.x,d[0],d[2],d[4]],[l.start.y,d[1],d[3],d[5]],N)),l.start.x,l.start.y,d[0],d[1],d[2],d[3],d[4],d[5]);case"Q":return Ct.getPointOnQuadraticBezier((0,$a.t2length)(t,Ct.getPathLength(n),N=>(0,$a.getQuadraticArcLength)([l.start.x,d[0],d[2]],[l.start.y,d[1],d[3]],N)),l.start.x,l.start.y,d[0],d[1],d[2],d[3]);case"A":var u=d[0],h=d[1],p=d[2],m=d[3],x=d[4],y=d[5],S=d[6];return x+=y*t/l.pathLength,Ct.getPointOnEllipticalArc(u,h,p,m,x,S)}return null}static getPointOnLine(t,n,r,i,s,l,d){l=l??n,d=d??r;const u=this.getLineLength(n,r,i,s);if(u<1e-10)return{x:n,y:r};if(i===n)return{x:l,y:d+(s>r?t:-t)};const h=(s-r)/(i-n),p=Math.sqrt(t*t/(1+h*h))*(i<n?-1:1),m=h*p;if(Math.abs(d-r-h*(l-n))<1e-10)return{x:l+p,y:d+m};const x=((l-n)*(i-n)+(d-r)*(s-r))/(u*u),y=n+x*(i-n),S=r+x*(s-r),N=this.getLineLength(l,d,y,S),k=Math.sqrt(t*t-N*N),w=Math.sqrt(k*k/(1+h*h))*(i<n?-1:1),j=h*w;return{x:y+w,y:S+j}}static getPointOnCubicBezier(t,n,r,i,s,l,d,u,h){function p(k){return k*k*k}function m(k){return 3*k*k*(1-k)}function x(k){return 3*k*(1-k)*(1-k)}function y(k){return(1-k)*(1-k)*(1-k)}const S=u*p(t)+l*m(t)+i*x(t)+n*y(t),N=h*p(t)+d*m(t)+s*x(t)+r*y(t);return{x:S,y:N}}static getPointOnQuadraticBezier(t,n,r,i,s,l,d){function u(y){return y*y}function h(y){return 2*y*(1-y)}function p(y){return(1-y)*(1-y)}const m=l*u(t)+i*h(t)+n*p(t),x=d*u(t)+s*h(t)+r*p(t);return{x:m,y:x}}static getPointOnEllipticalArc(t,n,r,i,s,l){const d=Math.cos(l),u=Math.sin(l),h={x:r*Math.cos(s),y:i*Math.sin(s)};return{x:t+(h.x*d-h.y*u),y:n+(h.x*u+h.y*d)}}static parsePathData(t){if(!t)return[];let n=t;const r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(var i=0;i<r.length;i++)n=n.replace(new RegExp(r[i],"g"),"|"+r[i]);const s=n.split("|"),l=[],d=[];let u=0,h=0;const p=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let m;for(i=1;i<s.length;i++){let M=s[i],I=M.charAt(0);for(M=M.slice(1),d.length=0;m=p.exec(M);)d.push(m[0]);const P=[];for(let L=0,F=d.length;L<F;L++){if(d[L]==="00"){P.push(0,0);continue}const G=parseFloat(d[L]);isNaN(G)?P.push(0):P.push(G)}for(;P.length>0&&!isNaN(P[0]);){let L="",F=[];const G=u,R=h;var x,y,S,N,k,w,j,v,_,E;switch(I){case"l":u+=P.shift(),h+=P.shift(),L="L",F.push(u,h);break;case"L":u=P.shift(),h=P.shift(),F.push(u,h);break;case"m":var A=P.shift(),D=P.shift();if(u+=A,h+=D,L="M",l.length>2&&l[l.length-1].command==="z"){for(let $=l.length-2;$>=0;$--)if(l[$].command==="M"){u=l[$].points[0]+A,h=l[$].points[1]+D;break}}F.push(u,h),I="l";break;case"M":u=P.shift(),h=P.shift(),L="M",F.push(u,h),I="L";break;case"h":u+=P.shift(),L="L",F.push(u,h);break;case"H":u=P.shift(),L="L",F.push(u,h);break;case"v":h+=P.shift(),L="L",F.push(u,h);break;case"V":h=P.shift(),L="L",F.push(u,h);break;case"C":F.push(P.shift(),P.shift(),P.shift(),P.shift()),u=P.shift(),h=P.shift(),F.push(u,h);break;case"c":F.push(u+P.shift(),h+P.shift(),u+P.shift(),h+P.shift()),u+=P.shift(),h+=P.shift(),L="C",F.push(u,h);break;case"S":y=u,S=h,x=l[l.length-1],x.command==="C"&&(y=u+(u-x.points[2]),S=h+(h-x.points[3])),F.push(y,S,P.shift(),P.shift()),u=P.shift(),h=P.shift(),L="C",F.push(u,h);break;case"s":y=u,S=h,x=l[l.length-1],x.command==="C"&&(y=u+(u-x.points[2]),S=h+(h-x.points[3])),F.push(y,S,u+P.shift(),h+P.shift()),u+=P.shift(),h+=P.shift(),L="C",F.push(u,h);break;case"Q":F.push(P.shift(),P.shift()),u=P.shift(),h=P.shift(),F.push(u,h);break;case"q":F.push(u+P.shift(),h+P.shift()),u+=P.shift(),h+=P.shift(),L="Q",F.push(u,h);break;case"T":y=u,S=h,x=l[l.length-1],x.command==="Q"&&(y=u+(u-x.points[0]),S=h+(h-x.points[1])),u=P.shift(),h=P.shift(),L="Q",F.push(y,S,u,h);break;case"t":y=u,S=h,x=l[l.length-1],x.command==="Q"&&(y=u+(u-x.points[0]),S=h+(h-x.points[1])),u+=P.shift(),h+=P.shift(),L="Q",F.push(y,S,u,h);break;case"A":N=P.shift(),k=P.shift(),w=P.shift(),j=P.shift(),v=P.shift(),_=u,E=h,u=P.shift(),h=P.shift(),L="A",F=this.convertEndpointToCenterParameterization(_,E,u,h,j,v,N,k,w);break;case"a":N=P.shift(),k=P.shift(),w=P.shift(),j=P.shift(),v=P.shift(),_=u,E=h,u+=P.shift(),h+=P.shift(),L="A",F=this.convertEndpointToCenterParameterization(_,E,u,h,j,v,N,k,w);break}l.push({command:L||I,points:F,start:{x:G,y:R},pathLength:this.calcLength(G,R,L||I,F)})}(I==="z"||I==="Z")&&l.push({command:"z",points:[],start:void 0,pathLength:0})}return l}static calcLength(t,n,r,i){let s,l,d,u;const h=Ct;switch(r){case"L":return h.getLineLength(t,n,i[0],i[1]);case"C":return(0,$a.getCubicArcLength)([t,i[0],i[2],i[4]],[n,i[1],i[3],i[5]],1);case"Q":return(0,$a.getQuadraticArcLength)([t,i[0],i[2]],[n,i[1],i[3]],1);case"A":s=0;var p=i[4],m=i[5],x=i[4]+m,y=Math.PI/180;if(Math.abs(p-x)<y&&(y=Math.abs(p-x)),l=h.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],p,0),m<0)for(u=p-y;u>x;u-=y)d=h.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],u,0),s+=h.getLineLength(l.x,l.y,d.x,d.y),l=d;else for(u=p+y;u<x;u+=y)d=h.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],u,0),s+=h.getLineLength(l.x,l.y,d.x,d.y),l=d;return d=h.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],x,0),s+=h.getLineLength(l.x,l.y,d.x,d.y),s}return 0}static convertEndpointToCenterParameterization(t,n,r,i,s,l,d,u,h){const p=h*(Math.PI/180),m=Math.cos(p)*(t-r)/2+Math.sin(p)*(n-i)/2,x=-1*Math.sin(p)*(t-r)/2+Math.cos(p)*(n-i)/2,y=m*m/(d*d)+x*x/(u*u);y>1&&(d*=Math.sqrt(y),u*=Math.sqrt(y));let S=Math.sqrt((d*d*(u*u)-d*d*(x*x)-u*u*(m*m))/(d*d*(x*x)+u*u*(m*m)));s===l&&(S*=-1),isNaN(S)&&(S=0);const N=S*d*x/u,k=S*-u*m/d,w=(t+r)/2+Math.cos(p)*N-Math.sin(p)*k,j=(n+i)/2+Math.sin(p)*N+Math.cos(p)*k,v=function(P){return Math.sqrt(P[0]*P[0]+P[1]*P[1])},_=function(P,L){return(P[0]*L[0]+P[1]*L[1])/(v(P)*v(L))},E=function(P,L){return(P[0]*L[1]<P[1]*L[0]?-1:1)*Math.acos(_(P,L))},A=E([1,0],[(m-N)/d,(x-k)/u]),D=[(m-N)/d,(x-k)/u],M=[(-1*m-N)/d,(-1*x-k)/u];let I=E(D,M);return _(D,M)<=-1&&(I=Math.PI),_(D,M)>=1&&(I=0),l===0&&I>0&&(I=I-2*Math.PI),l===1&&I<0&&(I=I+2*Math.PI),[w,j,d,u,A,I,p,l]}}Do.Path=Ct;Ct.prototype.className="Path";Ct.prototype._attrsAffectingSize=["data"];(0,pR._registerNode)(Ct);hR.Factory.addGetterSetter(Ct,"data");Object.defineProperty(mf,"__esModule",{value:!0});mf.Arrow=void 0;const xf=Re,mR=Bc,L6=je,gR=Me,Gb=Do;class fa extends mR.Line{_sceneFunc(t){super._sceneFunc(t);const n=Math.PI*2,r=this.points();let i=r;const s=this.tension()!==0&&r.length>4;s&&(i=this.getTensionPoints());const l=this.pointerLength(),d=r.length;let u,h;if(s){const x=[i[i.length-4],i[i.length-3],i[i.length-2],i[i.length-1],r[d-2],r[d-1]],y=Gb.Path.calcLength(i[i.length-4],i[i.length-3],"C",x),S=Gb.Path.getPointOnQuadraticBezier(Math.min(1,1-l/y),x[0],x[1],x[2],x[3],x[4],x[5]);u=r[d-2]-S.x,h=r[d-1]-S.y}else u=r[d-2]-r[d-4],h=r[d-1]-r[d-3];const p=(Math.atan2(h,u)+n)%n,m=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(r[d-2],r[d-1]),t.rotate(p),t.moveTo(0,0),t.lineTo(-l,m/2),t.lineTo(-l,-m/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(r[0],r[1]),s?(u=(i[0]+i[2])/2-r[0],h=(i[1]+i[3])/2-r[1]):(u=r[2]-r[0],h=r[3]-r[1]),t.rotate((Math.atan2(-h,-u)+n)%n),t.moveTo(0,0),t.lineTo(-l,m/2),t.lineTo(-l,-m/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){const n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),n=this.pointerWidth()/2;return{x:t.x-n,y:t.y-n,width:t.width+n*2,height:t.height+n*2}}}mf.Arrow=fa;fa.prototype.className="Arrow";(0,gR._registerNode)(fa);xf.Factory.addGetterSetter(fa,"pointerLength",10,(0,L6.getNumberValidator)());xf.Factory.addGetterSetter(fa,"pointerWidth",10,(0,L6.getNumberValidator)());xf.Factory.addGetterSetter(fa,"pointerAtBeginning",!1);xf.Factory.addGetterSetter(fa,"pointerAtEnding",!0);var yf={};Object.defineProperty(yf,"__esModule",{value:!0});yf.Circle=void 0;const xR=Re,yR=Tt,vR=je,bR=Me;class Oo extends yR.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}}yf.Circle=Oo;Oo.prototype._centroid=!0;Oo.prototype.className="Circle";Oo.prototype._attrsAffectingSize=["radius"];(0,bR._registerNode)(Oo);xR.Factory.addGetterSetter(Oo,"radius",0,(0,vR.getNumberValidator)());var vf={};Object.defineProperty(vf,"__esModule",{value:!0});vf.Ellipse=void 0;const w1=Re,wR=Tt,D6=je,NR=Me;class bs extends wR.Shape{_sceneFunc(t){const n=this.radiusX(),r=this.radiusY();t.beginPath(),t.save(),n!==r&&t.scale(1,r/n),t.arc(0,0,n,0,Math.PI*2,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}vf.Ellipse=bs;bs.prototype.className="Ellipse";bs.prototype._centroid=!0;bs.prototype._attrsAffectingSize=["radiusX","radiusY"];(0,NR._registerNode)(bs);w1.Factory.addComponentsGetterSetter(bs,"radius",["x","y"]);w1.Factory.addGetterSetter(bs,"radiusX",0,(0,D6.getNumberValidator)());w1.Factory.addGetterSetter(bs,"radiusY",0,(0,D6.getNumberValidator)());var bf={};Object.defineProperty(bf,"__esModule",{value:!0});bf.Image=void 0;const bm=pt,pa=Re,SR=Tt,_R=Me,Vc=je;let Or=class O6 extends SR.Shape{constructor(t){super(t),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&t.readyState===4||t&&t.addEventListener&&t.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){const t=!!this.cornerRadius(),n=this.hasShadow();return t&&n?!0:super._useBufferCanvas(!0)}_sceneFunc(t){const n=this.getWidth(),r=this.getHeight(),i=this.cornerRadius(),s=this.attrs.image;let l;if(s){const d=this.attrs.cropWidth,u=this.attrs.cropHeight;d&&u?l=[s,this.cropX(),this.cropY(),d,u,0,0,n,r]:l=[s,0,0,n,r]}(this.hasFill()||this.hasStroke()||i)&&(t.beginPath(),i?bm.Util.drawRoundedRectPath(t,n,r,i):t.rect(0,0,n,r),t.closePath(),t.fillStrokeShape(this)),s&&(i&&t.clip(),t.drawImage.apply(t,l))}_hitFunc(t){const n=this.width(),r=this.height(),i=this.cornerRadius();t.beginPath(),i?bm.Util.drawRoundedRectPath(t,n,r,i):t.rect(0,0,n,r),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,n;return(t=this.attrs.width)!==null&&t!==void 0?t:(n=this.image())===null||n===void 0?void 0:n.width}getHeight(){var t,n;return(t=this.attrs.height)!==null&&t!==void 0?t:(n=this.image())===null||n===void 0?void 0:n.height}static fromURL(t,n,r=null){const i=bm.Util.createImageElement();i.onload=function(){const s=new O6({image:i});n(s)},i.onerror=r,i.crossOrigin="Anonymous",i.src=t}};bf.Image=Or;Or.prototype.className="Image";(0,_R._registerNode)(Or);pa.Factory.addGetterSetter(Or,"cornerRadius",0,(0,Vc.getNumberOrArrayOfNumbersValidator)(4));pa.Factory.addGetterSetter(Or,"image");pa.Factory.addComponentsGetterSetter(Or,"crop",["x","y","width","height"]);pa.Factory.addGetterSetter(Or,"cropX",0,(0,Vc.getNumberValidator)());pa.Factory.addGetterSetter(Or,"cropY",0,(0,Vc.getNumberValidator)());pa.Factory.addGetterSetter(Or,"cropWidth",0,(0,Vc.getNumberValidator)());pa.Factory.addGetterSetter(Or,"cropHeight",0,(0,Vc.getNumberValidator)());var ko={};Object.defineProperty(ko,"__esModule",{value:!0});ko.Tag=ko.Label=void 0;const wf=Re,jR=Tt,kR=zo,N1=je,U6=Me,$6=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],CR="Change.konva",ER="none",Yg="up",Kg="right",Xg="down",Qg="left",PR=$6.length;class S1 extends kR.Group{constructor(t){super(t),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){let n=this,r;const i=function(){n._sync()};for(r=0;r<PR;r++)t.on($6[r]+CR,i)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let t=this.getText(),n=this.getTag(),r,i,s,l,d,u,h;if(t&&n){switch(r=t.width(),i=t.height(),s=n.pointerDirection(),l=n.pointerWidth(),h=n.pointerHeight(),d=0,u=0,s){case Yg:d=r/2,u=-1*h;break;case Kg:d=r+l,u=i/2;break;case Xg:d=r/2,u=i+h;break;case Qg:d=-1*l,u=i/2;break}n.setAttrs({x:-1*d,y:-1*u,width:r,height:i}),t.setAttrs({x:-1*d,y:-1*u})}}}ko.Label=S1;S1.prototype.className="Label";(0,U6._registerNode)(S1);class ma extends jR.Shape{_sceneFunc(t){const n=this.width(),r=this.height(),i=this.pointerDirection(),s=this.pointerWidth(),l=this.pointerHeight(),d=this.cornerRadius();let u=0,h=0,p=0,m=0;typeof d=="number"?u=h=p=m=Math.min(d,n/2,r/2):(u=Math.min(d[0]||0,n/2,r/2),h=Math.min(d[1]||0,n/2,r/2),m=Math.min(d[2]||0,n/2,r/2),p=Math.min(d[3]||0,n/2,r/2)),t.beginPath(),t.moveTo(u,0),i===Yg&&(t.lineTo((n-s)/2,0),t.lineTo(n/2,-1*l),t.lineTo((n+s)/2,0)),t.lineTo(n-h,0),t.arc(n-h,h,h,Math.PI*3/2,0,!1),i===Kg&&(t.lineTo(n,(r-l)/2),t.lineTo(n+s,r/2),t.lineTo(n,(r+l)/2)),t.lineTo(n,r-m),t.arc(n-m,r-m,m,0,Math.PI/2,!1),i===Xg&&(t.lineTo((n+s)/2,r),t.lineTo(n/2,r+l),t.lineTo((n-s)/2,r)),t.lineTo(p,r),t.arc(p,r-p,p,Math.PI/2,Math.PI,!1),i===Qg&&(t.lineTo(0,(r+l)/2),t.lineTo(-1*s,r/2),t.lineTo(0,(r-l)/2)),t.lineTo(0,u),t.arc(u,u,u,Math.PI,Math.PI*3/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){let t=0,n=0,r=this.pointerWidth(),i=this.pointerHeight(),s=this.pointerDirection(),l=this.width(),d=this.height();return s===Yg?(n-=i,d+=i):s===Xg?d+=i:s===Qg?(t-=r*1.5,l+=r):s===Kg&&(l+=r*1.5),{x:t,y:n,width:l,height:d}}}ko.Tag=ma;ma.prototype.className="Tag";(0,U6._registerNode)(ma);wf.Factory.addGetterSetter(ma,"pointerDirection",ER);wf.Factory.addGetterSetter(ma,"pointerWidth",0,(0,N1.getNumberValidator)());wf.Factory.addGetterSetter(ma,"pointerHeight",0,(0,N1.getNumberValidator)());wf.Factory.addGetterSetter(ma,"cornerRadius",0,(0,N1.getNumberOrArrayOfNumbersValidator)(4));var Hc={};Object.defineProperty(Hc,"__esModule",{value:!0});Hc.Rect=void 0;const TR=Re,MR=Tt,RR=Me,AR=pt,IR=je;let Nf=class extends MR.Shape{_sceneFunc(t){const n=this.cornerRadius(),r=this.width(),i=this.height();t.beginPath(),n?AR.Util.drawRoundedRectPath(t,r,i,n):t.rect(0,0,r,i),t.closePath(),t.fillStrokeShape(this)}};Hc.Rect=Nf;Nf.prototype.className="Rect";(0,RR._registerNode)(Nf);TR.Factory.addGetterSetter(Nf,"cornerRadius",0,(0,IR.getNumberOrArrayOfNumbersValidator)(4));var Sf={};Object.defineProperty(Sf,"__esModule",{value:!0});Sf.RegularPolygon=void 0;const G6=Re,FR=Tt,B6=je,zR=Me;class ga extends FR.Shape{_sceneFunc(t){const n=this._getPoints();t.beginPath(),t.moveTo(n[0].x,n[0].y);for(let r=1;r<n.length;r++)t.lineTo(n[r].x,n[r].y);t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,n=this.attrs.radius||0,r=[];for(let i=0;i<t;i++)r.push({x:n*Math.sin(i*2*Math.PI/t),y:-1*n*Math.cos(i*2*Math.PI/t)});return r}getSelfRect(){const t=this._getPoints();let n=t[0].x,r=t[0].y,i=t[0].x,s=t[0].y;return t.forEach(l=>{n=Math.min(n,l.x),r=Math.max(r,l.x),i=Math.min(i,l.y),s=Math.max(s,l.y)}),{x:n,y:i,width:r-n,height:s-i}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}Sf.RegularPolygon=ga;ga.prototype.className="RegularPolygon";ga.prototype._centroid=!0;ga.prototype._attrsAffectingSize=["radius"];(0,zR._registerNode)(ga);G6.Factory.addGetterSetter(ga,"radius",0,(0,B6.getNumberValidator)());G6.Factory.addGetterSetter(ga,"sides",0,(0,B6.getNumberValidator)());var _f={};Object.defineProperty(_f,"__esModule",{value:!0});_f.Ring=void 0;const V6=Re,LR=Tt,H6=je,DR=Me,Bb=Math.PI*2;class xa extends LR.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,Bb,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),Bb,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}_f.Ring=xa;xa.prototype.className="Ring";xa.prototype._centroid=!0;xa.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,DR._registerNode)(xa);V6.Factory.addGetterSetter(xa,"innerRadius",0,(0,H6.getNumberValidator)());V6.Factory.addGetterSetter(xa,"outerRadius",0,(0,H6.getNumberValidator)());var jf={};Object.defineProperty(jf,"__esModule",{value:!0});jf.Sprite=void 0;const ya=Re,OR=Tt,UR=Lo,W6=je,$R=Me;class Ur extends OR.Shape{constructor(t){super(t),this._updated=!0,this.anim=new UR.Animation(()=>{const n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(t){const n=this.animation(),r=this.frameIndex(),i=r*4,s=this.animations()[n],l=this.frameOffsets(),d=s[i+0],u=s[i+1],h=s[i+2],p=s[i+3],m=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,h,p),t.closePath(),t.fillStrokeShape(this)),m)if(l){const x=l[n],y=r*2;t.drawImage(m,d,u,h,p,x[y+0],x[y+1],h,p)}else t.drawImage(m,d,u,h,p,0,0,h,p)}_hitFunc(t){const n=this.animation(),r=this.frameIndex(),i=r*4,s=this.animations()[n],l=this.frameOffsets(),d=s[i+2],u=s[i+3];if(t.beginPath(),l){const h=l[n],p=r*2;t.rect(h[p+0],h[p+1],d,u)}else t.rect(0,0,d,u);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const t=this.frameIndex(),n=this.animation(),r=this.animations(),i=r[n],s=i.length/4;t<s-1?this.frameIndex(t+1):this.frameIndex(0)}}jf.Sprite=Ur;Ur.prototype.className="Sprite";(0,$R._registerNode)(Ur);ya.Factory.addGetterSetter(Ur,"animation");ya.Factory.addGetterSetter(Ur,"animations");ya.Factory.addGetterSetter(Ur,"frameOffsets");ya.Factory.addGetterSetter(Ur,"image");ya.Factory.addGetterSetter(Ur,"frameIndex",0,(0,W6.getNumberValidator)());ya.Factory.addGetterSetter(Ur,"frameRate",17,(0,W6.getNumberValidator)());ya.Factory.backCompat(Ur,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var kf={};Object.defineProperty(kf,"__esModule",{value:!0});kf.Star=void 0;const _1=Re,GR=Tt,j1=je,BR=Me;class ws extends GR.Shape{_sceneFunc(t){const n=this.innerRadius(),r=this.outerRadius(),i=this.numPoints();t.beginPath(),t.moveTo(0,0-r);for(let s=1;s<i*2;s++){const l=s%2===0?r:n,d=l*Math.sin(s*Math.PI/i),u=-1*l*Math.cos(s*Math.PI/i);t.lineTo(d,u)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}kf.Star=ws;ws.prototype.className="Star";ws.prototype._centroid=!0;ws.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,BR._registerNode)(ws);_1.Factory.addGetterSetter(ws,"numPoints",5,(0,j1.getNumberValidator)());_1.Factory.addGetterSetter(ws,"innerRadius",0,(0,j1.getNumberValidator)());_1.Factory.addGetterSetter(ws,"outerRadius",0,(0,j1.getNumberValidator)());var Uo={};Object.defineProperty(Uo,"__esModule",{value:!0});Uo.Text=void 0;Uo.stringToArray=Y6;const qg=pt,tn=Re,VR=Tt,wm=Me,Ns=je,HR=Me;function Y6(e){return[...e].reduce((t,n,r,i)=>(/\p{Emoji_Modifier_Base}\p{Emoji_Modifier}?(?:\u200D\p{Emoji_Presentation})+/u.test(n)?t.push(n):/\p{Regional_Indicator}{2}/u.test(n+(i[r+1]||""))?t.push(n+i[r+1]):r>0&&/\p{Mn}|\p{Me}|\p{Mc}/u.test(n)?t[t.length-1]+=n:t.push(n),t),[])}const Ga="auto",WR="center",K6="inherit",Rl="justify",YR="Change.konva",KR="2d",Vb="-",X6="left",XR="text",QR="Text",qR="top",ZR="bottom",Hb="middle",Q6="normal",JR="px ",Su=" ",eA="right",Wb="rtl",tA="word",nA="char",Yb="none",Nm="",q6=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],rA=q6.length;function iA(e){return e.split(",").map(t=>{t=t.trim();const n=t.indexOf(" ")>=0,r=t.indexOf('"')>=0||t.indexOf("'")>=0;return n&&!r&&(t=`"${t}"`),t}).join(", ")}let _u;function Sm(){return _u||(_u=qg.Util.createCanvasElement().getContext(KR),_u)}function sA(e){e.fillText(this._partialText,this._partialTextX,this._partialTextY)}function aA(e){e.setAttr("miterLimit",2),e.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function oA(e){return e=e||{},!e.fillLinearGradientColorStops&&!e.fillRadialGradientColorStops&&!e.fillPatternImage&&(e.fill=e.fill||"black"),e}let vt=class extends VR.Shape{constructor(t){super(oA(t)),this._partialTextX=0,this._partialTextY=0;for(let n=0;n<rA;n++)this.on(q6[n]+YR,this._setTextData);this._setTextData()}_sceneFunc(t){const n=this.textArr,r=n.length;if(!this.text())return;let i=this.padding(),s=this.fontSize(),l=this.lineHeight()*s,d=this.verticalAlign(),u=this.direction(),h=0,p=this.align(),m=this.getWidth(),x=this.letterSpacing(),y=this.fill(),S=this.textDecoration(),N=S.indexOf("underline")!==-1,k=S.indexOf("line-through")!==-1,w;u=u===K6?t.direction:u;let j=l/2,v=Hb;if(wm.Konva._fixTextRendering){const G=this.measureSize("M");v="alphabetic",j=(G.fontBoundingBoxAscent-G.fontBoundingBoxDescent)/2+l/2}var _=0,E=0;for(u===Wb&&t.setAttr("direction",u),t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",v),t.setAttr("textAlign",X6),d===Hb?h=(this.getHeight()-r*l-i*2)/2:d===ZR&&(h=this.getHeight()-r*l-i*2),t.translate(i,h+i),w=0;w<r;w++){var _=0,E=0,A=n[w],D=A.text,M=A.width,I=A.lastInParagraph,P,L,F;if(t.save(),p===eA?_+=m-M-i*2:p===WR&&(_+=(m-M-i*2)/2),N){t.save(),t.beginPath();const $=wm.Konva._fixTextRendering?Math.round(s/4):Math.round(s/2),B=_,Q=j+E+$;t.moveTo(B,Q),P=D.split(" ").length-1,L=P===0,F=p===Rl&&!I?m-i*2:M,t.lineTo(B+Math.round(F),Q),t.lineWidth=s/15;const K=this._getLinearGradient();t.strokeStyle=K||y,t.stroke(),t.restore()}if(k){t.save(),t.beginPath();const $=wm.Konva._fixTextRendering?-Math.round(s/4):0;t.moveTo(_,j+E+$),P=D.split(" ").length-1,L=P===0,F=p===Rl&&I&&!L?m-i*2:M,t.lineTo(_+Math.round(F),j+E+$),t.lineWidth=s/15;const B=this._getLinearGradient();t.strokeStyle=B||y,t.stroke(),t.restore()}if(u!==Wb&&(x!==0||p===Rl)){P=D.split(" ").length-1;const $=Y6(D);for(let B=0;B<$.length;B++){const Q=$[B];Q===" "&&!I&&p===Rl&&(_+=(m-i*2-M)/P),this._partialTextX=_,this._partialTextY=j+E,this._partialText=Q,t.fillStrokeShape(this),_+=this.measureSize(Q).width+x}}else x!==0&&t.setAttr("letterSpacing",`${x}px`),this._partialTextX=_,this._partialTextY=j+E,this._partialText=D,t.fillStrokeShape(this);t.restore(),r>1&&(j+=l)}}_hitFunc(t){const n=this.getWidth(),r=this.getHeight();t.beginPath(),t.rect(0,0,n,r),t.closePath(),t.fillStrokeShape(this)}setText(t){const n=qg.Util._isString(t)?t:t==null?"":t+"";return this._setAttr(XR,n),this}getWidth(){return this.attrs.width===Ga||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===Ga||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return qg.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var n,r,i,s,l,d,u,h,p,m,x;let y=Sm(),S=this.fontSize(),N;y.save(),y.font=this._getContextFont(),N=y.measureText(t),y.restore();const k=S/100;return{actualBoundingBoxAscent:(n=N.actualBoundingBoxAscent)!==null&&n!==void 0?n:71.58203125*k,actualBoundingBoxDescent:(r=N.actualBoundingBoxDescent)!==null&&r!==void 0?r:0,actualBoundingBoxLeft:(i=N.actualBoundingBoxLeft)!==null&&i!==void 0?i:-7.421875*k,actualBoundingBoxRight:(s=N.actualBoundingBoxRight)!==null&&s!==void 0?s:75.732421875*k,alphabeticBaseline:(l=N.alphabeticBaseline)!==null&&l!==void 0?l:0,emHeightAscent:(d=N.emHeightAscent)!==null&&d!==void 0?d:100*k,emHeightDescent:(u=N.emHeightDescent)!==null&&u!==void 0?u:-20*k,fontBoundingBoxAscent:(h=N.fontBoundingBoxAscent)!==null&&h!==void 0?h:91*k,fontBoundingBoxDescent:(p=N.fontBoundingBoxDescent)!==null&&p!==void 0?p:21*k,hangingBaseline:(m=N.hangingBaseline)!==null&&m!==void 0?m:72.80000305175781*k,ideographicBaseline:(x=N.ideographicBaseline)!==null&&x!==void 0?x:-21*k,width:N.width,height:S}}_getContextFont(){return this.fontStyle()+Su+this.fontVariant()+Su+(this.fontSize()+JR)+iA(this.fontFamily())}_addTextLine(t){this.align()===Rl&&(t=t.trim());const r=this._getTextWidth(t);return this.textArr.push({text:t,width:r,lastInParagraph:!1})}_getTextWidth(t){const n=this.letterSpacing(),r=t.length;return Sm().measureText(t).width+(r?n*(r-1):0)}_setTextData(){let t=this.text().split(`
`),n=+this.fontSize(),r=0,i=this.lineHeight()*n,s=this.attrs.width,l=this.attrs.height,d=s!==Ga&&s!==void 0,u=l!==Ga&&l!==void 0,h=this.padding(),p=s-h*2,m=l-h*2,x=0,y=this.wrap(),S=y!==Yb,N=y!==nA&&S,k=this.ellipsis();this.textArr=[],Sm().font=this._getContextFont();const w=k?this._getTextWidth(Nm):0;for(let v=0,_=t.length;v<_;++v){let E=t[v],A=this._getTextWidth(E);if(d&&A>p)for(;E.length>0;){let D=0,M=E.length,I="",P=0;for(;D<M;){const L=D+M>>>1,F=E.slice(0,L+1),G=this._getTextWidth(F)+w;G<=p?(D=L+1,I=F,P=G):M=L}if(I){if(N){var j;const F=E[I.length];(F===Su||F===Vb)&&P<=p?j=I.length:j=Math.max(I.lastIndexOf(Su),I.lastIndexOf(Vb))+1,j>0&&(D=j,I=I.slice(0,D),P=this._getTextWidth(I))}if(I=I.trimRight(),this._addTextLine(I),r=Math.max(r,P),x+=i,this._shouldHandleEllipsis(x)){this._tryToAddEllipsisToLastLine();break}if(E=E.slice(D),E=E.trimLeft(),E.length>0&&(A=this._getTextWidth(E),A<=p)){this._addTextLine(E),x+=i,r=Math.max(r,A);break}}else break}else this._addTextLine(E),x+=i,r=Math.max(r,A),this._shouldHandleEllipsis(x)&&v<_-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),u&&x+i>m)break}this.textHeight=n,this.textWidth=r}_shouldHandleEllipsis(t){const n=+this.fontSize(),r=this.lineHeight()*n,i=this.attrs.height,s=i!==Ga&&i!==void 0,l=this.padding(),d=i-l*2;return!(this.wrap()!==Yb)||s&&t+r>d}_tryToAddEllipsisToLastLine(){const t=this.attrs.width,n=t!==Ga&&t!==void 0,r=this.padding(),i=t-r*2,s=this.ellipsis(),l=this.textArr[this.textArr.length-1];!l||!s||(n&&(this._getTextWidth(l.text+Nm)<i||(l.text=l.text.slice(0,l.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(l.text+Nm))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const t=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,n=this.hasShadow();return t&&n?!0:super._useBufferCanvas()}};Uo.Text=vt;vt.prototype._fillFunc=sA;vt.prototype._strokeFunc=aA;vt.prototype.className=QR;vt.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];(0,HR._registerNode)(vt);tn.Factory.overWriteSetter(vt,"width",(0,Ns.getNumberOrAutoValidator)());tn.Factory.overWriteSetter(vt,"height",(0,Ns.getNumberOrAutoValidator)());tn.Factory.addGetterSetter(vt,"direction",K6);tn.Factory.addGetterSetter(vt,"fontFamily","Arial");tn.Factory.addGetterSetter(vt,"fontSize",12,(0,Ns.getNumberValidator)());tn.Factory.addGetterSetter(vt,"fontStyle",Q6);tn.Factory.addGetterSetter(vt,"fontVariant",Q6);tn.Factory.addGetterSetter(vt,"padding",0,(0,Ns.getNumberValidator)());tn.Factory.addGetterSetter(vt,"align",X6);tn.Factory.addGetterSetter(vt,"verticalAlign",qR);tn.Factory.addGetterSetter(vt,"lineHeight",1,(0,Ns.getNumberValidator)());tn.Factory.addGetterSetter(vt,"wrap",tA);tn.Factory.addGetterSetter(vt,"ellipsis",!1,(0,Ns.getBooleanValidator)());tn.Factory.addGetterSetter(vt,"letterSpacing",0,(0,Ns.getNumberValidator)());tn.Factory.addGetterSetter(vt,"text","",(0,Ns.getStringValidator)());tn.Factory.addGetterSetter(vt,"textDecoration","");var Cf={};Object.defineProperty(Cf,"__esModule",{value:!0});Cf.TextPath=void 0;const _m=pt,vr=Re,lA=Tt,Al=Do,jm=Uo,Z6=je,cA=Me,dA="",J6="normal";function e8(e){e.fillText(this.partialText,0,0)}function t8(e){e.strokeText(this.partialText,0,0)}class Mt extends lA.Shape{constructor(t){super(t),this.dummyCanvas=_m.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return Al.Path.getPathLength(this.dataArray)}_getPointAtLength(t){if(!this.attrs.data)return null;const n=this.pathLength;return t-1>n?null:Al.Path.getPointAtLengthOfDataArray(t,this.dataArray)}_readDataAttribute(){this.dataArray=Al.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();const n=this.textDecoration(),r=this.fill(),i=this.fontSize(),s=this.glyphInfo;n==="underline"&&t.beginPath();for(let l=0;l<s.length;l++){t.save();const d=s[l].p0;t.translate(d.x,d.y),t.rotate(s[l].rotation),this.partialText=s[l].text,t.fillStrokeShape(this),n==="underline"&&(l===0&&t.moveTo(0,i/2+1),t.lineTo(i,i/2+1)),t.restore()}n==="underline"&&(t.strokeStyle=r,t.lineWidth=i/20,t.stroke()),t.restore()}_hitFunc(t){t.beginPath();const n=this.glyphInfo;if(n.length>=1){const r=n[0].p0;t.moveTo(r.x,r.y)}for(let r=0;r<n.length;r++){const i=n[r].p1;t.lineTo(i.x,i.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return _m.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return jm.Text.prototype.setText.call(this,t)}_getContextFont(){return jm.Text.prototype._getContextFont.call(this)}_getTextSize(t){const r=this.dummyCanvas.getContext("2d");r.save(),r.font=this._getContextFont();const i=r.measureText(t);return r.restore(),{width:i.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:t,height:n}=this._getTextSize(this.attrs.text);if(this.textWidth=t,this.textHeight=n,this.glyphInfo=[],!this.attrs.data)return null;const r=this.letterSpacing(),i=this.align(),s=this.kerningFunc(),l=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0);let d=0;i==="center"&&(d=Math.max(0,this.pathLength/2-l/2)),i==="right"&&(d=Math.max(0,this.pathLength-l));const u=(0,jm.stringToArray)(this.text());let h=d;for(let p=0;p<u.length;p++){const m=this._getPointAtLength(h);if(!m)return;let x=this._getTextSize(u[p]).width+r;if(u[p]===" "&&i==="justify"){const j=this.text().split(" ").length-1;x+=(this.pathLength-l)/j}const y=this._getPointAtLength(h+x);if(!y)return;const S=Al.Path.getLineLength(m.x,m.y,y.x,y.y);let N=0;if(s)try{N=s(u[p-1],u[p])*this.fontSize()}catch{N=0}m.x+=N,y.x+=N,this.textWidth+=N;const k=Al.Path.getPointOnLine(N+S/2,m.x,m.y,y.x,y.y),w=Math.atan2(y.y-m.y,y.x-m.x);this.glyphInfo.push({transposeX:k.x,transposeY:k.y,text:u[p],rotation:w,p0:m,p1:y}),h+=x}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const t=[];this.glyphInfo.forEach(function(h){t.push(h.p0.x),t.push(h.p0.y),t.push(h.p1.x),t.push(h.p1.y)});let n=t[0]||0,r=t[0]||0,i=t[1]||0,s=t[1]||0,l,d;for(let h=0;h<t.length/2;h++)l=t[h*2],d=t[h*2+1],n=Math.min(n,l),r=Math.max(r,l),i=Math.min(i,d),s=Math.max(s,d);const u=this.fontSize();return{x:n-u/2,y:i-u/2,width:r-n+u,height:s-i+u}}destroy(){return _m.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}Cf.TextPath=Mt;Mt.prototype._fillFunc=e8;Mt.prototype._strokeFunc=t8;Mt.prototype._fillFuncHit=e8;Mt.prototype._strokeFuncHit=t8;Mt.prototype.className="TextPath";Mt.prototype._attrsAffectingSize=["text","fontSize","data"];(0,cA._registerNode)(Mt);vr.Factory.addGetterSetter(Mt,"data");vr.Factory.addGetterSetter(Mt,"fontFamily","Arial");vr.Factory.addGetterSetter(Mt,"fontSize",12,(0,Z6.getNumberValidator)());vr.Factory.addGetterSetter(Mt,"fontStyle",J6);vr.Factory.addGetterSetter(Mt,"align","left");vr.Factory.addGetterSetter(Mt,"letterSpacing",0,(0,Z6.getNumberValidator)());vr.Factory.addGetterSetter(Mt,"textBaseline","middle");vr.Factory.addGetterSetter(Mt,"fontVariant",J6);vr.Factory.addGetterSetter(Mt,"text",dA);vr.Factory.addGetterSetter(Mt,"textDecoration",null);vr.Factory.addGetterSetter(Mt,"kerningFunc",null);var Ef={};Object.defineProperty(Ef,"__esModule",{value:!0});Ef.Transformer=void 0;const Ke=pt,Ve=Re,Kb=ot,uA=Tt,hA=Hc,Xb=zo,or=Me,Ss=je,fA=Me,n8="tr-konva",pA=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(e=>e+`.${n8}`).join(" "),Qb="nodesRect",mA=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],gA={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},xA="ontouchstart"in or.Konva._global;function yA(e,t,n){if(e==="rotater")return n;t+=Ke.Util.degToRad(gA[e]||0);const r=(Ke.Util.radToDeg(t)%360+360)%360;return Ke.Util._inRange(r,315+22.5,360)||Ke.Util._inRange(r,0,22.5)?"ns-resize":Ke.Util._inRange(r,45-22.5,45+22.5)?"nesw-resize":Ke.Util._inRange(r,90-22.5,90+22.5)?"ew-resize":Ke.Util._inRange(r,135-22.5,135+22.5)?"nwse-resize":Ke.Util._inRange(r,180-22.5,180+22.5)?"ns-resize":Ke.Util._inRange(r,225-22.5,225+22.5)?"nesw-resize":Ke.Util._inRange(r,270-22.5,270+22.5)?"ew-resize":Ke.Util._inRange(r,315-22.5,315+22.5)?"nwse-resize":(Ke.Util.error("Transformer has unknown angle for cursor detection: "+r),"pointer")}const Ph=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],qb=1e8;function vA(e){return{x:e.x+e.width/2*Math.cos(e.rotation)+e.height/2*Math.sin(-e.rotation),y:e.y+e.height/2*Math.cos(e.rotation)+e.width/2*Math.sin(e.rotation)}}function r8(e,t,n){const r=n.x+(e.x-n.x)*Math.cos(t)-(e.y-n.y)*Math.sin(t),i=n.y+(e.x-n.x)*Math.sin(t)+(e.y-n.y)*Math.cos(t);return{...e,rotation:e.rotation+t,x:r,y:i}}function bA(e,t){const n=vA(e);return r8(e,t,n)}function wA(e,t,n){let r=t;for(let i=0;i<e.length;i++){const s=or.Konva.getAngle(e[i]),l=Math.abs(s-t)%(Math.PI*2);Math.min(l,Math.PI*2-l)<n&&(r=s)}return r}let Zg=0,De=class extends Xb.Group{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(pA,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return Ke.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return n8+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const n=t.filter(i=>i.isAncestorOf(this)?(Ke.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=t=n,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(i=>{const s=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},l=i._attrsAffectingSize.map(d=>d+"Change."+this._getEventNamespace()).join(" ");i.on(l,s),i.on(mA.map(d=>d+`.${this._getEventNamespace()}`).join(" "),s),i.on(`absoluteTransformChange.${this._getEventNamespace()}`,s),this._proxyDrag(i)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(t){let n;t.on(`dragstart.${this._getEventNamespace()}`,r=>{n=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(r,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,r=>{if(!n)return;const i=t.getAbsolutePosition(),s=i.x-n.x,l=i.y-n.y;this.nodes().forEach(d=>{if(d===t||d.isDragging())return;const u=d.getAbsolutePosition();d.setAbsolutePosition({x:u.x+s,y:u.y+l}),d.startDrag(r)}),n=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(Qb),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(Qb,this.__getNodeRect)}__getNodeShape(t,n=this.rotation(),r){const i=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),s=t.getAbsoluteScale(r),l=t.getAbsolutePosition(r),d=i.x*s.x-t.offsetX()*s.x,u=i.y*s.y-t.offsetY()*s.y,h=(or.Konva.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),p={x:l.x+d*Math.cos(h)+u*Math.sin(-h),y:l.y+u*Math.cos(h)+d*Math.sin(h),width:i.width*s.x,height:i.height*s.y,rotation:h};return r8(p,-or.Konva.getAngle(n),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-qb,y:-qb,width:0,height:0,rotation:0};const n=[];this.nodes().map(h=>{const p=h.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),m=[{x:p.x,y:p.y},{x:p.x+p.width,y:p.y},{x:p.x+p.width,y:p.y+p.height},{x:p.x,y:p.y+p.height}],x=h.getAbsoluteTransform();m.forEach(function(y){const S=x.point(y);n.push(S)})});const r=new Ke.Transform;r.rotate(-or.Konva.getAngle(this.rotation()));let i=1/0,s=1/0,l=-1/0,d=-1/0;n.forEach(function(h){const p=r.point(h);i===void 0&&(i=l=p.x,s=d=p.y),i=Math.min(i,p.x),s=Math.min(s,p.y),l=Math.max(l,p.x),d=Math.max(d,p.y)}),r.invert();const u=r.point({x:i,y:s});return{x:u.x,y:u.y,width:l-i,height:d-s,rotation:or.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Ph.forEach(t=>{this._createAnchor(t)}),this._createAnchor("rotater")}_createAnchor(t){const n=new hA.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:xA?10:"auto"}),r=this;n.on("mousedown touchstart",function(i){r._handleMouseDown(i)}),n.on("dragstart",i=>{n.stopDrag(),i.cancelBubble=!0}),n.on("dragend",i=>{i.cancelBubble=!0}),n.on("mouseenter",()=>{const i=or.Konva.getAngle(this.rotation()),s=this.rotateAnchorCursor(),l=yA(t,i,s);n.getStage().content&&(n.getStage().content.style.cursor=l),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){const t=new uA.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(n,r){const i=r.getParent(),s=i.padding();n.beginPath(),n.rect(-s,-s,r.width()+s*2,r.height()+s*2),n.moveTo(r.width()/2,-s),i.rotateEnabled()&&i.rotateLineVisible()&&n.lineTo(r.width()/2,-i.rotateAnchorOffset()*Ke.Util._sign(r.height())-s),n.fillStrokeShape(r)},hitFunc:(n,r)=>{if(!this.shouldOverdrawWholeArea())return;const i=this.padding();n.beginPath(),n.rect(-i,-i,r.width()+i*2,r.height()+i*2),n.fillStrokeShape(r)}});this.add(t),this._proxyDrag(t),t.on("dragstart",n=>{n.cancelBubble=!0}),t.on("dragmove",n=>{n.cancelBubble=!0}),t.on("dragend",n=>{n.cancelBubble=!0}),this.on("dragmove",n=>{this.update()})}_handleMouseDown(t){if(this._transforming)return;this._movingAnchorName=t.target.name().split(" ")[0];const n=this._getNodeRect(),r=n.width,i=n.height,s=Math.sqrt(Math.pow(r,2)+Math.pow(i,2));this.sin=Math.abs(i/s),this.cos=Math.abs(r/s),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const l=t.target.getAbsolutePosition(),d=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:d.x-l.x,y:d.y-l.y},Zg++,this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(u=>{u._fire("transformstart",{evt:t.evt,target:u})})}_handleMouseMove(t){let n,r,i;const s=this.findOne("."+this._movingAnchorName),l=s.getStage();l.setPointersPositions(t);const d=l.getPointerPosition();let u={x:d.x-this._anchorDragOffset.x,y:d.y-this._anchorDragOffset.y};const h=s.getAbsolutePosition();this.anchorDragBoundFunc()&&(u=this.anchorDragBoundFunc()(h,u,t)),s.setAbsolutePosition(u);const p=s.getAbsolutePosition();if(h.x===p.x&&h.y===p.y)return;if(this._movingAnchorName==="rotater"){const E=this._getNodeRect();n=s.x()-E.width/2,r=-s.y()+E.height/2;let A=Math.atan2(-r,n)+Math.PI/2;E.height<0&&(A-=Math.PI);const M=or.Konva.getAngle(this.rotation())+A,I=or.Konva.getAngle(this.rotationSnapTolerance()),L=wA(this.rotationSnaps(),M,I)-E.rotation,F=bA(E,L);this._fitNodesInto(F,t);return}const m=this.shiftBehavior();let x;m==="inverted"?x=this.keepRatio()&&!t.shiftKey:m==="none"?x=this.keepRatio():x=this.keepRatio()||t.shiftKey;var w=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(x){var y=w?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};i=Math.sqrt(Math.pow(y.x-s.x(),2)+Math.pow(y.y-s.y(),2));var S=this.findOne(".top-left").x()>y.x?-1:1,N=this.findOne(".top-left").y()>y.y?-1:1;n=i*this.cos*S,r=i*this.sin*N,this.findOne(".top-left").x(y.x-n),this.findOne(".top-left").y(y.y-r)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(s.y());else if(this._movingAnchorName==="top-right"){if(x){var y=w?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};i=Math.sqrt(Math.pow(s.x()-y.x,2)+Math.pow(y.y-s.y(),2));var S=this.findOne(".top-right").x()<y.x?-1:1,N=this.findOne(".top-right").y()>y.y?-1:1;n=i*this.cos*S,r=i*this.sin*N,this.findOne(".top-right").x(y.x+n),this.findOne(".top-right").y(y.y-r)}var k=s.position();this.findOne(".top-left").y(k.y),this.findOne(".bottom-right").x(k.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(s.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(s.x());else if(this._movingAnchorName==="bottom-left"){if(x){var y=w?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};i=Math.sqrt(Math.pow(y.x-s.x(),2)+Math.pow(s.y()-y.y,2));var S=y.x<s.x()?-1:1,N=s.y()<y.y?-1:1;n=i*this.cos*S,r=i*this.sin*N,s.x(y.x-n),s.y(y.y+r)}k=s.position(),this.findOne(".top-left").x(k.x),this.findOne(".bottom-right").y(k.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(s.y());else if(this._movingAnchorName==="bottom-right"){if(x){var y=w?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};i=Math.sqrt(Math.pow(s.x()-y.x,2)+Math.pow(s.y()-y.y,2));var S=this.findOne(".bottom-right").x()<y.x?-1:1,N=this.findOne(".bottom-right").y()<y.y?-1:1;n=i*this.cos*S,r=i*this.sin*N,this.findOne(".bottom-right").x(y.x+n),this.findOne(".bottom-right").y(y.y+r)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var w=this.centeredScaling()||t.altKey;if(w){const E=this.findOne(".top-left"),A=this.findOne(".bottom-right"),D=E.x(),M=E.y(),I=this.getWidth()-A.x(),P=this.getHeight()-A.y();A.move({x:-D,y:-M}),E.move({x:I,y:P})}const j=this.findOne(".top-left").getAbsolutePosition();n=j.x,r=j.y;const v=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),_=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:r,width:v,height:_,rotation:or.Konva.getAngle(this.rotation())},t)}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){var n;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const r=this.getNode();Zg--,this._fire("transformend",{evt:t,target:r}),(n=this.getLayer())===null||n===void 0||n.batchDraw(),r&&this._nodes.forEach(i=>{var s;i._fire("transformend",{evt:t,target:i}),(s=i.getLayer())===null||s===void 0||s.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(t,n){const r=this._getNodeRect(),i=1;if(Ke.Util._inRange(t.width,-this.padding()*2-i,i)){this.update();return}if(Ke.Util._inRange(t.height,-this.padding()*2-i,i)){this.update();return}const s=new Ke.Transform;if(s.rotate(or.Konva.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const x=s.point({x:-this.padding()*2,y:0});t.x+=x.x,t.y+=x.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=x.x,this._anchorDragOffset.y-=x.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const x=s.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=x.x,this._anchorDragOffset.y-=x.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const x=s.point({x:0,y:-this.padding()*2});t.x+=x.x,t.y+=x.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=x.x,this._anchorDragOffset.y-=x.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const x=s.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=x.x,this._anchorDragOffset.y-=x.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){const x=this.boundBoxFunc()(r,t);x?t=x:Ke.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const l=1e7,d=new Ke.Transform;d.translate(r.x,r.y),d.rotate(r.rotation),d.scale(r.width/l,r.height/l);const u=new Ke.Transform,h=t.width/l,p=t.height/l;this.flipEnabled()===!1?(u.translate(t.x,t.y),u.rotate(t.rotation),u.translate(t.width<0?t.width:0,t.height<0?t.height:0),u.scale(Math.abs(h),Math.abs(p))):(u.translate(t.x,t.y),u.rotate(t.rotation),u.scale(h,p));const m=u.multiply(d.invert());this._nodes.forEach(x=>{var y;const S=x.getParent().getAbsoluteTransform(),N=x.getTransform().copy();N.translate(x.offsetX(),x.offsetY());const k=new Ke.Transform;k.multiply(S.copy().invert()).multiply(m).multiply(S).multiply(N);const w=k.decompose();x.setAttrs(w),(y=x.getLayer())===null||y===void 0||y.batchDraw()}),this.rotation(Ke.Util._getRotation(t.rotation)),this._nodes.forEach(x=>{this._fire("transform",{evt:n,target:x}),x._fire("transform",{evt:n,target:x})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,n){this.findOne(t).setAttrs(n)}update(){var t;const n=this._getNodeRect();this.rotation(Ke.Util._getRotation(n.rotation));const r=n.width,i=n.height,s=this.enabledAnchors(),l=this.resizeEnabled(),d=this.padding(),u=this.anchorSize(),h=this.find("._anchor");h.forEach(m=>{m.setAttrs({width:u,height:u,offsetX:u/2,offsetY:u/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:u/2+d,offsetY:u/2+d,visible:l&&s.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:r/2,y:0,offsetY:u/2+d,visible:l&&s.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:r,y:0,offsetX:u/2-d,offsetY:u/2+d,visible:l&&s.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:i/2,offsetX:u/2+d,visible:l&&s.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:r,y:i/2,offsetX:u/2-d,visible:l&&s.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:i,offsetX:u/2+d,offsetY:u/2-d,visible:l&&s.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:r/2,y:i,offsetY:u/2-d,visible:l&&s.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:r,y:i,offsetX:u/2-d,offsetY:u/2-d,visible:l&&s.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:r/2,y:-this.rotateAnchorOffset()*Ke.Util._sign(i)-d,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:r,height:i,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const p=this.anchorStyleFunc();p&&h.forEach(m=>{p(m)}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),Xb.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return Kb.Node.prototype.toObject.call(this)}clone(t){return Kb.Node.prototype.clone.call(this,t)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Ef.Transformer=De;De.isTransforming=()=>Zg>0;function NA(e){return e instanceof Array||Ke.Util.warn("enabledAnchors value should be an array"),e instanceof Array&&e.forEach(function(t){Ph.indexOf(t)===-1&&Ke.Util.warn("Unknown anchor name: "+t+". Available names are: "+Ph.join(", "))}),e||[]}De.prototype.className="Transformer";(0,fA._registerNode)(De);Ve.Factory.addGetterSetter(De,"enabledAnchors",Ph,NA);Ve.Factory.addGetterSetter(De,"flipEnabled",!0,(0,Ss.getBooleanValidator)());Ve.Factory.addGetterSetter(De,"resizeEnabled",!0);Ve.Factory.addGetterSetter(De,"anchorSize",10,(0,Ss.getNumberValidator)());Ve.Factory.addGetterSetter(De,"rotateEnabled",!0);Ve.Factory.addGetterSetter(De,"rotateLineVisible",!0);Ve.Factory.addGetterSetter(De,"rotationSnaps",[]);Ve.Factory.addGetterSetter(De,"rotateAnchorOffset",50,(0,Ss.getNumberValidator)());Ve.Factory.addGetterSetter(De,"rotateAnchorCursor","crosshair");Ve.Factory.addGetterSetter(De,"rotationSnapTolerance",5,(0,Ss.getNumberValidator)());Ve.Factory.addGetterSetter(De,"borderEnabled",!0);Ve.Factory.addGetterSetter(De,"anchorStroke","rgb(0, 161, 255)");Ve.Factory.addGetterSetter(De,"anchorStrokeWidth",1,(0,Ss.getNumberValidator)());Ve.Factory.addGetterSetter(De,"anchorFill","white");Ve.Factory.addGetterSetter(De,"anchorCornerRadius",0,(0,Ss.getNumberValidator)());Ve.Factory.addGetterSetter(De,"borderStroke","rgb(0, 161, 255)");Ve.Factory.addGetterSetter(De,"borderStrokeWidth",1,(0,Ss.getNumberValidator)());Ve.Factory.addGetterSetter(De,"borderDash");Ve.Factory.addGetterSetter(De,"keepRatio",!0);Ve.Factory.addGetterSetter(De,"shiftBehavior","default");Ve.Factory.addGetterSetter(De,"centeredScaling",!1);Ve.Factory.addGetterSetter(De,"ignoreStroke",!1);Ve.Factory.addGetterSetter(De,"padding",0,(0,Ss.getNumberValidator)());Ve.Factory.addGetterSetter(De,"node");Ve.Factory.addGetterSetter(De,"nodes");Ve.Factory.addGetterSetter(De,"boundBoxFunc");Ve.Factory.addGetterSetter(De,"anchorDragBoundFunc");Ve.Factory.addGetterSetter(De,"anchorStyleFunc");Ve.Factory.addGetterSetter(De,"shouldOverdrawWholeArea",!1);Ve.Factory.addGetterSetter(De,"useSingleNodeRotation",!0);Ve.Factory.backCompat(De,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var Pf={};Object.defineProperty(Pf,"__esModule",{value:!0});Pf.Wedge=void 0;const Tf=Re,SA=Tt,_A=Me,i8=je,jA=Me;class Ni extends SA.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,_A.Konva.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}Pf.Wedge=Ni;Ni.prototype.className="Wedge";Ni.prototype._centroid=!0;Ni.prototype._attrsAffectingSize=["radius"];(0,jA._registerNode)(Ni);Tf.Factory.addGetterSetter(Ni,"radius",0,(0,i8.getNumberValidator)());Tf.Factory.addGetterSetter(Ni,"angle",0,(0,i8.getNumberValidator)());Tf.Factory.addGetterSetter(Ni,"clockwise",!1);Tf.Factory.backCompat(Ni,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var Mf={};Object.defineProperty(Mf,"__esModule",{value:!0});Mf.Blur=void 0;const Zb=Re,kA=ot,CA=je;function Jb(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const EA=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],PA=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function TA(e,t){const n=e.data,r=e.width,i=e.height;let s,l,d,u,h,p,m,x,y,S,N,k,w,j,v,_,E,A,D,M,I,P,L,F,G=t+t+1,R=r-1,$=i-1,B=t+1,Q=B*(B+1)/2,K=new Jb,H=null,W=K,z=null,V=null,J=EA[t],ee=PA[t];for(d=1;d<G;d++)W=W.next=new Jb,d===B&&(H=W);for(W.next=K,m=p=0,l=0;l<i;l++){for(_=E=A=D=x=y=S=N=0,k=B*(M=n[p]),w=B*(I=n[p+1]),j=B*(P=n[p+2]),v=B*(L=n[p+3]),x+=Q*M,y+=Q*I,S+=Q*P,N+=Q*L,W=K,d=0;d<B;d++)W.r=M,W.g=I,W.b=P,W.a=L,W=W.next;for(d=1;d<B;d++)u=p+((R<d?R:d)<<2),x+=(W.r=M=n[u])*(F=B-d),y+=(W.g=I=n[u+1])*F,S+=(W.b=P=n[u+2])*F,N+=(W.a=L=n[u+3])*F,_+=M,E+=I,A+=P,D+=L,W=W.next;for(z=K,V=H,s=0;s<r;s++)n[p+3]=L=N*J>>ee,L!==0?(L=255/L,n[p]=(x*J>>ee)*L,n[p+1]=(y*J>>ee)*L,n[p+2]=(S*J>>ee)*L):n[p]=n[p+1]=n[p+2]=0,x-=k,y-=w,S-=j,N-=v,k-=z.r,w-=z.g,j-=z.b,v-=z.a,u=m+((u=s+t+1)<R?u:R)<<2,_+=z.r=n[u],E+=z.g=n[u+1],A+=z.b=n[u+2],D+=z.a=n[u+3],x+=_,y+=E,S+=A,N+=D,z=z.next,k+=M=V.r,w+=I=V.g,j+=P=V.b,v+=L=V.a,_-=M,E-=I,A-=P,D-=L,V=V.next,p+=4;m+=r}for(s=0;s<r;s++){for(E=A=D=_=y=S=N=x=0,p=s<<2,k=B*(M=n[p]),w=B*(I=n[p+1]),j=B*(P=n[p+2]),v=B*(L=n[p+3]),x+=Q*M,y+=Q*I,S+=Q*P,N+=Q*L,W=K,d=0;d<B;d++)W.r=M,W.g=I,W.b=P,W.a=L,W=W.next;for(h=r,d=1;d<=t;d++)p=h+s<<2,x+=(W.r=M=n[p])*(F=B-d),y+=(W.g=I=n[p+1])*F,S+=(W.b=P=n[p+2])*F,N+=(W.a=L=n[p+3])*F,_+=M,E+=I,A+=P,D+=L,W=W.next,d<$&&(h+=r);for(p=s,z=K,V=H,l=0;l<i;l++)u=p<<2,n[u+3]=L=N*J>>ee,L>0?(L=255/L,n[u]=(x*J>>ee)*L,n[u+1]=(y*J>>ee)*L,n[u+2]=(S*J>>ee)*L):n[u]=n[u+1]=n[u+2]=0,x-=k,y-=w,S-=j,N-=v,k-=z.r,w-=z.g,j-=z.b,v-=z.a,u=s+((u=l+B)<$?u:$)*r<<2,x+=_+=z.r=n[u],y+=E+=z.g=n[u+1],S+=A+=z.b=n[u+2],N+=D+=z.a=n[u+3],z=z.next,k+=M=V.r,w+=I=V.g,j+=P=V.b,v+=L=V.a,_-=M,E-=I,A-=P,D-=L,V=V.next,p+=r}}const MA=function(t){const n=Math.round(this.blurRadius());n>0&&TA(t,n)};Mf.Blur=MA;Zb.Factory.addGetterSetter(kA.Node,"blurRadius",0,(0,CA.getNumberValidator)(),Zb.Factory.afterSetFilter);var Rf={};Object.defineProperty(Rf,"__esModule",{value:!0});Rf.Brighten=void 0;const ew=Re,RA=ot,AA=je,IA=function(e){let t=this.brightness()*255,n=e.data,r=n.length,i;for(i=0;i<r;i+=4)n[i]+=t,n[i+1]+=t,n[i+2]+=t};Rf.Brighten=IA;ew.Factory.addGetterSetter(RA.Node,"brightness",0,(0,AA.getNumberValidator)(),ew.Factory.afterSetFilter);var Af={};Object.defineProperty(Af,"__esModule",{value:!0});Af.Contrast=void 0;const tw=Re,FA=ot,zA=je,LA=function(e){const t=Math.pow((this.contrast()+100)/100,2);let n=e.data,r=n.length,i=150,s=150,l=150,d;for(d=0;d<r;d+=4)i=n[d],s=n[d+1],l=n[d+2],i/=255,i-=.5,i*=t,i+=.5,i*=255,s/=255,s-=.5,s*=t,s+=.5,s*=255,l/=255,l-=.5,l*=t,l+=.5,l*=255,i=i<0?0:i>255?255:i,s=s<0?0:s>255?255:s,l=l<0?0:l>255?255:l,n[d]=i,n[d+1]=s,n[d+2]=l};Af.Contrast=LA;tw.Factory.addGetterSetter(FA.Node,"contrast",0,(0,zA.getNumberValidator)(),tw.Factory.afterSetFilter);var If={};Object.defineProperty(If,"__esModule",{value:!0});If.Emboss=void 0;const fs=Re,Ff=ot,DA=pt,s8=je,OA=function(e){let t=this.embossStrength()*10,n=this.embossWhiteLevel()*255,r=this.embossDirection(),i=this.embossBlend(),s=0,l=0,d=e.data,u=e.width,h=e.height,p=u*4,m=h;switch(r){case"top-left":s=-1,l=-1;break;case"top":s=-1,l=0;break;case"top-right":s=-1,l=1;break;case"right":s=0,l=1;break;case"bottom-right":s=1,l=1;break;case"bottom":s=1,l=0;break;case"bottom-left":s=1,l=-1;break;case"left":s=0,l=-1;break;default:DA.Util.error("Unknown emboss direction: "+r)}do{const x=(m-1)*p;let y=s;m+y<1&&(y=0),m+y>h&&(y=0);const S=(m-1+y)*u*4;let N=u;do{const k=x+(N-1)*4;let w=l;N+w<1&&(w=0),N+w>u&&(w=0);const j=S+(N-1+w)*4,v=d[k]-d[j],_=d[k+1]-d[j+1],E=d[k+2]-d[j+2];let A=v;const D=A>0?A:-A,M=_>0?_:-_,I=E>0?E:-E;if(M>D&&(A=_),I>D&&(A=E),A*=t,i){const P=d[k]+A,L=d[k+1]+A,F=d[k+2]+A;d[k]=P>255?255:P<0?0:P,d[k+1]=L>255?255:L<0?0:L,d[k+2]=F>255?255:F<0?0:F}else{let P=n-A;P<0?P=0:P>255&&(P=255),d[k]=d[k+1]=d[k+2]=P}}while(--N)}while(--m)};If.Emboss=OA;fs.Factory.addGetterSetter(Ff.Node,"embossStrength",.5,(0,s8.getNumberValidator)(),fs.Factory.afterSetFilter);fs.Factory.addGetterSetter(Ff.Node,"embossWhiteLevel",.5,(0,s8.getNumberValidator)(),fs.Factory.afterSetFilter);fs.Factory.addGetterSetter(Ff.Node,"embossDirection","top-left",null,fs.Factory.afterSetFilter);fs.Factory.addGetterSetter(Ff.Node,"embossBlend",!1,null,fs.Factory.afterSetFilter);var zf={};Object.defineProperty(zf,"__esModule",{value:!0});zf.Enhance=void 0;const nw=Re,UA=ot,$A=je;function km(e,t,n,r,i){let s=n-t,l=i-r,d;return s===0?r+l/2:l===0?r:(d=(e-t)/s,d=l*d+r,d)}const GA=function(e){let t=e.data,n=t.length,r=t[0],i=r,s,l=t[1],d=l,u,h=t[2],p=h,m,x;const y=this.enhance();if(y===0)return;for(x=0;x<n;x+=4)s=t[x+0],s<r?r=s:s>i&&(i=s),u=t[x+1],u<l?l=u:u>d&&(d=u),m=t[x+2],m<h?h=m:m>p&&(p=m);i===r&&(i=255,r=0),d===l&&(d=255,l=0),p===h&&(p=255,h=0);let S,N,k,w,j,v,_,E,A;for(y>0?(N=i+y*(255-i),k=r-y*(r-0),j=d+y*(255-d),v=l-y*(l-0),E=p+y*(255-p),A=h-y*(h-0)):(S=(i+r)*.5,N=i+y*(i-S),k=r+y*(r-S),w=(d+l)*.5,j=d+y*(d-w),v=l+y*(l-w),_=(p+h)*.5,E=p+y*(p-_),A=h+y*(h-_)),x=0;x<n;x+=4)t[x+0]=km(t[x+0],r,i,k,N),t[x+1]=km(t[x+1],l,d,v,j),t[x+2]=km(t[x+2],h,p,A,E)};zf.Enhance=GA;nw.Factory.addGetterSetter(UA.Node,"enhance",0,(0,$A.getNumberValidator)(),nw.Factory.afterSetFilter);var Lf={};Object.defineProperty(Lf,"__esModule",{value:!0});Lf.Grayscale=void 0;const BA=function(e){let t=e.data,n=t.length,r,i;for(r=0;r<n;r+=4)i=.34*t[r]+.5*t[r+1]+.16*t[r+2],t[r]=i,t[r+1]=i,t[r+2]=i};Lf.Grayscale=BA;var Df={};Object.defineProperty(Df,"__esModule",{value:!0});Df.HSL=void 0;const Co=Re,k1=ot,C1=je;Co.Factory.addGetterSetter(k1.Node,"hue",0,(0,C1.getNumberValidator)(),Co.Factory.afterSetFilter);Co.Factory.addGetterSetter(k1.Node,"saturation",0,(0,C1.getNumberValidator)(),Co.Factory.afterSetFilter);Co.Factory.addGetterSetter(k1.Node,"luminance",0,(0,C1.getNumberValidator)(),Co.Factory.afterSetFilter);const VA=function(e){let t=e.data,n=t.length,r=1,i=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,l=this.luminance()*127,d;const u=r*i*Math.cos(s*Math.PI/180),h=r*i*Math.sin(s*Math.PI/180),p=.299*r+.701*u+.167*h,m=.587*r-.587*u+.33*h,x=.114*r-.114*u-.497*h,y=.299*r-.299*u-.328*h,S=.587*r+.413*u+.035*h,N=.114*r-.114*u+.293*h,k=.299*r-.3*u+1.25*h,w=.587*r-.586*u-1.05*h,j=.114*r+.886*u-.2*h;let v,_,E,A;for(d=0;d<n;d+=4)v=t[d+0],_=t[d+1],E=t[d+2],A=t[d+3],t[d+0]=p*v+m*_+x*E+l,t[d+1]=y*v+S*_+N*E+l,t[d+2]=k*v+w*_+j*E+l,t[d+3]=A};Df.HSL=VA;var Of={};Object.defineProperty(Of,"__esModule",{value:!0});Of.HSV=void 0;const Eo=Re,E1=ot,P1=je,HA=function(e){const t=e.data,n=t.length,r=Math.pow(2,this.value()),i=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,l=r*i*Math.cos(s*Math.PI/180),d=r*i*Math.sin(s*Math.PI/180),u=.299*r+.701*l+.167*d,h=.587*r-.587*l+.33*d,p=.114*r-.114*l-.497*d,m=.299*r-.299*l-.328*d,x=.587*r+.413*l+.035*d,y=.114*r-.114*l+.293*d,S=.299*r-.3*l+1.25*d,N=.587*r-.586*l-1.05*d,k=.114*r+.886*l-.2*d;let w,j,v,_;for(let E=0;E<n;E+=4)w=t[E+0],j=t[E+1],v=t[E+2],_=t[E+3],t[E+0]=u*w+h*j+p*v,t[E+1]=m*w+x*j+y*v,t[E+2]=S*w+N*j+k*v,t[E+3]=_};Of.HSV=HA;Eo.Factory.addGetterSetter(E1.Node,"hue",0,(0,P1.getNumberValidator)(),Eo.Factory.afterSetFilter);Eo.Factory.addGetterSetter(E1.Node,"saturation",0,(0,P1.getNumberValidator)(),Eo.Factory.afterSetFilter);Eo.Factory.addGetterSetter(E1.Node,"value",0,(0,P1.getNumberValidator)(),Eo.Factory.afterSetFilter);var Uf={};Object.defineProperty(Uf,"__esModule",{value:!0});Uf.Invert=void 0;const WA=function(e){let t=e.data,n=t.length,r;for(r=0;r<n;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2]};Uf.Invert=WA;var $f={};Object.defineProperty($f,"__esModule",{value:!0});$f.Kaleidoscope=void 0;const Th=Re,a8=ot,rw=pt,o8=je,YA=function(e,t,n){let r=e.data,i=t.data,s=e.width,l=e.height,d=n.polarCenterX||s/2,u=n.polarCenterY||l/2,h,p,m,x=0,y=0,S=0,N=0,k,w=Math.sqrt(d*d+u*u);p=s-d,m=l-u,k=Math.sqrt(p*p+m*m),w=k>w?k:w;let j=l,v=s,_,E,A=360/v*Math.PI/180,D,M;for(E=0;E<v;E+=1)for(D=Math.sin(E*A),M=Math.cos(E*A),_=0;_<j;_+=1)p=Math.floor(d+w*_/j*M),m=Math.floor(u+w*_/j*D),h=(m*s+p)*4,x=r[h+0],y=r[h+1],S=r[h+2],N=r[h+3],h=(E+_*s)*4,i[h+0]=x,i[h+1]=y,i[h+2]=S,i[h+3]=N},KA=function(e,t,n){let r=e.data,i=t.data,s=e.width,l=e.height,d=n.polarCenterX||s/2,u=n.polarCenterY||l/2,h,p,m,x,y,S=0,N=0,k=0,w=0,j,v=Math.sqrt(d*d+u*u);p=s-d,m=l-u,j=Math.sqrt(p*p+m*m),v=j>v?j:v;let _=l,E=s,A,D,M=n.polarRotation||0,I,P;for(p=0;p<s;p+=1)for(m=0;m<l;m+=1)x=p-d,y=m-u,A=Math.sqrt(x*x+y*y)*_/v,D=(Math.atan2(y,x)*180/Math.PI+360+M)%360,D=D*E/360,I=Math.floor(D),P=Math.floor(A),h=(P*s+I)*4,S=r[h+0],N=r[h+1],k=r[h+2],w=r[h+3],h=(m*s+p)*4,i[h+0]=S,i[h+1]=N,i[h+2]=k,i[h+3]=w},XA=function(e){const t=e.width,n=e.height;let r,i,s,l,d,u,h,p,m,x,y=Math.round(this.kaleidoscopePower());const S=Math.round(this.kaleidoscopeAngle()),N=Math.floor(t*(S%360)/360);if(y<1)return;const k=rw.Util.createCanvasElement();k.width=t,k.height=n;const w=k.getContext("2d").getImageData(0,0,t,n);rw.Util.releaseCanvas(k),YA(e,w,{polarCenterX:t/2,polarCenterY:n/2});let j=t/Math.pow(2,y);for(;j<=8;)j=j*2,y-=1;j=Math.ceil(j);let v=j,_=0,E=v,A=1;for(N+j>t&&(_=v,E=0,A=-1),i=0;i<n;i+=1)for(r=_;r!==E;r+=A)s=Math.round(r+N)%t,m=(t*i+s)*4,d=w.data[m+0],u=w.data[m+1],h=w.data[m+2],p=w.data[m+3],x=(t*i+r)*4,w.data[x+0]=d,w.data[x+1]=u,w.data[x+2]=h,w.data[x+3]=p;for(i=0;i<n;i+=1)for(v=Math.floor(j),l=0;l<y;l+=1){for(r=0;r<v+1;r+=1)m=(t*i+r)*4,d=w.data[m+0],u=w.data[m+1],h=w.data[m+2],p=w.data[m+3],x=(t*i+v*2-r-1)*4,w.data[x+0]=d,w.data[x+1]=u,w.data[x+2]=h,w.data[x+3]=p;v*=2}KA(w,e,{polarRotation:0})};$f.Kaleidoscope=XA;Th.Factory.addGetterSetter(a8.Node,"kaleidoscopePower",2,(0,o8.getNumberValidator)(),Th.Factory.afterSetFilter);Th.Factory.addGetterSetter(a8.Node,"kaleidoscopeAngle",0,(0,o8.getNumberValidator)(),Th.Factory.afterSetFilter);var Gf={};Object.defineProperty(Gf,"__esModule",{value:!0});Gf.Mask=void 0;const iw=Re,QA=ot,qA=je;function ju(e,t,n){let r=(n*e.width+t)*4;const i=[];return i.push(e.data[r++],e.data[r++],e.data[r++],e.data[r++]),i}function Il(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2))}function ZA(e){const t=[0,0,0];for(let n=0;n<e.length;n++)t[0]+=e[n][0],t[1]+=e[n][1],t[2]+=e[n][2];return t[0]/=e.length,t[1]/=e.length,t[2]/=e.length,t}function JA(e,t){const n=ju(e,0,0),r=ju(e,e.width-1,0),i=ju(e,0,e.height-1),s=ju(e,e.width-1,e.height-1),l=t||10;if(Il(n,r)<l&&Il(r,s)<l&&Il(s,i)<l&&Il(i,n)<l){const d=ZA([r,n,s,i]),u=[];for(let h=0;h<e.width*e.height;h++){const p=Il(d,[e.data[h*4],e.data[h*4+1],e.data[h*4+2]]);u[h]=p<l?0:255}return u}}function eI(e,t){for(let n=0;n<e.width*e.height;n++)e.data[4*n+3]=t[n]}function tI(e,t,n){const r=[1,1,1,1,0,1,1,1,1],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),l=[];for(let d=0;d<n;d++)for(let u=0;u<t;u++){const h=d*t+u;let p=0;for(let m=0;m<i;m++)for(let x=0;x<i;x++){const y=d+m-s,S=u+x-s;if(y>=0&&y<n&&S>=0&&S<t){const N=y*t+S,k=r[m*i+x];p+=e[N]*k}}l[h]=p===255*8?255:0}return l}function nI(e,t,n){const r=[1,1,1,1,1,1,1,1,1],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),l=[];for(let d=0;d<n;d++)for(let u=0;u<t;u++){const h=d*t+u;let p=0;for(let m=0;m<i;m++)for(let x=0;x<i;x++){const y=d+m-s,S=u+x-s;if(y>=0&&y<n&&S>=0&&S<t){const N=y*t+S,k=r[m*i+x];p+=e[N]*k}}l[h]=p>=255*4?255:0}return l}function rI(e,t,n){const r=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),l=[];for(let d=0;d<n;d++)for(let u=0;u<t;u++){const h=d*t+u;let p=0;for(let m=0;m<i;m++)for(let x=0;x<i;x++){const y=d+m-s,S=u+x-s;if(y>=0&&y<n&&S>=0&&S<t){const N=y*t+S,k=r[m*i+x];p+=e[N]*k}}l[h]=p}return l}const iI=function(e){let t=this.threshold(),n=JA(e,t);return n&&(n=tI(n,e.width,e.height),n=nI(n,e.width,e.height),n=rI(n,e.width,e.height),eI(e,n)),e};Gf.Mask=iI;iw.Factory.addGetterSetter(QA.Node,"threshold",0,(0,qA.getNumberValidator)(),iw.Factory.afterSetFilter);var Bf={};Object.defineProperty(Bf,"__esModule",{value:!0});Bf.Noise=void 0;const sw=Re,sI=ot,aI=je,oI=function(e){const t=this.noise()*255,n=e.data,r=n.length,i=t/2;for(let s=0;s<r;s+=4)n[s+0]+=i-2*i*Math.random(),n[s+1]+=i-2*i*Math.random(),n[s+2]+=i-2*i*Math.random()};Bf.Noise=oI;sw.Factory.addGetterSetter(sI.Node,"noise",.2,(0,aI.getNumberValidator)(),sw.Factory.afterSetFilter);var Vf={};Object.defineProperty(Vf,"__esModule",{value:!0});Vf.Pixelate=void 0;const aw=Re,lI=pt,cI=ot,dI=je,uI=function(e){let t=Math.ceil(this.pixelSize()),n=e.width,r=e.height,i,s,l,d,u,h,p,m=Math.ceil(n/t),x=Math.ceil(r/t),y,S,N,k,w,j,v,_=e.data;if(t<=0){lI.Util.error("pixelSize value can not be <= 0");return}for(w=0;w<m;w+=1)for(j=0;j<x;j+=1){for(d=0,u=0,h=0,p=0,y=w*t,S=y+t,N=j*t,k=N+t,v=0,i=y;i<S;i+=1)if(!(i>=n))for(s=N;s<k;s+=1)s>=r||(l=(n*s+i)*4,d+=_[l+0],u+=_[l+1],h+=_[l+2],p+=_[l+3],v+=1);for(d=d/v,u=u/v,h=h/v,p=p/v,i=y;i<S;i+=1)if(!(i>=n))for(s=N;s<k;s+=1)s>=r||(l=(n*s+i)*4,_[l+0]=d,_[l+1]=u,_[l+2]=h,_[l+3]=p)}};Vf.Pixelate=uI;aw.Factory.addGetterSetter(cI.Node,"pixelSize",8,(0,dI.getNumberValidator)(),aw.Factory.afterSetFilter);var Hf={};Object.defineProperty(Hf,"__esModule",{value:!0});Hf.Posterize=void 0;const ow=Re,hI=ot,fI=je,pI=function(e){let t=Math.round(this.levels()*254)+1,n=e.data,r=n.length,i=255/t,s;for(s=0;s<r;s+=1)n[s]=Math.floor(n[s]/i)*i};Hf.Posterize=pI;ow.Factory.addGetterSetter(hI.Node,"levels",.5,(0,fI.getNumberValidator)(),ow.Factory.afterSetFilter);var Wf={};Object.defineProperty(Wf,"__esModule",{value:!0});Wf.RGB=void 0;const Mh=Re,T1=ot,mI=je,gI=function(e){let t=e.data,n=t.length,r=this.red(),i=this.green(),s=this.blue(),l,d;for(l=0;l<n;l+=4)d=(.34*t[l]+.5*t[l+1]+.16*t[l+2])/255,t[l]=d*r,t[l+1]=d*i,t[l+2]=d*s,t[l+3]=t[l+3]};Wf.RGB=gI;Mh.Factory.addGetterSetter(T1.Node,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});Mh.Factory.addGetterSetter(T1.Node,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});Mh.Factory.addGetterSetter(T1.Node,"blue",0,mI.RGBComponent,Mh.Factory.afterSetFilter);var Yf={};Object.defineProperty(Yf,"__esModule",{value:!0});Yf.RGBA=void 0;const Ec=Re,Kf=ot,xI=je,yI=function(e){const t=e.data,n=t.length,r=this.red(),i=this.green(),s=this.blue(),l=this.alpha();for(let d=0;d<n;d+=4){const u=1-l;t[d]=r*l+t[d]*u,t[d+1]=i*l+t[d+1]*u,t[d+2]=s*l+t[d+2]*u}};Yf.RGBA=yI;Ec.Factory.addGetterSetter(Kf.Node,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});Ec.Factory.addGetterSetter(Kf.Node,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});Ec.Factory.addGetterSetter(Kf.Node,"blue",0,xI.RGBComponent,Ec.Factory.afterSetFilter);Ec.Factory.addGetterSetter(Kf.Node,"alpha",1,function(e){return this._filterUpToDate=!1,e>1?1:e<0?0:e});var Xf={};Object.defineProperty(Xf,"__esModule",{value:!0});Xf.Sepia=void 0;const vI=function(e){let t=e.data,n=t.length,r,i,s,l;for(r=0;r<n;r+=4)i=t[r+0],s=t[r+1],l=t[r+2],t[r+0]=Math.min(255,i*.393+s*.769+l*.189),t[r+1]=Math.min(255,i*.349+s*.686+l*.168),t[r+2]=Math.min(255,i*.272+s*.534+l*.131)};Xf.Sepia=vI;var Qf={};Object.defineProperty(Qf,"__esModule",{value:!0});Qf.Solarize=void 0;const bI=function(e){const t=e.data,n=e.width,r=e.height,i=n*4;let s=r;do{const l=(s-1)*i;let d=n;do{const u=l+(d-1)*4;let h=t[u],p=t[u+1],m=t[u+2];h>127&&(h=255-h),p>127&&(p=255-p),m>127&&(m=255-m),t[u]=h,t[u+1]=p,t[u+2]=m}while(--d)}while(--s)};Qf.Solarize=bI;var qf={};Object.defineProperty(qf,"__esModule",{value:!0});qf.Threshold=void 0;const lw=Re,wI=ot,NI=je,SI=function(e){const t=this.threshold()*255,n=e.data,r=n.length;for(let i=0;i<r;i+=1)n[i]=n[i]<t?0:255};qf.Threshold=SI;lw.Factory.addGetterSetter(wI.Node,"threshold",.5,(0,NI.getNumberValidator)(),lw.Factory.afterSetFilter);Object.defineProperty(af,"__esModule",{value:!0});af.Konva=void 0;const cw=Ch,_I=hf,jI=mf,kI=yf,CI=vf,EI=bf,dw=ko,PI=Bc,TI=Do,MI=Hc,RI=Sf,AI=_f,II=jf,FI=kf,zI=Uo,LI=Cf,DI=Ef,OI=Pf,UI=Mf,$I=Rf,GI=Af,BI=If,VI=zf,HI=Lf,WI=Df,YI=Of,KI=Uf,XI=$f,QI=Gf,qI=Bf,ZI=Vf,JI=Hf,eF=Wf,tF=Yf,nF=Xf,rF=Qf,iF=qf;af.Konva=cw.Konva.Util._assign(cw.Konva,{Arc:_I.Arc,Arrow:jI.Arrow,Circle:kI.Circle,Ellipse:CI.Ellipse,Image:EI.Image,Label:dw.Label,Tag:dw.Tag,Line:PI.Line,Path:TI.Path,Rect:MI.Rect,RegularPolygon:RI.RegularPolygon,Ring:AI.Ring,Sprite:II.Sprite,Star:FI.Star,Text:zI.Text,TextPath:LI.TextPath,Transformer:DI.Transformer,Wedge:OI.Wedge,Filters:{Blur:UI.Blur,Brighten:$I.Brighten,Contrast:GI.Contrast,Emboss:BI.Emboss,Enhance:VI.Enhance,Grayscale:HI.Grayscale,HSL:WI.HSL,HSV:YI.HSV,Invert:KI.Invert,Kaleidoscope:XI.Kaleidoscope,Mask:QI.Mask,Noise:qI.Noise,Pixelate:ZI.Pixelate,Posterize:JI.Posterize,RGB:eF.RGB,RGBA:tF.RGBA,Sepia:nF.Sepia,Solarize:rF.Solarize,Threshold:iF.Threshold}});var sF=k6.exports;Object.defineProperty(sF,"__esModule",{value:!0});const aF=af;k6.exports=aF.Konva;var Jg={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;var n=Ch;Object.defineProperty(t,"Konva",{enumerable:!0,get:function(){return n.Konva}});const r=Ch;e.exports=r.Konva})(Jg,Jg.exports);var oF=Jg.exports;const Pc=Rh(oF);var l8={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lF=function(t){var n={},r=T,i=Bl,s=Object.assign;function l(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,f=1;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,u=Symbol.for("react.element"),h=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),S=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.offscreen"),E=Symbol.iterator;function A(o){return o===null||typeof o!="object"?null:(o=E&&o[E]||o["@@iterator"],typeof o=="function"?o:null)}function D(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case p:return"Fragment";case h:return"Portal";case x:return"Profiler";case m:return"StrictMode";case k:return"Suspense";case w:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case S:return(o.displayName||"Context")+".Consumer";case y:return(o._context.displayName||"Context")+".Provider";case N:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case j:return c=o.displayName||null,c!==null?c:D(o.type)||"Memo";case v:c=o._payload,o=o._init;try{return D(o(c))}catch{}}return null}function M(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return D(c);case 8:return c===m?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function I(o){var c=o,f=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,c.flags&4098&&(f=c.return),o=c.return;while(o)}return c.tag===3?f:null}function P(o){if(I(o)!==o)throw Error(l(188))}function L(o){var c=o.alternate;if(!c){if(c=I(o),c===null)throw Error(l(188));return c!==o?null:o}for(var f=o,g=c;;){var b=f.return;if(b===null)break;var C=b.alternate;if(C===null){if(g=b.return,g!==null){f=g;continue}break}if(b.child===C.child){for(C=b.child;C;){if(C===f)return P(b),o;if(C===g)return P(b),c;C=C.sibling}throw Error(l(188))}if(f.return!==g.return)f=b,g=C;else{for(var O=!1,q=b.child;q;){if(q===f){O=!0,f=b,g=C;break}if(q===g){O=!0,g=b,f=C;break}q=q.sibling}if(!O){for(q=C.child;q;){if(q===f){O=!0,f=C,g=b;break}if(q===g){O=!0,g=C,f=b;break}q=q.sibling}if(!O)throw Error(l(189))}}if(f.alternate!==g)throw Error(l(190))}if(f.tag!==3)throw Error(l(188));return f.stateNode.current===f?o:c}function F(o){return o=L(o),o!==null?G(o):null}function G(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=G(o);if(c!==null)return c;o=o.sibling}return null}function R(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){if(o.tag!==4){var c=R(o);if(c!==null)return c}o=o.sibling}return null}var $=Array.isArray,B=t.getPublicInstance,Q=t.getRootHostContext,K=t.getChildHostContext,H=t.prepareForCommit,W=t.resetAfterCommit,z=t.createInstance,V=t.appendInitialChild,J=t.finalizeInitialChildren,ee=t.prepareUpdate,ae=t.shouldSetTextContent,fe=t.createTextInstance,Y=t.scheduleTimeout,ie=t.cancelTimeout,ce=t.noTimeout,U=t.isPrimaryRenderer,X=t.supportsMutation,oe=t.supportsPersistence,pe=t.supportsHydration,xe=t.getInstanceFromNode,he=t.preparePortalMount,Oe=t.getCurrentEventPriority,_e=t.detachDeletedInstance,be=t.supportsMicrotasks,nn=t.scheduleMicrotask,Sn=t.supportsTestSelectors,js=t.findFiberRoot,Si=t.getBoundingRect,_i=t.getTextContent,rn=t.isHiddenSubtree,ji=t.matchAccessibilityRole,$r=t.setFocusIfFocusable,Gr=t.setupIntersectionObserver,ki=t.appendChild,Ci=t.appendChildToContainer,ks=t.commitTextUpdate,Rt=t.commitMount,_n=t.commitUpdate,Br=t.insertBefore,Vr=t.insertInContainerBefore,Hr=t.removeChild,Jn=t.removeChildFromContainer,jn=t.resetTextContent,Cs=t.hideInstance,$o=t.hideTextInstance,Es=t.unhideInstance,Go=t.unhideTextInstance,Wc=t.clearContainer,Wr=t.cloneInstance,Yc=t.createContainerChildSet,Kc=t.appendChildToContainerChildSet,Jf=t.finalizeContainerChildren,Bo=t.replaceContainerChildren,Xc=t.cloneHiddenInstance,Qc=t.cloneHiddenTextInstance,ep=t.canHydrateInstance,tp=t.canHydrateTextInstance,np=t.canHydrateSuspenseInstance,qc=t.isSuspenseInstancePending,Vo=t.isSuspenseInstanceFallback,rp=t.getSuspenseInstanceFallbackErrorDetails,ip=t.registerSuspenseInstanceRetry,ba=t.getNextHydratableSibling,sp=t.getFirstHydratableChild,ap=t.getFirstHydratableChildWithinContainer,Zc=t.getFirstHydratableChildWithinSuspenseInstance,op=t.hydrateInstance,lp=t.hydrateTextInstance,cp=t.hydrateSuspenseInstance,dp=t.getNextHydratableInstanceAfterSuspenseInstance,up=t.commitHydratedContainer,hp=t.commitHydratedSuspenseInstance,fp=t.clearSuspenseBoundary,pp=t.clearSuspenseBoundaryFromContainer,Jc=t.shouldDeleteUnhydratedTailInstances,mp=t.didNotMatchHydratedContainerTextInstance,gp=t.didNotMatchHydratedTextInstance,Ho;function Ps(o){if(Ho===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);Ho=c&&c[1]||""}return`
`+Ho+o}var Wo=!1;function Yo(o,c){if(!o||Wo)return"";Wo=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(de){var g=de}Reflect.construct(o,[],c)}else{try{c.call()}catch(de){g=de}o.call(c.prototype)}else{try{throw Error()}catch(de){g=de}o()}}catch(de){if(de&&g&&typeof de.stack=="string"){for(var b=de.stack.split(`
`),C=g.stack.split(`
`),O=b.length-1,q=C.length-1;1<=O&&0<=q&&b[O]!==C[q];)q--;for(;1<=O&&0<=q;O--,q--)if(b[O]!==C[q]){if(O!==1||q!==1)do if(O--,q--,0>q||b[O]!==C[q]){var re=`
`+b[O].replace(" at new "," at ");return o.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",o.displayName)),re}while(1<=O&&0<=q);break}}}finally{Wo=!1,Error.prepareStackTrace=f}return(o=o?o.displayName||o.name:"")?Ps(o):""}var ed=Object.prototype.hasOwnProperty,Ko=[],Ei=-1;function br(o){return{current:o}}function He(o){0>Ei||(o.current=Ko[Ei],Ko[Ei]=null,Ei--)}function qe(o,c){Ei++,Ko[Ei]=o.current,o.current=c}var Pi={},Ht=br(Pi),un=br(!1),Ts=Pi;function wa(o,c){var f=o.type.contextTypes;if(!f)return Pi;var g=o.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===c)return g.__reactInternalMemoizedMaskedChildContext;var b={},C;for(C in f)b[C]=c[C];return g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=b),b}function hn(o){return o=o.childContextTypes,o!=null}function td(){He(un),He(Ht)}function A1(o,c,f){if(Ht.current!==Pi)throw Error(l(168));qe(Ht,c),qe(un,f)}function I1(o,c,f){var g=o.stateNode;if(c=c.childContextTypes,typeof g.getChildContext!="function")return f;g=g.getChildContext();for(var b in g)if(!(b in c))throw Error(l(108,M(o)||"Unknown",b));return s({},f,g)}function nd(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Pi,Ts=Ht.current,qe(Ht,o),qe(un,un.current),!0}function F1(o,c,f){var g=o.stateNode;if(!g)throw Error(l(169));f?(o=I1(o,c,Ts),g.__reactInternalMemoizedMergedChildContext=o,He(un),He(Ht),qe(Ht,o)):He(un),qe(un,f)}var er=Math.clz32?Math.clz32:y8,g8=Math.log,x8=Math.LN2;function y8(o){return o>>>=0,o===0?32:31-(g8(o)/x8|0)|0}var rd=64,sd=4194304;function Xo(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function ad(o,c){var f=o.pendingLanes;if(f===0)return 0;var g=0,b=o.suspendedLanes,C=o.pingedLanes,O=f&268435455;if(O!==0){var q=O&~b;q!==0?g=Xo(q):(C&=O,C!==0&&(g=Xo(C)))}else O=f&~b,O!==0?g=Xo(O):C!==0&&(g=Xo(C));if(g===0)return 0;if(c!==0&&c!==g&&!(c&b)&&(b=g&-g,C=c&-c,b>=C||b===16&&(C&4194240)!==0))return c;if(g&4&&(g|=f&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=g;0<c;)f=31-er(c),b=1<<f,g|=o[f],c&=~b;return g}function v8(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function b8(o,c){for(var f=o.suspendedLanes,g=o.pingedLanes,b=o.expirationTimes,C=o.pendingLanes;0<C;){var O=31-er(C),q=1<<O,re=b[O];re===-1?(!(q&f)||q&g)&&(b[O]=v8(q,c)):re<=c&&(o.expiredLanes|=q),C&=~q}}function xp(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function z1(){var o=rd;return rd<<=1,!(rd&4194240)&&(rd=64),o}function yp(o){for(var c=[],f=0;31>f;f++)c.push(o);return c}function Qo(o,c,f){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-er(c),o[c]=f}function w8(o,c){var f=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var g=o.eventTimes;for(o=o.expirationTimes;0<f;){var b=31-er(f),C=1<<b;c[b]=0,g[b]=-1,o[b]=-1,f&=~C}}function vp(o,c){var f=o.entangledLanes|=c;for(o=o.entanglements;f;){var g=31-er(f),b=1<<g;b&c|o[g]&c&&(o[g]|=c),f&=~b}}var $e=0;function L1(o){return o&=-o,1<o?4<o?o&268435455?16:536870912:4:1}var bp=i.unstable_scheduleCallback,D1=i.unstable_cancelCallback,N8=i.unstable_shouldYield,S8=i.unstable_requestPaint,At=i.unstable_now,wp=i.unstable_ImmediatePriority,_8=i.unstable_UserBlockingPriority,Np=i.unstable_NormalPriority,j8=i.unstable_IdlePriority,od=null,wr=null;function k8(o){if(wr&&typeof wr.onCommitFiberRoot=="function")try{wr.onCommitFiberRoot(od,o,void 0,(o.current.flags&128)===128)}catch{}}function C8(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var tr=typeof Object.is=="function"?Object.is:C8,Yr=null,ld=!1,Sp=!1;function O1(o){Yr===null?Yr=[o]:Yr.push(o)}function E8(o){ld=!0,O1(o)}function Nr(){if(!Sp&&Yr!==null){Sp=!0;var o=0,c=$e;try{var f=Yr;for($e=1;o<f.length;o++){var g=f[o];do g=g(!0);while(g!==null)}Yr=null,ld=!1}catch(b){throw Yr!==null&&(Yr=Yr.slice(o+1)),bp(wp,Nr),b}finally{$e=c,Sp=!1}}return null}var Na=[],Sa=0,cd=null,dd=0,Ln=[],Dn=0,Ms=null,Kr=1,Xr="";function Rs(o,c){Na[Sa++]=dd,Na[Sa++]=cd,cd=o,dd=c}function U1(o,c,f){Ln[Dn++]=Kr,Ln[Dn++]=Xr,Ln[Dn++]=Ms,Ms=o;var g=Kr;o=Xr;var b=32-er(g)-1;g&=~(1<<b),f+=1;var C=32-er(c)+b;if(30<C){var O=b-b%5;C=(g&(1<<O)-1).toString(32),g>>=O,b-=O,Kr=1<<32-er(c)+b|f<<b|g,Xr=C+o}else Kr=1<<C|f<<b|g,Xr=o}function _p(o){o.return!==null&&(Rs(o,1),U1(o,1,0))}function jp(o){for(;o===cd;)cd=Na[--Sa],Na[Sa]=null,dd=Na[--Sa],Na[Sa]=null;for(;o===Ms;)Ms=Ln[--Dn],Ln[Dn]=null,Xr=Ln[--Dn],Ln[Dn]=null,Kr=Ln[--Dn],Ln[Dn]=null}var kn=null,On=null,rt=!1,qo=!1,nr=null;function $1(o,c){var f=Vn(5,null,null,0);f.elementType="DELETED",f.stateNode=c,f.return=o,c=o.deletions,c===null?(o.deletions=[f],o.flags|=16):c.push(f)}function G1(o,c){switch(o.tag){case 5:return c=ep(c,o.type,o.pendingProps),c!==null?(o.stateNode=c,kn=o,On=sp(c),!0):!1;case 6:return c=tp(c,o.pendingProps),c!==null?(o.stateNode=c,kn=o,On=null,!0):!1;case 13:if(c=np(c),c!==null){var f=Ms!==null?{id:Kr,overflow:Xr}:null;return o.memoizedState={dehydrated:c,treeContext:f,retryLane:1073741824},f=Vn(18,null,null,0),f.stateNode=c,f.return=o,o.child=f,kn=o,On=null,!0}return!1;default:return!1}}function kp(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Cp(o){if(rt){var c=On;if(c){var f=c;if(!G1(o,c)){if(kp(o))throw Error(l(418));c=ba(f);var g=kn;c&&G1(o,c)?$1(g,f):(o.flags=o.flags&-4097|2,rt=!1,kn=o)}}else{if(kp(o))throw Error(l(418));o.flags=o.flags&-4097|2,rt=!1,kn=o}}}function B1(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;kn=o}function ud(o){if(!pe||o!==kn)return!1;if(!rt)return B1(o),rt=!0,!1;if(o.tag!==3&&(o.tag!==5||Jc(o.type)&&!ae(o.type,o.memoizedProps))){var c=On;if(c){if(kp(o))throw V1(),Error(l(418));for(;c;)$1(o,c),c=ba(c)}}if(B1(o),o.tag===13){if(!pe)throw Error(l(316));if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(l(317));On=dp(o)}else On=kn?ba(o.stateNode):null;return!0}function V1(){for(var o=On;o;)o=ba(o)}function _a(){pe&&(On=kn=null,qo=rt=!1)}function Ep(o){nr===null?nr=[o]:nr.push(o)}var P8=d.ReactCurrentBatchConfig;function hd(o,c){if(tr(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var f=Object.keys(o),g=Object.keys(c);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var b=f[g];if(!ed.call(c,b)||!tr(o[b],c[b]))return!1}return!0}function T8(o){switch(o.tag){case 5:return Ps(o.type);case 16:return Ps("Lazy");case 13:return Ps("Suspense");case 19:return Ps("SuspenseList");case 0:case 2:case 15:return o=Yo(o.type,!1),o;case 11:return o=Yo(o.type.render,!1),o;case 1:return o=Yo(o.type,!0),o;default:return""}}function Zo(o,c,f){if(o=f.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(l(309));var g=f.stateNode}if(!g)throw Error(l(147,o));var b=g,C=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===C?c.ref:(c=function(O){var q=b.refs;O===null?delete q[C]:q[C]=O},c._stringRef=C,c)}if(typeof o!="string")throw Error(l(284));if(!f._owner)throw Error(l(290,o))}return o}function fd(o,c){throw o=Object.prototype.toString.call(c),Error(l(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function H1(o){var c=o._init;return c(o._payload)}function W1(o){function c(ne,Z){if(o){var se=ne.deletions;se===null?(ne.deletions=[Z],ne.flags|=16):se.push(Z)}}function f(ne,Z){if(!o)return null;for(;Z!==null;)c(ne,Z),Z=Z.sibling;return null}function g(ne,Z){for(ne=new Map;Z!==null;)Z.key!==null?ne.set(Z.key,Z):ne.set(Z.index,Z),Z=Z.sibling;return ne}function b(ne,Z){return ne=zi(ne,Z),ne.index=0,ne.sibling=null,ne}function C(ne,Z,se){return ne.index=se,o?(se=ne.alternate,se!==null?(se=se.index,se<Z?(ne.flags|=2,Z):se):(ne.flags|=2,Z)):(ne.flags|=1048576,Z)}function O(ne){return o&&ne.alternate===null&&(ne.flags|=2),ne}function q(ne,Z,se,ge){return Z===null||Z.tag!==6?(Z=S0(se,ne.mode,ge),Z.return=ne,Z):(Z=b(Z,se),Z.return=ne,Z)}function re(ne,Z,se,ge){var Se=se.type;return Se===p?we(ne,Z,se.props.children,ge,se.key):Z!==null&&(Z.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===v&&H1(Se)===Z.type)?(ge=b(Z,se.props),ge.ref=Zo(ne,Z,se),ge.return=ne,ge):(ge=Vd(se.type,se.key,se.props,null,ne.mode,ge),ge.ref=Zo(ne,Z,se),ge.return=ne,ge)}function de(ne,Z,se,ge){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==se.containerInfo||Z.stateNode.implementation!==se.implementation?(Z=_0(se,ne.mode,ge),Z.return=ne,Z):(Z=b(Z,se.children||[]),Z.return=ne,Z)}function we(ne,Z,se,ge,Se){return Z===null||Z.tag!==7?(Z=Os(se,ne.mode,ge,Se),Z.return=ne,Z):(Z=b(Z,se),Z.return=ne,Z)}function Ce(ne,Z,se){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Z=S0(""+Z,ne.mode,se),Z.return=ne,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case u:return se=Vd(Z.type,Z.key,Z.props,null,ne.mode,se),se.ref=Zo(ne,null,Z),se.return=ne,se;case h:return Z=_0(Z,ne.mode,se),Z.return=ne,Z;case v:var ge=Z._init;return Ce(ne,ge(Z._payload),se)}if($(Z)||A(Z))return Z=Os(Z,ne.mode,se,null),Z.return=ne,Z;fd(ne,Z)}return null}function me(ne,Z,se,ge){var Se=Z!==null?Z.key:null;if(typeof se=="string"&&se!==""||typeof se=="number")return Se!==null?null:q(ne,Z,""+se,ge);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case u:return se.key===Se?re(ne,Z,se,ge):null;case h:return se.key===Se?de(ne,Z,se,ge):null;case v:return Se=se._init,me(ne,Z,Se(se._payload),ge)}if($(se)||A(se))return Se!==null?null:we(ne,Z,se,ge,null);fd(ne,se)}return null}function Je(ne,Z,se,ge,Se){if(typeof ge=="string"&&ge!==""||typeof ge=="number")return ne=ne.get(se)||null,q(Z,ne,""+ge,Se);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case u:return ne=ne.get(ge.key===null?se:ge.key)||null,re(Z,ne,ge,Se);case h:return ne=ne.get(ge.key===null?se:ge.key)||null,de(Z,ne,ge,Se);case v:var Te=ge._init;return Je(ne,Z,se,Te(ge._payload),Se)}if($(ge)||A(ge))return ne=ne.get(se)||null,we(Z,ne,ge,Se,null);fd(Z,ge)}return null}function Xe(ne,Z,se,ge){for(var Se=null,Te=null,Ee=Z,Ge=Z=0,zt=null;Ee!==null&&Ge<se.length;Ge++){Ee.index>Ge?(zt=Ee,Ee=null):zt=Ee.sibling;var Be=me(ne,Ee,se[Ge],ge);if(Be===null){Ee===null&&(Ee=zt);break}o&&Ee&&Be.alternate===null&&c(ne,Ee),Z=C(Be,Z,Ge),Te===null?Se=Be:Te.sibling=Be,Te=Be,Ee=zt}if(Ge===se.length)return f(ne,Ee),rt&&Rs(ne,Ge),Se;if(Ee===null){for(;Ge<se.length;Ge++)Ee=Ce(ne,se[Ge],ge),Ee!==null&&(Z=C(Ee,Z,Ge),Te===null?Se=Ee:Te.sibling=Ee,Te=Ee);return rt&&Rs(ne,Ge),Se}for(Ee=g(ne,Ee);Ge<se.length;Ge++)zt=Je(Ee,ne,Ge,se[Ge],ge),zt!==null&&(o&&zt.alternate!==null&&Ee.delete(zt.key===null?Ge:zt.key),Z=C(zt,Z,Ge),Te===null?Se=zt:Te.sibling=zt,Te=zt);return o&&Ee.forEach(function(Li){return c(ne,Li)}),rt&&Rs(ne,Ge),Se}function gn(ne,Z,se,ge){var Se=A(se);if(typeof Se!="function")throw Error(l(150));if(se=Se.call(se),se==null)throw Error(l(151));for(var Te=Se=null,Ee=Z,Ge=Z=0,zt=null,Be=se.next();Ee!==null&&!Be.done;Ge++,Be=se.next()){Ee.index>Ge?(zt=Ee,Ee=null):zt=Ee.sibling;var Li=me(ne,Ee,Be.value,ge);if(Li===null){Ee===null&&(Ee=zt);break}o&&Ee&&Li.alternate===null&&c(ne,Ee),Z=C(Li,Z,Ge),Te===null?Se=Li:Te.sibling=Li,Te=Li,Ee=zt}if(Be.done)return f(ne,Ee),rt&&Rs(ne,Ge),Se;if(Ee===null){for(;!Be.done;Ge++,Be=se.next())Be=Ce(ne,Be.value,ge),Be!==null&&(Z=C(Be,Z,Ge),Te===null?Se=Be:Te.sibling=Be,Te=Be);return rt&&Rs(ne,Ge),Se}for(Ee=g(ne,Ee);!Be.done;Ge++,Be=se.next())Be=Je(Ee,ne,Ge,Be.value,ge),Be!==null&&(o&&Be.alternate!==null&&Ee.delete(Be.key===null?Ge:Be.key),Z=C(Be,Z,Ge),Te===null?Se=Be:Te.sibling=Be,Te=Be);return o&&Ee.forEach(function(aN){return c(ne,aN)}),rt&&Rs(ne,Ge),Se}function Jr(ne,Z,se,ge){if(typeof se=="object"&&se!==null&&se.type===p&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case u:e:{for(var Se=se.key,Te=Z;Te!==null;){if(Te.key===Se){if(Se=se.type,Se===p){if(Te.tag===7){f(ne,Te.sibling),Z=b(Te,se.props.children),Z.return=ne,ne=Z;break e}}else if(Te.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===v&&H1(Se)===Te.type){f(ne,Te.sibling),Z=b(Te,se.props),Z.ref=Zo(ne,Te,se),Z.return=ne,ne=Z;break e}f(ne,Te);break}else c(ne,Te);Te=Te.sibling}se.type===p?(Z=Os(se.props.children,ne.mode,ge,se.key),Z.return=ne,ne=Z):(ge=Vd(se.type,se.key,se.props,null,ne.mode,ge),ge.ref=Zo(ne,Z,se),ge.return=ne,ne=ge)}return O(ne);case h:e:{for(Te=se.key;Z!==null;){if(Z.key===Te)if(Z.tag===4&&Z.stateNode.containerInfo===se.containerInfo&&Z.stateNode.implementation===se.implementation){f(ne,Z.sibling),Z=b(Z,se.children||[]),Z.return=ne,ne=Z;break e}else{f(ne,Z);break}else c(ne,Z);Z=Z.sibling}Z=_0(se,ne.mode,ge),Z.return=ne,ne=Z}return O(ne);case v:return Te=se._init,Jr(ne,Z,Te(se._payload),ge)}if($(se))return Xe(ne,Z,se,ge);if(A(se))return gn(ne,Z,se,ge);fd(ne,se)}return typeof se=="string"&&se!==""||typeof se=="number"?(se=""+se,Z!==null&&Z.tag===6?(f(ne,Z.sibling),Z=b(Z,se),Z.return=ne,ne=Z):(f(ne,Z),Z=S0(se,ne.mode,ge),Z.return=ne,ne=Z),O(ne)):f(ne,Z)}return Jr}var ja=W1(!0),Y1=W1(!1),pd=br(null),md=null,ka=null,Pp=null;function Tp(){Pp=ka=md=null}function K1(o,c,f){U?(qe(pd,c._currentValue),c._currentValue=f):(qe(pd,c._currentValue2),c._currentValue2=f)}function Mp(o){var c=pd.current;He(pd),U?o._currentValue=c:o._currentValue2=c}function Rp(o,c,f){for(;o!==null;){var g=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,g!==null&&(g.childLanes|=c)):g!==null&&(g.childLanes&c)!==c&&(g.childLanes|=c),o===f)break;o=o.return}}function Ca(o,c){md=o,Pp=ka=null,o=o.dependencies,o!==null&&o.firstContext!==null&&(o.lanes&c&&(fn=!0),o.firstContext=null)}function Un(o){var c=U?o._currentValue:o._currentValue2;if(Pp!==o)if(o={context:o,memoizedValue:c,next:null},ka===null){if(md===null)throw Error(l(308));ka=o,md.dependencies={lanes:0,firstContext:o}}else ka=ka.next=o;return c}var As=null;function Ap(o){As===null?As=[o]:As.push(o)}function X1(o,c,f,g){var b=c.interleaved;return b===null?(f.next=f,Ap(c)):(f.next=b.next,b.next=f),c.interleaved=f,Sr(o,g)}function Sr(o,c){o.lanes|=c;var f=o.alternate;for(f!==null&&(f.lanes|=c),f=o,o=o.return;o!==null;)o.childLanes|=c,f=o.alternate,f!==null&&(f.childLanes|=c),f=o,o=o.return;return f.tag===3?f.stateNode:null}var Ti=!1;function Ip(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Q1(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Qr(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function Mi(o,c,f){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,Ae&2){var b=g.pending;return b===null?c.next=c:(c.next=b.next,b.next=c),g.pending=c,Sr(o,f)}return b=g.interleaved,b===null?(c.next=c,Ap(g)):(c.next=b.next,b.next=c),g.interleaved=c,Sr(o,f)}function gd(o,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194240)!==0)){var g=c.lanes;g&=o.pendingLanes,f|=g,c.lanes=f,vp(o,f)}}function q1(o,c){var f=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var b=null,C=null;if(f=f.firstBaseUpdate,f!==null){do{var O={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};C===null?b=C=O:C=C.next=O,f=f.next}while(f!==null);C===null?b=C=c:C=C.next=c}else b=C=c;f={baseState:g.baseState,firstBaseUpdate:b,lastBaseUpdate:C,shared:g.shared,effects:g.effects},o.updateQueue=f;return}o=f.lastBaseUpdate,o===null?f.firstBaseUpdate=c:o.next=c,f.lastBaseUpdate=c}function xd(o,c,f,g){var b=o.updateQueue;Ti=!1;var C=b.firstBaseUpdate,O=b.lastBaseUpdate,q=b.shared.pending;if(q!==null){b.shared.pending=null;var re=q,de=re.next;re.next=null,O===null?C=de:O.next=de,O=re;var we=o.alternate;we!==null&&(we=we.updateQueue,q=we.lastBaseUpdate,q!==O&&(q===null?we.firstBaseUpdate=de:q.next=de,we.lastBaseUpdate=re))}if(C!==null){var Ce=b.baseState;O=0,we=de=re=null,q=C;do{var me=q.lane,Je=q.eventTime;if((g&me)===me){we!==null&&(we=we.next={eventTime:Je,lane:0,tag:q.tag,payload:q.payload,callback:q.callback,next:null});e:{var Xe=o,gn=q;switch(me=c,Je=f,gn.tag){case 1:if(Xe=gn.payload,typeof Xe=="function"){Ce=Xe.call(Je,Ce,me);break e}Ce=Xe;break e;case 3:Xe.flags=Xe.flags&-65537|128;case 0:if(Xe=gn.payload,me=typeof Xe=="function"?Xe.call(Je,Ce,me):Xe,me==null)break e;Ce=s({},Ce,me);break e;case 2:Ti=!0}}q.callback!==null&&q.lane!==0&&(o.flags|=64,me=b.effects,me===null?b.effects=[q]:me.push(q))}else Je={eventTime:Je,lane:me,tag:q.tag,payload:q.payload,callback:q.callback,next:null},we===null?(de=we=Je,re=Ce):we=we.next=Je,O|=me;if(q=q.next,q===null){if(q=b.shared.pending,q===null)break;me=q,q=me.next,me.next=null,b.lastBaseUpdate=me,b.shared.pending=null}}while(1);if(we===null&&(re=Ce),b.baseState=re,b.firstBaseUpdate=de,b.lastBaseUpdate=we,c=b.shared.interleaved,c!==null){b=c;do O|=b.lane,b=b.next;while(b!==c)}else C===null&&(b.shared.lanes=0);Fs|=O,o.lanes=O,o.memoizedState=Ce}}function Z1(o,c,f){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var g=o[c],b=g.callback;if(b!==null){if(g.callback=null,g=f,typeof b!="function")throw Error(l(191,b));b.call(g)}}}var Jo={},$n=br(Jo),el=br(Jo),Ea=br(Jo);function _r(o){if(o===Jo)throw Error(l(174));return o}function Fp(o,c){qe(Ea,c),qe(el,o),qe($n,Jo),o=Q(c),He($n),qe($n,o)}function Pa(){He($n),He(el),He(Ea)}function J1(o){var c=_r(Ea.current),f=_r($n.current);c=K(f,o.type,c),f!==c&&(qe(el,o),qe($n,c))}function zp(o){el.current===o&&(He($n),He(el))}var lt=br(0);function yd(o){for(var c=o;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||qc(f)||Vo(f)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if(c.flags&128)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Lp=[];function Dp(){for(var o=0;o<Lp.length;o++){var c=Lp[o];U?c._workInProgressVersionPrimary=null:c._workInProgressVersionSecondary=null}Lp.length=0}var vd=d.ReactCurrentDispatcher,Op=d.ReactCurrentBatchConfig,Is=0,ct=null,jt=null,It=null,bd=!1,tl=!1,nl=0,M8=0;function Wt(){throw Error(l(321))}function Up(o,c){if(c===null)return!1;for(var f=0;f<c.length&&f<o.length;f++)if(!tr(o[f],c[f]))return!1;return!0}function $p(o,c,f,g,b,C){if(Is=C,ct=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,vd.current=o===null||o.memoizedState===null?F8:z8,o=f(g,b),tl){C=0;do{if(tl=!1,nl=0,25<=C)throw Error(l(301));C+=1,It=jt=null,c.updateQueue=null,vd.current=L8,o=f(g,b)}while(tl)}if(vd.current=Sd,c=jt!==null&&jt.next!==null,Is=0,It=jt=ct=null,bd=!1,c)throw Error(l(300));return o}function Gp(){var o=nl!==0;return nl=0,o}function jr(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?ct.memoizedState=It=o:It=It.next=o,It}function Gn(){if(jt===null){var o=ct.alternate;o=o!==null?o.memoizedState:null}else o=jt.next;var c=It===null?ct.memoizedState:It.next;if(c!==null)It=c,jt=o;else{if(o===null)throw Error(l(310));jt=o,o={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},It===null?ct.memoizedState=It=o:It=It.next=o}return It}function rl(o,c){return typeof c=="function"?c(o):c}function Bp(o){var c=Gn(),f=c.queue;if(f===null)throw Error(l(311));f.lastRenderedReducer=o;var g=jt,b=g.baseQueue,C=f.pending;if(C!==null){if(b!==null){var O=b.next;b.next=C.next,C.next=O}g.baseQueue=b=C,f.pending=null}if(b!==null){C=b.next,g=g.baseState;var q=O=null,re=null,de=C;do{var we=de.lane;if((Is&we)===we)re!==null&&(re=re.next={lane:0,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null}),g=de.hasEagerState?de.eagerState:o(g,de.action);else{var Ce={lane:we,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null};re===null?(q=re=Ce,O=g):re=re.next=Ce,ct.lanes|=we,Fs|=we}de=de.next}while(de!==null&&de!==C);re===null?O=g:re.next=q,tr(g,c.memoizedState)||(fn=!0),c.memoizedState=g,c.baseState=O,c.baseQueue=re,f.lastRenderedState=g}if(o=f.interleaved,o!==null){b=o;do C=b.lane,ct.lanes|=C,Fs|=C,b=b.next;while(b!==o)}else b===null&&(f.lanes=0);return[c.memoizedState,f.dispatch]}function Vp(o){var c=Gn(),f=c.queue;if(f===null)throw Error(l(311));f.lastRenderedReducer=o;var g=f.dispatch,b=f.pending,C=c.memoizedState;if(b!==null){f.pending=null;var O=b=b.next;do C=o(C,O.action),O=O.next;while(O!==b);tr(C,c.memoizedState)||(fn=!0),c.memoizedState=C,c.baseQueue===null&&(c.baseState=C),f.lastRenderedState=C}return[C,g]}function ey(){}function ty(o,c){var f=ct,g=Gn(),b=c(),C=!tr(g.memoizedState,b);if(C&&(g.memoizedState=b,fn=!0),g=g.queue,Hp(iy.bind(null,f,g,o),[o]),g.getSnapshot!==c||C||It!==null&&It.memoizedState.tag&1){if(f.flags|=2048,il(9,ry.bind(null,f,g,b,c),void 0,null),Ft===null)throw Error(l(349));Is&30||ny(f,c,b)}return b}function ny(o,c,f){o.flags|=16384,o={getSnapshot:c,value:f},c=ct.updateQueue,c===null?(c={lastEffect:null,stores:null},ct.updateQueue=c,c.stores=[o]):(f=c.stores,f===null?c.stores=[o]:f.push(o))}function ry(o,c,f,g){c.value=f,c.getSnapshot=g,sy(c)&&ay(o)}function iy(o,c,f){return f(function(){sy(c)&&ay(o)})}function sy(o){var c=o.getSnapshot;o=o.value;try{var f=c();return!tr(o,f)}catch{return!0}}function ay(o){var c=Sr(o,1);c!==null&&Bn(c,o,1,-1)}function oy(o){var c=jr();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rl,lastRenderedState:o},c.queue=o,o=o.dispatch=I8.bind(null,ct,o),[c.memoizedState,o]}function il(o,c,f,g){return o={tag:o,create:c,destroy:f,deps:g,next:null},c=ct.updateQueue,c===null?(c={lastEffect:null,stores:null},ct.updateQueue=c,c.lastEffect=o.next=o):(f=c.lastEffect,f===null?c.lastEffect=o.next=o:(g=f.next,f.next=o,o.next=g,c.lastEffect=o)),o}function ly(){return Gn().memoizedState}function wd(o,c,f,g){var b=jr();ct.flags|=o,b.memoizedState=il(1|c,f,void 0,g===void 0?null:g)}function Nd(o,c,f,g){var b=Gn();g=g===void 0?null:g;var C=void 0;if(jt!==null){var O=jt.memoizedState;if(C=O.destroy,g!==null&&Up(g,O.deps)){b.memoizedState=il(c,f,C,g);return}}ct.flags|=o,b.memoizedState=il(1|c,f,C,g)}function cy(o,c){return wd(8390656,8,o,c)}function Hp(o,c){return Nd(2048,8,o,c)}function dy(o,c){return Nd(4,2,o,c)}function uy(o,c){return Nd(4,4,o,c)}function hy(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function fy(o,c,f){return f=f!=null?f.concat([o]):null,Nd(4,4,hy.bind(null,c,o),f)}function Wp(){}function py(o,c){var f=Gn();c=c===void 0?null:c;var g=f.memoizedState;return g!==null&&c!==null&&Up(c,g[1])?g[0]:(f.memoizedState=[o,c],o)}function my(o,c){var f=Gn();c=c===void 0?null:c;var g=f.memoizedState;return g!==null&&c!==null&&Up(c,g[1])?g[0]:(o=o(),f.memoizedState=[o,c],o)}function gy(o,c,f){return Is&21?(tr(f,c)||(f=z1(),ct.lanes|=f,Fs|=f,o.baseState=!0),c):(o.baseState&&(o.baseState=!1,fn=!0),o.memoizedState=f)}function R8(o,c){var f=$e;$e=f!==0&&4>f?f:4,o(!0);var g=Op.transition;Op.transition={};try{o(!1),c()}finally{$e=f,Op.transition=g}}function xy(){return Gn().memoizedState}function A8(o,c,f){var g=Ii(o);if(f={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null},yy(o))vy(c,f);else if(f=X1(o,c,f,g),f!==null){var b=Xt();Bn(f,o,g,b),by(f,c,g)}}function I8(o,c,f){var g=Ii(o),b={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null};if(yy(o))vy(c,b);else{var C=o.alternate;if(o.lanes===0&&(C===null||C.lanes===0)&&(C=c.lastRenderedReducer,C!==null))try{var O=c.lastRenderedState,q=C(O,f);if(b.hasEagerState=!0,b.eagerState=q,tr(q,O)){var re=c.interleaved;re===null?(b.next=b,Ap(c)):(b.next=re.next,re.next=b),c.interleaved=b;return}}catch{}finally{}f=X1(o,c,b,g),f!==null&&(b=Xt(),Bn(f,o,g,b),by(f,c,g))}}function yy(o){var c=o.alternate;return o===ct||c!==null&&c===ct}function vy(o,c){tl=bd=!0;var f=o.pending;f===null?c.next=c:(c.next=f.next,f.next=c),o.pending=c}function by(o,c,f){if(f&4194240){var g=c.lanes;g&=o.pendingLanes,f|=g,c.lanes=f,vp(o,f)}}var Sd={readContext:Un,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},F8={readContext:Un,useCallback:function(o,c){return jr().memoizedState=[o,c===void 0?null:c],o},useContext:Un,useEffect:cy,useImperativeHandle:function(o,c,f){return f=f!=null?f.concat([o]):null,wd(4194308,4,hy.bind(null,c,o),f)},useLayoutEffect:function(o,c){return wd(4194308,4,o,c)},useInsertionEffect:function(o,c){return wd(4,2,o,c)},useMemo:function(o,c){var f=jr();return c=c===void 0?null:c,o=o(),f.memoizedState=[o,c],o},useReducer:function(o,c,f){var g=jr();return c=f!==void 0?f(c):c,g.memoizedState=g.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},g.queue=o,o=o.dispatch=A8.bind(null,ct,o),[g.memoizedState,o]},useRef:function(o){var c=jr();return o={current:o},c.memoizedState=o},useState:oy,useDebugValue:Wp,useDeferredValue:function(o){return jr().memoizedState=o},useTransition:function(){var o=oy(!1),c=o[0];return o=R8.bind(null,o[1]),jr().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,f){var g=ct,b=jr();if(rt){if(f===void 0)throw Error(l(407));f=f()}else{if(f=c(),Ft===null)throw Error(l(349));Is&30||ny(g,c,f)}b.memoizedState=f;var C={value:f,getSnapshot:c};return b.queue=C,cy(iy.bind(null,g,C,o),[o]),g.flags|=2048,il(9,ry.bind(null,g,C,f,c),void 0,null),f},useId:function(){var o=jr(),c=Ft.identifierPrefix;if(rt){var f=Xr,g=Kr;f=(g&~(1<<32-er(g)-1)).toString(32)+f,c=":"+c+"R"+f,f=nl++,0<f&&(c+="H"+f.toString(32)),c+=":"}else f=M8++,c=":"+c+"r"+f.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},z8={readContext:Un,useCallback:py,useContext:Un,useEffect:Hp,useImperativeHandle:fy,useInsertionEffect:dy,useLayoutEffect:uy,useMemo:my,useReducer:Bp,useRef:ly,useState:function(){return Bp(rl)},useDebugValue:Wp,useDeferredValue:function(o){var c=Gn();return gy(c,jt.memoizedState,o)},useTransition:function(){var o=Bp(rl)[0],c=Gn().memoizedState;return[o,c]},useMutableSource:ey,useSyncExternalStore:ty,useId:xy,unstable_isNewReconciler:!1},L8={readContext:Un,useCallback:py,useContext:Un,useEffect:Hp,useImperativeHandle:fy,useInsertionEffect:dy,useLayoutEffect:uy,useMemo:my,useReducer:Vp,useRef:ly,useState:function(){return Vp(rl)},useDebugValue:Wp,useDeferredValue:function(o){var c=Gn();return jt===null?c.memoizedState=o:gy(c,jt.memoizedState,o)},useTransition:function(){var o=Vp(rl)[0],c=Gn().memoizedState;return[o,c]},useMutableSource:ey,useSyncExternalStore:ty,useId:xy,unstable_isNewReconciler:!1};function rr(o,c){if(o&&o.defaultProps){c=s({},c),o=o.defaultProps;for(var f in o)c[f]===void 0&&(c[f]=o[f]);return c}return c}function Yp(o,c,f,g){c=o.memoizedState,f=f(g,c),f=f==null?c:s({},c,f),o.memoizedState=f,o.lanes===0&&(o.updateQueue.baseState=f)}var _d={isMounted:function(o){return(o=o._reactInternals)?I(o)===o:!1},enqueueSetState:function(o,c,f){o=o._reactInternals;var g=Xt(),b=Ii(o),C=Qr(g,b);C.payload=c,f!=null&&(C.callback=f),c=Mi(o,C,b),c!==null&&(Bn(c,o,b,g),gd(c,o,b))},enqueueReplaceState:function(o,c,f){o=o._reactInternals;var g=Xt(),b=Ii(o),C=Qr(g,b);C.tag=1,C.payload=c,f!=null&&(C.callback=f),c=Mi(o,C,b),c!==null&&(Bn(c,o,b,g),gd(c,o,b))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var f=Xt(),g=Ii(o),b=Qr(f,g);b.tag=2,c!=null&&(b.callback=c),c=Mi(o,b,g),c!==null&&(Bn(c,o,g,f),gd(c,o,g))}};function wy(o,c,f,g,b,C,O){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,C,O):c.prototype&&c.prototype.isPureReactComponent?!hd(f,g)||!hd(b,C):!0}function Ny(o,c,f){var g=!1,b=Pi,C=c.contextType;return typeof C=="object"&&C!==null?C=Un(C):(b=hn(c)?Ts:Ht.current,g=c.contextTypes,C=(g=g!=null)?wa(o,b):Pi),c=new c(f,C),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=_d,o.stateNode=c,c._reactInternals=o,g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=b,o.__reactInternalMemoizedMaskedChildContext=C),c}function Sy(o,c,f,g){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,g),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,g),c.state!==o&&_d.enqueueReplaceState(c,c.state,null)}function Kp(o,c,f,g){var b=o.stateNode;b.props=f,b.state=o.memoizedState,b.refs={},Ip(o);var C=c.contextType;typeof C=="object"&&C!==null?b.context=Un(C):(C=hn(c)?Ts:Ht.current,b.context=wa(o,C)),b.state=o.memoizedState,C=c.getDerivedStateFromProps,typeof C=="function"&&(Yp(o,c,C,f),b.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(c=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),c!==b.state&&_d.enqueueReplaceState(b,b.state,null),xd(o,f,b,g),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308)}function Ta(o,c){try{var f="",g=c;do f+=T8(g),g=g.return;while(g);var b=f}catch(C){b=`
Error generating stack: `+C.message+`
`+C.stack}return{value:o,source:c,stack:b,digest:null}}function Xp(o,c,f){return{value:o,source:null,stack:f??null,digest:c??null}}function Qp(o,c){try{console.error(c.value)}catch(f){setTimeout(function(){throw f})}}var D8=typeof WeakMap=="function"?WeakMap:Map;function _y(o,c,f){f=Qr(-1,f),f.tag=3,f.payload={element:null};var g=c.value;return f.callback=function(){Dd||(Dd=!0,g0=g),Qp(o,c)},f}function jy(o,c,f){f=Qr(-1,f),f.tag=3;var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var b=c.value;f.payload=function(){return g(b)},f.callback=function(){Qp(o,c)}}var C=o.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(f.callback=function(){Qp(o,c),typeof g!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var O=c.stack;this.componentDidCatch(c.value,{componentStack:O!==null?O:""})}),f}function ky(o,c,f){var g=o.pingCache;if(g===null){g=o.pingCache=new D8;var b=new Set;g.set(c,b)}else b=g.get(c),b===void 0&&(b=new Set,g.set(c,b));b.has(f)||(b.add(f),o=Z8.bind(null,o,c,f),c.then(o,o))}function Cy(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function Ey(o,c,f,g,b){return o.mode&1?(o.flags|=65536,o.lanes=b,o):(o===c?o.flags|=65536:(o.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(c=Qr(-1,1),c.tag=2,Mi(f,c,1))),f.lanes|=1),o)}var O8=d.ReactCurrentOwner,fn=!1;function sn(o,c,f,g){c.child=o===null?Y1(c,null,f,g):ja(c,o.child,f,g)}function Py(o,c,f,g,b){f=f.render;var C=c.ref;return Ca(c,b),g=$p(o,c,f,g,C,b),f=Gp(),o!==null&&!fn?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~b,qr(o,c,b)):(rt&&f&&_p(c),c.flags|=1,sn(o,c,g,b),c.child)}function Ty(o,c,f,g,b){if(o===null){var C=f.type;return typeof C=="function"&&!N0(C)&&C.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(c.tag=15,c.type=C,My(o,c,C,g,b)):(o=Vd(f.type,null,g,c,c.mode,b),o.ref=c.ref,o.return=c,c.child=o)}if(C=o.child,!(o.lanes&b)){var O=C.memoizedProps;if(f=f.compare,f=f!==null?f:hd,f(O,g)&&o.ref===c.ref)return qr(o,c,b)}return c.flags|=1,o=zi(C,g),o.ref=c.ref,o.return=c,c.child=o}function My(o,c,f,g,b){if(o!==null){var C=o.memoizedProps;if(hd(C,g)&&o.ref===c.ref)if(fn=!1,c.pendingProps=g=C,(o.lanes&b)!==0)o.flags&131072&&(fn=!0);else return c.lanes=o.lanes,qr(o,c,b)}return qp(o,c,f,g,b)}function Ry(o,c,f){var g=c.pendingProps,b=g.children,C=o!==null?o.memoizedState:null;if(g.mode==="hidden")if(!(c.mode&1))c.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(Ra,Cn),Cn|=f;else{if(!(f&1073741824))return o=C!==null?C.baseLanes|f:f,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,qe(Ra,Cn),Cn|=o,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=C!==null?C.baseLanes:f,qe(Ra,Cn),Cn|=g}else C!==null?(g=C.baseLanes|f,c.memoizedState=null):g=f,qe(Ra,Cn),Cn|=g;return sn(o,c,b,f),c.child}function Ay(o,c){var f=c.ref;(o===null&&f!==null||o!==null&&o.ref!==f)&&(c.flags|=512,c.flags|=2097152)}function qp(o,c,f,g,b){var C=hn(f)?Ts:Ht.current;return C=wa(c,C),Ca(c,b),f=$p(o,c,f,g,C,b),g=Gp(),o!==null&&!fn?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~b,qr(o,c,b)):(rt&&g&&_p(c),c.flags|=1,sn(o,c,f,b),c.child)}function Iy(o,c,f,g,b){if(hn(f)){var C=!0;nd(c)}else C=!1;if(Ca(c,b),c.stateNode===null)kd(o,c),Ny(c,f,g),Kp(c,f,g,b),g=!0;else if(o===null){var O=c.stateNode,q=c.memoizedProps;O.props=q;var re=O.context,de=f.contextType;typeof de=="object"&&de!==null?de=Un(de):(de=hn(f)?Ts:Ht.current,de=wa(c,de));var we=f.getDerivedStateFromProps,Ce=typeof we=="function"||typeof O.getSnapshotBeforeUpdate=="function";Ce||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(q!==g||re!==de)&&Sy(c,O,g,de),Ti=!1;var me=c.memoizedState;O.state=me,xd(c,g,O,b),re=c.memoizedState,q!==g||me!==re||un.current||Ti?(typeof we=="function"&&(Yp(c,f,we,g),re=c.memoizedState),(q=Ti||wy(c,f,q,g,me,re,de))?(Ce||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(c.flags|=4194308)):(typeof O.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=g,c.memoizedState=re),O.props=g,O.state=re,O.context=de,g=q):(typeof O.componentDidMount=="function"&&(c.flags|=4194308),g=!1)}else{O=c.stateNode,Q1(o,c),q=c.memoizedProps,de=c.type===c.elementType?q:rr(c.type,q),O.props=de,Ce=c.pendingProps,me=O.context,re=f.contextType,typeof re=="object"&&re!==null?re=Un(re):(re=hn(f)?Ts:Ht.current,re=wa(c,re));var Je=f.getDerivedStateFromProps;(we=typeof Je=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(q!==Ce||me!==re)&&Sy(c,O,g,re),Ti=!1,me=c.memoizedState,O.state=me,xd(c,g,O,b);var Xe=c.memoizedState;q!==Ce||me!==Xe||un.current||Ti?(typeof Je=="function"&&(Yp(c,f,Je,g),Xe=c.memoizedState),(de=Ti||wy(c,f,de,g,me,Xe,re)||!1)?(we||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(g,Xe,re),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(g,Xe,re)),typeof O.componentDidUpdate=="function"&&(c.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof O.componentDidUpdate!="function"||q===o.memoizedProps&&me===o.memoizedState||(c.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||q===o.memoizedProps&&me===o.memoizedState||(c.flags|=1024),c.memoizedProps=g,c.memoizedState=Xe),O.props=g,O.state=Xe,O.context=re,g=de):(typeof O.componentDidUpdate!="function"||q===o.memoizedProps&&me===o.memoizedState||(c.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||q===o.memoizedProps&&me===o.memoizedState||(c.flags|=1024),g=!1)}return Zp(o,c,f,g,C,b)}function Zp(o,c,f,g,b,C){Ay(o,c);var O=(c.flags&128)!==0;if(!g&&!O)return b&&F1(c,f,!1),qr(o,c,C);g=c.stateNode,O8.current=c;var q=O&&typeof f.getDerivedStateFromError!="function"?null:g.render();return c.flags|=1,o!==null&&O?(c.child=ja(c,o.child,null,C),c.child=ja(c,null,q,C)):sn(o,c,q,C),c.memoizedState=g.state,b&&F1(c,f,!0),c.child}function Fy(o){var c=o.stateNode;c.pendingContext?A1(o,c.pendingContext,c.pendingContext!==c.context):c.context&&A1(o,c.context,!1),Fp(o,c.containerInfo)}function zy(o,c,f,g,b){return _a(),Ep(b),c.flags|=256,sn(o,c,f,g),c.child}var Jp={dehydrated:null,treeContext:null,retryLane:0};function e0(o){return{baseLanes:o,cachePool:null,transitions:null}}function Ly(o,c,f){var g=c.pendingProps,b=lt.current,C=!1,O=(c.flags&128)!==0,q;if((q=O)||(q=o!==null&&o.memoizedState===null?!1:(b&2)!==0),q?(C=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(b|=1),qe(lt,b&1),o===null)return Cp(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?(c.mode&1?Vo(o)?c.lanes=8:c.lanes=1073741824:c.lanes=1,null):(O=g.children,o=g.fallback,C?(g=c.mode,C=c.child,O={mode:"hidden",children:O},!(g&1)&&C!==null?(C.childLanes=0,C.pendingProps=O):C=Hd(O,g,0,null),o=Os(o,g,f,null),C.return=c,o.return=c,C.sibling=o,c.child=C,c.child.memoizedState=e0(f),c.memoizedState=Jp,o):t0(c,O));if(b=o.memoizedState,b!==null&&(q=b.dehydrated,q!==null))return U8(o,c,O,g,q,b,f);if(C){C=g.fallback,O=c.mode,b=o.child,q=b.sibling;var re={mode:"hidden",children:g.children};return!(O&1)&&c.child!==b?(g=c.child,g.childLanes=0,g.pendingProps=re,c.deletions=null):(g=zi(b,re),g.subtreeFlags=b.subtreeFlags&14680064),q!==null?C=zi(q,C):(C=Os(C,O,f,null),C.flags|=2),C.return=c,g.return=c,g.sibling=C,c.child=g,g=C,C=c.child,O=o.child.memoizedState,O=O===null?e0(f):{baseLanes:O.baseLanes|f,cachePool:null,transitions:O.transitions},C.memoizedState=O,C.childLanes=o.childLanes&~f,c.memoizedState=Jp,g}return C=o.child,o=C.sibling,g=zi(C,{mode:"visible",children:g.children}),!(c.mode&1)&&(g.lanes=f),g.return=c,g.sibling=null,o!==null&&(f=c.deletions,f===null?(c.deletions=[o],c.flags|=16):f.push(o)),c.child=g,c.memoizedState=null,g}function t0(o,c){return c=Hd({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function jd(o,c,f,g){return g!==null&&Ep(g),ja(c,o.child,null,f),o=t0(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function U8(o,c,f,g,b,C,O){if(f)return c.flags&256?(c.flags&=-257,g=Xp(Error(l(422))),jd(o,c,O,g)):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(C=g.fallback,b=c.mode,g=Hd({mode:"visible",children:g.children},b,0,null),C=Os(C,b,O,null),C.flags|=2,g.return=c,C.return=c,g.sibling=C,c.child=g,c.mode&1&&ja(c,o.child,null,O),c.child.memoizedState=e0(O),c.memoizedState=Jp,C);if(!(c.mode&1))return jd(o,c,O,null);if(Vo(b))return g=rp(b).digest,C=Error(l(419)),g=Xp(C,g,void 0),jd(o,c,O,g);if(f=(O&o.childLanes)!==0,fn||f){if(g=Ft,g!==null){switch(O&-O){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=b&(g.suspendedLanes|O)?0:b,b!==0&&b!==C.retryLane&&(C.retryLane=b,Sr(o,b),Bn(g,o,b,-1))}return w0(),g=Xp(Error(l(421))),jd(o,c,O,g)}return qc(b)?(c.flags|=128,c.child=o.child,c=J8.bind(null,o),ip(b,c),null):(o=C.treeContext,pe&&(On=Zc(b),kn=c,rt=!0,nr=null,qo=!1,o!==null&&(Ln[Dn++]=Kr,Ln[Dn++]=Xr,Ln[Dn++]=Ms,Kr=o.id,Xr=o.overflow,Ms=c)),c=t0(c,g.children),c.flags|=4096,c)}function Dy(o,c,f){o.lanes|=c;var g=o.alternate;g!==null&&(g.lanes|=c),Rp(o.return,c,f)}function n0(o,c,f,g,b){var C=o.memoizedState;C===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:b}:(C.isBackwards=c,C.rendering=null,C.renderingStartTime=0,C.last=g,C.tail=f,C.tailMode=b)}function Oy(o,c,f){var g=c.pendingProps,b=g.revealOrder,C=g.tail;if(sn(o,c,g.children,f),g=lt.current,g&2)g=g&1|2,c.flags|=128;else{if(o!==null&&o.flags&128)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Dy(o,f,c);else if(o.tag===19)Dy(o,f,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}g&=1}if(qe(lt,g),!(c.mode&1))c.memoizedState=null;else switch(b){case"forwards":for(f=c.child,b=null;f!==null;)o=f.alternate,o!==null&&yd(o)===null&&(b=f),f=f.sibling;f=b,f===null?(b=c.child,c.child=null):(b=f.sibling,f.sibling=null),n0(c,!1,b,f,C);break;case"backwards":for(f=null,b=c.child,c.child=null;b!==null;){if(o=b.alternate,o!==null&&yd(o)===null){c.child=b;break}o=b.sibling,b.sibling=f,f=b,b=o}n0(c,!0,f,null,C);break;case"together":n0(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function kd(o,c){!(c.mode&1)&&o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2)}function qr(o,c,f){if(o!==null&&(c.dependencies=o.dependencies),Fs|=c.lanes,!(f&c.childLanes))return null;if(o!==null&&c.child!==o.child)throw Error(l(153));if(c.child!==null){for(o=c.child,f=zi(o,o.pendingProps),c.child=f,f.return=c;o.sibling!==null;)o=o.sibling,f=f.sibling=zi(o,o.pendingProps),f.return=c;f.sibling=null}return c.child}function $8(o,c,f){switch(c.tag){case 3:Fy(c),_a();break;case 5:J1(c);break;case 1:hn(c.type)&&nd(c);break;case 4:Fp(c,c.stateNode.containerInfo);break;case 10:K1(c,c.type._context,c.memoizedProps.value);break;case 13:var g=c.memoizedState;if(g!==null)return g.dehydrated!==null?(qe(lt,lt.current&1),c.flags|=128,null):f&c.child.childLanes?Ly(o,c,f):(qe(lt,lt.current&1),o=qr(o,c,f),o!==null?o.sibling:null);qe(lt,lt.current&1);break;case 19:if(g=(f&c.childLanes)!==0,o.flags&128){if(g)return Oy(o,c,f);c.flags|=128}var b=c.memoizedState;if(b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),qe(lt,lt.current),g)break;return null;case 22:case 23:return c.lanes=0,Ry(o,c,f)}return qr(o,c,f)}function kr(o){o.flags|=4}function Uy(o,c){if(o!==null&&o.child===c.child)return!0;if(c.flags&16)return!1;for(o=c.child;o!==null;){if(o.flags&12854||o.subtreeFlags&12854)return!1;o=o.sibling}return!0}var sl,al,Cd,Ed;if(X)sl=function(o,c){for(var f=c.child;f!==null;){if(f.tag===5||f.tag===6)V(o,f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},al=function(){},Cd=function(o,c,f,g,b){if(o=o.memoizedProps,o!==g){var C=c.stateNode,O=_r($n.current);f=ee(C,f,o,g,b,O),(c.updateQueue=f)&&kr(c)}},Ed=function(o,c,f,g){f!==g&&kr(c)};else if(oe){sl=function(o,c,f,g){for(var b=c.child;b!==null;){if(b.tag===5){var C=b.stateNode;f&&g&&(C=Xc(C,b.type,b.memoizedProps,b)),V(o,C)}else if(b.tag===6)C=b.stateNode,f&&g&&(C=Qc(C,b.memoizedProps,b)),V(o,C);else if(b.tag!==4){if(b.tag===22&&b.memoizedState!==null)C=b.child,C!==null&&(C.return=b),sl(o,b,!0,!0);else if(b.child!==null){b.child.return=b,b=b.child;continue}}if(b===c)break;for(;b.sibling===null;){if(b.return===null||b.return===c)return;b=b.return}b.sibling.return=b.return,b=b.sibling}};var $y=function(o,c,f,g){for(var b=c.child;b!==null;){if(b.tag===5){var C=b.stateNode;f&&g&&(C=Xc(C,b.type,b.memoizedProps,b)),Kc(o,C)}else if(b.tag===6)C=b.stateNode,f&&g&&(C=Qc(C,b.memoizedProps,b)),Kc(o,C);else if(b.tag!==4){if(b.tag===22&&b.memoizedState!==null)C=b.child,C!==null&&(C.return=b),$y(o,b,!0,!0);else if(b.child!==null){b.child.return=b,b=b.child;continue}}if(b===c)break;for(;b.sibling===null;){if(b.return===null||b.return===c)return;b=b.return}b.sibling.return=b.return,b=b.sibling}};al=function(o,c){var f=c.stateNode;if(!Uy(o,c)){o=f.containerInfo;var g=Yc(o);$y(g,c,!1,!1),f.pendingChildren=g,kr(c),Jf(o,g)}},Cd=function(o,c,f,g,b){var C=o.stateNode,O=o.memoizedProps;if((o=Uy(o,c))&&O===g)c.stateNode=C;else{var q=c.stateNode,re=_r($n.current),de=null;O!==g&&(de=ee(q,f,O,g,b,re)),o&&de===null?c.stateNode=C:(C=Wr(C,de,f,O,g,c,o,q),J(C,f,g,b,re)&&kr(c),c.stateNode=C,o?kr(c):sl(C,c,!1,!1))}},Ed=function(o,c,f,g){f!==g?(o=_r(Ea.current),f=_r($n.current),c.stateNode=fe(g,o,f,c),kr(c)):c.stateNode=o.stateNode}}else al=function(){},Cd=function(){},Ed=function(){};function ol(o,c){if(!rt)switch(o.tailMode){case"hidden":c=o.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?o.tail=null:f.sibling=null;break;case"collapsed":f=o.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function Yt(o){var c=o.alternate!==null&&o.alternate.child===o.child,f=0,g=0;if(c)for(var b=o.child;b!==null;)f|=b.lanes|b.childLanes,g|=b.subtreeFlags&14680064,g|=b.flags&14680064,b.return=o,b=b.sibling;else for(b=o.child;b!==null;)f|=b.lanes|b.childLanes,g|=b.subtreeFlags,g|=b.flags,b.return=o,b=b.sibling;return o.subtreeFlags|=g,o.childLanes=f,c}function G8(o,c,f){var g=c.pendingProps;switch(jp(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(c),null;case 1:return hn(c.type)&&td(),Yt(c),null;case 3:return f=c.stateNode,Pa(),He(un),He(Ht),Dp(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(o===null||o.child===null)&&(ud(c)?kr(c):o===null||o.memoizedState.isDehydrated&&!(c.flags&256)||(c.flags|=1024,nr!==null&&(v0(nr),nr=null))),al(o,c),Yt(c),null;case 5:zp(c),f=_r(Ea.current);var b=c.type;if(o!==null&&c.stateNode!=null)Cd(o,c,b,g,f),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!g){if(c.stateNode===null)throw Error(l(166));return Yt(c),null}if(o=_r($n.current),ud(c)){if(!pe)throw Error(l(175));o=op(c.stateNode,c.type,c.memoizedProps,f,o,c,!qo),c.updateQueue=o,o!==null&&kr(c)}else{var C=z(b,g,f,o,c);sl(C,c,!1,!1),c.stateNode=C,J(C,b,g,f,o)&&kr(c)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Yt(c),null;case 6:if(o&&c.stateNode!=null)Ed(o,c,o.memoizedProps,g);else{if(typeof g!="string"&&c.stateNode===null)throw Error(l(166));if(o=_r(Ea.current),f=_r($n.current),ud(c)){if(!pe)throw Error(l(176));if(o=c.stateNode,f=c.memoizedProps,(g=lp(o,f,c,!qo))&&(b=kn,b!==null))switch(b.tag){case 3:mp(b.stateNode.containerInfo,o,f,(b.mode&1)!==0);break;case 5:gp(b.type,b.memoizedProps,b.stateNode,o,f,(b.mode&1)!==0)}g&&kr(c)}else c.stateNode=fe(g,o,f,c)}return Yt(c),null;case 13:if(He(lt),g=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(rt&&On!==null&&c.mode&1&&!(c.flags&128))V1(),_a(),c.flags|=98560,b=!1;else if(b=ud(c),g!==null&&g.dehydrated!==null){if(o===null){if(!b)throw Error(l(318));if(!pe)throw Error(l(344));if(b=c.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(l(317));cp(b,c)}else _a(),!(c.flags&128)&&(c.memoizedState=null),c.flags|=4;Yt(c),b=!1}else nr!==null&&(v0(nr),nr=null),b=!0;if(!b)return c.flags&65536?c:null}return c.flags&128?(c.lanes=f,c):(f=g!==null,f!==(o!==null&&o.memoizedState!==null)&&f&&(c.child.flags|=8192,c.mode&1&&(o===null||lt.current&1?kt===0&&(kt=3):w0())),c.updateQueue!==null&&(c.flags|=4),Yt(c),null);case 4:return Pa(),al(o,c),o===null&&he(c.stateNode.containerInfo),Yt(c),null;case 10:return Mp(c.type._context),Yt(c),null;case 17:return hn(c.type)&&td(),Yt(c),null;case 19:if(He(lt),b=c.memoizedState,b===null)return Yt(c),null;if(g=(c.flags&128)!==0,C=b.rendering,C===null)if(g)ol(b,!1);else{if(kt!==0||o!==null&&o.flags&128)for(o=c.child;o!==null;){if(C=yd(o),C!==null){for(c.flags|=128,ol(b,!1),o=C.updateQueue,o!==null&&(c.updateQueue=o,c.flags|=4),c.subtreeFlags=0,o=f,f=c.child;f!==null;)g=f,b=o,g.flags&=14680066,C=g.alternate,C===null?(g.childLanes=0,g.lanes=b,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=C.childLanes,g.lanes=C.lanes,g.child=C.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=C.memoizedProps,g.memoizedState=C.memoizedState,g.updateQueue=C.updateQueue,g.type=C.type,b=C.dependencies,g.dependencies=b===null?null:{lanes:b.lanes,firstContext:b.firstContext}),f=f.sibling;return qe(lt,lt.current&1|2),c.child}o=o.sibling}b.tail!==null&&At()>m0&&(c.flags|=128,g=!0,ol(b,!1),c.lanes=4194304)}else{if(!g)if(o=yd(C),o!==null){if(c.flags|=128,g=!0,o=o.updateQueue,o!==null&&(c.updateQueue=o,c.flags|=4),ol(b,!0),b.tail===null&&b.tailMode==="hidden"&&!C.alternate&&!rt)return Yt(c),null}else 2*At()-b.renderingStartTime>m0&&f!==1073741824&&(c.flags|=128,g=!0,ol(b,!1),c.lanes=4194304);b.isBackwards?(C.sibling=c.child,c.child=C):(o=b.last,o!==null?o.sibling=C:c.child=C,b.last=C)}return b.tail!==null?(c=b.tail,b.rendering=c,b.tail=c.sibling,b.renderingStartTime=At(),c.sibling=null,o=lt.current,qe(lt,g?o&1|2:o&1),c):(Yt(c),null);case 22:case 23:return b0(),f=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==f&&(c.flags|=8192),f&&c.mode&1?Cn&1073741824&&(Yt(c),X&&c.subtreeFlags&6&&(c.flags|=8192)):Yt(c),null;case 24:return null;case 25:return null}throw Error(l(156,c.tag))}function B8(o,c){switch(jp(c),c.tag){case 1:return hn(c.type)&&td(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return Pa(),He(un),He(Ht),Dp(),o=c.flags,o&65536&&!(o&128)?(c.flags=o&-65537|128,c):null;case 5:return zp(c),null;case 13:if(He(lt),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(l(340));_a()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return He(lt),null;case 4:return Pa(),null;case 10:return Mp(c.type._context),null;case 22:case 23:return b0(),null;case 24:return null;default:return null}}var Pd=!1,Kt=!1,V8=typeof WeakSet=="function"?WeakSet:Set,ye=null;function Ma(o,c){var f=o.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(g){it(o,c,g)}else f.current=null}function r0(o,c,f){try{f()}catch(g){it(o,c,g)}}var Gy=!1;function H8(o,c){for(H(o.containerInfo),ye=c;ye!==null;)if(o=ye,c=o.child,(o.subtreeFlags&1028)!==0&&c!==null)c.return=o,ye=c;else for(;ye!==null;){o=ye;try{var f=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var g=f.memoizedProps,b=f.memoizedState,C=o.stateNode,O=C.getSnapshotBeforeUpdate(o.elementType===o.type?g:rr(o.type,g),b);C.__reactInternalSnapshotBeforeUpdate=O}break;case 3:X&&Wc(o.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(l(163))}}catch(q){it(o,o.return,q)}if(c=o.sibling,c!==null){c.return=o.return,ye=c;break}ye=o.return}return f=Gy,Gy=!1,f}function ll(o,c,f){var g=c.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var b=g=g.next;do{if((b.tag&o)===o){var C=b.destroy;b.destroy=void 0,C!==void 0&&r0(c,f,C)}b=b.next}while(b!==g)}}function Td(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&o)===o){var g=f.create;f.destroy=g()}f=f.next}while(f!==c)}}function i0(o){var c=o.ref;if(c!==null){var f=o.stateNode;switch(o.tag){case 5:o=B(f);break;default:o=f}typeof c=="function"?c(o):c.current=o}}function By(o){var c=o.alternate;c!==null&&(o.alternate=null,By(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&_e(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Vy(o){return o.tag===5||o.tag===3||o.tag===4}function Hy(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Vy(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function s0(o,c,f){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?Vr(f,o,c):Ci(f,o);else if(g!==4&&(o=o.child,o!==null))for(s0(o,c,f),o=o.sibling;o!==null;)s0(o,c,f),o=o.sibling}function a0(o,c,f){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?Br(f,o,c):ki(f,o);else if(g!==4&&(o=o.child,o!==null))for(a0(o,c,f),o=o.sibling;o!==null;)a0(o,c,f),o=o.sibling}var Ut=null,ir=!1;function Cr(o,c,f){for(f=f.child;f!==null;)o0(o,c,f),f=f.sibling}function o0(o,c,f){if(wr&&typeof wr.onCommitFiberUnmount=="function")try{wr.onCommitFiberUnmount(od,f)}catch{}switch(f.tag){case 5:Kt||Ma(f,c);case 6:if(X){var g=Ut,b=ir;Ut=null,Cr(o,c,f),Ut=g,ir=b,Ut!==null&&(ir?Jn(Ut,f.stateNode):Hr(Ut,f.stateNode))}else Cr(o,c,f);break;case 18:X&&Ut!==null&&(ir?pp(Ut,f.stateNode):fp(Ut,f.stateNode));break;case 4:X?(g=Ut,b=ir,Ut=f.stateNode.containerInfo,ir=!0,Cr(o,c,f),Ut=g,ir=b):(oe&&(g=f.stateNode.containerInfo,b=Yc(g),Bo(g,b)),Cr(o,c,f));break;case 0:case 11:case 14:case 15:if(!Kt&&(g=f.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){b=g=g.next;do{var C=b,O=C.destroy;C=C.tag,O!==void 0&&(C&2||C&4)&&r0(f,c,O),b=b.next}while(b!==g)}Cr(o,c,f);break;case 1:if(!Kt&&(Ma(f,c),g=f.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=f.memoizedProps,g.state=f.memoizedState,g.componentWillUnmount()}catch(q){it(f,c,q)}Cr(o,c,f);break;case 21:Cr(o,c,f);break;case 22:f.mode&1?(Kt=(g=Kt)||f.memoizedState!==null,Cr(o,c,f),Kt=g):Cr(o,c,f);break;default:Cr(o,c,f)}}function Wy(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var f=o.stateNode;f===null&&(f=o.stateNode=new V8),c.forEach(function(g){var b=eN.bind(null,o,g);f.has(g)||(f.add(g),g.then(b,b))})}}function sr(o,c){var f=c.deletions;if(f!==null)for(var g=0;g<f.length;g++){var b=f[g];try{var C=o,O=c;if(X){var q=O;e:for(;q!==null;){switch(q.tag){case 5:Ut=q.stateNode,ir=!1;break e;case 3:Ut=q.stateNode.containerInfo,ir=!0;break e;case 4:Ut=q.stateNode.containerInfo,ir=!0;break e}q=q.return}if(Ut===null)throw Error(l(160));o0(C,O,b),Ut=null,ir=!1}else o0(C,O,b);var re=b.alternate;re!==null&&(re.return=null),b.return=null}catch(de){it(b,c,de)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)Yy(c,o),c=c.sibling}function Yy(o,c){var f=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(sr(c,o),Er(o),g&4){try{ll(3,o,o.return),Td(3,o)}catch(me){it(o,o.return,me)}try{ll(5,o,o.return)}catch(me){it(o,o.return,me)}}break;case 1:sr(c,o),Er(o),g&512&&f!==null&&Ma(f,f.return);break;case 5:if(sr(c,o),Er(o),g&512&&f!==null&&Ma(f,f.return),X){if(o.flags&32){var b=o.stateNode;try{jn(b)}catch(me){it(o,o.return,me)}}if(g&4&&(b=o.stateNode,b!=null)){var C=o.memoizedProps;if(f=f!==null?f.memoizedProps:C,g=o.type,c=o.updateQueue,o.updateQueue=null,c!==null)try{_n(b,c,g,f,C,o)}catch(me){it(o,o.return,me)}}}break;case 6:if(sr(c,o),Er(o),g&4&&X){if(o.stateNode===null)throw Error(l(162));b=o.stateNode,C=o.memoizedProps,f=f!==null?f.memoizedProps:C;try{ks(b,f,C)}catch(me){it(o,o.return,me)}}break;case 3:if(sr(c,o),Er(o),g&4){if(X&&pe&&f!==null&&f.memoizedState.isDehydrated)try{up(c.containerInfo)}catch(me){it(o,o.return,me)}if(oe){b=c.containerInfo,C=c.pendingChildren;try{Bo(b,C)}catch(me){it(o,o.return,me)}}}break;case 4:if(sr(c,o),Er(o),g&4&&oe){C=o.stateNode,b=C.containerInfo,C=C.pendingChildren;try{Bo(b,C)}catch(me){it(o,o.return,me)}}break;case 13:sr(c,o),Er(o),b=o.child,b.flags&8192&&(C=b.memoizedState!==null,b.stateNode.isHidden=C,!C||b.alternate!==null&&b.alternate.memoizedState!==null||(p0=At())),g&4&&Wy(o);break;case 22:var O=f!==null&&f.memoizedState!==null;if(o.mode&1?(Kt=(f=Kt)||O,sr(c,o),Kt=f):sr(c,o),Er(o),g&8192){if(f=o.memoizedState!==null,(o.stateNode.isHidden=f)&&!O&&o.mode&1)for(ye=o,g=o.child;g!==null;){for(c=ye=g;ye!==null;){O=ye;var q=O.child;switch(O.tag){case 0:case 11:case 14:case 15:ll(4,O,O.return);break;case 1:Ma(O,O.return);var re=O.stateNode;if(typeof re.componentWillUnmount=="function"){var de=O,we=O.return;try{var Ce=de;re.props=Ce.memoizedProps,re.state=Ce.memoizedState,re.componentWillUnmount()}catch(me){it(de,we,me)}}break;case 5:Ma(O,O.return);break;case 22:if(O.memoizedState!==null){Qy(c);continue}}q!==null?(q.return=O,ye=q):Qy(c)}g=g.sibling}if(X){e:if(g=null,X)for(c=o;;){if(c.tag===5){if(g===null){g=c;try{b=c.stateNode,f?Cs(b):Es(c.stateNode,c.memoizedProps)}catch(me){it(o,o.return,me)}}}else if(c.tag===6){if(g===null)try{C=c.stateNode,f?$o(C):Go(C,c.memoizedProps)}catch(me){it(o,o.return,me)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break e;for(;c.sibling===null;){if(c.return===null||c.return===o)break e;g===c&&(g=null),c=c.return}g===c&&(g=null),c.sibling.return=c.return,c=c.sibling}}}break;case 19:sr(c,o),Er(o),g&4&&Wy(o);break;case 21:break;default:sr(c,o),Er(o)}}function Er(o){var c=o.flags;if(c&2){try{if(X){e:{for(var f=o.return;f!==null;){if(Vy(f)){var g=f;break e}f=f.return}throw Error(l(160))}switch(g.tag){case 5:var b=g.stateNode;g.flags&32&&(jn(b),g.flags&=-33);var C=Hy(o);a0(o,C,b);break;case 3:case 4:var O=g.stateNode.containerInfo,q=Hy(o);s0(o,q,O);break;default:throw Error(l(161))}}}catch(re){it(o,o.return,re)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function W8(o,c,f){ye=o,Ky(o)}function Ky(o,c,f){for(var g=(o.mode&1)!==0;ye!==null;){var b=ye,C=b.child;if(b.tag===22&&g){var O=b.memoizedState!==null||Pd;if(!O){var q=b.alternate,re=q!==null&&q.memoizedState!==null||Kt;q=Pd;var de=Kt;if(Pd=O,(Kt=re)&&!de)for(ye=b;ye!==null;)O=ye,re=O.child,O.tag===22&&O.memoizedState!==null?qy(b):re!==null?(re.return=O,ye=re):qy(b);for(;C!==null;)ye=C,Ky(C),C=C.sibling;ye=b,Pd=q,Kt=de}Xy(o)}else b.subtreeFlags&8772&&C!==null?(C.return=b,ye=C):Xy(o)}}function Xy(o){for(;ye!==null;){var c=ye;if(c.flags&8772){var f=c.alternate;try{if(c.flags&8772)switch(c.tag){case 0:case 11:case 15:Kt||Td(5,c);break;case 1:var g=c.stateNode;if(c.flags&4&&!Kt)if(f===null)g.componentDidMount();else{var b=c.elementType===c.type?f.memoizedProps:rr(c.type,f.memoizedProps);g.componentDidUpdate(b,f.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var C=c.updateQueue;C!==null&&Z1(c,C,g);break;case 3:var O=c.updateQueue;if(O!==null){if(f=null,c.child!==null)switch(c.child.tag){case 5:f=B(c.child.stateNode);break;case 1:f=c.child.stateNode}Z1(c,O,f)}break;case 5:var q=c.stateNode;f===null&&c.flags&4&&Rt(q,c.type,c.memoizedProps,c);break;case 6:break;case 4:break;case 12:break;case 13:if(pe&&c.memoizedState===null){var re=c.alternate;if(re!==null){var de=re.memoizedState;if(de!==null){var we=de.dehydrated;we!==null&&hp(we)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(l(163))}Kt||c.flags&512&&i0(c)}catch(Ce){it(c,c.return,Ce)}}if(c===o){ye=null;break}if(f=c.sibling,f!==null){f.return=c.return,ye=f;break}ye=c.return}}function Qy(o){for(;ye!==null;){var c=ye;if(c===o){ye=null;break}var f=c.sibling;if(f!==null){f.return=c.return,ye=f;break}ye=c.return}}function qy(o){for(;ye!==null;){var c=ye;try{switch(c.tag){case 0:case 11:case 15:var f=c.return;try{Td(4,c)}catch(re){it(c,f,re)}break;case 1:var g=c.stateNode;if(typeof g.componentDidMount=="function"){var b=c.return;try{g.componentDidMount()}catch(re){it(c,b,re)}}var C=c.return;try{i0(c)}catch(re){it(c,C,re)}break;case 5:var O=c.return;try{i0(c)}catch(re){it(c,O,re)}}}catch(re){it(c,c.return,re)}if(c===o){ye=null;break}var q=c.sibling;if(q!==null){q.return=c.return,ye=q;break}ye=c.return}}var Md=0,Rd=1,Ad=2,Id=3,Fd=4;if(typeof Symbol=="function"&&Symbol.for){var cl=Symbol.for;Md=cl("selector.component"),Rd=cl("selector.has_pseudo_class"),Ad=cl("selector.role"),Id=cl("selector.test_id"),Fd=cl("selector.text")}function l0(o){var c=xe(o);if(c!=null){if(typeof c.memoizedProps["data-testname"]!="string")throw Error(l(364));return c}if(o=js(o),o===null)throw Error(l(362));return o.stateNode.current}function c0(o,c){switch(c.$$typeof){case Md:if(o.type===c.value)return!0;break;case Rd:e:{c=c.value,o=[o,0];for(var f=0;f<o.length;){var g=o[f++],b=o[f++],C=c[b];if(g.tag!==5||!rn(g)){for(;C!=null&&c0(g,C);)b++,C=c[b];if(b===c.length){c=!0;break e}else for(g=g.child;g!==null;)o.push(g,b),g=g.sibling}}c=!1}return c;case Ad:if(o.tag===5&&ji(o.stateNode,c.value))return!0;break;case Fd:if((o.tag===5||o.tag===6)&&(o=_i(o),o!==null&&0<=o.indexOf(c.value)))return!0;break;case Id:if(o.tag===5&&(o=o.memoizedProps["data-testname"],typeof o=="string"&&o.toLowerCase()===c.value.toLowerCase()))return!0;break;default:throw Error(l(365))}return!1}function d0(o){switch(o.$$typeof){case Md:return"<"+(D(o.value)||"Unknown")+">";case Rd:return":has("+(d0(o)||"")+")";case Ad:return'[role="'+o.value+'"]';case Fd:return'"'+o.value+'"';case Id:return'[data-testname="'+o.value+'"]';default:throw Error(l(365))}}function Zy(o,c){var f=[];o=[o,0];for(var g=0;g<o.length;){var b=o[g++],C=o[g++],O=c[C];if(b.tag!==5||!rn(b)){for(;O!=null&&c0(b,O);)C++,O=c[C];if(C===c.length)f.push(b);else for(b=b.child;b!==null;)o.push(b,C),b=b.sibling}}return f}function u0(o,c){if(!Sn)throw Error(l(363));o=l0(o),o=Zy(o,c),c=[],o=Array.from(o);for(var f=0;f<o.length;){var g=o[f++];if(g.tag===5)rn(g)||c.push(g.stateNode);else for(g=g.child;g!==null;)o.push(g),g=g.sibling}return c}var Y8=Math.ceil,zd=d.ReactCurrentDispatcher,h0=d.ReactCurrentOwner,bt=d.ReactCurrentBatchConfig,Ae=0,Ft=null,St=null,$t=0,Cn=0,Ra=br(0),kt=0,dl=null,Fs=0,Ld=0,f0=0,ul=null,pn=null,p0=0,m0=1/0,Zr=null;function Aa(){m0=At()+500}var Dd=!1,g0=null,Ri=null,Od=!1,Ai=null,Ud=0,hl=0,x0=null,$d=-1,Gd=0;function Xt(){return Ae&6?At():$d!==-1?$d:$d=At()}function Ii(o){return o.mode&1?Ae&2&&$t!==0?$t&-$t:P8.transition!==null?(Gd===0&&(Gd=z1()),Gd):(o=$e,o!==0?o:Oe()):1}function Bn(o,c,f,g){if(50<hl)throw hl=0,x0=null,Error(l(185));Qo(o,f,g),(!(Ae&2)||o!==Ft)&&(o===Ft&&(!(Ae&2)&&(Ld|=f),kt===4&&Fi(o,$t)),mn(o,g),f===1&&Ae===0&&!(c.mode&1)&&(Aa(),ld&&Nr()))}function mn(o,c){var f=o.callbackNode;b8(o,c);var g=ad(o,o===Ft?$t:0);if(g===0)f!==null&&D1(f),o.callbackNode=null,o.callbackPriority=0;else if(c=g&-g,o.callbackPriority!==c){if(f!=null&&D1(f),c===1)o.tag===0?E8(ev.bind(null,o)):O1(ev.bind(null,o)),be?nn(function(){!(Ae&6)&&Nr()}):bp(wp,Nr),f=null;else{switch(L1(g)){case 1:f=wp;break;case 4:f=_8;break;case 16:f=Np;break;case 536870912:f=j8;break;default:f=Np}f=cv(f,Jy.bind(null,o))}o.callbackPriority=c,o.callbackNode=f}}function Jy(o,c){if($d=-1,Gd=0,Ae&6)throw Error(l(327));var f=o.callbackNode;if(Ds()&&o.callbackNode!==f)return null;var g=ad(o,o===Ft?$t:0);if(g===0)return null;if(g&30||g&o.expiredLanes||c)c=Bd(o,g);else{c=g;var b=Ae;Ae|=2;var C=rv();(Ft!==o||$t!==c)&&(Zr=null,Aa(),zs(o,c));do try{Q8();break}catch(q){nv(o,q)}while(1);Tp(),zd.current=C,Ae=b,St!==null?c=0:(Ft=null,$t=0,c=kt)}if(c!==0){if(c===2&&(b=xp(o),b!==0&&(g=b,c=y0(o,b))),c===1)throw f=dl,zs(o,0),Fi(o,g),mn(o,At()),f;if(c===6)Fi(o,g);else{if(b=o.current.alternate,!(g&30)&&!K8(b)&&(c=Bd(o,g),c===2&&(C=xp(o),C!==0&&(g=C,c=y0(o,C))),c===1))throw f=dl,zs(o,0),Fi(o,g),mn(o,At()),f;switch(o.finishedWork=b,o.finishedLanes=g,c){case 0:case 1:throw Error(l(345));case 2:Ls(o,pn,Zr);break;case 3:if(Fi(o,g),(g&130023424)===g&&(c=p0+500-At(),10<c)){if(ad(o,0)!==0)break;if(b=o.suspendedLanes,(b&g)!==g){Xt(),o.pingedLanes|=o.suspendedLanes&b;break}o.timeoutHandle=Y(Ls.bind(null,o,pn,Zr),c);break}Ls(o,pn,Zr);break;case 4:if(Fi(o,g),(g&4194240)===g)break;for(c=o.eventTimes,b=-1;0<g;){var O=31-er(g);C=1<<O,O=c[O],O>b&&(b=O),g&=~C}if(g=b,g=At()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*Y8(g/1960))-g,10<g){o.timeoutHandle=Y(Ls.bind(null,o,pn,Zr),g);break}Ls(o,pn,Zr);break;case 5:Ls(o,pn,Zr);break;default:throw Error(l(329))}}}return mn(o,At()),o.callbackNode===f?Jy.bind(null,o):null}function y0(o,c){var f=ul;return o.current.memoizedState.isDehydrated&&(zs(o,c).flags|=256),o=Bd(o,c),o!==2&&(c=pn,pn=f,c!==null&&v0(c)),o}function v0(o){pn===null?pn=o:pn.push.apply(pn,o)}function K8(o){for(var c=o;;){if(c.flags&16384){var f=c.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var g=0;g<f.length;g++){var b=f[g],C=b.getSnapshot;b=b.value;try{if(!tr(C(),b))return!1}catch{return!1}}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Fi(o,c){for(c&=~f0,c&=~Ld,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var f=31-er(c),g=1<<f;o[f]=-1,c&=~g}}function ev(o){if(Ae&6)throw Error(l(327));Ds();var c=ad(o,0);if(!(c&1))return mn(o,At()),null;var f=Bd(o,c);if(o.tag!==0&&f===2){var g=xp(o);g!==0&&(c=g,f=y0(o,g))}if(f===1)throw f=dl,zs(o,0),Fi(o,c),mn(o,At()),f;if(f===6)throw Error(l(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,Ls(o,pn,Zr),mn(o,At()),null}function tv(o){Ai!==null&&Ai.tag===0&&!(Ae&6)&&Ds();var c=Ae;Ae|=1;var f=bt.transition,g=$e;try{if(bt.transition=null,$e=1,o)return o()}finally{$e=g,bt.transition=f,Ae=c,!(Ae&6)&&Nr()}}function b0(){Cn=Ra.current,He(Ra)}function zs(o,c){o.finishedWork=null,o.finishedLanes=0;var f=o.timeoutHandle;if(f!==ce&&(o.timeoutHandle=ce,ie(f)),St!==null)for(f=St.return;f!==null;){var g=f;switch(jp(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&td();break;case 3:Pa(),He(un),He(Ht),Dp();break;case 5:zp(g);break;case 4:Pa();break;case 13:He(lt);break;case 19:He(lt);break;case 10:Mp(g.type._context);break;case 22:case 23:b0()}f=f.return}if(Ft=o,St=o=zi(o.current,null),$t=Cn=c,kt=0,dl=null,f0=Ld=Fs=0,pn=ul=null,As!==null){for(c=0;c<As.length;c++)if(f=As[c],g=f.interleaved,g!==null){f.interleaved=null;var b=g.next,C=f.pending;if(C!==null){var O=C.next;C.next=b,g.next=O}f.pending=g}As=null}return o}function nv(o,c){do{var f=St;try{if(Tp(),vd.current=Sd,bd){for(var g=ct.memoizedState;g!==null;){var b=g.queue;b!==null&&(b.pending=null),g=g.next}bd=!1}if(Is=0,It=jt=ct=null,tl=!1,nl=0,h0.current=null,f===null||f.return===null){kt=1,dl=c,St=null;break}e:{var C=o,O=f.return,q=f,re=c;if(c=$t,q.flags|=32768,re!==null&&typeof re=="object"&&typeof re.then=="function"){var de=re,we=q,Ce=we.tag;if(!(we.mode&1)&&(Ce===0||Ce===11||Ce===15)){var me=we.alternate;me?(we.updateQueue=me.updateQueue,we.memoizedState=me.memoizedState,we.lanes=me.lanes):(we.updateQueue=null,we.memoizedState=null)}var Je=Cy(O);if(Je!==null){Je.flags&=-257,Ey(Je,O,q,C,c),Je.mode&1&&ky(C,de,c),c=Je,re=de;var Xe=c.updateQueue;if(Xe===null){var gn=new Set;gn.add(re),c.updateQueue=gn}else Xe.add(re);break e}else{if(!(c&1)){ky(C,de,c),w0();break e}re=Error(l(426))}}else if(rt&&q.mode&1){var Jr=Cy(O);if(Jr!==null){!(Jr.flags&65536)&&(Jr.flags|=256),Ey(Jr,O,q,C,c),Ep(Ta(re,q));break e}}C=re=Ta(re,q),kt!==4&&(kt=2),ul===null?ul=[C]:ul.push(C),C=O;do{switch(C.tag){case 3:C.flags|=65536,c&=-c,C.lanes|=c;var ne=_y(C,re,c);q1(C,ne);break e;case 1:q=re;var Z=C.type,se=C.stateNode;if(!(C.flags&128)&&(typeof Z.getDerivedStateFromError=="function"||se!==null&&typeof se.componentDidCatch=="function"&&(Ri===null||!Ri.has(se)))){C.flags|=65536,c&=-c,C.lanes|=c;var ge=jy(C,q,c);q1(C,ge);break e}}C=C.return}while(C!==null)}sv(f)}catch(Se){c=Se,St===f&&f!==null&&(St=f=f.return);continue}break}while(1)}function rv(){var o=zd.current;return zd.current=Sd,o===null?Sd:o}function w0(){(kt===0||kt===3||kt===2)&&(kt=4),Ft===null||!(Fs&268435455)&&!(Ld&268435455)||Fi(Ft,$t)}function Bd(o,c){var f=Ae;Ae|=2;var g=rv();(Ft!==o||$t!==c)&&(Zr=null,zs(o,c));do try{X8();break}catch(b){nv(o,b)}while(1);if(Tp(),Ae=f,zd.current=g,St!==null)throw Error(l(261));return Ft=null,$t=0,kt}function X8(){for(;St!==null;)iv(St)}function Q8(){for(;St!==null&&!N8();)iv(St)}function iv(o){var c=lv(o.alternate,o,Cn);o.memoizedProps=o.pendingProps,c===null?sv(o):St=c,h0.current=null}function sv(o){var c=o;do{var f=c.alternate;if(o=c.return,c.flags&32768){if(f=B8(f,c),f!==null){f.flags&=32767,St=f;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{kt=6,St=null;return}}else if(f=G8(f,c,Cn),f!==null){St=f;return}if(c=c.sibling,c!==null){St=c;return}St=c=o}while(c!==null);kt===0&&(kt=5)}function Ls(o,c,f){var g=$e,b=bt.transition;try{bt.transition=null,$e=1,q8(o,c,f,g)}finally{bt.transition=b,$e=g}return null}function q8(o,c,f,g){do Ds();while(Ai!==null);if(Ae&6)throw Error(l(327));f=o.finishedWork;var b=o.finishedLanes;if(f===null)return null;if(o.finishedWork=null,o.finishedLanes=0,f===o.current)throw Error(l(177));o.callbackNode=null,o.callbackPriority=0;var C=f.lanes|f.childLanes;if(w8(o,C),o===Ft&&(St=Ft=null,$t=0),!(f.subtreeFlags&2064)&&!(f.flags&2064)||Od||(Od=!0,cv(Np,function(){return Ds(),null})),C=(f.flags&15990)!==0,f.subtreeFlags&15990||C){C=bt.transition,bt.transition=null;var O=$e;$e=1;var q=Ae;Ae|=4,h0.current=null,H8(o,f),Yy(f,o),W(o.containerInfo),o.current=f,W8(f),S8(),Ae=q,$e=O,bt.transition=C}else o.current=f;if(Od&&(Od=!1,Ai=o,Ud=b),C=o.pendingLanes,C===0&&(Ri=null),k8(f.stateNode),mn(o,At()),c!==null)for(g=o.onRecoverableError,f=0;f<c.length;f++)b=c[f],g(b.value,{componentStack:b.stack,digest:b.digest});if(Dd)throw Dd=!1,o=g0,g0=null,o;return Ud&1&&o.tag!==0&&Ds(),C=o.pendingLanes,C&1?o===x0?hl++:(hl=0,x0=o):hl=0,Nr(),null}function Ds(){if(Ai!==null){var o=L1(Ud),c=bt.transition,f=$e;try{if(bt.transition=null,$e=16>o?16:o,Ai===null)var g=!1;else{if(o=Ai,Ai=null,Ud=0,Ae&6)throw Error(l(331));var b=Ae;for(Ae|=4,ye=o.current;ye!==null;){var C=ye,O=C.child;if(ye.flags&16){var q=C.deletions;if(q!==null){for(var re=0;re<q.length;re++){var de=q[re];for(ye=de;ye!==null;){var we=ye;switch(we.tag){case 0:case 11:case 15:ll(8,we,C)}var Ce=we.child;if(Ce!==null)Ce.return=we,ye=Ce;else for(;ye!==null;){we=ye;var me=we.sibling,Je=we.return;if(By(we),we===de){ye=null;break}if(me!==null){me.return=Je,ye=me;break}ye=Je}}}var Xe=C.alternate;if(Xe!==null){var gn=Xe.child;if(gn!==null){Xe.child=null;do{var Jr=gn.sibling;gn.sibling=null,gn=Jr}while(gn!==null)}}ye=C}}if(C.subtreeFlags&2064&&O!==null)O.return=C,ye=O;else e:for(;ye!==null;){if(C=ye,C.flags&2048)switch(C.tag){case 0:case 11:case 15:ll(9,C,C.return)}var ne=C.sibling;if(ne!==null){ne.return=C.return,ye=ne;break e}ye=C.return}}var Z=o.current;for(ye=Z;ye!==null;){O=ye;var se=O.child;if(O.subtreeFlags&2064&&se!==null)se.return=O,ye=se;else e:for(O=Z;ye!==null;){if(q=ye,q.flags&2048)try{switch(q.tag){case 0:case 11:case 15:Td(9,q)}}catch(Se){it(q,q.return,Se)}if(q===O){ye=null;break e}var ge=q.sibling;if(ge!==null){ge.return=q.return,ye=ge;break e}ye=q.return}}if(Ae=b,Nr(),wr&&typeof wr.onPostCommitFiberRoot=="function")try{wr.onPostCommitFiberRoot(od,o)}catch{}g=!0}return g}finally{$e=f,bt.transition=c}}return!1}function av(o,c,f){c=Ta(f,c),c=_y(o,c,1),o=Mi(o,c,1),c=Xt(),o!==null&&(Qo(o,1,c),mn(o,c))}function it(o,c,f){if(o.tag===3)av(o,o,f);else for(;c!==null;){if(c.tag===3){av(c,o,f);break}else if(c.tag===1){var g=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Ri===null||!Ri.has(g))){o=Ta(f,o),o=jy(c,o,1),c=Mi(c,o,1),o=Xt(),c!==null&&(Qo(c,1,o),mn(c,o));break}}c=c.return}}function Z8(o,c,f){var g=o.pingCache;g!==null&&g.delete(c),c=Xt(),o.pingedLanes|=o.suspendedLanes&f,Ft===o&&($t&f)===f&&(kt===4||kt===3&&($t&130023424)===$t&&500>At()-p0?zs(o,0):f0|=f),mn(o,c)}function ov(o,c){c===0&&(o.mode&1?(c=sd,sd<<=1,!(sd&130023424)&&(sd=4194304)):c=1);var f=Xt();o=Sr(o,c),o!==null&&(Qo(o,c,f),mn(o,f))}function J8(o){var c=o.memoizedState,f=0;c!==null&&(f=c.retryLane),ov(o,f)}function eN(o,c){var f=0;switch(o.tag){case 13:var g=o.stateNode,b=o.memoizedState;b!==null&&(f=b.retryLane);break;case 19:g=o.stateNode;break;default:throw Error(l(314))}g!==null&&g.delete(c),ov(o,f)}var lv;lv=function(o,c,f){if(o!==null)if(o.memoizedProps!==c.pendingProps||un.current)fn=!0;else{if(!(o.lanes&f)&&!(c.flags&128))return fn=!1,$8(o,c,f);fn=!!(o.flags&131072)}else fn=!1,rt&&c.flags&1048576&&U1(c,dd,c.index);switch(c.lanes=0,c.tag){case 2:var g=c.type;kd(o,c),o=c.pendingProps;var b=wa(c,Ht.current);Ca(c,f),b=$p(null,c,g,o,b,f);var C=Gp();return c.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,hn(g)?(C=!0,nd(c)):C=!1,c.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,Ip(c),b.updater=_d,c.stateNode=b,b._reactInternals=c,Kp(c,g,o,f),c=Zp(null,c,g,!0,C,f)):(c.tag=0,rt&&C&&_p(c),sn(null,c,b,f),c=c.child),c;case 16:g=c.elementType;e:{switch(kd(o,c),o=c.pendingProps,b=g._init,g=b(g._payload),c.type=g,b=c.tag=nN(g),o=rr(g,o),b){case 0:c=qp(null,c,g,o,f);break e;case 1:c=Iy(null,c,g,o,f);break e;case 11:c=Py(null,c,g,o,f);break e;case 14:c=Ty(null,c,g,rr(g.type,o),f);break e}throw Error(l(306,g,""))}return c;case 0:return g=c.type,b=c.pendingProps,b=c.elementType===g?b:rr(g,b),qp(o,c,g,b,f);case 1:return g=c.type,b=c.pendingProps,b=c.elementType===g?b:rr(g,b),Iy(o,c,g,b,f);case 3:e:{if(Fy(c),o===null)throw Error(l(387));g=c.pendingProps,C=c.memoizedState,b=C.element,Q1(o,c),xd(c,g,null,f);var O=c.memoizedState;if(g=O.element,pe&&C.isDehydrated)if(C={element:g,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},c.updateQueue.baseState=C,c.memoizedState=C,c.flags&256){b=Ta(Error(l(423)),c),c=zy(o,c,g,f,b);break e}else if(g!==b){b=Ta(Error(l(424)),c),c=zy(o,c,g,f,b);break e}else for(pe&&(On=ap(c.stateNode.containerInfo),kn=c,rt=!0,nr=null,qo=!1),f=Y1(c,null,g,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(_a(),g===b){c=qr(o,c,f);break e}sn(o,c,g,f)}c=c.child}return c;case 5:return J1(c),o===null&&Cp(c),g=c.type,b=c.pendingProps,C=o!==null?o.memoizedProps:null,O=b.children,ae(g,b)?O=null:C!==null&&ae(g,C)&&(c.flags|=32),Ay(o,c),sn(o,c,O,f),c.child;case 6:return o===null&&Cp(c),null;case 13:return Ly(o,c,f);case 4:return Fp(c,c.stateNode.containerInfo),g=c.pendingProps,o===null?c.child=ja(c,null,g,f):sn(o,c,g,f),c.child;case 11:return g=c.type,b=c.pendingProps,b=c.elementType===g?b:rr(g,b),Py(o,c,g,b,f);case 7:return sn(o,c,c.pendingProps,f),c.child;case 8:return sn(o,c,c.pendingProps.children,f),c.child;case 12:return sn(o,c,c.pendingProps.children,f),c.child;case 10:e:{if(g=c.type._context,b=c.pendingProps,C=c.memoizedProps,O=b.value,K1(c,g,O),C!==null)if(tr(C.value,O)){if(C.children===b.children&&!un.current){c=qr(o,c,f);break e}}else for(C=c.child,C!==null&&(C.return=c);C!==null;){var q=C.dependencies;if(q!==null){O=C.child;for(var re=q.firstContext;re!==null;){if(re.context===g){if(C.tag===1){re=Qr(-1,f&-f),re.tag=2;var de=C.updateQueue;if(de!==null){de=de.shared;var we=de.pending;we===null?re.next=re:(re.next=we.next,we.next=re),de.pending=re}}C.lanes|=f,re=C.alternate,re!==null&&(re.lanes|=f),Rp(C.return,f,c),q.lanes|=f;break}re=re.next}}else if(C.tag===10)O=C.type===c.type?null:C.child;else if(C.tag===18){if(O=C.return,O===null)throw Error(l(341));O.lanes|=f,q=O.alternate,q!==null&&(q.lanes|=f),Rp(O,f,c),O=C.sibling}else O=C.child;if(O!==null)O.return=C;else for(O=C;O!==null;){if(O===c){O=null;break}if(C=O.sibling,C!==null){C.return=O.return,O=C;break}O=O.return}C=O}sn(o,c,b.children,f),c=c.child}return c;case 9:return b=c.type,g=c.pendingProps.children,Ca(c,f),b=Un(b),g=g(b),c.flags|=1,sn(o,c,g,f),c.child;case 14:return g=c.type,b=rr(g,c.pendingProps),b=rr(g.type,b),Ty(o,c,g,b,f);case 15:return My(o,c,c.type,c.pendingProps,f);case 17:return g=c.type,b=c.pendingProps,b=c.elementType===g?b:rr(g,b),kd(o,c),c.tag=1,hn(g)?(o=!0,nd(c)):o=!1,Ca(c,f),Ny(c,g,b),Kp(c,g,b,f),Zp(null,c,g,!0,o,f);case 19:return Oy(o,c,f);case 22:return Ry(o,c,f)}throw Error(l(156,c.tag))};function cv(o,c){return bp(o,c)}function tN(o,c,f,g){this.tag=o,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(o,c,f,g){return new tN(o,c,f,g)}function N0(o){return o=o.prototype,!(!o||!o.isReactComponent)}function nN(o){if(typeof o=="function")return N0(o)?1:0;if(o!=null){if(o=o.$$typeof,o===N)return 11;if(o===j)return 14}return 2}function zi(o,c){var f=o.alternate;return f===null?(f=Vn(o.tag,c,o.key,o.mode),f.elementType=o.elementType,f.type=o.type,f.stateNode=o.stateNode,f.alternate=o,o.alternate=f):(f.pendingProps=c,f.type=o.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=o.flags&14680064,f.childLanes=o.childLanes,f.lanes=o.lanes,f.child=o.child,f.memoizedProps=o.memoizedProps,f.memoizedState=o.memoizedState,f.updateQueue=o.updateQueue,c=o.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=o.sibling,f.index=o.index,f.ref=o.ref,f}function Vd(o,c,f,g,b,C){var O=2;if(g=o,typeof o=="function")N0(o)&&(O=1);else if(typeof o=="string")O=5;else e:switch(o){case p:return Os(f.children,b,C,c);case m:O=8,b|=8;break;case x:return o=Vn(12,f,c,b|2),o.elementType=x,o.lanes=C,o;case k:return o=Vn(13,f,c,b),o.elementType=k,o.lanes=C,o;case w:return o=Vn(19,f,c,b),o.elementType=w,o.lanes=C,o;case _:return Hd(f,b,C,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case y:O=10;break e;case S:O=9;break e;case N:O=11;break e;case j:O=14;break e;case v:O=16,g=null;break e}throw Error(l(130,o==null?o:typeof o,""))}return c=Vn(O,f,c,b),c.elementType=o,c.type=g,c.lanes=C,c}function Os(o,c,f,g){return o=Vn(7,o,g,c),o.lanes=f,o}function Hd(o,c,f,g){return o=Vn(22,o,g,c),o.elementType=_,o.lanes=f,o.stateNode={isHidden:!1},o}function S0(o,c,f){return o=Vn(6,o,null,c),o.lanes=f,o}function _0(o,c,f){return c=Vn(4,o.children!==null?o.children:[],o.key,c),c.lanes=f,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function rN(o,c,f,g,b){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ce,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yp(0),this.expirationTimes=yp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yp(0),this.identifierPrefix=g,this.onRecoverableError=b,pe&&(this.mutableSourceEagerHydrationData=null)}function dv(o,c,f,g,b,C,O,q,re){return o=new rN(o,c,f,q,re),c===1?(c=1,C===!0&&(c|=8)):c=0,C=Vn(3,null,null,c),o.current=C,C.stateNode=o,C.memoizedState={element:g,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ip(C),o}function uv(o){if(!o)return Pi;o=o._reactInternals;e:{if(I(o)!==o||o.tag!==1)throw Error(l(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(hn(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(l(171))}if(o.tag===1){var f=o.type;if(hn(f))return I1(o,f,c)}return c}function hv(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(l(188)):(o=Object.keys(o).join(","),Error(l(268,o)));return o=F(c),o===null?null:o.stateNode}function fv(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var f=o.retryLane;o.retryLane=f!==0&&f<c?f:c}}function Wd(o,c){fv(o,c),(o=o.alternate)&&fv(o,c)}function iN(o){return o=F(o),o===null?null:o.stateNode}function sN(){return null}return n.attemptContinuousHydration=function(o){if(o.tag===13){var c=Sr(o,134217728);if(c!==null){var f=Xt();Bn(c,o,134217728,f)}Wd(o,134217728)}},n.attemptDiscreteHydration=function(o){if(o.tag===13){var c=Sr(o,1);if(c!==null){var f=Xt();Bn(c,o,1,f)}Wd(o,1)}},n.attemptHydrationAtCurrentPriority=function(o){if(o.tag===13){var c=Ii(o),f=Sr(o,c);if(f!==null){var g=Xt();Bn(f,o,c,g)}Wd(o,c)}},n.attemptSynchronousHydration=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var f=Xo(c.pendingLanes);f!==0&&(vp(c,f|1),mn(c,At()),!(Ae&6)&&(Aa(),Nr()))}break;case 13:tv(function(){var g=Sr(o,1);if(g!==null){var b=Xt();Bn(g,o,1,b)}}),Wd(o,1)}},n.batchedUpdates=function(o,c){var f=Ae;Ae|=1;try{return o(c)}finally{Ae=f,Ae===0&&(Aa(),ld&&Nr())}},n.createComponentSelector=function(o){return{$$typeof:Md,value:o}},n.createContainer=function(o,c,f,g,b,C,O){return dv(o,c,!1,null,f,g,b,C,O)},n.createHasPseudoClassSelector=function(o){return{$$typeof:Rd,value:o}},n.createHydrationContainer=function(o,c,f,g,b,C,O,q,re){return o=dv(f,g,!0,o,b,C,O,q,re),o.context=uv(null),f=o.current,g=Xt(),b=Ii(f),C=Qr(g,b),C.callback=c??null,Mi(f,C,b),o.current.lanes=b,Qo(o,b,g),mn(o,g),o},n.createPortal=function(o,c,f){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:g==null?null:""+g,children:o,containerInfo:c,implementation:f}},n.createRoleSelector=function(o){return{$$typeof:Ad,value:o}},n.createTestNameSelector=function(o){return{$$typeof:Id,value:o}},n.createTextSelector=function(o){return{$$typeof:Fd,value:o}},n.deferredUpdates=function(o){var c=$e,f=bt.transition;try{return bt.transition=null,$e=16,o()}finally{$e=c,bt.transition=f}},n.discreteUpdates=function(o,c,f,g,b){var C=$e,O=bt.transition;try{return bt.transition=null,$e=1,o(c,f,g,b)}finally{$e=C,bt.transition=O,Ae===0&&Aa()}},n.findAllNodes=u0,n.findBoundingRects=function(o,c){if(!Sn)throw Error(l(363));c=u0(o,c),o=[];for(var f=0;f<c.length;f++)o.push(Si(c[f]));for(c=o.length-1;0<c;c--){f=o[c];for(var g=f.x,b=g+f.width,C=f.y,O=C+f.height,q=c-1;0<=q;q--)if(c!==q){var re=o[q],de=re.x,we=de+re.width,Ce=re.y,me=Ce+re.height;if(g>=de&&C>=Ce&&b<=we&&O<=me){o.splice(c,1);break}else if(g!==de||f.width!==re.width||me<C||Ce>O){if(!(C!==Ce||f.height!==re.height||we<g||de>b)){de>g&&(re.width+=de-g,re.x=g),we<b&&(re.width=b-de),o.splice(c,1);break}}else{Ce>C&&(re.height+=Ce-C,re.y=C),me<O&&(re.height=O-Ce),o.splice(c,1);break}}}return o},n.findHostInstance=hv,n.findHostInstanceWithNoPortals=function(o){return o=L(o),o=o!==null?R(o):null,o===null?null:o.stateNode},n.findHostInstanceWithWarning=function(o){return hv(o)},n.flushControlled=function(o){var c=Ae;Ae|=1;var f=bt.transition,g=$e;try{bt.transition=null,$e=1,o()}finally{$e=g,bt.transition=f,Ae=c,Ae===0&&(Aa(),Nr())}},n.flushPassiveEffects=Ds,n.flushSync=tv,n.focusWithin=function(o,c){if(!Sn)throw Error(l(363));for(o=l0(o),c=Zy(o,c),c=Array.from(c),o=0;o<c.length;){var f=c[o++];if(!rn(f)){if(f.tag===5&&$r(f.stateNode))return!0;for(f=f.child;f!==null;)c.push(f),f=f.sibling}}return!1},n.getCurrentUpdatePriority=function(){return $e},n.getFindAllNodesFailureDescription=function(o,c){if(!Sn)throw Error(l(363));var f=0,g=[];o=[l0(o),0];for(var b=0;b<o.length;){var C=o[b++],O=o[b++],q=c[O];if((C.tag!==5||!rn(C))&&(c0(C,q)&&(g.push(d0(q)),O++,O>f&&(f=O)),O<c.length))for(C=C.child;C!==null;)o.push(C,O),C=C.sibling}if(f<c.length){for(o=[];f<c.length;f++)o.push(d0(c[f]));return`findAllNodes was able to match part of the selector:
  `+(g.join(" > ")+`

No matching component was found for:
  `)+o.join(" > ")}return null},n.getPublicRootInstance=function(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return B(o.child.stateNode);default:return o.child.stateNode}},n.injectIntoDevTools=function(o){if(o={bundleType:o.bundleType,version:o.version,rendererPackageName:o.rendererPackageName,rendererConfig:o.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:d.ReactCurrentDispatcher,findHostInstanceByFiber:iN,findFiberByHostInstance:o.findFiberByHostInstance||sN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")o=!1;else{var c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(c.isDisabled||!c.supportsFiber)o=!0;else{try{od=c.inject(o),wr=c}catch{}o=!!c.checkDCE}}return o},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(o,c,f,g){if(!Sn)throw Error(l(363));o=u0(o,c);var b=Gr(o,f,g).disconnect;return{disconnect:function(){b()}}},n.registerMutableSourceForHydration=function(o,c){var f=c._getVersion;f=f(c._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[c,f]:o.mutableSourceEagerHydrationData.push(c,f)},n.runWithPriority=function(o,c){var f=$e;try{return $e=o,c()}finally{$e=f}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(o,c,f,g){var b=c.current,C=Xt(),O=Ii(b);return f=uv(f),c.context===null?c.context=f:c.pendingContext=f,c=Qr(C,O),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=Mi(b,c,O),o!==null&&(Bn(o,b,O,C),gd(o,b,O)),O},n};l8.exports=lF;var cF=l8.exports;const dF=Rh(cF);var c8={exports:{}},va={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */va.ConcurrentRoot=1;va.ContinuousEventPriority=4;va.DefaultEventPriority=16;va.DiscreteEventPriority=1;va.IdleEventPriority=536870912;va.LegacyRoot=0;c8.exports=va;var d8=c8.exports;const uw={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let hw=!1,fw=!1;const M1=".react-konva-event",uF=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,hF=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,fF={};function Zf(e,t,n=fF){if(!hw&&"zIndex"in t&&(console.warn(hF),hw=!0),!fw&&t.draggable){var r=t.x!==void 0||t.y!==void 0,i=t.onDragEnd||t.onDragMove;r&&!i&&(console.warn(uF),fw=!0)}for(var s in n)if(!uw[s]){var l=s.slice(0,2)==="on",d=n[s]!==t[s];if(l&&d){var u=s.substr(2).toLowerCase();u.substr(0,7)==="content"&&(u="content"+u.substr(7,1).toUpperCase()+u.substr(8)),e.off(u,n[s])}var h=!t.hasOwnProperty(s);h&&e.setAttr(s,void 0)}var p=t._useStrictMode,m={},x=!1;const y={};for(var s in t)if(!uw[s]){var l=s.slice(0,2)==="on",S=n[s]!==t[s];if(l&&S){var u=s.substr(2).toLowerCase();u.substr(0,7)==="content"&&(u="content"+u.substr(7,1).toUpperCase()+u.substr(8)),t[s]&&(y[u]=t[s])}!l&&(t[s]!==n[s]||p&&t[s]!==e.getAttr(s))&&(x=!0,m[s]=t[s])}x&&(e.setAttrs(m),_s(e));for(var u in y)e.on(u+M1,y[u])}function _s(e){if(!Me.Konva.autoDrawEnabled){var t=e.getLayer()||e.getStage();t&&t.batchDraw()}}const u8={},pF={};Pc.Node.prototype._applyProps=Zf;function mF(e,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}e.add(t),_s(e)}function gF(e,t,n){let r=Pc[e];r||(console.error(`Konva has no node with the type ${e}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${e}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),r=Pc.Group);const i={},s={};for(var l in t){var d=l.slice(0,2)==="on";d?s[l]=t[l]:i[l]=t[l]}const u=new r(i);return Zf(u,s),u}function xF(e,t,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${e}"`)}function yF(e,t,n){return!1}function vF(e){return e}function bF(){return null}function wF(){return null}function NF(e,t,n,r){return pF}function SF(){}function _F(e){}function jF(e,t){return!1}function kF(){return u8}function CF(){return u8}const EF=setTimeout,PF=clearTimeout,TF=-1;function MF(e,t){return!1}const RF=!1,AF=!0,IF=!0;function FF(e,t){t.parent===e?t.moveToTop():e.add(t),_s(e)}function zF(e,t){t.parent===e?t.moveToTop():e.add(t),_s(e)}function h8(e,t,n){t._remove(),e.add(t),t.setZIndex(n.getZIndex()),_s(e)}function LF(e,t,n){h8(e,t,n)}function DF(e,t){t.destroy(),t.off(M1),_s(e)}function OF(e,t){t.destroy(),t.off(M1),_s(e)}function UF(e,t,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function $F(e,t,n){}function GF(e,t,n,r,i){Zf(e,i,r)}function BF(e){e.hide(),_s(e)}function VF(e){}function HF(e,t){(t.visible==null||t.visible)&&e.show()}function WF(e,t){}function YF(e){}function KF(){}const XF=()=>d8.DefaultEventPriority,QF=Object.freeze(Object.defineProperty({__proto__:null,appendChild:FF,appendChildToContainer:zF,appendInitialChild:mF,cancelTimeout:PF,clearContainer:YF,commitMount:$F,commitTextUpdate:UF,commitUpdate:GF,createInstance:gF,createTextInstance:xF,detachDeletedInstance:KF,finalizeInitialChildren:yF,getChildHostContext:CF,getCurrentEventPriority:XF,getPublicInstance:vF,getRootHostContext:kF,hideInstance:BF,hideTextInstance:VF,idlePriority:Bl.unstable_IdlePriority,insertBefore:h8,insertInContainerBefore:LF,isPrimaryRenderer:RF,noTimeout:TF,now:Bl.unstable_now,prepareForCommit:bF,preparePortalMount:wF,prepareUpdate:NF,removeChild:DF,removeChildFromContainer:OF,resetAfterCommit:SF,resetTextContent:_F,run:Bl.unstable_runWithPriority,scheduleTimeout:EF,shouldDeprioritizeSubtree:jF,shouldSetTextContent:MF,supportsMutation:IF,unhideInstance:HF,unhideTextInstance:WF,warnsIfNotActing:AF},Symbol.toStringTag,{value:"Module"}));var qF=Object.defineProperty,ZF=Object.defineProperties,JF=Object.getOwnPropertyDescriptors,pw=Object.getOwnPropertySymbols,ez=Object.prototype.hasOwnProperty,tz=Object.prototype.propertyIsEnumerable,mw=(e,t,n)=>t in e?qF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gw=(e,t)=>{for(var n in t||(t={}))ez.call(t,n)&&mw(e,n,t[n]);if(pw)for(var n of pw(t))tz.call(t,n)&&mw(e,n,t[n]);return e},nz=(e,t)=>ZF(e,JF(t)),xw,yw;typeof window<"u"&&((xw=window.document)!=null&&xw.createElement||((yw=window.navigator)==null?void 0:yw.product)==="ReactNative")?T.useLayoutEffect:T.useEffect;function f8(e,t,n){if(!e)return;if(n(e)===!0)return e;let r=t?e.return:e.child;for(;r;){const i=f8(r,t,n);if(i)return i;r=t?null:r.sibling}}function p8(e){try{return Object.defineProperties(e,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return e}}const vw=console.error;console.error=function(){const e=[...arguments].join("");if(e!=null&&e.startsWith("Warning:")&&e.includes("useContext")){console.error=vw;return}return vw.apply(this,arguments)};const R1=p8(T.createContext(null));class m8 extends T.Component{render(){return T.createElement(R1.Provider,{value:this._reactInternals},this.props.children)}}function rz(){const e=T.useContext(R1);if(e===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=T.useId();return T.useMemo(()=>{for(const r of[e,e==null?void 0:e.alternate]){if(!r)continue;const i=f8(r,!1,s=>{let l=s.memoizedState;for(;l;){if(l.memoizedState===t)return!0;l=l.next}});if(i)return i}},[e,t])}function iz(){const e=rz(),[t]=T.useState(()=>new Map);t.clear();let n=e;for(;n;){if(n.type&&typeof n.type=="object"){const i=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;i&&i!==R1&&!t.has(i)&&t.set(i,T.useContext(p8(i)))}n=n.return}return t}function sz(){const e=iz();return T.useMemo(()=>Array.from(e.keys()).reduce((t,n)=>r=>T.createElement(t,null,T.createElement(n.Provider,nz(gw({},r),{value:e.get(n)}))),t=>T.createElement(m8,gw({},t))),[e])}function az(e){const t=te.useRef({});return te.useLayoutEffect(()=>{t.current=e}),te.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const oz=e=>{const t=te.useRef(),n=te.useRef(),r=te.useRef(),i=az(e),s=sz(),l=d=>{const{forwardedRef:u}=e;u&&(typeof u=="function"?u(d):u.current=d)};return te.useLayoutEffect(()=>(n.current=new Pc.Stage({width:e.width,height:e.height,container:t.current}),l(n.current),r.current=Gl.createContainer(n.current,d8.LegacyRoot,!1,null),Gl.updateContainer(te.createElement(s,{},e.children),r.current),()=>{Pc.isBrowser&&(l(null),Gl.updateContainer(null,r.current,null),n.current.destroy())}),[]),te.useLayoutEffect(()=>{l(n.current),Zf(n.current,e,i),Gl.updateContainer(te.createElement(s,{},e.children),r.current,null)}),te.createElement("div",{ref:t,id:e.id,accessKey:e.accessKey,className:e.className,role:e.role,style:e.style,tabIndex:e.tabIndex,title:e.title})},bw="Layer",ww="Rect",lz="Line",cz="Image",dz="Text",uz="Transformer",Gl=dF(QF);Gl.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:te.version,rendererPackageName:"react-konva"});const hz=te.forwardRef((e,t)=>te.createElement(m8,{},te.createElement(oz,{...e,forwardedRef:t}))),fz=({isOpen:e,onClose:t,onConfirm:n,title:r,message:i,initialValue:s="",placeholder:l="",confirmText:d="Confirmar",cancelText:u="Cancelar"})=>{const[h,p]=T.useState(s),m=T.useRef(null);if(T.useEffect(()=>{p(s)},[s,e]),T.useEffect(()=>{e&&m.current&&setTimeout(()=>m.current.focus(),50)},[e]),!e)return null;const x=y=>{y.preventDefault(),n(h),t()};return Fc.createPortal(a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl p-6 shadow-2xl w-full max-w-md space-y-4 animate-in zoom-in-95 duration-200 relative overflow-hidden",onClick:y=>y.stopPropagation(),children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-primary to-transparent opacity-50"}),a.jsx("h3",{className:"text-xl font-bold text-white",children:r}),i&&a.jsx("p",{className:"text-sm text-slate-400 leading-relaxed",children:i}),a.jsxs("form",{onSubmit:x,className:"space-y-4",children:[a.jsx("input",{ref:m,type:"text",value:h,onChange:y=>p(y.target.value),placeholder:l,className:"w-full bg-black/20 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:border-primary/50 focus:ring-1 focus:ring-primary/50 outline-none transition-all font-mono text-sm"}),a.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm text-slate-400 hover:text-white transition-colors",children:u}),a.jsx(Ye,{type:"submit",variant:"primary",disabled:!h.trim(),children:d})]})]})]})}),document.body)},Cm=({stepNumber:e,title:t,isOpen:n,onClick:r,children:i})=>a.jsxs("div",{className:`border border-white/10 rounded-2xl bg-[#13141f] overflow-hidden transition-all duration-300 ${n?"ring-1 ring-primary/50":"opacity-80"}`,children:[a.jsxs("button",{onClick:r,className:"w-full flex items-center justify-between p-6 hover:bg-white/5 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:`size-8 rounded-full flex items-center justify-center font-black text-sm ${n?"bg-primary text-white":"bg-white/10 text-slate-400"}`,children:e}),a.jsx("h3",{className:`text-lg font-bold ${n?"text-white":"text-slate-400"}`,children:t})]}),a.jsx("span",{className:`material-symbols-outlined transition-transform duration-300 ${n?"rotate-180 text-primary":"text-slate-500"}`,children:"expand_more"})]}),n&&a.jsx("div",{className:"p-6 pt-0 border-t border-white/5 animate-in fade-in slide-in-from-top-2",children:i})]}),Em=({icon:e,title:t,desc:n,selected:r,onClick:i})=>a.jsxs("div",{onClick:i,className:`p-6 rounded-xl border cursor-pointer transition-all relative group h-full flex flex-col justify-between ${r?"bg-primary/20 border-primary shadow-[0_0_30px_rgba(var(--color-primary),0.3)]":"bg-[#0a0a0c] border-white/10 hover:border-white/30"}`,children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:`size-12 rounded-lg flex items-center justify-center mb-4 ${r?"bg-primary text-white":"bg-white/10 text-slate-400 group-hover:text-white group-hover:bg-white/20"}`,children:a.jsx("span",{className:"material-symbols-outlined text-2xl",children:e})}),a.jsx("h4",{className:"font-bold text-white mb-1",children:t}),a.jsx("p",{className:"text-xs text-slate-500 leading-relaxed",children:n})]}),r&&a.jsx("div",{className:"absolute top-4 right-4 size-3 bg-primary rounded-full shadow-glow"})]}),pz=({src:e,x:t,y:n,width:r,height:i})=>{const[s,l]=T.useState(null);return T.useEffect(()=>{if(!e)return;const d=new window.Image;d.src=e,d.crossOrigin="Anonymous",d.onload=()=>{l(d)}},[e]),a.jsx(cz,{image:s,x:t,y:n,width:r,height:i})},mz=({selectedId:e})=>{const t=te.useRef();return te.useEffect(()=>{if(e){const n=t.current.getStage().findOne("#"+e);n&&(t.current.nodes([n]),t.current.getLayer().batchDraw())}else t.current.nodes([])},[e]),a.jsx(uz,{ref:t})},Nw=({mode:e})=>{var ce;const{username:t,projectName:n,folderId:r,entityId:i}=zn(),s=Fn(),l=ca(),{setRightOpen:d,setRightPanelMode:u,setAvailableTemplates:h,mapSettings:p,setMapSettings:m,setOnMapSettingsChange:x}=da(),[y,S]=T.useState(e==="create"?"setup":"editor");T.useEffect(()=>{S(e==="create"?"setup":"editor")},[e]);const[N,k]=T.useState(((ce=l.state)==null?void 0:ce.folderId)||null),[w,j]=T.useState(1),[v,_]=T.useState({name:"New Map",description:"",parentZone:null,type:"regional",sourceType:"blank",dims:{width:800,height:600},bgImage:null}),[E,A]=T.useState(!1),[D,M]=T.useState("brush"),[I,P]=T.useState([]),[L,F]=T.useState([]),[G,R]=T.useState([]),[$,B]=T.useState(null),Q=te.useRef(!1),[K,H]=T.useState({isOpen:!1,id:null,text:""}),W=U=>{U.target===U.target.getStage()&&B(null)},z=U=>{W(U);const oe=U.target.getStage().getPointerPosition();D!=="select"&&(Q.current=!0,D==="brush"||D==="eraser"?P([...I,{id:`line-${Date.now()}`,tool:D,points:[oe.x,oe.y],color:D==="eraser"?"#ffffff":"#df4b26",size:D==="eraser"?20:5}]):D==="rect"?F([...L,{id:`rect-${Date.now()}`,x:oe.x,y:oe.y,width:0,height:0,color:"#df4b26"}]):D==="text"&&(R([...G,{id:`text-${Date.now()}`,x:oe.x,y:oe.y,text:"Double click to edit",fontSize:20,color:"#ffffff"}]),Q.current=!1))},V=U=>{if(!Q.current)return;const oe=U.target.getStage().getPointerPosition();D==="brush"||D==="eraser"?P(pe=>{const xe=[...pe],he={...xe[xe.length-1]};return he.points=he.points.concat([oe.x,oe.y]),xe[xe.length-1]=he,xe}):D==="rect"&&F(pe=>{const xe=[...pe],he={...xe[xe.length-1]};return he.width=oe.x-he.x,he.height=oe.y-he.y,xe[xe.length-1]=he,xe})},J=()=>{Q.current=!1};T.useEffect(()=>{if(d(y==="editor"),y==="editor"){u("MAP");const U={showGrid:!0,gridSize:50,width:v.dims.width,height:v.dims.height};m(U),x(X=>{X&&_(oe=>({...oe,dims:{width:X.width,height:X.height}}))})}},[y]),T.useEffect(()=>{e==="create"&&!N&&r&&(console.log("Resolving folder ID for slug:",r),ue.get(`/world-bible/folders/${r}`).then(U=>k(U.id)).catch(U=>console.error("Could not resolve folder ID",U)))},[e,r,N]);const ee=U=>{const X=U.target.files[0];if(X){const oe=new FileReader;oe.onload=pe=>{const xe=new Image;xe.onload=()=>{_(he=>({...he,bgImage:pe.target.result,dims:{width:xe.width,height:xe.height},sourceType:"upload"}))},xe.src=pe.target.result},oe.readAsDataURL(X)}},ae=te.useRef(null),fe=async()=>{if(!N){alert("Folder context missing. Please start from the folder view again.");return}A(!0);try{let U=v.bgImage;if(ae.current){const pe=ae.current.findOne("Transformer");if(pe&&pe.nodes([]),U=ae.current.toDataURL({pixelRatio:.5}),pe&&$){const xe=ae.current.findOne("#"+$);xe&&pe.nodes([xe])}}const X={nombre:v.name,tipoEspecial:"map",carpetaId:N,descripcion:JSON.stringify({description:v.description,type:v.type,width:v.dims.width,height:v.dims.height,bgImage:v.bgImage?"BINARY_DATA":null,layers:{lines:I,rectangles:L,texts:G},snapshotUrl:U}),iconUrl:U},oe=await ue.post("/world-bible/entities",X);window.dispatchEvent(new CustomEvent("folder-update",{detail:{folderId:N}})),s(`/${t}/${n}/map-editor/edit/${oe.id}`,{replace:!0})}catch(U){console.error(U),alert("Error creating map. Check console.")}finally{A(!1)}},Y=te.useRef(null);T.useEffect(()=>{(!e||e==="edit")&&i&&ue.get(`/world-bible/entities/${i}`).then(U=>{k(U.carpetaId),Y.current=U.iconUrl,S("editor");let X={};try{X=U.descripcion?JSON.parse(U.descripcion):{}}catch(oe){console.error("Error parsing map data",oe)}_({name:U.nombre,description:X.description||"",parentZone:null,type:X.type||"regional",sourceType:X.bgImage?"upload":"blank",dims:{width:X.width||800,height:X.height||600},bgImage:X.bgImage}),X.layers&&(P(X.layers.lines||[]),F(X.layers.rectangles||[]),R(X.layers.texts||[])),m({name:U.nombre,description:X.description||"",type:X.type||"regional",showGrid:!0,gridSize:50,width:X.width||800,height:X.height||600,bgImage:X.bgImage})}).catch(U=>console.error("Error loading entity",U))},[e,i]);const ie=async()=>{A(!0);try{let U=v.bgImage;if(ae.current){B(null);const oe=ae.current.findOne("Transformer");oe&&oe.nodes([]),U=ae.current.toDataURL({pixelRatio:.5})}const X={id:i,nombre:v.name,tipoEspecial:"map",carpetaId:N,descripcion:JSON.stringify({description:v.description,type:v.type,width:v.dims.width,height:v.dims.height,bgImage:v.bgImage?"BINARY_DATA":null,layers:{lines:I,rectangles:L,texts:G},snapshotUrl:U}),iconUrl:Y.current};await ue.put(`/world-bible/entities/${i}`,X),s(N?`/${t}/${n}/bible/folder/${N}`:`/${t}/${n}/bible`)}catch(U){console.error("Save failed",U),alert("Error saving map")}finally{A(!1)}};return y==="setup"?a.jsxs("div",{className:"flex-1 flex flex-col h-screen bg-[#060608] text-white",children:[a.jsxs("div",{className:"h-16 border-b border-white/5 flex items-center justify-between px-8 bg-[#0a0a0c]",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-primary/20 rounded-lg text-primary",children:a.jsx("span",{className:"material-symbols-outlined",children:"add_circle"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-lg font-bold leading-tight",children:"Create New Map / Zone"}),a.jsx("p",{className:"text-[10px] text-slate-500 uppercase font-bold tracking-wider",children:"Configure details for your new cartography entry"})]})]}),a.jsx("button",{onClick:()=>s(-1),className:"p-2 hover:bg-white/5 rounded-full text-slate-500 hover:text-white transition-colors",children:a.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-8",children:a.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[a.jsx(Cm,{stepNumber:"1",title:"Identity & Hierarchy",isOpen:w===1,onClick:()=>j(1),children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500 mb-2 block",children:"Map Name"}),a.jsx("input",{autoFocus:!0,value:v.name,onChange:U=>_({...v,name:U.target.value}),className:"w-full bg-[#0a0a0c] border border-white/10 rounded-xl p-4 text-white focus:border-primary outline-none transition-colors",placeholder:"e.g. The Sapphire Coast"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500 mb-2 block",children:"Parent Zone (Optional)"}),a.jsxs("div",{className:"w-full bg-[#0a0a0c] border border-white/10 rounded-xl p-4 text-slate-400 flex items-center justify-between cursor-pointer hover:border-white/20",children:[a.jsx("span",{children:"Current Folder (Default)"}),a.jsx("span",{className:"material-symbols-outlined text-sm",children:"expand_more"})]}),a.jsx("p",{className:"text-[10px] text-slate-600 mt-2",children:"Selecting a parent makes this a sub-zone."})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500 mb-2 block",children:"Description"}),a.jsx("textarea",{value:v.description,onChange:U=>_({...v,description:U.target.value}),className:"w-full h-40 bg-[#0a0a0c] border border-white/10 rounded-xl p-4 text-white resize-none focus:border-primary outline-none transition-colors leading-relaxed",placeholder:"Brief description of geography, climate, or importance..."})]})]})}),a.jsx(Cm,{stepNumber:"2",title:"Map Type",isOpen:w===2,onClick:()=>j(2),children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(Em,{icon:"public",title:"World Map",desc:"Continents, oceans, global scale.",selected:v.type==="world",onClick:()=>_({...v,type:"world"})}),a.jsx(Em,{icon:"map",title:"Regional Map",desc:"Kingdoms, provinces, biomes.",selected:v.type==="regional",onClick:()=>_({...v,type:"regional"})}),a.jsx(Em,{icon:"location_city",title:"City / Local",desc:"Cities, dungeons, battlemaps.",selected:v.type==="local",onClick:()=>_({...v,type:"local"})})]})}),a.jsx(Cm,{stepNumber:"3",title:"Canvas Source",isOpen:w===3,onClick:()=>j(3),children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{onClick:()=>document.getElementById("map-upload-input").click(),className:`relative p-8 rounded-xl border-2 border-dashed flex flex-col items-center justify-center text-center cursor-pointer transition-all group min-h-[200px] ${v.sourceType==="upload"?"border-primary bg-primary/5":"border-white/10 hover:border-white/30 bg-[#0a0a0c]"}`,children:[a.jsx("input",{id:"map-upload-input",type:"file",accept:"image/*",className:"hidden",onChange:ee}),v.bgImage?a.jsx("img",{src:v.bgImage,alt:"Preview",className:"absolute inset-0 w-full h-full object-cover rounded-xl opacity-50 group-hover:opacity-70"}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"size-16 bg-white/5 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:a.jsx("span",{className:"material-symbols-outlined text-3xl text-slate-400",children:"cloud_upload"})}),a.jsx("h4",{className:"font-bold text-white",children:"Upload Image File"}),a.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Drag & drop or click to browse"}),a.jsx("p",{className:"text-[10px] text-slate-600 mt-1 uppercase font-bold",children:"JPG, PNG, WEBP  Max 20MB"})]}),v.sourceType==="upload"&&a.jsx("div",{className:"absolute top-4 right-4 size-3 bg-primary rounded-full shadow-glow z-10"})]}),a.jsxs("div",{onClick:()=>_({...v,sourceType:"blank",bgImage:null}),className:`p-8 rounded-xl border flex flex-col items-center justify-center text-center cursor-pointer transition-all min-h-[200px] ${v.sourceType==="blank"?"border-primary bg-primary/5":"border-white/10 hover:border-white/30 bg-[#0a0a0c]"}`,children:[a.jsx("div",{className:"size-16 bg-white/5 rounded-full flex items-center justify-center mb-4",children:a.jsx("span",{className:"material-symbols-outlined text-3xl text-slate-400",children:"check_box_outline_blank"})}),a.jsx("h4",{className:"font-bold text-white",children:"Blank Canvas"}),a.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Start a new drawing from scratch"}),v.sourceType==="blank"&&a.jsxs("div",{className:"mt-6 flex items-center gap-2 bg-black/50 p-1 rounded-lg border border-white/10",children:[a.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-500 px-2",children:"Size"}),a.jsx("span",{className:"text-xs font-mono text-white",children:"4096 px"}),a.jsx("span",{className:"text-xs text-slate-500",children:"x"}),a.jsx("span",{className:"text-xs font-mono text-white",children:"4096 px"})]})]})]})})]})}),a.jsxs("div",{className:"h-20 border-t border-white/5 bg-[#0a0a0c] flex items-center justify-between px-8 z-20",children:[a.jsx("button",{onClick:()=>s(-1),className:"text-sm font-bold text-slate-500 hover:text-white transition-colors",children:"Cancel"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("span",{className:"text-xs text-slate-600 italic",children:"Changes saved locally"}),a.jsx(Ye,{variant:"primary",size:"lg",icon:"check",onClick:fe,disabled:!v.name||E,className:"bg-primary hover:bg-primary-light text-white shadow-lg shadow-primary/25 px-8",children:E?"Creating...":"Create Map"})]})]})]}):a.jsxs("div",{className:"flex flex-col h-screen w-full bg-[#0f0f13] text-white overflow-hidden",children:[a.jsxs("header",{className:"h-14 border-b border-white/5 flex items-center justify-between px-4 bg-[#1a1a20] shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:()=>s(-1),className:"p-2 hover:bg-white/5 rounded-full",title:"Back to Collection",children:a.jsx("span",{className:"material-symbols-outlined text-sm",children:"arrow_back"})}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("input",{value:v.name,onChange:U=>_({...v,name:U.target.value}),className:"bg-transparent font-bold text-sm outline-none focus:bg-white/5 rounded px-2 -ml-2"}),a.jsxs("span",{className:"text-[10px] text-text-muted px-2",children:[v.dims.width," x ",v.dims.height,"  ",(p==null?void 0:p.gridSize)||50,"px Grid"]})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx(Ye,{variant:"primary",size:"sm",icon:"save",onClick:ie,disabled:E,children:E?"Saving...":"Save Changes"})})]}),a.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[a.jsx("div",{className:"w-14 bg-[#1a1a20] border-r border-white/5 flex flex-col items-center py-4 gap-4 z-10",children:[{id:"select",icon:"near_me"},{id:"brush",icon:"brush"},{id:"eraser",icon:"ink_eraser"},{id:"rect",icon:"check_box_outline_blank"},{id:"text",icon:"title"}].map(U=>a.jsx("button",{onClick:()=>M(U.id),className:`p-2 rounded-lg transition-colors ${D===U.id?"bg-primary text-white shadow-lg shadow-primary/30":"hover:bg-white/5 text-slate-400 hover:text-white"}`,children:a.jsx("span",{className:"material-symbols-outlined",children:U.icon})},U.id))}),a.jsx("div",{className:"flex-1 overflow-auto bg-[#0f0f13] relative flex items-center justify-center p-8 custom-scrollbar",children:a.jsx("div",{className:"bg-[#1a1a20] shadow-[0_0_50px_rgba(0,0,0,0.5)] flex-none",children:a.jsxs(hz,{ref:ae,width:v.dims.width,height:v.dims.height,onMouseDown:z,onMouseMove:V,onMouseUp:J,className:"bg-white",children:[a.jsxs(bw,{children:[v.bgImage&&a.jsx(pz,{src:v.bgImage,x:0,y:0,width:v.dims.width,height:v.dims.height}),(p==null?void 0:p.showGrid)&&a.jsx(ww,{width:v.dims.width,height:v.dims.height,fillPatternImage:(()=>{const U=document.createElement("canvas");U.width=p.gridSize||50,U.height=p.gridSize||50;const X=U.getContext("2d");return X.strokeStyle="rgba(0,0,0,0.2)",X.lineWidth=1,X.strokeRect(0,0,U.width,U.height),U})(),listening:!1})]}),a.jsxs(bw,{children:[I.map((U,X)=>a.jsx(lz,{points:U.points,stroke:U.color,strokeWidth:U.size,tension:.5,lineCap:"round",lineJoin:"round",globalCompositeOperation:U.tool==="eraser"?"destination-out":"source-over"},X)),L.map((U,X)=>a.jsx(ww,{id:U.id,x:U.x,y:U.y,width:U.width,height:U.height,stroke:U.color,strokeWidth:2,draggable:D==="select",onClick:()=>D==="select"&&B(U.id),onTap:()=>D==="select"&&B(U.id)},U.id)),G.map((U,X)=>a.jsx(dz,{id:U.id,x:U.x,y:U.y,text:U.text,fontSize:U.fontSize,fill:U.color,draggable:D==="select",onClick:()=>D==="select"&&B(U.id),onTap:()=>D==="select"&&B(U.id),onDblClick:oe=>{H({isOpen:!0,id:U.id,text:U.text})}},U.id)),a.jsx(mz,{selectedId:$})]})]})})})]}),a.jsx(fz,{isOpen:K.isOpen,onClose:()=>H(U=>({...U,isOpen:!1})),title:"Edit Map Text",initialValue:K.text,onConfirm:U=>{R(X=>X.map(oe=>oe.id===K.id?{...oe,text:U}:oe))},confirmText:"Save Text"})]})};function gz(){return a.jsx(M_,{children:a.jsxs(S_,{children:[a.jsx(st,{path:"/",element:a.jsx(N7,{})}),a.jsxs(st,{element:a.jsx(m7,{}),children:[a.jsx(st,{path:"/dashboard",element:a.jsx(v7,{})}),a.jsxs(st,{path:"/:username/:projectName",element:a.jsx(C7,{}),children:[a.jsx(st,{index:!0,element:a.jsx(S7,{})}),a.jsx(st,{path:"writing",element:a.jsx(qT,{})}),a.jsx(st,{path:"entities/:type/:entityId",element:a.jsx(OT,{})}),a.jsx(st,{path:"settings",element:a.jsx(_7,{})}),a.jsx(st,{path:"map-editor/create/:folderId",element:a.jsx(Nw,{mode:"create"})}),a.jsx(st,{path:"map-editor/edit/:entityId",element:a.jsx(Nw,{mode:"edit"})}),a.jsxs(st,{path:"bible",element:a.jsx(lM,{}),children:[a.jsx(st,{index:!0,element:a.jsx(cM,{})}),a.jsx(st,{path:"folder/:folderSlug/entity/new/:type",element:a.jsx(Tl,{mode:"creation"})}),a.jsx(st,{path:"folder/:folderSlug",element:a.jsx(iM,{})}),a.jsx(st,{path:"entity/:entitySlug",element:a.jsx(Tl,{})}),a.jsx(st,{path:"folder/:folderSlug/entity/:entitySlug",element:a.jsx(Tl,{})}),a.jsx(st,{path:"folder/:folderSlug/map/:entitySlug",element:a.jsx(Tl,{})}),a.jsx(st,{path:"folder/:folderSlug/timeline/:entitySlug",element:a.jsx(Tl,{})})]}),a.jsx(st,{path:"map",element:a.jsx(WT,{})}),a.jsx(st,{path:"timeline",element:a.jsx(UT,{})}),a.jsx(st,{path:"languages",element:a.jsx(QT,{})}),a.jsx(st,{path:"trash",element:a.jsx(ZT,{})}),a.jsx(st,{path:"graph",element:a.jsx(IT,{})})]})]})]})})}class xz extends te.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,n){this.setState({error:t,errorInfo:n}),console.error("Uncaught Error:",t,n)}render(){return this.state.hasError?a.jsxs("div",{style:{padding:20,background:"#222",color:"red",height:"100vh"},children:[a.jsx("h1",{children:"Something went wrong."}),a.jsxs("details",{style:{whiteSpace:"pre-wrap"},children:[this.state.error&&this.state.error.toString(),a.jsx("br",{}),this.state.errorInfo&&this.state.errorInfo.componentStack]})]}):this.props.children}}const Sw=document.getElementById("root");Sw?Pm.createRoot(Sw).render(a.jsx(te.StrictMode,{children:a.jsx(xz,{children:a.jsx(gz,{})})})):console.error("React root element not found (looked for #root)");
